import Kw from"http";import{apiReference as Vw}from"@scalar/express-api-reference";import zw from"cors";import Mu from"express";import cT from"zod";var ue=class extends Error{};var ge=class extends Error{};var be=class extends Error{};var c=class extends Error{};var Fe=class extends Error{};import{ZodError as mT}from"zod";var _i=class extends mT{};var Li=class{handle(e,t,o,i){return e instanceof _i?o.status(400).json({message:"Validation error",error:cT.treeifyError(e)}):e instanceof ue?o.status(400).json({message:e.message}):e instanceof c?o.status(404).json({message:e.message}):e instanceof Fe?o.status(401).json({message:e.message}):e instanceof ge?o.status(409).json({message:e.message}):e instanceof be?o.status(500).json({message:e.message}):o.status(500).json({message:"Internal server error"})}};function wu(){return{errorHandler:new Li}}import{OpenAPIRegistry as xx,OpenApiGeneratorV3 as Mx}from"@asteasolutions/zod-to-openapi";import b from"zod";var le={ADMIN:"ADMIN",USER:"USER"},Me={PENDING:"PENDING",PAID:"PAID"},It={SENIOR:"SENIOR",RESEARCHER:"RESEARCHER",JUNIOR:"JUNIOR",HONOR:"HONOR"},St={DOCTOR:"DOCTOR",MASTER:"MASTER",BACHELOR:"BACHELOR",TECHNICAL:"TECHNICAL",POSTGRADUATE:"POSTGRADUATE"},Xe={RESEARCHER:"RESEARCHER",LEADER:"LEADER"},Le={DRAFT:"DRAFT",IN_FORCE:"IN_FORCE",REVOKED:"REVOKED"},we={ONLINE:"ONLINE",IN_PERSON:"IN_PERSON"},Ae={PENDING:"PENDING",CANCELLED:"CANCELLED",FINISHED:"FINISHED"},He={ONLINE:"ONLINE",IN_PERSON:"IN_PERSON"},Qe={PENDING:"PENDING",CANCELLED:"CANCELLED",FINISHED:"FINISHED"},vu={PERSON:"PERSON",INSTITUTION:"INSTITUTION"};import{extendZodWithOpenApi as dT}from"@asteasolutions/zod-to-openapi";import Qt from"zod";var lT=1;dT(Qt);var Gm=Qt.object({page:Qt.coerce.number().min(1).default(lT),limit:Qt.coerce.number().optional(),title:Qt.string().optional(),description:Qt.string().optional(),orderBy:Qt.enum(["asc","desc"]).default("desc")}),Hi=class{constructor(e){this.certificationRepository=e}async handle(e,t){let{title:o,description:i,limit:n,orderBy:s,page:a}=Gm.parse(e.query),m=n?n*a-n:void 0,p=e.user.id,[f,I]=await Promise.all([this.certificationRepository.findByUserId({userId:p,pagination:{offset:m,limit:n},filter:{title:o,description:i,orderBy:s}}),this.certificationRepository.count({filter:{title:o,description:i,userId:p}})]),L=n?Math.max(Math.ceil(I/n),1):1;return t.status(200).json({page:a,totalPages:L,offset:m,limit:n,totalCertifications:I,certifications:f})}};import{extendZodWithOpenApi as uT}from"@asteasolutions/zod-to-openapi";import er from"zod";var gT=1;uT(er);var _m=er.object({page:er.coerce.number().min(1).default(gT),limit:er.coerce.number().optional(),title:er.string().optional(),content:er.string().optional(),orderBy:er.enum(["asc","desc"]).default("desc")}),Wi=class{constructor(e){this.newsRepository=e}async handle(e,t){let{page:o,limit:i,content:n,orderBy:s,title:a}=_m.parse(e.query),m=i?i*o-i:void 0,p=e.user.id,[f,I]=await Promise.all([this.newsRepository.findByAuthorId({authorId:p,pagination:{offset:m,limit:i},filter:{orderBy:s,title:a,content:n}}),this.newsRepository.count({filter:{authorId:p,content:n,title:a}})]),L=i?Math.max(Math.ceil(I/i),1):1;t.status(200).json({page:o,totalPages:L,offset:m,limit:i,news:f})}};import{extendZodWithOpenApi as yT}from"@asteasolutions/zod-to-openapi";import Et from"zod";var fT=1;yT(Et);var Lm=Et.object({page:Et.coerce.number().min(1).default(fT),limit:Et.coerce.number().optional(),title:Et.string().optional(),description:Et.string().optional(),status:Et.enum(Me).default("PENDING"),orderBy:Et.enum(["asc","desc"]).default("desc")}),$i=class{constructor(e){this.pendencyRepository=e}async handle(e,t){let{limit:o,page:i,...n}=Lm.parse(e.query),s=o?o*i-o:void 0,a=e.user.id,[m,p]=await Promise.all([this.pendencyRepository.findByUserId({userId:a,pagination:{offset:s,limit:o},filter:n}),this.pendencyRepository.count({filter:{...n,userId:a}})]),f=o?Math.max(Math.ceil(p/o),1):1;return t.status(200).json({page:i,totalPages:f,offset:s,limit:o,pendencies:m})}};import{extendZodWithOpenApi as hT}from"@asteasolutions/zod-to-openapi";import Vi from"zod";hT(Vi);var Hm=Vi.object({password:Vi.string(),email:Vi.email()}),zi=class{constructor(e,t,o){this.userRepository=e;this.bcrypt=t;this.jwtService=o}async handle(e,t){let{email:o,password:i}=Hm.parse(e.body),n=await this.userRepository.findByEmail(o);if(!n)return t.status(401).json({message:"Usu\xE1rio n\xE3o existe."});if(!await this.bcrypt.compare({password:i,hashedPassword:n.passwordHash}))throw new Fe("Senha inv\xE1lida.");let{id:a,role:m}=n,p=this.jwtService.sign({id:a,role:m,email:o});return t.status(200).json({token:p})}};import{extendZodWithOpenApi as RT}from"@asteasolutions/zod-to-openapi";import Dr from"zod";var Zi=8;RT(Dr);var Wm=Dr.object({name:Dr.string("Nome \xE9 obrigat\xF3rio.").min(1,"Nome \xE9 obrigat\xF3rio."),emailAddress:Dr.email("E-mail inv\xE1lido.").min(1,"E-mail \xE9 obrigat\xF3rio."),password:Dr.string("A senha \xE9 obrigat\xF3ria.").min(Zi,`A senha deve ter pelo menos ${Zi} caracteres.`),confirmPassword:Dr.string("A senha \xE9 obrigat\xF3ria.").min(Zi,`A senha deve ter pelo menos ${Zi} caracteres.`)}).refine(r=>r.password===r.confirmPassword,{message:"As senhas n\xE3o coincidem.",path:["confirmPassword"]}),Ki=class{constructor(e,t){this.userRepository=e;this.bcrypt=t}async handle(e,t){let{emailAddress:o,name:i,password:n}=Wm.parse(e.body);if(await this.userRepository.findByEmail(o))throw new ge("Usu\xE1rio j\xE1 existe.");let a=await this.bcrypt.hash(n);return await this.userRepository.create({name:i,emailAddress:o,passwordHash:a}),t.status(201).json()}};var Uu={method:"post",path:"/auth/sign-up",tags:["Authentication"],summary:"Create a new user",request:{body:{content:{"application/json":{schema:Wm}}}},responses:{201:{description:"User created successfully",summary:"User Registration Successful",content:{"application/json":{schema:b.object({message:b.string()})}}},400:{description:"Invalid input data provided",summary:"Validation Error",content:{"application/json":{schema:b.object({errors:b.record(b.string(),b.string())})}}},409:{description:"User already exists with this email",summary:"User Already Exists",content:{"application/json":{schema:b.object({message:b.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:b.object({message:b.string()})}}}}},ju={method:"post",path:"/auth/sign-in",tags:["Authentication"],summary:"Sign in",request:{body:{content:{"application/json":{schema:Hm}}}},responses:{200:{description:"Authentication successful, JWT token returned",summary:"Login Successful",content:{"application/json":{schema:b.object({token:b.string()})}}},400:{description:"Invalid credentials or input data",summary:"Validation Error",content:{"application/json":{schema:b.object({errors:b.record(b.string(),b.string())})}}},401:{description:"Invalid email or password",summary:"Authentication Failed",content:{"application/json":{schema:b.object({message:b.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:b.object({message:b.string()})}}}}},ku={method:"get",path:"/auth/user",tags:["Authentication"],summary:"Search for authenticated user",security:[{bearerAuth:[]}],responses:{200:{description:"Authenticated user information retrieved successfully",summary:"User Information Retrieved",content:{"application/json":{schema:b.object({name:b.string(),id:b.string(),avatarUrl:b.string().nullable(),createdAt:b.date(),updatedAt:b.date(),emailAddress:b.string(),orcid:b.string().nullable(),phone:b.string().nullable(),lattesUrl:b.string().nullable(),role:b.enum(le)}).nullable()}}},400:{description:"Invalid request parameters",summary:"Validation Error",content:{"application/json":{schema:b.object({errors:b.record(b.string(),b.string())})}}},404:{description:"User not found or not authenticated",summary:"User Not Found",content:{"application/json":{schema:b.object({message:b.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:b.object({message:b.string()})}}}}},Fu={method:"get",path:"/auth/user/news",tags:["Authentication"],summary:"List authenticated user news",security:[{bearerAuth:[]}],request:{query:_m},responses:{200:{description:"Paginated list of authenticated user news retrieved successfully",summary:"User News Retrieved",content:{"application/json":{schema:b.object({page:b.number(),totalPages:b.number(),offset:b.number().optional(),limit:b.number().optional(),news:b.object({content:b.string(),id:b.string(),title:b.string(),createdAt:b.date(),updatedAt:b.date(),imageUrl:b.string().nullable()})})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:b.object({errors:b.record(b.string(),b.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:b.object({message:b.string()})}}}}},Du={method:"get",path:"/auth/admin",tags:["Authentication"],summary:"Verify admin access",security:[{bearerAuth:[]}],responses:{200:{description:"Admin access verified successfully",summary:"Admin Access Granted",content:{"application/json":{schema:b.object({success:b.boolean()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:b.object({message:b.string()})}}}}},Ou={method:"get",path:"/auth/certifications",tags:["Authentication"],summary:"List all authenticated user's certifications",security:[{bearerAuth:[]}],request:{query:Gm},responses:{200:{description:"Paginated list of authenticated user certifications retrieved successfully",summary:"User Certifications Retrieved",content:{"application/json":{schema:b.object({page:b.number(),totalPages:b.number(),offset:b.number().optional(),limit:b.number().optional(),certifications:b.object({description:b.string(),id:b.string(),title:b.string(),certificationUrl:b.string(),createdAt:b.date(),updatedAt:b.date(),userId:b.string()})})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:b.object({errors:b.record(b.string(),b.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:b.object({message:b.string()})}}}}},Bu={method:"get",path:"/auth/pendencies",tags:["Authentication"],summary:"List all authenticated user's pendencies",security:[{bearerAuth:[]}],request:{query:Lm},responses:{200:{description:"Paginated list of authenticated user pendencies retrieved successfully",summary:"User Pendencies Retrieved",content:{"application/json":{schema:b.object({page:b.number(),totalPages:b.number(),offset:b.number().optional(),limit:b.number().optional(),pendencies:b.object({id:b.string(),title:b.string(),description:b.string(),status:b.enum(Me),createdAt:b.date(),updatedAt:b.date(),userId:b.string()})})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:b.object({errors:b.record(b.string(),b.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:b.object({message:b.string()})}}}}};import R from"zod";import{extendZodWithOpenApi as PT}from"@asteasolutions/zod-to-openapi";import $m from"zod";PT($m);var Vm=$m.object({id:$m.uuid()}),Ji=class{constructor(e,t){this.bookVolumeRepository=e;this.firebaseStorageService=t}async handle(e,t){let{id:o}=Vm.parse({id:e.params.id}),i=await this.bookVolumeRepository.findById(o);if(!i)throw new c("O volume de livro n\xE3o existe.");return i.authorImageUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.authorImageUrl}),i.coverImageUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.coverImageUrl}),i.catalogSheetUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.catalogSheetUrl}),await this.bookVolumeRepository.deleteById(o),t.sendStatus(200)}};import{extendZodWithOpenApi as bT}from"@asteasolutions/zod-to-openapi";import zm from"zod";bT(zm);var Zm=zm.object({id:zm.uuid()}),Yi=class{constructor(e){this.bookVolumeRepository=e}async handle(e,t){let{id:o}=Zm.parse({id:e.params.id}),i=await this.bookVolumeRepository.findById(o);if(!i)throw new c("Volume de livro n\xE3o encontrado.");return t.status(200).json(i)}};import{extendZodWithOpenApi as CT}from"@asteasolutions/zod-to-openapi";import xt from"zod";var TT=1;CT(xt);var Km=xt.object({page:xt.coerce.number().min(1).default(TT),limit:xt.coerce.number().optional(),title:xt.string().optional(),author:xt.string().optional(),description:xt.string().optional(),orderBy:xt.enum(["asc","desc"]).default("desc")}),Xi=class{constructor(e){this.bookVolumeRepository=e}async handle(e,t){let{limit:o,page:i,...n}=Km.parse(e.query),s=o?o*i-o:void 0,[a,m]=await Promise.all([this.bookVolumeRepository.find({pagination:{offset:s,limit:o},filter:n}),this.bookVolumeRepository.count({filter:n})]),p=o?Math.max(Math.ceil(m/o),1):1;return t.status(200).json({page:i,totalPages:p,offset:s,limit:o,bookVolumes:a})}};import{extendZodWithOpenApi as AT}from"@asteasolutions/zod-to-openapi";import We from"zod";var x={NEWS:"images/news",USER:"images/user",IN_MEMORIAM:"images/in-memoriam",PARTNER:"images/partners",CERTIFICATION:"documents/certifications",PENDENCY:"documents/pendencies",REGIMENT:"documents/regiments",MEETING_MINUTE:"documents/meeting-minutes",INTERNATIONAL_SCIENTIFIC_CONGRESS_GALLERY:"images/international-scientific-congress-gallery",GALLERY:"images/regional-congress-gallery",REGIONAL_CONGRESS_GALLERY:"images/regional-congress-gallery",WEBINAR:"images/webinars",COURSE:"images/courses",POST_GRADUATE_PROGRAM:"images/post-graduate-programs",EVENT:"images/events",SCIENTIFIC_JOURNAL:"images/scientific-journals",BOOK_VOLUME_AUTHOR_IMAGE:"images/book-volumes/authors",BOOK_VOLUME_COVER:"images/book-volumes/covers",BOOK_VOLUME_CATALOG_SHEET:"documents/book-volumes/catalog-sheets",RESEARCH_GROUP_LOGO:"images/research-groups",MUSEUM:"images/museums",REDECT_HIGHLIGHT:"images/redect-highlights",FINANCIAL_TRANSACTION_STATEMENT:"documents/financial-transaction-statements"};var Nu=5,qu=1024,IT=qu*qu,ST=Nu*IT;AT(We);var Jm=We.object({id:We.uuid(),volumeNumber:We.coerce.number().int().positive().optional(),year:We.coerce.number().int().positive().optional(),title:We.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio.").optional(),authorId:We.string().uuid("ID do autor deve ser um UUID v\xE1lido.").optional(),accessUrl:We.string().url("URL de acesso deve ser v\xE1lida").optional(),catalogSheetUrl:We.string().url("URL da ficha catalogr\xE1fica deve ser v\xE1lida").optional(),description:We.string().optional(),coverImage:We.any().refine(r=>r==null?!0:typeof r!="object"||typeof r.size!="number"?!1:r.size<=ST,`A imagem da capa deve ter no m\xE1ximo ${Nu}MB.`).optional()}),Qi=class{constructor(e,t){this.bookVolumeRepository=e;this.firebaseStorageService=t}async handle(e,t){let{id:o,volumeNumber:i,year:n,title:s,authorId:a,accessUrl:m,catalogSheetUrl:p,description:f,coverImage:I}=Jm.parse({id:e.params.id,...e.body,coverImage:e.files?.coverImage?.[0]}),L=await this.bookVolumeRepository.findById(o);if(!L)throw new c("O volume de livro n\xE3o existe.");let ie=L.coverImageUrl;return I&&(ie=await this.firebaseStorageService.uploadFile({file:I,id:o,folder:x.BOOK_VOLUME_COVER})),await this.bookVolumeRepository.update({id:o,volumeNumber:i,year:n,title:s,authorId:a,accessUrl:m,catalogSheetUrl:p,description:f,coverImageUrl:ie}),t.sendStatus(200)}};var Gu={method:"post",path:"/book-volumes",tags:["Book Volumes"],summary:"Create book volume",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:R.object({volumeNumber:R.number().int().positive().openapi({description:"N\xFAmero do volume"}),year:R.number().int().positive().openapi({description:"Ano de publica\xE7\xE3o"}),title:R.string().min(1).openapi({description:"T\xEDtulo do livro"}),author:R.string().uuid().openapi({description:"ID do autor (UUID)"}),accessUrl:R.string().url().optional().openapi({description:"URL de acesso ao livro"}),description:R.string().optional().openapi({description:"Descri\xE7\xE3o do livro"}),authorImage:R.string().optional().openapi({description:"Imagem do autor (m\xE1ximo 5MB)",type:"string",format:"binary"}),coverImage:R.string().optional().openapi({description:"Imagem da capa (m\xE1ximo 5MB)",type:"string",format:"binary"}),catalogSheet:R.string().optional().openapi({description:"Ficha catalogr\xE1fica (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{201:{description:"Book volume created successfully",summary:"Volume Created"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:R.object({errors:R.record(R.string(),R.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:R.object({message:R.string()})}}}}},_u={method:"get",path:"/book-volumes",tags:["Book Volumes"],summary:"List book volumes",security:[{bearerAuth:[]}],request:{query:Km},responses:{200:{description:"Paginated list of book volumes retrieved successfully",summary:"Volumes Retrieved",content:{"application/json":{schema:R.object({page:R.number(),totalPages:R.number(),offset:R.number().optional(),limit:R.number().optional(),bookVolumes:R.array(R.object({id:R.string(),volumeNumber:R.number(),year:R.number(),title:R.string(),author:R.object({id:R.string(),name:R.string(),emailAddress:R.string(),avatarUrl:R.string().nullable(),orcid:R.string().nullable(),lattesUrl:R.string().nullable(),role:R.string()}),accessUrl:R.string().nullable(),authorImageUrl:R.string().nullable(),coverImageUrl:R.string().nullable(),catalogSheetUrl:R.string().nullable(),description:R.string().nullable(),createdAt:R.date(),updatedAt:R.date()}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:R.object({errors:R.record(R.string(),R.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:R.object({message:R.string()})}}}}},Lu={method:"get",path:"/book-volumes/{id}",tags:["Book Volumes"],summary:"Find book volume by ID",security:[{bearerAuth:[]}],request:{params:Zm},responses:{200:{description:"Book volume details retrieved successfully",summary:"Volume Retrieved",content:{"application/json":{schema:R.object({id:R.string(),volumeNumber:R.number(),year:R.number(),title:R.string(),author:R.object({id:R.string(),name:R.string(),emailAddress:R.string(),avatarUrl:R.string().nullable(),orcid:R.string().nullable(),lattesUrl:R.string().nullable(),role:R.string()}),accessUrl:R.string().nullable(),authorImageUrl:R.string().nullable(),coverImageUrl:R.string().nullable(),catalogSheetUrl:R.string().nullable(),description:R.string().nullable(),createdAt:R.date(),updatedAt:R.date()}).nullable()}}},400:{description:"Invalid volume ID format",summary:"Validation Error",content:{"application/json":{schema:R.object({errors:R.record(R.string(),R.string())})}}},404:{description:"Book volume not found with the provided ID",summary:"Volume Not Found",content:{"application/json":{schema:R.object({message:R.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:R.object({message:R.string()})}}}}},Hu={method:"put",path:"/book-volumes/{id}",tags:["Book Volumes"],summary:"Update book volume",security:[{bearerAuth:[]}],request:{params:Jm.pick({id:!0}),body:{content:{"multipart/form-data":{schema:R.object({volumeNumber:R.number().int().positive().optional().openapi({description:"N\xFAmero do volume"}),year:R.number().int().positive().optional().openapi({description:"Ano de publica\xE7\xE3o"}),title:R.string().min(1).optional().openapi({description:"T\xEDtulo do livro"}),authorId:R.string().uuid().optional().openapi({description:"ID do autor (UUID)"}),accessUrl:R.string().url().optional().openapi({description:"URL de acesso ao livro"}),description:R.string().optional().openapi({description:"Descri\xE7\xE3o do livro"}),authorImage:R.string().optional().openapi({description:"Imagem do autor (m\xE1ximo 5MB)",type:"string",format:"binary"}),coverImage:R.string().optional().openapi({description:"Imagem da capa (m\xE1ximo 5MB)",type:"string",format:"binary"}),catalogSheet:R.string().optional().openapi({description:"Ficha catalogr\xE1fica (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{200:{description:"Book volume updated successfully",summary:"Volume Updated"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:R.object({errors:R.record(R.string(),R.string())})}}},404:{description:"Book volume not found with the provided ID",summary:"Volume Not Found",content:{"application/json":{schema:R.object({message:R.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:R.object({message:R.string()})}}}}},Wu={method:"delete",path:"/book-volumes/{id}",tags:["Book Volumes"],summary:"Delete book volume",security:[{bearerAuth:[]}],request:{params:Vm},responses:{200:{description:"Book volume deleted successfully",summary:"Volume Deleted"},400:{description:"Invalid volume ID format",summary:"Validation Error",content:{"application/json":{schema:R.object({errors:R.record(R.string(),R.string())})}}},404:{description:"Book volume not found with the provided ID",summary:"Volume Not Found",content:{"application/json":{schema:R.object({message:R.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:R.object({message:R.string()})}}}}};import w from"zod";import{extendZodWithOpenApi as ET}from"@asteasolutions/zod-to-openapi";import Ym from"zod";ET(Ym);var Xm=Ym.object({id:Ym.string()}),eo=class{constructor(e,t){this.certificationRepository=e;this.firebaseStorageService=t}async handle(e,t){let{id:o}=Xm.parse({id:e.params.certification_id}),i=await this.certificationRepository.findById(o);if(!i)throw new c("A certifica\xE7\xE3o n\xE3o existe.");return await Promise.all([this.certificationRepository.deleteById(i.id),this.firebaseStorageService.deleteFile({fileUrl:i.certificationUrl})]),t.sendStatus(204)}};import{extendZodWithOpenApi as xT}from"@asteasolutions/zod-to-openapi";import Qm from"zod";xT(Qm);var ec=Qm.object({id:Qm.uuid()}),to=class{constructor(e){this.certificationRepository=e}async handle(e,t){let{id:o}=ec.parse(e.params),i=await this.certificationRepository.findById(o);if(!i)throw new c("Certificado n\xE3o encontrado.");return t.status(200).json(i)}};import{extendZodWithOpenApi as MT}from"@asteasolutions/zod-to-openapi";import Mt from"zod";var wT=1;MT(Mt);var tc=Mt.object({page:Mt.coerce.number().min(1).default(wT),limit:Mt.coerce.number().optional(),title:Mt.string().optional(),description:Mt.string().optional(),userId:Mt.uuid().optional(),orderBy:Mt.enum(["asc","desc"]).default("desc")}),ro=class{constructor(e){this.certificationRepository=e}async handle(e,t){let{limit:o,page:i,...n}=tc.parse(e.query),s=o?o*i-o:void 0,[a,m]=await Promise.all([this.certificationRepository.find({pagination:{offset:s,limit:o},filter:n}),this.certificationRepository.count({filter:n})]),p=o?Math.max(Math.ceil(m/o),1):1;return t.status(200).json({page:i,totalPages:p,offset:s,limit:o,certifications:a})}};import{extendZodWithOpenApi as vT}from"@asteasolutions/zod-to-openapi";import Or from"zod";vT(Or);var rc=Or.object({userId:Or.uuid(),title:Or.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),description:Or.string().min(1,"Descri\xE7\xE3o \xE9 obrigat\xF3ria."),certification:Or.any().refine(r=>r&&typeof r=="object"&&r.size>0,"Arquivo do certificado \xE9 obrigat\xF3rio")}),io=class{constructor(e,t,o){this.userRepository=e;this.certificationRepository=t;this.firebaseStorageService=o}async handle(e,t){let{userId:o,title:i,description:n,certification:s}=rc.parse({...e.body,userId:e.params.user_id,certification:e.file});if(!await this.userRepository.findById(o))throw new ue("O usu\xE1rio n\xE3o existe.");let m=await this.firebaseStorageService.uploadFile({file:s,id:o,folder:x.CERTIFICATION});return await this.certificationRepository.register({userId:o,title:i,description:n,certificationUrl:m}),t.sendStatus(201)}};import{extendZodWithOpenApi as UT}from"@asteasolutions/zod-to-openapi";import Br from"zod";UT(Br);var no=Br.object({id:Br.uuid(),title:Br.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),description:Br.string().min(1,"Descri\xE7\xE3o \xE9 obrigat\xF3ria."),certification:Br.any().refine(r=>r==null||typeof r=="object"&&typeof r.size=="number"&&(r.size===0||r.size>0),"Arquivo do certificado \xE9 inv\xE1lido").optional()}),oo=class{constructor(e,t){this.certificationRepository=e;this.firebaseStorageService=t}async handle(e,t){let{certification:o,id:i,...n}=no.parse({...e.body,id:e.params.id,certification:e.file}),s=await this.certificationRepository.findById(i);if(!s)throw new ue("A certifica\xE7\xE3o n\xE3o existe");let a=s.certificationUrl;return o&&o.size>0&&(a=await this.firebaseStorageService.updateFile({file:o,id:s.userId,folder:x.CERTIFICATION,fileUrl:s.certificationUrl})),await this.certificationRepository.update({...n,id:i,certificationUrl:a}),t.sendStatus(204)}};var $u={method:"post",path:"/certifications/{user_id}",tags:["Certifications"],summary:"Register certification for user",security:[{bearerAuth:[]}],request:{params:w.object({user_id:w.string().openapi({param:{name:"user_id",in:"path"}})}),body:{content:{"multipart/form-data":{schema:rc.omit({userId:!0})}}}},responses:{201:{description:"Certification registered successfully for the user",summary:"Certification Registered",content:{"application/json":{schema:w.object({message:w.string()})}}},400:{description:"Invalid input data or file format",summary:"Validation Error",content:{"application/json":{schema:w.object({errors:w.record(w.string(),w.string())})}}},404:{description:"User not found with the provided ID",summary:"User Not Found",content:{"application/json":{schema:w.object({message:w.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:w.object({message:w.string()})}}}}},Vu={method:"get",path:"/certifications",tags:["Certifications"],summary:"List certifications",security:[{bearerAuth:[]}],request:{query:tc},responses:{200:{description:"Paginated list of certifications with user information retrieved successfully",summary:"Certifications Retrieved",content:{"application/json":{schema:w.object({page:w.number(),totalPages:w.number(),offset:w.number().optional(),limit:w.number().optional(),certifications:w.array(w.object({description:w.string(),userId:w.string(),title:w.string(),id:w.string(),createdAt:w.date(),updatedAt:w.date(),certificationUrl:w.url(),user:w.object({id:w.uuid(),name:w.string(),createdAt:w.date(),updatedAt:w.date(),avatarUrl:w.string().nullable(),emailAddress:w.email(),orcid:w.string().nullable(),phone:w.string().nullable(),lattesUrl:w.url().nullable(),role:w.enum(le)})}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:w.object({errors:w.record(w.string(),w.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:w.object({message:w.string()})}}}}},zu={method:"get",path:"/certifications/{certification_id}",tags:["Certifications"],summary:"Find certification by ID",security:[{bearerAuth:[]}],request:{params:ec},responses:{200:{description:"Certification details retrieved successfully",summary:"Certification Retrieved",content:{"application/json":{schema:w.object({description:w.string(),userId:w.string(),title:w.string(),id:w.string(),createdAt:w.date(),updatedAt:w.date(),certificationUrl:w.url()}).nullable()}}},400:{description:"Invalid certification ID format",summary:"Validation Error",content:{"application/json":{schema:w.object({errors:w.record(w.string(),w.string())})}}},404:{description:"Certification not found with the provided ID",summary:"Certification Not Found",content:{"application/json":{schema:w.object({message:w.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:w.object({message:w.string()})}}}}},Zu={method:"put",path:"/certifications/{certification_id}",tags:["Certifications"],summary:"Update certification",security:[{bearerAuth:[]}],request:{params:no.pick({id:!0}).transform(()=>({certification_id:""})),body:{content:{"multipart/form-data":{schema:no.omit({id:!0})}}}},responses:{204:{description:"Certification updated successfully",summary:"Certification Updated"},400:{description:"Invalid input data or file format",summary:"Validation Error",content:{"application/json":{schema:w.object({errors:w.record(w.string(),w.string())})}}},404:{description:"Certification not found with the provided ID",summary:"Certification Not Found",content:{"application/json":{schema:w.object({message:w.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:w.object({message:w.string()})}}}}},Ku={method:"delete",path:"/certifications/{certification_id}",tags:["Certifications"],summary:"Delete certification",security:[{bearerAuth:[]}],request:{params:Xm},responses:{204:{description:"Certification deleted successfully",summary:"Certification Deleted"},400:{description:"Invalid certification ID format",summary:"Validation Error",content:{"application/json":{schema:w.object({errors:w.record(w.string(),w.string())})}}},404:{description:"Certification not found with the provided ID",summary:"Certification Not Found",content:{"application/json":{schema:w.object({message:w.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:w.object({message:w.string()})}}}}};import oe from"zod";import{extendZodWithOpenApi as jT}from"@asteasolutions/zod-to-openapi";import so from"zod";jT(so);var ic=so.object({type:so.enum(["EXCLUSIVE_REDECT_USE","EVENTS","COLLOQUIUM"]),balance:so.number().positive("O saldo deve ser positivo")}),ao=class{constructor(e){this.checkingAccountRepository=e}async handle(e,t){let{type:o,balance:i}=ic.parse(e.body),n=i*100,s=await this.checkingAccountRepository.create({type:o,balanceInCents:n});return t.status(201).json({...s,balance:s.balanceInCents/100})}};import{extendZodWithOpenApi as kT}from"@asteasolutions/zod-to-openapi";import oc from"zod";kT(oc);var nc=oc.object({id:oc.uuid()}),mo=class{constructor(e){this.checkingAccountRepository=e}async handle(e,t){let{id:o}=nc.parse(e.params);if(!await this.checkingAccountRepository.findById(o))throw new c("Conta corrente n\xE3o encontrada.");return await this.checkingAccountRepository.deleteById(o),t.status(200).send()}};import{extendZodWithOpenApi as FT}from"@asteasolutions/zod-to-openapi";import sc from"zod";FT(sc);var ac=sc.object({id:sc.uuid()}),co=class{constructor(e){this.checkingAccountRepository=e}async handle(e,t){let{id:o}=ac.parse(e.params),i=await this.checkingAccountRepository.findById(o);if(!i)throw new c("Conta corrente n\xE3o encontrada.");return t.status(200).json({...i,balance:i.balanceInCents/100})}};import{extendZodWithOpenApi as DT}from"@asteasolutions/zod-to-openapi";import qr from"zod";var OT=1;DT(qr);var mc=qr.object({page:qr.coerce.number().min(1).default(OT),limit:qr.coerce.number().optional(),type:qr.enum(["EXCLUSIVE_REDECT_USE","EVENTS","COLLOQUIUM"]).optional(),orderBy:qr.enum(["asc","desc"]).default("desc")}),po=class{constructor(e){this.checkingAccountRepository=e}async handle(e,t){let{page:o,limit:i,type:n,orderBy:s}=mc.parse(e.query),a=i?i*o-i:void 0,[m,p]=await Promise.all([this.checkingAccountRepository.find({pagination:{offset:a,limit:i},filter:{type:n,orderBy:s}}),this.checkingAccountRepository.count({filter:{type:n}})]),f=i?Math.max(Math.ceil(p/i),1):1;return t.status(200).json({page:o,totalPages:f,offset:a,limit:i,checkingAccounts:m.map(I=>({...I,balance:I.balanceInCents/100}))})}};import{extendZodWithOpenApi as BT}from"@asteasolutions/zod-to-openapi";import cc from"zod";BT(cc);var pc=cc.object({type:cc.enum(["EXCLUSIVE_REDECT_USE","EVENTS","COLLOQUIUM"])}),lo=class{constructor(e){this.checkingAccountRepository=e}async handle(e,t){let{type:o}=pc.parse(e.params),i=await this.checkingAccountRepository.findLatestByType(o);return i?t.status(200).json({...i,balance:i.balanceInCents/100}):t.status(200).json(null)}};import{extendZodWithOpenApi as qT}from"@asteasolutions/zod-to-openapi";import Ii from"zod";qT(Ii);var go=Ii.object({id:Ii.uuid(),type:Ii.enum(["EXCLUSIVE_REDECT_USE","EVENTS","COLLOQUIUM"]).optional(),balance:Ii.number().positive("O saldo deve ser positivo").optional()}),uo=class{constructor(e){this.checkingAccountRepository=e}async handle(e,t){let{id:o,type:i,balance:n}=go.parse({...e.body,...e.params});if(!await this.checkingAccountRepository.findById(o))throw new c("Conta corrente n\xE3o encontrada.");let a=n?n*100:void 0;return await this.checkingAccountRepository.update({id:o,type:i,balanceInCents:a}),t.status(200).send()}};var tr=oe.object({id:oe.uuid(),type:oe.enum(["EXCLUSIVE_REDECT_USE","EVENTS","COLLOQUIUM"]),balance:oe.number(),balanceInCents:oe.number(),createdAt:oe.date(),updatedAt:oe.date()}),Ju={method:"post",path:"/checking-account",tags:["Checking Accounts"],summary:"Create a new checking account",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:ic}}}},responses:{201:{description:"Checking account created successfully",content:{"application/json":{schema:tr}}},400:{description:"Invalid input data",content:{"application/json":{schema:oe.object({errors:oe.record(oe.string(),oe.string())})}}},401:{description:"User not authenticated",content:{"application/json":{schema:oe.object({message:oe.string()})}}}}},Yu={method:"get",path:"/checking-account",tags:["Checking Accounts"],summary:"List all checking accounts with pagination",request:{query:mc},responses:{200:{description:"List of checking accounts retrieved successfully",content:{"application/json":{schema:oe.object({page:oe.number(),totalPages:oe.number(),offset:oe.number(),limit:oe.number(),checkingAccounts:oe.array(tr)})}}}}},Xu={method:"get",path:"/checking-account/total-balance",tags:["Checking Accounts"],summary:"Get total balance from latest records of all 3 account types",responses:{200:{description:"Total balance calculated successfully",content:{"application/json":{schema:oe.object({totalBalance:oe.number(),totalBalanceInCents:oe.number(),accounts:oe.object({exclusiveRedectUse:tr.pick({id:!0,balanceInCents:!0,updatedAt:!0}).extend({balance:oe.number()}).nullable(),events:tr.pick({id:!0,balanceInCents:!0,updatedAt:!0}).extend({balance:oe.number()}).nullable(),colloquium:tr.pick({id:!0,balanceInCents:!0,updatedAt:!0}).extend({balance:oe.number()}).nullable()})})}}}}},Qu={method:"get",path:"/checking-account/latest/{type}",tags:["Checking Accounts"],summary:"Get latest checking account by type",request:{params:pc},responses:{200:{description:"Latest checking account retrieved successfully",content:{"application/json":{schema:tr.nullable()}}}}},eg={method:"get",path:"/checking-account/{id}",tags:["Checking Accounts"],summary:"Find checking account by ID",request:{params:ac},responses:{200:{description:"Checking account retrieved successfully",content:{"application/json":{schema:tr}}},404:{description:"Checking account not found",content:{"application/json":{schema:oe.object({message:oe.string()})}}}}},tg={method:"put",path:"/checking-account/{id}",tags:["Checking Accounts"],summary:"Update checking account",security:[{bearerAuth:[]}],request:{params:go.pick({id:!0}),body:{content:{"application/json":{schema:go.omit({id:!0})}}}},responses:{200:{description:"Checking account updated successfully"},404:{description:"Checking account not found",content:{"application/json":{schema:oe.object({message:oe.string()})}}},401:{description:"User not authenticated",content:{"application/json":{schema:oe.object({message:oe.string()})}}}}},rg={method:"delete",path:"/checking-account/{id}",tags:["Checking Accounts"],summary:"Delete checking account",security:[{bearerAuth:[]}],request:{params:nc},responses:{200:{description:"Checking account deleted successfully"},404:{description:"Checking account not found",content:{"application/json":{schema:oe.object({message:oe.string()})}}},401:{description:"User not authenticated",content:{"application/json":{schema:oe.object({message:oe.string()})}}}}};import P from"zod";import{extendZodWithOpenApi as NT}from"@asteasolutions/zod-to-openapi";import dc from"zod";NT(dc);var lc=dc.object({id:dc.uuid()}),yo=class{constructor(e,t){this.courseRepository=e;this.firebaseStorageService=t}async handle(e,t){let{id:o}=lc.parse({id:e.params.id}),i=await this.courseRepository.findById(o);if(!i)throw new c("O curso n\xE3o existe.");return i.imageUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.imageUrl}),await this.courseRepository.deleteById(o),t.sendStatus(200)}};import{extendZodWithOpenApi as GT}from"@asteasolutions/zod-to-openapi";import uc from"zod";GT(uc);var gc=uc.object({id:uc.uuid()}),fo=class{constructor(e){this.courseRepository=e}async handle(e,t){let{id:o}=gc.parse({id:e.params.id}),i=await this.courseRepository.findById(o);if(!i)throw new c("Curso n\xE3o encontrado.");return t.status(200).json(i)}};import{extendZodWithOpenApi as _T}from"@asteasolutions/zod-to-openapi";import wt from"zod";var LT=1;_T(wt);var yc=wt.object({page:wt.coerce.number().min(1).default(LT),limit:wt.coerce.number().optional(),title:wt.string().optional(),description:wt.string().optional(),coordinator:wt.string().optional(),orderBy:wt.enum(["asc","desc"]).default("desc")}),ho=class{constructor(e){this.courseRepository=e}async handle(e,t){let{limit:o,page:i,...n}=yc.parse(e.query),s=o?o*i-o:void 0,[a,m]=await Promise.all([this.courseRepository.find({pagination:{offset:s,limit:o},filter:n}),this.courseRepository.count({filter:n})]),p=o?Math.max(Math.ceil(m/o),1):1;return t.status(200).json({page:i,totalPages:p,offset:s,limit:o,courses:a})}};import{extendZodWithOpenApi as HT}from"@asteasolutions/zod-to-openapi";import Ie from"zod";var og=5,ig=1024,WT=ig*ig,$T=og*WT;HT(Ie);var fc=Ie.object({id:Ie.uuid(),title:Ie.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio.").optional(),coordinatorId:Ie.string().uuid("Coordenador \xE9 obrigat\xF3rio.").optional(),email:Ie.string().email("E-mail deve ser v\xE1lido.").optional(),location:Ie.string().min(1,"Localiza\xE7\xE3o \xE9 obrigat\xF3ria.").optional(),scheduledAt:Ie.coerce.date().optional(),registrationLink:Ie.url("URL de inscri\xE7\xE3o deve ser v\xE1lida").optional(),description:Ie.string().optional(),instructorIds:Ie.transform(r=>typeof r=="string"?r.split(","):r).pipe(Ie.array(Ie.uuid())).optional(),image:Ie.any().refine(r=>r==null?!0:typeof r!="object"||typeof r.size!="number"?!1:r.size<=$T,`A imagem deve ter no m\xE1ximo ${og}MB.`).optional()}),Ro=class{constructor(e,t){this.courseRepository=e;this.firebaseStorageService=t}async handle(e,t){let{id:o,image:i,title:n,coordinatorId:s,email:a,location:m,scheduledAt:p,registrationLink:f,description:I,instructorIds:L}=fc.parse({id:e.params.id,...e.body,image:e.file}),ie=await this.courseRepository.findById(o);if(!ie)throw new c("O curso n\xE3o existe.");let ne=ie.imageUrl;if(i&&(ne=await this.firebaseStorageService.uploadFile({file:i,id:o,folder:x.COURSE})),!ne)throw new be("URL da imagem \xE9 obrigat\xF3rio");return await this.courseRepository.update({id:o,title:n,coordinatorId:s,email:a,location:m,scheduledAt:p,registrationLink:f,description:I,imageUrl:ne,instructorIds:L}),t.sendStatus(200)}};var ng={method:"post",path:"/courses",tags:["Courses"],summary:"Create course",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:P.object({title:P.string().min(1).openapi({description:"T\xEDtulo do curso"}),coordinator:P.string().min(1).openapi({description:"Nome do coordenador"}),email:P.string().email().openapi({description:"E-mail de contato"}),location:P.string().min(1).openapi({description:"Localiza\xE7\xE3o do curso"}),scheduledAt:P.string().openapi({description:"Data e hora agendada (ISO 8601)",example:"2024-01-01T10:00:00Z"}),registrationLink:P.string().url().optional().openapi({description:"Link de inscri\xE7\xE3o"}),description:P.string().optional().openapi({description:"Descri\xE7\xE3o do curso"}),instructorIds:P.string().openapi({description:"IDs dos instrutores separados por v\xEDrgula",example:"uuid1,uuid2,uuid3"}),image:P.string().optional().openapi({description:"Imagem do curso (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{201:{description:"Course created successfully",summary:"Course Created"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:P.object({errors:P.record(P.string(),P.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:P.object({message:P.string()})}}}}},sg={method:"get",path:"/courses",tags:["Courses"],summary:"List courses",security:[{bearerAuth:[]}],request:{query:yc},responses:{200:{description:"Paginated list of courses with instructor information retrieved successfully",summary:"Courses Retrieved",content:{"application/json":{schema:P.object({page:P.number(),totalPages:P.number(),offset:P.number().optional(),limit:P.number().optional(),courses:P.array(P.object({id:P.string(),title:P.string(),imageUrl:P.string().nullable(),coordinator:P.string(),email:P.string(),scheduledAt:P.date(),location:P.string(),registrationLink:P.string().nullable(),description:P.string().nullable(),createdAt:P.date(),updatedAt:P.date(),instructors:P.array(P.object({id:P.uuid(),name:P.string(),emailAddress:P.email(),avatarUrl:P.string().nullable(),createdAt:P.date(),updatedAt:P.date()}))}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:P.object({errors:P.record(P.string(),P.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:P.object({message:P.string()})}}}}},ag={method:"get",path:"/courses/{id}",tags:["Courses"],summary:"Find course by ID",security:[{bearerAuth:[]}],request:{params:gc},responses:{200:{description:"Course details retrieved successfully",summary:"Course Retrieved",content:{"application/json":{schema:P.object({id:P.string(),title:P.string(),imageUrl:P.string().nullable(),coordinator:P.string(),email:P.string(),scheduledAt:P.date(),location:P.string(),registrationLink:P.string().nullable(),description:P.string().nullable(),createdAt:P.date(),updatedAt:P.date(),instructors:P.array(P.object({id:P.uuid(),name:P.string(),emailAddress:P.email(),avatarUrl:P.string().nullable(),createdAt:P.date(),updatedAt:P.date()}))}).nullable()}}},400:{description:"Invalid course ID format",summary:"Validation Error",content:{"application/json":{schema:P.object({errors:P.record(P.string(),P.string())})}}},404:{description:"Course not found with the provided ID",summary:"Course Not Found",content:{"application/json":{schema:P.object({message:P.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:P.object({message:P.string()})}}}}},mg={method:"put",path:"/courses/{id}",tags:["Courses"],summary:"Update course",security:[{bearerAuth:[]}],request:{params:fc.pick({id:!0}),body:{content:{"multipart/form-data":{schema:P.object({title:P.string().min(1).optional().openapi({description:"T\xEDtulo do curso"}),coordinator:P.string().min(1).optional().openapi({description:"Nome do coordenador"}),email:P.string().email().optional().openapi({description:"E-mail de contato"}),location:P.string().min(1).optional().openapi({description:"Localiza\xE7\xE3o do curso"}),scheduledAt:P.string().optional().openapi({description:"Data e hora agendada (ISO 8601)",example:"2024-01-01T10:00:00Z"}),registrationLink:P.string().url().optional().openapi({description:"Link de inscri\xE7\xE3o"}),description:P.string().optional().openapi({description:"Descri\xE7\xE3o do curso"}),instructorIds:P.string().optional().openapi({description:"IDs dos instrutores separados por v\xEDrgula",example:"uuid1,uuid2,uuid3"}),image:P.string().optional().openapi({description:"Imagem do curso (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{200:{description:"Course updated successfully",summary:"Course Updated"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:P.object({errors:P.record(P.string(),P.string())})}}},404:{description:"Course not found with the provided ID",summary:"Course Not Found",content:{"application/json":{schema:P.object({message:P.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:P.object({message:P.string()})}}}}},cg={method:"delete",path:"/courses/{id}",tags:["Courses"],summary:"Delete course",security:[{bearerAuth:[]}],request:{params:lc},responses:{200:{description:"Course deleted successfully",summary:"Course Deleted"},400:{description:"Invalid course ID format",summary:"Validation Error",content:{"application/json":{schema:P.object({errors:P.record(P.string(),P.string())})}}},404:{description:"Course not found with the provided ID",summary:"Course Not Found",content:{"application/json":{schema:P.object({message:P.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:P.object({message:P.string()})}}}}};import T from"zod";import{extendZodWithOpenApi as VT}from"@asteasolutions/zod-to-openapi";import $e from"zod";VT($e);var hc=$e.object({code:$e.string(),title:$e.string(),description:$e.string().optional(),notes:$e.string().optional(),leaderId:$e.uuid(),deputyLeaderId:$e.uuid(),secretaryId:$e.uuid(),memberIds:$e.array($e.uuid())}),Po=class{constructor(e){this.etpRepository=e}async handle(e,t){let{code:o,title:i,description:n,notes:s,leaderId:a,deputyLeaderId:m,secretaryId:p,memberIds:f}=hc.parse(e.body);if(await this.etpRepository.findByCode(o))throw new ge("J\xE1 existe um ETP cadastrado com este c\xF3digo.");return await this.etpRepository.create({code:o,title:i,description:n,notes:s,leaderId:a,deputyLeaderId:m,secretaryId:p,memberIds:f}),t.sendStatus(201)}};import{extendZodWithOpenApi as zT}from"@asteasolutions/zod-to-openapi";import Rc from"zod";zT(Rc);var Pc=Rc.object({id:Rc.uuid()}),bo=class{constructor(e){this.etpRepository=e}async handle(e,t){let{id:o}=Pc.parse({id:e.params.id});if(!await this.etpRepository.findById(o))throw new c("O ETP n\xE3o existe.");return await this.etpRepository.deleteById(o),t.sendStatus(200)}};import{extendZodWithOpenApi as ZT}from"@asteasolutions/zod-to-openapi";import bc from"zod";ZT(bc);var To=bc.object({id:bc.uuid()}),Co=class{constructor(e){this.etpRepository=e}async handle(e,t){let{id:o}=To.parse({id:e.params.id}),i=await this.etpRepository.findById(o);if(!i)throw new c("O ETP n\xE3o existe.");return t.status(200).json(i)}};import{extendZodWithOpenApi as KT}from"@asteasolutions/zod-to-openapi";import De from"zod";KT(De);var Cc=De.object({id:De.uuid(),code:De.string().optional(),title:De.string().optional(),description:De.string().optional(),notes:De.string().optional(),leaderId:De.uuid().optional(),deputyLeaderId:De.uuid().optional(),secretaryId:De.uuid().optional(),memberIds:De.array(De.uuid()).optional()}),Ao=class{constructor(e){this.etpRepository=e}async handle(e,t){let{id:o,code:i,title:n,description:s,notes:a,leaderId:m,deputyLeaderId:p,secretaryId:f,memberIds:I}=Cc.parse({id:e.params.id,...e.body});if(!await this.etpRepository.findById(o))throw new c("O ETP n\xE3o existe.");if(i){let ie=await this.etpRepository.findByCode(i);if(ie&&ie.id!==o)throw new ge("J\xE1 existe um ETP com este c\xF3digo.")}return await this.etpRepository.update({id:o,code:i,title:n,description:s,notes:a,leaderId:m,deputyLeaderId:p,secretaryId:f,memberIds:I}),t.sendStatus(200)}};var JT=1,YT=9,Io=T.object({id:T.uuid(),registrationNumber:T.string(),mainEtps:T.string().nullable(),formations:T.string().nullable(),degrees:T.array(T.enum(St)),occupations:T.string(),seniority:T.enum(It),institutions:T.string(),biography:T.string().nullable(),createdAt:T.date(),updatedAt:T.date(),user:T.object({id:T.uuid(),name:T.string(),emailAddress:T.string(),avatarUrl:T.string().nullable(),orcid:T.string().nullable(),phone:T.string().nullable(),lattesUrl:T.string().nullable(),role:T.enum(le)})}),pg=T.object({id:T.uuid(),code:T.string(),title:T.string(),description:T.string().nullable(),notes:T.string().nullable(),createdAt:T.date(),updatedAt:T.date(),leader:T.object({id:T.uuid(),researcher:Io}).nullable(),deputyLeader:T.object({id:T.uuid(),researcher:Io}).nullable(),secretary:T.object({id:T.uuid(),researcher:Io}).nullable(),members:T.array(Io)}),dg={method:"post",path:"/etp",tags:["ETPs"],summary:"Create a new ETP with single leader, deputy leader, secretary and multiple members",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:hc}}}},responses:{201:{description:"ETP created successfully",summary:"ETP Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:T.object({errors:T.record(T.string(),T.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:T.object({message:T.string()})}}},409:{description:"ETP with this code already exists",summary:"Conflict",content:{"application/json":{schema:T.object({message:T.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:T.object({message:T.string()})}}}}},lg={method:"get",path:"/etp",tags:["ETPs"],summary:"List all ETPs with pagination and filters",request:{query:T.object({page:T.coerce.number().min(1).default(JT).optional(),limit:T.coerce.number().min(1).default(YT).optional(),code:T.string().optional(),title:T.string().optional(),description:T.string().optional(),notes:T.string().optional(),orderBy:T.enum(["asc","desc"]).default("desc")})},responses:{200:{description:"List of ETPs retrieved successfully with pagination",summary:"ETPs Retrieved",content:{"application/json":{schema:T.object({page:T.number(),totalPages:T.number(),offset:T.number().optional(),limit:T.number().optional(),etps:T.array(pg)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:T.object({message:T.string()})}}}}},ug={method:"get",path:"/etp/{id}",tags:["ETPs"],summary:"Find ETP by ID",request:{params:To},responses:{200:{description:"ETP details retrieved successfully",summary:"ETP Retrieved",content:{"application/json":{schema:pg}}},400:{description:"Invalid ETP ID format",summary:"Validation Error",content:{"application/json":{schema:T.object({errors:T.record(T.string(),T.string())})}}},404:{description:"ETP not found with the provided ID",summary:"ETP Not Found",content:{"application/json":{schema:T.object({message:T.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:T.object({message:T.string()})}}}}},gg={method:"put",path:"/etp/{id}",tags:["ETPs"],summary:"Update ETP and manage user relationships (single leader, deputy leader, secretary, multiple members)",security:[{bearerAuth:[]}],request:{params:To,body:{content:{"application/json":{schema:Cc.omit({id:!0})}}}},responses:{200:{description:"ETP updated successfully",summary:"ETP Updated"},400:{description:"Invalid input data or ETP ID format",summary:"Validation Error",content:{"application/json":{schema:T.object({errors:T.record(T.string(),T.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:T.object({message:T.string()})}}},404:{description:"ETP not found with the provided ID",summary:"ETP Not Found",content:{"application/json":{schema:T.object({message:T.string()})}}},409:{description:"ETP with this code already exists",summary:"Conflict",content:{"application/json":{schema:T.object({message:T.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:T.object({message:T.string()})}}}}},yg={method:"delete",path:"/etp/{id}",tags:["ETPs"],summary:"Delete ETP",security:[{bearerAuth:[]}],request:{params:Pc},responses:{200:{description:"ETP deleted successfully",summary:"ETP Deleted"},400:{description:"Invalid ETP ID format",summary:"Validation Error",content:{"application/json":{schema:T.object({errors:T.record(T.string(),T.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:T.object({message:T.string()})}}},404:{description:"ETP not found with the provided ID",summary:"ETP Not Found",content:{"application/json":{schema:T.object({message:T.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:T.object({message:T.string()})}}}}};import H from"zod";import{extendZodWithOpenApi as XT}from"@asteasolutions/zod-to-openapi";import ve from"zod";var QT=5,fg=1024,eA=fg*fg,tA=QT*eA;XT(ve);var Tc=ve.object({title:ve.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio"),description:ve.string().optional(),startDate:ve.coerce.date(),endDate:ve.coerce.date(),location:ve.string().optional(),format:ve.enum(He).default(He.ONLINE),eventLink:ve.union([ve.url("Link do evento deve ser uma URL v\xE1lida"),ve.literal("")]),status:ve.enum(Qe).default(Qe.PENDING),image:ve.any().refine(r=>!r||typeof r=="object"&&typeof r.mimetype=="string"&&r.mimetype.startsWith("image/")&&typeof r.size=="number"&&r.size<=tA,"A imagem deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.")}).refine(r=>r.format===He.ONLINE?!!r.eventLink:r.format===He.IN_PERSON?!!r.location:!0,{message:"Eventos online devem ter link e eventos presenciais devem ter localiza\xE7\xE3o",path:["format"]}),So=class{constructor(e,t){this.eventRepository=e;this.firebaseStorageService=t}async handle(e,t){let{title:o,description:i,startDate:n,endDate:s,location:a,format:m,eventLink:p,status:f,image:I}=Tc.parse({...e.body,image:e.file}),L=await this.eventRepository.create({title:o,description:i,startDate:n,endDate:s,location:a||void 0,format:m,eventLink:p||void 0,status:f??Qe.PENDING}),ie=await this.firebaseStorageService.uploadFile({file:I,folder:x.EVENT,id:L.id});return await this.eventRepository.update({id:L.id,imageUrl:ie}),t.sendStatus(201)}};import{extendZodWithOpenApi as rA}from"@asteasolutions/zod-to-openapi";import Ac from"zod";rA(Ac);var Ic=Ac.object({id:Ac.uuid()}),Eo=class{constructor(e){this.eventRepository=e}async handle(e,t){let{id:o}=Ic.parse({id:e.params.id});if(!await this.eventRepository.findById(o))throw new c("O evento n\xE3o existe.");return await this.eventRepository.deleteById(o),t.sendStatus(200)}};import{extendZodWithOpenApi as iA}from"@asteasolutions/zod-to-openapi";import Sc from"zod";iA(Sc);var Mo=Sc.object({id:Sc.uuid()}),xo=class{constructor(e){this.eventRepository=e}async handle(e,t){let{id:o}=Mo.parse({id:e.params.id}),i=await this.eventRepository.findById(o);if(!i)throw new c("O evento n\xE3o existe.");return t.status(200).json(i)}};import{extendZodWithOpenApi as oA}from"@asteasolutions/zod-to-openapi";import vt from"zod";var nA=1;oA(vt);var Ec=vt.object({page:vt.coerce.number().min(1).default(nA),limit:vt.coerce.number().optional(),title:vt.string().optional(),status:vt.enum(Qe).optional(),format:vt.enum(He).optional(),orderBy:vt.enum(["asc","desc"]).default("desc")}),wo=class{constructor(e){this.eventRepository=e}async handle(e,t){let{page:o,limit:i,...n}=Ec.parse(e.query),s=i?i*o-i:void 0,[a,m]=await Promise.all([this.eventRepository.find({pagination:{offset:s,limit:i},filter:n}),this.eventRepository.count({filter:n})]),p=i?Math.max(Math.ceil(m/i),1):1;t.status(200).json({page:o,totalPages:p,offset:s,limit:i,events:a})}};import{extendZodWithOpenApi as sA}from"@asteasolutions/zod-to-openapi";import Se from"zod";var aA=5,hg=1024,mA=hg*hg,cA=aA*mA;sA(Se);var xc=Se.object({id:Se.uuid(),title:Se.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio").optional(),description:Se.string().optional(),startDate:Se.coerce.date().optional(),endDate:Se.coerce.date().optional(),location:Se.string().optional(),format:Se.enum(He).optional(),eventLink:Se.union([Se.url("Link do evento deve ser uma URL v\xE1lida"),Se.literal("")]),status:Se.enum(Qe).optional(),image:Se.any().refine(r=>!r||typeof r=="object"&&typeof r.mimetype=="string"&&r.mimetype.startsWith("image/")&&typeof r.size=="number"&&r.size<=cA,"A imagem deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.").optional()}),vo=class{constructor(e,t){this.eventRepository=e;this.firebaseStorageService=t}async handle(e,t){let{id:o,title:i,description:n,startDate:s,endDate:a,location:m,format:p,eventLink:f,status:I,image:L}=xc.parse({id:e.params.id,...e.body,image:e.file});if(!await this.eventRepository.findById(o))throw new c("O evento n\xE3o existe.");let ne;return L&&(ne=await this.firebaseStorageService.uploadFile({file:L,folder:x.EVENT,id:o})),await this.eventRepository.update({id:o,title:i,description:n,startDate:s,endDate:a,location:m||void 0,format:p,eventLink:f||void 0,status:I,imageUrl:ne}),t.sendStatus(200)}};var Rg=H.object({id:H.uuid(),title:H.string(),description:H.string().nullable(),imageUrl:H.string().nullable(),startDate:H.date(),endDate:H.date(),location:H.string().nullable(),status:H.enum(Qe),format:H.enum(He),eventLink:H.string().nullable(),createdAt:H.date(),updatedAt:H.date()}),Pg={method:"post",path:"/event",tags:["Events"],summary:"Create a new event",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:Tc}}}},responses:{201:{description:"Event created successfully",summary:"Event Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:H.object({errors:H.record(H.string(),H.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:H.object({message:H.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:H.object({message:H.string()})}}}}},bg={method:"get",path:"/event",tags:["Events"],summary:"List all events with pagination and filters",request:{query:Ec},responses:{200:{description:"List of events retrieved successfully with pagination",summary:"Events Retrieved",content:{"application/json":{schema:H.object({page:H.number(),totalPages:H.number(),offset:H.number().optional(),limit:H.number().optional(),events:H.array(Rg)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:H.object({errors:H.record(H.string(),H.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:H.object({message:H.string()})}}}}},Cg={method:"get",path:"/event/{id}",tags:["Events"],summary:"Find event by ID",request:{params:Mo},responses:{200:{description:"Event details retrieved successfully",summary:"Event Retrieved",content:{"application/json":{schema:Rg}}},400:{description:"Invalid event ID format",summary:"Validation Error",content:{"application/json":{schema:H.object({errors:H.record(H.string(),H.string())})}}},404:{description:"Event not found with the provided ID",summary:"Event Not Found",content:{"application/json":{schema:H.object({message:H.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:H.object({message:H.string()})}}}}},Tg={method:"put",path:"/event/{id}",tags:["Events"],summary:"Update event",security:[{bearerAuth:[]}],request:{params:Mo,body:{content:{"multipart/form-data":{schema:xc.omit({id:!0})}}}},responses:{200:{description:"Event updated successfully",summary:"Event Updated"},400:{description:"Invalid input data or event ID format",summary:"Validation Error",content:{"application/json":{schema:H.object({errors:H.record(H.string(),H.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:H.object({message:H.string()})}}},404:{description:"Event not found with the provided ID",summary:"Event Not Found",content:{"application/json":{schema:H.object({message:H.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:H.object({message:H.string()})}}}}},Ag={method:"delete",path:"/event/{id}",tags:["Events"],summary:"Delete event",security:[{bearerAuth:[]}],request:{params:Ic},responses:{200:{description:"Event deleted successfully",summary:"Event Deleted"},400:{description:"Invalid event ID format",summary:"Validation Error",content:{"application/json":{schema:H.object({errors:H.record(H.string(),H.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:H.object({message:H.string()})}}},404:{description:"Event not found with the provided ID",summary:"Event Not Found",content:{"application/json":{schema:H.object({message:H.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:H.object({message:H.string()})}}}}};import Y from"zod";import{extendZodWithOpenApi as pA}from"@asteasolutions/zod-to-openapi";import Mc from"zod";var Sg=10,Ig=1024,dA=Ig*Ig,lA=Sg*dA;pA(Mc);var wc=Mc.object({document:Mc.any().refine(r=>r==null||typeof r!="object"||typeof r.size!="number"?!1:r.size<=lA,`O documento deve ter no m\xE1ximo ${Sg}MB.`)}),Uo=class{constructor(e,t){this.financialTransactionStatementRepository=e;this.firebaseStorageService=t}async handle(e,t){let{document:o}=wc.parse({document:e.file}),i=await this.financialTransactionStatementRepository.create({documentUrl:""}),n=await this.firebaseStorageService.uploadFile({file:o,id:i.id,folder:x.FINANCIAL_TRANSACTION_STATEMENT});return await this.financialTransactionStatementRepository.update({id:i.id,documentUrl:n}),t.sendStatus(201)}};import{extendZodWithOpenApi as uA}from"@asteasolutions/zod-to-openapi";import vc from"zod";uA(vc);var Uc=vc.object({id:vc.uuid()}),jo=class{constructor(e,t){this.financialTransactionStatementRepository=e;this.firebaseStorageService=t}async handle(e,t){let{id:o}=Uc.parse({id:e.params.id}),i=await this.financialTransactionStatementRepository.findById(o);if(!i)throw new c("O extrato de transa\xE7\xE3o financeira n\xE3o existe.");return i.documentUrl&&await this.firebaseStorageService.deleteFile({fileUrl:i.documentUrl}),await this.financialTransactionStatementRepository.deleteById(o),t.sendStatus(200)}};import{extendZodWithOpenApi as gA}from"@asteasolutions/zod-to-openapi";import jc from"zod";gA(jc);var Fo=jc.object({id:jc.uuid()}),ko=class{constructor(e){this.financialTransactionStatementRepository=e}async handle(e,t){let{id:o}=Fo.parse({id:e.params.id}),i=await this.financialTransactionStatementRepository.findById(o);if(!i)throw new c("O extrato de transa\xE7\xE3o financeira n\xE3o existe.");return t.status(200).json(i)}};import{extendZodWithOpenApi as yA}from"@asteasolutions/zod-to-openapi";import Si from"zod";var fA=1;yA(Si);var kc=Si.object({page:Si.coerce.number().min(1).default(fA),limit:Si.coerce.number().optional(),orderBy:Si.enum(["asc","desc"]).default("desc")}),Do=class{constructor(e){this.financialTransactionStatementRepository=e}async handle(e,t){let{page:o,limit:i,...n}=kc.parse(e.query),s=i?i*o-i:void 0,[a,m]=await Promise.all([this.financialTransactionStatementRepository.find({pagination:{offset:s,limit:i},filter:n}),this.financialTransactionStatementRepository.count({filter:{}})]),p=i?Math.max(Math.ceil(m/i),1):1;t.status(200).json({page:o,totalPages:p,offset:s,limit:i,financialTransactionStatements:a})}};import{extendZodWithOpenApi as hA}from"@asteasolutions/zod-to-openapi";import Oo from"zod";var xg=10,Eg=1024,RA=Eg*Eg,PA=xg*RA;hA(Oo);var Fc=Oo.object({id:Oo.uuid(),document:Oo.any().refine(r=>r==null?!0:typeof r!="object"||typeof r.size!="number"?!1:r.size<=PA,`O documento deve ter no m\xE1ximo ${xg}MB.`).optional()}),Bo=class{constructor(e,t){this.financialTransactionStatementRepository=e;this.firebaseStorageService=t}async handle(e,t){let{id:o,document:i}=Fc.parse({id:e.params.id,document:e.file}),n=await this.financialTransactionStatementRepository.findById(o);if(!n)throw new c("O extrato de transa\xE7\xE3o financeira n\xE3o existe.");let s=n.documentUrl;return i&&(n.documentUrl&&await this.firebaseStorageService.deleteFile({fileUrl:n.documentUrl}),s=await this.firebaseStorageService.uploadFile({file:i,id:o,folder:x.FINANCIAL_TRANSACTION_STATEMENT})),await this.financialTransactionStatementRepository.update({id:o,documentUrl:s??void 0}),t.sendStatus(200)}};var Dc=Y.object({id:Y.uuid(),documentUrl:Y.string(),createdAt:Y.date(),updatedAt:Y.date()}),Mg={method:"post",path:"/financial-transaction-statement",tags:["Financial Transaction Statements"],summary:"Create a new financial transaction statement with document upload",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:wc}}}},responses:{201:{description:"Financial transaction statement created successfully",summary:"Statement Created"},400:{description:"Invalid input data, missing required fields, or invalid document format/size",summary:"Validation Error",content:{"application/json":{schema:Y.object({errors:Y.record(Y.string(),Y.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:Y.object({message:Y.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Y.object({message:Y.string()})}}}}},wg={method:"get",path:"/financial-transaction-statement",tags:["Financial Transaction Statements"],summary:"List all financial transaction statements with pagination",request:{query:kc},responses:{200:{description:"List of financial transaction statements retrieved successfully with pagination",summary:"Statements Retrieved",content:{"application/json":{schema:Y.object({page:Y.number(),totalPages:Y.number(),offset:Y.number().optional(),limit:Y.number().optional(),financialTransactionStatements:Y.array(Dc)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:Y.object({errors:Y.record(Y.string(),Y.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Y.object({message:Y.string()})}}}}},vg={method:"get",path:"/financial-transaction-statement/latest",tags:["Financial Transaction Statements"],summary:"Get the most recent financial transaction statement",responses:{200:{description:"Latest financial transaction statement retrieved successfully",summary:"Latest Statement Retrieved",content:{"application/json":{schema:Dc.nullable()}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Y.object({message:Y.string()})}}}}},Ug={method:"get",path:"/financial-transaction-statement/{id}",tags:["Financial Transaction Statements"],summary:"Find financial transaction statement by ID",request:{params:Fo},responses:{200:{description:"Financial transaction statement details retrieved successfully",summary:"Statement Retrieved",content:{"application/json":{schema:Dc}}},400:{description:"Invalid statement ID format",summary:"Validation Error",content:{"application/json":{schema:Y.object({errors:Y.record(Y.string(),Y.string())})}}},404:{description:"Financial transaction statement not found with the provided ID",summary:"Statement Not Found",content:{"application/json":{schema:Y.object({message:Y.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Y.object({message:Y.string()})}}}}},jg={method:"put",path:"/financial-transaction-statement/{id}",tags:["Financial Transaction Statements"],summary:"Update financial transaction statement with optional document upload",security:[{bearerAuth:[]}],request:{params:Fo,body:{content:{"multipart/form-data":{schema:Fc.omit({id:!0})}}}},responses:{200:{description:"Financial transaction statement updated successfully",summary:"Statement Updated"},400:{description:"Invalid input data, statement ID format, or invalid document format/size",summary:"Validation Error",content:{"application/json":{schema:Y.object({errors:Y.record(Y.string(),Y.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:Y.object({message:Y.string()})}}},404:{description:"Financial transaction statement not found with the provided ID",summary:"Statement Not Found",content:{"application/json":{schema:Y.object({message:Y.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Y.object({message:Y.string()})}}}}},kg={method:"delete",path:"/financial-transaction-statement/{id}",tags:["Financial Transaction Statements"],summary:"Delete financial transaction statement",security:[{bearerAuth:[]}],request:{params:Uc},responses:{200:{description:"Financial transaction statement deleted successfully",summary:"Statement Deleted"},400:{description:"Invalid statement ID format",summary:"Validation Error",content:{"application/json":{schema:Y.object({errors:Y.record(Y.string(),Y.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:Y.object({message:Y.string()})}}},404:{description:"Financial transaction statement not found with the provided ID",summary:"Statement Not Found",content:{"application/json":{schema:Y.object({message:Y.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Y.object({message:Y.string()})}}}}};import D from"zod";import{extendZodWithOpenApi as bA}from"@asteasolutions/zod-to-openapi";import Ut from"zod";var Dg=2,Fg=1024,CA=Fg*Fg,TA=Dg*CA;bA(Ut);var Oc=Ut.object({name:Ut.string().min(1,"Nome \xE9 obrigat\xF3rio"),birthDate:Ut.coerce.date(),deathDate:Ut.coerce.date(),biography:Ut.string().optional(),photo:Ut.any().refine(r=>r==null?!0:typeof r!="object"||typeof r.size!="number"?!1:r.size<=TA,`A imagem deve ter no m\xE1ximo ${Dg}MB.`).optional(),role:Ut.enum(Xe)}).refine(r=>r.deathDate>r.birthDate,{message:"Data de falecimento deve ser posterior \xE0 data de nascimento",path:["deathDate"]}),qo=class{constructor(e,t){this.inMemoriamRepository=e;this.firebaseStorageService=t}async handle(e,t){let{name:o,birthDate:i,deathDate:n,biography:s,role:a,photo:m}=Oc.parse({...e.body,photo:e.file}),p=await this.inMemoriamRepository.create({name:o,birthDate:i,deathDate:n,biography:s??void 0,role:a}),f;return m&&(f=await this.firebaseStorageService.uploadFile({file:m,id:p.id,folder:x.IN_MEMORIAM}),await this.inMemoriamRepository.update({id:p.id,photoUrl:f})),t.sendStatus(201)}};import{extendZodWithOpenApi as AA}from"@asteasolutions/zod-to-openapi";import Bc from"zod";AA(Bc);var qc=Bc.object({id:Bc.uuid()}),No=class{constructor(e,t){this.inMemoriamRepository=e;this.firebaseStorageService=t}async handle(e,t){let{id:o}=qc.parse({id:e.params.id}),i=await this.inMemoriamRepository.findById(o);if(!i)throw new c("O in memoriam n\xE3o existe.");return i.photoUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.photoUrl}),await this.inMemoriamRepository.deleteById(o),t.sendStatus(200)}};import{extendZodWithOpenApi as IA}from"@asteasolutions/zod-to-openapi";import Nc from"zod";IA(Nc);var _o=Nc.object({id:Nc.uuid()}),Go=class{constructor(e){this.inMemoriamRepository=e}async handle(e,t){let{id:o}=_o.parse({id:e.params.id}),i=await this.inMemoriamRepository.findById(o);if(!i)throw new c("O in memoriam n\xE3o existe.");return t.status(200).json(i)}};import{extendZodWithOpenApi as SA}from"@asteasolutions/zod-to-openapi";import Gc from"zod";SA(Gc);var _c=Gc.object({role:Gc.enum(Xe)}),Lo=class{constructor(e){this.inMemoriamRepository=e}async handle(e,t){let{role:o}=_c.parse({role:e.params.role}),i=await this.inMemoriamRepository.findByRole(o);return t.status(200).json(i)}};import{extendZodWithOpenApi as EA}from"@asteasolutions/zod-to-openapi";import jt from"zod";var xA=1;EA(jt);var Lc=jt.object({page:jt.coerce.number().min(1).default(xA),limit:jt.coerce.number().optional(),name:jt.string().optional(),biography:jt.string().optional(),role:jt.enum(Xe).optional(),orderBy:jt.enum(["asc","desc"]).default("desc")}),Ho=class{constructor(e){this.inMemoriamRepository=e}async handle(e,t){let{page:o,limit:i,...n}=Lc.parse(e.query),s=i?i*o-i:void 0,[a,m]=await Promise.all([this.inMemoriamRepository.find({pagination:{offset:s,limit:i},filter:n}),this.inMemoriamRepository.count({filter:n})]),p=i?Math.max(Math.ceil(m/i),1):1;t.status(200).json({page:o,totalPages:p,offset:s,limit:i,inMemoriam:a})}};import{extendZodWithOpenApi as MA}from"@asteasolutions/zod-to-openapi";import mt from"zod";var Bg=2,Og=1024,wA=Og*Og,vA=Bg*wA;MA(mt);var Hc=mt.object({id:mt.uuid(),name:mt.string().min(1,"Nome \xE9 obrigat\xF3rio").optional(),birthDate:mt.coerce.date().optional(),deathDate:mt.coerce.date().optional(),biography:mt.string().optional(),photo:mt.any().refine(r=>r==null?!0:typeof r!="object"||typeof r.size!="number"?!1:r.size<=vA,`A imagem deve ter no m\xE1ximo ${Bg}MB.`).optional(),role:mt.enum(Xe).optional()}).refine(r=>r.birthDate&&r.deathDate?r.deathDate>r.birthDate:!0,{message:"Data de falecimento deve ser posterior \xE0 data de nascimento",path:["deathDate"]}),Wo=class{constructor(e,t){this.inMemoriamRepository=e;this.firebaseStorageService=t}async handle(e,t){let{id:o,name:i,birthDate:n,deathDate:s,biography:a,photo:m,role:p}=Hc.parse({id:e.params.id,...e.body,photo:e.file}),f=await this.inMemoriamRepository.findById(o);if(!f)throw new c("O registro in memoriam n\xE3o existe.");let I=f.photoUrl;return m&&(I=await this.firebaseStorageService.uploadFile({file:m,id:o,folder:x.IN_MEMORIAM})),await this.inMemoriamRepository.update({id:o,name:i,birthDate:n,deathDate:s,biography:a,photoUrl:I??void 0,role:p}),t.sendStatus(200)}};var Wc=D.object({id:D.uuid(),name:D.string(),birthDate:D.date(),deathDate:D.date(),biography:D.string().nullable(),photoUrl:D.string().nullable(),role:D.enum(Xe),createdAt:D.date(),updatedAt:D.date()}),qg={method:"post",path:"/in-memoriam",tags:["In Memoriam"],summary:"Create a new in memoriam record with optional photo upload",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:Oc}}}},responses:{201:{description:"In memoriam record created successfully",summary:"In Memoriam Created"},400:{description:"Invalid input data, missing required fields, or invalid photo format/size",summary:"Validation Error",content:{"application/json":{schema:D.object({errors:D.record(D.string(),D.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:D.object({message:D.string()})}}},409:{description:"In memoriam record with this name already exists",summary:"Conflict",content:{"application/json":{schema:D.object({message:D.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:D.object({message:D.string()})}}}}},Ng={method:"get",path:"/in-memoriam",tags:["In Memoriam"],summary:"List all in memoriam records with pagination and filters",request:{query:Lc},responses:{200:{description:"List of in memoriam records retrieved successfully with pagination",summary:"In Memoriam Records Retrieved",content:{"application/json":{schema:D.object({page:D.number(),totalPages:D.number(),offset:D.number().optional(),limit:D.number().optional(),inMemoriam:D.array(Wc)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:D.object({errors:D.record(D.string(),D.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:D.object({message:D.string()})}}}}},Gg={method:"get",path:"/in-memoriam/{id}",tags:["In Memoriam"],summary:"Find in memoriam record by ID",request:{params:_o},responses:{200:{description:"In memoriam record details retrieved successfully",summary:"In Memoriam Record Retrieved",content:{"application/json":{schema:Wc}}},400:{description:"Invalid in memoriam record ID format",summary:"Validation Error",content:{"application/json":{schema:D.object({errors:D.record(D.string(),D.string())})}}},404:{description:"In memoriam record not found with the provided ID",summary:"In Memoriam Record Not Found",content:{"application/json":{schema:D.object({message:D.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:D.object({message:D.string()})}}}}},_g={method:"put",path:"/in-memoriam/{id}",tags:["In Memoriam"],summary:"Update in memoriam record with optional photo upload",security:[{bearerAuth:[]}],request:{params:_o,body:{content:{"multipart/form-data":{schema:Hc.omit({id:!0})}}}},responses:{200:{description:"In memoriam record updated successfully",summary:"In Memoriam Record Updated"},400:{description:"Invalid input data, in memoriam record ID format, or invalid photo format/size",summary:"Validation Error",content:{"application/json":{schema:D.object({errors:D.record(D.string(),D.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:D.object({message:D.string()})}}},404:{description:"In memoriam record not found with the provided ID",summary:"In Memoriam Record Not Found",content:{"application/json":{schema:D.object({message:D.string()})}}},409:{description:"In memoriam record with this name already exists",summary:"Conflict",content:{"application/json":{schema:D.object({message:D.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:D.object({message:D.string()})}}}}},Lg={method:"delete",path:"/in-memoriam/{id}",tags:["In Memoriam"],summary:"Delete in memoriam record",security:[{bearerAuth:[]}],request:{params:qc},responses:{200:{description:"In memoriam record deleted successfully",summary:"In Memoriam Record Deleted"},400:{description:"Invalid in memoriam record ID format",summary:"Validation Error",content:{"application/json":{schema:D.object({errors:D.record(D.string(),D.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:D.object({message:D.string()})}}},404:{description:"In memoriam record not found with the provided ID",summary:"In Memoriam Record Not Found",content:{"application/json":{schema:D.object({message:D.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:D.object({message:D.string()})}}}}},qD={method:"get",path:"/in-memoriam/role/{role}",tags:["In Memoriam"],summary:"Find in memoriam records by role",request:{params:_c},responses:{200:{description:"In memoriam records retrieved successfully by role",summary:"In Memoriam Records Retrieved by Role",content:{"application/json":{schema:D.array(Wc)}}},400:{description:"Invalid role parameter provided",summary:"Validation Error",content:{"application/json":{schema:D.object({errors:D.record(D.string(),D.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:D.object({message:D.string()})}}}}};import X from"zod";import{extendZodWithOpenApi as UA}from"@asteasolutions/zod-to-openapi";import Ei from"zod";var Wg=2,Hg=1024,jA=Hg*Hg,kA=Wg*jA;UA(Ei);var $c=Ei.object({image:Ei.any().refine(r=>r==null||typeof r!="object"||typeof r.size!="number"?!1:r.size<=kA,`A imagem deve ter no m\xE1ximo ${Wg}MB.`),caption:Ei.string().optional(),id:Ei.uuid()}),$o=class{constructor(e,t,o){this.internationalScientificCongressGalleryRepository=e;this.internationalScientificCongressRepository=t;this.firebaseStorageService=o}async handle(e,t){let{image:o,caption:i,id:n}=$c.parse({...e.body,...e.params,image:e.file});if(!await this.internationalScientificCongressRepository.findById(n))throw new c("O congresso n\xE3o existe.");let a=await this.internationalScientificCongressGalleryRepository.create({imageUrl:"",caption:i||void 0,congressId:n}),m=await this.firebaseStorageService.uploadFile({file:o,id:a.id,folder:x.INTERNATIONAL_SCIENTIFIC_CONGRESS_GALLERY});return await this.internationalScientificCongressGalleryRepository.update({id:a.id,imageUrl:m}),t.sendStatus(201)}};import{extendZodWithOpenApi as FA}from"@asteasolutions/zod-to-openapi";import Vc from"zod";FA(Vc);var zo=Vc.object({id:Vc.uuid()}),Vo=class{constructor(e){this.internationalScientificCongressGalleryRepository=e}async handle(e,t){let{id:o}=zo.parse({id:e.params.id});if(!await this.internationalScientificCongressGalleryRepository.findById(o))throw new c("A imagem da galeria n\xE3o existe.");return await this.internationalScientificCongressGalleryRepository.deleteById(o),t.sendStatus(200)}};import{extendZodWithOpenApi as DA}from"@asteasolutions/zod-to-openapi";import Nr from"zod";var OA=1;DA(Nr);var zc=Nr.object({id:Nr.uuid(),page:Nr.coerce.number().min(1).default(OA),limit:Nr.coerce.number().optional(),caption:Nr.string().optional()}),Zo=class{constructor(e){this.internationalScientificCongressGalleryRepository=e}async handle(e,t){let{id:o,page:i,limit:n,...s}=zc.parse({id:e.params.id,...e.query}),a=n?n*i-n:void 0,[m,p]=await Promise.all([this.internationalScientificCongressGalleryRepository.findByCongressId({pagination:{offset:a,limit:n},filter:{congressId:o,...s}}),this.internationalScientificCongressGalleryRepository.count({filter:{congressId:o,caption:s.caption}})]),f=n?Math.max(Math.ceil(p/n),1):1;return t.status(200).json({page:i,totalPages:f,offset:a,limit:n,galleryImages:m})}};import{extendZodWithOpenApi as BA}from"@asteasolutions/zod-to-openapi";import xi from"zod";var Vg=2,$g=1024,qA=$g*$g,NA=Vg*qA;BA(xi);var Zc=xi.object({id:xi.uuid(),image:xi.any().refine(r=>r==null?!0:typeof r!="object"||typeof r.size!="number"?!1:r.size<=NA,`A imagem deve ter no m\xE1ximo ${Vg}MB.`).optional(),caption:xi.string().optional()}),Ko=class{constructor(e,t){this.internationalScientificCongressGalleryRepository=e;this.firebaseStorageService=t}async handle(e,t){let{id:o,image:i,caption:n}=Zc.parse({id:e.params.id,...e.body,image:e.file}),s=await this.internationalScientificCongressGalleryRepository.findById(o);if(!s)throw new c("A imagem da galeria n\xE3o existe.");let a=s.imageUrl;return i&&(a=await this.firebaseStorageService.uploadFile({file:i,id:o,folder:x.INTERNATIONAL_SCIENTIFIC_CONGRESS_GALLERY})),await this.internationalScientificCongressGalleryRepository.update({id:o,imageUrl:a??void 0,caption:n||void 0}),t.sendStatus(200)}};var GA=X.object({id:X.uuid(),imageUrl:X.string(),caption:X.string().nullable(),congressId:X.uuid()}),zg={method:"post",path:"/international-scientific-congress/{congressId}/gallery",tags:["International Scientific Congresses"],summary:"Create a new congress gallery image",security:[{bearerAuth:[]}],request:{params:X.object({congressId:X.uuid()}),body:{content:{"application/json":{schema:$c.omit({id:!0})}}}},responses:{201:{description:"Congress gallery image created successfully",summary:"Congress Gallery Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:X.object({errors:X.record(X.string(),X.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:X.object({message:X.string()})}}},404:{description:"Congress not found with the provided ID",summary:"Congress Not Found",content:{"application/json":{schema:X.object({message:X.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:X.object({message:X.string()})}}}}},Zg={method:"get",path:"/international-scientific-congress/{congressId}/gallery",tags:["International Scientific Congresses"],summary:"Find congress gallery images by congress ID",request:{params:zc},responses:{200:{description:"Congress gallery images retrieved successfully by congress ID",summary:"Congress Galleries Retrieved",content:{"application/json":{schema:X.object({page:X.number(),totalPages:X.number(),offset:X.number().optional(),limit:X.number().optional(),galleries:X.array(GA)})}}},400:{description:"Invalid congress ID parameter provided",summary:"Validation Error",content:{"application/json":{schema:X.object({errors:X.record(X.string(),X.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:X.object({message:X.string()})}}}}},Kg={method:"put",path:"/international-scientific-congress/gallery/{id}",tags:["International Scientific Congresses"],summary:"Update congress gallery image",security:[{bearerAuth:[]}],request:{params:zo,body:{content:{"application/json":{schema:Zc.omit({id:!0})}}}},responses:{200:{description:"Congress gallery image updated successfully",summary:"Congress Gallery Updated"},400:{description:"Invalid input data or gallery ID format",summary:"Validation Error",content:{"application/json":{schema:X.object({errors:X.record(X.string(),X.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:X.object({message:X.string()})}}},404:{description:"Congress gallery image not found with the provided ID",summary:"Congress Gallery Not Found",content:{"application/json":{schema:X.object({message:X.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:X.object({message:X.string()})}}}}},Jg={method:"delete",path:"/international-scientific-congress/gallery/{id}",tags:["International Scientific Congresses"],summary:"Delete congress gallery image",security:[{bearerAuth:[]}],request:{params:zo},responses:{200:{description:"Congress gallery image deleted successfully",summary:"Congress Gallery Deleted"},400:{description:"Invalid gallery ID format",summary:"Validation Error",content:{"application/json":{schema:X.object({errors:X.record(X.string(),X.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:X.object({message:X.string()})}}},404:{description:"Congress gallery image not found with the provided ID",summary:"Congress Gallery Not Found",content:{"application/json":{schema:X.object({message:X.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:X.object({message:X.string()})}}}}};import Q from"zod";import{extendZodWithOpenApi as _A}from"@asteasolutions/zod-to-openapi";import Mi from"zod";var Xg=2,Yg=1024,LA=Yg*Yg,HA=Xg*LA;_A(Mi);var Kc=Mi.object({name:Mi.string().min(1,"Nome \xE9 obrigat\xF3rio"),logo:Mi.any().refine(r=>r==null?!0:typeof r!="object"||typeof r.size!="number"?!1:r.size<=HA,`A imagem deve ter no m\xE1ximo ${Xg}MB.`).optional(),id:Mi.uuid()}),Jo=class{constructor(e,t,o){this.internationalScientificCongressPartnerRepository=e;this.internationalScientificCongressRepository=t;this.firebaseStorageService=o}async handle(e,t){let{name:o,logo:i,id:n}=Kc.parse({...e.body,...e.params,logo:e.file});if(!await this.internationalScientificCongressRepository.findById(n))throw new c("O congresso n\xE3o existe.");let a=await this.internationalScientificCongressPartnerRepository.create({name:o,congressId:n}),m;return i&&(m=await this.firebaseStorageService.uploadFile({file:i,id:a.id,folder:x.PARTNER}),await this.internationalScientificCongressPartnerRepository.update({id:a.id,logoUrl:m})),t.sendStatus(201)}};import{extendZodWithOpenApi as WA}from"@asteasolutions/zod-to-openapi";import Jc from"zod";WA(Jc);var Xo=Jc.object({id:Jc.uuid()}),Yo=class{constructor(e){this.internationalScientificCongressPartnerRepository=e}async handle(e,t){let{id:o}=Xo.parse({id:e.params.id});if(!await this.internationalScientificCongressPartnerRepository.findById(o))throw new c("O parceiro n\xE3o existe.");return await this.internationalScientificCongressPartnerRepository.deleteById(o),t.sendStatus(200)}};import{extendZodWithOpenApi as $A}from"@asteasolutions/zod-to-openapi";import Gr from"zod";var VA=1;$A(Gr);var Yc=Gr.object({id:Gr.uuid(),page:Gr.coerce.number().min(1).default(VA),limit:Gr.coerce.number().min(1).optional(),name:Gr.string().optional()}),Qo=class{constructor(e){this.internationalScientificCongressPartnerRepository=e}async handle(e,t){let{id:o,page:i,limit:n,...s}=Yc.parse({...e.params,...e.query}),a=n?n*i-n:void 0,[m,p]=await Promise.all([this.internationalScientificCongressPartnerRepository.findByCongressId({pagination:{offset:a,limit:n},filter:{congressId:o,...s}}),this.internationalScientificCongressPartnerRepository.count({filter:{congressId:o,name:s.name}})]),f=n?Math.max(Math.ceil(p/n),1):1;return t.status(200).json({page:i,totalPages:f,offset:a,limit:n,partners:m})}};import{extendZodWithOpenApi as zA}from"@asteasolutions/zod-to-openapi";import wi from"zod";var ey=2,Qg=1024,ZA=Qg*Qg,KA=ey*ZA;zA(wi);var Xc=wi.object({id:wi.uuid(),name:wi.string().min(1,"Nome \xE9 obrigat\xF3rio").optional(),logo:wi.any().refine(r=>r==null?!0:typeof r!="object"||typeof r.size!="number"?!1:r.size<=KA,`A imagem deve ter no m\xE1ximo ${ey}MB.`).optional()}),en=class{constructor(e,t){this.internationalScientificCongressPartnerRepository=e;this.firebaseStorageService=t}async handle(e,t){let{id:o,name:i,logo:n}=Xc.parse({id:e.params.id,...e.body,logo:e.file}),s=await this.internationalScientificCongressPartnerRepository.findById(o);if(!s)throw new c("O parceiro n\xE3o existe.");let a=s.logoUrl;return n&&(a=await this.firebaseStorageService.uploadFile({file:n,id:o,folder:x.PARTNER})),await this.internationalScientificCongressPartnerRepository.update({id:o,name:i,logoUrl:a??void 0}),t.sendStatus(200)}};var JA=Q.object({id:Q.uuid(),name:Q.string(),logoUrl:Q.string().nullable(),congressId:Q.uuid()}),ty={method:"post",path:"/international-scientific-congress/{congressId}/partner",tags:["International Scientific Congresses"],summary:"Create a new congress partner",security:[{bearerAuth:[]}],request:{params:Q.object({congressId:Q.uuid()}),body:{content:{"application/json":{schema:Kc.omit({id:!0})}}}},responses:{201:{description:"Congress partner created successfully",summary:"Congress Partner Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:Q.object({errors:Q.record(Q.string(),Q.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:Q.object({message:Q.string()})}}},404:{description:"Congress not found with the provided ID",summary:"Congress Not Found",content:{"application/json":{schema:Q.object({message:Q.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Q.object({message:Q.string()})}}}}},ry={method:"get",path:"/international-scientific-congress/{congressId}/partner",tags:["International Scientific Congresses"],summary:"Find congress partners by congress ID",request:{params:Yc},responses:{200:{description:"Congress partners retrieved successfully by congress ID",summary:"Congress Partners Retrieved",content:{"application/json":{schema:Q.object({page:Q.number(),totalPages:Q.number(),offset:Q.number().optional(),limit:Q.number().optional(),partners:Q.array(JA)})}}},400:{description:"Invalid congress ID parameter provided",summary:"Validation Error",content:{"application/json":{schema:Q.object({errors:Q.record(Q.string(),Q.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Q.object({message:Q.string()})}}}}},iy={method:"put",path:"/international-scientific-congress/partner/{id}",tags:["International Scientific Congresses"],summary:"Update congress partner",security:[{bearerAuth:[]}],request:{params:Xo,body:{content:{"application/json":{schema:Xc.omit({id:!0})}}}},responses:{200:{description:"Congress partner updated successfully",summary:"Congress Partner Updated"},400:{description:"Invalid input data or partner ID format",summary:"Validation Error",content:{"application/json":{schema:Q.object({errors:Q.record(Q.string(),Q.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:Q.object({message:Q.string()})}}},404:{description:"Congress partner not found with the provided ID",summary:"Congress Partner Not Found",content:{"application/json":{schema:Q.object({message:Q.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Q.object({message:Q.string()})}}}}},oy={method:"delete",path:"/international-scientific-congress/partner/{id}",tags:["International Scientific Congresses"],summary:"Delete congress partner",security:[{bearerAuth:[]}],request:{params:Xo},responses:{200:{description:"Congress partner deleted successfully",summary:"Congress Partner Deleted"},400:{description:"Invalid partner ID format",summary:"Validation Error",content:{"application/json":{schema:Q.object({errors:Q.record(Q.string(),Q.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:Q.object({message:Q.string()})}}},404:{description:"Congress partner not found with the provided ID",summary:"Congress Partner Not Found",content:{"application/json":{schema:Q.object({message:Q.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Q.object({message:Q.string()})}}}}};import u from"zod";import{extendZodWithOpenApi as YA}from"@asteasolutions/zod-to-openapi";import me from"zod";YA(me);var Qc=me.object({title:me.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio"),edition:me.coerce.number().int().positive("Edi\xE7\xE3o deve ser um n\xFAmero positivo"),startDate:me.coerce.date(),endDate:me.coerce.date(),description:me.string().optional(),location:me.string().optional(),congressLink:me.union([me.url("Link do congresso deve ser uma URL v\xE1lida"),me.literal("")]),noticeUrl:me.union([me.url("URL do edital deve ser uma URL v\xE1lida"),me.literal("")]),scheduleUrl:me.union([me.url("URL do cronograma deve ser uma URL v\xE1lida"),me.literal("")]),programUrl:me.union([me.url("URL da programa\xE7\xE3o deve ser uma URL v\xE1lida"),me.literal("")]),adminReportUrl:me.union([me.url("URL do relat\xF3rio administrativo deve ser uma URL v\xE1lida"),me.literal("")]),proceedingsUrl:me.union([me.url("URL dos anais deve ser uma URL v\xE1lida"),me.literal("")])}).refine(r=>r.endDate>=r.startDate,{message:"Data de t\xE9rmino deve ser posterior ou igual \xE0 data de in\xEDcio",path:["endDate"]}),tn=class{constructor(e){this.internationalScientificCongressRepository=e}async handle(e,t){let o=Qc.parse(e.body);return await this.internationalScientificCongressRepository.create(o),t.sendStatus(201)}};import{extendZodWithOpenApi as XA}from"@asteasolutions/zod-to-openapi";import ep from"zod";XA(ep);var tp=ep.object({id:ep.uuid()}),rn=class{constructor(e){this.internationalScientificCongressRepository=e}async handle(e,t){let{id:o}=tp.parse({id:e.params.id});if(!await this.internationalScientificCongressRepository.findById(o))throw new c("O congresso n\xE3o existe.");return await this.internationalScientificCongressRepository.deleteById(o),t.sendStatus(200)}};import{extendZodWithOpenApi as QA}from"@asteasolutions/zod-to-openapi";import rp from"zod";QA(rp);var ip=rp.object({edition:rp.coerce.number().int().positive()}),on=class{constructor(e){this.internationalScientificCongressRepository=e}async handle(e,t){let{edition:o}=ip.parse({edition:e.params.edition}),i=await this.internationalScientificCongressRepository.findByEdition(o);return t.status(200).json(i)}};import{extendZodWithOpenApi as eI}from"@asteasolutions/zod-to-openapi";import op from"zod";eI(op);var sn=op.object({id:op.uuid()}),nn=class{constructor(e){this.internationalScientificCongressRepository=e}async handle(e,t){let{id:o}=sn.parse({id:e.params.id}),i=await this.internationalScientificCongressRepository.findById(o);if(!i)throw new c("O congresso n\xE3o existe.");return t.status(200).json(i)}};import{extendZodWithOpenApi as tI}from"@asteasolutions/zod-to-openapi";import kt from"zod";var rI=1;tI(kt);var np=kt.object({page:kt.coerce.number().min(1).default(rI),limit:kt.coerce.number().optional(),title:kt.string().optional(),edition:kt.coerce.number().int().positive().optional(),location:kt.string().optional(),orderBy:kt.enum(["asc","desc"]).default("desc")}),an=class{constructor(e){this.internationalScientificCongressRepository=e}async handle(e,t){let{page:o,limit:i,...n}=np.parse(e.query),s=i?i*o-i:void 0,[a,m]=await Promise.all([this.internationalScientificCongressRepository.find({pagination:{offset:s,limit:i},filter:n}),this.internationalScientificCongressRepository.count({filter:n})]),p=i?Math.max(Math.ceil(m/i),1):1;t.status(200).json({page:o,totalPages:p,offset:s,limit:i,congresses:a})}};import{extendZodWithOpenApi as iI}from"@asteasolutions/zod-to-openapi";import ae from"zod";iI(ae);var sp=ae.object({id:ae.uuid(),title:ae.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio").optional(),edition:ae.coerce.number().int().positive("Edi\xE7\xE3o deve ser um n\xFAmero positivo").optional(),startDate:ae.coerce.date().optional(),endDate:ae.coerce.date().optional(),description:ae.string().optional(),location:ae.string().optional(),congressLink:ae.union([ae.url("Link do congresso deve ser uma URL v\xE1lida"),ae.literal("")]),noticeUrl:ae.union([ae.url("URL do edital deve ser uma URL v\xE1lida"),ae.literal("")]),scheduleUrl:ae.union([ae.url("URL do cronograma deve ser uma URL v\xE1lida"),ae.literal("")]),programUrl:ae.union([ae.url("URL da programa\xE7\xE3o deve ser uma URL v\xE1lida"),ae.literal("")]),adminReportUrl:ae.union([ae.url("URL do relat\xF3rio administrativo deve ser uma URL v\xE1lida"),ae.literal("")]),proceedingsUrl:ae.union([ae.url("URL dos anais deve ser uma URL v\xE1lida"),ae.literal("")])}),mn=class{constructor(e){this.internationalScientificCongressRepository=e}async handle(e,t){let{id:o,...i}=sp.parse({id:e.params.id,...e.body});if(!await this.internationalScientificCongressRepository.findById(o))throw new c("O congresso n\xE3o existe.");return await this.internationalScientificCongressRepository.update({...i,id:o}),t.sendStatus(200)}};var oI=9,nI=u.object({image:u.any().openapi({type:"string",format:"binary"}),caption:u.string().optional()}),sI=u.object({image:u.any().openapi({type:"string",format:"binary"}).optional(),caption:u.string().optional()}),aI=u.object({id:u.uuid(),name:u.string(),logoUrl:u.string().nullable(),congressId:u.uuid()}),ap=u.object({id:u.uuid(),imageUrl:u.string(),caption:u.string().nullable(),congressId:u.uuid()}),mp=u.object({id:u.uuid(),title:u.string(),edition:u.number(),startDate:u.date(),endDate:u.date(),description:u.string().nullable(),location:u.string().nullable(),congressLink:u.string().nullable(),noticeUrl:u.string().nullable(),scheduleUrl:u.string().nullable(),programUrl:u.string().nullable(),adminReportUrl:u.string().nullable(),proceedingsUrl:u.string().nullable(),partners:u.array(aI),galleries:u.array(ap),createdAt:u.date(),updatedAt:u.date()}),ny={method:"post",path:"/international-scientific-congress",tags:["International Scientific Congresses"],summary:"Create a new international scientific congress",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:Qc}}}},responses:{201:{description:"International scientific congress created successfully",summary:"International Scientific Congress Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:u.object({errors:u.record(u.string(),u.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:u.object({message:u.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:u.object({message:u.string()})}}}}},sy={method:"get",path:"/international-scientific-congress",tags:["International Scientific Congresses"],summary:"List all international scientific congresses with pagination and filters",request:{query:np},responses:{200:{description:"List of international scientific congresses retrieved successfully with pagination",summary:"International Scientific Congresses Retrieved",content:{"application/json":{schema:u.object({page:u.number(),totalPages:u.number(),offset:u.number().optional(),limit:u.number().optional(),congresses:u.array(mp)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:u.object({errors:u.record(u.string(),u.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:u.object({message:u.string()})}}}}},ay={method:"get",path:"/international-scientific-congress/{id}",tags:["International Scientific Congresses"],summary:"Find international scientific congress by ID",request:{params:sn},responses:{200:{description:"International scientific congress details retrieved successfully",summary:"International Scientific Congress Retrieved",content:{"application/json":{schema:mp}}},400:{description:"Invalid international scientific congress ID format",summary:"Validation Error",content:{"application/json":{schema:u.object({errors:u.record(u.string(),u.string())})}}},404:{description:"International scientific congress not found with the provided ID",summary:"International Scientific Congress Not Found",content:{"application/json":{schema:u.object({message:u.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:u.object({message:u.string()})}}}}},my={method:"get",path:"/international-scientific-congress/edition/{edition}",tags:["International Scientific Congresses"],summary:"Find international scientific congresses by edition",request:{params:ip},responses:{200:{description:"International scientific congresses retrieved successfully by edition",summary:"International Scientific Congresses Retrieved by Edition",content:{"application/json":{schema:u.array(mp)}}},400:{description:"Invalid edition parameter provided",summary:"Validation Error",content:{"application/json":{schema:u.object({errors:u.record(u.string(),u.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:u.object({message:u.string()})}}}}},cy={method:"put",path:"/international-scientific-congress/{id}",tags:["International Scientific Congresses"],summary:"Update international scientific congress",security:[{bearerAuth:[]}],request:{params:sn,body:{content:{"application/json":{schema:sp.omit({id:!0})}}}},responses:{200:{description:"International scientific congress updated successfully",summary:"International Scientific Congress Updated"},400:{description:"Invalid input data or international scientific congress ID format",summary:"Validation Error",content:{"application/json":{schema:u.object({errors:u.record(u.string(),u.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:u.object({message:u.string()})}}},404:{description:"International scientific congress not found with the provided ID",summary:"International Scientific Congress Not Found",content:{"application/json":{schema:u.object({message:u.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:u.object({message:u.string()})}}}}},py={method:"delete",path:"/international-scientific-congress/{id}",tags:["International Scientific Congresses"],summary:"Delete international scientific congress",security:[{bearerAuth:[]}],request:{params:tp},responses:{200:{description:"International scientific congress deleted successfully",summary:"International Scientific Congress Deleted"},400:{description:"Invalid international scientific congress ID format",summary:"Validation Error",content:{"application/json":{schema:u.object({errors:u.record(u.string(),u.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:u.object({message:u.string()})}}},404:{description:"International scientific congress not found with the provided ID",summary:"International Scientific Congress Not Found",content:{"application/json":{schema:u.object({message:u.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:u.object({message:u.string()})}}}}},b0={method:"post",path:"/international-scientific-congress/{congressId}/gallery",tags:["International Scientific Congress Gallery"],summary:"Create a new gallery image for a congress",security:[{bearerAuth:[]}],request:{params:u.object({congressId:u.uuid()}),body:{content:{"multipart/form-data":{schema:nI}}}},responses:{201:{description:"Gallery image created successfully",summary:"Gallery Image Created"},400:{description:"Invalid input data, missing required fields, or invalid image format/size",summary:"Validation Error",content:{"application/json":{schema:u.object({errors:u.record(u.string(),u.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:u.object({message:u.string()})}}},404:{description:"Congress not found with the provided ID",summary:"Congress Not Found",content:{"application/json":{schema:u.object({message:u.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:u.object({message:u.string()})}}}}},C0={method:"get",path:"/international-scientific-congress/{congressId}/gallery",tags:["International Scientific Congress Gallery"],summary:"List all gallery images for a congress with pagination",request:{params:u.object({congressId:u.uuid()}),query:u.object({page:u.coerce.number().min(1).default(1),limit:u.coerce.number().min(1).default(oI),caption:u.string().optional()})},responses:{200:{description:"Gallery images retrieved successfully with pagination",summary:"Gallery Images Retrieved",content:{"application/json":{schema:u.object({page:u.number(),totalPages:u.number(),offset:u.number().optional(),limit:u.number().optional(),galleries:u.array(ap)})}}},400:{description:"Invalid congress ID format or query parameters",summary:"Validation Error",content:{"application/json":{schema:u.object({errors:u.record(u.string(),u.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:u.object({message:u.string()})}}}}},T0={method:"get",path:"/international-scientific-congress/gallery/{id}",tags:["International Scientific Congress Gallery"],summary:"Find a gallery image by ID",request:{params:u.object({id:u.uuid()})},responses:{200:{description:"Gallery image retrieved successfully",summary:"Gallery Image Retrieved",content:{"application/json":{schema:ap}}},400:{description:"Invalid gallery image ID format",summary:"Validation Error",content:{"application/json":{schema:u.object({errors:u.record(u.string(),u.string())})}}},404:{description:"Gallery image not found with the provided ID",summary:"Gallery Image Not Found",content:{"application/json":{schema:u.object({message:u.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:u.object({message:u.string()})}}}}},A0={method:"put",path:"/international-scientific-congress/gallery/{id}",tags:["International Scientific Congress Gallery"],summary:"Update a gallery image with optional image upload",security:[{bearerAuth:[]}],request:{params:u.object({id:u.uuid()}),body:{content:{"multipart/form-data":{schema:sI}}}},responses:{200:{description:"Gallery image updated successfully",summary:"Gallery Image Updated"},400:{description:"Invalid input data, gallery ID format, or invalid image format/size",summary:"Validation Error",content:{"application/json":{schema:u.object({errors:u.record(u.string(),u.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:u.object({message:u.string()})}}},404:{description:"Gallery image not found with the provided ID",summary:"Gallery Image Not Found",content:{"application/json":{schema:u.object({message:u.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:u.object({message:u.string()})}}}}},I0={method:"delete",path:"/international-scientific-congress/gallery/{id}",tags:["International Scientific Congress Gallery"],summary:"Delete a gallery image",security:[{bearerAuth:[]}],request:{params:u.object({id:u.uuid()})},responses:{200:{description:"Gallery image deleted successfully",summary:"Gallery Image Deleted"},400:{description:"Invalid gallery ID format",summary:"Validation Error",content:{"application/json":{schema:u.object({errors:u.record(u.string(),u.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:u.object({message:u.string()})}}},404:{description:"Gallery image not found with the provided ID",summary:"Gallery Image Not Found",content:{"application/json":{schema:u.object({message:u.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:u.object({message:u.string()})}}}}};import J from"zod";import{extendZodWithOpenApi as mI}from"@asteasolutions/zod-to-openapi";import vi from"zod";mI(vi);var cp=vi.object({title:vi.string().min(1),link:vi.url(),country:vi.string().min(1)}),cn=class{constructor(e){this.lawRepository=e}async handle(e,t){let{title:o,link:i,country:n}=cp.parse(e.body);return await this.lawRepository.create({title:o,link:i,country:n}),t.sendStatus(201)}};import{extendZodWithOpenApi as cI}from"@asteasolutions/zod-to-openapi";import pp from"zod";cI(pp);var dp=pp.object({id:pp.uuid()}),pn=class{constructor(e){this.lawRepository=e}async handle(e,t){let{id:o}=dp.parse({id:e.params.id});if(!await this.lawRepository.findById(o))throw new c("A lei n\xE3o existe.");return await this.lawRepository.deleteById(o),t.sendStatus(200)}};import{extendZodWithOpenApi as pI}from"@asteasolutions/zod-to-openapi";import lp from"zod";pI(lp);var ln=lp.object({id:lp.uuid()}),dn=class{constructor(e){this.lawRepository=e}async handle(e,t){let{id:o}=ln.parse({id:e.params.id}),i=await this.lawRepository.findById(o);if(!i)throw new c("A lei n\xE3o existe.");return t.status(200).json(i)}};import{extendZodWithOpenApi as dI}from"@asteasolutions/zod-to-openapi";import _r from"zod";dI(_r);var up=_r.object({id:_r.uuid(),title:_r.string().min(1).optional(),link:_r.url().optional(),country:_r.string().min(1).optional()}),un=class{constructor(e){this.lawRepository=e}async handle(e,t){let{id:o,title:i,link:n,country:s}=up.parse({id:e.params.id,...e.body});if(!await this.lawRepository.findById(o))throw new c("A lei n\xE3o existe.");return await this.lawRepository.update({id:o,title:i,link:n,country:s}),t.sendStatus(200)}};var dy=J.object({id:J.uuid(),title:J.string(),link:J.string(),country:J.string(),createdAt:J.date(),updatedAt:J.date()}),ly={method:"post",path:"/law",tags:["Laws"],summary:"Create a new Law",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:cp}}}},responses:{201:{description:"Law created successfully",summary:"Law Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:J.object({errors:J.record(J.string(),J.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:J.object({message:J.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:J.object({message:J.string()})}}}}},uy={method:"get",path:"/law",tags:["Laws"],summary:"List all Laws with filters",request:{query:J.object({page:J.coerce.number().optional(),limit:J.coerce.number().optional(),title:J.string().optional(),country:J.string().optional(),orderBy:J.enum(["asc","desc"]).default("desc")})},responses:{200:{description:"List of Laws retrieved successfully",summary:"Laws Retrieved",content:{"application/json":{schema:J.object({page:J.number(),totalPages:J.number(),offset:J.number().optional(),limit:J.number().optional(),laws:J.array(dy)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:J.object({message:J.string()})}}}}},gy={method:"get",path:"/law/{id}",tags:["Laws"],summary:"Find Law by ID",request:{params:ln},responses:{200:{description:"Law details retrieved successfully",summary:"Law Retrieved",content:{"application/json":{schema:dy}}},400:{description:"Invalid Law ID format",summary:"Validation Error",content:{"application/json":{schema:J.object({errors:J.record(J.string(),J.string())})}}},404:{description:"Law not found with the provided ID",summary:"Law Not Found",content:{"application/json":{schema:J.object({message:J.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:J.object({message:J.string()})}}}}},yy={method:"put",path:"/law/{id}",tags:["Laws"],summary:"Update Law",security:[{bearerAuth:[]}],request:{params:ln,body:{content:{"application/json":{schema:up.omit({id:!0})}}}},responses:{200:{description:"Law updated successfully",summary:"Law Updated"},400:{description:"Invalid input data or Law ID format",summary:"Validation Error",content:{"application/json":{schema:J.object({errors:J.record(J.string(),J.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:J.object({message:J.string()})}}},404:{description:"Law not found with the provided ID",summary:"Law Not Found",content:{"application/json":{schema:J.object({message:J.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:J.object({message:J.string()})}}}}},fy={method:"delete",path:"/law/{id}",tags:["Laws"],summary:"Delete Law",security:[{bearerAuth:[]}],request:{params:dp},responses:{200:{description:"Law deleted successfully",summary:"Law Deleted"},400:{description:"Invalid Law ID format",summary:"Validation Error",content:{"application/json":{schema:J.object({errors:J.record(J.string(),J.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:J.object({message:J.string()})}}},404:{description:"Law not found with the provided ID",summary:"Law Not Found",content:{"application/json":{schema:J.object({message:J.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:J.object({message:J.string()})}}}}};import W from"zod";import{extendZodWithOpenApi as lI}from"@asteasolutions/zod-to-openapi";import Lr from"zod";lI(Lr);var gp=Lr.object({role:Lr.string().min(1),description:Lr.string().optional(),userId:Lr.uuid(),order:Lr.number().optional()}),gn=class{constructor(e){this.legitimatorCommitteeMemberRepository=e}async handle(e,t){let{role:o,description:i,userId:n,order:s}=gp.parse(e.body);return await this.legitimatorCommitteeMemberRepository.create({role:o,description:i,userId:n,order:s??0}),t.sendStatus(201)}};import{extendZodWithOpenApi as uI}from"@asteasolutions/zod-to-openapi";import yp from"zod";uI(yp);var fp=yp.object({id:yp.uuid()}),yn=class{constructor(e){this.legitimatorCommitteeMemberRepository=e}async handle(e,t){let{id:o}=fp.parse({id:e.params.id});if(!await this.legitimatorCommitteeMemberRepository.findById(o))throw new c("O membro do comit\xEA legitimador n\xE3o existe.");return await this.legitimatorCommitteeMemberRepository.deleteById(o),t.sendStatus(200)}};import{extendZodWithOpenApi as gI}from"@asteasolutions/zod-to-openapi";import hp from"zod";gI(hp);var hn=hp.object({id:hp.uuid()}),fn=class{constructor(e){this.legitimatorCommitteeMemberRepository=e}async handle(e,t){let{id:o}=hn.parse({id:e.params.id}),i=await this.legitimatorCommitteeMemberRepository.findById(o);if(!i)throw new c("O membro do comit\xEA legitimador n\xE3o existe.");return t.status(200).json(i)}};import{extendZodWithOpenApi as yI}from"@asteasolutions/zod-to-openapi";import rr from"zod";yI(rr);var Rp=rr.object({id:rr.uuid(),role:rr.string().min(1).optional(),description:rr.string().optional(),userId:rr.uuid().optional(),order:rr.number().optional()}),Rn=class{constructor(e){this.legitimatorCommitteeMemberRepository=e}async handle(e,t){let{id:o,role:i,description:n,userId:s,order:a}=Rp.parse({id:e.params.id,...e.body});if(!await this.legitimatorCommitteeMemberRepository.findById(o))throw new c("O membro do comit\xEA legitimador n\xE3o existe.");return await this.legitimatorCommitteeMemberRepository.update({id:o,role:i,description:n,userId:s,order:a}),t.sendStatus(200)}};var fI=W.object({id:W.uuid(),name:W.string(),emailAddress:W.string(),avatarUrl:W.string().nullable(),orcid:W.string().nullable(),phone:W.string().nullable(),lattesUrl:W.string().nullable(),role:W.enum(le)}),hy=W.object({id:W.uuid(),role:W.string(),description:W.string().nullable(),order:W.number(),createdAt:W.date(),updatedAt:W.date(),userId:W.uuid(),user:fI}),Ry={method:"post",path:"/legitimator-committee-member",tags:["Legitimator Committee Members"],summary:"Create a new Legitimator Committee Member",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:gp}}}},responses:{201:{description:"Legitimator Committee Member created successfully",summary:"Legitimator Committee Member Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:W.object({errors:W.record(W.string(),W.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:W.object({message:W.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:W.object({message:W.string()})}}}}},Py={method:"get",path:"/legitimator-committee-member",tags:["Legitimator Committee Members"],summary:"List all Legitimator Committee Members with filters",request:{query:W.object({role:W.string().optional(),orderBy:W.enum(["asc","desc"]).default("desc")})},responses:{200:{description:"List of Legitimator Committee Members retrieved successfully",summary:"Legitimator Committee Members Retrieved",content:{"application/json":{schema:W.object({members:W.array(hy)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:W.object({message:W.string()})}}}}},by={method:"get",path:"/legitimator-committee-member/{id}",tags:["Legitimator Committee Members"],summary:"Find Legitimator Committee Member by ID",request:{params:hn},responses:{200:{description:"Legitimator Committee Member details retrieved successfully",summary:"Legitimator Committee Member Retrieved",content:{"application/json":{schema:hy}}},400:{description:"Invalid Legitimator Committee Member ID format",summary:"Validation Error",content:{"application/json":{schema:W.object({errors:W.record(W.string(),W.string())})}}},404:{description:"Legitimator Committee Member not found with the provided ID",summary:"Legitimator Committee Member Not Found",content:{"application/json":{schema:W.object({message:W.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:W.object({message:W.string()})}}}}},Cy={method:"put",path:"/legitimator-committee-member/{id}",tags:["Legitimator Committee Members"],summary:"Update Legitimator Committee Member",security:[{bearerAuth:[]}],request:{params:hn,body:{content:{"application/json":{schema:Rp.omit({id:!0})}}}},responses:{200:{description:"Legitimator Committee Member updated successfully",summary:"Legitimator Committee Member Updated"},400:{description:"Invalid input data or Legitimator Committee Member ID format",summary:"Validation Error",content:{"application/json":{schema:W.object({errors:W.record(W.string(),W.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:W.object({message:W.string()})}}},404:{description:"Legitimator Committee Member not found with the provided ID",summary:"Legitimator Committee Member Not Found",content:{"application/json":{schema:W.object({message:W.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:W.object({message:W.string()})}}}}},Ty={method:"delete",path:"/legitimator-committee-member/{id}",tags:["Legitimator Committee Members"],summary:"Delete Legitimator Committee Member",security:[{bearerAuth:[]}],request:{params:fp},responses:{200:{description:"Legitimator Committee Member deleted successfully",summary:"Legitimator Committee Member Deleted"},400:{description:"Invalid Legitimator Committee Member ID format",summary:"Validation Error",content:{"application/json":{schema:W.object({errors:W.record(W.string(),W.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:W.object({message:W.string()})}}},404:{description:"Legitimator Committee Member not found with the provided ID",summary:"Legitimator Committee Member Not Found",content:{"application/json":{schema:W.object({message:W.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:W.object({message:W.string()})}}}}};import U from"zod";import{extendZodWithOpenApi as hI}from"@asteasolutions/zod-to-openapi";import ct from"zod";hI(ct);var Pp=ct.object({name:ct.string().min(1),description:ct.string().optional(),members:ct.array(ct.object({userId:ct.uuid(),role:ct.string().min(1),order:ct.number().optional()}))}),Pn=class{constructor(e){this.managementTeamRepository=e}async handle(e,t){let{name:o,description:i,members:n}=Pp.parse(e.body);if(await this.managementTeamRepository.findByName(o))throw new ge("J\xE1 existe um time de gest\xE3o cadastrado com este nome.");return await this.managementTeamRepository.create({name:o,description:i,members:n.map(a=>({userId:a.userId,role:a.role,order:a.order??0}))}),t.sendStatus(201)}};import{extendZodWithOpenApi as RI}from"@asteasolutions/zod-to-openapi";import bp from"zod";RI(bp);var Cp=bp.object({id:bp.uuid()}),bn=class{constructor(e){this.managementTeamRepository=e}async handle(e,t){let{id:o}=Cp.parse({id:e.params.id});if(!await this.managementTeamRepository.findById(o))throw new c("O time de gest\xE3o n\xE3o existe.");return await this.managementTeamRepository.deleteById(o),t.sendStatus(200)}};import{extendZodWithOpenApi as PI}from"@asteasolutions/zod-to-openapi";import Tp from"zod";PI(Tp);var Tn=Tp.object({id:Tp.uuid()}),Cn=class{constructor(e){this.managementTeamRepository=e}async handle(e,t){let{id:o}=Tn.parse({id:e.params.id}),i=await this.managementTeamRepository.findById(o);if(!i)throw new c("O time de gest\xE3o n\xE3o existe.");return t.status(200).json(i)}};import{extendZodWithOpenApi as bI}from"@asteasolutions/zod-to-openapi";import et from"zod";bI(et);var Ap=et.object({id:et.uuid(),name:et.string().min(1).optional(),description:et.string().optional(),members:et.array(et.object({userId:et.uuid(),role:et.string().min(1),order:et.number().optional()})).optional()}),An=class{constructor(e){this.managementTeamRepository=e}async handle(e,t){let{id:o,name:i,description:n,members:s}=Ap.parse({id:e.params.id,...e.body}),a=await this.managementTeamRepository.findById(o);if(!a)throw new c("O time de gest\xE3o n\xE3o existe.");if(i&&i!==a.name){let m=await this.managementTeamRepository.findByName(i);if(m&&m.id!==o)throw new ge("J\xE1 existe um time de gest\xE3o com este nome.")}return await this.managementTeamRepository.update({id:o,name:i,description:n,members:s?s.map(m=>({userId:m.userId,role:m.role,order:m.order??0})):void 0}),t.sendStatus(200)}};var CI=U.object({id:U.uuid(),name:U.string(),emailAddress:U.string(),avatarUrl:U.string().nullable(),orcid:U.string().nullable(),phone:U.string().nullable(),lattesUrl:U.string().nullable(),role:U.enum(le)}),TI=U.object({id:U.uuid(),role:U.string(),description:U.string().nullable(),order:U.number(),teamId:U.uuid(),userId:U.uuid(),createdAt:U.date(),updatedAt:U.date(),user:CI}),Ay=U.object({id:U.uuid(),name:U.string(),description:U.string().nullable(),createdAt:U.date(),updatedAt:U.date(),members:U.array(TI)}),Iy={method:"post",path:"/management-team",tags:["Management Teams"],summary:"Create a new Management Team with multiple members",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:Pp}}}},responses:{201:{description:"Management Team created successfully",summary:"Management Team Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:U.object({errors:U.record(U.string(),U.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:U.object({message:U.string()})}}},409:{description:"Management Team with this name already exists",summary:"Conflict",content:{"application/json":{schema:U.object({message:U.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:U.object({message:U.string()})}}}}},Sy={method:"get",path:"/management-team",tags:["Management Teams"],summary:"List all Management Teams with filters",request:{query:U.object({name:U.string().optional(),description:U.string().optional(),orderBy:U.enum(["asc","desc"]).default("desc")})},responses:{200:{description:"List of Management Teams retrieved successfully",summary:"Management Teams Retrieved",content:{"application/json":{schema:U.object({teams:U.array(Ay)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:U.object({message:U.string()})}}}}},Ey={method:"get",path:"/management-team/{id}",tags:["Management Teams"],summary:"Find Management Team by ID",request:{params:Tn},responses:{200:{description:"Management Team details retrieved successfully",summary:"Management Team Retrieved",content:{"application/json":{schema:Ay}}},400:{description:"Invalid Management Team ID format",summary:"Validation Error",content:{"application/json":{schema:U.object({errors:U.record(U.string(),U.string())})}}},404:{description:"Management Team not found with the provided ID",summary:"Management Team Not Found",content:{"application/json":{schema:U.object({message:U.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:U.object({message:U.string()})}}}}},xy={method:"put",path:"/management-team/{id}",tags:["Management Teams"],summary:"Update Management Team and manage member relationships",security:[{bearerAuth:[]}],request:{params:Tn,body:{content:{"application/json":{schema:Ap.omit({id:!0})}}}},responses:{200:{description:"Management Team updated successfully",summary:"Management Team Updated"},400:{description:"Invalid input data or Management Team ID format",summary:"Validation Error",content:{"application/json":{schema:U.object({errors:U.record(U.string(),U.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:U.object({message:U.string()})}}},404:{description:"Management Team not found with the provided ID",summary:"Management Team Not Found",content:{"application/json":{schema:U.object({message:U.string()})}}},409:{description:"Management Team with this name already exists",summary:"Conflict",content:{"application/json":{schema:U.object({message:U.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:U.object({message:U.string()})}}}}},My={method:"delete",path:"/management-team/{id}",tags:["Management Teams"],summary:"Delete Management Team",security:[{bearerAuth:[]}],request:{params:Cp},responses:{200:{description:"Management Team deleted successfully",summary:"Management Team Deleted"},400:{description:"Invalid Management Team ID format",summary:"Validation Error",content:{"application/json":{schema:U.object({errors:U.record(U.string(),U.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:U.object({message:U.string()})}}},404:{description:"Management Team not found with the provided ID",summary:"Management Team Not Found",content:{"application/json":{schema:U.object({message:U.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:U.object({message:U.string()})}}}}};import V from"zod";import{extendZodWithOpenApi as AI}from"@asteasolutions/zod-to-openapi";import Hr from"zod";var vy=10,wy=1024,II=wy*wy,SI=vy*II;AI(Hr);var Ip=Hr.object({title:Hr.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio"),publishedAt:Hr.coerce.date(),id:Hr.uuid(),document:Hr.any().refine(r=>r==null||typeof r!="object"||typeof r.size!="number"?!1:r.size<=SI,`O documento deve ter no m\xE1ximo ${vy}MB.`)}),In=class{constructor(e,t,o){this.meetingMinuteRepository=e;this.meetingRepository=t;this.firebaseStorageService=o}async handle(e,t){let{title:o,publishedAt:i,id:n,document:s}=Ip.parse({...e.body,...e.params,document:e.file});if(!await this.meetingRepository.findById(n))throw new c("A reuni\xE3o n\xE3o existe.");if(await this.meetingMinuteRepository.findByMeetingId(n))throw new be("Esta reuni\xE3o j\xE1 possui uma ata.");let p=await this.meetingMinuteRepository.create({title:o,publishedAt:i,meetingId:n,documentUrl:""}),f=await this.firebaseStorageService.uploadFile({file:s,id:p.id,folder:x.MEETING_MINUTE});return await this.meetingMinuteRepository.update({id:p.id,documentUrl:f}),t.sendStatus(201)}};import{extendZodWithOpenApi as EI}from"@asteasolutions/zod-to-openapi";import Sp from"zod";EI(Sp);var Ui=Sp.object({id:Sp.uuid()}),Sn=class{constructor(e){this.meetingMinuteRepository=e}async handle(e,t){let{id:o}=Ui.parse({id:e.params.id}),i=await this.meetingMinuteRepository.findByMeetingId(o);return t.status(200).json(i)}};import{extendZodWithOpenApi as xI}from"@asteasolutions/zod-to-openapi";import Wr from"zod";var jy=10,Uy=1024,MI=Uy*Uy,wI=jy*MI;xI(Wr);var Ep=Wr.object({id:Wr.uuid(),title:Wr.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio").optional(),publishedAt:Wr.coerce.date().optional(),document:Wr.any().refine(r=>r==null?!0:typeof r!="object"||typeof r.size!="number"?!1:r.size<=wI,`O documento deve ter no m\xE1ximo ${jy}MB.`).optional()}),En=class{constructor(e,t){this.meetingMinuteRepository=e;this.firebaseStorageService=t}async handle(e,t){let{id:o,title:i,publishedAt:n,document:s}=Ep.parse({...e.params,...e.body,document:e.file}),a=await this.meetingMinuteRepository.findByMeetingId(o);if(!a)throw new c("A ata n\xE3o existe para esta reuni\xE3o.");let m=a.documentUrl;return s&&(a.documentUrl&&await this.firebaseStorageService.deleteFile({fileUrl:a.documentUrl}),m=await this.firebaseStorageService.uploadFile({file:s,id:a.id,folder:x.MEETING_MINUTE})),await this.meetingMinuteRepository.update({id:a.id,title:i,publishedAt:n,documentUrl:m??void 0}),t.sendStatus(200)}};var vI=V.object({id:V.uuid(),title:V.string(),scheduledAt:V.date(),format:V.enum(we),agenda:V.string(),meetingLink:V.string().nullable(),location:V.string().nullable(),status:V.enum(Ae),createdAt:V.date(),updatedAt:V.date()}),UI=V.object({id:V.uuid(),title:V.string(),publishedAt:V.date(),documentUrl:V.string(),meetingId:V.uuid(),meeting:vI,createdAt:V.date(),updatedAt:V.date()}),ky={method:"post",path:"/meeting/{meetingId}/minute",tags:["Meetings"],summary:"Create a new meeting minute with document upload",security:[{bearerAuth:[]}],request:{params:V.object({meetingId:V.uuid()}),body:{content:{"multipart/form-data":{schema:Ip.omit({id:!0})}}}},responses:{201:{description:"Meeting minute created successfully",summary:"Meeting Minute Created"},400:{description:"Invalid input data, missing required fields, or invalid document format/size",summary:"Validation Error",content:{"application/json":{schema:V.object({errors:V.record(V.string(),V.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:V.object({message:V.string()})}}},404:{description:"Meeting not found with the provided ID",summary:"Meeting Not Found",content:{"application/json":{schema:V.object({message:V.string()})}}},409:{description:"Meeting already has a minute",summary:"Conflict",content:{"application/json":{schema:V.object({message:V.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:V.object({message:V.string()})}}}}},Fy={method:"get",path:"/meeting/{meetingId}/minute",tags:["Meetings"],summary:"Find meeting minute by meeting ID",request:{params:Ui},responses:{200:{description:"Meeting minute retrieved successfully by meeting ID",summary:"Meeting Minute Retrieved by Meeting ID",content:{"application/json":{schema:UI.nullable()}}},400:{description:"Invalid meeting ID parameter provided",summary:"Validation Error",content:{"application/json":{schema:V.object({errors:V.record(V.string(),V.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:V.object({message:V.string()})}}}}},Dy={method:"put",path:"/meeting/{meetingId}/minute",tags:["Meetings"],summary:"Update meeting minute with optional document upload",security:[{bearerAuth:[]}],request:{params:Ui,body:{content:{"multipart/form-data":{schema:Ep.omit({id:!0})}}}},responses:{200:{description:"Meeting minute updated successfully",summary:"Meeting Minute Updated"},400:{description:"Invalid input data, meeting minute ID format, or invalid document format/size",summary:"Validation Error",content:{"application/json":{schema:V.object({errors:V.record(V.string(),V.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:V.object({message:V.string()})}}},404:{description:"Meeting minute not found with the provided ID",summary:"Meeting Minute Not Found",content:{"application/json":{schema:V.object({message:V.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:V.object({message:V.string()})}}}}},Oy={method:"delete",path:"/meeting/{meetingId}/minute",tags:["Meetings"],summary:"Delete meeting minute",security:[{bearerAuth:[]}],request:{params:Ui},responses:{200:{description:"Meeting minute deleted successfully",summary:"Meeting Minute Deleted"},400:{description:"Invalid meeting minute ID format",summary:"Validation Error",content:{"application/json":{schema:V.object({errors:V.record(V.string(),V.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:V.object({message:V.string()})}}},404:{description:"Meeting minute not found with the provided ID",summary:"Meeting Minute Not Found",content:{"application/json":{schema:V.object({message:V.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:V.object({message:V.string()})}}}}};import v from"zod";import{extendZodWithOpenApi as jI}from"@asteasolutions/zod-to-openapi";import Ve from"zod";jI(Ve);var xp=Ve.object({title:Ve.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio"),scheduledAt:Ve.coerce.date(),format:Ve.enum(we).default(we.ONLINE),agenda:Ve.string().min(1,"Pauta \xE9 obrigat\xF3ria"),meetingLink:Ve.union([Ve.url("Link da reuni\xE3o deve ser uma URL v\xE1lida"),Ve.literal("")]),location:Ve.string().optional(),status:Ve.enum(Ae).default(Ae.PENDING)}).refine(r=>r.format===we.ONLINE?!!r.meetingLink:r.format===we.IN_PERSON?!!r.location:!0,{message:"Reuni\xF5es online devem ter link e reuni\xF5es presenciais devem ter localiza\xE7\xE3o",path:["format"]}),xn=class{constructor(e){this.meetingRepository=e}async handle(e,t){let{title:o,scheduledAt:i,format:n,agenda:s,meetingLink:a,location:m,status:p}=xp.parse(e.body);return await this.meetingRepository.create({title:o,scheduledAt:i,format:n,agenda:s,meetingLink:a||void 0,location:m||void 0,status:p??Ae.PENDING}),t.sendStatus(201)}};import{extendZodWithOpenApi as kI}from"@asteasolutions/zod-to-openapi";import Mp from"zod";kI(Mp);var wp=Mp.object({id:Mp.uuid()}),Mn=class{constructor(e){this.meetingRepository=e}async handle(e,t){let{id:o}=wp.parse({id:e.params.id});if(!await this.meetingRepository.findById(o))throw new c("A reuni\xE3o n\xE3o existe.");return await this.meetingRepository.deleteById(o),t.sendStatus(200)}};import{extendZodWithOpenApi as FI}from"@asteasolutions/zod-to-openapi";import vp from"zod";FI(vp);var vn=vp.object({id:vp.uuid()}),wn=class{constructor(e){this.meetingRepository=e}async handle(e,t){let{id:o}=vn.parse({id:e.params.id}),i=await this.meetingRepository.findById(o);if(!i)throw new c("A reuni\xE3o n\xE3o existe.");return t.status(200).json(i)}};import{extendZodWithOpenApi as DI}from"@asteasolutions/zod-to-openapi";import Up from"zod";DI(Up);var jp=Up.object({status:Up.enum(Ae)}),Un=class{constructor(e){this.meetingRepository=e}async handle(e,t){let{status:o}=jp.parse({status:e.params.status}),i=await this.meetingRepository.findByStatus(o);return t.status(200).json(i)}};import{extendZodWithOpenApi as OI}from"@asteasolutions/zod-to-openapi";import Ft from"zod";var BI=1;OI(Ft);var kp=Ft.object({page:Ft.coerce.number().min(1).default(BI),limit:Ft.coerce.number().optional(),title:Ft.string().optional(),format:Ft.enum(we).optional(),status:Ft.enum(Ae).optional(),orderBy:Ft.enum(["asc","desc"]).default("desc")}),jn=class{constructor(e){this.meetingRepository=e}async handle(e,t){let{page:o,limit:i,...n}=kp.parse(e.query),s=i?i*o-i:void 0,[a,m]=await Promise.all([this.meetingRepository.find({pagination:{offset:s,limit:i},filter:n}),this.meetingRepository.count({filter:n})]),p=i?Math.max(Math.ceil(m/i),1):1;t.status(200).json({page:o,totalPages:p,offset:s,limit:i,meetings:a})}};import{extendZodWithOpenApi as qI}from"@asteasolutions/zod-to-openapi";import Oe from"zod";qI(Oe);var Fp=Oe.object({id:Oe.uuid(),title:Oe.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio").optional(),scheduledAt:Oe.coerce.date().optional(),format:Oe.enum(we).optional(),agenda:Oe.string().min(1,"Pauta \xE9 obrigat\xF3ria").optional(),meetingLink:Oe.union([Oe.url("Link da reuni\xE3o deve ser uma URL v\xE1lida"),Oe.literal("")]),location:Oe.string().optional(),status:Oe.enum(Ae).optional()}),kn=class{constructor(e){this.meetingRepository=e}async handle(e,t){let{id:o,title:i,scheduledAt:n,format:s,agenda:a,meetingLink:m,location:p,status:f}=Fp.parse({id:e.params.id,...e.body});if(!await this.meetingRepository.findById(o))throw new c("A reuni\xE3o n\xE3o existe.");return await this.meetingRepository.update({id:o,title:i,scheduledAt:n,format:s,agenda:a,meetingLink:m||void 0,location:p||void 0,status:f}),t.sendStatus(200)}};var NI=v.object({id:v.uuid(),title:v.string(),publishedAt:v.date(),documentUrl:v.string(),meetingId:v.uuid(),createdAt:v.date(),updatedAt:v.date()}),Dp=v.object({id:v.uuid(),title:v.string(),scheduledAt:v.date(),format:v.enum(we),agenda:v.string(),meetingLink:v.string().nullable(),location:v.string().nullable(),status:v.enum(Ae),minutes:NI.nullable(),createdAt:v.date(),updatedAt:v.date()}),By={method:"post",path:"/meeting",tags:["Meetings"],summary:"Create a new meeting",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:xp}}}},responses:{201:{description:"Meeting created successfully",summary:"Meeting Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:v.object({errors:v.record(v.string(),v.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:v.object({message:v.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:v.object({message:v.string()})}}}}},qy={method:"get",path:"/meeting",tags:["Meetings"],summary:"List all meetings with pagination and filters",request:{query:kp},responses:{200:{description:"List of meetings retrieved successfully with pagination",summary:"Meetings Retrieved",content:{"application/json":{schema:v.object({page:v.number(),totalPages:v.number(),offset:v.number().optional(),limit:v.number().optional(),meetings:v.array(Dp)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:v.object({errors:v.record(v.string(),v.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:v.object({message:v.string()})}}}}},Ny={method:"get",path:"/meeting/{id}",tags:["Meetings"],summary:"Find meeting by ID",request:{params:vn},responses:{200:{description:"Meeting details retrieved successfully",summary:"Meeting Retrieved",content:{"application/json":{schema:Dp}}},400:{description:"Invalid meeting ID format",summary:"Validation Error",content:{"application/json":{schema:v.object({errors:v.record(v.string(),v.string())})}}},404:{description:"Meeting not found with the provided ID",summary:"Meeting Not Found",content:{"application/json":{schema:v.object({message:v.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:v.object({message:v.string()})}}}}},Gy={method:"get",path:"/meeting/status/{status}",tags:["Meetings"],summary:"Find meetings by status",request:{params:jp},responses:{200:{description:"Meetings retrieved successfully by status",summary:"Meetings Retrieved by Status",content:{"application/json":{schema:v.array(Dp)}}},400:{description:"Invalid status parameter provided",summary:"Validation Error",content:{"application/json":{schema:v.object({errors:v.record(v.string(),v.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:v.object({message:v.string()})}}}}},_y={method:"put",path:"/meeting/{id}",tags:["Meetings"],summary:"Update meeting",security:[{bearerAuth:[]}],request:{params:vn,body:{content:{"application/json":{schema:Fp.omit({id:!0})}}}},responses:{200:{description:"Meeting updated successfully",summary:"Meeting Updated"},400:{description:"Invalid input data or meeting ID format",summary:"Validation Error",content:{"application/json":{schema:v.object({errors:v.record(v.string(),v.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:v.object({message:v.string()})}}},404:{description:"Meeting not found with the provided ID",summary:"Meeting Not Found",content:{"application/json":{schema:v.object({message:v.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:v.object({message:v.string()})}}}}},Ly={method:"delete",path:"/meeting/{id}",tags:["Meetings"],summary:"Delete meeting",security:[{bearerAuth:[]}],request:{params:wp},responses:{200:{description:"Meeting deleted successfully",summary:"Meeting Deleted"},400:{description:"Invalid meeting ID format",summary:"Validation Error",content:{"application/json":{schema:v.object({errors:v.record(v.string(),v.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:v.object({message:v.string()})}}},404:{description:"Meeting not found with the provided ID",summary:"Meeting Not Found",content:{"application/json":{schema:v.object({message:v.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:v.object({message:v.string()})}}}}};import O from"zod";import{extendZodWithOpenApi as GI}from"@asteasolutions/zod-to-openapi";import Ue from"zod";var Wy=2,Hy=1024,_I=Hy*Hy,LI=Wy*_I;GI(Ue);var Op=Ue.object({name:Ue.string().min(1,"Nome \xE9 obrigat\xF3rio"),logo:Ue.any().refine(r=>r==null||typeof r!="object"||typeof r.size!="number"?!1:r.size<=LI,`A imagem deve ter no m\xE1ximo ${Wy}MB.`),city:Ue.string().optional(),state:Ue.string().optional(),country:Ue.string().optional(),description:Ue.string().optional(),website:Ue.url("URL do site deve ser v\xE1lida").optional(),email:Ue.email("Email deve ser v\xE1lido").optional(),phone:Ue.string().optional(),address:Ue.string().optional(),functioning:Ue.string().optional()}),Fn=class{constructor(e,t){this.museumRepository=e;this.firebaseStorageService=t}async handle(e,t){let{name:o,logo:i,city:n,state:s,country:a,description:m,website:p,email:f,phone:I,address:L,functioning:ie}=Op.parse({...e.body,logo:e.file}),ne=await this.museumRepository.create({name:o,city:n,state:s,country:a,description:m,website:p,email:f,phone:I,address:L,functioning:ie}),pe=await this.firebaseStorageService.uploadFile({file:i,id:ne.id,folder:x.MUSEUM});return await this.museumRepository.update({id:ne.id,logoUrl:pe}),t.sendStatus(201)}};import{extendZodWithOpenApi as HI}from"@asteasolutions/zod-to-openapi";import Bp from"zod";HI(Bp);var qp=Bp.object({id:Bp.uuid()}),Dn=class{constructor(e,t){this.museumRepository=e;this.firebaseStorageService=t}async handle(e,t){let{id:o}=qp.parse({id:e.params.id}),i=await this.museumRepository.findById(o);if(!i)throw new c("O museu n\xE3o existe.");return i.logoUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.logoUrl}),await this.museumRepository.deleteById(o),t.sendStatus(200)}};import{extendZodWithOpenApi as WI}from"@asteasolutions/zod-to-openapi";import Np from"zod";WI(Np);var Bn=Np.object({id:Np.uuid()}),On=class{constructor(e){this.museumRepository=e}async handle(e,t){let{id:o}=Bn.parse({id:e.params.id}),i=await this.museumRepository.findById(o);if(!i)throw new c("O museu n\xE3o existe.");return t.status(200).json(i)}};import{extendZodWithOpenApi as $I}from"@asteasolutions/zod-to-openapi";import pt from"zod";var VI=1;$I(pt);var Gp=pt.object({page:pt.coerce.number().min(1).default(VI),limit:pt.coerce.number().optional(),name:pt.string().optional(),city:pt.string().optional(),state:pt.string().optional(),country:pt.string().optional(),orderBy:pt.enum(["asc","desc"]).default("desc")}),qn=class{constructor(e){this.museumRepository=e}async handle(e,t){let{page:o,limit:i,...n}=Gp.parse(e.query),s=i?i*o-i:void 0,[a,m]=await Promise.all([this.museumRepository.find({pagination:{offset:s,limit:i},filter:n}),this.museumRepository.count({filter:n})]),p=i?Math.max(Math.ceil(m/i),1):1;t.status(200).json({page:o,totalPages:p,offset:s,limit:i,museums:a})}};import{extendZodWithOpenApi as zI}from"@asteasolutions/zod-to-openapi";import Ee from"zod";var Vy=2,$y=1024,ZI=$y*$y,KI=Vy*ZI;zI(Ee);var _p=Ee.object({id:Ee.uuid(),name:Ee.string().min(1,"Nome \xE9 obrigat\xF3rio").optional(),logo:Ee.any().refine(r=>r==null?!0:typeof r!="object"||typeof r.size!="number"?!1:r.size<=KI,`A imagem deve ter no m\xE1ximo ${Vy}MB.`).optional(),city:Ee.string().optional(),state:Ee.string().optional(),country:Ee.string().optional(),description:Ee.string().optional(),website:Ee.url("URL do site deve ser v\xE1lida").optional(),email:Ee.string().email("Email deve ser v\xE1lido").optional(),phone:Ee.string().optional(),address:Ee.string().optional(),functioning:Ee.string().optional()}),Nn=class{constructor(e,t){this.museumRepository=e;this.firebaseStorageService=t}async handle(e,t){let{id:o,name:i,logo:n,city:s,state:a,country:m,description:p,website:f,email:I,phone:L,address:ie,functioning:ne}=_p.parse({id:e.params.id,...e.body,logo:e.file}),pe=await this.museumRepository.findById(o);if(!pe)throw new c("O museu n\xE3o existe.");let _e=pe.logoUrl;if(n&&(_e=await this.firebaseStorageService.uploadFile({file:n,id:o,folder:"images/museums"})),!_e)throw new be("Logo URL \xE9 obrigat\xF3rio");return await this.museumRepository.update({id:o,name:i,logoUrl:_e,city:s,state:a,country:m,description:p,website:f,email:I,phone:L,address:ie,functioning:ne}),t.sendStatus(200)}};var zy=O.object({id:O.uuid(),logoUrl:O.string().nullable(),name:O.string(),city:O.string().nullable(),state:O.string().nullable(),country:O.string().nullable(),description:O.string().nullable(),website:O.string().nullable(),email:O.string().nullable(),phone:O.string().nullable(),address:O.string().nullable(),functioning:O.string().nullable(),createdAt:O.date(),updatedAt:O.date()}),Zy={method:"post",path:"/museum",tags:["Museums"],summary:"Create a new museum with logo upload",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:Op}}}},responses:{201:{description:"Museum created successfully",summary:"Museum Created"},400:{description:"Invalid input data, missing required fields, or invalid logo format/size",summary:"Validation Error",content:{"application/json":{schema:O.object({errors:O.record(O.string(),O.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:O.object({message:O.string()})}}},409:{description:"Museum with this name already exists",summary:"Conflict",content:{"application/json":{schema:O.object({message:O.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:O.object({message:O.string()})}}}}},Ky={method:"get",path:"/museum",tags:["Museums"],summary:"List all museums with pagination and filters",request:{query:Gp},responses:{200:{description:"List of museums retrieved successfully with pagination",summary:"Museums Retrieved",content:{"application/json":{schema:O.object({page:O.number(),totalPages:O.number(),offset:O.number().optional(),limit:O.number().optional(),museums:O.array(zy)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:O.object({errors:O.record(O.string(),O.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:O.object({message:O.string()})}}}}},Jy={method:"get",path:"/museum/{id}",tags:["Museums"],summary:"Find museum by ID",request:{params:Bn},responses:{200:{description:"Museum details retrieved successfully",summary:"Museum Retrieved",content:{"application/json":{schema:zy}}},400:{description:"Invalid museum ID format",summary:"Validation Error",content:{"application/json":{schema:O.object({errors:O.record(O.string(),O.string())})}}},404:{description:"Museum not found with the provided ID",summary:"Museum Not Found",content:{"application/json":{schema:O.object({message:O.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:O.object({message:O.string()})}}}}},Yy={method:"put",path:"/museum/{id}",tags:["Museums"],summary:"Update museum with optional logo upload",security:[{bearerAuth:[]}],request:{params:Bn,body:{content:{"multipart/form-data":{schema:_p.omit({id:!0})}}}},responses:{200:{description:"Museum updated successfully",summary:"Museum Updated"},400:{description:"Invalid input data, museum ID format, or invalid logo format/size",summary:"Validation Error",content:{"application/json":{schema:O.object({errors:O.record(O.string(),O.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:O.object({message:O.string()})}}},404:{description:"Museum not found with the provided ID",summary:"Museum Not Found",content:{"application/json":{schema:O.object({message:O.string()})}}},409:{description:"Museum with this name already exists",summary:"Conflict",content:{"application/json":{schema:O.object({message:O.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:O.object({message:O.string()})}}}}},Xy={method:"delete",path:"/museum/{id}",tags:["Museums"],summary:"Delete museum",security:[{bearerAuth:[]}],request:{params:qp},responses:{200:{description:"Museum deleted successfully",summary:"Museum Deleted"},400:{description:"Invalid museum ID format",summary:"Validation Error",content:{"application/json":{schema:O.object({errors:O.record(O.string(),O.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:O.object({message:O.string()})}}},404:{description:"Museum not found with the provided ID",summary:"Museum Not Found",content:{"application/json":{schema:O.object({message:O.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:O.object({message:O.string()})}}}}};import k from"zod";import{extendZodWithOpenApi as JI}from"@asteasolutions/zod-to-openapi";import ji from"zod";var YI=5,Qy=1024,XI=Qy*Qy,QI=YI*XI;JI(ji);var Lp=ji.object({title:ji.string().min(1),content:ji.string().min(1),image:ji.any().refine(r=>!r||typeof r=="object"&&typeof r.mimetype=="string"&&r.mimetype.startsWith("image/")&&typeof r.size=="number"&&r.size<=QI,{message:"A imagem deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB."})}),Gn=class{constructor(e,t){this.newsRepository=e;this.firebaseStorageService=t}async handle(e,t){let{title:o,content:i,image:n}=Lp.parse({...e.body,image:e.file}),s=e.user.id,a=await this.firebaseStorageService.uploadFile({file:n,folder:x.NEWS,id:s});await this.newsRepository.create({title:o,content:i,authorId:s,imageUrl:a}),t.sendStatus(201)}};import{extendZodWithOpenApi as eS}from"@asteasolutions/zod-to-openapi";import Dt from"zod";var tS=1;eS(Dt);var Hp=Dt.object({page:Dt.coerce.number().min(1).default(tS),limit:Dt.coerce.number().optional(),id:Dt.string(),title:Dt.string().optional(),content:Dt.string().optional(),orderBy:Dt.enum(["asc","desc"]).default("desc")}),_n=class{constructor(e){this.newsRepository=e}async handle(e,t){let{page:o,limit:i,id:n,...s}=Hp.parse(e.query),a=i?i*o-i:void 0,[m,p]=await Promise.all([this.newsRepository.findByAuthorId({authorId:n,pagination:{offset:a,limit:i},filter:s}),this.newsRepository.count({filter:{authorId:n,...s}})]),f=i?Math.max(Math.ceil(p/i),1):1;t.status(200).json({page:o,totalPages:f,offset:a,limit:i,news:m})}};import{extendZodWithOpenApi as rS}from"@asteasolutions/zod-to-openapi";import Wp from"zod";rS(Wp);var $p=Wp.object({id:Wp.string()}),Ln=class{constructor(e){this.newsRepository=e}async handle(e,t){let{id:o}=$p.parse(e.params),i=await this.newsRepository.findById(o);if(!i)throw new c("Not\xEDcia n\xE3o encontrada.");t.status(200).json(i)}};import{extendZodWithOpenApi as iS}from"@asteasolutions/zod-to-openapi";import Ot from"zod";var oS=1;iS(Ot);var Vp=Ot.object({page:Ot.coerce.number().min(1).default(oS),limit:Ot.coerce.number().optional(),title:Ot.string().optional(),content:Ot.string().optional(),authorId:Ot.string().optional(),orderBy:Ot.enum(["asc","desc"]).default("desc")}),Hn=class{constructor(e){this.newsRepository=e}async handle(e,t){let{page:o,limit:i,...n}=Vp.parse(e.query),s=i?i*o-i:void 0,[a,m]=await Promise.all([this.newsRepository.find({pagination:{offset:s,limit:i},filter:n}),this.newsRepository.count({filter:n})]),p=i?Math.max(Math.ceil(m/i),1):1;t.status(200).json({page:o,totalPages:p,offset:s,limit:i,news:a})}};var ef={method:"post",path:"/news",tags:["News"],summary:"Create news",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:Lp}}}},responses:{201:{description:"News article created successfully",summary:"News Created",content:{"application/json":{schema:k.object({message:k.string()})}}},400:{description:"Invalid input data or file format",summary:"Validation Error",content:{"application/json":{schema:k.object({errors:k.record(k.string(),k.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:k.object({message:k.string()})}}}}},tf={method:"get",path:"/news",tags:["News"],summary:"List news",request:{query:Vp},responses:{200:{description:"Paginated list of news articles retrieved successfully",summary:"News Retrieved",content:{"application/json":{schema:k.object({page:k.number(),totalPages:k.number(),offset:k.number().optional(),limit:k.number().optional(),news:k.array(k.object({title:k.string(),content:k.string(),id:k.string(),createdAt:k.date(),updatedAt:k.date(),imageUrl:k.string().nullable()}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:k.object({errors:k.record(k.string(),k.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:k.object({message:k.string()})}}}}},rf={method:"get",path:"/news/{id}",tags:["News"],summary:"Find news by ID",request:{params:$p},responses:{200:{description:"News article details retrieved successfully",summary:"News Retrieved",content:{"application/json":{schema:k.object({page:k.number(),totalPages:k.number(),offset:k.number().optional(),limit:k.number().optional(),news:k.object({title:k.string(),content:k.string(),id:k.string(),createdAt:k.date(),updatedAt:k.date(),imageUrl:k.string().nullable()})})}}},400:{description:"Invalid news ID format",summary:"Validation Error",content:{"application/json":{schema:k.object({errors:k.record(k.string(),k.string())})}}},404:{description:"News article not found with the provided ID",summary:"News Not Found",content:{"application/json":{schema:k.object({message:k.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:k.object({message:k.string()})}}}}},of={method:"get",path:"/news/author/{author_id}",tags:["News"],summary:"List news by author",request:{params:k.object({author_id:k.string().openapi({param:{name:"author_id",in:"path"}})}),query:Hp.omit({id:!0})},responses:{200:{description:"Paginated list of news articles by author retrieved successfully",summary:"Author News Retrieved",content:{"application/json":{schema:k.object({page:k.number(),totalPages:k.number(),offset:k.number().optional(),limit:k.number().optional(),news:k.array(k.object({title:k.string(),content:k.string(),id:k.string(),createdAt:k.date(),updatedAt:k.date(),imageUrl:k.string().nullable()}))})}}},400:{description:"Invalid author ID or query parameters",summary:"Validation Error",content:{"application/json":{schema:k.object({errors:k.record(k.string(),k.string())})}}},404:{description:"Author not found with the provided ID",summary:"Author Not Found",content:{"application/json":{schema:k.object({message:k.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:k.object({message:k.string()})}}}}};import G from"zod";import{extendZodWithOpenApi as nS}from"@asteasolutions/zod-to-openapi";import tt from"zod";var sf=2,nf=1024,sS=nf*nf,aS=sf*sS;nS(tt);var zp=tt.object({name:tt.string().min(1,"Nome \xE9 obrigat\xF3rio"),logo:tt.any().refine(r=>r==null||typeof r!="object"||typeof r.size!="number"?!1:r.size<=aS,`A imagem deve ter no m\xE1ximo ${sf}MB.`),websiteUrl:tt.url("URL do site deve ser v\xE1lida").optional(),description:tt.string().optional(),category:tt.string().optional(),since:tt.coerce.date(),isActive:tt.preprocess(r=>r==="true",tt.boolean().optional())}),Wn=class{constructor(e,t){this.partnerRepository=e;this.firebaseStorageService=t}async handle(e,t){let{name:o,logo:i,websiteUrl:n,description:s,category:a,since:m,isActive:p}=zp.parse({...e.body,logo:e.file}),f=await this.partnerRepository.create({name:o,websiteUrl:n,description:s,category:a,since:m,isActive:p}),I=await this.firebaseStorageService.uploadFile({file:i,id:f.id,folder:x.PARTNER});return await this.partnerRepository.update({id:f.id,logoUrl:I}),t.sendStatus(201)}};import{extendZodWithOpenApi as mS}from"@asteasolutions/zod-to-openapi";import Zp from"zod";mS(Zp);var Kp=Zp.object({id:Zp.uuid()}),$n=class{constructor(e,t){this.partnerRepository=e;this.firebaseStorageService=t}async handle(e,t){let{id:o}=Kp.parse({id:e.params.id}),i=await this.partnerRepository.findById(o);if(!i)throw new c("O parceiro n\xE3o existe.");return i.logoUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.logoUrl}),await this.partnerRepository.deleteById(o),t.sendStatus(200)}};import{extendZodWithOpenApi as cS}from"@asteasolutions/zod-to-openapi";import Jp from"zod";cS(Jp);var zn=Jp.object({id:Jp.uuid()}),Vn=class{constructor(e){this.partnerRepository=e}async handle(e,t){let{id:o}=zn.parse({id:e.params.id}),i=await this.partnerRepository.findById(o);if(!i)throw new c("O parceiro n\xE3o existe.");return t.status(200).json(i)}};import{extendZodWithOpenApi as pS}from"@asteasolutions/zod-to-openapi";import dt from"zod";var dS=1;pS(dt);var Yp=dt.object({page:dt.coerce.number().min(1).default(dS),limit:dt.coerce.number().optional(),name:dt.string().optional(),description:dt.string().optional(),category:dt.string().optional(),isActive:dt.coerce.boolean().optional(),orderBy:dt.enum(["asc","desc"]).default("desc")}),Zn=class{constructor(e){this.partnerRepository=e}async handle(e,t){let{page:o,limit:i,...n}=Yp.parse(e.query),s=i?i*o-i:void 0,[a,m]=await Promise.all([this.partnerRepository.find({pagination:{offset:s,limit:i},filter:n}),this.partnerRepository.count({filter:n})]),p=i?Math.max(Math.ceil(m/i),1):1;t.status(200).json({page:o,totalPages:p,offset:s,limit:i,partners:a})}};import{extendZodWithOpenApi as lS}from"@asteasolutions/zod-to-openapi";import ze from"zod";var mf=2,af=1024,uS=af*af,gS=mf*uS;lS(ze);var Xp=ze.object({id:ze.uuid(),name:ze.string().min(1,"Nome \xE9 obrigat\xF3rio").optional(),logo:ze.any().refine(r=>r==null?!0:typeof r!="object"||typeof r.size!="number"?!1:r.size<=gS,`A imagem deve ter no m\xE1ximo ${mf}MB.`).optional(),websiteUrl:ze.url("URL do site deve ser v\xE1lida").optional(),description:ze.string().optional(),category:ze.string().optional(),since:ze.coerce.date().optional(),isActive:ze.preprocess(r=>r==="true",ze.boolean().optional())}),Kn=class{constructor(e,t){this.partnerRepository=e;this.firebaseStorageService=t}async handle(e,t){let{id:o,name:i,logo:n,websiteUrl:s,description:a,category:m,since:p,isActive:f}=Xp.parse({id:e.params.id,...e.body,logo:e.file}),I=await this.partnerRepository.findById(o);if(!I)throw new c("O parceiro n\xE3o existe.");let L=I.logoUrl;if(n&&(L=await this.firebaseStorageService.uploadFile({file:n,id:o,folder:"images/partners"})),!L)throw new be("Logo URL \xE9 obrigat\xF3rio");return await this.partnerRepository.update({id:o,name:i,logoUrl:L,websiteUrl:s,description:a,category:m,since:p,isActive:f}),t.sendStatus(200)}};var cf=G.object({id:G.uuid(),name:G.string(),logoUrl:G.string(),description:G.string().nullable(),category:G.string().nullable(),since:G.date(),isActive:G.boolean(),createdAt:G.date(),updatedAt:G.date()}),pf={method:"post",path:"/partner",tags:["Partners"],summary:"Create a new partner with logo upload",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:zp}}}},responses:{201:{description:"Partner created successfully",summary:"Partner Created"},400:{description:"Invalid input data, missing required fields, or invalid logo format/size",summary:"Validation Error",content:{"application/json":{schema:G.object({errors:G.record(G.string(),G.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:G.object({message:G.string()})}}},409:{description:"Partner with this name already exists",summary:"Conflict",content:{"application/json":{schema:G.object({message:G.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:G.object({message:G.string()})}}}}},df={method:"get",path:"/partner",tags:["Partners"],summary:"List all partners with pagination and filters",request:{query:Yp},responses:{200:{description:"List of partners retrieved successfully with pagination",summary:"Partners Retrieved",content:{"application/json":{schema:G.object({page:G.number(),totalPages:G.number(),offset:G.number().optional(),limit:G.number().optional(),partners:G.array(cf)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:G.object({errors:G.record(G.string(),G.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:G.object({message:G.string()})}}}}},lf={method:"get",path:"/partner/{id}",tags:["Partners"],summary:"Find partner by ID",request:{params:zn},responses:{200:{description:"Partner details retrieved successfully",summary:"Partner Retrieved",content:{"application/json":{schema:cf}}},400:{description:"Invalid partner ID format",summary:"Validation Error",content:{"application/json":{schema:G.object({errors:G.record(G.string(),G.string())})}}},404:{description:"Partner not found with the provided ID",summary:"Partner Not Found",content:{"application/json":{schema:G.object({message:G.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:G.object({message:G.string()})}}}}},uf={method:"put",path:"/partner/{id}",tags:["Partners"],summary:"Update partner with optional logo upload",security:[{bearerAuth:[]}],request:{params:zn,body:{content:{"multipart/form-data":{schema:Xp.omit({id:!0})}}}},responses:{200:{description:"Partner updated successfully",summary:"Partner Updated"},400:{description:"Invalid input data, partner ID format, or invalid logo format/size",summary:"Validation Error",content:{"application/json":{schema:G.object({errors:G.record(G.string(),G.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:G.object({message:G.string()})}}},404:{description:"Partner not found with the provided ID",summary:"Partner Not Found",content:{"application/json":{schema:G.object({message:G.string()})}}},409:{description:"Partner with this name already exists",summary:"Conflict",content:{"application/json":{schema:G.object({message:G.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:G.object({message:G.string()})}}}}},gf={method:"delete",path:"/partner/{id}",tags:["Partners"],summary:"Delete partner",security:[{bearerAuth:[]}],request:{params:Kp},responses:{200:{description:"Partner deleted successfully",summary:"Partner Deleted"},400:{description:"Invalid partner ID format",summary:"Validation Error",content:{"application/json":{schema:G.object({errors:G.record(G.string(),G.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:G.object({message:G.string()})}}},404:{description:"Partner not found with the provided ID",summary:"Partner Not Found",content:{"application/json":{schema:G.object({message:G.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:G.object({message:G.string()})}}}}};import q from"zod";import{extendZodWithOpenApi as yS}from"@asteasolutions/zod-to-openapi";import Bt from"zod";yS(Bt);var Qp=Bt.object({id:Bt.uuid(),title:Bt.string().min(1),description:Bt.string().optional(),status:Bt.enum(Me).default("PENDING"),dueDate:Bt.coerce.date().optional(),document:Bt.any().refine(r=>r&&typeof r=="object"&&r.size>0,"Arquivo do documento \xE9 obrigat\xF3rio")}),Jn=class{constructor(e,t,o){this.userRepository=e;this.pendencyRepository=t;this.firebaseStorageService=o}async handle(e,t){let{id:o,title:i,description:n,status:s,dueDate:a,document:m}=Qp.parse({...e.body,...e.params,document:e.file});if(!await this.userRepository.findById(o))throw new ue("O usu\xE1rio n\xE3o existe.");let f=await this.firebaseStorageService.uploadFile({file:m,id:o,folder:PATHS.PENDENCY});return await this.pendencyRepository.create({userId:o,title:i,description:n,status:s,dueDate:a,documentUrl:f}),t.sendStatus(201)}};import{extendZodWithOpenApi as fS}from"@asteasolutions/zod-to-openapi";import ed from"zod";fS(ed);var td=ed.object({id:ed.uuid()}),Yn=class{constructor(e,t){this.pendencyRepository=e;this.firebaseStorageService=t}async handle(e,t){let{id:o}=td.parse(e.params),i=await this.pendencyRepository.findById(o);if(!i)throw new c("A pend\xEAncia n\xE3o existe.");return await Promise.all([this.pendencyRepository.deleteById(i.id),this.firebaseStorageService.deleteFile({fileUrl:i.documentUrl})]),t.sendStatus(204)}};import{extendZodWithOpenApi as hS}from"@asteasolutions/zod-to-openapi";import lt from"zod";var RS=1;hS(lt);var rd=lt.object({page:lt.coerce.number().min(1).default(RS),limit:lt.coerce.number().optional(),title:lt.string().optional(),description:lt.string().optional(),status:lt.enum(Me).default("PENDING"),userId:lt.uuid().optional(),orderBy:lt.enum(["asc","desc"]).default("desc")}),Xn=class{constructor(e){this.pendencyRepository=e}async handle(e,t){let{limit:o,orderBy:i,page:n,...s}=rd.parse(e.query),a=o?o*n-o:void 0,[m,p]=await Promise.all([this.pendencyRepository.find({pagination:{offset:a,limit:o},filter:{orderBy:i,...s}}),this.pendencyRepository.count({filter:s})]),f=o?Math.max(Math.ceil(p/o),1):1;return t.status(200).json({page:n,totalPages:f,offset:a,limit:o,pendencies:m})}};import{extendZodWithOpenApi as PS}from"@asteasolutions/zod-to-openapi";import id from"zod";PS(id);var od=id.object({id:id.uuid()}),Qn=class{constructor(e){this.pendencyRepository=e}async handle(e,t){let{id:o}=od.parse(e.params),i=await this.pendencyRepository.findById(o);if(!i)throw new c("Pend\xEAncia n\xE3o encontrada.");return t.status(200).json(i)}};import{extendZodWithOpenApi as bS}from"@asteasolutions/zod-to-openapi";import qt from"zod";bS(qt);var ts=qt.object({id:qt.uuid(),title:qt.string().min(1),description:qt.string().optional(),status:qt.enum(Me),dueDate:qt.coerce.date().optional(),document:qt.any().refine(r=>r==null||typeof r=="object"&&typeof r.size=="number"&&(r.size===0||r.size>0),"Arquivo do documento \xE9 inv\xE1lido").optional()}),es=class{constructor(e,t){this.pendencyRepository=e;this.firebaseStorageService=t}async handle(e,t){let{document:o,id:i,...n}=ts.parse({...e.body,id:e.params.id,document:e.file}),s=await this.pendencyRepository.findById(i);if(!s)throw new ue("A pend\xEAncia n\xE3o existe");let a=s.documentUrl;return o&&o.size>0&&(a=await this.firebaseStorageService.updateFile({file:o,id:s.userId,folder:x.PENDENCY,fileUrl:s.documentUrl})),await this.pendencyRepository.update({...n,id:i,documentUrl:a}),t.sendStatus(204)}};var yf={method:"post",path:"/pendency/{user_id}",tags:["Pendencies"],summary:"Create pendency for user",security:[{bearerAuth:[]}],request:{params:q.object({user_id:q.string().openapi({param:{name:"user_id",in:"path"}})}),body:{content:{"multipart/form-data":{schema:Qp.omit({id:!0})}}}},responses:{201:{description:"Pendency created successfully for the user",summary:"Pendency Created",content:{"application/json":{schema:q.object({})}}},400:{description:"Invalid input data or file format",summary:"Validation Error",content:{"application/json":{schema:q.object({errors:q.record(q.string(),q.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:q.object({message:q.string()})}}}}},ff={method:"get",path:"/pendency",tags:["Pendencies"],summary:"List pendencies",security:[{bearerAuth:[]}],request:{query:rd},responses:{200:{description:"Paginated list of pendencies retrieved successfully",summary:"Pendencies Retrieved",content:{"application/json":{schema:q.object({page:q.number(),totalPages:q.number(),offset:q.number().optional(),limit:q.number().optional(),pendencies:q.array(q.object({id:q.string(),title:q.string(),description:q.string().nullable(),status:q.enum(Me),dueDate:q.date().nullable(),documentUrl:q.string(),userId:q.string(),createdAt:q.date(),updatedAt:q.date()}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:q.object({errors:q.record(q.string(),q.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:q.object({message:q.string()})}}}}},hf={method:"get",path:"/pendency/{pendency_id}",tags:["Pendencies"],summary:"Find pendency by ID",security:[{bearerAuth:[]}],request:{params:od},responses:{200:{description:"Pendency details retrieved successfully",summary:"Pendency Retrieved",content:{"application/json":{schema:q.object({id:q.string(),title:q.string(),description:q.string().nullable(),status:q.enum(Me),dueDate:q.date().nullable(),documentUrl:q.string(),userId:q.string(),createdAt:q.date(),updatedAt:q.date()}).nullable()}}},400:{description:"Invalid pendency ID format",summary:"Validation Error",content:{"application/json":{schema:q.object({errors:q.record(q.string(),q.string())})}}},404:{description:"Pendency not found with the provided ID",summary:"Pendency Not Found",content:{"application/json":{schema:q.object({message:q.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:q.object({message:q.string()})}}}}},Rf={method:"put",path:"/pendency/{pendency_id}",tags:["Pendencies"],summary:"Update pendency",security:[{bearerAuth:[]}],request:{params:ts.pick({id:!0}).transform(()=>({pendency_id:""})),body:{content:{"multipart/form-data":{schema:ts.omit({id:!0})}}}},responses:{204:{description:"Pendency updated successfully",summary:"Pendency Updated"},400:{description:"Invalid input data or pendency does not exist",summary:"Validation Error",content:{"application/json":{schema:q.object({errors:q.record(q.string(),q.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:q.object({message:q.string()})}}}}},Pf={method:"delete",path:"/pendency/{pendency_id}",tags:["Pendencies"],summary:"Delete pendency",security:[{bearerAuth:[]}],request:{params:td},responses:{204:{description:"Pendency deleted successfully",summary:"Pendency Deleted"},400:{description:"Invalid pendency ID format",summary:"Validation Error",content:{"application/json":{schema:q.object({errors:q.record(q.string(),q.string())})}}},404:{description:"Pendency not found with the provided ID",summary:"Pendency Not Found",content:{"application/json":{schema:q.object({message:q.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:q.object({message:q.string()})}}}}};import S from"zod";import{extendZodWithOpenApi as CS}from"@asteasolutions/zod-to-openapi";import nd from"zod";CS(nd);var sd=nd.object({id:nd.uuid()}),rs=class{constructor(e,t){this.postGraduateProgramRepository=e;this.firebaseStorageService=t}async handle(e,t){let{id:o}=sd.parse({id:e.params.id}),i=await this.postGraduateProgramRepository.findById(o);if(!i)throw new c("O programa de p\xF3s-gradua\xE7\xE3o n\xE3o existe.");return i.imageUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.imageUrl}),await this.postGraduateProgramRepository.deleteById(o),t.sendStatus(200)}};import{extendZodWithOpenApi as TS}from"@asteasolutions/zod-to-openapi";import ad from"zod";TS(ad);var md=ad.object({id:ad.uuid()}),is=class{constructor(e){this.postGraduateProgramRepository=e}async handle(e,t){let{id:o}=md.parse({id:e.params.id}),i=await this.postGraduateProgramRepository.findById(o);if(!i)throw new c("Programa de p\xF3s-gradua\xE7\xE3o n\xE3o encontrado.");return t.status(200).json(i)}};import{extendZodWithOpenApi as AS}from"@asteasolutions/zod-to-openapi";import Nt from"zod";var IS=1;AS(Nt);var cd=Nt.object({page:Nt.coerce.number().min(1).default(IS),limit:Nt.coerce.number().optional(),title:Nt.string().optional(),description:Nt.string().optional(),contact:Nt.string().optional(),orderBy:Nt.enum(["asc","desc"]).default("desc")}),os=class{constructor(e){this.postGraduateProgramRepository=e}async handle(e,t){let{limit:o,page:i,...n}=cd.parse(e.query),s=o?o*i-o:void 0,[a,m]=await Promise.all([this.postGraduateProgramRepository.find({pagination:{offset:s,limit:o},filter:n}),this.postGraduateProgramRepository.count({filter:n})]),p=o?Math.max(Math.ceil(m/o),1):1;return t.status(200).json({page:i,totalPages:p,offset:s,limit:o,postGraduatePrograms:a})}};import{extendZodWithOpenApi as SS}from"@asteasolutions/zod-to-openapi";import rt from"zod";var Cf=5,bf=1024,ES=bf*bf,xS=Cf*ES;SS(rt);var pd=rt.object({id:rt.uuid(),title:rt.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio.").optional(),description:rt.string().optional(),startDate:rt.coerce.date().optional(),endDate:rt.coerce.date().optional(),contact:rt.string().min(1,"Contato \xE9 obrigat\xF3rio.").optional(),registrationLink:rt.url("URL de inscri\xE7\xE3o deve ser v\xE1lida").optional(),image:rt.any().refine(r=>r==null?!0:typeof r!="object"||typeof r.size!="number"?!1:r.size<=xS,`A imagem deve ter no m\xE1ximo ${Cf}MB.`).optional()}),ns=class{constructor(e,t){this.postGraduateProgramRepository=e;this.firebaseStorageService=t}async handle(e,t){let{id:o,image:i,title:n,description:s,startDate:a,endDate:m,contact:p,registrationLink:f}=pd.parse({id:e.params.id,...e.body,image:e.file}),I=await this.postGraduateProgramRepository.findById(o);if(!I)throw new c("O programa de p\xF3s-gradua\xE7\xE3o n\xE3o existe.");let L=I.imageUrl;if(i&&(L=await this.firebaseStorageService.uploadFile({file:i,id:o,folder:x.POST_GRADUATE_PROGRAM})),!L)throw new be("URL da imagem \xE9 obrigat\xF3rio");return await this.postGraduateProgramRepository.update({id:o,title:n,description:s,startDate:a,endDate:m,contact:p,registrationLink:f,imageUrl:L}),t.sendStatus(200)}};var Tf={method:"post",path:"/post-graduate-programs",tags:["Post Graduate Programs"],summary:"Create post-graduate program",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:S.object({title:S.string().min(1).openapi({description:"T\xEDtulo do programa"}),description:S.string().optional().openapi({description:"Descri\xE7\xE3o do programa"}),startDate:S.string().openapi({description:"Data de in\xEDcio (ISO 8601)",example:"2024-01-01T10:00:00Z"}),endDate:S.string().openapi({description:"Data de t\xE9rmino (ISO 8601)",example:"2024-12-31T10:00:00Z"}),contact:S.string().min(1).openapi({description:"Informa\xE7\xF5es de contato"}),registrationLink:S.string().url().optional().openapi({description:"Link de inscri\xE7\xE3o"}),image:S.string().optional().openapi({description:"Imagem do programa (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{201:{description:"Post-graduate program created successfully",summary:"Program Created"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:S.object({errors:S.record(S.string(),S.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:S.object({message:S.string()})}}}}},Af={method:"get",path:"/post-graduate-programs",tags:["Post Graduate Programs"],summary:"List post-graduate programs",security:[{bearerAuth:[]}],request:{query:cd},responses:{200:{description:"Paginated list of post-graduate programs retrieved successfully",summary:"Programs Retrieved",content:{"application/json":{schema:S.object({page:S.number(),totalPages:S.number(),offset:S.number().optional(),limit:S.number().optional(),postGraduatePrograms:S.array(S.object({id:S.string(),title:S.string(),imageUrl:S.string().nullable(),description:S.string().nullable(),startDate:S.date(),endDate:S.date(),contact:S.string(),registrationLink:S.string().nullable(),createdAt:S.date(),updatedAt:S.date()}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:S.object({errors:S.record(S.string(),S.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:S.object({message:S.string()})}}}}},If={method:"get",path:"/post-graduate-programs/{id}",tags:["Post Graduate Programs"],summary:"Find post-graduate program by ID",security:[{bearerAuth:[]}],request:{params:md},responses:{200:{description:"Post-graduate program details retrieved successfully",summary:"Program Retrieved",content:{"application/json":{schema:S.object({id:S.string(),title:S.string(),imageUrl:S.string().nullable(),description:S.string().nullable(),startDate:S.date(),endDate:S.date(),contact:S.string(),registrationLink:S.string().nullable(),createdAt:S.date(),updatedAt:S.date()}).nullable()}}},400:{description:"Invalid program ID format",summary:"Validation Error",content:{"application/json":{schema:S.object({errors:S.record(S.string(),S.string())})}}},404:{description:"Post-graduate program not found with the provided ID",summary:"Program Not Found",content:{"application/json":{schema:S.object({message:S.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:S.object({message:S.string()})}}}}},Sf={method:"put",path:"/post-graduate-programs/{id}",tags:["Post Graduate Programs"],summary:"Update post-graduate program",security:[{bearerAuth:[]}],request:{params:pd.pick({id:!0}),body:{content:{"multipart/form-data":{schema:S.object({title:S.string().min(1).optional().openapi({description:"T\xEDtulo do programa"}),description:S.string().optional().openapi({description:"Descri\xE7\xE3o do programa"}),startDate:S.string().optional().openapi({description:"Data de in\xEDcio (ISO 8601)",example:"2024-01-01T10:00:00Z"}),endDate:S.string().optional().openapi({description:"Data de t\xE9rmino (ISO 8601)",example:"2024-12-31T10:00:00Z"}),contact:S.string().min(1).optional().openapi({description:"Informa\xE7\xF5es de contato"}),registrationLink:S.string().url().optional().openapi({description:"Link de inscri\xE7\xE3o"}),image:S.string().optional().openapi({description:"Imagem do programa (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{200:{description:"Post-graduate program updated successfully",summary:"Program Updated"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:S.object({errors:S.record(S.string(),S.string())})}}},404:{description:"Post-graduate program not found with the provided ID",summary:"Program Not Found",content:{"application/json":{schema:S.object({message:S.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:S.object({message:S.string()})}}}}},Ef={method:"delete",path:"/post-graduate-programs/{id}",tags:["Post Graduate Programs"],summary:"Delete post-graduate program",security:[{bearerAuth:[]}],request:{params:sd},responses:{200:{description:"Post-graduate program deleted successfully",summary:"Program Deleted"},400:{description:"Invalid program ID format",summary:"Validation Error",content:{"application/json":{schema:S.object({errors:S.record(S.string(),S.string())})}}},404:{description:"Post-graduate program not found with the provided ID",summary:"Program Not Found",content:{"application/json":{schema:S.object({message:S.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:S.object({message:S.string()})}}}}};import z from"zod";import{extendZodWithOpenApi as MS}from"@asteasolutions/zod-to-openapi";import Gt from"zod";MS(Gt);var dd=Gt.object({type:Gt.enum(vu),description:Gt.string().optional(),honorableMention:Gt.coerce.boolean().optional(),honoredAt:Gt.coerce.date(),meritUrl:Gt.string().url("URL do m\xE9rito deve ser v\xE1lida").optional(),userId:Gt.string().uuid("ID do usu\xE1rio deve ser v\xE1lido")}),ss=class{constructor(e){this.redectHighlightRepository=e}async handle(e,t){let{type:o,description:i,honorableMention:n,honoredAt:s,meritUrl:a,userId:m}=dd.parse(e.body);return await this.redectHighlightRepository.create({type:o,description:i,honorableMention:n,honoredAt:s,meritUrl:a,userId:m}),t.sendStatus(201)}};import{extendZodWithOpenApi as wS}from"@asteasolutions/zod-to-openapi";import ld from"zod";wS(ld);var ud=ld.object({id:ld.uuid()}),as=class{constructor(e){this.redectHighlightRepository=e}async handle(e,t){let{id:o}=ud.parse(e.params);if(!await this.redectHighlightRepository.findById(o))throw new c("O destaque n\xE3o existe.");return await this.redectHighlightRepository.deleteById(o),t.sendStatus(200)}};import{extendZodWithOpenApi as vS}from"@asteasolutions/zod-to-openapi";import gd from"zod";vS(gd);var cs=gd.object({id:gd.uuid()}),ms=class{constructor(e){this.redectHighlightRepository=e}async handle(e,t){let{id:o}=cs.parse(e.params),i=await this.redectHighlightRepository.findById(o);if(!i)throw new c("Destaque n\xE3o encontrado.");return t.status(200).json(i)}};import{extendZodWithOpenApi as US}from"@asteasolutions/zod-to-openapi";import ir from"zod";var jS=1;US(ir);var yd=ir.object({page:ir.coerce.number().min(1).default(jS),limit:ir.coerce.number().optional(),type:ir.enum(["PERSON","INSTITUTION"]).optional(),description:ir.string().optional(),orderBy:ir.enum(["asc","desc"]).default("desc")}),ps=class{constructor(e){this.redectHighlightRepository=e}async handle(e,t){let{page:o,limit:i,...n}=yd.parse(e.query),s=i?i*o-i:void 0,[a,m]=await Promise.all([this.redectHighlightRepository.find({pagination:{offset:s,limit:i},filter:n}),this.redectHighlightRepository.count({filter:n})]),p=i?Math.max(Math.ceil(m/i),1):1;t.status(200).json({page:o,totalPages:p,offset:s,limit:i,highlights:a})}};import{extendZodWithOpenApi as kS}from"@asteasolutions/zod-to-openapi";import ut from"zod";kS(ut);var fd=ut.object({id:ut.uuid(),type:ut.enum(["PERSON","INSTITUTION"]).optional(),description:ut.string().optional(),honorableMention:ut.coerce.boolean().optional(),honoredAt:ut.coerce.date().optional(),meritUrl:ut.string().url("URL do m\xE9rito deve ser v\xE1lida").optional(),userId:ut.string().uuid("ID do usu\xE1rio deve ser v\xE1lido").optional()}),ds=class{constructor(e){this.redectHighlightRepository=e}async handle(e,t){let{id:o,type:i,description:n,honorableMention:s,honoredAt:a,meritUrl:m,userId:p}=fd.parse({id:e.params.id,...e.body});if(!await this.redectHighlightRepository.findById(o))throw new c("O destaque n\xE3o existe.");return await this.redectHighlightRepository.update({id:o,type:i,description:n,honorableMention:s,honoredAt:a,meritUrl:m,userId:p}),t.sendStatus(200)}};var xf=z.object({id:z.uuid(),type:z.enum(["PERSON","INSTITUTION"]),name:z.string(),description:z.string().nullable(),honorableMention:z.string().nullable(),imageUrl:z.string().nullable(),honoredAt:z.date(),meritUrl:z.string().nullable(),createdAt:z.date(),updatedAt:z.date()}),Mf={method:"post",path:"/redect-highlight",tags:["RedeCT Highlights"],summary:"Create a new RedeCT highlight with image upload",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:dd}}}},responses:{201:{description:"RedeCT highlight created successfully",summary:"Highlight Created"},400:{description:"Invalid input data, missing required fields, or invalid image format/size",summary:"Validation Error",content:{"application/json":{schema:z.object({errors:z.record(z.string(),z.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:z.object({message:z.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:z.object({message:z.string()})}}}}},wf={method:"get",path:"/redect-highlight",tags:["RedeCT Highlights"],summary:"List all RedeCT highlights with pagination and filters",request:{query:yd},responses:{200:{description:"List of RedeCT highlights retrieved successfully with pagination",summary:"Highlights Retrieved",content:{"application/json":{schema:z.object({page:z.number(),totalPages:z.number(),offset:z.number().optional(),limit:z.number().optional(),highlights:z.array(xf)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:z.object({errors:z.record(z.string(),z.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:z.object({message:z.string()})}}}}},vf={method:"get",path:"/redect-highlight/{id}",tags:["RedeCT Highlights"],summary:"Find RedeCT highlight by ID",request:{params:cs},responses:{200:{description:"RedeCT highlight details retrieved successfully",summary:"Highlight Retrieved",content:{"application/json":{schema:xf}}},400:{description:"Invalid highlight ID format",summary:"Validation Error",content:{"application/json":{schema:z.object({errors:z.record(z.string(),z.string())})}}},404:{description:"RedeCT highlight not found with the provided ID",summary:"Highlight Not Found",content:{"application/json":{schema:z.object({message:z.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:z.object({message:z.string()})}}}}},Uf={method:"put",path:"/redect-highlight/{id}",tags:["RedeCT Highlights"],summary:"Update RedeCT highlight with optional image upload",security:[{bearerAuth:[]}],request:{params:cs,body:{content:{"multipart/form-data":{schema:fd.omit({id:!0})}}}},responses:{200:{description:"RedeCT highlight updated successfully",summary:"Highlight Updated"},400:{description:"Invalid input data, highlight ID format, or invalid image format/size",summary:"Validation Error",content:{"application/json":{schema:z.object({errors:z.record(z.string(),z.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:z.object({message:z.string()})}}},404:{description:"RedeCT highlight not found with the provided ID",summary:"Highlight Not Found",content:{"application/json":{schema:z.object({message:z.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:z.object({message:z.string()})}}}}},jf={method:"delete",path:"/redect-highlight/{id}",tags:["RedeCT Highlights"],summary:"Delete RedeCT highlight",security:[{bearerAuth:[]}],request:{params:ud},responses:{200:{description:"RedeCT highlight deleted successfully",summary:"Highlight Deleted"},400:{description:"Invalid highlight ID format",summary:"Validation Error",content:{"application/json":{schema:z.object({errors:z.record(z.string(),z.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:z.object({message:z.string()})}}},404:{description:"RedeCT highlight not found with the provided ID",summary:"Highlight Not Found",content:{"application/json":{schema:z.object({message:z.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:z.object({message:z.string()})}}}}};import Z from"zod";import{extendZodWithOpenApi as FS}from"@asteasolutions/zod-to-openapi";import ki from"zod";FS(ki);var hd=ki.object({role:ki.string().min(1),description:ki.string().optional(),userId:ki.uuid()}),ls=class{constructor(e){this.referenceCenterTeamMemberRepository=e}async handle(e,t){let{role:o,description:i,userId:n}=hd.parse(e.body);return await this.referenceCenterTeamMemberRepository.create({role:o,description:i,userId:n}),t.sendStatus(201)}};import{extendZodWithOpenApi as DS}from"@asteasolutions/zod-to-openapi";import Rd from"zod";DS(Rd);var Pd=Rd.object({id:Rd.uuid()}),us=class{constructor(e){this.referenceCenterTeamMemberRepository=e}async handle(e,t){let{id:o}=Pd.parse({id:e.params.id});if(!await this.referenceCenterTeamMemberRepository.findById(o))throw new c("O membro do centro de refer\xEAncia n\xE3o existe.");return await this.referenceCenterTeamMemberRepository.deleteById(o),t.sendStatus(200)}};import{extendZodWithOpenApi as OS}from"@asteasolutions/zod-to-openapi";import bd from"zod";OS(bd);var ys=bd.object({id:bd.uuid()}),gs=class{constructor(e){this.referenceCenterTeamMemberRepository=e}async handle(e,t){let{id:o}=ys.parse({id:e.params.id}),i=await this.referenceCenterTeamMemberRepository.findById(o);if(!i)throw new c("O membro do centro de refer\xEAncia n\xE3o existe.");return t.status(200).json(i)}};import{extendZodWithOpenApi as BS}from"@asteasolutions/zod-to-openapi";import $r from"zod";BS($r);var Cd=$r.object({id:$r.uuid(),role:$r.string().min(1).optional(),description:$r.string().optional(),userId:$r.uuid().optional()}),fs=class{constructor(e){this.referenceCenterTeamMemberRepository=e}async handle(e,t){let{id:o,role:i,description:n,userId:s}=Cd.parse({id:e.params.id,...e.body});if(!await this.referenceCenterTeamMemberRepository.findById(o))throw new c("O membro do centro de refer\xEAncia n\xE3o existe.");return await this.referenceCenterTeamMemberRepository.update({id:o,role:i,description:n,userId:s}),t.sendStatus(200)}};var qS=Z.object({id:Z.uuid(),name:Z.string(),emailAddress:Z.string(),avatarUrl:Z.string().nullable(),orcid:Z.string().nullable(),phone:Z.string().nullable(),lattesUrl:Z.string().nullable(),role:Z.enum(le)}),kf=Z.object({id:Z.uuid(),role:Z.string(),description:Z.string().nullable(),createdAt:Z.date(),updatedAt:Z.date(),userId:Z.uuid(),user:qS}),Ff={method:"post",path:"/reference-center-team-member",tags:["Reference Center Team Members"],summary:"Create a new Reference Center Team Member",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:hd}}}},responses:{201:{description:"Reference Center Team Member created successfully",summary:"Reference Center Team Member Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:Z.object({errors:Z.record(Z.string(),Z.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:Z.object({message:Z.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Z.object({message:Z.string()})}}}}},Df={method:"get",path:"/reference-center-team-member",tags:["Reference Center Team Members"],summary:"List all Reference Center Team Members with filters",request:{query:Z.object({role:Z.string().optional(),orderBy:Z.enum(["asc","desc"]).default("desc")})},responses:{200:{description:"List of Reference Center Team Members retrieved successfully",summary:"Reference Center Team Members Retrieved",content:{"application/json":{schema:Z.object({members:Z.array(kf)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Z.object({message:Z.string()})}}}}},Of={method:"get",path:"/reference-center-team-member/{id}",tags:["Reference Center Team Members"],summary:"Find Reference Center Team Member by ID",request:{params:ys},responses:{200:{description:"Reference Center Team Member details retrieved successfully",summary:"Reference Center Team Member Retrieved",content:{"application/json":{schema:kf}}},400:{description:"Invalid Reference Center Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:Z.object({errors:Z.record(Z.string(),Z.string())})}}},404:{description:"Reference Center Team Member not found with the provided ID",summary:"Reference Center Team Member Not Found",content:{"application/json":{schema:Z.object({message:Z.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Z.object({message:Z.string()})}}}}},Bf={method:"put",path:"/reference-center-team-member/{id}",tags:["Reference Center Team Members"],summary:"Update Reference Center Team Member",security:[{bearerAuth:[]}],request:{params:ys,body:{content:{"application/json":{schema:Cd.omit({id:!0})}}}},responses:{200:{description:"Reference Center Team Member updated successfully",summary:"Reference Center Team Member Updated"},400:{description:"Invalid input data or Reference Center Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:Z.object({errors:Z.record(Z.string(),Z.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:Z.object({message:Z.string()})}}},404:{description:"Reference Center Team Member not found with the provided ID",summary:"Reference Center Team Member Not Found",content:{"application/json":{schema:Z.object({message:Z.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Z.object({message:Z.string()})}}}}},qf={method:"delete",path:"/reference-center-team-member/{id}",tags:["Reference Center Team Members"],summary:"Delete Reference Center Team Member",security:[{bearerAuth:[]}],request:{params:Pd},responses:{200:{description:"Reference Center Team Member deleted successfully",summary:"Reference Center Team Member Deleted"},400:{description:"Invalid Reference Center Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:Z.object({errors:Z.record(Z.string(),Z.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:Z.object({message:Z.string()})}}},404:{description:"Reference Center Team Member not found with the provided ID",summary:"Reference Center Team Member Not Found",content:{"application/json":{schema:Z.object({message:Z.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Z.object({message:Z.string()})}}}}};import B from"zod";import{extendZodWithOpenApi as NS}from"@asteasolutions/zod-to-openapi";import or from"zod";var Gf=10,Nf=1024,GS=Nf*Nf,_S=Gf*GS;NS(or);var Td=or.object({title:or.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio"),version:or.string().min(1,"Vers\xE3o \xE9 obrigat\xF3ria"),publishedAt:or.coerce.date(),document:or.any().refine(r=>r==null||typeof r!="object"||typeof r.size!="number"?!1:r.size<=_S,`O documento deve ter no m\xE1ximo ${Gf}MB.`),status:or.enum(Le).optional()}),hs=class{constructor(e,t){this.regimentRepository=e;this.firebaseStorageService=t}async handle(e,t){let{title:o,version:i,publishedAt:n,document:s,status:a}=Td.parse({...e.body,document:e.file}),m=await this.regimentRepository.create({title:o,version:i,publishedAt:n,documentUrl:"",status:a??Le.IN_FORCE}),p=await this.firebaseStorageService.uploadFile({file:s,id:m.id,folder:x.REGIMENT});return await this.regimentRepository.update({id:m.id,documentUrl:p}),t.sendStatus(201)}};import{extendZodWithOpenApi as LS}from"@asteasolutions/zod-to-openapi";import Ad from"zod";LS(Ad);var Id=Ad.object({id:Ad.uuid()}),Rs=class{constructor(e,t){this.regimentRepository=e;this.firebaseStorageService=t}async handle(e,t){let{id:o}=Id.parse({id:e.params.id}),i=await this.regimentRepository.findById(o);if(!i)throw new c("O regimento n\xE3o existe.");return i.documentUrl&&await this.firebaseStorageService.deleteFile({fileUrl:i.documentUrl}),await this.regimentRepository.deleteById(o),t.sendStatus(200)}};import{extendZodWithOpenApi as HS}from"@asteasolutions/zod-to-openapi";import Sd from"zod";HS(Sd);var bs=Sd.object({id:Sd.uuid()}),Ps=class{constructor(e){this.regimentRepository=e}async handle(e,t){let{id:o}=bs.parse({id:e.params.id}),i=await this.regimentRepository.findById(o);if(!i)throw new c("O regimento n\xE3o existe.");return t.status(200).json(i)}};import{extendZodWithOpenApi as WS}from"@asteasolutions/zod-to-openapi";import Ed from"zod";WS(Ed);var xd=Ed.object({status:Ed.enum(Le)}),Cs=class{constructor(e){this.regimentRepository=e}async handle(e,t){let{status:o}=xd.parse({status:e.params.status}),i=await this.regimentRepository.findByStatus(o);return t.status(200).json(i)}};import{extendZodWithOpenApi as $S}from"@asteasolutions/zod-to-openapi";import nr from"zod";var VS=1;$S(nr);var Md=nr.object({page:nr.coerce.number().min(1).default(VS),limit:nr.coerce.number().optional(),title:nr.string().optional(),status:nr.enum(Le).optional(),orderBy:nr.enum(["asc","desc"]).default("desc")}),Ts=class{constructor(e){this.regimentRepository=e}async handle(e,t){let{page:o,limit:i,...n}=Md.parse(e.query),s=i?i*o-i:void 0,[a,m]=await Promise.all([this.regimentRepository.find({pagination:{offset:s,limit:i},filter:n}),this.regimentRepository.count({filter:n})]),p=i?Math.max(Math.ceil(m/i),1):1;t.status(200).json({page:o,totalPages:p,offset:s,limit:i,regiments:a})}};import{extendZodWithOpenApi as zS}from"@asteasolutions/zod-to-openapi";import _t from"zod";var Lf=10,_f=1024,ZS=_f*_f,KS=Lf*ZS;zS(_t);var wd=_t.object({id:_t.uuid(),title:_t.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio").optional(),version:_t.string().min(1,"Vers\xE3o \xE9 obrigat\xF3ria").optional(),publishedAt:_t.coerce.date().optional(),document:_t.any().refine(r=>r==null?!0:typeof r!="object"||typeof r.size!="number"?!1:r.size<=KS,`O documento deve ter no m\xE1ximo ${Lf}MB.`).optional(),status:_t.enum(Le).optional()}),As=class{constructor(e,t){this.regimentRepository=e;this.firebaseStorageService=t}async handle(e,t){let{id:o,title:i,version:n,publishedAt:s,document:a,status:m}=wd.parse({id:e.params.id,...e.body,document:e.file}),p=await this.regimentRepository.findById(o);if(!p)throw new c("O regimento n\xE3o existe.");let f=p.documentUrl;return a&&(p.documentUrl&&await this.firebaseStorageService.deleteFile({fileUrl:p.documentUrl}),f=await this.firebaseStorageService.uploadFile({file:a,id:o,folder:x.REGIMENT})),await this.regimentRepository.update({id:o,title:i,version:n,publishedAt:s,documentUrl:f??void 0,status:m}),t.sendStatus(200)}};var vd=B.object({id:B.uuid(),title:B.string(),version:B.string(),publishedAt:B.date(),documentUrl:B.string(),status:B.enum(Le),createdAt:B.date(),updatedAt:B.date()}),Hf={method:"post",path:"/regiment",tags:["Regiments"],summary:"Create a new regiment with document upload",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:Td}}}},responses:{201:{description:"Regiment created successfully",summary:"Regiment Created"},400:{description:"Invalid input data, missing required fields, or invalid document format/size",summary:"Validation Error",content:{"application/json":{schema:B.object({errors:B.record(B.string(),B.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:B.object({message:B.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:B.object({message:B.string()})}}}}},Wf={method:"get",path:"/regiment",tags:["Regiments"],summary:"List all regiments with pagination and filters",request:{query:Md},responses:{200:{description:"List of regiments retrieved successfully with pagination",summary:"Regiments Retrieved",content:{"application/json":{schema:B.object({page:B.number(),totalPages:B.number(),offset:B.number().optional(),limit:B.number().optional(),regiments:B.array(vd)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:B.object({errors:B.record(B.string(),B.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:B.object({message:B.string()})}}}}},$f={method:"get",path:"/regiment/{id}",tags:["Regiments"],summary:"Find regiment by ID",request:{params:bs},responses:{200:{description:"Regiment details retrieved successfully",summary:"Regiment Retrieved",content:{"application/json":{schema:vd}}},400:{description:"Invalid regiment ID format",summary:"Validation Error",content:{"application/json":{schema:B.object({errors:B.record(B.string(),B.string())})}}},404:{description:"Regiment not found with the provided ID",summary:"Regiment Not Found",content:{"application/json":{schema:B.object({message:B.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:B.object({message:B.string()})}}}}},Vf={method:"get",path:"/regiment/status/{status}",tags:["Regiments"],summary:"Find regiments by status",request:{params:xd},responses:{200:{description:"Regiments retrieved successfully by status",summary:"Regiments Retrieved by Status",content:{"application/json":{schema:B.array(vd)}}},400:{description:"Invalid status parameter provided",summary:"Validation Error",content:{"application/json":{schema:B.object({errors:B.record(B.string(),B.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:B.object({message:B.string()})}}}}},zf={method:"put",path:"/regiment/{id}",tags:["Regiments"],summary:"Update regiment with optional document upload",security:[{bearerAuth:[]}],request:{params:bs,body:{content:{"multipart/form-data":{schema:wd.omit({id:!0})}}}},responses:{200:{description:"Regiment updated successfully",summary:"Regiment Updated"},400:{description:"Invalid input data, regiment ID format, or invalid document format/size",summary:"Validation Error",content:{"application/json":{schema:B.object({errors:B.record(B.string(),B.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:B.object({message:B.string()})}}},404:{description:"Regiment not found with the provided ID",summary:"Regiment Not Found",content:{"application/json":{schema:B.object({message:B.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:B.object({message:B.string()})}}}}},Zf={method:"delete",path:"/regiment/{id}",tags:["Regiments"],summary:"Delete regiment",security:[{bearerAuth:[]}],request:{params:Id},responses:{200:{description:"Regiment deleted successfully",summary:"Regiment Deleted"},400:{description:"Invalid regiment ID format",summary:"Validation Error",content:{"application/json":{schema:B.object({errors:B.record(B.string(),B.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:B.object({message:B.string()})}}},404:{description:"Regiment not found with the provided ID",summary:"Regiment Not Found",content:{"application/json":{schema:B.object({message:B.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:B.object({message:B.string()})}}}}};import ee from"zod";import{extendZodWithOpenApi as JS}from"@asteasolutions/zod-to-openapi";import Fi from"zod";var Jf=5,Kf=1024,YS=Kf*Kf,XS=Jf*YS;JS(Fi);var Ud=Fi.object({caption:Fi.string().optional(),image:Fi.any().refine(r=>r==null||typeof r!="object"||typeof r.size!="number"?!1:r.size<=XS,`A imagem deve ter no m\xE1ximo ${Jf}MB.`),id:Fi.uuid()}),Is=class{constructor(e,t,o){this.regionalCongressGalleryRepository=e;this.regionalCongressRepository=t;this.firebaseStorageService=o}async handle(e,t){let{caption:o,image:i,id:n}=Ud.parse({...e.body,...e.params,image:e.file});if(!await this.regionalCongressRepository.findById(n))throw new c("O congresso n\xE3o existe.");let a=await this.regionalCongressGalleryRepository.create({caption:o,congressId:n,imageUrl:""}),m=await this.firebaseStorageService.uploadFile({file:i,id:a.id,folder:x.GALLERY});return await this.regionalCongressGalleryRepository.update({id:a.id,imageUrl:m}),t.sendStatus(201)}};import{extendZodWithOpenApi as QS}from"@asteasolutions/zod-to-openapi";import jd from"zod";QS(jd);var Es=jd.object({id:jd.uuid("ID inv\xE1lido")}),Ss=class{constructor(e){this.regionalCongressGalleryRepository=e}async handle(e,t){let{id:o}=Es.parse(e.params);if(!await this.regionalCongressGalleryRepository.findById(o))throw new c("Item de galeria n\xE3o encontrado");return await this.regionalCongressGalleryRepository.deleteById(o),t.sendStatus(204)}};import{extendZodWithOpenApi as eE}from"@asteasolutions/zod-to-openapi";import sr from"zod";var tE=1;eE(sr);var kd=sr.object({id:sr.uuid(),page:sr.coerce.number().default(tE),limit:sr.coerce.number().optional(),caption:sr.string().optional(),orderBy:sr.enum(["asc","desc"]).default("desc")}),xs=class{constructor(e){this.regionalCongressGalleryRepository=e}async handle(e,t){let{page:o,limit:i,caption:n,id:s}=kd.parse({...e.params,...e.query}),a=i?i*o-i:void 0,[m,p]=await Promise.all([this.regionalCongressGalleryRepository.findByCongressId({pagination:{offset:a,limit:i},filter:{caption:n,congressId:s}}),this.regionalCongressGalleryRepository.count({filter:{caption:n,congressId:s}})]),f=i?Math.ceil(p/i):1;return t.status(200).json({page:o,limit:i,total:p,totalPages:f,galleryImages:m})}};import{extendZodWithOpenApi as rE}from"@asteasolutions/zod-to-openapi";import Di from"zod";var Xf=5,Yf=1024,iE=Yf*Yf,oE=Xf*iE;rE(Di);var Fd=Di.object({id:Di.string().uuid("ID inv\xE1lido"),caption:Di.string().optional(),image:Di.any().refine(r=>r==null?!0:typeof r!="object"||typeof r.size!="number"?!1:r.size<=oE,`A imagem deve ter no m\xE1ximo ${Xf}MB.`).optional()}),Ms=class{constructor(e,t){this.regionalCongressGalleryRepository=e;this.firebaseStorageService=t}async handle(e,t){let{id:o,caption:i,image:n}=Fd.parse({...e.params,...e.body,image:e.file});if(!await this.regionalCongressGalleryRepository.findById(o))throw new c("Item de galeria n\xE3o encontrado");let a;return n&&(a=await this.firebaseStorageService.uploadFile({file:n,id:o,folder:x.GALLERY})),await this.regionalCongressGalleryRepository.update({id:o,caption:i,...a&&{imageUrl:a}}),t.sendStatus(204)}};var nE=ee.object({id:ee.uuid(),imageUrl:ee.string(),caption:ee.string().nullable(),congressId:ee.uuid()}),Qf={method:"post",path:"/regional-congress/{congressId}/gallery",tags:["Regional Congresses"],summary:"Create a new congress gallery image",security:[{bearerAuth:[]}],request:{params:ee.object({congressId:ee.uuid()}),body:{content:{"application/json":{schema:Ud.omit({id:!0})}}}},responses:{201:{description:"Congress gallery image created successfully",summary:"Congress Gallery Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:ee.object({errors:ee.record(ee.string(),ee.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:ee.object({message:ee.string()})}}},404:{description:"Congress not found with the provided ID",summary:"Congress Not Found",content:{"application/json":{schema:ee.object({message:ee.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:ee.object({message:ee.string()})}}}}},eh={method:"get",path:"/regional-congress/{congressId}/gallery",tags:["Regional Congresses"],summary:"Find congress gallery images by congress ID",request:{params:kd},responses:{200:{description:"Congress gallery images retrieved successfully by congress ID",summary:"Congress Galleries Retrieved",content:{"application/json":{schema:ee.object({page:ee.number(),limit:ee.number().optional(),total:ee.number(),totalPages:ee.number(),galleryImages:ee.array(nE)})}}},400:{description:"Invalid congress ID parameter provided",summary:"Validation Error",content:{"application/json":{schema:ee.object({errors:ee.record(ee.string(),ee.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:ee.object({message:ee.string()})}}}}},th={method:"put",path:"/regional-congress/gallery/{id}",tags:["Regional Congresses"],summary:"Update congress gallery image",security:[{bearerAuth:[]}],request:{params:Es,body:{content:{"application/json":{schema:Fd.omit({id:!0})}}}},responses:{200:{description:"Congress gallery image updated successfully",summary:"Congress Gallery Updated"},400:{description:"Invalid input data or gallery ID format",summary:"Validation Error",content:{"application/json":{schema:ee.object({errors:ee.record(ee.string(),ee.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:ee.object({message:ee.string()})}}},404:{description:"Congress gallery image not found with the provided ID",summary:"Congress Gallery Not Found",content:{"application/json":{schema:ee.object({message:ee.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:ee.object({message:ee.string()})}}}}},rh={method:"delete",path:"/regional-congress/gallery/{id}",tags:["Regional Congresses"],summary:"Delete congress gallery image",security:[{bearerAuth:[]}],request:{params:Es},responses:{200:{description:"Congress gallery image deleted successfully",summary:"Congress Gallery Deleted"},400:{description:"Invalid gallery ID format",summary:"Validation Error",content:{"application/json":{schema:ee.object({errors:ee.record(ee.string(),ee.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:ee.object({message:ee.string()})}}},404:{description:"Congress gallery image not found with the provided ID",summary:"Congress Gallery Not Found",content:{"application/json":{schema:ee.object({message:ee.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:ee.object({message:ee.string()})}}}}};import te from"zod";import{extendZodWithOpenApi as sE}from"@asteasolutions/zod-to-openapi";import Oi from"zod";var oh=2,ih=1024,aE=ih*ih,mE=oh*aE;sE(Oi);var Dd=Oi.object({name:Oi.string().min(1,"Nome \xE9 obrigat\xF3rio"),logo:Oi.any().refine(r=>r==null?!0:typeof r!="object"||typeof r.size!="number"?!1:r.size<=mE,`A imagem deve ter no m\xE1ximo ${oh}MB.`).optional(),id:Oi.uuid()}),ws=class{constructor(e,t,o){this.regionalCongressPartnerRepository=e;this.regionalCongressRepository=t;this.firebaseStorageService=o}async handle(e,t){let{name:o,logo:i,id:n}=Dd.parse({...e.body,...e.params,logo:e.file});if(!await this.regionalCongressRepository.findById(n))throw new c("O congresso n\xE3o existe.");let a=await this.regionalCongressPartnerRepository.create({name:o,congressId:n}),m;return i&&(m=await this.firebaseStorageService.uploadFile({file:i,id:a.id,folder:x.PARTNER}),await this.regionalCongressPartnerRepository.update({id:a.id,logoUrl:m})),t.sendStatus(201)}};import{extendZodWithOpenApi as cE}from"@asteasolutions/zod-to-openapi";import Od from"zod";cE(Od);var Us=Od.object({id:Od.string().uuid("ID inv\xE1lido")}),vs=class{constructor(e){this.regionalCongressPartnerRepository=e}async handle(e,t){let{id:o}=Us.parse(e.params);if(!await this.regionalCongressPartnerRepository.findById(o))throw new c("Parceiro n\xE3o encontrado");return await this.regionalCongressPartnerRepository.deleteById(o),t.sendStatus(204)}};import{extendZodWithOpenApi as pE}from"@asteasolutions/zod-to-openapi";import Vr from"zod";var dE=1;pE(Vr);var Bd=Vr.object({id:Vr.uuid("ID do congresso inv\xE1lido"),page:Vr.coerce.number().default(dE),limit:Vr.coerce.number().optional(),name:Vr.string().optional()}),js=class{constructor(e){this.regionalCongressPartnerRepository=e}async handle(e,t){let{id:o,page:i,limit:n,name:s}=Bd.parse({...e.params,...e.query}),a=n?n*i-n:void 0,[m,p]=await Promise.all([this.regionalCongressPartnerRepository.findByCongressId({pagination:{offset:a,limit:n},filter:{congressId:o,name:s}}),this.regionalCongressPartnerRepository.count({filter:{congressId:o,name:s}})]),f=n?Math.ceil(p/n):1;return t.status(200).json({page:i,limit:n,total:p,totalPages:f,partners:m})}};import{extendZodWithOpenApi as lE}from"@asteasolutions/zod-to-openapi";import Bi from"zod";var sh=2,nh=1024,uE=nh*nh,gE=sh*uE;lE(Bi);var qd=Bi.object({id:Bi.string().uuid("ID inv\xE1lido"),name:Bi.string().min(1,"Nome \xE9 obrigat\xF3rio").optional(),logo:Bi.any().refine(r=>r==null?!0:typeof r!="object"||typeof r.size!="number"?!1:r.size<=gE,`A imagem deve ter no m\xE1ximo ${sh}MB.`).optional()}),ks=class{constructor(e,t){this.regionalCongressPartnerRepository=e;this.firebaseStorageService=t}async handle(e,t){let{id:o,name:i,logo:n}=qd.parse({...e.params,...e.body,logo:e.file});if(!await this.regionalCongressPartnerRepository.findById(o))throw new c("Parceiro n\xE3o encontrado");let a;return n&&(a=await this.firebaseStorageService.uploadFile({file:n,id:o,folder:x.PARTNER})),await this.regionalCongressPartnerRepository.update({id:o,name:i,...a&&{logoUrl:a}}),t.sendStatus(204)}};var yE=te.object({id:te.uuid(),name:te.string(),logoUrl:te.string().nullable(),congressId:te.uuid()}),ah={method:"post",path:"/regional-congress/{congressId}/partner",tags:["Regional Congresses"],summary:"Create a new congress partner",security:[{bearerAuth:[]}],request:{params:te.object({congressId:te.uuid()}),body:{content:{"application/json":{schema:Dd.omit({id:!0})}}}},responses:{201:{description:"Congress partner created successfully",summary:"Congress Partner Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:te.object({errors:te.record(te.string(),te.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:te.object({message:te.string()})}}},404:{description:"Congress not found with the provided ID",summary:"Congress Not Found",content:{"application/json":{schema:te.object({message:te.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:te.object({message:te.string()})}}}}},mh={method:"get",path:"/regional-congress/{congressId}/partner",tags:["Regional Congresses"],summary:"Find congress partners by congress ID",request:{params:Bd},responses:{200:{description:"Congress partners retrieved successfully by congress ID",summary:"Congress Partners Retrieved",content:{"application/json":{schema:te.object({page:te.number(),limit:te.number().optional(),total:te.number(),totalPages:te.number(),partners:te.array(yE)})}}},400:{description:"Invalid congress ID parameter provided",summary:"Validation Error",content:{"application/json":{schema:te.object({errors:te.record(te.string(),te.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:te.object({message:te.string()})}}}}},ch={method:"put",path:"/regional-congress/partner/{id}",tags:["Regional Congresses"],summary:"Update congress partner",security:[{bearerAuth:[]}],request:{params:Us,body:{content:{"application/json":{schema:qd.omit({id:!0})}}}},responses:{200:{description:"Congress partner updated successfully",summary:"Congress Partner Updated"},400:{description:"Invalid input data or partner ID format",summary:"Validation Error",content:{"application/json":{schema:te.object({errors:te.record(te.string(),te.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:te.object({message:te.string()})}}},404:{description:"Congress partner not found with the provided ID",summary:"Congress Partner Not Found",content:{"application/json":{schema:te.object({message:te.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:te.object({message:te.string()})}}}}},ph={method:"delete",path:"/regional-congress/partner/{id}",tags:["Regional Congresses"],summary:"Delete congress partner",security:[{bearerAuth:[]}],request:{params:Us},responses:{200:{description:"Congress partner deleted successfully",summary:"Congress Partner Deleted"},400:{description:"Invalid partner ID format",summary:"Validation Error",content:{"application/json":{schema:te.object({errors:te.record(te.string(),te.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:te.object({message:te.string()})}}},404:{description:"Congress partner not found with the provided ID",summary:"Congress Partner Not Found",content:{"application/json":{schema:te.object({message:te.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:te.object({message:te.string()})}}}}};import g from"zod";import{extendZodWithOpenApi as fE}from"@asteasolutions/zod-to-openapi";import ce from"zod";fE(ce);var Nd=ce.object({title:ce.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio"),edition:ce.coerce.number().int().positive("Edi\xE7\xE3o deve ser um n\xFAmero positivo"),startDate:ce.coerce.date(),endDate:ce.coerce.date(),description:ce.string().optional(),location:ce.string().optional(),congressLink:ce.union([ce.url("Link do congresso deve ser uma URL v\xE1lida"),ce.literal("")]),noticeUrl:ce.union([ce.url("URL do edital deve ser uma URL v\xE1lida"),ce.literal("")]),scheduleUrl:ce.union([ce.url("URL do cronograma deve ser uma URL v\xE1lida"),ce.literal("")]),programUrl:ce.union([ce.url("URL da programa\xE7\xE3o deve ser uma URL v\xE1lida"),ce.literal("")]),adminReportUrl:ce.union([ce.url("URL do relat\xF3rio administrativo deve ser uma URL v\xE1lida"),ce.literal("")]),proceedingsUrl:ce.union([ce.url("URL dos anais deve ser uma URL v\xE1lida"),ce.literal("")])}).refine(r=>r.endDate>=r.startDate,{message:"Data de t\xE9rmino deve ser posterior ou igual \xE0 data de in\xEDcio",path:["endDate"]}),Fs=class{constructor(e){this.regionalCongressRepository=e}async handle(e,t){let o=Nd.parse(e.body);return await this.regionalCongressRepository.create(o),t.sendStatus(201)}};import{extendZodWithOpenApi as hE}from"@asteasolutions/zod-to-openapi";import Gd from"zod";hE(Gd);var _d=Gd.object({id:Gd.string().uuid("ID inv\xE1lido")}),Ds=class{constructor(e){this.regionalCongressRepository=e}async handle(e,t){let{id:o}=_d.parse(e.params);if(!await this.regionalCongressRepository.findById(o))throw new c("Congresso regional n\xE3o encontrado");return await this.regionalCongressRepository.deleteById(o),t.sendStatus(204)}};import{extendZodWithOpenApi as RE}from"@asteasolutions/zod-to-openapi";import Ld from"zod";RE(Ld);var Hd=Ld.object({edition:Ld.coerce.number().int().positive("Edi\xE7\xE3o deve ser um n\xFAmero positivo")}),Os=class{constructor(e){this.regionalCongressRepository=e}async handle(e,t){let{edition:o}=Hd.parse(e.params),i=await this.regionalCongressRepository.findByEdition(o);if(!i||i.length===0)throw new c("Congresso regional n\xE3o encontrado");return t.status(200).json(i)}};import{extendZodWithOpenApi as PE}from"@asteasolutions/zod-to-openapi";import Wd from"zod";PE(Wd);var qs=Wd.object({id:Wd.string().uuid("ID inv\xE1lido")}),Bs=class{constructor(e){this.regionalCongressRepository=e}async handle(e,t){let{id:o}=qs.parse(e.params),i=await this.regionalCongressRepository.findById(o);if(!i)throw new c("Congresso regional n\xE3o encontrado");return t.status(200).json(i)}};import{extendZodWithOpenApi as bE}from"@asteasolutions/zod-to-openapi";import Lt from"zod";var CE=1;bE(Lt);var $d=Lt.object({page:Lt.coerce.number().default(CE),limit:Lt.coerce.number().optional(),title:Lt.string().optional(),edition:Lt.coerce.number().int().positive().optional(),location:Lt.string().optional(),orderBy:Lt.enum(["asc","desc"]).default("desc")}),Ns=class{constructor(e){this.regionalCongressRepository=e}async handle(e,t){let{page:o,limit:i,orderBy:n,...s}=$d.parse(e.query),a=i?i*o-i:void 0,[m,p]=await Promise.all([this.regionalCongressRepository.find({pagination:{offset:a,limit:i},filter:{...s,orderBy:n}}),this.regionalCongressRepository.count({filter:s})]),f=i?Math.ceil(p/i):1;return t.status(200).json({page:o,totalPages:f,limit:i,offset:a,congresses:m})}};import{extendZodWithOpenApi as TE}from"@asteasolutions/zod-to-openapi";import se from"zod";TE(se);var Vd=se.object({id:se.string().uuid("ID inv\xE1lido"),title:se.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio").optional(),edition:se.coerce.number().int().positive("Edi\xE7\xE3o deve ser um n\xFAmero positivo").optional(),startDate:se.coerce.date().optional(),endDate:se.coerce.date().optional(),description:se.string().optional(),location:se.string().optional(),congressLink:se.union([se.url("Link do congresso deve ser uma URL v\xE1lida"),se.literal("")]),noticeUrl:se.union([se.url("URL do edital deve ser uma URL v\xE1lida"),se.literal("")]),scheduleUrl:se.union([se.url("URL do cronograma deve ser uma URL v\xE1lida"),se.literal("")]),programUrl:se.union([se.url("URL da programa\xE7\xE3o deve ser uma URL v\xE1lida"),se.literal("")]),adminReportUrl:se.union([se.url("URL do relat\xF3rio administrativo deve ser uma URL v\xE1lida"),se.literal("")]),proceedingsUrl:se.union([se.url("URL dos anais deve ser uma URL v\xE1lida"),se.literal("")])}).refine(r=>r.startDate&&r.endDate?r.endDate>=r.startDate:!0,{message:"Data de t\xE9rmino deve ser posterior ou igual \xE0 data de in\xEDcio",path:["endDate"]}),Gs=class{constructor(e){this.regionalCongressRepository=e}async handle(e,t){let{id:o}=se.object({id:se.string().uuid()}).parse(e.params);if(!await this.regionalCongressRepository.findById(o))throw new c("Congresso regional n\xE3o encontrado");let n=Vd.parse({id:o,...e.body});return await this.regionalCongressRepository.update(n),t.sendStatus(204)}};var AE=9,IE=g.object({image:g.any().openapi({type:"string",format:"binary"}),caption:g.string().optional()}),SE=g.object({image:g.any().openapi({type:"string",format:"binary"}).optional(),caption:g.string().optional()}),EE=g.object({id:g.uuid(),name:g.string(),logoUrl:g.string().nullable(),congressId:g.uuid()}),zd=g.object({id:g.uuid(),imageUrl:g.string(),caption:g.string().nullable(),congressId:g.uuid()}),Zd=g.object({id:g.uuid(),title:g.string(),edition:g.number(),startDate:g.date(),endDate:g.date(),description:g.string().nullable(),location:g.string().nullable(),congressLink:g.string().nullable(),noticeUrl:g.string().nullable(),scheduleUrl:g.string().nullable(),programUrl:g.string().nullable(),adminReportUrl:g.string().nullable(),proceedingsUrl:g.string().nullable(),partners:g.array(EE),galleries:g.array(zd),createdAt:g.date(),updatedAt:g.date()}),dh={method:"post",path:"/regional-congress",tags:["Regional Congresses"],summary:"Create a new regional congress",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:Nd}}}},responses:{201:{description:"Regional congress created successfully",summary:"Regional Congress Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:g.object({message:g.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}},lh={method:"get",path:"/regional-congress",tags:["Regional Congresses"],summary:"List all regional congresses with pagination and filters",request:{query:$d},responses:{200:{description:"List of regional congresses retrieved successfully with pagination",summary:"Regional Congresses Retrieved",content:{"application/json":{schema:g.object({page:g.number(),totalPages:g.number(),offset:g.number().optional(),limit:g.number().optional(),congresses:g.array(Zd)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}},uh={method:"get",path:"/regional-congress/{id}",tags:["Regional Congresses"],summary:"Find regional congress by ID",request:{params:qs},responses:{200:{description:"Regional congress details retrieved successfully",summary:"Regional Congress Retrieved",content:{"application/json":{schema:Zd}}},400:{description:"Invalid regional congress ID format",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},404:{description:"Regional congress not found with the provided ID",summary:"Regional Congress Not Found",content:{"application/json":{schema:g.object({message:g.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}},gh={method:"get",path:"/regional-congress/edition/{edition}",tags:["Regional Congresses"],summary:"Find regional congresses by edition",request:{params:Hd},responses:{200:{description:"Regional congresses retrieved successfully by edition",summary:"Regional Congresses Retrieved by Edition",content:{"application/json":{schema:g.array(Zd)}}},400:{description:"Invalid edition parameter provided",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}},yh={method:"put",path:"/regional-congress/{id}",tags:["Regional Congresses"],summary:"Update regional congress",security:[{bearerAuth:[]}],request:{params:qs,body:{content:{"application/json":{schema:Vd.omit({id:!0})}}}},responses:{200:{description:"Regional congress updated successfully",summary:"Regional Congress Updated"},400:{description:"Invalid input data or regional congress ID format",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:g.object({message:g.string()})}}},404:{description:"Regional congress not found with the provided ID",summary:"Regional Congress Not Found",content:{"application/json":{schema:g.object({message:g.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}},fh={method:"delete",path:"/regional-congress/{id}",tags:["Regional Congresses"],summary:"Delete regional congress",security:[{bearerAuth:[]}],request:{params:_d},responses:{200:{description:"Regional congress deleted successfully",summary:"Regional Congress Deleted"},400:{description:"Invalid regional congress ID format",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:g.object({message:g.string()})}}},404:{description:"Regional congress not found with the provided ID",summary:"Regional Congress Not Found",content:{"application/json":{schema:g.object({message:g.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}},C$={method:"post",path:"/regional-congress/{congressId}/gallery",tags:["Regional Congress Gallery"],summary:"Create a new gallery image for a congress",security:[{bearerAuth:[]}],request:{params:g.object({congressId:g.uuid()}),body:{content:{"multipart/form-data":{schema:IE}}}},responses:{201:{description:"Gallery image created successfully",summary:"Gallery Image Created"},400:{description:"Invalid input data, missing required fields, or invalid image format/size",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:g.object({message:g.string()})}}},404:{description:"Congress not found with the provided ID",summary:"Congress Not Found",content:{"application/json":{schema:g.object({message:g.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}},T$={method:"get",path:"/regional-congress/{congressId}/gallery",tags:["Regional Congress Gallery"],summary:"List all gallery images for a congress with pagination",request:{params:g.object({congressId:g.uuid()}),query:g.object({page:g.coerce.number().min(1).default(1),limit:g.coerce.number().min(1).default(AE),caption:g.string().optional()})},responses:{200:{description:"Gallery images retrieved successfully with pagination",summary:"Gallery Images Retrieved",content:{"application/json":{schema:g.object({page:g.number(),totalPages:g.number(),offset:g.number().optional(),limit:g.number().optional(),galleries:g.array(zd)})}}},400:{description:"Invalid congress ID format or query parameters",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}},A$={method:"get",path:"/regional-congress/gallery/{id}",tags:["Regional Congress Gallery"],summary:"Find a gallery image by ID",request:{params:g.object({id:g.uuid()})},responses:{200:{description:"Gallery image retrieved successfully",summary:"Gallery Image Retrieved",content:{"application/json":{schema:zd}}},400:{description:"Invalid gallery image ID format",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},404:{description:"Gallery image not found with the provided ID",summary:"Gallery Image Not Found",content:{"application/json":{schema:g.object({message:g.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}},I$={method:"put",path:"/regional-congress/gallery/{id}",tags:["Regional Congress Gallery"],summary:"Update a gallery image with optional image upload",security:[{bearerAuth:[]}],request:{params:g.object({id:g.uuid()}),body:{content:{"multipart/form-data":{schema:SE}}}},responses:{200:{description:"Gallery image updated successfully",summary:"Gallery Image Updated"},400:{description:"Invalid input data, gallery ID format, or invalid image format/size",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:g.object({message:g.string()})}}},404:{description:"Gallery image not found with the provided ID",summary:"Gallery Image Not Found",content:{"application/json":{schema:g.object({message:g.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}},S$={method:"delete",path:"/regional-congress/gallery/{id}",tags:["Regional Congress Gallery"],summary:"Delete a gallery image",security:[{bearerAuth:[]}],request:{params:g.object({id:g.uuid()})},responses:{200:{description:"Gallery image deleted successfully",summary:"Gallery Image Deleted"},400:{description:"Invalid gallery ID format",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:g.object({message:g.string()})}}},404:{description:"Gallery image not found with the provided ID",summary:"Gallery Image Not Found",content:{"application/json":{schema:g.object({message:g.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}};import y from"zod";import{extendZodWithOpenApi as xE}from"@asteasolutions/zod-to-openapi";import Kd from"zod";xE(Kd);var Jd=Kd.object({id:Kd.uuid()}),_s=class{constructor(e,t){this.researchGroupRepository=e;this.firebaseStorageService=t}async handle(e,t){let{id:o}=Jd.parse({id:e.params.id}),i=await this.researchGroupRepository.findById(o);if(!i)throw new c("O grupo de pesquisa n\xE3o existe.");return i.logoUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.logoUrl}),await this.researchGroupRepository.deleteById(o),t.sendStatus(200)}};import{extendZodWithOpenApi as ME}from"@asteasolutions/zod-to-openapi";import Yd from"zod";ME(Yd);var Xd=Yd.object({id:Yd.uuid()}),Ls=class{constructor(e){this.researchGroupRepository=e}async handle(e,t){let{id:o}=Xd.parse({id:e.params.id}),i=await this.researchGroupRepository.findById(o);if(!i)throw new c("Grupo de pesquisa n\xE3o encontrado.");return t.status(200).json(i)}};import{extendZodWithOpenApi as wE}from"@asteasolutions/zod-to-openapi";import gt from"zod";var vE=1;wE(gt);var Qd=gt.object({page:gt.coerce.number().min(1).default(vE),limit:gt.coerce.number().optional(),name:gt.string().optional(),acronym:gt.string().optional(),description:gt.string().optional(),leader:gt.string().optional(),orderBy:gt.enum(["asc","desc"]).default("desc")}),Hs=class{constructor(e){this.researchGroupRepository=e}async handle(e,t){let{limit:o,page:i,...n}=Qd.parse(e.query),s=o?o*i-o:void 0,[a,m]=await Promise.all([this.researchGroupRepository.find({pagination:{offset:s,limit:o},filter:n}),this.researchGroupRepository.count({filter:n})]),p=o?Math.max(Math.ceil(m/o),1):1;return t.status(200).json({page:i,totalPages:p,offset:s,limit:o,researchGroups:a})}};import{extendZodWithOpenApi as UE}from"@asteasolutions/zod-to-openapi";import je from"zod";var Rh=5,hh=1024,jE=hh*hh,kE=Rh*jE;UE(je);var el=je.object({id:je.uuid(),name:je.string().min(1,"Nome \xE9 obrigat\xF3rio.").optional(),acronym:je.string().optional(),description:je.string().optional(),url:je.url("URL deve ser v\xE1lida.").optional(),foundedAt:je.coerce.date().optional(),scope:je.string().optional(),email:je.email("E-mail deve ser v\xE1lido.").optional(),leaderId:je.uuid("L\xEDder \xE9 obrigat\xF3rio.").optional(),deputyLeaderId:je.uuid("Vice-l\xEDder \xE9 obrigat\xF3rio.").optional(),logo:je.any().refine(r=>r==null?!0:typeof r!="object"||typeof r.size!="number"?!1:r.size<=kE,`O logo deve ter no m\xE1ximo ${Rh}MB.`).optional()}),Ws=class{constructor(e,t){this.researchGroupRepository=e;this.firebaseStorageService=t}async handle(e,t){let{id:o,logo:i,name:n,acronym:s,description:a,url:m,foundedAt:p,scope:f,email:I,leaderId:L,deputyLeaderId:ie}=el.parse({id:e.params.id,...e.body,logo:e.file}),ne=await this.researchGroupRepository.findById(o);if(!ne)throw new c("O grupo de pesquisa n\xE3o existe.");let pe=ne.logoUrl;return i&&(pe=await this.firebaseStorageService.uploadFile({file:i,id:o,folder:x.RESEARCH_GROUP_LOGO})),await this.researchGroupRepository.update({id:o,name:n,acronym:s,description:a,url:m,foundedAt:p,scope:f,email:I,leaderId:L,deputyLeaderId:ie,logoUrl:pe}),t.sendStatus(200)}};var Ph={method:"post",path:"/research-groups",tags:["Research Groups"],summary:"Create research group",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:y.object({name:y.string().min(1).openapi({description:"Nome do grupo de pesquisa"}),acronym:y.string().optional().openapi({description:"Sigla do grupo"}),description:y.string().optional().openapi({description:"Descri\xE7\xE3o do grupo"}),url:y.string().url().optional().openapi({description:"URL do grupo"}),foundedAt:y.string().openapi({description:"Data de funda\xE7\xE3o (ISO 8601)",example:"2024-01-01T00:00:00Z"}),scope:y.string().optional().openapi({description:"Escopo do grupo"}),email:y.string().email().optional().openapi({description:"E-mail de contato"}),leaderId:y.string().uuid().openapi({description:"ID do l\xEDder (UUID)"}),deputyLeaderId:y.string().uuid().openapi({description:"ID do vice-l\xEDder (UUID)"}),logo:y.string().optional().openapi({description:"Logo do grupo (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{201:{description:"Research group created successfully",summary:"Research Group Created"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:y.object({errors:y.record(y.string(),y.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:y.object({message:y.string()})}}}}},bh={method:"get",path:"/research-groups",tags:["Research Groups"],summary:"List research groups",security:[{bearerAuth:[]}],request:{query:Qd},responses:{200:{description:"Paginated list of research groups with leader information retrieved successfully",summary:"Research Groups Retrieved",content:{"application/json":{schema:y.object({page:y.number(),totalPages:y.number(),offset:y.number().optional(),limit:y.number().optional(),researchGroups:y.array(y.object({id:y.string(),name:y.string(),acronym:y.string().nullable(),description:y.string().nullable(),url:y.string().nullable(),logoUrl:y.string().nullable(),foundedAt:y.date(),scope:y.string().nullable(),email:y.string().nullable(),leaderId:y.string(),deputyLeaderId:y.string(),createdAt:y.date(),updatedAt:y.date(),leader:y.object({id:y.uuid(),name:y.string(),emailAddress:y.email(),avatarUrl:y.string().nullable(),createdAt:y.date(),updatedAt:y.date()}),deputyLeader:y.object({id:y.uuid(),name:y.string(),emailAddress:y.email(),avatarUrl:y.string().nullable(),createdAt:y.date(),updatedAt:y.date()})}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:y.object({errors:y.record(y.string(),y.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:y.object({message:y.string()})}}}}},Ch={method:"get",path:"/research-groups/{id}",tags:["Research Groups"],summary:"Find research group by ID",security:[{bearerAuth:[]}],request:{params:Xd},responses:{200:{description:"Research group details retrieved successfully",summary:"Research Group Retrieved",content:{"application/json":{schema:y.object({id:y.string(),name:y.string(),acronym:y.string().nullable(),description:y.string().nullable(),url:y.string().nullable(),logoUrl:y.string().nullable(),foundedAt:y.date(),scope:y.string().nullable(),email:y.string().nullable(),leaderId:y.string(),deputyLeaderId:y.string(),createdAt:y.date(),updatedAt:y.date(),leader:y.object({id:y.uuid(),name:y.string(),emailAddress:y.email(),avatarUrl:y.string().nullable(),createdAt:y.date(),updatedAt:y.date()}),deputyLeader:y.object({id:y.uuid(),name:y.string(),emailAddress:y.email(),avatarUrl:y.string().nullable(),createdAt:y.date(),updatedAt:y.date()})}).nullable()}}},400:{description:"Invalid research group ID format",summary:"Validation Error",content:{"application/json":{schema:y.object({errors:y.record(y.string(),y.string())})}}},404:{description:"Research group not found with the provided ID",summary:"Research Group Not Found",content:{"application/json":{schema:y.object({message:y.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:y.object({message:y.string()})}}}}},Th={method:"put",path:"/research-groups/{id}",tags:["Research Groups"],summary:"Update research group",security:[{bearerAuth:[]}],request:{params:el.pick({id:!0}),body:{content:{"multipart/form-data":{schema:y.object({name:y.string().min(1).optional().openapi({description:"Nome do grupo de pesquisa"}),acronym:y.string().optional().openapi({description:"Sigla do grupo"}),description:y.string().optional().openapi({description:"Descri\xE7\xE3o do grupo"}),url:y.string().url().optional().openapi({description:"URL do grupo"}),foundedAt:y.string().optional().openapi({description:"Data de funda\xE7\xE3o (ISO 8601)",example:"2024-01-01T00:00:00Z"}),scope:y.string().optional().openapi({description:"Escopo do grupo"}),email:y.string().email().optional().openapi({description:"E-mail de contato"}),leaderId:y.string().uuid().optional().openapi({description:"ID do l\xEDder (UUID)"}),deputyLeaderId:y.string().uuid().optional().openapi({description:"ID do vice-l\xEDder (UUID)"}),logo:y.string().optional().openapi({description:"Logo do grupo (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{200:{description:"Research group updated successfully",summary:"Research Group Updated"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:y.object({errors:y.record(y.string(),y.string())})}}},404:{description:"Research group not found with the provided ID",summary:"Research Group Not Found",content:{"application/json":{schema:y.object({message:y.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:y.object({message:y.string()})}}}}},Ah={method:"delete",path:"/research-groups/{id}",tags:["Research Groups"],summary:"Delete research group",security:[{bearerAuth:[]}],request:{params:Jd},responses:{200:{description:"Research group deleted successfully",summary:"Research Group Deleted"},400:{description:"Invalid research group ID format",summary:"Validation Error",content:{"application/json":{schema:y.object({errors:y.record(y.string(),y.string())})}}},404:{description:"Research group not found with the provided ID",summary:"Research Group Not Found",content:{"application/json":{schema:y.object({message:y.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:y.object({message:y.string()})}}}}};import C from"zod";import{extendZodWithOpenApi as FE}from"@asteasolutions/zod-to-openapi";import Be from"zod";FE(Be);var tl=Be.object({registrationNumber:Be.string(),mainEtps:Be.string().optional(),formations:Be.string().optional(),degrees:Be.array(Be.enum(St)),occupations:Be.string(),seniority:Be.enum(It),institutions:Be.string(),biography:Be.string().optional(),userId:Be.string()}),$s=class{constructor(e){this.researcherRepository=e}async handle(e,t){let{registrationNumber:o,mainEtps:i,formations:n,degrees:s,occupations:a,seniority:m,institutions:p,biography:f,userId:I}=tl.parse(e.body);if(await this.researcherRepository.findByRegistrationNumber(o))throw new ge("J\xE1 existe um pesquisador cadastrado com este n\xFAmero de registro.");if(await this.researcherRepository.findByUserId(I))throw new ge("Usu\xE1rio j\xE1 possui um perfil de pesquisador.");return await this.researcherRepository.create({registrationNumber:o,mainEtps:i,formations:n,degrees:s,occupations:a,seniority:m,institutions:p,biography:f,userId:I}),t.sendStatus(201)}};import{extendZodWithOpenApi as DE}from"@asteasolutions/zod-to-openapi";import rl from"zod";DE(rl);var il=rl.object({id:rl.uuid()}),Vs=class{constructor(e){this.researcherRepository=e}async handle(e,t){let{id:o}=il.parse({id:e.params.id});if(!await this.researcherRepository.findById(o))throw new c("O pesquisador n\xE3o existe.");return await this.researcherRepository.deleteById(o),t.sendStatus(200)}};import{extendZodWithOpenApi as OE}from"@asteasolutions/zod-to-openapi";import ol from"zod";OE(ol);var Zs=ol.object({id:ol.uuid()}),zs=class{constructor(e){this.researcherRepository=e}async handle(e,t){let{id:o}=Zs.parse({id:e.params.id}),i=await this.researcherRepository.findById(o);if(!i)throw new c("O pesquisador n\xE3o existe.");return t.status(200).json(i)}};import{extendZodWithOpenApi as BE}from"@asteasolutions/zod-to-openapi";import nl from"zod";BE(nl);var sl=nl.object({id:nl.uuid()}),Ks=class{constructor(e){this.researcherRepository=e}async handle(e,t){let{id:o}=sl.parse(e.params),i=await this.researcherRepository.findByUserId(o);if(!i)throw new c("O pesquisador n\xE3o existe para este usu\xE1rio.");return t.status(200).json(i)}};import{extendZodWithOpenApi as qE}from"@asteasolutions/zod-to-openapi";import qe from"zod";qE(qe);var al=qe.object({id:qe.uuid(),registrationNumber:qe.string().optional(),mainEtps:qe.string().optional(),formations:qe.string().optional(),degrees:qe.array(qe.enum(St)).optional(),occupations:qe.string().optional(),seniority:qe.enum(It).optional(),institutions:qe.string().optional(),biography:qe.string().optional()}),Js=class{constructor(e){this.researcherRepository=e}async handle(e,t){let{id:o,registrationNumber:i,mainEtps:n,formations:s,degrees:a,occupations:m,seniority:p,institutions:f,biography:I}=al.parse({id:e.params.id,...e.body}),L=await this.researcherRepository.findById(o);if(!L)throw new c("O pesquisador n\xE3o existe.");if(i&&i!==L.registrationNumber){let ie=await this.researcherRepository.findByRegistrationNumber(i);if(ie&&ie.id!==o)throw new ge("J\xE1 existe um pesquisador com este n\xFAmero de registro.")}return await this.researcherRepository.update({id:o,registrationNumber:i,mainEtps:n,formations:s,degrees:a,occupations:m,seniority:p,institutions:f,biography:I}),t.sendStatus(200)}};var NE=1,GE=9,ml=C.object({id:C.uuid(),registrationNumber:C.string(),mainEtps:C.string().nullable(),formations:C.string().nullable(),degrees:C.array(C.enum(St)),occupations:C.string(),seniority:C.enum(It),institutions:C.string(),biography:C.string().nullable(),createdAt:C.date(),updatedAt:C.date(),userId:C.uuid(),user:C.object({id:C.uuid(),name:C.string(),emailAddress:C.string(),avatarUrl:C.string().nullable(),orcid:C.string().nullable(),phone:C.string().nullable(),lattesUrl:C.string().nullable(),role:C.enum(le)})}),Ih={method:"post",path:"/researcher",tags:["Researchers"],summary:"Create a new researcher profile",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:tl}}}},responses:{201:{description:"Researcher profile created successfully",summary:"Researcher Created",content:{"application/json":{schema:C.object({message:C.string()})}}},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:C.object({errors:C.record(C.string(),C.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:C.object({message:C.string()})}}},409:{description:"Researcher with this registration number already exists or user already has a researcher profile",summary:"Conflict",content:{"application/json":{schema:C.object({message:C.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:C.object({message:C.string()})}}}}},Sh={method:"get",path:"/researcher",tags:["Researchers"],summary:"List all researchers with pagination and filters",request:{query:C.object({page:C.coerce.number().min(1).default(NE).optional(),limit:C.coerce.number().min(1).default(GE).optional(),userId:C.string().optional(),registrationNumber:C.string().optional(),name:C.string().optional(),emailAddress:C.string().optional(),mainEtps:C.string().optional(),formations:C.string().optional(),occupations:C.string().optional(),institutions:C.string().optional(),biography:C.string().optional(),seniority:C.enum(["SENIOR","RESEARCHER","JUNIOR","HONOR"]).optional(),orderBy:C.enum(["asc","desc"]).default("desc")})},responses:{200:{description:"List of researchers retrieved successfully with pagination",summary:"Researchers Retrieved",content:{"application/json":{schema:C.object({page:C.number(),totalPages:C.number(),offset:C.number().optional(),limit:C.number().optional(),researchers:C.array(ml)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:C.object({message:C.string()})}}}}},Eh={method:"get",path:"/researcher/{id}",tags:["Researchers"],summary:"Find researcher by ID",request:{params:Zs},responses:{200:{description:"Researcher details retrieved successfully",summary:"Researcher Retrieved",content:{"application/json":{schema:ml}}},400:{description:"Invalid researcher ID format",summary:"Validation Error",content:{"application/json":{schema:C.object({errors:C.record(C.string(),C.string())})}}},404:{description:"Researcher not found with the provided ID",summary:"Researcher Not Found",content:{"application/json":{schema:C.object({message:C.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:C.object({message:C.string()})}}}}},xh={method:"get",path:"/researcher/user/{userId}",tags:["Researchers"],summary:"Find researcher by user ID",request:{params:sl},responses:{200:{description:"Researcher details retrieved successfully",summary:"Researcher Retrieved",content:{"application/json":{schema:ml}}},400:{description:"Invalid user ID format",summary:"Validation Error",content:{"application/json":{schema:C.object({errors:C.record(C.string(),C.string())})}}},404:{description:"Researcher not found for this user",summary:"Researcher Not Found",content:{"application/json":{schema:C.object({message:C.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:C.object({message:C.string()})}}}}},Mh={method:"put",path:"/researcher/{id}",tags:["Researchers"],summary:"Update researcher profile",security:[{bearerAuth:[]}],request:{params:Zs,body:{content:{"application/json":{schema:al.omit({id:!0})}}}},responses:{200:{description:"Researcher profile updated successfully",summary:"Researcher Updated",content:{"application/json":{schema:C.object({message:C.string()})}}},400:{description:"Invalid input data or researcher ID format",summary:"Validation Error",content:{"application/json":{schema:C.object({errors:C.record(C.string(),C.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:C.object({message:C.string()})}}},404:{description:"Researcher not found with the provided ID",summary:"Researcher Not Found",content:{"application/json":{schema:C.object({message:C.string()})}}},409:{description:"Researcher with this registration number already exists",summary:"Conflict",content:{"application/json":{schema:C.object({message:C.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:C.object({message:C.string()})}}}}},wh={method:"delete",path:"/researcher/{id}",tags:["Researchers"],summary:"Delete researcher profile",security:[{bearerAuth:[]}],request:{params:il},responses:{200:{description:"Researcher profile deleted successfully",summary:"Researcher Deleted"},400:{description:"Invalid researcher ID format",summary:"Validation Error",content:{"application/json":{schema:C.object({errors:C.record(C.string(),C.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:C.object({message:C.string()})}}},404:{description:"Researcher not found with the provided ID",summary:"Researcher Not Found",content:{"application/json":{schema:C.object({message:C.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:C.object({message:C.string()})}}}}};import h from"zod";import{extendZodWithOpenApi as _E}from"@asteasolutions/zod-to-openapi";import cl from"zod";_E(cl);var pl=cl.object({id:cl.uuid()}),Ys=class{constructor(e){this.scientificArticlesRepository=e}async handle(e,t){let{id:o}=pl.parse({id:e.params.id});if(!await this.scientificArticlesRepository.findById(o))throw new c("O artigo cient\xEDfico n\xE3o existe.");return await this.scientificArticlesRepository.deleteById(o),t.sendStatus(200)}};import{extendZodWithOpenApi as LE}from"@asteasolutions/zod-to-openapi";import dl from"zod";LE(dl);var ll=dl.object({id:dl.uuid()}),Xs=class{constructor(e){this.scientificArticlesRepository=e}async handle(e,t){let{id:o}=ll.parse({id:e.params.id}),i=await this.scientificArticlesRepository.findById(o);if(!i)throw new c("Artigo cient\xEDfico n\xE3o encontrado.");return t.status(200).json(i)}};import{extendZodWithOpenApi as HE}from"@asteasolutions/zod-to-openapi";import Ht from"zod";var WE=1;HE(Ht);var ul=Ht.object({page:Ht.coerce.number().min(1).default(WE),limit:Ht.coerce.number().optional(),title:Ht.string().optional(),author:Ht.string().optional(),journal:Ht.string().optional(),orderBy:Ht.enum(["asc","desc"]).default("desc")}),Qs=class{constructor(e){this.scientificArticlesRepository=e}async handle(e,t){let{limit:o,page:i,...n}=ul.parse(e.query),s=o?o*i-o:void 0,[a,m]=await Promise.all([this.scientificArticlesRepository.find({pagination:{offset:s,limit:o},filter:n}),this.scientificArticlesRepository.count({filter:n})]),p=o?Math.max(Math.ceil(m/o),1):1;return t.status(200).json({page:i,totalPages:p,offset:s,limit:o,scientificArticles:a})}};import{extendZodWithOpenApi as $E}from"@asteasolutions/zod-to-openapi";import ye from"zod";$E(ye);var gl=ye.object({id:ye.uuid(),title:ye.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio.").optional(),author:ye.string().min(1,"Autor \xE9 obrigat\xF3rio.").optional(),journal:ye.string().optional(),volume:ye.string().optional(),edition:ye.string().optional(),pageStart:ye.coerce.number().optional(),pageEnd:ye.coerce.number().optional(),startDate:ye.coerce.date().optional(),endDate:ye.coerce.date().optional(),city:ye.string().optional(),state:ye.string().optional(),country:ye.string().optional(),publisher:ye.string().optional(),description:ye.string().optional(),year:ye.coerce.number().optional(),accessUrl:ye.url("URL de acesso deve ser v\xE1lida").optional()}),ea=class{constructor(e){this.scientificArticlesRepository=e}async handle(e,t){let{id:o,title:i,author:n,journal:s,volume:a,edition:m,pageStart:p,pageEnd:f,startDate:I,endDate:L,city:ie,state:ne,country:pe,publisher:_e,description:Ai,year:Nm,accessUrl:aT}=gl.parse({id:e.params.id,...e.body});if(!await this.scientificArticlesRepository.findById(o))throw new c("O artigo cient\xEDfico n\xE3o existe.");return await this.scientificArticlesRepository.update({id:o,title:i,author:n,journal:s,volume:a,edition:m,pageStart:p,pageEnd:f,startDate:I,endDate:L,city:ie,state:ne,country:pe,publisher:_e,description:Ai,year:Nm,accessUrl:aT}),t.sendStatus(200)}};var vh={method:"post",path:"/scientific-articles",tags:["Scientific Articles"],summary:"Create scientific article",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:h.object({title:h.string().min(1).openapi({description:"T\xEDtulo do artigo"}),author:h.string().min(1).openapi({description:"Autor do artigo"}),journal:h.string().optional().openapi({description:"Nome do peri\xF3dico/revista"}),volume:h.string().optional().openapi({description:"Volume"}),edition:h.string().optional().openapi({description:"N\xFAmero/Edi\xE7\xE3o"}),pageStart:h.number().optional().openapi({description:"P\xE1gina inicial"}),pageEnd:h.number().optional().openapi({description:"P\xE1gina final"}),startDate:h.string().openapi({description:"Data de in\xEDcio (ISO 8601)",example:"2024-01-01T10:00:00Z"}),endDate:h.string().openapi({description:"Data de t\xE9rmino (ISO 8601)",example:"2024-12-31T10:00:00Z"}),city:h.string().optional().openapi({description:"Cidade"}),state:h.string().optional().openapi({description:"Estado"}),country:h.string().optional().openapi({description:"Pa\xEDs"}),publisher:h.string().optional().openapi({description:"Editora/Institui\xE7\xE3o"}),description:h.string().optional().openapi({description:"Descri\xE7\xE3o do artigo"}),year:h.number().optional().openapi({description:"Ano"}),accessUrl:h.string().url().optional().openapi({description:"URL de acesso"})})}}}},responses:{201:{description:"Scientific article created successfully",summary:"Article Created"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:h.object({errors:h.record(h.string(),h.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:h.object({message:h.string()})}}}}},Uh={method:"get",path:"/scientific-articles",tags:["Scientific Articles"],summary:"List scientific articles",security:[{bearerAuth:[]}],request:{query:ul},responses:{200:{description:"Paginated list of scientific articles retrieved successfully",summary:"Articles Retrieved",content:{"application/json":{schema:h.object({page:h.number(),totalPages:h.number(),offset:h.number().optional(),limit:h.number().optional(),scientificArticles:h.array(h.object({id:h.string(),title:h.string(),author:h.string(),journal:h.string().nullable(),volume:h.string().nullable(),edition:h.string().nullable(),pageStart:h.number().nullable(),pageEnd:h.number().nullable(),startDate:h.date(),endDate:h.date(),city:h.string().nullable(),state:h.string().nullable(),country:h.string().nullable(),publisher:h.string().nullable(),description:h.string().nullable(),year:h.number().nullable(),accessUrl:h.string().nullable(),createdAt:h.date(),updatedAt:h.date()}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:h.object({errors:h.record(h.string(),h.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:h.object({message:h.string()})}}}}},jh={method:"get",path:"/scientific-articles/{id}",tags:["Scientific Articles"],summary:"Find scientific article by ID",security:[{bearerAuth:[]}],request:{params:ll},responses:{200:{description:"Scientific article details retrieved successfully",summary:"Article Retrieved",content:{"application/json":{schema:h.object({id:h.string(),title:h.string(),author:h.string(),journal:h.string().nullable(),volume:h.string().nullable(),edition:h.string().nullable(),pageStart:h.number().nullable(),pageEnd:h.number().nullable(),startDate:h.date(),endDate:h.date(),city:h.string().nullable(),state:h.string().nullable(),country:h.string().nullable(),publisher:h.string().nullable(),description:h.string().nullable(),year:h.number().nullable(),accessUrl:h.string().nullable(),createdAt:h.date(),updatedAt:h.date()}).nullable()}}},400:{description:"Invalid article ID format",summary:"Validation Error",content:{"application/json":{schema:h.object({errors:h.record(h.string(),h.string())})}}},404:{description:"Scientific article not found with the provided ID",summary:"Article Not Found",content:{"application/json":{schema:h.object({message:h.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:h.object({message:h.string()})}}}}},kh={method:"put",path:"/scientific-articles/{id}",tags:["Scientific Articles"],summary:"Update scientific article",security:[{bearerAuth:[]}],request:{params:gl.pick({id:!0}),body:{content:{"application/json":{schema:h.object({title:h.string().min(1).optional().openapi({description:"T\xEDtulo do artigo"}),author:h.string().min(1).optional().openapi({description:"Autor do artigo"}),journal:h.string().optional().openapi({description:"Nome do peri\xF3dico/revista"}),volume:h.string().optional().openapi({description:"Volume"}),edition:h.string().optional().openapi({description:"N\xFAmero/Edi\xE7\xE3o"}),pageStart:h.number().optional().openapi({description:"P\xE1gina inicial"}),pageEnd:h.number().optional().openapi({description:"P\xE1gina final"}),startDate:h.string().optional().openapi({description:"Data de in\xEDcio (ISO 8601)",example:"2024-01-01T10:00:00Z"}),endDate:h.string().optional().openapi({description:"Data de t\xE9rmino (ISO 8601)",example:"2024-12-31T10:00:00Z"}),city:h.string().optional().openapi({description:"Cidade"}),state:h.string().optional().openapi({description:"Estado"}),country:h.string().optional().openapi({description:"Pa\xEDs"}),publisher:h.string().optional().openapi({description:"Editora/Institui\xE7\xE3o"}),description:h.string().optional().openapi({description:"Descri\xE7\xE3o do artigo"}),year:h.number().optional().openapi({description:"Ano"}),accessUrl:h.string().url().optional().openapi({description:"URL de acesso"})})}}}},responses:{200:{description:"Scientific article updated successfully",summary:"Article Updated"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:h.object({errors:h.record(h.string(),h.string())})}}},404:{description:"Scientific article not found with the provided ID",summary:"Article Not Found",content:{"application/json":{schema:h.object({message:h.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:h.object({message:h.string()})}}}}},Fh={method:"delete",path:"/scientific-articles/{id}",tags:["Scientific Articles"],summary:"Delete scientific article",security:[{bearerAuth:[]}],request:{params:pl},responses:{200:{description:"Scientific article deleted successfully",summary:"Article Deleted"},400:{description:"Invalid article ID format",summary:"Validation Error",content:{"application/json":{schema:h.object({errors:h.record(h.string(),h.string())})}}},404:{description:"Scientific article not found with the provided ID",summary:"Article Not Found",content:{"application/json":{schema:h.object({message:h.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:h.object({message:h.string()})}}}}};import E from"zod";import{extendZodWithOpenApi as VE}from"@asteasolutions/zod-to-openapi";import yl from"zod";VE(yl);var fl=yl.object({id:yl.uuid()}),ta=class{constructor(e,t){this.scientificJournalRepository=e;this.firebaseStorageService=t}async handle(e,t){let{id:o}=fl.parse({id:e.params.id}),i=await this.scientificJournalRepository.findById(o);if(!i)throw new c("A revista cient\xEDfica n\xE3o existe.");return i.logoUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.logoUrl}),await this.scientificJournalRepository.deleteById(o),t.sendStatus(200)}};import{extendZodWithOpenApi as zE}from"@asteasolutions/zod-to-openapi";import hl from"zod";zE(hl);var Rl=hl.object({id:hl.uuid()}),ra=class{constructor(e){this.scientificJournalRepository=e}async handle(e,t){let{id:o}=Rl.parse({id:e.params.id}),i=await this.scientificJournalRepository.findById(o);if(!i)throw new c("Revista cient\xEDfica n\xE3o encontrada.");return t.status(200).json(i)}};import{extendZodWithOpenApi as ZE}from"@asteasolutions/zod-to-openapi";import it from"zod";var KE=1;ZE(it);var Pl=it.object({page:it.coerce.number().min(1).default(KE),limit:it.coerce.number().optional(),name:it.string().optional(),description:it.string().optional(),issn:it.string().optional(),directors:it.string().optional(),editorialBoard:it.string().optional(),orderBy:it.enum(["asc","desc"]).default("desc")}),ia=class{constructor(e){this.scientificJournalRepository=e}async handle(e,t){let{limit:o,page:i,...n}=Pl.parse(e.query),s=o?o*i-o:void 0,[a,m]=await Promise.all([this.scientificJournalRepository.find({pagination:{offset:s,limit:o},filter:n}),this.scientificJournalRepository.count({filter:n})]),p=o?Math.max(Math.ceil(m/o),1):1;return t.status(200).json({page:i,totalPages:p,offset:s,limit:o,scientificJournals:a})}};import{extendZodWithOpenApi as JE}from"@asteasolutions/zod-to-openapi";import ot from"zod";var Oh=5,Dh=1024,YE=Dh*Dh,XE=Oh*YE;JE(ot);var bl=ot.object({id:ot.uuid(),name:ot.string().min(1,"Nome \xE9 obrigat\xF3rio.").optional(),issn:ot.string().min(1,"ISSN \xE9 obrigat\xF3rio.").optional(),description:ot.string().min(1,"Descri\xE7\xE3o \xE9 obrigat\xF3ria.").optional(),journalUrl:ot.url("URL da revista deve ser v\xE1lida.").optional(),directors:ot.string().optional(),editorialBoard:ot.string().optional(),logo:ot.any().refine(r=>r==null?!0:typeof r!="object"||typeof r.size!="number"?!1:r.size<=XE,`O logo deve ter no m\xE1ximo ${Oh}MB.`).optional()}),oa=class{constructor(e,t){this.scientificJournalRepository=e;this.firebaseStorageService=t}async handle(e,t){let{id:o,logo:i,name:n,issn:s,description:a,journalUrl:m,directors:p,editorialBoard:f}=bl.parse({id:e.params.id,...e.body,logo:e.file}),I=await this.scientificJournalRepository.findById(o);if(!I)throw new c("A revista cient\xEDfica n\xE3o existe.");let L=I.logoUrl;return i&&(L=await this.firebaseStorageService.uploadFile({file:i,id:o,folder:x.SCIENTIFIC_JOURNAL})),await this.scientificJournalRepository.update({id:o,name:n,issn:s,description:a,journalUrl:m,directors:p,editorialBoard:f,logoUrl:L}),t.sendStatus(200)}};var Bh={method:"post",path:"/scientific-journals",tags:["Scientific Journals"],summary:"Create scientific journal",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:E.object({name:E.string().min(1).openapi({description:"Nome da revista cient\xEDfica"}),issn:E.string().min(1).openapi({description:"ISSN da revista"}),description:E.string().min(1).openapi({description:"Descri\xE7\xE3o da revista"}),journalUrl:E.string().url().openapi({description:"URL da revista"}),directors:E.string().optional().openapi({description:"Diretores da revista"}),editorialBoard:E.string().optional().openapi({description:"Conselho editorial"}),logo:E.string().optional().openapi({description:"Logo da revista (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{201:{description:"Scientific journal created successfully",summary:"Journal Created"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:E.object({errors:E.record(E.string(),E.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:E.object({message:E.string()})}}}}},qh={method:"get",path:"/scientific-journals",tags:["Scientific Journals"],summary:"List scientific journals",security:[{bearerAuth:[]}],request:{query:Pl},responses:{200:{description:"Paginated list of scientific journals retrieved successfully",summary:"Journals Retrieved",content:{"application/json":{schema:E.object({page:E.number(),totalPages:E.number(),offset:E.number().optional(),limit:E.number().optional(),scientificJournals:E.array(E.object({id:E.string(),name:E.string(),issn:E.string(),description:E.string(),logoUrl:E.string().nullable(),journalUrl:E.string(),directors:E.string().nullable(),editorialBoard:E.string().nullable(),createdAt:E.date(),updatedAt:E.date()}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:E.object({errors:E.record(E.string(),E.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:E.object({message:E.string()})}}}}},Nh={method:"get",path:"/scientific-journals/{id}",tags:["Scientific Journals"],summary:"Find scientific journal by ID",security:[{bearerAuth:[]}],request:{params:Rl},responses:{200:{description:"Scientific journal details retrieved successfully",summary:"Journal Retrieved",content:{"application/json":{schema:E.object({id:E.string(),name:E.string(),issn:E.string(),description:E.string(),logoUrl:E.string().nullable(),journalUrl:E.string(),directors:E.string().nullable(),editorialBoard:E.string().nullable(),createdAt:E.date(),updatedAt:E.date()}).nullable()}}},400:{description:"Invalid journal ID format",summary:"Validation Error",content:{"application/json":{schema:E.object({errors:E.record(E.string(),E.string())})}}},404:{description:"Scientific journal not found with the provided ID",summary:"Journal Not Found",content:{"application/json":{schema:E.object({message:E.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:E.object({message:E.string()})}}}}},Gh={method:"put",path:"/scientific-journals/{id}",tags:["Scientific Journals"],summary:"Update scientific journal",security:[{bearerAuth:[]}],request:{params:bl.pick({id:!0}),body:{content:{"multipart/form-data":{schema:E.object({name:E.string().min(1).optional().openapi({description:"Nome da revista cient\xEDfica"}),issn:E.string().min(1).optional().openapi({description:"ISSN da revista"}),description:E.string().min(1).optional().openapi({description:"Descri\xE7\xE3o da revista"}),journalUrl:E.string().url().optional().openapi({description:"URL da revista"}),directors:E.string().optional().openapi({description:"Diretores da revista"}),editorialBoard:E.string().optional().openapi({description:"Conselho editorial"}),logo:E.string().optional().openapi({description:"Logo da revista (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{200:{description:"Scientific journal updated successfully",summary:"Journal Updated"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:E.object({errors:E.record(E.string(),E.string())})}}},404:{description:"Scientific journal not found with the provided ID",summary:"Journal Not Found",content:{"application/json":{schema:E.object({message:E.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:E.object({message:E.string()})}}}}},_h={method:"delete",path:"/scientific-journals/{id}",tags:["Scientific Journals"],summary:"Delete scientific journal",security:[{bearerAuth:[]}],request:{params:fl},responses:{200:{description:"Scientific journal deleted successfully",summary:"Journal Deleted"},400:{description:"Invalid journal ID format",summary:"Validation Error",content:{"application/json":{schema:E.object({errors:E.record(E.string(),E.string())})}}},404:{description:"Scientific journal not found with the provided ID",summary:"Journal Not Found",content:{"application/json":{schema:E.object({message:E.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:E.object({message:E.string()})}}}}};import $ from"zod";import{extendZodWithOpenApi as QE}from"@asteasolutions/zod-to-openapi";import zr from"zod";QE(zr);var Cl=zr.object({role:zr.string().min(1),description:zr.string().optional(),userId:zr.uuid(),order:zr.number().optional()}),na=class{constructor(e){this.sdhcTeamMemberRepository=e}async handle(e,t){let{role:o,description:i,userId:n,order:s}=Cl.parse(e.body);return await this.sdhcTeamMemberRepository.create({role:o,description:i,userId:n,order:s??0}),t.sendStatus(201)}};import{extendZodWithOpenApi as ex}from"@asteasolutions/zod-to-openapi";import Tl from"zod";ex(Tl);var Al=Tl.object({id:Tl.uuid()}),sa=class{constructor(e){this.sdhcTeamMemberRepository=e}async handle(e,t){let{id:o}=Al.parse({id:e.params.id});if(!await this.sdhcTeamMemberRepository.findById(o))throw new c("O membro da equipe SDHC n\xE3o existe.");return await this.sdhcTeamMemberRepository.deleteById(o),t.sendStatus(200)}};import{extendZodWithOpenApi as tx}from"@asteasolutions/zod-to-openapi";import Il from"zod";tx(Il);var ma=Il.object({id:Il.uuid()}),aa=class{constructor(e){this.sdhcTeamMemberRepository=e}async handle(e,t){let{id:o}=ma.parse({id:e.params.id}),i=await this.sdhcTeamMemberRepository.findById(o);if(!i)throw new c("O membro da equipe SDHC n\xE3o existe.");return t.status(200).json(i)}};import{extendZodWithOpenApi as rx}from"@asteasolutions/zod-to-openapi";import ar from"zod";rx(ar);var Sl=ar.object({id:ar.uuid(),role:ar.string().min(1).optional(),description:ar.string().optional(),userId:ar.uuid().optional(),order:ar.number().optional()}),ca=class{constructor(e){this.sdhcTeamMemberRepository=e}async handle(e,t){let{id:o,role:i,description:n,userId:s,order:a}=Sl.parse({id:e.params.id,...e.body});if(!await this.sdhcTeamMemberRepository.findById(o))throw new c("O membro da equipe SDHC n\xE3o existe.");return await this.sdhcTeamMemberRepository.update({id:o,role:i,description:n,userId:s,order:a}),t.sendStatus(200)}};var ix=$.object({id:$.uuid(),name:$.string(),emailAddress:$.string(),avatarUrl:$.string().nullable(),orcid:$.string().nullable(),phone:$.string().nullable(),lattesUrl:$.string().nullable(),role:$.enum(le)}),Lh=$.object({id:$.uuid(),role:$.string(),description:$.string().nullable(),order:$.number(),createdAt:$.date(),updatedAt:$.date(),userId:$.uuid(),user:ix}),Hh={method:"post",path:"/sdhc-team-member",tags:["SDHC Team Members"],summary:"Create a new SDHC Team Member",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:Cl}}}},responses:{201:{description:"SDHC Team Member created successfully",summary:"SDHC Team Member Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:$.object({errors:$.record($.string(),$.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:$.object({message:$.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:$.object({message:$.string()})}}}}},Wh={method:"get",path:"/sdhc-team-member",tags:["SDHC Team Members"],summary:"List all SDHC Team Members with filters",request:{query:$.object({role:$.string().optional(),orderBy:$.enum(["asc","desc"]).default("desc")})},responses:{200:{description:"List of SDHC Team Members retrieved successfully",summary:"SDHC Team Members Retrieved",content:{"application/json":{schema:$.object({members:$.array(Lh)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:$.object({message:$.string()})}}}}},$h={method:"get",path:"/sdhc-team-member/{id}",tags:["SDHC Team Members"],summary:"Find SDHC Team Member by ID",request:{params:ma},responses:{200:{description:"SDHC Team Member details retrieved successfully",summary:"SDHC Team Member Retrieved",content:{"application/json":{schema:Lh}}},400:{description:"Invalid SDHC Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:$.object({errors:$.record($.string(),$.string())})}}},404:{description:"SDHC Team Member not found with the provided ID",summary:"SDHC Team Member Not Found",content:{"application/json":{schema:$.object({message:$.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:$.object({message:$.string()})}}}}},Vh={method:"put",path:"/sdhc-team-member/{id}",tags:["SDHC Team Members"],summary:"Update SDHC Team Member",security:[{bearerAuth:[]}],request:{params:ma,body:{content:{"application/json":{schema:Sl.omit({id:!0})}}}},responses:{200:{description:"SDHC Team Member updated successfully",summary:"SDHC Team Member Updated"},400:{description:"Invalid input data or SDHC Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:$.object({errors:$.record($.string(),$.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:$.object({message:$.string()})}}},404:{description:"SDHC Team Member not found with the provided ID",summary:"SDHC Team Member Not Found",content:{"application/json":{schema:$.object({message:$.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:$.object({message:$.string()})}}}}},zh={method:"delete",path:"/sdhc-team-member/{id}",tags:["SDHC Team Members"],summary:"Delete SDHC Team Member",security:[{bearerAuth:[]}],request:{params:Al},responses:{200:{description:"SDHC Team Member deleted successfully",summary:"SDHC Team Member Deleted"},400:{description:"Invalid SDHC Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:$.object({errors:$.record($.string(),$.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:$.object({message:$.string()})}}},404:{description:"SDHC Team Member not found with the provided ID",summary:"SDHC Team Member Not Found",content:{"application/json":{schema:$.object({message:$.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:$.object({message:$.string()})}}}}};import j from"zod";import{extendZodWithOpenApi as ox}from"@asteasolutions/zod-to-openapi";import El from"zod";ox(El);var xl=El.object({id:El.string()}),pa=class{constructor(e){this.userRepository=e}async handle(e,t){let{id:o}=xl.parse({id:e.params.id}),i=await this.userRepository.findById(o);if(!i)throw new c("O usu\xE1rio n\xE3o existe.");let n=e.user.id;if(i.id!==n)throw new Fe("Voc\xEA n\xE3o tem permiss\xE3o para deletar o usu\xE1rio");return await this.userRepository.deleteById(i.id),t.sendStatus(204)}};import{extendZodWithOpenApi as nx}from"@asteasolutions/zod-to-openapi";import Ml from"zod";nx(Ml);var wl=Ml.object({id:Ml.uuid()}),da=class{constructor(e){this.userRepository=e}async handle(e,t){let{id:o}=wl.parse({...e.params}),i=await this.userRepository.findById(o);if(!i)throw new ue("O usu\xE1rio n\xE3o existe");if(i.role!=="ADMIN")throw new ue("O usu\xE1rio n\xE3o \xE9 um administrador");return await this.userRepository.update({id:o,role:"USER"}),t.sendStatus(204)}};import{extendZodWithOpenApi as sx}from"@asteasolutions/zod-to-openapi";import{z as vl}from"zod";sx(vl);var Ul=vl.object({id:vl.string().min(1,"id do usu\xE1rio n\xE3o fornecido.")}),la=class{constructor(e){this.userRepository=e}async handle(e,t){let{id:o}=Ul.parse(e.params),i=await this.userRepository.findById(o);if(!i)throw new c("Usu\xE1rio n\xE3o encontrado");t.status(200).json(i)}};import{extendZodWithOpenApi as ax}from"@asteasolutions/zod-to-openapi";import nt from"zod";var mx=1;ax(nt);var jl=nt.object({page:nt.coerce.number().min(1).default(mx),limit:nt.coerce.number().optional(),orderBy:nt.enum(["asc","desc"]).default("desc"),name:nt.string().optional(),emailAddress:nt.string().optional(),phone:nt.string().optional(),lattesUrl:nt.string().optional(),orcid:nt.string().optional()}),ua=class{constructor(e){this.userRepository=e}async handle(e,t){let{page:o,limit:i,...n}=jl.parse(e.query),s=i?i*o-i:void 0,a=await this.userRepository.find({pagination:{offset:s,limit:i},filter:n}),m=await this.userRepository.count({filter:n}),p=i?Math.max(Math.ceil(m/i),1):1;t.status(200).json({page:o,totalPages:p,offset:s,limit:i,users:a})}};import{extendZodWithOpenApi as cx}from"@asteasolutions/zod-to-openapi";import kl from"zod";cx(kl);var Fl=kl.object({id:kl.uuid()}),ga=class{constructor(e){this.userRepository=e}async handle(e,t){let{id:o}=Fl.parse({...e.params}),i=await this.userRepository.findById(o);if(!i)throw new ue("O usu\xE1rio n\xE3o existe");if(i.role!=="USER")throw new ue("O usu\xE1rio n\xE3o \xE9 um usu\xE1rio comum");return await this.userRepository.update({id:o,role:"ADMIN"}),t.sendStatus(204)}};import{extendZodWithOpenApi as px}from"@asteasolutions/zod-to-openapi";import Ze from"zod";var Kh=2,Zh=1024,dx=Zh*Zh,lx=Kh*dx,ux=/^\d{4}-\d{4}-\d{4}-\d{4}$/,gx=/^\(?\d{2}\)?[\s-]?\d{4,5}-?\d{4}$/;px(Ze);var Dl=Ze.object({name:Ze.string().optional(),lattesUrl:Ze.string().optional(),orcid:Ze.union([Ze.string().regex(ux,{message:"ORCID inv\xE1lido. Deve estar no formato 0000-0000-0000-0000"}),Ze.literal("")]).optional(),phone:Ze.union([Ze.string().regex(gx,{message:"Telefone inv\xE1lido. Deve estar no formato (99) 99999-9999"}),Ze.literal("")]).optional(),avatarImage:Ze.any().refine(r=>r==null?!0:typeof r!="object"||typeof r.size!="number"?!1:r.size<=lx,`A imagem deve ter no m\xE1ximo ${Kh}MB.`).optional()}),ya=class{constructor(e,t){this.userRepository=e;this.firebaseStorageService=t}async handle(e,t){let{avatarImage:o,...i}=Dl.parse({...e.body,avatarImage:e.file}),n=e.user.id,s=await this.userRepository.findById(n);if(!s)throw new ue("O usu\xE1rio n\xE3o existe");let a=s.avatarUrl;return o&&(s.avatarUrl?a=await this.firebaseStorageService.updateFile({file:o,id:n,folder:x.USER,fileUrl:s.avatarUrl}):a=await this.firebaseStorageService.uploadFile({file:o,id:n,folder:x.USER})),await this.userRepository.update({...i,id:n,avatarUrl:a||void 0}),t.sendStatus(204)}};var Jh={method:"get",path:"/users/{id}",tags:["Users"],summary:"Find user by ID",request:{params:Ul},responses:{200:{description:"User details retrieved successfully",summary:"User Retrieved",content:{"application/json":{schema:j.object({id:j.string(),name:j.string(),createdAt:j.date(),updatedAt:j.date(),role:j.enum(le),lattesUrl:j.string().nullable(),orcid:j.string().nullable(),phone:j.string().nullable(),avatarUrl:j.url().nullable(),emailAddress:j.email()})}}},400:{description:"Invalid user ID format",summary:"Validation Error",content:{"application/json":{schema:j.object({errors:j.record(j.string(),j.string())})}}},404:{description:"User not found with the provided ID",summary:"User Not Found",content:{"application/json":{schema:j.object({message:j.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:j.object({message:j.string()})}}}}},Yh={method:"put",path:"/users",tags:["Users"],summary:"Update authenticated user",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:Dl}}}},responses:{204:{description:"User profile updated successfully",summary:"User Updated"},400:{description:"Invalid input data or file format",summary:"Validation Error",content:{"application/json":{schema:j.object({errors:j.record(j.string(),j.string())})}}},401:{description:"User not authenticated or unauthorized",summary:"Authentication Required",content:{"application/json":{schema:j.object({message:j.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:j.object({message:j.string()})}}}}},Xh={method:"delete",path:"/users",tags:["Users"],summary:"Delete authenticated user",security:[{bearerAuth:[]}],request:{params:xl},responses:{200:{description:"User account deleted successfully",summary:"User Deleted",content:{"application/json":{schema:j.object({message:j.string()})}}},400:{description:"Invalid request parameters",summary:"Validation Error",content:{"application/json":{schema:j.object({errors:j.record(j.string(),j.string())})}}},401:{description:"User not authenticated or unauthorized",summary:"Authentication Required",content:{"application/json":{schema:j.object({message:j.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:j.object({message:j.string()})}}}}},Qh={method:"get",path:"/users",tags:["Users"],summary:"List users with optional pagination and filters",request:{query:jl},responses:{200:{description:"Users retrieved successfully. When page and limit query parameters are provided, pagination fields contain numeric values. Otherwise, pagination fields are null.",summary:"Users Retrieved",content:{"application/json":{schema:j.object({page:j.number().nullable(),totalPages:j.number().nullable(),offset:j.number().optional(),limit:j.number().optional(),users:j.array(j.object({id:j.string(),name:j.string(),createdAt:j.date(),updatedAt:j.date(),role:j.enum(le),lattesUrl:j.url().nullable(),orcid:j.string().nullable(),phone:j.string().nullable(),avatarUrl:j.string().nullable(),emailAddress:j.email()}))})}}},400:{description:"Invalid query parameters",summary:"Validation Error",content:{"application/json":{schema:j.object({errors:j.record(j.string(),j.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:j.object({message:j.string()})}}}}},eR={method:"put",path:"/users/promote/{id}",tags:["Users"],summary:"Promote user to ADMIN",security:[{bearerAuth:[]}],request:{params:Fl},responses:{204:{description:"User successfully promoted to ADMIN",summary:"User Promoted"},400:{description:"Bad request - User does not exist or is already an ADMIN",summary:"Validation Error",content:{"application/json":{schema:j.object({message:j.string()})}}},401:{description:"User not authenticated or unauthorized",summary:"Authentication Required",content:{"application/json":{schema:j.object({message:j.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:j.object({message:j.string()})}}}}},tR={method:"put",path:"/users/demote/{id}",tags:["Users"],summary:"Demote user to USER",security:[{bearerAuth:[]}],request:{params:wl},responses:{204:{description:"User successfully demoted to USER",summary:"User Demoted"},400:{description:"Bad request - User does not exist or is not an ADMIN",summary:"Validation Error",content:{"application/json":{schema:j.object({message:j.string()})}}},401:{description:"User not authenticated or unauthorized",summary:"Authentication Required",content:{"application/json":{schema:j.object({message:j.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:j.object({message:j.string()})}}}}};import A from"zod";import{extendZodWithOpenApi as yx}from"@asteasolutions/zod-to-openapi";import Ol from"zod";yx(Ol);var Bl=Ol.object({id:Ol.uuid()}),fa=class{constructor(e,t){this.webinarRepository=e;this.firebaseStorageService=t}async handle(e,t){let{id:o}=Bl.parse({id:e.params.id}),i=await this.webinarRepository.findById(o);if(!i)throw new c("O webinar n\xE3o existe.");return i.thumbnailUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.thumbnailUrl}),await this.webinarRepository.deleteById(o),t.sendStatus(200)}};import{extendZodWithOpenApi as fx}from"@asteasolutions/zod-to-openapi";import ql from"zod";fx(ql);var Nl=ql.object({id:ql.uuid()}),ha=class{constructor(e){this.webinarRepository=e}async handle(e,t){let{id:o}=Nl.parse({id:e.params.id}),i=await this.webinarRepository.findById(o);if(!i)throw new c("Webinar n\xE3o encontrado.");return t.status(200).json(i)}};import{extendZodWithOpenApi as hx}from"@asteasolutions/zod-to-openapi";import mr from"zod";var Rx=1;hx(mr);var Gl=mr.object({page:mr.coerce.number().min(1).default(Rx),limit:mr.coerce.number().optional(),title:mr.string().optional(),description:mr.string().optional(),orderBy:mr.enum(["asc","desc"]).default("desc")}),Ra=class{constructor(e){this.webinarRepository=e}async handle(e,t){let{limit:o,page:i,...n}=Gl.parse(e.query),s=o?o*i-o:void 0,[a,m]=await Promise.all([this.webinarRepository.find({pagination:{offset:s,limit:o},filter:n}),this.webinarRepository.count({filter:n})]),p=o?Math.max(Math.ceil(m/o),1):1;return t.status(200).json({page:i,totalPages:p,offset:s,limit:o,webinars:a})}};import{extendZodWithOpenApi as Px}from"@asteasolutions/zod-to-openapi";import Ke from"zod";var iR=5,rR=1024,bx=rR*rR,Cx=iR*bx;Px(Ke);var _l=Ke.object({id:Ke.uuid(),title:Ke.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio.").optional(),description:Ke.string().optional(),scheduledAt:Ke.coerce.date().optional(),webinarLink:Ke.url("URL do webinar deve ser v\xE1lida").optional(),guestIds:Ke.transform(r=>typeof r=="string"?r.split(","):r).pipe(Ke.array(Ke.uuid())).optional(),thumbnail:Ke.any().refine(r=>r==null?!0:typeof r!="object"||typeof r.size!="number"?!1:r.size<=Cx,`A thumbnail deve ter no m\xE1ximo ${iR}MB.`).optional()}),Pa=class{constructor(e,t){this.webinarRepository=e;this.firebaseStorageService=t}async handle(e,t){let{id:o,thumbnail:i,title:n,description:s,scheduledAt:a,webinarLink:m,guestIds:p}=_l.parse({id:e.params.id,...e.body,thumbnail:e.file}),f=await this.webinarRepository.findById(o);if(!f)throw new c("O webinar n\xE3o existe.");let I=f.thumbnailUrl;if(i&&(I=await this.firebaseStorageService.uploadFile({file:i,id:o,folder:x.WEBINAR})),!I)throw new be("Thumbnail URL \xE9 obrigat\xF3rio");return await this.webinarRepository.update({id:o,title:n,description:s,scheduledAt:a,webinarLink:m,thumbnailUrl:I,guestIds:p}),t.sendStatus(200)}};var oR={method:"post",path:"/webinars",tags:["Webinars"],summary:"Create webinar",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:A.object({title:A.string().min(1).openapi({description:"T\xEDtulo do webinar"}),description:A.string().optional().openapi({description:"Descri\xE7\xE3o do webinar"}),scheduledAt:A.string().openapi({description:"Data e hora agendada (ISO 8601)",example:"2024-01-01T10:00:00Z"}),webinarLink:A.string().url().optional().openapi({description:"Link do webinar"}),guestIds:A.string().openapi({description:"IDs dos convidados separados por v\xEDrgula",example:"uuid1,uuid2,uuid3"}),thumbnail:A.string().optional().openapi({description:"Imagem de thumbnail (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{201:{description:"Webinar created successfully",summary:"Webinar Created"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:A.object({errors:A.record(A.string(),A.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:A.object({message:A.string()})}}}}},nR={method:"get",path:"/webinars",tags:["Webinars"],summary:"List webinars",security:[{bearerAuth:[]}],request:{query:Gl},responses:{200:{description:"Paginated list of webinars with guest information retrieved successfully",summary:"Webinars Retrieved",content:{"application/json":{schema:A.object({page:A.number(),totalPages:A.number(),offset:A.number().optional(),limit:A.number().optional(),webinars:A.array(A.object({id:A.string(),title:A.string(),description:A.string().nullable(),scheduledAt:A.date(),webinarLink:A.string().nullable(),thumbnailUrl:A.string().nullable(),createdAt:A.date(),updatedAt:A.date(),guests:A.array(A.object({id:A.uuid(),name:A.string(),emailAddress:A.email(),avatarUrl:A.string().nullable(),createdAt:A.date(),updatedAt:A.date()}))}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:A.object({errors:A.record(A.string(),A.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:A.object({message:A.string()})}}}}},sR={method:"get",path:"/webinars/{id}",tags:["Webinars"],summary:"Find webinar by ID",security:[{bearerAuth:[]}],request:{params:Nl},responses:{200:{description:"Webinar details retrieved successfully",summary:"Webinar Retrieved",content:{"application/json":{schema:A.object({id:A.string(),title:A.string(),description:A.string().nullable(),scheduledAt:A.date(),webinarLink:A.string().nullable(),thumbnailUrl:A.string().nullable(),createdAt:A.date(),updatedAt:A.date(),guests:A.array(A.object({id:A.uuid(),name:A.string(),emailAddress:A.email(),avatarUrl:A.string().nullable(),createdAt:A.date(),updatedAt:A.date()}))}).nullable()}}},400:{description:"Invalid webinar ID format",summary:"Validation Error",content:{"application/json":{schema:A.object({errors:A.record(A.string(),A.string())})}}},404:{description:"Webinar not found with the provided ID",summary:"Webinar Not Found",content:{"application/json":{schema:A.object({message:A.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:A.object({message:A.string()})}}}}},aR={method:"put",path:"/webinars/{id}",tags:["Webinars"],summary:"Update webinar",security:[{bearerAuth:[]}],request:{params:_l.pick({id:!0}),body:{content:{"multipart/form-data":{schema:A.object({title:A.string().min(1).optional().openapi({description:"T\xEDtulo do webinar"}),description:A.string().optional().openapi({description:"Descri\xE7\xE3o do webinar"}),scheduledAt:A.string().optional().openapi({description:"Data e hora agendada (ISO 8601)",example:"2024-01-01T10:00:00Z"}),webinarLink:A.string().url().optional().openapi({description:"Link do webinar"}),guestIds:A.string().optional().openapi({description:"IDs dos convidados separados por v\xEDrgula",example:"uuid1,uuid2,uuid3"}),thumbnail:A.string().optional().openapi({description:"Imagem de thumbnail (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{200:{description:"Webinar updated successfully",summary:"Webinar Updated"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:A.object({errors:A.record(A.string(),A.string())})}}},404:{description:"Webinar not found with the provided ID",summary:"Webinar Not Found",content:{"application/json":{schema:A.object({message:A.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:A.object({message:A.string()})}}}}},mR={method:"delete",path:"/webinars/{id}",tags:["Webinars"],summary:"Delete webinar",security:[{bearerAuth:[]}],request:{params:Bl},responses:{200:{description:"Webinar deleted successfully",summary:"Webinar Deleted"},400:{description:"Invalid webinar ID format",summary:"Validation Error",content:{"application/json":{schema:A.object({errors:A.record(A.string(),A.string())})}}},404:{description:"Webinar not found with the provided ID",summary:"Webinar Not Found",content:{"application/json":{schema:A.object({message:A.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:A.object({message:A.string()})}}}}};import K from"zod";import{extendZodWithOpenApi as Tx}from"@asteasolutions/zod-to-openapi";import qi from"zod";Tx(qi);var Ll=qi.object({role:qi.string().min(1),description:qi.string().optional(),userId:qi.uuid()}),ba=class{constructor(e){this.workGroupTeamMemberRepository=e}async handle(e,t){let{role:o,description:i,userId:n}=Ll.parse(e.body);return await this.workGroupTeamMemberRepository.create({role:o,description:i,userId:n}),t.sendStatus(201)}};import{extendZodWithOpenApi as Ax}from"@asteasolutions/zod-to-openapi";import Hl from"zod";Ax(Hl);var Wl=Hl.object({id:Hl.uuid()}),Ca=class{constructor(e){this.workGroupTeamMemberRepository=e}async handle(e,t){let{id:o}=Wl.parse({id:e.params.id});if(!await this.workGroupTeamMemberRepository.findById(o))throw new c("O membro do grupo de trabalho n\xE3o existe.");return await this.workGroupTeamMemberRepository.deleteById(o),t.sendStatus(200)}};import{extendZodWithOpenApi as Ix}from"@asteasolutions/zod-to-openapi";import $l from"zod";Ix($l);var Aa=$l.object({id:$l.uuid()}),Ta=class{constructor(e){this.workGroupTeamMemberRepository=e}async handle(e,t){let{id:o}=Aa.parse({id:e.params.id}),i=await this.workGroupTeamMemberRepository.findById(o);if(!i)throw new c("O membro do grupo de trabalho n\xE3o existe.");return t.status(200).json(i)}};import{extendZodWithOpenApi as Sx}from"@asteasolutions/zod-to-openapi";import Zr from"zod";Sx(Zr);var Vl=Zr.object({id:Zr.uuid(),role:Zr.string().min(1).optional(),description:Zr.string().optional(),userId:Zr.uuid().optional()}),Ia=class{constructor(e){this.workGroupTeamMemberRepository=e}async handle(e,t){let{id:o,role:i,description:n,userId:s}=Vl.parse({id:e.params.id,...e.body});if(!await this.workGroupTeamMemberRepository.findById(o))throw new c("O membro do grupo de trabalho n\xE3o existe.");return await this.workGroupTeamMemberRepository.update({id:o,role:i,description:n,userId:s}),t.sendStatus(200)}};var Ex=K.object({id:K.uuid(),name:K.string(),emailAddress:K.string(),avatarUrl:K.string().nullable(),orcid:K.string().nullable(),phone:K.string().nullable(),lattesUrl:K.string().nullable(),role:K.enum(le)}),cR=K.object({id:K.uuid(),role:K.string(),description:K.string().nullable(),createdAt:K.date(),updatedAt:K.date(),userId:K.uuid(),user:Ex}),pR={method:"post",path:"/work-group-team-member",tags:["Work Group Team Members"],summary:"Create a new Work Group Team Member",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:Ll}}}},responses:{201:{description:"Work Group Team Member created successfully",summary:"Work Group Team Member Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:K.object({errors:K.record(K.string(),K.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:K.object({message:K.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:K.object({message:K.string()})}}}}},dR={method:"get",path:"/work-group-team-member",tags:["Work Group Team Members"],summary:"List all Work Group Team Members with filters",request:{query:K.object({role:K.string().optional(),orderBy:K.enum(["asc","desc"]).default("desc")})},responses:{200:{description:"List of Work Group Team Members retrieved successfully",summary:"Work Group Team Members Retrieved",content:{"application/json":{schema:K.object({members:K.array(cR)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:K.object({message:K.string()})}}}}},lR={method:"get",path:"/work-group-team-member/{id}",tags:["Work Group Team Members"],summary:"Find Work Group Team Member by ID",request:{params:Aa},responses:{200:{description:"Work Group Team Member details retrieved successfully",summary:"Work Group Team Member Retrieved",content:{"application/json":{schema:cR}}},400:{description:"Invalid Work Group Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:K.object({errors:K.record(K.string(),K.string())})}}},404:{description:"Work Group Team Member not found with the provided ID",summary:"Work Group Team Member Not Found",content:{"application/json":{schema:K.object({message:K.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:K.object({message:K.string()})}}}}},uR={method:"put",path:"/work-group-team-member/{id}",tags:["Work Group Team Members"],summary:"Update Work Group Team Member",security:[{bearerAuth:[]}],request:{params:Aa,body:{content:{"application/json":{schema:Vl.omit({id:!0})}}}},responses:{200:{description:"Work Group Team Member updated successfully",summary:"Work Group Team Member Updated"},400:{description:"Invalid input data or Work Group Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:K.object({errors:K.record(K.string(),K.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:K.object({message:K.string()})}}},404:{description:"Work Group Team Member not found with the provided ID",summary:"Work Group Team Member Not Found",content:{"application/json":{schema:K.object({message:K.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:K.object({message:K.string()})}}}}},gR={method:"delete",path:"/work-group-team-member/{id}",tags:["Work Group Team Members"],summary:"Delete Work Group Team Member",security:[{bearerAuth:[]}],request:{params:Wl},responses:{200:{description:"Work Group Team Member deleted successfully",summary:"Work Group Team Member Deleted"},400:{description:"Invalid Work Group Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:K.object({errors:K.record(K.string(),K.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:K.object({message:K.string()})}}},404:{description:"Work Group Team Member not found with the provided ID",summary:"Work Group Team Member Not Found",content:{"application/json":{schema:K.object({message:K.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:K.object({message:K.string()})}}}}};var l=new xx;l.registerComponent("securitySchemes","bearerAuth",{type:"http",scheme:"bearer",bearerFormat:"JWT"});l.registerPath(Uu);l.registerPath(ju);l.registerPath(ku);l.registerPath(Fu);l.registerPath(Ou);l.registerPath(Bu);l.registerPath(Du);l.registerPath(Jh);l.registerPath(Yh);l.registerPath(Xh);l.registerPath(Qh);l.registerPath(eR);l.registerPath(tR);l.registerPath(ef);l.registerPath(tf);l.registerPath(rf);l.registerPath(of);l.registerPath($u);l.registerPath(Vu);l.registerPath(zu);l.registerPath(Zu);l.registerPath(Ku);l.registerPath(Ju);l.registerPath(Yu);l.registerPath(Xu);l.registerPath(Qu);l.registerPath(eg);l.registerPath(tg);l.registerPath(rg);l.registerPath(yf);l.registerPath(ff);l.registerPath(hf);l.registerPath(Rf);l.registerPath(Pf);l.registerPath(qg);l.registerPath(Ng);l.registerPath(Gg);l.registerPath(_g);l.registerPath(Lg);l.registerPath(Ih);l.registerPath(Sh);l.registerPath(Eh);l.registerPath(xh);l.registerPath(Mh);l.registerPath(wh);l.registerPath(dg);l.registerPath(lg);l.registerPath(ug);l.registerPath(gg);l.registerPath(yg);l.registerPath(pf);l.registerPath(df);l.registerPath(lf);l.registerPath(uf);l.registerPath(gf);l.registerPath(Zy);l.registerPath(Ky);l.registerPath(Jy);l.registerPath(Yy);l.registerPath(Xy);l.registerPath(Mf);l.registerPath(wf);l.registerPath(vf);l.registerPath(Uf);l.registerPath(jf);l.registerPath(Iy);l.registerPath(Sy);l.registerPath(Ey);l.registerPath(xy);l.registerPath(My);l.registerPath(Hh);l.registerPath(Wh);l.registerPath($h);l.registerPath(Vh);l.registerPath(zh);l.registerPath(Ry);l.registerPath(Py);l.registerPath(by);l.registerPath(Cy);l.registerPath(Ty);l.registerPath(Hf);l.registerPath(Wf);l.registerPath($f);l.registerPath(Vf);l.registerPath(zf);l.registerPath(Zf);l.registerPath(By);l.registerPath(qy);l.registerPath(Ny);l.registerPath(Gy);l.registerPath(_y);l.registerPath(Ly);l.registerPath(ky);l.registerPath(Fy);l.registerPath(Dy);l.registerPath(Oy);l.registerPath(ny);l.registerPath(sy);l.registerPath(ay);l.registerPath(my);l.registerPath(cy);l.registerPath(py);l.registerPath(ty);l.registerPath(ry);l.registerPath(iy);l.registerPath(oy);l.registerPath(zg);l.registerPath(Zg);l.registerPath(Kg);l.registerPath(Jg);l.registerPath(dh);l.registerPath(lh);l.registerPath(uh);l.registerPath(gh);l.registerPath(yh);l.registerPath(fh);l.registerPath(ah);l.registerPath(mh);l.registerPath(ch);l.registerPath(ph);l.registerPath(Qf);l.registerPath(eh);l.registerPath(th);l.registerPath(rh);l.registerPath(oR);l.registerPath(nR);l.registerPath(sR);l.registerPath(aR);l.registerPath(mR);l.registerPath(ng);l.registerPath(sg);l.registerPath(ag);l.registerPath(mg);l.registerPath(cg);l.registerPath(Tf);l.registerPath(Af);l.registerPath(If);l.registerPath(Sf);l.registerPath(Ef);l.registerPath(Pg);l.registerPath(bg);l.registerPath(Cg);l.registerPath(Tg);l.registerPath(Ag);l.registerPath(Bh);l.registerPath(qh);l.registerPath(Nh);l.registerPath(Gh);l.registerPath(_h);l.registerPath(vh);l.registerPath(Uh);l.registerPath(jh);l.registerPath(kh);l.registerPath(Fh);l.registerPath(Gu);l.registerPath(_u);l.registerPath(Lu);l.registerPath(Hu);l.registerPath(Wu);l.registerPath(ly);l.registerPath(uy);l.registerPath(gy);l.registerPath(yy);l.registerPath(fy);l.registerPath(pR);l.registerPath(dR);l.registerPath(lR);l.registerPath(uR);l.registerPath(gR);l.registerPath(Ff);l.registerPath(Df);l.registerPath(Of);l.registerPath(Bf);l.registerPath(qf);l.registerPath(Ph);l.registerPath(bh);l.registerPath(Ch);l.registerPath(Th);l.registerPath(Ah);l.registerPath(Mg);l.registerPath(wg);l.registerPath(vg);l.registerPath(Ug);l.registerPath(jg);l.registerPath(kg);var wx=new Mx(l.definitions),yR=wx.generateDocument({openapi:"3.0.0",info:{title:"API da Rede CT",version:"1.0.0",description:"API com valida\xE7\xE3o Zod"}});import{Router as _x}from"express";import{extendZodWithOpenApi as vx}from"@asteasolutions/zod-to-openapi";import zl from"zod";vx(zl);var Ux=zl.object({authenticatedUserId:zl.uuid()}),Sa=class{constructor(e){this.userRepository=e}async handle(e,t){let{authenticatedUserId:o}=Ux.parse({authenticatedUserId:e.user.id}),i=await this.userRepository.findById(o);if(!i)throw new c("Usu\xE1rio n\xE3o encontrado.");return t.status(200).json(i)}};import{PrismaPg as Bx}from"@prisma/adapter-pg";import xe from"zod";var jx=xe.object({JWT_SECRET:xe.string(),FIREBASE_BUCKET:xe.string(),FIREBASE_CLIENT_EMAIL:xe.string(),FIREBASE_PRIVATE_KEY:xe.string(),FIREBASE_PROJECT_ID:xe.string(),FIREBASE_TYPE:xe.string(),FIREBASE_PRIVATE_KEY_ID:xe.string(),FIREBASE_CLIENT_ID:xe.string(),FIREBASE_AUTH_URI:xe.string(),FIREBASE_TOKEN_URI:xe.string(),FIREBASE_AUTH_PROVIDER_X509_CERT_URL:xe.string(),FIREBASE_CLIENT_X509_CERT_URL:xe.string(),DATABASE_URL:xe.string()}),fe=jx.parse(process.env);import*as RR from"path";import{fileURLToPath as Ox}from"url";import*as fR from"@prisma/client/runtime/client";var Zl={previewFeatures:[],clientVersion:"7.1.0",engineVersion:"ab635e6b9d606fa5c8fb8b1a7f909c3c3c1c98ba",activeProvider:"postgresql",inlineSchema:`generator client {
  provider = "prisma-client"
  output   = "../config/database/generated"
}

datasource db {
  provider = "postgresql"
}

enum UserRole {
  ADMIN
  USER
}

model User {
  id           String   @id @default(uuid())
  name         String
  passwordHash String   @map("password_hash")
  avatarUrl    String?  @map("avatar_url")
  createdAt    DateTime @default(now()) @map("created_at")
  updatedAt    DateTime @updatedAt @map("updated_at")
  emailAddress String   @unique @map("email_address")
  orcid        String?  @map("orcid")
  phone        String?
  lattesUrl    String?  @map("lattes_url")
  role         UserRole @default(USER)

  news                       News[]
  ManagementTeamMember       ManagementTeamMember[]       @relation("ManagementTeamMember")
  SDHCTeamMember             SDHCTeamMember[]             @relation("SDHCTeamMember")
  LegitimatorCommitteeMember LegitimatorCommitteeMember[] @relation("LegitimatorCommitteeMember")
  certification              Certification[]
  pendencies                 Pendency[]
  Researcher                 Researcher[]
  webinars                   Webinar[]

  coursesCoordinated Course[] @relation("CoordinatedCourses")
  coursesInstructed  Course[] @relation("InstructedCourses")

  workGroupTeamMembers       WorkGroupTeamMember[]
  referenceCenterTeamMembers ReferenceCenterTeamMember[]
  researchGroupsLeader       ResearchGroup[]             @relation("LeaderRelation")
  researchGroupsDeputyLeader ResearchGroup[]             @relation("DeputyLeaderRelation")
  bookVolumes                BookVolume[]
  redeCTHighlights           RedeCTHighlight[]

  @@map("users")
}

model News {
  id        String   @id @default(uuid())
  title     String
  content   String
  imageUrl  String?  @map("image_url")
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  author    User     @relation(fields: [authorId], references: [id])
  authorId  String   @map("author_id")

  @@map("news")
}

model ManagementTeam {
  id          String                 @id @default(uuid())
  name        String
  description String?
  createdAt   DateTime               @default(now()) @map("created_at")
  updatedAt   DateTime               @updatedAt @map("updated_at")
  members     ManagementTeamMember[]

  @@map("management_teams")
}

model ManagementTeamMember {
  id          String         @id @default(uuid())
  role        String
  description String?
  order       Int            @default(0)
  createdAt   DateTime       @default(now()) @map("created_at")
  updatedAt   DateTime       @updatedAt @map("updated_at")
  teamId      String         @map("team_id")
  team        ManagementTeam @relation(fields: [teamId], references: [id], onDelete: Cascade)
  userId      String         @map("user_id")
  user        User           @relation("ManagementTeamMember", fields: [userId], references: [id], onDelete: Cascade)

  @@map("management_team_members")
}

model SDHCTeamMember {
  id          String   @id @default(uuid())
  role        String
  description String?
  order       Int      @default(0)
  createdAt   DateTime @default(now()) @map("created_at")
  updatedAt   DateTime @updatedAt @map("updated_at")
  userId      String   @map("user_id")
  user        User     @relation("SDHCTeamMember", fields: [userId], references: [id], onDelete: Cascade)

  @@map("sdhc_team_members")
}

model LegitimatorCommitteeMember {
  id          String   @id @default(uuid())
  role        String
  description String?
  order       Int      @default(0)
  createdAt   DateTime @default(now()) @map("created_at")
  updatedAt   DateTime @updatedAt @map("updated_at")
  userId      String   @map("user_id")
  user        User     @relation("LegitimatorCommitteeMember", fields: [userId], references: [id], onDelete: Cascade)

  @@map("legitimator_committee_members")
}

model Certification {
  id               String @id @default(uuid())
  title            String
  description      String
  certificationUrl String @map("certification_url")

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  user   User   @relation(fields: [userId], references: [id])
  userId String @map("user_id")

  @@map("certifications")
}

enum PendencyStatus {
  PENDING
  PAID
}

model Pendency {
  id          String         @id @default(uuid())
  title       String
  description String?
  status      PendencyStatus @default(PENDING)
  dueDate     DateTime?      @map("due_date")
  documentUrl String         @map("document_url")

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  user   User   @relation(fields: [userId], references: [id])
  userId String @map("user_id")

  @@map("pendencies")
}

enum Seniority {
  SENIOR
  RESEARCHER
  JUNIOR
  HONOR
}

enum Degree {
  DOCTOR
  MASTER
  BACHELOR
  TECHNICAL
  POSTGRADUATE
}

model Researcher {
  id                 String    @id @default(uuid())
  registrationNumber String    @map("registration_number")
  mainEtps           String?   @map("main_etps")
  formations         String?   @map("formations")
  degrees            Degree[]  @map("degrees")
  occupations        String    @map("occupations")
  seniority          Seniority @map("seniority")
  institutions       String    @map("institutions")
  biography          String?   @map("biography")
  createdAt          DateTime  @default(now()) @map("created_at")
  updatedAt          DateTime  @updatedAt @map("updated_at")

  user   User   @relation(fields: [userId], references: [id])
  userId String @map("user_id")

  etpLeader    ETPLeader[]
  etpDeputy    ETPDeputy[]
  etpSecretary ETPSecretary[]
  etpMembers   ETP[]          @relation("etp_members")

  @@map("researchers")
}

enum InMemoriamRole {
  RESEARCHER
  LEADER
}

model InMemoriam {
  id        String         @id @default(uuid())
  name      String
  birthDate DateTime       @map("birth_date")
  deathDate DateTime       @map("death_date")
  biography String?
  photoUrl  String?        @map("photo_url")
  role      InMemoriamRole

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@map("in_memoriam")
}

model ETPLeader {
  id           String     @id @default(uuid())
  etpId        String     @map("etp_id")
  etp          ETP        @relation(fields: [etpId], references: [id], onDelete: Cascade)
  researcherId String     @map("researcher_id")
  researcher   Researcher @relation(fields: [researcherId], references: [id], onDelete: Cascade)

  @@unique([etpId])
  @@map("etp_leader")
}

model ETPDeputy {
  id           String     @id @default(uuid())
  etpId        String     @map("etp_id")
  etp          ETP        @relation(fields: [etpId], references: [id], onDelete: Cascade)
  researcherId String     @map("researcher_id")
  researcher   Researcher @relation(fields: [researcherId], references: [id], onDelete: Cascade)

  @@unique([etpId])
  @@map("etp_deputy")
}

model ETPSecretary {
  id           String     @id @default(uuid())
  etpId        String     @map("etp_id")
  etp          ETP        @relation(fields: [etpId], references: [id], onDelete: Cascade)
  researcherId String     @map("researcher_id")
  researcher   Researcher @relation(fields: [researcherId], references: [id], onDelete: Cascade)

  @@unique([etpId])
  @@map("etp_secretary")
}

model ETP {
  id          String  @id @default(uuid())
  code        String  @unique
  title       String
  description String?
  notes       String?

  leader       ETPLeader?
  deputyLeader ETPDeputy?
  secretary    ETPSecretary?
  members      Researcher[]  @relation("etp_members")

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@index([code])
  @@map("etps")
}

model Partner {
  id          String   @id @default(uuid())
  name        String
  logoUrl     String?
  websiteUrl  String?
  description String?
  category    String?
  since       DateTime
  isActive    Boolean  @default(true)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@map("partners")
}

enum RegimentStatus {
  DRAFT
  IN_FORCE
  REVOKED
}

model Regiment {
  id          String         @id @default(uuid())
  title       String
  version     String
  publishedAt DateTime       @map("published_at")
  documentUrl String         @map("document_url")
  status      RegimentStatus @default(IN_FORCE)

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@map("regiments")
}

enum MeetingFormat {
  ONLINE
  IN_PERSON
}

enum MeetingStatus {
  PENDING
  CANCELLED
  FINISHED
}

model Meeting {
  id          String         @id @default(uuid())
  title       String
  scheduledAt DateTime       @map("scheduled_at")
  format      MeetingFormat  @default(ONLINE)
  agenda      String
  minutes     MeetingMinute?
  meetingLink String?        @map("meeting_link")
  location    String?        @map("location")
  status      MeetingStatus  @default(PENDING)

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@map("meetings")
}

model MeetingMinute {
  id          String   @id @default(uuid())
  title       String
  publishedAt DateTime @map("published_at")
  documentUrl String   @map("document_url")
  meetingId   String   @unique @map("meeting_id")
  meeting     Meeting  @relation(fields: [meetingId], references: [id], onDelete: Cascade)

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@map("meeting_minutes")
}

model InternationalScientificCongress {
  id             String   @id @default(uuid())
  title          String
  edition        Int      @unique
  startDate      DateTime @map("start_date")
  endDate        DateTime @map("end_date")
  description    String?
  location       String?
  congressLink   String?  @map("congress_link")
  noticeUrl      String?  @map("general_notice_url")
  scheduleUrl    String?  @map("schedule_document_url")
  programUrl     String?  @map("program_document_url")
  adminReportUrl String?  @map("admin_report_document_url")
  proceedingsUrl String?  @map("proceedings_document_url")

  partners  InternationalScientificCongressPartner[]
  galleries InternationalScientificCongressGalleryItem[]

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@index([edition], name: "congress_edition")
  @@map("international_scientific_congresses")
}

model InternationalScientificCongressPartner {
  id      String  @id @default(uuid())
  name    String
  logoUrl String? @map("logo_url")

  congressId String                          @map("congress_id")
  congress   InternationalScientificCongress @relation(fields: [congressId], references: [id], onDelete: Cascade)

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@index([congressId])
  @@map("international_scientific_congress_partners")
}

model InternationalScientificCongressGalleryItem {
  id       String  @id @default(uuid())
  imageUrl String  @map("image_url")
  caption  String?

  congressId String                          @map("congress_id")
  congress   InternationalScientificCongress @relation(fields: [congressId], references: [id], onDelete: Cascade)

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@index([congressId])
  @@map("international_scientific_congress_galleries")
}

model RegionalCongress {
  id             String   @id @default(uuid())
  title          String
  edition        Int      @unique
  startDate      DateTime @map("start_date")
  endDate        DateTime @map("end_date")
  description    String?
  location       String?
  congressLink   String?  @map("congress_link")
  noticeUrl      String?  @map("notice_url")
  scheduleUrl    String?  @map("schedule_url")
  programUrl     String?  @map("program_url")
  adminReportUrl String?  @map("admin_report_url")
  proceedingsUrl String?  @map("proceedings_url")

  createdAt                    DateTime                      @default(now()) @map("created_at")
  updatedAt                    DateTime                      @updatedAt @map("updated_at")
  regionalCongressPartners     RegionalCongressPartner[]
  regionalCongressGalleryItems RegionalCongressGalleryItem[]

  @@index([edition], name: "regional_congress_edition")
  @@map("regional_congresses")
}

model RegionalCongressPartner {
  id      String  @id @default(uuid())
  name    String
  logoUrl String? @map("logo_url")

  congressId String           @map("congress_id")
  congress   RegionalCongress @relation(fields: [congressId], references: [id], onDelete: Cascade)

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@index([congressId])
  @@map("regional_congress_partners")
}

model RegionalCongressGalleryItem {
  id       String  @id @default(uuid())
  imageUrl String  @map("image_url")
  caption  String?

  congressId String           @map("congress_id")
  congress   RegionalCongress @relation(fields: [congressId], references: [id], onDelete: Cascade)

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@index([congressId])
  @@map("regional_congress_galleries")
}

model Webinar {
  id           String   @id @default(uuid())
  title        String
  description  String?
  scheduledAt  DateTime @map("scheduled_at")
  webinarLink  String?  @map("webinar_link")
  thumbnailUrl String?  @map("thumbnail_url")

  guests User[]

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@map("webinars")
}

model Course {
  id       String  @id @default(uuid())
  title    String
  imageUrl String? @map("image_url")

  coordinator   User   @relation("CoordinatedCourses", fields: [coordinatorId], references: [id])
  coordinatorId String

  instructors User[] @relation("InstructedCourses")

  email            String
  scheduledAt      DateTime @map("scheduled_at")
  location         String
  registrationLink String?  @map("registration_link")
  description      String?

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@index([id], name: "course_id")
  @@map("courses")
}

model PostGraduateProgram {
  id               String   @id @default(uuid())
  title            String
  imageUrl         String?  @map("image_url")
  description      String?
  startDate        DateTime @map("start_date")
  endDate          DateTime @map("end_date")
  contact          String
  registrationLink String?  @map("registration_link")

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@index([id], name: "post_graduate_program_id")
  @@map("post_graduate_programs")
}

enum EventFormat {
  ONLINE
  IN_PERSON
}

enum EventStatus {
  PENDING
  CANCELLED
  FINISHED
}

model Event {
  id          String      @id @default(uuid())
  title       String
  description String?
  imageUrl    String?     @map("image_url")
  startDate   DateTime    @map("start_date")
  endDate     DateTime    @map("end_date")
  location    String?
  status      EventStatus @default(PENDING)
  format      EventFormat @default(ONLINE)
  eventLink   String?     @map("event_link")

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@index([id], name: "event_id")
  @@map("events")
}

model ScientificJournal {
  id             String   @id @default(uuid())
  name           String
  issn           String
  description    String
  logoUrl        String?  @map("logo_url")
  journalUrl     String   @map("journal_url")
  directors      String?  @map("directors")
  editorialBoard String?  @map("editorial_board")
  createdAt      DateTime @default(now()) @map("created_at")
  updatedAt      DateTime @updatedAt @map("updated_at")

  @@index([id], name: "scientific_journal_id")
  @@map("scientific_journals")
}

model BookVolume {
  id              String   @id @default(uuid())
  volumeNumber    Int      @map("volume_number")
  year            Int
  title           String
  accessUrl       String?  @map("access_url")
  coverImageUrl   String?  @map("cover_image_url")
  catalogSheetUrl String?  @map("catalog_sheet_url")
  description     String?
  createdAt       DateTime @default(now()) @map("created_at")
  updatedAt       DateTime @updatedAt @map("updated_at")

  author   User   @relation(fields: [authorId], references: [id])
  authorId String @map("author_id")

  @@index([id], name: "book_volume_id")
  @@map("book_volumes")
}

model ScientificArticle {
  id      String  @id @default(uuid())
  title   String
  author  String
  journal String?
  volume  String?
  edition String?

  pageStart Int? @map("page_start")
  pageEnd   Int? @map("page_end")

  startDate DateTime @map("start_date")
  endDate   DateTime @map("end_date")

  city        String?
  state       String?
  country     String?
  publisher   String?
  description String?
  year        Int?

  accessUrl String? @map("access_url")

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@index([id], name: "scientific_article_id")
  @@map("scientific_articles")
}

model WorkGroupTeamMember {
  id          String   @id @default(uuid())
  role        String
  description String?
  createdAt   DateTime @default(now()) @map("created_at")
  updatedAt   DateTime @updatedAt @map("updated_at")

  userId String @map("user_id")
  user   User   @relation(fields: [userId], references: [id])

  @@index([id], name: "work_group_team_member_id")
  @@map("work_group_team_members")
}

model ReferenceCenterTeamMember {
  id          String   @id @default(uuid())
  role        String
  description String?
  createdAt   DateTime @default(now()) @map("created_at")
  updatedAt   DateTime @updatedAt @map("updated_at")

  userId String @map("user_id")
  user   User   @relation(fields: [userId], references: [id])

  @@index([id], name: "reference_center_team_member_id")
  @@map("reference_center_team_members")
}

model Law {
  id        String   @id @default(uuid())
  title     String
  link      String
  country   String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@index([id], name: "law_id")
  @@map("laws")
}

model ResearchGroup {
  id          String   @id @default(uuid())
  name        String
  acronym     String?
  description String?
  url         String?
  logoUrl     String?  @map("logo_url")
  foundedAt   DateTime @map("founded_at")
  scope       String?
  email       String?

  leader   User   @relation("LeaderRelation", fields: [leaderId], references: [id])
  leaderId String

  deputyLeader   User   @relation("DeputyLeaderRelation", fields: [deputyLeaderId], references: [id])
  deputyLeaderId String

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@index([id], name: "research_group_id")
  @@map("research_groups")
}

model Museum {
  id String @id @default(uuid())

  logoUrl String? @map("logo_url")

  name    String
  city    String?
  state   String?
  country String?

  description String?
  website     String?
  email       String?
  phone       String?
  address     String?
  functioning String?

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@index([id], name: "museum_id")
  @@map("museums")
}

enum RedeCTHighlightType {
  PERSON
  INSTITUTION
}

model RedeCTHighlight {
  id               String              @id @default(uuid())
  type             RedeCTHighlightType
  description      String?
  honorableMention Boolean?            @default(false) @map("honorable_mention")
  honoredAt        DateTime            @map("honored_at")
  meritUrl         String?             @map("merit_url")

  user   User   @relation(fields: [userId], references: [id])
  userId String @map("user_id")

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@index([id], name: "redect_highlight_id")
  @@map("redect_highlights")
}

model FinancialTransactionStatement {
  id String @id @default(uuid())

  documentUrl String @map("document_url")

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@index([id], name: "financial_transaction_statement_id")
  @@map("financial_transaction_statements")
}

enum CheckingAccountType {
  EXCLUSIVE_REDECT_USE
  EVENTS
  COLLOQUIUM
}

model CheckingAccount {
  id String @id @default(uuid())

  type CheckingAccountType

  balanceInCents Int @map("balance_in_cents")

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@index([id], name: "checking_account_id")
  @@map("checking_accounts")
}
`,runtimeDataModel:{models:{},enums:{},types:{}}};Zl.runtimeDataModel=JSON.parse('{"models":{"User":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"name","kind":"scalar","type":"String"},{"name":"passwordHash","kind":"scalar","type":"String","dbName":"password_hash"},{"name":"avatarUrl","kind":"scalar","type":"String","dbName":"avatar_url"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"},{"name":"emailAddress","kind":"scalar","type":"String","dbName":"email_address"},{"name":"orcid","kind":"scalar","type":"String","dbName":"orcid"},{"name":"phone","kind":"scalar","type":"String"},{"name":"lattesUrl","kind":"scalar","type":"String","dbName":"lattes_url"},{"name":"role","kind":"enum","type":"UserRole"},{"name":"news","kind":"object","type":"News","relationName":"NewsToUser"},{"name":"ManagementTeamMember","kind":"object","type":"ManagementTeamMember","relationName":"ManagementTeamMember"},{"name":"SDHCTeamMember","kind":"object","type":"SDHCTeamMember","relationName":"SDHCTeamMember"},{"name":"LegitimatorCommitteeMember","kind":"object","type":"LegitimatorCommitteeMember","relationName":"LegitimatorCommitteeMember"},{"name":"certification","kind":"object","type":"Certification","relationName":"CertificationToUser"},{"name":"pendencies","kind":"object","type":"Pendency","relationName":"PendencyToUser"},{"name":"Researcher","kind":"object","type":"Researcher","relationName":"ResearcherToUser"},{"name":"webinars","kind":"object","type":"Webinar","relationName":"UserToWebinar"},{"name":"coursesCoordinated","kind":"object","type":"Course","relationName":"CoordinatedCourses"},{"name":"coursesInstructed","kind":"object","type":"Course","relationName":"InstructedCourses"},{"name":"workGroupTeamMembers","kind":"object","type":"WorkGroupTeamMember","relationName":"UserToWorkGroupTeamMember"},{"name":"referenceCenterTeamMembers","kind":"object","type":"ReferenceCenterTeamMember","relationName":"ReferenceCenterTeamMemberToUser"},{"name":"researchGroupsLeader","kind":"object","type":"ResearchGroup","relationName":"LeaderRelation"},{"name":"researchGroupsDeputyLeader","kind":"object","type":"ResearchGroup","relationName":"DeputyLeaderRelation"},{"name":"bookVolumes","kind":"object","type":"BookVolume","relationName":"BookVolumeToUser"},{"name":"redeCTHighlights","kind":"object","type":"RedeCTHighlight","relationName":"RedeCTHighlightToUser"}],"dbName":"users"},"News":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"title","kind":"scalar","type":"String"},{"name":"content","kind":"scalar","type":"String"},{"name":"imageUrl","kind":"scalar","type":"String","dbName":"image_url"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"},{"name":"author","kind":"object","type":"User","relationName":"NewsToUser"},{"name":"authorId","kind":"scalar","type":"String","dbName":"author_id"}],"dbName":"news"},"ManagementTeam":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"name","kind":"scalar","type":"String"},{"name":"description","kind":"scalar","type":"String"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"},{"name":"members","kind":"object","type":"ManagementTeamMember","relationName":"ManagementTeamToManagementTeamMember"}],"dbName":"management_teams"},"ManagementTeamMember":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"role","kind":"scalar","type":"String"},{"name":"description","kind":"scalar","type":"String"},{"name":"order","kind":"scalar","type":"Int"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"},{"name":"teamId","kind":"scalar","type":"String","dbName":"team_id"},{"name":"team","kind":"object","type":"ManagementTeam","relationName":"ManagementTeamToManagementTeamMember"},{"name":"userId","kind":"scalar","type":"String","dbName":"user_id"},{"name":"user","kind":"object","type":"User","relationName":"ManagementTeamMember"}],"dbName":"management_team_members"},"SDHCTeamMember":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"role","kind":"scalar","type":"String"},{"name":"description","kind":"scalar","type":"String"},{"name":"order","kind":"scalar","type":"Int"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"},{"name":"userId","kind":"scalar","type":"String","dbName":"user_id"},{"name":"user","kind":"object","type":"User","relationName":"SDHCTeamMember"}],"dbName":"sdhc_team_members"},"LegitimatorCommitteeMember":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"role","kind":"scalar","type":"String"},{"name":"description","kind":"scalar","type":"String"},{"name":"order","kind":"scalar","type":"Int"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"},{"name":"userId","kind":"scalar","type":"String","dbName":"user_id"},{"name":"user","kind":"object","type":"User","relationName":"LegitimatorCommitteeMember"}],"dbName":"legitimator_committee_members"},"Certification":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"title","kind":"scalar","type":"String"},{"name":"description","kind":"scalar","type":"String"},{"name":"certificationUrl","kind":"scalar","type":"String","dbName":"certification_url"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"},{"name":"user","kind":"object","type":"User","relationName":"CertificationToUser"},{"name":"userId","kind":"scalar","type":"String","dbName":"user_id"}],"dbName":"certifications"},"Pendency":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"title","kind":"scalar","type":"String"},{"name":"description","kind":"scalar","type":"String"},{"name":"status","kind":"enum","type":"PendencyStatus"},{"name":"dueDate","kind":"scalar","type":"DateTime","dbName":"due_date"},{"name":"documentUrl","kind":"scalar","type":"String","dbName":"document_url"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"},{"name":"user","kind":"object","type":"User","relationName":"PendencyToUser"},{"name":"userId","kind":"scalar","type":"String","dbName":"user_id"}],"dbName":"pendencies"},"Researcher":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"registrationNumber","kind":"scalar","type":"String","dbName":"registration_number"},{"name":"mainEtps","kind":"scalar","type":"String","dbName":"main_etps"},{"name":"formations","kind":"scalar","type":"String","dbName":"formations"},{"name":"degrees","kind":"enum","type":"Degree","dbName":"degrees"},{"name":"occupations","kind":"scalar","type":"String","dbName":"occupations"},{"name":"seniority","kind":"enum","type":"Seniority","dbName":"seniority"},{"name":"institutions","kind":"scalar","type":"String","dbName":"institutions"},{"name":"biography","kind":"scalar","type":"String","dbName":"biography"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"},{"name":"user","kind":"object","type":"User","relationName":"ResearcherToUser"},{"name":"userId","kind":"scalar","type":"String","dbName":"user_id"},{"name":"etpLeader","kind":"object","type":"ETPLeader","relationName":"ETPLeaderToResearcher"},{"name":"etpDeputy","kind":"object","type":"ETPDeputy","relationName":"ETPDeputyToResearcher"},{"name":"etpSecretary","kind":"object","type":"ETPSecretary","relationName":"ETPSecretaryToResearcher"},{"name":"etpMembers","kind":"object","type":"ETP","relationName":"etp_members"}],"dbName":"researchers"},"InMemoriam":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"name","kind":"scalar","type":"String"},{"name":"birthDate","kind":"scalar","type":"DateTime","dbName":"birth_date"},{"name":"deathDate","kind":"scalar","type":"DateTime","dbName":"death_date"},{"name":"biography","kind":"scalar","type":"String"},{"name":"photoUrl","kind":"scalar","type":"String","dbName":"photo_url"},{"name":"role","kind":"enum","type":"InMemoriamRole"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"}],"dbName":"in_memoriam"},"ETPLeader":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"etpId","kind":"scalar","type":"String","dbName":"etp_id"},{"name":"etp","kind":"object","type":"ETP","relationName":"ETPToETPLeader"},{"name":"researcherId","kind":"scalar","type":"String","dbName":"researcher_id"},{"name":"researcher","kind":"object","type":"Researcher","relationName":"ETPLeaderToResearcher"}],"dbName":"etp_leader"},"ETPDeputy":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"etpId","kind":"scalar","type":"String","dbName":"etp_id"},{"name":"etp","kind":"object","type":"ETP","relationName":"ETPToETPDeputy"},{"name":"researcherId","kind":"scalar","type":"String","dbName":"researcher_id"},{"name":"researcher","kind":"object","type":"Researcher","relationName":"ETPDeputyToResearcher"}],"dbName":"etp_deputy"},"ETPSecretary":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"etpId","kind":"scalar","type":"String","dbName":"etp_id"},{"name":"etp","kind":"object","type":"ETP","relationName":"ETPToETPSecretary"},{"name":"researcherId","kind":"scalar","type":"String","dbName":"researcher_id"},{"name":"researcher","kind":"object","type":"Researcher","relationName":"ETPSecretaryToResearcher"}],"dbName":"etp_secretary"},"ETP":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"code","kind":"scalar","type":"String"},{"name":"title","kind":"scalar","type":"String"},{"name":"description","kind":"scalar","type":"String"},{"name":"notes","kind":"scalar","type":"String"},{"name":"leader","kind":"object","type":"ETPLeader","relationName":"ETPToETPLeader"},{"name":"deputyLeader","kind":"object","type":"ETPDeputy","relationName":"ETPToETPDeputy"},{"name":"secretary","kind":"object","type":"ETPSecretary","relationName":"ETPToETPSecretary"},{"name":"members","kind":"object","type":"Researcher","relationName":"etp_members"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"}],"dbName":"etps"},"Partner":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"name","kind":"scalar","type":"String"},{"name":"logoUrl","kind":"scalar","type":"String"},{"name":"websiteUrl","kind":"scalar","type":"String"},{"name":"description","kind":"scalar","type":"String"},{"name":"category","kind":"scalar","type":"String"},{"name":"since","kind":"scalar","type":"DateTime"},{"name":"isActive","kind":"scalar","type":"Boolean"},{"name":"createdAt","kind":"scalar","type":"DateTime"},{"name":"updatedAt","kind":"scalar","type":"DateTime"}],"dbName":"partners"},"Regiment":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"title","kind":"scalar","type":"String"},{"name":"version","kind":"scalar","type":"String"},{"name":"publishedAt","kind":"scalar","type":"DateTime","dbName":"published_at"},{"name":"documentUrl","kind":"scalar","type":"String","dbName":"document_url"},{"name":"status","kind":"enum","type":"RegimentStatus"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"}],"dbName":"regiments"},"Meeting":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"title","kind":"scalar","type":"String"},{"name":"scheduledAt","kind":"scalar","type":"DateTime","dbName":"scheduled_at"},{"name":"format","kind":"enum","type":"MeetingFormat"},{"name":"agenda","kind":"scalar","type":"String"},{"name":"minutes","kind":"object","type":"MeetingMinute","relationName":"MeetingToMeetingMinute"},{"name":"meetingLink","kind":"scalar","type":"String","dbName":"meeting_link"},{"name":"location","kind":"scalar","type":"String","dbName":"location"},{"name":"status","kind":"enum","type":"MeetingStatus"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"}],"dbName":"meetings"},"MeetingMinute":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"title","kind":"scalar","type":"String"},{"name":"publishedAt","kind":"scalar","type":"DateTime","dbName":"published_at"},{"name":"documentUrl","kind":"scalar","type":"String","dbName":"document_url"},{"name":"meetingId","kind":"scalar","type":"String","dbName":"meeting_id"},{"name":"meeting","kind":"object","type":"Meeting","relationName":"MeetingToMeetingMinute"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"}],"dbName":"meeting_minutes"},"InternationalScientificCongress":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"title","kind":"scalar","type":"String"},{"name":"edition","kind":"scalar","type":"Int"},{"name":"startDate","kind":"scalar","type":"DateTime","dbName":"start_date"},{"name":"endDate","kind":"scalar","type":"DateTime","dbName":"end_date"},{"name":"description","kind":"scalar","type":"String"},{"name":"location","kind":"scalar","type":"String"},{"name":"congressLink","kind":"scalar","type":"String","dbName":"congress_link"},{"name":"noticeUrl","kind":"scalar","type":"String","dbName":"general_notice_url"},{"name":"scheduleUrl","kind":"scalar","type":"String","dbName":"schedule_document_url"},{"name":"programUrl","kind":"scalar","type":"String","dbName":"program_document_url"},{"name":"adminReportUrl","kind":"scalar","type":"String","dbName":"admin_report_document_url"},{"name":"proceedingsUrl","kind":"scalar","type":"String","dbName":"proceedings_document_url"},{"name":"partners","kind":"object","type":"InternationalScientificCongressPartner","relationName":"InternationalScientificCongressToInternationalScientificCongressPartner"},{"name":"galleries","kind":"object","type":"InternationalScientificCongressGalleryItem","relationName":"InternationalScientificCongressToInternationalScientificCongressGalleryItem"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"}],"dbName":"international_scientific_congresses"},"InternationalScientificCongressPartner":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"name","kind":"scalar","type":"String"},{"name":"logoUrl","kind":"scalar","type":"String","dbName":"logo_url"},{"name":"congressId","kind":"scalar","type":"String","dbName":"congress_id"},{"name":"congress","kind":"object","type":"InternationalScientificCongress","relationName":"InternationalScientificCongressToInternationalScientificCongressPartner"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"}],"dbName":"international_scientific_congress_partners"},"InternationalScientificCongressGalleryItem":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"imageUrl","kind":"scalar","type":"String","dbName":"image_url"},{"name":"caption","kind":"scalar","type":"String"},{"name":"congressId","kind":"scalar","type":"String","dbName":"congress_id"},{"name":"congress","kind":"object","type":"InternationalScientificCongress","relationName":"InternationalScientificCongressToInternationalScientificCongressGalleryItem"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"}],"dbName":"international_scientific_congress_galleries"},"RegionalCongress":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"title","kind":"scalar","type":"String"},{"name":"edition","kind":"scalar","type":"Int"},{"name":"startDate","kind":"scalar","type":"DateTime","dbName":"start_date"},{"name":"endDate","kind":"scalar","type":"DateTime","dbName":"end_date"},{"name":"description","kind":"scalar","type":"String"},{"name":"location","kind":"scalar","type":"String"},{"name":"congressLink","kind":"scalar","type":"String","dbName":"congress_link"},{"name":"noticeUrl","kind":"scalar","type":"String","dbName":"notice_url"},{"name":"scheduleUrl","kind":"scalar","type":"String","dbName":"schedule_url"},{"name":"programUrl","kind":"scalar","type":"String","dbName":"program_url"},{"name":"adminReportUrl","kind":"scalar","type":"String","dbName":"admin_report_url"},{"name":"proceedingsUrl","kind":"scalar","type":"String","dbName":"proceedings_url"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"},{"name":"regionalCongressPartners","kind":"object","type":"RegionalCongressPartner","relationName":"RegionalCongressToRegionalCongressPartner"},{"name":"regionalCongressGalleryItems","kind":"object","type":"RegionalCongressGalleryItem","relationName":"RegionalCongressToRegionalCongressGalleryItem"}],"dbName":"regional_congresses"},"RegionalCongressPartner":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"name","kind":"scalar","type":"String"},{"name":"logoUrl","kind":"scalar","type":"String","dbName":"logo_url"},{"name":"congressId","kind":"scalar","type":"String","dbName":"congress_id"},{"name":"congress","kind":"object","type":"RegionalCongress","relationName":"RegionalCongressToRegionalCongressPartner"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"}],"dbName":"regional_congress_partners"},"RegionalCongressGalleryItem":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"imageUrl","kind":"scalar","type":"String","dbName":"image_url"},{"name":"caption","kind":"scalar","type":"String"},{"name":"congressId","kind":"scalar","type":"String","dbName":"congress_id"},{"name":"congress","kind":"object","type":"RegionalCongress","relationName":"RegionalCongressToRegionalCongressGalleryItem"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"}],"dbName":"regional_congress_galleries"},"Webinar":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"title","kind":"scalar","type":"String"},{"name":"description","kind":"scalar","type":"String"},{"name":"scheduledAt","kind":"scalar","type":"DateTime","dbName":"scheduled_at"},{"name":"webinarLink","kind":"scalar","type":"String","dbName":"webinar_link"},{"name":"thumbnailUrl","kind":"scalar","type":"String","dbName":"thumbnail_url"},{"name":"guests","kind":"object","type":"User","relationName":"UserToWebinar"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"}],"dbName":"webinars"},"Course":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"title","kind":"scalar","type":"String"},{"name":"imageUrl","kind":"scalar","type":"String","dbName":"image_url"},{"name":"coordinator","kind":"object","type":"User","relationName":"CoordinatedCourses"},{"name":"coordinatorId","kind":"scalar","type":"String"},{"name":"instructors","kind":"object","type":"User","relationName":"InstructedCourses"},{"name":"email","kind":"scalar","type":"String"},{"name":"scheduledAt","kind":"scalar","type":"DateTime","dbName":"scheduled_at"},{"name":"location","kind":"scalar","type":"String"},{"name":"registrationLink","kind":"scalar","type":"String","dbName":"registration_link"},{"name":"description","kind":"scalar","type":"String"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"}],"dbName":"courses"},"PostGraduateProgram":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"title","kind":"scalar","type":"String"},{"name":"imageUrl","kind":"scalar","type":"String","dbName":"image_url"},{"name":"description","kind":"scalar","type":"String"},{"name":"startDate","kind":"scalar","type":"DateTime","dbName":"start_date"},{"name":"endDate","kind":"scalar","type":"DateTime","dbName":"end_date"},{"name":"contact","kind":"scalar","type":"String"},{"name":"registrationLink","kind":"scalar","type":"String","dbName":"registration_link"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"}],"dbName":"post_graduate_programs"},"Event":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"title","kind":"scalar","type":"String"},{"name":"description","kind":"scalar","type":"String"},{"name":"imageUrl","kind":"scalar","type":"String","dbName":"image_url"},{"name":"startDate","kind":"scalar","type":"DateTime","dbName":"start_date"},{"name":"endDate","kind":"scalar","type":"DateTime","dbName":"end_date"},{"name":"location","kind":"scalar","type":"String"},{"name":"status","kind":"enum","type":"EventStatus"},{"name":"format","kind":"enum","type":"EventFormat"},{"name":"eventLink","kind":"scalar","type":"String","dbName":"event_link"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"}],"dbName":"events"},"ScientificJournal":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"name","kind":"scalar","type":"String"},{"name":"issn","kind":"scalar","type":"String"},{"name":"description","kind":"scalar","type":"String"},{"name":"logoUrl","kind":"scalar","type":"String","dbName":"logo_url"},{"name":"journalUrl","kind":"scalar","type":"String","dbName":"journal_url"},{"name":"directors","kind":"scalar","type":"String","dbName":"directors"},{"name":"editorialBoard","kind":"scalar","type":"String","dbName":"editorial_board"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"}],"dbName":"scientific_journals"},"BookVolume":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"volumeNumber","kind":"scalar","type":"Int","dbName":"volume_number"},{"name":"year","kind":"scalar","type":"Int"},{"name":"title","kind":"scalar","type":"String"},{"name":"accessUrl","kind":"scalar","type":"String","dbName":"access_url"},{"name":"coverImageUrl","kind":"scalar","type":"String","dbName":"cover_image_url"},{"name":"catalogSheetUrl","kind":"scalar","type":"String","dbName":"catalog_sheet_url"},{"name":"description","kind":"scalar","type":"String"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"},{"name":"author","kind":"object","type":"User","relationName":"BookVolumeToUser"},{"name":"authorId","kind":"scalar","type":"String","dbName":"author_id"}],"dbName":"book_volumes"},"ScientificArticle":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"title","kind":"scalar","type":"String"},{"name":"author","kind":"scalar","type":"String"},{"name":"journal","kind":"scalar","type":"String"},{"name":"volume","kind":"scalar","type":"String"},{"name":"edition","kind":"scalar","type":"String"},{"name":"pageStart","kind":"scalar","type":"Int","dbName":"page_start"},{"name":"pageEnd","kind":"scalar","type":"Int","dbName":"page_end"},{"name":"startDate","kind":"scalar","type":"DateTime","dbName":"start_date"},{"name":"endDate","kind":"scalar","type":"DateTime","dbName":"end_date"},{"name":"city","kind":"scalar","type":"String"},{"name":"state","kind":"scalar","type":"String"},{"name":"country","kind":"scalar","type":"String"},{"name":"publisher","kind":"scalar","type":"String"},{"name":"description","kind":"scalar","type":"String"},{"name":"year","kind":"scalar","type":"Int"},{"name":"accessUrl","kind":"scalar","type":"String","dbName":"access_url"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"}],"dbName":"scientific_articles"},"WorkGroupTeamMember":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"role","kind":"scalar","type":"String"},{"name":"description","kind":"scalar","type":"String"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"},{"name":"userId","kind":"scalar","type":"String","dbName":"user_id"},{"name":"user","kind":"object","type":"User","relationName":"UserToWorkGroupTeamMember"}],"dbName":"work_group_team_members"},"ReferenceCenterTeamMember":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"role","kind":"scalar","type":"String"},{"name":"description","kind":"scalar","type":"String"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"},{"name":"userId","kind":"scalar","type":"String","dbName":"user_id"},{"name":"user","kind":"object","type":"User","relationName":"ReferenceCenterTeamMemberToUser"}],"dbName":"reference_center_team_members"},"Law":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"title","kind":"scalar","type":"String"},{"name":"link","kind":"scalar","type":"String"},{"name":"country","kind":"scalar","type":"String"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"}],"dbName":"laws"},"ResearchGroup":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"name","kind":"scalar","type":"String"},{"name":"acronym","kind":"scalar","type":"String"},{"name":"description","kind":"scalar","type":"String"},{"name":"url","kind":"scalar","type":"String"},{"name":"logoUrl","kind":"scalar","type":"String","dbName":"logo_url"},{"name":"foundedAt","kind":"scalar","type":"DateTime","dbName":"founded_at"},{"name":"scope","kind":"scalar","type":"String"},{"name":"email","kind":"scalar","type":"String"},{"name":"leader","kind":"object","type":"User","relationName":"LeaderRelation"},{"name":"leaderId","kind":"scalar","type":"String"},{"name":"deputyLeader","kind":"object","type":"User","relationName":"DeputyLeaderRelation"},{"name":"deputyLeaderId","kind":"scalar","type":"String"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"}],"dbName":"research_groups"},"Museum":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"logoUrl","kind":"scalar","type":"String","dbName":"logo_url"},{"name":"name","kind":"scalar","type":"String"},{"name":"city","kind":"scalar","type":"String"},{"name":"state","kind":"scalar","type":"String"},{"name":"country","kind":"scalar","type":"String"},{"name":"description","kind":"scalar","type":"String"},{"name":"website","kind":"scalar","type":"String"},{"name":"email","kind":"scalar","type":"String"},{"name":"phone","kind":"scalar","type":"String"},{"name":"address","kind":"scalar","type":"String"},{"name":"functioning","kind":"scalar","type":"String"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"}],"dbName":"museums"},"RedeCTHighlight":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"type","kind":"enum","type":"RedeCTHighlightType"},{"name":"description","kind":"scalar","type":"String"},{"name":"honorableMention","kind":"scalar","type":"Boolean","dbName":"honorable_mention"},{"name":"honoredAt","kind":"scalar","type":"DateTime","dbName":"honored_at"},{"name":"meritUrl","kind":"scalar","type":"String","dbName":"merit_url"},{"name":"user","kind":"object","type":"User","relationName":"RedeCTHighlightToUser"},{"name":"userId","kind":"scalar","type":"String","dbName":"user_id"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"}],"dbName":"redect_highlights"},"FinancialTransactionStatement":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"documentUrl","kind":"scalar","type":"String","dbName":"document_url"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"}],"dbName":"financial_transaction_statements"},"CheckingAccount":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"type","kind":"enum","type":"CheckingAccountType"},{"name":"balanceInCents","kind":"scalar","type":"Int","dbName":"balance_in_cents"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"}],"dbName":"checking_accounts"}},"enums":{},"types":{}}');async function kx(r){let{Buffer:e}=await import("buffer"),t=e.from(r,"base64");return new WebAssembly.Module(t)}Zl.compilerWasm={getRuntime:async()=>await import("@prisma/client/runtime/query_compiler_bg.postgresql.mjs"),getQueryCompilerWasmModule:async()=>{let{wasm:r}=await import("@prisma/client/runtime/query_compiler_bg.postgresql.wasm-base64.mjs");return await kx(r)}};function hR(){return fR.getPrismaClient(Zl)}import*as de from"@prisma/client/runtime/client";var FZ=de.Extensions.getExtensionContext;var DZ={DbNull:de.NullTypes.DbNull,JsonNull:de.NullTypes.JsonNull,AnyNull:de.NullTypes.AnyNull};var OZ=de.makeStrictEnum({ReadUncommitted:"ReadUncommitted",ReadCommitted:"ReadCommitted",RepeatableRead:"RepeatableRead",Serializable:"Serializable"});var BZ=de.Extensions.defineExtension;globalThis.__dirname=RR.dirname(Ox(import.meta.url));var PR=hR();var qx=new Bx({connectionString:fe.DATABASE_URL}),F=new PR({log:["warn","error"],adapter:qx});var Ea=class{constructor(e){this.prisma=e}async register({userId:e,title:t,description:o,certificationUrl:i}){await this.prisma.certification.create({data:{title:t,description:o,certificationUrl:i,user:{connect:{id:e}}}})}async find({pagination:{offset:e,limit:t},filter:{description:o,orderBy:i,title:n,userId:s}}){let a={},m=[];return s&&(a.userId=s),n&&m.push({title:{contains:n,mode:"insensitive"}}),o&&m.push({description:{contains:o,mode:"insensitive"}}),m.length>0&&(a.OR=m),await this.prisma.certification.findMany({where:a,include:{user:{omit:{passwordHash:!0}}},orderBy:{updatedAt:i},skip:e,take:t})}async findById(e){return await this.prisma.certification.findFirst({where:{id:e}})}async findByUserId({pagination:{limit:e,offset:t},filter:{description:o,orderBy:i,title:n},userId:s}){let a={userId:s},m=[];return n&&m.push({title:{contains:n,mode:"insensitive"}}),o&&m.push({description:{contains:o,mode:"insensitive"}}),m.length>0&&(a.OR=m),await this.prisma.certification.findMany({where:a,include:{user:{omit:{passwordHash:!0}}},orderBy:{updatedAt:i},skip:t,take:e})}async update({id:e,...t}){await this.prisma.certification.update({where:{id:e},data:t})}async deleteById(e){await this.prisma.certification.delete({where:{id:e}})}async count({filter:{description:e,title:t,userId:o}}){let i={},n=[];return o&&(i.userId=o),t&&n.push({title:{contains:t,mode:"insensitive"}}),e&&n.push({description:{contains:e,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.certification.count({where:i})}};function Wt(){return new Ea(F)}var xa=class{constructor(e){this.prisma=e}async create(e){await this.prisma.news.create({data:e})}async find({pagination:{offset:e,limit:t},filter:{authorId:o,content:i,title:n,orderBy:s}}){let a={};o&&(a.authorId={contains:o,mode:"insensitive"});let m=[];return n&&m.push({title:{contains:n,mode:"insensitive"}}),i&&m.push({content:{contains:i,mode:"insensitive"}}),m.length>0&&(a.OR=m),await this.prisma.news.findMany({where:a,omit:{authorId:!0},include:{author:!0},orderBy:{updatedAt:s},skip:e,take:t})}async findById(e){return await this.prisma.news.findUnique({where:{id:e},omit:{authorId:!0},include:{author:!0}})}async findByAuthorId({authorId:e,pagination:{offset:t,limit:o},filter:{orderBy:i="desc",content:n,title:s}}){let a={authorId:e},m=[];return s&&m.push({title:{contains:s,mode:"insensitive"}}),n&&m.push({content:{contains:n,mode:"insensitive"}}),m.length>0&&(a.OR=m),await this.prisma.news.findMany({omit:{authorId:!0},where:a,orderBy:{updatedAt:i},skip:t,take:o})}async update(e){await this.prisma.news.update({where:{id:e.id},data:{title:e.title,content:e.content,imageUrl:e.imageUrl}})}async delete(e){await this.prisma.news.delete({where:{id:e}})}async count({filter:{authorId:e,content:t,title:o}}){let i={};e&&(i.authorId={contains:e,mode:"insensitive"});let n=[];return o&&n.push({title:{contains:o,mode:"insensitive"}}),t&&n.push({content:{contains:t,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.news.count({where:i})}};function yt(){return new xa(F)}var Ma=class{constructor(e){this.prisma=e}async create(e){await this.prisma.pendency.create({data:e})}async find({filter:{description:e,orderBy:t,title:o,status:i,userId:n},pagination:{limit:s,offset:a}}){let m={userId:n,AND:{status:{equals:i}}};e&&(m.description={contains:e,mode:"insensitive"});let p=[];return o&&p.push({title:{contains:o,mode:"insensitive"}}),p.length>0&&(m.OR=p),await this.prisma.pendency.findMany({where:m,orderBy:{updatedAt:t},include:{user:{omit:{passwordHash:!0}}},skip:a,take:s})}async findById(e){return await this.prisma.pendency.findFirst({where:{id:e},include:{user:{omit:{passwordHash:!0}}}})}async findByUserId({filter:{description:e,orderBy:t,title:o,status:i},pagination:{limit:n,offset:s},userId:a}){let m={userId:a,AND:{status:{equals:i}}},p=[];return e&&p.push({description:{contains:e,mode:"insensitive"}}),o&&p.push({title:{contains:o,mode:"insensitive"}}),p.length>0&&(m.OR=p),await this.prisma.pendency.findMany({where:m,orderBy:{updatedAt:t},include:{user:{omit:{passwordHash:!0}}},skip:s,take:n})}async update({id:e,...t}){await this.prisma.pendency.update({where:{id:e},data:t})}async deleteById(e){await this.prisma.pendency.delete({where:{id:e}})}async count({filter:{description:e,title:t,status:o,userId:i}}){let n={userId:i},s=[];return e&&s.push({description:{contains:e,mode:"insensitive"}}),t&&s.push({title:{contains:t,mode:"insensitive"}}),o&&s.push({status:{equals:o}}),s.length>0&&(n.OR=s),await this.prisma.pendency.count({where:n})}};function $t(){return new Ma(F)}var wa=class{constructor(e){this.prisma=e}async create(e){await this.prisma.user.create({data:e})}async update(e){await this.prisma.user.update({where:{id:e.id},data:{lattesUrl:e.lattesUrl??null,orcid:e.orcid??null,phone:e.phone??null,avatarUrl:e.avatarUrl??null,...e.role&&{role:e.role}}})}async deleteById(e){await this.prisma.user.delete({where:{id:e}})}async find({pagination:e,filter:{emailAddress:t,name:o,phone:i,lattesUrl:n,orcid:s,orderBy:a}}){let m={};return o&&(m.name={contains:o,mode:"insensitive"}),t&&(m.emailAddress={contains:t,mode:"insensitive"}),i&&(m.phone={contains:i,mode:"insensitive"}),n&&(m.lattesUrl={contains:n,mode:"insensitive"}),s&&(m.orcid={contains:s,mode:"insensitive"}),await this.prisma.user.findMany({where:m,omit:{passwordHash:!0},orderBy:{updatedAt:a},skip:e.offset,take:e.limit})}async count({filter:{emailAddress:e,name:t,phone:o,lattesUrl:i,orcid:n}}){let s={};return t&&(s.name={contains:t,mode:"insensitive"}),e&&(s.emailAddress={contains:e,mode:"insensitive"}),o&&(s.phone={contains:o,mode:"insensitive"}),i&&(s.lattesUrl={contains:i,mode:"insensitive"}),n&&(s.orcid={contains:n,mode:"insensitive"}),await this.prisma.user.count({where:s})}async findByEmail(e){return await this.prisma.user.findFirst({where:{emailAddress:e}})}async findById(e){return await this.prisma.user.findFirst({where:{id:e},omit:{passwordHash:!0}})}};function Ce(){return new wa(F)}import{compare as Nx,hash as Gx}from"bcryptjs";var va=class{constructor(e,t){this.hashFn=e;this.compareFn=t}async hash(e){return await this.hashFn(e,6)}async compare({password:e,hashedPassword:t}){return await this.compareFn(e,t)}};function Kl(){return new va(Gx,Nx)}import bR from"jsonwebtoken";var Ua=class{constructor(e,t){this.signFn=e;this.verifyFn=t}sign(e){try{return this.signFn(e,fe.JWT_SECRET,{expiresIn:"3d",subject:e.id})}catch{return null}}verify(e){try{return this.verifyFn(e,fe.JWT_SECRET)}catch{return null}}};function ja(){return new Ua(bR.sign,bR.verify)}function CR(){return{signUpController:new Ki(Ce(),Kl())}}function TR(){return{signInController:new zi(Ce(),Kl(),ja())}}function AR(){return{findAuthenticatedUserController:new Sa(Ce())}}function IR(){return{findAuthenticatedUserController:new Wi(yt())}}function SR(){return{findAuthenticatedUserCertificationsController:new Hi(Wt())}}function ER(){return{findAuthenticatedUserPendenciesController:new $i($t())}}var ka=class{constructor(e){this.jwtService=e}authenticated(e,t,o){let i=e.headers.authorization;if(!i?.startsWith("Bearer "))return t.status(401).json({message:"Token inv\xE1lido.",invalid:!0});let n=i.split(" ")[1];if(!n)return t.status(401).json({message:"Token n\xE3o fornecido."});try{let s=this.jwtService.verify(n);if(!s)return t.status(401).json({message:"Token inv\xE1lido.",invalid:!0});e.user=s,o()}catch(s){if(s instanceof Error)return t.status(401).json({message:s.message})}}isAdmin(e,t,o){let i=e.headers.authorization;if(!i?.startsWith("Bearer "))return t.status(401).json({message:"Token inv\xE1lido.",invalid:!0});let n=i.split(" ")[1];if(!n)return t.status(401).json({message:"Token n\xE3o fornecido."});try{let s=this.jwtService.verify(n);if(!s)return t.status(401).json({message:"Token inv\xE1lido.",invalid:!0});if(s.role!=="ADMIN")return t.status(401).json({message:"\xC9 necess\xE1rio ter permiss\xF5es de administrador."});e.user=s,o()}catch(s){if(s instanceof Error)return t.status(401).json({message:s.message})}}};function _(){return{authMiddleware:new ka(ja())}}var ft=_x(),{authMiddleware:Ni}=_();ft.post("/sign-up",async(r,e)=>{let{signUpController:t}=CR();await t.handle(r,e)});ft.post("/sign-in",async(r,e)=>{let{signInController:t}=TR();await t.handle(r,e)});ft.get("/user",(r,e,t)=>{Ni.authenticated(r,e,t)},async(r,e)=>{let{findAuthenticatedUserController:t}=AR();await t.handle(r,e)});ft.get("/user/news",(r,e,t)=>{Ni.authenticated(r,e,t)},async(r,e)=>{let{findAuthenticatedUserController:t}=IR();await t.handle(r,e)});ft.get("/admin",(r,e,t)=>{Ni.isAdmin(r,e,t)},(r,e)=>{e.status(200).json({success:!0})});ft.get("/certifications",(r,e,t)=>{Ni.authenticated(r,e,t)},async(r,e)=>{let{findAuthenticatedUserCertificationsController:t}=SR();await t.handle(r,e)});ft.get("/pendencies",(r,e,t)=>{Ni.authenticated(r,e,t)},async(r,e)=>{let{findAuthenticatedUserPendenciesController:t}=ER();await t.handle(r,e)});import{Router as Yx}from"express";import{extendZodWithOpenApi as Lx}from"@asteasolutions/zod-to-openapi";import st from"zod";var Hx=5,xR=1024,Wx=xR*xR,$x=Hx*Wx;Lx(st);var Vx=st.object({volumeNumber:st.coerce.number().int().positive("N\xFAmero do volume \xE9 obrigat\xF3rio."),year:st.coerce.number().int().positive("Ano \xE9 obrigat\xF3rio."),title:st.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),authorId:st.uuid("ID do autor deve ser um UUID v\xE1lido."),accessUrl:st.url().optional(),catalogSheetUrl:st.url().optional(),description:st.string().optional(),coverImage:st.any().refine(r=>!r||typeof r=="object"&&typeof r.mimetype=="string"&&r.mimetype.startsWith("image/")&&typeof r.size=="number"&&r.size<=$x,"A imagem da capa deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.")}),Fa=class{constructor(e,t){this.bookVolumeRepository=e;this.firebaseStorageService=t}async handle(e,t){let{volumeNumber:o,year:i,title:n,authorId:s,accessUrl:a,catalogSheetUrl:m,description:p,coverImage:f}=Vx.parse({...e.body,coverImage:e.files?.coverImage?.[0]}),I=await this.bookVolumeRepository.create({volumeNumber:o,year:i,title:n,authorId:s,accessUrl:a,catalogSheetUrl:m,description:p}),L=I.coverImageUrl;return L=await this.firebaseStorageService.uploadFile({file:f,folder:x.BOOK_VOLUME_COVER,id:I.id}),await this.bookVolumeRepository.update({id:I.id,coverImageUrl:L}),t.sendStatus(201)}};var Da=class{constructor(e){this.prisma=e}async create({volumeNumber:e,year:t,title:o,authorId:i,accessUrl:n,coverImageUrl:s,catalogSheetUrl:a,description:m}){return await this.prisma.bookVolume.create({data:{volumeNumber:e,year:t,title:o,authorId:i,accessUrl:n,coverImageUrl:s,catalogSheetUrl:a,description:m}})}async find({pagination:{offset:e,limit:t},filter:{title:o,author:i,description:n,orderBy:s}}){let a={},m=[];return o&&m.push({title:{contains:o,mode:"insensitive"}}),i&&m.push({author:{name:{contains:i,mode:"insensitive"}}}),n&&m.push({description:{contains:n,mode:"insensitive"}}),m.length>0&&(a.OR=m),await this.prisma.bookVolume.findMany({where:a,omit:{authorId:!0},include:{author:!0},orderBy:{updatedAt:s},skip:e,take:t})}async findById(e){return await this.prisma.bookVolume.findFirst({where:{id:e},omit:{authorId:!0},include:{author:!0}})}async update({id:e,volumeNumber:t,year:o,title:i,authorId:n,accessUrl:s,coverImageUrl:a,catalogSheetUrl:m,description:p}){await this.prisma.bookVolume.update({where:{id:e},data:{volumeNumber:t,year:o,title:i,authorId:n,accessUrl:s,coverImageUrl:a,catalogSheetUrl:m,description:p}})}async deleteById(e){await this.prisma.bookVolume.delete({where:{id:e}})}async count({filter:{title:e,author:t,description:o}}){let i={},n=[];return e&&n.push({title:{contains:e,mode:"insensitive"}}),t&&n.push({author:{name:{contains:t,mode:"insensitive"}}}),o&&n.push({description:{contains:o,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.bookVolume.count({where:i})}};function Kr(){return new Da(F)}import{getStorage as zx}from"firebase-admin/storage";import MR from"firebase-admin";var Jl=MR.initializeApp({credential:MR.credential.cert({clientEmail:fe.FIREBASE_CLIENT_EMAIL,privateKey:fe.FIREBASE_PRIVATE_KEY,projectId:fe.FIREBASE_PROJECT_ID,type:fe.FIREBASE_TYPE,privateKeyId:fe.FIREBASE_PRIVATE_KEY_ID,clientId:fe.FIREBASE_CLIENT_ID,authUri:fe.FIREBASE_AUTH_URI,tokenUri:fe.FIREBASE_TOKEN_URI,authProviderX509CertUrl:fe.FIREBASE_AUTH_PROVIDER_X509_CERT_URL,clientX509CertUrl:fe.FIREBASE_CLIENT_X509_CERT_URL}),storageBucket:fe.FIREBASE_BUCKET});Jl.name?console.log("\u{1F525} Firebase conectado com sucesso!"):console.error("\u274C Erro ao se conectar ao Firebase.");var Zx=zx(Jl),wR=Zx.bucket(fe.FIREBASE_BUCKET);import{randomUUID as Kx}from"crypto";var Jx=/https:\/\/storage\.googleapis\.com\/[^/]+\/(.+)$/,Oa=class{constructor(e){this.bucket=e}async uploadFile({file:e,folder:t,id:o}){let i=`${Kx()}-${e?.originalname}`,n=this.bucket.file(`${t}/${o}/${i}`);return await new Promise((s,a)=>{let m=n.createWriteStream({metadata:{contentType:e?.mimetype}});m.on("error",p=>{a(p)}),m.on("finish",async()=>{try{await n.makePublic();let p=`https://storage.googleapis.com/${this.bucket.name}/${n.name}`;s(p)}catch(p){a(p)}}),m.end(e.buffer)})}async updateFile({file:e,id:t,fileUrl:o,folder:i}){try{let n=this.getPath(o);if(!n)throw new Error("Arquivo n\xE3o encontrado.");let[s,a]=await Promise.all([this.bucket.file(n).delete(),this.uploadFile({file:e,id:t,folder:i})]);return a}catch{throw new Error("Erro ao atualizar o arquivo.")}}async deleteFile({fileUrl:e}){let t=this.getPath(e);if(!t)throw new Error("Arquivo n\xE3o encontrado.");try{await this.bucket.file(t).delete()}catch{throw new Error("Erro ao deletar o arquivo.")}}getPath(e){let t=e.match(Jx);return t?t[1]:null}};function M(){return new Oa(wR)}function vR(){return{createBookVolumeController:new Fa(Kr(),M())}}function UR(){return{findBookVolumesController:new Xi(Kr())}}function jR(){return{findBookVolumeByIdController:new Yi(Kr())}}function kR(){return{updateBookVolumeController:new Qi(Kr(),M())}}function FR(){return{deleteBookVolumeController:new Ji(Kr(),M())}}import DR from"multer";var N=DR({storage:DR.memoryStorage()});var cr=Yx(),{authMiddleware:Yl}=_();cr.post("/",(r,e,t)=>{Yl.isAdmin(r,e,t)},N.fields([{name:"authorImage",maxCount:1},{name:"coverImage",maxCount:1},{name:"catalogSheet",maxCount:1}]),async(r,e)=>{let{createBookVolumeController:t}=vR();await t.handle(r,e)});cr.get("/",async(r,e)=>{let{findBookVolumesController:t}=UR();await t.handle(r,e)});cr.get("/:id",async(r,e)=>{let{findBookVolumeByIdController:t}=jR();await t.handle(r,e)});cr.put("/:id",(r,e,t)=>{Yl.isAdmin(r,e,t)},N.fields([{name:"authorImage",maxCount:1},{name:"coverImage",maxCount:1},{name:"catalogSheet",maxCount:1}]),async(r,e)=>{let{updateBookVolumeController:t}=kR();await t.handle(r,e)});cr.delete("/:id",(r,e,t)=>{Yl.isAdmin(r,e,t)},async(r,e)=>{let{deleteBookVolumeController:t}=FR();await t.handle(r,e)});import{Router as Xx}from"express";function OR(){return{registerCertificationController:new io(Ce(),Wt(),M())}}function BR(){return{findCertificationsController:new ro(Wt())}}function qR(){return{findCertificationByIdController:new to(Wt())}}function NR(){return{updateCertificationController:new oo(Wt(),M())}}function GR(){return{deleteCertificationController:new eo(Wt(),M())}}var pr=Xx(),{authMiddleware:Xl}=_();pr.post("/:user_id",(r,e,t)=>{Xl.isAdmin(r,e,t)},N.single("certification"),async(r,e)=>{let{registerCertificationController:t}=OR();await t.handle(r,e)});pr.get("/",async(r,e)=>{let{findCertificationsController:t}=BR();await t.handle(r,e)});pr.get("/:id",async(r,e)=>{let{findCertificationByIdController:t}=qR();await t.handle(r,e)});pr.put("/:id",(r,e,t)=>{Xl.isAdmin(r,e,t)},N.single("certification"),async(r,e)=>{let{updateCertificationController:t}=NR();await t.handle(r,e)});pr.delete("/:id",(r,e,t)=>{Xl.isAdmin(r,e,t)},async(r,e)=>{let{deleteCertificationController:t}=GR();await t.handle(r,e)});import{Router as tM}from"express";import{extendZodWithOpenApi as Qx}from"@asteasolutions/zod-to-openapi";import eM from"zod";Qx(eM);var Ba=class{constructor(e){this.checkingAccountRepository=e}async handle(e,t){let o=await this.checkingAccountRepository.findLatestByType("EXCLUSIVE_REDECT_USE"),i=await this.checkingAccountRepository.findLatestByType("EVENTS"),n=await this.checkingAccountRepository.findLatestByType("COLLOQUIUM"),s=(o?.balanceInCents||0)+(i?.balanceInCents||0)+(n?.balanceInCents||0),a=s/100;return t.status(200).json({totalBalance:a,totalBalanceInCents:s,accounts:{exclusiveRedectUse:o?{id:o.id,balance:o.balanceInCents/100,balanceInCents:o.balanceInCents,updatedAt:o.updatedAt}:null,events:i?{id:i.id,balance:i.balanceInCents/100,balanceInCents:i.balanceInCents,updatedAt:i.updatedAt}:null,colloquium:n?{id:n.id,balance:n.balanceInCents/100,balanceInCents:n.balanceInCents,updatedAt:n.updatedAt}:null}})}};var qa=class{constructor(e){this.prisma=e}async create(e){await this.prisma.checkingAccount.create({data:e})}async update(e){await this.prisma.checkingAccount.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.checkingAccount.delete({where:{id:e}})}async find({pagination:{offset:e,limit:t},filter:{type:o,orderBy:i}}){let n={};return o&&(n.type=o),await this.prisma.checkingAccount.findMany({where:n,orderBy:{updatedAt:i},skip:e,take:t})}async findById(e){return await this.prisma.checkingAccount.findFirst({where:{id:e}})}async findLatestByType(e){return await this.prisma.checkingAccount.findFirst({where:{type:e},orderBy:{updatedAt:"desc"}})}async count({filter:{type:e}}){let t={};return e&&(t.type=e),await this.prisma.checkingAccount.count({where:t})}};function Vt(){return new qa(F)}function _R(){return{createCheckingAccountController:new ao(Vt())}}function LR(){return{findCheckingAccountsController:new po(Vt())}}function HR(){return{getTotalBalanceController:new Ba(Vt())}}function WR(){return{findLatestByTypeController:new lo(Vt())}}function $R(){return{findCheckingAccountByIdController:new co(Vt())}}function VR(){return{updateCheckingAccountController:new uo(Vt())}}function zR(){return{deleteCheckingAccountController:new mo(Vt())}}var ht=tM(),{authMiddleware:Ql}=_();ht.post("/",(r,e,t)=>{Ql.isAdmin(r,e,t)},async(r,e)=>{let{createCheckingAccountController:t}=_R();await t.handle(r,e)});ht.get("/",async(r,e)=>{let{findCheckingAccountsController:t}=LR();await t.handle(r,e)});ht.get("/total-balance",async(r,e)=>{let{getTotalBalanceController:t}=HR();await t.handle(r,e)});ht.get("/latest/:type",async(r,e)=>{let{findLatestByTypeController:t}=WR();await t.handle(r,e)});ht.get("/:id",async(r,e)=>{let{findCheckingAccountByIdController:t}=$R();await t.handle(r,e)});ht.put("/:id",(r,e,t)=>{Ql.isAdmin(r,e,t)},async(r,e)=>{let{updateCheckingAccountController:t}=VR();await t.handle(r,e)});ht.delete("/:id",(r,e,t)=>{Ql.isAdmin(r,e,t)},async(r,e)=>{let{deleteCheckingAccountController:t}=zR();await t.handle(r,e)});import{Router as aM}from"express";import{extendZodWithOpenApi as rM}from"@asteasolutions/zod-to-openapi";import ke from"zod";var iM=5,ZR=1024,oM=ZR*ZR,nM=iM*oM;rM(ke);var sM=ke.object({title:ke.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),coordinatorId:ke.string().uuid("Coordenador \xE9 obrigat\xF3rio."),email:ke.email("E-mail deve ser v\xE1lido."),location:ke.string().min(1,"Localiza\xE7\xE3o \xE9 obrigat\xF3ria."),scheduledAt:ke.coerce.date(),registrationLink:ke.url().optional(),description:ke.string().optional(),instructorIds:ke.transform(r=>typeof r=="string"?r.split(","):r).pipe(ke.array(ke.uuid())),image:ke.any().refine(r=>!r||typeof r=="object"&&typeof r.mimetype=="string"&&r.mimetype.startsWith("image/")&&typeof r.size=="number"&&r.size<=nM,"A imagem deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.")}),Na=class{constructor(e,t){this.courseRepository=e;this.firebaseStorageService=t}async handle(e,t){let{title:o,coordinatorId:i,email:n,location:s,scheduledAt:a,registrationLink:m,description:p,instructorIds:f,image:I}=sM.parse({...e.body,image:e.file}),L=await this.courseRepository.create({title:o,coordinatorId:i,email:n,location:s,scheduledAt:a,registrationLink:m||void 0,description:p,instructorIds:f}),ie=await this.firebaseStorageService.uploadFile({file:I,folder:x.COURSE,id:L.id});return await this.courseRepository.update({id:L.id,imageUrl:ie}),t.sendStatus(201)}};var Ga=class{constructor(e){this.prisma=e}async create({title:e,imageUrl:t,coordinatorId:o,email:i,instructorIds:n,scheduledAt:s,location:a,registrationLink:m,description:p}){return await this.prisma.course.create({data:{title:e,imageUrl:t,coordinatorId:o,email:i,scheduledAt:s,location:a,registrationLink:m,description:p,instructors:{connect:n?.map(f=>({id:f}))}}})}async find({pagination:{offset:e,limit:t},filter:{description:o,orderBy:i,title:n,coordinator:s}}){let a={},m=[];return n&&m.push({title:{contains:n,mode:"insensitive"}}),o&&m.push({description:{contains:o,mode:"insensitive"}}),s&&m.push({coordinator:{name:{contains:s,mode:"insensitive"}}}),m.length>0&&(a.OR=m),await this.prisma.course.findMany({where:a,include:{coordinator:{omit:{passwordHash:!0}},instructors:{omit:{passwordHash:!0}}},orderBy:{updatedAt:i},skip:e,take:t})}async findById(e){return await this.prisma.course.findFirst({where:{id:e},include:{coordinator:{omit:{passwordHash:!0}},instructors:{omit:{passwordHash:!0}}}})}async update({id:e,title:t,imageUrl:o,coordinatorId:i,email:n,instructorIds:s,scheduledAt:a,location:m,registrationLink:p,description:f}){s!==void 0&&await this.prisma.course.update({where:{id:e},data:{instructors:{set:[]}}}),await this.prisma.course.update({where:{id:e},data:{title:t,imageUrl:o,coordinatorId:i,email:n,scheduledAt:a,location:m,registrationLink:p,description:f,...s?.length>0&&{instructors:{connect:s.map(I=>({id:I}))}}}})}async deleteById(e){await this.prisma.course.delete({where:{id:e}})}async count({filter:{description:e,title:t,coordinator:o}}){let i={},n=[];return t&&n.push({title:{contains:t,mode:"insensitive"}}),e&&n.push({description:{contains:e,mode:"insensitive"}}),o&&n.push({coordinator:{name:{contains:o,mode:"insensitive"}}}),n.length>0&&(i.OR=n),await this.prisma.course.count({where:i})}};function Jr(){return new Ga(F)}function KR(){return{createCourseController:new Na(Jr(),M())}}function JR(){return{findCoursesController:new ho(Jr())}}function YR(){return{findCourseByIdController:new fo(Jr())}}function XR(){return{updateCourseController:new Ro(Jr(),M())}}function QR(){return{deleteCourseController:new yo(Jr(),M())}}var dr=aM(),{authMiddleware:eu}=_();dr.post("/",(r,e,t)=>{eu.isAdmin(r,e,t)},N.single("image"),async(r,e)=>{let{createCourseController:t}=KR();await t.handle(r,e)});dr.get("/",async(r,e)=>{let{findCoursesController:t}=JR();await t.handle(r,e)});dr.get("/:id",async(r,e)=>{let{findCourseByIdController:t}=YR();await t.handle(r,e)});dr.put("/:id",(r,e,t)=>{eu.isAdmin(r,e,t)},N.single("image"),async(r,e)=>{let{updateCourseController:t}=XR();await t.handle(r,e)});dr.delete("/:id",(r,e,t)=>{eu.isAdmin(r,e,t)},async(r,e)=>{let{deleteCourseController:t}=QR();await t.handle(r,e)});import{Router as dM}from"express";import{extendZodWithOpenApi as mM}from"@asteasolutions/zod-to-openapi";import Rt from"zod";var cM=1;mM(Rt);var pM=Rt.object({page:Rt.coerce.number().min(1).default(cM),limit:Rt.coerce.number().optional(),code:Rt.string().optional(),title:Rt.string().optional(),description:Rt.string().optional(),notes:Rt.string().optional(),orderBy:Rt.enum(["asc","desc"]).default("desc")}),_a=class{constructor(e){this.etpRepository=e}async handle(e,t){let{page:o,limit:i,...n}=pM.parse(e.query),s=i?i*o-i:void 0,[a,m]=await Promise.all([this.etpRepository.find({pagination:{offset:s,limit:i},filter:n}),this.etpRepository.count({filter:n})]),p=i?Math.max(Math.ceil(m/i),1):1;t.status(200).json({page:o,totalPages:p,offset:s,limit:i,etps:a})}};var La=class{constructor(e){this.prisma=e}async create(e){let{leaderId:t,deputyLeaderId:o,secretaryId:i,memberIds:n,...s}=e;await this.prisma.$transaction(async a=>{let m=await a.eTP.create({data:s});await a.eTPLeader.create({data:{etpId:m.id,researcherId:t}}),await a.eTPDeputy.create({data:{etpId:m.id,researcherId:o}}),await a.eTPSecretary.create({data:{etpId:m.id,researcherId:i}}),await a.eTP.update({where:{id:m.id},data:{members:{connect:n.map(p=>({id:p}))}}})})}async update(e){let{leaderId:t,deputyLeaderId:o,secretaryId:i,memberIds:n,...s}=e;await this.prisma.$transaction(async a=>{await a.eTP.update({where:{id:e.id},data:s}),await this.updateLeader(a,e.id,t),await this.updateDeputyLeader(a,e.id,o),await this.updateSecretary(a,e.id,i),await this.updateMembers(a,e.id,n)})}async updateLeader(e,t,o){o!==void 0&&(await e.eTPLeader.deleteMany({where:{etpId:t}}),o&&await e.eTPLeader.create({data:{etpId:t,researcherId:o}}))}async updateDeputyLeader(e,t,o){o!==void 0&&(await e.eTPDeputy.deleteMany({where:{etpId:t}}),o&&await e.eTPDeputy.create({data:{etpId:t,researcherId:o}}))}async updateSecretary(e,t,o){o!==void 0&&(await e.eTPSecretary.deleteMany({where:{etpId:t}}),o&&await e.eTPSecretary.create({data:{etpId:t,researcherId:o}}))}async updateMembers(e,t,o){o!==void 0&&await e.eTP.update({where:{id:t},data:{members:{set:o.map(i=>({id:i}))}}})}async deleteById(e){await this.prisma.eTP.delete({where:{id:e}})}async find({pagination:{offset:e,limit:t},filter:{code:o,title:i,description:n,notes:s,orderBy:a}}){let m={},p=[];return o&&p.push({code:{contains:o,mode:"insensitive"}}),i&&p.push({title:{contains:i,mode:"insensitive"}}),n&&p.push({description:{contains:n,mode:"insensitive"}}),s&&p.push({notes:{contains:s,mode:"insensitive"}}),p.length>0&&(m.OR=p),await this.prisma.eTP.findMany({where:m,include:{leader:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},deputyLeader:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},secretary:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},members:{include:{user:{omit:{passwordHash:!0}}}}},orderBy:{updatedAt:a},skip:e,take:t})}async findById(e){return await this.prisma.eTP.findFirst({where:{id:e},include:{leader:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},deputyLeader:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},secretary:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},members:{include:{user:{omit:{passwordHash:!0}}}}}})}async findByCode(e){return await this.prisma.eTP.findFirst({where:{code:e},include:{leader:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},deputyLeader:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},secretary:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},members:{include:{user:{omit:{passwordHash:!0}}}}}})}async count({filter:{code:e,title:t,description:o,notes:i}}){let n={},s=[];return e&&s.push({code:{contains:e,mode:"insensitive"}}),t&&s.push({title:{contains:t,mode:"insensitive"}}),o&&s.push({description:{contains:o,mode:"insensitive"}}),i&&s.push({notes:{contains:i,mode:"insensitive"}}),s.length>0&&(n.OR=s),await this.prisma.eTP.count({where:n})}};function Yr(){return new La(F)}function eP(){return{createETPController:new Po(Yr())}}function tP(){return{findETPsController:new _a(Yr())}}function rP(){return{findETPByIdController:new Co(Yr())}}function iP(){return{updateETPController:new Ao(Yr())}}function oP(){return{deleteETPController:new bo(Yr())}}var lr=dM(),{authMiddleware:tu}=_();lr.post("/",(r,e,t)=>{tu.isAdmin(r,e,t)},async(r,e)=>{let{createETPController:t}=eP();await t.handle(r,e)});lr.get("/",async(r,e)=>{let{findETPsController:t}=tP();await t.handle(r,e)});lr.get("/:id",async(r,e)=>{let{findETPByIdController:t}=rP();await t.handle(r,e)});lr.put("/:id",(r,e,t)=>{tu.isAdmin(r,e,t)},async(r,e)=>{let{updateETPController:t}=iP();await t.handle(r,e)});lr.delete("/:id",(r,e,t)=>{tu.isAdmin(r,e,t)},async(r,e)=>{let{deleteETPController:t}=oP();await t.handle(r,e)});import{Router as lM}from"express";var Ha=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.event.create({data:e})}async update(e){await this.prisma.event.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.event.delete({where:{id:e}})}async find({pagination:{offset:e,limit:t},filter:{title:o,status:i,format:n,orderBy:s}}){let a={},m=[];return i&&(a.status=i),n&&(a.format=n),o&&m.push({title:{contains:o,mode:"insensitive"}}),m.length>0&&(a.OR=m),await this.prisma.event.findMany({where:a,orderBy:{startDate:s},skip:e,take:t})}async findById(e){return await this.prisma.event.findFirst({where:{id:e}})}async count({filter:{title:e,status:t,format:o}}){let i={},n=[];return t&&(i.status=t),o&&(i.format=o),e&&n.push({title:{contains:e,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.event.count({where:i})}};function Xr(){return new Ha(F)}function nP(){return{createEventController:new So(Xr(),M())}}function sP(){return{findEventsController:new wo(Xr())}}function aP(){return{findEventByIdController:new xo(Xr())}}function mP(){return{updateEventController:new vo(Xr(),M())}}function cP(){return{deleteEventController:new Eo(Xr())}}var ur=lM(),{authMiddleware:ru}=_();ur.post("/",(r,e,t)=>{ru.isAdmin(r,e,t)},N.single("image"),async(r,e)=>{let{createEventController:t}=nP();await t.handle(r,e)});ur.get("/",async(r,e)=>{let{findEventsController:t}=sP();await t.handle(r,e)});ur.get("/:id",async(r,e)=>{let{findEventByIdController:t}=aP();await t.handle(r,e)});ur.put("/:id",(r,e,t)=>{ru.isAdmin(r,e,t)},N.single("image"),async(r,e)=>{let{updateEventController:t}=mP();await t.handle(r,e)});ur.delete("/:id",(r,e,t)=>{ru.isAdmin(r,e,t)},async(r,e)=>{let{deleteEventController:t}=cP();await t.handle(r,e)});import{Router as yM}from"express";import{extendZodWithOpenApi as uM}from"@asteasolutions/zod-to-openapi";import gM from"zod";uM(gM);var Wa=class{constructor(e){this.financialTransactionStatementRepository=e}async handle(e,t){let i=(await this.financialTransactionStatementRepository.find({pagination:{offset:0,limit:1},filter:{orderBy:"desc"}}))?.[0]??null;return t.status(200).json(i)}};var $a=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.financialTransactionStatement.create({data:e})}async update(e){await this.prisma.financialTransactionStatement.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.financialTransactionStatement.delete({where:{id:e}})}async find({pagination:{offset:e,limit:t},filter:{orderBy:o}}){let i={};return await this.prisma.financialTransactionStatement.findMany({where:i,orderBy:{updatedAt:o},skip:e,take:t})}async findById(e){return await this.prisma.financialTransactionStatement.findFirst({where:{id:e}})}async count(){return await this.prisma.financialTransactionStatement.count()}};function gr(){return new $a(F)}function pP(){return{createFinancialTransactionStatementController:new Uo(gr(),M())}}function dP(){return{findFinancialTransactionStatementsController:new Do(gr())}}function lP(){return{findLatestFinancialTransactionStatementController:new Wa(gr())}}function uP(){return{findFinancialTransactionStatementByIdController:new ko(gr())}}function gP(){return{updateFinancialTransactionStatementController:new Bo(gr(),M())}}function yP(){return{deleteFinancialTransactionStatementController:new jo(gr(),M())}}var zt=yM(),{authMiddleware:iu}=_();zt.post("/",(r,e,t)=>{iu.isAdmin(r,e,t)},N.single("document"),async(r,e)=>{let{createFinancialTransactionStatementController:t}=pP();await t.handle(r,e)});zt.get("/",async(r,e)=>{let{findFinancialTransactionStatementsController:t}=dP();await t.handle(r,e)});zt.get("/latest",async(r,e)=>{let{findLatestFinancialTransactionStatementController:t}=lP();await t.handle(r,e)});zt.get("/:id",async(r,e)=>{let{findFinancialTransactionStatementByIdController:t}=uP();await t.handle(r,e)});zt.put("/:id",(r,e,t)=>{iu.isAdmin(r,e,t)},N.single("document"),async(r,e)=>{let{updateFinancialTransactionStatementController:t}=gP();await t.handle(r,e)});zt.delete("/:id",(r,e,t)=>{iu.isAdmin(r,e,t)},async(r,e)=>{let{deleteFinancialTransactionStatementController:t}=yP();await t.handle(r,e)});import{Router as fM}from"express";var Va=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.inMemoriam.create({data:e})}async update(e){await this.prisma.inMemoriam.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.inMemoriam.delete({where:{id:e}})}async find({pagination:{offset:e,limit:t},filter:{name:o,biography:i,role:n,orderBy:s}}){let a={},m=[];return n&&(a.role=n),o&&m.push({name:{contains:o,mode:"insensitive"}}),i&&m.push({biography:{contains:i,mode:"insensitive"}}),m.length>0&&(a.OR=m),await this.prisma.inMemoriam.findMany({where:a,orderBy:{updatedAt:s},skip:e,take:t})}async findById(e){return await this.prisma.inMemoriam.findFirst({where:{id:e}})}async findByRole(e){return await this.prisma.inMemoriam.findMany({where:{role:e}})}async count({filter:{name:e,biography:t,role:o}}){let i={},n=[];return o&&(i.role=o),e&&n.push({name:{contains:e,mode:"insensitive"}}),t&&n.push({biography:{contains:t,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.inMemoriam.count({where:i})}};function yr(){return new Va(F)}function fP(){return{createInMemoriamController:new qo(yr(),M())}}function hP(){return{findInMemoriamsController:new Ho(yr())}}function RP(){return{findInMemoriamByIdController:new Go(yr())}}function PP(){return{findInMemoriamByRoleController:new Lo(yr())}}function bP(){return{updateInMemoriamController:new Wo(yr(),M())}}function CP(){return{deleteInMemoriamController:new No(yr(),M())}}var Zt=fM(),{authMiddleware:za}=_();Zt.post("/",(r,e,t)=>{za.isAdmin(r,e,t)},N.single("photo"),async(r,e)=>{let{createInMemoriamController:t}=fP();await t.handle(r,e)});Zt.get("/",async(r,e)=>{let{findInMemoriamsController:t}=hP();await t.handle(r,e)});Zt.get("/:id",async(r,e)=>{let{findInMemoriamByIdController:t}=RP();await t.handle(r,e)});Zt.get("/role/:role",(r,e,t)=>{za.isAdmin(r,e,t)},async(r,e)=>{let{findInMemoriamByRoleController:t}=PP();await t.handle(r,e)});Zt.put("/:id",(r,e,t)=>{za.isAdmin(r,e,t)},N.single("photo"),async(r,e)=>{let{updateInMemoriamController:t}=bP();await t.handle(r,e)});Zt.delete("/:id",(r,e,t)=>{za.isAdmin(r,e,t)},async(r,e)=>{let{deleteInMemoriamController:t}=CP();await t.handle(r,e)});import{Router as hM}from"express";var ou=hM();ou.get("/",(r,e)=>{e.status(200).json({message:"Rede CT"})});import{Router as TM}from"express";var Za=class{constructor(e){this.prisma=e}async create(e){await this.prisma.internationalScientificCongress.create({data:e})}async update(e){await this.prisma.internationalScientificCongress.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.internationalScientificCongress.delete({where:{id:e}})}async find({pagination:{offset:e,limit:t},filter:{title:o,edition:i,location:n,orderBy:s}}){let a={},m=[];return i&&m.push({edition:{equals:i}}),o&&m.push({title:{contains:o,mode:"insensitive"}}),n&&m.push({location:{contains:n,mode:"insensitive"}}),m.length>0&&(a.OR=m),await this.prisma.internationalScientificCongress.findMany({where:a,include:{partners:!0,galleries:!0},orderBy:{startDate:s},skip:e,take:t})}async findById(e){return await this.prisma.internationalScientificCongress.findFirst({where:{id:e},include:{partners:!0,galleries:!0}})}async findByEdition(e){return await this.prisma.internationalScientificCongress.findMany({where:{edition:e},include:{partners:!0,galleries:!0}})}async count({filter:{title:e,edition:t,location:o}}){let i={},n=[];return t&&n.push({edition:{equals:t}}),e&&n.push({title:{contains:e,mode:"insensitive"}}),o&&n.push({location:{contains:o,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.internationalScientificCongress.count({where:i})}};function Je(){return new Za(F)}function TP(){return{createInternationalScientificCongressController:new tn(Je())}}function AP(){return{findInternationalScientificCongressesController:new an(Je())}}function IP(){return{findInternationalScientificCongressByIdController:new nn(Je())}}function SP(){return{findInternationalScientificCongressByEditionController:new on(Je())}}function EP(){return{updateInternationalScientificCongressController:new mn(Je())}}function xP(){return{deleteInternationalScientificCongressController:new rn(Je())}}import{extendZodWithOpenApi as RM}from"@asteasolutions/zod-to-openapi";import nu from"zod";RM(nu);var PM=nu.object({id:nu.uuid()}),Ka=class{constructor(e){this.internationalScientificCongressGalleryRepository=e}async handle(e,t){let{id:o}=PM.parse({id:e.params.id}),i=await this.internationalScientificCongressGalleryRepository.findById(o);if(!i)throw new c("A imagem da galeria n\xE3o existe.");return t.status(200).json(i)}};var Ja=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.internationalScientificCongressGalleryItem.create({data:e})}async update(e){await this.prisma.internationalScientificCongressGalleryItem.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.internationalScientificCongressGalleryItem.delete({where:{id:e}})}async findByCongressId({pagination:{offset:e,limit:t},filter:{congressId:o,caption:i}}){let n={congressId:o};return i&&(n.caption={contains:i,mode:"insensitive"}),await this.prisma.internationalScientificCongressGalleryItem.findMany({where:n,skip:e,take:t})}async findById(e){return await this.prisma.internationalScientificCongressGalleryItem.findFirst({where:{id:e}})}async count({filter:{congressId:e,caption:t}}){let o={congressId:e};return t&&(o.caption={contains:t,mode:"insensitive"}),await this.prisma.internationalScientificCongressGalleryItem.count({where:o})}};function Qr(){return new Ja(F)}function MP(){return{createInternationalScientificCongressGalleryController:new $o(Qr(),Je(),M())}}function wP(){return{findInternationalScientificCongressGalleriesByCongressIdController:new Zo(Qr())}}function vP(){return{findInternationalScientificCongressGalleryByIdController:new Ka(Qr())}}function UP(){return{updateInternationalScientificCongressGalleryController:new Ko(Qr(),M())}}function jP(){return{deleteInternationalScientificCongressGalleryController:new Vo(Qr())}}import{extendZodWithOpenApi as bM}from"@asteasolutions/zod-to-openapi";import su from"zod";bM(su);var CM=su.object({id:su.uuid()}),Ya=class{constructor(e){this.internationalScientificCongressPartnerRepository=e}async handle(e,t){let{id:o}=CM.parse({id:e.params.id}),i=await this.internationalScientificCongressPartnerRepository.findById(o);if(!i)throw new c("O parceiro n\xE3o existe.");return t.status(200).json(i)}};var Xa=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.internationalScientificCongressPartner.create({data:e})}async update(e){await this.prisma.internationalScientificCongressPartner.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.internationalScientificCongressPartner.delete({where:{id:e}})}async findByCongressId({pagination:{offset:e,limit:t},filter:{congressId:o,name:i}}){let n={congressId:o};return i&&(n.name={contains:i,mode:"insensitive"}),await this.prisma.internationalScientificCongressPartner.findMany({where:n,skip:e,take:t})}async findById(e){return await this.prisma.internationalScientificCongressPartner.findFirst({where:{id:e}})}async count(e){let t={congressId:e.filter.congressId};return e.filter.name&&(t.name={contains:e.filter.name,mode:"insensitive"}),await this.prisma.internationalScientificCongressPartner.count({where:t})}};function ei(){return new Xa(F)}function kP(){return{createInternationalScientificCongressPartnerController:new Jo(ei(),Je(),M())}}function FP(){return{findInternationalScientificCongressPartnersByCongressIdController:new Qo(ei())}}function DP(){return{findInternationalScientificCongressPartnerByIdController:new Ya(ei())}}function OP(){return{updateInternationalScientificCongressPartnerController:new en(ei(),M())}}function BP(){return{deleteInternationalScientificCongressPartnerController:new Yo(ei())}}var he=TM(),{authMiddleware:Pt}=_();he.post("/",(r,e,t)=>{Pt.isAdmin(r,e,t)},async(r,e)=>{let{createInternationalScientificCongressController:t}=TP();await t.handle(r,e)});he.get("/",async(r,e)=>{let{findInternationalScientificCongressesController:t}=AP();await t.handle(r,e)});he.get("/:id",async(r,e)=>{let{findInternationalScientificCongressByIdController:t}=IP();await t.handle(r,e)});he.get("/edition/:edition",async(r,e)=>{let{findInternationalScientificCongressByEditionController:t}=SP();await t.handle(r,e)});he.put("/:id",(r,e,t)=>{Pt.isAdmin(r,e,t)},async(r,e)=>{let{updateInternationalScientificCongressController:t}=EP();await t.handle(r,e)});he.delete("/:id",(r,e,t)=>{Pt.isAdmin(r,e,t)},async(r,e)=>{let{deleteInternationalScientificCongressController:t}=xP();await t.handle(r,e)});he.post("/:id/gallery",(r,e,t)=>{Pt.isAdmin(r,e,t)},N.single("image"),async(r,e)=>{let{createInternationalScientificCongressGalleryController:t}=MP();await t.handle(r,e)});he.get("/:id/gallery",async(r,e)=>{let{findInternationalScientificCongressGalleriesByCongressIdController:t}=wP();await t.handle(r,e)});he.get("/gallery/:id",async(r,e)=>{let{findInternationalScientificCongressGalleryByIdController:t}=vP();await t.handle(r,e)});he.put("/gallery/:id",(r,e,t)=>{Pt.isAdmin(r,e,t)},N.single("image"),async(r,e)=>{let{updateInternationalScientificCongressGalleryController:t}=UP();await t.handle(r,e)});he.delete("/gallery/:id",(r,e,t)=>{Pt.isAdmin(r,e,t)},async(r,e)=>{let{deleteInternationalScientificCongressGalleryController:t}=jP();await t.handle(r,e)});he.post("/:id/partner",(r,e,t)=>{Pt.isAdmin(r,e,t)},N.single("logo"),async(r,e)=>{let{createInternationalScientificCongressPartnerController:t}=kP();await t.handle(r,e)});he.get("/:id/partner",async(r,e)=>{let{findInternationalScientificCongressPartnersByCongressIdController:t}=FP();await t.handle(r,e)});he.get("/partner/:id",async(r,e)=>{let{findInternationalScientificCongressPartnerByIdController:t}=DP();await t.handle(r,e)});he.put("/partner/:id",(r,e,t)=>{Pt.isAdmin(r,e,t)},N.single("logo"),async(r,e)=>{let{updateInternationalScientificCongressPartnerController:t}=OP();await t.handle(r,e)});he.delete("/partner/:id",(r,e,t)=>{Pt.isAdmin(r,e,t)},async(r,e)=>{let{deleteInternationalScientificCongressPartnerController:t}=BP();await t.handle(r,e)});import{Router as EM}from"express";import{extendZodWithOpenApi as AM}from"@asteasolutions/zod-to-openapi";import fr from"zod";var IM=1;AM(fr);var SM=fr.object({page:fr.coerce.number().min(1).default(IM),limit:fr.coerce.number().optional(),title:fr.string().optional(),country:fr.string().optional(),orderBy:fr.enum(["asc","desc"]).default("desc")}),Qa=class{constructor(e){this.lawRepository=e}async handle(e,t){let{page:o,limit:i,...n}=SM.parse(e.query),s=i?i*o-i:void 0,[a,m]=await Promise.all([this.lawRepository.find({pagination:{offset:s,limit:i},filter:n}),this.lawRepository.count({filter:n})]),p=i?Math.max(Math.ceil(m/i),1):1;t.status(200).json({page:o,totalPages:p,offset:s,limit:i,laws:a})}};var em=class{constructor(e){this.prisma=e}async create(e){await this.prisma.law.create({data:{...e}})}async update(e){let{id:t,...o}=e;await this.prisma.law.update({where:{id:t},data:o})}async deleteById(e){await this.prisma.law.delete({where:{id:e}})}async find({pagination:{offset:e,limit:t},filter:{title:o,country:i,orderBy:n}}){let s={};return o&&(s.title={contains:o,mode:"insensitive"}),i&&(s.country={contains:i,mode:"insensitive"}),await this.prisma.law.findMany({where:s,orderBy:{updatedAt:n??"desc"},skip:e,take:t})}async findById(e){return await this.prisma.law.findFirst({where:{id:e}})}async count({filter:{title:e,country:t}}){let o={};return e&&(o.title={contains:e,mode:"insensitive"}),t&&(o.country={contains:t,mode:"insensitive"}),await this.prisma.law.count({where:o})}};function ti(){return new em(F)}function qP(){return{createLawController:new cn(ti())}}function NP(){return{findLawsController:new Qa(ti())}}function GP(){return{findLawByIdController:new dn(ti())}}function _P(){return{updateLawController:new un(ti())}}function LP(){return{deleteLawController:new pn(ti())}}var hr=EM(),{authMiddleware:au}=_();hr.post("/",(r,e,t)=>{au.isAdmin(r,e,t)},async(r,e)=>{let{createLawController:t}=qP();await t.handle(r,e)});hr.get("/",async(r,e)=>{let{findLawsController:t}=NP();await t.handle(r,e)});hr.get("/:id",async(r,e)=>{let{findLawByIdController:t}=GP();await t.handle(r,e)});hr.put("/:id",(r,e,t)=>{au.isAdmin(r,e,t)},async(r,e)=>{let{updateLawController:t}=_P();await t.handle(r,e)});hr.delete("/:id",(r,e,t)=>{au.isAdmin(r,e,t)},async(r,e)=>{let{deleteLawController:t}=LP();await t.handle(r,e)});import{Router as vM}from"express";import{extendZodWithOpenApi as xM}from"@asteasolutions/zod-to-openapi";import ri from"zod";var MM=1;xM(ri);var wM=ri.object({page:ri.coerce.number().min(1).default(MM),limit:ri.coerce.number().optional(),role:ri.string().optional(),orderBy:ri.enum(["asc","desc"]).default("desc")}),tm=class{constructor(e){this.legitimatorCommitteeMemberRepository=e}async handle(e,t){let{page:o,limit:i,...n}=wM.parse(e.query),s=i?i*o-i:void 0,[a,m]=await Promise.all([this.legitimatorCommitteeMemberRepository.find({pagination:{offset:s,limit:i},filter:n}),this.legitimatorCommitteeMemberRepository.count({filter:n})]),p=i?Math.max(Math.ceil(m/i),1):1;t.status(200).json({page:o,totalPages:p,offset:s,limit:i,members:a})}};var rm=class{constructor(e){this.prisma=e}async create(e){await this.prisma.legitimatorCommitteeMember.create({data:{...e,order:e.order??0}})}async update(e){let{id:t,...o}=e;await this.prisma.legitimatorCommitteeMember.update({where:{id:t},data:o})}async deleteById(e){await this.prisma.legitimatorCommitteeMember.delete({where:{id:e}})}async find({pagination:{offset:e,limit:t},filter:{role:o,orderBy:i}}){let n={};return o&&(n.role={contains:o,mode:"insensitive"}),await this.prisma.legitimatorCommitteeMember.findMany({where:n,include:{user:{omit:{passwordHash:!0}}},orderBy:{updatedAt:i},skip:e,take:t})}async findById(e){return await this.prisma.legitimatorCommitteeMember.findFirst({where:{id:e},include:{user:{omit:{passwordHash:!0}}}})}async count({filter:{role:e}}){let t={};return e&&(t.role={contains:e,mode:"insensitive"}),await this.prisma.legitimatorCommitteeMember.count({where:t})}};function ii(){return new rm(F)}function HP(){return{createLegitimatorCommitteeMemberController:new gn(ii())}}function WP(){return{findLegitimatorCommitteeMembersController:new tm(ii())}}function $P(){return{findLegitimatorCommitteeMemberByIdController:new fn(ii())}}function VP(){return{updateLegitimatorCommitteeMemberController:new Rn(ii())}}function zP(){return{deleteLegitimatorCommitteeMemberController:new yn(ii())}}var Rr=vM(),{authMiddleware:mu}=_();Rr.post("/",(r,e,t)=>{mu.isAdmin(r,e,t)},async(r,e)=>{let{createLegitimatorCommitteeMemberController:t}=HP();await t.handle(r,e)});Rr.get("/",async(r,e)=>{let{findLegitimatorCommitteeMembersController:t}=WP();await t.handle(r,e)});Rr.get("/:id",async(r,e)=>{let{findLegitimatorCommitteeMemberByIdController:t}=$P();await t.handle(r,e)});Rr.put("/:id",(r,e,t)=>{mu.isAdmin(r,e,t)},async(r,e)=>{let{updateLegitimatorCommitteeMemberController:t}=VP();await t.handle(r,e)});Rr.delete("/:id",(r,e,t)=>{mu.isAdmin(r,e,t)},async(r,e)=>{let{deleteLegitimatorCommitteeMemberController:t}=zP();await t.handle(r,e)});import{Router as FM}from"express";import{extendZodWithOpenApi as UM}from"@asteasolutions/zod-to-openapi";import Pr from"zod";var jM=1;UM(Pr);var kM=Pr.object({page:Pr.coerce.number().min(1).default(jM),limit:Pr.coerce.number().optional(),name:Pr.string().optional(),description:Pr.string().optional(),orderBy:Pr.enum(["asc","desc"]).default("desc")}),im=class{constructor(e){this.managementTeamRepository=e}async handle(e,t){let{page:o,limit:i,...n}=kM.parse(e.query),s=i?i*o-i:void 0,[a,m]=await Promise.all([this.managementTeamRepository.find({pagination:{offset:s,limit:i},filter:n}),this.managementTeamRepository.count({filter:n})]),p=i?Math.max(Math.ceil(m/i),1):1;t.status(200).json({page:o,totalPages:p,offset:s,limit:i,teams:a})}};var om=class{constructor(e){this.prisma=e}async create(e){let{members:t,...o}=e;await this.prisma.$transaction(async i=>{let n=await i.managementTeam.create({data:o});return await i.managementTeamMember.createMany({data:t.map(({userId:s,role:a,order:m})=>({teamId:n.id,userId:s,role:a,order:m??0}))}),n})}async update(e){let{members:t,...o}=e;await this.prisma.$transaction(async i=>{let n=await i.managementTeam.update({where:{id:e.id},data:o});return t!==void 0&&(await i.managementTeamMember.deleteMany({where:{teamId:e.id}}),t.length>0&&await i.managementTeamMember.createMany({data:t.map(({userId:s,role:a,order:m})=>({teamId:e.id,userId:s,role:a,order:m??0}))})),n})}async deleteById(e){await this.prisma.managementTeam.delete({where:{id:e}})}async find({filter:{name:e,description:t,orderBy:o},pagination:{offset:i,limit:n}}){let s={},a=[];return e&&a.push({name:{contains:e,mode:"insensitive"}}),t&&a.push({description:{contains:t,mode:"insensitive"}}),a.length>0&&(s.OR=a),await this.prisma.managementTeam.findMany({where:s,include:{members:{include:{user:{omit:{passwordHash:!0}}},orderBy:{order:"asc"}}},orderBy:{updatedAt:o},skip:i,take:n})}async findById(e){return await this.prisma.managementTeam.findFirst({where:{id:e},include:{members:{include:{user:{omit:{passwordHash:!0}}},orderBy:{order:"asc"}}}})}async findByName(e){return await this.prisma.managementTeam.findFirst({where:{name:e},include:{members:{include:{user:{omit:{passwordHash:!0}}},orderBy:{order:"asc"}}}})}async count({filter:{name:e,description:t}}){let o={},i=[];return e&&i.push({name:{contains:e,mode:"insensitive"}}),t&&i.push({description:{contains:t,mode:"insensitive"}}),i.length>0&&(o.OR=i),await this.prisma.managementTeam.count({where:o})}};function oi(){return new om(F)}function ZP(){return{createManagementTeamController:new Pn(oi())}}function KP(){return{findManagementTeamsController:new im(oi())}}function JP(){return{findManagementTeamByIdController:new Cn(oi())}}function YP(){return{updateManagementTeamController:new An(oi())}}function XP(){return{deleteManagementTeamController:new bn(oi())}}var br=FM(),{authMiddleware:cu}=_();br.post("/",(r,e,t)=>{cu.isAdmin(r,e,t)},async(r,e)=>{let{createManagementTeamController:t}=ZP();await t.handle(r,e)});br.get("/",async(r,e)=>{let{findManagementTeamsController:t}=KP();await t.handle(r,e)});br.get("/:id",async(r,e)=>{let{findManagementTeamByIdController:t}=JP();await t.handle(r,e)});br.put("/:id",(r,e,t)=>{cu.isAdmin(r,e,t)},async(r,e)=>{let{updateManagementTeamController:t}=YP();await t.handle(r,e)});br.delete("/:id",(r,e,t)=>{cu.isAdmin(r,e,t)},async(r,e)=>{let{deleteManagementTeamController:t}=XP();await t.handle(r,e)});import{Router as BM}from"express";var nm=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.meeting.create({data:e})}async update(e){await this.prisma.meeting.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.meeting.delete({where:{id:e}})}async find({pagination:{offset:e,limit:t},filter:{title:o,format:i,status:n,orderBy:s}}){let a={},m=[];return i&&(a.format=i),n&&(a.status=n),o&&m.push({title:{contains:o,mode:"insensitive"}}),m.length>0&&(a.OR=m),await this.prisma.meeting.findMany({where:a,include:{minutes:!0},orderBy:{scheduledAt:s},skip:e,take:t})}async findById(e){return await this.prisma.meeting.findFirst({where:{id:e},include:{minutes:!0}})}async findByStatus(e){return await this.prisma.meeting.findMany({where:{status:e},include:{minutes:!0}})}async count({filter:{title:e,format:t,status:o}}){let i={},n=[];return t&&(i.format=t),o&&(i.status=o),e&&n.push({title:{contains:e,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.meeting.count({where:i})}};function bt(){return new nm(F)}function QP(){return{createMeetingController:new xn(bt())}}function eb(){return{findMeetingsController:new jn(bt())}}function tb(){return{findMeetingByIdController:new wn(bt())}}function rb(){return{findMeetingByStatusController:new Un(bt())}}function ib(){return{updateMeetingController:new kn(bt())}}function ob(){return{deleteMeetingController:new Mn(bt())}}import{extendZodWithOpenApi as DM}from"@asteasolutions/zod-to-openapi";import pu from"zod";DM(pu);var OM=pu.object({id:pu.uuid()}),sm=class{constructor(e,t){this.meetingMinuteRepository=e;this.firebaseStorageService=t}async handle(e,t){let{id:o}=OM.parse(e.params),i=await this.meetingMinuteRepository.findByMeetingId(o);if(!i)throw new c("A ata n\xE3o existe para esta reuni\xE3o.");return i.documentUrl&&await this.firebaseStorageService.deleteFile({fileUrl:i.documentUrl}),await this.meetingMinuteRepository.deleteByMeetingId(i.id),t.sendStatus(200)}};var am=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.meetingMinute.create({data:e,include:{meeting:!0}})}async update(e){await this.prisma.meetingMinute.update({where:{id:e.id},data:e})}async deleteByMeetingId(e){await this.prisma.meetingMinute.delete({where:{id:e}})}async findByMeetingId(e){return await this.prisma.meetingMinute.findFirst({where:{meetingId:e},include:{meeting:!0}})}};function Gi(){return new am(F)}function nb(){return{createMeetingMinuteController:new In(Gi(),bt(),M())}}function sb(){return{findMeetingMinuteByMeetingIdController:new Sn(Gi())}}function ab(){return{updateMeetingMinuteByMeetingIdController:new En(Gi(),M())}}function mb(){return{deleteMeetingMinuteByMeetingIdController:new sm(Gi(),M())}}var Ne=BM(),{authMiddleware:ni}=_();Ne.post("/",(r,e,t)=>{ni.isAdmin(r,e,t)},async(r,e)=>{let{createMeetingController:t}=QP();await t.handle(r,e)});Ne.get("/",async(r,e)=>{let{findMeetingsController:t}=eb();await t.handle(r,e)});Ne.get("/:id",async(r,e)=>{let{findMeetingByIdController:t}=tb();await t.handle(r,e)});Ne.get("/status/:status",async(r,e)=>{let{findMeetingByStatusController:t}=rb();await t.handle(r,e)});Ne.put("/:id",(r,e,t)=>{ni.isAdmin(r,e,t)},async(r,e)=>{let{updateMeetingController:t}=ib();await t.handle(r,e)});Ne.delete("/:id",(r,e,t)=>{ni.isAdmin(r,e,t)},async(r,e)=>{let{deleteMeetingController:t}=ob();await t.handle(r,e)});Ne.post("/:id/minute",(r,e,t)=>{ni.isAdmin(r,e,t)},N.single("document"),async(r,e)=>{let{createMeetingMinuteController:t}=nb();await t.handle(r,e)});Ne.get("/:id/minute",async(r,e)=>{let{findMeetingMinuteByMeetingIdController:t}=sb();await t.handle(r,e)});Ne.put("/:id/minute",(r,e,t)=>{ni.isAdmin(r,e,t)},N.single("document"),async(r,e)=>{let{updateMeetingMinuteByMeetingIdController:t}=ab();await t.handle(r,e)});Ne.delete("/:id/minute",(r,e,t)=>{ni.isAdmin(r,e,t)},async(r,e)=>{let{deleteMeetingMinuteByMeetingIdController:t}=mb();await t.handle(r,e)});import{Router as qM}from"express";var mm=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.museum.create({data:e})}async update(e){await this.prisma.museum.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.museum.delete({where:{id:e}})}async find({pagination:e,filter:{name:t,city:o,state:i,country:n,orderBy:s}}){let a={},m=[];return t&&m.push({name:{contains:t,mode:"insensitive"}}),o&&m.push({city:{contains:o,mode:"insensitive"}}),i&&m.push({state:{contains:i,mode:"insensitive"}}),n&&m.push({country:{contains:n,mode:"insensitive"}}),m.length>0&&(a.OR=m),await this.prisma.museum.findMany({where:a,orderBy:{updatedAt:s},skip:e?.offset,take:e?.limit})}async findById(e){return await this.prisma.museum.findFirst({where:{id:e}})}async count({filter:{name:e,city:t,state:o,country:i}}){let n={},s=[];return e&&s.push({name:{contains:e,mode:"insensitive"}}),t&&s.push({city:{contains:t,mode:"insensitive"}}),o&&s.push({state:{contains:o,mode:"insensitive"}}),i&&s.push({country:{contains:i,mode:"insensitive"}}),s.length>0&&(n.OR=s),await this.prisma.museum.count({where:n})}};function si(){return new mm(F)}function cb(){return{createMuseumController:new Fn(si(),M())}}function pb(){return{findMuseumsController:new qn(si())}}function db(){return{findMuseumByIdController:new On(si())}}function lb(){return{updateMuseumController:new Nn(si(),M())}}function ub(){return{deleteMuseumController:new Dn(si(),M())}}var Cr=qM(),{authMiddleware:du}=_();Cr.post("/",(r,e,t)=>{du.isAdmin(r,e,t)},N.single("logo"),async(r,e)=>{let{createMuseumController:t}=cb();await t.handle(r,e)});Cr.get("/",async(r,e)=>{let{findMuseumsController:t}=pb();await t.handle(r,e)});Cr.get("/:id",async(r,e)=>{let{findMuseumByIdController:t}=db();await t.handle(r,e)});Cr.put("/:id",(r,e,t)=>{du.isAdmin(r,e,t)},N.single("logo"),async(r,e)=>{let{updateMuseumController:t}=lb();await t.handle(r,e)});Cr.delete("/:id",(r,e,t)=>{du.isAdmin(r,e,t)},async(r,e)=>{let{deleteMuseumController:t}=ub();await t.handle(r,e)});import{Router as VM}from"express";import{extendZodWithOpenApi as NM}from"@asteasolutions/zod-to-openapi";import lu from"zod";NM(lu);var GM=lu.object({id:lu.string()}),cm=class{constructor(e,t){this.newsRepository=e;this.firebaseStorageService=t}async handle(e,t){let{id:o}=GM.parse(e.params),i=e.user.id,n=await this.newsRepository.findById(o);if(!n)throw new c("Not\xEDcia n\xE3o encontrada.");if(n.author.id!==i)throw new Fe("Sem permiss\xE3o.");await Promise.all([this.newsRepository.delete(o),this.firebaseStorageService.deleteFile({fileUrl:n.imageUrl})]),t.sendStatus(200)}};import{extendZodWithOpenApi as _M}from"@asteasolutions/zod-to-openapi";import ai from"zod";var LM=5,gb=1024,HM=gb*gb,WM=LM*HM;_M(ai);var $M=ai.object({id:ai.string(),title:ai.string().min(1),content:ai.string().min(1),image:ai.any().optional().refine(r=>!r||typeof r=="object"&&typeof r.mimetype=="string"&&r.mimetype.startsWith("image/")&&typeof r.size=="number"&&r.size<=WM,"A imagem deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.")}),pm=class{constructor(e,t){this.newsRepository=e;this.firebaseStorageService=t}async handle(e,t){let{id:o,title:i,content:n,image:s}=$M.parse({id:e.params.id,image:e.file,...e.body}),a=await this.newsRepository.findById(o);if(!a)throw new c("Not\xEDcia n\xE3o encontrada.");let m=e.user.id;if(a.author.id!==m)throw new Fe("Sem permiss\xE3o.");let p=a.imageUrl||"";s&&a.imageUrl&&(p=await this.firebaseStorageService.updateFile({file:s,folder:x.NEWS,id:o,fileUrl:a.imageUrl}));let f=await this.newsRepository.update({id:o,title:i,content:n,imageUrl:p});t.status(200).json(f)}};function yb(){return{createNewsController:new Gn(yt(),M())}}function fb(){return{findAllNewsController:new Hn(yt())}}function hb(){return{findNewsByIdController:new Ln(yt())}}function Rb(){return{findNewsByAuthorIdController:new _n(yt())}}function Pb(){return{updateNewsController:new pm(yt(),M())}}function bb(){return{deleteNewsController:new cm(yt(),M())}}var Kt=VM(),{authMiddleware:uu}=_();Kt.post("/",(r,e,t)=>{uu.authenticated(r,e,t)},N.single("image"),async(r,e)=>{let{createNewsController:t}=yb();await t.handle(r,e)});Kt.get("/",async(r,e)=>{let{findAllNewsController:t}=fb();await t.handle(r,e)});Kt.get("/:id",async(r,e)=>{let{findNewsByIdController:t}=hb();await t.handle(r,e)});Kt.get("/author/:id",async(r,e)=>{let{findNewsByAuthorIdController:t}=Rb();await t.handle(r,e)});Kt.put("/:id",(r,e,t)=>{uu.authenticated(r,e,t)},N.single("image"),async(r,e)=>{let{updateNewsController:t}=Pb();await t.handle(r,e)});Kt.delete("/:id",(r,e,t)=>{uu.authenticated(r,e,t)},async(r,e)=>{let{deleteNewsController:t}=bb();await t.handle(r,e)});import{Router as zM}from"express";var dm=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.partner.create({data:e})}async update(e){await this.prisma.partner.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.partner.delete({where:{id:e}})}async find({pagination:{offset:e,limit:t},filter:{name:o,description:i,category:n,isActive:s,orderBy:a}}){let m={},p=[];return s!==void 0&&(m.isActive=s),o&&p.push({name:{contains:o,mode:"insensitive"}}),i&&p.push({description:{contains:i,mode:"insensitive"}}),n&&p.push({category:{contains:n,mode:"insensitive"}}),p.length>0&&(m.OR=p),await this.prisma.partner.findMany({where:m,orderBy:{updatedAt:a},skip:e,take:t})}async findById(e){return await this.prisma.partner.findFirst({where:{id:e}})}async count({filter:{name:e,description:t,category:o,isActive:i}}){let n={},s=[];return i!==void 0&&(n.isActive=i),e&&s.push({name:{contains:e,mode:"insensitive"}}),t&&s.push({description:{contains:t,mode:"insensitive"}}),o&&s.push({category:{contains:o,mode:"insensitive"}}),s.length>0&&(n.OR=s),await this.prisma.partner.count({where:n})}};function mi(){return new dm(F)}function Cb(){return{createPartnerController:new Wn(mi(),M())}}function Tb(){return{findPartnersController:new Zn(mi())}}function Ab(){return{findPartnerByIdController:new Vn(mi())}}function Ib(){return{updatePartnerController:new Kn(mi(),M())}}function Sb(){return{deletePartnerController:new $n(mi(),M())}}var Tr=zM(),{authMiddleware:gu}=_();Tr.post("/",(r,e,t)=>{gu.isAdmin(r,e,t)},N.single("logo"),async(r,e)=>{let{createPartnerController:t}=Cb();await t.handle(r,e)});Tr.get("/",async(r,e)=>{let{findPartnersController:t}=Tb();await t.handle(r,e)});Tr.get("/:id",async(r,e)=>{let{findPartnerByIdController:t}=Ab();await t.handle(r,e)});Tr.put("/:id",(r,e,t)=>{gu.isAdmin(r,e,t)},N.single("logo"),async(r,e)=>{let{updatePartnerController:t}=Ib();await t.handle(r,e)});Tr.delete("/:id",(r,e,t)=>{gu.isAdmin(r,e,t)},async(r,e)=>{let{deletePartnerController:t}=Sb();await t.handle(r,e)});import{Router as ZM}from"express";function Eb(){return{createPendencyController:new Jn(Ce(),$t(),M())}}function xb(){return{findPendenciesController:new Xn($t())}}function Mb(){return{findPendencyByIdController:new Qn($t())}}function wb(){return{updatePendencyController:new es($t(),M())}}function vb(){return{deletePendencyController:new Yn($t(),M())}}var Ar=ZM(),{authMiddleware:lm}=_();Ar.post("/:id",(r,e,t)=>{lm.isAdmin(r,e,t)},N.single("document"),async(r,e)=>{let{createPendencyController:t}=Eb();await t.handle(r,e)});Ar.get("/",(r,e,t)=>{lm.authenticated(r,e,t)},async(r,e)=>{let{findPendenciesController:t}=xb();await t.handle(r,e)});Ar.get("/:id",async(r,e)=>{let{findPendencyByIdController:t}=Mb();await t.handle(r,e)});Ar.put("/:id",(r,e,t)=>{lm.isAdmin(r,e,t)},N.single("document"),async(r,e)=>{let{updatePendencyController:t}=wb();await t.handle(r,e)});Ar.delete("/:id",(r,e,t)=>{lm.isAdmin(r,e,t)},async(r,e)=>{let{deletePendencyController:t}=vb();await t.handle(r,e)});import{Router as ew}from"express";import{extendZodWithOpenApi as KM}from"@asteasolutions/zod-to-openapi";import Ct from"zod";var JM=5,Ub=1024,YM=Ub*Ub,XM=JM*YM;KM(Ct);var QM=Ct.object({title:Ct.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),description:Ct.string().optional(),startDate:Ct.coerce.date(),endDate:Ct.coerce.date(),contact:Ct.string().min(1,"Contato \xE9 obrigat\xF3rio."),registrationLink:Ct.url().optional(),image:Ct.any().refine(r=>!r||typeof r=="object"&&typeof r.mimetype=="string"&&r.mimetype.startsWith("image/")&&typeof r.size=="number"&&r.size<=XM,"A imagem deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.")}),um=class{constructor(e,t){this.postGraduateProgramRepository=e;this.firebaseStorageService=t}async handle(e,t){let{title:o,description:i,startDate:n,endDate:s,contact:a,registrationLink:m,image:p}=QM.parse({...e.body,image:e.file}),f=await this.postGraduateProgramRepository.create({title:o,description:i,startDate:n,endDate:s,contact:a,registrationLink:m||void 0}),I=await this.firebaseStorageService.uploadFile({file:p,folder:x.POST_GRADUATE_PROGRAM,id:f.id});return await this.postGraduateProgramRepository.update({id:f.id,imageUrl:I}),t.sendStatus(201)}};var gm=class{constructor(e){this.prisma=e}async create({title:e,imageUrl:t,description:o,startDate:i,endDate:n,contact:s,registrationLink:a}){return await this.prisma.postGraduateProgram.create({data:{title:e,imageUrl:t,description:o,startDate:i,endDate:n,contact:s,registrationLink:a}})}async find({pagination:{offset:e,limit:t},filter:{description:o,orderBy:i,title:n,contact:s}}){let a={},m=[];return n&&m.push({title:{contains:n,mode:"insensitive"}}),o&&m.push({description:{contains:o,mode:"insensitive"}}),s&&m.push({contact:{contains:s,mode:"insensitive"}}),m.length>0&&(a.OR=m),await this.prisma.postGraduateProgram.findMany({where:a,orderBy:{updatedAt:i},skip:e,take:t})}async findById(e){return await this.prisma.postGraduateProgram.findFirst({where:{id:e}})}async update({id:e,title:t,imageUrl:o,description:i,startDate:n,endDate:s,contact:a,registrationLink:m}){await this.prisma.postGraduateProgram.update({where:{id:e},data:{title:t,imageUrl:o,description:i,startDate:n,endDate:s,contact:a,registrationLink:m}})}async deleteById(e){await this.prisma.postGraduateProgram.delete({where:{id:e}})}async count({filter:{description:e,title:t,contact:o}}){let i={},n=[];return t&&n.push({title:{contains:t,mode:"insensitive"}}),e&&n.push({description:{contains:e,mode:"insensitive"}}),o&&n.push({contact:{contains:o,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.postGraduateProgram.count({where:i})}};function ci(){return new gm(F)}function jb(){return{createPostGraduateProgramController:new um(ci(),M())}}function kb(){return{findPostGraduateProgramsController:new os(ci())}}function Fb(){return{findPostGraduateProgramByIdController:new is(ci())}}function Db(){return{updatePostGraduateProgramController:new ns(ci(),M())}}function Ob(){return{deletePostGraduateProgramController:new rs(ci(),M())}}var Ir=ew(),{authMiddleware:yu}=_();Ir.post("/",(r,e,t)=>{yu.isAdmin(r,e,t)},N.single("image"),async(r,e)=>{let{createPostGraduateProgramController:t}=jb();await t.handle(r,e)});Ir.get("/",async(r,e)=>{let{findPostGraduateProgramsController:t}=kb();await t.handle(r,e)});Ir.get("/:id",async(r,e)=>{let{findPostGraduateProgramByIdController:t}=Fb();await t.handle(r,e)});Ir.put("/:id",(r,e,t)=>{yu.isAdmin(r,e,t)},N.single("image"),async(r,e)=>{let{updatePostGraduateProgramController:t}=Db();await t.handle(r,e)});Ir.delete("/:id",(r,e,t)=>{yu.isAdmin(r,e,t)},async(r,e)=>{let{deletePostGraduateProgramController:t}=Ob();await t.handle(r,e)});import{Router as tw}from"express";var ym=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.redeCTHighlight.create({data:e})}async update(e){await this.prisma.redeCTHighlight.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.redeCTHighlight.delete({where:{id:e}})}async find({pagination:{offset:e,limit:t},filter:{type:o,description:i,orderBy:n}}){let s={},a=[];return o&&(s.type=o),i&&a.push({description:{contains:i,mode:"insensitive"}}),a.length>0&&(s.OR=a),await this.prisma.redeCTHighlight.findMany({where:s,include:{user:!0},orderBy:{updatedAt:n},skip:e,take:t})}async findById(e){return await this.prisma.redeCTHighlight.findFirst({where:{id:e},include:{user:!0}})}async count({filter:{type:e,description:t}}){let o={},i=[];return e&&(o.type=e),t&&i.push({description:{contains:t,mode:"insensitive"}}),i.length>0&&(o.OR=i),await this.prisma.redeCTHighlight.count({where:o})}};function pi(){return new ym(F)}function Bb(){return{createRedeCTHighlightController:new ss(pi())}}function qb(){return{findRedeCTHighlightsController:new ps(pi())}}function Nb(){return{findRedeCTHighlightByIdController:new ms(pi())}}function Gb(){return{updateRedeCTHighlightController:new ds(pi())}}function _b(){return{deleteRedeCTHighlightController:new as(pi())}}var Sr=tw(),{authMiddleware:fu}=_();Sr.post("/",(r,e,t)=>{fu.isAdmin(r,e,t)},N.single("image"),async(r,e)=>{let{createRedeCTHighlightController:t}=Bb();await t.handle(r,e)});Sr.get("/",async(r,e)=>{let{findRedeCTHighlightsController:t}=qb();await t.handle(r,e)});Sr.get("/:id",async(r,e)=>{let{findRedeCTHighlightByIdController:t}=Nb();await t.handle(r,e)});Sr.put("/:id",(r,e,t)=>{fu.isAdmin(r,e,t)},N.single("image"),async(r,e)=>{let{updateRedeCTHighlightController:t}=Gb();await t.handle(r,e)});Sr.delete("/:id",(r,e,t)=>{fu.isAdmin(r,e,t)},async(r,e)=>{let{deleteRedeCTHighlightController:t}=_b();await t.handle(r,e)});import{Router as nw}from"express";import{extendZodWithOpenApi as rw}from"@asteasolutions/zod-to-openapi";import di from"zod";var iw=1;rw(di);var ow=di.object({page:di.coerce.number().min(1).default(iw),limit:di.coerce.number().optional(),role:di.string().optional(),orderBy:di.enum(["asc","desc"]).default("desc")}),fm=class{constructor(e){this.referenceCenterTeamMemberRepository=e}async handle(e,t){let{page:o,limit:i,...n}=ow.parse(e.query),s=i?i*o-i:void 0,[a,m]=await Promise.all([this.referenceCenterTeamMemberRepository.find({pagination:{offset:s,limit:i},filter:n}),this.referenceCenterTeamMemberRepository.count({filter:n})]),p=i?Math.max(Math.ceil(m/i),1):1;t.status(200).json({page:o,totalPages:p,offset:s,limit:i,members:a})}};var hm=class{constructor(e){this.prisma=e}async create(e){await this.prisma.referenceCenterTeamMember.create({data:{...e}})}async update(e){let{id:t,...o}=e;await this.prisma.referenceCenterTeamMember.update({where:{id:t},data:o})}async deleteById(e){await this.prisma.referenceCenterTeamMember.delete({where:{id:e}})}async find({pagination:{offset:e,limit:t},filter:{role:o,orderBy:i}}){let n={};return o&&(n.role={contains:o,mode:"insensitive"}),await this.prisma.referenceCenterTeamMember.findMany({where:n,include:{user:{omit:{passwordHash:!0}}},orderBy:{updatedAt:i},skip:e,take:t})}async findById(e){return await this.prisma.referenceCenterTeamMember.findFirst({where:{id:e},include:{user:{omit:{passwordHash:!0}}}})}async count({filter:{role:e}}){let t={};return e&&(t.role={contains:e,mode:"insensitive"}),await this.prisma.referenceCenterTeamMember.count({where:t})}};function li(){return new hm(F)}function Lb(){return{createReferenceCenterTeamMemberController:new ls(li())}}function Hb(){return{findReferenceCenterTeamMembersController:new fm(li())}}function Wb(){return{findReferenceCenterTeamMemberByIdController:new gs(li())}}function $b(){return{updateReferenceCenterTeamMemberController:new fs(li())}}function Vb(){return{deleteReferenceCenterTeamMemberController:new us(li())}}var Er=nw(),{authMiddleware:hu}=_();Er.post("/",(r,e,t)=>{hu.isAdmin(r,e,t)},async(r,e)=>{let{createReferenceCenterTeamMemberController:t}=Lb();await t.handle(r,e)});Er.get("/",async(r,e)=>{let{findReferenceCenterTeamMembersController:t}=Hb();await t.handle(r,e)});Er.get("/:id",async(r,e)=>{let{findReferenceCenterTeamMemberByIdController:t}=Wb();await t.handle(r,e)});Er.put("/:id",(r,e,t)=>{hu.isAdmin(r,e,t)},async(r,e)=>{let{updateReferenceCenterTeamMemberController:t}=$b();await t.handle(r,e)});Er.delete("/:id",(r,e,t)=>{hu.isAdmin(r,e,t)},async(r,e)=>{let{deleteReferenceCenterTeamMemberController:t}=Vb();await t.handle(r,e)});import{Router as sw}from"express";var Rm=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.regiment.create({data:e})}async update(e){await this.prisma.regiment.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.regiment.delete({where:{id:e}})}async find({pagination:{offset:e,limit:t},filter:{title:o,status:i,orderBy:n}}){let s={},a=[];return i&&(s.status=i),o&&a.push({title:{contains:o,mode:"insensitive"}}),a.length>0&&(s.OR=a),await this.prisma.regiment.findMany({where:s,orderBy:{updatedAt:n},skip:e,take:t})}async findById(e){return await this.prisma.regiment.findFirst({where:{id:e}})}async findByStatus(e){return await this.prisma.regiment.findMany({where:{status:e}})}async count({filter:{title:e,status:t}}){let o={},i=[];return t&&(o.status=t),e&&i.push({title:{contains:e,mode:"insensitive"}}),i.length>0&&(o.OR=i),await this.prisma.regiment.count({where:o})}};function xr(){return new Rm(F)}function zb(){return{createRegimentController:new hs(xr(),M())}}function Zb(){return{findRegimentsController:new Ts(xr())}}function Kb(){return{findRegimentByIdController:new Ps(xr())}}function Jb(){return{findRegimentByStatusController:new Cs(xr())}}function Yb(){return{updateRegimentController:new As(xr(),M())}}function Xb(){return{deleteRegimentController:new Rs(xr(),M())}}var Jt=sw(),{authMiddleware:Ru}=_();Jt.post("/",(r,e,t)=>{Ru.isAdmin(r,e,t)},N.single("document"),async(r,e)=>{let{createRegimentController:t}=zb();await t.handle(r,e)});Jt.get("/",async(r,e)=>{let{findRegimentsController:t}=Zb();await t.handle(r,e)});Jt.get("/:id",async(r,e)=>{let{findRegimentByIdController:t}=Kb();await t.handle(r,e)});Jt.get("/status/:status",async(r,e)=>{let{findRegimentByStatusController:t}=Jb();await t.handle(r,e)});Jt.put("/:id",(r,e,t)=>{Ru.isAdmin(r,e,t)},N.single("document"),async(r,e)=>{let{updateRegimentController:t}=Yb();await t.handle(r,e)});Jt.delete("/:id",(r,e,t)=>{Ru.isAdmin(r,e,t)},async(r,e)=>{let{deleteRegimentController:t}=Xb();await t.handle(r,e)});import{Router as dw}from"express";var Pm=class{constructor(e){this.prisma=e}async create(e){await this.prisma.regionalCongress.create({data:e})}async update(e){await this.prisma.regionalCongress.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.regionalCongress.delete({where:{id:e}})}async find({pagination:{offset:e,limit:t},filter:{title:o,edition:i,location:n,orderBy:s}}){let a={},m=[];return i&&m.push({edition:{equals:i}}),o&&m.push({title:{contains:o,mode:"insensitive"}}),n&&m.push({location:{contains:n,mode:"insensitive"}}),m.length>0&&(a.OR=m),await this.prisma.regionalCongress.findMany({where:a,include:{regionalCongressPartners:!0,regionalCongressGalleryItems:!0},orderBy:{startDate:s},skip:e,take:t})}async findById(e){return await this.prisma.regionalCongress.findFirst({where:{id:e},include:{regionalCongressPartners:!0,regionalCongressGalleryItems:!0}})}async findByEdition(e){return await this.prisma.regionalCongress.findMany({where:{edition:e},include:{regionalCongressPartners:!0,regionalCongressGalleryItems:!0}})}async count({filter:{title:e,edition:t,location:o}}){let i={},n=[];return t&&n.push({edition:{equals:t}}),e&&n.push({title:{contains:e,mode:"insensitive"}}),o&&n.push({location:{contains:o,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.regionalCongress.count({where:i})}};function Ye(){return new Pm(F)}function Qb(){return{createRegionalCongressController:new Fs(Ye())}}function eC(){return{findRegionalCongressesController:new Ns(Ye())}}function tC(){return{findRegionalCongressByIdController:new Bs(Ye())}}function rC(){return{findRegionalCongressByEditionController:new Os(Ye())}}function iC(){return{updateRegionalCongressController:new Gs(Ye())}}function oC(){return{deleteRegionalCongressController:new Ds(Ye())}}import{extendZodWithOpenApi as aw}from"@asteasolutions/zod-to-openapi";import Pu from"zod";aw(Pu);var mw=Pu.object({id:Pu.uuid("ID inv\xE1lido")}),bm=class{constructor(e){this.regionalCongressGalleryRepository=e}async handle(e,t){let{id:o}=mw.parse(e.params),i=await this.regionalCongressGalleryRepository.findById(o);if(!i)throw new c("Item de galeria n\xE3o encontrado");return t.status(200).json(i)}};var Cm=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.regionalCongressGalleryItem.create({data:e})}async update(e){await this.prisma.regionalCongressGalleryItem.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.regionalCongressGalleryItem.delete({where:{id:e}})}async findByCongressId({pagination:{offset:e,limit:t},filter:{congressId:o,caption:i,orderBy:n}}){let s={congressId:o};return i&&(s.caption={contains:i,mode:"insensitive"}),await this.prisma.regionalCongressGalleryItem.findMany({where:s,orderBy:{updatedAt:n},skip:e,take:t})}async findById(e){return await this.prisma.regionalCongressGalleryItem.findFirst({where:{id:e}})}async count({filter:{congressId:e,caption:t}}){let o={congressId:e};return t&&(o.caption={contains:t,mode:"insensitive"}),await this.prisma.regionalCongressGalleryItem.count({where:o})}};function ui(){return new Cm(F)}function nC(){return{createRegionalCongressGalleryController:new Is(ui(),Ye(),M())}}function sC(){return{findRegionalCongressGalleriesByCongressIdController:new xs(ui())}}function aC(){return{findRegionalCongressGalleryByIdController:new bm(ui())}}function mC(){return{updateRegionalCongressGalleryController:new Ms(ui(),M())}}function cC(){return{deleteRegionalCongressGalleryController:new Ss(ui())}}import{extendZodWithOpenApi as cw}from"@asteasolutions/zod-to-openapi";import bu from"zod";cw(bu);var pw=bu.object({id:bu.string().uuid("ID inv\xE1lido")}),Tm=class{constructor(e){this.regionalCongressPartnerRepository=e}async handle(e,t){let{id:o}=pw.parse(e.params),i=await this.regionalCongressPartnerRepository.findById(o);if(!i)throw new c("Parceiro n\xE3o encontrado");return t.status(200).json(i)}};var Am=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.regionalCongressPartner.create({data:e})}async update(e){await this.prisma.regionalCongressPartner.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.regionalCongressPartner.delete({where:{id:e}})}async findByCongressId({pagination:{offset:e,limit:t},filter:{congressId:o,name:i,orderBy:n}}){let s={congressId:o};return i&&(s.name={contains:i,mode:"insensitive"}),await this.prisma.regionalCongressPartner.findMany({where:s,skip:e,take:t,orderBy:{updatedAt:n}})}async findById(e){return await this.prisma.regionalCongressPartner.findFirst({where:{id:e}})}async count({filter:{congressId:e,name:t}}){let o={congressId:e};return t&&(o.name={contains:t,mode:"insensitive"}),await this.prisma.regionalCongressPartner.count({where:o})}};function gi(){return new Am(F)}function pC(){return{createRegionalCongressPartnerController:new ws(gi(),Ye(),M())}}function dC(){return{findRegionalCongressPartnersByCongressIdController:new js(gi())}}function lC(){return{findRegionalCongressPartnerByIdController:new Tm(gi())}}function uC(){return{updateRegionalCongressPartnerController:new ks(gi(),M())}}function gC(){return{deleteRegionalCongressPartnerController:new vs(gi())}}var Re=dw(),{authMiddleware:Tt}=_();Re.post("/",(r,e,t)=>{Tt.isAdmin(r,e,t)},async(r,e)=>{let{createRegionalCongressController:t}=Qb();await t.handle(r,e)});Re.get("/",async(r,e)=>{let{findRegionalCongressesController:t}=eC();await t.handle(r,e)});Re.get("/:id",async(r,e)=>{let{findRegionalCongressByIdController:t}=tC();await t.handle(r,e)});Re.get("/edition/:edition",async(r,e)=>{let{findRegionalCongressByEditionController:t}=rC();await t.handle(r,e)});Re.put("/:id",(r,e,t)=>{Tt.isAdmin(r,e,t)},async(r,e)=>{let{updateRegionalCongressController:t}=iC();await t.handle(r,e)});Re.delete("/:id",(r,e,t)=>{Tt.isAdmin(r,e,t)},async(r,e)=>{let{deleteRegionalCongressController:t}=oC();await t.handle(r,e)});Re.post("/:id/gallery",(r,e,t)=>{Tt.isAdmin(r,e,t)},N.single("image"),async(r,e)=>{let{createRegionalCongressGalleryController:t}=nC();await t.handle(r,e)});Re.get("/:id/gallery",async(r,e)=>{let{findRegionalCongressGalleriesByCongressIdController:t}=sC();await t.handle(r,e)});Re.get("/gallery/:id",async(r,e)=>{let{findRegionalCongressGalleryByIdController:t}=aC();await t.handle(r,e)});Re.put("/gallery/:id",(r,e,t)=>{Tt.isAdmin(r,e,t)},N.single("image"),async(r,e)=>{let{updateRegionalCongressGalleryController:t}=mC();await t.handle(r,e)});Re.delete("/gallery/:id",(r,e,t)=>{Tt.isAdmin(r,e,t)},async(r,e)=>{let{deleteRegionalCongressGalleryController:t}=cC();await t.handle(r,e)});Re.post("/:id/partner",(r,e,t)=>{Tt.isAdmin(r,e,t)},N.single("logo"),async(r,e)=>{let{createRegionalCongressPartnerController:t}=pC();await t.handle(r,e)});Re.get("/:id/partner",async(r,e)=>{let{findRegionalCongressPartnersByCongressIdController:t}=dC();await t.handle(r,e)});Re.get("/partner/:id",async(r,e)=>{let{findRegionalCongressPartnerByIdController:t}=lC();await t.handle(r,e)});Re.put("/partner/:id",(r,e,t)=>{Tt.isAdmin(r,e,t)},N.single("logo"),async(r,e)=>{let{updateRegionalCongressPartnerController:t}=uC();await t.handle(r,e)});Re.delete("/partner/:id",(r,e,t)=>{Tt.isAdmin(r,e,t)},async(r,e)=>{let{deleteRegionalCongressPartnerController:t}=gC();await t.handle(r,e)});import{Router as hw}from"express";import{extendZodWithOpenApi as lw}from"@asteasolutions/zod-to-openapi";import Ge from"zod";var uw=5,yC=1024,gw=yC*yC,yw=uw*gw;lw(Ge);var fw=Ge.object({name:Ge.string().min(1,"Nome \xE9 obrigat\xF3rio."),acronym:Ge.string().optional(),description:Ge.string().optional(),url:Ge.url("URL deve ser v\xE1lida.").optional(),foundedAt:Ge.coerce.date(),scope:Ge.string().optional(),email:Ge.email("E-mail deve ser v\xE1lido.").optional(),leaderId:Ge.uuid("L\xEDder \xE9 obrigat\xF3rio."),deputyLeaderId:Ge.uuid("Vice-l\xEDder \xE9 obrigat\xF3rio."),logo:Ge.any().refine(r=>!r||typeof r=="object"&&typeof r.mimetype=="string"&&r.mimetype.startsWith("image/")&&typeof r.size=="number"&&r.size<=yw,"O logo deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.").optional()}),Im=class{constructor(e,t){this.researchGroupRepository=e;this.firebaseStorageService=t}async handle(e,t){let{name:o,acronym:i,description:n,url:s,foundedAt:a,scope:m,email:p,leaderId:f,deputyLeaderId:I,logo:L}=fw.parse({...e.body,logo:e.file}),ie=await this.researchGroupRepository.create({name:o,acronym:i,description:n,url:s,foundedAt:a,scope:m,email:p,leaderId:f,deputyLeaderId:I});if(L){let ne=await this.firebaseStorageService.uploadFile({file:L,folder:x.RESEARCH_GROUP_LOGO,id:ie.id});await this.researchGroupRepository.update({id:ie.id,logoUrl:ne})}return t.sendStatus(201)}};var Sm=class{constructor(e){this.prisma=e}async create({name:e,acronym:t,description:o,url:i,logoUrl:n,foundedAt:s,scope:a,email:m,leaderId:p,deputyLeaderId:f}){return await this.prisma.researchGroup.create({data:{name:e,acronym:t,description:o,url:i,logoUrl:n,foundedAt:s,scope:a,email:m,leaderId:p,deputyLeaderId:f}})}async find({pagination:{offset:e,limit:t},filter:{name:o,acronym:i,description:n,leader:s,orderBy:a}}){let m={},p=[];return o&&p.push({name:{contains:o,mode:"insensitive"}}),i&&p.push({acronym:{contains:i,mode:"insensitive"}}),n&&p.push({description:{contains:n,mode:"insensitive"}}),s&&p.push({leader:{name:{contains:s,mode:"insensitive"}}}),p.length>0&&(m.OR=p),await this.prisma.researchGroup.findMany({where:m,include:{leader:{omit:{passwordHash:!0}},deputyLeader:{omit:{passwordHash:!0}}},orderBy:{updatedAt:a},skip:e,take:t})}async findById(e){return await this.prisma.researchGroup.findFirst({where:{id:e},include:{leader:{omit:{passwordHash:!0}},deputyLeader:{omit:{passwordHash:!0}}}})}async update({id:e,name:t,acronym:o,description:i,url:n,logoUrl:s,foundedAt:a,scope:m,email:p,leaderId:f,deputyLeaderId:I}){await this.prisma.researchGroup.update({where:{id:e},data:{name:t,acronym:o,description:i,url:n,logoUrl:s,foundedAt:a,scope:m,email:p,leaderId:f,deputyLeaderId:I}})}async deleteById(e){await this.prisma.researchGroup.delete({where:{id:e}})}async count({filter:{name:e,acronym:t,description:o,leader:i}}){let n={},s=[];return e&&s.push({name:{contains:e,mode:"insensitive"}}),t&&s.push({acronym:{contains:t,mode:"insensitive"}}),o&&s.push({description:{contains:o,mode:"insensitive"}}),i&&s.push({leader:{name:{contains:i,mode:"insensitive"}}}),s.length>0&&(n.OR=s),await this.prisma.researchGroup.count({where:n})}};function yi(){return new Sm(F)}function fC(){return{createResearchGroupController:new Im(yi(),M())}}function hC(){return{findResearchGroupsController:new Hs(yi())}}function RC(){return{findResearchGroupByIdController:new Ls(yi())}}function PC(){return{updateResearchGroupController:new Ws(yi(),M())}}function bC(){return{deleteResearchGroupController:new _s(yi(),M())}}var Mr=hw(),{authMiddleware:Cu}=_();Mr.post("/",(r,e,t)=>{Cu.isAdmin(r,e,t)},N.single("logo"),async(r,e)=>{let{createResearchGroupController:t}=fC();await t.handle(r,e)});Mr.get("/",async(r,e)=>{let{findResearchGroupsController:t}=hC();await t.handle(r,e)});Mr.get("/:id",async(r,e)=>{let{findResearchGroupByIdController:t}=RC();await t.handle(r,e)});Mr.put("/:id",(r,e,t)=>{Cu.isAdmin(r,e,t)},N.single("logo"),async(r,e)=>{let{updateResearchGroupController:t}=PC();await t.handle(r,e)});Mr.delete("/:id",(r,e,t)=>{Cu.isAdmin(r,e,t)},async(r,e)=>{let{deleteResearchGroupController:t}=bC();await t.handle(r,e)});import{Router as Cw}from"express";import{extendZodWithOpenApi as Rw}from"@asteasolutions/zod-to-openapi";import Te from"zod";var Pw=1;Rw(Te);var bw=Te.object({page:Te.coerce.number().min(1).default(Pw),limit:Te.coerce.number().optional(),userId:Te.string().optional(),registrationNumber:Te.string().optional(),name:Te.string().optional(),emailAddress:Te.string().optional(),mainEtps:Te.string().optional(),formations:Te.string().optional(),occupations:Te.string().optional(),institutions:Te.string().optional(),biography:Te.string().optional(),seniority:Te.enum(["SENIOR","RESEARCHER","JUNIOR","HONOR"]).optional(),orderBy:Te.enum(["asc","desc"]).default("desc")}),Em=class{constructor(e){this.researcherRepository=e}async handle(e,t){let{page:o,limit:i,...n}=bw.parse(e.query),s=i?i*o-i:void 0,[a,m]=await Promise.all([this.researcherRepository.find({pagination:{offset:s,limit:i},filter:n}),this.researcherRepository.count({filter:n})]),p=i?Math.max(Math.ceil(m/i),1):1;t.status(200).json({page:o,totalPages:p,offset:s,limit:i,researchers:a})}};var xm=class{constructor(e){this.prisma=e}async create(e){await this.prisma.researcher.create({data:e})}async update(e){await this.prisma.researcher.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.researcher.delete({where:{id:e}})}async find({pagination:{offset:e,limit:t},filter:{biography:o,degrees:i,formations:n,institutions:s,mainEtps:a,occupations:m,registrationNumber:p,seniority:f,userId:I,name:L,orderBy:ie}}){let ne={},pe=[];return L&&pe.push({user:{name:{contains:L,mode:"insensitive"}}}),p&&pe.push({registrationNumber:{contains:p,mode:"insensitive"}}),a&&pe.push({mainEtps:{contains:a,mode:"insensitive"}}),n&&pe.push({formations:{contains:n,mode:"insensitive"}}),m&&pe.push({occupations:{contains:m,mode:"insensitive"}}),s&&pe.push({institutions:{contains:s,mode:"insensitive"}}),o&&pe.push({biography:{contains:o,mode:"insensitive"}}),pe.length>0&&(ne.OR=pe),i&&i.length>0&&(ne.degrees={hasSome:i}),f&&(ne.seniority=f),I&&(ne.userId={equals:I}),await this.prisma.researcher.findMany({where:ne,omit:{userId:!0},include:{user:{omit:{passwordHash:!0}}},orderBy:{updatedAt:ie},skip:e,take:t})}async findById(e){return await this.prisma.researcher.findFirst({where:{id:e},include:{user:{omit:{passwordHash:!0}}}})}async findByUserId(e){return await this.prisma.researcher.findFirst({where:{userId:e},include:{user:{omit:{passwordHash:!0}}}})}async findByRegistrationNumber(e){return await this.prisma.researcher.findFirst({where:{registrationNumber:e},include:{user:{omit:{passwordHash:!0}}}})}async count({filter:{biography:e,degrees:t,formations:o,institutions:i,mainEtps:n,occupations:s,registrationNumber:a,seniority:m,userId:p,name:f}}){let I={},L=[];return f&&L.push({user:{name:{contains:f,mode:"insensitive"}}}),a&&L.push({registrationNumber:{contains:a,mode:"insensitive"}}),L.length>0&&(I.OR=L),n&&(I.mainEtps={contains:n,mode:"insensitive"}),o&&(I.formations={contains:o,mode:"insensitive"}),t&&t.length>0&&(I.degrees={hasSome:t}),s&&(I.occupations={contains:s,mode:"insensitive"}),m&&(I.seniority=m),i&&(I.institutions={contains:i,mode:"insensitive"}),e&&(I.biography={contains:e,mode:"insensitive"}),p&&(I.userId={equals:p}),await this.prisma.researcher.count({where:I})}};function wr(){return new xm(F)}function CC(){return{createResearcherController:new $s(wr())}}function TC(){return{findResearchersController:new Em(wr())}}function AC(){return{findResearcherByIdController:new zs(wr())}}function IC(){return{findResearcherByUserIdController:new Ks(wr())}}function SC(){return{updateResearcherController:new Js(wr())}}function EC(){return{deleteResearcherController:new Vs(wr())}}var Yt=Cw(),{authMiddleware:Tu}=_();Yt.post("/",(r,e,t)=>{Tu.isAdmin(r,e,t)},async(r,e)=>{let{createResearcherController:t}=CC();await t.handle(r,e)});Yt.get("/",async(r,e)=>{let{findResearchersController:t}=TC();await t.handle(r,e)});Yt.get("/:id",async(r,e)=>{let{findResearcherByIdController:t}=AC();await t.handle(r,e)});Yt.get("/user/:id",async(r,e)=>{let{findResearcherByUserIdController:t}=IC();await t.handle(r,e)});Yt.put("/:id",(r,e,t)=>{Tu.isAdmin(r,e,t)},async(r,e)=>{let{updateResearcherController:t}=SC();await t.handle(r,e)});Yt.delete("/:id",(r,e,t)=>{Tu.isAdmin(r,e,t)},async(r,e)=>{let{deleteResearcherController:t}=EC();await t.handle(r,e)});import{Router as Iw}from"express";import{extendZodWithOpenApi as Tw}from"@asteasolutions/zod-to-openapi";import Pe from"zod";Tw(Pe);var Aw=Pe.object({title:Pe.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),author:Pe.string().min(1,"Autor \xE9 obrigat\xF3rio."),journal:Pe.string().optional(),volume:Pe.string().optional(),edition:Pe.string().optional(),pageStart:Pe.coerce.number().optional(),pageEnd:Pe.coerce.number().optional(),startDate:Pe.coerce.date(),endDate:Pe.coerce.date(),city:Pe.string().optional(),state:Pe.string().optional(),country:Pe.string().optional(),publisher:Pe.string().optional(),description:Pe.string().optional(),year:Pe.coerce.number().optional(),accessUrl:Pe.url().optional()}),Mm=class{constructor(e){this.scientificArticlesRepository=e}async handle(e,t){let{title:o,author:i,journal:n,volume:s,edition:a,pageStart:m,pageEnd:p,startDate:f,endDate:I,city:L,state:ie,country:ne,publisher:pe,description:_e,year:Ai,accessUrl:Nm}=Aw.parse(e.body);return await this.scientificArticlesRepository.create({title:o,author:i,journal:n,volume:s,edition:a,pageStart:m,pageEnd:p,startDate:f,endDate:I,city:L,state:ie,country:ne,publisher:pe,description:_e,year:Ai,accessUrl:Nm}),t.sendStatus(201)}};var wm=class{constructor(e){this.prisma=e}async create({title:e,author:t,journal:o,volume:i,edition:n,pageStart:s,pageEnd:a,startDate:m,endDate:p,city:f,state:I,country:L,publisher:ie,description:ne,year:pe,accessUrl:_e}){return await this.prisma.scientificArticle.create({data:{title:e,author:t,journal:o,volume:i,edition:n,pageStart:s,pageEnd:a,startDate:m,endDate:p,city:f,state:I,country:L,publisher:ie,description:ne,year:pe,accessUrl:_e}})}async find({pagination:{offset:e,limit:t},filter:{title:o,author:i,journal:n,orderBy:s}}){let a={},m=[];return o&&m.push({title:{contains:o,mode:"insensitive"}}),i&&m.push({author:{contains:i,mode:"insensitive"}}),n&&m.push({journal:{contains:n,mode:"insensitive"}}),m.length>0&&(a.OR=m),await this.prisma.scientificArticle.findMany({where:a,orderBy:{updatedAt:s},skip:e,take:t})}async findById(e){return await this.prisma.scientificArticle.findFirst({where:{id:e}})}async update({id:e,title:t,author:o,journal:i,volume:n,edition:s,pageStart:a,pageEnd:m,startDate:p,endDate:f,city:I,state:L,country:ie,publisher:ne,description:pe,year:_e,accessUrl:Ai}){await this.prisma.scientificArticle.update({where:{id:e},data:{title:t,author:o,journal:i,volume:n,edition:s,pageStart:a,pageEnd:m,startDate:p,endDate:f,city:I,state:L,country:ie,publisher:ne,description:pe,year:_e,accessUrl:Ai}})}async deleteById(e){await this.prisma.scientificArticle.delete({where:{id:e}})}async count({filter:{title:e,author:t,journal:o}}){let i={},n=[];return e&&n.push({title:{contains:e,mode:"insensitive"}}),t&&n.push({author:{contains:t,mode:"insensitive"}}),o&&n.push({journal:{contains:o,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.scientificArticle.count({where:i})}};function fi(){return new wm(F)}function xC(){return{createScientificArticleController:new Mm(fi())}}function MC(){return{findScientificArticlesController:new Qs(fi())}}function wC(){return{findScientificArticleByIdController:new Xs(fi())}}function vC(){return{updateScientificArticleController:new ea(fi())}}function UC(){return{deleteScientificArticleController:new Ys(fi())}}var vr=Iw(),{authMiddleware:Au}=_();vr.post("/",(r,e,t)=>{Au.isAdmin(r,e,t)},async(r,e)=>{let{createScientificArticleController:t}=xC();await t.handle(r,e)});vr.get("/",async(r,e)=>{let{findScientificArticlesController:t}=MC();await t.handle(r,e)});vr.get("/:id",async(r,e)=>{let{findScientificArticleByIdController:t}=wC();await t.handle(r,e)});vr.put("/:id",(r,e,t)=>{Au.isAdmin(r,e,t)},async(r,e)=>{let{updateScientificArticleController:t}=vC();await t.handle(r,e)});vr.delete("/:id",(r,e,t)=>{Au.isAdmin(r,e,t)},async(r,e)=>{let{deleteScientificArticleController:t}=UC();await t.handle(r,e)});import{Router as vw}from"express";import{extendZodWithOpenApi as Sw}from"@asteasolutions/zod-to-openapi";import At from"zod";var Ew=5,jC=1024,xw=jC*jC,Mw=Ew*xw;Sw(At);var ww=At.object({name:At.string().min(1,"Nome \xE9 obrigat\xF3rio."),issn:At.string().min(1,"ISSN \xE9 obrigat\xF3rio."),description:At.string().min(1,"Descri\xE7\xE3o \xE9 obrigat\xF3ria."),journalUrl:At.url("URL da revista deve ser v\xE1lida."),directors:At.string().optional(),editorialBoard:At.string().optional(),logo:At.any().refine(r=>!r||typeof r=="object"&&typeof r.mimetype=="string"&&r.mimetype.startsWith("image/")&&typeof r.size=="number"&&r.size<=Mw,"O logo deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.").optional()}),vm=class{constructor(e,t){this.scientificJournalRepository=e;this.firebaseStorageService=t}async handle(e,t){let{name:o,issn:i,description:n,journalUrl:s,directors:a,editorialBoard:m,logo:p}=ww.parse({...e.body,logo:e.file}),f=await this.scientificJournalRepository.create({name:o,issn:i,description:n,journalUrl:s,directors:a,editorialBoard:m});if(p){let I=await this.firebaseStorageService.uploadFile({file:p,folder:x.SCIENTIFIC_JOURNAL,id:f.id});await this.scientificJournalRepository.update({id:f.id,logoUrl:I})}return t.sendStatus(201)}};var Um=class{constructor(e){this.prisma=e}async create({name:e,issn:t,description:o,logoUrl:i,journalUrl:n,directors:s,editorialBoard:a}){return await this.prisma.scientificJournal.create({data:{name:e,issn:t,description:o,logoUrl:i,journalUrl:n,directors:s,editorialBoard:a}})}async find({pagination:{offset:e,limit:t},filter:{name:o,description:i,issn:n,directors:s,editorialBoard:a,orderBy:m}}){let p={},f=[];return o&&f.push({name:{contains:o,mode:"insensitive"}}),i&&f.push({description:{contains:i,mode:"insensitive"}}),n&&f.push({issn:{contains:n,mode:"insensitive"}}),s&&f.push({directors:{contains:s,mode:"insensitive"}}),a&&f.push({editorialBoard:{contains:a,mode:"insensitive"}}),f.length>0&&(p.OR=f),await this.prisma.scientificJournal.findMany({where:p,orderBy:{updatedAt:m},skip:e,take:t})}async findById(e){return await this.prisma.scientificJournal.findFirst({where:{id:e}})}async update({id:e,name:t,issn:o,description:i,logoUrl:n,journalUrl:s,directors:a,editorialBoard:m}){await this.prisma.scientificJournal.update({where:{id:e},data:{name:t,issn:o,description:i,logoUrl:n,journalUrl:s,directors:a,editorialBoard:m}})}async deleteById(e){await this.prisma.scientificJournal.delete({where:{id:e}})}async count({filter:{name:e,description:t,issn:o,directors:i,editorialBoard:n}}){let s={},a=[];return e&&a.push({name:{contains:e,mode:"insensitive"}}),t&&a.push({description:{contains:t,mode:"insensitive"}}),o&&a.push({issn:{contains:o,mode:"insensitive"}}),i&&a.push({directors:{contains:i,mode:"insensitive"}}),n&&a.push({editorialBoard:{contains:n,mode:"insensitive"}}),a.length>0&&(s.OR=a),await this.prisma.scientificJournal.count({where:s})}};function hi(){return new Um(F)}function kC(){return{createScientificJournalController:new vm(hi(),M())}}function FC(){return{findScientificJournalsController:new ia(hi())}}function DC(){return{findScientificJournalByIdController:new ra(hi())}}function OC(){return{updateScientificJournalController:new oa(hi(),M())}}function BC(){return{deleteScientificJournalController:new ta(hi(),M())}}var Ur=vw(),{authMiddleware:Iu}=_();Ur.post("/",(r,e,t)=>{Iu.isAdmin(r,e,t)},N.single("logo"),async(r,e)=>{let{createScientificJournalController:t}=kC();await t.handle(r,e)});Ur.get("/",async(r,e)=>{let{findScientificJournalsController:t}=FC();await t.handle(r,e)});Ur.get("/:id",async(r,e)=>{let{findScientificJournalByIdController:t}=DC();await t.handle(r,e)});Ur.put("/:id",(r,e,t)=>{Iu.isAdmin(r,e,t)},N.single("logo"),async(r,e)=>{let{updateScientificJournalController:t}=OC();await t.handle(r,e)});Ur.delete("/:id",(r,e,t)=>{Iu.isAdmin(r,e,t)},async(r,e)=>{let{deleteScientificJournalController:t}=BC();await t.handle(r,e)});import{Router as Fw}from"express";import{extendZodWithOpenApi as Uw}from"@asteasolutions/zod-to-openapi";import Ri from"zod";var jw=1;Uw(Ri);var kw=Ri.object({page:Ri.coerce.number().min(1).default(jw),limit:Ri.coerce.number().optional(),role:Ri.string().optional(),orderBy:Ri.enum(["asc","desc"]).default("desc")}),jm=class{constructor(e){this.sdhcTeamMemberRepository=e}async handle(e,t){let{page:o,limit:i,...n}=kw.parse(e.query),s=i?i*o-i:void 0,[a,m]=await Promise.all([this.sdhcTeamMemberRepository.find({pagination:{offset:s,limit:i},filter:n}),this.sdhcTeamMemberRepository.count({filter:n})]),p=i?Math.max(Math.ceil(m/i),1):1;t.status(200).json({page:o,totalPages:p,offset:s,limit:i,members:a})}};var km=class{constructor(e){this.prisma=e}async create(e){await this.prisma.sDHCTeamMember.create({data:{...e,order:e.order??0}})}async update(e){let{id:t,...o}=e;await this.prisma.sDHCTeamMember.update({where:{id:t},data:o})}async deleteById(e){await this.prisma.sDHCTeamMember.delete({where:{id:e}})}async find({pagination:{offset:e,limit:t},filter:{role:o,orderBy:i}}){let n={};return o&&(n.role={contains:o,mode:"insensitive"}),await this.prisma.sDHCTeamMember.findMany({where:n,include:{user:{omit:{passwordHash:!0}}},orderBy:{updatedAt:i},skip:e,take:t})}async findById(e){return await this.prisma.sDHCTeamMember.findFirst({where:{id:e},include:{user:{omit:{passwordHash:!0}}}})}async count({filter:{role:e}}){let t={};return e&&(t.role={contains:e,mode:"insensitive"}),await this.prisma.sDHCTeamMember.count({where:t})}};function Pi(){return new km(F)}function qC(){return{createSDHCTeamMemberController:new na(Pi())}}function NC(){return{findSDHCTeamMembersController:new jm(Pi())}}function GC(){return{findSDHCTeamMemberByIdController:new aa(Pi())}}function _C(){return{updateSDHCTeamMemberController:new ca(Pi())}}function LC(){return{deleteSDHCTeamMemberController:new sa(Pi())}}var jr=Fw(),{authMiddleware:Su}=_();jr.post("/",(r,e,t)=>{Su.isAdmin(r,e,t)},async(r,e)=>{let{createSDHCTeamMemberController:t}=qC();await t.handle(r,e)});jr.get("/",async(r,e)=>{let{findSDHCTeamMembersController:t}=NC();await t.handle(r,e)});jr.get("/:id",async(r,e)=>{let{findSDHCTeamMemberByIdController:t}=GC();await t.handle(r,e)});jr.put("/:id",(r,e,t)=>{Su.isAdmin(r,e,t)},async(r,e)=>{let{updateSDHCTeamMemberController:t}=_C();await t.handle(r,e)});jr.delete("/:id",(r,e,t)=>{Su.isAdmin(r,e,t)},async(r,e)=>{let{deleteSDHCTeamMemberController:t}=LC();await t.handle(r,e)});import{Router as Dw}from"express";function HC(){return{updateUserController:new ya(Ce(),M())}}function WC(){return{deleteUserController:new pa(Ce())}}function $C(){return{findUsersController:new ua(Ce())}}function VC(){return{findUserController:new la(Ce())}}function zC(){return{promoteUserController:new ga(Ce())}}function ZC(){return{demoteUserController:new da(Ce())}}var Xt=Dw(),{authMiddleware:Fm}=_();Xt.get("/:id",async(r,e)=>{let{findUserController:t}=VC();await t.handle(r,e)});Xt.put("/",(r,e,t)=>{Fm.authenticated(r,e,t)},N.single("avatarImage"),async(r,e)=>{let{updateUserController:t}=HC();await t.handle(r,e)});Xt.delete("/:id",(r,e,t)=>{Fm.authenticated(r,e,t)},async(r,e)=>{let{deleteUserController:t}=WC();await t.handle(r,e)});Xt.get("/",async(r,e)=>{let{findUsersController:t}=$C();await t.handle(r,e)});Xt.put("/promote/:id",(r,e,t)=>{Fm.isAdmin(r,e,t)},async(r,e)=>{let{promoteUserController:t}=zC();await t.handle(r,e)});Xt.put("/demote/:id",(r,e,t)=>{Fm.isAdmin(r,e,t)},async(r,e)=>{let{demoteUserController:t}=ZC();await t.handle(r,e)});import{Router as _w}from"express";import{extendZodWithOpenApi as Ow}from"@asteasolutions/zod-to-openapi";import at from"zod";var Bw=5,KC=1024,qw=KC*KC,Nw=Bw*qw;Ow(at);var Gw=at.object({title:at.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),description:at.string().optional(),scheduledAt:at.coerce.date(),webinarLink:at.url().optional(),guestIds:at.transform(r=>typeof r=="string"?r.split(","):r).pipe(at.array(at.uuid())),thumbnail:at.any().refine(r=>!r||typeof r=="object"&&typeof r.mimetype=="string"&&r.mimetype.startsWith("image/")&&typeof r.size=="number"&&r.size<=Nw,"A thumbnail deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.")}),Dm=class{constructor(e,t){this.webinarRepository=e;this.firebaseStorageService=t}async handle(e,t){let{title:o,description:i,scheduledAt:n,webinarLink:s,guestIds:a,thumbnail:m}=Gw.parse({...e.body,thumbnail:e.file}),p=await this.webinarRepository.create({title:o,description:i,scheduledAt:n,webinarLink:s||void 0,guestIds:a}),f=await this.firebaseStorageService.uploadFile({file:m,folder:x.WEBINAR,id:p.id});return await this.webinarRepository.update({id:p.id,thumbnailUrl:f}),t.sendStatus(201)}};var Om=class{constructor(e){this.prisma=e}async create({title:e,description:t,scheduledAt:o,webinarLink:i,thumbnailUrl:n,guestIds:s}){return await this.prisma.webinar.create({data:{title:e,description:t,scheduledAt:o,webinarLink:i,thumbnailUrl:n,guests:s?{connect:s.map(a=>({id:a}))}:void 0}})}async find({pagination:{offset:e,limit:t},filter:{description:o,orderBy:i,title:n}}){let s={},a=[];return n&&a.push({title:{contains:n,mode:"insensitive"}}),o&&a.push({description:{contains:o,mode:"insensitive"}}),a.length>0&&(s.OR=a),await this.prisma.webinar.findMany({where:s,include:{guests:{omit:{passwordHash:!0}}},orderBy:{updatedAt:i},skip:e,take:t})}async findById(e){return await this.prisma.webinar.findFirst({where:{id:e},include:{guests:{omit:{passwordHash:!0}}}})}async update({id:e,title:t,description:o,scheduledAt:i,webinarLink:n,thumbnailUrl:s,guestIds:a}){await this.prisma.webinar.update({where:{id:e},data:{title:t,description:o,scheduledAt:i,webinarLink:n,thumbnailUrl:s,guests:a?{connect:a.map(m=>({id:m}))}:void 0}})}async deleteById(e){await this.prisma.webinar.delete({where:{id:e}})}async count({filter:{description:e,title:t}}){let o={},i=[];return t&&i.push({title:{contains:t,mode:"insensitive"}}),e&&i.push({description:{contains:e,mode:"insensitive"}}),i.length>0&&(o.OR=i),await this.prisma.webinar.count({where:o})}};function bi(){return new Om(F)}function JC(){return{createWebinarController:new Dm(bi(),M())}}function YC(){return{findWebinarsController:new Ra(bi())}}function XC(){return{findWebinarByIdController:new ha(bi())}}function QC(){return{updateWebinarController:new Pa(bi(),M())}}function eT(){return{deleteWebinarController:new fa(bi(),M())}}var kr=_w(),{authMiddleware:Eu}=_();kr.post("/",(r,e,t)=>{Eu.isAdmin(r,e,t)},N.single("thumbnail"),async(r,e)=>{let{createWebinarController:t}=JC();await t.handle(r,e)});kr.get("/",async(r,e)=>{let{findWebinarsController:t}=YC();await t.handle(r,e)});kr.get("/:id",async(r,e)=>{let{findWebinarByIdController:t}=XC();await t.handle(r,e)});kr.put("/:id",(r,e,t)=>{Eu.isAdmin(r,e,t)},N.single("thumbnail"),async(r,e)=>{let{updateWebinarController:t}=QC();await t.handle(r,e)});kr.delete("/:id",(r,e,t)=>{Eu.isAdmin(r,e,t)},async(r,e)=>{let{deleteWebinarController:t}=eT();await t.handle(r,e)});import{Router as $w}from"express";import{extendZodWithOpenApi as Lw}from"@asteasolutions/zod-to-openapi";import Ci from"zod";var Hw=1;Lw(Ci);var Ww=Ci.object({page:Ci.coerce.number().min(1).default(Hw),limit:Ci.coerce.number().optional(),role:Ci.string().optional(),orderBy:Ci.enum(["asc","desc"]).default("desc")}),Bm=class{constructor(e){this.workGroupTeamMemberRepository=e}async handle(e,t){let{page:o,limit:i,...n}=Ww.parse(e.query),s=i?i*o-i:void 0,[a,m]=await Promise.all([this.workGroupTeamMemberRepository.find({pagination:{offset:s,limit:i},filter:n}),this.workGroupTeamMemberRepository.count({filter:n})]),p=i?Math.max(Math.ceil(m/i),1):1;t.status(200).json({page:o,totalPages:p,offset:s,limit:i,members:a})}};var qm=class{constructor(e){this.prisma=e}async create(e){await this.prisma.workGroupTeamMember.create({data:{...e}})}async update(e){let{id:t,...o}=e;await this.prisma.workGroupTeamMember.update({where:{id:t},data:o})}async deleteById(e){await this.prisma.workGroupTeamMember.delete({where:{id:e}})}async find({pagination:{offset:e,limit:t},filter:{role:o,orderBy:i}}){let n={};return o&&(n.role={contains:o,mode:"insensitive"}),await this.prisma.workGroupTeamMember.findMany({where:n,include:{user:{omit:{passwordHash:!0}}},orderBy:{updatedAt:i},skip:e,take:t})}async findById(e){return await this.prisma.workGroupTeamMember.findFirst({where:{id:e},include:{user:{omit:{passwordHash:!0}}}})}async count({filter:{role:e}}){let t={};return e&&(t.role={contains:e,mode:"insensitive"}),await this.prisma.workGroupTeamMember.count({where:t})}};function Ti(){return new qm(F)}function tT(){return{createWorkGroupTeamMemberController:new ba(Ti())}}function rT(){return{findWorkGroupTeamMembersController:new Bm(Ti())}}function iT(){return{findWorkGroupTeamMemberByIdController:new Ta(Ti())}}function oT(){return{updateWorkGroupTeamMemberController:new Ia(Ti())}}function nT(){return{deleteWorkGroupTeamMemberController:new Ca(Ti())}}var Fr=$w(),{authMiddleware:xu}=_();Fr.post("/",(r,e,t)=>{xu.isAdmin(r,e,t)},async(r,e)=>{let{createWorkGroupTeamMemberController:t}=tT();await t.handle(r,e)});Fr.get("/",async(r,e)=>{let{findWorkGroupTeamMembersController:t}=rT();await t.handle(r,e)});Fr.get("/:id",async(r,e)=>{let{findWorkGroupTeamMemberByIdController:t}=iT();await t.handle(r,e)});Fr.put("/:id",(r,e,t)=>{xu.isAdmin(r,e,t)},async(r,e)=>{let{updateWorkGroupTeamMemberController:t}=oT();await t.handle(r,e)});Fr.delete("/:id",(r,e,t)=>{xu.isAdmin(r,e,t)},async(r,e)=>{let{deleteWorkGroupTeamMemberController:t}=nT();await t.handle(r,e)});var re=Mu(),Zw={methods:["GET","POST","PUT","DELETE"],origin:["http://localhost:3000","https://rede-ct.vercel.app"],credentials:!0};re.use(zw(Zw));re.use(Mu.json());re.use(Mu.urlencoded({extended:!1}));re.use("/docs",Vw({content:yR,theme:"kepler"}));re.use("/",ou);re.use("/auth",ft);re.use("/user",Xt);re.use("/news",Kt);re.use("/certification",pr);re.use("/pendency",Ar);re.use("/researcher",Yt);re.use("/in-memoriam",Zt);re.use("/etp",lr);re.use("/partner",Tr);re.use("/management-team",br);re.use("/sdhc-team-member",jr);re.use("/legitimator-committee-member",Rr);re.use("/regiment",Jt);re.use("/meeting",Ne);re.use("/international-scientific-congress",he);re.use("/regional-congress",Re);re.use("/webinars",kr);re.use("/courses",dr);re.use("/post-graduate-programs",Ir);re.use("/event",ur);re.use("/scientific-journals",Ur);re.use("/book-volumes",cr);re.use("/scientific-articles",vr);re.use("/work-group-team-member",Fr);re.use("/reference-center-team-member",Er);re.use("/law",hr);re.use("/research-groups",Mr);re.use("/museum",Cr);re.use("/redect-highlight",Sr);re.use("/financial-transaction-statement",zt);re.use("/checking-account",ht);re.use((r,e,t,o)=>{let{errorHandler:i}=wu();i.handle(r,e,t,o)});var Jw=Kw.createServer(re),sT=4e3;Jw.listen(sT,()=>{console.log(`\u{1F680} Aplica\xE7\xE3o rodando na porta ${sT}.`)});

import iE from"http";import{apiReference as eE}from"@scalar/express-api-reference";import tE from"cors";import kc from"express";import Gb from"zod";var le=class extends Error{};var ce=class extends Error{};var Re=class extends Error{};var d=class extends Error{};var je=class extends Error{};import{ZodError as Nb}from"zod";var Ui=class extends Nb{};var ji=class{handle(e,t,i,o){return e instanceof Ui?i.status(400).json({message:"Validation error",error:Gb.treeifyError(e)}):e instanceof le?i.status(400).json({message:e.message}):e instanceof d?i.status(404).json({message:e.message}):e instanceof je?i.status(401).json({message:e.message}):e instanceof ce?i.status(409).json({message:e.message}):e instanceof Re?i.status(500).json({message:e.message}):i.status(500).json({message:"Internal server error"})}};function Oc(){return{errorHandler:new ji}}import{OpenAPIRegistry as _S,OpenApiGeneratorV3 as LS}from"@asteasolutions/zod-to-openapi";import b from"zod";var de={ADMIN:"ADMIN",USER:"USER"},xe={PENDING:"PENDING",PAID:"PAID"},Ct={SENIOR:"SENIOR",RESEARCHER:"RESEARCHER",JUNIOR:"JUNIOR",HONOR:"HONOR"},It={DOCTOR:"DOCTOR",MASTER:"MASTER",BACHELOR:"BACHELOR",TECHNICAL:"TECHNICAL",POSTGRADUATE:"POSTGRADUATE"},Je={RESEARCHER:"RESEARCHER",LEADER:"LEADER"},Ge={DRAFT:"DRAFT",IN_FORCE:"IN_FORCE",REVOKED:"REVOKED"},Me={ONLINE:"ONLINE",IN_PERSON:"IN_PERSON"},be={PENDING:"PENDING",CANCELLED:"CANCELLED",FINISHED:"FINISHED"},_e={ONLINE:"ONLINE",IN_PERSON:"IN_PERSON"},Ye={PENDING:"PENDING",CANCELLED:"CANCELLED",FINISHED:"FINISHED"},Bc={PERSON:"PERSON",INSTITUTION:"INSTITUTION"};import{extendZodWithOpenApi as Lb}from"@asteasolutions/zod-to-openapi";import Zt from"zod";var Wb=1;Lb(Zt);var lm=Zt.object({page:Zt.coerce.number().min(1).default(Wb),limit:Zt.coerce.number().optional(),title:Zt.string().optional(),description:Zt.string().optional(),orderBy:Zt.enum(["asc","desc"]).default("desc")}),Fi=class{constructor(e){this.certificationRepository=e}async handle(e,t){let{title:i,description:o,limit:s,orderBy:n,page:a}=lm.parse(e.query),m=s?s*a-s:void 0,p=e.user.id,[h,A]=await Promise.all([this.certificationRepository.findByUserId({userId:p,pagination:{offset:m,limit:s},filter:{title:i,description:o,orderBy:n}}),this.certificationRepository.count({filter:{title:i,description:o,userId:p}})]),G=s?Math.max(Math.ceil(A/s),1):1;return t.status(200).json({page:a,totalPages:G,offset:m,limit:s,totalCertifications:A,certifications:h})}};import{extendZodWithOpenApi as Hb}from"@asteasolutions/zod-to-openapi";import Kt from"zod";var $b=1;Hb(Kt);var cm=Kt.object({page:Kt.coerce.number().min(1).default($b),limit:Kt.coerce.number().optional(),title:Kt.string().optional(),content:Kt.string().optional(),orderBy:Kt.enum(["asc","desc"]).default("desc")}),Di=class{constructor(e){this.newsRepository=e}async handle(e,t){let{page:i,limit:o,content:s,orderBy:n,title:a}=cm.parse(e.query),m=o?o*i-o:void 0,p=e.user.id,[h,A]=await Promise.all([this.newsRepository.findByAuthorId({authorId:p,pagination:{offset:m,limit:o},filter:{orderBy:n,title:a,content:s}}),this.newsRepository.count({filter:{authorId:p,content:s,title:a}})]),G=o?Math.max(Math.ceil(A/o),1):1;t.status(200).json({page:i,totalPages:G,offset:m,limit:o,news:h})}};import{extendZodWithOpenApi as Vb}from"@asteasolutions/zod-to-openapi";import Tt from"zod";var zb=1;Vb(Tt);var um=Tt.object({page:Tt.coerce.number().min(1).default(zb),limit:Tt.coerce.number().optional(),title:Tt.string().optional(),description:Tt.string().optional(),status:Tt.enum(xe).default("PENDING"),orderBy:Tt.enum(["asc","desc"]).default("desc")}),ki=class{constructor(e){this.pendencyRepository=e}async handle(e,t){let{limit:i,page:o,...s}=um.parse(e.query),n=i?i*o-i:void 0,a=e.user.id,[m,p]=await Promise.all([this.pendencyRepository.findByUserId({userId:a,pagination:{offset:n,limit:i},filter:s}),this.pendencyRepository.count({filter:{...s,userId:a}})]),h=i?Math.max(Math.ceil(p/i),1):1;return t.status(200).json({page:o,totalPages:h,offset:n,limit:i,pendencies:m})}};import{extendZodWithOpenApi as Zb}from"@asteasolutions/zod-to-openapi";import Oi from"zod";Zb(Oi);var gm=Oi.object({password:Oi.string(),email:Oi.email()}),Bi=class{constructor(e,t,i){this.userRepository=e;this.bcrypt=t;this.jwtService=i}async handle(e,t){let{email:i,password:o}=gm.parse(e.body),s=await this.userRepository.findByEmail(i);if(!s)return t.status(401).json({message:"Usu\xE1rio n\xE3o existe."});if(!await this.bcrypt.compare({password:o,hashedPassword:s.passwordHash}))throw new je("Senha inv\xE1lida.");let{id:a,role:m}=s,p=this.jwtService.sign({id:a,role:m,email:i});return t.status(200).json({token:p})}};import{extendZodWithOpenApi as Kb}from"@asteasolutions/zod-to-openapi";import Er from"zod";var qi=8;Kb(Er);var ym=Er.object({name:Er.string("Nome \xE9 obrigat\xF3rio.").min(1,"Nome \xE9 obrigat\xF3rio."),emailAddress:Er.email("E-mail inv\xE1lido.").min(1,"E-mail \xE9 obrigat\xF3rio."),password:Er.string("A senha \xE9 obrigat\xF3ria.").min(qi,`A senha deve ter pelo menos ${qi} caracteres.`),confirmPassword:Er.string("A senha \xE9 obrigat\xF3ria.").min(qi,`A senha deve ter pelo menos ${qi} caracteres.`)}).refine(r=>r.password===r.confirmPassword,{message:"As senhas n\xE3o coincidem.",path:["confirmPassword"]}),Ni=class{constructor(e,t){this.userRepository=e;this.bcrypt=t}async handle(e,t){let{emailAddress:i,name:o,password:s}=ym.parse(e.body);if(await this.userRepository.findByEmail(i))throw new ce("Usu\xE1rio j\xE1 existe.");let a=await this.bcrypt.hash(s);return await this.userRepository.create({name:o,emailAddress:i,passwordHash:a}),t.status(201).json()}};var qc={method:"post",path:"/auth/sign-up",tags:["Authentication"],summary:"Create a new user",request:{body:{content:{"application/json":{schema:ym}}}},responses:{201:{description:"User created successfully",summary:"User Registration Successful",content:{"application/json":{schema:b.object({message:b.string()})}}},400:{description:"Invalid input data provided",summary:"Validation Error",content:{"application/json":{schema:b.object({errors:b.record(b.string(),b.string())})}}},409:{description:"User already exists with this email",summary:"User Already Exists",content:{"application/json":{schema:b.object({message:b.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:b.object({message:b.string()})}}}}},Nc={method:"post",path:"/auth/sign-in",tags:["Authentication"],summary:"Sign in",request:{body:{content:{"application/json":{schema:gm}}}},responses:{200:{description:"Authentication successful, JWT token returned",summary:"Login Successful",content:{"application/json":{schema:b.object({token:b.string()})}}},400:{description:"Invalid credentials or input data",summary:"Validation Error",content:{"application/json":{schema:b.object({errors:b.record(b.string(),b.string())})}}},401:{description:"Invalid email or password",summary:"Authentication Failed",content:{"application/json":{schema:b.object({message:b.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:b.object({message:b.string()})}}}}},Gc={method:"get",path:"/auth/user",tags:["Authentication"],summary:"Search for authenticated user",security:[{bearerAuth:[]}],responses:{200:{description:"Authenticated user information retrieved successfully",summary:"User Information Retrieved",content:{"application/json":{schema:b.object({name:b.string(),id:b.string(),avatarUrl:b.string().nullable(),createdAt:b.date(),updatedAt:b.date(),emailAddress:b.string(),orcid:b.string().nullable(),phone:b.string().nullable(),lattesUrl:b.string().nullable(),role:b.enum(de)}).nullable()}}},400:{description:"Invalid request parameters",summary:"Validation Error",content:{"application/json":{schema:b.object({errors:b.record(b.string(),b.string())})}}},404:{description:"User not found or not authenticated",summary:"User Not Found",content:{"application/json":{schema:b.object({message:b.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:b.object({message:b.string()})}}}}},_c={method:"get",path:"/auth/user/news",tags:["Authentication"],summary:"List authenticated user news",security:[{bearerAuth:[]}],request:{query:cm},responses:{200:{description:"Paginated list of authenticated user news retrieved successfully",summary:"User News Retrieved",content:{"application/json":{schema:b.object({page:b.number(),totalPages:b.number(),offset:b.number().optional(),limit:b.number().optional(),news:b.object({content:b.string(),id:b.string(),title:b.string(),createdAt:b.date(),updatedAt:b.date(),imageUrl:b.string().nullable()})})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:b.object({errors:b.record(b.string(),b.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:b.object({message:b.string()})}}}}},Lc={method:"get",path:"/auth/admin",tags:["Authentication"],summary:"Verify admin access",security:[{bearerAuth:[]}],responses:{200:{description:"Admin access verified successfully",summary:"Admin Access Granted",content:{"application/json":{schema:b.object({success:b.boolean()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:b.object({message:b.string()})}}}}},Wc={method:"get",path:"/auth/certifications",tags:["Authentication"],summary:"List all authenticated user's certifications",security:[{bearerAuth:[]}],request:{query:lm},responses:{200:{description:"Paginated list of authenticated user certifications retrieved successfully",summary:"User Certifications Retrieved",content:{"application/json":{schema:b.object({page:b.number(),totalPages:b.number(),offset:b.number().optional(),limit:b.number().optional(),certifications:b.object({description:b.string(),id:b.string(),title:b.string(),certificationUrl:b.string(),createdAt:b.date(),updatedAt:b.date(),userId:b.string()})})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:b.object({errors:b.record(b.string(),b.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:b.object({message:b.string()})}}}}},Hc={method:"get",path:"/auth/pendencies",tags:["Authentication"],summary:"List all authenticated user's pendencies",security:[{bearerAuth:[]}],request:{query:um},responses:{200:{description:"Paginated list of authenticated user pendencies retrieved successfully",summary:"User Pendencies Retrieved",content:{"application/json":{schema:b.object({page:b.number(),totalPages:b.number(),offset:b.number().optional(),limit:b.number().optional(),pendencies:b.object({id:b.string(),title:b.string(),description:b.string(),status:b.enum(xe),createdAt:b.date(),updatedAt:b.date(),userId:b.string()})})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:b.object({errors:b.record(b.string(),b.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:b.object({message:b.string()})}}}}};import R from"zod";import{extendZodWithOpenApi as Jb}from"@asteasolutions/zod-to-openapi";import fm from"zod";Jb(fm);var hm=fm.object({id:fm.uuid()}),Gi=class{constructor(e,t){this.bookVolumeRepository=e;this.firebaseStorageService=t}async handle(e,t){let{id:i}=hm.parse({id:e.params.id}),o=await this.bookVolumeRepository.findById(i);if(!o)throw new d("O volume de livro n\xE3o existe.");return o.authorImageUrl&&this.firebaseStorageService.deleteFile({fileUrl:o.authorImageUrl}),o.coverImageUrl&&this.firebaseStorageService.deleteFile({fileUrl:o.coverImageUrl}),o.catalogSheetUrl&&this.firebaseStorageService.deleteFile({fileUrl:o.catalogSheetUrl}),await this.bookVolumeRepository.deleteById(i),t.sendStatus(200)}};import{extendZodWithOpenApi as Yb}from"@asteasolutions/zod-to-openapi";import Rm from"zod";Yb(Rm);var Pm=Rm.object({id:Rm.uuid()}),_i=class{constructor(e){this.bookVolumeRepository=e}async handle(e,t){let{id:i}=Pm.parse({id:e.params.id}),o=await this.bookVolumeRepository.findById(i);if(!o)throw new d("Volume de livro n\xE3o encontrado.");return t.status(200).json(o)}};import{extendZodWithOpenApi as Xb}from"@asteasolutions/zod-to-openapi";import At from"zod";var Qb=1;Xb(At);var bm=At.object({page:At.coerce.number().min(1).default(Qb),limit:At.coerce.number().optional(),title:At.string().optional(),author:At.string().optional(),description:At.string().optional(),orderBy:At.enum(["asc","desc"]).default("desc")}),Li=class{constructor(e){this.bookVolumeRepository=e}async handle(e,t){let{limit:i,page:o,...s}=bm.parse(e.query),n=i?i*o-i:void 0,[a,m]=await Promise.all([this.bookVolumeRepository.find({pagination:{offset:n,limit:i},filter:s}),this.bookVolumeRepository.count({filter:s})]),p=i?Math.max(Math.ceil(m/i),1):1;return t.status(200).json({page:o,totalPages:p,offset:n,limit:i,bookVolumes:a})}};import{extendZodWithOpenApi as eC}from"@asteasolutions/zod-to-openapi";import Le from"zod";var M={NEWS:"images/news",USER:"images/user",IN_MEMORIAM:"images/in-memoriam",PARTNER:"images/partners",CERTIFICATION:"documents/certifications",PENDENCY:"documents/pendencies",REGIMENT:"documents/regiments",MEETING_MINUTE:"documents/meeting-minutes",INTERNATIONAL_SCIENTIFIC_CONGRESS_GALLERY:"images/international-scientific-congress-gallery",GALLERY:"images/regional-congress-gallery",REGIONAL_CONGRESS_GALLERY:"images/regional-congress-gallery",WEBINAR:"images/webinars",COURSE:"images/courses",POST_GRADUATE_PROGRAM:"images/post-graduate-programs",EVENT:"images/events",SCIENTIFIC_JOURNAL:"images/scientific-journals",BOOK_VOLUME_AUTHOR_IMAGE:"images/book-volumes/authors",BOOK_VOLUME_COVER:"images/book-volumes/covers",BOOK_VOLUME_CATALOG_SHEET:"documents/book-volumes/catalog-sheets",RESEARCH_GROUP_LOGO:"images/research-groups",MUSEUM:"images/museums",REDECT_HIGHLIGHT:"images/redect-highlights"};var Vc=5,$c=1024,tC=$c*$c,rC=Vc*tC;eC(Le);var Cm=Le.object({id:Le.uuid(),volumeNumber:Le.coerce.number().int().positive().optional(),year:Le.coerce.number().int().positive().optional(),title:Le.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio.").optional(),authorId:Le.string().uuid("ID do autor deve ser um UUID v\xE1lido.").optional(),accessUrl:Le.string().url("URL de acesso deve ser v\xE1lida").optional(),catalogSheetUrl:Le.string().url("URL da ficha catalogr\xE1fica deve ser v\xE1lida").optional(),description:Le.string().optional(),coverImage:Le.any().refine(r=>r==null?!0:typeof r!="object"||typeof r.size!="number"?!1:r.size<=rC,`A imagem da capa deve ter no m\xE1ximo ${Vc}MB.`).optional()}),Wi=class{constructor(e,t){this.bookVolumeRepository=e;this.firebaseStorageService=t}async handle(e,t){let{id:i,volumeNumber:o,year:s,title:n,authorId:a,accessUrl:m,catalogSheetUrl:p,description:h,coverImage:A}=Cm.parse({id:e.params.id,...e.body,coverImage:e.files?.coverImage?.[0]}),G=await this.bookVolumeRepository.findById(i);if(!G)throw new d("O volume de livro n\xE3o existe.");let re=G.coverImageUrl;return A&&(re=await this.firebaseStorageService.uploadFile({file:A,id:i,folder:M.BOOK_VOLUME_COVER})),await this.bookVolumeRepository.update({id:i,volumeNumber:o,year:s,title:n,authorId:a,accessUrl:m,catalogSheetUrl:p,description:h,coverImageUrl:re}),t.sendStatus(200)}};var zc={method:"post",path:"/book-volumes",tags:["Book Volumes"],summary:"Create book volume",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:R.object({volumeNumber:R.number().int().positive().openapi({description:"N\xFAmero do volume"}),year:R.number().int().positive().openapi({description:"Ano de publica\xE7\xE3o"}),title:R.string().min(1).openapi({description:"T\xEDtulo do livro"}),author:R.string().uuid().openapi({description:"ID do autor (UUID)"}),accessUrl:R.string().url().optional().openapi({description:"URL de acesso ao livro"}),description:R.string().optional().openapi({description:"Descri\xE7\xE3o do livro"}),authorImage:R.string().optional().openapi({description:"Imagem do autor (m\xE1ximo 5MB)",type:"string",format:"binary"}),coverImage:R.string().optional().openapi({description:"Imagem da capa (m\xE1ximo 5MB)",type:"string",format:"binary"}),catalogSheet:R.string().optional().openapi({description:"Ficha catalogr\xE1fica (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{201:{description:"Book volume created successfully",summary:"Volume Created"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:R.object({errors:R.record(R.string(),R.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:R.object({message:R.string()})}}}}},Zc={method:"get",path:"/book-volumes",tags:["Book Volumes"],summary:"List book volumes",security:[{bearerAuth:[]}],request:{query:bm},responses:{200:{description:"Paginated list of book volumes retrieved successfully",summary:"Volumes Retrieved",content:{"application/json":{schema:R.object({page:R.number(),totalPages:R.number(),offset:R.number().optional(),limit:R.number().optional(),bookVolumes:R.array(R.object({id:R.string(),volumeNumber:R.number(),year:R.number(),title:R.string(),author:R.object({id:R.string(),name:R.string(),emailAddress:R.string(),avatarUrl:R.string().nullable(),orcid:R.string().nullable(),lattesUrl:R.string().nullable(),role:R.string()}),accessUrl:R.string().nullable(),authorImageUrl:R.string().nullable(),coverImageUrl:R.string().nullable(),catalogSheetUrl:R.string().nullable(),description:R.string().nullable(),createdAt:R.date(),updatedAt:R.date()}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:R.object({errors:R.record(R.string(),R.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:R.object({message:R.string()})}}}}},Kc={method:"get",path:"/book-volumes/{id}",tags:["Book Volumes"],summary:"Find book volume by ID",security:[{bearerAuth:[]}],request:{params:Pm},responses:{200:{description:"Book volume details retrieved successfully",summary:"Volume Retrieved",content:{"application/json":{schema:R.object({id:R.string(),volumeNumber:R.number(),year:R.number(),title:R.string(),author:R.object({id:R.string(),name:R.string(),emailAddress:R.string(),avatarUrl:R.string().nullable(),orcid:R.string().nullable(),lattesUrl:R.string().nullable(),role:R.string()}),accessUrl:R.string().nullable(),authorImageUrl:R.string().nullable(),coverImageUrl:R.string().nullable(),catalogSheetUrl:R.string().nullable(),description:R.string().nullable(),createdAt:R.date(),updatedAt:R.date()}).nullable()}}},400:{description:"Invalid volume ID format",summary:"Validation Error",content:{"application/json":{schema:R.object({errors:R.record(R.string(),R.string())})}}},404:{description:"Book volume not found with the provided ID",summary:"Volume Not Found",content:{"application/json":{schema:R.object({message:R.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:R.object({message:R.string()})}}}}},Jc={method:"put",path:"/book-volumes/{id}",tags:["Book Volumes"],summary:"Update book volume",security:[{bearerAuth:[]}],request:{params:Cm.pick({id:!0}),body:{content:{"multipart/form-data":{schema:R.object({volumeNumber:R.number().int().positive().optional().openapi({description:"N\xFAmero do volume"}),year:R.number().int().positive().optional().openapi({description:"Ano de publica\xE7\xE3o"}),title:R.string().min(1).optional().openapi({description:"T\xEDtulo do livro"}),authorId:R.string().uuid().optional().openapi({description:"ID do autor (UUID)"}),accessUrl:R.string().url().optional().openapi({description:"URL de acesso ao livro"}),description:R.string().optional().openapi({description:"Descri\xE7\xE3o do livro"}),authorImage:R.string().optional().openapi({description:"Imagem do autor (m\xE1ximo 5MB)",type:"string",format:"binary"}),coverImage:R.string().optional().openapi({description:"Imagem da capa (m\xE1ximo 5MB)",type:"string",format:"binary"}),catalogSheet:R.string().optional().openapi({description:"Ficha catalogr\xE1fica (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{200:{description:"Book volume updated successfully",summary:"Volume Updated"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:R.object({errors:R.record(R.string(),R.string())})}}},404:{description:"Book volume not found with the provided ID",summary:"Volume Not Found",content:{"application/json":{schema:R.object({message:R.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:R.object({message:R.string()})}}}}},Yc={method:"delete",path:"/book-volumes/{id}",tags:["Book Volumes"],summary:"Delete book volume",security:[{bearerAuth:[]}],request:{params:hm},responses:{200:{description:"Book volume deleted successfully",summary:"Volume Deleted"},400:{description:"Invalid volume ID format",summary:"Validation Error",content:{"application/json":{schema:R.object({errors:R.record(R.string(),R.string())})}}},404:{description:"Book volume not found with the provided ID",summary:"Volume Not Found",content:{"application/json":{schema:R.object({message:R.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:R.object({message:R.string()})}}}}};import E from"zod";import{extendZodWithOpenApi as iC}from"@asteasolutions/zod-to-openapi";import Im from"zod";iC(Im);var Tm=Im.object({id:Im.string()}),Hi=class{constructor(e,t){this.certificationRepository=e;this.firebaseStorageService=t}async handle(e,t){let{id:i}=Tm.parse({id:e.params.certification_id}),o=await this.certificationRepository.findById(i);if(!o)throw new d("A certifica\xE7\xE3o n\xE3o existe.");return await Promise.all([this.certificationRepository.deleteById(o.id),this.firebaseStorageService.deleteFile({fileUrl:o.certificationUrl})]),t.sendStatus(204)}};import{extendZodWithOpenApi as oC}from"@asteasolutions/zod-to-openapi";import Am from"zod";oC(Am);var Sm=Am.object({id:Am.uuid()}),$i=class{constructor(e){this.certificationRepository=e}async handle(e,t){let{id:i}=Sm.parse(e.params),o=await this.certificationRepository.findById(i);if(!o)throw new d("Certificado n\xE3o encontrado.");return t.status(200).json(o)}};import{extendZodWithOpenApi as sC}from"@asteasolutions/zod-to-openapi";import St from"zod";var nC=1;sC(St);var xm=St.object({page:St.coerce.number().min(1).default(nC),limit:St.coerce.number().optional(),title:St.string().optional(),description:St.string().optional(),userId:St.uuid().optional(),orderBy:St.enum(["asc","desc"]).default("desc")}),Vi=class{constructor(e){this.certificationRepository=e}async handle(e,t){let{limit:i,page:o,...s}=xm.parse(e.query),n=i?i*o-i:void 0,[a,m]=await Promise.all([this.certificationRepository.find({pagination:{offset:n,limit:i},filter:s}),this.certificationRepository.count({filter:s})]),p=i?Math.max(Math.ceil(m/i),1):1;return t.status(200).json({page:o,totalPages:p,offset:n,limit:i,certifications:a})}};import{extendZodWithOpenApi as aC}from"@asteasolutions/zod-to-openapi";import wr from"zod";aC(wr);var Mm=wr.object({userId:wr.uuid(),title:wr.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),description:wr.string().min(1,"Descri\xE7\xE3o \xE9 obrigat\xF3ria."),certification:wr.any().refine(r=>r&&typeof r=="object"&&r.size>0,"Arquivo do certificado \xE9 obrigat\xF3rio")}),zi=class{constructor(e,t,i){this.userRepository=e;this.certificationRepository=t;this.firebaseStorageService=i}async handle(e,t){let{userId:i,title:o,description:s,certification:n}=Mm.parse({...e.body,userId:e.params.user_id,certification:e.file});if(!await this.userRepository.findById(i))throw new le("O usu\xE1rio n\xE3o existe.");let m=await this.firebaseStorageService.uploadFile({file:n,id:i,folder:M.CERTIFICATION});return await this.certificationRepository.register({userId:i,title:o,description:s,certificationUrl:m}),t.sendStatus(201)}};import{extendZodWithOpenApi as mC}from"@asteasolutions/zod-to-openapi";import vr from"zod";mC(vr);var Ki=vr.object({id:vr.uuid(),title:vr.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),description:vr.string().min(1,"Descri\xE7\xE3o \xE9 obrigat\xF3ria."),certification:vr.any().refine(r=>r==null||typeof r=="object"&&typeof r.size=="number"&&(r.size===0||r.size>0),"Arquivo do certificado \xE9 inv\xE1lido").optional()}),Zi=class{constructor(e,t){this.certificationRepository=e;this.firebaseStorageService=t}async handle(e,t){let{certification:i,id:o,...s}=Ki.parse({...e.body,id:e.params.id,certification:e.file}),n=await this.certificationRepository.findById(o);if(!n)throw new le("A certifica\xE7\xE3o n\xE3o existe");let a=n.certificationUrl;return i&&i.size>0&&(a=await this.firebaseStorageService.updateFile({file:i,id:n.userId,folder:M.CERTIFICATION,fileUrl:n.certificationUrl})),await this.certificationRepository.update({...s,id:o,certificationUrl:a}),t.sendStatus(204)}};var Xc={method:"post",path:"/certifications/{user_id}",tags:["Certifications"],summary:"Register certification for user",security:[{bearerAuth:[]}],request:{params:E.object({user_id:E.string().openapi({param:{name:"user_id",in:"path"}})}),body:{content:{"multipart/form-data":{schema:Mm.omit({userId:!0})}}}},responses:{201:{description:"Certification registered successfully for the user",summary:"Certification Registered",content:{"application/json":{schema:E.object({message:E.string()})}}},400:{description:"Invalid input data or file format",summary:"Validation Error",content:{"application/json":{schema:E.object({errors:E.record(E.string(),E.string())})}}},404:{description:"User not found with the provided ID",summary:"User Not Found",content:{"application/json":{schema:E.object({message:E.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:E.object({message:E.string()})}}}}},Qc={method:"get",path:"/certifications",tags:["Certifications"],summary:"List certifications",security:[{bearerAuth:[]}],request:{query:xm},responses:{200:{description:"Paginated list of certifications with user information retrieved successfully",summary:"Certifications Retrieved",content:{"application/json":{schema:E.object({page:E.number(),totalPages:E.number(),offset:E.number().optional(),limit:E.number().optional(),certifications:E.array(E.object({description:E.string(),userId:E.string(),title:E.string(),id:E.string(),createdAt:E.date(),updatedAt:E.date(),certificationUrl:E.url(),user:E.object({id:E.uuid(),name:E.string(),createdAt:E.date(),updatedAt:E.date(),avatarUrl:E.string().nullable(),emailAddress:E.email(),orcid:E.string().nullable(),phone:E.string().nullable(),lattesUrl:E.url().nullable(),role:E.enum(de)})}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:E.object({errors:E.record(E.string(),E.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:E.object({message:E.string()})}}}}},eu={method:"get",path:"/certifications/{certification_id}",tags:["Certifications"],summary:"Find certification by ID",security:[{bearerAuth:[]}],request:{params:Sm},responses:{200:{description:"Certification details retrieved successfully",summary:"Certification Retrieved",content:{"application/json":{schema:E.object({description:E.string(),userId:E.string(),title:E.string(),id:E.string(),createdAt:E.date(),updatedAt:E.date(),certificationUrl:E.url()}).nullable()}}},400:{description:"Invalid certification ID format",summary:"Validation Error",content:{"application/json":{schema:E.object({errors:E.record(E.string(),E.string())})}}},404:{description:"Certification not found with the provided ID",summary:"Certification Not Found",content:{"application/json":{schema:E.object({message:E.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:E.object({message:E.string()})}}}}},tu={method:"put",path:"/certifications/{certification_id}",tags:["Certifications"],summary:"Update certification",security:[{bearerAuth:[]}],request:{params:Ki.pick({id:!0}).transform(()=>({certification_id:""})),body:{content:{"multipart/form-data":{schema:Ki.omit({id:!0})}}}},responses:{204:{description:"Certification updated successfully",summary:"Certification Updated"},400:{description:"Invalid input data or file format",summary:"Validation Error",content:{"application/json":{schema:E.object({errors:E.record(E.string(),E.string())})}}},404:{description:"Certification not found with the provided ID",summary:"Certification Not Found",content:{"application/json":{schema:E.object({message:E.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:E.object({message:E.string()})}}}}},ru={method:"delete",path:"/certifications/{certification_id}",tags:["Certifications"],summary:"Delete certification",security:[{bearerAuth:[]}],request:{params:Tm},responses:{204:{description:"Certification deleted successfully",summary:"Certification Deleted"},400:{description:"Invalid certification ID format",summary:"Validation Error",content:{"application/json":{schema:E.object({errors:E.record(E.string(),E.string())})}}},404:{description:"Certification not found with the provided ID",summary:"Certification Not Found",content:{"application/json":{schema:E.object({message:E.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:E.object({message:E.string()})}}}}};import P from"zod";import{extendZodWithOpenApi as pC}from"@asteasolutions/zod-to-openapi";import Em from"zod";pC(Em);var wm=Em.object({id:Em.uuid()}),Ji=class{constructor(e,t){this.courseRepository=e;this.firebaseStorageService=t}async handle(e,t){let{id:i}=wm.parse({id:e.params.id}),o=await this.courseRepository.findById(i);if(!o)throw new d("O curso n\xE3o existe.");return o.imageUrl&&this.firebaseStorageService.deleteFile({fileUrl:o.imageUrl}),await this.courseRepository.deleteById(i),t.sendStatus(200)}};import{extendZodWithOpenApi as dC}from"@asteasolutions/zod-to-openapi";import vm from"zod";dC(vm);var Um=vm.object({id:vm.uuid()}),Yi=class{constructor(e){this.courseRepository=e}async handle(e,t){let{id:i}=Um.parse({id:e.params.id}),o=await this.courseRepository.findById(i);if(!o)throw new d("Curso n\xE3o encontrado.");return t.status(200).json(o)}};import{extendZodWithOpenApi as lC}from"@asteasolutions/zod-to-openapi";import xt from"zod";var cC=1;lC(xt);var jm=xt.object({page:xt.coerce.number().min(1).default(cC),limit:xt.coerce.number().optional(),title:xt.string().optional(),description:xt.string().optional(),coordinator:xt.string().optional(),orderBy:xt.enum(["asc","desc"]).default("desc")}),Xi=class{constructor(e){this.courseRepository=e}async handle(e,t){let{limit:i,page:o,...s}=jm.parse(e.query),n=i?i*o-i:void 0,[a,m]=await Promise.all([this.courseRepository.find({pagination:{offset:n,limit:i},filter:s}),this.courseRepository.count({filter:s})]),p=i?Math.max(Math.ceil(m/i),1):1;return t.status(200).json({page:o,totalPages:p,offset:n,limit:i,courses:a})}};import{extendZodWithOpenApi as uC}from"@asteasolutions/zod-to-openapi";import Ce from"zod";var ou=5,iu=1024,gC=iu*iu,yC=ou*gC;uC(Ce);var Fm=Ce.object({id:Ce.uuid(),title:Ce.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio.").optional(),coordinatorId:Ce.string().uuid("Coordenador \xE9 obrigat\xF3rio.").optional(),email:Ce.string().email("E-mail deve ser v\xE1lido.").optional(),location:Ce.string().min(1,"Localiza\xE7\xE3o \xE9 obrigat\xF3ria.").optional(),scheduledAt:Ce.coerce.date().optional(),registrationLink:Ce.url("URL de inscri\xE7\xE3o deve ser v\xE1lida").optional(),description:Ce.string().optional(),instructorIds:Ce.transform(r=>typeof r=="string"?r.split(","):r).pipe(Ce.array(Ce.uuid())).optional(),image:Ce.any().refine(r=>r==null?!0:typeof r!="object"||typeof r.size!="number"?!1:r.size<=yC,`A imagem deve ter no m\xE1ximo ${ou}MB.`).optional()}),Qi=class{constructor(e,t){this.courseRepository=e;this.firebaseStorageService=t}async handle(e,t){let{id:i,image:o,title:s,coordinatorId:n,email:a,location:m,scheduledAt:p,registrationLink:h,description:A,instructorIds:G}=Fm.parse({id:e.params.id,...e.body,image:e.file}),re=await this.courseRepository.findById(i);if(!re)throw new d("O curso n\xE3o existe.");let ie=re.imageUrl;if(o&&(ie=await this.firebaseStorageService.uploadFile({file:o,id:i,folder:M.COURSE})),!ie)throw new Re("URL da imagem \xE9 obrigat\xF3rio");return await this.courseRepository.update({id:i,title:s,coordinatorId:n,email:a,location:m,scheduledAt:p,registrationLink:h,description:A,imageUrl:ie,instructorIds:G}),t.sendStatus(200)}};var su={method:"post",path:"/courses",tags:["Courses"],summary:"Create course",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:P.object({title:P.string().min(1).openapi({description:"T\xEDtulo do curso"}),coordinator:P.string().min(1).openapi({description:"Nome do coordenador"}),email:P.string().email().openapi({description:"E-mail de contato"}),location:P.string().min(1).openapi({description:"Localiza\xE7\xE3o do curso"}),scheduledAt:P.string().openapi({description:"Data e hora agendada (ISO 8601)",example:"2024-01-01T10:00:00Z"}),registrationLink:P.string().url().optional().openapi({description:"Link de inscri\xE7\xE3o"}),description:P.string().optional().openapi({description:"Descri\xE7\xE3o do curso"}),instructorIds:P.string().openapi({description:"IDs dos instrutores separados por v\xEDrgula",example:"uuid1,uuid2,uuid3"}),image:P.string().optional().openapi({description:"Imagem do curso (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{201:{description:"Course created successfully",summary:"Course Created"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:P.object({errors:P.record(P.string(),P.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:P.object({message:P.string()})}}}}},nu={method:"get",path:"/courses",tags:["Courses"],summary:"List courses",security:[{bearerAuth:[]}],request:{query:jm},responses:{200:{description:"Paginated list of courses with instructor information retrieved successfully",summary:"Courses Retrieved",content:{"application/json":{schema:P.object({page:P.number(),totalPages:P.number(),offset:P.number().optional(),limit:P.number().optional(),courses:P.array(P.object({id:P.string(),title:P.string(),imageUrl:P.string().nullable(),coordinator:P.string(),email:P.string(),scheduledAt:P.date(),location:P.string(),registrationLink:P.string().nullable(),description:P.string().nullable(),createdAt:P.date(),updatedAt:P.date(),instructors:P.array(P.object({id:P.uuid(),name:P.string(),emailAddress:P.email(),avatarUrl:P.string().nullable(),createdAt:P.date(),updatedAt:P.date()}))}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:P.object({errors:P.record(P.string(),P.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:P.object({message:P.string()})}}}}},au={method:"get",path:"/courses/{id}",tags:["Courses"],summary:"Find course by ID",security:[{bearerAuth:[]}],request:{params:Um},responses:{200:{description:"Course details retrieved successfully",summary:"Course Retrieved",content:{"application/json":{schema:P.object({id:P.string(),title:P.string(),imageUrl:P.string().nullable(),coordinator:P.string(),email:P.string(),scheduledAt:P.date(),location:P.string(),registrationLink:P.string().nullable(),description:P.string().nullable(),createdAt:P.date(),updatedAt:P.date(),instructors:P.array(P.object({id:P.uuid(),name:P.string(),emailAddress:P.email(),avatarUrl:P.string().nullable(),createdAt:P.date(),updatedAt:P.date()}))}).nullable()}}},400:{description:"Invalid course ID format",summary:"Validation Error",content:{"application/json":{schema:P.object({errors:P.record(P.string(),P.string())})}}},404:{description:"Course not found with the provided ID",summary:"Course Not Found",content:{"application/json":{schema:P.object({message:P.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:P.object({message:P.string()})}}}}},mu={method:"put",path:"/courses/{id}",tags:["Courses"],summary:"Update course",security:[{bearerAuth:[]}],request:{params:Fm.pick({id:!0}),body:{content:{"multipart/form-data":{schema:P.object({title:P.string().min(1).optional().openapi({description:"T\xEDtulo do curso"}),coordinator:P.string().min(1).optional().openapi({description:"Nome do coordenador"}),email:P.string().email().optional().openapi({description:"E-mail de contato"}),location:P.string().min(1).optional().openapi({description:"Localiza\xE7\xE3o do curso"}),scheduledAt:P.string().optional().openapi({description:"Data e hora agendada (ISO 8601)",example:"2024-01-01T10:00:00Z"}),registrationLink:P.string().url().optional().openapi({description:"Link de inscri\xE7\xE3o"}),description:P.string().optional().openapi({description:"Descri\xE7\xE3o do curso"}),instructorIds:P.string().optional().openapi({description:"IDs dos instrutores separados por v\xEDrgula",example:"uuid1,uuid2,uuid3"}),image:P.string().optional().openapi({description:"Imagem do curso (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{200:{description:"Course updated successfully",summary:"Course Updated"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:P.object({errors:P.record(P.string(),P.string())})}}},404:{description:"Course not found with the provided ID",summary:"Course Not Found",content:{"application/json":{schema:P.object({message:P.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:P.object({message:P.string()})}}}}},pu={method:"delete",path:"/courses/{id}",tags:["Courses"],summary:"Delete course",security:[{bearerAuth:[]}],request:{params:wm},responses:{200:{description:"Course deleted successfully",summary:"Course Deleted"},400:{description:"Invalid course ID format",summary:"Validation Error",content:{"application/json":{schema:P.object({errors:P.record(P.string(),P.string())})}}},404:{description:"Course not found with the provided ID",summary:"Course Not Found",content:{"application/json":{schema:P.object({message:P.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:P.object({message:P.string()})}}}}};import I from"zod";import{extendZodWithOpenApi as fC}from"@asteasolutions/zod-to-openapi";import We from"zod";fC(We);var Dm=We.object({code:We.string(),title:We.string(),description:We.string().optional(),notes:We.string().optional(),leaderId:We.uuid(),deputyLeaderId:We.uuid(),secretaryId:We.uuid(),memberIds:We.array(We.uuid())}),eo=class{constructor(e){this.etpRepository=e}async handle(e,t){let{code:i,title:o,description:s,notes:n,leaderId:a,deputyLeaderId:m,secretaryId:p,memberIds:h}=Dm.parse(e.body);if(await this.etpRepository.findByCode(i))throw new ce("J\xE1 existe um ETP cadastrado com este c\xF3digo.");return await this.etpRepository.create({code:i,title:o,description:s,notes:n,leaderId:a,deputyLeaderId:m,secretaryId:p,memberIds:h}),t.sendStatus(201)}};import{extendZodWithOpenApi as hC}from"@asteasolutions/zod-to-openapi";import km from"zod";hC(km);var Om=km.object({id:km.uuid()}),to=class{constructor(e){this.etpRepository=e}async handle(e,t){let{id:i}=Om.parse({id:e.params.id});if(!await this.etpRepository.findById(i))throw new d("O ETP n\xE3o existe.");return await this.etpRepository.deleteById(i),t.sendStatus(200)}};import{extendZodWithOpenApi as RC}from"@asteasolutions/zod-to-openapi";import Bm from"zod";RC(Bm);var io=Bm.object({id:Bm.uuid()}),ro=class{constructor(e){this.etpRepository=e}async handle(e,t){let{id:i}=io.parse({id:e.params.id}),o=await this.etpRepository.findById(i);if(!o)throw new d("O ETP n\xE3o existe.");return t.status(200).json(o)}};import{extendZodWithOpenApi as PC}from"@asteasolutions/zod-to-openapi";import Fe from"zod";PC(Fe);var qm=Fe.object({id:Fe.uuid(),code:Fe.string().optional(),title:Fe.string().optional(),description:Fe.string().optional(),notes:Fe.string().optional(),leaderId:Fe.uuid().optional(),deputyLeaderId:Fe.uuid().optional(),secretaryId:Fe.uuid().optional(),memberIds:Fe.array(Fe.uuid()).optional()}),oo=class{constructor(e){this.etpRepository=e}async handle(e,t){let{id:i,code:o,title:s,description:n,notes:a,leaderId:m,deputyLeaderId:p,secretaryId:h,memberIds:A}=qm.parse({id:e.params.id,...e.body});if(!await this.etpRepository.findById(i))throw new d("O ETP n\xE3o existe.");if(o){let re=await this.etpRepository.findByCode(o);if(re&&re.id!==i)throw new ce("J\xE1 existe um ETP com este c\xF3digo.")}return await this.etpRepository.update({id:i,code:o,title:s,description:n,notes:a,leaderId:m,deputyLeaderId:p,secretaryId:h,memberIds:A}),t.sendStatus(200)}};var bC=1,CC=9,so=I.object({id:I.uuid(),registrationNumber:I.string(),mainEtps:I.string().nullable(),formations:I.string().nullable(),degrees:I.array(I.enum(It)),occupations:I.string(),seniority:I.enum(Ct),institutions:I.string(),biography:I.string().nullable(),createdAt:I.date(),updatedAt:I.date(),user:I.object({id:I.uuid(),name:I.string(),emailAddress:I.string(),avatarUrl:I.string().nullable(),orcid:I.string().nullable(),phone:I.string().nullable(),lattesUrl:I.string().nullable(),role:I.enum(de)})}),du=I.object({id:I.uuid(),code:I.string(),title:I.string(),description:I.string().nullable(),notes:I.string().nullable(),createdAt:I.date(),updatedAt:I.date(),leader:I.object({id:I.uuid(),researcher:so}).nullable(),deputyLeader:I.object({id:I.uuid(),researcher:so}).nullable(),secretary:I.object({id:I.uuid(),researcher:so}).nullable(),members:I.array(so)}),lu={method:"post",path:"/etp",tags:["ETPs"],summary:"Create a new ETP with single leader, deputy leader, secretary and multiple members",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:Dm}}}},responses:{201:{description:"ETP created successfully",summary:"ETP Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:I.object({errors:I.record(I.string(),I.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:I.object({message:I.string()})}}},409:{description:"ETP with this code already exists",summary:"Conflict",content:{"application/json":{schema:I.object({message:I.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:I.object({message:I.string()})}}}}},cu={method:"get",path:"/etp",tags:["ETPs"],summary:"List all ETPs with pagination and filters",request:{query:I.object({page:I.coerce.number().min(1).default(bC).optional(),limit:I.coerce.number().min(1).default(CC).optional(),code:I.string().optional(),title:I.string().optional(),description:I.string().optional(),notes:I.string().optional(),orderBy:I.enum(["asc","desc"]).default("desc")})},responses:{200:{description:"List of ETPs retrieved successfully with pagination",summary:"ETPs Retrieved",content:{"application/json":{schema:I.object({page:I.number(),totalPages:I.number(),offset:I.number().optional(),limit:I.number().optional(),etps:I.array(du)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:I.object({message:I.string()})}}}}},uu={method:"get",path:"/etp/{id}",tags:["ETPs"],summary:"Find ETP by ID",request:{params:io},responses:{200:{description:"ETP details retrieved successfully",summary:"ETP Retrieved",content:{"application/json":{schema:du}}},400:{description:"Invalid ETP ID format",summary:"Validation Error",content:{"application/json":{schema:I.object({errors:I.record(I.string(),I.string())})}}},404:{description:"ETP not found with the provided ID",summary:"ETP Not Found",content:{"application/json":{schema:I.object({message:I.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:I.object({message:I.string()})}}}}},gu={method:"put",path:"/etp/{id}",tags:["ETPs"],summary:"Update ETP and manage user relationships (single leader, deputy leader, secretary, multiple members)",security:[{bearerAuth:[]}],request:{params:io,body:{content:{"application/json":{schema:qm.omit({id:!0})}}}},responses:{200:{description:"ETP updated successfully",summary:"ETP Updated"},400:{description:"Invalid input data or ETP ID format",summary:"Validation Error",content:{"application/json":{schema:I.object({errors:I.record(I.string(),I.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:I.object({message:I.string()})}}},404:{description:"ETP not found with the provided ID",summary:"ETP Not Found",content:{"application/json":{schema:I.object({message:I.string()})}}},409:{description:"ETP with this code already exists",summary:"Conflict",content:{"application/json":{schema:I.object({message:I.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:I.object({message:I.string()})}}}}},yu={method:"delete",path:"/etp/{id}",tags:["ETPs"],summary:"Delete ETP",security:[{bearerAuth:[]}],request:{params:Om},responses:{200:{description:"ETP deleted successfully",summary:"ETP Deleted"},400:{description:"Invalid ETP ID format",summary:"Validation Error",content:{"application/json":{schema:I.object({errors:I.record(I.string(),I.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:I.object({message:I.string()})}}},404:{description:"ETP not found with the provided ID",summary:"ETP Not Found",content:{"application/json":{schema:I.object({message:I.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:I.object({message:I.string()})}}}}};import _ from"zod";import{extendZodWithOpenApi as IC}from"@asteasolutions/zod-to-openapi";import Ee from"zod";var TC=5,fu=1024,AC=fu*fu,SC=TC*AC;IC(Ee);var Nm=Ee.object({title:Ee.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio"),description:Ee.string().optional(),startDate:Ee.coerce.date(),endDate:Ee.coerce.date(),location:Ee.string().optional(),format:Ee.enum(_e).default(_e.ONLINE),eventLink:Ee.union([Ee.url("Link do evento deve ser uma URL v\xE1lida"),Ee.literal("")]),status:Ee.enum(Ye).default(Ye.PENDING),image:Ee.any().refine(r=>!r||typeof r=="object"&&typeof r.mimetype=="string"&&r.mimetype.startsWith("image/")&&typeof r.size=="number"&&r.size<=SC,"A imagem deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.")}).refine(r=>r.format===_e.ONLINE?!!r.eventLink:r.format===_e.IN_PERSON?!!r.location:!0,{message:"Eventos online devem ter link e eventos presenciais devem ter localiza\xE7\xE3o",path:["format"]}),no=class{constructor(e,t){this.eventRepository=e;this.firebaseStorageService=t}async handle(e,t){let{title:i,description:o,startDate:s,endDate:n,location:a,format:m,eventLink:p,status:h,image:A}=Nm.parse({...e.body,image:e.file}),G=await this.eventRepository.create({title:i,description:o,startDate:s,endDate:n,location:a||void 0,format:m,eventLink:p||void 0,status:h??Ye.PENDING}),re=await this.firebaseStorageService.uploadFile({file:A,folder:M.EVENT,id:G.id});return await this.eventRepository.update({id:G.id,imageUrl:re}),t.sendStatus(201)}};import{extendZodWithOpenApi as xC}from"@asteasolutions/zod-to-openapi";import Gm from"zod";xC(Gm);var _m=Gm.object({id:Gm.uuid()}),ao=class{constructor(e){this.eventRepository=e}async handle(e,t){let{id:i}=_m.parse({id:e.params.id});if(!await this.eventRepository.findById(i))throw new d("O evento n\xE3o existe.");return await this.eventRepository.deleteById(i),t.sendStatus(200)}};import{extendZodWithOpenApi as MC}from"@asteasolutions/zod-to-openapi";import Lm from"zod";MC(Lm);var po=Lm.object({id:Lm.uuid()}),mo=class{constructor(e){this.eventRepository=e}async handle(e,t){let{id:i}=po.parse({id:e.params.id}),o=await this.eventRepository.findById(i);if(!o)throw new d("O evento n\xE3o existe.");return t.status(200).json(o)}};import{extendZodWithOpenApi as EC}from"@asteasolutions/zod-to-openapi";import Mt from"zod";var wC=1;EC(Mt);var Wm=Mt.object({page:Mt.coerce.number().min(1).default(wC),limit:Mt.coerce.number().optional(),title:Mt.string().optional(),status:Mt.enum(Ye).optional(),format:Mt.enum(_e).optional(),orderBy:Mt.enum(["asc","desc"]).default("desc")}),lo=class{constructor(e){this.eventRepository=e}async handle(e,t){let{page:i,limit:o,...s}=Wm.parse(e.query),n=o?o*i-o:void 0,[a,m]=await Promise.all([this.eventRepository.find({pagination:{offset:n,limit:o},filter:s}),this.eventRepository.count({filter:s})]),p=o?Math.max(Math.ceil(m/o),1):1;t.status(200).json({page:i,totalPages:p,offset:n,limit:o,events:a})}};import{extendZodWithOpenApi as vC}from"@asteasolutions/zod-to-openapi";import Ie from"zod";var UC=5,hu=1024,jC=hu*hu,FC=UC*jC;vC(Ie);var Hm=Ie.object({id:Ie.uuid(),title:Ie.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio").optional(),description:Ie.string().optional(),startDate:Ie.coerce.date().optional(),endDate:Ie.coerce.date().optional(),location:Ie.string().optional(),format:Ie.enum(_e).optional(),eventLink:Ie.union([Ie.url("Link do evento deve ser uma URL v\xE1lida"),Ie.literal("")]),status:Ie.enum(Ye).optional(),image:Ie.any().refine(r=>!r||typeof r=="object"&&typeof r.mimetype=="string"&&r.mimetype.startsWith("image/")&&typeof r.size=="number"&&r.size<=FC,"A imagem deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.").optional()}),co=class{constructor(e,t){this.eventRepository=e;this.firebaseStorageService=t}async handle(e,t){let{id:i,title:o,description:s,startDate:n,endDate:a,location:m,format:p,eventLink:h,status:A,image:G}=Hm.parse({id:e.params.id,...e.body,image:e.file});if(!await this.eventRepository.findById(i))throw new d("O evento n\xE3o existe.");let ie;return G&&(ie=await this.firebaseStorageService.uploadFile({file:G,folder:M.EVENT,id:i})),await this.eventRepository.update({id:i,title:o,description:s,startDate:n,endDate:a,location:m||void 0,format:p,eventLink:h||void 0,status:A,imageUrl:ie}),t.sendStatus(200)}};var Ru=_.object({id:_.uuid(),title:_.string(),description:_.string().nullable(),imageUrl:_.string().nullable(),startDate:_.date(),endDate:_.date(),location:_.string().nullable(),status:_.enum(Ye),format:_.enum(_e),eventLink:_.string().nullable(),createdAt:_.date(),updatedAt:_.date()}),Pu={method:"post",path:"/event",tags:["Events"],summary:"Create a new event",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:Nm}}}},responses:{201:{description:"Event created successfully",summary:"Event Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:_.object({errors:_.record(_.string(),_.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:_.object({message:_.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:_.object({message:_.string()})}}}}},bu={method:"get",path:"/event",tags:["Events"],summary:"List all events with pagination and filters",request:{query:Wm},responses:{200:{description:"List of events retrieved successfully with pagination",summary:"Events Retrieved",content:{"application/json":{schema:_.object({page:_.number(),totalPages:_.number(),offset:_.number().optional(),limit:_.number().optional(),events:_.array(Ru)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:_.object({errors:_.record(_.string(),_.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:_.object({message:_.string()})}}}}},Cu={method:"get",path:"/event/{id}",tags:["Events"],summary:"Find event by ID",request:{params:po},responses:{200:{description:"Event details retrieved successfully",summary:"Event Retrieved",content:{"application/json":{schema:Ru}}},400:{description:"Invalid event ID format",summary:"Validation Error",content:{"application/json":{schema:_.object({errors:_.record(_.string(),_.string())})}}},404:{description:"Event not found with the provided ID",summary:"Event Not Found",content:{"application/json":{schema:_.object({message:_.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:_.object({message:_.string()})}}}}},Iu={method:"put",path:"/event/{id}",tags:["Events"],summary:"Update event",security:[{bearerAuth:[]}],request:{params:po,body:{content:{"multipart/form-data":{schema:Hm.omit({id:!0})}}}},responses:{200:{description:"Event updated successfully",summary:"Event Updated"},400:{description:"Invalid input data or event ID format",summary:"Validation Error",content:{"application/json":{schema:_.object({errors:_.record(_.string(),_.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:_.object({message:_.string()})}}},404:{description:"Event not found with the provided ID",summary:"Event Not Found",content:{"application/json":{schema:_.object({message:_.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:_.object({message:_.string()})}}}}},Tu={method:"delete",path:"/event/{id}",tags:["Events"],summary:"Delete event",security:[{bearerAuth:[]}],request:{params:_m},responses:{200:{description:"Event deleted successfully",summary:"Event Deleted"},400:{description:"Invalid event ID format",summary:"Validation Error",content:{"application/json":{schema:_.object({errors:_.record(_.string(),_.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:_.object({message:_.string()})}}},404:{description:"Event not found with the provided ID",summary:"Event Not Found",content:{"application/json":{schema:_.object({message:_.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:_.object({message:_.string()})}}}}};import D from"zod";import{extendZodWithOpenApi as DC}from"@asteasolutions/zod-to-openapi";import Et from"zod";var Su=2,Au=1024,kC=Au*Au,OC=Su*kC;DC(Et);var $m=Et.object({name:Et.string().min(1,"Nome \xE9 obrigat\xF3rio"),birthDate:Et.coerce.date(),deathDate:Et.coerce.date(),biography:Et.string().optional(),photo:Et.any().refine(r=>r==null?!0:typeof r!="object"||typeof r.size!="number"?!1:r.size<=OC,`A imagem deve ter no m\xE1ximo ${Su}MB.`).optional(),role:Et.enum(Je)}).refine(r=>r.deathDate>r.birthDate,{message:"Data de falecimento deve ser posterior \xE0 data de nascimento",path:["deathDate"]}),uo=class{constructor(e,t){this.inMemoriamRepository=e;this.firebaseStorageService=t}async handle(e,t){let{name:i,birthDate:o,deathDate:s,biography:n,role:a,photo:m}=$m.parse({...e.body,photo:e.file}),p=await this.inMemoriamRepository.create({name:i,birthDate:o,deathDate:s,biography:n??void 0,role:a}),h;return m&&(h=await this.firebaseStorageService.uploadFile({file:m,id:p.id,folder:M.IN_MEMORIAM}),await this.inMemoriamRepository.update({id:p.id,photoUrl:h})),t.sendStatus(201)}};import{extendZodWithOpenApi as BC}from"@asteasolutions/zod-to-openapi";import Vm from"zod";BC(Vm);var zm=Vm.object({id:Vm.uuid()}),go=class{constructor(e,t){this.inMemoriamRepository=e;this.firebaseStorageService=t}async handle(e,t){let{id:i}=zm.parse({id:e.params.id}),o=await this.inMemoriamRepository.findById(i);if(!o)throw new d("O in memoriam n\xE3o existe.");return o.photoUrl&&this.firebaseStorageService.deleteFile({fileUrl:o.photoUrl}),await this.inMemoriamRepository.deleteById(i),t.sendStatus(200)}};import{extendZodWithOpenApi as qC}from"@asteasolutions/zod-to-openapi";import Zm from"zod";qC(Zm);var fo=Zm.object({id:Zm.uuid()}),yo=class{constructor(e){this.inMemoriamRepository=e}async handle(e,t){let{id:i}=fo.parse({id:e.params.id}),o=await this.inMemoriamRepository.findById(i);if(!o)throw new d("O in memoriam n\xE3o existe.");return t.status(200).json(o)}};import{extendZodWithOpenApi as NC}from"@asteasolutions/zod-to-openapi";import Km from"zod";NC(Km);var Jm=Km.object({role:Km.enum(Je)}),ho=class{constructor(e){this.inMemoriamRepository=e}async handle(e,t){let{role:i}=Jm.parse({role:e.params.role}),o=await this.inMemoriamRepository.findByRole(i);return t.status(200).json(o)}};import{extendZodWithOpenApi as GC}from"@asteasolutions/zod-to-openapi";import wt from"zod";var _C=1;GC(wt);var Ym=wt.object({page:wt.coerce.number().min(1).default(_C),limit:wt.coerce.number().optional(),name:wt.string().optional(),biography:wt.string().optional(),role:wt.enum(Je).optional(),orderBy:wt.enum(["asc","desc"]).default("desc")}),Ro=class{constructor(e){this.inMemoriamRepository=e}async handle(e,t){let{page:i,limit:o,...s}=Ym.parse(e.query),n=o?o*i-o:void 0,[a,m]=await Promise.all([this.inMemoriamRepository.find({pagination:{offset:n,limit:o},filter:s}),this.inMemoriamRepository.count({filter:s})]),p=o?Math.max(Math.ceil(m/o),1):1;t.status(200).json({page:i,totalPages:p,offset:n,limit:o,inMemoriam:a})}};import{extendZodWithOpenApi as LC}from"@asteasolutions/zod-to-openapi";import nt from"zod";var Mu=2,xu=1024,WC=xu*xu,HC=Mu*WC;LC(nt);var Xm=nt.object({id:nt.uuid(),name:nt.string().min(1,"Nome \xE9 obrigat\xF3rio").optional(),birthDate:nt.coerce.date().optional(),deathDate:nt.coerce.date().optional(),biography:nt.string().optional(),photo:nt.any().refine(r=>r==null?!0:typeof r!="object"||typeof r.size!="number"?!1:r.size<=HC,`A imagem deve ter no m\xE1ximo ${Mu}MB.`).optional(),role:nt.enum(Je).optional()}).refine(r=>r.birthDate&&r.deathDate?r.deathDate>r.birthDate:!0,{message:"Data de falecimento deve ser posterior \xE0 data de nascimento",path:["deathDate"]}),Po=class{constructor(e,t){this.inMemoriamRepository=e;this.firebaseStorageService=t}async handle(e,t){let{id:i,name:o,birthDate:s,deathDate:n,biography:a,photo:m,role:p}=Xm.parse({id:e.params.id,...e.body,photo:e.file}),h=await this.inMemoriamRepository.findById(i);if(!h)throw new d("O registro in memoriam n\xE3o existe.");let A=h.photoUrl;return m&&(A=await this.firebaseStorageService.uploadFile({file:m,id:i,folder:M.IN_MEMORIAM})),await this.inMemoriamRepository.update({id:i,name:o,birthDate:s,deathDate:n,biography:a,photoUrl:A??void 0,role:p}),t.sendStatus(200)}};var Qm=D.object({id:D.uuid(),name:D.string(),birthDate:D.date(),deathDate:D.date(),biography:D.string().nullable(),photoUrl:D.string().nullable(),role:D.enum(Je),createdAt:D.date(),updatedAt:D.date()}),Eu={method:"post",path:"/in-memoriam",tags:["In Memoriam"],summary:"Create a new in memoriam record with optional photo upload",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:$m}}}},responses:{201:{description:"In memoriam record created successfully",summary:"In Memoriam Created"},400:{description:"Invalid input data, missing required fields, or invalid photo format/size",summary:"Validation Error",content:{"application/json":{schema:D.object({errors:D.record(D.string(),D.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:D.object({message:D.string()})}}},409:{description:"In memoriam record with this name already exists",summary:"Conflict",content:{"application/json":{schema:D.object({message:D.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:D.object({message:D.string()})}}}}},wu={method:"get",path:"/in-memoriam",tags:["In Memoriam"],summary:"List all in memoriam records with pagination and filters",request:{query:Ym},responses:{200:{description:"List of in memoriam records retrieved successfully with pagination",summary:"In Memoriam Records Retrieved",content:{"application/json":{schema:D.object({page:D.number(),totalPages:D.number(),offset:D.number().optional(),limit:D.number().optional(),inMemoriam:D.array(Qm)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:D.object({errors:D.record(D.string(),D.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:D.object({message:D.string()})}}}}},vu={method:"get",path:"/in-memoriam/{id}",tags:["In Memoriam"],summary:"Find in memoriam record by ID",request:{params:fo},responses:{200:{description:"In memoriam record details retrieved successfully",summary:"In Memoriam Record Retrieved",content:{"application/json":{schema:Qm}}},400:{description:"Invalid in memoriam record ID format",summary:"Validation Error",content:{"application/json":{schema:D.object({errors:D.record(D.string(),D.string())})}}},404:{description:"In memoriam record not found with the provided ID",summary:"In Memoriam Record Not Found",content:{"application/json":{schema:D.object({message:D.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:D.object({message:D.string()})}}}}},Uu={method:"put",path:"/in-memoriam/{id}",tags:["In Memoriam"],summary:"Update in memoriam record with optional photo upload",security:[{bearerAuth:[]}],request:{params:fo,body:{content:{"multipart/form-data":{schema:Xm.omit({id:!0})}}}},responses:{200:{description:"In memoriam record updated successfully",summary:"In Memoriam Record Updated"},400:{description:"Invalid input data, in memoriam record ID format, or invalid photo format/size",summary:"Validation Error",content:{"application/json":{schema:D.object({errors:D.record(D.string(),D.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:D.object({message:D.string()})}}},404:{description:"In memoriam record not found with the provided ID",summary:"In Memoriam Record Not Found",content:{"application/json":{schema:D.object({message:D.string()})}}},409:{description:"In memoriam record with this name already exists",summary:"Conflict",content:{"application/json":{schema:D.object({message:D.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:D.object({message:D.string()})}}}}},ju={method:"delete",path:"/in-memoriam/{id}",tags:["In Memoriam"],summary:"Delete in memoriam record",security:[{bearerAuth:[]}],request:{params:zm},responses:{200:{description:"In memoriam record deleted successfully",summary:"In Memoriam Record Deleted"},400:{description:"Invalid in memoriam record ID format",summary:"Validation Error",content:{"application/json":{schema:D.object({errors:D.record(D.string(),D.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:D.object({message:D.string()})}}},404:{description:"In memoriam record not found with the provided ID",summary:"In Memoriam Record Not Found",content:{"application/json":{schema:D.object({message:D.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:D.object({message:D.string()})}}}}},Fj={method:"get",path:"/in-memoriam/role/{role}",tags:["In Memoriam"],summary:"Find in memoriam records by role",request:{params:Jm},responses:{200:{description:"In memoriam records retrieved successfully by role",summary:"In Memoriam Records Retrieved by Role",content:{"application/json":{schema:D.array(Qm)}}},400:{description:"Invalid role parameter provided",summary:"Validation Error",content:{"application/json":{schema:D.object({errors:D.record(D.string(),D.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:D.object({message:D.string()})}}}}};import Y from"zod";import{extendZodWithOpenApi as $C}from"@asteasolutions/zod-to-openapi";import fi from"zod";var Du=2,Fu=1024,VC=Fu*Fu,zC=Du*VC;$C(fi);var ep=fi.object({image:fi.any().refine(r=>r==null||typeof r!="object"||typeof r.size!="number"?!1:r.size<=zC,`A imagem deve ter no m\xE1ximo ${Du}MB.`),caption:fi.string().optional(),id:fi.uuid()}),bo=class{constructor(e,t,i){this.internationalScientificCongressGalleryRepository=e;this.internationalScientificCongressRepository=t;this.firebaseStorageService=i}async handle(e,t){let{image:i,caption:o,id:s}=ep.parse({...e.body,...e.params,image:e.file});if(!await this.internationalScientificCongressRepository.findById(s))throw new d("O congresso n\xE3o existe.");let a=await this.internationalScientificCongressGalleryRepository.create({imageUrl:"",caption:o||void 0,congressId:s}),m=await this.firebaseStorageService.uploadFile({file:i,id:a.id,folder:M.INTERNATIONAL_SCIENTIFIC_CONGRESS_GALLERY});return await this.internationalScientificCongressGalleryRepository.update({id:a.id,imageUrl:m}),t.sendStatus(201)}};import{extendZodWithOpenApi as ZC}from"@asteasolutions/zod-to-openapi";import tp from"zod";ZC(tp);var Io=tp.object({id:tp.uuid()}),Co=class{constructor(e){this.internationalScientificCongressGalleryRepository=e}async handle(e,t){let{id:i}=Io.parse({id:e.params.id});if(!await this.internationalScientificCongressGalleryRepository.findById(i))throw new d("A imagem da galeria n\xE3o existe.");return await this.internationalScientificCongressGalleryRepository.deleteById(i),t.sendStatus(200)}};import{extendZodWithOpenApi as KC}from"@asteasolutions/zod-to-openapi";import Ur from"zod";var JC=1;KC(Ur);var rp=Ur.object({id:Ur.uuid(),page:Ur.coerce.number().min(1).default(JC),limit:Ur.coerce.number().optional(),caption:Ur.string().optional()}),To=class{constructor(e){this.internationalScientificCongressGalleryRepository=e}async handle(e,t){let{id:i,page:o,limit:s,...n}=rp.parse({id:e.params.id,...e.query}),a=s?s*o-s:void 0,[m,p]=await Promise.all([this.internationalScientificCongressGalleryRepository.findByCongressId({pagination:{offset:a,limit:s},filter:{congressId:i,...n}}),this.internationalScientificCongressGalleryRepository.count({filter:{congressId:i,caption:n.caption}})]),h=s?Math.max(Math.ceil(p/s),1):1;return t.status(200).json({page:o,totalPages:h,offset:a,limit:s,galleryImages:m})}};import{extendZodWithOpenApi as YC}from"@asteasolutions/zod-to-openapi";import hi from"zod";var Ou=2,ku=1024,XC=ku*ku,QC=Ou*XC;YC(hi);var ip=hi.object({id:hi.uuid(),image:hi.any().refine(r=>r==null?!0:typeof r!="object"||typeof r.size!="number"?!1:r.size<=QC,`A imagem deve ter no m\xE1ximo ${Ou}MB.`).optional(),caption:hi.string().optional()}),Ao=class{constructor(e,t){this.internationalScientificCongressGalleryRepository=e;this.firebaseStorageService=t}async handle(e,t){let{id:i,image:o,caption:s}=ip.parse({id:e.params.id,...e.body,image:e.file}),n=await this.internationalScientificCongressGalleryRepository.findById(i);if(!n)throw new d("A imagem da galeria n\xE3o existe.");let a=n.imageUrl;return o&&(a=await this.firebaseStorageService.uploadFile({file:o,id:i,folder:M.INTERNATIONAL_SCIENTIFIC_CONGRESS_GALLERY})),await this.internationalScientificCongressGalleryRepository.update({id:i,imageUrl:a??void 0,caption:s||void 0}),t.sendStatus(200)}};var eI=Y.object({id:Y.uuid(),imageUrl:Y.string(),caption:Y.string().nullable(),congressId:Y.uuid()}),Bu={method:"post",path:"/international-scientific-congress/{congressId}/gallery",tags:["International Scientific Congresses"],summary:"Create a new congress gallery image",security:[{bearerAuth:[]}],request:{params:Y.object({congressId:Y.uuid()}),body:{content:{"application/json":{schema:ep.omit({id:!0})}}}},responses:{201:{description:"Congress gallery image created successfully",summary:"Congress Gallery Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:Y.object({errors:Y.record(Y.string(),Y.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:Y.object({message:Y.string()})}}},404:{description:"Congress not found with the provided ID",summary:"Congress Not Found",content:{"application/json":{schema:Y.object({message:Y.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Y.object({message:Y.string()})}}}}},qu={method:"get",path:"/international-scientific-congress/{congressId}/gallery",tags:["International Scientific Congresses"],summary:"Find congress gallery images by congress ID",request:{params:rp},responses:{200:{description:"Congress gallery images retrieved successfully by congress ID",summary:"Congress Galleries Retrieved",content:{"application/json":{schema:Y.object({page:Y.number(),totalPages:Y.number(),offset:Y.number().optional(),limit:Y.number().optional(),galleries:Y.array(eI)})}}},400:{description:"Invalid congress ID parameter provided",summary:"Validation Error",content:{"application/json":{schema:Y.object({errors:Y.record(Y.string(),Y.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Y.object({message:Y.string()})}}}}},Nu={method:"put",path:"/international-scientific-congress/gallery/{id}",tags:["International Scientific Congresses"],summary:"Update congress gallery image",security:[{bearerAuth:[]}],request:{params:Io,body:{content:{"application/json":{schema:ip.omit({id:!0})}}}},responses:{200:{description:"Congress gallery image updated successfully",summary:"Congress Gallery Updated"},400:{description:"Invalid input data or gallery ID format",summary:"Validation Error",content:{"application/json":{schema:Y.object({errors:Y.record(Y.string(),Y.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:Y.object({message:Y.string()})}}},404:{description:"Congress gallery image not found with the provided ID",summary:"Congress Gallery Not Found",content:{"application/json":{schema:Y.object({message:Y.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Y.object({message:Y.string()})}}}}},Gu={method:"delete",path:"/international-scientific-congress/gallery/{id}",tags:["International Scientific Congresses"],summary:"Delete congress gallery image",security:[{bearerAuth:[]}],request:{params:Io},responses:{200:{description:"Congress gallery image deleted successfully",summary:"Congress Gallery Deleted"},400:{description:"Invalid gallery ID format",summary:"Validation Error",content:{"application/json":{schema:Y.object({errors:Y.record(Y.string(),Y.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:Y.object({message:Y.string()})}}},404:{description:"Congress gallery image not found with the provided ID",summary:"Congress Gallery Not Found",content:{"application/json":{schema:Y.object({message:Y.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Y.object({message:Y.string()})}}}}};import X from"zod";import{extendZodWithOpenApi as tI}from"@asteasolutions/zod-to-openapi";import Ri from"zod";var Lu=2,_u=1024,rI=_u*_u,iI=Lu*rI;tI(Ri);var op=Ri.object({name:Ri.string().min(1,"Nome \xE9 obrigat\xF3rio"),logo:Ri.any().refine(r=>r==null?!0:typeof r!="object"||typeof r.size!="number"?!1:r.size<=iI,`A imagem deve ter no m\xE1ximo ${Lu}MB.`).optional(),id:Ri.uuid()}),So=class{constructor(e,t,i){this.internationalScientificCongressPartnerRepository=e;this.internationalScientificCongressRepository=t;this.firebaseStorageService=i}async handle(e,t){let{name:i,logo:o,id:s}=op.parse({...e.body,...e.params,logo:e.file});if(!await this.internationalScientificCongressRepository.findById(s))throw new d("O congresso n\xE3o existe.");let a=await this.internationalScientificCongressPartnerRepository.create({name:i,congressId:s}),m;return o&&(m=await this.firebaseStorageService.uploadFile({file:o,id:a.id,folder:M.PARTNER}),await this.internationalScientificCongressPartnerRepository.update({id:a.id,logoUrl:m})),t.sendStatus(201)}};import{extendZodWithOpenApi as oI}from"@asteasolutions/zod-to-openapi";import sp from"zod";oI(sp);var Mo=sp.object({id:sp.uuid()}),xo=class{constructor(e){this.internationalScientificCongressPartnerRepository=e}async handle(e,t){let{id:i}=Mo.parse({id:e.params.id});if(!await this.internationalScientificCongressPartnerRepository.findById(i))throw new d("O parceiro n\xE3o existe.");return await this.internationalScientificCongressPartnerRepository.deleteById(i),t.sendStatus(200)}};import{extendZodWithOpenApi as sI}from"@asteasolutions/zod-to-openapi";import jr from"zod";var nI=1;sI(jr);var np=jr.object({id:jr.uuid(),page:jr.coerce.number().min(1).default(nI),limit:jr.coerce.number().min(1).optional(),name:jr.string().optional()}),Eo=class{constructor(e){this.internationalScientificCongressPartnerRepository=e}async handle(e,t){let{id:i,page:o,limit:s,...n}=np.parse({...e.params,...e.query}),a=s?s*o-s:void 0,[m,p]=await Promise.all([this.internationalScientificCongressPartnerRepository.findByCongressId({pagination:{offset:a,limit:s},filter:{congressId:i,...n}}),this.internationalScientificCongressPartnerRepository.count({filter:{congressId:i,name:n.name}})]),h=s?Math.max(Math.ceil(p/s),1):1;return t.status(200).json({page:o,totalPages:h,offset:a,limit:s,partners:m})}};import{extendZodWithOpenApi as aI}from"@asteasolutions/zod-to-openapi";import Pi from"zod";var Hu=2,Wu=1024,mI=Wu*Wu,pI=Hu*mI;aI(Pi);var ap=Pi.object({id:Pi.uuid(),name:Pi.string().min(1,"Nome \xE9 obrigat\xF3rio").optional(),logo:Pi.any().refine(r=>r==null?!0:typeof r!="object"||typeof r.size!="number"?!1:r.size<=pI,`A imagem deve ter no m\xE1ximo ${Hu}MB.`).optional()}),wo=class{constructor(e,t){this.internationalScientificCongressPartnerRepository=e;this.firebaseStorageService=t}async handle(e,t){let{id:i,name:o,logo:s}=ap.parse({id:e.params.id,...e.body,logo:e.file}),n=await this.internationalScientificCongressPartnerRepository.findById(i);if(!n)throw new d("O parceiro n\xE3o existe.");let a=n.logoUrl;return s&&(a=await this.firebaseStorageService.uploadFile({file:s,id:i,folder:M.PARTNER})),await this.internationalScientificCongressPartnerRepository.update({id:i,name:o,logoUrl:a??void 0}),t.sendStatus(200)}};var dI=X.object({id:X.uuid(),name:X.string(),logoUrl:X.string().nullable(),congressId:X.uuid()}),$u={method:"post",path:"/international-scientific-congress/{congressId}/partner",tags:["International Scientific Congresses"],summary:"Create a new congress partner",security:[{bearerAuth:[]}],request:{params:X.object({congressId:X.uuid()}),body:{content:{"application/json":{schema:op.omit({id:!0})}}}},responses:{201:{description:"Congress partner created successfully",summary:"Congress Partner Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:X.object({errors:X.record(X.string(),X.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:X.object({message:X.string()})}}},404:{description:"Congress not found with the provided ID",summary:"Congress Not Found",content:{"application/json":{schema:X.object({message:X.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:X.object({message:X.string()})}}}}},Vu={method:"get",path:"/international-scientific-congress/{congressId}/partner",tags:["International Scientific Congresses"],summary:"Find congress partners by congress ID",request:{params:np},responses:{200:{description:"Congress partners retrieved successfully by congress ID",summary:"Congress Partners Retrieved",content:{"application/json":{schema:X.object({page:X.number(),totalPages:X.number(),offset:X.number().optional(),limit:X.number().optional(),partners:X.array(dI)})}}},400:{description:"Invalid congress ID parameter provided",summary:"Validation Error",content:{"application/json":{schema:X.object({errors:X.record(X.string(),X.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:X.object({message:X.string()})}}}}},zu={method:"put",path:"/international-scientific-congress/partner/{id}",tags:["International Scientific Congresses"],summary:"Update congress partner",security:[{bearerAuth:[]}],request:{params:Mo,body:{content:{"application/json":{schema:ap.omit({id:!0})}}}},responses:{200:{description:"Congress partner updated successfully",summary:"Congress Partner Updated"},400:{description:"Invalid input data or partner ID format",summary:"Validation Error",content:{"application/json":{schema:X.object({errors:X.record(X.string(),X.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:X.object({message:X.string()})}}},404:{description:"Congress partner not found with the provided ID",summary:"Congress Partner Not Found",content:{"application/json":{schema:X.object({message:X.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:X.object({message:X.string()})}}}}},Zu={method:"delete",path:"/international-scientific-congress/partner/{id}",tags:["International Scientific Congresses"],summary:"Delete congress partner",security:[{bearerAuth:[]}],request:{params:Mo},responses:{200:{description:"Congress partner deleted successfully",summary:"Congress Partner Deleted"},400:{description:"Invalid partner ID format",summary:"Validation Error",content:{"application/json":{schema:X.object({errors:X.record(X.string(),X.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:X.object({message:X.string()})}}},404:{description:"Congress partner not found with the provided ID",summary:"Congress Partner Not Found",content:{"application/json":{schema:X.object({message:X.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:X.object({message:X.string()})}}}}};import u from"zod";import{extendZodWithOpenApi as lI}from"@asteasolutions/zod-to-openapi";import ne from"zod";lI(ne);var mp=ne.object({title:ne.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio"),edition:ne.coerce.number().int().positive("Edi\xE7\xE3o deve ser um n\xFAmero positivo"),startDate:ne.coerce.date(),endDate:ne.coerce.date(),description:ne.string().optional(),location:ne.string().optional(),congressLink:ne.union([ne.url("Link do congresso deve ser uma URL v\xE1lida"),ne.literal("")]),noticeUrl:ne.union([ne.url("URL do edital deve ser uma URL v\xE1lida"),ne.literal("")]),scheduleUrl:ne.union([ne.url("URL do cronograma deve ser uma URL v\xE1lida"),ne.literal("")]),programUrl:ne.union([ne.url("URL da programa\xE7\xE3o deve ser uma URL v\xE1lida"),ne.literal("")]),adminReportUrl:ne.union([ne.url("URL do relat\xF3rio administrativo deve ser uma URL v\xE1lida"),ne.literal("")]),proceedingsUrl:ne.union([ne.url("URL dos anais deve ser uma URL v\xE1lida"),ne.literal("")])}).refine(r=>r.endDate>=r.startDate,{message:"Data de t\xE9rmino deve ser posterior ou igual \xE0 data de in\xEDcio",path:["endDate"]}),vo=class{constructor(e){this.internationalScientificCongressRepository=e}async handle(e,t){let i=mp.parse(e.body);return await this.internationalScientificCongressRepository.create(i),t.sendStatus(201)}};import{extendZodWithOpenApi as cI}from"@asteasolutions/zod-to-openapi";import pp from"zod";cI(pp);var dp=pp.object({id:pp.uuid()}),Uo=class{constructor(e){this.internationalScientificCongressRepository=e}async handle(e,t){let{id:i}=dp.parse({id:e.params.id});if(!await this.internationalScientificCongressRepository.findById(i))throw new d("O congresso n\xE3o existe.");return await this.internationalScientificCongressRepository.deleteById(i),t.sendStatus(200)}};import{extendZodWithOpenApi as uI}from"@asteasolutions/zod-to-openapi";import lp from"zod";uI(lp);var cp=lp.object({edition:lp.coerce.number().int().positive()}),jo=class{constructor(e){this.internationalScientificCongressRepository=e}async handle(e,t){let{edition:i}=cp.parse({edition:e.params.edition}),o=await this.internationalScientificCongressRepository.findByEdition(i);return t.status(200).json(o)}};import{extendZodWithOpenApi as gI}from"@asteasolutions/zod-to-openapi";import up from"zod";gI(up);var Do=up.object({id:up.uuid()}),Fo=class{constructor(e){this.internationalScientificCongressRepository=e}async handle(e,t){let{id:i}=Do.parse({id:e.params.id}),o=await this.internationalScientificCongressRepository.findById(i);if(!o)throw new d("O congresso n\xE3o existe.");return t.status(200).json(o)}};import{extendZodWithOpenApi as yI}from"@asteasolutions/zod-to-openapi";import vt from"zod";var fI=1;yI(vt);var gp=vt.object({page:vt.coerce.number().min(1).default(fI),limit:vt.coerce.number().optional(),title:vt.string().optional(),edition:vt.coerce.number().int().positive().optional(),location:vt.string().optional(),orderBy:vt.enum(["asc","desc"]).default("desc")}),ko=class{constructor(e){this.internationalScientificCongressRepository=e}async handle(e,t){let{page:i,limit:o,...s}=gp.parse(e.query),n=o?o*i-o:void 0,[a,m]=await Promise.all([this.internationalScientificCongressRepository.find({pagination:{offset:n,limit:o},filter:s}),this.internationalScientificCongressRepository.count({filter:s})]),p=o?Math.max(Math.ceil(m/o),1):1;t.status(200).json({page:i,totalPages:p,offset:n,limit:o,congresses:a})}};import{extendZodWithOpenApi as hI}from"@asteasolutions/zod-to-openapi";import se from"zod";hI(se);var yp=se.object({id:se.uuid(),title:se.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio").optional(),edition:se.coerce.number().int().positive("Edi\xE7\xE3o deve ser um n\xFAmero positivo").optional(),startDate:se.coerce.date().optional(),endDate:se.coerce.date().optional(),description:se.string().optional(),location:se.string().optional(),congressLink:se.union([se.url("Link do congresso deve ser uma URL v\xE1lida"),se.literal("")]),noticeUrl:se.union([se.url("URL do edital deve ser uma URL v\xE1lida"),se.literal("")]),scheduleUrl:se.union([se.url("URL do cronograma deve ser uma URL v\xE1lida"),se.literal("")]),programUrl:se.union([se.url("URL da programa\xE7\xE3o deve ser uma URL v\xE1lida"),se.literal("")]),adminReportUrl:se.union([se.url("URL do relat\xF3rio administrativo deve ser uma URL v\xE1lida"),se.literal("")]),proceedingsUrl:se.union([se.url("URL dos anais deve ser uma URL v\xE1lida"),se.literal("")])}),Oo=class{constructor(e){this.internationalScientificCongressRepository=e}async handle(e,t){let{id:i,...o}=yp.parse({id:e.params.id,...e.body});if(!await this.internationalScientificCongressRepository.findById(i))throw new d("O congresso n\xE3o existe.");return await this.internationalScientificCongressRepository.update({...o,id:i}),t.sendStatus(200)}};var RI=9,PI=u.object({image:u.any().openapi({type:"string",format:"binary"}),caption:u.string().optional()}),bI=u.object({image:u.any().openapi({type:"string",format:"binary"}).optional(),caption:u.string().optional()}),CI=u.object({id:u.uuid(),name:u.string(),logoUrl:u.string().nullable(),congressId:u.uuid()}),fp=u.object({id:u.uuid(),imageUrl:u.string(),caption:u.string().nullable(),congressId:u.uuid()}),hp=u.object({id:u.uuid(),title:u.string(),edition:u.number(),startDate:u.date(),endDate:u.date(),description:u.string().nullable(),location:u.string().nullable(),congressLink:u.string().nullable(),noticeUrl:u.string().nullable(),scheduleUrl:u.string().nullable(),programUrl:u.string().nullable(),adminReportUrl:u.string().nullable(),proceedingsUrl:u.string().nullable(),partners:u.array(CI),galleries:u.array(fp),createdAt:u.date(),updatedAt:u.date()}),Ku={method:"post",path:"/international-scientific-congress",tags:["International Scientific Congresses"],summary:"Create a new international scientific congress",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:mp}}}},responses:{201:{description:"International scientific congress created successfully",summary:"International Scientific Congress Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:u.object({errors:u.record(u.string(),u.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:u.object({message:u.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:u.object({message:u.string()})}}}}},Ju={method:"get",path:"/international-scientific-congress",tags:["International Scientific Congresses"],summary:"List all international scientific congresses with pagination and filters",request:{query:gp},responses:{200:{description:"List of international scientific congresses retrieved successfully with pagination",summary:"International Scientific Congresses Retrieved",content:{"application/json":{schema:u.object({page:u.number(),totalPages:u.number(),offset:u.number().optional(),limit:u.number().optional(),congresses:u.array(hp)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:u.object({errors:u.record(u.string(),u.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:u.object({message:u.string()})}}}}},Yu={method:"get",path:"/international-scientific-congress/{id}",tags:["International Scientific Congresses"],summary:"Find international scientific congress by ID",request:{params:Do},responses:{200:{description:"International scientific congress details retrieved successfully",summary:"International Scientific Congress Retrieved",content:{"application/json":{schema:hp}}},400:{description:"Invalid international scientific congress ID format",summary:"Validation Error",content:{"application/json":{schema:u.object({errors:u.record(u.string(),u.string())})}}},404:{description:"International scientific congress not found with the provided ID",summary:"International Scientific Congress Not Found",content:{"application/json":{schema:u.object({message:u.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:u.object({message:u.string()})}}}}},Xu={method:"get",path:"/international-scientific-congress/edition/{edition}",tags:["International Scientific Congresses"],summary:"Find international scientific congresses by edition",request:{params:cp},responses:{200:{description:"International scientific congresses retrieved successfully by edition",summary:"International Scientific Congresses Retrieved by Edition",content:{"application/json":{schema:u.array(hp)}}},400:{description:"Invalid edition parameter provided",summary:"Validation Error",content:{"application/json":{schema:u.object({errors:u.record(u.string(),u.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:u.object({message:u.string()})}}}}},Qu={method:"put",path:"/international-scientific-congress/{id}",tags:["International Scientific Congresses"],summary:"Update international scientific congress",security:[{bearerAuth:[]}],request:{params:Do,body:{content:{"application/json":{schema:yp.omit({id:!0})}}}},responses:{200:{description:"International scientific congress updated successfully",summary:"International Scientific Congress Updated"},400:{description:"Invalid input data or international scientific congress ID format",summary:"Validation Error",content:{"application/json":{schema:u.object({errors:u.record(u.string(),u.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:u.object({message:u.string()})}}},404:{description:"International scientific congress not found with the provided ID",summary:"International Scientific Congress Not Found",content:{"application/json":{schema:u.object({message:u.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:u.object({message:u.string()})}}}}},eg={method:"delete",path:"/international-scientific-congress/{id}",tags:["International Scientific Congresses"],summary:"Delete international scientific congress",security:[{bearerAuth:[]}],request:{params:dp},responses:{200:{description:"International scientific congress deleted successfully",summary:"International Scientific Congress Deleted"},400:{description:"Invalid international scientific congress ID format",summary:"Validation Error",content:{"application/json":{schema:u.object({errors:u.record(u.string(),u.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:u.object({message:u.string()})}}},404:{description:"International scientific congress not found with the provided ID",summary:"International Scientific Congress Not Found",content:{"application/json":{schema:u.object({message:u.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:u.object({message:u.string()})}}}}},yD={method:"post",path:"/international-scientific-congress/{congressId}/gallery",tags:["International Scientific Congress Gallery"],summary:"Create a new gallery image for a congress",security:[{bearerAuth:[]}],request:{params:u.object({congressId:u.uuid()}),body:{content:{"multipart/form-data":{schema:PI}}}},responses:{201:{description:"Gallery image created successfully",summary:"Gallery Image Created"},400:{description:"Invalid input data, missing required fields, or invalid image format/size",summary:"Validation Error",content:{"application/json":{schema:u.object({errors:u.record(u.string(),u.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:u.object({message:u.string()})}}},404:{description:"Congress not found with the provided ID",summary:"Congress Not Found",content:{"application/json":{schema:u.object({message:u.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:u.object({message:u.string()})}}}}},fD={method:"get",path:"/international-scientific-congress/{congressId}/gallery",tags:["International Scientific Congress Gallery"],summary:"List all gallery images for a congress with pagination",request:{params:u.object({congressId:u.uuid()}),query:u.object({page:u.coerce.number().min(1).default(1),limit:u.coerce.number().min(1).default(RI),caption:u.string().optional()})},responses:{200:{description:"Gallery images retrieved successfully with pagination",summary:"Gallery Images Retrieved",content:{"application/json":{schema:u.object({page:u.number(),totalPages:u.number(),offset:u.number().optional(),limit:u.number().optional(),galleries:u.array(fp)})}}},400:{description:"Invalid congress ID format or query parameters",summary:"Validation Error",content:{"application/json":{schema:u.object({errors:u.record(u.string(),u.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:u.object({message:u.string()})}}}}},hD={method:"get",path:"/international-scientific-congress/gallery/{id}",tags:["International Scientific Congress Gallery"],summary:"Find a gallery image by ID",request:{params:u.object({id:u.uuid()})},responses:{200:{description:"Gallery image retrieved successfully",summary:"Gallery Image Retrieved",content:{"application/json":{schema:fp}}},400:{description:"Invalid gallery image ID format",summary:"Validation Error",content:{"application/json":{schema:u.object({errors:u.record(u.string(),u.string())})}}},404:{description:"Gallery image not found with the provided ID",summary:"Gallery Image Not Found",content:{"application/json":{schema:u.object({message:u.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:u.object({message:u.string()})}}}}},RD={method:"put",path:"/international-scientific-congress/gallery/{id}",tags:["International Scientific Congress Gallery"],summary:"Update a gallery image with optional image upload",security:[{bearerAuth:[]}],request:{params:u.object({id:u.uuid()}),body:{content:{"multipart/form-data":{schema:bI}}}},responses:{200:{description:"Gallery image updated successfully",summary:"Gallery Image Updated"},400:{description:"Invalid input data, gallery ID format, or invalid image format/size",summary:"Validation Error",content:{"application/json":{schema:u.object({errors:u.record(u.string(),u.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:u.object({message:u.string()})}}},404:{description:"Gallery image not found with the provided ID",summary:"Gallery Image Not Found",content:{"application/json":{schema:u.object({message:u.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:u.object({message:u.string()})}}}}},PD={method:"delete",path:"/international-scientific-congress/gallery/{id}",tags:["International Scientific Congress Gallery"],summary:"Delete a gallery image",security:[{bearerAuth:[]}],request:{params:u.object({id:u.uuid()})},responses:{200:{description:"Gallery image deleted successfully",summary:"Gallery Image Deleted"},400:{description:"Invalid gallery ID format",summary:"Validation Error",content:{"application/json":{schema:u.object({errors:u.record(u.string(),u.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:u.object({message:u.string()})}}},404:{description:"Gallery image not found with the provided ID",summary:"Gallery Image Not Found",content:{"application/json":{schema:u.object({message:u.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:u.object({message:u.string()})}}}}};import J from"zod";import{extendZodWithOpenApi as II}from"@asteasolutions/zod-to-openapi";import bi from"zod";II(bi);var Rp=bi.object({title:bi.string().min(1),link:bi.url(),country:bi.string().min(1)}),Bo=class{constructor(e){this.lawRepository=e}async handle(e,t){let{title:i,link:o,country:s}=Rp.parse(e.body);return await this.lawRepository.create({title:i,link:o,country:s}),t.sendStatus(201)}};import{extendZodWithOpenApi as TI}from"@asteasolutions/zod-to-openapi";import Pp from"zod";TI(Pp);var bp=Pp.object({id:Pp.uuid()}),qo=class{constructor(e){this.lawRepository=e}async handle(e,t){let{id:i}=bp.parse({id:e.params.id});if(!await this.lawRepository.findById(i))throw new d("A lei n\xE3o existe.");return await this.lawRepository.deleteById(i),t.sendStatus(200)}};import{extendZodWithOpenApi as AI}from"@asteasolutions/zod-to-openapi";import Cp from"zod";AI(Cp);var Go=Cp.object({id:Cp.uuid()}),No=class{constructor(e){this.lawRepository=e}async handle(e,t){let{id:i}=Go.parse({id:e.params.id}),o=await this.lawRepository.findById(i);if(!o)throw new d("A lei n\xE3o existe.");return t.status(200).json(o)}};import{extendZodWithOpenApi as SI}from"@asteasolutions/zod-to-openapi";import Fr from"zod";SI(Fr);var Ip=Fr.object({id:Fr.uuid(),title:Fr.string().min(1).optional(),link:Fr.url().optional(),country:Fr.string().min(1).optional()}),_o=class{constructor(e){this.lawRepository=e}async handle(e,t){let{id:i,title:o,link:s,country:n}=Ip.parse({id:e.params.id,...e.body});if(!await this.lawRepository.findById(i))throw new d("A lei n\xE3o existe.");return await this.lawRepository.update({id:i,title:o,link:s,country:n}),t.sendStatus(200)}};var tg=J.object({id:J.uuid(),title:J.string(),link:J.string(),country:J.string(),createdAt:J.date(),updatedAt:J.date()}),rg={method:"post",path:"/law",tags:["Laws"],summary:"Create a new Law",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:Rp}}}},responses:{201:{description:"Law created successfully",summary:"Law Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:J.object({errors:J.record(J.string(),J.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:J.object({message:J.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:J.object({message:J.string()})}}}}},ig={method:"get",path:"/law",tags:["Laws"],summary:"List all Laws with filters",request:{query:J.object({page:J.coerce.number().optional(),limit:J.coerce.number().optional(),title:J.string().optional(),country:J.string().optional(),orderBy:J.enum(["asc","desc"]).default("desc")})},responses:{200:{description:"List of Laws retrieved successfully",summary:"Laws Retrieved",content:{"application/json":{schema:J.object({page:J.number(),totalPages:J.number(),offset:J.number().optional(),limit:J.number().optional(),laws:J.array(tg)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:J.object({message:J.string()})}}}}},og={method:"get",path:"/law/{id}",tags:["Laws"],summary:"Find Law by ID",request:{params:Go},responses:{200:{description:"Law details retrieved successfully",summary:"Law Retrieved",content:{"application/json":{schema:tg}}},400:{description:"Invalid Law ID format",summary:"Validation Error",content:{"application/json":{schema:J.object({errors:J.record(J.string(),J.string())})}}},404:{description:"Law not found with the provided ID",summary:"Law Not Found",content:{"application/json":{schema:J.object({message:J.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:J.object({message:J.string()})}}}}},sg={method:"put",path:"/law/{id}",tags:["Laws"],summary:"Update Law",security:[{bearerAuth:[]}],request:{params:Go,body:{content:{"application/json":{schema:Ip.omit({id:!0})}}}},responses:{200:{description:"Law updated successfully",summary:"Law Updated"},400:{description:"Invalid input data or Law ID format",summary:"Validation Error",content:{"application/json":{schema:J.object({errors:J.record(J.string(),J.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:J.object({message:J.string()})}}},404:{description:"Law not found with the provided ID",summary:"Law Not Found",content:{"application/json":{schema:J.object({message:J.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:J.object({message:J.string()})}}}}},ng={method:"delete",path:"/law/{id}",tags:["Laws"],summary:"Delete Law",security:[{bearerAuth:[]}],request:{params:bp},responses:{200:{description:"Law deleted successfully",summary:"Law Deleted"},400:{description:"Invalid Law ID format",summary:"Validation Error",content:{"application/json":{schema:J.object({errors:J.record(J.string(),J.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:J.object({message:J.string()})}}},404:{description:"Law not found with the provided ID",summary:"Law Not Found",content:{"application/json":{schema:J.object({message:J.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:J.object({message:J.string()})}}}}};import L from"zod";import{extendZodWithOpenApi as xI}from"@asteasolutions/zod-to-openapi";import Dr from"zod";xI(Dr);var Tp=Dr.object({role:Dr.string().min(1),description:Dr.string().optional(),userId:Dr.uuid(),order:Dr.number().optional()}),Lo=class{constructor(e){this.legitimatorCommitteeMemberRepository=e}async handle(e,t){let{role:i,description:o,userId:s,order:n}=Tp.parse(e.body);return await this.legitimatorCommitteeMemberRepository.create({role:i,description:o,userId:s,order:n??0}),t.sendStatus(201)}};import{extendZodWithOpenApi as MI}from"@asteasolutions/zod-to-openapi";import Ap from"zod";MI(Ap);var Sp=Ap.object({id:Ap.uuid()}),Wo=class{constructor(e){this.legitimatorCommitteeMemberRepository=e}async handle(e,t){let{id:i}=Sp.parse({id:e.params.id});if(!await this.legitimatorCommitteeMemberRepository.findById(i))throw new d("O membro do comit\xEA legitimador n\xE3o existe.");return await this.legitimatorCommitteeMemberRepository.deleteById(i),t.sendStatus(200)}};import{extendZodWithOpenApi as EI}from"@asteasolutions/zod-to-openapi";import xp from"zod";EI(xp);var $o=xp.object({id:xp.uuid()}),Ho=class{constructor(e){this.legitimatorCommitteeMemberRepository=e}async handle(e,t){let{id:i}=$o.parse({id:e.params.id}),o=await this.legitimatorCommitteeMemberRepository.findById(i);if(!o)throw new d("O membro do comit\xEA legitimador n\xE3o existe.");return t.status(200).json(o)}};import{extendZodWithOpenApi as wI}from"@asteasolutions/zod-to-openapi";import Jt from"zod";wI(Jt);var Mp=Jt.object({id:Jt.uuid(),role:Jt.string().min(1).optional(),description:Jt.string().optional(),userId:Jt.uuid().optional(),order:Jt.number().optional()}),Vo=class{constructor(e){this.legitimatorCommitteeMemberRepository=e}async handle(e,t){let{id:i,role:o,description:s,userId:n,order:a}=Mp.parse({id:e.params.id,...e.body});if(!await this.legitimatorCommitteeMemberRepository.findById(i))throw new d("O membro do comit\xEA legitimador n\xE3o existe.");return await this.legitimatorCommitteeMemberRepository.update({id:i,role:o,description:s,userId:n,order:a}),t.sendStatus(200)}};var vI=L.object({id:L.uuid(),name:L.string(),emailAddress:L.string(),avatarUrl:L.string().nullable(),orcid:L.string().nullable(),phone:L.string().nullable(),lattesUrl:L.string().nullable(),role:L.enum(de)}),ag=L.object({id:L.uuid(),role:L.string(),description:L.string().nullable(),order:L.number(),createdAt:L.date(),updatedAt:L.date(),userId:L.uuid(),user:vI}),mg={method:"post",path:"/legitimator-committee-member",tags:["Legitimator Committee Members"],summary:"Create a new Legitimator Committee Member",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:Tp}}}},responses:{201:{description:"Legitimator Committee Member created successfully",summary:"Legitimator Committee Member Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:L.object({errors:L.record(L.string(),L.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:L.object({message:L.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:L.object({message:L.string()})}}}}},pg={method:"get",path:"/legitimator-committee-member",tags:["Legitimator Committee Members"],summary:"List all Legitimator Committee Members with filters",request:{query:L.object({role:L.string().optional(),orderBy:L.enum(["asc","desc"]).default("desc")})},responses:{200:{description:"List of Legitimator Committee Members retrieved successfully",summary:"Legitimator Committee Members Retrieved",content:{"application/json":{schema:L.object({members:L.array(ag)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:L.object({message:L.string()})}}}}},dg={method:"get",path:"/legitimator-committee-member/{id}",tags:["Legitimator Committee Members"],summary:"Find Legitimator Committee Member by ID",request:{params:$o},responses:{200:{description:"Legitimator Committee Member details retrieved successfully",summary:"Legitimator Committee Member Retrieved",content:{"application/json":{schema:ag}}},400:{description:"Invalid Legitimator Committee Member ID format",summary:"Validation Error",content:{"application/json":{schema:L.object({errors:L.record(L.string(),L.string())})}}},404:{description:"Legitimator Committee Member not found with the provided ID",summary:"Legitimator Committee Member Not Found",content:{"application/json":{schema:L.object({message:L.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:L.object({message:L.string()})}}}}},lg={method:"put",path:"/legitimator-committee-member/{id}",tags:["Legitimator Committee Members"],summary:"Update Legitimator Committee Member",security:[{bearerAuth:[]}],request:{params:$o,body:{content:{"application/json":{schema:Mp.omit({id:!0})}}}},responses:{200:{description:"Legitimator Committee Member updated successfully",summary:"Legitimator Committee Member Updated"},400:{description:"Invalid input data or Legitimator Committee Member ID format",summary:"Validation Error",content:{"application/json":{schema:L.object({errors:L.record(L.string(),L.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:L.object({message:L.string()})}}},404:{description:"Legitimator Committee Member not found with the provided ID",summary:"Legitimator Committee Member Not Found",content:{"application/json":{schema:L.object({message:L.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:L.object({message:L.string()})}}}}},cg={method:"delete",path:"/legitimator-committee-member/{id}",tags:["Legitimator Committee Members"],summary:"Delete Legitimator Committee Member",security:[{bearerAuth:[]}],request:{params:Sp},responses:{200:{description:"Legitimator Committee Member deleted successfully",summary:"Legitimator Committee Member Deleted"},400:{description:"Invalid Legitimator Committee Member ID format",summary:"Validation Error",content:{"application/json":{schema:L.object({errors:L.record(L.string(),L.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:L.object({message:L.string()})}}},404:{description:"Legitimator Committee Member not found with the provided ID",summary:"Legitimator Committee Member Not Found",content:{"application/json":{schema:L.object({message:L.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:L.object({message:L.string()})}}}}};import v from"zod";import{extendZodWithOpenApi as UI}from"@asteasolutions/zod-to-openapi";import at from"zod";UI(at);var Ep=at.object({name:at.string().min(1),description:at.string().optional(),members:at.array(at.object({userId:at.uuid(),role:at.string().min(1),order:at.number().optional()}))}),zo=class{constructor(e){this.managementTeamRepository=e}async handle(e,t){let{name:i,description:o,members:s}=Ep.parse(e.body);if(await this.managementTeamRepository.findByName(i))throw new ce("J\xE1 existe um time de gest\xE3o cadastrado com este nome.");return await this.managementTeamRepository.create({name:i,description:o,members:s.map(a=>({userId:a.userId,role:a.role,order:a.order??0}))}),t.sendStatus(201)}};import{extendZodWithOpenApi as jI}from"@asteasolutions/zod-to-openapi";import wp from"zod";jI(wp);var vp=wp.object({id:wp.uuid()}),Zo=class{constructor(e){this.managementTeamRepository=e}async handle(e,t){let{id:i}=vp.parse({id:e.params.id});if(!await this.managementTeamRepository.findById(i))throw new d("O time de gest\xE3o n\xE3o existe.");return await this.managementTeamRepository.deleteById(i),t.sendStatus(200)}};import{extendZodWithOpenApi as FI}from"@asteasolutions/zod-to-openapi";import Up from"zod";FI(Up);var Jo=Up.object({id:Up.uuid()}),Ko=class{constructor(e){this.managementTeamRepository=e}async handle(e,t){let{id:i}=Jo.parse({id:e.params.id}),o=await this.managementTeamRepository.findById(i);if(!o)throw new d("O time de gest\xE3o n\xE3o existe.");return t.status(200).json(o)}};import{extendZodWithOpenApi as DI}from"@asteasolutions/zod-to-openapi";import Xe from"zod";DI(Xe);var jp=Xe.object({id:Xe.uuid(),name:Xe.string().min(1).optional(),description:Xe.string().optional(),members:Xe.array(Xe.object({userId:Xe.uuid(),role:Xe.string().min(1),order:Xe.number().optional()})).optional()}),Yo=class{constructor(e){this.managementTeamRepository=e}async handle(e,t){let{id:i,name:o,description:s,members:n}=jp.parse({id:e.params.id,...e.body}),a=await this.managementTeamRepository.findById(i);if(!a)throw new d("O time de gest\xE3o n\xE3o existe.");if(o&&o!==a.name){let m=await this.managementTeamRepository.findByName(o);if(m&&m.id!==i)throw new ce("J\xE1 existe um time de gest\xE3o com este nome.")}return await this.managementTeamRepository.update({id:i,name:o,description:s,members:n?n.map(m=>({userId:m.userId,role:m.role,order:m.order??0})):void 0}),t.sendStatus(200)}};var kI=v.object({id:v.uuid(),name:v.string(),emailAddress:v.string(),avatarUrl:v.string().nullable(),orcid:v.string().nullable(),phone:v.string().nullable(),lattesUrl:v.string().nullable(),role:v.enum(de)}),OI=v.object({id:v.uuid(),role:v.string(),description:v.string().nullable(),order:v.number(),teamId:v.uuid(),userId:v.uuid(),createdAt:v.date(),updatedAt:v.date(),user:kI}),ug=v.object({id:v.uuid(),name:v.string(),description:v.string().nullable(),createdAt:v.date(),updatedAt:v.date(),members:v.array(OI)}),gg={method:"post",path:"/management-team",tags:["Management Teams"],summary:"Create a new Management Team with multiple members",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:Ep}}}},responses:{201:{description:"Management Team created successfully",summary:"Management Team Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:v.object({errors:v.record(v.string(),v.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:v.object({message:v.string()})}}},409:{description:"Management Team with this name already exists",summary:"Conflict",content:{"application/json":{schema:v.object({message:v.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:v.object({message:v.string()})}}}}},yg={method:"get",path:"/management-team",tags:["Management Teams"],summary:"List all Management Teams with filters",request:{query:v.object({name:v.string().optional(),description:v.string().optional(),orderBy:v.enum(["asc","desc"]).default("desc")})},responses:{200:{description:"List of Management Teams retrieved successfully",summary:"Management Teams Retrieved",content:{"application/json":{schema:v.object({teams:v.array(ug)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:v.object({message:v.string()})}}}}},fg={method:"get",path:"/management-team/{id}",tags:["Management Teams"],summary:"Find Management Team by ID",request:{params:Jo},responses:{200:{description:"Management Team details retrieved successfully",summary:"Management Team Retrieved",content:{"application/json":{schema:ug}}},400:{description:"Invalid Management Team ID format",summary:"Validation Error",content:{"application/json":{schema:v.object({errors:v.record(v.string(),v.string())})}}},404:{description:"Management Team not found with the provided ID",summary:"Management Team Not Found",content:{"application/json":{schema:v.object({message:v.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:v.object({message:v.string()})}}}}},hg={method:"put",path:"/management-team/{id}",tags:["Management Teams"],summary:"Update Management Team and manage member relationships",security:[{bearerAuth:[]}],request:{params:Jo,body:{content:{"application/json":{schema:jp.omit({id:!0})}}}},responses:{200:{description:"Management Team updated successfully",summary:"Management Team Updated"},400:{description:"Invalid input data or Management Team ID format",summary:"Validation Error",content:{"application/json":{schema:v.object({errors:v.record(v.string(),v.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:v.object({message:v.string()})}}},404:{description:"Management Team not found with the provided ID",summary:"Management Team Not Found",content:{"application/json":{schema:v.object({message:v.string()})}}},409:{description:"Management Team with this name already exists",summary:"Conflict",content:{"application/json":{schema:v.object({message:v.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:v.object({message:v.string()})}}}}},Rg={method:"delete",path:"/management-team/{id}",tags:["Management Teams"],summary:"Delete Management Team",security:[{bearerAuth:[]}],request:{params:vp},responses:{200:{description:"Management Team deleted successfully",summary:"Management Team Deleted"},400:{description:"Invalid Management Team ID format",summary:"Validation Error",content:{"application/json":{schema:v.object({errors:v.record(v.string(),v.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:v.object({message:v.string()})}}},404:{description:"Management Team not found with the provided ID",summary:"Management Team Not Found",content:{"application/json":{schema:v.object({message:v.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:v.object({message:v.string()})}}}}};import $ from"zod";import{extendZodWithOpenApi as BI}from"@asteasolutions/zod-to-openapi";import kr from"zod";var bg=10,Pg=1024,qI=Pg*Pg,NI=bg*qI;BI(kr);var Fp=kr.object({title:kr.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio"),publishedAt:kr.coerce.date(),id:kr.uuid(),document:kr.any().refine(r=>r==null||typeof r!="object"||typeof r.size!="number"?!1:r.size<=NI,`O documento deve ter no m\xE1ximo ${bg}MB.`)}),Xo=class{constructor(e,t,i){this.meetingMinuteRepository=e;this.meetingRepository=t;this.firebaseStorageService=i}async handle(e,t){let{title:i,publishedAt:o,id:s,document:n}=Fp.parse({...e.body,...e.params,document:e.file});if(!await this.meetingRepository.findById(s))throw new d("A reuni\xE3o n\xE3o existe.");if(await this.meetingMinuteRepository.findByMeetingId(s))throw new Re("Esta reuni\xE3o j\xE1 possui uma ata.");let p=await this.meetingMinuteRepository.create({title:i,publishedAt:o,meetingId:s,documentUrl:""}),h=await this.firebaseStorageService.uploadFile({file:n,id:p.id,folder:M.MEETING_MINUTE});return await this.meetingMinuteRepository.update({id:p.id,documentUrl:h}),t.sendStatus(201)}};import{extendZodWithOpenApi as GI}from"@asteasolutions/zod-to-openapi";import Dp from"zod";GI(Dp);var Ci=Dp.object({id:Dp.uuid()}),Qo=class{constructor(e){this.meetingMinuteRepository=e}async handle(e,t){let{id:i}=Ci.parse({id:e.params.id}),o=await this.meetingMinuteRepository.findByMeetingId(i);return t.status(200).json(o)}};import{extendZodWithOpenApi as _I}from"@asteasolutions/zod-to-openapi";import Or from"zod";var Ig=10,Cg=1024,LI=Cg*Cg,WI=Ig*LI;_I(Or);var kp=Or.object({id:Or.uuid(),title:Or.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio").optional(),publishedAt:Or.coerce.date().optional(),document:Or.any().refine(r=>r==null?!0:typeof r!="object"||typeof r.size!="number"?!1:r.size<=WI,`O documento deve ter no m\xE1ximo ${Ig}MB.`).optional()}),es=class{constructor(e,t){this.meetingMinuteRepository=e;this.firebaseStorageService=t}async handle(e,t){let{id:i,title:o,publishedAt:s,document:n}=kp.parse({...e.params,...e.body,document:e.file}),a=await this.meetingMinuteRepository.findByMeetingId(i);if(!a)throw new d("A ata n\xE3o existe para esta reuni\xE3o.");let m=a.documentUrl;return n&&(a.documentUrl&&await this.firebaseStorageService.deleteFile({fileUrl:a.documentUrl}),m=await this.firebaseStorageService.uploadFile({file:n,id:a.id,folder:M.MEETING_MINUTE})),await this.meetingMinuteRepository.update({id:a.id,title:o,publishedAt:s,documentUrl:m??void 0}),t.sendStatus(200)}};var HI=$.object({id:$.uuid(),title:$.string(),scheduledAt:$.date(),format:$.enum(Me),agenda:$.string(),meetingLink:$.string().nullable(),location:$.string().nullable(),status:$.enum(be),createdAt:$.date(),updatedAt:$.date()}),$I=$.object({id:$.uuid(),title:$.string(),publishedAt:$.date(),documentUrl:$.string(),meetingId:$.uuid(),meeting:HI,createdAt:$.date(),updatedAt:$.date()}),Tg={method:"post",path:"/meeting/{meetingId}/minute",tags:["Meetings"],summary:"Create a new meeting minute with document upload",security:[{bearerAuth:[]}],request:{params:$.object({meetingId:$.uuid()}),body:{content:{"multipart/form-data":{schema:Fp.omit({id:!0})}}}},responses:{201:{description:"Meeting minute created successfully",summary:"Meeting Minute Created"},400:{description:"Invalid input data, missing required fields, or invalid document format/size",summary:"Validation Error",content:{"application/json":{schema:$.object({errors:$.record($.string(),$.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:$.object({message:$.string()})}}},404:{description:"Meeting not found with the provided ID",summary:"Meeting Not Found",content:{"application/json":{schema:$.object({message:$.string()})}}},409:{description:"Meeting already has a minute",summary:"Conflict",content:{"application/json":{schema:$.object({message:$.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:$.object({message:$.string()})}}}}},Ag={method:"get",path:"/meeting/{meetingId}/minute",tags:["Meetings"],summary:"Find meeting minute by meeting ID",request:{params:Ci},responses:{200:{description:"Meeting minute retrieved successfully by meeting ID",summary:"Meeting Minute Retrieved by Meeting ID",content:{"application/json":{schema:$I.nullable()}}},400:{description:"Invalid meeting ID parameter provided",summary:"Validation Error",content:{"application/json":{schema:$.object({errors:$.record($.string(),$.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:$.object({message:$.string()})}}}}},Sg={method:"put",path:"/meeting/{meetingId}/minute",tags:["Meetings"],summary:"Update meeting minute with optional document upload",security:[{bearerAuth:[]}],request:{params:Ci,body:{content:{"multipart/form-data":{schema:kp.omit({id:!0})}}}},responses:{200:{description:"Meeting minute updated successfully",summary:"Meeting Minute Updated"},400:{description:"Invalid input data, meeting minute ID format, or invalid document format/size",summary:"Validation Error",content:{"application/json":{schema:$.object({errors:$.record($.string(),$.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:$.object({message:$.string()})}}},404:{description:"Meeting minute not found with the provided ID",summary:"Meeting Minute Not Found",content:{"application/json":{schema:$.object({message:$.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:$.object({message:$.string()})}}}}},xg={method:"delete",path:"/meeting/{meetingId}/minute",tags:["Meetings"],summary:"Delete meeting minute",security:[{bearerAuth:[]}],request:{params:Ci},responses:{200:{description:"Meeting minute deleted successfully",summary:"Meeting Minute Deleted"},400:{description:"Invalid meeting minute ID format",summary:"Validation Error",content:{"application/json":{schema:$.object({errors:$.record($.string(),$.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:$.object({message:$.string()})}}},404:{description:"Meeting minute not found with the provided ID",summary:"Meeting Minute Not Found",content:{"application/json":{schema:$.object({message:$.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:$.object({message:$.string()})}}}}};import w from"zod";import{extendZodWithOpenApi as VI}from"@asteasolutions/zod-to-openapi";import He from"zod";VI(He);var Op=He.object({title:He.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio"),scheduledAt:He.coerce.date(),format:He.enum(Me).default(Me.ONLINE),agenda:He.string().min(1,"Pauta \xE9 obrigat\xF3ria"),meetingLink:He.union([He.url("Link da reuni\xE3o deve ser uma URL v\xE1lida"),He.literal("")]),location:He.string().optional(),status:He.enum(be).default(be.PENDING)}).refine(r=>r.format===Me.ONLINE?!!r.meetingLink:r.format===Me.IN_PERSON?!!r.location:!0,{message:"Reuni\xF5es online devem ter link e reuni\xF5es presenciais devem ter localiza\xE7\xE3o",path:["format"]}),ts=class{constructor(e){this.meetingRepository=e}async handle(e,t){let{title:i,scheduledAt:o,format:s,agenda:n,meetingLink:a,location:m,status:p}=Op.parse(e.body);return await this.meetingRepository.create({title:i,scheduledAt:o,format:s,agenda:n,meetingLink:a||void 0,location:m||void 0,status:p??be.PENDING}),t.sendStatus(201)}};import{extendZodWithOpenApi as zI}from"@asteasolutions/zod-to-openapi";import Bp from"zod";zI(Bp);var qp=Bp.object({id:Bp.uuid()}),rs=class{constructor(e){this.meetingRepository=e}async handle(e,t){let{id:i}=qp.parse({id:e.params.id});if(!await this.meetingRepository.findById(i))throw new d("A reuni\xE3o n\xE3o existe.");return await this.meetingRepository.deleteById(i),t.sendStatus(200)}};import{extendZodWithOpenApi as ZI}from"@asteasolutions/zod-to-openapi";import Np from"zod";ZI(Np);var os=Np.object({id:Np.uuid()}),is=class{constructor(e){this.meetingRepository=e}async handle(e,t){let{id:i}=os.parse({id:e.params.id}),o=await this.meetingRepository.findById(i);if(!o)throw new d("A reuni\xE3o n\xE3o existe.");return t.status(200).json(o)}};import{extendZodWithOpenApi as KI}from"@asteasolutions/zod-to-openapi";import Gp from"zod";KI(Gp);var _p=Gp.object({status:Gp.enum(be)}),ss=class{constructor(e){this.meetingRepository=e}async handle(e,t){let{status:i}=_p.parse({status:e.params.status}),o=await this.meetingRepository.findByStatus(i);return t.status(200).json(o)}};import{extendZodWithOpenApi as JI}from"@asteasolutions/zod-to-openapi";import Ut from"zod";var YI=1;JI(Ut);var Lp=Ut.object({page:Ut.coerce.number().min(1).default(YI),limit:Ut.coerce.number().optional(),title:Ut.string().optional(),format:Ut.enum(Me).optional(),status:Ut.enum(be).optional(),orderBy:Ut.enum(["asc","desc"]).default("desc")}),ns=class{constructor(e){this.meetingRepository=e}async handle(e,t){let{page:i,limit:o,...s}=Lp.parse(e.query),n=o?o*i-o:void 0,[a,m]=await Promise.all([this.meetingRepository.find({pagination:{offset:n,limit:o},filter:s}),this.meetingRepository.count({filter:s})]),p=o?Math.max(Math.ceil(m/o),1):1;t.status(200).json({page:i,totalPages:p,offset:n,limit:o,meetings:a})}};import{extendZodWithOpenApi as XI}from"@asteasolutions/zod-to-openapi";import De from"zod";XI(De);var Wp=De.object({id:De.uuid(),title:De.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio").optional(),scheduledAt:De.coerce.date().optional(),format:De.enum(Me).optional(),agenda:De.string().min(1,"Pauta \xE9 obrigat\xF3ria").optional(),meetingLink:De.union([De.url("Link da reuni\xE3o deve ser uma URL v\xE1lida"),De.literal("")]),location:De.string().optional(),status:De.enum(be).optional()}),as=class{constructor(e){this.meetingRepository=e}async handle(e,t){let{id:i,title:o,scheduledAt:s,format:n,agenda:a,meetingLink:m,location:p,status:h}=Wp.parse({id:e.params.id,...e.body});if(!await this.meetingRepository.findById(i))throw new d("A reuni\xE3o n\xE3o existe.");return await this.meetingRepository.update({id:i,title:o,scheduledAt:s,format:n,agenda:a,meetingLink:m||void 0,location:p||void 0,status:h}),t.sendStatus(200)}};var QI=w.object({id:w.uuid(),title:w.string(),publishedAt:w.date(),documentUrl:w.string(),meetingId:w.uuid(),createdAt:w.date(),updatedAt:w.date()}),Hp=w.object({id:w.uuid(),title:w.string(),scheduledAt:w.date(),format:w.enum(Me),agenda:w.string(),meetingLink:w.string().nullable(),location:w.string().nullable(),status:w.enum(be),minutes:QI.nullable(),createdAt:w.date(),updatedAt:w.date()}),Mg={method:"post",path:"/meeting",tags:["Meetings"],summary:"Create a new meeting",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:Op}}}},responses:{201:{description:"Meeting created successfully",summary:"Meeting Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:w.object({errors:w.record(w.string(),w.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:w.object({message:w.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:w.object({message:w.string()})}}}}},Eg={method:"get",path:"/meeting",tags:["Meetings"],summary:"List all meetings with pagination and filters",request:{query:Lp},responses:{200:{description:"List of meetings retrieved successfully with pagination",summary:"Meetings Retrieved",content:{"application/json":{schema:w.object({page:w.number(),totalPages:w.number(),offset:w.number().optional(),limit:w.number().optional(),meetings:w.array(Hp)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:w.object({errors:w.record(w.string(),w.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:w.object({message:w.string()})}}}}},wg={method:"get",path:"/meeting/{id}",tags:["Meetings"],summary:"Find meeting by ID",request:{params:os},responses:{200:{description:"Meeting details retrieved successfully",summary:"Meeting Retrieved",content:{"application/json":{schema:Hp}}},400:{description:"Invalid meeting ID format",summary:"Validation Error",content:{"application/json":{schema:w.object({errors:w.record(w.string(),w.string())})}}},404:{description:"Meeting not found with the provided ID",summary:"Meeting Not Found",content:{"application/json":{schema:w.object({message:w.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:w.object({message:w.string()})}}}}},vg={method:"get",path:"/meeting/status/{status}",tags:["Meetings"],summary:"Find meetings by status",request:{params:_p},responses:{200:{description:"Meetings retrieved successfully by status",summary:"Meetings Retrieved by Status",content:{"application/json":{schema:w.array(Hp)}}},400:{description:"Invalid status parameter provided",summary:"Validation Error",content:{"application/json":{schema:w.object({errors:w.record(w.string(),w.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:w.object({message:w.string()})}}}}},Ug={method:"put",path:"/meeting/{id}",tags:["Meetings"],summary:"Update meeting",security:[{bearerAuth:[]}],request:{params:os,body:{content:{"application/json":{schema:Wp.omit({id:!0})}}}},responses:{200:{description:"Meeting updated successfully",summary:"Meeting Updated"},400:{description:"Invalid input data or meeting ID format",summary:"Validation Error",content:{"application/json":{schema:w.object({errors:w.record(w.string(),w.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:w.object({message:w.string()})}}},404:{description:"Meeting not found with the provided ID",summary:"Meeting Not Found",content:{"application/json":{schema:w.object({message:w.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:w.object({message:w.string()})}}}}},jg={method:"delete",path:"/meeting/{id}",tags:["Meetings"],summary:"Delete meeting",security:[{bearerAuth:[]}],request:{params:qp},responses:{200:{description:"Meeting deleted successfully",summary:"Meeting Deleted"},400:{description:"Invalid meeting ID format",summary:"Validation Error",content:{"application/json":{schema:w.object({errors:w.record(w.string(),w.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:w.object({message:w.string()})}}},404:{description:"Meeting not found with the provided ID",summary:"Meeting Not Found",content:{"application/json":{schema:w.object({message:w.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:w.object({message:w.string()})}}}}};import k from"zod";import{extendZodWithOpenApi as eT}from"@asteasolutions/zod-to-openapi";import we from"zod";var Dg=2,Fg=1024,tT=Fg*Fg,rT=Dg*tT;eT(we);var $p=we.object({name:we.string().min(1,"Nome \xE9 obrigat\xF3rio"),logo:we.any().refine(r=>r==null||typeof r!="object"||typeof r.size!="number"?!1:r.size<=rT,`A imagem deve ter no m\xE1ximo ${Dg}MB.`),city:we.string().optional(),state:we.string().optional(),country:we.string().optional(),description:we.string().optional(),website:we.url("URL do site deve ser v\xE1lida").optional(),email:we.email("Email deve ser v\xE1lido").optional(),phone:we.string().optional(),address:we.string().optional(),functioning:we.string().optional()}),ms=class{constructor(e,t){this.museumRepository=e;this.firebaseStorageService=t}async handle(e,t){let{name:i,logo:o,city:s,state:n,country:a,description:m,website:p,email:h,phone:A,address:G,functioning:re}=$p.parse({...e.body,logo:e.file}),ie=await this.museumRepository.create({name:i,city:s,state:n,country:a,description:m,website:p,email:h,phone:A,address:G,functioning:re}),me=await this.firebaseStorageService.uploadFile({file:o,id:ie.id,folder:M.MUSEUM});return await this.museumRepository.update({id:ie.id,logoUrl:me}),t.sendStatus(201)}};import{extendZodWithOpenApi as iT}from"@asteasolutions/zod-to-openapi";import Vp from"zod";iT(Vp);var zp=Vp.object({id:Vp.uuid()}),ps=class{constructor(e,t){this.museumRepository=e;this.firebaseStorageService=t}async handle(e,t){let{id:i}=zp.parse({id:e.params.id}),o=await this.museumRepository.findById(i);if(!o)throw new d("O museu n\xE3o existe.");return o.logoUrl&&this.firebaseStorageService.deleteFile({fileUrl:o.logoUrl}),await this.museumRepository.deleteById(i),t.sendStatus(200)}};import{extendZodWithOpenApi as oT}from"@asteasolutions/zod-to-openapi";import Zp from"zod";oT(Zp);var ls=Zp.object({id:Zp.uuid()}),ds=class{constructor(e){this.museumRepository=e}async handle(e,t){let{id:i}=ls.parse({id:e.params.id}),o=await this.museumRepository.findById(i);if(!o)throw new d("O museu n\xE3o existe.");return t.status(200).json(o)}};import{extendZodWithOpenApi as sT}from"@asteasolutions/zod-to-openapi";import mt from"zod";var nT=1;sT(mt);var Kp=mt.object({page:mt.coerce.number().min(1).default(nT),limit:mt.coerce.number().optional(),name:mt.string().optional(),city:mt.string().optional(),state:mt.string().optional(),country:mt.string().optional(),orderBy:mt.enum(["asc","desc"]).default("desc")}),cs=class{constructor(e){this.museumRepository=e}async handle(e,t){let{page:i,limit:o,...s}=Kp.parse(e.query),n=o?o*i-o:void 0,[a,m]=await Promise.all([this.museumRepository.find({pagination:{offset:n,limit:o},filter:s}),this.museumRepository.count({filter:s})]),p=o?Math.max(Math.ceil(m/o),1):1;t.status(200).json({page:i,totalPages:p,offset:n,limit:o,museums:a})}};import{extendZodWithOpenApi as aT}from"@asteasolutions/zod-to-openapi";import Te from"zod";var Og=2,kg=1024,mT=kg*kg,pT=Og*mT;aT(Te);var Jp=Te.object({id:Te.uuid(),name:Te.string().min(1,"Nome \xE9 obrigat\xF3rio").optional(),logo:Te.any().refine(r=>r==null?!0:typeof r!="object"||typeof r.size!="number"?!1:r.size<=pT,`A imagem deve ter no m\xE1ximo ${Og}MB.`).optional(),city:Te.string().optional(),state:Te.string().optional(),country:Te.string().optional(),description:Te.string().optional(),website:Te.url("URL do site deve ser v\xE1lida").optional(),email:Te.string().email("Email deve ser v\xE1lido").optional(),phone:Te.string().optional(),address:Te.string().optional(),functioning:Te.string().optional()}),us=class{constructor(e,t){this.museumRepository=e;this.firebaseStorageService=t}async handle(e,t){let{id:i,name:o,logo:s,city:n,state:a,country:m,description:p,website:h,email:A,phone:G,address:re,functioning:ie}=Jp.parse({id:e.params.id,...e.body,logo:e.file}),me=await this.museumRepository.findById(i);if(!me)throw new d("O museu n\xE3o existe.");let Ne=me.logoUrl;if(s&&(Ne=await this.firebaseStorageService.uploadFile({file:s,id:i,folder:"images/museums"})),!Ne)throw new Re("Logo URL \xE9 obrigat\xF3rio");return await this.museumRepository.update({id:i,name:o,logoUrl:Ne,city:n,state:a,country:m,description:p,website:h,email:A,phone:G,address:re,functioning:ie}),t.sendStatus(200)}};var Bg=k.object({id:k.uuid(),logoUrl:k.string().nullable(),name:k.string(),city:k.string().nullable(),state:k.string().nullable(),country:k.string().nullable(),description:k.string().nullable(),website:k.string().nullable(),email:k.string().nullable(),phone:k.string().nullable(),address:k.string().nullable(),functioning:k.string().nullable(),createdAt:k.date(),updatedAt:k.date()}),qg={method:"post",path:"/museum",tags:["Museums"],summary:"Create a new museum with logo upload",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:$p}}}},responses:{201:{description:"Museum created successfully",summary:"Museum Created"},400:{description:"Invalid input data, missing required fields, or invalid logo format/size",summary:"Validation Error",content:{"application/json":{schema:k.object({errors:k.record(k.string(),k.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:k.object({message:k.string()})}}},409:{description:"Museum with this name already exists",summary:"Conflict",content:{"application/json":{schema:k.object({message:k.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:k.object({message:k.string()})}}}}},Ng={method:"get",path:"/museum",tags:["Museums"],summary:"List all museums with pagination and filters",request:{query:Kp},responses:{200:{description:"List of museums retrieved successfully with pagination",summary:"Museums Retrieved",content:{"application/json":{schema:k.object({page:k.number(),totalPages:k.number(),offset:k.number().optional(),limit:k.number().optional(),museums:k.array(Bg)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:k.object({errors:k.record(k.string(),k.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:k.object({message:k.string()})}}}}},Gg={method:"get",path:"/museum/{id}",tags:["Museums"],summary:"Find museum by ID",request:{params:ls},responses:{200:{description:"Museum details retrieved successfully",summary:"Museum Retrieved",content:{"application/json":{schema:Bg}}},400:{description:"Invalid museum ID format",summary:"Validation Error",content:{"application/json":{schema:k.object({errors:k.record(k.string(),k.string())})}}},404:{description:"Museum not found with the provided ID",summary:"Museum Not Found",content:{"application/json":{schema:k.object({message:k.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:k.object({message:k.string()})}}}}},_g={method:"put",path:"/museum/{id}",tags:["Museums"],summary:"Update museum with optional logo upload",security:[{bearerAuth:[]}],request:{params:ls,body:{content:{"multipart/form-data":{schema:Jp.omit({id:!0})}}}},responses:{200:{description:"Museum updated successfully",summary:"Museum Updated"},400:{description:"Invalid input data, museum ID format, or invalid logo format/size",summary:"Validation Error",content:{"application/json":{schema:k.object({errors:k.record(k.string(),k.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:k.object({message:k.string()})}}},404:{description:"Museum not found with the provided ID",summary:"Museum Not Found",content:{"application/json":{schema:k.object({message:k.string()})}}},409:{description:"Museum with this name already exists",summary:"Conflict",content:{"application/json":{schema:k.object({message:k.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:k.object({message:k.string()})}}}}},Lg={method:"delete",path:"/museum/{id}",tags:["Museums"],summary:"Delete museum",security:[{bearerAuth:[]}],request:{params:zp},responses:{200:{description:"Museum deleted successfully",summary:"Museum Deleted"},400:{description:"Invalid museum ID format",summary:"Validation Error",content:{"application/json":{schema:k.object({errors:k.record(k.string(),k.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:k.object({message:k.string()})}}},404:{description:"Museum not found with the provided ID",summary:"Museum Not Found",content:{"application/json":{schema:k.object({message:k.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:k.object({message:k.string()})}}}}};import F from"zod";import{extendZodWithOpenApi as dT}from"@asteasolutions/zod-to-openapi";import Ii from"zod";var lT=5,Wg=1024,cT=Wg*Wg,uT=lT*cT;dT(Ii);var Yp=Ii.object({title:Ii.string().min(1),content:Ii.string().min(1),image:Ii.any().refine(r=>!r||typeof r=="object"&&typeof r.mimetype=="string"&&r.mimetype.startsWith("image/")&&typeof r.size=="number"&&r.size<=uT,{message:"A imagem deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB."})}),gs=class{constructor(e,t){this.newsRepository=e;this.firebaseStorageService=t}async handle(e,t){let{title:i,content:o,image:s}=Yp.parse({...e.body,image:e.file}),n=e.user.id,a=await this.firebaseStorageService.uploadFile({file:s,folder:M.NEWS,id:n});await this.newsRepository.create({title:i,content:o,authorId:n,imageUrl:a}),t.sendStatus(201)}};import{extendZodWithOpenApi as gT}from"@asteasolutions/zod-to-openapi";import jt from"zod";var yT=1;gT(jt);var Xp=jt.object({page:jt.coerce.number().min(1).default(yT),limit:jt.coerce.number().optional(),id:jt.string(),title:jt.string().optional(),content:jt.string().optional(),orderBy:jt.enum(["asc","desc"]).default("desc")}),ys=class{constructor(e){this.newsRepository=e}async handle(e,t){let{page:i,limit:o,id:s,...n}=Xp.parse(e.query),a=o?o*i-o:void 0,[m,p]=await Promise.all([this.newsRepository.findByAuthorId({authorId:s,pagination:{offset:a,limit:o},filter:n}),this.newsRepository.count({filter:{authorId:s,...n}})]),h=o?Math.max(Math.ceil(p/o),1):1;t.status(200).json({page:i,totalPages:h,offset:a,limit:o,news:m})}};import{extendZodWithOpenApi as fT}from"@asteasolutions/zod-to-openapi";import Qp from"zod";fT(Qp);var ed=Qp.object({id:Qp.string()}),fs=class{constructor(e){this.newsRepository=e}async handle(e,t){let{id:i}=ed.parse(e.params),o=await this.newsRepository.findById(i);if(!o)throw new d("Not\xEDcia n\xE3o encontrada.");t.status(200).json(o)}};import{extendZodWithOpenApi as hT}from"@asteasolutions/zod-to-openapi";import Ft from"zod";var RT=1;hT(Ft);var td=Ft.object({page:Ft.coerce.number().min(1).default(RT),limit:Ft.coerce.number().optional(),title:Ft.string().optional(),content:Ft.string().optional(),authorId:Ft.string().optional(),orderBy:Ft.enum(["asc","desc"]).default("desc")}),hs=class{constructor(e){this.newsRepository=e}async handle(e,t){let{page:i,limit:o,...s}=td.parse(e.query),n=o?o*i-o:void 0,[a,m]=await Promise.all([this.newsRepository.find({pagination:{offset:n,limit:o},filter:s}),this.newsRepository.count({filter:s})]),p=o?Math.max(Math.ceil(m/o),1):1;t.status(200).json({page:i,totalPages:p,offset:n,limit:o,news:a})}};var Hg={method:"post",path:"/news",tags:["News"],summary:"Create news",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:Yp}}}},responses:{201:{description:"News article created successfully",summary:"News Created",content:{"application/json":{schema:F.object({message:F.string()})}}},400:{description:"Invalid input data or file format",summary:"Validation Error",content:{"application/json":{schema:F.object({errors:F.record(F.string(),F.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:F.object({message:F.string()})}}}}},$g={method:"get",path:"/news",tags:["News"],summary:"List news",request:{query:td},responses:{200:{description:"Paginated list of news articles retrieved successfully",summary:"News Retrieved",content:{"application/json":{schema:F.object({page:F.number(),totalPages:F.number(),offset:F.number().optional(),limit:F.number().optional(),news:F.array(F.object({title:F.string(),content:F.string(),id:F.string(),createdAt:F.date(),updatedAt:F.date(),imageUrl:F.string().nullable()}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:F.object({errors:F.record(F.string(),F.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:F.object({message:F.string()})}}}}},Vg={method:"get",path:"/news/{id}",tags:["News"],summary:"Find news by ID",request:{params:ed},responses:{200:{description:"News article details retrieved successfully",summary:"News Retrieved",content:{"application/json":{schema:F.object({page:F.number(),totalPages:F.number(),offset:F.number().optional(),limit:F.number().optional(),news:F.object({title:F.string(),content:F.string(),id:F.string(),createdAt:F.date(),updatedAt:F.date(),imageUrl:F.string().nullable()})})}}},400:{description:"Invalid news ID format",summary:"Validation Error",content:{"application/json":{schema:F.object({errors:F.record(F.string(),F.string())})}}},404:{description:"News article not found with the provided ID",summary:"News Not Found",content:{"application/json":{schema:F.object({message:F.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:F.object({message:F.string()})}}}}},zg={method:"get",path:"/news/author/{author_id}",tags:["News"],summary:"List news by author",request:{params:F.object({author_id:F.string().openapi({param:{name:"author_id",in:"path"}})}),query:Xp.omit({id:!0})},responses:{200:{description:"Paginated list of news articles by author retrieved successfully",summary:"Author News Retrieved",content:{"application/json":{schema:F.object({page:F.number(),totalPages:F.number(),offset:F.number().optional(),limit:F.number().optional(),news:F.array(F.object({title:F.string(),content:F.string(),id:F.string(),createdAt:F.date(),updatedAt:F.date(),imageUrl:F.string().nullable()}))})}}},400:{description:"Invalid author ID or query parameters",summary:"Validation Error",content:{"application/json":{schema:F.object({errors:F.record(F.string(),F.string())})}}},404:{description:"Author not found with the provided ID",summary:"Author Not Found",content:{"application/json":{schema:F.object({message:F.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:F.object({message:F.string()})}}}}};import N from"zod";import{extendZodWithOpenApi as PT}from"@asteasolutions/zod-to-openapi";import Qe from"zod";var Kg=2,Zg=1024,bT=Zg*Zg,CT=Kg*bT;PT(Qe);var rd=Qe.object({name:Qe.string().min(1,"Nome \xE9 obrigat\xF3rio"),logo:Qe.any().refine(r=>r==null||typeof r!="object"||typeof r.size!="number"?!1:r.size<=CT,`A imagem deve ter no m\xE1ximo ${Kg}MB.`),websiteUrl:Qe.url("URL do site deve ser v\xE1lida").optional(),description:Qe.string().optional(),category:Qe.string().optional(),since:Qe.coerce.date(),isActive:Qe.preprocess(r=>r==="true",Qe.boolean().optional())}),Rs=class{constructor(e,t){this.partnerRepository=e;this.firebaseStorageService=t}async handle(e,t){let{name:i,logo:o,websiteUrl:s,description:n,category:a,since:m,isActive:p}=rd.parse({...e.body,logo:e.file}),h=await this.partnerRepository.create({name:i,websiteUrl:s,description:n,category:a,since:m,isActive:p}),A=await this.firebaseStorageService.uploadFile({file:o,id:h.id,folder:M.PARTNER});return await this.partnerRepository.update({id:h.id,logoUrl:A}),t.sendStatus(201)}};import{extendZodWithOpenApi as IT}from"@asteasolutions/zod-to-openapi";import id from"zod";IT(id);var od=id.object({id:id.uuid()}),Ps=class{constructor(e,t){this.partnerRepository=e;this.firebaseStorageService=t}async handle(e,t){let{id:i}=od.parse({id:e.params.id}),o=await this.partnerRepository.findById(i);if(!o)throw new d("O parceiro n\xE3o existe.");return o.logoUrl&&this.firebaseStorageService.deleteFile({fileUrl:o.logoUrl}),await this.partnerRepository.deleteById(i),t.sendStatus(200)}};import{extendZodWithOpenApi as TT}from"@asteasolutions/zod-to-openapi";import sd from"zod";TT(sd);var Cs=sd.object({id:sd.uuid()}),bs=class{constructor(e){this.partnerRepository=e}async handle(e,t){let{id:i}=Cs.parse({id:e.params.id}),o=await this.partnerRepository.findById(i);if(!o)throw new d("O parceiro n\xE3o existe.");return t.status(200).json(o)}};import{extendZodWithOpenApi as AT}from"@asteasolutions/zod-to-openapi";import pt from"zod";var ST=1;AT(pt);var nd=pt.object({page:pt.coerce.number().min(1).default(ST),limit:pt.coerce.number().optional(),name:pt.string().optional(),description:pt.string().optional(),category:pt.string().optional(),isActive:pt.coerce.boolean().optional(),orderBy:pt.enum(["asc","desc"]).default("desc")}),Is=class{constructor(e){this.partnerRepository=e}async handle(e,t){let{page:i,limit:o,...s}=nd.parse(e.query),n=o?o*i-o:void 0,[a,m]=await Promise.all([this.partnerRepository.find({pagination:{offset:n,limit:o},filter:s}),this.partnerRepository.count({filter:s})]),p=o?Math.max(Math.ceil(m/o),1):1;t.status(200).json({page:i,totalPages:p,offset:n,limit:o,partners:a})}};import{extendZodWithOpenApi as xT}from"@asteasolutions/zod-to-openapi";import $e from"zod";var Yg=2,Jg=1024,MT=Jg*Jg,ET=Yg*MT;xT($e);var ad=$e.object({id:$e.uuid(),name:$e.string().min(1,"Nome \xE9 obrigat\xF3rio").optional(),logo:$e.any().refine(r=>r==null?!0:typeof r!="object"||typeof r.size!="number"?!1:r.size<=ET,`A imagem deve ter no m\xE1ximo ${Yg}MB.`).optional(),websiteUrl:$e.url("URL do site deve ser v\xE1lida").optional(),description:$e.string().optional(),category:$e.string().optional(),since:$e.coerce.date().optional(),isActive:$e.preprocess(r=>r==="true",$e.boolean().optional())}),Ts=class{constructor(e,t){this.partnerRepository=e;this.firebaseStorageService=t}async handle(e,t){let{id:i,name:o,logo:s,websiteUrl:n,description:a,category:m,since:p,isActive:h}=ad.parse({id:e.params.id,...e.body,logo:e.file}),A=await this.partnerRepository.findById(i);if(!A)throw new d("O parceiro n\xE3o existe.");let G=A.logoUrl;if(s&&(G=await this.firebaseStorageService.uploadFile({file:s,id:i,folder:"images/partners"})),!G)throw new Re("Logo URL \xE9 obrigat\xF3rio");return await this.partnerRepository.update({id:i,name:o,logoUrl:G,websiteUrl:n,description:a,category:m,since:p,isActive:h}),t.sendStatus(200)}};var Xg=N.object({id:N.uuid(),name:N.string(),logoUrl:N.string(),description:N.string().nullable(),category:N.string().nullable(),since:N.date(),isActive:N.boolean(),createdAt:N.date(),updatedAt:N.date()}),Qg={method:"post",path:"/partner",tags:["Partners"],summary:"Create a new partner with logo upload",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:rd}}}},responses:{201:{description:"Partner created successfully",summary:"Partner Created"},400:{description:"Invalid input data, missing required fields, or invalid logo format/size",summary:"Validation Error",content:{"application/json":{schema:N.object({errors:N.record(N.string(),N.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:N.object({message:N.string()})}}},409:{description:"Partner with this name already exists",summary:"Conflict",content:{"application/json":{schema:N.object({message:N.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:N.object({message:N.string()})}}}}},ey={method:"get",path:"/partner",tags:["Partners"],summary:"List all partners with pagination and filters",request:{query:nd},responses:{200:{description:"List of partners retrieved successfully with pagination",summary:"Partners Retrieved",content:{"application/json":{schema:N.object({page:N.number(),totalPages:N.number(),offset:N.number().optional(),limit:N.number().optional(),partners:N.array(Xg)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:N.object({errors:N.record(N.string(),N.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:N.object({message:N.string()})}}}}},ty={method:"get",path:"/partner/{id}",tags:["Partners"],summary:"Find partner by ID",request:{params:Cs},responses:{200:{description:"Partner details retrieved successfully",summary:"Partner Retrieved",content:{"application/json":{schema:Xg}}},400:{description:"Invalid partner ID format",summary:"Validation Error",content:{"application/json":{schema:N.object({errors:N.record(N.string(),N.string())})}}},404:{description:"Partner not found with the provided ID",summary:"Partner Not Found",content:{"application/json":{schema:N.object({message:N.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:N.object({message:N.string()})}}}}},ry={method:"put",path:"/partner/{id}",tags:["Partners"],summary:"Update partner with optional logo upload",security:[{bearerAuth:[]}],request:{params:Cs,body:{content:{"multipart/form-data":{schema:ad.omit({id:!0})}}}},responses:{200:{description:"Partner updated successfully",summary:"Partner Updated"},400:{description:"Invalid input data, partner ID format, or invalid logo format/size",summary:"Validation Error",content:{"application/json":{schema:N.object({errors:N.record(N.string(),N.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:N.object({message:N.string()})}}},404:{description:"Partner not found with the provided ID",summary:"Partner Not Found",content:{"application/json":{schema:N.object({message:N.string()})}}},409:{description:"Partner with this name already exists",summary:"Conflict",content:{"application/json":{schema:N.object({message:N.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:N.object({message:N.string()})}}}}},iy={method:"delete",path:"/partner/{id}",tags:["Partners"],summary:"Delete partner",security:[{bearerAuth:[]}],request:{params:od},responses:{200:{description:"Partner deleted successfully",summary:"Partner Deleted"},400:{description:"Invalid partner ID format",summary:"Validation Error",content:{"application/json":{schema:N.object({errors:N.record(N.string(),N.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:N.object({message:N.string()})}}},404:{description:"Partner not found with the provided ID",summary:"Partner Not Found",content:{"application/json":{schema:N.object({message:N.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:N.object({message:N.string()})}}}}};import q from"zod";import{extendZodWithOpenApi as wT}from"@asteasolutions/zod-to-openapi";import Dt from"zod";wT(Dt);var md=Dt.object({id:Dt.uuid(),title:Dt.string().min(1),description:Dt.string().optional(),status:Dt.enum(xe).default("PENDING"),dueDate:Dt.coerce.date().optional(),document:Dt.any().refine(r=>r&&typeof r=="object"&&r.size>0,"Arquivo do documento \xE9 obrigat\xF3rio")}),As=class{constructor(e,t,i){this.userRepository=e;this.pendencyRepository=t;this.firebaseStorageService=i}async handle(e,t){let{id:i,title:o,description:s,status:n,dueDate:a,document:m}=md.parse({...e.body,...e.params,document:e.file});if(!await this.userRepository.findById(i))throw new le("O usu\xE1rio n\xE3o existe.");let h=await this.firebaseStorageService.uploadFile({file:m,id:i,folder:M.PENDENCY});return await this.pendencyRepository.create({userId:i,title:o,description:s,status:n,dueDate:a,documentUrl:h}),t.sendStatus(201)}};import{extendZodWithOpenApi as vT}from"@asteasolutions/zod-to-openapi";import pd from"zod";vT(pd);var dd=pd.object({id:pd.uuid()}),Ss=class{constructor(e,t){this.pendencyRepository=e;this.firebaseStorageService=t}async handle(e,t){let{id:i}=dd.parse(e.params),o=await this.pendencyRepository.findById(i);if(!o)throw new d("A pend\xEAncia n\xE3o existe.");return await Promise.all([this.pendencyRepository.deleteById(o.id),this.firebaseStorageService.deleteFile({fileUrl:o.documentUrl})]),t.sendStatus(204)}};import{extendZodWithOpenApi as UT}from"@asteasolutions/zod-to-openapi";import dt from"zod";var jT=1;UT(dt);var ld=dt.object({page:dt.coerce.number().min(1).default(jT),limit:dt.coerce.number().optional(),title:dt.string().optional(),description:dt.string().optional(),status:dt.enum(xe).default("PENDING"),userId:dt.uuid().optional(),orderBy:dt.enum(["asc","desc"]).default("desc")}),xs=class{constructor(e){this.pendencyRepository=e}async handle(e,t){let{limit:i,orderBy:o,page:s,...n}=ld.parse(e.query),a=i?i*s-i:void 0,[m,p]=await Promise.all([this.pendencyRepository.find({pagination:{offset:a,limit:i},filter:{orderBy:o,...n}}),this.pendencyRepository.count({filter:n})]),h=i?Math.max(Math.ceil(p/i),1):1;return t.status(200).json({page:s,totalPages:h,offset:a,limit:i,pendencies:m})}};import{extendZodWithOpenApi as FT}from"@asteasolutions/zod-to-openapi";import cd from"zod";FT(cd);var ud=cd.object({id:cd.uuid()}),Ms=class{constructor(e){this.pendencyRepository=e}async handle(e,t){let{id:i}=ud.parse(e.params),o=await this.pendencyRepository.findById(i);if(!o)throw new d("Pend\xEAncia n\xE3o encontrada.");return t.status(200).json(o)}};import{extendZodWithOpenApi as DT}from"@asteasolutions/zod-to-openapi";import kt from"zod";DT(kt);var ws=kt.object({id:kt.uuid(),title:kt.string().min(1),description:kt.string().optional(),status:kt.enum(xe),dueDate:kt.coerce.date().optional(),document:kt.any().refine(r=>r==null||typeof r=="object"&&typeof r.size=="number"&&(r.size===0||r.size>0),"Arquivo do documento \xE9 inv\xE1lido").optional()}),Es=class{constructor(e,t){this.pendencyRepository=e;this.firebaseStorageService=t}async handle(e,t){let{document:i,id:o,...s}=ws.parse({...e.body,id:e.params.id,document:e.file}),n=await this.pendencyRepository.findById(o);if(!n)throw new le("A pend\xEAncia n\xE3o existe");let a=n.documentUrl;return i&&i.size>0&&(a=await this.firebaseStorageService.updateFile({file:i,id:n.userId,folder:M.PENDENCY,fileUrl:n.documentUrl})),await this.pendencyRepository.update({...s,id:o,documentUrl:a}),t.sendStatus(204)}};var oy={method:"post",path:"/pendency/{user_id}",tags:["Pendencies"],summary:"Create pendency for user",security:[{bearerAuth:[]}],request:{params:q.object({user_id:q.string().openapi({param:{name:"user_id",in:"path"}})}),body:{content:{"multipart/form-data":{schema:md.omit({id:!0})}}}},responses:{201:{description:"Pendency created successfully for the user",summary:"Pendency Created",content:{"application/json":{schema:q.object({})}}},400:{description:"Invalid input data or file format",summary:"Validation Error",content:{"application/json":{schema:q.object({errors:q.record(q.string(),q.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:q.object({message:q.string()})}}}}},sy={method:"get",path:"/pendency",tags:["Pendencies"],summary:"List pendencies",security:[{bearerAuth:[]}],request:{query:ld},responses:{200:{description:"Paginated list of pendencies retrieved successfully",summary:"Pendencies Retrieved",content:{"application/json":{schema:q.object({page:q.number(),totalPages:q.number(),offset:q.number().optional(),limit:q.number().optional(),pendencies:q.array(q.object({id:q.string(),title:q.string(),description:q.string().nullable(),status:q.enum(xe),dueDate:q.date().nullable(),documentUrl:q.string(),userId:q.string(),createdAt:q.date(),updatedAt:q.date()}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:q.object({errors:q.record(q.string(),q.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:q.object({message:q.string()})}}}}},ny={method:"get",path:"/pendency/{pendency_id}",tags:["Pendencies"],summary:"Find pendency by ID",security:[{bearerAuth:[]}],request:{params:ud},responses:{200:{description:"Pendency details retrieved successfully",summary:"Pendency Retrieved",content:{"application/json":{schema:q.object({id:q.string(),title:q.string(),description:q.string().nullable(),status:q.enum(xe),dueDate:q.date().nullable(),documentUrl:q.string(),userId:q.string(),createdAt:q.date(),updatedAt:q.date()}).nullable()}}},400:{description:"Invalid pendency ID format",summary:"Validation Error",content:{"application/json":{schema:q.object({errors:q.record(q.string(),q.string())})}}},404:{description:"Pendency not found with the provided ID",summary:"Pendency Not Found",content:{"application/json":{schema:q.object({message:q.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:q.object({message:q.string()})}}}}},ay={method:"put",path:"/pendency/{pendency_id}",tags:["Pendencies"],summary:"Update pendency",security:[{bearerAuth:[]}],request:{params:ws.pick({id:!0}).transform(()=>({pendency_id:""})),body:{content:{"multipart/form-data":{schema:ws.omit({id:!0})}}}},responses:{204:{description:"Pendency updated successfully",summary:"Pendency Updated"},400:{description:"Invalid input data or pendency does not exist",summary:"Validation Error",content:{"application/json":{schema:q.object({errors:q.record(q.string(),q.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:q.object({message:q.string()})}}}}},my={method:"delete",path:"/pendency/{pendency_id}",tags:["Pendencies"],summary:"Delete pendency",security:[{bearerAuth:[]}],request:{params:dd},responses:{204:{description:"Pendency deleted successfully",summary:"Pendency Deleted"},400:{description:"Invalid pendency ID format",summary:"Validation Error",content:{"application/json":{schema:q.object({errors:q.record(q.string(),q.string())})}}},404:{description:"Pendency not found with the provided ID",summary:"Pendency Not Found",content:{"application/json":{schema:q.object({message:q.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:q.object({message:q.string()})}}}}};import S from"zod";import{extendZodWithOpenApi as kT}from"@asteasolutions/zod-to-openapi";import gd from"zod";kT(gd);var yd=gd.object({id:gd.uuid()}),vs=class{constructor(e,t){this.postGraduateProgramRepository=e;this.firebaseStorageService=t}async handle(e,t){let{id:i}=yd.parse({id:e.params.id}),o=await this.postGraduateProgramRepository.findById(i);if(!o)throw new d("O programa de p\xF3s-gradua\xE7\xE3o n\xE3o existe.");return o.imageUrl&&this.firebaseStorageService.deleteFile({fileUrl:o.imageUrl}),await this.postGraduateProgramRepository.deleteById(i),t.sendStatus(200)}};import{extendZodWithOpenApi as OT}from"@asteasolutions/zod-to-openapi";import fd from"zod";OT(fd);var hd=fd.object({id:fd.uuid()}),Us=class{constructor(e){this.postGraduateProgramRepository=e}async handle(e,t){let{id:i}=hd.parse({id:e.params.id}),o=await this.postGraduateProgramRepository.findById(i);if(!o)throw new d("Programa de p\xF3s-gradua\xE7\xE3o n\xE3o encontrado.");return t.status(200).json(o)}};import{extendZodWithOpenApi as BT}from"@asteasolutions/zod-to-openapi";import Ot from"zod";var qT=1;BT(Ot);var Rd=Ot.object({page:Ot.coerce.number().min(1).default(qT),limit:Ot.coerce.number().optional(),title:Ot.string().optional(),description:Ot.string().optional(),contact:Ot.string().optional(),orderBy:Ot.enum(["asc","desc"]).default("desc")}),js=class{constructor(e){this.postGraduateProgramRepository=e}async handle(e,t){let{limit:i,page:o,...s}=Rd.parse(e.query),n=i?i*o-i:void 0,[a,m]=await Promise.all([this.postGraduateProgramRepository.find({pagination:{offset:n,limit:i},filter:s}),this.postGraduateProgramRepository.count({filter:s})]),p=i?Math.max(Math.ceil(m/i),1):1;return t.status(200).json({page:o,totalPages:p,offset:n,limit:i,postGraduatePrograms:a})}};import{extendZodWithOpenApi as NT}from"@asteasolutions/zod-to-openapi";import et from"zod";var dy=5,py=1024,GT=py*py,_T=dy*GT;NT(et);var Pd=et.object({id:et.uuid(),title:et.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio.").optional(),description:et.string().optional(),startDate:et.coerce.date().optional(),endDate:et.coerce.date().optional(),contact:et.string().min(1,"Contato \xE9 obrigat\xF3rio.").optional(),registrationLink:et.url("URL de inscri\xE7\xE3o deve ser v\xE1lida").optional(),image:et.any().refine(r=>r==null?!0:typeof r!="object"||typeof r.size!="number"?!1:r.size<=_T,`A imagem deve ter no m\xE1ximo ${dy}MB.`).optional()}),Fs=class{constructor(e,t){this.postGraduateProgramRepository=e;this.firebaseStorageService=t}async handle(e,t){let{id:i,image:o,title:s,description:n,startDate:a,endDate:m,contact:p,registrationLink:h}=Pd.parse({id:e.params.id,...e.body,image:e.file}),A=await this.postGraduateProgramRepository.findById(i);if(!A)throw new d("O programa de p\xF3s-gradua\xE7\xE3o n\xE3o existe.");let G=A.imageUrl;if(o&&(G=await this.firebaseStorageService.uploadFile({file:o,id:i,folder:M.POST_GRADUATE_PROGRAM})),!G)throw new Re("URL da imagem \xE9 obrigat\xF3rio");return await this.postGraduateProgramRepository.update({id:i,title:s,description:n,startDate:a,endDate:m,contact:p,registrationLink:h,imageUrl:G}),t.sendStatus(200)}};var ly={method:"post",path:"/post-graduate-programs",tags:["Post Graduate Programs"],summary:"Create post-graduate program",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:S.object({title:S.string().min(1).openapi({description:"T\xEDtulo do programa"}),description:S.string().optional().openapi({description:"Descri\xE7\xE3o do programa"}),startDate:S.string().openapi({description:"Data de in\xEDcio (ISO 8601)",example:"2024-01-01T10:00:00Z"}),endDate:S.string().openapi({description:"Data de t\xE9rmino (ISO 8601)",example:"2024-12-31T10:00:00Z"}),contact:S.string().min(1).openapi({description:"Informa\xE7\xF5es de contato"}),registrationLink:S.string().url().optional().openapi({description:"Link de inscri\xE7\xE3o"}),image:S.string().optional().openapi({description:"Imagem do programa (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{201:{description:"Post-graduate program created successfully",summary:"Program Created"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:S.object({errors:S.record(S.string(),S.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:S.object({message:S.string()})}}}}},cy={method:"get",path:"/post-graduate-programs",tags:["Post Graduate Programs"],summary:"List post-graduate programs",security:[{bearerAuth:[]}],request:{query:Rd},responses:{200:{description:"Paginated list of post-graduate programs retrieved successfully",summary:"Programs Retrieved",content:{"application/json":{schema:S.object({page:S.number(),totalPages:S.number(),offset:S.number().optional(),limit:S.number().optional(),postGraduatePrograms:S.array(S.object({id:S.string(),title:S.string(),imageUrl:S.string().nullable(),description:S.string().nullable(),startDate:S.date(),endDate:S.date(),contact:S.string(),registrationLink:S.string().nullable(),createdAt:S.date(),updatedAt:S.date()}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:S.object({errors:S.record(S.string(),S.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:S.object({message:S.string()})}}}}},uy={method:"get",path:"/post-graduate-programs/{id}",tags:["Post Graduate Programs"],summary:"Find post-graduate program by ID",security:[{bearerAuth:[]}],request:{params:hd},responses:{200:{description:"Post-graduate program details retrieved successfully",summary:"Program Retrieved",content:{"application/json":{schema:S.object({id:S.string(),title:S.string(),imageUrl:S.string().nullable(),description:S.string().nullable(),startDate:S.date(),endDate:S.date(),contact:S.string(),registrationLink:S.string().nullable(),createdAt:S.date(),updatedAt:S.date()}).nullable()}}},400:{description:"Invalid program ID format",summary:"Validation Error",content:{"application/json":{schema:S.object({errors:S.record(S.string(),S.string())})}}},404:{description:"Post-graduate program not found with the provided ID",summary:"Program Not Found",content:{"application/json":{schema:S.object({message:S.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:S.object({message:S.string()})}}}}},gy={method:"put",path:"/post-graduate-programs/{id}",tags:["Post Graduate Programs"],summary:"Update post-graduate program",security:[{bearerAuth:[]}],request:{params:Pd.pick({id:!0}),body:{content:{"multipart/form-data":{schema:S.object({title:S.string().min(1).optional().openapi({description:"T\xEDtulo do programa"}),description:S.string().optional().openapi({description:"Descri\xE7\xE3o do programa"}),startDate:S.string().optional().openapi({description:"Data de in\xEDcio (ISO 8601)",example:"2024-01-01T10:00:00Z"}),endDate:S.string().optional().openapi({description:"Data de t\xE9rmino (ISO 8601)",example:"2024-12-31T10:00:00Z"}),contact:S.string().min(1).optional().openapi({description:"Informa\xE7\xF5es de contato"}),registrationLink:S.string().url().optional().openapi({description:"Link de inscri\xE7\xE3o"}),image:S.string().optional().openapi({description:"Imagem do programa (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{200:{description:"Post-graduate program updated successfully",summary:"Program Updated"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:S.object({errors:S.record(S.string(),S.string())})}}},404:{description:"Post-graduate program not found with the provided ID",summary:"Program Not Found",content:{"application/json":{schema:S.object({message:S.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:S.object({message:S.string()})}}}}},yy={method:"delete",path:"/post-graduate-programs/{id}",tags:["Post Graduate Programs"],summary:"Delete post-graduate program",security:[{bearerAuth:[]}],request:{params:yd},responses:{200:{description:"Post-graduate program deleted successfully",summary:"Program Deleted"},400:{description:"Invalid program ID format",summary:"Validation Error",content:{"application/json":{schema:S.object({errors:S.record(S.string(),S.string())})}}},404:{description:"Post-graduate program not found with the provided ID",summary:"Program Not Found",content:{"application/json":{schema:S.object({message:S.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:S.object({message:S.string()})}}}}};import V from"zod";import{extendZodWithOpenApi as LT}from"@asteasolutions/zod-to-openapi";import Bt from"zod";LT(Bt);var bd=Bt.object({type:Bt.enum(Bc),description:Bt.string().optional(),honorableMention:Bt.coerce.boolean().optional(),honoredAt:Bt.coerce.date(),meritUrl:Bt.string().url("URL do m\xE9rito deve ser v\xE1lida").optional(),userId:Bt.string().uuid("ID do usu\xE1rio deve ser v\xE1lido")}),Ds=class{constructor(e){this.redectHighlightRepository=e}async handle(e,t){let{type:i,description:o,honorableMention:s,honoredAt:n,meritUrl:a,userId:m}=bd.parse(e.body);return await this.redectHighlightRepository.create({type:i,description:o,honorableMention:s,honoredAt:n,meritUrl:a,userId:m}),t.sendStatus(201)}};import{extendZodWithOpenApi as WT}from"@asteasolutions/zod-to-openapi";import Cd from"zod";WT(Cd);var Id=Cd.object({id:Cd.uuid()}),ks=class{constructor(e){this.redectHighlightRepository=e}async handle(e,t){let{id:i}=Id.parse(e.params);if(!await this.redectHighlightRepository.findById(i))throw new d("O destaque n\xE3o existe.");return await this.redectHighlightRepository.deleteById(i),t.sendStatus(200)}};import{extendZodWithOpenApi as HT}from"@asteasolutions/zod-to-openapi";import Td from"zod";HT(Td);var Bs=Td.object({id:Td.uuid()}),Os=class{constructor(e){this.redectHighlightRepository=e}async handle(e,t){let{id:i}=Bs.parse(e.params),o=await this.redectHighlightRepository.findById(i);if(!o)throw new d("Destaque n\xE3o encontrado.");return t.status(200).json(o)}};import{extendZodWithOpenApi as $T}from"@asteasolutions/zod-to-openapi";import Yt from"zod";var VT=1;$T(Yt);var Ad=Yt.object({page:Yt.coerce.number().min(1).default(VT),limit:Yt.coerce.number().optional(),type:Yt.enum(["PERSON","INSTITUTION"]).optional(),description:Yt.string().optional(),orderBy:Yt.enum(["asc","desc"]).default("desc")}),qs=class{constructor(e){this.redectHighlightRepository=e}async handle(e,t){let{page:i,limit:o,...s}=Ad.parse(e.query),n=o?o*i-o:void 0,[a,m]=await Promise.all([this.redectHighlightRepository.find({pagination:{offset:n,limit:o},filter:s}),this.redectHighlightRepository.count({filter:s})]),p=o?Math.max(Math.ceil(m/o),1):1;t.status(200).json({page:i,totalPages:p,offset:n,limit:o,highlights:a})}};import{extendZodWithOpenApi as zT}from"@asteasolutions/zod-to-openapi";import lt from"zod";zT(lt);var Sd=lt.object({id:lt.uuid(),type:lt.enum(["PERSON","INSTITUTION"]).optional(),description:lt.string().optional(),honorableMention:lt.coerce.boolean().optional(),honoredAt:lt.coerce.date().optional(),meritUrl:lt.string().url("URL do m\xE9rito deve ser v\xE1lida").optional(),userId:lt.string().uuid("ID do usu\xE1rio deve ser v\xE1lido").optional()}),Ns=class{constructor(e){this.redectHighlightRepository=e}async handle(e,t){let{id:i,type:o,description:s,honorableMention:n,honoredAt:a,meritUrl:m,userId:p}=Sd.parse({id:e.params.id,...e.body});if(!await this.redectHighlightRepository.findById(i))throw new d("O destaque n\xE3o existe.");return await this.redectHighlightRepository.update({id:i,type:o,description:s,honorableMention:n,honoredAt:a,meritUrl:m,userId:p}),t.sendStatus(200)}};var fy=V.object({id:V.uuid(),type:V.enum(["PERSON","INSTITUTION"]),name:V.string(),description:V.string().nullable(),honorableMention:V.string().nullable(),imageUrl:V.string().nullable(),honoredAt:V.date(),meritUrl:V.string().nullable(),createdAt:V.date(),updatedAt:V.date()}),hy={method:"post",path:"/redect-highlight",tags:["RedeCT Highlights"],summary:"Create a new RedeCT highlight with image upload",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:bd}}}},responses:{201:{description:"RedeCT highlight created successfully",summary:"Highlight Created"},400:{description:"Invalid input data, missing required fields, or invalid image format/size",summary:"Validation Error",content:{"application/json":{schema:V.object({errors:V.record(V.string(),V.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:V.object({message:V.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:V.object({message:V.string()})}}}}},Ry={method:"get",path:"/redect-highlight",tags:["RedeCT Highlights"],summary:"List all RedeCT highlights with pagination and filters",request:{query:Ad},responses:{200:{description:"List of RedeCT highlights retrieved successfully with pagination",summary:"Highlights Retrieved",content:{"application/json":{schema:V.object({page:V.number(),totalPages:V.number(),offset:V.number().optional(),limit:V.number().optional(),highlights:V.array(fy)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:V.object({errors:V.record(V.string(),V.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:V.object({message:V.string()})}}}}},Py={method:"get",path:"/redect-highlight/{id}",tags:["RedeCT Highlights"],summary:"Find RedeCT highlight by ID",request:{params:Bs},responses:{200:{description:"RedeCT highlight details retrieved successfully",summary:"Highlight Retrieved",content:{"application/json":{schema:fy}}},400:{description:"Invalid highlight ID format",summary:"Validation Error",content:{"application/json":{schema:V.object({errors:V.record(V.string(),V.string())})}}},404:{description:"RedeCT highlight not found with the provided ID",summary:"Highlight Not Found",content:{"application/json":{schema:V.object({message:V.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:V.object({message:V.string()})}}}}},by={method:"put",path:"/redect-highlight/{id}",tags:["RedeCT Highlights"],summary:"Update RedeCT highlight with optional image upload",security:[{bearerAuth:[]}],request:{params:Bs,body:{content:{"multipart/form-data":{schema:Sd.omit({id:!0})}}}},responses:{200:{description:"RedeCT highlight updated successfully",summary:"Highlight Updated"},400:{description:"Invalid input data, highlight ID format, or invalid image format/size",summary:"Validation Error",content:{"application/json":{schema:V.object({errors:V.record(V.string(),V.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:V.object({message:V.string()})}}},404:{description:"RedeCT highlight not found with the provided ID",summary:"Highlight Not Found",content:{"application/json":{schema:V.object({message:V.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:V.object({message:V.string()})}}}}},Cy={method:"delete",path:"/redect-highlight/{id}",tags:["RedeCT Highlights"],summary:"Delete RedeCT highlight",security:[{bearerAuth:[]}],request:{params:Id},responses:{200:{description:"RedeCT highlight deleted successfully",summary:"Highlight Deleted"},400:{description:"Invalid highlight ID format",summary:"Validation Error",content:{"application/json":{schema:V.object({errors:V.record(V.string(),V.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:V.object({message:V.string()})}}},404:{description:"RedeCT highlight not found with the provided ID",summary:"Highlight Not Found",content:{"application/json":{schema:V.object({message:V.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:V.object({message:V.string()})}}}}};import z from"zod";import{extendZodWithOpenApi as ZT}from"@asteasolutions/zod-to-openapi";import Ti from"zod";ZT(Ti);var xd=Ti.object({role:Ti.string().min(1),description:Ti.string().optional(),userId:Ti.uuid()}),Gs=class{constructor(e){this.referenceCenterTeamMemberRepository=e}async handle(e,t){let{role:i,description:o,userId:s}=xd.parse(e.body);return await this.referenceCenterTeamMemberRepository.create({role:i,description:o,userId:s}),t.sendStatus(201)}};import{extendZodWithOpenApi as KT}from"@asteasolutions/zod-to-openapi";import Md from"zod";KT(Md);var Ed=Md.object({id:Md.uuid()}),_s=class{constructor(e){this.referenceCenterTeamMemberRepository=e}async handle(e,t){let{id:i}=Ed.parse({id:e.params.id});if(!await this.referenceCenterTeamMemberRepository.findById(i))throw new d("O membro do centro de refer\xEAncia n\xE3o existe.");return await this.referenceCenterTeamMemberRepository.deleteById(i),t.sendStatus(200)}};import{extendZodWithOpenApi as JT}from"@asteasolutions/zod-to-openapi";import wd from"zod";JT(wd);var Ws=wd.object({id:wd.uuid()}),Ls=class{constructor(e){this.referenceCenterTeamMemberRepository=e}async handle(e,t){let{id:i}=Ws.parse({id:e.params.id}),o=await this.referenceCenterTeamMemberRepository.findById(i);if(!o)throw new d("O membro do centro de refer\xEAncia n\xE3o existe.");return t.status(200).json(o)}};import{extendZodWithOpenApi as YT}from"@asteasolutions/zod-to-openapi";import Br from"zod";YT(Br);var vd=Br.object({id:Br.uuid(),role:Br.string().min(1).optional(),description:Br.string().optional(),userId:Br.uuid().optional()}),Hs=class{constructor(e){this.referenceCenterTeamMemberRepository=e}async handle(e,t){let{id:i,role:o,description:s,userId:n}=vd.parse({id:e.params.id,...e.body});if(!await this.referenceCenterTeamMemberRepository.findById(i))throw new d("O membro do centro de refer\xEAncia n\xE3o existe.");return await this.referenceCenterTeamMemberRepository.update({id:i,role:o,description:s,userId:n}),t.sendStatus(200)}};var XT=z.object({id:z.uuid(),name:z.string(),emailAddress:z.string(),avatarUrl:z.string().nullable(),orcid:z.string().nullable(),phone:z.string().nullable(),lattesUrl:z.string().nullable(),role:z.enum(de)}),Iy=z.object({id:z.uuid(),role:z.string(),description:z.string().nullable(),createdAt:z.date(),updatedAt:z.date(),userId:z.uuid(),user:XT}),Ty={method:"post",path:"/reference-center-team-member",tags:["Reference Center Team Members"],summary:"Create a new Reference Center Team Member",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:xd}}}},responses:{201:{description:"Reference Center Team Member created successfully",summary:"Reference Center Team Member Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:z.object({errors:z.record(z.string(),z.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:z.object({message:z.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:z.object({message:z.string()})}}}}},Ay={method:"get",path:"/reference-center-team-member",tags:["Reference Center Team Members"],summary:"List all Reference Center Team Members with filters",request:{query:z.object({role:z.string().optional(),orderBy:z.enum(["asc","desc"]).default("desc")})},responses:{200:{description:"List of Reference Center Team Members retrieved successfully",summary:"Reference Center Team Members Retrieved",content:{"application/json":{schema:z.object({members:z.array(Iy)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:z.object({message:z.string()})}}}}},Sy={method:"get",path:"/reference-center-team-member/{id}",tags:["Reference Center Team Members"],summary:"Find Reference Center Team Member by ID",request:{params:Ws},responses:{200:{description:"Reference Center Team Member details retrieved successfully",summary:"Reference Center Team Member Retrieved",content:{"application/json":{schema:Iy}}},400:{description:"Invalid Reference Center Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:z.object({errors:z.record(z.string(),z.string())})}}},404:{description:"Reference Center Team Member not found with the provided ID",summary:"Reference Center Team Member Not Found",content:{"application/json":{schema:z.object({message:z.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:z.object({message:z.string()})}}}}},xy={method:"put",path:"/reference-center-team-member/{id}",tags:["Reference Center Team Members"],summary:"Update Reference Center Team Member",security:[{bearerAuth:[]}],request:{params:Ws,body:{content:{"application/json":{schema:vd.omit({id:!0})}}}},responses:{200:{description:"Reference Center Team Member updated successfully",summary:"Reference Center Team Member Updated"},400:{description:"Invalid input data or Reference Center Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:z.object({errors:z.record(z.string(),z.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:z.object({message:z.string()})}}},404:{description:"Reference Center Team Member not found with the provided ID",summary:"Reference Center Team Member Not Found",content:{"application/json":{schema:z.object({message:z.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:z.object({message:z.string()})}}}}},My={method:"delete",path:"/reference-center-team-member/{id}",tags:["Reference Center Team Members"],summary:"Delete Reference Center Team Member",security:[{bearerAuth:[]}],request:{params:Ed},responses:{200:{description:"Reference Center Team Member deleted successfully",summary:"Reference Center Team Member Deleted"},400:{description:"Invalid Reference Center Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:z.object({errors:z.record(z.string(),z.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:z.object({message:z.string()})}}},404:{description:"Reference Center Team Member not found with the provided ID",summary:"Reference Center Team Member Not Found",content:{"application/json":{schema:z.object({message:z.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:z.object({message:z.string()})}}}}};import B from"zod";import{extendZodWithOpenApi as QT}from"@asteasolutions/zod-to-openapi";import Xt from"zod";var wy=10,Ey=1024,eA=Ey*Ey,tA=wy*eA;QT(Xt);var Ud=Xt.object({title:Xt.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio"),version:Xt.string().min(1,"Vers\xE3o \xE9 obrigat\xF3ria"),publishedAt:Xt.coerce.date(),document:Xt.any().refine(r=>r==null||typeof r!="object"||typeof r.size!="number"?!1:r.size<=tA,`O documento deve ter no m\xE1ximo ${wy}MB.`),status:Xt.enum(Ge).optional()}),$s=class{constructor(e,t){this.regimentRepository=e;this.firebaseStorageService=t}async handle(e,t){let{title:i,version:o,publishedAt:s,document:n,status:a}=Ud.parse({...e.body,document:e.file}),m=await this.regimentRepository.create({title:i,version:o,publishedAt:s,documentUrl:"",status:a??Ge.IN_FORCE}),p=await this.firebaseStorageService.uploadFile({file:n,id:m.id,folder:M.REGIMENT});return await this.regimentRepository.update({id:m.id,documentUrl:p}),t.sendStatus(201)}};import{extendZodWithOpenApi as rA}from"@asteasolutions/zod-to-openapi";import jd from"zod";rA(jd);var Fd=jd.object({id:jd.uuid()}),Vs=class{constructor(e,t){this.regimentRepository=e;this.firebaseStorageService=t}async handle(e,t){let{id:i}=Fd.parse({id:e.params.id}),o=await this.regimentRepository.findById(i);if(!o)throw new d("O regimento n\xE3o existe.");return o.documentUrl&&await this.firebaseStorageService.deleteFile({fileUrl:o.documentUrl}),await this.regimentRepository.deleteById(i),t.sendStatus(200)}};import{extendZodWithOpenApi as iA}from"@asteasolutions/zod-to-openapi";import Dd from"zod";iA(Dd);var Zs=Dd.object({id:Dd.uuid()}),zs=class{constructor(e){this.regimentRepository=e}async handle(e,t){let{id:i}=Zs.parse({id:e.params.id}),o=await this.regimentRepository.findById(i);if(!o)throw new d("O regimento n\xE3o existe.");return t.status(200).json(o)}};import{extendZodWithOpenApi as oA}from"@asteasolutions/zod-to-openapi";import kd from"zod";oA(kd);var Od=kd.object({status:kd.enum(Ge)}),Ks=class{constructor(e){this.regimentRepository=e}async handle(e,t){let{status:i}=Od.parse({status:e.params.status}),o=await this.regimentRepository.findByStatus(i);return t.status(200).json(o)}};import{extendZodWithOpenApi as sA}from"@asteasolutions/zod-to-openapi";import Qt from"zod";var nA=1;sA(Qt);var Bd=Qt.object({page:Qt.coerce.number().min(1).default(nA),limit:Qt.coerce.number().optional(),title:Qt.string().optional(),status:Qt.enum(Ge).optional(),orderBy:Qt.enum(["asc","desc"]).default("desc")}),Js=class{constructor(e){this.regimentRepository=e}async handle(e,t){let{page:i,limit:o,...s}=Bd.parse(e.query),n=o?o*i-o:void 0,[a,m]=await Promise.all([this.regimentRepository.find({pagination:{offset:n,limit:o},filter:s}),this.regimentRepository.count({filter:s})]),p=o?Math.max(Math.ceil(m/o),1):1;t.status(200).json({page:i,totalPages:p,offset:n,limit:o,regiments:a})}};import{extendZodWithOpenApi as aA}from"@asteasolutions/zod-to-openapi";import qt from"zod";var Uy=10,vy=1024,mA=vy*vy,pA=Uy*mA;aA(qt);var qd=qt.object({id:qt.uuid(),title:qt.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio").optional(),version:qt.string().min(1,"Vers\xE3o \xE9 obrigat\xF3ria").optional(),publishedAt:qt.coerce.date().optional(),document:qt.any().refine(r=>r==null?!0:typeof r!="object"||typeof r.size!="number"?!1:r.size<=pA,`O documento deve ter no m\xE1ximo ${Uy}MB.`).optional(),status:qt.enum(Ge).optional()}),Ys=class{constructor(e,t){this.regimentRepository=e;this.firebaseStorageService=t}async handle(e,t){let{id:i,title:o,version:s,publishedAt:n,document:a,status:m}=qd.parse({id:e.params.id,...e.body,document:e.file}),p=await this.regimentRepository.findById(i);if(!p)throw new d("O regimento n\xE3o existe.");let h=p.documentUrl;return a&&(p.documentUrl&&await this.firebaseStorageService.deleteFile({fileUrl:p.documentUrl}),h=await this.firebaseStorageService.uploadFile({file:a,id:i,folder:M.REGIMENT})),await this.regimentRepository.update({id:i,title:o,version:s,publishedAt:n,documentUrl:h??void 0,status:m}),t.sendStatus(200)}};var Nd=B.object({id:B.uuid(),title:B.string(),version:B.string(),publishedAt:B.date(),documentUrl:B.string(),status:B.enum(Ge),createdAt:B.date(),updatedAt:B.date()}),jy={method:"post",path:"/regiment",tags:["Regiments"],summary:"Create a new regiment with document upload",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:Ud}}}},responses:{201:{description:"Regiment created successfully",summary:"Regiment Created"},400:{description:"Invalid input data, missing required fields, or invalid document format/size",summary:"Validation Error",content:{"application/json":{schema:B.object({errors:B.record(B.string(),B.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:B.object({message:B.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:B.object({message:B.string()})}}}}},Fy={method:"get",path:"/regiment",tags:["Regiments"],summary:"List all regiments with pagination and filters",request:{query:Bd},responses:{200:{description:"List of regiments retrieved successfully with pagination",summary:"Regiments Retrieved",content:{"application/json":{schema:B.object({page:B.number(),totalPages:B.number(),offset:B.number().optional(),limit:B.number().optional(),regiments:B.array(Nd)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:B.object({errors:B.record(B.string(),B.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:B.object({message:B.string()})}}}}},Dy={method:"get",path:"/regiment/{id}",tags:["Regiments"],summary:"Find regiment by ID",request:{params:Zs},responses:{200:{description:"Regiment details retrieved successfully",summary:"Regiment Retrieved",content:{"application/json":{schema:Nd}}},400:{description:"Invalid regiment ID format",summary:"Validation Error",content:{"application/json":{schema:B.object({errors:B.record(B.string(),B.string())})}}},404:{description:"Regiment not found with the provided ID",summary:"Regiment Not Found",content:{"application/json":{schema:B.object({message:B.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:B.object({message:B.string()})}}}}},ky={method:"get",path:"/regiment/status/{status}",tags:["Regiments"],summary:"Find regiments by status",request:{params:Od},responses:{200:{description:"Regiments retrieved successfully by status",summary:"Regiments Retrieved by Status",content:{"application/json":{schema:B.array(Nd)}}},400:{description:"Invalid status parameter provided",summary:"Validation Error",content:{"application/json":{schema:B.object({errors:B.record(B.string(),B.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:B.object({message:B.string()})}}}}},Oy={method:"put",path:"/regiment/{id}",tags:["Regiments"],summary:"Update regiment with optional document upload",security:[{bearerAuth:[]}],request:{params:Zs,body:{content:{"multipart/form-data":{schema:qd.omit({id:!0})}}}},responses:{200:{description:"Regiment updated successfully",summary:"Regiment Updated"},400:{description:"Invalid input data, regiment ID format, or invalid document format/size",summary:"Validation Error",content:{"application/json":{schema:B.object({errors:B.record(B.string(),B.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:B.object({message:B.string()})}}},404:{description:"Regiment not found with the provided ID",summary:"Regiment Not Found",content:{"application/json":{schema:B.object({message:B.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:B.object({message:B.string()})}}}}},By={method:"delete",path:"/regiment/{id}",tags:["Regiments"],summary:"Delete regiment",security:[{bearerAuth:[]}],request:{params:Fd},responses:{200:{description:"Regiment deleted successfully",summary:"Regiment Deleted"},400:{description:"Invalid regiment ID format",summary:"Validation Error",content:{"application/json":{schema:B.object({errors:B.record(B.string(),B.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:B.object({message:B.string()})}}},404:{description:"Regiment not found with the provided ID",summary:"Regiment Not Found",content:{"application/json":{schema:B.object({message:B.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:B.object({message:B.string()})}}}}};import Q from"zod";import{extendZodWithOpenApi as dA}from"@asteasolutions/zod-to-openapi";import Ai from"zod";var Ny=5,qy=1024,lA=qy*qy,cA=Ny*lA;dA(Ai);var Gd=Ai.object({caption:Ai.string().optional(),image:Ai.any().refine(r=>r==null||typeof r!="object"||typeof r.size!="number"?!1:r.size<=cA,`A imagem deve ter no m\xE1ximo ${Ny}MB.`),id:Ai.uuid()}),Xs=class{constructor(e,t,i){this.regionalCongressGalleryRepository=e;this.regionalCongressRepository=t;this.firebaseStorageService=i}async handle(e,t){let{caption:i,image:o,id:s}=Gd.parse({...e.body,...e.params,image:e.file});if(!await this.regionalCongressRepository.findById(s))throw new d("O congresso n\xE3o existe.");let a=await this.regionalCongressGalleryRepository.create({caption:i,congressId:s,imageUrl:""}),m=await this.firebaseStorageService.uploadFile({file:o,id:a.id,folder:M.GALLERY});return await this.regionalCongressGalleryRepository.update({id:a.id,imageUrl:m}),t.sendStatus(201)}};import{extendZodWithOpenApi as uA}from"@asteasolutions/zod-to-openapi";import _d from"zod";uA(_d);var en=_d.object({id:_d.uuid("ID inv\xE1lido")}),Qs=class{constructor(e){this.regionalCongressGalleryRepository=e}async handle(e,t){let{id:i}=en.parse(e.params);if(!await this.regionalCongressGalleryRepository.findById(i))throw new d("Item de galeria n\xE3o encontrado");return await this.regionalCongressGalleryRepository.deleteById(i),t.sendStatus(204)}};import{extendZodWithOpenApi as gA}from"@asteasolutions/zod-to-openapi";import er from"zod";var yA=1;gA(er);var Ld=er.object({id:er.uuid(),page:er.coerce.number().default(yA),limit:er.coerce.number().optional(),caption:er.string().optional(),orderBy:er.enum(["asc","desc"]).default("desc")}),tn=class{constructor(e){this.regionalCongressGalleryRepository=e}async handle(e,t){let{page:i,limit:o,caption:s,id:n}=Ld.parse({...e.params,...e.query}),a=o?o*i-o:void 0,[m,p]=await Promise.all([this.regionalCongressGalleryRepository.findByCongressId({pagination:{offset:a,limit:o},filter:{caption:s,congressId:n}}),this.regionalCongressGalleryRepository.count({filter:{caption:s,congressId:n}})]),h=o?Math.ceil(p/o):1;return t.status(200).json({page:i,limit:o,total:p,totalPages:h,galleryImages:m})}};import{extendZodWithOpenApi as fA}from"@asteasolutions/zod-to-openapi";import Si from"zod";var _y=5,Gy=1024,hA=Gy*Gy,RA=_y*hA;fA(Si);var Wd=Si.object({id:Si.string().uuid("ID inv\xE1lido"),caption:Si.string().optional(),image:Si.any().refine(r=>r==null?!0:typeof r!="object"||typeof r.size!="number"?!1:r.size<=RA,`A imagem deve ter no m\xE1ximo ${_y}MB.`).optional()}),rn=class{constructor(e,t){this.regionalCongressGalleryRepository=e;this.firebaseStorageService=t}async handle(e,t){let{id:i,caption:o,image:s}=Wd.parse({...e.params,...e.body,image:e.file});if(!await this.regionalCongressGalleryRepository.findById(i))throw new d("Item de galeria n\xE3o encontrado");let a;return s&&(a=await this.firebaseStorageService.uploadFile({file:s,id:i,folder:M.GALLERY})),await this.regionalCongressGalleryRepository.update({id:i,caption:o,...a&&{imageUrl:a}}),t.sendStatus(204)}};var PA=Q.object({id:Q.uuid(),imageUrl:Q.string(),caption:Q.string().nullable(),congressId:Q.uuid()}),Ly={method:"post",path:"/regional-congress/{congressId}/gallery",tags:["Regional Congresses"],summary:"Create a new congress gallery image",security:[{bearerAuth:[]}],request:{params:Q.object({congressId:Q.uuid()}),body:{content:{"application/json":{schema:Gd.omit({id:!0})}}}},responses:{201:{description:"Congress gallery image created successfully",summary:"Congress Gallery Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:Q.object({errors:Q.record(Q.string(),Q.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:Q.object({message:Q.string()})}}},404:{description:"Congress not found with the provided ID",summary:"Congress Not Found",content:{"application/json":{schema:Q.object({message:Q.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Q.object({message:Q.string()})}}}}},Wy={method:"get",path:"/regional-congress/{congressId}/gallery",tags:["Regional Congresses"],summary:"Find congress gallery images by congress ID",request:{params:Ld},responses:{200:{description:"Congress gallery images retrieved successfully by congress ID",summary:"Congress Galleries Retrieved",content:{"application/json":{schema:Q.object({page:Q.number(),limit:Q.number().optional(),total:Q.number(),totalPages:Q.number(),galleryImages:Q.array(PA)})}}},400:{description:"Invalid congress ID parameter provided",summary:"Validation Error",content:{"application/json":{schema:Q.object({errors:Q.record(Q.string(),Q.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Q.object({message:Q.string()})}}}}},Hy={method:"put",path:"/regional-congress/gallery/{id}",tags:["Regional Congresses"],summary:"Update congress gallery image",security:[{bearerAuth:[]}],request:{params:en,body:{content:{"application/json":{schema:Wd.omit({id:!0})}}}},responses:{200:{description:"Congress gallery image updated successfully",summary:"Congress Gallery Updated"},400:{description:"Invalid input data or gallery ID format",summary:"Validation Error",content:{"application/json":{schema:Q.object({errors:Q.record(Q.string(),Q.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:Q.object({message:Q.string()})}}},404:{description:"Congress gallery image not found with the provided ID",summary:"Congress Gallery Not Found",content:{"application/json":{schema:Q.object({message:Q.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Q.object({message:Q.string()})}}}}},$y={method:"delete",path:"/regional-congress/gallery/{id}",tags:["Regional Congresses"],summary:"Delete congress gallery image",security:[{bearerAuth:[]}],request:{params:en},responses:{200:{description:"Congress gallery image deleted successfully",summary:"Congress Gallery Deleted"},400:{description:"Invalid gallery ID format",summary:"Validation Error",content:{"application/json":{schema:Q.object({errors:Q.record(Q.string(),Q.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:Q.object({message:Q.string()})}}},404:{description:"Congress gallery image not found with the provided ID",summary:"Congress Gallery Not Found",content:{"application/json":{schema:Q.object({message:Q.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Q.object({message:Q.string()})}}}}};import ee from"zod";import{extendZodWithOpenApi as bA}from"@asteasolutions/zod-to-openapi";import xi from"zod";var zy=2,Vy=1024,CA=Vy*Vy,IA=zy*CA;bA(xi);var Hd=xi.object({name:xi.string().min(1,"Nome \xE9 obrigat\xF3rio"),logo:xi.any().refine(r=>r==null?!0:typeof r!="object"||typeof r.size!="number"?!1:r.size<=IA,`A imagem deve ter no m\xE1ximo ${zy}MB.`).optional(),id:xi.uuid()}),on=class{constructor(e,t,i){this.regionalCongressPartnerRepository=e;this.regionalCongressRepository=t;this.firebaseStorageService=i}async handle(e,t){let{name:i,logo:o,id:s}=Hd.parse({...e.body,...e.params,logo:e.file});if(!await this.regionalCongressRepository.findById(s))throw new d("O congresso n\xE3o existe.");let a=await this.regionalCongressPartnerRepository.create({name:i,congressId:s}),m;return o&&(m=await this.firebaseStorageService.uploadFile({file:o,id:a.id,folder:M.PARTNER}),await this.regionalCongressPartnerRepository.update({id:a.id,logoUrl:m})),t.sendStatus(201)}};import{extendZodWithOpenApi as TA}from"@asteasolutions/zod-to-openapi";import $d from"zod";TA($d);var nn=$d.object({id:$d.string().uuid("ID inv\xE1lido")}),sn=class{constructor(e){this.regionalCongressPartnerRepository=e}async handle(e,t){let{id:i}=nn.parse(e.params);if(!await this.regionalCongressPartnerRepository.findById(i))throw new d("Parceiro n\xE3o encontrado");return await this.regionalCongressPartnerRepository.deleteById(i),t.sendStatus(204)}};import{extendZodWithOpenApi as AA}from"@asteasolutions/zod-to-openapi";import qr from"zod";var SA=1;AA(qr);var Vd=qr.object({id:qr.uuid("ID do congresso inv\xE1lido"),page:qr.coerce.number().default(SA),limit:qr.coerce.number().optional(),name:qr.string().optional()}),an=class{constructor(e){this.regionalCongressPartnerRepository=e}async handle(e,t){let{id:i,page:o,limit:s,name:n}=Vd.parse({...e.params,...e.query}),a=s?s*o-s:void 0,[m,p]=await Promise.all([this.regionalCongressPartnerRepository.findByCongressId({pagination:{offset:a,limit:s},filter:{congressId:i,name:n}}),this.regionalCongressPartnerRepository.count({filter:{congressId:i,name:n}})]),h=s?Math.ceil(p/s):1;return t.status(200).json({page:o,limit:s,total:p,totalPages:h,partners:m})}};import{extendZodWithOpenApi as xA}from"@asteasolutions/zod-to-openapi";import Mi from"zod";var Ky=2,Zy=1024,MA=Zy*Zy,EA=Ky*MA;xA(Mi);var zd=Mi.object({id:Mi.string().uuid("ID inv\xE1lido"),name:Mi.string().min(1,"Nome \xE9 obrigat\xF3rio").optional(),logo:Mi.any().refine(r=>r==null?!0:typeof r!="object"||typeof r.size!="number"?!1:r.size<=EA,`A imagem deve ter no m\xE1ximo ${Ky}MB.`).optional()}),mn=class{constructor(e,t){this.regionalCongressPartnerRepository=e;this.firebaseStorageService=t}async handle(e,t){let{id:i,name:o,logo:s}=zd.parse({...e.params,...e.body,logo:e.file});if(!await this.regionalCongressPartnerRepository.findById(i))throw new d("Parceiro n\xE3o encontrado");let a;return s&&(a=await this.firebaseStorageService.uploadFile({file:s,id:i,folder:M.PARTNER})),await this.regionalCongressPartnerRepository.update({id:i,name:o,...a&&{logoUrl:a}}),t.sendStatus(204)}};var wA=ee.object({id:ee.uuid(),name:ee.string(),logoUrl:ee.string().nullable(),congressId:ee.uuid()}),Jy={method:"post",path:"/regional-congress/{congressId}/partner",tags:["Regional Congresses"],summary:"Create a new congress partner",security:[{bearerAuth:[]}],request:{params:ee.object({congressId:ee.uuid()}),body:{content:{"application/json":{schema:Hd.omit({id:!0})}}}},responses:{201:{description:"Congress partner created successfully",summary:"Congress Partner Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:ee.object({errors:ee.record(ee.string(),ee.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:ee.object({message:ee.string()})}}},404:{description:"Congress not found with the provided ID",summary:"Congress Not Found",content:{"application/json":{schema:ee.object({message:ee.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:ee.object({message:ee.string()})}}}}},Yy={method:"get",path:"/regional-congress/{congressId}/partner",tags:["Regional Congresses"],summary:"Find congress partners by congress ID",request:{params:Vd},responses:{200:{description:"Congress partners retrieved successfully by congress ID",summary:"Congress Partners Retrieved",content:{"application/json":{schema:ee.object({page:ee.number(),limit:ee.number().optional(),total:ee.number(),totalPages:ee.number(),partners:ee.array(wA)})}}},400:{description:"Invalid congress ID parameter provided",summary:"Validation Error",content:{"application/json":{schema:ee.object({errors:ee.record(ee.string(),ee.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:ee.object({message:ee.string()})}}}}},Xy={method:"put",path:"/regional-congress/partner/{id}",tags:["Regional Congresses"],summary:"Update congress partner",security:[{bearerAuth:[]}],request:{params:nn,body:{content:{"application/json":{schema:zd.omit({id:!0})}}}},responses:{200:{description:"Congress partner updated successfully",summary:"Congress Partner Updated"},400:{description:"Invalid input data or partner ID format",summary:"Validation Error",content:{"application/json":{schema:ee.object({errors:ee.record(ee.string(),ee.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:ee.object({message:ee.string()})}}},404:{description:"Congress partner not found with the provided ID",summary:"Congress Partner Not Found",content:{"application/json":{schema:ee.object({message:ee.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:ee.object({message:ee.string()})}}}}},Qy={method:"delete",path:"/regional-congress/partner/{id}",tags:["Regional Congresses"],summary:"Delete congress partner",security:[{bearerAuth:[]}],request:{params:nn},responses:{200:{description:"Congress partner deleted successfully",summary:"Congress Partner Deleted"},400:{description:"Invalid partner ID format",summary:"Validation Error",content:{"application/json":{schema:ee.object({errors:ee.record(ee.string(),ee.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:ee.object({message:ee.string()})}}},404:{description:"Congress partner not found with the provided ID",summary:"Congress Partner Not Found",content:{"application/json":{schema:ee.object({message:ee.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:ee.object({message:ee.string()})}}}}};import g from"zod";import{extendZodWithOpenApi as vA}from"@asteasolutions/zod-to-openapi";import ae from"zod";vA(ae);var Zd=ae.object({title:ae.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio"),edition:ae.coerce.number().int().positive("Edi\xE7\xE3o deve ser um n\xFAmero positivo"),startDate:ae.coerce.date(),endDate:ae.coerce.date(),description:ae.string().optional(),location:ae.string().optional(),congressLink:ae.union([ae.url("Link do congresso deve ser uma URL v\xE1lida"),ae.literal("")]),noticeUrl:ae.union([ae.url("URL do edital deve ser uma URL v\xE1lida"),ae.literal("")]),scheduleUrl:ae.union([ae.url("URL do cronograma deve ser uma URL v\xE1lida"),ae.literal("")]),programUrl:ae.union([ae.url("URL da programa\xE7\xE3o deve ser uma URL v\xE1lida"),ae.literal("")]),adminReportUrl:ae.union([ae.url("URL do relat\xF3rio administrativo deve ser uma URL v\xE1lida"),ae.literal("")]),proceedingsUrl:ae.union([ae.url("URL dos anais deve ser uma URL v\xE1lida"),ae.literal("")])}).refine(r=>r.endDate>=r.startDate,{message:"Data de t\xE9rmino deve ser posterior ou igual \xE0 data de in\xEDcio",path:["endDate"]}),pn=class{constructor(e){this.regionalCongressRepository=e}async handle(e,t){let i=Zd.parse(e.body);return await this.regionalCongressRepository.create(i),t.sendStatus(201)}};import{extendZodWithOpenApi as UA}from"@asteasolutions/zod-to-openapi";import Kd from"zod";UA(Kd);var Jd=Kd.object({id:Kd.string().uuid("ID inv\xE1lido")}),dn=class{constructor(e){this.regionalCongressRepository=e}async handle(e,t){let{id:i}=Jd.parse(e.params);if(!await this.regionalCongressRepository.findById(i))throw new d("Congresso regional n\xE3o encontrado");return await this.regionalCongressRepository.deleteById(i),t.sendStatus(204)}};import{extendZodWithOpenApi as jA}from"@asteasolutions/zod-to-openapi";import Yd from"zod";jA(Yd);var Xd=Yd.object({edition:Yd.coerce.number().int().positive("Edi\xE7\xE3o deve ser um n\xFAmero positivo")}),ln=class{constructor(e){this.regionalCongressRepository=e}async handle(e,t){let{edition:i}=Xd.parse(e.params),o=await this.regionalCongressRepository.findByEdition(i);if(!o||o.length===0)throw new d("Congresso regional n\xE3o encontrado");return t.status(200).json(o)}};import{extendZodWithOpenApi as FA}from"@asteasolutions/zod-to-openapi";import Qd from"zod";FA(Qd);var un=Qd.object({id:Qd.string().uuid("ID inv\xE1lido")}),cn=class{constructor(e){this.regionalCongressRepository=e}async handle(e,t){let{id:i}=un.parse(e.params),o=await this.regionalCongressRepository.findById(i);if(!o)throw new d("Congresso regional n\xE3o encontrado");return t.status(200).json(o)}};import{extendZodWithOpenApi as DA}from"@asteasolutions/zod-to-openapi";import Nt from"zod";var kA=1;DA(Nt);var el=Nt.object({page:Nt.coerce.number().default(kA),limit:Nt.coerce.number().optional(),title:Nt.string().optional(),edition:Nt.coerce.number().int().positive().optional(),location:Nt.string().optional(),orderBy:Nt.enum(["asc","desc"]).default("desc")}),gn=class{constructor(e){this.regionalCongressRepository=e}async handle(e,t){let{page:i,limit:o,orderBy:s,...n}=el.parse(e.query),a=o?o*i-o:void 0,[m,p]=await Promise.all([this.regionalCongressRepository.find({pagination:{offset:a,limit:o},filter:{...n,orderBy:s}}),this.regionalCongressRepository.count({filter:n})]),h=o?Math.ceil(p/o):1;return t.status(200).json({page:i,totalPages:h,limit:o,offset:a,congresses:m})}};import{extendZodWithOpenApi as OA}from"@asteasolutions/zod-to-openapi";import oe from"zod";OA(oe);var tl=oe.object({id:oe.string().uuid("ID inv\xE1lido"),title:oe.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio").optional(),edition:oe.coerce.number().int().positive("Edi\xE7\xE3o deve ser um n\xFAmero positivo").optional(),startDate:oe.coerce.date().optional(),endDate:oe.coerce.date().optional(),description:oe.string().optional(),location:oe.string().optional(),congressLink:oe.union([oe.url("Link do congresso deve ser uma URL v\xE1lida"),oe.literal("")]),noticeUrl:oe.union([oe.url("URL do edital deve ser uma URL v\xE1lida"),oe.literal("")]),scheduleUrl:oe.union([oe.url("URL do cronograma deve ser uma URL v\xE1lida"),oe.literal("")]),programUrl:oe.union([oe.url("URL da programa\xE7\xE3o deve ser uma URL v\xE1lida"),oe.literal("")]),adminReportUrl:oe.union([oe.url("URL do relat\xF3rio administrativo deve ser uma URL v\xE1lida"),oe.literal("")]),proceedingsUrl:oe.union([oe.url("URL dos anais deve ser uma URL v\xE1lida"),oe.literal("")])}).refine(r=>r.startDate&&r.endDate?r.endDate>=r.startDate:!0,{message:"Data de t\xE9rmino deve ser posterior ou igual \xE0 data de in\xEDcio",path:["endDate"]}),yn=class{constructor(e){this.regionalCongressRepository=e}async handle(e,t){let{id:i}=oe.object({id:oe.string().uuid()}).parse(e.params);if(!await this.regionalCongressRepository.findById(i))throw new d("Congresso regional n\xE3o encontrado");let s=tl.parse({id:i,...e.body});return await this.regionalCongressRepository.update(s),t.sendStatus(204)}};var BA=9,qA=g.object({image:g.any().openapi({type:"string",format:"binary"}),caption:g.string().optional()}),NA=g.object({image:g.any().openapi({type:"string",format:"binary"}).optional(),caption:g.string().optional()}),GA=g.object({id:g.uuid(),name:g.string(),logoUrl:g.string().nullable(),congressId:g.uuid()}),rl=g.object({id:g.uuid(),imageUrl:g.string(),caption:g.string().nullable(),congressId:g.uuid()}),il=g.object({id:g.uuid(),title:g.string(),edition:g.number(),startDate:g.date(),endDate:g.date(),description:g.string().nullable(),location:g.string().nullable(),congressLink:g.string().nullable(),noticeUrl:g.string().nullable(),scheduleUrl:g.string().nullable(),programUrl:g.string().nullable(),adminReportUrl:g.string().nullable(),proceedingsUrl:g.string().nullable(),partners:g.array(GA),galleries:g.array(rl),createdAt:g.date(),updatedAt:g.date()}),ef={method:"post",path:"/regional-congress",tags:["Regional Congresses"],summary:"Create a new regional congress",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:Zd}}}},responses:{201:{description:"Regional congress created successfully",summary:"Regional Congress Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:g.object({message:g.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}},tf={method:"get",path:"/regional-congress",tags:["Regional Congresses"],summary:"List all regional congresses with pagination and filters",request:{query:el},responses:{200:{description:"List of regional congresses retrieved successfully with pagination",summary:"Regional Congresses Retrieved",content:{"application/json":{schema:g.object({page:g.number(),totalPages:g.number(),offset:g.number().optional(),limit:g.number().optional(),congresses:g.array(il)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}},rf={method:"get",path:"/regional-congress/{id}",tags:["Regional Congresses"],summary:"Find regional congress by ID",request:{params:un},responses:{200:{description:"Regional congress details retrieved successfully",summary:"Regional Congress Retrieved",content:{"application/json":{schema:il}}},400:{description:"Invalid regional congress ID format",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},404:{description:"Regional congress not found with the provided ID",summary:"Regional Congress Not Found",content:{"application/json":{schema:g.object({message:g.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}},of={method:"get",path:"/regional-congress/edition/{edition}",tags:["Regional Congresses"],summary:"Find regional congresses by edition",request:{params:Xd},responses:{200:{description:"Regional congresses retrieved successfully by edition",summary:"Regional Congresses Retrieved by Edition",content:{"application/json":{schema:g.array(il)}}},400:{description:"Invalid edition parameter provided",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}},sf={method:"put",path:"/regional-congress/{id}",tags:["Regional Congresses"],summary:"Update regional congress",security:[{bearerAuth:[]}],request:{params:un,body:{content:{"application/json":{schema:tl.omit({id:!0})}}}},responses:{200:{description:"Regional congress updated successfully",summary:"Regional Congress Updated"},400:{description:"Invalid input data or regional congress ID format",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:g.object({message:g.string()})}}},404:{description:"Regional congress not found with the provided ID",summary:"Regional Congress Not Found",content:{"application/json":{schema:g.object({message:g.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}},nf={method:"delete",path:"/regional-congress/{id}",tags:["Regional Congresses"],summary:"Delete regional congress",security:[{bearerAuth:[]}],request:{params:Jd},responses:{200:{description:"Regional congress deleted successfully",summary:"Regional Congress Deleted"},400:{description:"Invalid regional congress ID format",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:g.object({message:g.string()})}}},404:{description:"Regional congress not found with the provided ID",summary:"Regional Congress Not Found",content:{"application/json":{schema:g.object({message:g.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}},hL={method:"post",path:"/regional-congress/{congressId}/gallery",tags:["Regional Congress Gallery"],summary:"Create a new gallery image for a congress",security:[{bearerAuth:[]}],request:{params:g.object({congressId:g.uuid()}),body:{content:{"multipart/form-data":{schema:qA}}}},responses:{201:{description:"Gallery image created successfully",summary:"Gallery Image Created"},400:{description:"Invalid input data, missing required fields, or invalid image format/size",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:g.object({message:g.string()})}}},404:{description:"Congress not found with the provided ID",summary:"Congress Not Found",content:{"application/json":{schema:g.object({message:g.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}},RL={method:"get",path:"/regional-congress/{congressId}/gallery",tags:["Regional Congress Gallery"],summary:"List all gallery images for a congress with pagination",request:{params:g.object({congressId:g.uuid()}),query:g.object({page:g.coerce.number().min(1).default(1),limit:g.coerce.number().min(1).default(BA),caption:g.string().optional()})},responses:{200:{description:"Gallery images retrieved successfully with pagination",summary:"Gallery Images Retrieved",content:{"application/json":{schema:g.object({page:g.number(),totalPages:g.number(),offset:g.number().optional(),limit:g.number().optional(),galleries:g.array(rl)})}}},400:{description:"Invalid congress ID format or query parameters",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}},PL={method:"get",path:"/regional-congress/gallery/{id}",tags:["Regional Congress Gallery"],summary:"Find a gallery image by ID",request:{params:g.object({id:g.uuid()})},responses:{200:{description:"Gallery image retrieved successfully",summary:"Gallery Image Retrieved",content:{"application/json":{schema:rl}}},400:{description:"Invalid gallery image ID format",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},404:{description:"Gallery image not found with the provided ID",summary:"Gallery Image Not Found",content:{"application/json":{schema:g.object({message:g.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}},bL={method:"put",path:"/regional-congress/gallery/{id}",tags:["Regional Congress Gallery"],summary:"Update a gallery image with optional image upload",security:[{bearerAuth:[]}],request:{params:g.object({id:g.uuid()}),body:{content:{"multipart/form-data":{schema:NA}}}},responses:{200:{description:"Gallery image updated successfully",summary:"Gallery Image Updated"},400:{description:"Invalid input data, gallery ID format, or invalid image format/size",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:g.object({message:g.string()})}}},404:{description:"Gallery image not found with the provided ID",summary:"Gallery Image Not Found",content:{"application/json":{schema:g.object({message:g.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}},CL={method:"delete",path:"/regional-congress/gallery/{id}",tags:["Regional Congress Gallery"],summary:"Delete a gallery image",security:[{bearerAuth:[]}],request:{params:g.object({id:g.uuid()})},responses:{200:{description:"Gallery image deleted successfully",summary:"Gallery Image Deleted"},400:{description:"Invalid gallery ID format",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:g.object({message:g.string()})}}},404:{description:"Gallery image not found with the provided ID",summary:"Gallery Image Not Found",content:{"application/json":{schema:g.object({message:g.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}};import y from"zod";import{extendZodWithOpenApi as _A}from"@asteasolutions/zod-to-openapi";import ol from"zod";_A(ol);var sl=ol.object({id:ol.uuid()}),fn=class{constructor(e,t){this.researchGroupRepository=e;this.firebaseStorageService=t}async handle(e,t){let{id:i}=sl.parse({id:e.params.id}),o=await this.researchGroupRepository.findById(i);if(!o)throw new d("O grupo de pesquisa n\xE3o existe.");return o.logoUrl&&this.firebaseStorageService.deleteFile({fileUrl:o.logoUrl}),await this.researchGroupRepository.deleteById(i),t.sendStatus(200)}};import{extendZodWithOpenApi as LA}from"@asteasolutions/zod-to-openapi";import nl from"zod";LA(nl);var al=nl.object({id:nl.uuid()}),hn=class{constructor(e){this.researchGroupRepository=e}async handle(e,t){let{id:i}=al.parse({id:e.params.id}),o=await this.researchGroupRepository.findById(i);if(!o)throw new d("Grupo de pesquisa n\xE3o encontrado.");return t.status(200).json(o)}};import{extendZodWithOpenApi as WA}from"@asteasolutions/zod-to-openapi";import ct from"zod";var HA=1;WA(ct);var ml=ct.object({page:ct.coerce.number().min(1).default(HA),limit:ct.coerce.number().optional(),name:ct.string().optional(),acronym:ct.string().optional(),description:ct.string().optional(),leader:ct.string().optional(),orderBy:ct.enum(["asc","desc"]).default("desc")}),Rn=class{constructor(e){this.researchGroupRepository=e}async handle(e,t){let{limit:i,page:o,...s}=ml.parse(e.query),n=i?i*o-i:void 0,[a,m]=await Promise.all([this.researchGroupRepository.find({pagination:{offset:n,limit:i},filter:s}),this.researchGroupRepository.count({filter:s})]),p=i?Math.max(Math.ceil(m/i),1):1;return t.status(200).json({page:o,totalPages:p,offset:n,limit:i,researchGroups:a})}};import{extendZodWithOpenApi as $A}from"@asteasolutions/zod-to-openapi";import ve from"zod";var mf=5,af=1024,VA=af*af,zA=mf*VA;$A(ve);var pl=ve.object({id:ve.uuid(),name:ve.string().min(1,"Nome \xE9 obrigat\xF3rio.").optional(),acronym:ve.string().optional(),description:ve.string().optional(),url:ve.url("URL deve ser v\xE1lida.").optional(),foundedAt:ve.coerce.date().optional(),scope:ve.string().optional(),email:ve.email("E-mail deve ser v\xE1lido.").optional(),leaderId:ve.uuid("L\xEDder \xE9 obrigat\xF3rio.").optional(),deputyLeaderId:ve.uuid("Vice-l\xEDder \xE9 obrigat\xF3rio.").optional(),logo:ve.any().refine(r=>r==null?!0:typeof r!="object"||typeof r.size!="number"?!1:r.size<=zA,`O logo deve ter no m\xE1ximo ${mf}MB.`).optional()}),Pn=class{constructor(e,t){this.researchGroupRepository=e;this.firebaseStorageService=t}async handle(e,t){let{id:i,logo:o,name:s,acronym:n,description:a,url:m,foundedAt:p,scope:h,email:A,leaderId:G,deputyLeaderId:re}=pl.parse({id:e.params.id,...e.body,logo:e.file}),ie=await this.researchGroupRepository.findById(i);if(!ie)throw new d("O grupo de pesquisa n\xE3o existe.");let me=ie.logoUrl;return o&&(me=await this.firebaseStorageService.uploadFile({file:o,id:i,folder:M.RESEARCH_GROUP_LOGO})),await this.researchGroupRepository.update({id:i,name:s,acronym:n,description:a,url:m,foundedAt:p,scope:h,email:A,leaderId:G,deputyLeaderId:re,logoUrl:me}),t.sendStatus(200)}};var pf={method:"post",path:"/research-groups",tags:["Research Groups"],summary:"Create research group",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:y.object({name:y.string().min(1).openapi({description:"Nome do grupo de pesquisa"}),acronym:y.string().optional().openapi({description:"Sigla do grupo"}),description:y.string().optional().openapi({description:"Descri\xE7\xE3o do grupo"}),url:y.string().url().optional().openapi({description:"URL do grupo"}),foundedAt:y.string().openapi({description:"Data de funda\xE7\xE3o (ISO 8601)",example:"2024-01-01T00:00:00Z"}),scope:y.string().optional().openapi({description:"Escopo do grupo"}),email:y.string().email().optional().openapi({description:"E-mail de contato"}),leaderId:y.string().uuid().openapi({description:"ID do l\xEDder (UUID)"}),deputyLeaderId:y.string().uuid().openapi({description:"ID do vice-l\xEDder (UUID)"}),logo:y.string().optional().openapi({description:"Logo do grupo (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{201:{description:"Research group created successfully",summary:"Research Group Created"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:y.object({errors:y.record(y.string(),y.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:y.object({message:y.string()})}}}}},df={method:"get",path:"/research-groups",tags:["Research Groups"],summary:"List research groups",security:[{bearerAuth:[]}],request:{query:ml},responses:{200:{description:"Paginated list of research groups with leader information retrieved successfully",summary:"Research Groups Retrieved",content:{"application/json":{schema:y.object({page:y.number(),totalPages:y.number(),offset:y.number().optional(),limit:y.number().optional(),researchGroups:y.array(y.object({id:y.string(),name:y.string(),acronym:y.string().nullable(),description:y.string().nullable(),url:y.string().nullable(),logoUrl:y.string().nullable(),foundedAt:y.date(),scope:y.string().nullable(),email:y.string().nullable(),leaderId:y.string(),deputyLeaderId:y.string(),createdAt:y.date(),updatedAt:y.date(),leader:y.object({id:y.uuid(),name:y.string(),emailAddress:y.email(),avatarUrl:y.string().nullable(),createdAt:y.date(),updatedAt:y.date()}),deputyLeader:y.object({id:y.uuid(),name:y.string(),emailAddress:y.email(),avatarUrl:y.string().nullable(),createdAt:y.date(),updatedAt:y.date()})}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:y.object({errors:y.record(y.string(),y.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:y.object({message:y.string()})}}}}},lf={method:"get",path:"/research-groups/{id}",tags:["Research Groups"],summary:"Find research group by ID",security:[{bearerAuth:[]}],request:{params:al},responses:{200:{description:"Research group details retrieved successfully",summary:"Research Group Retrieved",content:{"application/json":{schema:y.object({id:y.string(),name:y.string(),acronym:y.string().nullable(),description:y.string().nullable(),url:y.string().nullable(),logoUrl:y.string().nullable(),foundedAt:y.date(),scope:y.string().nullable(),email:y.string().nullable(),leaderId:y.string(),deputyLeaderId:y.string(),createdAt:y.date(),updatedAt:y.date(),leader:y.object({id:y.uuid(),name:y.string(),emailAddress:y.email(),avatarUrl:y.string().nullable(),createdAt:y.date(),updatedAt:y.date()}),deputyLeader:y.object({id:y.uuid(),name:y.string(),emailAddress:y.email(),avatarUrl:y.string().nullable(),createdAt:y.date(),updatedAt:y.date()})}).nullable()}}},400:{description:"Invalid research group ID format",summary:"Validation Error",content:{"application/json":{schema:y.object({errors:y.record(y.string(),y.string())})}}},404:{description:"Research group not found with the provided ID",summary:"Research Group Not Found",content:{"application/json":{schema:y.object({message:y.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:y.object({message:y.string()})}}}}},cf={method:"put",path:"/research-groups/{id}",tags:["Research Groups"],summary:"Update research group",security:[{bearerAuth:[]}],request:{params:pl.pick({id:!0}),body:{content:{"multipart/form-data":{schema:y.object({name:y.string().min(1).optional().openapi({description:"Nome do grupo de pesquisa"}),acronym:y.string().optional().openapi({description:"Sigla do grupo"}),description:y.string().optional().openapi({description:"Descri\xE7\xE3o do grupo"}),url:y.string().url().optional().openapi({description:"URL do grupo"}),foundedAt:y.string().optional().openapi({description:"Data de funda\xE7\xE3o (ISO 8601)",example:"2024-01-01T00:00:00Z"}),scope:y.string().optional().openapi({description:"Escopo do grupo"}),email:y.string().email().optional().openapi({description:"E-mail de contato"}),leaderId:y.string().uuid().optional().openapi({description:"ID do l\xEDder (UUID)"}),deputyLeaderId:y.string().uuid().optional().openapi({description:"ID do vice-l\xEDder (UUID)"}),logo:y.string().optional().openapi({description:"Logo do grupo (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{200:{description:"Research group updated successfully",summary:"Research Group Updated"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:y.object({errors:y.record(y.string(),y.string())})}}},404:{description:"Research group not found with the provided ID",summary:"Research Group Not Found",content:{"application/json":{schema:y.object({message:y.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:y.object({message:y.string()})}}}}},uf={method:"delete",path:"/research-groups/{id}",tags:["Research Groups"],summary:"Delete research group",security:[{bearerAuth:[]}],request:{params:sl},responses:{200:{description:"Research group deleted successfully",summary:"Research Group Deleted"},400:{description:"Invalid research group ID format",summary:"Validation Error",content:{"application/json":{schema:y.object({errors:y.record(y.string(),y.string())})}}},404:{description:"Research group not found with the provided ID",summary:"Research Group Not Found",content:{"application/json":{schema:y.object({message:y.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:y.object({message:y.string()})}}}}};import C from"zod";import{extendZodWithOpenApi as ZA}from"@asteasolutions/zod-to-openapi";import ke from"zod";ZA(ke);var dl=ke.object({registrationNumber:ke.string(),mainEtps:ke.string().optional(),formations:ke.string().optional(),degrees:ke.array(ke.enum(It)),occupations:ke.string(),seniority:ke.enum(Ct),institutions:ke.string(),biography:ke.string().optional(),userId:ke.string()}),bn=class{constructor(e){this.researcherRepository=e}async handle(e,t){let{registrationNumber:i,mainEtps:o,formations:s,degrees:n,occupations:a,seniority:m,institutions:p,biography:h,userId:A}=dl.parse(e.body);if(await this.researcherRepository.findByRegistrationNumber(i))throw new ce("J\xE1 existe um pesquisador cadastrado com este n\xFAmero de registro.");if(await this.researcherRepository.findByUserId(A))throw new ce("Usu\xE1rio j\xE1 possui um perfil de pesquisador.");return await this.researcherRepository.create({registrationNumber:i,mainEtps:o,formations:s,degrees:n,occupations:a,seniority:m,institutions:p,biography:h,userId:A}),t.sendStatus(201)}};import{extendZodWithOpenApi as KA}from"@asteasolutions/zod-to-openapi";import ll from"zod";KA(ll);var cl=ll.object({id:ll.uuid()}),Cn=class{constructor(e){this.researcherRepository=e}async handle(e,t){let{id:i}=cl.parse({id:e.params.id});if(!await this.researcherRepository.findById(i))throw new d("O pesquisador n\xE3o existe.");return await this.researcherRepository.deleteById(i),t.sendStatus(200)}};import{extendZodWithOpenApi as JA}from"@asteasolutions/zod-to-openapi";import ul from"zod";JA(ul);var Tn=ul.object({id:ul.uuid()}),In=class{constructor(e){this.researcherRepository=e}async handle(e,t){let{id:i}=Tn.parse({id:e.params.id}),o=await this.researcherRepository.findById(i);if(!o)throw new d("O pesquisador n\xE3o existe.");return t.status(200).json(o)}};import{extendZodWithOpenApi as YA}from"@asteasolutions/zod-to-openapi";import gl from"zod";YA(gl);var yl=gl.object({id:gl.uuid()}),An=class{constructor(e){this.researcherRepository=e}async handle(e,t){let{id:i}=yl.parse(e.params),o=await this.researcherRepository.findByUserId(i);if(!o)throw new d("O pesquisador n\xE3o existe para este usu\xE1rio.");return t.status(200).json(o)}};import{extendZodWithOpenApi as XA}from"@asteasolutions/zod-to-openapi";import Oe from"zod";XA(Oe);var fl=Oe.object({id:Oe.uuid(),registrationNumber:Oe.string().optional(),mainEtps:Oe.string().optional(),formations:Oe.string().optional(),degrees:Oe.array(Oe.enum(It)).optional(),occupations:Oe.string().optional(),seniority:Oe.enum(Ct).optional(),institutions:Oe.string().optional(),biography:Oe.string().optional()}),Sn=class{constructor(e){this.researcherRepository=e}async handle(e,t){let{id:i,registrationNumber:o,mainEtps:s,formations:n,degrees:a,occupations:m,seniority:p,institutions:h,biography:A}=fl.parse({id:e.params.id,...e.body}),G=await this.researcherRepository.findById(i);if(!G)throw new d("O pesquisador n\xE3o existe.");if(o&&o!==G.registrationNumber){let re=await this.researcherRepository.findByRegistrationNumber(o);if(re&&re.id!==i)throw new ce("J\xE1 existe um pesquisador com este n\xFAmero de registro.")}return await this.researcherRepository.update({id:i,registrationNumber:o,mainEtps:s,formations:n,degrees:a,occupations:m,seniority:p,institutions:h,biography:A}),t.sendStatus(200)}};var QA=1,eS=9,hl=C.object({id:C.uuid(),registrationNumber:C.string(),mainEtps:C.string().nullable(),formations:C.string().nullable(),degrees:C.array(C.enum(It)),occupations:C.string(),seniority:C.enum(Ct),institutions:C.string(),biography:C.string().nullable(),createdAt:C.date(),updatedAt:C.date(),userId:C.uuid(),user:C.object({id:C.uuid(),name:C.string(),emailAddress:C.string(),avatarUrl:C.string().nullable(),orcid:C.string().nullable(),phone:C.string().nullable(),lattesUrl:C.string().nullable(),role:C.enum(de)})}),gf={method:"post",path:"/researcher",tags:["Researchers"],summary:"Create a new researcher profile",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:dl}}}},responses:{201:{description:"Researcher profile created successfully",summary:"Researcher Created",content:{"application/json":{schema:C.object({message:C.string()})}}},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:C.object({errors:C.record(C.string(),C.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:C.object({message:C.string()})}}},409:{description:"Researcher with this registration number already exists or user already has a researcher profile",summary:"Conflict",content:{"application/json":{schema:C.object({message:C.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:C.object({message:C.string()})}}}}},yf={method:"get",path:"/researcher",tags:["Researchers"],summary:"List all researchers with pagination and filters",request:{query:C.object({page:C.coerce.number().min(1).default(QA).optional(),limit:C.coerce.number().min(1).default(eS).optional(),userId:C.string().optional(),registrationNumber:C.string().optional(),name:C.string().optional(),emailAddress:C.string().optional(),mainEtps:C.string().optional(),formations:C.string().optional(),occupations:C.string().optional(),institutions:C.string().optional(),biography:C.string().optional(),orderBy:C.enum(["asc","desc"]).default("desc")})},responses:{200:{description:"List of researchers retrieved successfully with pagination",summary:"Researchers Retrieved",content:{"application/json":{schema:C.object({page:C.number(),totalPages:C.number(),offset:C.number().optional(),limit:C.number().optional(),researchers:C.array(hl)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:C.object({message:C.string()})}}}}},ff={method:"get",path:"/researcher/{id}",tags:["Researchers"],summary:"Find researcher by ID",request:{params:Tn},responses:{200:{description:"Researcher details retrieved successfully",summary:"Researcher Retrieved",content:{"application/json":{schema:hl}}},400:{description:"Invalid researcher ID format",summary:"Validation Error",content:{"application/json":{schema:C.object({errors:C.record(C.string(),C.string())})}}},404:{description:"Researcher not found with the provided ID",summary:"Researcher Not Found",content:{"application/json":{schema:C.object({message:C.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:C.object({message:C.string()})}}}}},hf={method:"get",path:"/researcher/user/{userId}",tags:["Researchers"],summary:"Find researcher by user ID",request:{params:yl},responses:{200:{description:"Researcher details retrieved successfully",summary:"Researcher Retrieved",content:{"application/json":{schema:hl}}},400:{description:"Invalid user ID format",summary:"Validation Error",content:{"application/json":{schema:C.object({errors:C.record(C.string(),C.string())})}}},404:{description:"Researcher not found for this user",summary:"Researcher Not Found",content:{"application/json":{schema:C.object({message:C.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:C.object({message:C.string()})}}}}},Rf={method:"put",path:"/researcher/{id}",tags:["Researchers"],summary:"Update researcher profile",security:[{bearerAuth:[]}],request:{params:Tn,body:{content:{"application/json":{schema:fl.omit({id:!0})}}}},responses:{200:{description:"Researcher profile updated successfully",summary:"Researcher Updated",content:{"application/json":{schema:C.object({message:C.string()})}}},400:{description:"Invalid input data or researcher ID format",summary:"Validation Error",content:{"application/json":{schema:C.object({errors:C.record(C.string(),C.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:C.object({message:C.string()})}}},404:{description:"Researcher not found with the provided ID",summary:"Researcher Not Found",content:{"application/json":{schema:C.object({message:C.string()})}}},409:{description:"Researcher with this registration number already exists",summary:"Conflict",content:{"application/json":{schema:C.object({message:C.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:C.object({message:C.string()})}}}}},Pf={method:"delete",path:"/researcher/{id}",tags:["Researchers"],summary:"Delete researcher profile",security:[{bearerAuth:[]}],request:{params:cl},responses:{200:{description:"Researcher profile deleted successfully",summary:"Researcher Deleted"},400:{description:"Invalid researcher ID format",summary:"Validation Error",content:{"application/json":{schema:C.object({errors:C.record(C.string(),C.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:C.object({message:C.string()})}}},404:{description:"Researcher not found with the provided ID",summary:"Researcher Not Found",content:{"application/json":{schema:C.object({message:C.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:C.object({message:C.string()})}}}}};import f from"zod";import{extendZodWithOpenApi as tS}from"@asteasolutions/zod-to-openapi";import Rl from"zod";tS(Rl);var Pl=Rl.object({id:Rl.uuid()}),xn=class{constructor(e){this.scientificArticlesRepository=e}async handle(e,t){let{id:i}=Pl.parse({id:e.params.id});if(!await this.scientificArticlesRepository.findById(i))throw new d("O artigo cient\xEDfico n\xE3o existe.");return await this.scientificArticlesRepository.deleteById(i),t.sendStatus(200)}};import{extendZodWithOpenApi as rS}from"@asteasolutions/zod-to-openapi";import bl from"zod";rS(bl);var Cl=bl.object({id:bl.uuid()}),Mn=class{constructor(e){this.scientificArticlesRepository=e}async handle(e,t){let{id:i}=Cl.parse({id:e.params.id}),o=await this.scientificArticlesRepository.findById(i);if(!o)throw new d("Artigo cient\xEDfico n\xE3o encontrado.");return t.status(200).json(o)}};import{extendZodWithOpenApi as iS}from"@asteasolutions/zod-to-openapi";import Gt from"zod";var oS=1;iS(Gt);var Il=Gt.object({page:Gt.coerce.number().min(1).default(oS),limit:Gt.coerce.number().optional(),title:Gt.string().optional(),author:Gt.string().optional(),journal:Gt.string().optional(),orderBy:Gt.enum(["asc","desc"]).default("desc")}),En=class{constructor(e){this.scientificArticlesRepository=e}async handle(e,t){let{limit:i,page:o,...s}=Il.parse(e.query),n=i?i*o-i:void 0,[a,m]=await Promise.all([this.scientificArticlesRepository.find({pagination:{offset:n,limit:i},filter:s}),this.scientificArticlesRepository.count({filter:s})]),p=i?Math.max(Math.ceil(m/i),1):1;return t.status(200).json({page:o,totalPages:p,offset:n,limit:i,scientificArticles:a})}};import{extendZodWithOpenApi as sS}from"@asteasolutions/zod-to-openapi";import ue from"zod";sS(ue);var Tl=ue.object({id:ue.uuid(),title:ue.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio.").optional(),author:ue.string().min(1,"Autor \xE9 obrigat\xF3rio.").optional(),journal:ue.string().optional(),volume:ue.string().optional(),edition:ue.string().optional(),pageStart:ue.coerce.number().optional(),pageEnd:ue.coerce.number().optional(),startDate:ue.coerce.date().optional(),endDate:ue.coerce.date().optional(),city:ue.string().optional(),state:ue.string().optional(),country:ue.string().optional(),publisher:ue.string().optional(),description:ue.string().optional(),year:ue.coerce.number().optional(),accessUrl:ue.url("URL de acesso deve ser v\xE1lida").optional()}),wn=class{constructor(e){this.scientificArticlesRepository=e}async handle(e,t){let{id:i,title:o,author:s,journal:n,volume:a,edition:m,pageStart:p,pageEnd:h,startDate:A,endDate:G,city:re,state:ie,country:me,publisher:Ne,description:yi,year:dm,accessUrl:qb}=Tl.parse({id:e.params.id,...e.body});if(!await this.scientificArticlesRepository.findById(i))throw new d("O artigo cient\xEDfico n\xE3o existe.");return await this.scientificArticlesRepository.update({id:i,title:o,author:s,journal:n,volume:a,edition:m,pageStart:p,pageEnd:h,startDate:A,endDate:G,city:re,state:ie,country:me,publisher:Ne,description:yi,year:dm,accessUrl:qb}),t.sendStatus(200)}};var bf={method:"post",path:"/scientific-articles",tags:["Scientific Articles"],summary:"Create scientific article",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:f.object({title:f.string().min(1).openapi({description:"T\xEDtulo do artigo"}),author:f.string().min(1).openapi({description:"Autor do artigo"}),journal:f.string().optional().openapi({description:"Nome do peri\xF3dico/revista"}),volume:f.string().optional().openapi({description:"Volume"}),edition:f.string().optional().openapi({description:"N\xFAmero/Edi\xE7\xE3o"}),pageStart:f.number().optional().openapi({description:"P\xE1gina inicial"}),pageEnd:f.number().optional().openapi({description:"P\xE1gina final"}),startDate:f.string().openapi({description:"Data de in\xEDcio (ISO 8601)",example:"2024-01-01T10:00:00Z"}),endDate:f.string().openapi({description:"Data de t\xE9rmino (ISO 8601)",example:"2024-12-31T10:00:00Z"}),city:f.string().optional().openapi({description:"Cidade"}),state:f.string().optional().openapi({description:"Estado"}),country:f.string().optional().openapi({description:"Pa\xEDs"}),publisher:f.string().optional().openapi({description:"Editora/Institui\xE7\xE3o"}),description:f.string().optional().openapi({description:"Descri\xE7\xE3o do artigo"}),year:f.number().optional().openapi({description:"Ano"}),accessUrl:f.string().url().optional().openapi({description:"URL de acesso"})})}}}},responses:{201:{description:"Scientific article created successfully",summary:"Article Created"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:f.object({errors:f.record(f.string(),f.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:f.object({message:f.string()})}}}}},Cf={method:"get",path:"/scientific-articles",tags:["Scientific Articles"],summary:"List scientific articles",security:[{bearerAuth:[]}],request:{query:Il},responses:{200:{description:"Paginated list of scientific articles retrieved successfully",summary:"Articles Retrieved",content:{"application/json":{schema:f.object({page:f.number(),totalPages:f.number(),offset:f.number().optional(),limit:f.number().optional(),scientificArticles:f.array(f.object({id:f.string(),title:f.string(),author:f.string(),journal:f.string().nullable(),volume:f.string().nullable(),edition:f.string().nullable(),pageStart:f.number().nullable(),pageEnd:f.number().nullable(),startDate:f.date(),endDate:f.date(),city:f.string().nullable(),state:f.string().nullable(),country:f.string().nullable(),publisher:f.string().nullable(),description:f.string().nullable(),year:f.number().nullable(),accessUrl:f.string().nullable(),createdAt:f.date(),updatedAt:f.date()}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:f.object({errors:f.record(f.string(),f.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:f.object({message:f.string()})}}}}},If={method:"get",path:"/scientific-articles/{id}",tags:["Scientific Articles"],summary:"Find scientific article by ID",security:[{bearerAuth:[]}],request:{params:Cl},responses:{200:{description:"Scientific article details retrieved successfully",summary:"Article Retrieved",content:{"application/json":{schema:f.object({id:f.string(),title:f.string(),author:f.string(),journal:f.string().nullable(),volume:f.string().nullable(),edition:f.string().nullable(),pageStart:f.number().nullable(),pageEnd:f.number().nullable(),startDate:f.date(),endDate:f.date(),city:f.string().nullable(),state:f.string().nullable(),country:f.string().nullable(),publisher:f.string().nullable(),description:f.string().nullable(),year:f.number().nullable(),accessUrl:f.string().nullable(),createdAt:f.date(),updatedAt:f.date()}).nullable()}}},400:{description:"Invalid article ID format",summary:"Validation Error",content:{"application/json":{schema:f.object({errors:f.record(f.string(),f.string())})}}},404:{description:"Scientific article not found with the provided ID",summary:"Article Not Found",content:{"application/json":{schema:f.object({message:f.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:f.object({message:f.string()})}}}}},Tf={method:"put",path:"/scientific-articles/{id}",tags:["Scientific Articles"],summary:"Update scientific article",security:[{bearerAuth:[]}],request:{params:Tl.pick({id:!0}),body:{content:{"application/json":{schema:f.object({title:f.string().min(1).optional().openapi({description:"T\xEDtulo do artigo"}),author:f.string().min(1).optional().openapi({description:"Autor do artigo"}),journal:f.string().optional().openapi({description:"Nome do peri\xF3dico/revista"}),volume:f.string().optional().openapi({description:"Volume"}),edition:f.string().optional().openapi({description:"N\xFAmero/Edi\xE7\xE3o"}),pageStart:f.number().optional().openapi({description:"P\xE1gina inicial"}),pageEnd:f.number().optional().openapi({description:"P\xE1gina final"}),startDate:f.string().optional().openapi({description:"Data de in\xEDcio (ISO 8601)",example:"2024-01-01T10:00:00Z"}),endDate:f.string().optional().openapi({description:"Data de t\xE9rmino (ISO 8601)",example:"2024-12-31T10:00:00Z"}),city:f.string().optional().openapi({description:"Cidade"}),state:f.string().optional().openapi({description:"Estado"}),country:f.string().optional().openapi({description:"Pa\xEDs"}),publisher:f.string().optional().openapi({description:"Editora/Institui\xE7\xE3o"}),description:f.string().optional().openapi({description:"Descri\xE7\xE3o do artigo"}),year:f.number().optional().openapi({description:"Ano"}),accessUrl:f.string().url().optional().openapi({description:"URL de acesso"})})}}}},responses:{200:{description:"Scientific article updated successfully",summary:"Article Updated"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:f.object({errors:f.record(f.string(),f.string())})}}},404:{description:"Scientific article not found with the provided ID",summary:"Article Not Found",content:{"application/json":{schema:f.object({message:f.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:f.object({message:f.string()})}}}}},Af={method:"delete",path:"/scientific-articles/{id}",tags:["Scientific Articles"],summary:"Delete scientific article",security:[{bearerAuth:[]}],request:{params:Pl},responses:{200:{description:"Scientific article deleted successfully",summary:"Article Deleted"},400:{description:"Invalid article ID format",summary:"Validation Error",content:{"application/json":{schema:f.object({errors:f.record(f.string(),f.string())})}}},404:{description:"Scientific article not found with the provided ID",summary:"Article Not Found",content:{"application/json":{schema:f.object({message:f.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:f.object({message:f.string()})}}}}};import x from"zod";import{extendZodWithOpenApi as nS}from"@asteasolutions/zod-to-openapi";import Al from"zod";nS(Al);var Sl=Al.object({id:Al.uuid()}),vn=class{constructor(e,t){this.scientificJournalRepository=e;this.firebaseStorageService=t}async handle(e,t){let{id:i}=Sl.parse({id:e.params.id}),o=await this.scientificJournalRepository.findById(i);if(!o)throw new d("A revista cient\xEDfica n\xE3o existe.");return o.logoUrl&&this.firebaseStorageService.deleteFile({fileUrl:o.logoUrl}),await this.scientificJournalRepository.deleteById(i),t.sendStatus(200)}};import{extendZodWithOpenApi as aS}from"@asteasolutions/zod-to-openapi";import xl from"zod";aS(xl);var Ml=xl.object({id:xl.uuid()}),Un=class{constructor(e){this.scientificJournalRepository=e}async handle(e,t){let{id:i}=Ml.parse({id:e.params.id}),o=await this.scientificJournalRepository.findById(i);if(!o)throw new d("Revista cient\xEDfica n\xE3o encontrada.");return t.status(200).json(o)}};import{extendZodWithOpenApi as mS}from"@asteasolutions/zod-to-openapi";import tt from"zod";var pS=1;mS(tt);var El=tt.object({page:tt.coerce.number().min(1).default(pS),limit:tt.coerce.number().optional(),name:tt.string().optional(),description:tt.string().optional(),issn:tt.string().optional(),directors:tt.string().optional(),editorialBoard:tt.string().optional(),orderBy:tt.enum(["asc","desc"]).default("desc")}),jn=class{constructor(e){this.scientificJournalRepository=e}async handle(e,t){let{limit:i,page:o,...s}=El.parse(e.query),n=i?i*o-i:void 0,[a,m]=await Promise.all([this.scientificJournalRepository.find({pagination:{offset:n,limit:i},filter:s}),this.scientificJournalRepository.count({filter:s})]),p=i?Math.max(Math.ceil(m/i),1):1;return t.status(200).json({page:o,totalPages:p,offset:n,limit:i,scientificJournals:a})}};import{extendZodWithOpenApi as dS}from"@asteasolutions/zod-to-openapi";import rt from"zod";var xf=5,Sf=1024,lS=Sf*Sf,cS=xf*lS;dS(rt);var wl=rt.object({id:rt.uuid(),name:rt.string().min(1,"Nome \xE9 obrigat\xF3rio.").optional(),issn:rt.string().min(1,"ISSN \xE9 obrigat\xF3rio.").optional(),description:rt.string().min(1,"Descri\xE7\xE3o \xE9 obrigat\xF3ria.").optional(),journalUrl:rt.url("URL da revista deve ser v\xE1lida.").optional(),directors:rt.string().optional(),editorialBoard:rt.string().optional(),logo:rt.any().refine(r=>r==null?!0:typeof r!="object"||typeof r.size!="number"?!1:r.size<=cS,`O logo deve ter no m\xE1ximo ${xf}MB.`).optional()}),Fn=class{constructor(e,t){this.scientificJournalRepository=e;this.firebaseStorageService=t}async handle(e,t){let{id:i,logo:o,name:s,issn:n,description:a,journalUrl:m,directors:p,editorialBoard:h}=wl.parse({id:e.params.id,...e.body,logo:e.file}),A=await this.scientificJournalRepository.findById(i);if(!A)throw new d("A revista cient\xEDfica n\xE3o existe.");let G=A.logoUrl;return o&&(G=await this.firebaseStorageService.uploadFile({file:o,id:i,folder:M.SCIENTIFIC_JOURNAL})),await this.scientificJournalRepository.update({id:i,name:s,issn:n,description:a,journalUrl:m,directors:p,editorialBoard:h,logoUrl:G}),t.sendStatus(200)}};var Mf={method:"post",path:"/scientific-journals",tags:["Scientific Journals"],summary:"Create scientific journal",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:x.object({name:x.string().min(1).openapi({description:"Nome da revista cient\xEDfica"}),issn:x.string().min(1).openapi({description:"ISSN da revista"}),description:x.string().min(1).openapi({description:"Descri\xE7\xE3o da revista"}),journalUrl:x.string().url().openapi({description:"URL da revista"}),directors:x.string().optional().openapi({description:"Diretores da revista"}),editorialBoard:x.string().optional().openapi({description:"Conselho editorial"}),logo:x.string().optional().openapi({description:"Logo da revista (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{201:{description:"Scientific journal created successfully",summary:"Journal Created"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:x.object({errors:x.record(x.string(),x.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:x.object({message:x.string()})}}}}},Ef={method:"get",path:"/scientific-journals",tags:["Scientific Journals"],summary:"List scientific journals",security:[{bearerAuth:[]}],request:{query:El},responses:{200:{description:"Paginated list of scientific journals retrieved successfully",summary:"Journals Retrieved",content:{"application/json":{schema:x.object({page:x.number(),totalPages:x.number(),offset:x.number().optional(),limit:x.number().optional(),scientificJournals:x.array(x.object({id:x.string(),name:x.string(),issn:x.string(),description:x.string(),logoUrl:x.string().nullable(),journalUrl:x.string(),directors:x.string().nullable(),editorialBoard:x.string().nullable(),createdAt:x.date(),updatedAt:x.date()}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:x.object({errors:x.record(x.string(),x.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:x.object({message:x.string()})}}}}},wf={method:"get",path:"/scientific-journals/{id}",tags:["Scientific Journals"],summary:"Find scientific journal by ID",security:[{bearerAuth:[]}],request:{params:Ml},responses:{200:{description:"Scientific journal details retrieved successfully",summary:"Journal Retrieved",content:{"application/json":{schema:x.object({id:x.string(),name:x.string(),issn:x.string(),description:x.string(),logoUrl:x.string().nullable(),journalUrl:x.string(),directors:x.string().nullable(),editorialBoard:x.string().nullable(),createdAt:x.date(),updatedAt:x.date()}).nullable()}}},400:{description:"Invalid journal ID format",summary:"Validation Error",content:{"application/json":{schema:x.object({errors:x.record(x.string(),x.string())})}}},404:{description:"Scientific journal not found with the provided ID",summary:"Journal Not Found",content:{"application/json":{schema:x.object({message:x.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:x.object({message:x.string()})}}}}},vf={method:"put",path:"/scientific-journals/{id}",tags:["Scientific Journals"],summary:"Update scientific journal",security:[{bearerAuth:[]}],request:{params:wl.pick({id:!0}),body:{content:{"multipart/form-data":{schema:x.object({name:x.string().min(1).optional().openapi({description:"Nome da revista cient\xEDfica"}),issn:x.string().min(1).optional().openapi({description:"ISSN da revista"}),description:x.string().min(1).optional().openapi({description:"Descri\xE7\xE3o da revista"}),journalUrl:x.string().url().optional().openapi({description:"URL da revista"}),directors:x.string().optional().openapi({description:"Diretores da revista"}),editorialBoard:x.string().optional().openapi({description:"Conselho editorial"}),logo:x.string().optional().openapi({description:"Logo da revista (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{200:{description:"Scientific journal updated successfully",summary:"Journal Updated"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:x.object({errors:x.record(x.string(),x.string())})}}},404:{description:"Scientific journal not found with the provided ID",summary:"Journal Not Found",content:{"application/json":{schema:x.object({message:x.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:x.object({message:x.string()})}}}}},Uf={method:"delete",path:"/scientific-journals/{id}",tags:["Scientific Journals"],summary:"Delete scientific journal",security:[{bearerAuth:[]}],request:{params:Sl},responses:{200:{description:"Scientific journal deleted successfully",summary:"Journal Deleted"},400:{description:"Invalid journal ID format",summary:"Validation Error",content:{"application/json":{schema:x.object({errors:x.record(x.string(),x.string())})}}},404:{description:"Scientific journal not found with the provided ID",summary:"Journal Not Found",content:{"application/json":{schema:x.object({message:x.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:x.object({message:x.string()})}}}}};import W from"zod";import{extendZodWithOpenApi as uS}from"@asteasolutions/zod-to-openapi";import Nr from"zod";uS(Nr);var vl=Nr.object({role:Nr.string().min(1),description:Nr.string().optional(),userId:Nr.uuid(),order:Nr.number().optional()}),Dn=class{constructor(e){this.sdhcTeamMemberRepository=e}async handle(e,t){let{role:i,description:o,userId:s,order:n}=vl.parse(e.body);return await this.sdhcTeamMemberRepository.create({role:i,description:o,userId:s,order:n??0}),t.sendStatus(201)}};import{extendZodWithOpenApi as gS}from"@asteasolutions/zod-to-openapi";import Ul from"zod";gS(Ul);var jl=Ul.object({id:Ul.uuid()}),kn=class{constructor(e){this.sdhcTeamMemberRepository=e}async handle(e,t){let{id:i}=jl.parse({id:e.params.id});if(!await this.sdhcTeamMemberRepository.findById(i))throw new d("O membro da equipe SDHC n\xE3o existe.");return await this.sdhcTeamMemberRepository.deleteById(i),t.sendStatus(200)}};import{extendZodWithOpenApi as yS}from"@asteasolutions/zod-to-openapi";import Fl from"zod";yS(Fl);var Bn=Fl.object({id:Fl.uuid()}),On=class{constructor(e){this.sdhcTeamMemberRepository=e}async handle(e,t){let{id:i}=Bn.parse({id:e.params.id}),o=await this.sdhcTeamMemberRepository.findById(i);if(!o)throw new d("O membro da equipe SDHC n\xE3o existe.");return t.status(200).json(o)}};import{extendZodWithOpenApi as fS}from"@asteasolutions/zod-to-openapi";import tr from"zod";fS(tr);var Dl=tr.object({id:tr.uuid(),role:tr.string().min(1).optional(),description:tr.string().optional(),userId:tr.uuid().optional(),order:tr.number().optional()}),qn=class{constructor(e){this.sdhcTeamMemberRepository=e}async handle(e,t){let{id:i,role:o,description:s,userId:n,order:a}=Dl.parse({id:e.params.id,...e.body});if(!await this.sdhcTeamMemberRepository.findById(i))throw new d("O membro da equipe SDHC n\xE3o existe.");return await this.sdhcTeamMemberRepository.update({id:i,role:o,description:s,userId:n,order:a}),t.sendStatus(200)}};var hS=W.object({id:W.uuid(),name:W.string(),emailAddress:W.string(),avatarUrl:W.string().nullable(),orcid:W.string().nullable(),phone:W.string().nullable(),lattesUrl:W.string().nullable(),role:W.enum(de)}),jf=W.object({id:W.uuid(),role:W.string(),description:W.string().nullable(),order:W.number(),createdAt:W.date(),updatedAt:W.date(),userId:W.uuid(),user:hS}),Ff={method:"post",path:"/sdhc-team-member",tags:["SDHC Team Members"],summary:"Create a new SDHC Team Member",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:vl}}}},responses:{201:{description:"SDHC Team Member created successfully",summary:"SDHC Team Member Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:W.object({errors:W.record(W.string(),W.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:W.object({message:W.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:W.object({message:W.string()})}}}}},Df={method:"get",path:"/sdhc-team-member",tags:["SDHC Team Members"],summary:"List all SDHC Team Members with filters",request:{query:W.object({role:W.string().optional(),orderBy:W.enum(["asc","desc"]).default("desc")})},responses:{200:{description:"List of SDHC Team Members retrieved successfully",summary:"SDHC Team Members Retrieved",content:{"application/json":{schema:W.object({members:W.array(jf)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:W.object({message:W.string()})}}}}},kf={method:"get",path:"/sdhc-team-member/{id}",tags:["SDHC Team Members"],summary:"Find SDHC Team Member by ID",request:{params:Bn},responses:{200:{description:"SDHC Team Member details retrieved successfully",summary:"SDHC Team Member Retrieved",content:{"application/json":{schema:jf}}},400:{description:"Invalid SDHC Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:W.object({errors:W.record(W.string(),W.string())})}}},404:{description:"SDHC Team Member not found with the provided ID",summary:"SDHC Team Member Not Found",content:{"application/json":{schema:W.object({message:W.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:W.object({message:W.string()})}}}}},Of={method:"put",path:"/sdhc-team-member/{id}",tags:["SDHC Team Members"],summary:"Update SDHC Team Member",security:[{bearerAuth:[]}],request:{params:Bn,body:{content:{"application/json":{schema:Dl.omit({id:!0})}}}},responses:{200:{description:"SDHC Team Member updated successfully",summary:"SDHC Team Member Updated"},400:{description:"Invalid input data or SDHC Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:W.object({errors:W.record(W.string(),W.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:W.object({message:W.string()})}}},404:{description:"SDHC Team Member not found with the provided ID",summary:"SDHC Team Member Not Found",content:{"application/json":{schema:W.object({message:W.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:W.object({message:W.string()})}}}}},Bf={method:"delete",path:"/sdhc-team-member/{id}",tags:["SDHC Team Members"],summary:"Delete SDHC Team Member",security:[{bearerAuth:[]}],request:{params:jl},responses:{200:{description:"SDHC Team Member deleted successfully",summary:"SDHC Team Member Deleted"},400:{description:"Invalid SDHC Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:W.object({errors:W.record(W.string(),W.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:W.object({message:W.string()})}}},404:{description:"SDHC Team Member not found with the provided ID",summary:"SDHC Team Member Not Found",content:{"application/json":{schema:W.object({message:W.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:W.object({message:W.string()})}}}}};import j from"zod";import{extendZodWithOpenApi as RS}from"@asteasolutions/zod-to-openapi";import kl from"zod";RS(kl);var Ol=kl.object({id:kl.string()}),Nn=class{constructor(e){this.userRepository=e}async handle(e,t){let{id:i}=Ol.parse({id:e.params.id}),o=await this.userRepository.findById(i);if(!o)throw new d("O usu\xE1rio n\xE3o existe.");let s=e.user.id;if(o.id!==s)throw new je("Voc\xEA n\xE3o tem permiss\xE3o para deletar o usu\xE1rio");return await this.userRepository.deleteById(o.id),t.sendStatus(204)}};import{extendZodWithOpenApi as PS}from"@asteasolutions/zod-to-openapi";import Bl from"zod";PS(Bl);var ql=Bl.object({id:Bl.uuid()}),Gn=class{constructor(e){this.userRepository=e}async handle(e,t){let{id:i}=ql.parse({...e.params}),o=await this.userRepository.findById(i);if(!o)throw new le("O usu\xE1rio n\xE3o existe");if(o.role!=="ADMIN")throw new le("O usu\xE1rio n\xE3o \xE9 um administrador");return await this.userRepository.update({id:i,role:"USER"}),t.sendStatus(204)}};import{extendZodWithOpenApi as bS}from"@asteasolutions/zod-to-openapi";import{z as Nl}from"zod";bS(Nl);var Gl=Nl.object({id:Nl.string().min(1,"id do usu\xE1rio n\xE3o fornecido.")}),_n=class{constructor(e){this.userRepository=e}async handle(e,t){let{id:i}=Gl.parse(e.params),o=await this.userRepository.findById(i);if(!o)throw new d("Usu\xE1rio n\xE3o encontrado");t.status(200).json(o)}};import{extendZodWithOpenApi as CS}from"@asteasolutions/zod-to-openapi";import it from"zod";var IS=1;CS(it);var _l=it.object({page:it.coerce.number().min(1).default(IS),limit:it.coerce.number().optional(),orderBy:it.enum(["asc","desc"]).default("desc"),name:it.string().optional(),emailAddress:it.string().optional(),phone:it.string().optional(),lattesUrl:it.string().optional(),orcid:it.string().optional()}),Ln=class{constructor(e){this.userRepository=e}async handle(e,t){let{page:i,limit:o,...s}=_l.parse(e.query),n=o?o*i-o:void 0,a=await this.userRepository.find({pagination:{offset:n,limit:o},filter:s}),m=await this.userRepository.count({filter:s}),p=o?Math.max(Math.ceil(m/o),1):1;t.status(200).json({page:i,totalPages:p,offset:n,limit:o,users:a})}};import{extendZodWithOpenApi as TS}from"@asteasolutions/zod-to-openapi";import Ll from"zod";TS(Ll);var Wl=Ll.object({id:Ll.uuid()}),Wn=class{constructor(e){this.userRepository=e}async handle(e,t){let{id:i}=Wl.parse({...e.params}),o=await this.userRepository.findById(i);if(!o)throw new le("O usu\xE1rio n\xE3o existe");if(o.role!=="USER")throw new le("O usu\xE1rio n\xE3o \xE9 um usu\xE1rio comum");return await this.userRepository.update({id:i,role:"ADMIN"}),t.sendStatus(204)}};import{extendZodWithOpenApi as AS}from"@asteasolutions/zod-to-openapi";import Ve from"zod";var Nf=2,qf=1024,SS=qf*qf,xS=Nf*SS,MS=/^\d{4}-\d{4}-\d{4}-\d{4}$/,ES=/^\(?\d{2}\)?[\s-]?\d{4,5}-?\d{4}$/;AS(Ve);var Hl=Ve.object({name:Ve.string().optional(),lattesUrl:Ve.string().optional(),orcid:Ve.union([Ve.string().regex(MS,{message:"ORCID inv\xE1lido. Deve estar no formato 0000-0000-0000-0000"}),Ve.literal("")]).optional(),phone:Ve.union([Ve.string().regex(ES,{message:"Telefone inv\xE1lido. Deve estar no formato (99) 99999-9999"}),Ve.literal("")]).optional(),avatarImage:Ve.any().refine(r=>r==null?!0:typeof r!="object"||typeof r.size!="number"?!1:r.size<=xS,`A imagem deve ter no m\xE1ximo ${Nf}MB.`).optional()}),Hn=class{constructor(e,t){this.userRepository=e;this.firebaseStorageService=t}async handle(e,t){let{avatarImage:i,...o}=Hl.parse({...e.body,avatarImage:e.file}),s=e.user.id,n=await this.userRepository.findById(s);if(!n)throw new le("O usu\xE1rio n\xE3o existe");let a=n.avatarUrl;return i&&(n.avatarUrl?a=await this.firebaseStorageService.updateFile({file:i,id:s,folder:M.USER,fileUrl:n.avatarUrl}):a=await this.firebaseStorageService.uploadFile({file:i,id:s,folder:M.USER})),await this.userRepository.update({...o,id:s,avatarUrl:a||void 0}),t.sendStatus(204)}};var Gf={method:"get",path:"/users/{id}",tags:["Users"],summary:"Find user by ID",request:{params:Gl},responses:{200:{description:"User details retrieved successfully",summary:"User Retrieved",content:{"application/json":{schema:j.object({id:j.string(),name:j.string(),createdAt:j.date(),updatedAt:j.date(),role:j.enum(de),lattesUrl:j.string().nullable(),orcid:j.string().nullable(),phone:j.string().nullable(),avatarUrl:j.url().nullable(),emailAddress:j.email()})}}},400:{description:"Invalid user ID format",summary:"Validation Error",content:{"application/json":{schema:j.object({errors:j.record(j.string(),j.string())})}}},404:{description:"User not found with the provided ID",summary:"User Not Found",content:{"application/json":{schema:j.object({message:j.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:j.object({message:j.string()})}}}}},_f={method:"put",path:"/users",tags:["Users"],summary:"Update authenticated user",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:Hl}}}},responses:{204:{description:"User profile updated successfully",summary:"User Updated"},400:{description:"Invalid input data or file format",summary:"Validation Error",content:{"application/json":{schema:j.object({errors:j.record(j.string(),j.string())})}}},401:{description:"User not authenticated or unauthorized",summary:"Authentication Required",content:{"application/json":{schema:j.object({message:j.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:j.object({message:j.string()})}}}}},Lf={method:"delete",path:"/users",tags:["Users"],summary:"Delete authenticated user",security:[{bearerAuth:[]}],request:{params:Ol},responses:{200:{description:"User account deleted successfully",summary:"User Deleted",content:{"application/json":{schema:j.object({message:j.string()})}}},400:{description:"Invalid request parameters",summary:"Validation Error",content:{"application/json":{schema:j.object({errors:j.record(j.string(),j.string())})}}},401:{description:"User not authenticated or unauthorized",summary:"Authentication Required",content:{"application/json":{schema:j.object({message:j.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:j.object({message:j.string()})}}}}},Wf={method:"get",path:"/users",tags:["Users"],summary:"List users with optional pagination and filters",request:{query:_l},responses:{200:{description:"Users retrieved successfully. When page and limit query parameters are provided, pagination fields contain numeric values. Otherwise, pagination fields are null.",summary:"Users Retrieved",content:{"application/json":{schema:j.object({page:j.number().nullable(),totalPages:j.number().nullable(),offset:j.number().optional(),limit:j.number().optional(),users:j.array(j.object({id:j.string(),name:j.string(),createdAt:j.date(),updatedAt:j.date(),role:j.enum(de),lattesUrl:j.url().nullable(),orcid:j.string().nullable(),phone:j.string().nullable(),avatarUrl:j.string().nullable(),emailAddress:j.email()}))})}}},400:{description:"Invalid query parameters",summary:"Validation Error",content:{"application/json":{schema:j.object({errors:j.record(j.string(),j.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:j.object({message:j.string()})}}}}},Hf={method:"put",path:"/users/promote/{id}",tags:["Users"],summary:"Promote user to ADMIN",security:[{bearerAuth:[]}],request:{params:Wl},responses:{204:{description:"User successfully promoted to ADMIN",summary:"User Promoted"},400:{description:"Bad request - User does not exist or is already an ADMIN",summary:"Validation Error",content:{"application/json":{schema:j.object({message:j.string()})}}},401:{description:"User not authenticated or unauthorized",summary:"Authentication Required",content:{"application/json":{schema:j.object({message:j.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:j.object({message:j.string()})}}}}},$f={method:"put",path:"/users/demote/{id}",tags:["Users"],summary:"Demote user to USER",security:[{bearerAuth:[]}],request:{params:ql},responses:{204:{description:"User successfully demoted to USER",summary:"User Demoted"},400:{description:"Bad request - User does not exist or is not an ADMIN",summary:"Validation Error",content:{"application/json":{schema:j.object({message:j.string()})}}},401:{description:"User not authenticated or unauthorized",summary:"Authentication Required",content:{"application/json":{schema:j.object({message:j.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:j.object({message:j.string()})}}}}};import T from"zod";import{extendZodWithOpenApi as wS}from"@asteasolutions/zod-to-openapi";import $l from"zod";wS($l);var Vl=$l.object({id:$l.uuid()}),$n=class{constructor(e,t){this.webinarRepository=e;this.firebaseStorageService=t}async handle(e,t){let{id:i}=Vl.parse({id:e.params.id}),o=await this.webinarRepository.findById(i);if(!o)throw new d("O webinar n\xE3o existe.");return o.thumbnailUrl&&this.firebaseStorageService.deleteFile({fileUrl:o.thumbnailUrl}),await this.webinarRepository.deleteById(i),t.sendStatus(200)}};import{extendZodWithOpenApi as vS}from"@asteasolutions/zod-to-openapi";import zl from"zod";vS(zl);var Zl=zl.object({id:zl.uuid()}),Vn=class{constructor(e){this.webinarRepository=e}async handle(e,t){let{id:i}=Zl.parse({id:e.params.id}),o=await this.webinarRepository.findById(i);if(!o)throw new d("Webinar n\xE3o encontrado.");return t.status(200).json(o)}};import{extendZodWithOpenApi as US}from"@asteasolutions/zod-to-openapi";import rr from"zod";var jS=1;US(rr);var Kl=rr.object({page:rr.coerce.number().min(1).default(jS),limit:rr.coerce.number().optional(),title:rr.string().optional(),description:rr.string().optional(),orderBy:rr.enum(["asc","desc"]).default("desc")}),zn=class{constructor(e){this.webinarRepository=e}async handle(e,t){let{limit:i,page:o,...s}=Kl.parse(e.query),n=i?i*o-i:void 0,[a,m]=await Promise.all([this.webinarRepository.find({pagination:{offset:n,limit:i},filter:s}),this.webinarRepository.count({filter:s})]),p=i?Math.max(Math.ceil(m/i),1):1;return t.status(200).json({page:o,totalPages:p,offset:n,limit:i,webinars:a})}};import{extendZodWithOpenApi as FS}from"@asteasolutions/zod-to-openapi";import ze from"zod";var zf=5,Vf=1024,DS=Vf*Vf,kS=zf*DS;FS(ze);var Jl=ze.object({id:ze.uuid(),title:ze.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio.").optional(),description:ze.string().optional(),scheduledAt:ze.coerce.date().optional(),webinarLink:ze.url("URL do webinar deve ser v\xE1lida").optional(),guestIds:ze.transform(r=>typeof r=="string"?r.split(","):r).pipe(ze.array(ze.uuid())).optional(),thumbnail:ze.any().refine(r=>r==null?!0:typeof r!="object"||typeof r.size!="number"?!1:r.size<=kS,`A thumbnail deve ter no m\xE1ximo ${zf}MB.`).optional()}),Zn=class{constructor(e,t){this.webinarRepository=e;this.firebaseStorageService=t}async handle(e,t){let{id:i,thumbnail:o,title:s,description:n,scheduledAt:a,webinarLink:m,guestIds:p}=Jl.parse({id:e.params.id,...e.body,thumbnail:e.file}),h=await this.webinarRepository.findById(i);if(!h)throw new d("O webinar n\xE3o existe.");let A=h.thumbnailUrl;if(o&&(A=await this.firebaseStorageService.uploadFile({file:o,id:i,folder:M.WEBINAR})),!A)throw new Re("Thumbnail URL \xE9 obrigat\xF3rio");return await this.webinarRepository.update({id:i,title:s,description:n,scheduledAt:a,webinarLink:m,thumbnailUrl:A,guestIds:p}),t.sendStatus(200)}};var Zf={method:"post",path:"/webinars",tags:["Webinars"],summary:"Create webinar",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:T.object({title:T.string().min(1).openapi({description:"T\xEDtulo do webinar"}),description:T.string().optional().openapi({description:"Descri\xE7\xE3o do webinar"}),scheduledAt:T.string().openapi({description:"Data e hora agendada (ISO 8601)",example:"2024-01-01T10:00:00Z"}),webinarLink:T.string().url().optional().openapi({description:"Link do webinar"}),guestIds:T.string().openapi({description:"IDs dos convidados separados por v\xEDrgula",example:"uuid1,uuid2,uuid3"}),thumbnail:T.string().optional().openapi({description:"Imagem de thumbnail (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{201:{description:"Webinar created successfully",summary:"Webinar Created"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:T.object({errors:T.record(T.string(),T.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:T.object({message:T.string()})}}}}},Kf={method:"get",path:"/webinars",tags:["Webinars"],summary:"List webinars",security:[{bearerAuth:[]}],request:{query:Kl},responses:{200:{description:"Paginated list of webinars with guest information retrieved successfully",summary:"Webinars Retrieved",content:{"application/json":{schema:T.object({page:T.number(),totalPages:T.number(),offset:T.number().optional(),limit:T.number().optional(),webinars:T.array(T.object({id:T.string(),title:T.string(),description:T.string().nullable(),scheduledAt:T.date(),webinarLink:T.string().nullable(),thumbnailUrl:T.string().nullable(),createdAt:T.date(),updatedAt:T.date(),guests:T.array(T.object({id:T.uuid(),name:T.string(),emailAddress:T.email(),avatarUrl:T.string().nullable(),createdAt:T.date(),updatedAt:T.date()}))}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:T.object({errors:T.record(T.string(),T.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:T.object({message:T.string()})}}}}},Jf={method:"get",path:"/webinars/{id}",tags:["Webinars"],summary:"Find webinar by ID",security:[{bearerAuth:[]}],request:{params:Zl},responses:{200:{description:"Webinar details retrieved successfully",summary:"Webinar Retrieved",content:{"application/json":{schema:T.object({id:T.string(),title:T.string(),description:T.string().nullable(),scheduledAt:T.date(),webinarLink:T.string().nullable(),thumbnailUrl:T.string().nullable(),createdAt:T.date(),updatedAt:T.date(),guests:T.array(T.object({id:T.uuid(),name:T.string(),emailAddress:T.email(),avatarUrl:T.string().nullable(),createdAt:T.date(),updatedAt:T.date()}))}).nullable()}}},400:{description:"Invalid webinar ID format",summary:"Validation Error",content:{"application/json":{schema:T.object({errors:T.record(T.string(),T.string())})}}},404:{description:"Webinar not found with the provided ID",summary:"Webinar Not Found",content:{"application/json":{schema:T.object({message:T.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:T.object({message:T.string()})}}}}},Yf={method:"put",path:"/webinars/{id}",tags:["Webinars"],summary:"Update webinar",security:[{bearerAuth:[]}],request:{params:Jl.pick({id:!0}),body:{content:{"multipart/form-data":{schema:T.object({title:T.string().min(1).optional().openapi({description:"T\xEDtulo do webinar"}),description:T.string().optional().openapi({description:"Descri\xE7\xE3o do webinar"}),scheduledAt:T.string().optional().openapi({description:"Data e hora agendada (ISO 8601)",example:"2024-01-01T10:00:00Z"}),webinarLink:T.string().url().optional().openapi({description:"Link do webinar"}),guestIds:T.string().optional().openapi({description:"IDs dos convidados separados por v\xEDrgula",example:"uuid1,uuid2,uuid3"}),thumbnail:T.string().optional().openapi({description:"Imagem de thumbnail (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{200:{description:"Webinar updated successfully",summary:"Webinar Updated"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:T.object({errors:T.record(T.string(),T.string())})}}},404:{description:"Webinar not found with the provided ID",summary:"Webinar Not Found",content:{"application/json":{schema:T.object({message:T.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:T.object({message:T.string()})}}}}},Xf={method:"delete",path:"/webinars/{id}",tags:["Webinars"],summary:"Delete webinar",security:[{bearerAuth:[]}],request:{params:Vl},responses:{200:{description:"Webinar deleted successfully",summary:"Webinar Deleted"},400:{description:"Invalid webinar ID format",summary:"Validation Error",content:{"application/json":{schema:T.object({errors:T.record(T.string(),T.string())})}}},404:{description:"Webinar not found with the provided ID",summary:"Webinar Not Found",content:{"application/json":{schema:T.object({message:T.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:T.object({message:T.string()})}}}}};import Z from"zod";import{extendZodWithOpenApi as OS}from"@asteasolutions/zod-to-openapi";import Ei from"zod";OS(Ei);var Yl=Ei.object({role:Ei.string().min(1),description:Ei.string().optional(),userId:Ei.uuid()}),Kn=class{constructor(e){this.workGroupTeamMemberRepository=e}async handle(e,t){let{role:i,description:o,userId:s}=Yl.parse(e.body);return await this.workGroupTeamMemberRepository.create({role:i,description:o,userId:s}),t.sendStatus(201)}};import{extendZodWithOpenApi as BS}from"@asteasolutions/zod-to-openapi";import Xl from"zod";BS(Xl);var Ql=Xl.object({id:Xl.uuid()}),Jn=class{constructor(e){this.workGroupTeamMemberRepository=e}async handle(e,t){let{id:i}=Ql.parse({id:e.params.id});if(!await this.workGroupTeamMemberRepository.findById(i))throw new d("O membro do grupo de trabalho n\xE3o existe.");return await this.workGroupTeamMemberRepository.deleteById(i),t.sendStatus(200)}};import{extendZodWithOpenApi as qS}from"@asteasolutions/zod-to-openapi";import ec from"zod";qS(ec);var Xn=ec.object({id:ec.uuid()}),Yn=class{constructor(e){this.workGroupTeamMemberRepository=e}async handle(e,t){let{id:i}=Xn.parse({id:e.params.id}),o=await this.workGroupTeamMemberRepository.findById(i);if(!o)throw new d("O membro do grupo de trabalho n\xE3o existe.");return t.status(200).json(o)}};import{extendZodWithOpenApi as NS}from"@asteasolutions/zod-to-openapi";import Gr from"zod";NS(Gr);var tc=Gr.object({id:Gr.uuid(),role:Gr.string().min(1).optional(),description:Gr.string().optional(),userId:Gr.uuid().optional()}),Qn=class{constructor(e){this.workGroupTeamMemberRepository=e}async handle(e,t){let{id:i,role:o,description:s,userId:n}=tc.parse({id:e.params.id,...e.body});if(!await this.workGroupTeamMemberRepository.findById(i))throw new d("O membro do grupo de trabalho n\xE3o existe.");return await this.workGroupTeamMemberRepository.update({id:i,role:o,description:s,userId:n}),t.sendStatus(200)}};var GS=Z.object({id:Z.uuid(),name:Z.string(),emailAddress:Z.string(),avatarUrl:Z.string().nullable(),orcid:Z.string().nullable(),phone:Z.string().nullable(),lattesUrl:Z.string().nullable(),role:Z.enum(de)}),Qf=Z.object({id:Z.uuid(),role:Z.string(),description:Z.string().nullable(),createdAt:Z.date(),updatedAt:Z.date(),userId:Z.uuid(),user:GS}),eh={method:"post",path:"/work-group-team-member",tags:["Work Group Team Members"],summary:"Create a new Work Group Team Member",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:Yl}}}},responses:{201:{description:"Work Group Team Member created successfully",summary:"Work Group Team Member Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:Z.object({errors:Z.record(Z.string(),Z.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:Z.object({message:Z.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Z.object({message:Z.string()})}}}}},th={method:"get",path:"/work-group-team-member",tags:["Work Group Team Members"],summary:"List all Work Group Team Members with filters",request:{query:Z.object({role:Z.string().optional(),orderBy:Z.enum(["asc","desc"]).default("desc")})},responses:{200:{description:"List of Work Group Team Members retrieved successfully",summary:"Work Group Team Members Retrieved",content:{"application/json":{schema:Z.object({members:Z.array(Qf)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Z.object({message:Z.string()})}}}}},rh={method:"get",path:"/work-group-team-member/{id}",tags:["Work Group Team Members"],summary:"Find Work Group Team Member by ID",request:{params:Xn},responses:{200:{description:"Work Group Team Member details retrieved successfully",summary:"Work Group Team Member Retrieved",content:{"application/json":{schema:Qf}}},400:{description:"Invalid Work Group Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:Z.object({errors:Z.record(Z.string(),Z.string())})}}},404:{description:"Work Group Team Member not found with the provided ID",summary:"Work Group Team Member Not Found",content:{"application/json":{schema:Z.object({message:Z.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Z.object({message:Z.string()})}}}}},ih={method:"put",path:"/work-group-team-member/{id}",tags:["Work Group Team Members"],summary:"Update Work Group Team Member",security:[{bearerAuth:[]}],request:{params:Xn,body:{content:{"application/json":{schema:tc.omit({id:!0})}}}},responses:{200:{description:"Work Group Team Member updated successfully",summary:"Work Group Team Member Updated"},400:{description:"Invalid input data or Work Group Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:Z.object({errors:Z.record(Z.string(),Z.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:Z.object({message:Z.string()})}}},404:{description:"Work Group Team Member not found with the provided ID",summary:"Work Group Team Member Not Found",content:{"application/json":{schema:Z.object({message:Z.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Z.object({message:Z.string()})}}}}},oh={method:"delete",path:"/work-group-team-member/{id}",tags:["Work Group Team Members"],summary:"Delete Work Group Team Member",security:[{bearerAuth:[]}],request:{params:Ql},responses:{200:{description:"Work Group Team Member deleted successfully",summary:"Work Group Team Member Deleted"},400:{description:"Invalid Work Group Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:Z.object({errors:Z.record(Z.string(),Z.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:Z.object({message:Z.string()})}}},404:{description:"Work Group Team Member not found with the provided ID",summary:"Work Group Team Member Not Found",content:{"application/json":{schema:Z.object({message:Z.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Z.object({message:Z.string()})}}}}};var c=new _S;c.registerComponent("securitySchemes","bearerAuth",{type:"http",scheme:"bearer",bearerFormat:"JWT"});c.registerPath(qc);c.registerPath(Nc);c.registerPath(Gc);c.registerPath(_c);c.registerPath(Wc);c.registerPath(Hc);c.registerPath(Lc);c.registerPath(Gf);c.registerPath(_f);c.registerPath(Lf);c.registerPath(Wf);c.registerPath(Hf);c.registerPath($f);c.registerPath(Hg);c.registerPath($g);c.registerPath(Vg);c.registerPath(zg);c.registerPath(Xc);c.registerPath(Qc);c.registerPath(eu);c.registerPath(tu);c.registerPath(ru);c.registerPath(oy);c.registerPath(sy);c.registerPath(ny);c.registerPath(ay);c.registerPath(my);c.registerPath(Eu);c.registerPath(wu);c.registerPath(vu);c.registerPath(Uu);c.registerPath(ju);c.registerPath(gf);c.registerPath(yf);c.registerPath(ff);c.registerPath(hf);c.registerPath(Rf);c.registerPath(Pf);c.registerPath(lu);c.registerPath(cu);c.registerPath(uu);c.registerPath(gu);c.registerPath(yu);c.registerPath(Qg);c.registerPath(ey);c.registerPath(ty);c.registerPath(ry);c.registerPath(iy);c.registerPath(qg);c.registerPath(Ng);c.registerPath(Gg);c.registerPath(_g);c.registerPath(Lg);c.registerPath(hy);c.registerPath(Ry);c.registerPath(Py);c.registerPath(by);c.registerPath(Cy);c.registerPath(gg);c.registerPath(yg);c.registerPath(fg);c.registerPath(hg);c.registerPath(Rg);c.registerPath(Ff);c.registerPath(Df);c.registerPath(kf);c.registerPath(Of);c.registerPath(Bf);c.registerPath(mg);c.registerPath(pg);c.registerPath(dg);c.registerPath(lg);c.registerPath(cg);c.registerPath(jy);c.registerPath(Fy);c.registerPath(Dy);c.registerPath(ky);c.registerPath(Oy);c.registerPath(By);c.registerPath(Mg);c.registerPath(Eg);c.registerPath(wg);c.registerPath(vg);c.registerPath(Ug);c.registerPath(jg);c.registerPath(Tg);c.registerPath(Ag);c.registerPath(Sg);c.registerPath(xg);c.registerPath(Ku);c.registerPath(Ju);c.registerPath(Yu);c.registerPath(Xu);c.registerPath(Qu);c.registerPath(eg);c.registerPath($u);c.registerPath(Vu);c.registerPath(zu);c.registerPath(Zu);c.registerPath(Bu);c.registerPath(qu);c.registerPath(Nu);c.registerPath(Gu);c.registerPath(ef);c.registerPath(tf);c.registerPath(rf);c.registerPath(of);c.registerPath(sf);c.registerPath(nf);c.registerPath(Jy);c.registerPath(Yy);c.registerPath(Xy);c.registerPath(Qy);c.registerPath(Ly);c.registerPath(Wy);c.registerPath(Hy);c.registerPath($y);c.registerPath(Zf);c.registerPath(Kf);c.registerPath(Jf);c.registerPath(Yf);c.registerPath(Xf);c.registerPath(su);c.registerPath(nu);c.registerPath(au);c.registerPath(mu);c.registerPath(pu);c.registerPath(ly);c.registerPath(cy);c.registerPath(uy);c.registerPath(gy);c.registerPath(yy);c.registerPath(Pu);c.registerPath(bu);c.registerPath(Cu);c.registerPath(Iu);c.registerPath(Tu);c.registerPath(Mf);c.registerPath(Ef);c.registerPath(wf);c.registerPath(vf);c.registerPath(Uf);c.registerPath(bf);c.registerPath(Cf);c.registerPath(If);c.registerPath(Tf);c.registerPath(Af);c.registerPath(zc);c.registerPath(Zc);c.registerPath(Kc);c.registerPath(Jc);c.registerPath(Yc);c.registerPath(rg);c.registerPath(ig);c.registerPath(og);c.registerPath(sg);c.registerPath(ng);c.registerPath(eh);c.registerPath(th);c.registerPath(rh);c.registerPath(ih);c.registerPath(oh);c.registerPath(Ty);c.registerPath(Ay);c.registerPath(Sy);c.registerPath(xy);c.registerPath(My);c.registerPath(pf);c.registerPath(df);c.registerPath(lf);c.registerPath(cf);c.registerPath(uf);var WS=new LS(c.definitions),sh=WS.generateDocument({openapi:"3.0.0",info:{title:"API da Rede CT",version:"1.0.0",description:"API com valida\xE7\xE3o Zod"}});import{Router as tx}from"express";import{extendZodWithOpenApi as HS}from"@asteasolutions/zod-to-openapi";import rc from"zod";HS(rc);var $S=rc.object({authenticatedUserId:rc.uuid()}),ea=class{constructor(e){this.userRepository=e}async handle(e,t){let{authenticatedUserId:i}=$S.parse({authenticatedUserId:e.user.id}),o=await this.userRepository.findById(i);if(!o)throw new d("Usu\xE1rio n\xE3o encontrado.");return t.status(200).json(o)}};import{PrismaPg as YS}from"@prisma/adapter-pg";import Ae from"zod";var VS=Ae.object({JWT_SECRET:Ae.string(),FIREBASE_BUCKET:Ae.string(),FIREBASE_CLIENT_EMAIL:Ae.string(),FIREBASE_PRIVATE_KEY:Ae.string(),FIREBASE_PROJECT_ID:Ae.string(),FIREBASE_TYPE:Ae.string(),FIREBASE_PRIVATE_KEY_ID:Ae.string(),FIREBASE_CLIENT_ID:Ae.string(),FIREBASE_AUTH_URI:Ae.string(),FIREBASE_TOKEN_URI:Ae.string(),FIREBASE_AUTH_PROVIDER_X509_CERT_URL:Ae.string(),FIREBASE_CLIENT_X509_CERT_URL:Ae.string(),DATABASE_URL:Ae.string()}),ge=VS.parse(process.env);import*as mh from"path";import{fileURLToPath as JS}from"url";import*as nh from"@prisma/client/runtime/client";var ic={previewFeatures:[],clientVersion:"7.1.0",engineVersion:"ab635e6b9d606fa5c8fb8b1a7f909c3c3c1c98ba",activeProvider:"postgresql",inlineSchema:`generator client {
  provider = "prisma-client"
  output   = "../config/database/generated"
}

datasource db {
  provider = "postgresql"
}

enum UserRole {
  ADMIN
  USER
}

model User {
  id           String   @id @default(uuid())
  name         String
  passwordHash String   @map("password_hash")
  avatarUrl    String?  @map("avatar_url")
  createdAt    DateTime @default(now()) @map("created_at")
  updatedAt    DateTime @updatedAt @map("updated_at")
  emailAddress String   @unique @map("email_address")
  orcid        String?  @map("orcid")
  phone        String?
  lattesUrl    String?  @map("lattes_url")
  role         UserRole @default(USER)

  news                       News[]
  ManagementTeamMember       ManagementTeamMember[]       @relation("ManagementTeamMember")
  SDHCTeamMember             SDHCTeamMember[]             @relation("SDHCTeamMember")
  LegitimatorCommitteeMember LegitimatorCommitteeMember[] @relation("LegitimatorCommitteeMember")
  certification              Certification[]
  pendencies                 Pendency[]
  Researcher                 Researcher[]
  webinars                   Webinar[]

  coursesCoordinated Course[] @relation("CoordinatedCourses")
  coursesInstructed  Course[] @relation("InstructedCourses")

  workGroupTeamMembers       WorkGroupTeamMember[]
  referenceCenterTeamMembers ReferenceCenterTeamMember[]
  researchGroupsLeader       ResearchGroup[]             @relation("LeaderRelation")
  researchGroupsDeputyLeader ResearchGroup[]             @relation("DeputyLeaderRelation")
  bookVolumes                BookVolume[]
  redeCTHighlights           RedeCTHighlight[]

  @@map("users")
}

model News {
  id        String   @id @default(uuid())
  title     String
  content   String
  imageUrl  String?  @map("image_url")
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  author    User     @relation(fields: [authorId], references: [id])
  authorId  String   @map("author_id")

  @@map("news")
}

model ManagementTeam {
  id          String                 @id @default(uuid())
  name        String
  description String?
  createdAt   DateTime               @default(now()) @map("created_at")
  updatedAt   DateTime               @updatedAt @map("updated_at")
  members     ManagementTeamMember[]

  @@map("management_teams")
}

model ManagementTeamMember {
  id          String         @id @default(uuid())
  role        String
  description String?
  order       Int            @default(0)
  createdAt   DateTime       @default(now()) @map("created_at")
  updatedAt   DateTime       @updatedAt @map("updated_at")
  teamId      String         @map("team_id")
  team        ManagementTeam @relation(fields: [teamId], references: [id], onDelete: Cascade)
  userId      String         @map("user_id")
  user        User           @relation("ManagementTeamMember", fields: [userId], references: [id], onDelete: Cascade)

  @@map("management_team_members")
}

model SDHCTeamMember {
  id          String   @id @default(uuid())
  role        String
  description String?
  order       Int      @default(0)
  createdAt   DateTime @default(now()) @map("created_at")
  updatedAt   DateTime @updatedAt @map("updated_at")
  userId      String   @map("user_id")
  user        User     @relation("SDHCTeamMember", fields: [userId], references: [id], onDelete: Cascade)

  @@map("sdhc_team_members")
}

model LegitimatorCommitteeMember {
  id          String   @id @default(uuid())
  role        String
  description String?
  order       Int      @default(0)
  createdAt   DateTime @default(now()) @map("created_at")
  updatedAt   DateTime @updatedAt @map("updated_at")
  userId      String   @map("user_id")
  user        User     @relation("LegitimatorCommitteeMember", fields: [userId], references: [id], onDelete: Cascade)

  @@map("legitimator_committee_members")
}

model Certification {
  id               String @id @default(uuid())
  title            String
  description      String
  certificationUrl String @map("certification_url")

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  user   User   @relation(fields: [userId], references: [id])
  userId String @map("user_id")

  @@map("certifications")
}

enum PendencyStatus {
  PENDING
  PAID
}

model Pendency {
  id          String         @id @default(uuid())
  title       String
  description String?
  status      PendencyStatus @default(PENDING)
  dueDate     DateTime?      @map("due_date")
  documentUrl String         @map("document_url")

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  user   User   @relation(fields: [userId], references: [id])
  userId String @map("user_id")

  @@map("pendencies")
}

enum Seniority {
  SENIOR
  RESEARCHER
  JUNIOR
  HONOR
}

enum Degree {
  DOCTOR
  MASTER
  BACHELOR
  TECHNICAL
  POSTGRADUATE
}

model Researcher {
  id                 String    @id @default(uuid())
  registrationNumber String    @map("registration_number")
  mainEtps           String?   @map("main_etps")
  formations         String?   @map("formations")
  degrees            Degree[]  @map("degrees")
  occupations        String    @map("occupations")
  seniority          Seniority @map("seniority")
  institutions       String    @map("institutions")
  biography          String?   @map("biography")
  createdAt          DateTime  @default(now()) @map("created_at")
  updatedAt          DateTime  @updatedAt @map("updated_at")

  user   User   @relation(fields: [userId], references: [id])
  userId String @map("user_id")

  etpLeader    ETPLeader[]
  etpDeputy    ETPDeputy[]
  etpSecretary ETPSecretary[]
  etpMembers   ETP[]          @relation("etp_members")

  @@map("researchers")
}

enum InMemoriamRole {
  RESEARCHER
  LEADER
}

model InMemoriam {
  id        String         @id @default(uuid())
  name      String
  birthDate DateTime       @map("birth_date")
  deathDate DateTime       @map("death_date")
  biography String?
  photoUrl  String?        @map("photo_url")
  role      InMemoriamRole

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@map("in_memoriam")
}

model ETPLeader {
  id           String     @id @default(uuid())
  etpId        String     @map("etp_id")
  etp          ETP        @relation(fields: [etpId], references: [id], onDelete: Cascade)
  researcherId String     @map("researcher_id")
  researcher   Researcher @relation(fields: [researcherId], references: [id], onDelete: Cascade)

  @@unique([etpId])
  @@map("etp_leader")
}

model ETPDeputy {
  id           String     @id @default(uuid())
  etpId        String     @map("etp_id")
  etp          ETP        @relation(fields: [etpId], references: [id], onDelete: Cascade)
  researcherId String     @map("researcher_id")
  researcher   Researcher @relation(fields: [researcherId], references: [id], onDelete: Cascade)

  @@unique([etpId])
  @@map("etp_deputy")
}

model ETPSecretary {
  id           String     @id @default(uuid())
  etpId        String     @map("etp_id")
  etp          ETP        @relation(fields: [etpId], references: [id], onDelete: Cascade)
  researcherId String     @map("researcher_id")
  researcher   Researcher @relation(fields: [researcherId], references: [id], onDelete: Cascade)

  @@unique([etpId])
  @@map("etp_secretary")
}

model ETP {
  id          String  @id @default(uuid())
  code        String  @unique
  title       String
  description String?
  notes       String?

  leader       ETPLeader?
  deputyLeader ETPDeputy?
  secretary    ETPSecretary?
  members      Researcher[]  @relation("etp_members")

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@index([code])
  @@map("etps")
}

model Partner {
  id          String   @id @default(uuid())
  name        String
  logoUrl     String?
  websiteUrl  String?
  description String?
  category    String?
  since       DateTime
  isActive    Boolean  @default(true)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@map("partners")
}

enum RegimentStatus {
  DRAFT
  IN_FORCE
  REVOKED
}

model Regiment {
  id          String         @id @default(uuid())
  title       String
  version     String
  publishedAt DateTime       @map("published_at")
  documentUrl String         @map("document_url")
  status      RegimentStatus @default(IN_FORCE)

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@map("regiments")
}

enum MeetingFormat {
  ONLINE
  IN_PERSON
}

enum MeetingStatus {
  PENDING
  CANCELLED
  FINISHED
}

model Meeting {
  id          String         @id @default(uuid())
  title       String
  scheduledAt DateTime       @map("scheduled_at")
  format      MeetingFormat  @default(ONLINE)
  agenda      String
  minutes     MeetingMinute?
  meetingLink String?        @map("meeting_link")
  location    String?        @map("location")
  status      MeetingStatus  @default(PENDING)

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@map("meetings")
}

model MeetingMinute {
  id          String   @id @default(uuid())
  title       String
  publishedAt DateTime @map("published_at")
  documentUrl String   @map("document_url")
  meetingId   String   @unique @map("meeting_id")
  meeting     Meeting  @relation(fields: [meetingId], references: [id], onDelete: Cascade)

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@map("meeting_minutes")
}

model InternationalScientificCongress {
  id             String   @id @default(uuid())
  title          String
  edition        Int      @unique
  startDate      DateTime @map("start_date")
  endDate        DateTime @map("end_date")
  description    String?
  location       String?
  congressLink   String?  @map("congress_link")
  noticeUrl      String?  @map("general_notice_url")
  scheduleUrl    String?  @map("schedule_document_url")
  programUrl     String?  @map("program_document_url")
  adminReportUrl String?  @map("admin_report_document_url")
  proceedingsUrl String?  @map("proceedings_document_url")

  partners  InternationalScientificCongressPartner[]
  galleries InternationalScientificCongressGalleryItem[]

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@index([edition], name: "congress_edition")
  @@map("international_scientific_congresses")
}

model InternationalScientificCongressPartner {
  id      String  @id @default(uuid())
  name    String
  logoUrl String? @map("logo_url")

  congressId String                          @map("congress_id")
  congress   InternationalScientificCongress @relation(fields: [congressId], references: [id], onDelete: Cascade)

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@index([congressId])
  @@map("international_scientific_congress_partners")
}

model InternationalScientificCongressGalleryItem {
  id       String  @id @default(uuid())
  imageUrl String  @map("image_url")
  caption  String?

  congressId String                          @map("congress_id")
  congress   InternationalScientificCongress @relation(fields: [congressId], references: [id], onDelete: Cascade)

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@index([congressId])
  @@map("international_scientific_congress_galleries")
}

model RegionalCongress {
  id             String   @id @default(uuid())
  title          String
  edition        Int      @unique
  startDate      DateTime @map("start_date")
  endDate        DateTime @map("end_date")
  description    String?
  location       String?
  congressLink   String?  @map("congress_link")
  noticeUrl      String?  @map("notice_url")
  scheduleUrl    String?  @map("schedule_url")
  programUrl     String?  @map("program_url")
  adminReportUrl String?  @map("admin_report_url")
  proceedingsUrl String?  @map("proceedings_url")

  createdAt                    DateTime                      @default(now()) @map("created_at")
  updatedAt                    DateTime                      @updatedAt @map("updated_at")
  regionalCongressPartners     RegionalCongressPartner[]
  regionalCongressGalleryItems RegionalCongressGalleryItem[]

  @@index([edition], name: "regional_congress_edition")
  @@map("regional_congresses")
}

model RegionalCongressPartner {
  id      String  @id @default(uuid())
  name    String
  logoUrl String? @map("logo_url")

  congressId String           @map("congress_id")
  congress   RegionalCongress @relation(fields: [congressId], references: [id], onDelete: Cascade)

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@index([congressId])
  @@map("regional_congress_partners")
}

model RegionalCongressGalleryItem {
  id       String  @id @default(uuid())
  imageUrl String  @map("image_url")
  caption  String?

  congressId String           @map("congress_id")
  congress   RegionalCongress @relation(fields: [congressId], references: [id], onDelete: Cascade)

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@index([congressId])
  @@map("regional_congress_galleries")
}

model Webinar {
  id           String   @id @default(uuid())
  title        String
  description  String?
  scheduledAt  DateTime @map("scheduled_at")
  webinarLink  String?  @map("webinar_link")
  thumbnailUrl String?  @map("thumbnail_url")

  guests User[]

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@map("webinars")
}

model Course {
  id       String  @id @default(uuid())
  title    String
  imageUrl String? @map("image_url")

  coordinator   User   @relation("CoordinatedCourses", fields: [coordinatorId], references: [id])
  coordinatorId String

  instructors User[] @relation("InstructedCourses")

  email            String
  scheduledAt      DateTime @map("scheduled_at")
  location         String
  registrationLink String?  @map("registration_link")
  description      String?

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@index([id], name: "course_id")
  @@map("courses")
}

model PostGraduateProgram {
  id               String   @id @default(uuid())
  title            String
  imageUrl         String?  @map("image_url")
  description      String?
  startDate        DateTime @map("start_date")
  endDate          DateTime @map("end_date")
  contact          String
  registrationLink String?  @map("registration_link")

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@index([id], name: "post_graduate_program_id")
  @@map("post_graduate_programs")
}

enum EventFormat {
  ONLINE
  IN_PERSON
}

enum EventStatus {
  PENDING
  CANCELLED
  FINISHED
}

model Event {
  id          String      @id @default(uuid())
  title       String
  description String?
  imageUrl    String?     @map("image_url")
  startDate   DateTime    @map("start_date")
  endDate     DateTime    @map("end_date")
  location    String?
  status      EventStatus @default(PENDING)
  format      EventFormat @default(ONLINE)
  eventLink   String?     @map("event_link")

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@index([id], name: "event_id")
  @@map("events")
}

model ScientificJournal {
  id             String   @id @default(uuid())
  name           String
  issn           String
  description    String
  logoUrl        String?  @map("logo_url")
  journalUrl     String   @map("journal_url")
  directors      String?  @map("directors")
  editorialBoard String?  @map("editorial_board")
  createdAt      DateTime @default(now()) @map("created_at")
  updatedAt      DateTime @updatedAt @map("updated_at")

  @@index([id], name: "scientific_journal_id")
  @@map("scientific_journals")
}

model BookVolume {
  id              String   @id @default(uuid())
  volumeNumber    Int      @map("volume_number")
  year            Int
  title           String
  accessUrl       String?  @map("access_url")
  coverImageUrl   String?  @map("cover_image_url")
  catalogSheetUrl String?  @map("catalog_sheet_url")
  description     String?
  createdAt       DateTime @default(now()) @map("created_at")
  updatedAt       DateTime @updatedAt @map("updated_at")

  author   User   @relation(fields: [authorId], references: [id])
  authorId String @map("author_id")

  @@index([id], name: "book_volume_id")
  @@map("book_volumes")
}

model ScientificArticle {
  id      String  @id @default(uuid())
  title   String
  author  String
  journal String?
  volume  String?
  edition String?

  pageStart Int? @map("page_start")
  pageEnd   Int? @map("page_end")

  startDate DateTime @map("start_date")
  endDate   DateTime @map("end_date")

  city        String?
  state       String?
  country     String?
  publisher   String?
  description String?
  year        Int?

  accessUrl String? @map("access_url")

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@index([id], name: "scientific_article_id")
  @@map("scientific_articles")
}

model WorkGroupTeamMember {
  id          String   @id @default(uuid())
  role        String
  description String?
  createdAt   DateTime @default(now()) @map("created_at")
  updatedAt   DateTime @updatedAt @map("updated_at")

  userId String @map("user_id")
  user   User   @relation(fields: [userId], references: [id])

  @@index([id], name: "work_group_team_member_id")
  @@map("work_group_team_members")
}

model ReferenceCenterTeamMember {
  id          String   @id @default(uuid())
  role        String
  description String?
  createdAt   DateTime @default(now()) @map("created_at")
  updatedAt   DateTime @updatedAt @map("updated_at")

  userId String @map("user_id")
  user   User   @relation(fields: [userId], references: [id])

  @@index([id], name: "reference_center_team_member_id")
  @@map("reference_center_team_members")
}

model Law {
  id        String   @id @default(uuid())
  title     String
  link      String
  country   String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@index([id], name: "law_id")
  @@map("laws")
}

model ResearchGroup {
  id          String   @id @default(uuid())
  name        String
  acronym     String?
  description String?
  url         String?
  logoUrl     String?  @map("logo_url")
  foundedAt   DateTime @map("founded_at")
  scope       String?
  email       String?

  leader   User   @relation("LeaderRelation", fields: [leaderId], references: [id])
  leaderId String

  deputyLeader   User   @relation("DeputyLeaderRelation", fields: [deputyLeaderId], references: [id])
  deputyLeaderId String

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@index([id], name: "research_group_id")
  @@map("research_groups")
}

model Museum {
  id String @id @default(uuid())

  logoUrl String? @map("logo_url")

  name    String
  city    String?
  state   String?
  country String?

  description String?
  website     String?
  email       String?
  phone       String?
  address     String?
  functioning String?

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@index([id], name: "museum_id")
  @@map("museums")
}

enum RedeCTHighlightType {
  PERSON
  INSTITUTION
}

model RedeCTHighlight {
  id               String              @id @default(uuid())
  type             RedeCTHighlightType
  description      String?
  honorableMention Boolean?            @default(false) @map("honorable_mention")
  honoredAt        DateTime            @map("honored_at")
  meritUrl         String?             @map("merit_url")

  user   User   @relation(fields: [userId], references: [id])
  userId String @map("user_id")

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@index([id], name: "redect_highlight_id")
  @@map("redect_highlights")
}
`,runtimeDataModel:{models:{},enums:{},types:{}}};ic.runtimeDataModel=JSON.parse('{"models":{"User":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"name","kind":"scalar","type":"String"},{"name":"passwordHash","kind":"scalar","type":"String","dbName":"password_hash"},{"name":"avatarUrl","kind":"scalar","type":"String","dbName":"avatar_url"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"},{"name":"emailAddress","kind":"scalar","type":"String","dbName":"email_address"},{"name":"orcid","kind":"scalar","type":"String","dbName":"orcid"},{"name":"phone","kind":"scalar","type":"String"},{"name":"lattesUrl","kind":"scalar","type":"String","dbName":"lattes_url"},{"name":"role","kind":"enum","type":"UserRole"},{"name":"news","kind":"object","type":"News","relationName":"NewsToUser"},{"name":"ManagementTeamMember","kind":"object","type":"ManagementTeamMember","relationName":"ManagementTeamMember"},{"name":"SDHCTeamMember","kind":"object","type":"SDHCTeamMember","relationName":"SDHCTeamMember"},{"name":"LegitimatorCommitteeMember","kind":"object","type":"LegitimatorCommitteeMember","relationName":"LegitimatorCommitteeMember"},{"name":"certification","kind":"object","type":"Certification","relationName":"CertificationToUser"},{"name":"pendencies","kind":"object","type":"Pendency","relationName":"PendencyToUser"},{"name":"Researcher","kind":"object","type":"Researcher","relationName":"ResearcherToUser"},{"name":"webinars","kind":"object","type":"Webinar","relationName":"UserToWebinar"},{"name":"coursesCoordinated","kind":"object","type":"Course","relationName":"CoordinatedCourses"},{"name":"coursesInstructed","kind":"object","type":"Course","relationName":"InstructedCourses"},{"name":"workGroupTeamMembers","kind":"object","type":"WorkGroupTeamMember","relationName":"UserToWorkGroupTeamMember"},{"name":"referenceCenterTeamMembers","kind":"object","type":"ReferenceCenterTeamMember","relationName":"ReferenceCenterTeamMemberToUser"},{"name":"researchGroupsLeader","kind":"object","type":"ResearchGroup","relationName":"LeaderRelation"},{"name":"researchGroupsDeputyLeader","kind":"object","type":"ResearchGroup","relationName":"DeputyLeaderRelation"},{"name":"bookVolumes","kind":"object","type":"BookVolume","relationName":"BookVolumeToUser"},{"name":"redeCTHighlights","kind":"object","type":"RedeCTHighlight","relationName":"RedeCTHighlightToUser"}],"dbName":"users"},"News":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"title","kind":"scalar","type":"String"},{"name":"content","kind":"scalar","type":"String"},{"name":"imageUrl","kind":"scalar","type":"String","dbName":"image_url"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"},{"name":"author","kind":"object","type":"User","relationName":"NewsToUser"},{"name":"authorId","kind":"scalar","type":"String","dbName":"author_id"}],"dbName":"news"},"ManagementTeam":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"name","kind":"scalar","type":"String"},{"name":"description","kind":"scalar","type":"String"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"},{"name":"members","kind":"object","type":"ManagementTeamMember","relationName":"ManagementTeamToManagementTeamMember"}],"dbName":"management_teams"},"ManagementTeamMember":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"role","kind":"scalar","type":"String"},{"name":"description","kind":"scalar","type":"String"},{"name":"order","kind":"scalar","type":"Int"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"},{"name":"teamId","kind":"scalar","type":"String","dbName":"team_id"},{"name":"team","kind":"object","type":"ManagementTeam","relationName":"ManagementTeamToManagementTeamMember"},{"name":"userId","kind":"scalar","type":"String","dbName":"user_id"},{"name":"user","kind":"object","type":"User","relationName":"ManagementTeamMember"}],"dbName":"management_team_members"},"SDHCTeamMember":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"role","kind":"scalar","type":"String"},{"name":"description","kind":"scalar","type":"String"},{"name":"order","kind":"scalar","type":"Int"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"},{"name":"userId","kind":"scalar","type":"String","dbName":"user_id"},{"name":"user","kind":"object","type":"User","relationName":"SDHCTeamMember"}],"dbName":"sdhc_team_members"},"LegitimatorCommitteeMember":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"role","kind":"scalar","type":"String"},{"name":"description","kind":"scalar","type":"String"},{"name":"order","kind":"scalar","type":"Int"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"},{"name":"userId","kind":"scalar","type":"String","dbName":"user_id"},{"name":"user","kind":"object","type":"User","relationName":"LegitimatorCommitteeMember"}],"dbName":"legitimator_committee_members"},"Certification":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"title","kind":"scalar","type":"String"},{"name":"description","kind":"scalar","type":"String"},{"name":"certificationUrl","kind":"scalar","type":"String","dbName":"certification_url"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"},{"name":"user","kind":"object","type":"User","relationName":"CertificationToUser"},{"name":"userId","kind":"scalar","type":"String","dbName":"user_id"}],"dbName":"certifications"},"Pendency":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"title","kind":"scalar","type":"String"},{"name":"description","kind":"scalar","type":"String"},{"name":"status","kind":"enum","type":"PendencyStatus"},{"name":"dueDate","kind":"scalar","type":"DateTime","dbName":"due_date"},{"name":"documentUrl","kind":"scalar","type":"String","dbName":"document_url"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"},{"name":"user","kind":"object","type":"User","relationName":"PendencyToUser"},{"name":"userId","kind":"scalar","type":"String","dbName":"user_id"}],"dbName":"pendencies"},"Researcher":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"registrationNumber","kind":"scalar","type":"String","dbName":"registration_number"},{"name":"mainEtps","kind":"scalar","type":"String","dbName":"main_etps"},{"name":"formations","kind":"scalar","type":"String","dbName":"formations"},{"name":"degrees","kind":"enum","type":"Degree","dbName":"degrees"},{"name":"occupations","kind":"scalar","type":"String","dbName":"occupations"},{"name":"seniority","kind":"enum","type":"Seniority","dbName":"seniority"},{"name":"institutions","kind":"scalar","type":"String","dbName":"institutions"},{"name":"biography","kind":"scalar","type":"String","dbName":"biography"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"},{"name":"user","kind":"object","type":"User","relationName":"ResearcherToUser"},{"name":"userId","kind":"scalar","type":"String","dbName":"user_id"},{"name":"etpLeader","kind":"object","type":"ETPLeader","relationName":"ETPLeaderToResearcher"},{"name":"etpDeputy","kind":"object","type":"ETPDeputy","relationName":"ETPDeputyToResearcher"},{"name":"etpSecretary","kind":"object","type":"ETPSecretary","relationName":"ETPSecretaryToResearcher"},{"name":"etpMembers","kind":"object","type":"ETP","relationName":"etp_members"}],"dbName":"researchers"},"InMemoriam":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"name","kind":"scalar","type":"String"},{"name":"birthDate","kind":"scalar","type":"DateTime","dbName":"birth_date"},{"name":"deathDate","kind":"scalar","type":"DateTime","dbName":"death_date"},{"name":"biography","kind":"scalar","type":"String"},{"name":"photoUrl","kind":"scalar","type":"String","dbName":"photo_url"},{"name":"role","kind":"enum","type":"InMemoriamRole"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"}],"dbName":"in_memoriam"},"ETPLeader":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"etpId","kind":"scalar","type":"String","dbName":"etp_id"},{"name":"etp","kind":"object","type":"ETP","relationName":"ETPToETPLeader"},{"name":"researcherId","kind":"scalar","type":"String","dbName":"researcher_id"},{"name":"researcher","kind":"object","type":"Researcher","relationName":"ETPLeaderToResearcher"}],"dbName":"etp_leader"},"ETPDeputy":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"etpId","kind":"scalar","type":"String","dbName":"etp_id"},{"name":"etp","kind":"object","type":"ETP","relationName":"ETPToETPDeputy"},{"name":"researcherId","kind":"scalar","type":"String","dbName":"researcher_id"},{"name":"researcher","kind":"object","type":"Researcher","relationName":"ETPDeputyToResearcher"}],"dbName":"etp_deputy"},"ETPSecretary":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"etpId","kind":"scalar","type":"String","dbName":"etp_id"},{"name":"etp","kind":"object","type":"ETP","relationName":"ETPToETPSecretary"},{"name":"researcherId","kind":"scalar","type":"String","dbName":"researcher_id"},{"name":"researcher","kind":"object","type":"Researcher","relationName":"ETPSecretaryToResearcher"}],"dbName":"etp_secretary"},"ETP":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"code","kind":"scalar","type":"String"},{"name":"title","kind":"scalar","type":"String"},{"name":"description","kind":"scalar","type":"String"},{"name":"notes","kind":"scalar","type":"String"},{"name":"leader","kind":"object","type":"ETPLeader","relationName":"ETPToETPLeader"},{"name":"deputyLeader","kind":"object","type":"ETPDeputy","relationName":"ETPToETPDeputy"},{"name":"secretary","kind":"object","type":"ETPSecretary","relationName":"ETPToETPSecretary"},{"name":"members","kind":"object","type":"Researcher","relationName":"etp_members"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"}],"dbName":"etps"},"Partner":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"name","kind":"scalar","type":"String"},{"name":"logoUrl","kind":"scalar","type":"String"},{"name":"websiteUrl","kind":"scalar","type":"String"},{"name":"description","kind":"scalar","type":"String"},{"name":"category","kind":"scalar","type":"String"},{"name":"since","kind":"scalar","type":"DateTime"},{"name":"isActive","kind":"scalar","type":"Boolean"},{"name":"createdAt","kind":"scalar","type":"DateTime"},{"name":"updatedAt","kind":"scalar","type":"DateTime"}],"dbName":"partners"},"Regiment":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"title","kind":"scalar","type":"String"},{"name":"version","kind":"scalar","type":"String"},{"name":"publishedAt","kind":"scalar","type":"DateTime","dbName":"published_at"},{"name":"documentUrl","kind":"scalar","type":"String","dbName":"document_url"},{"name":"status","kind":"enum","type":"RegimentStatus"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"}],"dbName":"regiments"},"Meeting":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"title","kind":"scalar","type":"String"},{"name":"scheduledAt","kind":"scalar","type":"DateTime","dbName":"scheduled_at"},{"name":"format","kind":"enum","type":"MeetingFormat"},{"name":"agenda","kind":"scalar","type":"String"},{"name":"minutes","kind":"object","type":"MeetingMinute","relationName":"MeetingToMeetingMinute"},{"name":"meetingLink","kind":"scalar","type":"String","dbName":"meeting_link"},{"name":"location","kind":"scalar","type":"String","dbName":"location"},{"name":"status","kind":"enum","type":"MeetingStatus"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"}],"dbName":"meetings"},"MeetingMinute":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"title","kind":"scalar","type":"String"},{"name":"publishedAt","kind":"scalar","type":"DateTime","dbName":"published_at"},{"name":"documentUrl","kind":"scalar","type":"String","dbName":"document_url"},{"name":"meetingId","kind":"scalar","type":"String","dbName":"meeting_id"},{"name":"meeting","kind":"object","type":"Meeting","relationName":"MeetingToMeetingMinute"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"}],"dbName":"meeting_minutes"},"InternationalScientificCongress":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"title","kind":"scalar","type":"String"},{"name":"edition","kind":"scalar","type":"Int"},{"name":"startDate","kind":"scalar","type":"DateTime","dbName":"start_date"},{"name":"endDate","kind":"scalar","type":"DateTime","dbName":"end_date"},{"name":"description","kind":"scalar","type":"String"},{"name":"location","kind":"scalar","type":"String"},{"name":"congressLink","kind":"scalar","type":"String","dbName":"congress_link"},{"name":"noticeUrl","kind":"scalar","type":"String","dbName":"general_notice_url"},{"name":"scheduleUrl","kind":"scalar","type":"String","dbName":"schedule_document_url"},{"name":"programUrl","kind":"scalar","type":"String","dbName":"program_document_url"},{"name":"adminReportUrl","kind":"scalar","type":"String","dbName":"admin_report_document_url"},{"name":"proceedingsUrl","kind":"scalar","type":"String","dbName":"proceedings_document_url"},{"name":"partners","kind":"object","type":"InternationalScientificCongressPartner","relationName":"InternationalScientificCongressToInternationalScientificCongressPartner"},{"name":"galleries","kind":"object","type":"InternationalScientificCongressGalleryItem","relationName":"InternationalScientificCongressToInternationalScientificCongressGalleryItem"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"}],"dbName":"international_scientific_congresses"},"InternationalScientificCongressPartner":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"name","kind":"scalar","type":"String"},{"name":"logoUrl","kind":"scalar","type":"String","dbName":"logo_url"},{"name":"congressId","kind":"scalar","type":"String","dbName":"congress_id"},{"name":"congress","kind":"object","type":"InternationalScientificCongress","relationName":"InternationalScientificCongressToInternationalScientificCongressPartner"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"}],"dbName":"international_scientific_congress_partners"},"InternationalScientificCongressGalleryItem":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"imageUrl","kind":"scalar","type":"String","dbName":"image_url"},{"name":"caption","kind":"scalar","type":"String"},{"name":"congressId","kind":"scalar","type":"String","dbName":"congress_id"},{"name":"congress","kind":"object","type":"InternationalScientificCongress","relationName":"InternationalScientificCongressToInternationalScientificCongressGalleryItem"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"}],"dbName":"international_scientific_congress_galleries"},"RegionalCongress":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"title","kind":"scalar","type":"String"},{"name":"edition","kind":"scalar","type":"Int"},{"name":"startDate","kind":"scalar","type":"DateTime","dbName":"start_date"},{"name":"endDate","kind":"scalar","type":"DateTime","dbName":"end_date"},{"name":"description","kind":"scalar","type":"String"},{"name":"location","kind":"scalar","type":"String"},{"name":"congressLink","kind":"scalar","type":"String","dbName":"congress_link"},{"name":"noticeUrl","kind":"scalar","type":"String","dbName":"notice_url"},{"name":"scheduleUrl","kind":"scalar","type":"String","dbName":"schedule_url"},{"name":"programUrl","kind":"scalar","type":"String","dbName":"program_url"},{"name":"adminReportUrl","kind":"scalar","type":"String","dbName":"admin_report_url"},{"name":"proceedingsUrl","kind":"scalar","type":"String","dbName":"proceedings_url"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"},{"name":"regionalCongressPartners","kind":"object","type":"RegionalCongressPartner","relationName":"RegionalCongressToRegionalCongressPartner"},{"name":"regionalCongressGalleryItems","kind":"object","type":"RegionalCongressGalleryItem","relationName":"RegionalCongressToRegionalCongressGalleryItem"}],"dbName":"regional_congresses"},"RegionalCongressPartner":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"name","kind":"scalar","type":"String"},{"name":"logoUrl","kind":"scalar","type":"String","dbName":"logo_url"},{"name":"congressId","kind":"scalar","type":"String","dbName":"congress_id"},{"name":"congress","kind":"object","type":"RegionalCongress","relationName":"RegionalCongressToRegionalCongressPartner"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"}],"dbName":"regional_congress_partners"},"RegionalCongressGalleryItem":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"imageUrl","kind":"scalar","type":"String","dbName":"image_url"},{"name":"caption","kind":"scalar","type":"String"},{"name":"congressId","kind":"scalar","type":"String","dbName":"congress_id"},{"name":"congress","kind":"object","type":"RegionalCongress","relationName":"RegionalCongressToRegionalCongressGalleryItem"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"}],"dbName":"regional_congress_galleries"},"Webinar":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"title","kind":"scalar","type":"String"},{"name":"description","kind":"scalar","type":"String"},{"name":"scheduledAt","kind":"scalar","type":"DateTime","dbName":"scheduled_at"},{"name":"webinarLink","kind":"scalar","type":"String","dbName":"webinar_link"},{"name":"thumbnailUrl","kind":"scalar","type":"String","dbName":"thumbnail_url"},{"name":"guests","kind":"object","type":"User","relationName":"UserToWebinar"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"}],"dbName":"webinars"},"Course":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"title","kind":"scalar","type":"String"},{"name":"imageUrl","kind":"scalar","type":"String","dbName":"image_url"},{"name":"coordinator","kind":"object","type":"User","relationName":"CoordinatedCourses"},{"name":"coordinatorId","kind":"scalar","type":"String"},{"name":"instructors","kind":"object","type":"User","relationName":"InstructedCourses"},{"name":"email","kind":"scalar","type":"String"},{"name":"scheduledAt","kind":"scalar","type":"DateTime","dbName":"scheduled_at"},{"name":"location","kind":"scalar","type":"String"},{"name":"registrationLink","kind":"scalar","type":"String","dbName":"registration_link"},{"name":"description","kind":"scalar","type":"String"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"}],"dbName":"courses"},"PostGraduateProgram":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"title","kind":"scalar","type":"String"},{"name":"imageUrl","kind":"scalar","type":"String","dbName":"image_url"},{"name":"description","kind":"scalar","type":"String"},{"name":"startDate","kind":"scalar","type":"DateTime","dbName":"start_date"},{"name":"endDate","kind":"scalar","type":"DateTime","dbName":"end_date"},{"name":"contact","kind":"scalar","type":"String"},{"name":"registrationLink","kind":"scalar","type":"String","dbName":"registration_link"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"}],"dbName":"post_graduate_programs"},"Event":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"title","kind":"scalar","type":"String"},{"name":"description","kind":"scalar","type":"String"},{"name":"imageUrl","kind":"scalar","type":"String","dbName":"image_url"},{"name":"startDate","kind":"scalar","type":"DateTime","dbName":"start_date"},{"name":"endDate","kind":"scalar","type":"DateTime","dbName":"end_date"},{"name":"location","kind":"scalar","type":"String"},{"name":"status","kind":"enum","type":"EventStatus"},{"name":"format","kind":"enum","type":"EventFormat"},{"name":"eventLink","kind":"scalar","type":"String","dbName":"event_link"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"}],"dbName":"events"},"ScientificJournal":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"name","kind":"scalar","type":"String"},{"name":"issn","kind":"scalar","type":"String"},{"name":"description","kind":"scalar","type":"String"},{"name":"logoUrl","kind":"scalar","type":"String","dbName":"logo_url"},{"name":"journalUrl","kind":"scalar","type":"String","dbName":"journal_url"},{"name":"directors","kind":"scalar","type":"String","dbName":"directors"},{"name":"editorialBoard","kind":"scalar","type":"String","dbName":"editorial_board"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"}],"dbName":"scientific_journals"},"BookVolume":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"volumeNumber","kind":"scalar","type":"Int","dbName":"volume_number"},{"name":"year","kind":"scalar","type":"Int"},{"name":"title","kind":"scalar","type":"String"},{"name":"accessUrl","kind":"scalar","type":"String","dbName":"access_url"},{"name":"coverImageUrl","kind":"scalar","type":"String","dbName":"cover_image_url"},{"name":"catalogSheetUrl","kind":"scalar","type":"String","dbName":"catalog_sheet_url"},{"name":"description","kind":"scalar","type":"String"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"},{"name":"author","kind":"object","type":"User","relationName":"BookVolumeToUser"},{"name":"authorId","kind":"scalar","type":"String","dbName":"author_id"}],"dbName":"book_volumes"},"ScientificArticle":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"title","kind":"scalar","type":"String"},{"name":"author","kind":"scalar","type":"String"},{"name":"journal","kind":"scalar","type":"String"},{"name":"volume","kind":"scalar","type":"String"},{"name":"edition","kind":"scalar","type":"String"},{"name":"pageStart","kind":"scalar","type":"Int","dbName":"page_start"},{"name":"pageEnd","kind":"scalar","type":"Int","dbName":"page_end"},{"name":"startDate","kind":"scalar","type":"DateTime","dbName":"start_date"},{"name":"endDate","kind":"scalar","type":"DateTime","dbName":"end_date"},{"name":"city","kind":"scalar","type":"String"},{"name":"state","kind":"scalar","type":"String"},{"name":"country","kind":"scalar","type":"String"},{"name":"publisher","kind":"scalar","type":"String"},{"name":"description","kind":"scalar","type":"String"},{"name":"year","kind":"scalar","type":"Int"},{"name":"accessUrl","kind":"scalar","type":"String","dbName":"access_url"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"}],"dbName":"scientific_articles"},"WorkGroupTeamMember":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"role","kind":"scalar","type":"String"},{"name":"description","kind":"scalar","type":"String"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"},{"name":"userId","kind":"scalar","type":"String","dbName":"user_id"},{"name":"user","kind":"object","type":"User","relationName":"UserToWorkGroupTeamMember"}],"dbName":"work_group_team_members"},"ReferenceCenterTeamMember":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"role","kind":"scalar","type":"String"},{"name":"description","kind":"scalar","type":"String"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"},{"name":"userId","kind":"scalar","type":"String","dbName":"user_id"},{"name":"user","kind":"object","type":"User","relationName":"ReferenceCenterTeamMemberToUser"}],"dbName":"reference_center_team_members"},"Law":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"title","kind":"scalar","type":"String"},{"name":"link","kind":"scalar","type":"String"},{"name":"country","kind":"scalar","type":"String"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"}],"dbName":"laws"},"ResearchGroup":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"name","kind":"scalar","type":"String"},{"name":"acronym","kind":"scalar","type":"String"},{"name":"description","kind":"scalar","type":"String"},{"name":"url","kind":"scalar","type":"String"},{"name":"logoUrl","kind":"scalar","type":"String","dbName":"logo_url"},{"name":"foundedAt","kind":"scalar","type":"DateTime","dbName":"founded_at"},{"name":"scope","kind":"scalar","type":"String"},{"name":"email","kind":"scalar","type":"String"},{"name":"leader","kind":"object","type":"User","relationName":"LeaderRelation"},{"name":"leaderId","kind":"scalar","type":"String"},{"name":"deputyLeader","kind":"object","type":"User","relationName":"DeputyLeaderRelation"},{"name":"deputyLeaderId","kind":"scalar","type":"String"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"}],"dbName":"research_groups"},"Museum":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"logoUrl","kind":"scalar","type":"String","dbName":"logo_url"},{"name":"name","kind":"scalar","type":"String"},{"name":"city","kind":"scalar","type":"String"},{"name":"state","kind":"scalar","type":"String"},{"name":"country","kind":"scalar","type":"String"},{"name":"description","kind":"scalar","type":"String"},{"name":"website","kind":"scalar","type":"String"},{"name":"email","kind":"scalar","type":"String"},{"name":"phone","kind":"scalar","type":"String"},{"name":"address","kind":"scalar","type":"String"},{"name":"functioning","kind":"scalar","type":"String"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"}],"dbName":"museums"},"RedeCTHighlight":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"type","kind":"enum","type":"RedeCTHighlightType"},{"name":"description","kind":"scalar","type":"String"},{"name":"honorableMention","kind":"scalar","type":"Boolean","dbName":"honorable_mention"},{"name":"honoredAt","kind":"scalar","type":"DateTime","dbName":"honored_at"},{"name":"meritUrl","kind":"scalar","type":"String","dbName":"merit_url"},{"name":"user","kind":"object","type":"User","relationName":"RedeCTHighlightToUser"},{"name":"userId","kind":"scalar","type":"String","dbName":"user_id"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"}],"dbName":"redect_highlights"}},"enums":{},"types":{}}');async function zS(r){let{Buffer:e}=await import("buffer"),t=e.from(r,"base64");return new WebAssembly.Module(t)}ic.compilerWasm={getRuntime:async()=>await import("@prisma/client/runtime/query_compiler_bg.postgresql.mjs"),getQueryCompilerWasmModule:async()=>{let{wasm:r}=await import("@prisma/client/runtime/query_compiler_bg.postgresql.wasm-base64.mjs");return await zS(r)}};function ah(){return nh.getPrismaClient(ic)}import*as pe from"@prisma/client/runtime/client";var E1=pe.Extensions.getExtensionContext;var w1={DbNull:pe.NullTypes.DbNull,JsonNull:pe.NullTypes.JsonNull,AnyNull:pe.NullTypes.AnyNull};var v1=pe.makeStrictEnum({ReadUncommitted:"ReadUncommitted",ReadCommitted:"ReadCommitted",RepeatableRead:"RepeatableRead",Serializable:"Serializable"});var U1=pe.Extensions.defineExtension;globalThis.__dirname=mh.dirname(JS(import.meta.url));var ph=ah();var XS=new YS({connectionString:ge.DATABASE_URL}),O=new ph({log:["warn","error"],adapter:XS});var ta=class{constructor(e){this.prisma=e}async register({userId:e,title:t,description:i,certificationUrl:o}){await this.prisma.certification.create({data:{title:t,description:i,certificationUrl:o,user:{connect:{id:e}}}})}async find({pagination:{offset:e,limit:t},filter:{description:i,orderBy:o,title:s,userId:n}}){let a={},m=[];return n&&(a.userId=n),s&&m.push({title:{contains:s,mode:"insensitive"}}),i&&m.push({description:{contains:i,mode:"insensitive"}}),m.length>0&&(a.OR=m),await this.prisma.certification.findMany({where:a,include:{user:{omit:{passwordHash:!0}}},orderBy:{updatedAt:o},skip:e,take:t})}async findById(e){return await this.prisma.certification.findFirst({where:{id:e}})}async findByUserId({pagination:{limit:e,offset:t},filter:{description:i,orderBy:o,title:s},userId:n}){let a={userId:n},m=[];return s&&m.push({title:{contains:s,mode:"insensitive"}}),i&&m.push({description:{contains:i,mode:"insensitive"}}),m.length>0&&(a.OR=m),await this.prisma.certification.findMany({where:a,include:{user:{omit:{passwordHash:!0}}},orderBy:{updatedAt:o},skip:t,take:e})}async update({id:e,...t}){await this.prisma.certification.update({where:{id:e},data:t})}async deleteById(e){await this.prisma.certification.delete({where:{id:e}})}async count({filter:{description:e,title:t,userId:i}}){let o={},s=[];return i&&(o.userId=i),t&&s.push({title:{contains:t,mode:"insensitive"}}),e&&s.push({description:{contains:e,mode:"insensitive"}}),s.length>0&&(o.OR=s),await this.prisma.certification.count({where:o})}};function _t(){return new ta(O)}var ra=class{constructor(e){this.prisma=e}async create(e){await this.prisma.news.create({data:e})}async find({pagination:{offset:e,limit:t},filter:{authorId:i,content:o,title:s,orderBy:n}}){let a={};i&&(a.authorId={contains:i,mode:"insensitive"});let m=[];return s&&m.push({title:{contains:s,mode:"insensitive"}}),o&&m.push({content:{contains:o,mode:"insensitive"}}),m.length>0&&(a.OR=m),await this.prisma.news.findMany({where:a,omit:{authorId:!0},include:{author:!0},orderBy:{updatedAt:n},skip:e,take:t})}async findById(e){return await this.prisma.news.findUnique({where:{id:e},omit:{authorId:!0},include:{author:!0}})}async findByAuthorId({authorId:e,pagination:{offset:t,limit:i},filter:{orderBy:o="desc",content:s,title:n}}){let a={authorId:e},m=[];return n&&m.push({title:{contains:n,mode:"insensitive"}}),s&&m.push({content:{contains:s,mode:"insensitive"}}),m.length>0&&(a.OR=m),await this.prisma.news.findMany({omit:{authorId:!0},where:a,orderBy:{updatedAt:o},skip:t,take:i})}async update(e){await this.prisma.news.update({where:{id:e.id},data:{title:e.title,content:e.content,imageUrl:e.imageUrl}})}async delete(e){await this.prisma.news.delete({where:{id:e}})}async count({filter:{authorId:e,content:t,title:i}}){let o={};e&&(o.authorId={contains:e,mode:"insensitive"});let s=[];return i&&s.push({title:{contains:i,mode:"insensitive"}}),t&&s.push({content:{contains:t,mode:"insensitive"}}),s.length>0&&(o.OR=s),await this.prisma.news.count({where:o})}};function ut(){return new ra(O)}var ia=class{constructor(e){this.prisma=e}async create(e){await this.prisma.pendency.create({data:e})}async find({filter:{description:e,orderBy:t,title:i,status:o,userId:s},pagination:{limit:n,offset:a}}){let m={userId:s,AND:{status:{equals:o}}};e&&(m.description={contains:e,mode:"insensitive"});let p=[];return i&&p.push({title:{contains:i,mode:"insensitive"}}),p.length>0&&(m.OR=p),await this.prisma.pendency.findMany({where:m,orderBy:{updatedAt:t},include:{user:{omit:{passwordHash:!0}}},skip:a,take:n})}async findById(e){return await this.prisma.pendency.findFirst({where:{id:e},include:{user:{omit:{passwordHash:!0}}}})}async findByUserId({filter:{description:e,orderBy:t,title:i,status:o},pagination:{limit:s,offset:n},userId:a}){let m={userId:a,AND:{status:{equals:o}}},p=[];return e&&p.push({description:{contains:e,mode:"insensitive"}}),i&&p.push({title:{contains:i,mode:"insensitive"}}),p.length>0&&(m.OR=p),await this.prisma.pendency.findMany({where:m,orderBy:{updatedAt:t},include:{user:{omit:{passwordHash:!0}}},skip:n,take:s})}async update({id:e,...t}){await this.prisma.pendency.update({where:{id:e},data:t})}async deleteById(e){await this.prisma.pendency.delete({where:{id:e}})}async count({filter:{description:e,title:t,status:i,userId:o}}){let s={userId:o},n=[];return e&&n.push({description:{contains:e,mode:"insensitive"}}),t&&n.push({title:{contains:t,mode:"insensitive"}}),i&&n.push({status:{equals:i}}),n.length>0&&(s.OR=n),await this.prisma.pendency.count({where:s})}};function Lt(){return new ia(O)}var oa=class{constructor(e){this.prisma=e}async create(e){await this.prisma.user.create({data:e})}async update(e){await this.prisma.user.update({where:{id:e.id},data:{lattesUrl:e.lattesUrl??null,orcid:e.orcid??null,phone:e.phone??null,avatarUrl:e.avatarUrl??null,...e.role&&{role:e.role}}})}async deleteById(e){await this.prisma.user.delete({where:{id:e}})}async find({pagination:e,filter:{emailAddress:t,name:i,phone:o,lattesUrl:s,orcid:n,orderBy:a}}){let m={};return i&&(m.name={contains:i,mode:"insensitive"}),t&&(m.emailAddress={contains:t,mode:"insensitive"}),o&&(m.phone={contains:o,mode:"insensitive"}),s&&(m.lattesUrl={contains:s,mode:"insensitive"}),n&&(m.orcid={contains:n,mode:"insensitive"}),await this.prisma.user.findMany({where:m,omit:{passwordHash:!0},orderBy:{updatedAt:a},skip:e.offset,take:e.limit})}async count({filter:{emailAddress:e,name:t,phone:i,lattesUrl:o,orcid:s}}){let n={};return t&&(n.name={contains:t,mode:"insensitive"}),e&&(n.emailAddress={contains:e,mode:"insensitive"}),i&&(n.phone={contains:i,mode:"insensitive"}),o&&(n.lattesUrl={contains:o,mode:"insensitive"}),s&&(n.orcid={contains:s,mode:"insensitive"}),await this.prisma.user.count({where:n})}async findByEmail(e){return await this.prisma.user.findFirst({where:{emailAddress:e}})}async findById(e){return await this.prisma.user.findFirst({where:{id:e},omit:{passwordHash:!0}})}};function Pe(){return new oa(O)}import{compare as QS,hash as ex}from"bcryptjs";var sa=class{constructor(e,t){this.hashFn=e;this.compareFn=t}async hash(e){return await this.hashFn(e,6)}async compare({password:e,hashedPassword:t}){return await this.compareFn(e,t)}};function oc(){return new sa(ex,QS)}import dh from"jsonwebtoken";var na=class{constructor(e,t){this.signFn=e;this.verifyFn=t}sign(e){try{return this.signFn(e,ge.JWT_SECRET,{expiresIn:"3d",subject:e.id})}catch{return null}}verify(e){try{return this.verifyFn(e,ge.JWT_SECRET)}catch{return null}}};function aa(){return new na(dh.sign,dh.verify)}function lh(){return{signUpController:new Ni(Pe(),oc())}}function ch(){return{signInController:new Bi(Pe(),oc(),aa())}}function uh(){return{findAuthenticatedUserController:new ea(Pe())}}function gh(){return{findAuthenticatedUserController:new Di(ut())}}function yh(){return{findAuthenticatedUserCertificationsController:new Fi(_t())}}function fh(){return{findAuthenticatedUserPendenciesController:new ki(Lt())}}var ma=class{constructor(e){this.jwtService=e}authenticated(e,t,i){let o=e.headers.authorization;if(!o?.startsWith("Bearer "))return t.status(401).json({message:"Token inv\xE1lido.",invalid:!0});let s=o.split(" ")[1];if(!s)return t.status(401).json({message:"Token n\xE3o fornecido."});try{let n=this.jwtService.verify(s);if(!n)return t.status(401).json({message:"Token inv\xE1lido.",invalid:!0});e.user=n,i()}catch(n){if(n instanceof Error)return t.status(401).json({message:n.message})}}isAdmin(e,t,i){let o=e.headers.authorization;if(!o?.startsWith("Bearer "))return t.status(401).json({message:"Token inv\xE1lido.",invalid:!0});let s=o.split(" ")[1];if(!s)return t.status(401).json({message:"Token n\xE3o fornecido."});try{let n=this.jwtService.verify(s);if(!n)return t.status(401).json({message:"Token inv\xE1lido.",invalid:!0});if(n.role!=="ADMIN")return t.status(401).json({message:"\xC9 necess\xE1rio ter permiss\xF5es de administrador."});e.user=n,i()}catch(n){if(n instanceof Error)return t.status(401).json({message:n.message})}}};function K(){return{authMiddleware:new ma(aa())}}var gt=tx(),{authMiddleware:wi}=K();gt.post("/sign-up",async(r,e)=>{let{signUpController:t}=lh();await t.handle(r,e)});gt.post("/sign-in",async(r,e)=>{let{signInController:t}=ch();await t.handle(r,e)});gt.get("/user",(r,e,t)=>{wi.authenticated(r,e,t)},async(r,e)=>{let{findAuthenticatedUserController:t}=uh();await t.handle(r,e)});gt.get("/user/news",(r,e,t)=>{wi.authenticated(r,e,t)},async(r,e)=>{let{findAuthenticatedUserController:t}=gh();await t.handle(r,e)});gt.get("/admin",(r,e,t)=>{wi.isAdmin(r,e,t)},(r,e)=>{e.status(200).json({success:!0})});gt.get("/certifications",(r,e,t)=>{wi.authenticated(r,e,t)},async(r,e)=>{let{findAuthenticatedUserCertificationsController:t}=yh();await t.handle(r,e)});gt.get("/pendencies",(r,e,t)=>{wi.authenticated(r,e,t)},async(r,e)=>{let{findAuthenticatedUserPendenciesController:t}=fh();await t.handle(r,e)});import{Router as lx}from"express";import{extendZodWithOpenApi as rx}from"@asteasolutions/zod-to-openapi";import ot from"zod";var ix=5,hh=1024,ox=hh*hh,sx=ix*ox;rx(ot);var nx=ot.object({volumeNumber:ot.coerce.number().int().positive("N\xFAmero do volume \xE9 obrigat\xF3rio."),year:ot.coerce.number().int().positive("Ano \xE9 obrigat\xF3rio."),title:ot.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),authorId:ot.uuid("ID do autor deve ser um UUID v\xE1lido."),accessUrl:ot.url().optional(),catalogSheetUrl:ot.url().optional(),description:ot.string().optional(),coverImage:ot.any().refine(r=>!r||typeof r=="object"&&typeof r.mimetype=="string"&&r.mimetype.startsWith("image/")&&typeof r.size=="number"&&r.size<=sx,"A imagem da capa deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.")}),pa=class{constructor(e,t){this.bookVolumeRepository=e;this.firebaseStorageService=t}async handle(e,t){let{volumeNumber:i,year:o,title:s,authorId:n,accessUrl:a,catalogSheetUrl:m,description:p,coverImage:h}=nx.parse({...e.body,coverImage:e.files?.coverImage?.[0]}),A=await this.bookVolumeRepository.create({volumeNumber:i,year:o,title:s,authorId:n,accessUrl:a,catalogSheetUrl:m,description:p}),G=A.coverImageUrl;return G=await this.firebaseStorageService.uploadFile({file:h,folder:M.BOOK_VOLUME_COVER,id:A.id}),await this.bookVolumeRepository.update({id:A.id,coverImageUrl:G}),t.sendStatus(201)}};var da=class{constructor(e){this.prisma=e}async create({volumeNumber:e,year:t,title:i,authorId:o,accessUrl:s,coverImageUrl:n,catalogSheetUrl:a,description:m}){return await this.prisma.bookVolume.create({data:{volumeNumber:e,year:t,title:i,authorId:o,accessUrl:s,coverImageUrl:n,catalogSheetUrl:a,description:m}})}async find({pagination:{offset:e,limit:t},filter:{title:i,author:o,description:s,orderBy:n}}){let a={},m=[];return i&&m.push({title:{contains:i,mode:"insensitive"}}),o&&m.push({author:{name:{contains:o,mode:"insensitive"}}}),s&&m.push({description:{contains:s,mode:"insensitive"}}),m.length>0&&(a.OR=m),await this.prisma.bookVolume.findMany({where:a,omit:{authorId:!0},include:{author:!0},orderBy:{updatedAt:n},skip:e,take:t})}async findById(e){return await this.prisma.bookVolume.findFirst({where:{id:e},omit:{authorId:!0},include:{author:!0}})}async update({id:e,volumeNumber:t,year:i,title:o,authorId:s,accessUrl:n,coverImageUrl:a,catalogSheetUrl:m,description:p}){await this.prisma.bookVolume.update({where:{id:e},data:{volumeNumber:t,year:i,title:o,authorId:s,accessUrl:n,coverImageUrl:a,catalogSheetUrl:m,description:p}})}async deleteById(e){await this.prisma.bookVolume.delete({where:{id:e}})}async count({filter:{title:e,author:t,description:i}}){let o={},s=[];return e&&s.push({title:{contains:e,mode:"insensitive"}}),t&&s.push({author:{name:{contains:t,mode:"insensitive"}}}),i&&s.push({description:{contains:i,mode:"insensitive"}}),s.length>0&&(o.OR=s),await this.prisma.bookVolume.count({where:o})}};function _r(){return new da(O)}import{getStorage as ax}from"firebase-admin/storage";import Rh from"firebase-admin";var sc=Rh.initializeApp({credential:Rh.credential.cert({clientEmail:ge.FIREBASE_CLIENT_EMAIL,privateKey:ge.FIREBASE_PRIVATE_KEY,projectId:ge.FIREBASE_PROJECT_ID,type:ge.FIREBASE_TYPE,privateKeyId:ge.FIREBASE_PRIVATE_KEY_ID,clientId:ge.FIREBASE_CLIENT_ID,authUri:ge.FIREBASE_AUTH_URI,tokenUri:ge.FIREBASE_TOKEN_URI,authProviderX509CertUrl:ge.FIREBASE_AUTH_PROVIDER_X509_CERT_URL,clientX509CertUrl:ge.FIREBASE_CLIENT_X509_CERT_URL}),storageBucket:ge.FIREBASE_BUCKET});sc.name?console.log("\u{1F525} Firebase conectado com sucesso!"):console.error("\u274C Erro ao se conectar ao Firebase.");var mx=ax(sc),Ph=mx.bucket(ge.FIREBASE_BUCKET);import{randomUUID as px}from"crypto";var dx=/https:\/\/storage\.googleapis\.com\/[^/]+\/(.+)$/,la=class{constructor(e){this.bucket=e}async uploadFile({file:e,folder:t,id:i}){let o=`${px()}-${e?.originalname}`,s=this.bucket.file(`${t}/${i}/${o}`);return await new Promise((n,a)=>{let m=s.createWriteStream({metadata:{contentType:e?.mimetype}});m.on("error",p=>{a(p)}),m.on("finish",async()=>{try{await s.makePublic();let p=`https://storage.googleapis.com/${this.bucket.name}/${s.name}`;n(p)}catch(p){a(p)}}),m.end(e.buffer)})}async updateFile({file:e,id:t,fileUrl:i,folder:o}){try{let s=this.getPath(i);if(!s)throw new Error("Arquivo n\xE3o encontrado.");let[n,a]=await Promise.all([this.bucket.file(s).delete(),this.uploadFile({file:e,id:t,folder:o})]);return a}catch{throw new Error("Erro ao atualizar o arquivo.")}}async deleteFile({fileUrl:e}){let t=this.getPath(e);if(!t)throw new Error("Arquivo n\xE3o encontrado.");try{await this.bucket.file(t).delete()}catch{throw new Error("Erro ao deletar o arquivo.")}}getPath(e){let t=e.match(dx);return t?t[1]:null}};function U(){return new la(Ph)}function bh(){return{createBookVolumeController:new pa(_r(),U())}}function Ch(){return{findBookVolumesController:new Li(_r())}}function Ih(){return{findBookVolumeByIdController:new _i(_r())}}function Th(){return{updateBookVolumeController:new Wi(_r(),U())}}function Ah(){return{deleteBookVolumeController:new Gi(_r(),U())}}import Sh from"multer";var H=Sh({storage:Sh.memoryStorage()});var ir=lx(),{authMiddleware:nc}=K();ir.post("/",(r,e,t)=>{nc.isAdmin(r,e,t)},H.fields([{name:"authorImage",maxCount:1},{name:"coverImage",maxCount:1},{name:"catalogSheet",maxCount:1}]),async(r,e)=>{let{createBookVolumeController:t}=bh();await t.handle(r,e)});ir.get("/",async(r,e)=>{let{findBookVolumesController:t}=Ch();await t.handle(r,e)});ir.get("/:id",async(r,e)=>{let{findBookVolumeByIdController:t}=Ih();await t.handle(r,e)});ir.put("/:id",(r,e,t)=>{nc.isAdmin(r,e,t)},H.fields([{name:"authorImage",maxCount:1},{name:"coverImage",maxCount:1},{name:"catalogSheet",maxCount:1}]),async(r,e)=>{let{updateBookVolumeController:t}=Th();await t.handle(r,e)});ir.delete("/:id",(r,e,t)=>{nc.isAdmin(r,e,t)},async(r,e)=>{let{deleteBookVolumeController:t}=Ah();await t.handle(r,e)});import{Router as cx}from"express";function xh(){return{registerCertificationController:new zi(Pe(),_t(),U())}}function Mh(){return{findCertificationsController:new Vi(_t())}}function Eh(){return{findCertificationByIdController:new $i(_t())}}function wh(){return{updateCertificationController:new Zi(_t(),U())}}function vh(){return{deleteCertificationController:new Hi(_t(),U())}}var or=cx(),{authMiddleware:ac}=K();or.post("/:user_id",(r,e,t)=>{ac.isAdmin(r,e,t)},H.single("certification"),async(r,e)=>{let{registerCertificationController:t}=xh();await t.handle(r,e)});or.get("/",async(r,e)=>{let{findCertificationsController:t}=Mh();await t.handle(r,e)});or.get("/:id",async(r,e)=>{let{findCertificationByIdController:t}=Eh();await t.handle(r,e)});or.put("/:id",(r,e,t)=>{ac.isAdmin(r,e,t)},H.single("certification"),async(r,e)=>{let{updateCertificationController:t}=wh();await t.handle(r,e)});or.delete("/:id",(r,e,t)=>{ac.isAdmin(r,e,t)},async(r,e)=>{let{deleteCertificationController:t}=vh();await t.handle(r,e)});import{Router as Rx}from"express";import{extendZodWithOpenApi as ux}from"@asteasolutions/zod-to-openapi";import Ue from"zod";var gx=5,Uh=1024,yx=Uh*Uh,fx=gx*yx;ux(Ue);var hx=Ue.object({title:Ue.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),coordinatorId:Ue.string().uuid("Coordenador \xE9 obrigat\xF3rio."),email:Ue.email("E-mail deve ser v\xE1lido."),location:Ue.string().min(1,"Localiza\xE7\xE3o \xE9 obrigat\xF3ria."),scheduledAt:Ue.coerce.date(),registrationLink:Ue.url().optional(),description:Ue.string().optional(),instructorIds:Ue.transform(r=>typeof r=="string"?r.split(","):r).pipe(Ue.array(Ue.uuid())),image:Ue.any().refine(r=>!r||typeof r=="object"&&typeof r.mimetype=="string"&&r.mimetype.startsWith("image/")&&typeof r.size=="number"&&r.size<=fx,"A imagem deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.")}),ca=class{constructor(e,t){this.courseRepository=e;this.firebaseStorageService=t}async handle(e,t){let{title:i,coordinatorId:o,email:s,location:n,scheduledAt:a,registrationLink:m,description:p,instructorIds:h,image:A}=hx.parse({...e.body,image:e.file}),G=await this.courseRepository.create({title:i,coordinatorId:o,email:s,location:n,scheduledAt:a,registrationLink:m||void 0,description:p,instructorIds:h}),re=await this.firebaseStorageService.uploadFile({file:A,folder:M.COURSE,id:G.id});return await this.courseRepository.update({id:G.id,imageUrl:re}),t.sendStatus(201)}};var ua=class{constructor(e){this.prisma=e}async create({title:e,imageUrl:t,coordinatorId:i,email:o,instructorIds:s,scheduledAt:n,location:a,registrationLink:m,description:p}){return await this.prisma.course.create({data:{title:e,imageUrl:t,coordinatorId:i,email:o,scheduledAt:n,location:a,registrationLink:m,description:p,instructors:{connect:s?.map(h=>({id:h}))}}})}async find({pagination:{offset:e,limit:t},filter:{description:i,orderBy:o,title:s,coordinator:n}}){let a={},m=[];return s&&m.push({title:{contains:s,mode:"insensitive"}}),i&&m.push({description:{contains:i,mode:"insensitive"}}),n&&m.push({coordinator:{name:{contains:n,mode:"insensitive"}}}),m.length>0&&(a.OR=m),await this.prisma.course.findMany({where:a,include:{coordinator:{omit:{passwordHash:!0}},instructors:{omit:{passwordHash:!0}}},orderBy:{updatedAt:o},skip:e,take:t})}async findById(e){return await this.prisma.course.findFirst({where:{id:e},include:{coordinator:{omit:{passwordHash:!0}},instructors:{omit:{passwordHash:!0}}}})}async update({id:e,title:t,imageUrl:i,coordinatorId:o,email:s,instructorIds:n,scheduledAt:a,location:m,registrationLink:p,description:h}){n!==void 0&&await this.prisma.course.update({where:{id:e},data:{instructors:{set:[]}}}),await this.prisma.course.update({where:{id:e},data:{title:t,imageUrl:i,coordinatorId:o,email:s,scheduledAt:a,location:m,registrationLink:p,description:h,...n?.length>0&&{instructors:{connect:n.map(A=>({id:A}))}}}})}async deleteById(e){await this.prisma.course.delete({where:{id:e}})}async count({filter:{description:e,title:t,coordinator:i}}){let o={},s=[];return t&&s.push({title:{contains:t,mode:"insensitive"}}),e&&s.push({description:{contains:e,mode:"insensitive"}}),i&&s.push({coordinator:{name:{contains:i,mode:"insensitive"}}}),s.length>0&&(o.OR=s),await this.prisma.course.count({where:o})}};function Lr(){return new ua(O)}function jh(){return{createCourseController:new ca(Lr(),U())}}function Fh(){return{findCoursesController:new Xi(Lr())}}function Dh(){return{findCourseByIdController:new Yi(Lr())}}function kh(){return{updateCourseController:new Qi(Lr(),U())}}function Oh(){return{deleteCourseController:new Ji(Lr(),U())}}var sr=Rx(),{authMiddleware:mc}=K();sr.post("/",(r,e,t)=>{mc.isAdmin(r,e,t)},H.single("image"),async(r,e)=>{let{createCourseController:t}=jh();await t.handle(r,e)});sr.get("/",async(r,e)=>{let{findCoursesController:t}=Fh();await t.handle(r,e)});sr.get("/:id",async(r,e)=>{let{findCourseByIdController:t}=Dh();await t.handle(r,e)});sr.put("/:id",(r,e,t)=>{mc.isAdmin(r,e,t)},H.single("image"),async(r,e)=>{let{updateCourseController:t}=kh();await t.handle(r,e)});sr.delete("/:id",(r,e,t)=>{mc.isAdmin(r,e,t)},async(r,e)=>{let{deleteCourseController:t}=Oh();await t.handle(r,e)});import{Router as Ix}from"express";import{extendZodWithOpenApi as Px}from"@asteasolutions/zod-to-openapi";import yt from"zod";var bx=1;Px(yt);var Cx=yt.object({page:yt.coerce.number().min(1).default(bx),limit:yt.coerce.number().optional(),code:yt.string().optional(),title:yt.string().optional(),description:yt.string().optional(),notes:yt.string().optional(),orderBy:yt.enum(["asc","desc"]).default("desc")}),ga=class{constructor(e){this.etpRepository=e}async handle(e,t){let{page:i,limit:o,...s}=Cx.parse(e.query),n=o?o*i-o:void 0,[a,m]=await Promise.all([this.etpRepository.find({pagination:{offset:n,limit:o},filter:s}),this.etpRepository.count({filter:s})]),p=o?Math.max(Math.ceil(m/o),1):1;t.status(200).json({page:i,totalPages:p,offset:n,limit:o,etps:a})}};var ya=class{constructor(e){this.prisma=e}async create(e){let{leaderId:t,deputyLeaderId:i,secretaryId:o,memberIds:s,...n}=e;await this.prisma.$transaction(async a=>{let m=await a.eTP.create({data:n});await a.eTPLeader.create({data:{etpId:m.id,researcherId:t}}),await a.eTPDeputy.create({data:{etpId:m.id,researcherId:i}}),await a.eTPSecretary.create({data:{etpId:m.id,researcherId:o}}),await a.eTP.update({where:{id:m.id},data:{members:{connect:s.map(p=>({id:p}))}}})})}async update(e){let{leaderId:t,deputyLeaderId:i,secretaryId:o,memberIds:s,...n}=e;await this.prisma.$transaction(async a=>{await a.eTP.update({where:{id:e.id},data:n}),await this.updateLeader(a,e.id,t),await this.updateDeputyLeader(a,e.id,i),await this.updateSecretary(a,e.id,o),await this.updateMembers(a,e.id,s)})}async updateLeader(e,t,i){i!==void 0&&(await e.eTPLeader.deleteMany({where:{etpId:t}}),i&&await e.eTPLeader.create({data:{etpId:t,researcherId:i}}))}async updateDeputyLeader(e,t,i){i!==void 0&&(await e.eTPDeputy.deleteMany({where:{etpId:t}}),i&&await e.eTPDeputy.create({data:{etpId:t,researcherId:i}}))}async updateSecretary(e,t,i){i!==void 0&&(await e.eTPSecretary.deleteMany({where:{etpId:t}}),i&&await e.eTPSecretary.create({data:{etpId:t,researcherId:i}}))}async updateMembers(e,t,i){i!==void 0&&await e.eTP.update({where:{id:t},data:{members:{set:i.map(o=>({id:o}))}}})}async deleteById(e){await this.prisma.eTP.delete({where:{id:e}})}async find({pagination:{offset:e,limit:t},filter:{code:i,title:o,description:s,notes:n,orderBy:a}}){let m={},p=[];return i&&p.push({code:{contains:i,mode:"insensitive"}}),o&&p.push({title:{contains:o,mode:"insensitive"}}),s&&p.push({description:{contains:s,mode:"insensitive"}}),n&&p.push({notes:{contains:n,mode:"insensitive"}}),p.length>0&&(m.OR=p),await this.prisma.eTP.findMany({where:m,include:{leader:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},deputyLeader:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},secretary:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},members:{include:{user:{omit:{passwordHash:!0}}}}},orderBy:{updatedAt:a},skip:e,take:t})}async findById(e){return await this.prisma.eTP.findFirst({where:{id:e},include:{leader:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},deputyLeader:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},secretary:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},members:{include:{user:{omit:{passwordHash:!0}}}}}})}async findByCode(e){return await this.prisma.eTP.findFirst({where:{code:e},include:{leader:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},deputyLeader:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},secretary:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},members:{include:{user:{omit:{passwordHash:!0}}}}}})}async count({filter:{code:e,title:t,description:i,notes:o}}){let s={},n=[];return e&&n.push({code:{contains:e,mode:"insensitive"}}),t&&n.push({title:{contains:t,mode:"insensitive"}}),i&&n.push({description:{contains:i,mode:"insensitive"}}),o&&n.push({notes:{contains:o,mode:"insensitive"}}),n.length>0&&(s.OR=n),await this.prisma.eTP.count({where:s})}};function Wr(){return new ya(O)}function Bh(){return{createETPController:new eo(Wr())}}function qh(){return{findETPsController:new ga(Wr())}}function Nh(){return{findETPByIdController:new ro(Wr())}}function Gh(){return{updateETPController:new oo(Wr())}}function _h(){return{deleteETPController:new to(Wr())}}var nr=Ix(),{authMiddleware:pc}=K();nr.post("/",(r,e,t)=>{pc.isAdmin(r,e,t)},async(r,e)=>{let{createETPController:t}=Bh();await t.handle(r,e)});nr.get("/",async(r,e)=>{let{findETPsController:t}=qh();await t.handle(r,e)});nr.get("/:id",async(r,e)=>{let{findETPByIdController:t}=Nh();await t.handle(r,e)});nr.put("/:id",(r,e,t)=>{pc.isAdmin(r,e,t)},async(r,e)=>{let{updateETPController:t}=Gh();await t.handle(r,e)});nr.delete("/:id",(r,e,t)=>{pc.isAdmin(r,e,t)},async(r,e)=>{let{deleteETPController:t}=_h();await t.handle(r,e)});import{Router as Tx}from"express";var fa=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.event.create({data:e})}async update(e){await this.prisma.event.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.event.delete({where:{id:e}})}async find({pagination:{offset:e,limit:t},filter:{title:i,status:o,format:s,orderBy:n}}){let a={},m=[];return o&&(a.status=o),s&&(a.format=s),i&&m.push({title:{contains:i,mode:"insensitive"}}),m.length>0&&(a.OR=m),await this.prisma.event.findMany({where:a,orderBy:{startDate:n},skip:e,take:t})}async findById(e){return await this.prisma.event.findFirst({where:{id:e}})}async count({filter:{title:e,status:t,format:i}}){let o={},s=[];return t&&(o.status=t),i&&(o.format=i),e&&s.push({title:{contains:e,mode:"insensitive"}}),s.length>0&&(o.OR=s),await this.prisma.event.count({where:o})}};function Hr(){return new fa(O)}function Lh(){return{createEventController:new no(Hr(),U())}}function Wh(){return{findEventsController:new lo(Hr())}}function Hh(){return{findEventByIdController:new mo(Hr())}}function $h(){return{updateEventController:new co(Hr(),U())}}function Vh(){return{deleteEventController:new ao(Hr())}}var ar=Tx(),{authMiddleware:dc}=K();ar.post("/",(r,e,t)=>{dc.isAdmin(r,e,t)},H.single("image"),async(r,e)=>{let{createEventController:t}=Lh();await t.handle(r,e)});ar.get("/",async(r,e)=>{let{findEventsController:t}=Wh();await t.handle(r,e)});ar.get("/:id",async(r,e)=>{let{findEventByIdController:t}=Hh();await t.handle(r,e)});ar.put("/:id",(r,e,t)=>{dc.isAdmin(r,e,t)},H.single("image"),async(r,e)=>{let{updateEventController:t}=$h();await t.handle(r,e)});ar.delete("/:id",(r,e,t)=>{dc.isAdmin(r,e,t)},async(r,e)=>{let{deleteEventController:t}=Vh();await t.handle(r,e)});import{Router as Ax}from"express";var ha=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.inMemoriam.create({data:e})}async update(e){await this.prisma.inMemoriam.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.inMemoriam.delete({where:{id:e}})}async find({pagination:{offset:e,limit:t},filter:{name:i,biography:o,role:s,orderBy:n}}){let a={},m=[];return s&&(a.role=s),i&&m.push({name:{contains:i,mode:"insensitive"}}),o&&m.push({biography:{contains:o,mode:"insensitive"}}),m.length>0&&(a.OR=m),await this.prisma.inMemoriam.findMany({where:a,orderBy:{updatedAt:n},skip:e,take:t})}async findById(e){return await this.prisma.inMemoriam.findFirst({where:{id:e}})}async findByRole(e){return await this.prisma.inMemoriam.findMany({where:{role:e}})}async count({filter:{name:e,biography:t,role:i}}){let o={},s=[];return i&&(o.role=i),e&&s.push({name:{contains:e,mode:"insensitive"}}),t&&s.push({biography:{contains:t,mode:"insensitive"}}),s.length>0&&(o.OR=s),await this.prisma.inMemoriam.count({where:o})}};function mr(){return new ha(O)}function zh(){return{createInMemoriamController:new uo(mr(),U())}}function Zh(){return{findInMemoriamsController:new Ro(mr())}}function Kh(){return{findInMemoriamByIdController:new yo(mr())}}function Jh(){return{findInMemoriamByRoleController:new ho(mr())}}function Yh(){return{updateInMemoriamController:new Po(mr(),U())}}function Xh(){return{deleteInMemoriamController:new go(mr(),U())}}var Wt=Ax(),{authMiddleware:Ra}=K();Wt.post("/",(r,e,t)=>{Ra.isAdmin(r,e,t)},H.single("photo"),async(r,e)=>{let{createInMemoriamController:t}=zh();await t.handle(r,e)});Wt.get("/",async(r,e)=>{let{findInMemoriamsController:t}=Zh();await t.handle(r,e)});Wt.get("/:id",async(r,e)=>{let{findInMemoriamByIdController:t}=Kh();await t.handle(r,e)});Wt.get("/role/:role",(r,e,t)=>{Ra.isAdmin(r,e,t)},async(r,e)=>{let{findInMemoriamByRoleController:t}=Jh();await t.handle(r,e)});Wt.put("/:id",(r,e,t)=>{Ra.isAdmin(r,e,t)},H.single("photo"),async(r,e)=>{let{updateInMemoriamController:t}=Yh();await t.handle(r,e)});Wt.delete("/:id",(r,e,t)=>{Ra.isAdmin(r,e,t)},async(r,e)=>{let{deleteInMemoriamController:t}=Xh();await t.handle(r,e)});import{Router as Sx}from"express";var lc=Sx();lc.get("/",(r,e)=>{e.status(200).json({message:"Rede CT"})});import{Router as vx}from"express";var Pa=class{constructor(e){this.prisma=e}async create(e){await this.prisma.internationalScientificCongress.create({data:e})}async update(e){await this.prisma.internationalScientificCongress.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.internationalScientificCongress.delete({where:{id:e}})}async find({pagination:{offset:e,limit:t},filter:{title:i,edition:o,location:s,orderBy:n}}){let a={},m=[];return o&&m.push({edition:{equals:o}}),i&&m.push({title:{contains:i,mode:"insensitive"}}),s&&m.push({location:{contains:s,mode:"insensitive"}}),m.length>0&&(a.OR=m),await this.prisma.internationalScientificCongress.findMany({where:a,include:{partners:!0,galleries:!0},orderBy:{startDate:n},skip:e,take:t})}async findById(e){return await this.prisma.internationalScientificCongress.findFirst({where:{id:e},include:{partners:!0,galleries:!0}})}async findByEdition(e){return await this.prisma.internationalScientificCongress.findMany({where:{edition:e},include:{partners:!0,galleries:!0}})}async count({filter:{title:e,edition:t,location:i}}){let o={},s=[];return t&&s.push({edition:{equals:t}}),e&&s.push({title:{contains:e,mode:"insensitive"}}),i&&s.push({location:{contains:i,mode:"insensitive"}}),s.length>0&&(o.OR=s),await this.prisma.internationalScientificCongress.count({where:o})}};function Ze(){return new Pa(O)}function Qh(){return{createInternationalScientificCongressController:new vo(Ze())}}function eR(){return{findInternationalScientificCongressesController:new ko(Ze())}}function tR(){return{findInternationalScientificCongressByIdController:new Fo(Ze())}}function rR(){return{findInternationalScientificCongressByEditionController:new jo(Ze())}}function iR(){return{updateInternationalScientificCongressController:new Oo(Ze())}}function oR(){return{deleteInternationalScientificCongressController:new Uo(Ze())}}import{extendZodWithOpenApi as xx}from"@asteasolutions/zod-to-openapi";import cc from"zod";xx(cc);var Mx=cc.object({id:cc.uuid()}),ba=class{constructor(e){this.internationalScientificCongressGalleryRepository=e}async handle(e,t){let{id:i}=Mx.parse({id:e.params.id}),o=await this.internationalScientificCongressGalleryRepository.findById(i);if(!o)throw new d("A imagem da galeria n\xE3o existe.");return t.status(200).json(o)}};var Ca=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.internationalScientificCongressGalleryItem.create({data:e})}async update(e){await this.prisma.internationalScientificCongressGalleryItem.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.internationalScientificCongressGalleryItem.delete({where:{id:e}})}async findByCongressId({pagination:{offset:e,limit:t},filter:{congressId:i,caption:o}}){let s={congressId:i};return o&&(s.caption={contains:o,mode:"insensitive"}),await this.prisma.internationalScientificCongressGalleryItem.findMany({where:s,skip:e,take:t})}async findById(e){return await this.prisma.internationalScientificCongressGalleryItem.findFirst({where:{id:e}})}async count({filter:{congressId:e,caption:t}}){let i={congressId:e};return t&&(i.caption={contains:t,mode:"insensitive"}),await this.prisma.internationalScientificCongressGalleryItem.count({where:i})}};function $r(){return new Ca(O)}function sR(){return{createInternationalScientificCongressGalleryController:new bo($r(),Ze(),U())}}function nR(){return{findInternationalScientificCongressGalleriesByCongressIdController:new To($r())}}function aR(){return{findInternationalScientificCongressGalleryByIdController:new ba($r())}}function mR(){return{updateInternationalScientificCongressGalleryController:new Ao($r(),U())}}function pR(){return{deleteInternationalScientificCongressGalleryController:new Co($r())}}import{extendZodWithOpenApi as Ex}from"@asteasolutions/zod-to-openapi";import uc from"zod";Ex(uc);var wx=uc.object({id:uc.uuid()}),Ia=class{constructor(e){this.internationalScientificCongressPartnerRepository=e}async handle(e,t){let{id:i}=wx.parse({id:e.params.id}),o=await this.internationalScientificCongressPartnerRepository.findById(i);if(!o)throw new d("O parceiro n\xE3o existe.");return t.status(200).json(o)}};var Ta=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.internationalScientificCongressPartner.create({data:e})}async update(e){await this.prisma.internationalScientificCongressPartner.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.internationalScientificCongressPartner.delete({where:{id:e}})}async findByCongressId({pagination:{offset:e,limit:t},filter:{congressId:i,name:o}}){let s={congressId:i};return o&&(s.name={contains:o,mode:"insensitive"}),await this.prisma.internationalScientificCongressPartner.findMany({where:s,skip:e,take:t})}async findById(e){return await this.prisma.internationalScientificCongressPartner.findFirst({where:{id:e}})}async count(e){let t={congressId:e.filter.congressId};return e.filter.name&&(t.name={contains:e.filter.name,mode:"insensitive"}),await this.prisma.internationalScientificCongressPartner.count({where:t})}};function Vr(){return new Ta(O)}function dR(){return{createInternationalScientificCongressPartnerController:new So(Vr(),Ze(),U())}}function lR(){return{findInternationalScientificCongressPartnersByCongressIdController:new Eo(Vr())}}function cR(){return{findInternationalScientificCongressPartnerByIdController:new Ia(Vr())}}function uR(){return{updateInternationalScientificCongressPartnerController:new wo(Vr(),U())}}function gR(){return{deleteInternationalScientificCongressPartnerController:new xo(Vr())}}var ye=vx(),{authMiddleware:ft}=K();ye.post("/",(r,e,t)=>{ft.isAdmin(r,e,t)},async(r,e)=>{let{createInternationalScientificCongressController:t}=Qh();await t.handle(r,e)});ye.get("/",async(r,e)=>{let{findInternationalScientificCongressesController:t}=eR();await t.handle(r,e)});ye.get("/:id",async(r,e)=>{let{findInternationalScientificCongressByIdController:t}=tR();await t.handle(r,e)});ye.get("/edition/:edition",async(r,e)=>{let{findInternationalScientificCongressByEditionController:t}=rR();await t.handle(r,e)});ye.put("/:id",(r,e,t)=>{ft.isAdmin(r,e,t)},async(r,e)=>{let{updateInternationalScientificCongressController:t}=iR();await t.handle(r,e)});ye.delete("/:id",(r,e,t)=>{ft.isAdmin(r,e,t)},async(r,e)=>{let{deleteInternationalScientificCongressController:t}=oR();await t.handle(r,e)});ye.post("/:id/gallery",(r,e,t)=>{ft.isAdmin(r,e,t)},H.single("image"),async(r,e)=>{let{createInternationalScientificCongressGalleryController:t}=sR();await t.handle(r,e)});ye.get("/:id/gallery",async(r,e)=>{let{findInternationalScientificCongressGalleriesByCongressIdController:t}=nR();await t.handle(r,e)});ye.get("/gallery/:id",async(r,e)=>{let{findInternationalScientificCongressGalleryByIdController:t}=aR();await t.handle(r,e)});ye.put("/gallery/:id",(r,e,t)=>{ft.isAdmin(r,e,t)},H.single("image"),async(r,e)=>{let{updateInternationalScientificCongressGalleryController:t}=mR();await t.handle(r,e)});ye.delete("/gallery/:id",(r,e,t)=>{ft.isAdmin(r,e,t)},async(r,e)=>{let{deleteInternationalScientificCongressGalleryController:t}=pR();await t.handle(r,e)});ye.post("/:id/partner",(r,e,t)=>{ft.isAdmin(r,e,t)},H.single("logo"),async(r,e)=>{let{createInternationalScientificCongressPartnerController:t}=dR();await t.handle(r,e)});ye.get("/:id/partner",async(r,e)=>{let{findInternationalScientificCongressPartnersByCongressIdController:t}=lR();await t.handle(r,e)});ye.get("/partner/:id",async(r,e)=>{let{findInternationalScientificCongressPartnerByIdController:t}=cR();await t.handle(r,e)});ye.put("/partner/:id",(r,e,t)=>{ft.isAdmin(r,e,t)},H.single("logo"),async(r,e)=>{let{updateInternationalScientificCongressPartnerController:t}=uR();await t.handle(r,e)});ye.delete("/partner/:id",(r,e,t)=>{ft.isAdmin(r,e,t)},async(r,e)=>{let{deleteInternationalScientificCongressPartnerController:t}=gR();await t.handle(r,e)});import{Router as Dx}from"express";import{extendZodWithOpenApi as Ux}from"@asteasolutions/zod-to-openapi";import pr from"zod";var jx=1;Ux(pr);var Fx=pr.object({page:pr.coerce.number().min(1).default(jx),limit:pr.coerce.number().optional(),title:pr.string().optional(),country:pr.string().optional(),orderBy:pr.enum(["asc","desc"]).default("desc")}),Aa=class{constructor(e){this.lawRepository=e}async handle(e,t){let{page:i,limit:o,...s}=Fx.parse(e.query),n=o?o*i-o:void 0,[a,m]=await Promise.all([this.lawRepository.find({pagination:{offset:n,limit:o},filter:s}),this.lawRepository.count({filter:s})]),p=o?Math.max(Math.ceil(m/o),1):1;t.status(200).json({page:i,totalPages:p,offset:n,limit:o,laws:a})}};var Sa=class{constructor(e){this.prisma=e}async create(e){await this.prisma.law.create({data:{...e}})}async update(e){let{id:t,...i}=e;await this.prisma.law.update({where:{id:t},data:i})}async deleteById(e){await this.prisma.law.delete({where:{id:e}})}async find({pagination:{offset:e,limit:t},filter:{title:i,country:o,orderBy:s}}){let n={};return i&&(n.title={contains:i,mode:"insensitive"}),o&&(n.country={contains:o,mode:"insensitive"}),await this.prisma.law.findMany({where:n,orderBy:{updatedAt:s??"desc"},skip:e,take:t})}async findById(e){return await this.prisma.law.findFirst({where:{id:e}})}async count({filter:{title:e,country:t}}){let i={};return e&&(i.title={contains:e,mode:"insensitive"}),t&&(i.country={contains:t,mode:"insensitive"}),await this.prisma.law.count({where:i})}};function zr(){return new Sa(O)}function yR(){return{createLawController:new Bo(zr())}}function fR(){return{findLawsController:new Aa(zr())}}function hR(){return{findLawByIdController:new No(zr())}}function RR(){return{updateLawController:new _o(zr())}}function PR(){return{deleteLawController:new qo(zr())}}var dr=Dx(),{authMiddleware:gc}=K();dr.post("/",(r,e,t)=>{gc.isAdmin(r,e,t)},async(r,e)=>{let{createLawController:t}=yR();await t.handle(r,e)});dr.get("/",async(r,e)=>{let{findLawsController:t}=fR();await t.handle(r,e)});dr.get("/:id",async(r,e)=>{let{findLawByIdController:t}=hR();await t.handle(r,e)});dr.put("/:id",(r,e,t)=>{gc.isAdmin(r,e,t)},async(r,e)=>{let{updateLawController:t}=RR();await t.handle(r,e)});dr.delete("/:id",(r,e,t)=>{gc.isAdmin(r,e,t)},async(r,e)=>{let{deleteLawController:t}=PR();await t.handle(r,e)});import{Router as qx}from"express";import{extendZodWithOpenApi as kx}from"@asteasolutions/zod-to-openapi";import Zr from"zod";var Ox=1;kx(Zr);var Bx=Zr.object({page:Zr.coerce.number().min(1).default(Ox),limit:Zr.coerce.number().optional(),role:Zr.string().optional(),orderBy:Zr.enum(["asc","desc"]).default("desc")}),xa=class{constructor(e){this.legitimatorCommitteeMemberRepository=e}async handle(e,t){let{page:i,limit:o,...s}=Bx.parse(e.query),n=o?o*i-o:void 0,[a,m]=await Promise.all([this.legitimatorCommitteeMemberRepository.find({pagination:{offset:n,limit:o},filter:s}),this.legitimatorCommitteeMemberRepository.count({filter:s})]),p=o?Math.max(Math.ceil(m/o),1):1;t.status(200).json({page:i,totalPages:p,offset:n,limit:o,members:a})}};var Ma=class{constructor(e){this.prisma=e}async create(e){await this.prisma.legitimatorCommitteeMember.create({data:{...e,order:e.order??0}})}async update(e){let{id:t,...i}=e;await this.prisma.legitimatorCommitteeMember.update({where:{id:t},data:i})}async deleteById(e){await this.prisma.legitimatorCommitteeMember.delete({where:{id:e}})}async find({pagination:{offset:e,limit:t},filter:{role:i,orderBy:o}}){let s={};return i&&(s.role={contains:i,mode:"insensitive"}),await this.prisma.legitimatorCommitteeMember.findMany({where:s,include:{user:{omit:{passwordHash:!0}}},orderBy:{updatedAt:o},skip:e,take:t})}async findById(e){return await this.prisma.legitimatorCommitteeMember.findFirst({where:{id:e},include:{user:{omit:{passwordHash:!0}}}})}async count({filter:{role:e}}){let t={};return e&&(t.role={contains:e,mode:"insensitive"}),await this.prisma.legitimatorCommitteeMember.count({where:t})}};function Kr(){return new Ma(O)}function bR(){return{createLegitimatorCommitteeMemberController:new Lo(Kr())}}function CR(){return{findLegitimatorCommitteeMembersController:new xa(Kr())}}function IR(){return{findLegitimatorCommitteeMemberByIdController:new Ho(Kr())}}function TR(){return{updateLegitimatorCommitteeMemberController:new Vo(Kr())}}function AR(){return{deleteLegitimatorCommitteeMemberController:new Wo(Kr())}}var lr=qx(),{authMiddleware:yc}=K();lr.post("/",(r,e,t)=>{yc.isAdmin(r,e,t)},async(r,e)=>{let{createLegitimatorCommitteeMemberController:t}=bR();await t.handle(r,e)});lr.get("/",async(r,e)=>{let{findLegitimatorCommitteeMembersController:t}=CR();await t.handle(r,e)});lr.get("/:id",async(r,e)=>{let{findLegitimatorCommitteeMemberByIdController:t}=IR();await t.handle(r,e)});lr.put("/:id",(r,e,t)=>{yc.isAdmin(r,e,t)},async(r,e)=>{let{updateLegitimatorCommitteeMemberController:t}=TR();await t.handle(r,e)});lr.delete("/:id",(r,e,t)=>{yc.isAdmin(r,e,t)},async(r,e)=>{let{deleteLegitimatorCommitteeMemberController:t}=AR();await t.handle(r,e)});import{Router as Lx}from"express";import{extendZodWithOpenApi as Nx}from"@asteasolutions/zod-to-openapi";import cr from"zod";var Gx=1;Nx(cr);var _x=cr.object({page:cr.coerce.number().min(1).default(Gx),limit:cr.coerce.number().optional(),name:cr.string().optional(),description:cr.string().optional(),orderBy:cr.enum(["asc","desc"]).default("desc")}),Ea=class{constructor(e){this.managementTeamRepository=e}async handle(e,t){let{page:i,limit:o,...s}=_x.parse(e.query),n=o?o*i-o:void 0,[a,m]=await Promise.all([this.managementTeamRepository.find({pagination:{offset:n,limit:o},filter:s}),this.managementTeamRepository.count({filter:s})]),p=o?Math.max(Math.ceil(m/o),1):1;t.status(200).json({page:i,totalPages:p,offset:n,limit:o,teams:a})}};var wa=class{constructor(e){this.prisma=e}async create(e){let{members:t,...i}=e;await this.prisma.$transaction(async o=>{let s=await o.managementTeam.create({data:i});return await o.managementTeamMember.createMany({data:t.map(({userId:n,role:a,order:m})=>({teamId:s.id,userId:n,role:a,order:m??0}))}),s})}async update(e){let{members:t,...i}=e;await this.prisma.$transaction(async o=>{let s=await o.managementTeam.update({where:{id:e.id},data:i});return t!==void 0&&(await o.managementTeamMember.deleteMany({where:{teamId:e.id}}),t.length>0&&await o.managementTeamMember.createMany({data:t.map(({userId:n,role:a,order:m})=>({teamId:e.id,userId:n,role:a,order:m??0}))})),s})}async deleteById(e){await this.prisma.managementTeam.delete({where:{id:e}})}async find({filter:{name:e,description:t,orderBy:i},pagination:{offset:o,limit:s}}){let n={},a=[];return e&&a.push({name:{contains:e,mode:"insensitive"}}),t&&a.push({description:{contains:t,mode:"insensitive"}}),a.length>0&&(n.OR=a),await this.prisma.managementTeam.findMany({where:n,include:{members:{include:{user:{omit:{passwordHash:!0}}},orderBy:{order:"asc"}}},orderBy:{updatedAt:i},skip:o,take:s})}async findById(e){return await this.prisma.managementTeam.findFirst({where:{id:e},include:{members:{include:{user:{omit:{passwordHash:!0}}},orderBy:{order:"asc"}}}})}async findByName(e){return await this.prisma.managementTeam.findFirst({where:{name:e},include:{members:{include:{user:{omit:{passwordHash:!0}}},orderBy:{order:"asc"}}}})}async count({filter:{name:e,description:t}}){let i={},o=[];return e&&o.push({name:{contains:e,mode:"insensitive"}}),t&&o.push({description:{contains:t,mode:"insensitive"}}),o.length>0&&(i.OR=o),await this.prisma.managementTeam.count({where:i})}};function Jr(){return new wa(O)}function SR(){return{createManagementTeamController:new zo(Jr())}}function xR(){return{findManagementTeamsController:new Ea(Jr())}}function MR(){return{findManagementTeamByIdController:new Ko(Jr())}}function ER(){return{updateManagementTeamController:new Yo(Jr())}}function wR(){return{deleteManagementTeamController:new Zo(Jr())}}var ur=Lx(),{authMiddleware:fc}=K();ur.post("/",(r,e,t)=>{fc.isAdmin(r,e,t)},async(r,e)=>{let{createManagementTeamController:t}=SR();await t.handle(r,e)});ur.get("/",async(r,e)=>{let{findManagementTeamsController:t}=xR();await t.handle(r,e)});ur.get("/:id",async(r,e)=>{let{findManagementTeamByIdController:t}=MR();await t.handle(r,e)});ur.put("/:id",(r,e,t)=>{fc.isAdmin(r,e,t)},async(r,e)=>{let{updateManagementTeamController:t}=ER();await t.handle(r,e)});ur.delete("/:id",(r,e,t)=>{fc.isAdmin(r,e,t)},async(r,e)=>{let{deleteManagementTeamController:t}=wR();await t.handle(r,e)});import{Router as $x}from"express";var va=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.meeting.create({data:e})}async update(e){await this.prisma.meeting.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.meeting.delete({where:{id:e}})}async find({pagination:{offset:e,limit:t},filter:{title:i,format:o,status:s,orderBy:n}}){let a={},m=[];return o&&(a.format=o),s&&(a.status=s),i&&m.push({title:{contains:i,mode:"insensitive"}}),m.length>0&&(a.OR=m),await this.prisma.meeting.findMany({where:a,include:{minutes:!0},orderBy:{scheduledAt:n},skip:e,take:t})}async findById(e){return await this.prisma.meeting.findFirst({where:{id:e},include:{minutes:!0}})}async findByStatus(e){return await this.prisma.meeting.findMany({where:{status:e},include:{minutes:!0}})}async count({filter:{title:e,format:t,status:i}}){let o={},s=[];return t&&(o.format=t),i&&(o.status=i),e&&s.push({title:{contains:e,mode:"insensitive"}}),s.length>0&&(o.OR=s),await this.prisma.meeting.count({where:o})}};function ht(){return new va(O)}function vR(){return{createMeetingController:new ts(ht())}}function UR(){return{findMeetingsController:new ns(ht())}}function jR(){return{findMeetingByIdController:new is(ht())}}function FR(){return{findMeetingByStatusController:new ss(ht())}}function DR(){return{updateMeetingController:new as(ht())}}function kR(){return{deleteMeetingController:new rs(ht())}}import{extendZodWithOpenApi as Wx}from"@asteasolutions/zod-to-openapi";import hc from"zod";Wx(hc);var Hx=hc.object({id:hc.uuid()}),Ua=class{constructor(e,t){this.meetingMinuteRepository=e;this.firebaseStorageService=t}async handle(e,t){let{id:i}=Hx.parse(e.params),o=await this.meetingMinuteRepository.findByMeetingId(i);if(!o)throw new d("A ata n\xE3o existe para esta reuni\xE3o.");return o.documentUrl&&await this.firebaseStorageService.deleteFile({fileUrl:o.documentUrl}),await this.meetingMinuteRepository.deleteByMeetingId(o.id),t.sendStatus(200)}};var ja=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.meetingMinute.create({data:e,include:{meeting:!0}})}async update(e){await this.prisma.meetingMinute.update({where:{id:e.id},data:e})}async deleteByMeetingId(e){await this.prisma.meetingMinute.delete({where:{id:e}})}async findByMeetingId(e){return await this.prisma.meetingMinute.findFirst({where:{meetingId:e},include:{meeting:!0}})}};function vi(){return new ja(O)}function OR(){return{createMeetingMinuteController:new Xo(vi(),ht(),U())}}function BR(){return{findMeetingMinuteByMeetingIdController:new Qo(vi())}}function qR(){return{updateMeetingMinuteByMeetingIdController:new es(vi(),U())}}function NR(){return{deleteMeetingMinuteByMeetingIdController:new Ua(vi(),U())}}var Be=$x(),{authMiddleware:Yr}=K();Be.post("/",(r,e,t)=>{Yr.isAdmin(r,e,t)},async(r,e)=>{let{createMeetingController:t}=vR();await t.handle(r,e)});Be.get("/",async(r,e)=>{let{findMeetingsController:t}=UR();await t.handle(r,e)});Be.get("/:id",async(r,e)=>{let{findMeetingByIdController:t}=jR();await t.handle(r,e)});Be.get("/status/:status",async(r,e)=>{let{findMeetingByStatusController:t}=FR();await t.handle(r,e)});Be.put("/:id",(r,e,t)=>{Yr.isAdmin(r,e,t)},async(r,e)=>{let{updateMeetingController:t}=DR();await t.handle(r,e)});Be.delete("/:id",(r,e,t)=>{Yr.isAdmin(r,e,t)},async(r,e)=>{let{deleteMeetingController:t}=kR();await t.handle(r,e)});Be.post("/:id/minute",(r,e,t)=>{Yr.isAdmin(r,e,t)},H.single("document"),async(r,e)=>{let{createMeetingMinuteController:t}=OR();await t.handle(r,e)});Be.get("/:id/minute",async(r,e)=>{let{findMeetingMinuteByMeetingIdController:t}=BR();await t.handle(r,e)});Be.put("/:id/minute",(r,e,t)=>{Yr.isAdmin(r,e,t)},H.single("document"),async(r,e)=>{let{updateMeetingMinuteByMeetingIdController:t}=qR();await t.handle(r,e)});Be.delete("/:id/minute",(r,e,t)=>{Yr.isAdmin(r,e,t)},async(r,e)=>{let{deleteMeetingMinuteByMeetingIdController:t}=NR();await t.handle(r,e)});import{Router as Vx}from"express";var Fa=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.museum.create({data:e})}async update(e){await this.prisma.museum.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.museum.delete({where:{id:e}})}async find({pagination:e,filter:{name:t,city:i,state:o,country:s,orderBy:n}}){let a={},m=[];return t&&m.push({name:{contains:t,mode:"insensitive"}}),i&&m.push({city:{contains:i,mode:"insensitive"}}),o&&m.push({state:{contains:o,mode:"insensitive"}}),s&&m.push({country:{contains:s,mode:"insensitive"}}),m.length>0&&(a.OR=m),await this.prisma.museum.findMany({where:a,orderBy:{updatedAt:n},skip:e?.offset,take:e?.limit})}async findById(e){return await this.prisma.museum.findFirst({where:{id:e}})}async count({filter:{name:e,city:t,state:i,country:o}}){let s={},n=[];return e&&n.push({name:{contains:e,mode:"insensitive"}}),t&&n.push({city:{contains:t,mode:"insensitive"}}),i&&n.push({state:{contains:i,mode:"insensitive"}}),o&&n.push({country:{contains:o,mode:"insensitive"}}),n.length>0&&(s.OR=n),await this.prisma.museum.count({where:s})}};function Xr(){return new Fa(O)}function GR(){return{createMuseumController:new ms(Xr(),U())}}function _R(){return{findMuseumsController:new cs(Xr())}}function LR(){return{findMuseumByIdController:new ds(Xr())}}function WR(){return{updateMuseumController:new us(Xr(),U())}}function HR(){return{deleteMuseumController:new ps(Xr(),U())}}var gr=Vx(),{authMiddleware:Rc}=K();gr.post("/",(r,e,t)=>{Rc.isAdmin(r,e,t)},H.single("logo"),async(r,e)=>{let{createMuseumController:t}=GR();await t.handle(r,e)});gr.get("/",async(r,e)=>{let{findMuseumsController:t}=_R();await t.handle(r,e)});gr.get("/:id",async(r,e)=>{let{findMuseumByIdController:t}=LR();await t.handle(r,e)});gr.put("/:id",(r,e,t)=>{Rc.isAdmin(r,e,t)},H.single("logo"),async(r,e)=>{let{updateMuseumController:t}=WR();await t.handle(r,e)});gr.delete("/:id",(r,e,t)=>{Rc.isAdmin(r,e,t)},async(r,e)=>{let{deleteMuseumController:t}=HR();await t.handle(r,e)});import{Router as eM}from"express";import{extendZodWithOpenApi as zx}from"@asteasolutions/zod-to-openapi";import Pc from"zod";zx(Pc);var Zx=Pc.object({id:Pc.string()}),Da=class{constructor(e,t){this.newsRepository=e;this.firebaseStorageService=t}async handle(e,t){let{id:i}=Zx.parse(e.params),o=e.user.id,s=await this.newsRepository.findById(i);if(!s)throw new d("Not\xEDcia n\xE3o encontrada.");if(s.author.id!==o)throw new je("Sem permiss\xE3o.");await Promise.all([this.newsRepository.delete(i),this.firebaseStorageService.deleteFile({fileUrl:s.imageUrl})]),t.sendStatus(200)}};import{extendZodWithOpenApi as Kx}from"@asteasolutions/zod-to-openapi";import Qr from"zod";var Jx=5,$R=1024,Yx=$R*$R,Xx=Jx*Yx;Kx(Qr);var Qx=Qr.object({id:Qr.string(),title:Qr.string().min(1),content:Qr.string().min(1),image:Qr.any().optional().refine(r=>!r||typeof r=="object"&&typeof r.mimetype=="string"&&r.mimetype.startsWith("image/")&&typeof r.size=="number"&&r.size<=Xx,"A imagem deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.")}),ka=class{constructor(e,t){this.newsRepository=e;this.firebaseStorageService=t}async handle(e,t){let{id:i,title:o,content:s,image:n}=Qx.parse({id:e.params.id,image:e.file,...e.body}),a=await this.newsRepository.findById(i);if(!a)throw new d("Not\xEDcia n\xE3o encontrada.");let m=e.user.id;if(a.author.id!==m)throw new je("Sem permiss\xE3o.");let p=a.imageUrl||"";n&&a.imageUrl&&(p=await this.firebaseStorageService.updateFile({file:n,folder:M.NEWS,id:i,fileUrl:a.imageUrl}));let h=await this.newsRepository.update({id:i,title:o,content:s,imageUrl:p});t.status(200).json(h)}};function VR(){return{createNewsController:new gs(ut(),U())}}function zR(){return{findAllNewsController:new hs(ut())}}function ZR(){return{findNewsByIdController:new fs(ut())}}function KR(){return{findNewsByAuthorIdController:new ys(ut())}}function JR(){return{updateNewsController:new ka(ut(),U())}}function YR(){return{deleteNewsController:new Da(ut(),U())}}var Ht=eM(),{authMiddleware:bc}=K();Ht.post("/",(r,e,t)=>{bc.authenticated(r,e,t)},H.single("image"),async(r,e)=>{let{createNewsController:t}=VR();await t.handle(r,e)});Ht.get("/",async(r,e)=>{let{findAllNewsController:t}=zR();await t.handle(r,e)});Ht.get("/:id",async(r,e)=>{let{findNewsByIdController:t}=ZR();await t.handle(r,e)});Ht.get("/author/:id",async(r,e)=>{let{findNewsByAuthorIdController:t}=KR();await t.handle(r,e)});Ht.put("/:id",(r,e,t)=>{bc.authenticated(r,e,t)},H.single("image"),async(r,e)=>{let{updateNewsController:t}=JR();await t.handle(r,e)});Ht.delete("/:id",(r,e,t)=>{bc.authenticated(r,e,t)},async(r,e)=>{let{deleteNewsController:t}=YR();await t.handle(r,e)});import{Router as tM}from"express";var Oa=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.partner.create({data:e})}async update(e){await this.prisma.partner.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.partner.delete({where:{id:e}})}async find({pagination:{offset:e,limit:t},filter:{name:i,description:o,category:s,isActive:n,orderBy:a}}){let m={},p=[];return n!==void 0&&(m.isActive=n),i&&p.push({name:{contains:i,mode:"insensitive"}}),o&&p.push({description:{contains:o,mode:"insensitive"}}),s&&p.push({category:{contains:s,mode:"insensitive"}}),p.length>0&&(m.OR=p),await this.prisma.partner.findMany({where:m,orderBy:{updatedAt:a},skip:e,take:t})}async findById(e){return await this.prisma.partner.findFirst({where:{id:e}})}async count({filter:{name:e,description:t,category:i,isActive:o}}){let s={},n=[];return o!==void 0&&(s.isActive=o),e&&n.push({name:{contains:e,mode:"insensitive"}}),t&&n.push({description:{contains:t,mode:"insensitive"}}),i&&n.push({category:{contains:i,mode:"insensitive"}}),n.length>0&&(s.OR=n),await this.prisma.partner.count({where:s})}};function ei(){return new Oa(O)}function XR(){return{createPartnerController:new Rs(ei(),U())}}function QR(){return{findPartnersController:new Is(ei())}}function eP(){return{findPartnerByIdController:new bs(ei())}}function tP(){return{updatePartnerController:new Ts(ei(),U())}}function rP(){return{deletePartnerController:new Ps(ei(),U())}}var yr=tM(),{authMiddleware:Cc}=K();yr.post("/",(r,e,t)=>{Cc.isAdmin(r,e,t)},H.single("logo"),async(r,e)=>{let{createPartnerController:t}=XR();await t.handle(r,e)});yr.get("/",async(r,e)=>{let{findPartnersController:t}=QR();await t.handle(r,e)});yr.get("/:id",async(r,e)=>{let{findPartnerByIdController:t}=eP();await t.handle(r,e)});yr.put("/:id",(r,e,t)=>{Cc.isAdmin(r,e,t)},H.single("logo"),async(r,e)=>{let{updatePartnerController:t}=tP();await t.handle(r,e)});yr.delete("/:id",(r,e,t)=>{Cc.isAdmin(r,e,t)},async(r,e)=>{let{deletePartnerController:t}=rP();await t.handle(r,e)});import{Router as rM}from"express";function iP(){return{createPendencyController:new As(Pe(),Lt(),U())}}function oP(){return{findPendenciesController:new xs(Lt())}}function sP(){return{findPendencyByIdController:new Ms(Lt())}}function nP(){return{updatePendencyController:new Es(Lt(),U())}}function aP(){return{deletePendencyController:new Ss(Lt(),U())}}var fr=rM(),{authMiddleware:Ba}=K();fr.post("/:id",(r,e,t)=>{Ba.isAdmin(r,e,t)},H.single("document"),async(r,e)=>{let{createPendencyController:t}=iP();await t.handle(r,e)});fr.get("/",(r,e,t)=>{Ba.authenticated(r,e,t)},async(r,e)=>{let{findPendenciesController:t}=oP();await t.handle(r,e)});fr.get("/:id",async(r,e)=>{let{findPendencyByIdController:t}=sP();await t.handle(r,e)});fr.put("/:id",(r,e,t)=>{Ba.isAdmin(r,e,t)},H.single("document"),async(r,e)=>{let{updatePendencyController:t}=nP();await t.handle(r,e)});fr.delete("/:id",(r,e,t)=>{Ba.isAdmin(r,e,t)},async(r,e)=>{let{deletePendencyController:t}=aP();await t.handle(r,e)});import{Router as mM}from"express";import{extendZodWithOpenApi as iM}from"@asteasolutions/zod-to-openapi";import Rt from"zod";var oM=5,mP=1024,sM=mP*mP,nM=oM*sM;iM(Rt);var aM=Rt.object({title:Rt.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),description:Rt.string().optional(),startDate:Rt.coerce.date(),endDate:Rt.coerce.date(),contact:Rt.string().min(1,"Contato \xE9 obrigat\xF3rio."),registrationLink:Rt.url().optional(),image:Rt.any().refine(r=>!r||typeof r=="object"&&typeof r.mimetype=="string"&&r.mimetype.startsWith("image/")&&typeof r.size=="number"&&r.size<=nM,"A imagem deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.")}),qa=class{constructor(e,t){this.postGraduateProgramRepository=e;this.firebaseStorageService=t}async handle(e,t){let{title:i,description:o,startDate:s,endDate:n,contact:a,registrationLink:m,image:p}=aM.parse({...e.body,image:e.file}),h=await this.postGraduateProgramRepository.create({title:i,description:o,startDate:s,endDate:n,contact:a,registrationLink:m||void 0}),A=await this.firebaseStorageService.uploadFile({file:p,folder:M.POST_GRADUATE_PROGRAM,id:h.id});return await this.postGraduateProgramRepository.update({id:h.id,imageUrl:A}),t.sendStatus(201)}};var Na=class{constructor(e){this.prisma=e}async create({title:e,imageUrl:t,description:i,startDate:o,endDate:s,contact:n,registrationLink:a}){return await this.prisma.postGraduateProgram.create({data:{title:e,imageUrl:t,description:i,startDate:o,endDate:s,contact:n,registrationLink:a}})}async find({pagination:{offset:e,limit:t},filter:{description:i,orderBy:o,title:s,contact:n}}){let a={},m=[];return s&&m.push({title:{contains:s,mode:"insensitive"}}),i&&m.push({description:{contains:i,mode:"insensitive"}}),n&&m.push({contact:{contains:n,mode:"insensitive"}}),m.length>0&&(a.OR=m),await this.prisma.postGraduateProgram.findMany({where:a,orderBy:{updatedAt:o},skip:e,take:t})}async findById(e){return await this.prisma.postGraduateProgram.findFirst({where:{id:e}})}async update({id:e,title:t,imageUrl:i,description:o,startDate:s,endDate:n,contact:a,registrationLink:m}){await this.prisma.postGraduateProgram.update({where:{id:e},data:{title:t,imageUrl:i,description:o,startDate:s,endDate:n,contact:a,registrationLink:m}})}async deleteById(e){await this.prisma.postGraduateProgram.delete({where:{id:e}})}async count({filter:{description:e,title:t,contact:i}}){let o={},s=[];return t&&s.push({title:{contains:t,mode:"insensitive"}}),e&&s.push({description:{contains:e,mode:"insensitive"}}),i&&s.push({contact:{contains:i,mode:"insensitive"}}),s.length>0&&(o.OR=s),await this.prisma.postGraduateProgram.count({where:o})}};function ti(){return new Na(O)}function pP(){return{createPostGraduateProgramController:new qa(ti(),U())}}function dP(){return{findPostGraduateProgramsController:new js(ti())}}function lP(){return{findPostGraduateProgramByIdController:new Us(ti())}}function cP(){return{updatePostGraduateProgramController:new Fs(ti(),U())}}function uP(){return{deletePostGraduateProgramController:new vs(ti(),U())}}var hr=mM(),{authMiddleware:Ic}=K();hr.post("/",(r,e,t)=>{Ic.isAdmin(r,e,t)},H.single("image"),async(r,e)=>{let{createPostGraduateProgramController:t}=pP();await t.handle(r,e)});hr.get("/",async(r,e)=>{let{findPostGraduateProgramsController:t}=dP();await t.handle(r,e)});hr.get("/:id",async(r,e)=>{let{findPostGraduateProgramByIdController:t}=lP();await t.handle(r,e)});hr.put("/:id",(r,e,t)=>{Ic.isAdmin(r,e,t)},H.single("image"),async(r,e)=>{let{updatePostGraduateProgramController:t}=cP();await t.handle(r,e)});hr.delete("/:id",(r,e,t)=>{Ic.isAdmin(r,e,t)},async(r,e)=>{let{deletePostGraduateProgramController:t}=uP();await t.handle(r,e)});import{Router as pM}from"express";var Ga=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.redeCTHighlight.create({data:e})}async update(e){await this.prisma.redeCTHighlight.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.redeCTHighlight.delete({where:{id:e}})}async find({pagination:{offset:e,limit:t},filter:{type:i,description:o,orderBy:s}}){let n={},a=[];return i&&(n.type=i),o&&a.push({description:{contains:o,mode:"insensitive"}}),a.length>0&&(n.OR=a),await this.prisma.redeCTHighlight.findMany({where:n,include:{user:!0},orderBy:{updatedAt:s},skip:e,take:t})}async findById(e){return await this.prisma.redeCTHighlight.findFirst({where:{id:e},include:{user:!0}})}async count({filter:{type:e,description:t}}){let i={},o=[];return e&&(i.type=e),t&&o.push({description:{contains:t,mode:"insensitive"}}),o.length>0&&(i.OR=o),await this.prisma.redeCTHighlight.count({where:i})}};function ri(){return new Ga(O)}function gP(){return{createRedeCTHighlightController:new Ds(ri())}}function yP(){return{findRedeCTHighlightsController:new qs(ri())}}function fP(){return{findRedeCTHighlightByIdController:new Os(ri())}}function hP(){return{updateRedeCTHighlightController:new Ns(ri())}}function RP(){return{deleteRedeCTHighlightController:new ks(ri())}}var Rr=pM(),{authMiddleware:Tc}=K();Rr.post("/",(r,e,t)=>{Tc.isAdmin(r,e,t)},H.single("image"),async(r,e)=>{let{createRedeCTHighlightController:t}=gP();await t.handle(r,e)});Rr.get("/",async(r,e)=>{let{findRedeCTHighlightsController:t}=yP();await t.handle(r,e)});Rr.get("/:id",async(r,e)=>{let{findRedeCTHighlightByIdController:t}=fP();await t.handle(r,e)});Rr.put("/:id",(r,e,t)=>{Tc.isAdmin(r,e,t)},H.single("image"),async(r,e)=>{let{updateRedeCTHighlightController:t}=hP();await t.handle(r,e)});Rr.delete("/:id",(r,e,t)=>{Tc.isAdmin(r,e,t)},async(r,e)=>{let{deleteRedeCTHighlightController:t}=RP();await t.handle(r,e)});import{Router as uM}from"express";import{extendZodWithOpenApi as dM}from"@asteasolutions/zod-to-openapi";import ii from"zod";var lM=1;dM(ii);var cM=ii.object({page:ii.coerce.number().min(1).default(lM),limit:ii.coerce.number().optional(),role:ii.string().optional(),orderBy:ii.enum(["asc","desc"]).default("desc")}),_a=class{constructor(e){this.referenceCenterTeamMemberRepository=e}async handle(e,t){let{page:i,limit:o,...s}=cM.parse(e.query),n=o?o*i-o:void 0,[a,m]=await Promise.all([this.referenceCenterTeamMemberRepository.find({pagination:{offset:n,limit:o},filter:s}),this.referenceCenterTeamMemberRepository.count({filter:s})]),p=o?Math.max(Math.ceil(m/o),1):1;t.status(200).json({page:i,totalPages:p,offset:n,limit:o,members:a})}};var La=class{constructor(e){this.prisma=e}async create(e){await this.prisma.referenceCenterTeamMember.create({data:{...e}})}async update(e){let{id:t,...i}=e;await this.prisma.referenceCenterTeamMember.update({where:{id:t},data:i})}async deleteById(e){await this.prisma.referenceCenterTeamMember.delete({where:{id:e}})}async find({pagination:{offset:e,limit:t},filter:{role:i,orderBy:o}}){let s={};return i&&(s.role={contains:i,mode:"insensitive"}),await this.prisma.referenceCenterTeamMember.findMany({where:s,include:{user:{omit:{passwordHash:!0}}},orderBy:{updatedAt:o},skip:e,take:t})}async findById(e){return await this.prisma.referenceCenterTeamMember.findFirst({where:{id:e},include:{user:{omit:{passwordHash:!0}}}})}async count({filter:{role:e}}){let t={};return e&&(t.role={contains:e,mode:"insensitive"}),await this.prisma.referenceCenterTeamMember.count({where:t})}};function oi(){return new La(O)}function PP(){return{createReferenceCenterTeamMemberController:new Gs(oi())}}function bP(){return{findReferenceCenterTeamMembersController:new _a(oi())}}function CP(){return{findReferenceCenterTeamMemberByIdController:new Ls(oi())}}function IP(){return{updateReferenceCenterTeamMemberController:new Hs(oi())}}function TP(){return{deleteReferenceCenterTeamMemberController:new _s(oi())}}var Pr=uM(),{authMiddleware:Ac}=K();Pr.post("/",(r,e,t)=>{Ac.isAdmin(r,e,t)},async(r,e)=>{let{createReferenceCenterTeamMemberController:t}=PP();await t.handle(r,e)});Pr.get("/",async(r,e)=>{let{findReferenceCenterTeamMembersController:t}=bP();await t.handle(r,e)});Pr.get("/:id",async(r,e)=>{let{findReferenceCenterTeamMemberByIdController:t}=CP();await t.handle(r,e)});Pr.put("/:id",(r,e,t)=>{Ac.isAdmin(r,e,t)},async(r,e)=>{let{updateReferenceCenterTeamMemberController:t}=IP();await t.handle(r,e)});Pr.delete("/:id",(r,e,t)=>{Ac.isAdmin(r,e,t)},async(r,e)=>{let{deleteReferenceCenterTeamMemberController:t}=TP();await t.handle(r,e)});import{Router as gM}from"express";var Wa=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.regiment.create({data:e})}async update(e){await this.prisma.regiment.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.regiment.delete({where:{id:e}})}async find({pagination:{offset:e,limit:t},filter:{title:i,status:o,orderBy:s}}){let n={},a=[];return o&&(n.status=o),i&&a.push({title:{contains:i,mode:"insensitive"}}),a.length>0&&(n.OR=a),await this.prisma.regiment.findMany({where:n,orderBy:{updatedAt:s},skip:e,take:t})}async findById(e){return await this.prisma.regiment.findFirst({where:{id:e}})}async findByStatus(e){return await this.prisma.regiment.findMany({where:{status:e}})}async count({filter:{title:e,status:t}}){let i={},o=[];return t&&(i.status=t),e&&o.push({title:{contains:e,mode:"insensitive"}}),o.length>0&&(i.OR=o),await this.prisma.regiment.count({where:i})}};function br(){return new Wa(O)}function AP(){return{createRegimentController:new $s(br(),U())}}function SP(){return{findRegimentsController:new Js(br())}}function xP(){return{findRegimentByIdController:new zs(br())}}function MP(){return{findRegimentByStatusController:new Ks(br())}}function EP(){return{updateRegimentController:new Ys(br(),U())}}function wP(){return{deleteRegimentController:new Vs(br(),U())}}var $t=gM(),{authMiddleware:Sc}=K();$t.post("/",(r,e,t)=>{Sc.isAdmin(r,e,t)},H.single("document"),async(r,e)=>{let{createRegimentController:t}=AP();await t.handle(r,e)});$t.get("/",async(r,e)=>{let{findRegimentsController:t}=SP();await t.handle(r,e)});$t.get("/:id",async(r,e)=>{let{findRegimentByIdController:t}=xP();await t.handle(r,e)});$t.get("/status/:status",async(r,e)=>{let{findRegimentByStatusController:t}=MP();await t.handle(r,e)});$t.put("/:id",(r,e,t)=>{Sc.isAdmin(r,e,t)},H.single("document"),async(r,e)=>{let{updateRegimentController:t}=EP();await t.handle(r,e)});$t.delete("/:id",(r,e,t)=>{Sc.isAdmin(r,e,t)},async(r,e)=>{let{deleteRegimentController:t}=wP();await t.handle(r,e)});import{Router as PM}from"express";var Ha=class{constructor(e){this.prisma=e}async create(e){await this.prisma.regionalCongress.create({data:e})}async update(e){await this.prisma.regionalCongress.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.regionalCongress.delete({where:{id:e}})}async find({pagination:{offset:e,limit:t},filter:{title:i,edition:o,location:s,orderBy:n}}){let a={},m=[];return o&&m.push({edition:{equals:o}}),i&&m.push({title:{contains:i,mode:"insensitive"}}),s&&m.push({location:{contains:s,mode:"insensitive"}}),m.length>0&&(a.OR=m),await this.prisma.regionalCongress.findMany({where:a,include:{regionalCongressPartners:!0,regionalCongressGalleryItems:!0},orderBy:{startDate:n},skip:e,take:t})}async findById(e){return await this.prisma.regionalCongress.findFirst({where:{id:e},include:{regionalCongressPartners:!0,regionalCongressGalleryItems:!0}})}async findByEdition(e){return await this.prisma.regionalCongress.findMany({where:{edition:e},include:{regionalCongressPartners:!0,regionalCongressGalleryItems:!0}})}async count({filter:{title:e,edition:t,location:i}}){let o={},s=[];return t&&s.push({edition:{equals:t}}),e&&s.push({title:{contains:e,mode:"insensitive"}}),i&&s.push({location:{contains:i,mode:"insensitive"}}),s.length>0&&(o.OR=s),await this.prisma.regionalCongress.count({where:o})}};function Ke(){return new Ha(O)}function vP(){return{createRegionalCongressController:new pn(Ke())}}function UP(){return{findRegionalCongressesController:new gn(Ke())}}function jP(){return{findRegionalCongressByIdController:new cn(Ke())}}function FP(){return{findRegionalCongressByEditionController:new ln(Ke())}}function DP(){return{updateRegionalCongressController:new yn(Ke())}}function kP(){return{deleteRegionalCongressController:new dn(Ke())}}import{extendZodWithOpenApi as yM}from"@asteasolutions/zod-to-openapi";import xc from"zod";yM(xc);var fM=xc.object({id:xc.uuid("ID inv\xE1lido")}),$a=class{constructor(e){this.regionalCongressGalleryRepository=e}async handle(e,t){let{id:i}=fM.parse(e.params),o=await this.regionalCongressGalleryRepository.findById(i);if(!o)throw new d("Item de galeria n\xE3o encontrado");return t.status(200).json(o)}};var Va=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.regionalCongressGalleryItem.create({data:e})}async update(e){await this.prisma.regionalCongressGalleryItem.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.regionalCongressGalleryItem.delete({where:{id:e}})}async findByCongressId({pagination:{offset:e,limit:t},filter:{congressId:i,caption:o,orderBy:s}}){let n={congressId:i};return o&&(n.caption={contains:o,mode:"insensitive"}),await this.prisma.regionalCongressGalleryItem.findMany({where:n,orderBy:{updatedAt:s},skip:e,take:t})}async findById(e){return await this.prisma.regionalCongressGalleryItem.findFirst({where:{id:e}})}async count({filter:{congressId:e,caption:t}}){let i={congressId:e};return t&&(i.caption={contains:t,mode:"insensitive"}),await this.prisma.regionalCongressGalleryItem.count({where:i})}};function si(){return new Va(O)}function OP(){return{createRegionalCongressGalleryController:new Xs(si(),Ke(),U())}}function BP(){return{findRegionalCongressGalleriesByCongressIdController:new tn(si())}}function qP(){return{findRegionalCongressGalleryByIdController:new $a(si())}}function NP(){return{updateRegionalCongressGalleryController:new rn(si(),U())}}function GP(){return{deleteRegionalCongressGalleryController:new Qs(si())}}import{extendZodWithOpenApi as hM}from"@asteasolutions/zod-to-openapi";import Mc from"zod";hM(Mc);var RM=Mc.object({id:Mc.string().uuid("ID inv\xE1lido")}),za=class{constructor(e){this.regionalCongressPartnerRepository=e}async handle(e,t){let{id:i}=RM.parse(e.params),o=await this.regionalCongressPartnerRepository.findById(i);if(!o)throw new d("Parceiro n\xE3o encontrado");return t.status(200).json(o)}};var Za=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.regionalCongressPartner.create({data:e})}async update(e){await this.prisma.regionalCongressPartner.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.regionalCongressPartner.delete({where:{id:e}})}async findByCongressId({pagination:{offset:e,limit:t},filter:{congressId:i,name:o,orderBy:s}}){let n={congressId:i};return o&&(n.name={contains:o,mode:"insensitive"}),await this.prisma.regionalCongressPartner.findMany({where:n,skip:e,take:t,orderBy:{updatedAt:s}})}async findById(e){return await this.prisma.regionalCongressPartner.findFirst({where:{id:e}})}async count({filter:{congressId:e,name:t}}){let i={congressId:e};return t&&(i.name={contains:t,mode:"insensitive"}),await this.prisma.regionalCongressPartner.count({where:i})}};function ni(){return new Za(O)}function _P(){return{createRegionalCongressPartnerController:new on(ni(),Ke(),U())}}function LP(){return{findRegionalCongressPartnersByCongressIdController:new an(ni())}}function WP(){return{findRegionalCongressPartnerByIdController:new za(ni())}}function HP(){return{updateRegionalCongressPartnerController:new mn(ni(),U())}}function $P(){return{deleteRegionalCongressPartnerController:new sn(ni())}}var fe=PM(),{authMiddleware:Pt}=K();fe.post("/",(r,e,t)=>{Pt.isAdmin(r,e,t)},async(r,e)=>{let{createRegionalCongressController:t}=vP();await t.handle(r,e)});fe.get("/",async(r,e)=>{let{findRegionalCongressesController:t}=UP();await t.handle(r,e)});fe.get("/:id",async(r,e)=>{let{findRegionalCongressByIdController:t}=jP();await t.handle(r,e)});fe.get("/edition/:edition",async(r,e)=>{let{findRegionalCongressByEditionController:t}=FP();await t.handle(r,e)});fe.put("/:id",(r,e,t)=>{Pt.isAdmin(r,e,t)},async(r,e)=>{let{updateRegionalCongressController:t}=DP();await t.handle(r,e)});fe.delete("/:id",(r,e,t)=>{Pt.isAdmin(r,e,t)},async(r,e)=>{let{deleteRegionalCongressController:t}=kP();await t.handle(r,e)});fe.post("/:id/gallery",(r,e,t)=>{Pt.isAdmin(r,e,t)},H.single("image"),async(r,e)=>{let{createRegionalCongressGalleryController:t}=OP();await t.handle(r,e)});fe.get("/:id/gallery",async(r,e)=>{let{findRegionalCongressGalleriesByCongressIdController:t}=BP();await t.handle(r,e)});fe.get("/gallery/:id",async(r,e)=>{let{findRegionalCongressGalleryByIdController:t}=qP();await t.handle(r,e)});fe.put("/gallery/:id",(r,e,t)=>{Pt.isAdmin(r,e,t)},H.single("image"),async(r,e)=>{let{updateRegionalCongressGalleryController:t}=NP();await t.handle(r,e)});fe.delete("/gallery/:id",(r,e,t)=>{Pt.isAdmin(r,e,t)},async(r,e)=>{let{deleteRegionalCongressGalleryController:t}=GP();await t.handle(r,e)});fe.post("/:id/partner",(r,e,t)=>{Pt.isAdmin(r,e,t)},H.single("logo"),async(r,e)=>{let{createRegionalCongressPartnerController:t}=_P();await t.handle(r,e)});fe.get("/:id/partner",async(r,e)=>{let{findRegionalCongressPartnersByCongressIdController:t}=LP();await t.handle(r,e)});fe.get("/partner/:id",async(r,e)=>{let{findRegionalCongressPartnerByIdController:t}=WP();await t.handle(r,e)});fe.put("/partner/:id",(r,e,t)=>{Pt.isAdmin(r,e,t)},H.single("logo"),async(r,e)=>{let{updateRegionalCongressPartnerController:t}=HP();await t.handle(r,e)});fe.delete("/partner/:id",(r,e,t)=>{Pt.isAdmin(r,e,t)},async(r,e)=>{let{deleteRegionalCongressPartnerController:t}=$P();await t.handle(r,e)});import{Router as SM}from"express";import{extendZodWithOpenApi as bM}from"@asteasolutions/zod-to-openapi";import qe from"zod";var CM=5,VP=1024,IM=VP*VP,TM=CM*IM;bM(qe);var AM=qe.object({name:qe.string().min(1,"Nome \xE9 obrigat\xF3rio."),acronym:qe.string().optional(),description:qe.string().optional(),url:qe.url("URL deve ser v\xE1lida.").optional(),foundedAt:qe.coerce.date(),scope:qe.string().optional(),email:qe.email("E-mail deve ser v\xE1lido.").optional(),leaderId:qe.uuid("L\xEDder \xE9 obrigat\xF3rio."),deputyLeaderId:qe.uuid("Vice-l\xEDder \xE9 obrigat\xF3rio."),logo:qe.any().refine(r=>!r||typeof r=="object"&&typeof r.mimetype=="string"&&r.mimetype.startsWith("image/")&&typeof r.size=="number"&&r.size<=TM,"O logo deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.").optional()}),Ka=class{constructor(e,t){this.researchGroupRepository=e;this.firebaseStorageService=t}async handle(e,t){let{name:i,acronym:o,description:s,url:n,foundedAt:a,scope:m,email:p,leaderId:h,deputyLeaderId:A,logo:G}=AM.parse({...e.body,logo:e.file}),re=await this.researchGroupRepository.create({name:i,acronym:o,description:s,url:n,foundedAt:a,scope:m,email:p,leaderId:h,deputyLeaderId:A});if(G){let ie=await this.firebaseStorageService.uploadFile({file:G,folder:M.RESEARCH_GROUP_LOGO,id:re.id});await this.researchGroupRepository.update({id:re.id,logoUrl:ie})}return t.sendStatus(201)}};var Ja=class{constructor(e){this.prisma=e}async create({name:e,acronym:t,description:i,url:o,logoUrl:s,foundedAt:n,scope:a,email:m,leaderId:p,deputyLeaderId:h}){return await this.prisma.researchGroup.create({data:{name:e,acronym:t,description:i,url:o,logoUrl:s,foundedAt:n,scope:a,email:m,leaderId:p,deputyLeaderId:h}})}async find({pagination:{offset:e,limit:t},filter:{name:i,acronym:o,description:s,leader:n,orderBy:a}}){let m={},p=[];return i&&p.push({name:{contains:i,mode:"insensitive"}}),o&&p.push({acronym:{contains:o,mode:"insensitive"}}),s&&p.push({description:{contains:s,mode:"insensitive"}}),n&&p.push({leader:{name:{contains:n,mode:"insensitive"}}}),p.length>0&&(m.OR=p),await this.prisma.researchGroup.findMany({where:m,include:{leader:{omit:{passwordHash:!0}},deputyLeader:{omit:{passwordHash:!0}}},orderBy:{updatedAt:a},skip:e,take:t})}async findById(e){return await this.prisma.researchGroup.findFirst({where:{id:e},include:{leader:{omit:{passwordHash:!0}},deputyLeader:{omit:{passwordHash:!0}}}})}async update({id:e,name:t,acronym:i,description:o,url:s,logoUrl:n,foundedAt:a,scope:m,email:p,leaderId:h,deputyLeaderId:A}){await this.prisma.researchGroup.update({where:{id:e},data:{name:t,acronym:i,description:o,url:s,logoUrl:n,foundedAt:a,scope:m,email:p,leaderId:h,deputyLeaderId:A}})}async deleteById(e){await this.prisma.researchGroup.delete({where:{id:e}})}async count({filter:{name:e,acronym:t,description:i,leader:o}}){let s={},n=[];return e&&n.push({name:{contains:e,mode:"insensitive"}}),t&&n.push({acronym:{contains:t,mode:"insensitive"}}),i&&n.push({description:{contains:i,mode:"insensitive"}}),o&&n.push({leader:{name:{contains:o,mode:"insensitive"}}}),n.length>0&&(s.OR=n),await this.prisma.researchGroup.count({where:s})}};function ai(){return new Ja(O)}function zP(){return{createResearchGroupController:new Ka(ai(),U())}}function ZP(){return{findResearchGroupsController:new Rn(ai())}}function KP(){return{findResearchGroupByIdController:new hn(ai())}}function JP(){return{updateResearchGroupController:new Pn(ai(),U())}}function YP(){return{deleteResearchGroupController:new fn(ai(),U())}}var Cr=SM(),{authMiddleware:Ec}=K();Cr.post("/",(r,e,t)=>{Ec.isAdmin(r,e,t)},H.single("logo"),async(r,e)=>{let{createResearchGroupController:t}=zP();await t.handle(r,e)});Cr.get("/",async(r,e)=>{let{findResearchGroupsController:t}=ZP();await t.handle(r,e)});Cr.get("/:id",async(r,e)=>{let{findResearchGroupByIdController:t}=KP();await t.handle(r,e)});Cr.put("/:id",(r,e,t)=>{Ec.isAdmin(r,e,t)},H.single("logo"),async(r,e)=>{let{updateResearchGroupController:t}=JP();await t.handle(r,e)});Cr.delete("/:id",(r,e,t)=>{Ec.isAdmin(r,e,t)},async(r,e)=>{let{deleteResearchGroupController:t}=YP();await t.handle(r,e)});import{Router as wM}from"express";import{extendZodWithOpenApi as xM}from"@asteasolutions/zod-to-openapi";import Se from"zod";var MM=1;xM(Se);var EM=Se.object({page:Se.coerce.number().min(1).default(MM),limit:Se.coerce.number().optional(),userId:Se.string().optional(),registrationNumber:Se.string().optional(),name:Se.string().optional(),emailAddress:Se.string().optional(),mainEtps:Se.string().optional(),formations:Se.string().optional(),occupations:Se.string().optional(),institutions:Se.string().optional(),biography:Se.string().optional(),orderBy:Se.enum(["asc","desc"]).default("desc")}),Ya=class{constructor(e){this.researcherRepository=e}async handle(e,t){let{page:i,limit:o,...s}=EM.parse(e.query),n=o?o*i-o:void 0,[a,m]=await Promise.all([this.researcherRepository.find({pagination:{offset:n,limit:o},filter:{userName:s.name,...s}}),this.researcherRepository.count({filter:{userName:s.name,...s}})]),p=o?Math.max(Math.ceil(m/o),1):1;t.status(200).json({page:i,totalPages:p,offset:n,limit:o,researchers:a})}};var Xa=class{constructor(e){this.prisma=e}async create(e){await this.prisma.researcher.create({data:e})}async update(e){await this.prisma.researcher.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.researcher.delete({where:{id:e}})}async find({pagination:{offset:e,limit:t},filter:{biography:i,degrees:o,formations:s,institutions:n,mainEtps:a,occupations:m,registrationNumber:p,seniority:h,userId:A,userName:G,orderBy:re}}){let ie={},me=[];return G&&me.push({user:{name:{contains:G,mode:"insensitive"}}}),p&&me.push({registrationNumber:{contains:p,mode:"insensitive"}}),a&&me.push({mainEtps:{contains:a,mode:"insensitive"}}),s&&me.push({formations:{contains:s,mode:"insensitive"}}),m&&me.push({occupations:{contains:m,mode:"insensitive"}}),n&&me.push({institutions:{contains:n,mode:"insensitive"}}),i&&me.push({biography:{contains:i,mode:"insensitive"}}),me.length>0&&(ie.OR=me),o&&o.length>0&&(ie.degrees={hasSome:o}),h&&(ie.seniority=h),A&&(ie.userId={equals:A}),await this.prisma.researcher.findMany({where:ie,omit:{userId:!0},include:{user:{omit:{passwordHash:!0}}},orderBy:{updatedAt:re},skip:e,take:t})}async findById(e){return await this.prisma.researcher.findFirst({where:{id:e},include:{user:{omit:{passwordHash:!0}}}})}async findByUserId(e){return await this.prisma.researcher.findFirst({where:{userId:e},include:{user:{omit:{passwordHash:!0}}}})}async findByRegistrationNumber(e){return await this.prisma.researcher.findFirst({where:{registrationNumber:e},include:{user:{omit:{passwordHash:!0}}}})}async count({filter:{biography:e,degrees:t,formations:i,institutions:o,mainEtps:s,occupations:n,registrationNumber:a,seniority:m,userId:p,userName:h}}){let A={},G=[];return h&&G.push({user:{name:{contains:h,mode:"insensitive"}}}),a&&G.push({registrationNumber:{contains:a,mode:"insensitive"}}),G.length>0&&(A.OR=G),s&&(A.mainEtps={contains:s,mode:"insensitive"}),i&&(A.formations={contains:i,mode:"insensitive"}),t&&t.length>0&&(A.degrees={hasSome:t}),n&&(A.occupations={contains:n,mode:"insensitive"}),m&&(A.seniority=m),o&&(A.institutions={contains:o,mode:"insensitive"}),e&&(A.biography={contains:e,mode:"insensitive"}),p&&(A.userId={equals:p}),await this.prisma.researcher.count({where:A})}};function Ir(){return new Xa(O)}function XP(){return{createResearcherController:new bn(Ir())}}function QP(){return{findResearchersController:new Ya(Ir())}}function eb(){return{findResearcherByIdController:new In(Ir())}}function tb(){return{findResearcherByUserIdController:new An(Ir())}}function rb(){return{updateResearcherController:new Sn(Ir())}}function ib(){return{deleteResearcherController:new Cn(Ir())}}var Vt=wM(),{authMiddleware:wc}=K();Vt.post("/",(r,e,t)=>{wc.isAdmin(r,e,t)},async(r,e)=>{let{createResearcherController:t}=XP();await t.handle(r,e)});Vt.get("/",async(r,e)=>{let{findResearchersController:t}=QP();await t.handle(r,e)});Vt.get("/:id",async(r,e)=>{let{findResearcherByIdController:t}=eb();await t.handle(r,e)});Vt.get("/user/:id",async(r,e)=>{let{findResearcherByUserIdController:t}=tb();await t.handle(r,e)});Vt.put("/:id",(r,e,t)=>{wc.isAdmin(r,e,t)},async(r,e)=>{let{updateResearcherController:t}=rb();await t.handle(r,e)});Vt.delete("/:id",(r,e,t)=>{wc.isAdmin(r,e,t)},async(r,e)=>{let{deleteResearcherController:t}=ib();await t.handle(r,e)});import{Router as jM}from"express";import{extendZodWithOpenApi as vM}from"@asteasolutions/zod-to-openapi";import he from"zod";vM(he);var UM=he.object({title:he.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),author:he.string().min(1,"Autor \xE9 obrigat\xF3rio."),journal:he.string().optional(),volume:he.string().optional(),edition:he.string().optional(),pageStart:he.coerce.number().optional(),pageEnd:he.coerce.number().optional(),startDate:he.coerce.date(),endDate:he.coerce.date(),city:he.string().optional(),state:he.string().optional(),country:he.string().optional(),publisher:he.string().optional(),description:he.string().optional(),year:he.coerce.number().optional(),accessUrl:he.url().optional()}),Qa=class{constructor(e){this.scientificArticlesRepository=e}async handle(e,t){let{title:i,author:o,journal:s,volume:n,edition:a,pageStart:m,pageEnd:p,startDate:h,endDate:A,city:G,state:re,country:ie,publisher:me,description:Ne,year:yi,accessUrl:dm}=UM.parse(e.body);return await this.scientificArticlesRepository.create({title:i,author:o,journal:s,volume:n,edition:a,pageStart:m,pageEnd:p,startDate:h,endDate:A,city:G,state:re,country:ie,publisher:me,description:Ne,year:yi,accessUrl:dm}),t.sendStatus(201)}};var em=class{constructor(e){this.prisma=e}async create({title:e,author:t,journal:i,volume:o,edition:s,pageStart:n,pageEnd:a,startDate:m,endDate:p,city:h,state:A,country:G,publisher:re,description:ie,year:me,accessUrl:Ne}){return await this.prisma.scientificArticle.create({data:{title:e,author:t,journal:i,volume:o,edition:s,pageStart:n,pageEnd:a,startDate:m,endDate:p,city:h,state:A,country:G,publisher:re,description:ie,year:me,accessUrl:Ne}})}async find({pagination:{offset:e,limit:t},filter:{title:i,author:o,journal:s,orderBy:n}}){let a={},m=[];return i&&m.push({title:{contains:i,mode:"insensitive"}}),o&&m.push({author:{contains:o,mode:"insensitive"}}),s&&m.push({journal:{contains:s,mode:"insensitive"}}),m.length>0&&(a.OR=m),await this.prisma.scientificArticle.findMany({where:a,orderBy:{updatedAt:n},skip:e,take:t})}async findById(e){return await this.prisma.scientificArticle.findFirst({where:{id:e}})}async update({id:e,title:t,author:i,journal:o,volume:s,edition:n,pageStart:a,pageEnd:m,startDate:p,endDate:h,city:A,state:G,country:re,publisher:ie,description:me,year:Ne,accessUrl:yi}){await this.prisma.scientificArticle.update({where:{id:e},data:{title:t,author:i,journal:o,volume:s,edition:n,pageStart:a,pageEnd:m,startDate:p,endDate:h,city:A,state:G,country:re,publisher:ie,description:me,year:Ne,accessUrl:yi}})}async deleteById(e){await this.prisma.scientificArticle.delete({where:{id:e}})}async count({filter:{title:e,author:t,journal:i}}){let o={},s=[];return e&&s.push({title:{contains:e,mode:"insensitive"}}),t&&s.push({author:{contains:t,mode:"insensitive"}}),i&&s.push({journal:{contains:i,mode:"insensitive"}}),s.length>0&&(o.OR=s),await this.prisma.scientificArticle.count({where:o})}};function mi(){return new em(O)}function ob(){return{createScientificArticleController:new Qa(mi())}}function sb(){return{findScientificArticlesController:new En(mi())}}function nb(){return{findScientificArticleByIdController:new Mn(mi())}}function ab(){return{updateScientificArticleController:new wn(mi())}}function mb(){return{deleteScientificArticleController:new xn(mi())}}var Tr=jM(),{authMiddleware:vc}=K();Tr.post("/",(r,e,t)=>{vc.isAdmin(r,e,t)},async(r,e)=>{let{createScientificArticleController:t}=ob();await t.handle(r,e)});Tr.get("/",async(r,e)=>{let{findScientificArticlesController:t}=sb();await t.handle(r,e)});Tr.get("/:id",async(r,e)=>{let{findScientificArticleByIdController:t}=nb();await t.handle(r,e)});Tr.put("/:id",(r,e,t)=>{vc.isAdmin(r,e,t)},async(r,e)=>{let{updateScientificArticleController:t}=ab();await t.handle(r,e)});Tr.delete("/:id",(r,e,t)=>{vc.isAdmin(r,e,t)},async(r,e)=>{let{deleteScientificArticleController:t}=mb();await t.handle(r,e)});import{Router as qM}from"express";import{extendZodWithOpenApi as FM}from"@asteasolutions/zod-to-openapi";import bt from"zod";var DM=5,pb=1024,kM=pb*pb,OM=DM*kM;FM(bt);var BM=bt.object({name:bt.string().min(1,"Nome \xE9 obrigat\xF3rio."),issn:bt.string().min(1,"ISSN \xE9 obrigat\xF3rio."),description:bt.string().min(1,"Descri\xE7\xE3o \xE9 obrigat\xF3ria."),journalUrl:bt.url("URL da revista deve ser v\xE1lida."),directors:bt.string().optional(),editorialBoard:bt.string().optional(),logo:bt.any().refine(r=>!r||typeof r=="object"&&typeof r.mimetype=="string"&&r.mimetype.startsWith("image/")&&typeof r.size=="number"&&r.size<=OM,"O logo deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.").optional()}),tm=class{constructor(e,t){this.scientificJournalRepository=e;this.firebaseStorageService=t}async handle(e,t){let{name:i,issn:o,description:s,journalUrl:n,directors:a,editorialBoard:m,logo:p}=BM.parse({...e.body,logo:e.file}),h=await this.scientificJournalRepository.create({name:i,issn:o,description:s,journalUrl:n,directors:a,editorialBoard:m});if(p){let A=await this.firebaseStorageService.uploadFile({file:p,folder:M.SCIENTIFIC_JOURNAL,id:h.id});await this.scientificJournalRepository.update({id:h.id,logoUrl:A})}return t.sendStatus(201)}};var rm=class{constructor(e){this.prisma=e}async create({name:e,issn:t,description:i,logoUrl:o,journalUrl:s,directors:n,editorialBoard:a}){return await this.prisma.scientificJournal.create({data:{name:e,issn:t,description:i,logoUrl:o,journalUrl:s,directors:n,editorialBoard:a}})}async find({pagination:{offset:e,limit:t},filter:{name:i,description:o,issn:s,directors:n,editorialBoard:a,orderBy:m}}){let p={},h=[];return i&&h.push({name:{contains:i,mode:"insensitive"}}),o&&h.push({description:{contains:o,mode:"insensitive"}}),s&&h.push({issn:{contains:s,mode:"insensitive"}}),n&&h.push({directors:{contains:n,mode:"insensitive"}}),a&&h.push({editorialBoard:{contains:a,mode:"insensitive"}}),h.length>0&&(p.OR=h),await this.prisma.scientificJournal.findMany({where:p,orderBy:{updatedAt:m},skip:e,take:t})}async findById(e){return await this.prisma.scientificJournal.findFirst({where:{id:e}})}async update({id:e,name:t,issn:i,description:o,logoUrl:s,journalUrl:n,directors:a,editorialBoard:m}){await this.prisma.scientificJournal.update({where:{id:e},data:{name:t,issn:i,description:o,logoUrl:s,journalUrl:n,directors:a,editorialBoard:m}})}async deleteById(e){await this.prisma.scientificJournal.delete({where:{id:e}})}async count({filter:{name:e,description:t,issn:i,directors:o,editorialBoard:s}}){let n={},a=[];return e&&a.push({name:{contains:e,mode:"insensitive"}}),t&&a.push({description:{contains:t,mode:"insensitive"}}),i&&a.push({issn:{contains:i,mode:"insensitive"}}),o&&a.push({directors:{contains:o,mode:"insensitive"}}),s&&a.push({editorialBoard:{contains:s,mode:"insensitive"}}),a.length>0&&(n.OR=a),await this.prisma.scientificJournal.count({where:n})}};function pi(){return new rm(O)}function db(){return{createScientificJournalController:new tm(pi(),U())}}function lb(){return{findScientificJournalsController:new jn(pi())}}function cb(){return{findScientificJournalByIdController:new Un(pi())}}function ub(){return{updateScientificJournalController:new Fn(pi(),U())}}function gb(){return{deleteScientificJournalController:new vn(pi(),U())}}var Ar=qM(),{authMiddleware:Uc}=K();Ar.post("/",(r,e,t)=>{Uc.isAdmin(r,e,t)},H.single("logo"),async(r,e)=>{let{createScientificJournalController:t}=db();await t.handle(r,e)});Ar.get("/",async(r,e)=>{let{findScientificJournalsController:t}=lb();await t.handle(r,e)});Ar.get("/:id",async(r,e)=>{let{findScientificJournalByIdController:t}=cb();await t.handle(r,e)});Ar.put("/:id",(r,e,t)=>{Uc.isAdmin(r,e,t)},H.single("logo"),async(r,e)=>{let{updateScientificJournalController:t}=ub();await t.handle(r,e)});Ar.delete("/:id",(r,e,t)=>{Uc.isAdmin(r,e,t)},async(r,e)=>{let{deleteScientificJournalController:t}=gb();await t.handle(r,e)});import{Router as LM}from"express";import{extendZodWithOpenApi as NM}from"@asteasolutions/zod-to-openapi";import di from"zod";var GM=1;NM(di);var _M=di.object({page:di.coerce.number().min(1).default(GM),limit:di.coerce.number().optional(),role:di.string().optional(),orderBy:di.enum(["asc","desc"]).default("desc")}),im=class{constructor(e){this.sdhcTeamMemberRepository=e}async handle(e,t){let{page:i,limit:o,...s}=_M.parse(e.query),n=o?o*i-o:void 0,[a,m]=await Promise.all([this.sdhcTeamMemberRepository.find({pagination:{offset:n,limit:o},filter:s}),this.sdhcTeamMemberRepository.count({filter:s})]),p=o?Math.max(Math.ceil(m/o),1):1;t.status(200).json({page:i,totalPages:p,offset:n,limit:o,members:a})}};var om=class{constructor(e){this.prisma=e}async create(e){await this.prisma.sDHCTeamMember.create({data:{...e,order:e.order??0}})}async update(e){let{id:t,...i}=e;await this.prisma.sDHCTeamMember.update({where:{id:t},data:i})}async deleteById(e){await this.prisma.sDHCTeamMember.delete({where:{id:e}})}async find({pagination:{offset:e,limit:t},filter:{role:i,orderBy:o}}){let s={};return i&&(s.role={contains:i,mode:"insensitive"}),await this.prisma.sDHCTeamMember.findMany({where:s,include:{user:{omit:{passwordHash:!0}}},orderBy:{updatedAt:o},skip:e,take:t})}async findById(e){return await this.prisma.sDHCTeamMember.findFirst({where:{id:e},include:{user:{omit:{passwordHash:!0}}}})}async count({filter:{role:e}}){let t={};return e&&(t.role={contains:e,mode:"insensitive"}),await this.prisma.sDHCTeamMember.count({where:t})}};function li(){return new om(O)}function yb(){return{createSDHCTeamMemberController:new Dn(li())}}function fb(){return{findSDHCTeamMembersController:new im(li())}}function hb(){return{findSDHCTeamMemberByIdController:new On(li())}}function Rb(){return{updateSDHCTeamMemberController:new qn(li())}}function Pb(){return{deleteSDHCTeamMemberController:new kn(li())}}var Sr=LM(),{authMiddleware:jc}=K();Sr.post("/",(r,e,t)=>{jc.isAdmin(r,e,t)},async(r,e)=>{let{createSDHCTeamMemberController:t}=yb();await t.handle(r,e)});Sr.get("/",async(r,e)=>{let{findSDHCTeamMembersController:t}=fb();await t.handle(r,e)});Sr.get("/:id",async(r,e)=>{let{findSDHCTeamMemberByIdController:t}=hb();await t.handle(r,e)});Sr.put("/:id",(r,e,t)=>{jc.isAdmin(r,e,t)},async(r,e)=>{let{updateSDHCTeamMemberController:t}=Rb();await t.handle(r,e)});Sr.delete("/:id",(r,e,t)=>{jc.isAdmin(r,e,t)},async(r,e)=>{let{deleteSDHCTeamMemberController:t}=Pb();await t.handle(r,e)});import{Router as WM}from"express";function bb(){return{updateUserController:new Hn(Pe(),U())}}function Cb(){return{deleteUserController:new Nn(Pe())}}function Ib(){return{findUsersController:new Ln(Pe())}}function Tb(){return{findUserController:new _n(Pe())}}function Ab(){return{promoteUserController:new Wn(Pe())}}function Sb(){return{demoteUserController:new Gn(Pe())}}var zt=WM(),{authMiddleware:sm}=K();zt.get("/:id",async(r,e)=>{let{findUserController:t}=Tb();await t.handle(r,e)});zt.put("/",(r,e,t)=>{sm.authenticated(r,e,t)},H.single("avatarImage"),async(r,e)=>{let{updateUserController:t}=bb();await t.handle(r,e)});zt.delete("/:id",(r,e,t)=>{sm.authenticated(r,e,t)},async(r,e)=>{let{deleteUserController:t}=Cb();await t.handle(r,e)});zt.get("/",async(r,e)=>{let{findUsersController:t}=Ib();await t.handle(r,e)});zt.put("/promote/:id",(r,e,t)=>{sm.isAdmin(r,e,t)},async(r,e)=>{let{promoteUserController:t}=Ab();await t.handle(r,e)});zt.put("/demote/:id",(r,e,t)=>{sm.isAdmin(r,e,t)},async(r,e)=>{let{demoteUserController:t}=Sb();await t.handle(r,e)});import{Router as KM}from"express";import{extendZodWithOpenApi as HM}from"@asteasolutions/zod-to-openapi";import st from"zod";var $M=5,xb=1024,VM=xb*xb,zM=$M*VM;HM(st);var ZM=st.object({title:st.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),description:st.string().optional(),scheduledAt:st.coerce.date(),webinarLink:st.url().optional(),guestIds:st.transform(r=>typeof r=="string"?r.split(","):r).pipe(st.array(st.uuid())),thumbnail:st.any().refine(r=>!r||typeof r=="object"&&typeof r.mimetype=="string"&&r.mimetype.startsWith("image/")&&typeof r.size=="number"&&r.size<=zM,"A thumbnail deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.")}),nm=class{constructor(e,t){this.webinarRepository=e;this.firebaseStorageService=t}async handle(e,t){let{title:i,description:o,scheduledAt:s,webinarLink:n,guestIds:a,thumbnail:m}=ZM.parse({...e.body,thumbnail:e.file}),p=await this.webinarRepository.create({title:i,description:o,scheduledAt:s,webinarLink:n||void 0,guestIds:a}),h=await this.firebaseStorageService.uploadFile({file:m,folder:M.WEBINAR,id:p.id});return await this.webinarRepository.update({id:p.id,thumbnailUrl:h}),t.sendStatus(201)}};var am=class{constructor(e){this.prisma=e}async create({title:e,description:t,scheduledAt:i,webinarLink:o,thumbnailUrl:s,guestIds:n}){return await this.prisma.webinar.create({data:{title:e,description:t,scheduledAt:i,webinarLink:o,thumbnailUrl:s,guests:n?{connect:n.map(a=>({id:a}))}:void 0}})}async find({pagination:{offset:e,limit:t},filter:{description:i,orderBy:o,title:s}}){let n={},a=[];return s&&a.push({title:{contains:s,mode:"insensitive"}}),i&&a.push({description:{contains:i,mode:"insensitive"}}),a.length>0&&(n.OR=a),await this.prisma.webinar.findMany({where:n,include:{guests:{omit:{passwordHash:!0}}},orderBy:{updatedAt:o},skip:e,take:t})}async findById(e){return await this.prisma.webinar.findFirst({where:{id:e},include:{guests:{omit:{passwordHash:!0}}}})}async update({id:e,title:t,description:i,scheduledAt:o,webinarLink:s,thumbnailUrl:n,guestIds:a}){await this.prisma.webinar.update({where:{id:e},data:{title:t,description:i,scheduledAt:o,webinarLink:s,thumbnailUrl:n,guests:a?{connect:a.map(m=>({id:m}))}:void 0}})}async deleteById(e){await this.prisma.webinar.delete({where:{id:e}})}async count({filter:{description:e,title:t}}){let i={},o=[];return t&&o.push({title:{contains:t,mode:"insensitive"}}),e&&o.push({description:{contains:e,mode:"insensitive"}}),o.length>0&&(i.OR=o),await this.prisma.webinar.count({where:i})}};function ci(){return new am(O)}function Mb(){return{createWebinarController:new nm(ci(),U())}}function Eb(){return{findWebinarsController:new zn(ci())}}function wb(){return{findWebinarByIdController:new Vn(ci())}}function vb(){return{updateWebinarController:new Zn(ci(),U())}}function Ub(){return{deleteWebinarController:new $n(ci(),U())}}var xr=KM(),{authMiddleware:Fc}=K();xr.post("/",(r,e,t)=>{Fc.isAdmin(r,e,t)},H.single("thumbnail"),async(r,e)=>{let{createWebinarController:t}=Mb();await t.handle(r,e)});xr.get("/",async(r,e)=>{let{findWebinarsController:t}=Eb();await t.handle(r,e)});xr.get("/:id",async(r,e)=>{let{findWebinarByIdController:t}=wb();await t.handle(r,e)});xr.put("/:id",(r,e,t)=>{Fc.isAdmin(r,e,t)},H.single("thumbnail"),async(r,e)=>{let{updateWebinarController:t}=vb();await t.handle(r,e)});xr.delete("/:id",(r,e,t)=>{Fc.isAdmin(r,e,t)},async(r,e)=>{let{deleteWebinarController:t}=Ub();await t.handle(r,e)});import{Router as QM}from"express";import{extendZodWithOpenApi as JM}from"@asteasolutions/zod-to-openapi";import ui from"zod";var YM=1;JM(ui);var XM=ui.object({page:ui.coerce.number().min(1).default(YM),limit:ui.coerce.number().optional(),role:ui.string().optional(),orderBy:ui.enum(["asc","desc"]).default("desc")}),mm=class{constructor(e){this.workGroupTeamMemberRepository=e}async handle(e,t){let{page:i,limit:o,...s}=XM.parse(e.query),n=o?o*i-o:void 0,[a,m]=await Promise.all([this.workGroupTeamMemberRepository.find({pagination:{offset:n,limit:o},filter:s}),this.workGroupTeamMemberRepository.count({filter:s})]),p=o?Math.max(Math.ceil(m/o),1):1;t.status(200).json({page:i,totalPages:p,offset:n,limit:o,members:a})}};var pm=class{constructor(e){this.prisma=e}async create(e){await this.prisma.workGroupTeamMember.create({data:{...e}})}async update(e){let{id:t,...i}=e;await this.prisma.workGroupTeamMember.update({where:{id:t},data:i})}async deleteById(e){await this.prisma.workGroupTeamMember.delete({where:{id:e}})}async find({pagination:{offset:e,limit:t},filter:{role:i,orderBy:o}}){let s={};return i&&(s.role={contains:i,mode:"insensitive"}),await this.prisma.workGroupTeamMember.findMany({where:s,include:{user:{omit:{passwordHash:!0}}},orderBy:{updatedAt:o},skip:e,take:t})}async findById(e){return await this.prisma.workGroupTeamMember.findFirst({where:{id:e},include:{user:{omit:{passwordHash:!0}}}})}async count({filter:{role:e}}){let t={};return e&&(t.role={contains:e,mode:"insensitive"}),await this.prisma.workGroupTeamMember.count({where:t})}};function gi(){return new pm(O)}function jb(){return{createWorkGroupTeamMemberController:new Kn(gi())}}function Fb(){return{findWorkGroupTeamMembersController:new mm(gi())}}function Db(){return{findWorkGroupTeamMemberByIdController:new Yn(gi())}}function kb(){return{updateWorkGroupTeamMemberController:new Qn(gi())}}function Ob(){return{deleteWorkGroupTeamMemberController:new Jn(gi())}}var Mr=QM(),{authMiddleware:Dc}=K();Mr.post("/",(r,e,t)=>{Dc.isAdmin(r,e,t)},async(r,e)=>{let{createWorkGroupTeamMemberController:t}=jb();await t.handle(r,e)});Mr.get("/",async(r,e)=>{let{findWorkGroupTeamMembersController:t}=Fb();await t.handle(r,e)});Mr.get("/:id",async(r,e)=>{let{findWorkGroupTeamMemberByIdController:t}=Db();await t.handle(r,e)});Mr.put("/:id",(r,e,t)=>{Dc.isAdmin(r,e,t)},async(r,e)=>{let{updateWorkGroupTeamMemberController:t}=kb();await t.handle(r,e)});Mr.delete("/:id",(r,e,t)=>{Dc.isAdmin(r,e,t)},async(r,e)=>{let{deleteWorkGroupTeamMemberController:t}=Ob();await t.handle(r,e)});var te=kc(),rE={methods:["GET","POST","PUT","DELETE"],origin:["http://localhost:3000","https://rede-ct.vercel.app"],credentials:!0};te.use(tE(rE));te.use(kc.json());te.use(kc.urlencoded({extended:!1}));te.use("/docs",eE({content:sh,theme:"kepler"}));te.use("/",lc);te.use("/auth",gt);te.use("/user",zt);te.use("/news",Ht);te.use("/certification",or);te.use("/pendency",fr);te.use("/researcher",Vt);te.use("/in-memoriam",Wt);te.use("/etp",nr);te.use("/partner",yr);te.use("/management-team",ur);te.use("/sdhc-team-member",Sr);te.use("/legitimator-committee-member",lr);te.use("/regiment",$t);te.use("/meeting",Be);te.use("/international-scientific-congress",ye);te.use("/regional-congress",fe);te.use("/webinars",xr);te.use("/courses",sr);te.use("/post-graduate-programs",hr);te.use("/event",ar);te.use("/scientific-journals",Ar);te.use("/book-volumes",ir);te.use("/scientific-articles",Tr);te.use("/work-group-team-member",Mr);te.use("/reference-center-team-member",Pr);te.use("/law",dr);te.use("/research-groups",Cr);te.use("/museum",gr);te.use("/redect-highlight",Rr);te.use((r,e,t,i)=>{let{errorHandler:o}=Oc();o.handle(r,e,t,i)});var oE=iE.createServer(te),Bb=4e3;oE.listen(Bb,()=>{console.log(`\u{1F680} Aplica\xE7\xE3o rodando na porta ${Bb}.`)});

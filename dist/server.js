import ix from"node:http";import{apiReference as rx}from"@scalar/express-api-reference";import tx from"cors";import kd from"express";import dI from"zod";var ge=class extends Error{};var ae=class extends Error{};var a=class extends Error{};var p=class extends Error{};var we=class extends Error{};import{ZodError as pI}from"zod";var fo=class extends pI{};var yo=class{handle(e,t,r,i){return e instanceof fo?r.status(400).json({message:"Validation error",error:dI.treeifyError(e)}):e instanceof ge?r.status(400).json({message:e.message}):e instanceof p?r.status(404).json({message:e.message}):e instanceof we?r.status(401).json({message:e.message}):e instanceof ae?r.status(409).json({message:e.message}):e instanceof a?r.status(500).json({message:e.message}):r.status(500).json({message:"Internal server error"})}};function Od(){return{errorHandler:new yo}}import{OpenAPIRegistry as Zv,OpenApiGeneratorV3 as Kv}from"@asteasolutions/zod-to-openapi";import{$Enums as Gd}from"@prisma/client";import b from"zod";import{extendZodWithOpenApi as lI}from"@asteasolutions/zod-to-openapi";import xr from"zod";var uI=1,gI=6;lI(xr);var ka=xr.object({page:xr.coerce.number().min(1).default(uI),limit:xr.coerce.number().min(1).default(gI),title:xr.string().optional(),description:xr.string().optional(),orderBy:xr.enum(["asc","desc"]).default("desc")}),ho=class{constructor(e){this.certificationRepository=e}async handle(e,t){try{let{title:r,description:i,limit:n,orderBy:s,page:m}=ka.parse(e.query),c=m*n-n,d=e.user.id,[R,E]=await Promise.all([this.certificationRepository.findByUserId({userId:d,pagination:{offset:c,limit:n},filter:{title:r,description:i,orderBy:s}}),this.certificationRepository.count({filter:{title:r,description:i,userId:d}})]),q=Math.max(Math.ceil(E/n),1);return t.status(200).json({page:m,totalPages:q,offset:c,limit:n,totalCertifications:E,certifications:R})}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as fI}from"@asteasolutions/zod-to-openapi";import Mr from"zod";var yI=1,hI=7;fI(Mr);var Oa=Mr.object({page:Mr.coerce.number().min(1).default(yI),limit:Mr.coerce.number().min(1).default(hI),title:Mr.string().optional(),content:Mr.string().optional(),orderBy:Mr.enum(["asc","desc"]).default("desc")}),Ro=class{constructor(e){this.newsRepository=e}async handle(e,t){try{let{page:r,limit:i,content:n,orderBy:s,title:m}=Oa.parse(e.query),c=i*r-i,d=e.user.id,[R,E]=await Promise.all([this.newsRepository.findByAuthorId({authorId:d,pagination:{offset:c,limit:i},filter:{orderBy:s,title:m,content:n}}),this.newsRepository.count({filter:{authorId:d,content:n,title:m}})]),q=Math.ceil(E/i);t.status(200).json({page:r,totalPages:q,offset:c,limit:i,news:R})}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as RI}from"@asteasolutions/zod-to-openapi";import{PendencyStatus as II}from"@prisma/client";import ir from"zod";var bI=1,CI=6;RI(ir);var Ga=ir.object({page:ir.coerce.number().min(1).default(bI),limit:ir.coerce.number().min(1).default(CI),title:ir.string().optional(),description:ir.string().optional(),status:ir.enum(II).default("PENDING"),orderBy:ir.enum(["asc","desc"]).default("desc")}),Io=class{constructor(e){this.pendencyRepository=e}async handle(e,t){try{let{limit:r,page:i,...n}=Ga.parse(e.query),s=i*r-r,m=e.user.id,[c,d]=await Promise.all([this.pendencyRepository.findByUserId({userId:m,pagination:{offset:s,limit:r},filter:n}),this.pendencyRepository.count({filter:{...n,userId:m}})]),R=Math.max(Math.ceil(d/r),1);return t.status(200).json({page:i,totalPages:R,offset:s,limit:r,pendencies:c})}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as wI}from"@asteasolutions/zod-to-openapi";import bo from"zod";wI(bo);var Na=bo.object({password:bo.string(),email:bo.email()}),Co=class{constructor(e,t,r){this.userRepository=e;this.bcrypt=t;this.jwtService=r}async handle(e,t){try{let{email:r,password:i}=Na.parse(e.body),n=await this.userRepository.findByEmail(r);if(!n)return t.status(401).json({message:"Usu\xE1rio n\xE3o existe."});if(!await this.bcrypt.compare({password:i,hashedPassword:n.passwordHash}))throw new we("Senha inv\xE1lida.");let{id:m,role:c}=n,d=this.jwtService.sign({id:m,role:c,email:r});return t.status(200).json({token:d})}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as SI}from"@asteasolutions/zod-to-openapi";import ot from"zod";var wo=8;SI(ot);var La=ot.object({name:ot.string("Nome \xE9 obrigat\xF3rio.").min(1,"Nome \xE9 obrigat\xF3rio."),emailAddress:ot.email("E-mail inv\xE1lido.").min(1,"E-mail \xE9 obrigat\xF3rio."),password:ot.string("A senha \xE9 obrigat\xF3ria.").min(wo,`A senha deve ter pelo menos ${wo} caracteres.`),confirmPassword:ot.string("A senha \xE9 obrigat\xF3ria.").min(wo,`A senha deve ter pelo menos ${wo} caracteres.`)}).refine(o=>o.password===o.confirmPassword,{message:"As senhas n\xE3o coincidem.",path:["confirmPassword"]}),So=class{constructor(e,t){this.userRepository=e;this.bcrypt=t}async handle(e,t){try{let{emailAddress:r,name:i,password:n}=La.parse(e.body);if(await this.userRepository.findByEmail(r))throw new ae("Usu\xE1rio j\xE1 existe.");let m=await this.bcrypt.hash(n);return await this.userRepository.create({name:i,emailAddress:r,passwordHash:m}),t.status(201).json()}catch(r){if(r instanceof Error)throw new a(r.message)}}};var Nd={method:"post",path:"/auth/sign-up",tags:["Authentication"],summary:"Create a new user",request:{body:{content:{"application/json":{schema:La}}}},responses:{201:{description:"User created successfully",summary:"User Registration Successful",content:{"application/json":{schema:b.object({message:b.string()})}}},400:{description:"Invalid input data provided",summary:"Validation Error",content:{"application/json":{schema:b.object({errors:b.record(b.string(),b.string())})}}},409:{description:"User already exists with this email",summary:"User Already Exists",content:{"application/json":{schema:b.object({message:b.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:b.object({message:b.string()})}}}}},Ld={method:"post",path:"/auth/sign-in",tags:["Authentication"],summary:"Sign in",request:{body:{content:{"application/json":{schema:Na}}}},responses:{200:{description:"Authentication successful, JWT token returned",summary:"Login Successful",content:{"application/json":{schema:b.object({token:b.string()})}}},400:{description:"Invalid credentials or input data",summary:"Validation Error",content:{"application/json":{schema:b.object({errors:b.record(b.string(),b.string())})}}},401:{description:"Invalid email or password",summary:"Authentication Failed",content:{"application/json":{schema:b.object({message:b.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:b.object({message:b.string()})}}}}},Wd={method:"get",path:"/auth/user",tags:["Authentication"],summary:"Search for authenticated user",security:[{bearerAuth:[]}],responses:{200:{description:"Authenticated user information retrieved successfully",summary:"User Information Retrieved",content:{"application/json":{schema:b.object({name:b.string(),id:b.string(),avatarUrl:b.string().nullable(),createdAt:b.date(),updatedAt:b.date(),emailAddress:b.string(),orcid:b.string().nullable(),phone:b.string().nullable(),lattesUrl:b.string().nullable(),role:b.enum(Gd.UserRole)}).nullable()}}},400:{description:"Invalid request parameters",summary:"Validation Error",content:{"application/json":{schema:b.object({errors:b.record(b.string(),b.string())})}}},404:{description:"User not found or not authenticated",summary:"User Not Found",content:{"application/json":{schema:b.object({message:b.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:b.object({message:b.string()})}}}}},_d={method:"get",path:"/auth/user/news",tags:["Authentication"],summary:"List authenticated user news",security:[{bearerAuth:[]}],request:{query:Oa},responses:{200:{description:"Paginated list of authenticated user news retrieved successfully",summary:"User News Retrieved",content:{"application/json":{schema:b.object({page:b.number(),totalPages:b.number(),offset:b.number(),limit:b.number(),news:b.object({content:b.string(),id:b.string(),title:b.string(),createdAt:b.date(),updatedAt:b.date(),imageUrl:b.string().nullable()})})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:b.object({errors:b.record(b.string(),b.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:b.object({message:b.string()})}}}}},zd={method:"get",path:"/auth/admin",tags:["Authentication"],summary:"Verify admin access",security:[{bearerAuth:[]}],responses:{200:{description:"Admin access verified successfully",summary:"Admin Access Granted",content:{"application/json":{schema:b.object({success:b.boolean()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:b.object({message:b.string()})}}}}},Hd={method:"get",path:"/auth/certifications",tags:["Authentication"],summary:"List all authenticated user's certifications",security:[{bearerAuth:[]}],request:{query:ka},responses:{200:{description:"Paginated list of authenticated user certifications retrieved successfully",summary:"User Certifications Retrieved",content:{"application/json":{schema:b.object({page:b.number(),totalPages:b.number(),offset:b.number(),limit:b.number(),certifications:b.object({description:b.string(),id:b.string(),title:b.string(),certificationUrl:b.string(),createdAt:b.date(),updatedAt:b.date(),userId:b.string()})})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:b.object({errors:b.record(b.string(),b.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:b.object({message:b.string()})}}}}},Vd={method:"get",path:"/auth/pendencies",tags:["Authentication"],summary:"List all authenticated user's pendencies",security:[{bearerAuth:[]}],request:{query:Ga},responses:{200:{description:"Paginated list of authenticated user pendencies retrieved successfully",summary:"User Pendencies Retrieved",content:{"application/json":{schema:b.object({page:b.number(),totalPages:b.number(),offset:b.number(),limit:b.number(),pendencies:b.object({id:b.string(),title:b.string(),description:b.string(),status:b.enum(Gd.PendencyStatus),createdAt:b.date(),updatedAt:b.date(),userId:b.string()})})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:b.object({errors:b.record(b.string(),b.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:b.object({message:b.string()})}}}}};import v from"zod";import{extendZodWithOpenApi as vI}from"@asteasolutions/zod-to-openapi";import Wa from"zod";vI(Wa);var _a=Wa.object({id:Wa.uuid()}),vo=class{constructor(e,t){this.bookVolumeRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{id:r}=_a.parse({id:e.params.id}),i=await this.bookVolumeRepository.findById(r);if(!i)throw new p("O volume de livro n\xE3o existe.");return i.authorImageUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.authorImageUrl}),i.coverImageUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.coverImageUrl}),i.catalogSheetUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.catalogSheetUrl}),await this.bookVolumeRepository.deleteById(r),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as EI}from"@asteasolutions/zod-to-openapi";import za from"zod";EI(za);var Ha=za.object({id:za.uuid()}),Eo=class{constructor(e){this.bookVolumeRepository=e}async handle(e,t){try{let{id:r}=Ha.parse({id:e.params.id}),i=await this.bookVolumeRepository.findById(r);if(!i)throw new p("Volume de livro n\xE3o encontrado.");return t.status(200).json(i)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as jI}from"@asteasolutions/zod-to-openapi";import nr from"zod";var xI=1,MI=6;jI(nr);var Va=nr.object({page:nr.coerce.number().min(1).default(xI),limit:nr.coerce.number().min(1).default(MI),title:nr.string().optional(),author:nr.string().optional(),description:nr.string().optional(),orderBy:nr.enum(["asc","desc"]).default("desc")}),jo=class{constructor(e){this.bookVolumeRepository=e}async handle(e,t){try{let{limit:r,page:i,...n}=Va.parse(e.query),s=i*r-r,[m,c]=await Promise.all([this.bookVolumeRepository.find({pagination:{offset:s,limit:r},filter:n}),this.bookVolumeRepository.count({filter:n})]),d=Math.max(Math.ceil(c/r),1);return t.status(200).json({page:i,totalPages:d,offset:s,limit:r,bookVolumes:m})}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as PI}from"@asteasolutions/zod-to-openapi";import Se from"zod";var M={NEWS:"images/news",USER:"images/user",IN_MEMORIAM:"images/in-memoriam",PARTNER:"images/partners",CERTIFICATION:"documents/certifications",PENDENCY:"documents/pendencies",REGIMENT:"documents/regiments",MEETING_MINUTE:"documents/meeting-minutes",INTERNATIONAL_SCIENTIFIC_CONGRESS_GALLERY:"images/international-scientific-congress-gallery",GALLERY:"images/regional-congress-gallery",REGIONAL_CONGRESS_GALLERY:"images/regional-congress-gallery",WEBINAR:"images/webinars",COURSE:"images/courses",POST_GRADUATE_PROGRAM:"images/post-graduate-programs",EVENT:"images/events",SCIENTIFIC_JOURNAL:"images/scientific-journals",BOOK_VOLUME_AUTHOR_IMAGE:"images/book-volumes/authors",BOOK_VOLUME_COVER:"images/book-volumes/covers",BOOK_VOLUME_CATALOG_SHEET:"documents/book-volumes/catalog-sheets",RESEARCH_GROUP_LOGO:"images/research-groups"};var xo=5,Zd=1024,AI=Zd*Zd,Za=xo*AI;PI(Se);var Ka=Se.object({id:Se.uuid(),volumeNumber:Se.coerce.number().int().positive().optional(),year:Se.coerce.number().int().positive().optional(),title:Se.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio.").optional(),author:Se.string().min(1,"Autor \xE9 obrigat\xF3rio.").optional(),accessUrl:Se.string().url("URL de acesso deve ser v\xE1lida").optional(),description:Se.string().optional(),authorImage:Se.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=Za,`A imagem do autor deve ter no m\xE1ximo ${xo}MB.`).optional(),coverImage:Se.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=Za,`A imagem da capa deve ter no m\xE1ximo ${xo}MB.`).optional(),catalogSheet:Se.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=Za,`A ficha catalogr\xE1fica deve ter no m\xE1ximo ${xo}MB.`).optional()}),Mo=class{constructor(e,t){this.bookVolumeRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{id:r,volumeNumber:i,year:n,title:s,author:m,accessUrl:c,description:d,authorImage:R,coverImage:E,catalogSheet:q}=Ka.parse({id:e.params.id,...e.body,authorImage:e.files?.authorImage?.[0],coverImage:e.files?.coverImage?.[0],catalogSheet:e.files?.catalogSheet?.[0]}),Y=await this.bookVolumeRepository.findById(r);if(!Y)throw new p("O volume de livro n\xE3o existe.");let re=Y.authorImageUrl,ue=Y.coverImageUrl,ke=Y.catalogSheetUrl;return R&&(re=await this.firebaseStorageService.uploadFile({file:R,id:r,folder:M.BOOK_VOLUME_AUTHOR_IMAGE})),E&&(ue=await this.firebaseStorageService.uploadFile({file:E,id:r,folder:M.BOOK_VOLUME_COVER})),q&&(ke=await this.firebaseStorageService.uploadFile({file:q,id:r,folder:M.BOOK_VOLUME_CATALOG_SHEET})),await this.bookVolumeRepository.update({id:r,volumeNumber:i,year:n,title:s,author:m,accessUrl:c,description:d,authorImageUrl:re,coverImageUrl:ue,catalogSheetUrl:ke}),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var Kd={method:"post",path:"/book-volumes",tags:["Book Volumes"],summary:"Create book volume",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:v.object({volumeNumber:v.number().int().positive().openapi({description:"N\xFAmero do volume"}),year:v.number().int().positive().openapi({description:"Ano de publica\xE7\xE3o"}),title:v.string().min(1).openapi({description:"T\xEDtulo do livro"}),author:v.string().min(1).openapi({description:"Nome do autor"}),accessUrl:v.string().url().optional().openapi({description:"URL de acesso ao livro"}),description:v.string().optional().openapi({description:"Descri\xE7\xE3o do livro"}),authorImage:v.string().optional().openapi({description:"Imagem do autor (m\xE1ximo 5MB)",type:"string",format:"binary"}),coverImage:v.string().optional().openapi({description:"Imagem da capa (m\xE1ximo 5MB)",type:"string",format:"binary"}),catalogSheet:v.string().optional().openapi({description:"Ficha catalogr\xE1fica (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{201:{description:"Book volume created successfully",summary:"Volume Created"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:v.object({errors:v.record(v.string(),v.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:v.object({message:v.string()})}}}}},Jd={method:"get",path:"/book-volumes",tags:["Book Volumes"],summary:"List book volumes",security:[{bearerAuth:[]}],request:{query:Va},responses:{200:{description:"Paginated list of book volumes retrieved successfully",summary:"Volumes Retrieved",content:{"application/json":{schema:v.object({page:v.number(),totalPages:v.number(),offset:v.number(),limit:v.number(),bookVolumes:v.array(v.object({id:v.string(),volumeNumber:v.number(),year:v.number(),title:v.string(),author:v.string(),accessUrl:v.string().nullable(),authorImageUrl:v.string().nullable(),coverImageUrl:v.string().nullable(),catalogSheetUrl:v.string().nullable(),description:v.string().nullable(),createdAt:v.date(),updatedAt:v.date()}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:v.object({errors:v.record(v.string(),v.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:v.object({message:v.string()})}}}}},Yd={method:"get",path:"/book-volumes/{id}",tags:["Book Volumes"],summary:"Find book volume by ID",security:[{bearerAuth:[]}],request:{params:Ha},responses:{200:{description:"Book volume details retrieved successfully",summary:"Volume Retrieved",content:{"application/json":{schema:v.object({id:v.string(),volumeNumber:v.number(),year:v.number(),title:v.string(),author:v.string(),accessUrl:v.string().nullable(),authorImageUrl:v.string().nullable(),coverImageUrl:v.string().nullable(),catalogSheetUrl:v.string().nullable(),description:v.string().nullable(),createdAt:v.date(),updatedAt:v.date()}).nullable()}}},400:{description:"Invalid volume ID format",summary:"Validation Error",content:{"application/json":{schema:v.object({errors:v.record(v.string(),v.string())})}}},404:{description:"Book volume not found with the provided ID",summary:"Volume Not Found",content:{"application/json":{schema:v.object({message:v.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:v.object({message:v.string()})}}}}},Xd={method:"put",path:"/book-volumes/{id}",tags:["Book Volumes"],summary:"Update book volume",security:[{bearerAuth:[]}],request:{params:Ka.pick({id:!0}),body:{content:{"multipart/form-data":{schema:v.object({volumeNumber:v.number().int().positive().optional().openapi({description:"N\xFAmero do volume"}),year:v.number().int().positive().optional().openapi({description:"Ano de publica\xE7\xE3o"}),title:v.string().min(1).optional().openapi({description:"T\xEDtulo do livro"}),author:v.string().min(1).optional().openapi({description:"Nome do autor"}),accessUrl:v.string().url().optional().openapi({description:"URL de acesso ao livro"}),description:v.string().optional().openapi({description:"Descri\xE7\xE3o do livro"}),authorImage:v.string().optional().openapi({description:"Imagem do autor (m\xE1ximo 5MB)",type:"string",format:"binary"}),coverImage:v.string().optional().openapi({description:"Imagem da capa (m\xE1ximo 5MB)",type:"string",format:"binary"}),catalogSheet:v.string().optional().openapi({description:"Ficha catalogr\xE1fica (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{200:{description:"Book volume updated successfully",summary:"Volume Updated"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:v.object({errors:v.record(v.string(),v.string())})}}},404:{description:"Book volume not found with the provided ID",summary:"Volume Not Found",content:{"application/json":{schema:v.object({message:v.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:v.object({message:v.string()})}}}}},$d={method:"delete",path:"/book-volumes/{id}",tags:["Book Volumes"],summary:"Delete book volume",security:[{bearerAuth:[]}],request:{params:_a},responses:{200:{description:"Book volume deleted successfully",summary:"Volume Deleted"},400:{description:"Invalid volume ID format",summary:"Validation Error",content:{"application/json":{schema:v.object({errors:v.record(v.string(),v.string())})}}},404:{description:"Book volume not found with the provided ID",summary:"Volume Not Found",content:{"application/json":{schema:v.object({message:v.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:v.object({message:v.string()})}}}}};import{$Enums as OI}from"@prisma/client";import A from"zod";import{extendZodWithOpenApi as TI}from"@asteasolutions/zod-to-openapi";import Ja from"zod";TI(Ja);var Ya=Ja.object({id:Ja.string()}),Po=class{constructor(e,t){this.certificationRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{id:r}=Ya.parse({id:e.params.certification_id}),i=await this.certificationRepository.findById(r);if(!i)throw new p("A certifica\xE7\xE3o n\xE3o existe.");return await Promise.all([this.certificationRepository.deleteById(i.id),this.firebaseStorageService.deleteFile({fileUrl:i.certificationUrl})]),t.sendStatus(204)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as DI}from"@asteasolutions/zod-to-openapi";import Xa from"zod";DI(Xa);var $a=Xa.object({certificationId:Xa.uuid()}),Ao=class{constructor(e){this.certificationRepository=e}async handle(e,t){try{let{certificationId:r}=$a.parse({certificationId:e.params.certification_id}),i=await this.certificationRepository.findById(r);if(!i)throw new p("Certificado n\xE3o encontrado.");return t.status(200).json(i)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as FI}from"@asteasolutions/zod-to-openapi";import sr from"zod";var BI=1,qI=6;FI(sr);var Qa=sr.object({page:sr.coerce.number().min(1).default(BI),limit:sr.coerce.number().min(1).default(qI),title:sr.string().optional(),description:sr.string().optional(),userId:sr.uuid().optional(),orderBy:sr.enum(["asc","desc"]).default("desc")}),To=class{constructor(e){this.certificationRepository=e}async handle(e,t){try{let{limit:r,page:i,...n}=Qa.parse(e.query),s=i*r-r,[m,c]=await Promise.all([this.certificationRepository.find({pagination:{offset:s,limit:r},filter:n}),this.certificationRepository.count({filter:n})]),d=Math.max(Math.ceil(c/r),1);return t.status(200).json({page:i,totalPages:d,offset:s,limit:r,certifications:m})}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as UI}from"@asteasolutions/zod-to-openapi";import it from"zod";UI(it);var Fo=it.object({userId:it.uuid(),title:it.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),description:it.string().min(1,"Descri\xE7\xE3o \xE9 obrigat\xF3ria."),certification:it.any().refine(o=>o&&typeof o=="object"&&o.size>0,"Arquivo do certificado \xE9 obrigat\xF3rio")}),Do=class{constructor(e,t,r){this.userRepository=e;this.certificationRepository=t;this.firebaseStorageService=r}async handle(e,t){try{let{userId:r,title:i,description:n,certification:s}=Fo.parse({...e.body,userId:e.params.user_id,certification:e.file});if(!await this.userRepository.findById(r))throw new ge("O usu\xE1rio n\xE3o existe.");let c=await this.firebaseStorageService.uploadFile({file:s,id:r,folder:M.CERTIFICATION});return await this.certificationRepository.register({userId:r,title:i,description:n,certificationUrl:c}),t.sendStatus(201)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as kI}from"@asteasolutions/zod-to-openapi";import nt from"zod";kI(nt);var qo=nt.object({id:nt.uuid(),title:nt.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),description:nt.string().min(1,"Descri\xE7\xE3o \xE9 obrigat\xF3ria."),certification:nt.any().refine(o=>o==null||typeof o=="object"&&typeof o.size=="number"&&(o.size===0||o.size>0),"Arquivo do certificado \xE9 inv\xE1lido").optional()}),Bo=class{constructor(e,t){this.certificationRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{certification:r,id:i,...n}=qo.parse({...e.body,id:e.params.certification_id,certification:e.file}),s=await this.certificationRepository.findById(i);if(!s)throw new ge("A certifica\xE7\xE3o n\xE3o existe");let m=s.certificationUrl;return r&&r.size>0&&(m=await this.firebaseStorageService.updateFile({file:r,id:s.userId,folder:M.CERTIFICATION,fileUrl:s.certificationUrl})),await this.certificationRepository.update({...n,id:i,certificationUrl:m}),t.sendStatus(204)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var Qd={method:"post",path:"/certifications/{user_id}",tags:["Certifications"],summary:"Register certification for user",security:[{bearerAuth:[]}],request:{params:Fo.pick({userId:!0}).transform(()=>({user_id:""})),body:{content:{"multipart/form-data":{schema:Fo.omit({userId:!0})}}}},responses:{201:{description:"Certification registered successfully for the user",summary:"Certification Registered",content:{"application/json":{schema:A.object({message:A.string()})}}},400:{description:"Invalid input data or file format",summary:"Validation Error",content:{"application/json":{schema:A.object({errors:A.record(A.string(),A.string())})}}},404:{description:"User not found with the provided ID",summary:"User Not Found",content:{"application/json":{schema:A.object({message:A.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:A.object({message:A.string()})}}}}},el={method:"get",path:"/certifications",tags:["Certifications"],summary:"List certifications",security:[{bearerAuth:[]}],request:{query:Qa},responses:{200:{description:"Paginated list of certifications with user information retrieved successfully",summary:"Certifications Retrieved",content:{"application/json":{schema:A.object({page:A.number(),totalPages:A.number(),offset:A.number(),limit:A.number(),certifications:A.array(A.object({description:A.string(),userId:A.string(),title:A.string(),id:A.string(),createdAt:A.date(),updatedAt:A.date(),certificationUrl:A.url(),user:A.object({id:A.uuid(),name:A.string(),createdAt:A.date(),updatedAt:A.date(),avatarUrl:A.string().nullable(),emailAddress:A.email(),orcid:A.string().nullable(),phone:A.string().nullable(),lattesUrl:A.url().nullable(),role:A.enum(OI.UserRole)})}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:A.object({errors:A.record(A.string(),A.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:A.object({message:A.string()})}}}}},rl={method:"get",path:"/certifications/{certification_id}",tags:["Certifications"],summary:"Find certification by ID",security:[{bearerAuth:[]}],request:{params:$a},responses:{200:{description:"Certification details retrieved successfully",summary:"Certification Retrieved",content:{"application/json":{schema:A.object({description:A.string(),userId:A.string(),title:A.string(),id:A.string(),createdAt:A.date(),updatedAt:A.date(),certificationUrl:A.url()}).nullable()}}},400:{description:"Invalid certification ID format",summary:"Validation Error",content:{"application/json":{schema:A.object({errors:A.record(A.string(),A.string())})}}},404:{description:"Certification not found with the provided ID",summary:"Certification Not Found",content:{"application/json":{schema:A.object({message:A.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:A.object({message:A.string()})}}}}},tl={method:"put",path:"/certifications/{certification_id}",tags:["Certifications"],summary:"Update certification",security:[{bearerAuth:[]}],request:{params:qo.pick({id:!0}).transform(()=>({certification_id:""})),body:{content:{"multipart/form-data":{schema:qo.omit({id:!0})}}}},responses:{204:{description:"Certification updated successfully",summary:"Certification Updated"},400:{description:"Invalid input data or file format",summary:"Validation Error",content:{"application/json":{schema:A.object({errors:A.record(A.string(),A.string())})}}},404:{description:"Certification not found with the provided ID",summary:"Certification Not Found",content:{"application/json":{schema:A.object({message:A.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:A.object({message:A.string()})}}}}},ol={method:"delete",path:"/certifications/{certification_id}",tags:["Certifications"],summary:"Delete certification",security:[{bearerAuth:[]}],request:{params:Ya},responses:{204:{description:"Certification deleted successfully",summary:"Certification Deleted"},400:{description:"Invalid certification ID format",summary:"Validation Error",content:{"application/json":{schema:A.object({errors:A.record(A.string(),A.string())})}}},404:{description:"Certification not found with the provided ID",summary:"Certification Not Found",content:{"application/json":{schema:A.object({message:A.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:A.object({message:A.string()})}}}}};import I from"zod";import{extendZodWithOpenApi as GI}from"@asteasolutions/zod-to-openapi";import em from"zod";GI(em);var rm=em.object({id:em.uuid()}),Uo=class{constructor(e,t){this.courseRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{id:r}=rm.parse({id:e.params.id}),i=await this.courseRepository.findById(r);if(!i)throw new p("O curso n\xE3o existe.");return i.imageUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.imageUrl}),await this.courseRepository.deleteById(r),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as NI}from"@asteasolutions/zod-to-openapi";import tm from"zod";NI(tm);var om=tm.object({id:tm.uuid()}),ko=class{constructor(e){this.courseRepository=e}async handle(e,t){try{let{id:r}=om.parse({id:e.params.id}),i=await this.courseRepository.findById(r);if(!i)throw new p("Curso n\xE3o encontrado.");return t.status(200).json(i)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as LI}from"@asteasolutions/zod-to-openapi";import ar from"zod";var WI=1,_I=6;LI(ar);var im=ar.object({page:ar.coerce.number().min(1).default(WI),limit:ar.coerce.number().min(1).default(_I),title:ar.string().optional(),description:ar.string().optional(),coordinator:ar.string().optional(),orderBy:ar.enum(["asc","desc"]).default("desc")}),Oo=class{constructor(e){this.courseRepository=e}async handle(e,t){try{let{limit:r,page:i,...n}=im.parse(e.query),s=i*r-r,[m,c]=await Promise.all([this.courseRepository.find({pagination:{offset:s,limit:r},filter:n}),this.courseRepository.count({filter:n})]),d=Math.max(Math.ceil(c/r),1);return t.status(200).json({page:i,totalPages:d,offset:s,limit:r,courses:m})}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as zI}from"@asteasolutions/zod-to-openapi";import fe from"zod";var nl=5,il=1024,HI=il*il,VI=nl*HI;zI(fe);var nm=fe.object({id:fe.uuid(),title:fe.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio.").optional(),coordinatorId:fe.string().uuid("Coordenador \xE9 obrigat\xF3rio.").optional(),email:fe.string().email("E-mail deve ser v\xE1lido.").optional(),location:fe.string().min(1,"Localiza\xE7\xE3o \xE9 obrigat\xF3ria.").optional(),scheduledAt:fe.coerce.date().optional(),registrationLink:fe.url("URL de inscri\xE7\xE3o deve ser v\xE1lida").optional(),description:fe.string().optional(),instructorIds:fe.transform(o=>typeof o=="string"?o.split(","):o).pipe(fe.array(fe.uuid())).optional(),image:fe.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=VI,`A imagem deve ter no m\xE1ximo ${nl}MB.`).optional()}),Go=class{constructor(e,t){this.courseRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{id:r,image:i,title:n,coordinatorId:s,email:m,location:c,scheduledAt:d,registrationLink:R,description:E,instructorIds:q}=nm.parse({id:e.params.id,...e.body,image:e.file}),Y=await this.courseRepository.findById(r);if(!Y)throw new p("O curso n\xE3o existe.");let re=Y.imageUrl;if(i&&(re=await this.firebaseStorageService.uploadFile({file:i,id:r,folder:M.COURSE})),!re)throw new a("URL da imagem \xE9 obrigat\xF3rio");return await this.courseRepository.update({id:r,title:n,coordinatorId:s,email:m,location:c,scheduledAt:d,registrationLink:R,description:E,imageUrl:re,instructorIds:q}),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var sl={method:"post",path:"/courses",tags:["Courses"],summary:"Create course",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:I.object({title:I.string().min(1).openapi({description:"T\xEDtulo do curso"}),coordinator:I.string().min(1).openapi({description:"Nome do coordenador"}),email:I.string().email().openapi({description:"E-mail de contato"}),location:I.string().min(1).openapi({description:"Localiza\xE7\xE3o do curso"}),scheduledAt:I.string().openapi({description:"Data e hora agendada (ISO 8601)",example:"2024-01-01T10:00:00Z"}),registrationLink:I.string().url().optional().openapi({description:"Link de inscri\xE7\xE3o"}),description:I.string().optional().openapi({description:"Descri\xE7\xE3o do curso"}),instructorIds:I.string().openapi({description:"IDs dos instrutores separados por v\xEDrgula",example:"uuid1,uuid2,uuid3"}),image:I.string().optional().openapi({description:"Imagem do curso (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{201:{description:"Course created successfully",summary:"Course Created"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:I.object({errors:I.record(I.string(),I.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:I.object({message:I.string()})}}}}},al={method:"get",path:"/courses",tags:["Courses"],summary:"List courses",security:[{bearerAuth:[]}],request:{query:im},responses:{200:{description:"Paginated list of courses with instructor information retrieved successfully",summary:"Courses Retrieved",content:{"application/json":{schema:I.object({page:I.number(),totalPages:I.number(),offset:I.number(),limit:I.number(),courses:I.array(I.object({id:I.string(),title:I.string(),imageUrl:I.string().nullable(),coordinator:I.string(),email:I.string(),scheduledAt:I.date(),location:I.string(),registrationLink:I.string().nullable(),description:I.string().nullable(),createdAt:I.date(),updatedAt:I.date(),instructors:I.array(I.object({id:I.uuid(),name:I.string(),emailAddress:I.email(),avatarUrl:I.string().nullable(),createdAt:I.date(),updatedAt:I.date()}))}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:I.object({errors:I.record(I.string(),I.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:I.object({message:I.string()})}}}}},ml={method:"get",path:"/courses/{id}",tags:["Courses"],summary:"Find course by ID",security:[{bearerAuth:[]}],request:{params:om},responses:{200:{description:"Course details retrieved successfully",summary:"Course Retrieved",content:{"application/json":{schema:I.object({id:I.string(),title:I.string(),imageUrl:I.string().nullable(),coordinator:I.string(),email:I.string(),scheduledAt:I.date(),location:I.string(),registrationLink:I.string().nullable(),description:I.string().nullable(),createdAt:I.date(),updatedAt:I.date(),instructors:I.array(I.object({id:I.uuid(),name:I.string(),emailAddress:I.email(),avatarUrl:I.string().nullable(),createdAt:I.date(),updatedAt:I.date()}))}).nullable()}}},400:{description:"Invalid course ID format",summary:"Validation Error",content:{"application/json":{schema:I.object({errors:I.record(I.string(),I.string())})}}},404:{description:"Course not found with the provided ID",summary:"Course Not Found",content:{"application/json":{schema:I.object({message:I.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:I.object({message:I.string()})}}}}},cl={method:"put",path:"/courses/{id}",tags:["Courses"],summary:"Update course",security:[{bearerAuth:[]}],request:{params:nm.pick({id:!0}),body:{content:{"multipart/form-data":{schema:I.object({title:I.string().min(1).optional().openapi({description:"T\xEDtulo do curso"}),coordinator:I.string().min(1).optional().openapi({description:"Nome do coordenador"}),email:I.string().email().optional().openapi({description:"E-mail de contato"}),location:I.string().min(1).optional().openapi({description:"Localiza\xE7\xE3o do curso"}),scheduledAt:I.string().optional().openapi({description:"Data e hora agendada (ISO 8601)",example:"2024-01-01T10:00:00Z"}),registrationLink:I.string().url().optional().openapi({description:"Link de inscri\xE7\xE3o"}),description:I.string().optional().openapi({description:"Descri\xE7\xE3o do curso"}),instructorIds:I.string().optional().openapi({description:"IDs dos instrutores separados por v\xEDrgula",example:"uuid1,uuid2,uuid3"}),image:I.string().optional().openapi({description:"Imagem do curso (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{200:{description:"Course updated successfully",summary:"Course Updated"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:I.object({errors:I.record(I.string(),I.string())})}}},404:{description:"Course not found with the provided ID",summary:"Course Not Found",content:{"application/json":{schema:I.object({message:I.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:I.object({message:I.string()})}}}}},pl={method:"delete",path:"/courses/{id}",tags:["Courses"],summary:"Delete course",security:[{bearerAuth:[]}],request:{params:rm},responses:{200:{description:"Course deleted successfully",summary:"Course Deleted"},400:{description:"Invalid course ID format",summary:"Validation Error",content:{"application/json":{schema:I.object({errors:I.record(I.string(),I.string())})}}},404:{description:"Course not found with the provided ID",summary:"Course Not Found",content:{"application/json":{schema:I.object({message:I.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:I.object({message:I.string()})}}}}};import{$Enums as dm}from"@prisma/client";import w from"zod";import{extendZodWithOpenApi as ZI}from"@asteasolutions/zod-to-openapi";import Ae from"zod";ZI(Ae);var sm=Ae.object({code:Ae.string(),title:Ae.string(),description:Ae.string().optional(),notes:Ae.string().optional(),leaderId:Ae.uuid(),deputyLeaderId:Ae.uuid(),secretaryId:Ae.uuid(),memberIds:Ae.array(Ae.uuid())}),No=class{constructor(e){this.etpRepository=e}async handle(e,t){try{let{code:r,title:i,description:n,notes:s,leaderId:m,deputyLeaderId:c,secretaryId:d,memberIds:R}=sm.parse(e.body);if(await this.etpRepository.findByCode(r))throw new ae("J\xE1 existe um ETP cadastrado com este c\xF3digo.");return await this.etpRepository.create({code:r,title:i,description:n,notes:s,leaderId:m,deputyLeaderId:c,secretaryId:d,memberIds:R}),t.sendStatus(201)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as KI}from"@asteasolutions/zod-to-openapi";import am from"zod";KI(am);var mm=am.object({id:am.uuid()}),Lo=class{constructor(e){this.etpRepository=e}async handle(e,t){try{let{id:r}=mm.parse({id:e.params.id});if(!await this.etpRepository.findById(r))throw new p("O ETP n\xE3o existe.");return await this.etpRepository.deleteById(r),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as JI}from"@asteasolutions/zod-to-openapi";import cm from"zod";JI(cm);var _o=cm.object({id:cm.uuid()}),Wo=class{constructor(e){this.etpRepository=e}async handle(e,t){try{let{id:r}=_o.parse({id:e.params.id}),i=await this.etpRepository.findById(r);if(!i)throw new p("O ETP n\xE3o existe.");return t.status(200).json(i)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as YI}from"@asteasolutions/zod-to-openapi";import ve from"zod";YI(ve);var pm=ve.object({id:ve.uuid(),code:ve.string().optional(),title:ve.string().optional(),description:ve.string().optional(),notes:ve.string().optional(),leaderId:ve.uuid().optional(),deputyLeaderId:ve.uuid().optional(),secretaryId:ve.uuid().optional(),memberIds:ve.array(ve.uuid()).optional()}),zo=class{constructor(e){this.etpRepository=e}async handle(e,t){try{let{id:r,code:i,title:n,description:s,notes:m,leaderId:c,deputyLeaderId:d,secretaryId:R,memberIds:E}=pm.parse({id:e.params.id,...e.body});if(!await this.etpRepository.findById(r))throw new p("O ETP n\xE3o existe.");if(i){let Y=await this.etpRepository.findByCode(i);if(Y&&Y.id!==r)throw new ae("J\xE1 existe um ETP com este c\xF3digo.")}return await this.etpRepository.update({id:r,code:i,title:n,description:s,notes:m,leaderId:c,deputyLeaderId:d,secretaryId:R,memberIds:E}),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var XI=1,$I=9,Ho=w.object({id:w.uuid(),registrationNumber:w.string(),mainEtps:w.string().nullable(),formations:w.string().nullable(),degrees:w.array(w.enum(dm.Degree)),occupations:w.string(),seniority:w.enum(dm.Seniority),institutions:w.string(),biography:w.string().nullable(),createdAt:w.date(),updatedAt:w.date(),user:w.object({id:w.uuid(),name:w.string(),emailAddress:w.string(),avatarUrl:w.string().nullable(),orcid:w.string().nullable(),phone:w.string().nullable(),lattesUrl:w.string().nullable(),role:w.enum(dm.UserRole)})}),dl=w.object({id:w.uuid(),code:w.string(),title:w.string(),description:w.string().nullable(),notes:w.string().nullable(),createdAt:w.date(),updatedAt:w.date(),leader:w.object({id:w.uuid(),researcher:Ho}).nullable(),deputyLeader:w.object({id:w.uuid(),researcher:Ho}).nullable(),secretary:w.object({id:w.uuid(),researcher:Ho}).nullable(),members:w.array(Ho)}),ll={method:"post",path:"/etp",tags:["ETPs"],summary:"Create a new ETP with single leader, deputy leader, secretary and multiple members",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:sm}}}},responses:{201:{description:"ETP created successfully",summary:"ETP Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:w.object({errors:w.record(w.string(),w.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:w.object({message:w.string()})}}},409:{description:"ETP with this code already exists",summary:"Conflict",content:{"application/json":{schema:w.object({message:w.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:w.object({message:w.string()})}}}}},ul={method:"get",path:"/etp",tags:["ETPs"],summary:"List all ETPs with pagination and filters",request:{query:w.object({page:w.coerce.number().min(1).default(XI).optional(),limit:w.coerce.number().min(1).default($I).optional(),code:w.string().optional(),title:w.string().optional(),description:w.string().optional(),notes:w.string().optional(),orderBy:w.enum(["asc","desc"]).optional()})},responses:{200:{description:"List of ETPs retrieved successfully with pagination",summary:"ETPs Retrieved",content:{"application/json":{schema:w.object({page:w.number(),totalPages:w.number(),offset:w.number(),limit:w.number(),etps:w.array(dl)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:w.object({message:w.string()})}}}}},gl={method:"get",path:"/etp/{id}",tags:["ETPs"],summary:"Find ETP by ID",request:{params:_o},responses:{200:{description:"ETP details retrieved successfully",summary:"ETP Retrieved",content:{"application/json":{schema:dl}}},400:{description:"Invalid ETP ID format",summary:"Validation Error",content:{"application/json":{schema:w.object({errors:w.record(w.string(),w.string())})}}},404:{description:"ETP not found with the provided ID",summary:"ETP Not Found",content:{"application/json":{schema:w.object({message:w.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:w.object({message:w.string()})}}}}},fl={method:"put",path:"/etp/{id}",tags:["ETPs"],summary:"Update ETP and manage user relationships (single leader, deputy leader, secretary, multiple members)",security:[{bearerAuth:[]}],request:{params:_o,body:{content:{"application/json":{schema:pm.omit({id:!0})}}}},responses:{200:{description:"ETP updated successfully",summary:"ETP Updated"},400:{description:"Invalid input data or ETP ID format",summary:"Validation Error",content:{"application/json":{schema:w.object({errors:w.record(w.string(),w.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:w.object({message:w.string()})}}},404:{description:"ETP not found with the provided ID",summary:"ETP Not Found",content:{"application/json":{schema:w.object({message:w.string()})}}},409:{description:"ETP with this code already exists",summary:"Conflict",content:{"application/json":{schema:w.object({message:w.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:w.object({message:w.string()})}}}}},yl={method:"delete",path:"/etp/{id}",tags:["ETPs"],summary:"Delete ETP",security:[{bearerAuth:[]}],request:{params:mm},responses:{200:{description:"ETP deleted successfully",summary:"ETP Deleted"},400:{description:"Invalid ETP ID format",summary:"Validation Error",content:{"application/json":{schema:w.object({errors:w.record(w.string(),w.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:w.object({message:w.string()})}}},404:{description:"ETP not found with the provided ID",summary:"ETP Not Found",content:{"application/json":{schema:w.object({message:w.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:w.object({message:w.string()})}}}}};import{EventFormat as yb,EventStatus as hb}from"@prisma/client";import G from"zod";import{extendZodWithOpenApi as QI}from"@asteasolutions/zod-to-openapi";import{EventFormat as Vo,EventStatus as lm}from"@prisma/client";import Ee from"zod";var eb=5,hl=1024,rb=hl*hl,tb=eb*rb;QI(Ee);var um=Ee.object({title:Ee.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio"),description:Ee.string().optional(),startDate:Ee.coerce.date(),endDate:Ee.coerce.date(),location:Ee.string().optional(),format:Ee.enum(Vo).default(Vo.ONLINE),eventLink:Ee.string().url("Link do evento deve ser uma URL v\xE1lida").optional().or(Ee.literal("")),status:Ee.enum(lm).default(lm.PENDING),image:Ee.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=tb,"A imagem deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.")}).refine(o=>o.format===Vo.ONLINE?!!o.eventLink:o.format===Vo.IN_PERSON?!!o.location:!0,{message:"Eventos online devem ter link e eventos presenciais devem ter localiza\xE7\xE3o",path:["format"]}),Zo=class{constructor(e,t){this.eventRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{title:r,description:i,startDate:n,endDate:s,location:m,format:c,eventLink:d,status:R,image:E}=um.parse({...e.body,image:e.file}),q=await this.eventRepository.create({title:r,description:i,startDate:n,endDate:s,location:m||void 0,format:c,eventLink:d||void 0,status:R??lm.PENDING}),Y=await this.firebaseStorageService.uploadFile({file:E,folder:M.EVENT,id:q.id});return await this.eventRepository.update({id:q.id,imageUrl:Y}),t.sendStatus(201)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as ob}from"@asteasolutions/zod-to-openapi";import gm from"zod";ob(gm);var fm=gm.object({id:gm.uuid()}),Ko=class{constructor(e){this.eventRepository=e}async handle(e,t){try{let{id:r}=fm.parse({id:e.params.id});if(!await this.eventRepository.findById(r))throw new p("O evento n\xE3o existe.");return await this.eventRepository.deleteById(r),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as ib}from"@asteasolutions/zod-to-openapi";import ym from"zod";ib(ym);var Yo=ym.object({id:ym.uuid()}),Jo=class{constructor(e){this.eventRepository=e}async handle(e,t){try{let{id:r}=Yo.parse({id:e.params.id}),i=await this.eventRepository.findById(r);if(!i)throw new p("O evento n\xE3o existe.");return t.status(200).json(i)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as nb}from"@asteasolutions/zod-to-openapi";import{EventFormat as sb,EventStatus as ab}from"@prisma/client";import mr from"zod";var mb=1,cb=10;nb(mr);var hm=mr.object({page:mr.coerce.number().min(1).default(mb),limit:mr.coerce.number().min(1).default(cb),title:mr.string().optional(),status:mr.nativeEnum(ab).optional(),format:mr.nativeEnum(sb).optional(),orderBy:mr.enum(["asc","desc"]).optional()}),Xo=class{constructor(e){this.eventRepository=e}async handle(e,t){try{let{page:r,limit:i,...n}=hm.parse(e.query),s=i*r-i,[m,c]=await Promise.all([this.eventRepository.find({pagination:{offset:s,limit:i},filter:n}),this.eventRepository.count({filter:n})]),d=Math.max(Math.ceil(c/i),1);t.status(200).json({page:r,totalPages:d,offset:s,limit:i,events:m})}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as pb}from"@asteasolutions/zod-to-openapi";import{EventFormat as db,EventStatus as lb}from"@prisma/client";import he from"zod";var ub=5,Rl=1024,gb=Rl*Rl,fb=ub*gb;pb(he);var Rm=he.object({id:he.uuid(),title:he.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio").optional(),description:he.string().optional(),startDate:he.coerce.date().optional(),endDate:he.coerce.date().optional(),location:he.string().optional(),format:he.nativeEnum(db).optional(),eventLink:he.string().url("Link do evento deve ser uma URL v\xE1lida").optional().or(he.literal("")),status:he.nativeEnum(lb).optional(),image:he.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=fb,"A imagem deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.").optional()}),$o=class{constructor(e,t){this.eventRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{id:r,title:i,description:n,startDate:s,endDate:m,location:c,format:d,eventLink:R,status:E,image:q}=Rm.parse({id:e.params.id,...e.body,image:e.file});if(!await this.eventRepository.findById(r))throw new p("O evento n\xE3o existe.");let re;return q&&(re=await this.firebaseStorageService.uploadFile({file:q,folder:M.EVENT,id:r})),await this.eventRepository.update({id:r,title:i,description:n,startDate:s,endDate:m,location:c||void 0,format:d,eventLink:R||void 0,status:E,imageUrl:re}),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var Il=G.object({id:G.uuid(),title:G.string(),description:G.string().nullable(),imageUrl:G.string().nullable(),startDate:G.date(),endDate:G.date(),location:G.string().nullable(),status:G.nativeEnum(hb),format:G.nativeEnum(yb),eventLink:G.string().nullable(),createdAt:G.date(),updatedAt:G.date()}),bl={method:"post",path:"/event",tags:["Events"],summary:"Create a new event",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:um}}}},responses:{201:{description:"Event created successfully",summary:"Event Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:G.object({errors:G.record(G.string(),G.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:G.object({message:G.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:G.object({message:G.string()})}}}}},Cl={method:"get",path:"/event",tags:["Events"],summary:"List all events with pagination and filters",request:{query:hm},responses:{200:{description:"List of events retrieved successfully with pagination",summary:"Events Retrieved",content:{"application/json":{schema:G.object({page:G.number(),totalPages:G.number(),offset:G.number(),limit:G.number(),events:G.array(Il)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:G.object({errors:G.record(G.string(),G.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:G.object({message:G.string()})}}}}},wl={method:"get",path:"/event/{id}",tags:["Events"],summary:"Find event by ID",request:{params:Yo},responses:{200:{description:"Event details retrieved successfully",summary:"Event Retrieved",content:{"application/json":{schema:Il}}},400:{description:"Invalid event ID format",summary:"Validation Error",content:{"application/json":{schema:G.object({errors:G.record(G.string(),G.string())})}}},404:{description:"Event not found with the provided ID",summary:"Event Not Found",content:{"application/json":{schema:G.object({message:G.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:G.object({message:G.string()})}}}}},Sl={method:"put",path:"/event/{id}",tags:["Events"],summary:"Update event",security:[{bearerAuth:[]}],request:{params:Yo,body:{content:{"multipart/form-data":{schema:Rm.omit({id:!0})}}}},responses:{200:{description:"Event updated successfully",summary:"Event Updated"},400:{description:"Invalid input data or event ID format",summary:"Validation Error",content:{"application/json":{schema:G.object({errors:G.record(G.string(),G.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:G.object({message:G.string()})}}},404:{description:"Event not found with the provided ID",summary:"Event Not Found",content:{"application/json":{schema:G.object({message:G.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:G.object({message:G.string()})}}}}},vl={method:"delete",path:"/event/{id}",tags:["Events"],summary:"Delete event",security:[{bearerAuth:[]}],request:{params:fm},responses:{200:{description:"Event deleted successfully",summary:"Event Deleted"},400:{description:"Invalid event ID format",summary:"Validation Error",content:{"application/json":{schema:G.object({errors:G.record(G.string(),G.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:G.object({message:G.string()})}}},404:{description:"Event not found with the provided ID",summary:"Event Not Found",content:{"application/json":{schema:G.object({message:G.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:G.object({message:G.string()})}}}}};import{InMemoriamRole as Bb}from"@prisma/client";import D from"zod";import{extendZodWithOpenApi as Rb}from"@asteasolutions/zod-to-openapi";import{InMemoriamRole as Ib}from"@prisma/client";import cr from"zod";var jl=2,El=1024,bb=El*El,Cb=jl*bb;Rb(cr);var Im=cr.object({name:cr.string().min(1,"Nome \xE9 obrigat\xF3rio"),birthDate:cr.coerce.date(),deathDate:cr.coerce.date(),biography:cr.string().optional(),photo:cr.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=Cb,`A imagem deve ter no m\xE1ximo ${jl}MB.`).optional(),role:cr.enum(Ib)}).refine(o=>o.deathDate>o.birthDate,{message:"Data de falecimento deve ser posterior \xE0 data de nascimento",path:["deathDate"]}),Qo=class{constructor(e,t){this.inMemoriamRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{name:r,birthDate:i,deathDate:n,biography:s,role:m,photo:c}=Im.parse({...e.body,photo:e.file}),d=await this.inMemoriamRepository.create({name:r,birthDate:i,deathDate:n,biography:s??void 0,role:m}),R;return c&&(R=await this.firebaseStorageService.uploadFile({file:c,id:d.id,folder:M.IN_MEMORIAM}),await this.inMemoriamRepository.update({id:d.id,photoUrl:R})),t.sendStatus(201)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as wb}from"@asteasolutions/zod-to-openapi";import bm from"zod";wb(bm);var Cm=bm.object({id:bm.uuid()}),ei=class{constructor(e,t){this.inMemoriamRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{id:r}=Cm.parse({id:e.params.id}),i=await this.inMemoriamRepository.findById(r);if(!i)throw new p("O in memoriam n\xE3o existe.");return i.photoUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.photoUrl}),await this.inMemoriamRepository.deleteById(r),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as Sb}from"@asteasolutions/zod-to-openapi";import wm from"zod";Sb(wm);var ti=wm.object({id:wm.uuid()}),ri=class{constructor(e){this.inMemoriamRepository=e}async handle(e,t){try{let{id:r}=ti.parse({id:e.params.id}),i=await this.inMemoriamRepository.findById(r);if(!i)throw new p("O in memoriam n\xE3o existe.");return t.status(200).json(i)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as vb}from"@asteasolutions/zod-to-openapi";import{InMemoriamRole as Eb}from"@prisma/client";import Sm from"zod";vb(Sm);var vm=Sm.object({role:Sm.enum(Eb)}),oi=class{constructor(e){this.inMemoriamRepository=e}async handle(e,t){try{let{role:r}=vm.parse({role:e.params.role}),i=await this.inMemoriamRepository.findByRole(r);return t.status(200).json(i)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as jb}from"@asteasolutions/zod-to-openapi";import{InMemoriamRole as xb}from"@prisma/client";import pr from"zod";var Mb=1,Pb=9;jb(pr);var Em=pr.object({page:pr.coerce.number().min(1).default(Mb),limit:pr.coerce.number().min(1).default(Pb),name:pr.string().optional(),biography:pr.string().optional(),role:pr.enum(xb).optional(),orderBy:pr.enum(["asc","desc"]).default("desc")}),ii=class{constructor(e){this.inMemoriamRepository=e}async handle(e,t){try{let{page:r,limit:i,...n}=Em.parse(e.query),s=i*r-i,[m,c]=await Promise.all([this.inMemoriamRepository.find({pagination:{offset:s,limit:i},filter:n}),this.inMemoriamRepository.count({filter:n})]),d=Math.max(Math.ceil(c/i),1);t.status(200).json({page:r,totalPages:d,offset:s,limit:i,inMemoriam:m})}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as Ab}from"@asteasolutions/zod-to-openapi";import{InMemoriamRole as Tb}from"@prisma/client";import He from"zod";var Ml=2,xl=1024,Db=xl*xl,Fb=Ml*Db;Ab(He);var jm=He.object({id:He.uuid(),name:He.string().min(1,"Nome \xE9 obrigat\xF3rio").optional(),birthDate:He.coerce.date().optional(),deathDate:He.coerce.date().optional(),biography:He.string().optional(),photo:He.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=Fb,`A imagem deve ter no m\xE1ximo ${Ml}MB.`).optional(),role:He.enum(Tb).optional()}).refine(o=>o.birthDate&&o.deathDate?o.deathDate>o.birthDate:!0,{message:"Data de falecimento deve ser posterior \xE0 data de nascimento",path:["deathDate"]}),ni=class{constructor(e,t){this.inMemoriamRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{id:r,name:i,birthDate:n,deathDate:s,biography:m,photo:c,role:d}=jm.parse({id:e.params.id,...e.body,photo:e.file}),R=await this.inMemoriamRepository.findById(r);if(!R)throw new p("O registro in memoriam n\xE3o existe.");let E=R.photoUrl;return c&&(E=await this.firebaseStorageService.uploadFile({file:c,id:r,folder:M.IN_MEMORIAM})),await this.inMemoriamRepository.update({id:r,name:i,birthDate:n,deathDate:s,biography:m,photoUrl:E??void 0,role:d}),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var xm=D.object({id:D.uuid(),name:D.string(),birthDate:D.date(),deathDate:D.date(),biography:D.string().nullable(),photoUrl:D.string().nullable(),role:D.enum(Bb),createdAt:D.date(),updatedAt:D.date()}),Pl={method:"post",path:"/in-memoriam",tags:["In Memoriam"],summary:"Create a new in memoriam record with optional photo upload",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:Im}}}},responses:{201:{description:"In memoriam record created successfully",summary:"In Memoriam Created"},400:{description:"Invalid input data, missing required fields, or invalid photo format/size",summary:"Validation Error",content:{"application/json":{schema:D.object({errors:D.record(D.string(),D.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:D.object({message:D.string()})}}},409:{description:"In memoriam record with this name already exists",summary:"Conflict",content:{"application/json":{schema:D.object({message:D.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:D.object({message:D.string()})}}}}},Al={method:"get",path:"/in-memoriam",tags:["In Memoriam"],summary:"List all in memoriam records with pagination and filters",request:{query:Em},responses:{200:{description:"List of in memoriam records retrieved successfully with pagination",summary:"In Memoriam Records Retrieved",content:{"application/json":{schema:D.object({page:D.number(),totalPages:D.number(),offset:D.number(),limit:D.number(),inMemoriam:D.array(xm)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:D.object({errors:D.record(D.string(),D.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:D.object({message:D.string()})}}}}},Tl={method:"get",path:"/in-memoriam/{id}",tags:["In Memoriam"],summary:"Find in memoriam record by ID",request:{params:ti},responses:{200:{description:"In memoriam record details retrieved successfully",summary:"In Memoriam Record Retrieved",content:{"application/json":{schema:xm}}},400:{description:"Invalid in memoriam record ID format",summary:"Validation Error",content:{"application/json":{schema:D.object({errors:D.record(D.string(),D.string())})}}},404:{description:"In memoriam record not found with the provided ID",summary:"In Memoriam Record Not Found",content:{"application/json":{schema:D.object({message:D.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:D.object({message:D.string()})}}}}},Dl={method:"put",path:"/in-memoriam/{id}",tags:["In Memoriam"],summary:"Update in memoriam record with optional photo upload",security:[{bearerAuth:[]}],request:{params:ti,body:{content:{"multipart/form-data":{schema:jm.omit({id:!0})}}}},responses:{200:{description:"In memoriam record updated successfully",summary:"In Memoriam Record Updated"},400:{description:"Invalid input data, in memoriam record ID format, or invalid photo format/size",summary:"Validation Error",content:{"application/json":{schema:D.object({errors:D.record(D.string(),D.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:D.object({message:D.string()})}}},404:{description:"In memoriam record not found with the provided ID",summary:"In Memoriam Record Not Found",content:{"application/json":{schema:D.object({message:D.string()})}}},409:{description:"In memoriam record with this name already exists",summary:"Conflict",content:{"application/json":{schema:D.object({message:D.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:D.object({message:D.string()})}}}}},Fl={method:"delete",path:"/in-memoriam/{id}",tags:["In Memoriam"],summary:"Delete in memoriam record",security:[{bearerAuth:[]}],request:{params:Cm},responses:{200:{description:"In memoriam record deleted successfully",summary:"In Memoriam Record Deleted"},400:{description:"Invalid in memoriam record ID format",summary:"Validation Error",content:{"application/json":{schema:D.object({errors:D.record(D.string(),D.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:D.object({message:D.string()})}}},404:{description:"In memoriam record not found with the provided ID",summary:"In Memoriam Record Not Found",content:{"application/json":{schema:D.object({message:D.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:D.object({message:D.string()})}}}}},lT={method:"get",path:"/in-memoriam/role/{role}",tags:["In Memoriam"],summary:"Find in memoriam records by role",request:{params:vm},responses:{200:{description:"In memoriam records retrieved successfully by role",summary:"In Memoriam Records Retrieved by Role",content:{"application/json":{schema:D.array(xm)}}},400:{description:"Invalid role parameter provided",summary:"Validation Error",content:{"application/json":{schema:D.object({errors:D.record(D.string(),D.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:D.object({message:D.string()})}}}}};import X from"zod";import{extendZodWithOpenApi as qb}from"@asteasolutions/zod-to-openapi";import _t from"zod";var ql=2,Bl=1024,Ub=Bl*Bl,kb=ql*Ub;qb(_t);var Mm=_t.object({image:_t.any().refine(o=>o==null||typeof o!="object"||typeof o.size!="number"?!1:o.size<=kb,`A imagem deve ter no m\xE1ximo ${ql}MB.`),caption:_t.string().optional(),congressId:_t.uuid()}),si=class{constructor(e,t,r){this.internationalScientificCongressGalleryRepository=e;this.internationalScientificCongressRepository=t;this.firebaseStorageService=r}async handle(e,t){try{let{image:r,caption:i,congressId:n}=Mm.parse({...e.body,...e.params,image:e.file});if(!await this.internationalScientificCongressRepository.findById(n))throw new p("O congresso n\xE3o existe.");let m=await this.internationalScientificCongressGalleryRepository.create({imageUrl:"",caption:i||void 0,congressId:n}),c=await this.firebaseStorageService.uploadFile({file:r,id:m.id,folder:M.INTERNATIONAL_SCIENTIFIC_CONGRESS_GALLERY});return await this.internationalScientificCongressGalleryRepository.update({id:m.id,imageUrl:c}),t.sendStatus(201)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as Ob}from"@asteasolutions/zod-to-openapi";import Pm from"zod";Ob(Pm);var mi=Pm.object({id:Pm.uuid()}),ai=class{constructor(e){this.internationalScientificCongressGalleryRepository=e}async handle(e,t){try{let{id:r}=mi.parse({id:e.params.id});if(!await this.internationalScientificCongressGalleryRepository.findById(r))throw new p("A imagem da galeria n\xE3o existe.");return await this.internationalScientificCongressGalleryRepository.deleteById(r),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as Gb}from"@asteasolutions/zod-to-openapi";import st from"zod";var Nb=1,Lb=9;Gb(st);var Am=st.object({congressId:st.uuid(),page:st.coerce.number().min(1).default(Nb),limit:st.coerce.number().min(1).default(Lb),caption:st.string().optional()}),ci=class{constructor(e){this.internationalScientificCongressGalleryRepository=e}async handle(e,t){try{let{congressId:r,page:i,limit:n,...s}=Am.parse({congressId:e.params.congressId,...e.query}),m=n*i-n,[c,d]=await Promise.all([this.internationalScientificCongressGalleryRepository.findByCongressId({pagination:{offset:m,limit:n},filter:{congressId:r,...s}}),this.internationalScientificCongressGalleryRepository.count({filter:{congressId:r,caption:s.caption}})]),R=Math.max(Math.ceil(d/n),1);return t.status(200).json({page:i,totalPages:R,offset:m,limit:n,galleryImages:c})}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as Wb}from"@asteasolutions/zod-to-openapi";import zt from"zod";var kl=2,Ul=1024,_b=Ul*Ul,zb=kl*_b;Wb(zt);var Tm=zt.object({id:zt.uuid(),image:zt.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=zb,`A imagem deve ter no m\xE1ximo ${kl}MB.`).optional(),caption:zt.string().optional()}),pi=class{constructor(e,t){this.internationalScientificCongressGalleryRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{id:r,image:i,caption:n}=Tm.parse({id:e.params.id,...e.body,image:e.file}),s=await this.internationalScientificCongressGalleryRepository.findById(r);if(!s)throw new p("A imagem da galeria n\xE3o existe.");let m=s.imageUrl;return i&&(m=await this.firebaseStorageService.uploadFile({file:i,id:r,folder:M.INTERNATIONAL_SCIENTIFIC_CONGRESS_GALLERY})),await this.internationalScientificCongressGalleryRepository.update({id:r,imageUrl:m??void 0,caption:n||void 0}),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var Hb=X.object({id:X.uuid(),imageUrl:X.string(),caption:X.string().nullable(),congressId:X.uuid()}),Ol={method:"post",path:"/international-scientific-congress/{congressId}/gallery",tags:["International Scientific Congresses"],summary:"Create a new congress gallery image",security:[{bearerAuth:[]}],request:{params:X.object({congressId:X.uuid()}),body:{content:{"application/json":{schema:Mm.omit({congressId:!0})}}}},responses:{201:{description:"Congress gallery image created successfully",summary:"Congress Gallery Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:X.object({errors:X.record(X.string(),X.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:X.object({message:X.string()})}}},404:{description:"Congress not found with the provided ID",summary:"Congress Not Found",content:{"application/json":{schema:X.object({message:X.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:X.object({message:X.string()})}}}}},Gl={method:"get",path:"/international-scientific-congress/{congressId}/gallery",tags:["International Scientific Congresses"],summary:"Find congress gallery images by congress ID",request:{params:Am},responses:{200:{description:"Congress gallery images retrieved successfully by congress ID",summary:"Congress Galleries Retrieved",content:{"application/json":{schema:X.array(Hb)}}},400:{description:"Invalid congress ID parameter provided",summary:"Validation Error",content:{"application/json":{schema:X.object({errors:X.record(X.string(),X.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:X.object({message:X.string()})}}}}},Nl={method:"put",path:"/international-scientific-congress/gallery/{id}",tags:["International Scientific Congresses"],summary:"Update congress gallery image",security:[{bearerAuth:[]}],request:{params:mi,body:{content:{"application/json":{schema:Tm.omit({id:!0})}}}},responses:{200:{description:"Congress gallery image updated successfully",summary:"Congress Gallery Updated"},400:{description:"Invalid input data or gallery ID format",summary:"Validation Error",content:{"application/json":{schema:X.object({errors:X.record(X.string(),X.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:X.object({message:X.string()})}}},404:{description:"Congress gallery image not found with the provided ID",summary:"Congress Gallery Not Found",content:{"application/json":{schema:X.object({message:X.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:X.object({message:X.string()})}}}}},Ll={method:"delete",path:"/international-scientific-congress/gallery/{id}",tags:["International Scientific Congresses"],summary:"Delete congress gallery image",security:[{bearerAuth:[]}],request:{params:mi},responses:{200:{description:"Congress gallery image deleted successfully",summary:"Congress Gallery Deleted"},400:{description:"Invalid gallery ID format",summary:"Validation Error",content:{"application/json":{schema:X.object({errors:X.record(X.string(),X.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:X.object({message:X.string()})}}},404:{description:"Congress gallery image not found with the provided ID",summary:"Congress Gallery Not Found",content:{"application/json":{schema:X.object({message:X.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:X.object({message:X.string()})}}}}};import $ from"zod";import{extendZodWithOpenApi as Vb}from"@asteasolutions/zod-to-openapi";import Ht from"zod";var _l=2,Wl=1024,Zb=Wl*Wl,Kb=_l*Zb;Vb(Ht);var Dm=Ht.object({name:Ht.string().min(1,"Nome \xE9 obrigat\xF3rio"),logo:Ht.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=Kb,`A imagem deve ter no m\xE1ximo ${_l}MB.`).optional(),congressId:Ht.uuid()}),di=class{constructor(e,t,r){this.internationalScientificCongressPartnerRepository=e;this.internationalScientificCongressRepository=t;this.firebaseStorageService=r}async handle(e,t){try{let{name:r,logo:i,congressId:n}=Dm.parse({...e.body,...e.params,logo:e.file});if(!await this.internationalScientificCongressRepository.findById(n))throw new p("O congresso n\xE3o existe.");let m=await this.internationalScientificCongressPartnerRepository.create({name:r,congressId:n}),c;return i&&(c=await this.firebaseStorageService.uploadFile({file:i,id:m.id,folder:M.PARTNER}),await this.internationalScientificCongressPartnerRepository.update({id:m.id,logoUrl:c})),t.sendStatus(201)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as Jb}from"@asteasolutions/zod-to-openapi";import Fm from"zod";Jb(Fm);var ui=Fm.object({id:Fm.uuid()}),li=class{constructor(e){this.internationalScientificCongressPartnerRepository=e}async handle(e,t){try{let{id:r}=ui.parse({id:e.params.id});if(!await this.internationalScientificCongressPartnerRepository.findById(r))throw new p("O parceiro n\xE3o existe.");return await this.internationalScientificCongressPartnerRepository.deleteById(r),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as Yb}from"@asteasolutions/zod-to-openapi";import at from"zod";var Xb=1,$b=9;Yb(at);var Bm=at.object({congressId:at.uuid(),page:at.coerce.number().min(1).optional(),limit:at.coerce.number().min(1).optional(),name:at.string().optional()}),gi=class{constructor(e){this.internationalScientificCongressPartnerRepository=e}async handle(e,t){try{let{congressId:r,page:i,limit:n,...s}=Bm.parse({congressId:e.params.congressId,...e.query});if(i!==void 0&&n!==void 0){let c=i||Xb,d=n||$b,R=d*c-d,[E,q]=await Promise.all([this.internationalScientificCongressPartnerRepository.findByCongressId({pagination:{offset:R,limit:d},filter:{congressId:r,...s}}),this.internationalScientificCongressPartnerRepository.count({filter:{congressId:r,name:s.name}})]),Y=Math.max(Math.ceil(q/d),1);return t.status(200).json({page:c,totalPages:Y,offset:R,limit:d,partners:E})}let m=await this.internationalScientificCongressPartnerRepository.findByCongressId({filter:{congressId:r,...s}});return t.status(200).json(m)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as Qb}from"@asteasolutions/zod-to-openapi";import Vt from"zod";var Hl=2,zl=1024,eC=zl*zl,rC=Hl*eC;Qb(Vt);var qm=Vt.object({id:Vt.uuid(),name:Vt.string().min(1,"Nome \xE9 obrigat\xF3rio").optional(),logo:Vt.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=rC,`A imagem deve ter no m\xE1ximo ${Hl}MB.`).optional()}),fi=class{constructor(e,t){this.internationalScientificCongressPartnerRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{id:r,name:i,logo:n}=qm.parse({id:e.params.id,...e.body,logo:e.file}),s=await this.internationalScientificCongressPartnerRepository.findById(r);if(!s)throw new p("O parceiro n\xE3o existe.");let m=s.logoUrl;return n&&(m=await this.firebaseStorageService.uploadFile({file:n,id:r,folder:M.PARTNER})),await this.internationalScientificCongressPartnerRepository.update({id:r,name:i,logoUrl:m??void 0}),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var tC=$.object({id:$.uuid(),name:$.string(),logoUrl:$.string().nullable(),congressId:$.uuid()}),Vl={method:"post",path:"/international-scientific-congress/{congressId}/partner",tags:["International Scientific Congresses"],summary:"Create a new congress partner",security:[{bearerAuth:[]}],request:{params:$.object({congressId:$.uuid()}),body:{content:{"application/json":{schema:Dm.omit({congressId:!0})}}}},responses:{201:{description:"Congress partner created successfully",summary:"Congress Partner Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:$.object({errors:$.record($.string(),$.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:$.object({message:$.string()})}}},404:{description:"Congress not found with the provided ID",summary:"Congress Not Found",content:{"application/json":{schema:$.object({message:$.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:$.object({message:$.string()})}}}}},Zl={method:"get",path:"/international-scientific-congress/{congressId}/partner",tags:["International Scientific Congresses"],summary:"Find congress partners by congress ID",request:{params:Bm},responses:{200:{description:"Congress partners retrieved successfully by congress ID",summary:"Congress Partners Retrieved",content:{"application/json":{schema:$.array(tC)}}},400:{description:"Invalid congress ID parameter provided",summary:"Validation Error",content:{"application/json":{schema:$.object({errors:$.record($.string(),$.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:$.object({message:$.string()})}}}}},Kl={method:"put",path:"/international-scientific-congress/partner/{id}",tags:["International Scientific Congresses"],summary:"Update congress partner",security:[{bearerAuth:[]}],request:{params:ui,body:{content:{"application/json":{schema:qm.omit({id:!0})}}}},responses:{200:{description:"Congress partner updated successfully",summary:"Congress Partner Updated"},400:{description:"Invalid input data or partner ID format",summary:"Validation Error",content:{"application/json":{schema:$.object({errors:$.record($.string(),$.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:$.object({message:$.string()})}}},404:{description:"Congress partner not found with the provided ID",summary:"Congress Partner Not Found",content:{"application/json":{schema:$.object({message:$.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:$.object({message:$.string()})}}}}},Jl={method:"delete",path:"/international-scientific-congress/partner/{id}",tags:["International Scientific Congresses"],summary:"Delete congress partner",security:[{bearerAuth:[]}],request:{params:ui},responses:{200:{description:"Congress partner deleted successfully",summary:"Congress Partner Deleted"},400:{description:"Invalid partner ID format",summary:"Validation Error",content:{"application/json":{schema:$.object({errors:$.record($.string(),$.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:$.object({message:$.string()})}}},404:{description:"Congress partner not found with the provided ID",summary:"Congress Partner Not Found",content:{"application/json":{schema:$.object({message:$.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:$.object({message:$.string()})}}}}};import g from"zod";import{extendZodWithOpenApi as oC}from"@asteasolutions/zod-to-openapi";import se from"zod";oC(se);var Um=se.object({title:se.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio"),edition:se.coerce.number().int().positive("Edi\xE7\xE3o deve ser um n\xFAmero positivo"),startDate:se.coerce.date(),endDate:se.coerce.date(),description:se.string().optional(),location:se.string().optional(),congressLink:se.url("Link do congresso deve ser uma URL v\xE1lida").optional().or(se.literal("")),noticeUrl:se.url("URL do edital deve ser uma URL v\xE1lida").optional().or(se.literal("")),scheduleUrl:se.url("URL do cronograma deve ser uma URL v\xE1lida").optional().or(se.literal("")),programUrl:se.url("URL da programa\xE7\xE3o deve ser uma URL v\xE1lida").optional().or(se.literal("")),adminReportUrl:se.url("URL do relat\xF3rio administrativo deve ser uma URL v\xE1lida").optional().or(se.literal("")),proceedingsUrl:se.url("URL dos anais deve ser uma URL v\xE1lida").optional().or(se.literal(""))}).refine(o=>o.endDate>=o.startDate,{message:"Data de t\xE9rmino deve ser posterior ou igual \xE0 data de in\xEDcio",path:["endDate"]}),yi=class{constructor(e){this.internationalScientificCongressRepository=e}async handle(e,t){try{let r=Um.parse(e.body);return await this.internationalScientificCongressRepository.create(r),t.sendStatus(201)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as iC}from"@asteasolutions/zod-to-openapi";import km from"zod";iC(km);var Om=km.object({id:km.uuid()}),hi=class{constructor(e){this.internationalScientificCongressRepository=e}async handle(e,t){try{let{id:r}=Om.parse({id:e.params.id});if(!await this.internationalScientificCongressRepository.findById(r))throw new p("O congresso n\xE3o existe.");return await this.internationalScientificCongressRepository.deleteById(r),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as nC}from"@asteasolutions/zod-to-openapi";import Gm from"zod";nC(Gm);var Nm=Gm.object({edition:Gm.coerce.number().int().positive()}),Ri=class{constructor(e){this.internationalScientificCongressRepository=e}async handle(e,t){try{let{edition:r}=Nm.parse({edition:e.params.edition}),i=await this.internationalScientificCongressRepository.findByEdition(r);return t.status(200).json(i)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as sC}from"@asteasolutions/zod-to-openapi";import Lm from"zod";sC(Lm);var bi=Lm.object({id:Lm.uuid()}),Ii=class{constructor(e){this.internationalScientificCongressRepository=e}async handle(e,t){try{let{id:r}=bi.parse({id:e.params.id}),i=await this.internationalScientificCongressRepository.findById(r);if(!i)throw new p("O congresso n\xE3o existe.");return t.status(200).json(i)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as aC}from"@asteasolutions/zod-to-openapi";import dr from"zod";var mC=1,cC=10;aC(dr);var Wm=dr.object({page:dr.coerce.number().min(1).default(mC),limit:dr.coerce.number().min(1).default(cC),title:dr.string().optional(),edition:dr.coerce.number().int().positive().optional(),location:dr.string().optional(),orderBy:dr.enum(["asc","desc"]).optional()}),Ci=class{constructor(e){this.internationalScientificCongressRepository=e}async handle(e,t){try{let{page:r,limit:i,...n}=Wm.parse(e.query),s=i*r-i,[m,c]=await Promise.all([this.internationalScientificCongressRepository.find({pagination:{offset:s,limit:i},filter:n}),this.internationalScientificCongressRepository.count({filter:n})]),d=Math.max(Math.ceil(c/i),1);t.status(200).json({page:r,totalPages:d,offset:s,limit:i,congresses:m})}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as pC}from"@asteasolutions/zod-to-openapi";import ne from"zod";pC(ne);var _m=ne.object({id:ne.uuid(),title:ne.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio").optional(),edition:ne.coerce.number().int().positive("Edi\xE7\xE3o deve ser um n\xFAmero positivo").optional(),startDate:ne.coerce.date().optional(),endDate:ne.coerce.date().optional(),description:ne.string().optional(),location:ne.string().optional(),congressLink:ne.url("Link do congresso deve ser uma URL v\xE1lida").optional().or(ne.literal("")),noticeUrl:ne.url("URL do edital deve ser uma URL v\xE1lida").optional().or(ne.literal("")),scheduleUrl:ne.url("URL do cronograma deve ser uma URL v\xE1lida").optional().or(ne.literal("")),programUrl:ne.url("URL da programa\xE7\xE3o deve ser uma URL v\xE1lida").optional().or(ne.literal("")),adminReportUrl:ne.url("URL do relat\xF3rio administrativo deve ser uma URL v\xE1lida").optional().or(ne.literal("")),proceedingsUrl:ne.url("URL dos anais deve ser uma URL v\xE1lida").optional().or(ne.literal(""))}),wi=class{constructor(e){this.internationalScientificCongressRepository=e}async handle(e,t){try{let{id:r,...i}=_m.parse({id:e.params.id,...e.body});if(!await this.internationalScientificCongressRepository.findById(r))throw new p("O congresso n\xE3o existe.");return await this.internationalScientificCongressRepository.update({...i,id:r}),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var dC=9,lC=g.object({image:g.any().openapi({type:"string",format:"binary"}),caption:g.string().optional()}),uC=g.object({image:g.any().openapi({type:"string",format:"binary"}).optional(),caption:g.string().optional()}),gC=g.object({id:g.uuid(),name:g.string(),logoUrl:g.string().nullable(),congressId:g.uuid()}),zm=g.object({id:g.uuid(),imageUrl:g.string(),caption:g.string().nullable(),congressId:g.uuid()}),Hm=g.object({id:g.uuid(),title:g.string(),edition:g.number(),startDate:g.date(),endDate:g.date(),description:g.string().nullable(),location:g.string().nullable(),congressLink:g.string().nullable(),noticeUrl:g.string().nullable(),scheduleUrl:g.string().nullable(),programUrl:g.string().nullable(),adminReportUrl:g.string().nullable(),proceedingsUrl:g.string().nullable(),partners:g.array(gC),galleries:g.array(zm),createdAt:g.date(),updatedAt:g.date()}),Yl={method:"post",path:"/international-scientific-congress",tags:["International Scientific Congresses"],summary:"Create a new international scientific congress",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:Um}}}},responses:{201:{description:"International scientific congress created successfully",summary:"International Scientific Congress Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:g.object({message:g.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}},Xl={method:"get",path:"/international-scientific-congress",tags:["International Scientific Congresses"],summary:"List all international scientific congresses with pagination and filters",request:{query:Wm},responses:{200:{description:"List of international scientific congresses retrieved successfully with pagination",summary:"International Scientific Congresses Retrieved",content:{"application/json":{schema:g.object({page:g.number(),totalPages:g.number(),offset:g.number(),limit:g.number(),congresses:g.array(Hm)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}},$l={method:"get",path:"/international-scientific-congress/{id}",tags:["International Scientific Congresses"],summary:"Find international scientific congress by ID",request:{params:bi},responses:{200:{description:"International scientific congress details retrieved successfully",summary:"International Scientific Congress Retrieved",content:{"application/json":{schema:Hm}}},400:{description:"Invalid international scientific congress ID format",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},404:{description:"International scientific congress not found with the provided ID",summary:"International Scientific Congress Not Found",content:{"application/json":{schema:g.object({message:g.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}},Ql={method:"get",path:"/international-scientific-congress/edition/{edition}",tags:["International Scientific Congresses"],summary:"Find international scientific congresses by edition",request:{params:Nm},responses:{200:{description:"International scientific congresses retrieved successfully by edition",summary:"International Scientific Congresses Retrieved by Edition",content:{"application/json":{schema:g.array(Hm)}}},400:{description:"Invalid edition parameter provided",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}},eu={method:"put",path:"/international-scientific-congress/{id}",tags:["International Scientific Congresses"],summary:"Update international scientific congress",security:[{bearerAuth:[]}],request:{params:bi,body:{content:{"application/json":{schema:_m.omit({id:!0})}}}},responses:{200:{description:"International scientific congress updated successfully",summary:"International Scientific Congress Updated"},400:{description:"Invalid input data or international scientific congress ID format",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:g.object({message:g.string()})}}},404:{description:"International scientific congress not found with the provided ID",summary:"International Scientific Congress Not Found",content:{"application/json":{schema:g.object({message:g.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}},ru={method:"delete",path:"/international-scientific-congress/{id}",tags:["International Scientific Congresses"],summary:"Delete international scientific congress",security:[{bearerAuth:[]}],request:{params:Om},responses:{200:{description:"International scientific congress deleted successfully",summary:"International Scientific Congress Deleted"},400:{description:"Invalid international scientific congress ID format",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:g.object({message:g.string()})}}},404:{description:"International scientific congress not found with the provided ID",summary:"International Scientific Congress Not Found",content:{"application/json":{schema:g.object({message:g.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}},mF={method:"post",path:"/international-scientific-congress/{congressId}/gallery",tags:["International Scientific Congress Gallery"],summary:"Create a new gallery image for a congress",security:[{bearerAuth:[]}],request:{params:g.object({congressId:g.uuid()}),body:{content:{"multipart/form-data":{schema:lC}}}},responses:{201:{description:"Gallery image created successfully",summary:"Gallery Image Created"},400:{description:"Invalid input data, missing required fields, or invalid image format/size",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:g.object({message:g.string()})}}},404:{description:"Congress not found with the provided ID",summary:"Congress Not Found",content:{"application/json":{schema:g.object({message:g.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}},cF={method:"get",path:"/international-scientific-congress/{congressId}/gallery",tags:["International Scientific Congress Gallery"],summary:"List all gallery images for a congress with pagination",request:{params:g.object({congressId:g.uuid()}),query:g.object({page:g.coerce.number().min(1).default(1),limit:g.coerce.number().min(1).default(dC),caption:g.string().optional()})},responses:{200:{description:"Gallery images retrieved successfully with pagination",summary:"Gallery Images Retrieved",content:{"application/json":{schema:g.object({page:g.number(),totalPages:g.number(),offset:g.number(),limit:g.number(),galleries:g.array(zm)})}}},400:{description:"Invalid congress ID format or query parameters",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}},pF={method:"get",path:"/international-scientific-congress/gallery/{id}",tags:["International Scientific Congress Gallery"],summary:"Find a gallery image by ID",request:{params:g.object({id:g.uuid()})},responses:{200:{description:"Gallery image retrieved successfully",summary:"Gallery Image Retrieved",content:{"application/json":{schema:zm}}},400:{description:"Invalid gallery image ID format",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},404:{description:"Gallery image not found with the provided ID",summary:"Gallery Image Not Found",content:{"application/json":{schema:g.object({message:g.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}},dF={method:"put",path:"/international-scientific-congress/gallery/{id}",tags:["International Scientific Congress Gallery"],summary:"Update a gallery image with optional image upload",security:[{bearerAuth:[]}],request:{params:g.object({id:g.uuid()}),body:{content:{"multipart/form-data":{schema:uC}}}},responses:{200:{description:"Gallery image updated successfully",summary:"Gallery Image Updated"},400:{description:"Invalid input data, gallery ID format, or invalid image format/size",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:g.object({message:g.string()})}}},404:{description:"Gallery image not found with the provided ID",summary:"Gallery Image Not Found",content:{"application/json":{schema:g.object({message:g.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}},lF={method:"delete",path:"/international-scientific-congress/gallery/{id}",tags:["International Scientific Congress Gallery"],summary:"Delete a gallery image",security:[{bearerAuth:[]}],request:{params:g.object({id:g.uuid()})},responses:{200:{description:"Gallery image deleted successfully",summary:"Gallery Image Deleted"},400:{description:"Invalid gallery ID format",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:g.object({message:g.string()})}}},404:{description:"Gallery image not found with the provided ID",summary:"Gallery Image Not Found",content:{"application/json":{schema:g.object({message:g.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}};import V from"zod";import{extendZodWithOpenApi as fC}from"@asteasolutions/zod-to-openapi";import Zt from"zod";fC(Zt);var Vm=Zt.object({title:Zt.string().min(1),link:Zt.url(),country:Zt.string().min(1)}),Si=class{constructor(e){this.lawRepository=e}async handle(e,t){try{let{title:r,link:i,country:n}=Vm.parse(e.body);return await this.lawRepository.create({title:r,link:i,country:n}),t.sendStatus(201)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as yC}from"@asteasolutions/zod-to-openapi";import Zm from"zod";yC(Zm);var Km=Zm.object({id:Zm.uuid()}),vi=class{constructor(e){this.lawRepository=e}async handle(e,t){try{let{id:r}=Km.parse({id:e.params.id});if(!await this.lawRepository.findById(r))throw new p("A lei n\xE3o existe.");return await this.lawRepository.deleteById(r),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as hC}from"@asteasolutions/zod-to-openapi";import Jm from"zod";hC(Jm);var ji=Jm.object({id:Jm.uuid()}),Ei=class{constructor(e){this.lawRepository=e}async handle(e,t){try{let{id:r}=ji.parse({id:e.params.id}),i=await this.lawRepository.findById(r);if(!i)throw new p("A lei n\xE3o existe.");return t.status(200).json(i)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as RC}from"@asteasolutions/zod-to-openapi";import mt from"zod";RC(mt);var Ym=mt.object({id:mt.uuid(),title:mt.string().min(1).optional(),link:mt.url().optional(),country:mt.string().min(1).optional()}),xi=class{constructor(e){this.lawRepository=e}async handle(e,t){try{let{id:r,title:i,link:n,country:s}=Ym.parse({id:e.params.id,...e.body});if(!await this.lawRepository.findById(r))throw new p("A lei n\xE3o existe.");return await this.lawRepository.update({id:r,title:i,link:n,country:s}),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var tu=V.object({id:V.uuid(),title:V.string(),link:V.string(),country:V.string(),createdAt:V.date(),updatedAt:V.date()}),ou={method:"post",path:"/law",tags:["Laws"],summary:"Create a new Law",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:Vm}}}},responses:{201:{description:"Law created successfully",summary:"Law Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:V.object({errors:V.record(V.string(),V.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:V.object({message:V.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:V.object({message:V.string()})}}}}},iu={method:"get",path:"/law",tags:["Laws"],summary:"List all Laws with filters",request:{query:V.object({page:V.coerce.number().optional(),limit:V.coerce.number().optional(),title:V.string().optional(),country:V.string().optional(),orderBy:V.enum(["asc","desc"]).optional()})},responses:{200:{description:"List of Laws retrieved successfully",summary:"Laws Retrieved",content:{"application/json":{schema:V.object({page:V.number(),totalPages:V.number(),offset:V.number(),limit:V.number(),laws:V.array(tu)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:V.object({message:V.string()})}}}}},nu={method:"get",path:"/law/{id}",tags:["Laws"],summary:"Find Law by ID",request:{params:ji},responses:{200:{description:"Law details retrieved successfully",summary:"Law Retrieved",content:{"application/json":{schema:tu}}},400:{description:"Invalid Law ID format",summary:"Validation Error",content:{"application/json":{schema:V.object({errors:V.record(V.string(),V.string())})}}},404:{description:"Law not found with the provided ID",summary:"Law Not Found",content:{"application/json":{schema:V.object({message:V.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:V.object({message:V.string()})}}}}},su={method:"put",path:"/law/{id}",tags:["Laws"],summary:"Update Law",security:[{bearerAuth:[]}],request:{params:ji,body:{content:{"application/json":{schema:Ym.omit({id:!0})}}}},responses:{200:{description:"Law updated successfully",summary:"Law Updated"},400:{description:"Invalid input data or Law ID format",summary:"Validation Error",content:{"application/json":{schema:V.object({errors:V.record(V.string(),V.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:V.object({message:V.string()})}}},404:{description:"Law not found with the provided ID",summary:"Law Not Found",content:{"application/json":{schema:V.object({message:V.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:V.object({message:V.string()})}}}}},au={method:"delete",path:"/law/{id}",tags:["Laws"],summary:"Delete Law",security:[{bearerAuth:[]}],request:{params:Km},responses:{200:{description:"Law deleted successfully",summary:"Law Deleted"},400:{description:"Invalid Law ID format",summary:"Validation Error",content:{"application/json":{schema:V.object({errors:V.record(V.string(),V.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:V.object({message:V.string()})}}},404:{description:"Law not found with the provided ID",summary:"Law Not Found",content:{"application/json":{schema:V.object({message:V.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:V.object({message:V.string()})}}}}};import{$Enums as SC}from"@prisma/client";import L from"zod";import{extendZodWithOpenApi as IC}from"@asteasolutions/zod-to-openapi";import ct from"zod";IC(ct);var Xm=ct.object({role:ct.string().min(1),description:ct.string().optional(),userId:ct.uuid(),order:ct.number().optional()}),Mi=class{constructor(e){this.legitimatorCommitteeMemberRepository=e}async handle(e,t){try{let{role:r,description:i,userId:n,order:s}=Xm.parse(e.body);return await this.legitimatorCommitteeMemberRepository.create({role:r,description:i,userId:n,order:s??0}),t.sendStatus(201)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as bC}from"@asteasolutions/zod-to-openapi";import $m from"zod";bC($m);var Qm=$m.object({id:$m.uuid()}),Pi=class{constructor(e){this.legitimatorCommitteeMemberRepository=e}async handle(e,t){try{let{id:r}=Qm.parse({id:e.params.id});if(!await this.legitimatorCommitteeMemberRepository.findById(r))throw new p("O membro do comit\xEA legitimador n\xE3o existe.");return await this.legitimatorCommitteeMemberRepository.deleteById(r),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as CC}from"@asteasolutions/zod-to-openapi";import ec from"zod";CC(ec);var Ti=ec.object({id:ec.uuid()}),Ai=class{constructor(e){this.legitimatorCommitteeMemberRepository=e}async handle(e,t){try{let{id:r}=Ti.parse({id:e.params.id}),i=await this.legitimatorCommitteeMemberRepository.findById(r);if(!i)throw new p("O membro do comit\xEA legitimador n\xE3o existe.");return t.status(200).json(i)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as wC}from"@asteasolutions/zod-to-openapi";import Pr from"zod";wC(Pr);var rc=Pr.object({id:Pr.uuid(),role:Pr.string().min(1).optional(),description:Pr.string().optional(),userId:Pr.uuid().optional(),order:Pr.number().optional()}),Di=class{constructor(e){this.legitimatorCommitteeMemberRepository=e}async handle(e,t){try{let{id:r,role:i,description:n,userId:s,order:m}=rc.parse({id:e.params.id,...e.body});if(!await this.legitimatorCommitteeMemberRepository.findById(r))throw new p("O membro do comit\xEA legitimador n\xE3o existe.");return await this.legitimatorCommitteeMemberRepository.update({id:r,role:i,description:n,userId:s,order:m}),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var vC=L.object({id:L.uuid(),name:L.string(),emailAddress:L.string(),avatarUrl:L.string().nullable(),orcid:L.string().nullable(),phone:L.string().nullable(),lattesUrl:L.string().nullable(),role:L.enum(SC.UserRole)}),mu=L.object({id:L.uuid(),role:L.string(),description:L.string().nullable(),order:L.number(),createdAt:L.date(),updatedAt:L.date(),userId:L.uuid(),user:vC}),cu={method:"post",path:"/legitimator-committee-member",tags:["Legitimator Committee Members"],summary:"Create a new Legitimator Committee Member",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:Xm}}}},responses:{201:{description:"Legitimator Committee Member created successfully",summary:"Legitimator Committee Member Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:L.object({errors:L.record(L.string(),L.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:L.object({message:L.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:L.object({message:L.string()})}}}}},pu={method:"get",path:"/legitimator-committee-member",tags:["Legitimator Committee Members"],summary:"List all Legitimator Committee Members with filters",request:{query:L.object({role:L.string().optional(),orderBy:L.enum(["asc","desc"]).optional()})},responses:{200:{description:"List of Legitimator Committee Members retrieved successfully",summary:"Legitimator Committee Members Retrieved",content:{"application/json":{schema:L.object({members:L.array(mu)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:L.object({message:L.string()})}}}}},du={method:"get",path:"/legitimator-committee-member/{id}",tags:["Legitimator Committee Members"],summary:"Find Legitimator Committee Member by ID",request:{params:Ti},responses:{200:{description:"Legitimator Committee Member details retrieved successfully",summary:"Legitimator Committee Member Retrieved",content:{"application/json":{schema:mu}}},400:{description:"Invalid Legitimator Committee Member ID format",summary:"Validation Error",content:{"application/json":{schema:L.object({errors:L.record(L.string(),L.string())})}}},404:{description:"Legitimator Committee Member not found with the provided ID",summary:"Legitimator Committee Member Not Found",content:{"application/json":{schema:L.object({message:L.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:L.object({message:L.string()})}}}}},lu={method:"put",path:"/legitimator-committee-member/{id}",tags:["Legitimator Committee Members"],summary:"Update Legitimator Committee Member",security:[{bearerAuth:[]}],request:{params:Ti,body:{content:{"application/json":{schema:rc.omit({id:!0})}}}},responses:{200:{description:"Legitimator Committee Member updated successfully",summary:"Legitimator Committee Member Updated"},400:{description:"Invalid input data or Legitimator Committee Member ID format",summary:"Validation Error",content:{"application/json":{schema:L.object({errors:L.record(L.string(),L.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:L.object({message:L.string()})}}},404:{description:"Legitimator Committee Member not found with the provided ID",summary:"Legitimator Committee Member Not Found",content:{"application/json":{schema:L.object({message:L.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:L.object({message:L.string()})}}}}},uu={method:"delete",path:"/legitimator-committee-member/{id}",tags:["Legitimator Committee Members"],summary:"Delete Legitimator Committee Member",security:[{bearerAuth:[]}],request:{params:Qm},responses:{200:{description:"Legitimator Committee Member deleted successfully",summary:"Legitimator Committee Member Deleted"},400:{description:"Invalid Legitimator Committee Member ID format",summary:"Validation Error",content:{"application/json":{schema:L.object({errors:L.record(L.string(),L.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:L.object({message:L.string()})}}},404:{description:"Legitimator Committee Member not found with the provided ID",summary:"Legitimator Committee Member Not Found",content:{"application/json":{schema:L.object({message:L.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:L.object({message:L.string()})}}}}};import{$Enums as PC}from"@prisma/client";import T from"zod";import{extendZodWithOpenApi as EC}from"@asteasolutions/zod-to-openapi";import Ve from"zod";EC(Ve);var tc=Ve.object({name:Ve.string().min(1),description:Ve.string().optional(),members:Ve.array(Ve.object({userId:Ve.uuid(),role:Ve.string().min(1),order:Ve.number().optional()}))}),Fi=class{constructor(e){this.managementTeamRepository=e}async handle(e,t){try{let{name:r,description:i,members:n}=tc.parse(e.body);if(await this.managementTeamRepository.findByName(r))throw new ae("J\xE1 existe um time de gest\xE3o cadastrado com este nome.");return await this.managementTeamRepository.create({name:r,description:i,members:n.map(m=>({userId:m.userId,role:m.role,order:m.order??0}))}),t.sendStatus(201)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as jC}from"@asteasolutions/zod-to-openapi";import oc from"zod";jC(oc);var ic=oc.object({id:oc.uuid()}),Bi=class{constructor(e){this.managementTeamRepository=e}async handle(e,t){try{let{id:r}=ic.parse({id:e.params.id});if(!await this.managementTeamRepository.findById(r))throw new p("O time de gest\xE3o n\xE3o existe.");return await this.managementTeamRepository.deleteById(r),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as xC}from"@asteasolutions/zod-to-openapi";import nc from"zod";xC(nc);var Ui=nc.object({id:nc.uuid()}),qi=class{constructor(e){this.managementTeamRepository=e}async handle(e,t){try{let{id:r}=Ui.parse({id:e.params.id}),i=await this.managementTeamRepository.findById(r);if(!i)throw new p("O time de gest\xE3o n\xE3o existe.");return t.status(200).json(i)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as MC}from"@asteasolutions/zod-to-openapi";import Oe from"zod";MC(Oe);var sc=Oe.object({id:Oe.uuid(),name:Oe.string().min(1).optional(),description:Oe.string().optional(),members:Oe.array(Oe.object({userId:Oe.uuid(),role:Oe.string().min(1),order:Oe.number().optional()})).optional()}),ki=class{constructor(e){this.managementTeamRepository=e}async handle(e,t){try{let{id:r,name:i,description:n,members:s}=sc.parse({id:e.params.id,...e.body}),m=await this.managementTeamRepository.findById(r);if(!m)throw new p("O time de gest\xE3o n\xE3o existe.");if(i&&i!==m.name){let c=await this.managementTeamRepository.findByName(i);if(c&&c.id!==r)throw new ae("J\xE1 existe um time de gest\xE3o com este nome.")}return await this.managementTeamRepository.update({id:r,name:i,description:n,members:s?s.map(c=>({userId:c.userId,role:c.role,order:c.order??0})):void 0}),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var AC=T.object({id:T.uuid(),name:T.string(),emailAddress:T.string(),avatarUrl:T.string().nullable(),orcid:T.string().nullable(),phone:T.string().nullable(),lattesUrl:T.string().nullable(),role:T.enum(PC.UserRole)}),TC=T.object({id:T.uuid(),role:T.string(),description:T.string().nullable(),order:T.number(),teamId:T.uuid(),userId:T.uuid(),createdAt:T.date(),updatedAt:T.date(),user:AC}),gu=T.object({id:T.uuid(),name:T.string(),description:T.string().nullable(),createdAt:T.date(),updatedAt:T.date(),members:T.array(TC)}),fu={method:"post",path:"/management-team",tags:["Management Teams"],summary:"Create a new Management Team with multiple members",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:tc}}}},responses:{201:{description:"Management Team created successfully",summary:"Management Team Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:T.object({errors:T.record(T.string(),T.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:T.object({message:T.string()})}}},409:{description:"Management Team with this name already exists",summary:"Conflict",content:{"application/json":{schema:T.object({message:T.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:T.object({message:T.string()})}}}}},yu={method:"get",path:"/management-team",tags:["Management Teams"],summary:"List all Management Teams with filters",request:{query:T.object({name:T.string().optional(),description:T.string().optional(),orderBy:T.enum(["asc","desc"]).optional()})},responses:{200:{description:"List of Management Teams retrieved successfully",summary:"Management Teams Retrieved",content:{"application/json":{schema:T.object({teams:T.array(gu)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:T.object({message:T.string()})}}}}},hu={method:"get",path:"/management-team/{id}",tags:["Management Teams"],summary:"Find Management Team by ID",request:{params:Ui},responses:{200:{description:"Management Team details retrieved successfully",summary:"Management Team Retrieved",content:{"application/json":{schema:gu}}},400:{description:"Invalid Management Team ID format",summary:"Validation Error",content:{"application/json":{schema:T.object({errors:T.record(T.string(),T.string())})}}},404:{description:"Management Team not found with the provided ID",summary:"Management Team Not Found",content:{"application/json":{schema:T.object({message:T.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:T.object({message:T.string()})}}}}},Ru={method:"put",path:"/management-team/{id}",tags:["Management Teams"],summary:"Update Management Team and manage member relationships",security:[{bearerAuth:[]}],request:{params:Ui,body:{content:{"application/json":{schema:sc.omit({id:!0})}}}},responses:{200:{description:"Management Team updated successfully",summary:"Management Team Updated"},400:{description:"Invalid input data or Management Team ID format",summary:"Validation Error",content:{"application/json":{schema:T.object({errors:T.record(T.string(),T.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:T.object({message:T.string()})}}},404:{description:"Management Team not found with the provided ID",summary:"Management Team Not Found",content:{"application/json":{schema:T.object({message:T.string()})}}},409:{description:"Management Team with this name already exists",summary:"Conflict",content:{"application/json":{schema:T.object({message:T.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:T.object({message:T.string()})}}}}},Iu={method:"delete",path:"/management-team/{id}",tags:["Management Teams"],summary:"Delete Management Team",security:[{bearerAuth:[]}],request:{params:ic},responses:{200:{description:"Management Team deleted successfully",summary:"Management Team Deleted"},400:{description:"Invalid Management Team ID format",summary:"Validation Error",content:{"application/json":{schema:T.object({errors:T.record(T.string(),T.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:T.object({message:T.string()})}}},404:{description:"Management Team not found with the provided ID",summary:"Management Team Not Found",content:{"application/json":{schema:T.object({message:T.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:T.object({message:T.string()})}}}}};import{MeetingFormat as GC,MeetingStatus as NC}from"@prisma/client";import _ from"zod";import{extendZodWithOpenApi as DC}from"@asteasolutions/zod-to-openapi";import pt from"zod";var Cu=10,bu=1024,FC=bu*bu,BC=Cu*FC;DC(pt);var ac=pt.object({title:pt.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio"),publishedAt:pt.coerce.date(),meetingId:pt.uuid(),document:pt.any().refine(o=>o==null||typeof o!="object"||typeof o.size!="number"?!1:o.size<=BC,`O documento deve ter no m\xE1ximo ${Cu}MB.`)}),Oi=class{constructor(e,t,r){this.meetingMinuteRepository=e;this.meetingRepository=t;this.firebaseStorageService=r}async handle(e,t){try{let{title:r,publishedAt:i,meetingId:n,document:s}=ac.parse({...e.body,...e.params,document:e.file});if(!await this.meetingRepository.findById(n))throw new p("A reuni\xE3o n\xE3o existe.");if(await this.meetingMinuteRepository.findByMeetingId(n))throw new a("Esta reuni\xE3o j\xE1 possui uma ata.");let d=await this.meetingMinuteRepository.create({title:r,publishedAt:i,meetingId:n,documentUrl:""}),R=await this.firebaseStorageService.uploadFile({file:s,id:d.id,folder:M.MEETING_MINUTE});return await this.meetingMinuteRepository.update({id:d.id,documentUrl:R}),t.sendStatus(201)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as qC}from"@asteasolutions/zod-to-openapi";import mc from"zod";qC(mc);var Kt=mc.object({meetingId:mc.uuid()}),Gi=class{constructor(e){this.meetingMinuteRepository=e}async handle(e,t){try{let{meetingId:r}=Kt.parse({meetingId:e.params.meetingId}),i=await this.meetingMinuteRepository.findByMeetingId(r);return t.status(200).json(i)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as UC}from"@asteasolutions/zod-to-openapi";import dt from"zod";var Su=10,wu=1024,kC=wu*wu,OC=Su*kC;UC(dt);var cc=dt.object({meetingId:dt.uuid(),title:dt.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio").optional(),publishedAt:dt.coerce.date().optional(),document:dt.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=OC,`O documento deve ter no m\xE1ximo ${Su}MB.`).optional()}),Ni=class{constructor(e,t){this.meetingMinuteRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{meetingId:r,title:i,publishedAt:n,document:s}=cc.parse({meetingId:e.params.meetingId,...e.body,document:e.file}),m=await this.meetingMinuteRepository.findByMeetingId(r);if(!m)throw new p("A ata n\xE3o existe para esta reuni\xE3o.");let c=m.documentUrl;return s&&(m.documentUrl&&await this.firebaseStorageService.deleteFile({fileUrl:m.documentUrl}),c=await this.firebaseStorageService.uploadFile({file:s,id:m.id,folder:M.MEETING_MINUTE})),await this.meetingMinuteRepository.update({id:m.id,title:i,publishedAt:n,documentUrl:c??void 0}),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var LC=_.object({id:_.uuid(),title:_.string(),scheduledAt:_.date(),format:_.enum(GC),agenda:_.string(),meetingLink:_.string().nullable(),location:_.string().nullable(),status:_.enum(NC),createdAt:_.date(),updatedAt:_.date()}),WC=_.object({id:_.uuid(),title:_.string(),publishedAt:_.date(),documentUrl:_.string(),meetingId:_.uuid(),meeting:LC,createdAt:_.date(),updatedAt:_.date()}),vu={method:"post",path:"/meeting/{meetingId}/minute",tags:["Meetings"],summary:"Create a new meeting minute with document upload",security:[{bearerAuth:[]}],request:{params:_.object({meetingId:_.uuid()}),body:{content:{"multipart/form-data":{schema:ac.omit({meetingId:!0})}}}},responses:{201:{description:"Meeting minute created successfully",summary:"Meeting Minute Created"},400:{description:"Invalid input data, missing required fields, or invalid document format/size",summary:"Validation Error",content:{"application/json":{schema:_.object({errors:_.record(_.string(),_.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:_.object({message:_.string()})}}},404:{description:"Meeting not found with the provided ID",summary:"Meeting Not Found",content:{"application/json":{schema:_.object({message:_.string()})}}},409:{description:"Meeting already has a minute",summary:"Conflict",content:{"application/json":{schema:_.object({message:_.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:_.object({message:_.string()})}}}}},Eu={method:"get",path:"/meeting/{meetingId}/minute",tags:["Meetings"],summary:"Find meeting minute by meeting ID",request:{params:Kt},responses:{200:{description:"Meeting minute retrieved successfully by meeting ID",summary:"Meeting Minute Retrieved by Meeting ID",content:{"application/json":{schema:WC.nullable()}}},400:{description:"Invalid meeting ID parameter provided",summary:"Validation Error",content:{"application/json":{schema:_.object({errors:_.record(_.string(),_.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:_.object({message:_.string()})}}}}},ju={method:"put",path:"/meeting/{meetingId}/minute",tags:["Meetings"],summary:"Update meeting minute with optional document upload",security:[{bearerAuth:[]}],request:{params:Kt,body:{content:{"multipart/form-data":{schema:cc.omit({meetingId:!0})}}}},responses:{200:{description:"Meeting minute updated successfully",summary:"Meeting Minute Updated"},400:{description:"Invalid input data, meeting minute ID format, or invalid document format/size",summary:"Validation Error",content:{"application/json":{schema:_.object({errors:_.record(_.string(),_.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:_.object({message:_.string()})}}},404:{description:"Meeting minute not found with the provided ID",summary:"Meeting Minute Not Found",content:{"application/json":{schema:_.object({message:_.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:_.object({message:_.string()})}}}}},xu={method:"delete",path:"/meeting/{meetingId}/minute",tags:["Meetings"],summary:"Delete meeting minute",security:[{bearerAuth:[]}],request:{params:Kt},responses:{200:{description:"Meeting minute deleted successfully",summary:"Meeting Minute Deleted"},400:{description:"Invalid meeting minute ID format",summary:"Validation Error",content:{"application/json":{schema:_.object({errors:_.record(_.string(),_.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:_.object({message:_.string()})}}},404:{description:"Meeting minute not found with the provided ID",summary:"Meeting Minute Not Found",content:{"application/json":{schema:_.object({message:_.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:_.object({message:_.string()})}}}}};import{MeetingFormat as tw,MeetingStatus as ow}from"@prisma/client";import P from"zod";import{extendZodWithOpenApi as _C}from"@asteasolutions/zod-to-openapi";import{MeetingFormat as Li,MeetingStatus as pc}from"@prisma/client";import Ge from"zod";_C(Ge);var dc=Ge.object({title:Ge.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio"),scheduledAt:Ge.coerce.date(),format:Ge.enum(Li).default(Li.ONLINE),agenda:Ge.string().min(1,"Pauta \xE9 obrigat\xF3ria"),meetingLink:Ge.string().url("Link da reuni\xE3o deve ser uma URL v\xE1lida").optional().or(Ge.literal("")),location:Ge.string().optional(),status:Ge.enum(pc).default(pc.PENDING)}).refine(o=>o.format===Li.ONLINE?!!o.meetingLink:o.format===Li.IN_PERSON?!!o.location:!0,{message:"Reuni\xF5es online devem ter link e reuni\xF5es presenciais devem ter localiza\xE7\xE3o",path:["format"]}),Wi=class{constructor(e){this.meetingRepository=e}async handle(e,t){try{let{title:r,scheduledAt:i,format:n,agenda:s,meetingLink:m,location:c,status:d}=dc.parse(e.body);return await this.meetingRepository.create({title:r,scheduledAt:i,format:n,agenda:s,meetingLink:m||void 0,location:c||void 0,status:d??pc.PENDING}),t.sendStatus(201)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as zC}from"@asteasolutions/zod-to-openapi";import lc from"zod";zC(lc);var uc=lc.object({id:lc.uuid()}),_i=class{constructor(e){this.meetingRepository=e}async handle(e,t){try{let{id:r}=uc.parse({id:e.params.id});if(!await this.meetingRepository.findById(r))throw new p("A reuni\xE3o n\xE3o existe.");return await this.meetingRepository.deleteById(r),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as HC}from"@asteasolutions/zod-to-openapi";import gc from"zod";HC(gc);var Hi=gc.object({id:gc.uuid()}),zi=class{constructor(e){this.meetingRepository=e}async handle(e,t){try{let{id:r}=Hi.parse({id:e.params.id}),i=await this.meetingRepository.findById(r);if(!i)throw new p("A reuni\xE3o n\xE3o existe.");return t.status(200).json(i)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as VC}from"@asteasolutions/zod-to-openapi";import{MeetingStatus as ZC}from"@prisma/client";import fc from"zod";VC(fc);var yc=fc.object({status:fc.enum(ZC)}),Vi=class{constructor(e){this.meetingRepository=e}async handle(e,t){try{let{status:r}=yc.parse({status:e.params.status}),i=await this.meetingRepository.findByStatus(r);return t.status(200).json(i)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as KC}from"@asteasolutions/zod-to-openapi";import{MeetingFormat as JC,MeetingStatus as YC}from"@prisma/client";import lr from"zod";var XC=1,$C=10;KC(lr);var hc=lr.object({page:lr.coerce.number().min(1).default(XC),limit:lr.coerce.number().min(1).default($C),title:lr.string().optional(),format:lr.enum(JC).optional(),status:lr.enum(YC).optional(),orderBy:lr.enum(["asc","desc"]).optional()}),Zi=class{constructor(e){this.meetingRepository=e}async handle(e,t){try{let{page:r,limit:i,...n}=hc.parse(e.query),s=i*r-i,[m,c]=await Promise.all([this.meetingRepository.find({pagination:{offset:s,limit:i},filter:n}),this.meetingRepository.count({filter:n})]),d=Math.max(Math.ceil(c/i),1);t.status(200).json({page:r,totalPages:d,offset:s,limit:i,meetings:m})}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as QC}from"@asteasolutions/zod-to-openapi";import{MeetingFormat as ew,MeetingStatus as rw}from"@prisma/client";import Te from"zod";QC(Te);var Rc=Te.object({id:Te.uuid(),title:Te.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio").optional(),scheduledAt:Te.coerce.date().optional(),format:Te.enum(ew).optional(),agenda:Te.string().min(1,"Pauta \xE9 obrigat\xF3ria").optional(),meetingLink:Te.string().url("Link da reuni\xE3o deve ser uma URL v\xE1lida").optional().or(Te.literal("")),location:Te.string().optional(),status:Te.enum(rw).optional()}),Ki=class{constructor(e){this.meetingRepository=e}async handle(e,t){try{let{id:r,title:i,scheduledAt:n,format:s,agenda:m,meetingLink:c,location:d,status:R}=Rc.parse({id:e.params.id,...e.body});if(!await this.meetingRepository.findById(r))throw new p("A reuni\xE3o n\xE3o existe.");return await this.meetingRepository.update({id:r,title:i,scheduledAt:n,format:s,agenda:m,meetingLink:c||void 0,location:d||void 0,status:R}),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var iw=P.object({id:P.uuid(),title:P.string(),publishedAt:P.date(),documentUrl:P.string(),meetingId:P.uuid(),createdAt:P.date(),updatedAt:P.date()}),Ic=P.object({id:P.uuid(),title:P.string(),scheduledAt:P.date(),format:P.enum(tw),agenda:P.string(),meetingLink:P.string().nullable(),location:P.string().nullable(),status:P.enum(ow),minutes:iw.nullable(),createdAt:P.date(),updatedAt:P.date()}),Mu={method:"post",path:"/meeting",tags:["Meetings"],summary:"Create a new meeting",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:dc}}}},responses:{201:{description:"Meeting created successfully",summary:"Meeting Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:P.object({errors:P.record(P.string(),P.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:P.object({message:P.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:P.object({message:P.string()})}}}}},Pu={method:"get",path:"/meeting",tags:["Meetings"],summary:"List all meetings with pagination and filters",request:{query:hc},responses:{200:{description:"List of meetings retrieved successfully with pagination",summary:"Meetings Retrieved",content:{"application/json":{schema:P.object({page:P.number(),totalPages:P.number(),offset:P.number(),limit:P.number(),meetings:P.array(Ic)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:P.object({errors:P.record(P.string(),P.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:P.object({message:P.string()})}}}}},Au={method:"get",path:"/meeting/{id}",tags:["Meetings"],summary:"Find meeting by ID",request:{params:Hi},responses:{200:{description:"Meeting details retrieved successfully",summary:"Meeting Retrieved",content:{"application/json":{schema:Ic}}},400:{description:"Invalid meeting ID format",summary:"Validation Error",content:{"application/json":{schema:P.object({errors:P.record(P.string(),P.string())})}}},404:{description:"Meeting not found with the provided ID",summary:"Meeting Not Found",content:{"application/json":{schema:P.object({message:P.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:P.object({message:P.string()})}}}}},Tu={method:"get",path:"/meeting/status/{status}",tags:["Meetings"],summary:"Find meetings by status",request:{params:yc},responses:{200:{description:"Meetings retrieved successfully by status",summary:"Meetings Retrieved by Status",content:{"application/json":{schema:P.array(Ic)}}},400:{description:"Invalid status parameter provided",summary:"Validation Error",content:{"application/json":{schema:P.object({errors:P.record(P.string(),P.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:P.object({message:P.string()})}}}}},Du={method:"put",path:"/meeting/{id}",tags:["Meetings"],summary:"Update meeting",security:[{bearerAuth:[]}],request:{params:Hi,body:{content:{"application/json":{schema:Rc.omit({id:!0})}}}},responses:{200:{description:"Meeting updated successfully",summary:"Meeting Updated"},400:{description:"Invalid input data or meeting ID format",summary:"Validation Error",content:{"application/json":{schema:P.object({errors:P.record(P.string(),P.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:P.object({message:P.string()})}}},404:{description:"Meeting not found with the provided ID",summary:"Meeting Not Found",content:{"application/json":{schema:P.object({message:P.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:P.object({message:P.string()})}}}}},Fu={method:"delete",path:"/meeting/{id}",tags:["Meetings"],summary:"Delete meeting",security:[{bearerAuth:[]}],request:{params:uc},responses:{200:{description:"Meeting deleted successfully",summary:"Meeting Deleted"},400:{description:"Invalid meeting ID format",summary:"Validation Error",content:{"application/json":{schema:P.object({errors:P.record(P.string(),P.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:P.object({message:P.string()})}}},404:{description:"Meeting not found with the provided ID",summary:"Meeting Not Found",content:{"application/json":{schema:P.object({message:P.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:P.object({message:P.string()})}}}}};import B from"zod";import{extendZodWithOpenApi as nw}from"@asteasolutions/zod-to-openapi";import Jt from"zod";var sw=5,Bu=1024,aw=Bu*Bu,mw=sw*aw;nw(Jt);var bc=Jt.object({title:Jt.string().min(1),content:Jt.string().min(1),image:Jt.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=mw,{message:"A imagem deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB."})}),Ji=class{constructor(e,t){this.newsRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{title:r,content:i,image:n}=bc.parse({...e.body,image:e.file}),s=e.user.id,m=await this.firebaseStorageService.uploadFile({file:n,folder:M.NEWS,id:s});await this.newsRepository.create({title:r,content:i,authorId:s,imageUrl:m}),t.sendStatus(201)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as cw}from"@asteasolutions/zod-to-openapi";import ur from"zod";var pw=1,dw=7;cw(ur);var Xi=ur.object({page:ur.coerce.number().min(1).default(pw),limit:ur.coerce.number().min(1).default(dw),authorId:ur.string(),title:ur.string().optional(),content:ur.string().optional(),orderBy:ur.enum(["asc","desc"]).default("desc")}),Yi=class{constructor(e){this.newsRepository=e}async handle(e,t){try{let{page:r,limit:i,authorId:n,...s}=Xi.parse(e.query),m=i*r-i,[c,d]=await Promise.all([this.newsRepository.findByAuthorId({authorId:n,pagination:{offset:m,limit:i},filter:s}),this.newsRepository.count({filter:{authorId:n,...s}})]),R=Math.max(Math.ceil(d/i),1);t.status(200).json({page:r,totalPages:R,offset:m,limit:i,news:c})}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as lw}from"@asteasolutions/zod-to-openapi";import Cc from"zod";lw(Cc);var wc=Cc.object({id:Cc.string()}),$i=class{constructor(e){this.newsRepository=e}async handle(e,t){try{let{id:r}=wc.parse(e.params),i=await this.newsRepository.findById(r);if(!i)throw new p("Not\xEDcia n\xE3o encontrada.");t.status(200).json(i)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as uw}from"@asteasolutions/zod-to-openapi";import gr from"zod";var gw=1,fw=9;uw(gr);var Sc=gr.object({page:gr.coerce.number().min(1).default(gw),limit:gr.coerce.number().min(1).default(fw),title:gr.string().optional(),content:gr.string().optional(),authorId:gr.string().optional(),orderBy:gr.enum(["asc","desc"]).default("desc")}),Qi=class{constructor(e){this.newsRepository=e}async handle(e,t){try{let{page:r,limit:i,...n}=Sc.parse(e.query),s=i*r-i,[m,c]=await Promise.all([this.newsRepository.find({pagination:{offset:s,limit:i},filter:n}),this.newsRepository.count({filter:n})]),d=Math.max(Math.ceil(c/i),1);t.status(200).json({page:r,totalPages:d,offset:s,limit:i,news:m})}catch(r){if(r instanceof Error)throw new a(r.message)}}};var qu={method:"post",path:"/news",tags:["News"],summary:"Create news",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:bc}}}},responses:{201:{description:"News article created successfully",summary:"News Created",content:{"application/json":{schema:B.object({message:B.string()})}}},400:{description:"Invalid input data or file format",summary:"Validation Error",content:{"application/json":{schema:B.object({errors:B.record(B.string(),B.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:B.object({message:B.string()})}}}}},Uu={method:"get",path:"/news",tags:["News"],summary:"List news",request:{query:Sc},responses:{200:{description:"Paginated list of news articles retrieved successfully",summary:"News Retrieved",content:{"application/json":{schema:B.object({page:B.number(),totalPages:B.number(),offset:B.number(),limit:B.number(),news:B.array(B.object({title:B.string(),content:B.string(),id:B.string(),createdAt:B.date(),updatedAt:B.date(),imageUrl:B.string().nullable()}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:B.object({errors:B.record(B.string(),B.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:B.object({message:B.string()})}}}}},ku={method:"get",path:"/news/{id}",tags:["News"],summary:"Find news by ID",request:{params:wc},responses:{200:{description:"News article details retrieved successfully",summary:"News Retrieved",content:{"application/json":{schema:B.object({page:B.number(),totalPages:B.number(),offset:B.number(),limit:B.number(),news:B.object({title:B.string(),content:B.string(),id:B.string(),createdAt:B.date(),updatedAt:B.date(),imageUrl:B.string().nullable()})})}}},400:{description:"Invalid news ID format",summary:"Validation Error",content:{"application/json":{schema:B.object({errors:B.record(B.string(),B.string())})}}},404:{description:"News article not found with the provided ID",summary:"News Not Found",content:{"application/json":{schema:B.object({message:B.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:B.object({message:B.string()})}}}}},Ou={method:"get",path:"/news/author/{author_id}",tags:["News"],summary:"List news by author",request:{params:Xi.pick({authorId:!0}).transform(()=>({author_id:""})),query:Xi.omit({authorId:!0})},responses:{200:{description:"Paginated list of news articles by author retrieved successfully",summary:"Author News Retrieved",content:{"application/json":{schema:B.object({page:B.number(),totalPages:B.number(),offset:B.number(),limit:B.number(),news:B.array(B.object({title:B.string(),content:B.string(),id:B.string(),createdAt:B.date(),updatedAt:B.date(),imageUrl:B.string().nullable()}))})}}},400:{description:"Invalid author ID or query parameters",summary:"Validation Error",content:{"application/json":{schema:B.object({errors:B.record(B.string(),B.string())})}}},404:{description:"Author not found with the provided ID",summary:"Author Not Found",content:{"application/json":{schema:B.object({message:B.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:B.object({message:B.string()})}}}}};import k from"zod";import{extendZodWithOpenApi as yw}from"@asteasolutions/zod-to-openapi";import Ne from"zod";var Nu=2,Gu=1024,hw=Gu*Gu,Rw=Nu*hw;yw(Ne);var vc=Ne.object({name:Ne.string().min(1,"Nome \xE9 obrigat\xF3rio"),logo:Ne.any().refine(o=>o==null||typeof o!="object"||typeof o.size!="number"?!1:o.size<=Rw,`A imagem deve ter no m\xE1ximo ${Nu}MB.`),websiteUrl:Ne.url("URL do site deve ser v\xE1lida").optional(),description:Ne.string().optional(),category:Ne.string().optional(),since:Ne.coerce.date(),isActive:Ne.preprocess(o=>o==="true",Ne.boolean().optional())}),en=class{constructor(e,t){this.partnerRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{name:r,logo:i,websiteUrl:n,description:s,category:m,since:c,isActive:d}=vc.parse({...e.body,logo:e.file}),R=await this.partnerRepository.create({name:r,websiteUrl:n,description:s,category:m,since:c,isActive:d}),E=await this.firebaseStorageService.uploadFile({file:i,id:R.id,folder:M.PARTNER});return await this.partnerRepository.update({id:R.id,logoUrl:E}),t.sendStatus(201)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as Iw}from"@asteasolutions/zod-to-openapi";import Ec from"zod";Iw(Ec);var jc=Ec.object({id:Ec.uuid()}),rn=class{constructor(e,t){this.partnerRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{id:r}=jc.parse({id:e.params.id}),i=await this.partnerRepository.findById(r);if(!i)throw new p("O parceiro n\xE3o existe.");return i.logoUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.logoUrl}),await this.partnerRepository.deleteById(r),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as bw}from"@asteasolutions/zod-to-openapi";import xc from"zod";bw(xc);var on=xc.object({id:xc.uuid()}),tn=class{constructor(e){this.partnerRepository=e}async handle(e,t){try{let{id:r}=on.parse({id:e.params.id}),i=await this.partnerRepository.findById(r);if(!i)throw new p("O parceiro n\xE3o existe.");return t.status(200).json(i)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as Cw}from"@asteasolutions/zod-to-openapi";import Ze from"zod";var ww=1,Sw=9;Cw(Ze);var Mc=Ze.object({page:Ze.coerce.number().min(1).default(ww),limit:Ze.coerce.number().min(1).default(Sw),name:Ze.string().optional(),description:Ze.string().optional(),category:Ze.string().optional(),isActive:Ze.coerce.boolean().optional(),orderBy:Ze.enum(["asc","desc"]).optional()}),nn=class{constructor(e){this.partnerRepository=e}async handle(e,t){try{let{page:r,limit:i,...n}=Mc.parse(e.query),s=i*r-i,[m,c]=await Promise.all([this.partnerRepository.find({pagination:{offset:s,limit:i},filter:n}),this.partnerRepository.count({filter:n})]),d=Math.max(Math.ceil(c/i),1);t.status(200).json({page:r,totalPages:d,offset:s,limit:i,partners:m})}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as vw}from"@asteasolutions/zod-to-openapi";import De from"zod";var Wu=2,Lu=1024,Ew=Lu*Lu,jw=Wu*Ew;vw(De);var Pc=De.object({id:De.uuid(),name:De.string().min(1,"Nome \xE9 obrigat\xF3rio").optional(),logo:De.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=jw,`A imagem deve ter no m\xE1ximo ${Wu}MB.`).optional(),websiteUrl:De.url("URL do site deve ser v\xE1lida").optional(),description:De.string().optional(),category:De.string().optional(),since:De.coerce.date().optional(),isActive:De.preprocess(o=>o==="true",De.boolean().optional())}),sn=class{constructor(e,t){this.partnerRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{id:r,name:i,logo:n,websiteUrl:s,description:m,category:c,since:d,isActive:R}=Pc.parse({id:e.params.id,...e.body,logo:e.file}),E=await this.partnerRepository.findById(r);if(!E)throw new p("O parceiro n\xE3o existe.");let q=E.logoUrl;if(n&&(q=await this.firebaseStorageService.uploadFile({file:n,id:r,folder:"images/partners"})),!q)throw new a("Logo URL \xE9 obrigat\xF3rio");return await this.partnerRepository.update({id:r,name:i,logoUrl:q,websiteUrl:s,description:m,category:c,since:d,isActive:R}),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var _u=k.object({id:k.uuid(),name:k.string(),logoUrl:k.string(),description:k.string().nullable(),category:k.string().nullable(),since:k.date(),isActive:k.boolean(),createdAt:k.date(),updatedAt:k.date()}),zu={method:"post",path:"/partner",tags:["Partners"],summary:"Create a new partner with logo upload",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:vc}}}},responses:{201:{description:"Partner created successfully",summary:"Partner Created"},400:{description:"Invalid input data, missing required fields, or invalid logo format/size",summary:"Validation Error",content:{"application/json":{schema:k.object({errors:k.record(k.string(),k.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:k.object({message:k.string()})}}},409:{description:"Partner with this name already exists",summary:"Conflict",content:{"application/json":{schema:k.object({message:k.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:k.object({message:k.string()})}}}}},Hu={method:"get",path:"/partner",tags:["Partners"],summary:"List all partners with pagination and filters",request:{query:Mc},responses:{200:{description:"List of partners retrieved successfully with pagination",summary:"Partners Retrieved",content:{"application/json":{schema:k.object({page:k.number(),totalPages:k.number(),offset:k.number(),limit:k.number(),partners:k.array(_u)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:k.object({errors:k.record(k.string(),k.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:k.object({message:k.string()})}}}}},Vu={method:"get",path:"/partner/{id}",tags:["Partners"],summary:"Find partner by ID",request:{params:on},responses:{200:{description:"Partner details retrieved successfully",summary:"Partner Retrieved",content:{"application/json":{schema:_u}}},400:{description:"Invalid partner ID format",summary:"Validation Error",content:{"application/json":{schema:k.object({errors:k.record(k.string(),k.string())})}}},404:{description:"Partner not found with the provided ID",summary:"Partner Not Found",content:{"application/json":{schema:k.object({message:k.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:k.object({message:k.string()})}}}}},Zu={method:"put",path:"/partner/{id}",tags:["Partners"],summary:"Update partner with optional logo upload",security:[{bearerAuth:[]}],request:{params:on,body:{content:{"multipart/form-data":{schema:Pc.omit({id:!0})}}}},responses:{200:{description:"Partner updated successfully",summary:"Partner Updated"},400:{description:"Invalid input data, partner ID format, or invalid logo format/size",summary:"Validation Error",content:{"application/json":{schema:k.object({errors:k.record(k.string(),k.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:k.object({message:k.string()})}}},404:{description:"Partner not found with the provided ID",summary:"Partner Not Found",content:{"application/json":{schema:k.object({message:k.string()})}}},409:{description:"Partner with this name already exists",summary:"Conflict",content:{"application/json":{schema:k.object({message:k.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:k.object({message:k.string()})}}}}},Ku={method:"delete",path:"/partner/{id}",tags:["Partners"],summary:"Delete partner",security:[{bearerAuth:[]}],request:{params:jc},responses:{200:{description:"Partner deleted successfully",summary:"Partner Deleted"},400:{description:"Invalid partner ID format",summary:"Validation Error",content:{"application/json":{schema:k.object({errors:k.record(k.string(),k.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:k.object({message:k.string()})}}},404:{description:"Partner not found with the provided ID",summary:"Partner Not Found",content:{"application/json":{schema:k.object({message:k.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:k.object({message:k.string()})}}}}};import{$Enums as Ju}from"@prisma/client";import N from"zod";import{extendZodWithOpenApi as xw}from"@asteasolutions/zod-to-openapi";import{PendencyStatus as Mw}from"@prisma/client";import fr from"zod";xw(fr);var mn=fr.object({userId:fr.uuid(),title:fr.string().min(1),description:fr.string().optional(),status:fr.enum(Mw).default("PENDING"),dueDate:fr.coerce.date().optional(),document:fr.any().refine(o=>o&&typeof o=="object"&&o.size>0,"Arquivo do documento \xE9 obrigat\xF3rio")}),an=class{constructor(e,t,r){this.userRepository=e;this.pendencyRepository=t;this.firebaseStorageService=r}async handle(e,t){try{let{userId:r,title:i,description:n,status:s,dueDate:m,document:c}=mn.parse({...e.body,userId:e.params.user_id,document:e.file});if(!await this.userRepository.findById(r))throw new ge("O usu\xE1rio n\xE3o existe.");let R=await this.firebaseStorageService.uploadFile({file:c,id:r,folder:M.PENDENCY});return await this.pendencyRepository.create({userId:r,title:i,description:n,status:s,dueDate:m,documentUrl:R}),t.sendStatus(201)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as Pw}from"@asteasolutions/zod-to-openapi";import Ac from"zod";Pw(Ac);var Tc=Ac.object({id:Ac.uuid()}),cn=class{constructor(e,t){this.pendencyRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{id:r}=Tc.parse({id:e.params.pendency_id}),i=await this.pendencyRepository.findById(r);if(!i)throw new p("A pend\xEAncia n\xE3o existe.");return await Promise.all([this.pendencyRepository.deleteById(i.id),this.firebaseStorageService.deleteFile({fileUrl:i.documentUrl})]),t.sendStatus(204)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as Aw}from"@asteasolutions/zod-to-openapi";import{PendencyStatus as Tw}from"@prisma/client";import Ke from"zod";var Dw=1,Fw=6;Aw(Ke);var Dc=Ke.object({page:Ke.coerce.number().min(1).default(Dw),limit:Ke.coerce.number().min(1).default(Fw),title:Ke.string().optional(),description:Ke.string().optional(),status:Ke.enum(Tw).default("PENDING"),userId:Ke.uuid().optional(),orderBy:Ke.enum(["asc","desc"]).default("desc")}),pn=class{constructor(e){this.pendencyRepository=e}async handle(e,t){try{let{description:r,limit:i,orderBy:n,page:s,title:m,status:c,userId:d}=Dc.parse(e.query),R=s*i-i,[E,q]=await Promise.all([this.pendencyRepository.find({pagination:{offset:R,limit:i},filter:{title:m,description:r,status:c,orderBy:n,userId:d}}),this.pendencyRepository.count({filter:{title:m,description:r,status:c,userId:d}})]),Y=Math.max(Math.ceil(q/i),1);return t.status(200).json({page:s,totalPages:Y,offset:R,limit:i,pendencies:E})}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as Bw}from"@asteasolutions/zod-to-openapi";import Fc from"zod";Bw(Fc);var Bc=Fc.object({pendencyId:Fc.uuid()}),dn=class{constructor(e){this.pendencyRepository=e}async handle(e,t){try{let{pendencyId:r}=Bc.parse({pendencyId:e.params.pendency_id}),i=await this.pendencyRepository.findById(r);if(!i)throw new p("Pend\xEAncia n\xE3o encontrada.");return t.status(200).json(i)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as qw}from"@asteasolutions/zod-to-openapi";import{PendencyStatus as Uw}from"@prisma/client";import yr from"zod";qw(yr);var un=yr.object({id:yr.uuid(),title:yr.string().min(1),description:yr.string().optional(),status:yr.enum(Uw),dueDate:yr.coerce.date().optional(),document:yr.any().refine(o=>o==null||typeof o=="object"&&typeof o.size=="number"&&(o.size===0||o.size>0),"Arquivo do documento \xE9 inv\xE1lido").optional()}),ln=class{constructor(e,t){this.pendencyRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{document:r,id:i,...n}=un.parse({...e.body,id:e.params.pendency_id,document:e.file}),s=await this.pendencyRepository.findById(i);if(!s)throw new ge("A pend\xEAncia n\xE3o existe");let m=s.documentUrl;return r&&r.size>0&&(m=await this.firebaseStorageService.updateFile({file:r,id:s.userId,folder:M.PENDENCY,fileUrl:s.documentUrl})),await this.pendencyRepository.update({...n,id:i,documentUrl:m}),t.sendStatus(204)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var Yu={method:"post",path:"/pendency/{user_id}",tags:["Pendencies"],summary:"Create pendency for user",security:[{bearerAuth:[]}],request:{params:mn.pick({userId:!0}).transform(()=>({user_id:""})),body:{content:{"multipart/form-data":{schema:mn.omit({userId:!0})}}}},responses:{201:{description:"Pendency created successfully for the user",summary:"Pendency Created",content:{"application/json":{schema:N.object({})}}},400:{description:"Invalid input data or file format",summary:"Validation Error",content:{"application/json":{schema:N.object({errors:N.record(N.string(),N.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:N.object({message:N.string()})}}}}},Xu={method:"get",path:"/pendency",tags:["Pendencies"],summary:"List pendencies",security:[{bearerAuth:[]}],request:{query:Dc},responses:{200:{description:"Paginated list of pendencies retrieved successfully",summary:"Pendencies Retrieved",content:{"application/json":{schema:N.object({page:N.number(),totalPages:N.number(),offset:N.number(),limit:N.number(),pendencies:N.array(N.object({id:N.string(),title:N.string(),description:N.string().nullable(),status:N.enum(Ju.PendencyStatus),dueDate:N.date().nullable(),documentUrl:N.string(),userId:N.string(),createdAt:N.date(),updatedAt:N.date()}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:N.object({errors:N.record(N.string(),N.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:N.object({message:N.string()})}}}}},$u={method:"get",path:"/pendency/{pendency_id}",tags:["Pendencies"],summary:"Find pendency by ID",security:[{bearerAuth:[]}],request:{params:Bc},responses:{200:{description:"Pendency details retrieved successfully",summary:"Pendency Retrieved",content:{"application/json":{schema:N.object({id:N.string(),title:N.string(),description:N.string().nullable(),status:N.enum(Ju.PendencyStatus),dueDate:N.date().nullable(),documentUrl:N.string(),userId:N.string(),createdAt:N.date(),updatedAt:N.date()}).nullable()}}},400:{description:"Invalid pendency ID format",summary:"Validation Error",content:{"application/json":{schema:N.object({errors:N.record(N.string(),N.string())})}}},404:{description:"Pendency not found with the provided ID",summary:"Pendency Not Found",content:{"application/json":{schema:N.object({message:N.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:N.object({message:N.string()})}}}}},Qu={method:"put",path:"/pendency/{pendency_id}",tags:["Pendencies"],summary:"Update pendency",security:[{bearerAuth:[]}],request:{params:un.pick({id:!0}).transform(()=>({pendency_id:""})),body:{content:{"multipart/form-data":{schema:un.omit({id:!0})}}}},responses:{204:{description:"Pendency updated successfully",summary:"Pendency Updated"},400:{description:"Invalid input data or pendency does not exist",summary:"Validation Error",content:{"application/json":{schema:N.object({errors:N.record(N.string(),N.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:N.object({message:N.string()})}}}}},eg={method:"delete",path:"/pendency/{pendency_id}",tags:["Pendencies"],summary:"Delete pendency",security:[{bearerAuth:[]}],request:{params:Tc},responses:{204:{description:"Pendency deleted successfully",summary:"Pendency Deleted"},400:{description:"Invalid pendency ID format",summary:"Validation Error",content:{"application/json":{schema:N.object({errors:N.record(N.string(),N.string())})}}},404:{description:"Pendency not found with the provided ID",summary:"Pendency Not Found",content:{"application/json":{schema:N.object({message:N.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:N.object({message:N.string()})}}}}};import j from"zod";import{extendZodWithOpenApi as kw}from"@asteasolutions/zod-to-openapi";import qc from"zod";kw(qc);var Uc=qc.object({id:qc.uuid()}),gn=class{constructor(e,t){this.postGraduateProgramRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{id:r}=Uc.parse({id:e.params.id}),i=await this.postGraduateProgramRepository.findById(r);if(!i)throw new p("O programa de p\xF3s-gradua\xE7\xE3o n\xE3o existe.");return i.imageUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.imageUrl}),await this.postGraduateProgramRepository.deleteById(r),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as Ow}from"@asteasolutions/zod-to-openapi";import kc from"zod";Ow(kc);var Oc=kc.object({id:kc.uuid()}),fn=class{constructor(e){this.postGraduateProgramRepository=e}async handle(e,t){try{let{id:r}=Oc.parse({id:e.params.id}),i=await this.postGraduateProgramRepository.findById(r);if(!i)throw new p("Programa de p\xF3s-gradua\xE7\xE3o n\xE3o encontrado.");return t.status(200).json(i)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as Gw}from"@asteasolutions/zod-to-openapi";import hr from"zod";var Nw=1,Lw=6;Gw(hr);var Gc=hr.object({page:hr.coerce.number().min(1).default(Nw),limit:hr.coerce.number().min(1).default(Lw),title:hr.string().optional(),description:hr.string().optional(),contact:hr.string().optional(),orderBy:hr.enum(["asc","desc"]).default("desc")}),yn=class{constructor(e){this.postGraduateProgramRepository=e}async handle(e,t){try{let{limit:r,page:i,...n}=Gc.parse(e.query),s=i*r-r,[m,c]=await Promise.all([this.postGraduateProgramRepository.find({pagination:{offset:s,limit:r},filter:n}),this.postGraduateProgramRepository.count({filter:n})]),d=Math.max(Math.ceil(c/r),1);return t.status(200).json({page:i,totalPages:d,offset:s,limit:r,postGraduatePrograms:m})}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as Ww}from"@asteasolutions/zod-to-openapi";import Le from"zod";var tg=5,rg=1024,_w=rg*rg,zw=tg*_w;Ww(Le);var Nc=Le.object({id:Le.uuid(),title:Le.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio.").optional(),description:Le.string().optional(),startDate:Le.coerce.date().optional(),endDate:Le.coerce.date().optional(),contact:Le.string().min(1,"Contato \xE9 obrigat\xF3rio.").optional(),registrationLink:Le.url("URL de inscri\xE7\xE3o deve ser v\xE1lida").optional(),image:Le.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=zw,`A imagem deve ter no m\xE1ximo ${tg}MB.`).optional()}),hn=class{constructor(e,t){this.postGraduateProgramRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{id:r,image:i,title:n,description:s,startDate:m,endDate:c,contact:d,registrationLink:R}=Nc.parse({id:e.params.id,...e.body,image:e.file}),E=await this.postGraduateProgramRepository.findById(r);if(!E)throw new p("O programa de p\xF3s-gradua\xE7\xE3o n\xE3o existe.");let q=E.imageUrl;if(i&&(q=await this.firebaseStorageService.uploadFile({file:i,id:r,folder:M.POST_GRADUATE_PROGRAM})),!q)throw new a("URL da imagem \xE9 obrigat\xF3rio");return await this.postGraduateProgramRepository.update({id:r,title:n,description:s,startDate:m,endDate:c,contact:d,registrationLink:R,imageUrl:q}),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var og={method:"post",path:"/post-graduate-programs",tags:["Post Graduate Programs"],summary:"Create post-graduate program",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:j.object({title:j.string().min(1).openapi({description:"T\xEDtulo do programa"}),description:j.string().optional().openapi({description:"Descri\xE7\xE3o do programa"}),startDate:j.string().openapi({description:"Data de in\xEDcio (ISO 8601)",example:"2024-01-01T10:00:00Z"}),endDate:j.string().openapi({description:"Data de t\xE9rmino (ISO 8601)",example:"2024-12-31T10:00:00Z"}),contact:j.string().min(1).openapi({description:"Informa\xE7\xF5es de contato"}),registrationLink:j.string().url().optional().openapi({description:"Link de inscri\xE7\xE3o"}),image:j.string().optional().openapi({description:"Imagem do programa (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{201:{description:"Post-graduate program created successfully",summary:"Program Created"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:j.object({errors:j.record(j.string(),j.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:j.object({message:j.string()})}}}}},ig={method:"get",path:"/post-graduate-programs",tags:["Post Graduate Programs"],summary:"List post-graduate programs",security:[{bearerAuth:[]}],request:{query:Gc},responses:{200:{description:"Paginated list of post-graduate programs retrieved successfully",summary:"Programs Retrieved",content:{"application/json":{schema:j.object({page:j.number(),totalPages:j.number(),offset:j.number(),limit:j.number(),postGraduatePrograms:j.array(j.object({id:j.string(),title:j.string(),imageUrl:j.string().nullable(),description:j.string().nullable(),startDate:j.date(),endDate:j.date(),contact:j.string(),registrationLink:j.string().nullable(),createdAt:j.date(),updatedAt:j.date()}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:j.object({errors:j.record(j.string(),j.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:j.object({message:j.string()})}}}}},ng={method:"get",path:"/post-graduate-programs/{id}",tags:["Post Graduate Programs"],summary:"Find post-graduate program by ID",security:[{bearerAuth:[]}],request:{params:Oc},responses:{200:{description:"Post-graduate program details retrieved successfully",summary:"Program Retrieved",content:{"application/json":{schema:j.object({id:j.string(),title:j.string(),imageUrl:j.string().nullable(),description:j.string().nullable(),startDate:j.date(),endDate:j.date(),contact:j.string(),registrationLink:j.string().nullable(),createdAt:j.date(),updatedAt:j.date()}).nullable()}}},400:{description:"Invalid program ID format",summary:"Validation Error",content:{"application/json":{schema:j.object({errors:j.record(j.string(),j.string())})}}},404:{description:"Post-graduate program not found with the provided ID",summary:"Program Not Found",content:{"application/json":{schema:j.object({message:j.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:j.object({message:j.string()})}}}}},sg={method:"put",path:"/post-graduate-programs/{id}",tags:["Post Graduate Programs"],summary:"Update post-graduate program",security:[{bearerAuth:[]}],request:{params:Nc.pick({id:!0}),body:{content:{"multipart/form-data":{schema:j.object({title:j.string().min(1).optional().openapi({description:"T\xEDtulo do programa"}),description:j.string().optional().openapi({description:"Descri\xE7\xE3o do programa"}),startDate:j.string().optional().openapi({description:"Data de in\xEDcio (ISO 8601)",example:"2024-01-01T10:00:00Z"}),endDate:j.string().optional().openapi({description:"Data de t\xE9rmino (ISO 8601)",example:"2024-12-31T10:00:00Z"}),contact:j.string().min(1).optional().openapi({description:"Informa\xE7\xF5es de contato"}),registrationLink:j.string().url().optional().openapi({description:"Link de inscri\xE7\xE3o"}),image:j.string().optional().openapi({description:"Imagem do programa (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{200:{description:"Post-graduate program updated successfully",summary:"Program Updated"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:j.object({errors:j.record(j.string(),j.string())})}}},404:{description:"Post-graduate program not found with the provided ID",summary:"Program Not Found",content:{"application/json":{schema:j.object({message:j.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:j.object({message:j.string()})}}}}},ag={method:"delete",path:"/post-graduate-programs/{id}",tags:["Post Graduate Programs"],summary:"Delete post-graduate program",security:[{bearerAuth:[]}],request:{params:Uc},responses:{200:{description:"Post-graduate program deleted successfully",summary:"Program Deleted"},400:{description:"Invalid program ID format",summary:"Validation Error",content:{"application/json":{schema:j.object({errors:j.record(j.string(),j.string())})}}},404:{description:"Post-graduate program not found with the provided ID",summary:"Program Not Found",content:{"application/json":{schema:j.object({message:j.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:j.object({message:j.string()})}}}}};import{$Enums as Jw}from"@prisma/client";import z from"zod";import{extendZodWithOpenApi as Hw}from"@asteasolutions/zod-to-openapi";import Yt from"zod";Hw(Yt);var Lc=Yt.object({role:Yt.string().min(1),description:Yt.string().optional(),userId:Yt.uuid()}),Rn=class{constructor(e){this.referenceCenterTeamMemberRepository=e}async handle(e,t){try{let{role:r,description:i,userId:n}=Lc.parse(e.body);return await this.referenceCenterTeamMemberRepository.create({role:r,description:i,userId:n}),t.sendStatus(201)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as Vw}from"@asteasolutions/zod-to-openapi";import Wc from"zod";Vw(Wc);var _c=Wc.object({id:Wc.uuid()}),In=class{constructor(e){this.referenceCenterTeamMemberRepository=e}async handle(e,t){try{let{id:r}=_c.parse({id:e.params.id});if(!await this.referenceCenterTeamMemberRepository.findById(r))throw new p("O membro do centro de refer\xEAncia n\xE3o existe.");return await this.referenceCenterTeamMemberRepository.deleteById(r),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as Zw}from"@asteasolutions/zod-to-openapi";import zc from"zod";Zw(zc);var Cn=zc.object({id:zc.uuid()}),bn=class{constructor(e){this.referenceCenterTeamMemberRepository=e}async handle(e,t){try{let{id:r}=Cn.parse({id:e.params.id}),i=await this.referenceCenterTeamMemberRepository.findById(r);if(!i)throw new p("O membro do centro de refer\xEAncia n\xE3o existe.");return t.status(200).json(i)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as Kw}from"@asteasolutions/zod-to-openapi";import lt from"zod";Kw(lt);var Hc=lt.object({id:lt.uuid(),role:lt.string().min(1).optional(),description:lt.string().optional(),userId:lt.uuid().optional()}),wn=class{constructor(e){this.referenceCenterTeamMemberRepository=e}async handle(e,t){try{let{id:r,role:i,description:n,userId:s}=Hc.parse({id:e.params.id,...e.body});if(!await this.referenceCenterTeamMemberRepository.findById(r))throw new p("O membro do centro de refer\xEAncia n\xE3o existe.");return await this.referenceCenterTeamMemberRepository.update({id:r,role:i,description:n,userId:s}),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var Yw=z.object({id:z.uuid(),name:z.string(),emailAddress:z.string(),avatarUrl:z.string().nullable(),orcid:z.string().nullable(),phone:z.string().nullable(),lattesUrl:z.string().nullable(),role:z.enum(Jw.UserRole)}),mg=z.object({id:z.uuid(),role:z.string(),description:z.string().nullable(),createdAt:z.date(),updatedAt:z.date(),userId:z.uuid(),user:Yw}),cg={method:"post",path:"/reference-center-team-member",tags:["Reference Center Team Members"],summary:"Create a new Reference Center Team Member",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:Lc}}}},responses:{201:{description:"Reference Center Team Member created successfully",summary:"Reference Center Team Member Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:z.object({errors:z.record(z.string(),z.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:z.object({message:z.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:z.object({message:z.string()})}}}}},pg={method:"get",path:"/reference-center-team-member",tags:["Reference Center Team Members"],summary:"List all Reference Center Team Members with filters",request:{query:z.object({role:z.string().optional(),orderBy:z.enum(["asc","desc"]).optional()})},responses:{200:{description:"List of Reference Center Team Members retrieved successfully",summary:"Reference Center Team Members Retrieved",content:{"application/json":{schema:z.object({members:z.array(mg)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:z.object({message:z.string()})}}}}},dg={method:"get",path:"/reference-center-team-member/{id}",tags:["Reference Center Team Members"],summary:"Find Reference Center Team Member by ID",request:{params:Cn},responses:{200:{description:"Reference Center Team Member details retrieved successfully",summary:"Reference Center Team Member Retrieved",content:{"application/json":{schema:mg}}},400:{description:"Invalid Reference Center Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:z.object({errors:z.record(z.string(),z.string())})}}},404:{description:"Reference Center Team Member not found with the provided ID",summary:"Reference Center Team Member Not Found",content:{"application/json":{schema:z.object({message:z.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:z.object({message:z.string()})}}}}},lg={method:"put",path:"/reference-center-team-member/{id}",tags:["Reference Center Team Members"],summary:"Update Reference Center Team Member",security:[{bearerAuth:[]}],request:{params:Cn,body:{content:{"application/json":{schema:Hc.omit({id:!0})}}}},responses:{200:{description:"Reference Center Team Member updated successfully",summary:"Reference Center Team Member Updated"},400:{description:"Invalid input data or Reference Center Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:z.object({errors:z.record(z.string(),z.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:z.object({message:z.string()})}}},404:{description:"Reference Center Team Member not found with the provided ID",summary:"Reference Center Team Member Not Found",content:{"application/json":{schema:z.object({message:z.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:z.object({message:z.string()})}}}}},ug={method:"delete",path:"/reference-center-team-member/{id}",tags:["Reference Center Team Members"],summary:"Delete Reference Center Team Member",security:[{bearerAuth:[]}],request:{params:_c},responses:{200:{description:"Reference Center Team Member deleted successfully",summary:"Reference Center Team Member Deleted"},400:{description:"Invalid Reference Center Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:z.object({errors:z.record(z.string(),z.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:z.object({message:z.string()})}}},404:{description:"Reference Center Team Member not found with the provided ID",summary:"Reference Center Team Member Not Found",content:{"application/json":{schema:z.object({message:z.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:z.object({message:z.string()})}}}}};import{RegimentStatus as lS}from"@prisma/client";import U from"zod";import{extendZodWithOpenApi as Xw}from"@asteasolutions/zod-to-openapi";import{RegimentStatus as fg}from"@prisma/client";import Ar from"zod";var yg=10,gg=1024,$w=gg*gg,Qw=yg*$w;Xw(Ar);var Vc=Ar.object({title:Ar.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio"),version:Ar.string().min(1,"Vers\xE3o \xE9 obrigat\xF3ria"),publishedAt:Ar.coerce.date(),document:Ar.any().refine(o=>o==null||typeof o!="object"||typeof o.size!="number"?!1:o.size<=Qw,`O documento deve ter no m\xE1ximo ${yg}MB.`),status:Ar.enum(fg).optional()}),Sn=class{constructor(e,t){this.regimentRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{title:r,version:i,publishedAt:n,document:s,status:m}=Vc.parse({...e.body,document:e.file}),c=await this.regimentRepository.create({title:r,version:i,publishedAt:n,documentUrl:"",status:m??fg.IN_FORCE}),d=await this.firebaseStorageService.uploadFile({file:s,id:c.id,folder:M.REGIMENT});return await this.regimentRepository.update({id:c.id,documentUrl:d}),t.sendStatus(201)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as eS}from"@asteasolutions/zod-to-openapi";import Zc from"zod";eS(Zc);var Kc=Zc.object({id:Zc.uuid()}),vn=class{constructor(e,t){this.regimentRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{id:r}=Kc.parse({id:e.params.id}),i=await this.regimentRepository.findById(r);if(!i)throw new p("O regimento n\xE3o existe.");return i.documentUrl&&await this.firebaseStorageService.deleteFile({fileUrl:i.documentUrl}),await this.regimentRepository.deleteById(r),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as rS}from"@asteasolutions/zod-to-openapi";import Jc from"zod";rS(Jc);var jn=Jc.object({id:Jc.uuid()}),En=class{constructor(e){this.regimentRepository=e}async handle(e,t){try{let{id:r}=jn.parse({id:e.params.id}),i=await this.regimentRepository.findById(r);if(!i)throw new p("O regimento n\xE3o existe.");return t.status(200).json(i)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as tS}from"@asteasolutions/zod-to-openapi";import{RegimentStatus as oS}from"@prisma/client";import Yc from"zod";tS(Yc);var Xc=Yc.object({status:Yc.enum(oS)}),xn=class{constructor(e){this.regimentRepository=e}async handle(e,t){try{let{status:r}=Xc.parse({status:e.params.status}),i=await this.regimentRepository.findByStatus(r);return t.status(200).json(i)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as iS}from"@asteasolutions/zod-to-openapi";import{RegimentStatus as nS}from"@prisma/client";import Tr from"zod";var sS=1,aS=10;iS(Tr);var $c=Tr.object({page:Tr.coerce.number().min(1).default(sS),limit:Tr.coerce.number().min(1).default(aS),title:Tr.string().optional(),status:Tr.enum(nS).optional(),orderBy:Tr.enum(["asc","desc"]).optional()}),Mn=class{constructor(e){this.regimentRepository=e}async handle(e,t){try{let{page:r,limit:i,...n}=$c.parse(e.query),s=i*r-i,[m,c]=await Promise.all([this.regimentRepository.find({pagination:{offset:s,limit:i},filter:n}),this.regimentRepository.count({filter:n})]),d=Math.max(Math.ceil(c/i),1);t.status(200).json({page:r,totalPages:d,offset:s,limit:i,regiments:m})}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as mS}from"@asteasolutions/zod-to-openapi";import{RegimentStatus as cS}from"@prisma/client";import Rr from"zod";var Rg=10,hg=1024,pS=hg*hg,dS=Rg*pS;mS(Rr);var Qc=Rr.object({id:Rr.uuid(),title:Rr.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio").optional(),version:Rr.string().min(1,"Vers\xE3o \xE9 obrigat\xF3ria").optional(),publishedAt:Rr.coerce.date().optional(),document:Rr.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=dS,`O documento deve ter no m\xE1ximo ${Rg}MB.`).optional(),status:Rr.enum(cS).optional()}),Pn=class{constructor(e,t){this.regimentRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{id:r,title:i,version:n,publishedAt:s,document:m,status:c}=Qc.parse({id:e.params.id,...e.body,document:e.file}),d=await this.regimentRepository.findById(r);if(!d)throw new p("O regimento n\xE3o existe.");let R=d.documentUrl;return m&&(d.documentUrl&&await this.firebaseStorageService.deleteFile({fileUrl:d.documentUrl}),R=await this.firebaseStorageService.uploadFile({file:m,id:r,folder:M.REGIMENT})),await this.regimentRepository.update({id:r,title:i,version:n,publishedAt:s,documentUrl:R??void 0,status:c}),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var ep=U.object({id:U.uuid(),title:U.string(),version:U.string(),publishedAt:U.date(),documentUrl:U.string(),status:U.enum(lS),createdAt:U.date(),updatedAt:U.date()}),Ig={method:"post",path:"/regiment",tags:["Regiments"],summary:"Create a new regiment with document upload",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:Vc}}}},responses:{201:{description:"Regiment created successfully",summary:"Regiment Created"},400:{description:"Invalid input data, missing required fields, or invalid document format/size",summary:"Validation Error",content:{"application/json":{schema:U.object({errors:U.record(U.string(),U.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:U.object({message:U.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:U.object({message:U.string()})}}}}},bg={method:"get",path:"/regiment",tags:["Regiments"],summary:"List all regiments with pagination and filters",request:{query:$c},responses:{200:{description:"List of regiments retrieved successfully with pagination",summary:"Regiments Retrieved",content:{"application/json":{schema:U.object({page:U.number(),totalPages:U.number(),offset:U.number(),limit:U.number(),regiments:U.array(ep)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:U.object({errors:U.record(U.string(),U.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:U.object({message:U.string()})}}}}},Cg={method:"get",path:"/regiment/{id}",tags:["Regiments"],summary:"Find regiment by ID",request:{params:jn},responses:{200:{description:"Regiment details retrieved successfully",summary:"Regiment Retrieved",content:{"application/json":{schema:ep}}},400:{description:"Invalid regiment ID format",summary:"Validation Error",content:{"application/json":{schema:U.object({errors:U.record(U.string(),U.string())})}}},404:{description:"Regiment not found with the provided ID",summary:"Regiment Not Found",content:{"application/json":{schema:U.object({message:U.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:U.object({message:U.string()})}}}}},wg={method:"get",path:"/regiment/status/{status}",tags:["Regiments"],summary:"Find regiments by status",request:{params:Xc},responses:{200:{description:"Regiments retrieved successfully by status",summary:"Regiments Retrieved by Status",content:{"application/json":{schema:U.array(ep)}}},400:{description:"Invalid status parameter provided",summary:"Validation Error",content:{"application/json":{schema:U.object({errors:U.record(U.string(),U.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:U.object({message:U.string()})}}}}},Sg={method:"put",path:"/regiment/{id}",tags:["Regiments"],summary:"Update regiment with optional document upload",security:[{bearerAuth:[]}],request:{params:jn,body:{content:{"multipart/form-data":{schema:Qc.omit({id:!0})}}}},responses:{200:{description:"Regiment updated successfully",summary:"Regiment Updated"},400:{description:"Invalid input data, regiment ID format, or invalid document format/size",summary:"Validation Error",content:{"application/json":{schema:U.object({errors:U.record(U.string(),U.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:U.object({message:U.string()})}}},404:{description:"Regiment not found with the provided ID",summary:"Regiment Not Found",content:{"application/json":{schema:U.object({message:U.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:U.object({message:U.string()})}}}}},vg={method:"delete",path:"/regiment/{id}",tags:["Regiments"],summary:"Delete regiment",security:[{bearerAuth:[]}],request:{params:Kc},responses:{200:{description:"Regiment deleted successfully",summary:"Regiment Deleted"},400:{description:"Invalid regiment ID format",summary:"Validation Error",content:{"application/json":{schema:U.object({errors:U.record(U.string(),U.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:U.object({message:U.string()})}}},404:{description:"Regiment not found with the provided ID",summary:"Regiment Not Found",content:{"application/json":{schema:U.object({message:U.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:U.object({message:U.string()})}}}}};import Q from"zod";import{extendZodWithOpenApi as uS}from"@asteasolutions/zod-to-openapi";import Xt from"zod";var jg=5,Eg=1024,gS=Eg*Eg,fS=jg*gS;uS(Xt);var rp=Xt.object({caption:Xt.string().optional(),image:Xt.any().refine(o=>o==null||typeof o!="object"||typeof o.size!="number"?!1:o.size<=fS,`A imagem deve ter no m\xE1ximo ${jg}MB.`),congressId:Xt.uuid()}),An=class{constructor(e,t,r){this.regionalCongressGalleryRepository=e;this.regionalCongressRepository=t;this.firebaseStorageService=r}async handle(e,t){try{let{caption:r,image:i,congressId:n}=rp.parse({...e.body,...e.params,image:e.file});if(!await this.regionalCongressRepository.findById(n))throw new p("O congresso n\xE3o existe.");let m=await this.regionalCongressGalleryRepository.create({caption:r,congressId:n,imageUrl:""}),c=await this.firebaseStorageService.uploadFile({file:i,id:m.id,folder:M.GALLERY});return await this.regionalCongressGalleryRepository.update({id:m.id,imageUrl:c}),t.sendStatus(201)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as yS}from"@asteasolutions/zod-to-openapi";import tp from"zod";yS(tp);var Dn=tp.object({id:tp.uuid("ID inv\xE1lido")}),Tn=class{constructor(e){this.regionalCongressGalleryRepository=e}async handle(e,t){try{let{id:r}=Dn.parse(e.params);if(!await this.regionalCongressGalleryRepository.findById(r))throw new p("Item de galeria n\xE3o encontrado");return await this.regionalCongressGalleryRepository.deleteById(r),t.sendStatus(204)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as hS}from"@asteasolutions/zod-to-openapi";import ut from"zod";hS(ut);var op=ut.object({congressId:ut.uuid("ID do congresso inv\xE1lido"),page:ut.coerce.number().int().positive().default(1),limit:ut.coerce.number().int().positive().default(10),caption:ut.string().optional()}),Fn=class{constructor(e){this.regionalCongressGalleryRepository=e}async handle(e,t){try{let{page:r,limit:i,...n}=op.parse({...e.params,...e.query}),s=(r-1)*i,m=await this.regionalCongressGalleryRepository.findByCongressId({pagination:{offset:s,limit:i},filter:n});if(!m)throw new p("Itens de galeria n\xE3o encontrados");let c=await this.regionalCongressGalleryRepository.count({filter:n});return t.status(200).json({data:m,pagination:{page:r,limit:i,total:c,totalPages:Math.ceil(c/i)}})}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as RS}from"@asteasolutions/zod-to-openapi";import $t from"zod";var Mg=5,xg=1024,IS=xg*xg,bS=Mg*IS;RS($t);var ip=$t.object({id:$t.string().uuid("ID inv\xE1lido"),caption:$t.string().optional(),image:$t.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=bS,`A imagem deve ter no m\xE1ximo ${Mg}MB.`).optional()}),Bn=class{constructor(e,t){this.regionalCongressGalleryRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{id:r,caption:i,image:n}=ip.parse({...e.params,...e.body,image:e.file});if(!await this.regionalCongressGalleryRepository.findById(r))throw new p("Item de galeria n\xE3o encontrado");let m;return n&&(m=await this.firebaseStorageService.uploadFile({file:n,id:r,folder:M.GALLERY})),await this.regionalCongressGalleryRepository.update({id:r,caption:i,...m&&{imageUrl:m}}),t.sendStatus(204)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var CS=Q.object({id:Q.uuid(),imageUrl:Q.string(),caption:Q.string().nullable(),congressId:Q.uuid()}),Pg={method:"post",path:"/regional-congress/{congressId}/gallery",tags:["Regional Congresses"],summary:"Create a new congress gallery image",security:[{bearerAuth:[]}],request:{params:Q.object({congressId:Q.uuid()}),body:{content:{"application/json":{schema:rp.omit({congressId:!0})}}}},responses:{201:{description:"Congress gallery image created successfully",summary:"Congress Gallery Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:Q.object({errors:Q.record(Q.string(),Q.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:Q.object({message:Q.string()})}}},404:{description:"Congress not found with the provided ID",summary:"Congress Not Found",content:{"application/json":{schema:Q.object({message:Q.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Q.object({message:Q.string()})}}}}},Ag={method:"get",path:"/regional-congress/{congressId}/gallery",tags:["Regional Congresses"],summary:"Find congress gallery images by congress ID",request:{params:op},responses:{200:{description:"Congress gallery images retrieved successfully by congress ID",summary:"Congress Galleries Retrieved",content:{"application/json":{schema:Q.array(CS)}}},400:{description:"Invalid congress ID parameter provided",summary:"Validation Error",content:{"application/json":{schema:Q.object({errors:Q.record(Q.string(),Q.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Q.object({message:Q.string()})}}}}},Tg={method:"put",path:"/regional-congress/gallery/{id}",tags:["Regional Congresses"],summary:"Update congress gallery image",security:[{bearerAuth:[]}],request:{params:Dn,body:{content:{"application/json":{schema:ip.omit({id:!0})}}}},responses:{200:{description:"Congress gallery image updated successfully",summary:"Congress Gallery Updated"},400:{description:"Invalid input data or gallery ID format",summary:"Validation Error",content:{"application/json":{schema:Q.object({errors:Q.record(Q.string(),Q.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:Q.object({message:Q.string()})}}},404:{description:"Congress gallery image not found with the provided ID",summary:"Congress Gallery Not Found",content:{"application/json":{schema:Q.object({message:Q.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Q.object({message:Q.string()})}}}}},Dg={method:"delete",path:"/regional-congress/gallery/{id}",tags:["Regional Congresses"],summary:"Delete congress gallery image",security:[{bearerAuth:[]}],request:{params:Dn},responses:{200:{description:"Congress gallery image deleted successfully",summary:"Congress Gallery Deleted"},400:{description:"Invalid gallery ID format",summary:"Validation Error",content:{"application/json":{schema:Q.object({errors:Q.record(Q.string(),Q.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:Q.object({message:Q.string()})}}},404:{description:"Congress gallery image not found with the provided ID",summary:"Congress Gallery Not Found",content:{"application/json":{schema:Q.object({message:Q.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Q.object({message:Q.string()})}}}}};import ee from"zod";import{extendZodWithOpenApi as wS}from"@asteasolutions/zod-to-openapi";import Qt from"zod";var Bg=2,Fg=1024,SS=Fg*Fg,vS=Bg*SS;wS(Qt);var np=Qt.object({name:Qt.string().min(1,"Nome \xE9 obrigat\xF3rio"),logo:Qt.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=vS,`A imagem deve ter no m\xE1ximo ${Bg}MB.`).optional(),congressId:Qt.uuid()}),qn=class{constructor(e,t,r){this.regionalCongressPartnerRepository=e;this.regionalCongressRepository=t;this.firebaseStorageService=r}async handle(e,t){try{let{name:r,logo:i,congressId:n}=np.parse({...e.body,...e.params,logo:e.file});if(!await this.regionalCongressRepository.findById(n))throw new p("O congresso n\xE3o existe.");let m=await this.regionalCongressPartnerRepository.create({name:r,congressId:n}),c;return i&&(c=await this.firebaseStorageService.uploadFile({file:i,id:m.id,folder:M.PARTNER}),await this.regionalCongressPartnerRepository.update({id:m.id,logoUrl:c})),t.sendStatus(201)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as ES}from"@asteasolutions/zod-to-openapi";import sp from"zod";ES(sp);var kn=sp.object({id:sp.string().uuid("ID inv\xE1lido")}),Un=class{constructor(e){this.regionalCongressPartnerRepository=e}async handle(e,t){try{let{id:r}=kn.parse(e.params);if(!await this.regionalCongressPartnerRepository.findById(r))throw new p("Parceiro n\xE3o encontrado");return await this.regionalCongressPartnerRepository.deleteById(r),t.sendStatus(204)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as jS}from"@asteasolutions/zod-to-openapi";import gt from"zod";jS(gt);var ap=gt.object({congressId:gt.uuid("ID do congresso inv\xE1lido"),page:gt.coerce.number().int().positive().optional(),limit:gt.coerce.number().int().positive().optional(),name:gt.string().optional()}),On=class{constructor(e){this.regionalCongressPartnerRepository=e}async handle(e,t){try{let{congressId:r,page:i,limit:n,name:s}=ap.parse({...e.params,...e.query}),m=i!==void 0&&n!==void 0,c=m?{offset:(i-1)*n,limit:n}:void 0,d=await this.regionalCongressPartnerRepository.findByCongressId({pagination:c,filter:{congressId:r,name:s}});if(!d)throw new p("Parceiros n\xE3o encontrados");if(!m)return t.status(200).json(d);let R=await this.regionalCongressPartnerRepository.count({filter:{congressId:r,name:s}});return t.status(200).json({data:d,pagination:{page:i,limit:n,total:R,totalPages:Math.ceil(R/n)}})}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as xS}from"@asteasolutions/zod-to-openapi";import eo from"zod";var Ug=2,qg=1024,MS=qg*qg,PS=Ug*MS;xS(eo);var mp=eo.object({id:eo.string().uuid("ID inv\xE1lido"),name:eo.string().min(1,"Nome \xE9 obrigat\xF3rio").optional(),logo:eo.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=PS,`A imagem deve ter no m\xE1ximo ${Ug}MB.`).optional()}),Gn=class{constructor(e,t){this.regionalCongressPartnerRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{id:r,name:i,logo:n}=mp.parse({...e.params,...e.body,logo:e.file});if(!await this.regionalCongressPartnerRepository.findById(r))throw new p("Parceiro n\xE3o encontrado");let m;return n&&(m=await this.firebaseStorageService.uploadFile({file:n,id:r,folder:M.PARTNER})),await this.regionalCongressPartnerRepository.update({id:r,name:i,...m&&{logoUrl:m}}),t.sendStatus(204)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var AS=ee.object({id:ee.uuid(),name:ee.string(),logoUrl:ee.string().nullable(),congressId:ee.uuid()}),kg={method:"post",path:"/regional-congress/{congressId}/partner",tags:["Regional Congresses"],summary:"Create a new congress partner",security:[{bearerAuth:[]}],request:{params:ee.object({congressId:ee.uuid()}),body:{content:{"application/json":{schema:np.omit({congressId:!0})}}}},responses:{201:{description:"Congress partner created successfully",summary:"Congress Partner Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:ee.object({errors:ee.record(ee.string(),ee.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:ee.object({message:ee.string()})}}},404:{description:"Congress not found with the provided ID",summary:"Congress Not Found",content:{"application/json":{schema:ee.object({message:ee.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:ee.object({message:ee.string()})}}}}},Og={method:"get",path:"/regional-congress/{congressId}/partner",tags:["Regional Congresses"],summary:"Find congress partners by congress ID",request:{params:ap},responses:{200:{description:"Congress partners retrieved successfully by congress ID",summary:"Congress Partners Retrieved",content:{"application/json":{schema:ee.array(AS)}}},400:{description:"Invalid congress ID parameter provided",summary:"Validation Error",content:{"application/json":{schema:ee.object({errors:ee.record(ee.string(),ee.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:ee.object({message:ee.string()})}}}}},Gg={method:"put",path:"/regional-congress/partner/{id}",tags:["Regional Congresses"],summary:"Update congress partner",security:[{bearerAuth:[]}],request:{params:kn,body:{content:{"application/json":{schema:mp.omit({id:!0})}}}},responses:{200:{description:"Congress partner updated successfully",summary:"Congress Partner Updated"},400:{description:"Invalid input data or partner ID format",summary:"Validation Error",content:{"application/json":{schema:ee.object({errors:ee.record(ee.string(),ee.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:ee.object({message:ee.string()})}}},404:{description:"Congress partner not found with the provided ID",summary:"Congress Partner Not Found",content:{"application/json":{schema:ee.object({message:ee.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:ee.object({message:ee.string()})}}}}},Ng={method:"delete",path:"/regional-congress/partner/{id}",tags:["Regional Congresses"],summary:"Delete congress partner",security:[{bearerAuth:[]}],request:{params:kn},responses:{200:{description:"Congress partner deleted successfully",summary:"Congress Partner Deleted"},400:{description:"Invalid partner ID format",summary:"Validation Error",content:{"application/json":{schema:ee.object({errors:ee.record(ee.string(),ee.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:ee.object({message:ee.string()})}}},404:{description:"Congress partner not found with the provided ID",summary:"Congress Partner Not Found",content:{"application/json":{schema:ee.object({message:ee.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:ee.object({message:ee.string()})}}}}};import f from"zod";import{extendZodWithOpenApi as TS}from"@asteasolutions/zod-to-openapi";import ie from"zod";TS(ie);var cp=ie.object({title:ie.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio"),edition:ie.coerce.number().int().positive("Edi\xE7\xE3o deve ser um n\xFAmero positivo"),startDate:ie.coerce.date(),endDate:ie.coerce.date(),description:ie.string().optional(),location:ie.string().optional(),congressLink:ie.union([ie.url("Link do congresso deve ser uma URL v\xE1lida"),ie.literal("")]),noticeUrl:ie.union([ie.url("URL do edital deve ser uma URL v\xE1lida"),ie.literal("")]),scheduleUrl:ie.union([ie.url("URL do cronograma deve ser uma URL v\xE1lida"),ie.literal("")]),programUrl:ie.union([ie.url("URL da programa\xE7\xE3o deve ser uma URL v\xE1lida"),ie.literal("")]),adminReportUrl:ie.union([ie.url("URL do relat\xF3rio administrativo deve ser uma URL v\xE1lida"),ie.literal("")]),proceedingsUrl:ie.union([ie.url("URL dos anais deve ser uma URL v\xE1lida"),ie.literal("")])}).refine(o=>o.endDate>=o.startDate,{message:"Data de t\xE9rmino deve ser posterior ou igual \xE0 data de in\xEDcio",path:["endDate"]}),Nn=class{constructor(e){this.regionalCongressRepository=e}async handle(e,t){try{let r=cp.parse(e.body);return await this.regionalCongressRepository.create(r),t.sendStatus(201)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as DS}from"@asteasolutions/zod-to-openapi";import pp from"zod";DS(pp);var dp=pp.object({id:pp.string().uuid("ID inv\xE1lido")}),Ln=class{constructor(e){this.regionalCongressRepository=e}async handle(e,t){try{let{id:r}=dp.parse(e.params);if(!await this.regionalCongressRepository.findById(r))throw new p("Congresso regional n\xE3o encontrado");return await this.regionalCongressRepository.deleteById(r),t.sendStatus(204)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as FS}from"@asteasolutions/zod-to-openapi";import lp from"zod";FS(lp);var up=lp.object({edition:lp.coerce.number().int().positive("Edi\xE7\xE3o deve ser um n\xFAmero positivo")}),Wn=class{constructor(e){this.regionalCongressRepository=e}async handle(e,t){try{let{edition:r}=up.parse(e.params),i=await this.regionalCongressRepository.findByEdition(r);if(!i||i.length===0)throw new p("Congresso regional n\xE3o encontrado");return t.status(200).json(i)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as BS}from"@asteasolutions/zod-to-openapi";import gp from"zod";BS(gp);var zn=gp.object({id:gp.string().uuid("ID inv\xE1lido")}),_n=class{constructor(e){this.regionalCongressRepository=e}async handle(e,t){try{let{id:r}=zn.parse(e.params),i=await this.regionalCongressRepository.findById(r);if(!i)throw new p("Congresso regional n\xE3o encontrado");return t.status(200).json(i)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as qS}from"@asteasolutions/zod-to-openapi";import Ir from"zod";qS(Ir);var fp=Ir.object({page:Ir.coerce.number().int().positive().default(1),limit:Ir.coerce.number().int().positive().default(10),title:Ir.string().optional(),edition:Ir.coerce.number().int().positive().optional(),location:Ir.string().optional(),orderBy:Ir.enum(["asc","desc"]).optional().default("desc")}),Hn=class{constructor(e){this.regionalCongressRepository=e}async handle(e,t){try{let{page:r,limit:i,orderBy:n,...s}=fp.parse(e.query),m=(r-1)*i,c=await this.regionalCongressRepository.find({pagination:{offset:m,limit:i},filter:{...s,orderBy:n}});if(!c)throw new p("Congressos regionais n\xE3o encontrados");let d=await this.regionalCongressRepository.count({filter:s});return t.status(200).json({data:c,pagination:{page:r,limit:i,total:d,totalPages:Math.ceil(d/i)}})}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as US}from"@asteasolutions/zod-to-openapi";import oe from"zod";US(oe);var yp=oe.object({id:oe.string().uuid("ID inv\xE1lido"),title:oe.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio").optional(),edition:oe.coerce.number().int().positive("Edi\xE7\xE3o deve ser um n\xFAmero positivo").optional(),startDate:oe.coerce.date().optional(),endDate:oe.coerce.date().optional(),description:oe.string().optional(),location:oe.string().optional(),congressLink:oe.union([oe.url("Link do congresso deve ser uma URL v\xE1lida"),oe.literal("")]),noticeUrl:oe.union([oe.url("URL do edital deve ser uma URL v\xE1lida"),oe.literal("")]),scheduleUrl:oe.union([oe.url("URL do cronograma deve ser uma URL v\xE1lida"),oe.literal("")]),programUrl:oe.union([oe.url("URL da programa\xE7\xE3o deve ser uma URL v\xE1lida"),oe.literal("")]),adminReportUrl:oe.union([oe.url("URL do relat\xF3rio administrativo deve ser uma URL v\xE1lida"),oe.literal("")]),proceedingsUrl:oe.union([oe.url("URL dos anais deve ser uma URL v\xE1lida"),oe.literal("")])}).refine(o=>o.startDate&&o.endDate?o.endDate>=o.startDate:!0,{message:"Data de t\xE9rmino deve ser posterior ou igual \xE0 data de in\xEDcio",path:["endDate"]}),Vn=class{constructor(e){this.regionalCongressRepository=e}async handle(e,t){try{let{id:r}=oe.object({id:oe.string().uuid()}).parse(e.params);if(!await this.regionalCongressRepository.findById(r))throw new p("Congresso regional n\xE3o encontrado");let n=yp.parse({id:r,...e.body});return await this.regionalCongressRepository.update(n),t.sendStatus(204)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var kS=9,OS=f.object({image:f.any().openapi({type:"string",format:"binary"}),caption:f.string().optional()}),GS=f.object({image:f.any().openapi({type:"string",format:"binary"}).optional(),caption:f.string().optional()}),NS=f.object({id:f.uuid(),name:f.string(),logoUrl:f.string().nullable(),congressId:f.uuid()}),hp=f.object({id:f.uuid(),imageUrl:f.string(),caption:f.string().nullable(),congressId:f.uuid()}),Rp=f.object({id:f.uuid(),title:f.string(),edition:f.number(),startDate:f.date(),endDate:f.date(),description:f.string().nullable(),location:f.string().nullable(),congressLink:f.string().nullable(),noticeUrl:f.string().nullable(),scheduleUrl:f.string().nullable(),programUrl:f.string().nullable(),adminReportUrl:f.string().nullable(),proceedingsUrl:f.string().nullable(),partners:f.array(NS),galleries:f.array(hp),createdAt:f.date(),updatedAt:f.date()}),Lg={method:"post",path:"/regional-congress",tags:["Regional Congresses"],summary:"Create a new regional congress",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:cp}}}},responses:{201:{description:"Regional congress created successfully",summary:"Regional Congress Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:f.object({errors:f.record(f.string(),f.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:f.object({message:f.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:f.object({message:f.string()})}}}}},Wg={method:"get",path:"/regional-congress",tags:["Regional Congresses"],summary:"List all regional congresses with pagination and filters",request:{query:fp},responses:{200:{description:"List of regional congresses retrieved successfully with pagination",summary:"Regional Congresses Retrieved",content:{"application/json":{schema:f.object({page:f.number(),totalPages:f.number(),offset:f.number(),limit:f.number(),congresses:f.array(Rp)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:f.object({errors:f.record(f.string(),f.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:f.object({message:f.string()})}}}}},_g={method:"get",path:"/regional-congress/{id}",tags:["Regional Congresses"],summary:"Find regional congress by ID",request:{params:zn},responses:{200:{description:"Regional congress details retrieved successfully",summary:"Regional Congress Retrieved",content:{"application/json":{schema:Rp}}},400:{description:"Invalid regional congress ID format",summary:"Validation Error",content:{"application/json":{schema:f.object({errors:f.record(f.string(),f.string())})}}},404:{description:"Regional congress not found with the provided ID",summary:"Regional Congress Not Found",content:{"application/json":{schema:f.object({message:f.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:f.object({message:f.string()})}}}}},zg={method:"get",path:"/regional-congress/edition/{edition}",tags:["Regional Congresses"],summary:"Find regional congresses by edition",request:{params:up},responses:{200:{description:"Regional congresses retrieved successfully by edition",summary:"Regional Congresses Retrieved by Edition",content:{"application/json":{schema:f.array(Rp)}}},400:{description:"Invalid edition parameter provided",summary:"Validation Error",content:{"application/json":{schema:f.object({errors:f.record(f.string(),f.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:f.object({message:f.string()})}}}}},Hg={method:"put",path:"/regional-congress/{id}",tags:["Regional Congresses"],summary:"Update regional congress",security:[{bearerAuth:[]}],request:{params:zn,body:{content:{"application/json":{schema:yp.omit({id:!0})}}}},responses:{200:{description:"Regional congress updated successfully",summary:"Regional Congress Updated"},400:{description:"Invalid input data or regional congress ID format",summary:"Validation Error",content:{"application/json":{schema:f.object({errors:f.record(f.string(),f.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:f.object({message:f.string()})}}},404:{description:"Regional congress not found with the provided ID",summary:"Regional Congress Not Found",content:{"application/json":{schema:f.object({message:f.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:f.object({message:f.string()})}}}}},Vg={method:"delete",path:"/regional-congress/{id}",tags:["Regional Congresses"],summary:"Delete regional congress",security:[{bearerAuth:[]}],request:{params:dp},responses:{200:{description:"Regional congress deleted successfully",summary:"Regional Congress Deleted"},400:{description:"Invalid regional congress ID format",summary:"Validation Error",content:{"application/json":{schema:f.object({errors:f.record(f.string(),f.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:f.object({message:f.string()})}}},404:{description:"Regional congress not found with the provided ID",summary:"Regional Congress Not Found",content:{"application/json":{schema:f.object({message:f.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:f.object({message:f.string()})}}}}},p4={method:"post",path:"/regional-congress/{congressId}/gallery",tags:["Regional Congress Gallery"],summary:"Create a new gallery image for a congress",security:[{bearerAuth:[]}],request:{params:f.object({congressId:f.uuid()}),body:{content:{"multipart/form-data":{schema:OS}}}},responses:{201:{description:"Gallery image created successfully",summary:"Gallery Image Created"},400:{description:"Invalid input data, missing required fields, or invalid image format/size",summary:"Validation Error",content:{"application/json":{schema:f.object({errors:f.record(f.string(),f.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:f.object({message:f.string()})}}},404:{description:"Congress not found with the provided ID",summary:"Congress Not Found",content:{"application/json":{schema:f.object({message:f.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:f.object({message:f.string()})}}}}},d4={method:"get",path:"/regional-congress/{congressId}/gallery",tags:["Regional Congress Gallery"],summary:"List all gallery images for a congress with pagination",request:{params:f.object({congressId:f.uuid()}),query:f.object({page:f.coerce.number().min(1).default(1),limit:f.coerce.number().min(1).default(kS),caption:f.string().optional()})},responses:{200:{description:"Gallery images retrieved successfully with pagination",summary:"Gallery Images Retrieved",content:{"application/json":{schema:f.object({page:f.number(),totalPages:f.number(),offset:f.number(),limit:f.number(),galleries:f.array(hp)})}}},400:{description:"Invalid congress ID format or query parameters",summary:"Validation Error",content:{"application/json":{schema:f.object({errors:f.record(f.string(),f.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:f.object({message:f.string()})}}}}},l4={method:"get",path:"/regional-congress/gallery/{id}",tags:["Regional Congress Gallery"],summary:"Find a gallery image by ID",request:{params:f.object({id:f.uuid()})},responses:{200:{description:"Gallery image retrieved successfully",summary:"Gallery Image Retrieved",content:{"application/json":{schema:hp}}},400:{description:"Invalid gallery image ID format",summary:"Validation Error",content:{"application/json":{schema:f.object({errors:f.record(f.string(),f.string())})}}},404:{description:"Gallery image not found with the provided ID",summary:"Gallery Image Not Found",content:{"application/json":{schema:f.object({message:f.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:f.object({message:f.string()})}}}}},u4={method:"put",path:"/regional-congress/gallery/{id}",tags:["Regional Congress Gallery"],summary:"Update a gallery image with optional image upload",security:[{bearerAuth:[]}],request:{params:f.object({id:f.uuid()}),body:{content:{"multipart/form-data":{schema:GS}}}},responses:{200:{description:"Gallery image updated successfully",summary:"Gallery Image Updated"},400:{description:"Invalid input data, gallery ID format, or invalid image format/size",summary:"Validation Error",content:{"application/json":{schema:f.object({errors:f.record(f.string(),f.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:f.object({message:f.string()})}}},404:{description:"Gallery image not found with the provided ID",summary:"Gallery Image Not Found",content:{"application/json":{schema:f.object({message:f.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:f.object({message:f.string()})}}}}},g4={method:"delete",path:"/regional-congress/gallery/{id}",tags:["Regional Congress Gallery"],summary:"Delete a gallery image",security:[{bearerAuth:[]}],request:{params:f.object({id:f.uuid()})},responses:{200:{description:"Gallery image deleted successfully",summary:"Gallery Image Deleted"},400:{description:"Invalid gallery ID format",summary:"Validation Error",content:{"application/json":{schema:f.object({errors:f.record(f.string(),f.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:f.object({message:f.string()})}}},404:{description:"Gallery image not found with the provided ID",summary:"Gallery Image Not Found",content:{"application/json":{schema:f.object({message:f.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:f.object({message:f.string()})}}}}};import y from"zod";import{extendZodWithOpenApi as LS}from"@asteasolutions/zod-to-openapi";import Ip from"zod";LS(Ip);var bp=Ip.object({id:Ip.uuid()}),Zn=class{constructor(e,t){this.researchGroupRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{id:r}=bp.parse({id:e.params.id}),i=await this.researchGroupRepository.findById(r);if(!i)throw new p("O grupo de pesquisa n\xE3o existe.");return i.logoUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.logoUrl}),await this.researchGroupRepository.deleteById(r),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as WS}from"@asteasolutions/zod-to-openapi";import Cp from"zod";WS(Cp);var wp=Cp.object({id:Cp.uuid()}),Kn=class{constructor(e){this.researchGroupRepository=e}async handle(e,t){try{let{id:r}=wp.parse({id:e.params.id}),i=await this.researchGroupRepository.findById(r);if(!i)throw new p("Grupo de pesquisa n\xE3o encontrado.");return t.status(200).json(i)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as _S}from"@asteasolutions/zod-to-openapi";import Je from"zod";var zS=1,HS=6;_S(Je);var Sp=Je.object({page:Je.coerce.number().min(1).default(zS),limit:Je.coerce.number().min(1).default(HS),name:Je.string().optional(),acronym:Je.string().optional(),description:Je.string().optional(),leader:Je.string().optional(),orderBy:Je.enum(["asc","desc"]).default("desc")}),Jn=class{constructor(e){this.researchGroupRepository=e}async handle(e,t){try{let{limit:r,page:i,...n}=Sp.parse(e.query),s=i*r-r,[m,c]=await Promise.all([this.researchGroupRepository.find({pagination:{offset:s,limit:r},filter:n}),this.researchGroupRepository.count({filter:n})]),d=Math.max(Math.ceil(c/r),1);return t.status(200).json({page:i,totalPages:d,offset:s,limit:r,researchGroups:m})}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as VS}from"@asteasolutions/zod-to-openapi";import Re from"zod";var Kg=5,Zg=1024,ZS=Zg*Zg,KS=Kg*ZS;VS(Re);var vp=Re.object({id:Re.uuid(),name:Re.string().min(1,"Nome \xE9 obrigat\xF3rio.").optional(),acronym:Re.string().optional(),description:Re.string().optional(),url:Re.url("URL deve ser v\xE1lida.").optional(),foundedAt:Re.coerce.date().optional(),scope:Re.string().optional(),email:Re.email("E-mail deve ser v\xE1lido.").optional(),leaderId:Re.uuid("L\xEDder \xE9 obrigat\xF3rio.").optional(),deputyLeaderId:Re.uuid("Vice-l\xEDder \xE9 obrigat\xF3rio.").optional(),logo:Re.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=KS,`O logo deve ter no m\xE1ximo ${Kg}MB.`).optional()}),Yn=class{constructor(e,t){this.researchGroupRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{id:r,logo:i,name:n,acronym:s,description:m,url:c,foundedAt:d,scope:R,email:E,leaderId:q,deputyLeaderId:Y}=vp.parse({id:e.params.id,...e.body,logo:e.file}),re=await this.researchGroupRepository.findById(r);if(!re)throw new p("O grupo de pesquisa n\xE3o existe.");let ue=re.logoUrl;return i&&(ue=await this.firebaseStorageService.uploadFile({file:i,id:r,folder:M.RESEARCH_GROUP_LOGO})),await this.researchGroupRepository.update({id:r,name:n,acronym:s,description:m,url:c,foundedAt:d,scope:R,email:E,leaderId:q,deputyLeaderId:Y,logoUrl:ue}),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var Jg={method:"post",path:"/research-groups",tags:["Research Groups"],summary:"Create research group",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:y.object({name:y.string().min(1).openapi({description:"Nome do grupo de pesquisa"}),acronym:y.string().optional().openapi({description:"Sigla do grupo"}),description:y.string().optional().openapi({description:"Descri\xE7\xE3o do grupo"}),url:y.string().url().optional().openapi({description:"URL do grupo"}),foundedAt:y.string().openapi({description:"Data de funda\xE7\xE3o (ISO 8601)",example:"2024-01-01T00:00:00Z"}),scope:y.string().optional().openapi({description:"Escopo do grupo"}),email:y.string().email().optional().openapi({description:"E-mail de contato"}),leaderId:y.string().uuid().openapi({description:"ID do l\xEDder (UUID)"}),deputyLeaderId:y.string().uuid().openapi({description:"ID do vice-l\xEDder (UUID)"}),logo:y.string().optional().openapi({description:"Logo do grupo (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{201:{description:"Research group created successfully",summary:"Research Group Created"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:y.object({errors:y.record(y.string(),y.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:y.object({message:y.string()})}}}}},Yg={method:"get",path:"/research-groups",tags:["Research Groups"],summary:"List research groups",security:[{bearerAuth:[]}],request:{query:Sp},responses:{200:{description:"Paginated list of research groups with leader information retrieved successfully",summary:"Research Groups Retrieved",content:{"application/json":{schema:y.object({page:y.number(),totalPages:y.number(),offset:y.number(),limit:y.number(),researchGroups:y.array(y.object({id:y.string(),name:y.string(),acronym:y.string().nullable(),description:y.string().nullable(),url:y.string().nullable(),logoUrl:y.string().nullable(),foundedAt:y.date(),scope:y.string().nullable(),email:y.string().nullable(),leaderId:y.string(),deputyLeaderId:y.string(),createdAt:y.date(),updatedAt:y.date(),leader:y.object({id:y.uuid(),name:y.string(),emailAddress:y.email(),avatarUrl:y.string().nullable(),createdAt:y.date(),updatedAt:y.date()}),deputyLeader:y.object({id:y.uuid(),name:y.string(),emailAddress:y.email(),avatarUrl:y.string().nullable(),createdAt:y.date(),updatedAt:y.date()})}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:y.object({errors:y.record(y.string(),y.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:y.object({message:y.string()})}}}}},Xg={method:"get",path:"/research-groups/{id}",tags:["Research Groups"],summary:"Find research group by ID",security:[{bearerAuth:[]}],request:{params:wp},responses:{200:{description:"Research group details retrieved successfully",summary:"Research Group Retrieved",content:{"application/json":{schema:y.object({id:y.string(),name:y.string(),acronym:y.string().nullable(),description:y.string().nullable(),url:y.string().nullable(),logoUrl:y.string().nullable(),foundedAt:y.date(),scope:y.string().nullable(),email:y.string().nullable(),leaderId:y.string(),deputyLeaderId:y.string(),createdAt:y.date(),updatedAt:y.date(),leader:y.object({id:y.uuid(),name:y.string(),emailAddress:y.email(),avatarUrl:y.string().nullable(),createdAt:y.date(),updatedAt:y.date()}),deputyLeader:y.object({id:y.uuid(),name:y.string(),emailAddress:y.email(),avatarUrl:y.string().nullable(),createdAt:y.date(),updatedAt:y.date()})}).nullable()}}},400:{description:"Invalid research group ID format",summary:"Validation Error",content:{"application/json":{schema:y.object({errors:y.record(y.string(),y.string())})}}},404:{description:"Research group not found with the provided ID",summary:"Research Group Not Found",content:{"application/json":{schema:y.object({message:y.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:y.object({message:y.string()})}}}}},$g={method:"put",path:"/research-groups/{id}",tags:["Research Groups"],summary:"Update research group",security:[{bearerAuth:[]}],request:{params:vp.pick({id:!0}),body:{content:{"multipart/form-data":{schema:y.object({name:y.string().min(1).optional().openapi({description:"Nome do grupo de pesquisa"}),acronym:y.string().optional().openapi({description:"Sigla do grupo"}),description:y.string().optional().openapi({description:"Descri\xE7\xE3o do grupo"}),url:y.string().url().optional().openapi({description:"URL do grupo"}),foundedAt:y.string().optional().openapi({description:"Data de funda\xE7\xE3o (ISO 8601)",example:"2024-01-01T00:00:00Z"}),scope:y.string().optional().openapi({description:"Escopo do grupo"}),email:y.string().email().optional().openapi({description:"E-mail de contato"}),leaderId:y.string().uuid().optional().openapi({description:"ID do l\xEDder (UUID)"}),deputyLeaderId:y.string().uuid().optional().openapi({description:"ID do vice-l\xEDder (UUID)"}),logo:y.string().optional().openapi({description:"Logo do grupo (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{200:{description:"Research group updated successfully",summary:"Research Group Updated"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:y.object({errors:y.record(y.string(),y.string())})}}},404:{description:"Research group not found with the provided ID",summary:"Research Group Not Found",content:{"application/json":{schema:y.object({message:y.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:y.object({message:y.string()})}}}}},Qg={method:"delete",path:"/research-groups/{id}",tags:["Research Groups"],summary:"Delete research group",security:[{bearerAuth:[]}],request:{params:bp},responses:{200:{description:"Research group deleted successfully",summary:"Research Group Deleted"},400:{description:"Invalid research group ID format",summary:"Validation Error",content:{"application/json":{schema:y.object({errors:y.record(y.string(),y.string())})}}},404:{description:"Research group not found with the provided ID",summary:"Research Group Not Found",content:{"application/json":{schema:y.object({message:y.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:y.object({message:y.string()})}}}}};import{$Enums as Dp}from"@prisma/client";import C from"zod";import{extendZodWithOpenApi as JS}from"@asteasolutions/zod-to-openapi";import{Degree as YS,Seniority as XS}from"@prisma/client";import je from"zod";JS(je);var Ep=je.object({registrationNumber:je.string(),mainEtps:je.string().optional(),formations:je.string().optional(),degrees:je.array(je.enum(YS)),occupations:je.string(),seniority:je.enum(XS),institutions:je.string(),biography:je.string().optional(),userId:je.string()}),Xn=class{constructor(e){this.researcherRepository=e}async handle(e,t){try{let{registrationNumber:r,mainEtps:i,formations:n,degrees:s,occupations:m,seniority:c,institutions:d,biography:R,userId:E}=Ep.parse(e.body);if(await this.researcherRepository.findByRegistrationNumber(r))throw new ae("J\xE1 existe um pesquisador cadastrado com este n\xFAmero de registro.");if(await this.researcherRepository.findByUserId(E))throw new ae("Usu\xE1rio j\xE1 possui um perfil de pesquisador.");return await this.researcherRepository.create({registrationNumber:r,mainEtps:i,formations:n,degrees:s,occupations:m,seniority:c,institutions:d,biography:R,userId:E}),t.sendStatus(201)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as $S}from"@asteasolutions/zod-to-openapi";import jp from"zod";$S(jp);var xp=jp.object({id:jp.uuid()}),$n=class{constructor(e){this.researcherRepository=e}async handle(e,t){try{let{id:r}=xp.parse({id:e.params.id});if(!await this.researcherRepository.findById(r))throw new p("O pesquisador n\xE3o existe.");return await this.researcherRepository.deleteById(r),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as QS}from"@asteasolutions/zod-to-openapi";import Mp from"zod";QS(Mp);var es=Mp.object({id:Mp.uuid()}),Qn=class{constructor(e){this.researcherRepository=e}async handle(e,t){try{let{id:r}=es.parse({id:e.params.id}),i=await this.researcherRepository.findById(r);if(!i)throw new p("O pesquisador n\xE3o existe.");return t.status(200).json(i)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as ev}from"@asteasolutions/zod-to-openapi";import Pp from"zod";ev(Pp);var Ap=Pp.object({userId:Pp.uuid()}),rs=class{constructor(e){this.researcherRepository=e}async handle(e,t){try{let{userId:r}=Ap.parse({userId:e.params.userId}),i=await this.researcherRepository.findByUserId(r);if(!i)throw new p("O pesquisador n\xE3o existe para este usu\xE1rio.");return t.status(200).json(i)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as rv}from"@asteasolutions/zod-to-openapi";import{Degree as tv,Seniority as ov}from"@prisma/client";import xe from"zod";rv(xe);var Tp=xe.object({id:xe.uuid(),registrationNumber:xe.string().optional(),mainEtps:xe.string().optional(),formations:xe.string().optional(),degrees:xe.array(xe.enum(tv)).optional(),occupations:xe.string().optional(),seniority:xe.enum(ov).optional(),institutions:xe.string().optional(),biography:xe.string().optional()}),ts=class{constructor(e){this.researcherRepository=e}async handle(e,t){try{let{id:r,registrationNumber:i,mainEtps:n,formations:s,degrees:m,occupations:c,seniority:d,institutions:R,biography:E}=Tp.parse({id:e.params.id,...e.body}),q=await this.researcherRepository.findById(r);if(!q)throw new p("O pesquisador n\xE3o existe.");if(i&&i!==q.registrationNumber){let Y=await this.researcherRepository.findByRegistrationNumber(i);if(Y&&Y.id!==r)throw new ae("J\xE1 existe um pesquisador com este n\xFAmero de registro.")}return await this.researcherRepository.update({id:r,registrationNumber:i,mainEtps:n,formations:s,degrees:m,occupations:c,seniority:d,institutions:R,biography:E}),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var iv=1,nv=9,Fp=C.object({id:C.uuid(),registrationNumber:C.string(),mainEtps:C.string().nullable(),formations:C.string().nullable(),degrees:C.array(C.enum(Dp.Degree)),occupations:C.string(),seniority:C.enum(Dp.Seniority),institutions:C.string(),biography:C.string().nullable(),createdAt:C.date(),updatedAt:C.date(),userId:C.uuid(),user:C.object({id:C.uuid(),name:C.string(),emailAddress:C.string(),avatarUrl:C.string().nullable(),orcid:C.string().nullable(),phone:C.string().nullable(),lattesUrl:C.string().nullable(),role:C.enum(Dp.UserRole)})}),ef={method:"post",path:"/researcher",tags:["Researchers"],summary:"Create a new researcher profile",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:Ep}}}},responses:{201:{description:"Researcher profile created successfully",summary:"Researcher Created",content:{"application/json":{schema:C.object({message:C.string()})}}},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:C.object({errors:C.record(C.string(),C.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:C.object({message:C.string()})}}},409:{description:"Researcher with this registration number already exists or user already has a researcher profile",summary:"Conflict",content:{"application/json":{schema:C.object({message:C.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:C.object({message:C.string()})}}}}},rf={method:"get",path:"/researcher",tags:["Researchers"],summary:"List all researchers with pagination and filters",request:{query:C.object({page:C.coerce.number().min(1).default(iv).optional(),limit:C.coerce.number().min(1).default(nv).optional(),userId:C.string().optional(),registrationNumber:C.string().optional(),name:C.string().optional(),emailAddress:C.string().optional(),mainEtps:C.string().optional(),formations:C.string().optional(),occupations:C.string().optional(),institutions:C.string().optional(),biography:C.string().optional(),orderBy:C.enum(["asc","desc"]).optional()})},responses:{200:{description:"List of researchers retrieved successfully with pagination",summary:"Researchers Retrieved",content:{"application/json":{schema:C.object({page:C.number(),totalPages:C.number(),offset:C.number(),limit:C.number(),researchers:C.array(Fp)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:C.object({message:C.string()})}}}}},tf={method:"get",path:"/researcher/{id}",tags:["Researchers"],summary:"Find researcher by ID",request:{params:es},responses:{200:{description:"Researcher details retrieved successfully",summary:"Researcher Retrieved",content:{"application/json":{schema:Fp}}},400:{description:"Invalid researcher ID format",summary:"Validation Error",content:{"application/json":{schema:C.object({errors:C.record(C.string(),C.string())})}}},404:{description:"Researcher not found with the provided ID",summary:"Researcher Not Found",content:{"application/json":{schema:C.object({message:C.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:C.object({message:C.string()})}}}}},of={method:"get",path:"/researcher/user/{userId}",tags:["Researchers"],summary:"Find researcher by user ID",request:{params:Ap},responses:{200:{description:"Researcher details retrieved successfully",summary:"Researcher Retrieved",content:{"application/json":{schema:Fp}}},400:{description:"Invalid user ID format",summary:"Validation Error",content:{"application/json":{schema:C.object({errors:C.record(C.string(),C.string())})}}},404:{description:"Researcher not found for this user",summary:"Researcher Not Found",content:{"application/json":{schema:C.object({message:C.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:C.object({message:C.string()})}}}}},nf={method:"put",path:"/researcher/{id}",tags:["Researchers"],summary:"Update researcher profile",security:[{bearerAuth:[]}],request:{params:es,body:{content:{"application/json":{schema:Tp.omit({id:!0})}}}},responses:{200:{description:"Researcher profile updated successfully",summary:"Researcher Updated",content:{"application/json":{schema:C.object({message:C.string()})}}},400:{description:"Invalid input data or researcher ID format",summary:"Validation Error",content:{"application/json":{schema:C.object({errors:C.record(C.string(),C.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:C.object({message:C.string()})}}},404:{description:"Researcher not found with the provided ID",summary:"Researcher Not Found",content:{"application/json":{schema:C.object({message:C.string()})}}},409:{description:"Researcher with this registration number already exists",summary:"Conflict",content:{"application/json":{schema:C.object({message:C.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:C.object({message:C.string()})}}}}},sf={method:"delete",path:"/researcher/{id}",tags:["Researchers"],summary:"Delete researcher profile",security:[{bearerAuth:[]}],request:{params:xp},responses:{200:{description:"Researcher profile deleted successfully",summary:"Researcher Deleted"},400:{description:"Invalid researcher ID format",summary:"Validation Error",content:{"application/json":{schema:C.object({errors:C.record(C.string(),C.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:C.object({message:C.string()})}}},404:{description:"Researcher not found with the provided ID",summary:"Researcher Not Found",content:{"application/json":{schema:C.object({message:C.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:C.object({message:C.string()})}}}}};import h from"zod";import{extendZodWithOpenApi as sv}from"@asteasolutions/zod-to-openapi";import Bp from"zod";sv(Bp);var qp=Bp.object({id:Bp.uuid()}),os=class{constructor(e){this.scientificArticlesRepository=e}async handle(e,t){try{let{id:r}=qp.parse({id:e.params.id});if(!await this.scientificArticlesRepository.findById(r))throw new p("O artigo cient\xEDfico n\xE3o existe.");return await this.scientificArticlesRepository.deleteById(r),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as av}from"@asteasolutions/zod-to-openapi";import Up from"zod";av(Up);var kp=Up.object({id:Up.uuid()}),is=class{constructor(e){this.scientificArticlesRepository=e}async handle(e,t){try{let{id:r}=kp.parse({id:e.params.id}),i=await this.scientificArticlesRepository.findById(r);if(!i)throw new p("Artigo cient\xEDfico n\xE3o encontrado.");return t.status(200).json(i)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as mv}from"@asteasolutions/zod-to-openapi";import br from"zod";var cv=1,pv=6;mv(br);var Op=br.object({page:br.coerce.number().min(1).default(cv),limit:br.coerce.number().min(1).default(pv),title:br.string().optional(),author:br.string().optional(),journal:br.string().optional(),orderBy:br.enum(["asc","desc"]).default("desc")}),ns=class{constructor(e){this.scientificArticlesRepository=e}async handle(e,t){try{let{limit:r,page:i,...n}=Op.parse(e.query),s=i*r-r,[m,c]=await Promise.all([this.scientificArticlesRepository.find({pagination:{offset:s,limit:r},filter:n}),this.scientificArticlesRepository.count({filter:n})]),d=Math.max(Math.ceil(c/r),1);return t.status(200).json({page:i,totalPages:d,offset:s,limit:r,scientificArticles:m})}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as dv}from"@asteasolutions/zod-to-openapi";import me from"zod";dv(me);var Gp=me.object({id:me.uuid(),title:me.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio.").optional(),author:me.string().min(1,"Autor \xE9 obrigat\xF3rio.").optional(),journal:me.string().optional(),volume:me.string().optional(),edition:me.string().optional(),pageStart:me.coerce.number().optional(),pageEnd:me.coerce.number().optional(),startDate:me.coerce.date().optional(),endDate:me.coerce.date().optional(),city:me.string().optional(),state:me.string().optional(),country:me.string().optional(),publisher:me.string().optional(),description:me.string().optional(),year:me.coerce.number().optional(),accessUrl:me.url("URL de acesso deve ser v\xE1lida").optional()}),ss=class{constructor(e){this.scientificArticlesRepository=e}async handle(e,t){try{let{id:r,title:i,author:n,journal:s,volume:m,edition:c,pageStart:d,pageEnd:R,startDate:E,endDate:q,city:Y,state:re,country:ue,publisher:ke,description:Wt,year:Ua,accessUrl:cI}=Gp.parse({id:e.params.id,...e.body});if(!await this.scientificArticlesRepository.findById(r))throw new p("O artigo cient\xEDfico n\xE3o existe.");return await this.scientificArticlesRepository.update({id:r,title:i,author:n,journal:s,volume:m,edition:c,pageStart:d,pageEnd:R,startDate:E,endDate:q,city:Y,state:re,country:ue,publisher:ke,description:Wt,year:Ua,accessUrl:cI}),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var af={method:"post",path:"/scientific-articles",tags:["Scientific Articles"],summary:"Create scientific article",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:h.object({title:h.string().min(1).openapi({description:"T\xEDtulo do artigo"}),author:h.string().min(1).openapi({description:"Autor do artigo"}),journal:h.string().optional().openapi({description:"Nome do peri\xF3dico/revista"}),volume:h.string().optional().openapi({description:"Volume"}),edition:h.string().optional().openapi({description:"N\xFAmero/Edi\xE7\xE3o"}),pageStart:h.number().optional().openapi({description:"P\xE1gina inicial"}),pageEnd:h.number().optional().openapi({description:"P\xE1gina final"}),startDate:h.string().openapi({description:"Data de in\xEDcio (ISO 8601)",example:"2024-01-01T10:00:00Z"}),endDate:h.string().openapi({description:"Data de t\xE9rmino (ISO 8601)",example:"2024-12-31T10:00:00Z"}),city:h.string().optional().openapi({description:"Cidade"}),state:h.string().optional().openapi({description:"Estado"}),country:h.string().optional().openapi({description:"Pa\xEDs"}),publisher:h.string().optional().openapi({description:"Editora/Institui\xE7\xE3o"}),description:h.string().optional().openapi({description:"Descri\xE7\xE3o do artigo"}),year:h.number().optional().openapi({description:"Ano"}),accessUrl:h.string().url().optional().openapi({description:"URL de acesso"})})}}}},responses:{201:{description:"Scientific article created successfully",summary:"Article Created"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:h.object({errors:h.record(h.string(),h.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:h.object({message:h.string()})}}}}},mf={method:"get",path:"/scientific-articles",tags:["Scientific Articles"],summary:"List scientific articles",security:[{bearerAuth:[]}],request:{query:Op},responses:{200:{description:"Paginated list of scientific articles retrieved successfully",summary:"Articles Retrieved",content:{"application/json":{schema:h.object({page:h.number(),totalPages:h.number(),offset:h.number(),limit:h.number(),scientificArticles:h.array(h.object({id:h.string(),title:h.string(),author:h.string(),journal:h.string().nullable(),volume:h.string().nullable(),edition:h.string().nullable(),pageStart:h.number().nullable(),pageEnd:h.number().nullable(),startDate:h.date(),endDate:h.date(),city:h.string().nullable(),state:h.string().nullable(),country:h.string().nullable(),publisher:h.string().nullable(),description:h.string().nullable(),year:h.number().nullable(),accessUrl:h.string().nullable(),createdAt:h.date(),updatedAt:h.date()}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:h.object({errors:h.record(h.string(),h.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:h.object({message:h.string()})}}}}},cf={method:"get",path:"/scientific-articles/{id}",tags:["Scientific Articles"],summary:"Find scientific article by ID",security:[{bearerAuth:[]}],request:{params:kp},responses:{200:{description:"Scientific article details retrieved successfully",summary:"Article Retrieved",content:{"application/json":{schema:h.object({id:h.string(),title:h.string(),author:h.string(),journal:h.string().nullable(),volume:h.string().nullable(),edition:h.string().nullable(),pageStart:h.number().nullable(),pageEnd:h.number().nullable(),startDate:h.date(),endDate:h.date(),city:h.string().nullable(),state:h.string().nullable(),country:h.string().nullable(),publisher:h.string().nullable(),description:h.string().nullable(),year:h.number().nullable(),accessUrl:h.string().nullable(),createdAt:h.date(),updatedAt:h.date()}).nullable()}}},400:{description:"Invalid article ID format",summary:"Validation Error",content:{"application/json":{schema:h.object({errors:h.record(h.string(),h.string())})}}},404:{description:"Scientific article not found with the provided ID",summary:"Article Not Found",content:{"application/json":{schema:h.object({message:h.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:h.object({message:h.string()})}}}}},pf={method:"put",path:"/scientific-articles/{id}",tags:["Scientific Articles"],summary:"Update scientific article",security:[{bearerAuth:[]}],request:{params:Gp.pick({id:!0}),body:{content:{"application/json":{schema:h.object({title:h.string().min(1).optional().openapi({description:"T\xEDtulo do artigo"}),author:h.string().min(1).optional().openapi({description:"Autor do artigo"}),journal:h.string().optional().openapi({description:"Nome do peri\xF3dico/revista"}),volume:h.string().optional().openapi({description:"Volume"}),edition:h.string().optional().openapi({description:"N\xFAmero/Edi\xE7\xE3o"}),pageStart:h.number().optional().openapi({description:"P\xE1gina inicial"}),pageEnd:h.number().optional().openapi({description:"P\xE1gina final"}),startDate:h.string().optional().openapi({description:"Data de in\xEDcio (ISO 8601)",example:"2024-01-01T10:00:00Z"}),endDate:h.string().optional().openapi({description:"Data de t\xE9rmino (ISO 8601)",example:"2024-12-31T10:00:00Z"}),city:h.string().optional().openapi({description:"Cidade"}),state:h.string().optional().openapi({description:"Estado"}),country:h.string().optional().openapi({description:"Pa\xEDs"}),publisher:h.string().optional().openapi({description:"Editora/Institui\xE7\xE3o"}),description:h.string().optional().openapi({description:"Descri\xE7\xE3o do artigo"}),year:h.number().optional().openapi({description:"Ano"}),accessUrl:h.string().url().optional().openapi({description:"URL de acesso"})})}}}},responses:{200:{description:"Scientific article updated successfully",summary:"Article Updated"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:h.object({errors:h.record(h.string(),h.string())})}}},404:{description:"Scientific article not found with the provided ID",summary:"Article Not Found",content:{"application/json":{schema:h.object({message:h.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:h.object({message:h.string()})}}}}},df={method:"delete",path:"/scientific-articles/{id}",tags:["Scientific Articles"],summary:"Delete scientific article",security:[{bearerAuth:[]}],request:{params:qp},responses:{200:{description:"Scientific article deleted successfully",summary:"Article Deleted"},400:{description:"Invalid article ID format",summary:"Validation Error",content:{"application/json":{schema:h.object({errors:h.record(h.string(),h.string())})}}},404:{description:"Scientific article not found with the provided ID",summary:"Article Not Found",content:{"application/json":{schema:h.object({message:h.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:h.object({message:h.string()})}}}}};import x from"zod";import{extendZodWithOpenApi as lv}from"@asteasolutions/zod-to-openapi";import Np from"zod";lv(Np);var Lp=Np.object({id:Np.uuid()}),as=class{constructor(e,t){this.scientificJournalRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{id:r}=Lp.parse({id:e.params.id}),i=await this.scientificJournalRepository.findById(r);if(!i)throw new p("A revista cient\xEDfica n\xE3o existe.");return i.logoUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.logoUrl}),await this.scientificJournalRepository.deleteById(r),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as uv}from"@asteasolutions/zod-to-openapi";import Wp from"zod";uv(Wp);var _p=Wp.object({id:Wp.uuid()}),ms=class{constructor(e){this.scientificJournalRepository=e}async handle(e,t){try{let{id:r}=_p.parse({id:e.params.id}),i=await this.scientificJournalRepository.findById(r);if(!i)throw new p("Revista cient\xEDfica n\xE3o encontrada.");return t.status(200).json(i)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as gv}from"@asteasolutions/zod-to-openapi";import We from"zod";var fv=1,yv=6;gv(We);var zp=We.object({page:We.coerce.number().min(1).default(fv),limit:We.coerce.number().min(1).default(yv),name:We.string().optional(),description:We.string().optional(),issn:We.string().optional(),directors:We.string().optional(),editorialBoard:We.string().optional(),orderBy:We.enum(["asc","desc"]).default("desc")}),cs=class{constructor(e){this.scientificJournalRepository=e}async handle(e,t){try{let{limit:r,page:i,...n}=zp.parse(e.query),s=i*r-r,[m,c]=await Promise.all([this.scientificJournalRepository.find({pagination:{offset:s,limit:r},filter:n}),this.scientificJournalRepository.count({filter:n})]),d=Math.max(Math.ceil(c/r),1);return t.status(200).json({page:i,totalPages:d,offset:s,limit:r,scientificJournals:m})}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as hv}from"@asteasolutions/zod-to-openapi";import _e from"zod";var uf=5,lf=1024,Rv=lf*lf,Iv=uf*Rv;hv(_e);var Hp=_e.object({id:_e.uuid(),name:_e.string().min(1,"Nome \xE9 obrigat\xF3rio.").optional(),issn:_e.string().min(1,"ISSN \xE9 obrigat\xF3rio.").optional(),description:_e.string().min(1,"Descri\xE7\xE3o \xE9 obrigat\xF3ria.").optional(),journalUrl:_e.url("URL da revista deve ser v\xE1lida.").optional(),directors:_e.string().optional(),editorialBoard:_e.string().optional(),logo:_e.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=Iv,`O logo deve ter no m\xE1ximo ${uf}MB.`).optional()}),ps=class{constructor(e,t){this.scientificJournalRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{id:r,logo:i,name:n,issn:s,description:m,journalUrl:c,directors:d,editorialBoard:R}=Hp.parse({id:e.params.id,...e.body,logo:e.file}),E=await this.scientificJournalRepository.findById(r);if(!E)throw new p("A revista cient\xEDfica n\xE3o existe.");let q=E.logoUrl;return i&&(q=await this.firebaseStorageService.uploadFile({file:i,id:r,folder:M.SCIENTIFIC_JOURNAL})),await this.scientificJournalRepository.update({id:r,name:n,issn:s,description:m,journalUrl:c,directors:d,editorialBoard:R,logoUrl:q}),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var gf={method:"post",path:"/scientific-journals",tags:["Scientific Journals"],summary:"Create scientific journal",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:x.object({name:x.string().min(1).openapi({description:"Nome da revista cient\xEDfica"}),issn:x.string().min(1).openapi({description:"ISSN da revista"}),description:x.string().min(1).openapi({description:"Descri\xE7\xE3o da revista"}),journalUrl:x.string().url().openapi({description:"URL da revista"}),directors:x.string().optional().openapi({description:"Diretores da revista"}),editorialBoard:x.string().optional().openapi({description:"Conselho editorial"}),logo:x.string().optional().openapi({description:"Logo da revista (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{201:{description:"Scientific journal created successfully",summary:"Journal Created"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:x.object({errors:x.record(x.string(),x.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:x.object({message:x.string()})}}}}},ff={method:"get",path:"/scientific-journals",tags:["Scientific Journals"],summary:"List scientific journals",security:[{bearerAuth:[]}],request:{query:zp},responses:{200:{description:"Paginated list of scientific journals retrieved successfully",summary:"Journals Retrieved",content:{"application/json":{schema:x.object({page:x.number(),totalPages:x.number(),offset:x.number(),limit:x.number(),scientificJournals:x.array(x.object({id:x.string(),name:x.string(),issn:x.string(),description:x.string(),logoUrl:x.string().nullable(),journalUrl:x.string(),directors:x.string().nullable(),editorialBoard:x.string().nullable(),createdAt:x.date(),updatedAt:x.date()}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:x.object({errors:x.record(x.string(),x.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:x.object({message:x.string()})}}}}},yf={method:"get",path:"/scientific-journals/{id}",tags:["Scientific Journals"],summary:"Find scientific journal by ID",security:[{bearerAuth:[]}],request:{params:_p},responses:{200:{description:"Scientific journal details retrieved successfully",summary:"Journal Retrieved",content:{"application/json":{schema:x.object({id:x.string(),name:x.string(),issn:x.string(),description:x.string(),logoUrl:x.string().nullable(),journalUrl:x.string(),directors:x.string().nullable(),editorialBoard:x.string().nullable(),createdAt:x.date(),updatedAt:x.date()}).nullable()}}},400:{description:"Invalid journal ID format",summary:"Validation Error",content:{"application/json":{schema:x.object({errors:x.record(x.string(),x.string())})}}},404:{description:"Scientific journal not found with the provided ID",summary:"Journal Not Found",content:{"application/json":{schema:x.object({message:x.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:x.object({message:x.string()})}}}}},hf={method:"put",path:"/scientific-journals/{id}",tags:["Scientific Journals"],summary:"Update scientific journal",security:[{bearerAuth:[]}],request:{params:Hp.pick({id:!0}),body:{content:{"multipart/form-data":{schema:x.object({name:x.string().min(1).optional().openapi({description:"Nome da revista cient\xEDfica"}),issn:x.string().min(1).optional().openapi({description:"ISSN da revista"}),description:x.string().min(1).optional().openapi({description:"Descri\xE7\xE3o da revista"}),journalUrl:x.string().url().optional().openapi({description:"URL da revista"}),directors:x.string().optional().openapi({description:"Diretores da revista"}),editorialBoard:x.string().optional().openapi({description:"Conselho editorial"}),logo:x.string().optional().openapi({description:"Logo da revista (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{200:{description:"Scientific journal updated successfully",summary:"Journal Updated"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:x.object({errors:x.record(x.string(),x.string())})}}},404:{description:"Scientific journal not found with the provided ID",summary:"Journal Not Found",content:{"application/json":{schema:x.object({message:x.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:x.object({message:x.string()})}}}}},Rf={method:"delete",path:"/scientific-journals/{id}",tags:["Scientific Journals"],summary:"Delete scientific journal",security:[{bearerAuth:[]}],request:{params:Lp},responses:{200:{description:"Scientific journal deleted successfully",summary:"Journal Deleted"},400:{description:"Invalid journal ID format",summary:"Validation Error",content:{"application/json":{schema:x.object({errors:x.record(x.string(),x.string())})}}},404:{description:"Scientific journal not found with the provided ID",summary:"Journal Not Found",content:{"application/json":{schema:x.object({message:x.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:x.object({message:x.string()})}}}}};import{$Enums as vv}from"@prisma/client";import W from"zod";import{extendZodWithOpenApi as bv}from"@asteasolutions/zod-to-openapi";import ft from"zod";bv(ft);var Vp=ft.object({role:ft.string().min(1),description:ft.string().optional(),userId:ft.uuid(),order:ft.number().optional()}),ds=class{constructor(e){this.sdhcTeamMemberRepository=e}async handle(e,t){try{let{role:r,description:i,userId:n,order:s}=Vp.parse(e.body);return await this.sdhcTeamMemberRepository.create({role:r,description:i,userId:n,order:s??0}),t.sendStatus(201)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as Cv}from"@asteasolutions/zod-to-openapi";import Zp from"zod";Cv(Zp);var Kp=Zp.object({id:Zp.uuid()}),ls=class{constructor(e){this.sdhcTeamMemberRepository=e}async handle(e,t){try{let{id:r}=Kp.parse({id:e.params.id});if(!await this.sdhcTeamMemberRepository.findById(r))throw new p("O membro da equipe SDHC n\xE3o existe.");return await this.sdhcTeamMemberRepository.deleteById(r),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as wv}from"@asteasolutions/zod-to-openapi";import Jp from"zod";wv(Jp);var gs=Jp.object({id:Jp.uuid()}),us=class{constructor(e){this.sdhcTeamMemberRepository=e}async handle(e,t){try{let{id:r}=gs.parse({id:e.params.id}),i=await this.sdhcTeamMemberRepository.findById(r);if(!i)throw new p("O membro da equipe SDHC n\xE3o existe.");return t.status(200).json(i)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as Sv}from"@asteasolutions/zod-to-openapi";import Dr from"zod";Sv(Dr);var Yp=Dr.object({id:Dr.uuid(),role:Dr.string().min(1).optional(),description:Dr.string().optional(),userId:Dr.uuid().optional(),order:Dr.number().optional()}),fs=class{constructor(e){this.sdhcTeamMemberRepository=e}async handle(e,t){try{let{id:r,role:i,description:n,userId:s,order:m}=Yp.parse({id:e.params.id,...e.body});if(!await this.sdhcTeamMemberRepository.findById(r))throw new p("O membro da equipe SDHC n\xE3o existe.");return await this.sdhcTeamMemberRepository.update({id:r,role:i,description:n,userId:s,order:m}),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var Ev=W.object({id:W.uuid(),name:W.string(),emailAddress:W.string(),avatarUrl:W.string().nullable(),orcid:W.string().nullable(),phone:W.string().nullable(),lattesUrl:W.string().nullable(),role:W.enum(vv.UserRole)}),If=W.object({id:W.uuid(),role:W.string(),description:W.string().nullable(),order:W.number(),createdAt:W.date(),updatedAt:W.date(),userId:W.uuid(),user:Ev}),bf={method:"post",path:"/sdhc-team-member",tags:["SDHC Team Members"],summary:"Create a new SDHC Team Member",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:Vp}}}},responses:{201:{description:"SDHC Team Member created successfully",summary:"SDHC Team Member Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:W.object({errors:W.record(W.string(),W.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:W.object({message:W.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:W.object({message:W.string()})}}}}},Cf={method:"get",path:"/sdhc-team-member",tags:["SDHC Team Members"],summary:"List all SDHC Team Members with filters",request:{query:W.object({role:W.string().optional(),orderBy:W.enum(["asc","desc"]).optional()})},responses:{200:{description:"List of SDHC Team Members retrieved successfully",summary:"SDHC Team Members Retrieved",content:{"application/json":{schema:W.object({members:W.array(If)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:W.object({message:W.string()})}}}}},wf={method:"get",path:"/sdhc-team-member/{id}",tags:["SDHC Team Members"],summary:"Find SDHC Team Member by ID",request:{params:gs},responses:{200:{description:"SDHC Team Member details retrieved successfully",summary:"SDHC Team Member Retrieved",content:{"application/json":{schema:If}}},400:{description:"Invalid SDHC Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:W.object({errors:W.record(W.string(),W.string())})}}},404:{description:"SDHC Team Member not found with the provided ID",summary:"SDHC Team Member Not Found",content:{"application/json":{schema:W.object({message:W.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:W.object({message:W.string()})}}}}},Sf={method:"put",path:"/sdhc-team-member/{id}",tags:["SDHC Team Members"],summary:"Update SDHC Team Member",security:[{bearerAuth:[]}],request:{params:gs,body:{content:{"application/json":{schema:Yp.omit({id:!0})}}}},responses:{200:{description:"SDHC Team Member updated successfully",summary:"SDHC Team Member Updated"},400:{description:"Invalid input data or SDHC Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:W.object({errors:W.record(W.string(),W.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:W.object({message:W.string()})}}},404:{description:"SDHC Team Member not found with the provided ID",summary:"SDHC Team Member Not Found",content:{"application/json":{schema:W.object({message:W.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:W.object({message:W.string()})}}}}},vf={method:"delete",path:"/sdhc-team-member/{id}",tags:["SDHC Team Members"],summary:"Delete SDHC Team Member",security:[{bearerAuth:[]}],request:{params:Kp},responses:{200:{description:"SDHC Team Member deleted successfully",summary:"SDHC Team Member Deleted"},400:{description:"Invalid SDHC Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:W.object({errors:W.record(W.string(),W.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:W.object({message:W.string()})}}},404:{description:"SDHC Team Member not found with the provided ID",summary:"SDHC Team Member Not Found",content:{"application/json":{schema:W.object({message:W.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:W.object({message:W.string()})}}}}};import{$Enums as xf}from"@prisma/client";import J from"zod";import{extendZodWithOpenApi as jv}from"@asteasolutions/zod-to-openapi";import Xp from"zod";jv(Xp);var $p=Xp.object({id:Xp.string()}),ys=class{constructor(e){this.userRepository=e}async handle(e,t){try{let{id:r}=$p.parse({id:e.params.id}),i=await this.userRepository.findById(r);if(!i)throw new p("O usu\xE1rio n\xE3o existe.");let n=e.user.id;if(i.id!==n)throw new we("Voc\xEA n\xE3o tem permiss\xE3o para deletar o usu\xE1rio");return await this.userRepository.deleteById(i.id),t.sendStatus(204)}catch(r){if(console.log(r),r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as xv}from"@asteasolutions/zod-to-openapi";import{z as Qp}from"zod";xv(Qp);var ed=Qp.object({id:Qp.string().min(1,"id do usu\xE1rio n\xE3o fornecido.")}),hs=class{constructor(e){this.userRepository=e}async handle(e,t){try{let{id:r}=ed.parse(e.params),i=await this.userRepository.findById(r);if(!i)throw new p("Usu\xE1rio n\xE3o encontrado");t.status(200).json(i)}catch(r){if(console.log(r),r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as Mv}from"@asteasolutions/zod-to-openapi";import Fr from"zod";var jf=2,Ef=1024,Pv=Ef*Ef,Av=jf*Pv,Tv=/^\d{4}-\d{4}-\d{4}-\d{4}$/,Dv=/^\(?\d{2}\)?[\s-]?\d{4,5}-?\d{4}$/;Mv(Fr);var rd=Fr.object({name:Fr.string().optional(),lattesUrl:Fr.string().optional(),orcid:Fr.string().optional().transform(o=>o===void 0?void 0:o.trim()).refine(o=>o===void 0||o===""||Tv.test(o),{message:"ORCID inv\xE1lido. Deve estar no formato 0000-0000-0000-0000"}),phone:Fr.string().optional().refine(o=>o===void 0||o===""||Dv.test(o),{message:"Telefone inv\xE1lido. Deve estar no formato (99) 99999-9999"}),avatarImage:Fr.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=Av,`A imagem deve ter no m\xE1ximo ${jf}MB.`).optional()}),Rs=class{constructor(e,t){this.userRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{avatarImage:r,...i}=rd.parse({...e.body,avatarImage:e.file}),n=e.user.id,s=await this.userRepository.findById(n);if(!s)throw new ge("O usu\xE1rio n\xE3o existe");let m=s.avatarUrl;return r&&(s.avatarUrl?m=await this.firebaseStorageService.updateFile({file:r,id:n,folder:M.USER,fileUrl:s.avatarUrl}):m=await this.firebaseStorageService.uploadFile({file:r,id:n,folder:M.USER})),await this.userRepository.update({...i,id:n,avatarUrl:m||void 0}),t.sendStatus(204)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var Mf={method:"get",path:"/users/{id}",tags:["Users"],summary:"Find user by ID",request:{params:ed},responses:{200:{description:"User details retrieved successfully",summary:"User Retrieved",content:{"application/json":{schema:J.object({id:J.string(),name:J.string(),createdAt:J.date(),updatedAt:J.date(),role:J.enum(xf.UserRole),lattesUrl:J.string().nullable(),orcid:J.string().nullable(),phone:J.string().nullable(),avatarUrl:J.url().nullable(),emailAddress:J.email()})}}},400:{description:"Invalid user ID format",summary:"Validation Error",content:{"application/json":{schema:J.object({errors:J.record(J.string(),J.string())})}}},404:{description:"User not found with the provided ID",summary:"User Not Found",content:{"application/json":{schema:J.object({message:J.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:J.object({message:J.string()})}}}}},Pf={method:"put",path:"/users",tags:["Users"],summary:"Update authenticated user",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:rd}}}},responses:{200:{description:"User profile updated successfully",summary:"User Updated",content:{"application/json":{schema:J.object({message:J.string()})}}},400:{description:"Invalid input data or file format",summary:"Validation Error",content:{"application/json":{schema:J.object({errors:J.record(J.string(),J.string())})}}},401:{description:"User not authenticated or unauthorized",summary:"Authentication Required",content:{"application/json":{schema:J.object({message:J.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:J.object({message:J.string()})}}}}},Af={method:"delete",path:"/users",tags:["Users"],summary:"Delete authenticated user",security:[{bearerAuth:[]}],request:{params:$p},responses:{200:{description:"User account deleted successfully",summary:"User Deleted",content:{"application/json":{schema:J.object({message:J.string()})}}},400:{description:"Invalid request parameters",summary:"Validation Error",content:{"application/json":{schema:J.object({errors:J.record(J.string(),J.string())})}}},401:{description:"User not authenticated or unauthorized",summary:"Authentication Required",content:{"application/json":{schema:J.object({message:J.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:J.object({message:J.string()})}}}}},Tf={method:"get",path:"/users",tags:["Users"],summary:"List users",responses:{200:{description:"Complete list of users retrieved successfully",summary:"Users Retrieved",content:{"application/json":{schema:J.array(J.object({id:J.string(),name:J.string(),createdAt:J.date(),updatedAt:J.date(),role:J.enum(xf.UserRole),lattesUrl:J.url().nullable(),orcid:J.string().nullable(),phone:J.string().nullable(),avatarUrl:J.string().nullable(),emailAddress:J.email()}))}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:J.object({message:J.string()})}}}}};import S from"zod";import{extendZodWithOpenApi as Fv}from"@asteasolutions/zod-to-openapi";import td from"zod";Fv(td);var od=td.object({id:td.uuid()}),Is=class{constructor(e,t){this.webinarRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{id:r}=od.parse({id:e.params.id}),i=await this.webinarRepository.findById(r);if(!i)throw new p("O webinar n\xE3o existe.");return i.thumbnailUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.thumbnailUrl}),await this.webinarRepository.deleteById(r),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as Bv}from"@asteasolutions/zod-to-openapi";import id from"zod";Bv(id);var nd=id.object({id:id.uuid()}),bs=class{constructor(e){this.webinarRepository=e}async handle(e,t){try{let{id:r}=nd.parse({id:e.params.id}),i=await this.webinarRepository.findById(r);if(!i)throw new p("Webinar n\xE3o encontrado.");return t.status(200).json(i)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as qv}from"@asteasolutions/zod-to-openapi";import Br from"zod";var Uv=1,kv=6;qv(Br);var sd=Br.object({page:Br.coerce.number().min(1).default(Uv),limit:Br.coerce.number().min(1).default(kv),title:Br.string().optional(),description:Br.string().optional(),orderBy:Br.enum(["asc","desc"]).default("desc")}),Cs=class{constructor(e){this.webinarRepository=e}async handle(e,t){try{let{limit:r,page:i,...n}=sd.parse(e.query),s=i*r-r,[m,c]=await Promise.all([this.webinarRepository.find({pagination:{offset:s,limit:r},filter:n}),this.webinarRepository.count({filter:n})]),d=Math.max(Math.ceil(c/r),1);return t.status(200).json({page:i,totalPages:d,offset:s,limit:r,webinars:m})}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as Ov}from"@asteasolutions/zod-to-openapi";import Fe from"zod";var Ff=5,Df=1024,Gv=Df*Df,Nv=Ff*Gv;Ov(Fe);var ad=Fe.object({id:Fe.uuid(),title:Fe.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio.").optional(),description:Fe.string().optional(),scheduledAt:Fe.coerce.date().optional(),webinarLink:Fe.url("URL do webinar deve ser v\xE1lida").optional(),guestIds:Fe.transform(o=>typeof o=="string"?o.split(","):o).pipe(Fe.array(Fe.uuid())).optional(),thumbnail:Fe.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=Nv,`A thumbnail deve ter no m\xE1ximo ${Ff}MB.`).optional()}),ws=class{constructor(e,t){this.webinarRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{id:r,thumbnail:i,title:n,description:s,scheduledAt:m,webinarLink:c,guestIds:d}=ad.parse({id:e.params.id,...e.body,thumbnail:e.file}),R=await this.webinarRepository.findById(r);if(!R)throw new p("O webinar n\xE3o existe.");let E=R.thumbnailUrl;if(i&&(E=await this.firebaseStorageService.uploadFile({file:i,id:r,folder:M.WEBINAR})),!E)throw new a("Thumbnail URL \xE9 obrigat\xF3rio");return await this.webinarRepository.update({id:r,title:n,description:s,scheduledAt:m,webinarLink:c,thumbnailUrl:E,guestIds:d}),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var Bf={method:"post",path:"/webinars",tags:["Webinars"],summary:"Create webinar",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:S.object({title:S.string().min(1).openapi({description:"T\xEDtulo do webinar"}),description:S.string().optional().openapi({description:"Descri\xE7\xE3o do webinar"}),scheduledAt:S.string().openapi({description:"Data e hora agendada (ISO 8601)",example:"2024-01-01T10:00:00Z"}),webinarLink:S.string().url().optional().openapi({description:"Link do webinar"}),guestIds:S.string().openapi({description:"IDs dos convidados separados por v\xEDrgula",example:"uuid1,uuid2,uuid3"}),thumbnail:S.string().optional().openapi({description:"Imagem de thumbnail (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{201:{description:"Webinar created successfully",summary:"Webinar Created"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:S.object({errors:S.record(S.string(),S.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:S.object({message:S.string()})}}}}},qf={method:"get",path:"/webinars",tags:["Webinars"],summary:"List webinars",security:[{bearerAuth:[]}],request:{query:sd},responses:{200:{description:"Paginated list of webinars with guest information retrieved successfully",summary:"Webinars Retrieved",content:{"application/json":{schema:S.object({page:S.number(),totalPages:S.number(),offset:S.number(),limit:S.number(),webinars:S.array(S.object({id:S.string(),title:S.string(),description:S.string().nullable(),scheduledAt:S.date(),webinarLink:S.string().nullable(),thumbnailUrl:S.string().nullable(),createdAt:S.date(),updatedAt:S.date(),guests:S.array(S.object({id:S.uuid(),name:S.string(),emailAddress:S.email(),avatarUrl:S.string().nullable(),createdAt:S.date(),updatedAt:S.date()}))}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:S.object({errors:S.record(S.string(),S.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:S.object({message:S.string()})}}}}},Uf={method:"get",path:"/webinars/{id}",tags:["Webinars"],summary:"Find webinar by ID",security:[{bearerAuth:[]}],request:{params:nd},responses:{200:{description:"Webinar details retrieved successfully",summary:"Webinar Retrieved",content:{"application/json":{schema:S.object({id:S.string(),title:S.string(),description:S.string().nullable(),scheduledAt:S.date(),webinarLink:S.string().nullable(),thumbnailUrl:S.string().nullable(),createdAt:S.date(),updatedAt:S.date(),guests:S.array(S.object({id:S.uuid(),name:S.string(),emailAddress:S.email(),avatarUrl:S.string().nullable(),createdAt:S.date(),updatedAt:S.date()}))}).nullable()}}},400:{description:"Invalid webinar ID format",summary:"Validation Error",content:{"application/json":{schema:S.object({errors:S.record(S.string(),S.string())})}}},404:{description:"Webinar not found with the provided ID",summary:"Webinar Not Found",content:{"application/json":{schema:S.object({message:S.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:S.object({message:S.string()})}}}}},kf={method:"put",path:"/webinars/{id}",tags:["Webinars"],summary:"Update webinar",security:[{bearerAuth:[]}],request:{params:ad.pick({id:!0}),body:{content:{"multipart/form-data":{schema:S.object({title:S.string().min(1).optional().openapi({description:"T\xEDtulo do webinar"}),description:S.string().optional().openapi({description:"Descri\xE7\xE3o do webinar"}),scheduledAt:S.string().optional().openapi({description:"Data e hora agendada (ISO 8601)",example:"2024-01-01T10:00:00Z"}),webinarLink:S.string().url().optional().openapi({description:"Link do webinar"}),guestIds:S.string().optional().openapi({description:"IDs dos convidados separados por v\xEDrgula",example:"uuid1,uuid2,uuid3"}),thumbnail:S.string().optional().openapi({description:"Imagem de thumbnail (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{200:{description:"Webinar updated successfully",summary:"Webinar Updated"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:S.object({errors:S.record(S.string(),S.string())})}}},404:{description:"Webinar not found with the provided ID",summary:"Webinar Not Found",content:{"application/json":{schema:S.object({message:S.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:S.object({message:S.string()})}}}}},Of={method:"delete",path:"/webinars/{id}",tags:["Webinars"],summary:"Delete webinar",security:[{bearerAuth:[]}],request:{params:od},responses:{200:{description:"Webinar deleted successfully",summary:"Webinar Deleted"},400:{description:"Invalid webinar ID format",summary:"Validation Error",content:{"application/json":{schema:S.object({errors:S.record(S.string(),S.string())})}}},404:{description:"Webinar not found with the provided ID",summary:"Webinar Not Found",content:{"application/json":{schema:S.object({message:S.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:S.object({message:S.string()})}}}}};import{$Enums as Hv}from"@prisma/client";import H from"zod";import{extendZodWithOpenApi as Lv}from"@asteasolutions/zod-to-openapi";import ro from"zod";Lv(ro);var md=ro.object({role:ro.string().min(1),description:ro.string().optional(),userId:ro.uuid()}),Ss=class{constructor(e){this.workGroupTeamMemberRepository=e}async handle(e,t){try{let{role:r,description:i,userId:n}=md.parse(e.body);return await this.workGroupTeamMemberRepository.create({role:r,description:i,userId:n}),t.sendStatus(201)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as Wv}from"@asteasolutions/zod-to-openapi";import cd from"zod";Wv(cd);var pd=cd.object({id:cd.uuid()}),vs=class{constructor(e){this.workGroupTeamMemberRepository=e}async handle(e,t){try{let{id:r}=pd.parse({id:e.params.id});if(!await this.workGroupTeamMemberRepository.findById(r))throw new p("O membro do grupo de trabalho n\xE3o existe.");return await this.workGroupTeamMemberRepository.deleteById(r),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as _v}from"@asteasolutions/zod-to-openapi";import dd from"zod";_v(dd);var js=dd.object({id:dd.uuid()}),Es=class{constructor(e){this.workGroupTeamMemberRepository=e}async handle(e,t){try{let{id:r}=js.parse({id:e.params.id}),i=await this.workGroupTeamMemberRepository.findById(r);if(!i)throw new p("O membro do grupo de trabalho n\xE3o existe.");return t.status(200).json(i)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as zv}from"@asteasolutions/zod-to-openapi";import yt from"zod";zv(yt);var ld=yt.object({id:yt.uuid(),role:yt.string().min(1).optional(),description:yt.string().optional(),userId:yt.uuid().optional()}),xs=class{constructor(e){this.workGroupTeamMemberRepository=e}async handle(e,t){try{let{id:r,role:i,description:n,userId:s}=ld.parse({id:e.params.id,...e.body});if(!await this.workGroupTeamMemberRepository.findById(r))throw new p("O membro do grupo de trabalho n\xE3o existe.");return await this.workGroupTeamMemberRepository.update({id:r,role:i,description:n,userId:s}),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var Vv=H.object({id:H.uuid(),name:H.string(),emailAddress:H.string(),avatarUrl:H.string().nullable(),orcid:H.string().nullable(),phone:H.string().nullable(),lattesUrl:H.string().nullable(),role:H.enum(Hv.UserRole)}),Gf=H.object({id:H.uuid(),role:H.string(),description:H.string().nullable(),createdAt:H.date(),updatedAt:H.date(),userId:H.uuid(),user:Vv}),Nf={method:"post",path:"/work-group-team-member",tags:["Work Group Team Members"],summary:"Create a new Work Group Team Member",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:md}}}},responses:{201:{description:"Work Group Team Member created successfully",summary:"Work Group Team Member Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:H.object({errors:H.record(H.string(),H.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:H.object({message:H.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:H.object({message:H.string()})}}}}},Lf={method:"get",path:"/work-group-team-member",tags:["Work Group Team Members"],summary:"List all Work Group Team Members with filters",request:{query:H.object({role:H.string().optional(),orderBy:H.enum(["asc","desc"]).optional()})},responses:{200:{description:"List of Work Group Team Members retrieved successfully",summary:"Work Group Team Members Retrieved",content:{"application/json":{schema:H.object({members:H.array(Gf)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:H.object({message:H.string()})}}}}},Wf={method:"get",path:"/work-group-team-member/{id}",tags:["Work Group Team Members"],summary:"Find Work Group Team Member by ID",request:{params:js},responses:{200:{description:"Work Group Team Member details retrieved successfully",summary:"Work Group Team Member Retrieved",content:{"application/json":{schema:Gf}}},400:{description:"Invalid Work Group Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:H.object({errors:H.record(H.string(),H.string())})}}},404:{description:"Work Group Team Member not found with the provided ID",summary:"Work Group Team Member Not Found",content:{"application/json":{schema:H.object({message:H.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:H.object({message:H.string()})}}}}},_f={method:"put",path:"/work-group-team-member/{id}",tags:["Work Group Team Members"],summary:"Update Work Group Team Member",security:[{bearerAuth:[]}],request:{params:js,body:{content:{"application/json":{schema:ld.omit({id:!0})}}}},responses:{200:{description:"Work Group Team Member updated successfully",summary:"Work Group Team Member Updated"},400:{description:"Invalid input data or Work Group Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:H.object({errors:H.record(H.string(),H.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:H.object({message:H.string()})}}},404:{description:"Work Group Team Member not found with the provided ID",summary:"Work Group Team Member Not Found",content:{"application/json":{schema:H.object({message:H.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:H.object({message:H.string()})}}}}},zf={method:"delete",path:"/work-group-team-member/{id}",tags:["Work Group Team Members"],summary:"Delete Work Group Team Member",security:[{bearerAuth:[]}],request:{params:pd},responses:{200:{description:"Work Group Team Member deleted successfully",summary:"Work Group Team Member Deleted"},400:{description:"Invalid Work Group Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:H.object({errors:H.record(H.string(),H.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:H.object({message:H.string()})}}},404:{description:"Work Group Team Member not found with the provided ID",summary:"Work Group Team Member Not Found",content:{"application/json":{schema:H.object({message:H.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:H.object({message:H.string()})}}}}};var u=new Zv;u.registerComponent("securitySchemes","bearerAuth",{type:"http",scheme:"bearer",bearerFormat:"JWT"});u.registerPath(Nd);u.registerPath(Ld);u.registerPath(Wd);u.registerPath(_d);u.registerPath(Hd);u.registerPath(Vd);u.registerPath(zd);u.registerPath(Mf);u.registerPath(Pf);u.registerPath(Af);u.registerPath(Tf);u.registerPath(qu);u.registerPath(Uu);u.registerPath(ku);u.registerPath(Ou);u.registerPath(Qd);u.registerPath(el);u.registerPath(rl);u.registerPath(tl);u.registerPath(ol);u.registerPath(Yu);u.registerPath(Xu);u.registerPath($u);u.registerPath(Qu);u.registerPath(eg);u.registerPath(Pl);u.registerPath(Al);u.registerPath(Tl);u.registerPath(Dl);u.registerPath(Fl);u.registerPath(ef);u.registerPath(rf);u.registerPath(tf);u.registerPath(of);u.registerPath(nf);u.registerPath(sf);u.registerPath(ll);u.registerPath(ul);u.registerPath(gl);u.registerPath(fl);u.registerPath(yl);u.registerPath(zu);u.registerPath(Hu);u.registerPath(Vu);u.registerPath(Zu);u.registerPath(Ku);u.registerPath(fu);u.registerPath(yu);u.registerPath(hu);u.registerPath(Ru);u.registerPath(Iu);u.registerPath(bf);u.registerPath(Cf);u.registerPath(wf);u.registerPath(Sf);u.registerPath(vf);u.registerPath(cu);u.registerPath(pu);u.registerPath(du);u.registerPath(lu);u.registerPath(uu);u.registerPath(Ig);u.registerPath(bg);u.registerPath(Cg);u.registerPath(wg);u.registerPath(Sg);u.registerPath(vg);u.registerPath(Mu);u.registerPath(Pu);u.registerPath(Au);u.registerPath(Tu);u.registerPath(Du);u.registerPath(Fu);u.registerPath(vu);u.registerPath(Eu);u.registerPath(ju);u.registerPath(xu);u.registerPath(Yl);u.registerPath(Xl);u.registerPath($l);u.registerPath(Ql);u.registerPath(eu);u.registerPath(ru);u.registerPath(Vl);u.registerPath(Zl);u.registerPath(Kl);u.registerPath(Jl);u.registerPath(Ol);u.registerPath(Gl);u.registerPath(Nl);u.registerPath(Ll);u.registerPath(Lg);u.registerPath(Wg);u.registerPath(_g);u.registerPath(zg);u.registerPath(Hg);u.registerPath(Vg);u.registerPath(kg);u.registerPath(Og);u.registerPath(Gg);u.registerPath(Ng);u.registerPath(Pg);u.registerPath(Ag);u.registerPath(Tg);u.registerPath(Dg);u.registerPath(Bf);u.registerPath(qf);u.registerPath(Uf);u.registerPath(kf);u.registerPath(Of);u.registerPath(sl);u.registerPath(al);u.registerPath(ml);u.registerPath(cl);u.registerPath(pl);u.registerPath(og);u.registerPath(ig);u.registerPath(ng);u.registerPath(sg);u.registerPath(ag);u.registerPath(bl);u.registerPath(Cl);u.registerPath(wl);u.registerPath(Sl);u.registerPath(vl);u.registerPath(gf);u.registerPath(ff);u.registerPath(yf);u.registerPath(hf);u.registerPath(Rf);u.registerPath(af);u.registerPath(mf);u.registerPath(cf);u.registerPath(pf);u.registerPath(df);u.registerPath(Kd);u.registerPath(Jd);u.registerPath(Yd);u.registerPath(Xd);u.registerPath($d);u.registerPath(ou);u.registerPath(iu);u.registerPath(nu);u.registerPath(su);u.registerPath(au);u.registerPath(Nf);u.registerPath(Lf);u.registerPath(Wf);u.registerPath(_f);u.registerPath(zf);u.registerPath(cg);u.registerPath(pg);u.registerPath(dg);u.registerPath(lg);u.registerPath(ug);u.registerPath(Jg);u.registerPath(Yg);u.registerPath(Xg);u.registerPath($g);u.registerPath(Qg);var Jv=new Kv(u.definitions),Hf=Jv.generateDocument({openapi:"3.0.0",info:{title:"API da Rede CT",version:"1.0.0",description:"API com valida\xE7\xE3o Zod"}});import{Router as tE}from"express";import{extendZodWithOpenApi as Yv}from"@asteasolutions/zod-to-openapi";import ud from"zod";Yv(ud);var Xv=ud.object({authenticatedUserId:ud.uuid()}),Ms=class{constructor(e){this.userRepository=e}async handle(e,t){try{let{authenticatedUserId:r}=Xv.parse({authenticatedUserId:e.user.id}),i=await this.userRepository.findById(r);if(!i)throw new p("Usu\xE1rio n\xE3o encontrado.");return t.status(200).json(i)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{PrismaClient as $v}from"@prisma/client";var O=new $v({log:["warn","error"]});var Ps=class{constructor(e){this.prisma=e}async register({userId:e,title:t,description:r,certificationUrl:i}){await this.prisma.certification.create({data:{title:t,description:r,certificationUrl:i,user:{connect:{id:e}}}})}async find({pagination:{offset:e,limit:t},filter:{description:r,orderBy:i,title:n,userId:s}}){let m={},c=[];return s&&(m.userId=s),n&&c.push({title:{contains:n,mode:"insensitive"}}),r&&c.push({description:{contains:r,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.certification.findMany({where:m,include:{user:{omit:{passwordHash:!0}}},orderBy:{updatedAt:i},skip:e,take:t})}async findById(e){return await this.prisma.certification.findFirst({where:{id:e}})}async findByUserId({pagination:{limit:e,offset:t},filter:{description:r,orderBy:i,title:n},userId:s}){let m={userId:s},c=[];return n&&c.push({title:{contains:n,mode:"insensitive"}}),r&&c.push({description:{contains:r,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.certification.findMany({where:m,include:{user:{omit:{passwordHash:!0}}},skip:t,take:e,orderBy:i?{updatedAt:i}:{updatedAt:"desc"}})}async update({id:e,...t}){await this.prisma.certification.update({where:{id:e},data:t})}async deleteById(e){await this.prisma.certification.delete({where:{id:e}})}async count({filter:{description:e,title:t,userId:r}}){let i={},n=[];return r&&(i.userId=r),t&&n.push({title:{contains:t,mode:"insensitive"}}),e&&n.push({description:{contains:e,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.certification.count({where:i})}};function Cr(){return new Ps(O)}var As=class{constructor(e){this.prisma=e}async create(e){await this.prisma.news.create({data:e})}async find({pagination:{offset:e,limit:t},filter:{authorId:r,content:i,title:n,orderBy:s}}){let m={};r&&(m.authorId={contains:r,mode:"insensitive"});let c=[];return n&&c.push({title:{contains:n,mode:"insensitive"}}),i&&c.push({content:{contains:i,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.news.findMany({where:m,omit:{authorId:!0},include:{author:!0},orderBy:{updatedAt:s},skip:e,take:t})}async findById(e){return await this.prisma.news.findUnique({where:{id:e},omit:{authorId:!0},include:{author:!0}})}async findByAuthorId({authorId:e,pagination:{offset:t,limit:r},filter:{orderBy:i="desc",content:n,title:s}}){let m={authorId:e},c=[];return s&&c.push({title:{contains:s,mode:"insensitive"}}),n&&c.push({content:{contains:n,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.news.findMany({omit:{authorId:!0},where:m,orderBy:{updatedAt:i},skip:t,take:r})}async update(e){await this.prisma.news.update({where:{id:e.id},data:{title:e.title,content:e.content,imageUrl:e.imageUrl}})}async delete(e){await this.prisma.news.delete({where:{id:e}})}async count({filter:{authorId:e,content:t,title:r}}){let i={};e&&(i.authorId={contains:e,mode:"insensitive"});let n=[];return r&&n.push({title:{contains:r,mode:"insensitive"}}),t&&n.push({content:{contains:t,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.news.count({where:i})}};function Ye(){return new As(O)}var Ts=class{constructor(e){this.prisma=e}async create(e){await this.prisma.pendency.create({data:e})}async find({filter:{description:e,orderBy:t,title:r,status:i,userId:n},pagination:{limit:s,offset:m}}){let c={userId:n,AND:{status:{equals:i}}};e&&(c.description={contains:e,mode:"insensitive"});let d=[];return r&&d.push({title:{contains:r,mode:"insensitive"}}),d.length>0&&(c.OR=d),await this.prisma.pendency.findMany({where:c,orderBy:{updatedAt:t},include:{user:{omit:{passwordHash:!0}}},skip:m,take:s})}async findById(e){return await this.prisma.pendency.findFirst({where:{id:e},include:{user:{omit:{passwordHash:!0}}}})}async findByUserId({filter:{description:e,orderBy:t,title:r,status:i},pagination:{limit:n,offset:s},userId:m}){let c={userId:m,AND:{status:{equals:i}}},d=[];return e&&d.push({description:{contains:e,mode:"insensitive"}}),r&&d.push({title:{contains:r,mode:"insensitive"}}),d.length>0&&(c.OR=d),await this.prisma.pendency.findMany({where:c,orderBy:{updatedAt:t},include:{user:{omit:{passwordHash:!0}}},skip:s,take:n})}async update({id:e,...t}){await this.prisma.pendency.update({where:{id:e},data:t})}async deleteById(e){await this.prisma.pendency.delete({where:{id:e}})}async count({filter:{description:e,title:t,status:r,userId:i}}){let n={userId:i},s=[];return e&&s.push({description:{contains:e,mode:"insensitive"}}),t&&s.push({title:{contains:t,mode:"insensitive"}}),r&&s.push({status:{equals:r}}),s.length>0&&(n.OR=s),await this.prisma.pendency.count({where:n})}};function wr(){return new Ts(O)}var Ds=class{constructor(e){this.prisma=e}async create(e){await this.prisma.user.create({data:e})}async update(e){await this.prisma.user.update({where:{id:e.id},data:{lattesUrl:e.lattesUrl??null,orcid:e.orcid??null,phone:e.phone??null,avatarUrl:e.avatarUrl??null}})}async deleteById(e){await this.prisma.user.delete({where:{id:e}})}async find(){return await this.prisma.user.findMany({omit:{passwordHash:!0}})}async findByEmail(e){return await this.prisma.user.findFirst({where:{emailAddress:e}})}async findById(e){return await this.prisma.user.findFirst({where:{id:e},omit:{passwordHash:!0}})}};function Ie(){return new Ds(O)}import{compare as Qv,hash as eE}from"bcryptjs";var Fs=class{constructor(e,t){this.hashFn=e;this.compareFn=t}async hash(e){return await this.hashFn(e,6)}async compare({password:e,hashedPassword:t}){return await this.compareFn(e,t)}};function gd(){return new Fs(eE,Qv)}import Vf from"jsonwebtoken";import be from"zod";var rE=be.object({JWT_SECRET:be.string(),FIREBASE_BUCKET:be.string(),FIREBASE_CLIENT_EMAIL:be.string(),FIREBASE_PRIVATE_KEY:be.string(),FIREBASE_PROJECT_ID:be.string(),FIREBASE_TYPE:be.string(),FIREBASE_PRIVATE_KEY_ID:be.string(),FIREBASE_CLIENT_ID:be.string(),FIREBASE_AUTH_URI:be.string(),FIREBASE_TOKEN_URI:be.string(),FIREBASE_AUTH_PROVIDER_X509_CERT_URL:be.string(),FIREBASE_CLIENT_X509_CERT_URL:be.string()}),le=rE.parse(process.env);var Bs=class{constructor(e,t){this.signFn=e;this.verifyFn=t}sign(e){try{return this.signFn(e,le.JWT_SECRET,{expiresIn:"3d",subject:e.id})}catch{return null}}verify(e){try{return this.verifyFn(e,le.JWT_SECRET)}catch{return null}}};function qs(){return new Bs(Vf.sign,Vf.verify)}function Zf(){return{signUpController:new So(Ie(),gd())}}function Kf(){return{signInController:new Co(Ie(),gd(),qs())}}function Jf(){return{findAuthenticatedUserController:new Ms(Ie())}}function Yf(){return{findAuthenticatedUserController:new Ro(Ye())}}function Xf(){return{findAuthenticatedUserCertificationsController:new ho(Cr())}}function $f(){return{findAuthenticatedUserPendenciesController:new Io(wr())}}var Us=class{constructor(e){this.jwtService=e}authenticated(e,t,r){let i=e.headers.authorization;if(!i?.startsWith("Bearer "))return t.status(401).json({message:"Token inv\xE1lido.",invalid:!0});let n=i.split(" ")[1];if(!n)return t.status(401).json({message:"Token n\xE3o fornecido."});try{let s=this.jwtService.verify(n);if(!s)return t.status(401).json({message:"Token inv\xE1lido.",invalid:!0});e.user=s,r()}catch(s){if(console.log(s),s instanceof Error)return t.status(401).json({message:s.message})}}isAdmin(e,t,r){let i=e.headers.authorization;if(!i?.startsWith("Bearer "))return t.status(401).json({message:"Token inv\xE1lido.",invalid:!0});let n=i.split(" ")[1];if(!n)return t.status(401).json({message:"Token n\xE3o fornecido."});try{let s=this.jwtService.verify(n);if(!s)return t.status(401).json({message:"Token inv\xE1lido.",invalid:!0});if(s.role!=="ADMIN")return t.status(401).json({message:"\xC9 necess\xE1rio ter permiss\xF5es de administrador."});e.user=s,r()}catch(s){if(console.log(s),s instanceof Error)return t.status(401).json({message:s.message})}}};function Z(){return{authMiddleware:new Us(qs())}}var Xe=tE(),{authMiddleware:to}=Z();Xe.post("/sign-up",async(o,e)=>{let{signUpController:t}=Zf();await t.handle(o,e)});Xe.post("/sign-in",async(o,e)=>{let{signInController:t}=Kf();await t.handle(o,e)});Xe.get("/user",(o,e,t)=>{to.authenticated(o,e,t)},async(o,e)=>{let{findAuthenticatedUserController:t}=Jf();await t.handle(o,e)});Xe.get("/user/news",(o,e,t)=>{to.authenticated(o,e,t)},async(o,e)=>{let{findAuthenticatedUserController:t}=Yf();await t.handle(o,e)});Xe.get("/admin",(o,e,t)=>{to.isAdmin(o,e,t)},(o,e)=>{try{e.status(200).json({success:!0})}catch(t){t instanceof Error&&e.status(500).json({message:t.message})}});Xe.get("/certifications",(o,e,t)=>{to.authenticated(o,e,t)},async(o,e)=>{let{findAuthenticatedUserCertificationsController:t}=Xf();await t.handle(o,e)});Xe.get("/pendencies",(o,e,t)=>{to.authenticated(o,e,t)},async(o,e)=>{let{findAuthenticatedUserPendenciesController:t}=$f();await t.handle(o,e)});import{Router as lE}from"express";import{extendZodWithOpenApi as oE}from"@asteasolutions/zod-to-openapi";import Be from"zod";var iE=5,Qf=1024,nE=Qf*Qf,fd=iE*nE;oE(Be);var sE=Be.object({volumeNumber:Be.coerce.number().int().positive("N\xFAmero do volume \xE9 obrigat\xF3rio."),year:Be.coerce.number().int().positive("Ano \xE9 obrigat\xF3rio."),title:Be.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),author:Be.string().min(1,"Autor \xE9 obrigat\xF3rio."),accessUrl:Be.url().optional(),description:Be.string().optional(),authorImage:Be.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=fd,"A imagem do autor deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB."),coverImage:Be.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=fd,"A imagem da capa deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB."),catalogSheet:Be.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&typeof o.size=="number"&&o.size<=fd,"A ficha catalogr\xE1fica deve ter no m\xE1ximo 5MB.")}),ks=class{constructor(e,t){this.bookVolumeRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{volumeNumber:r,year:i,title:n,author:s,accessUrl:m,description:c,authorImage:d,coverImage:R,catalogSheet:E}=sE.parse({...e.body,authorImage:e.files?.authorImage?.[0],coverImage:e.files?.coverImage?.[0],catalogSheet:e.files?.catalogSheet?.[0]}),q=await this.bookVolumeRepository.create({volumeNumber:r,year:i,title:n,author:s,accessUrl:m,description:c}),Y=q.authorImageUrl,re=q.coverImageUrl,ue=q.catalogSheetUrl;return Y=await this.firebaseStorageService.uploadFile({file:d,folder:M.BOOK_VOLUME_AUTHOR_IMAGE,id:q.id}),re=await this.firebaseStorageService.uploadFile({file:R,folder:M.BOOK_VOLUME_COVER,id:q.id}),ue=await this.firebaseStorageService.uploadFile({file:E,folder:M.BOOK_VOLUME_CATALOG_SHEET,id:q.id}),await this.bookVolumeRepository.update({id:q.id,authorImageUrl:Y,coverImageUrl:re,catalogSheetUrl:ue}),t.sendStatus(201)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var Os=class{constructor(e){this.prisma=e}async create({volumeNumber:e,year:t,title:r,author:i,accessUrl:n,authorImageUrl:s,coverImageUrl:m,catalogSheetUrl:c,description:d}){return await this.prisma.bookVolume.create({data:{volumeNumber:e,year:t,title:r,author:i,accessUrl:n,authorImageUrl:s,coverImageUrl:m,catalogSheetUrl:c,description:d}})}async find({pagination:{offset:e,limit:t},filter:{title:r,author:i,description:n,orderBy:s}}){let m={},c=[];return r&&c.push({title:{contains:r,mode:"insensitive"}}),i&&c.push({author:{contains:i,mode:"insensitive"}}),n&&c.push({description:{contains:n,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.bookVolume.findMany({where:m,orderBy:{updatedAt:s},skip:e,take:t})}async findById(e){return await this.prisma.bookVolume.findFirst({where:{id:e}})}async update({id:e,volumeNumber:t,year:r,title:i,author:n,accessUrl:s,authorImageUrl:m,coverImageUrl:c,catalogSheetUrl:d,description:R}){await this.prisma.bookVolume.update({where:{id:e},data:{volumeNumber:t,year:r,title:i,author:n,accessUrl:s,authorImageUrl:m,coverImageUrl:c,catalogSheetUrl:d,description:R}})}async deleteById(e){await this.prisma.bookVolume.delete({where:{id:e}})}async count({filter:{title:e,author:t,description:r}}){let i={},n=[];return e&&n.push({title:{contains:e,mode:"insensitive"}}),t&&n.push({author:{contains:t,mode:"insensitive"}}),r&&n.push({description:{contains:r,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.bookVolume.count({where:i})}};function ht(){return new Os(O)}import{getStorage as mE}from"firebase-admin/storage";import{config as aE}from"dotenv";import ey from"firebase-admin";aE();var yd=ey.initializeApp({credential:ey.credential.cert({clientEmail:le.FIREBASE_CLIENT_EMAIL,privateKey:le.FIREBASE_PRIVATE_KEY,projectId:le.FIREBASE_PROJECT_ID,type:le.FIREBASE_TYPE,privateKeyId:le.FIREBASE_PRIVATE_KEY_ID,clientId:le.FIREBASE_CLIENT_ID,authUri:le.FIREBASE_AUTH_URI,tokenUri:le.FIREBASE_TOKEN_URI,authProviderX509CertUrl:le.FIREBASE_AUTH_PROVIDER_X509_CERT_URL,clientX509CertUrl:le.FIREBASE_CLIENT_X509_CERT_URL}),storageBucket:le.FIREBASE_BUCKET});yd.name?console.log("\u{1F525} Firebase conectado com sucesso!"):console.error("\u274C Erro ao se conectar ao Firebase.");var cE=mE(yd),ry=cE.bucket(le.FIREBASE_BUCKET);import{randomUUID as pE}from"node:crypto";var dE=/https:\/\/storage\.googleapis\.com\/[^/]+\/(.+)$/,Gs=class{constructor(e){this.bucket=e}async uploadFile({file:e,folder:t,id:r}){let i=`${pE()}-${e?.originalname}`,n=this.bucket.file(`${t}/${r}/${i}`);return await new Promise((s,m)=>{let c=n.createWriteStream({metadata:{contentType:e?.mimetype}});c.on("error",d=>{m(d)}),c.on("finish",async()=>{try{await n.makePublic();let d=`https://storage.googleapis.com/${this.bucket.name}/${n.name}`;s(d)}catch(d){m(d)}}),c.end(e.buffer)})}async updateFile({file:e,id:t,fileUrl:r,folder:i}){try{let n=this.getPath(r);if(!n)throw new Error("Arquivo n\xE3o encontrado.");let[s,m]=await Promise.all([this.bucket.file(n).delete(),this.uploadFile({file:e,id:t,folder:i})]);return m}catch{throw new Error("Erro ao atualizar o arquivo.")}}async deleteFile({fileUrl:e}){let t=this.getPath(e);if(!t)throw new Error("Arquivo n\xE3o encontrado.");try{await this.bucket.file(t).delete()}catch{throw new Error("Erro ao deletar o arquivo.")}}getPath(e){let t=e.match(dE);return t?t[1]:null}};function F(){return new Gs(ry)}function ty(){return{createBookVolumeController:new ks(ht(),F())}}function oy(){return{findBookVolumesController:new jo(ht())}}function iy(){return{findBookVolumeByIdController:new Eo(ht())}}function ny(){return{updateBookVolumeController:new Mo(ht(),F())}}function sy(){return{deleteBookVolumeController:new vo(ht(),F())}}import ay from"multer";var K=ay({storage:ay.memoryStorage()});var qr=lE(),{authMiddleware:oo}=Z();qr.post("/",(o,e,t)=>{oo.isAdmin(o,e,t)},K.fields([{name:"authorImage",maxCount:1},{name:"coverImage",maxCount:1},{name:"catalogSheet",maxCount:1}]),async(o,e)=>{let{createBookVolumeController:t}=ty();await t.handle(o,e)});qr.get("/",(o,e,t)=>{oo.isAdmin(o,e,t)},async(o,e)=>{let{findBookVolumesController:t}=oy();await t.handle(o,e)});qr.get("/:id",(o,e,t)=>{oo.isAdmin(o,e,t)},async(o,e)=>{let{findBookVolumeByIdController:t}=iy();await t.handle(o,e)});qr.put("/:id",(o,e,t)=>{oo.isAdmin(o,e,t)},K.fields([{name:"authorImage",maxCount:1},{name:"coverImage",maxCount:1},{name:"catalogSheet",maxCount:1}]),async(o,e)=>{let{updateBookVolumeController:t}=ny();await t.handle(o,e)});qr.delete("/:id",(o,e,t)=>{oo.isAdmin(o,e,t)},async(o,e)=>{let{deleteBookVolumeController:t}=sy();await t.handle(o,e)});import{Router as uE}from"express";function my(){return{registerCertificationController:new Do(Ie(),Cr(),F())}}function cy(){return{findCertificationsController:new To(Cr())}}function py(){return{findCertificationByIdController:new Ao(Cr())}}function dy(){return{updateCertificationController:new Bo(Cr(),F())}}function ly(){return{deleteCertificationController:new Po(Cr(),F())}}var Ur=uE(),{authMiddleware:io}=Z();Ur.post("/:user_id",(o,e,t)=>{io.isAdmin(o,e,t)},K.single("certification"),async(o,e)=>{let{registerCertificationController:t}=my();await t.handle(o,e)});Ur.get("/",(o,e,t)=>{io.isAdmin(o,e,t)},async(o,e)=>{let{findCertificationsController:t}=cy();await t.handle(o,e)});Ur.get("/:certification_id",(o,e,t)=>{io.isAdmin(o,e,t)},async(o,e)=>{let{findCertificationByIdController:t}=py();await t.handle(o,e)});Ur.put("/:certification_id",(o,e,t)=>{io.isAdmin(o,e,t)},K.single("certification"),async(o,e)=>{let{updateCertificationController:t}=dy();await t.handle(o,e)});Ur.delete("/:certification_id",(o,e,t)=>{io.isAdmin(o,e,t)},async(o,e)=>{let{deleteCertificationController:t}=ly();await t.handle(o,e)});import{Router as IE}from"express";import{extendZodWithOpenApi as gE}from"@asteasolutions/zod-to-openapi";import Ce from"zod";var fE=5,uy=1024,yE=uy*uy,hE=fE*yE;gE(Ce);var RE=Ce.object({title:Ce.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),coordinatorId:Ce.string().uuid("Coordenador \xE9 obrigat\xF3rio."),email:Ce.email("E-mail deve ser v\xE1lido."),location:Ce.string().min(1,"Localiza\xE7\xE3o \xE9 obrigat\xF3ria."),scheduledAt:Ce.coerce.date(),registrationLink:Ce.url().optional(),description:Ce.string().optional(),instructorIds:Ce.transform(o=>typeof o=="string"?o.split(","):o).pipe(Ce.array(Ce.uuid())),image:Ce.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=hE,"A imagem deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.")}),Ns=class{constructor(e,t){this.courseRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{title:r,coordinatorId:i,email:n,location:s,scheduledAt:m,registrationLink:c,description:d,instructorIds:R,image:E}=RE.parse({...e.body,image:e.file}),q=await this.courseRepository.create({title:r,coordinatorId:i,email:n,location:s,scheduledAt:m,registrationLink:c||void 0,description:d,instructorIds:R}),Y=await this.firebaseStorageService.uploadFile({file:E,folder:M.COURSE,id:q.id});return await this.courseRepository.update({id:q.id,imageUrl:Y}),t.sendStatus(201)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var Ls=class{constructor(e){this.prisma=e}async create({title:e,imageUrl:t,coordinatorId:r,email:i,instructorIds:n,scheduledAt:s,location:m,registrationLink:c,description:d}){return await this.prisma.course.create({data:{title:e,imageUrl:t,coordinatorId:r,email:i,scheduledAt:s,location:m,registrationLink:c,description:d,instructors:{connect:n?.map(R=>({id:R}))}}})}async find({pagination:{offset:e,limit:t},filter:{description:r,orderBy:i,title:n,coordinator:s}}){let m={},c=[];return n&&c.push({title:{contains:n,mode:"insensitive"}}),r&&c.push({description:{contains:r,mode:"insensitive"}}),s&&c.push({coordinator:{name:{contains:s,mode:"insensitive"}}}),c.length>0&&(m.OR=c),await this.prisma.course.findMany({where:m,include:{coordinator:{omit:{passwordHash:!0}},instructors:{omit:{passwordHash:!0}}},orderBy:{updatedAt:i},skip:e,take:t})}async findById(e){return await this.prisma.course.findFirst({where:{id:e},include:{coordinator:{omit:{passwordHash:!0}},instructors:{omit:{passwordHash:!0}}}})}async update({id:e,title:t,imageUrl:r,coordinatorId:i,email:n,instructorIds:s,scheduledAt:m,location:c,registrationLink:d,description:R}){s!==void 0&&await this.prisma.course.update({where:{id:e},data:{instructors:{set:[]}}}),await this.prisma.course.update({where:{id:e},data:{title:t,imageUrl:r,coordinatorId:i,email:n,scheduledAt:m,location:c,registrationLink:d,description:R,...s?.length>0&&{instructors:{connect:s.map(E=>({id:E}))}}}})}async deleteById(e){await this.prisma.course.delete({where:{id:e}})}async count({filter:{description:e,title:t,coordinator:r}}){let i={},n=[];return t&&n.push({title:{contains:t,mode:"insensitive"}}),e&&n.push({description:{contains:e,mode:"insensitive"}}),r&&n.push({coordinator:{name:{contains:r,mode:"insensitive"}}}),n.length>0&&(i.OR=n),await this.prisma.course.count({where:i})}};function Rt(){return new Ls(O)}function gy(){return{createCourseController:new Ns(Rt(),F())}}function fy(){return{findCoursesController:new Oo(Rt())}}function yy(){return{findCourseByIdController:new ko(Rt())}}function hy(){return{updateCourseController:new Go(Rt(),F())}}function Ry(){return{deleteCourseController:new Uo(Rt(),F())}}var kr=IE(),{authMiddleware:no}=Z();kr.post("/",(o,e,t)=>{no.isAdmin(o,e,t)},K.single("image"),async(o,e)=>{let{createCourseController:t}=gy();await t.handle(o,e)});kr.get("/",(o,e,t)=>{no.isAdmin(o,e,t)},async(o,e)=>{let{findCoursesController:t}=fy();await t.handle(o,e)});kr.get("/:id",(o,e,t)=>{no.isAdmin(o,e,t)},async(o,e)=>{let{findCourseByIdController:t}=yy();await t.handle(o,e)});kr.put("/:id",(o,e,t)=>{no.isAdmin(o,e,t)},K.single("image"),async(o,e)=>{let{updateCourseController:t}=hy();await t.handle(o,e)});kr.delete("/:id",(o,e,t)=>{no.isAdmin(o,e,t)},async(o,e)=>{let{deleteCourseController:t}=Ry();await t.handle(o,e)});import{Router as vE}from"express";import{extendZodWithOpenApi as bE}from"@asteasolutions/zod-to-openapi";import $e from"zod";var CE=1,wE=9;bE($e);var SE=$e.object({page:$e.coerce.number().min(1).default(CE),limit:$e.coerce.number().min(1).default(wE),code:$e.string().optional(),title:$e.string().optional(),description:$e.string().optional(),notes:$e.string().optional(),orderBy:$e.enum(["asc","desc"]).default("desc")}),Ws=class{constructor(e){this.etpRepository=e}async handle(e,t){try{let{page:r,limit:i,...n}=SE.parse(e.query),s=i*r-i,[m,c]=await Promise.all([this.etpRepository.find({pagination:{offset:s,limit:i},filter:n}),this.etpRepository.count({filter:n})]),d=Math.max(Math.ceil(c/i),1);t.status(200).json({page:r,totalPages:d,offset:s,limit:i,etps:m})}catch(r){if(r instanceof Error)throw new a(r.message)}}};var _s=class{constructor(e){this.prisma=e}async create(e){let{leaderId:t,deputyLeaderId:r,secretaryId:i,memberIds:n,...s}=e;await this.prisma.$transaction(async m=>{let c=await m.eTP.create({data:s});await m.eTPLeader.create({data:{etpId:c.id,researcherId:t}}),await m.eTPDeputy.create({data:{etpId:c.id,researcherId:r}}),await m.eTPSecretary.create({data:{etpId:c.id,researcherId:i}}),await m.eTP.update({where:{id:c.id},data:{members:{connect:n.map(d=>({id:d}))}}})})}async update(e){let{leaderId:t,deputyLeaderId:r,secretaryId:i,memberIds:n,...s}=e;await this.prisma.$transaction(async m=>{await m.eTP.update({where:{id:e.id},data:s}),await this.updateLeader(m,e.id,t),await this.updateDeputyLeader(m,e.id,r),await this.updateSecretary(m,e.id,i),await this.updateMembers(m,e.id,n)})}async updateLeader(e,t,r){r!==void 0&&(await e.eTPLeader.deleteMany({where:{etpId:t}}),r&&await e.eTPLeader.create({data:{etpId:t,researcherId:r}}))}async updateDeputyLeader(e,t,r){r!==void 0&&(await e.eTPDeputy.deleteMany({where:{etpId:t}}),r&&await e.eTPDeputy.create({data:{etpId:t,researcherId:r}}))}async updateSecretary(e,t,r){r!==void 0&&(await e.eTPSecretary.deleteMany({where:{etpId:t}}),r&&await e.eTPSecretary.create({data:{etpId:t,researcherId:r}}))}async updateMembers(e,t,r){r!==void 0&&await e.eTP.update({where:{id:t},data:{members:{set:r.map(i=>({id:i}))}}})}async deleteById(e){await this.prisma.eTP.delete({where:{id:e}})}async find({pagination:{offset:e,limit:t},filter:{code:r,title:i,description:n,notes:s,orderBy:m}}){let c={},d=[];return r&&d.push({code:{contains:r,mode:"insensitive"}}),i&&d.push({title:{contains:i,mode:"insensitive"}}),n&&d.push({description:{contains:n,mode:"insensitive"}}),s&&d.push({notes:{contains:s,mode:"insensitive"}}),d.length>0&&(c.OR=d),await this.prisma.eTP.findMany({where:c,include:{leader:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},deputyLeader:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},secretary:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},members:{include:{user:{omit:{passwordHash:!0}}}}},orderBy:{updatedAt:m},skip:e,take:t})}async findById(e){return await this.prisma.eTP.findFirst({where:{id:e},include:{leader:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},deputyLeader:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},secretary:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},members:{include:{user:{omit:{passwordHash:!0}}}}}})}async findByCode(e){return await this.prisma.eTP.findFirst({where:{code:e},include:{leader:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},deputyLeader:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},secretary:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},members:{include:{user:{omit:{passwordHash:!0}}}}}})}async count({filter:{code:e,title:t,description:r,notes:i}}){let n={},s=[];return e&&s.push({code:{contains:e,mode:"insensitive"}}),t&&s.push({title:{contains:t,mode:"insensitive"}}),r&&s.push({description:{contains:r,mode:"insensitive"}}),i&&s.push({notes:{contains:i,mode:"insensitive"}}),s.length>0&&(n.OR=s),await this.prisma.eTP.count({where:n})}};function It(){return new _s(O)}function Iy(){return{createETPController:new No(It())}}function by(){return{findETPsController:new Ws(It())}}function Cy(){return{findETPByIdController:new Wo(It())}}function wy(){return{updateETPController:new zo(It())}}function Sy(){return{deleteETPController:new Lo(It())}}var Or=vE(),{authMiddleware:hd}=Z();Or.post("/",(o,e,t)=>{hd.authenticated(o,e,t)},async(o,e)=>{let{createETPController:t}=Iy();await t.handle(o,e)});Or.get("/",async(o,e)=>{let{findETPsController:t}=by();await t.handle(o,e)});Or.get("/:id",async(o,e)=>{let{findETPByIdController:t}=Cy();await t.handle(o,e)});Or.put("/:id",(o,e,t)=>{hd.authenticated(o,e,t)},async(o,e)=>{let{updateETPController:t}=wy();await t.handle(o,e)});Or.delete("/:id",(o,e,t)=>{hd.authenticated(o,e,t)},async(o,e)=>{let{deleteETPController:t}=Sy();await t.handle(o,e)});import{Router as EE}from"express";var zs=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.event.create({data:e})}async update(e){await this.prisma.event.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.event.delete({where:{id:e}})}async find({pagination:{offset:e,limit:t},filter:{title:r,status:i,format:n,orderBy:s}}){let m={},c=[];return i&&(m.status=i),n&&(m.format=n),r&&c.push({title:{contains:r,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.event.findMany({where:m,orderBy:s?{startDate:s}:{startDate:"desc"},skip:e,take:t})}async findById(e){return await this.prisma.event.findFirst({where:{id:e}})}async count({filter:{title:e,status:t,format:r}}){let i={},n=[];return t&&(i.status=t),r&&(i.format=r),e&&n.push({title:{contains:e,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.event.count({where:i})}};function bt(){return new zs(O)}function vy(){return{createEventController:new Zo(bt(),F())}}function Ey(){return{findEventsController:new Xo(bt())}}function jy(){return{findEventByIdController:new Jo(bt())}}function xy(){return{updateEventController:new $o(bt(),F())}}function My(){return{deleteEventController:new Ko(bt())}}var Gr=EE(),{authMiddleware:Rd}=Z();Gr.post("/",(o,e,t)=>{Rd.authenticated(o,e,t)},K.single("image"),async(o,e)=>{let{createEventController:t}=vy();await t.handle(o,e)});Gr.get("/",async(o,e)=>{let{findEventsController:t}=Ey();await t.handle(o,e)});Gr.get("/:id",async(o,e)=>{let{findEventByIdController:t}=jy();await t.handle(o,e)});Gr.put("/:id",(o,e,t)=>{Rd.authenticated(o,e,t)},K.single("image"),async(o,e)=>{let{updateEventController:t}=xy();await t.handle(o,e)});Gr.delete("/:id",(o,e,t)=>{Rd.authenticated(o,e,t)},async(o,e)=>{let{deleteEventController:t}=My();await t.handle(o,e)});import{Router as jE}from"express";var Hs=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.inMemoriam.create({data:e})}async update(e){await this.prisma.inMemoriam.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.inMemoriam.delete({where:{id:e}})}async find({pagination:{offset:e,limit:t},filter:{name:r,biography:i,role:n,orderBy:s}}){let m={},c=[];return n&&(m.role=n),r&&c.push({name:{contains:r,mode:"insensitive"}}),i&&c.push({biography:{contains:i,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.inMemoriam.findMany({where:m,orderBy:{updatedAt:s},skip:e,take:t})}async findById(e){return await this.prisma.inMemoriam.findFirst({where:{id:e}})}async findByRole(e){return await this.prisma.inMemoriam.findMany({where:{role:e}})}async count({filter:{name:e,biography:t,role:r}}){let i={},n=[];return r&&(i.role=r),e&&n.push({name:{contains:e,mode:"insensitive"}}),t&&n.push({biography:{contains:t,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.inMemoriam.count({where:i})}};function Nr(){return new Hs(O)}function Py(){return{createInMemoriamController:new Qo(Nr(),F())}}function Ay(){return{findInMemoriamsController:new ii(Nr())}}function Ty(){return{findInMemoriamByIdController:new ri(Nr())}}function Dy(){return{findInMemoriamByRoleController:new oi(Nr())}}function Fy(){return{updateInMemoriamController:new ni(Nr(),F())}}function By(){return{deleteInMemoriamController:new ei(Nr(),F())}}var Sr=jE(),{authMiddleware:Id}=Z();Sr.post("/",(o,e,t)=>{Id.authenticated(o,e,t)},K.single("photo"),async(o,e)=>{let{createInMemoriamController:t}=Py();await t.handle(o,e)});Sr.get("/",async(o,e)=>{let{findInMemoriamsController:t}=Ay();await t.handle(o,e)});Sr.get("/:id",async(o,e)=>{let{findInMemoriamByIdController:t}=Ty();await t.handle(o,e)});Sr.get("/role/:role",async(o,e)=>{let{findInMemoriamByRoleController:t}=Dy();await t.handle(o,e)});Sr.put("/:id",(o,e,t)=>{Id.authenticated(o,e,t)},K.single("photo"),async(o,e)=>{let{updateInMemoriamController:t}=Fy();await t.handle(o,e)});Sr.delete("/:id",(o,e,t)=>{Id.authenticated(o,e,t)},async(o,e)=>{let{deleteInMemoriamController:t}=By();await t.handle(o,e)});import{Router as xE}from"express";var bd=xE();bd.get("/",(o,e)=>{e.status(200).json({message:"Rede CT"})});import{Router as DE}from"express";var Vs=class{constructor(e){this.prisma=e}async create(e){await this.prisma.internationalScientificCongress.create({data:e})}async update(e){await this.prisma.internationalScientificCongress.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.internationalScientificCongress.delete({where:{id:e}})}async find({pagination:{offset:e,limit:t},filter:{title:r,edition:i,location:n,orderBy:s}}){let m={},c=[];return i&&c.push({edition:{equals:i}}),r&&c.push({title:{contains:r,mode:"insensitive"}}),n&&c.push({location:{contains:n,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.internationalScientificCongress.findMany({where:m,include:{partners:!0,galleries:!0},orderBy:s?{startDate:s}:{startDate:"desc"},skip:e,take:t})}async findById(e){return await this.prisma.internationalScientificCongress.findFirst({where:{id:e},include:{partners:!0,galleries:!0}})}async findByEdition(e){return await this.prisma.internationalScientificCongress.findMany({where:{edition:e},include:{partners:!0,galleries:!0}})}async count({filter:{title:e,edition:t,location:r}}){let i={},n=[];return t&&n.push({edition:{equals:t}}),e&&n.push({title:{contains:e,mode:"insensitive"}}),r&&n.push({location:{contains:r,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.internationalScientificCongress.count({where:i})}};function qe(){return new Vs(O)}function qy(){return{createInternationalScientificCongressController:new yi(qe())}}function Uy(){return{findInternationalScientificCongressesController:new Ci(qe())}}function ky(){return{findInternationalScientificCongressByIdController:new Ii(qe())}}function Oy(){return{findInternationalScientificCongressByEditionController:new Ri(qe())}}function Gy(){return{updateInternationalScientificCongressController:new wi(qe())}}function Ny(){return{deleteInternationalScientificCongressController:new hi(qe())}}import{extendZodWithOpenApi as ME}from"@asteasolutions/zod-to-openapi";import Cd from"zod";ME(Cd);var PE=Cd.object({id:Cd.uuid()}),Zs=class{constructor(e){this.internationalScientificCongressGalleryRepository=e}async handle(e,t){try{let{id:r}=PE.parse({id:e.params.id}),i=await this.internationalScientificCongressGalleryRepository.findById(r);if(!i)throw new p("A imagem da galeria n\xE3o existe.");return t.status(200).json(i)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var Ks=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.internationalScientificCongressGalleryItem.create({data:e})}async update(e){await this.prisma.internationalScientificCongressGalleryItem.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.internationalScientificCongressGalleryItem.delete({where:{id:e}})}async findByCongressId(e){let{pagination:t,filter:r}=e;return await this.prisma.internationalScientificCongressGalleryItem.findMany({where:{congressId:r.congressId,...r.caption&&{caption:{contains:r.caption,mode:"insensitive"}}},skip:t.offset,take:t.limit})}async findById(e){return await this.prisma.internationalScientificCongressGalleryItem.findFirst({where:{id:e}})}async count(e){let{filter:t}=e;return await this.prisma.internationalScientificCongressGalleryItem.count({where:{congressId:t.congressId,...t.caption&&{caption:{contains:t.caption,mode:"insensitive"}}}})}};function Ct(){return new Ks(O)}function Ly(){return{createInternationalScientificCongressGalleryController:new si(Ct(),qe(),F())}}function Wy(){return{findInternationalScientificCongressGalleriesByCongressIdController:new ci(Ct())}}function _y(){return{findInternationalScientificCongressGalleryByIdController:new Zs(Ct())}}function zy(){return{updateInternationalScientificCongressGalleryController:new pi(Ct(),F())}}function Hy(){return{deleteInternationalScientificCongressGalleryController:new ai(Ct())}}import{extendZodWithOpenApi as AE}from"@asteasolutions/zod-to-openapi";import wd from"zod";AE(wd);var TE=wd.object({id:wd.uuid()}),Js=class{constructor(e){this.internationalScientificCongressPartnerRepository=e}async handle(e,t){try{let{id:r}=TE.parse({id:e.params.id}),i=await this.internationalScientificCongressPartnerRepository.findById(r);if(!i)throw new p("O parceiro n\xE3o existe.");return t.status(200).json(i)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var Ys=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.internationalScientificCongressPartner.create({data:e})}async update(e){await this.prisma.internationalScientificCongressPartner.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.internationalScientificCongressPartner.delete({where:{id:e}})}async findByCongressId(e){return await this.prisma.internationalScientificCongressPartner.findMany({where:{congressId:e.filter.congressId,name:e.filter.name?{contains:e.filter.name,mode:"insensitive"}:void 0},skip:e.pagination?.offset,take:e.pagination?.limit})}async findById(e){return await this.prisma.internationalScientificCongressPartner.findFirst({where:{id:e}})}async count(e){return await this.prisma.internationalScientificCongressPartner.count({where:{congressId:e.filter.congressId,name:e.filter.name?{contains:e.filter.name,mode:"insensitive"}:void 0}})}};function wt(){return new Ys(O)}function Vy(){return{createInternationalScientificCongressPartnerController:new di(wt(),qe(),F())}}function Zy(){return{findInternationalScientificCongressPartnersByCongressIdController:new gi(wt())}}function Ky(){return{findInternationalScientificCongressPartnerByIdController:new Js(wt())}}function Jy(){return{updateInternationalScientificCongressPartnerController:new fi(wt(),F())}}function Yy(){return{deleteInternationalScientificCongressPartnerController:new li(wt())}}var ce=DE(),{authMiddleware:Qe}=Z();ce.post("/",(o,e,t)=>{Qe.authenticated(o,e,t)},async(o,e)=>{let{createInternationalScientificCongressController:t}=qy();await t.handle(o,e)});ce.get("/",async(o,e)=>{let{findInternationalScientificCongressesController:t}=Uy();await t.handle(o,e)});ce.get("/:id",async(o,e)=>{let{findInternationalScientificCongressByIdController:t}=ky();await t.handle(o,e)});ce.get("/edition/:edition",async(o,e)=>{let{findInternationalScientificCongressByEditionController:t}=Oy();await t.handle(o,e)});ce.put("/:id",(o,e,t)=>{Qe.authenticated(o,e,t)},async(o,e)=>{let{updateInternationalScientificCongressController:t}=Gy();await t.handle(o,e)});ce.delete("/:id",(o,e,t)=>{Qe.authenticated(o,e,t)},async(o,e)=>{let{deleteInternationalScientificCongressController:t}=Ny();await t.handle(o,e)});ce.post("/:congressId/gallery",(o,e,t)=>{Qe.authenticated(o,e,t)},K.single("image"),async(o,e)=>{let{createInternationalScientificCongressGalleryController:t}=Ly();await t.handle(o,e)});ce.get("/:congressId/gallery",async(o,e)=>{let{findInternationalScientificCongressGalleriesByCongressIdController:t}=Wy();await t.handle(o,e)});ce.get("/gallery/:id",async(o,e)=>{let{findInternationalScientificCongressGalleryByIdController:t}=_y();await t.handle(o,e)});ce.put("/gallery/:id",(o,e,t)=>{Qe.authenticated(o,e,t)},K.single("image"),async(o,e)=>{let{updateInternationalScientificCongressGalleryController:t}=zy();await t.handle(o,e)});ce.delete("/gallery/:id",(o,e,t)=>{Qe.authenticated(o,e,t)},async(o,e)=>{let{deleteInternationalScientificCongressGalleryController:t}=Hy();await t.handle(o,e)});ce.post("/:congressId/partner",(o,e,t)=>{Qe.authenticated(o,e,t)},K.single("logo"),async(o,e)=>{let{createInternationalScientificCongressPartnerController:t}=Vy();await t.handle(o,e)});ce.get("/:congressId/partner",async(o,e)=>{let{findInternationalScientificCongressPartnersByCongressIdController:t}=Zy();await t.handle(o,e)});ce.get("/partner/:id",async(o,e)=>{let{findInternationalScientificCongressPartnerByIdController:t}=Ky();await t.handle(o,e)});ce.put("/partner/:id",(o,e,t)=>{Qe.authenticated(o,e,t)},K.single("logo"),async(o,e)=>{let{updateInternationalScientificCongressPartnerController:t}=Jy();await t.handle(o,e)});ce.delete("/partner/:id",(o,e,t)=>{Qe.authenticated(o,e,t)},async(o,e)=>{let{deleteInternationalScientificCongressPartnerController:t}=Yy();await t.handle(o,e)});import{Router as kE}from"express";import{extendZodWithOpenApi as FE}from"@asteasolutions/zod-to-openapi";import Lr from"zod";var BE=1,qE=10;FE(Lr);var UE=Lr.object({page:Lr.coerce.number().min(1).default(BE),limit:Lr.coerce.number().min(1).default(qE),title:Lr.string().optional(),country:Lr.string().optional(),orderBy:Lr.enum(["asc","desc"]).optional()}),Xs=class{constructor(e){this.lawRepository=e}async handle(e,t){try{let{page:r,limit:i,...n}=UE.parse(e.query),s=i*r-i,[m,c]=await Promise.all([this.lawRepository.find({pagination:{offset:s,limit:i},filter:n}),this.lawRepository.count({filter:n})]),d=Math.max(Math.ceil(c/i),1);t.status(200).json({page:r,totalPages:d,offset:s,limit:i,laws:m})}catch(r){if(r instanceof Error)throw new a(r.message)}}};var $s=class{constructor(e){this.prisma=e}async create(e){await this.prisma.law.create({data:{...e}})}async update(e){let{id:t,...r}=e;await this.prisma.law.update({where:{id:t},data:r})}async deleteById(e){await this.prisma.law.delete({where:{id:e}})}async find({pagination:e,filter:{title:t,country:r,orderBy:i}}){let n={};return t&&(n.title={contains:t,mode:"insensitive"}),r&&(n.country={contains:r,mode:"insensitive"}),await this.prisma.law.findMany({where:n,orderBy:{updatedAt:i??"desc"},...e&&{skip:e.offset,take:e.limit}})}async findById(e){return await this.prisma.law.findFirst({where:{id:e}})}async count({filter:{title:e,country:t}}){let r={};return e&&(r.title={contains:e,mode:"insensitive"}),t&&(r.country={contains:t,mode:"insensitive"}),await this.prisma.law.count({where:r})}};function St(){return new $s(O)}function Xy(){return{createLawController:new Si(St())}}function $y(){return{findLawsController:new Xs(St())}}function Qy(){return{findLawByIdController:new Ei(St())}}function eh(){return{updateLawController:new xi(St())}}function rh(){return{deleteLawController:new vi(St())}}var Wr=kE(),{authMiddleware:Sd}=Z();Wr.post("/",(o,e,t)=>{Sd.authenticated(o,e,t)},async(o,e)=>{let{createLawController:t}=Xy();await t.handle(o,e)});Wr.get("/",async(o,e)=>{let{findLawsController:t}=$y();await t.handle(o,e)});Wr.get("/:id",async(o,e)=>{let{findLawByIdController:t}=Qy();await t.handle(o,e)});Wr.put("/:id",(o,e,t)=>{Sd.authenticated(o,e,t)},async(o,e)=>{let{updateLawController:t}=eh();await t.handle(o,e)});Wr.delete("/:id",(o,e,t)=>{Sd.authenticated(o,e,t)},async(o,e)=>{let{deleteLawController:t}=rh();await t.handle(o,e)});import{Router as NE}from"express";import{extendZodWithOpenApi as OE}from"@asteasolutions/zod-to-openapi";import Qs from"zod";OE(Qs);var GE=Qs.object({role:Qs.string().optional(),orderBy:Qs.enum(["asc","desc"]).optional()}),ea=class{constructor(e){this.legitimatorCommitteeMemberRepository=e}async handle(e,t){try{let r=GE.parse(e.query),i=await this.legitimatorCommitteeMemberRepository.find({filter:r});t.status(200).json({members:i})}catch(r){if(r instanceof Error)throw new a(r.message)}}};var ra=class{constructor(e){this.prisma=e}async create(e){await this.prisma.legitimatorCommitteeMember.create({data:{...e,order:e.order??0}})}async update(e){let{id:t,...r}=e;await this.prisma.legitimatorCommitteeMember.update({where:{id:t},data:r})}async deleteById(e){await this.prisma.legitimatorCommitteeMember.delete({where:{id:e}})}async find({filter:{role:e,orderBy:t}}){let r={};return e&&(r.role={contains:e,mode:"insensitive"}),await this.prisma.legitimatorCommitteeMember.findMany({where:r,include:{user:{omit:{passwordHash:!0}}},orderBy:t?[{order:"asc"},{updatedAt:t}]:[{order:"asc"},{updatedAt:"desc"}]})}async findById(e){return await this.prisma.legitimatorCommitteeMember.findFirst({where:{id:e},include:{user:{omit:{passwordHash:!0}}}})}async count({filter:{role:e}}){let t={};return e&&(t.role={contains:e,mode:"insensitive"}),await this.prisma.legitimatorCommitteeMember.count({where:t})}};function vt(){return new ra(O)}function th(){return{createLegitimatorCommitteeMemberController:new Mi(vt())}}function oh(){return{findLegitimatorCommitteeMembersController:new ea(vt())}}function ih(){return{findLegitimatorCommitteeMemberByIdController:new Ai(vt())}}function nh(){return{updateLegitimatorCommitteeMemberController:new Di(vt())}}function sh(){return{deleteLegitimatorCommitteeMemberController:new Pi(vt())}}var _r=NE(),{authMiddleware:vd}=Z();_r.post("/",(o,e,t)=>{vd.authenticated(o,e,t)},async(o,e)=>{let{createLegitimatorCommitteeMemberController:t}=th();await t.handle(o,e)});_r.get("/",async(o,e)=>{let{findLegitimatorCommitteeMembersController:t}=oh();await t.handle(o,e)});_r.get("/:id",async(o,e)=>{let{findLegitimatorCommitteeMemberByIdController:t}=ih();await t.handle(o,e)});_r.put("/:id",(o,e,t)=>{vd.authenticated(o,e,t)},async(o,e)=>{let{updateLegitimatorCommitteeMemberController:t}=nh();await t.handle(o,e)});_r.delete("/:id",(o,e,t)=>{vd.authenticated(o,e,t)},async(o,e)=>{let{deleteLegitimatorCommitteeMemberController:t}=sh();await t.handle(o,e)});import{Router as _E}from"express";import{extendZodWithOpenApi as LE}from"@asteasolutions/zod-to-openapi";import so from"zod";LE(so);var WE=so.object({name:so.string().optional(),description:so.string().optional(),orderBy:so.enum(["asc","desc"]).default("desc")}),ta=class{constructor(e){this.managementTeamRepository=e}async handle(e,t){try{let r=WE.parse(e.query),i=await this.managementTeamRepository.find({filter:r});t.status(200).json({teams:i})}catch(r){if(r instanceof Error)throw new a(r.message)}}};var oa=class{constructor(e){this.prisma=e}async create(e){let{members:t,...r}=e;await this.prisma.$transaction(async i=>{let n=await i.managementTeam.create({data:r});return await i.managementTeamMember.createMany({data:t.map(({userId:s,role:m,order:c})=>({teamId:n.id,userId:s,role:m,order:c??0}))}),n})}async update(e){let{members:t,...r}=e;await this.prisma.$transaction(async i=>{let n=await i.managementTeam.update({where:{id:e.id},data:r});return t!==void 0&&(await i.managementTeamMember.deleteMany({where:{teamId:e.id}}),t.length>0&&await i.managementTeamMember.createMany({data:t.map(({userId:s,role:m,order:c})=>({teamId:e.id,userId:s,role:m,order:c??0}))})),n})}async deleteById(e){await this.prisma.managementTeam.delete({where:{id:e}})}async find({filter:{name:e,description:t,orderBy:r}}){let i={},n=[];return e&&n.push({name:{contains:e,mode:"insensitive"}}),t&&n.push({description:{contains:t,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.managementTeam.findMany({where:i,include:{members:{include:{user:{omit:{passwordHash:!0}}},orderBy:{order:"asc"}}},orderBy:{updatedAt:r}})}async findById(e){return await this.prisma.managementTeam.findFirst({where:{id:e},include:{members:{include:{user:{omit:{passwordHash:!0}}},orderBy:{order:"asc"}}}})}async findByName(e){return await this.prisma.managementTeam.findFirst({where:{name:e},include:{members:{include:{user:{omit:{passwordHash:!0}}},orderBy:{order:"asc"}}}})}async count({filter:{name:e,description:t}}){let r={},i=[];return e&&i.push({name:{contains:e,mode:"insensitive"}}),t&&i.push({description:{contains:t,mode:"insensitive"}}),i.length>0&&(r.OR=i),await this.prisma.managementTeam.count({where:r})}};function Et(){return new oa(O)}function ah(){return{createManagementTeamController:new Fi(Et())}}function mh(){return{findManagementTeamsController:new ta(Et())}}function ch(){return{findManagementTeamByIdController:new qi(Et())}}function ph(){return{updateManagementTeamController:new ki(Et())}}function dh(){return{deleteManagementTeamController:new Bi(Et())}}var zr=_E(),{authMiddleware:Ed}=Z();zr.post("/",(o,e,t)=>{Ed.authenticated(o,e,t)},async(o,e)=>{let{createManagementTeamController:t}=ah();await t.handle(o,e)});zr.get("/",async(o,e)=>{let{findManagementTeamsController:t}=mh();await t.handle(o,e)});zr.get("/:id",async(o,e)=>{let{findManagementTeamByIdController:t}=ch();await t.handle(o,e)});zr.put("/:id",(o,e,t)=>{Ed.authenticated(o,e,t)},async(o,e)=>{let{updateManagementTeamController:t}=ph();await t.handle(o,e)});zr.delete("/:id",(o,e,t)=>{Ed.authenticated(o,e,t)},async(o,e)=>{let{deleteManagementTeamController:t}=dh();await t.handle(o,e)});import{Router as VE}from"express";var ia=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.meeting.create({data:e})}async update(e){await this.prisma.meeting.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.meeting.delete({where:{id:e}})}async find({pagination:{offset:e,limit:t},filter:{title:r,format:i,status:n,orderBy:s}}){let m={},c=[];return i&&(m.format=i),n&&(m.status=n),r&&c.push({title:{contains:r,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.meeting.findMany({where:m,include:{minutes:!0},orderBy:s?{scheduledAt:s}:{scheduledAt:"desc"},skip:e,take:t})}async findById(e){return await this.prisma.meeting.findFirst({where:{id:e},include:{minutes:!0}})}async findByStatus(e){return await this.prisma.meeting.findMany({where:{status:e},include:{minutes:!0}})}async count({filter:{title:e,format:t,status:r}}){let i={},n=[];return t&&(i.format=t),r&&(i.status=r),e&&n.push({title:{contains:e,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.meeting.count({where:i})}};function er(){return new ia(O)}function lh(){return{createMeetingController:new Wi(er())}}function uh(){return{findMeetingsController:new Zi(er())}}function gh(){return{findMeetingByIdController:new zi(er())}}function fh(){return{findMeetingByStatusController:new Vi(er())}}function yh(){return{updateMeetingController:new Ki(er())}}function hh(){return{deleteMeetingController:new _i(er())}}import{extendZodWithOpenApi as zE}from"@asteasolutions/zod-to-openapi";import jd from"zod";zE(jd);var HE=jd.object({meetingId:jd.uuid()}),na=class{constructor(e,t){this.meetingMinuteRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{meetingId:r}=HE.parse({meetingId:e.params.meetingId}),i=await this.meetingMinuteRepository.findByMeetingId(r);if(!i)throw new p("A ata n\xE3o existe para esta reuni\xE3o.");return i.documentUrl&&await this.firebaseStorageService.deleteFile({fileUrl:i.documentUrl}),await this.meetingMinuteRepository.deleteByMeetingId(i.id),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var sa=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.meetingMinute.create({data:e,include:{meeting:!0}})}async update(e){await this.prisma.meetingMinute.update({where:{id:e.id},data:e})}async deleteByMeetingId(e){await this.prisma.meetingMinute.delete({where:{id:e}})}async findByMeetingId(e){return await this.prisma.meetingMinute.findFirst({where:{meetingId:e},include:{meeting:!0}})}};function ao(){return new sa(O)}function Rh(){return{createMeetingMinuteController:new Oi(ao(),er(),F())}}function Ih(){return{findMeetingMinuteByMeetingIdController:new Gi(ao())}}function bh(){return{updateMeetingMinuteByMeetingIdController:new Ni(ao(),F())}}function Ch(){return{deleteMeetingMinuteByMeetingIdController:new na(ao(),F())}}var Me=VE(),{authMiddleware:jt}=Z();Me.post("/",(o,e,t)=>{jt.authenticated(o,e,t)},async(o,e)=>{let{createMeetingController:t}=lh();await t.handle(o,e)});Me.get("/",async(o,e)=>{let{findMeetingsController:t}=uh();await t.handle(o,e)});Me.get("/:id",async(o,e)=>{let{findMeetingByIdController:t}=gh();await t.handle(o,e)});Me.get("/status/:status",async(o,e)=>{let{findMeetingByStatusController:t}=fh();await t.handle(o,e)});Me.put("/:id",(o,e,t)=>{jt.authenticated(o,e,t)},async(o,e)=>{let{updateMeetingController:t}=yh();await t.handle(o,e)});Me.delete("/:id",(o,e,t)=>{jt.authenticated(o,e,t)},async(o,e)=>{let{deleteMeetingController:t}=hh();await t.handle(o,e)});Me.post("/:meetingId/minute",(o,e,t)=>{jt.authenticated(o,e,t)},K.single("document"),async(o,e)=>{let{createMeetingMinuteController:t}=Rh();await t.handle(o,e)});Me.get("/:meetingId/minute",async(o,e)=>{let{findMeetingMinuteByMeetingIdController:t}=Ih();await t.handle(o,e)});Me.put("/:meetingId/minute",(o,e,t)=>{jt.authenticated(o,e,t)},K.single("document"),async(o,e)=>{let{updateMeetingMinuteByMeetingIdController:t}=bh();await t.handle(o,e)});Me.delete("/:meetingId/minute",(o,e,t)=>{jt.authenticated(o,e,t)},async(o,e)=>{let{deleteMeetingMinuteByMeetingIdController:t}=Ch();await t.handle(o,e)});import{Router as ej}from"express";import{extendZodWithOpenApi as ZE}from"@asteasolutions/zod-to-openapi";import xd from"zod";ZE(xd);var KE=xd.object({id:xd.string()}),aa=class{constructor(e,t){this.newsRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{id:r}=KE.parse(e.params),i=e.user.id,n=await this.newsRepository.findById(r);if(!n)throw new p("Not\xEDcia n\xE3o encontrada.");if(n.author.id!==i)throw new we("Sem permiss\xE3o.");await Promise.all([this.newsRepository.delete(r),this.firebaseStorageService.deleteFile({fileUrl:n.imageUrl})]),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as JE}from"@asteasolutions/zod-to-openapi";import xt from"zod";var YE=5,wh=1024,XE=wh*wh,$E=YE*XE;JE(xt);var QE=xt.object({id:xt.string(),title:xt.string().min(1),content:xt.string().min(1),image:xt.any().optional().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=$E,"A imagem deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.")}),ma=class{constructor(e,t){this.newsRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{id:r,title:i,content:n,image:s}=QE.parse({id:e.params.id,image:e.file,...e.body}),m=await this.newsRepository.findById(r);if(!m)throw new p("Not\xEDcia n\xE3o encontrada.");let c=e.user.id;if(m.author.id!==c)throw new we("Sem permiss\xE3o.");let d=m.imageUrl||"";s&&m.imageUrl&&(d=await this.firebaseStorageService.updateFile({file:s,folder:M.NEWS,id:r,fileUrl:m.imageUrl}));let R=await this.newsRepository.update({id:r,title:i,content:n,imageUrl:d});t.status(200).json(R)}catch(r){if(r instanceof Error)throw new a(r.message)}}};function Sh(){return{createNewsController:new Ji(Ye(),F())}}function vh(){return{findAllNewsController:new Qi(Ye())}}function Eh(){return{findNewsByIdController:new $i(Ye())}}function jh(){return{findNewsByAuthorIdController:new Yi(Ye())}}function xh(){return{updateNewsController:new ma(Ye(),F())}}function Mh(){return{deleteNewsController:new aa(Ye(),F())}}var vr=ej(),{authMiddleware:Md}=Z();vr.post("/",(o,e,t)=>{Md.authenticated(o,e,t)},K.single("image"),async(o,e)=>{let{createNewsController:t}=Sh();await t.handle(o,e)});vr.get("/",async(o,e)=>{let{findAllNewsController:t}=vh();await t.handle(o,e)});vr.get("/:id",async(o,e)=>{let{findNewsByIdController:t}=Eh();await t.handle(o,e)});vr.get("/author/:authorId",async(o,e)=>{let{findNewsByAuthorIdController:t}=jh();await t.handle(o,e)});vr.put("/:id",(o,e,t)=>{Md.authenticated(o,e,t)},K.single("image"),async(o,e)=>{let{updateNewsController:t}=xh();await t.handle(o,e)});vr.delete("/:id",(o,e,t)=>{Md.authenticated(o,e,t)},async(o,e)=>{let{deleteNewsController:t}=Mh();await t.handle(o,e)});import{Router as rj}from"express";var ca=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.partner.create({data:e})}async update(e){await this.prisma.partner.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.partner.delete({where:{id:e}})}async find({pagination:e,filter:{name:t,description:r,category:i,isActive:n,orderBy:s}}){let m={},c=[];return n!==void 0&&(m.isActive=n),t&&c.push({name:{contains:t,mode:"insensitive"}}),r&&c.push({description:{contains:r,mode:"insensitive"}}),i&&c.push({category:{contains:i,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.partner.findMany({where:m,orderBy:s?{updatedAt:s}:{updatedAt:"desc"},...e&&{skip:e.offset,take:e.limit}})}async findById(e){return await this.prisma.partner.findFirst({where:{id:e}})}async count({filter:{name:e,description:t,category:r,isActive:i}}){let n={},s=[];return i!==void 0&&(n.isActive=i),e&&s.push({name:{contains:e,mode:"insensitive"}}),t&&s.push({description:{contains:t,mode:"insensitive"}}),r&&s.push({category:{contains:r,mode:"insensitive"}}),s.length>0&&(n.OR=s),await this.prisma.partner.count({where:n})}};function Mt(){return new ca(O)}function Ph(){return{createPartnerController:new en(Mt(),F())}}function Ah(){return{findPartnersController:new nn(Mt())}}function Th(){return{findPartnerByIdController:new tn(Mt())}}function Dh(){return{updatePartnerController:new sn(Mt(),F())}}function Fh(){return{deletePartnerController:new rn(Mt(),F())}}var Hr=rj(),{authMiddleware:Pd}=Z();Hr.post("/",(o,e,t)=>{Pd.authenticated(o,e,t)},K.single("logo"),async(o,e)=>{let{createPartnerController:t}=Ph();await t.handle(o,e)});Hr.get("/",async(o,e)=>{let{findPartnersController:t}=Ah();await t.handle(o,e)});Hr.get("/:id",async(o,e)=>{let{findPartnerByIdController:t}=Th();await t.handle(o,e)});Hr.put("/:id",(o,e,t)=>{Pd.authenticated(o,e,t)},K.single("logo"),async(o,e)=>{let{updatePartnerController:t}=Dh();await t.handle(o,e)});Hr.delete("/:id",(o,e,t)=>{Pd.authenticated(o,e,t)},async(o,e)=>{let{deletePartnerController:t}=Fh();await t.handle(o,e)});import{Router as tj}from"express";function Bh(){return{createPendencyController:new an(Ie(),wr(),F())}}function qh(){return{findPendenciesController:new pn(wr())}}function Uh(){return{findPendencyByIdController:new dn(wr())}}function kh(){return{updatePendencyController:new ln(wr(),F())}}function Oh(){return{deletePendencyController:new cn(wr(),F())}}var Vr=tj(),{authMiddleware:mo}=Z();Vr.post("/:user_id",(o,e,t)=>{mo.isAdmin(o,e,t)},K.single("document"),async(o,e)=>{let{createPendencyController:t}=Bh();await t.handle(o,e)});Vr.get("/",(o,e,t)=>{mo.isAdmin(o,e,t)},async(o,e)=>{let{findPendenciesController:t}=qh();await t.handle(o,e)});Vr.get("/:pendency_id",(o,e,t)=>{mo.isAdmin(o,e,t)},async(o,e)=>{let{findPendencyByIdController:t}=Uh();await t.handle(o,e)});Vr.put("/:pendency_id",(o,e,t)=>{mo.isAdmin(o,e,t)},K.single("document"),async(o,e)=>{let{updatePendencyController:t}=kh();await t.handle(o,e)});Vr.delete("/:pendency_id",(o,e,t)=>{mo.isAdmin(o,e,t)},async(o,e)=>{let{deletePendencyController:t}=Oh();await t.handle(o,e)});import{Router as mj}from"express";import{extendZodWithOpenApi as oj}from"@asteasolutions/zod-to-openapi";import rr from"zod";var ij=5,Gh=1024,nj=Gh*Gh,sj=ij*nj;oj(rr);var aj=rr.object({title:rr.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),description:rr.string().optional(),startDate:rr.coerce.date(),endDate:rr.coerce.date(),contact:rr.string().min(1,"Contato \xE9 obrigat\xF3rio."),registrationLink:rr.url().optional(),image:rr.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=sj,"A imagem deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.")}),pa=class{constructor(e,t){this.postGraduateProgramRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{title:r,description:i,startDate:n,endDate:s,contact:m,registrationLink:c,image:d}=aj.parse({...e.body,image:e.file}),R=await this.postGraduateProgramRepository.create({title:r,description:i,startDate:n,endDate:s,contact:m,registrationLink:c||void 0}),E=await this.firebaseStorageService.uploadFile({file:d,folder:M.POST_GRADUATE_PROGRAM,id:R.id});return await this.postGraduateProgramRepository.update({id:R.id,imageUrl:E}),t.sendStatus(201)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var da=class{constructor(e){this.prisma=e}async create({title:e,imageUrl:t,description:r,startDate:i,endDate:n,contact:s,registrationLink:m}){return await this.prisma.postGraduateProgram.create({data:{title:e,imageUrl:t,description:r,startDate:i,endDate:n,contact:s,registrationLink:m}})}async find({pagination:{offset:e,limit:t},filter:{description:r,orderBy:i,title:n,contact:s}}){let m={},c=[];return n&&c.push({title:{contains:n,mode:"insensitive"}}),r&&c.push({description:{contains:r,mode:"insensitive"}}),s&&c.push({contact:{contains:s,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.postGraduateProgram.findMany({where:m,orderBy:{updatedAt:i},skip:e,take:t})}async findById(e){return await this.prisma.postGraduateProgram.findFirst({where:{id:e}})}async update({id:e,title:t,imageUrl:r,description:i,startDate:n,endDate:s,contact:m,registrationLink:c}){await this.prisma.postGraduateProgram.update({where:{id:e},data:{title:t,imageUrl:r,description:i,startDate:n,endDate:s,contact:m,registrationLink:c}})}async deleteById(e){await this.prisma.postGraduateProgram.delete({where:{id:e}})}async count({filter:{description:e,title:t,contact:r}}){let i={},n=[];return t&&n.push({title:{contains:t,mode:"insensitive"}}),e&&n.push({description:{contains:e,mode:"insensitive"}}),r&&n.push({contact:{contains:r,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.postGraduateProgram.count({where:i})}};function Pt(){return new da(O)}function Nh(){return{createPostGraduateProgramController:new pa(Pt(),F())}}function Lh(){return{findPostGraduateProgramsController:new yn(Pt())}}function Wh(){return{findPostGraduateProgramByIdController:new fn(Pt())}}function _h(){return{updatePostGraduateProgramController:new hn(Pt(),F())}}function zh(){return{deletePostGraduateProgramController:new gn(Pt(),F())}}var Zr=mj(),{authMiddleware:co}=Z();Zr.post("/",(o,e,t)=>{co.isAdmin(o,e,t)},K.single("image"),async(o,e)=>{let{createPostGraduateProgramController:t}=Nh();await t.handle(o,e)});Zr.get("/",(o,e,t)=>{co.isAdmin(o,e,t)},async(o,e)=>{let{findPostGraduateProgramsController:t}=Lh();await t.handle(o,e)});Zr.get("/:id",(o,e,t)=>{co.isAdmin(o,e,t)},async(o,e)=>{let{findPostGraduateProgramByIdController:t}=Wh();await t.handle(o,e)});Zr.put("/:id",(o,e,t)=>{co.isAdmin(o,e,t)},K.single("image"),async(o,e)=>{let{updatePostGraduateProgramController:t}=_h();await t.handle(o,e)});Zr.delete("/:id",(o,e,t)=>{co.isAdmin(o,e,t)},async(o,e)=>{let{deletePostGraduateProgramController:t}=zh();await t.handle(o,e)});import{Router as uj}from"express";import{extendZodWithOpenApi as cj}from"@asteasolutions/zod-to-openapi";import At from"zod";var pj=1,dj=7;cj(At);var lj=At.object({page:At.coerce.number().min(1).default(pj),limit:At.coerce.number().min(1).default(dj),role:At.string().optional(),orderBy:At.enum(["asc","desc"]).optional()}),la=class{constructor(e){this.referenceCenterTeamMemberRepository=e}async handle(e,t){try{let{page:r,limit:i,...n}=lj.parse(e.query),s=i*r-i,[m,c]=await Promise.all([this.referenceCenterTeamMemberRepository.find({pagination:{offset:s,limit:i},filter:n}),this.referenceCenterTeamMemberRepository.count({filter:n})]),d=Math.max(Math.ceil(c/i),1);t.status(200).json({page:r,totalPages:d,offset:s,limit:i,members:m})}catch(r){if(r instanceof Error)throw new a(r.message)}}};var ua=class{constructor(e){this.prisma=e}async create(e){await this.prisma.referenceCenterTeamMember.create({data:{...e}})}async update(e){let{id:t,...r}=e;await this.prisma.referenceCenterTeamMember.update({where:{id:t},data:r})}async deleteById(e){await this.prisma.referenceCenterTeamMember.delete({where:{id:e}})}async find({pagination:e,filter:{role:t,orderBy:r}}){let i={};return t&&(i.role={contains:t,mode:"insensitive"}),await this.prisma.referenceCenterTeamMember.findMany({where:i,include:{user:{omit:{passwordHash:!0}}},orderBy:{updatedAt:r??"desc"},...e&&{skip:e.offset,take:e.limit}})}async findById(e){return await this.prisma.referenceCenterTeamMember.findFirst({where:{id:e},include:{user:{omit:{passwordHash:!0}}}})}async count({filter:{role:e}}){let t={};return e&&(t.role={contains:e,mode:"insensitive"}),await this.prisma.referenceCenterTeamMember.count({where:t})}};function Tt(){return new ua(O)}function Hh(){return{createReferenceCenterTeamMemberController:new Rn(Tt())}}function Vh(){return{findReferenceCenterTeamMembersController:new la(Tt())}}function Zh(){return{findReferenceCenterTeamMemberByIdController:new bn(Tt())}}function Kh(){return{updateReferenceCenterTeamMemberController:new wn(Tt())}}function Jh(){return{deleteReferenceCenterTeamMemberController:new In(Tt())}}var Kr=uj(),{authMiddleware:Ad}=Z();Kr.post("/",(o,e,t)=>{Ad.authenticated(o,e,t)},async(o,e)=>{let{createReferenceCenterTeamMemberController:t}=Hh();await t.handle(o,e)});Kr.get("/",async(o,e)=>{let{findReferenceCenterTeamMembersController:t}=Vh();await t.handle(o,e)});Kr.get("/:id",async(o,e)=>{let{findReferenceCenterTeamMemberByIdController:t}=Zh();await t.handle(o,e)});Kr.put("/:id",(o,e,t)=>{Ad.authenticated(o,e,t)},async(o,e)=>{let{updateReferenceCenterTeamMemberController:t}=Kh();await t.handle(o,e)});Kr.delete("/:id",(o,e,t)=>{Ad.authenticated(o,e,t)},async(o,e)=>{let{deleteReferenceCenterTeamMemberController:t}=Jh();await t.handle(o,e)});import{Router as gj}from"express";var ga=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.regiment.create({data:e})}async update(e){await this.prisma.regiment.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.regiment.delete({where:{id:e}})}async find({pagination:{offset:e,limit:t},filter:{title:r,status:i,orderBy:n}}){let s={},m=[];return i&&(s.status=i),r&&m.push({title:{contains:r,mode:"insensitive"}}),m.length>0&&(s.OR=m),await this.prisma.regiment.findMany({where:s,orderBy:n?{updatedAt:n}:{updatedAt:"desc"},skip:e,take:t})}async findById(e){return await this.prisma.regiment.findFirst({where:{id:e}})}async findByStatus(e){return await this.prisma.regiment.findMany({where:{status:e}})}async count({filter:{title:e,status:t}}){let r={},i=[];return t&&(r.status=t),e&&i.push({title:{contains:e,mode:"insensitive"}}),i.length>0&&(r.OR=i),await this.prisma.regiment.count({where:r})}};function Jr(){return new ga(O)}function Yh(){return{createRegimentController:new Sn(Jr(),F())}}function Xh(){return{findRegimentsController:new Mn(Jr())}}function $h(){return{findRegimentByIdController:new En(Jr())}}function Qh(){return{findRegimentByStatusController:new xn(Jr())}}function eR(){return{updateRegimentController:new Pn(Jr(),F())}}function rR(){return{deleteRegimentController:new vn(Jr(),F())}}var Er=gj(),{authMiddleware:Td}=Z();Er.post("/",(o,e,t)=>{Td.authenticated(o,e,t)},K.single("document"),async(o,e)=>{let{createRegimentController:t}=Yh();await t.handle(o,e)});Er.get("/",async(o,e)=>{let{findRegimentsController:t}=Xh();await t.handle(o,e)});Er.get("/:id",async(o,e)=>{let{findRegimentByIdController:t}=$h();await t.handle(o,e)});Er.get("/status/:status",async(o,e)=>{let{findRegimentByStatusController:t}=Qh();await t.handle(o,e)});Er.put("/:id",(o,e,t)=>{Td.authenticated(o,e,t)},K.single("document"),async(o,e)=>{let{updateRegimentController:t}=eR();await t.handle(o,e)});Er.delete("/:id",(o,e,t)=>{Td.authenticated(o,e,t)},async(o,e)=>{let{deleteRegimentController:t}=rR();await t.handle(o,e)});import{Router as Ij}from"express";import{extendZodWithOpenApi as fj}from"@asteasolutions/zod-to-openapi";import Dd from"zod";fj(Dd);var yj=Dd.object({id:Dd.string().uuid("ID inv\xE1lido")}),fa=class{constructor(e){this.regionalCongressGalleryRepository=e}async handle(e,t){try{let{id:r}=yj.parse(e.params),i=await this.regionalCongressGalleryRepository.findById(r);if(!i)throw new p("Item de galeria n\xE3o encontrado");return t.status(200).json(i)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var ya=class{constructor(e){this.prisma=e}async create(e){await this.prisma.regionalCongress.create({data:e})}async update(e){await this.prisma.regionalCongress.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.regionalCongress.delete({where:{id:e}})}async find({pagination:{offset:e,limit:t},filter:{title:r,edition:i,location:n,orderBy:s}}){let m={},c=[];return i&&c.push({edition:{equals:i}}),r&&c.push({title:{contains:r,mode:"insensitive"}}),n&&c.push({location:{contains:n,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.regionalCongress.findMany({where:m,include:{regionalCongressPartners:!0,regionalCongressGalleryItems:!0},orderBy:s?{startDate:s}:{startDate:"desc"},skip:e,take:t})}async findById(e){return await this.prisma.regionalCongress.findFirst({where:{id:e},include:{regionalCongressPartners:!0,regionalCongressGalleryItems:!0}})}async findByEdition(e){return await this.prisma.regionalCongress.findMany({where:{edition:e},include:{regionalCongressPartners:!0,regionalCongressGalleryItems:!0}})}async count({filter:{title:e,edition:t,location:r}}){let i={},n=[];return t&&n.push({edition:{equals:t}}),e&&n.push({title:{contains:e,mode:"insensitive"}}),r&&n.push({location:{contains:r,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.regionalCongress.count({where:i})}};function Ue(){return new ya(O)}var ha=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.regionalCongressGalleryItem.create({data:e})}async update(e){await this.prisma.regionalCongressGalleryItem.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.regionalCongressGalleryItem.delete({where:{id:e}})}async findByCongressId({pagination:e,filter:t}){return await this.prisma.regionalCongressGalleryItem.findMany({where:{congressId:t.congressId,...t.caption&&{caption:{contains:t.caption,mode:"insensitive"}}},skip:e.offset,take:e.limit})}async findById(e){return await this.prisma.regionalCongressGalleryItem.findFirst({where:{id:e}})}async count({filter:e}){return await this.prisma.regionalCongressGalleryItem.count({where:{congressId:e.congressId,...e.caption&&{caption:{contains:e.caption,mode:"insensitive"}}}})}};function Dt(){return new ha(O)}function tR(){return{createRegionalCongressGalleryController:new An(Dt(),Ue(),F())}}function oR(){return{findRegionalCongressGalleriesByCongressIdController:new Fn(Dt())}}function iR(){return{findRegionalCongressGalleryByIdController:new fa(Dt())}}function nR(){return{updateRegionalCongressGalleryController:new Bn(Dt(),F())}}function sR(){return{deleteRegionalCongressGalleryController:new Tn(Dt())}}import{extendZodWithOpenApi as hj}from"@asteasolutions/zod-to-openapi";import Fd from"zod";hj(Fd);var Rj=Fd.object({id:Fd.string().uuid("ID inv\xE1lido")}),Ra=class{constructor(e){this.regionalCongressPartnerRepository=e}async handle(e,t){try{let{id:r}=Rj.parse(e.params),i=await this.regionalCongressPartnerRepository.findById(r);if(!i)throw new p("Parceiro n\xE3o encontrado");return t.status(200).json(i)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var Ia=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.regionalCongressPartner.create({data:e})}async update(e){await this.prisma.regionalCongressPartner.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.regionalCongressPartner.delete({where:{id:e}})}async findByCongressId(e){return await this.prisma.regionalCongressPartner.findMany({where:{congressId:e.filter.congressId,name:e.filter.name?{contains:e.filter.name,mode:"insensitive"}:void 0},skip:e.pagination?.offset,take:e.pagination?.limit})}async findById(e){return await this.prisma.regionalCongressPartner.findFirst({where:{id:e}})}async count(e){return await this.prisma.regionalCongressPartner.count({where:{congressId:e.filter.congressId,name:e.filter.name?{contains:e.filter.name,mode:"insensitive"}:void 0}})}};function Ft(){return new Ia(O)}function aR(){return{createRegionalCongressPartnerController:new qn(Ft(),Ue(),F())}}function mR(){return{findRegionalCongressPartnersByCongressIdController:new On(Ft())}}function cR(){return{findRegionalCongressPartnerByIdController:new Ra(Ft())}}function pR(){return{updateRegionalCongressPartnerController:new Gn(Ft(),F())}}function dR(){return{deleteRegionalCongressPartnerController:new Un(Ft())}}function lR(){return{createRegionalCongressController:new Nn(Ue())}}function uR(){return{findRegionalCongressesController:new Hn(Ue())}}function gR(){return{findRegionalCongressByIdController:new _n(Ue())}}function fR(){return{findRegionalCongressByEditionController:new Wn(Ue())}}function yR(){return{updateRegionalCongressController:new Vn(Ue())}}function hR(){return{deleteRegionalCongressController:new Ln(Ue())}}var pe=Ij(),{authMiddleware:tr}=Z();pe.post("/",(o,e,t)=>{tr.authenticated(o,e,t)},async(o,e)=>{let{createRegionalCongressController:t}=lR();await t.handle(o,e)});pe.get("/",async(o,e)=>{let{findRegionalCongressesController:t}=uR();await t.handle(o,e)});pe.get("/:id",async(o,e)=>{let{findRegionalCongressByIdController:t}=gR();await t.handle(o,e)});pe.get("/edition/:edition",async(o,e)=>{let{findRegionalCongressByEditionController:t}=fR();await t.handle(o,e)});pe.put("/:id",(o,e,t)=>{tr.authenticated(o,e,t)},async(o,e)=>{let{updateRegionalCongressController:t}=yR();await t.handle(o,e)});pe.delete("/:id",(o,e,t)=>{tr.authenticated(o,e,t)},async(o,e)=>{let{deleteRegionalCongressController:t}=hR();await t.handle(o,e)});pe.post("/:congressId/gallery",(o,e,t)=>{tr.authenticated(o,e,t)},K.single("image"),async(o,e)=>{let{createRegionalCongressGalleryController:t}=tR();await t.handle(o,e)});pe.get("/:congressId/gallery",async(o,e)=>{let{findRegionalCongressGalleriesByCongressIdController:t}=oR();await t.handle(o,e)});pe.get("/gallery/:id",async(o,e)=>{let{findRegionalCongressGalleryByIdController:t}=iR();await t.handle(o,e)});pe.put("/gallery/:id",(o,e,t)=>{tr.authenticated(o,e,t)},K.single("image"),async(o,e)=>{let{updateRegionalCongressGalleryController:t}=nR();await t.handle(o,e)});pe.delete("/gallery/:id",(o,e,t)=>{tr.authenticated(o,e,t)},async(o,e)=>{let{deleteRegionalCongressGalleryController:t}=sR();await t.handle(o,e)});pe.post("/:congressId/partner",(o,e,t)=>{tr.authenticated(o,e,t)},K.single("logo"),async(o,e)=>{let{createRegionalCongressPartnerController:t}=aR();await t.handle(o,e)});pe.get("/:congressId/partner",async(o,e)=>{let{findRegionalCongressPartnersByCongressIdController:t}=mR();await t.handle(o,e)});pe.get("/partner/:id",async(o,e)=>{let{findRegionalCongressPartnerByIdController:t}=cR();await t.handle(o,e)});pe.put("/partner/:id",(o,e,t)=>{tr.authenticated(o,e,t)},K.single("logo"),async(o,e)=>{let{updateRegionalCongressPartnerController:t}=pR();await t.handle(o,e)});pe.delete("/partner/:id",(o,e,t)=>{tr.authenticated(o,e,t)},async(o,e)=>{let{deleteRegionalCongressPartnerController:t}=dR();await t.handle(o,e)});import{Router as Ej}from"express";import{extendZodWithOpenApi as bj}from"@asteasolutions/zod-to-openapi";import Pe from"zod";var Cj=5,RR=1024,wj=RR*RR,Sj=Cj*wj;bj(Pe);var vj=Pe.object({name:Pe.string().min(1,"Nome \xE9 obrigat\xF3rio."),acronym:Pe.string().optional(),description:Pe.string().optional(),url:Pe.url("URL deve ser v\xE1lida.").optional(),foundedAt:Pe.coerce.date(),scope:Pe.string().optional(),email:Pe.email("E-mail deve ser v\xE1lido.").optional(),leaderId:Pe.uuid("L\xEDder \xE9 obrigat\xF3rio."),deputyLeaderId:Pe.uuid("Vice-l\xEDder \xE9 obrigat\xF3rio."),logo:Pe.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=Sj,"O logo deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.").optional()}),ba=class{constructor(e,t){this.researchGroupRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{name:r,acronym:i,description:n,url:s,foundedAt:m,scope:c,email:d,leaderId:R,deputyLeaderId:E,logo:q}=vj.parse({...e.body,logo:e.file}),Y=await this.researchGroupRepository.create({name:r,acronym:i,description:n,url:s,foundedAt:m,scope:c,email:d,leaderId:R,deputyLeaderId:E});if(q){let re=await this.firebaseStorageService.uploadFile({file:q,folder:M.RESEARCH_GROUP_LOGO,id:Y.id});await this.researchGroupRepository.update({id:Y.id,logoUrl:re})}return t.sendStatus(201)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var Ca=class{constructor(e){this.prisma=e}async create({name:e,acronym:t,description:r,url:i,logoUrl:n,foundedAt:s,scope:m,email:c,leaderId:d,deputyLeaderId:R}){return await this.prisma.researchGroup.create({data:{name:e,acronym:t,description:r,url:i,logoUrl:n,foundedAt:s,scope:m,email:c,leaderId:d,deputyLeaderId:R}})}async find({pagination:{offset:e,limit:t},filter:{name:r,acronym:i,description:n,leader:s,orderBy:m}}){let c={},d=[];return r&&d.push({name:{contains:r,mode:"insensitive"}}),i&&d.push({acronym:{contains:i,mode:"insensitive"}}),n&&d.push({description:{contains:n,mode:"insensitive"}}),s&&d.push({leader:{name:{contains:s,mode:"insensitive"}}}),d.length>0&&(c.OR=d),await this.prisma.researchGroup.findMany({where:c,include:{leader:{omit:{passwordHash:!0}},deputyLeader:{omit:{passwordHash:!0}}},orderBy:{updatedAt:m},skip:e,take:t})}async findById(e){return await this.prisma.researchGroup.findFirst({where:{id:e},include:{leader:{omit:{passwordHash:!0}},deputyLeader:{omit:{passwordHash:!0}}}})}async update({id:e,name:t,acronym:r,description:i,url:n,logoUrl:s,foundedAt:m,scope:c,email:d,leaderId:R,deputyLeaderId:E}){await this.prisma.researchGroup.update({where:{id:e},data:{name:t,acronym:r,description:i,url:n,logoUrl:s,foundedAt:m,scope:c,email:d,leaderId:R,deputyLeaderId:E}})}async deleteById(e){await this.prisma.researchGroup.delete({where:{id:e}})}async count({filter:{name:e,acronym:t,description:r,leader:i}}){let n={},s=[];return e&&s.push({name:{contains:e,mode:"insensitive"}}),t&&s.push({acronym:{contains:t,mode:"insensitive"}}),r&&s.push({description:{contains:r,mode:"insensitive"}}),i&&s.push({leader:{name:{contains:i,mode:"insensitive"}}}),s.length>0&&(n.OR=s),await this.prisma.researchGroup.count({where:n})}};function Bt(){return new Ca(O)}function IR(){return{createResearchGroupController:new ba(Bt(),F())}}function bR(){return{findResearchGroupsController:new Jn(Bt())}}function CR(){return{findResearchGroupByIdController:new Kn(Bt())}}function wR(){return{updateResearchGroupController:new Yn(Bt(),F())}}function SR(){return{deleteResearchGroupController:new Zn(Bt(),F())}}var Yr=Ej(),{authMiddleware:po}=Z();Yr.post("/",(o,e,t)=>{po.isAdmin(o,e,t)},K.single("logo"),async(o,e)=>{let{createResearchGroupController:t}=IR();await t.handle(o,e)});Yr.get("/",(o,e,t)=>{po.isAdmin(o,e,t)},async(o,e)=>{let{findResearchGroupsController:t}=bR();await t.handle(o,e)});Yr.get("/:id",(o,e,t)=>{po.isAdmin(o,e,t)},async(o,e)=>{let{findResearchGroupByIdController:t}=CR();await t.handle(o,e)});Yr.put("/:id",(o,e,t)=>{po.isAdmin(o,e,t)},K.single("logo"),async(o,e)=>{let{updateResearchGroupController:t}=wR();await t.handle(o,e)});Yr.delete("/:id",(o,e,t)=>{po.isAdmin(o,e,t)},async(o,e)=>{let{deleteResearchGroupController:t}=SR();await t.handle(o,e)});import{Router as Aj}from"express";import{extendZodWithOpenApi as jj}from"@asteasolutions/zod-to-openapi";import ye from"zod";var xj=1,Mj=9;jj(ye);var Pj=ye.object({page:ye.coerce.number().min(1).default(xj),limit:ye.coerce.number().min(1).default(Mj),userId:ye.string().optional(),registrationNumber:ye.string().optional(),name:ye.string().optional(),emailAddress:ye.string().optional(),mainEtps:ye.string().optional(),formations:ye.string().optional(),occupations:ye.string().optional(),institutions:ye.string().optional(),biography:ye.string().optional(),orderBy:ye.enum(["asc","desc"]).default("desc")}),wa=class{constructor(e){this.researcherRepository=e}async handle(e,t){try{let{page:r,limit:i,...n}=Pj.parse(e.query),s=i*r-i,[m,c]=await Promise.all([this.researcherRepository.find({pagination:{offset:s,limit:i},filter:{userName:n.name,...n}}),this.researcherRepository.count({filter:{userName:n.name,...n}})]),d=Math.max(Math.ceil(c/i),1);t.status(200).json({page:r,totalPages:d,offset:s,limit:i,researchers:m})}catch(r){if(r instanceof Error)throw new a(r.message)}}};var Sa=class{constructor(e){this.prisma=e}async create(e){await this.prisma.researcher.create({data:e})}async update(e){await this.prisma.researcher.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.researcher.delete({where:{id:e}})}async find({pagination:e,filter:{biography:t,degrees:r,formations:i,institutions:n,mainEtps:s,occupations:m,orderBy:c,registrationNumber:d,seniority:R,userId:E,userName:q}}){let Y={},re=[];return q&&re.push({user:{name:{contains:q,mode:"insensitive"}}}),d&&re.push({registrationNumber:{contains:d,mode:"insensitive"}}),s&&re.push({mainEtps:{contains:s,mode:"insensitive"}}),i&&re.push({formations:{contains:i,mode:"insensitive"}}),m&&re.push({occupations:{contains:m,mode:"insensitive"}}),n&&re.push({institutions:{contains:n,mode:"insensitive"}}),t&&re.push({biography:{contains:t,mode:"insensitive"}}),re.length>0&&(Y.OR=re),r&&r.length>0&&(Y.degrees={hasSome:r}),R&&(Y.seniority=R),E&&(Y.userId={equals:E}),await this.prisma.researcher.findMany({where:Y,omit:{userId:!0},include:{user:{omit:{passwordHash:!0}}},orderBy:{updatedAt:c},...e&&{skip:e.offset,take:e.limit}})}async findById(e){return await this.prisma.researcher.findFirst({where:{id:e},include:{user:{omit:{passwordHash:!0}}}})}async findByUserId(e){return await this.prisma.researcher.findFirst({where:{userId:e},include:{user:{omit:{passwordHash:!0}}}})}async findByRegistrationNumber(e){return await this.prisma.researcher.findFirst({where:{registrationNumber:e},include:{user:{omit:{passwordHash:!0}}}})}async count({filter:{biography:e,degrees:t,formations:r,institutions:i,mainEtps:n,occupations:s,registrationNumber:m,seniority:c,userId:d,userName:R}}){let E={},q=[];return R&&q.push({user:{name:{contains:R,mode:"insensitive"}}}),m&&q.push({registrationNumber:{contains:m,mode:"insensitive"}}),q.length>0&&(E.OR=q),n&&(E.mainEtps={contains:n,mode:"insensitive"}),r&&(E.formations={contains:r,mode:"insensitive"}),t&&t.length>0&&(E.degrees={hasSome:t}),s&&(E.occupations={contains:s,mode:"insensitive"}),c&&(E.seniority=c),i&&(E.institutions={contains:i,mode:"insensitive"}),e&&(E.biography={contains:e,mode:"insensitive"}),d&&(E.userId={equals:d}),await this.prisma.researcher.count({where:E})}};function Xr(){return new Sa(O)}function vR(){return{createResearcherController:new Xn(Xr())}}function ER(){return{findResearchersController:new wa(Xr())}}function jR(){return{findResearcherByIdController:new Qn(Xr())}}function xR(){return{findResearcherByUserIdController:new rs(Xr())}}function MR(){return{updateResearcherController:new ts(Xr())}}function PR(){return{deleteResearcherController:new $n(Xr())}}var jr=Aj(),{authMiddleware:Bd}=Z();jr.post("/",(o,e,t)=>{Bd.authenticated(o,e,t)},async(o,e)=>{let{createResearcherController:t}=vR();await t.handle(o,e)});jr.get("/",async(o,e)=>{let{findResearchersController:t}=ER();await t.handle(o,e)});jr.get("/:id",async(o,e)=>{let{findResearcherByIdController:t}=jR();await t.handle(o,e)});jr.get("/user/:userId",async(o,e)=>{let{findResearcherByUserIdController:t}=xR();await t.handle(o,e)});jr.put("/:id",(o,e,t)=>{Bd.authenticated(o,e,t)},async(o,e)=>{let{updateResearcherController:t}=MR();await t.handle(o,e)});jr.delete("/:id",(o,e,t)=>{Bd.authenticated(o,e,t)},async(o,e)=>{let{deleteResearcherController:t}=PR();await t.handle(o,e)});import{Router as Fj}from"express";import{extendZodWithOpenApi as Tj}from"@asteasolutions/zod-to-openapi";import de from"zod";Tj(de);var Dj=de.object({title:de.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),author:de.string().min(1,"Autor \xE9 obrigat\xF3rio."),journal:de.string().optional(),volume:de.string().optional(),edition:de.string().optional(),pageStart:de.coerce.number().optional(),pageEnd:de.coerce.number().optional(),startDate:de.coerce.date(),endDate:de.coerce.date(),city:de.string().optional(),state:de.string().optional(),country:de.string().optional(),publisher:de.string().optional(),description:de.string().optional(),year:de.coerce.number().optional(),accessUrl:de.url().optional()}),va=class{constructor(e){this.scientificArticlesRepository=e}async handle(e,t){try{let{title:r,author:i,journal:n,volume:s,edition:m,pageStart:c,pageEnd:d,startDate:R,endDate:E,city:q,state:Y,country:re,publisher:ue,description:ke,year:Wt,accessUrl:Ua}=Dj.parse(e.body);return await this.scientificArticlesRepository.create({title:r,author:i,journal:n,volume:s,edition:m,pageStart:c,pageEnd:d,startDate:R,endDate:E,city:q,state:Y,country:re,publisher:ue,description:ke,year:Wt,accessUrl:Ua}),t.sendStatus(201)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var Ea=class{constructor(e){this.prisma=e}async create({title:e,author:t,journal:r,volume:i,edition:n,pageStart:s,pageEnd:m,startDate:c,endDate:d,city:R,state:E,country:q,publisher:Y,description:re,year:ue,accessUrl:ke}){return await this.prisma.scientificArticle.create({data:{title:e,author:t,journal:r,volume:i,edition:n,pageStart:s,pageEnd:m,startDate:c,endDate:d,city:R,state:E,country:q,publisher:Y,description:re,year:ue,accessUrl:ke}})}async find({pagination:{offset:e,limit:t},filter:{title:r,author:i,journal:n,orderBy:s}}){let m={},c=[];return r&&c.push({title:{contains:r,mode:"insensitive"}}),i&&c.push({author:{contains:i,mode:"insensitive"}}),n&&c.push({journal:{contains:n,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.scientificArticle.findMany({where:m,orderBy:{updatedAt:s},skip:e,take:t})}async findById(e){return await this.prisma.scientificArticle.findFirst({where:{id:e}})}async update({id:e,title:t,author:r,journal:i,volume:n,edition:s,pageStart:m,pageEnd:c,startDate:d,endDate:R,city:E,state:q,country:Y,publisher:re,description:ue,year:ke,accessUrl:Wt}){await this.prisma.scientificArticle.update({where:{id:e},data:{title:t,author:r,journal:i,volume:n,edition:s,pageStart:m,pageEnd:c,startDate:d,endDate:R,city:E,state:q,country:Y,publisher:re,description:ue,year:ke,accessUrl:Wt}})}async deleteById(e){await this.prisma.scientificArticle.delete({where:{id:e}})}async count({filter:{title:e,author:t,journal:r}}){let i={},n=[];return e&&n.push({title:{contains:e,mode:"insensitive"}}),t&&n.push({author:{contains:t,mode:"insensitive"}}),r&&n.push({journal:{contains:r,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.scientificArticle.count({where:i})}};function qt(){return new Ea(O)}function AR(){return{createScientificArticleController:new va(qt())}}function TR(){return{findScientificArticlesController:new ns(qt())}}function DR(){return{findScientificArticleByIdController:new is(qt())}}function FR(){return{updateScientificArticleController:new ss(qt())}}function BR(){return{deleteScientificArticleController:new os(qt())}}var $r=Fj(),{authMiddleware:lo}=Z();$r.post("/",(o,e,t)=>{lo.isAdmin(o,e,t)},async(o,e)=>{let{createScientificArticleController:t}=AR();await t.handle(o,e)});$r.get("/",(o,e,t)=>{lo.isAdmin(o,e,t)},async(o,e)=>{let{findScientificArticlesController:t}=TR();await t.handle(o,e)});$r.get("/:id",(o,e,t)=>{lo.isAdmin(o,e,t)},async(o,e)=>{let{findScientificArticleByIdController:t}=DR();await t.handle(o,e)});$r.put("/:id",(o,e,t)=>{lo.isAdmin(o,e,t)},async(o,e)=>{let{updateScientificArticleController:t}=FR();await t.handle(o,e)});$r.delete("/:id",(o,e,t)=>{lo.isAdmin(o,e,t)},async(o,e)=>{let{deleteScientificArticleController:t}=BR();await t.handle(o,e)});import{Router as Gj}from"express";import{extendZodWithOpenApi as Bj}from"@asteasolutions/zod-to-openapi";import or from"zod";var qj=5,qR=1024,Uj=qR*qR,kj=qj*Uj;Bj(or);var Oj=or.object({name:or.string().min(1,"Nome \xE9 obrigat\xF3rio."),issn:or.string().min(1,"ISSN \xE9 obrigat\xF3rio."),description:or.string().min(1,"Descri\xE7\xE3o \xE9 obrigat\xF3ria."),journalUrl:or.url("URL da revista deve ser v\xE1lida."),directors:or.string().optional(),editorialBoard:or.string().optional(),logo:or.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=kj,"O logo deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.").optional()}),ja=class{constructor(e,t){this.scientificJournalRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{name:r,issn:i,description:n,journalUrl:s,directors:m,editorialBoard:c,logo:d}=Oj.parse({...e.body,logo:e.file}),R=await this.scientificJournalRepository.create({name:r,issn:i,description:n,journalUrl:s,directors:m,editorialBoard:c});if(d){let E=await this.firebaseStorageService.uploadFile({file:d,folder:M.SCIENTIFIC_JOURNAL,id:R.id});await this.scientificJournalRepository.update({id:R.id,logoUrl:E})}return t.sendStatus(201)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var xa=class{constructor(e){this.prisma=e}async create({name:e,issn:t,description:r,logoUrl:i,journalUrl:n,directors:s,editorialBoard:m}){return await this.prisma.scientificJournal.create({data:{name:e,issn:t,description:r,logoUrl:i,journalUrl:n,directors:s,editorialBoard:m}})}async find({pagination:{offset:e,limit:t},filter:{name:r,description:i,issn:n,directors:s,editorialBoard:m,orderBy:c}}){let d={},R=[];return r&&R.push({name:{contains:r,mode:"insensitive"}}),i&&R.push({description:{contains:i,mode:"insensitive"}}),n&&R.push({issn:{contains:n,mode:"insensitive"}}),s&&R.push({directors:{contains:s,mode:"insensitive"}}),m&&R.push({editorialBoard:{contains:m,mode:"insensitive"}}),R.length>0&&(d.OR=R),await this.prisma.scientificJournal.findMany({where:d,orderBy:{updatedAt:c},skip:e,take:t})}async findById(e){return await this.prisma.scientificJournal.findFirst({where:{id:e}})}async update({id:e,name:t,issn:r,description:i,logoUrl:n,journalUrl:s,directors:m,editorialBoard:c}){await this.prisma.scientificJournal.update({where:{id:e},data:{name:t,issn:r,description:i,logoUrl:n,journalUrl:s,directors:m,editorialBoard:c}})}async deleteById(e){await this.prisma.scientificJournal.delete({where:{id:e}})}async count({filter:{name:e,description:t,issn:r,directors:i,editorialBoard:n}}){let s={},m=[];return e&&m.push({name:{contains:e,mode:"insensitive"}}),t&&m.push({description:{contains:t,mode:"insensitive"}}),r&&m.push({issn:{contains:r,mode:"insensitive"}}),i&&m.push({directors:{contains:i,mode:"insensitive"}}),n&&m.push({editorialBoard:{contains:n,mode:"insensitive"}}),m.length>0&&(s.OR=m),await this.prisma.scientificJournal.count({where:s})}};function Ut(){return new xa(O)}function UR(){return{createScientificJournalController:new ja(Ut(),F())}}function kR(){return{findScientificJournalsController:new cs(Ut())}}function OR(){return{findScientificJournalByIdController:new ms(Ut())}}function GR(){return{updateScientificJournalController:new ps(Ut(),F())}}function NR(){return{deleteScientificJournalController:new as(Ut(),F())}}var Qr=Gj(),{authMiddleware:uo}=Z();Qr.post("/",(o,e,t)=>{uo.isAdmin(o,e,t)},K.single("logo"),async(o,e)=>{let{createScientificJournalController:t}=UR();await t.handle(o,e)});Qr.get("/",(o,e,t)=>{uo.isAdmin(o,e,t)},async(o,e)=>{let{findScientificJournalsController:t}=kR();await t.handle(o,e)});Qr.get("/:id",(o,e,t)=>{uo.isAdmin(o,e,t)},async(o,e)=>{let{findScientificJournalByIdController:t}=OR();await t.handle(o,e)});Qr.put("/:id",(o,e,t)=>{uo.isAdmin(o,e,t)},K.single("logo"),async(o,e)=>{let{updateScientificJournalController:t}=GR();await t.handle(o,e)});Qr.delete("/:id",(o,e,t)=>{uo.isAdmin(o,e,t)},async(o,e)=>{let{deleteScientificJournalController:t}=NR();await t.handle(o,e)});import{Router as Wj}from"express";import{extendZodWithOpenApi as Nj}from"@asteasolutions/zod-to-openapi";import Ma from"zod";Nj(Ma);var Lj=Ma.object({role:Ma.string().optional(),orderBy:Ma.enum(["asc","desc"]).optional()}),Pa=class{constructor(e){this.sdhcTeamMemberRepository=e}async handle(e,t){try{let r=Lj.parse(e.query),i=await this.sdhcTeamMemberRepository.find({filter:r});t.status(200).json({members:i})}catch(r){if(r instanceof Error)throw new a(r.message)}}};var Aa=class{constructor(e){this.prisma=e}async create(e){await this.prisma.sDHCTeamMember.create({data:{...e,order:e.order??0}})}async update(e){let{id:t,...r}=e;await this.prisma.sDHCTeamMember.update({where:{id:t},data:r})}async deleteById(e){await this.prisma.sDHCTeamMember.delete({where:{id:e}})}async find({filter:{role:e,orderBy:t}}){let r={};return e&&(r.role={contains:e,mode:"insensitive"}),await this.prisma.sDHCTeamMember.findMany({where:r,include:{user:{omit:{passwordHash:!0}}},orderBy:t?[{order:"asc"},{updatedAt:t}]:[{order:"asc"},{updatedAt:"desc"}]})}async findById(e){return await this.prisma.sDHCTeamMember.findFirst({where:{id:e},include:{user:{omit:{passwordHash:!0}}}})}async count({filter:{role:e}}){let t={};return e&&(t.role={contains:e,mode:"insensitive"}),await this.prisma.sDHCTeamMember.count({where:t})}};function kt(){return new Aa(O)}function LR(){return{createSDHCTeamMemberController:new ds(kt())}}function WR(){return{findSDHCTeamMembersController:new Pa(kt())}}function _R(){return{findSDHCTeamMemberByIdController:new us(kt())}}function zR(){return{updateSDHCTeamMemberController:new fs(kt())}}function HR(){return{deleteSDHCTeamMemberController:new ls(kt())}}var et=Wj(),{authMiddleware:qd}=Z();et.post("/",(o,e,t)=>{qd.authenticated(o,e,t)},async(o,e)=>{let{createSDHCTeamMemberController:t}=LR();await t.handle(o,e)});et.get("/",async(o,e)=>{let{findSDHCTeamMembersController:t}=WR();await t.handle(o,e)});et.get("/:id",async(o,e)=>{let{findSDHCTeamMemberByIdController:t}=_R();await t.handle(o,e)});et.put("/:id",(o,e,t)=>{qd.authenticated(o,e,t)},async(o,e)=>{let{updateSDHCTeamMemberController:t}=zR();await t.handle(o,e)});et.delete("/:id",(o,e,t)=>{qd.authenticated(o,e,t)},async(o,e)=>{let{deleteSDHCTeamMemberController:t}=HR();await t.handle(o,e)});import{Router as _j}from"express";var Ta=class{constructor(e){this.userRepository=e}async handle(e,t){try{let r=await this.userRepository.find();t.status(200).json(r)}catch(r){if(r instanceof Error)throw new a(r.message)}}};function VR(){return{updateUserController:new Rs(Ie(),F())}}function ZR(){return{deleteUserController:new ys(Ie())}}function KR(){return{findUsersController:new Ta(Ie())}}function JR(){return{findUserController:new hs(Ie())}}var Ot=_j(),{authMiddleware:YR}=Z();Ot.get("/:id",async(o,e)=>{let{findUserController:t}=JR();await t.handle(o,e)});Ot.put("/",(o,e,t)=>{YR.authenticated(o,e,t)},K.single("avatarImage"),async(o,e)=>{let{updateUserController:t}=VR();await t.handle(o,e)});Ot.delete("/:id",(o,e,t)=>{YR.authenticated(o,e,t)},async(o,e)=>{let{deleteUserController:t}=ZR();await t.handle(o,e)});Ot.get("/",async(o,e)=>{let{findUsersController:t}=KR();await t.handle(o,e)});import{Router as Jj}from"express";import{extendZodWithOpenApi as zj}from"@asteasolutions/zod-to-openapi";import ze from"zod";var Hj=5,XR=1024,Vj=XR*XR,Zj=Hj*Vj;zj(ze);var Kj=ze.object({title:ze.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),description:ze.string().optional(),scheduledAt:ze.coerce.date(),webinarLink:ze.url().optional(),guestIds:ze.transform(o=>typeof o=="string"?o.split(","):o).pipe(ze.array(ze.uuid())),thumbnail:ze.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=Zj,"A thumbnail deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.")}),Da=class{constructor(e,t){this.webinarRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{title:r,description:i,scheduledAt:n,webinarLink:s,guestIds:m,thumbnail:c}=Kj.parse({...e.body,thumbnail:e.file}),d=await this.webinarRepository.create({title:r,description:i,scheduledAt:n,webinarLink:s||void 0,guestIds:m}),R=await this.firebaseStorageService.uploadFile({file:c,folder:M.WEBINAR,id:d.id});return await this.webinarRepository.update({id:d.id,thumbnailUrl:R}),t.sendStatus(201)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var Fa=class{constructor(e){this.prisma=e}async create({title:e,description:t,scheduledAt:r,webinarLink:i,thumbnailUrl:n,guestIds:s}){return await this.prisma.webinar.create({data:{title:e,description:t,scheduledAt:r,webinarLink:i,thumbnailUrl:n,guests:s?{connect:s.map(m=>({id:m}))}:void 0}})}async find({pagination:{offset:e,limit:t},filter:{description:r,orderBy:i,title:n}}){let s={},m=[];return n&&m.push({title:{contains:n,mode:"insensitive"}}),r&&m.push({description:{contains:r,mode:"insensitive"}}),m.length>0&&(s.OR=m),await this.prisma.webinar.findMany({where:s,include:{guests:{omit:{passwordHash:!0}}},orderBy:{updatedAt:i},skip:e,take:t})}async findById(e){return await this.prisma.webinar.findFirst({where:{id:e},include:{guests:{omit:{passwordHash:!0}}}})}async update({id:e,title:t,description:r,scheduledAt:i,webinarLink:n,thumbnailUrl:s,guestIds:m}){await this.prisma.webinar.update({where:{id:e},data:{title:t,description:r,scheduledAt:i,webinarLink:n,thumbnailUrl:s,guests:m?{connect:m.map(c=>({id:c}))}:void 0}})}async deleteById(e){await this.prisma.webinar.delete({where:{id:e}})}async count({filter:{description:e,title:t}}){let r={},i=[];return t&&i.push({title:{contains:t,mode:"insensitive"}}),e&&i.push({description:{contains:e,mode:"insensitive"}}),i.length>0&&(r.OR=i),await this.prisma.webinar.count({where:r})}};function Gt(){return new Fa(O)}function $R(){return{createWebinarController:new Da(Gt(),F())}}function QR(){return{findWebinarsController:new Cs(Gt())}}function eI(){return{findWebinarByIdController:new bs(Gt())}}function rI(){return{updateWebinarController:new ws(Gt(),F())}}function tI(){return{deleteWebinarController:new Is(Gt(),F())}}var rt=Jj(),{authMiddleware:go}=Z();rt.post("/",(o,e,t)=>{go.isAdmin(o,e,t)},K.single("thumbnail"),async(o,e)=>{let{createWebinarController:t}=$R();await t.handle(o,e)});rt.get("/",(o,e,t)=>{go.isAdmin(o,e,t)},async(o,e)=>{let{findWebinarsController:t}=QR();await t.handle(o,e)});rt.get("/:id",(o,e,t)=>{go.isAdmin(o,e,t)},async(o,e)=>{let{findWebinarByIdController:t}=eI();await t.handle(o,e)});rt.put("/:id",(o,e,t)=>{go.isAdmin(o,e,t)},K.single("thumbnail"),async(o,e)=>{let{updateWebinarController:t}=rI();await t.handle(o,e)});rt.delete("/:id",(o,e,t)=>{go.isAdmin(o,e,t)},async(o,e)=>{let{deleteWebinarController:t}=tI();await t.handle(o,e)});import{Router as ex}from"express";import{extendZodWithOpenApi as Yj}from"@asteasolutions/zod-to-openapi";import Nt from"zod";var Xj=1,$j=7;Yj(Nt);var Qj=Nt.object({page:Nt.coerce.number().min(1).default(Xj),limit:Nt.coerce.number().min(1).default($j),role:Nt.string().optional(),orderBy:Nt.enum(["asc","desc"]).optional()}),Ba=class{constructor(e){this.workGroupTeamMemberRepository=e}async handle(e,t){try{let{page:r,limit:i,...n}=Qj.parse(e.query),s=i*r-i,[m,c]=await Promise.all([this.workGroupTeamMemberRepository.find({pagination:{offset:s,limit:i},filter:n}),this.workGroupTeamMemberRepository.count({filter:n})]),d=Math.max(Math.ceil(c/i),1);t.status(200).json({page:r,totalPages:d,offset:s,limit:i,members:m})}catch(r){if(r instanceof Error)throw new a(r.message)}}};var qa=class{constructor(e){this.prisma=e}async create(e){await this.prisma.workGroupTeamMember.create({data:{...e}})}async update(e){let{id:t,...r}=e;await this.prisma.workGroupTeamMember.update({where:{id:t},data:r})}async deleteById(e){await this.prisma.workGroupTeamMember.delete({where:{id:e}})}async find({pagination:e,filter:{role:t,orderBy:r}}){let i={};return t&&(i.role={contains:t,mode:"insensitive"}),await this.prisma.workGroupTeamMember.findMany({where:i,include:{user:{omit:{passwordHash:!0}}},orderBy:{updatedAt:r??"desc"},...e&&{skip:e.offset,take:e.limit}})}async findById(e){return await this.prisma.workGroupTeamMember.findFirst({where:{id:e},include:{user:{omit:{passwordHash:!0}}}})}async count({filter:{role:e}}){let t={};return e&&(t.role={contains:e,mode:"insensitive"}),await this.prisma.workGroupTeamMember.count({where:t})}};function Lt(){return new qa(O)}function oI(){return{createWorkGroupTeamMemberController:new Ss(Lt())}}function iI(){return{findWorkGroupTeamMembersController:new Ba(Lt())}}function nI(){return{findWorkGroupTeamMemberByIdController:new Es(Lt())}}function sI(){return{updateWorkGroupTeamMemberController:new xs(Lt())}}function aI(){return{deleteWorkGroupTeamMemberController:new vs(Lt())}}var tt=ex(),{authMiddleware:Ud}=Z();tt.post("/",(o,e,t)=>{Ud.authenticated(o,e,t)},async(o,e)=>{let{createWorkGroupTeamMemberController:t}=oI();await t.handle(o,e)});tt.get("/",async(o,e)=>{let{findWorkGroupTeamMembersController:t}=iI();await t.handle(o,e)});tt.get("/:id",async(o,e)=>{let{findWorkGroupTeamMemberByIdController:t}=nI();await t.handle(o,e)});tt.put("/:id",(o,e,t)=>{Ud.authenticated(o,e,t)},async(o,e)=>{let{updateWorkGroupTeamMemberController:t}=sI();await t.handle(o,e)});tt.delete("/:id",(o,e,t)=>{Ud.authenticated(o,e,t)},async(o,e)=>{let{deleteWorkGroupTeamMemberController:t}=aI();await t.handle(o,e)});var te=kd(),ox={methods:["GET","POST","PUT","DELETE"],origin:["http://localhost:3000","https://rede-ct.vercel.app"],credentials:!0};te.use(tx(ox));te.use(kd.json());te.use(kd.urlencoded({extended:!1}));te.use("/docs",rx({content:Hf,theme:"kepler"}));te.use("/",bd);te.use("/auth",Xe);te.use("/user",Ot);te.use("/news",vr);te.use("/certification",Ur);te.use("/pendency",Vr);te.use("/researcher",jr);te.use("/in-memoriam",Sr);te.use("/etp",Or);te.use("/partner",Hr);te.use("/management-team",zr);te.use("/sdhc-team-member",et);te.use("/legitimator-committee-member",_r);te.use("/regiment",Er);te.use("/meeting",Me);te.use("/international-scientific-congress",ce);te.use("/regional-congress",pe);te.use("/webinars",rt);te.use("/courses",kr);te.use("/post-graduate-programs",Zr);te.use("/event",Gr);te.use("/scientific-journals",Qr);te.use("/book-volumes",qr);te.use("/scientific-articles",$r);te.use("/work-group-team-member",tt);te.use("/reference-center-team-member",Kr);te.use("/law",Wr);te.use("/research-groups",Yr);te.use((o,e,t,r)=>{let{errorHandler:i}=Od();i.handle(o,e,t,r)});var nx=ix.createServer(te),mI=4e3;nx.listen(mI,()=>{console.log(`\u{1F680} Aplica\xE7\xE3o rodando na porta ${mI}.`)});

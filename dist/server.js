import Xx from"node:http";import{apiReference as Kx}from"@scalar/express-api-reference";import Jx from"cors";import ol from"express";import VI from"zod";var ye=class extends Error{};var ce=class extends Error{};var a=class extends Error{};var p=class extends Error{};var je=class extends Error{};import{ZodError as HI}from"zod";var Co=class extends HI{};var wo=class{handle(e,t,r,i){return e instanceof Co?r.status(400).json({message:"Validation error",error:VI.treeifyError(e)}):e instanceof ye?r.status(400).json({message:e.message}):e instanceof p?r.status(404).json({message:e.message}):e instanceof je?r.status(401).json({message:e.message}):e instanceof ce?r.status(409).json({message:e.message}):e instanceof a?r.status(500).json({message:e.message}):r.status(500).json({message:"Internal server error"})}};function il(){return{errorHandler:new wo}}import{OpenAPIRegistry as GE,OpenApiGeneratorV3 as NE}from"@asteasolutions/zod-to-openapi";import{$Enums as nl}from"@prisma/client";import b from"zod";import{extendZodWithOpenApi as ZI}from"@asteasolutions/zod-to-openapi";import Tr from"zod";var KI=1,JI=6;ZI(Tr);var Ya=Tr.object({page:Tr.coerce.number().min(1).default(KI),limit:Tr.coerce.number().min(1).default(JI),title:Tr.string().optional(),description:Tr.string().optional(),orderBy:Tr.enum(["asc","desc"]).default("desc")}),So=class{constructor(e){this.certificationRepository=e}async handle(e,t){try{let{title:r,description:i,limit:n,orderBy:s,page:m}=Ya.parse(e.query),c=m*n-n,d=e.user.id,[h,E]=await Promise.all([this.certificationRepository.findByUserId({userId:d,pagination:{offset:c,limit:n},filter:{title:r,description:i,orderBy:s}}),this.certificationRepository.count({filter:{title:r,description:i,userId:d}})]),F=Math.max(Math.ceil(E/n),1);return t.status(200).json({page:m,totalPages:F,offset:c,limit:n,totalCertifications:E,certifications:h})}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as YI}from"@asteasolutions/zod-to-openapi";import Dr from"zod";var XI=1,$I=7;YI(Dr);var Xa=Dr.object({page:Dr.coerce.number().min(1).default(XI),limit:Dr.coerce.number().min(1).default($I),title:Dr.string().optional(),content:Dr.string().optional(),orderBy:Dr.enum(["asc","desc"]).default("desc")}),vo=class{constructor(e){this.newsRepository=e}async handle(e,t){try{let{page:r,limit:i,content:n,orderBy:s,title:m}=Xa.parse(e.query),c=i*r-i,d=e.user.id,[h,E]=await Promise.all([this.newsRepository.findByAuthorId({authorId:d,pagination:{offset:c,limit:i},filter:{orderBy:s,title:m,content:n}}),this.newsRepository.count({filter:{authorId:d,content:n,title:m}})]),F=Math.ceil(E/i);t.status(200).json({page:r,totalPages:F,offset:c,limit:i,news:h})}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as QI}from"@asteasolutions/zod-to-openapi";import{PendencyStatus as eb}from"@prisma/client";import mr from"zod";var rb=1,tb=6;QI(mr);var $a=mr.object({page:mr.coerce.number().min(1).default(rb),limit:mr.coerce.number().min(1).default(tb),title:mr.string().optional(),description:mr.string().optional(),status:mr.enum(eb).default("PENDING"),orderBy:mr.enum(["asc","desc"]).default("desc")}),Eo=class{constructor(e){this.pendencyRepository=e}async handle(e,t){try{let{limit:r,page:i,...n}=$a.parse(e.query),s=i*r-r,m=e.user.id,[c,d]=await Promise.all([this.pendencyRepository.findByUserId({userId:m,pagination:{offset:s,limit:r},filter:n}),this.pendencyRepository.count({filter:{...n,userId:m}})]),h=Math.max(Math.ceil(d/r),1);return t.status(200).json({page:i,totalPages:h,offset:s,limit:r,pendencies:c})}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as ob}from"@asteasolutions/zod-to-openapi";import jo from"zod";ob(jo);var Qa=jo.object({password:jo.string(),email:jo.email()}),xo=class{constructor(e,t,r){this.userRepository=e;this.bcrypt=t;this.jwtService=r}async handle(e,t){try{let{email:r,password:i}=Qa.parse(e.body),n=await this.userRepository.findByEmail(r);if(!n)return t.status(401).json({message:"Usu\xE1rio n\xE3o existe."});if(!await this.bcrypt.compare({password:i,hashedPassword:n.passwordHash}))throw new je("Senha inv\xE1lida.");let{id:m,role:c}=n,d=this.jwtService.sign({id:m,role:c,email:r});return t.status(200).json({token:d})}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as ib}from"@asteasolutions/zod-to-openapi";import mt from"zod";var Mo=8;ib(mt);var em=mt.object({name:mt.string("Nome \xE9 obrigat\xF3rio.").min(1,"Nome \xE9 obrigat\xF3rio."),emailAddress:mt.email("E-mail inv\xE1lido.").min(1,"E-mail \xE9 obrigat\xF3rio."),password:mt.string("A senha \xE9 obrigat\xF3ria.").min(Mo,`A senha deve ter pelo menos ${Mo} caracteres.`),confirmPassword:mt.string("A senha \xE9 obrigat\xF3ria.").min(Mo,`A senha deve ter pelo menos ${Mo} caracteres.`)}).refine(o=>o.password===o.confirmPassword,{message:"As senhas n\xE3o coincidem.",path:["confirmPassword"]}),Ao=class{constructor(e,t){this.userRepository=e;this.bcrypt=t}async handle(e,t){try{let{emailAddress:r,name:i,password:n}=em.parse(e.body);if(await this.userRepository.findByEmail(r))throw new ce("Usu\xE1rio j\xE1 existe.");let m=await this.bcrypt.hash(n);return await this.userRepository.create({name:i,emailAddress:r,passwordHash:m}),t.status(201).json()}catch(r){if(r instanceof Error)throw new a(r.message)}}};var sl={method:"post",path:"/auth/sign-up",tags:["Authentication"],summary:"Create a new user",request:{body:{content:{"application/json":{schema:em}}}},responses:{201:{description:"User created successfully",summary:"User Registration Successful",content:{"application/json":{schema:b.object({message:b.string()})}}},400:{description:"Invalid input data provided",summary:"Validation Error",content:{"application/json":{schema:b.object({errors:b.record(b.string(),b.string())})}}},409:{description:"User already exists with this email",summary:"User Already Exists",content:{"application/json":{schema:b.object({message:b.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:b.object({message:b.string()})}}}}},al={method:"post",path:"/auth/sign-in",tags:["Authentication"],summary:"Sign in",request:{body:{content:{"application/json":{schema:Qa}}}},responses:{200:{description:"Authentication successful, JWT token returned",summary:"Login Successful",content:{"application/json":{schema:b.object({token:b.string()})}}},400:{description:"Invalid credentials or input data",summary:"Validation Error",content:{"application/json":{schema:b.object({errors:b.record(b.string(),b.string())})}}},401:{description:"Invalid email or password",summary:"Authentication Failed",content:{"application/json":{schema:b.object({message:b.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:b.object({message:b.string()})}}}}},ml={method:"get",path:"/auth/user",tags:["Authentication"],summary:"Search for authenticated user",security:[{bearerAuth:[]}],responses:{200:{description:"Authenticated user information retrieved successfully",summary:"User Information Retrieved",content:{"application/json":{schema:b.object({name:b.string(),id:b.string(),avatarUrl:b.string().nullable(),createdAt:b.date(),updatedAt:b.date(),emailAddress:b.string(),orcid:b.string().nullable(),phone:b.string().nullable(),lattesUrl:b.string().nullable(),role:b.enum(nl.UserRole)}).nullable()}}},400:{description:"Invalid request parameters",summary:"Validation Error",content:{"application/json":{schema:b.object({errors:b.record(b.string(),b.string())})}}},404:{description:"User not found or not authenticated",summary:"User Not Found",content:{"application/json":{schema:b.object({message:b.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:b.object({message:b.string()})}}}}},cl={method:"get",path:"/auth/user/news",tags:["Authentication"],summary:"List authenticated user news",security:[{bearerAuth:[]}],request:{query:Xa},responses:{200:{description:"Paginated list of authenticated user news retrieved successfully",summary:"User News Retrieved",content:{"application/json":{schema:b.object({page:b.number(),totalPages:b.number(),offset:b.number(),limit:b.number(),news:b.object({content:b.string(),id:b.string(),title:b.string(),createdAt:b.date(),updatedAt:b.date(),imageUrl:b.string().nullable()})})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:b.object({errors:b.record(b.string(),b.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:b.object({message:b.string()})}}}}},pl={method:"get",path:"/auth/admin",tags:["Authentication"],summary:"Verify admin access",security:[{bearerAuth:[]}],responses:{200:{description:"Admin access verified successfully",summary:"Admin Access Granted",content:{"application/json":{schema:b.object({success:b.boolean()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:b.object({message:b.string()})}}}}},dl={method:"get",path:"/auth/certifications",tags:["Authentication"],summary:"List all authenticated user's certifications",security:[{bearerAuth:[]}],request:{query:Ya},responses:{200:{description:"Paginated list of authenticated user certifications retrieved successfully",summary:"User Certifications Retrieved",content:{"application/json":{schema:b.object({page:b.number(),totalPages:b.number(),offset:b.number(),limit:b.number(),certifications:b.object({description:b.string(),id:b.string(),title:b.string(),certificationUrl:b.string(),createdAt:b.date(),updatedAt:b.date(),userId:b.string()})})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:b.object({errors:b.record(b.string(),b.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:b.object({message:b.string()})}}}}},ll={method:"get",path:"/auth/pendencies",tags:["Authentication"],summary:"List all authenticated user's pendencies",security:[{bearerAuth:[]}],request:{query:$a},responses:{200:{description:"Paginated list of authenticated user pendencies retrieved successfully",summary:"User Pendencies Retrieved",content:{"application/json":{schema:b.object({page:b.number(),totalPages:b.number(),offset:b.number(),limit:b.number(),pendencies:b.object({id:b.string(),title:b.string(),description:b.string(),status:b.enum(nl.PendencyStatus),createdAt:b.date(),updatedAt:b.date(),userId:b.string()})})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:b.object({errors:b.record(b.string(),b.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:b.object({message:b.string()})}}}}};import v from"zod";import{extendZodWithOpenApi as nb}from"@asteasolutions/zod-to-openapi";import rm from"zod";nb(rm);var tm=rm.object({id:rm.uuid()}),Po=class{constructor(e,t){this.bookVolumeRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{id:r}=tm.parse({id:e.params.id}),i=await this.bookVolumeRepository.findById(r);if(!i)throw new p("O volume de livro n\xE3o existe.");return i.authorImageUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.authorImageUrl}),i.coverImageUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.coverImageUrl}),i.catalogSheetUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.catalogSheetUrl}),await this.bookVolumeRepository.deleteById(r),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as sb}from"@asteasolutions/zod-to-openapi";import om from"zod";sb(om);var im=om.object({id:om.uuid()}),To=class{constructor(e){this.bookVolumeRepository=e}async handle(e,t){try{let{id:r}=im.parse({id:e.params.id}),i=await this.bookVolumeRepository.findById(r);if(!i)throw new p("Volume de livro n\xE3o encontrado.");return t.status(200).json(i)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as ab}from"@asteasolutions/zod-to-openapi";import cr from"zod";var mb=1,cb=6;ab(cr);var nm=cr.object({page:cr.coerce.number().min(1).default(mb),limit:cr.coerce.number().min(1).default(cb),title:cr.string().optional(),author:cr.string().optional(),description:cr.string().optional(),orderBy:cr.enum(["asc","desc"]).default("desc")}),Do=class{constructor(e){this.bookVolumeRepository=e}async handle(e,t){try{let{limit:r,page:i,...n}=nm.parse(e.query),s=i*r-r,[m,c]=await Promise.all([this.bookVolumeRepository.find({pagination:{offset:s,limit:r},filter:n}),this.bookVolumeRepository.count({filter:n})]),d=Math.max(Math.ceil(c/r),1);return t.status(200).json({page:i,totalPages:d,offset:s,limit:r,bookVolumes:m})}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as pb}from"@asteasolutions/zod-to-openapi";import xe from"zod";var M={NEWS:"images/news",USER:"images/user",IN_MEMORIAM:"images/in-memoriam",PARTNER:"images/partners",CERTIFICATION:"documents/certifications",PENDENCY:"documents/pendencies",REGIMENT:"documents/regiments",MEETING_MINUTE:"documents/meeting-minutes",INTERNATIONAL_SCIENTIFIC_CONGRESS_GALLERY:"images/international-scientific-congress-gallery",GALLERY:"images/regional-congress-gallery",REGIONAL_CONGRESS_GALLERY:"images/regional-congress-gallery",WEBINAR:"images/webinars",COURSE:"images/courses",POST_GRADUATE_PROGRAM:"images/post-graduate-programs",EVENT:"images/events",SCIENTIFIC_JOURNAL:"images/scientific-journals",BOOK_VOLUME_AUTHOR_IMAGE:"images/book-volumes/authors",BOOK_VOLUME_COVER:"images/book-volumes/covers",BOOK_VOLUME_CATALOG_SHEET:"documents/book-volumes/catalog-sheets",RESEARCH_GROUP_LOGO:"images/research-groups",MUSEUM:"images/museums"};var Fo=5,ul=1024,db=ul*ul,sm=Fo*db;pb(xe);var am=xe.object({id:xe.uuid(),volumeNumber:xe.coerce.number().int().positive().optional(),year:xe.coerce.number().int().positive().optional(),title:xe.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio.").optional(),author:xe.string().min(1,"Autor \xE9 obrigat\xF3rio.").optional(),accessUrl:xe.string().url("URL de acesso deve ser v\xE1lida").optional(),description:xe.string().optional(),authorImage:xe.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=sm,`A imagem do autor deve ter no m\xE1ximo ${Fo}MB.`).optional(),coverImage:xe.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=sm,`A imagem da capa deve ter no m\xE1ximo ${Fo}MB.`).optional(),catalogSheet:xe.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=sm,`A ficha catalogr\xE1fica deve ter no m\xE1ximo ${Fo}MB.`).optional()}),Bo=class{constructor(e,t){this.bookVolumeRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{id:r,volumeNumber:i,year:n,title:s,author:m,accessUrl:c,description:d,authorImage:h,coverImage:E,catalogSheet:F}=am.parse({id:e.params.id,...e.body,authorImage:e.files?.authorImage?.[0],coverImage:e.files?.coverImage?.[0],catalogSheet:e.files?.catalogSheet?.[0]}),X=await this.bookVolumeRepository.findById(r);if(!X)throw new p("O volume de livro n\xE3o existe.");let te=X.authorImageUrl,se=X.coverImageUrl,fe=X.catalogSheetUrl;return h&&(te=await this.firebaseStorageService.uploadFile({file:h,id:r,folder:M.BOOK_VOLUME_AUTHOR_IMAGE})),E&&(se=await this.firebaseStorageService.uploadFile({file:E,id:r,folder:M.BOOK_VOLUME_COVER})),F&&(fe=await this.firebaseStorageService.uploadFile({file:F,id:r,folder:M.BOOK_VOLUME_CATALOG_SHEET})),await this.bookVolumeRepository.update({id:r,volumeNumber:i,year:n,title:s,author:m,accessUrl:c,description:d,authorImageUrl:te,coverImageUrl:se,catalogSheetUrl:fe}),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var gl={method:"post",path:"/book-volumes",tags:["Book Volumes"],summary:"Create book volume",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:v.object({volumeNumber:v.number().int().positive().openapi({description:"N\xFAmero do volume"}),year:v.number().int().positive().openapi({description:"Ano de publica\xE7\xE3o"}),title:v.string().min(1).openapi({description:"T\xEDtulo do livro"}),author:v.string().min(1).openapi({description:"Nome do autor"}),accessUrl:v.string().url().optional().openapi({description:"URL de acesso ao livro"}),description:v.string().optional().openapi({description:"Descri\xE7\xE3o do livro"}),authorImage:v.string().optional().openapi({description:"Imagem do autor (m\xE1ximo 5MB)",type:"string",format:"binary"}),coverImage:v.string().optional().openapi({description:"Imagem da capa (m\xE1ximo 5MB)",type:"string",format:"binary"}),catalogSheet:v.string().optional().openapi({description:"Ficha catalogr\xE1fica (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{201:{description:"Book volume created successfully",summary:"Volume Created"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:v.object({errors:v.record(v.string(),v.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:v.object({message:v.string()})}}}}},fl={method:"get",path:"/book-volumes",tags:["Book Volumes"],summary:"List book volumes",security:[{bearerAuth:[]}],request:{query:nm},responses:{200:{description:"Paginated list of book volumes retrieved successfully",summary:"Volumes Retrieved",content:{"application/json":{schema:v.object({page:v.number(),totalPages:v.number(),offset:v.number(),limit:v.number(),bookVolumes:v.array(v.object({id:v.string(),volumeNumber:v.number(),year:v.number(),title:v.string(),author:v.string(),accessUrl:v.string().nullable(),authorImageUrl:v.string().nullable(),coverImageUrl:v.string().nullable(),catalogSheetUrl:v.string().nullable(),description:v.string().nullable(),createdAt:v.date(),updatedAt:v.date()}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:v.object({errors:v.record(v.string(),v.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:v.object({message:v.string()})}}}}},yl={method:"get",path:"/book-volumes/{id}",tags:["Book Volumes"],summary:"Find book volume by ID",security:[{bearerAuth:[]}],request:{params:im},responses:{200:{description:"Book volume details retrieved successfully",summary:"Volume Retrieved",content:{"application/json":{schema:v.object({id:v.string(),volumeNumber:v.number(),year:v.number(),title:v.string(),author:v.string(),accessUrl:v.string().nullable(),authorImageUrl:v.string().nullable(),coverImageUrl:v.string().nullable(),catalogSheetUrl:v.string().nullable(),description:v.string().nullable(),createdAt:v.date(),updatedAt:v.date()}).nullable()}}},400:{description:"Invalid volume ID format",summary:"Validation Error",content:{"application/json":{schema:v.object({errors:v.record(v.string(),v.string())})}}},404:{description:"Book volume not found with the provided ID",summary:"Volume Not Found",content:{"application/json":{schema:v.object({message:v.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:v.object({message:v.string()})}}}}},hl={method:"put",path:"/book-volumes/{id}",tags:["Book Volumes"],summary:"Update book volume",security:[{bearerAuth:[]}],request:{params:am.pick({id:!0}),body:{content:{"multipart/form-data":{schema:v.object({volumeNumber:v.number().int().positive().optional().openapi({description:"N\xFAmero do volume"}),year:v.number().int().positive().optional().openapi({description:"Ano de publica\xE7\xE3o"}),title:v.string().min(1).optional().openapi({description:"T\xEDtulo do livro"}),author:v.string().min(1).optional().openapi({description:"Nome do autor"}),accessUrl:v.string().url().optional().openapi({description:"URL de acesso ao livro"}),description:v.string().optional().openapi({description:"Descri\xE7\xE3o do livro"}),authorImage:v.string().optional().openapi({description:"Imagem do autor (m\xE1ximo 5MB)",type:"string",format:"binary"}),coverImage:v.string().optional().openapi({description:"Imagem da capa (m\xE1ximo 5MB)",type:"string",format:"binary"}),catalogSheet:v.string().optional().openapi({description:"Ficha catalogr\xE1fica (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{200:{description:"Book volume updated successfully",summary:"Volume Updated"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:v.object({errors:v.record(v.string(),v.string())})}}},404:{description:"Book volume not found with the provided ID",summary:"Volume Not Found",content:{"application/json":{schema:v.object({message:v.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:v.object({message:v.string()})}}}}},Rl={method:"delete",path:"/book-volumes/{id}",tags:["Book Volumes"],summary:"Delete book volume",security:[{bearerAuth:[]}],request:{params:tm},responses:{200:{description:"Book volume deleted successfully",summary:"Volume Deleted"},400:{description:"Invalid volume ID format",summary:"Validation Error",content:{"application/json":{schema:v.object({errors:v.record(v.string(),v.string())})}}},404:{description:"Book volume not found with the provided ID",summary:"Volume Not Found",content:{"application/json":{schema:v.object({message:v.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:v.object({message:v.string()})}}}}};import{$Enums as Ib}from"@prisma/client";import P from"zod";import{extendZodWithOpenApi as lb}from"@asteasolutions/zod-to-openapi";import mm from"zod";lb(mm);var cm=mm.object({id:mm.string()}),qo=class{constructor(e,t){this.certificationRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{id:r}=cm.parse({id:e.params.certification_id}),i=await this.certificationRepository.findById(r);if(!i)throw new p("A certifica\xE7\xE3o n\xE3o existe.");return await Promise.all([this.certificationRepository.deleteById(i.id),this.firebaseStorageService.deleteFile({fileUrl:i.certificationUrl})]),t.sendStatus(204)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as ub}from"@asteasolutions/zod-to-openapi";import pm from"zod";ub(pm);var dm=pm.object({certificationId:pm.uuid()}),Uo=class{constructor(e){this.certificationRepository=e}async handle(e,t){try{let{certificationId:r}=dm.parse({certificationId:e.params.certification_id}),i=await this.certificationRepository.findById(r);if(!i)throw new p("Certificado n\xE3o encontrado.");return t.status(200).json(i)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as gb}from"@asteasolutions/zod-to-openapi";import pr from"zod";var fb=1,yb=6;gb(pr);var lm=pr.object({page:pr.coerce.number().min(1).default(fb),limit:pr.coerce.number().min(1).default(yb),title:pr.string().optional(),description:pr.string().optional(),userId:pr.uuid().optional(),orderBy:pr.enum(["asc","desc"]).default("desc")}),ko=class{constructor(e){this.certificationRepository=e}async handle(e,t){try{let{limit:r,page:i,...n}=lm.parse(e.query),s=i*r-r,[m,c]=await Promise.all([this.certificationRepository.find({pagination:{offset:s,limit:r},filter:n}),this.certificationRepository.count({filter:n})]),d=Math.max(Math.ceil(c/r),1);return t.status(200).json({page:i,totalPages:d,offset:s,limit:r,certifications:m})}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as hb}from"@asteasolutions/zod-to-openapi";import ct from"zod";hb(ct);var Go=ct.object({userId:ct.uuid(),title:ct.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),description:ct.string().min(1,"Descri\xE7\xE3o \xE9 obrigat\xF3ria."),certification:ct.any().refine(o=>o&&typeof o=="object"&&o.size>0,"Arquivo do certificado \xE9 obrigat\xF3rio")}),Oo=class{constructor(e,t,r){this.userRepository=e;this.certificationRepository=t;this.firebaseStorageService=r}async handle(e,t){try{let{userId:r,title:i,description:n,certification:s}=Go.parse({...e.body,userId:e.params.user_id,certification:e.file});if(!await this.userRepository.findById(r))throw new ye("O usu\xE1rio n\xE3o existe.");let c=await this.firebaseStorageService.uploadFile({file:s,id:r,folder:M.CERTIFICATION});return await this.certificationRepository.register({userId:r,title:i,description:n,certificationUrl:c}),t.sendStatus(201)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as Rb}from"@asteasolutions/zod-to-openapi";import pt from"zod";Rb(pt);var Lo=pt.object({id:pt.uuid(),title:pt.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),description:pt.string().min(1,"Descri\xE7\xE3o \xE9 obrigat\xF3ria."),certification:pt.any().refine(o=>o==null||typeof o=="object"&&typeof o.size=="number"&&(o.size===0||o.size>0),"Arquivo do certificado \xE9 inv\xE1lido").optional()}),No=class{constructor(e,t){this.certificationRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{certification:r,id:i,...n}=Lo.parse({...e.body,id:e.params.certification_id,certification:e.file}),s=await this.certificationRepository.findById(i);if(!s)throw new ye("A certifica\xE7\xE3o n\xE3o existe");let m=s.certificationUrl;return r&&r.size>0&&(m=await this.firebaseStorageService.updateFile({file:r,id:s.userId,folder:M.CERTIFICATION,fileUrl:s.certificationUrl})),await this.certificationRepository.update({...n,id:i,certificationUrl:m}),t.sendStatus(204)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var Il={method:"post",path:"/certifications/{user_id}",tags:["Certifications"],summary:"Register certification for user",security:[{bearerAuth:[]}],request:{params:Go.pick({userId:!0}).transform(()=>({user_id:""})),body:{content:{"multipart/form-data":{schema:Go.omit({userId:!0})}}}},responses:{201:{description:"Certification registered successfully for the user",summary:"Certification Registered",content:{"application/json":{schema:P.object({message:P.string()})}}},400:{description:"Invalid input data or file format",summary:"Validation Error",content:{"application/json":{schema:P.object({errors:P.record(P.string(),P.string())})}}},404:{description:"User not found with the provided ID",summary:"User Not Found",content:{"application/json":{schema:P.object({message:P.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:P.object({message:P.string()})}}}}},bl={method:"get",path:"/certifications",tags:["Certifications"],summary:"List certifications",security:[{bearerAuth:[]}],request:{query:lm},responses:{200:{description:"Paginated list of certifications with user information retrieved successfully",summary:"Certifications Retrieved",content:{"application/json":{schema:P.object({page:P.number(),totalPages:P.number(),offset:P.number(),limit:P.number(),certifications:P.array(P.object({description:P.string(),userId:P.string(),title:P.string(),id:P.string(),createdAt:P.date(),updatedAt:P.date(),certificationUrl:P.url(),user:P.object({id:P.uuid(),name:P.string(),createdAt:P.date(),updatedAt:P.date(),avatarUrl:P.string().nullable(),emailAddress:P.email(),orcid:P.string().nullable(),phone:P.string().nullable(),lattesUrl:P.url().nullable(),role:P.enum(Ib.UserRole)})}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:P.object({errors:P.record(P.string(),P.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:P.object({message:P.string()})}}}}},Cl={method:"get",path:"/certifications/{certification_id}",tags:["Certifications"],summary:"Find certification by ID",security:[{bearerAuth:[]}],request:{params:dm},responses:{200:{description:"Certification details retrieved successfully",summary:"Certification Retrieved",content:{"application/json":{schema:P.object({description:P.string(),userId:P.string(),title:P.string(),id:P.string(),createdAt:P.date(),updatedAt:P.date(),certificationUrl:P.url()}).nullable()}}},400:{description:"Invalid certification ID format",summary:"Validation Error",content:{"application/json":{schema:P.object({errors:P.record(P.string(),P.string())})}}},404:{description:"Certification not found with the provided ID",summary:"Certification Not Found",content:{"application/json":{schema:P.object({message:P.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:P.object({message:P.string()})}}}}},wl={method:"put",path:"/certifications/{certification_id}",tags:["Certifications"],summary:"Update certification",security:[{bearerAuth:[]}],request:{params:Lo.pick({id:!0}).transform(()=>({certification_id:""})),body:{content:{"multipart/form-data":{schema:Lo.omit({id:!0})}}}},responses:{204:{description:"Certification updated successfully",summary:"Certification Updated"},400:{description:"Invalid input data or file format",summary:"Validation Error",content:{"application/json":{schema:P.object({errors:P.record(P.string(),P.string())})}}},404:{description:"Certification not found with the provided ID",summary:"Certification Not Found",content:{"application/json":{schema:P.object({message:P.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:P.object({message:P.string()})}}}}},Sl={method:"delete",path:"/certifications/{certification_id}",tags:["Certifications"],summary:"Delete certification",security:[{bearerAuth:[]}],request:{params:cm},responses:{204:{description:"Certification deleted successfully",summary:"Certification Deleted"},400:{description:"Invalid certification ID format",summary:"Validation Error",content:{"application/json":{schema:P.object({errors:P.record(P.string(),P.string())})}}},404:{description:"Certification not found with the provided ID",summary:"Certification Not Found",content:{"application/json":{schema:P.object({message:P.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:P.object({message:P.string()})}}}}};import I from"zod";import{extendZodWithOpenApi as bb}from"@asteasolutions/zod-to-openapi";import um from"zod";bb(um);var gm=um.object({id:um.uuid()}),Wo=class{constructor(e,t){this.courseRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{id:r}=gm.parse({id:e.params.id}),i=await this.courseRepository.findById(r);if(!i)throw new p("O curso n\xE3o existe.");return i.imageUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.imageUrl}),await this.courseRepository.deleteById(r),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as Cb}from"@asteasolutions/zod-to-openapi";import fm from"zod";Cb(fm);var ym=fm.object({id:fm.uuid()}),_o=class{constructor(e){this.courseRepository=e}async handle(e,t){try{let{id:r}=ym.parse({id:e.params.id}),i=await this.courseRepository.findById(r);if(!i)throw new p("Curso n\xE3o encontrado.");return t.status(200).json(i)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as wb}from"@asteasolutions/zod-to-openapi";import dr from"zod";var Sb=1,vb=6;wb(dr);var hm=dr.object({page:dr.coerce.number().min(1).default(Sb),limit:dr.coerce.number().min(1).default(vb),title:dr.string().optional(),description:dr.string().optional(),coordinator:dr.string().optional(),orderBy:dr.enum(["asc","desc"]).default("desc")}),zo=class{constructor(e){this.courseRepository=e}async handle(e,t){try{let{limit:r,page:i,...n}=hm.parse(e.query),s=i*r-r,[m,c]=await Promise.all([this.courseRepository.find({pagination:{offset:s,limit:r},filter:n}),this.courseRepository.count({filter:n})]),d=Math.max(Math.ceil(c/r),1);return t.status(200).json({page:i,totalPages:d,offset:s,limit:r,courses:m})}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as Eb}from"@asteasolutions/zod-to-openapi";import he from"zod";var El=5,vl=1024,jb=vl*vl,xb=El*jb;Eb(he);var Rm=he.object({id:he.uuid(),title:he.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio.").optional(),coordinatorId:he.string().uuid("Coordenador \xE9 obrigat\xF3rio.").optional(),email:he.string().email("E-mail deve ser v\xE1lido.").optional(),location:he.string().min(1,"Localiza\xE7\xE3o \xE9 obrigat\xF3ria.").optional(),scheduledAt:he.coerce.date().optional(),registrationLink:he.url("URL de inscri\xE7\xE3o deve ser v\xE1lida").optional(),description:he.string().optional(),instructorIds:he.transform(o=>typeof o=="string"?o.split(","):o).pipe(he.array(he.uuid())).optional(),image:he.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=xb,`A imagem deve ter no m\xE1ximo ${El}MB.`).optional()}),Ho=class{constructor(e,t){this.courseRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{id:r,image:i,title:n,coordinatorId:s,email:m,location:c,scheduledAt:d,registrationLink:h,description:E,instructorIds:F}=Rm.parse({id:e.params.id,...e.body,image:e.file}),X=await this.courseRepository.findById(r);if(!X)throw new p("O curso n\xE3o existe.");let te=X.imageUrl;if(i&&(te=await this.firebaseStorageService.uploadFile({file:i,id:r,folder:M.COURSE})),!te)throw new a("URL da imagem \xE9 obrigat\xF3rio");return await this.courseRepository.update({id:r,title:n,coordinatorId:s,email:m,location:c,scheduledAt:d,registrationLink:h,description:E,imageUrl:te,instructorIds:F}),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var jl={method:"post",path:"/courses",tags:["Courses"],summary:"Create course",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:I.object({title:I.string().min(1).openapi({description:"T\xEDtulo do curso"}),coordinator:I.string().min(1).openapi({description:"Nome do coordenador"}),email:I.string().email().openapi({description:"E-mail de contato"}),location:I.string().min(1).openapi({description:"Localiza\xE7\xE3o do curso"}),scheduledAt:I.string().openapi({description:"Data e hora agendada (ISO 8601)",example:"2024-01-01T10:00:00Z"}),registrationLink:I.string().url().optional().openapi({description:"Link de inscri\xE7\xE3o"}),description:I.string().optional().openapi({description:"Descri\xE7\xE3o do curso"}),instructorIds:I.string().openapi({description:"IDs dos instrutores separados por v\xEDrgula",example:"uuid1,uuid2,uuid3"}),image:I.string().optional().openapi({description:"Imagem do curso (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{201:{description:"Course created successfully",summary:"Course Created"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:I.object({errors:I.record(I.string(),I.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:I.object({message:I.string()})}}}}},xl={method:"get",path:"/courses",tags:["Courses"],summary:"List courses",security:[{bearerAuth:[]}],request:{query:hm},responses:{200:{description:"Paginated list of courses with instructor information retrieved successfully",summary:"Courses Retrieved",content:{"application/json":{schema:I.object({page:I.number(),totalPages:I.number(),offset:I.number(),limit:I.number(),courses:I.array(I.object({id:I.string(),title:I.string(),imageUrl:I.string().nullable(),coordinator:I.string(),email:I.string(),scheduledAt:I.date(),location:I.string(),registrationLink:I.string().nullable(),description:I.string().nullable(),createdAt:I.date(),updatedAt:I.date(),instructors:I.array(I.object({id:I.uuid(),name:I.string(),emailAddress:I.email(),avatarUrl:I.string().nullable(),createdAt:I.date(),updatedAt:I.date()}))}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:I.object({errors:I.record(I.string(),I.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:I.object({message:I.string()})}}}}},Ml={method:"get",path:"/courses/{id}",tags:["Courses"],summary:"Find course by ID",security:[{bearerAuth:[]}],request:{params:ym},responses:{200:{description:"Course details retrieved successfully",summary:"Course Retrieved",content:{"application/json":{schema:I.object({id:I.string(),title:I.string(),imageUrl:I.string().nullable(),coordinator:I.string(),email:I.string(),scheduledAt:I.date(),location:I.string(),registrationLink:I.string().nullable(),description:I.string().nullable(),createdAt:I.date(),updatedAt:I.date(),instructors:I.array(I.object({id:I.uuid(),name:I.string(),emailAddress:I.email(),avatarUrl:I.string().nullable(),createdAt:I.date(),updatedAt:I.date()}))}).nullable()}}},400:{description:"Invalid course ID format",summary:"Validation Error",content:{"application/json":{schema:I.object({errors:I.record(I.string(),I.string())})}}},404:{description:"Course not found with the provided ID",summary:"Course Not Found",content:{"application/json":{schema:I.object({message:I.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:I.object({message:I.string()})}}}}},Al={method:"put",path:"/courses/{id}",tags:["Courses"],summary:"Update course",security:[{bearerAuth:[]}],request:{params:Rm.pick({id:!0}),body:{content:{"multipart/form-data":{schema:I.object({title:I.string().min(1).optional().openapi({description:"T\xEDtulo do curso"}),coordinator:I.string().min(1).optional().openapi({description:"Nome do coordenador"}),email:I.string().email().optional().openapi({description:"E-mail de contato"}),location:I.string().min(1).optional().openapi({description:"Localiza\xE7\xE3o do curso"}),scheduledAt:I.string().optional().openapi({description:"Data e hora agendada (ISO 8601)",example:"2024-01-01T10:00:00Z"}),registrationLink:I.string().url().optional().openapi({description:"Link de inscri\xE7\xE3o"}),description:I.string().optional().openapi({description:"Descri\xE7\xE3o do curso"}),instructorIds:I.string().optional().openapi({description:"IDs dos instrutores separados por v\xEDrgula",example:"uuid1,uuid2,uuid3"}),image:I.string().optional().openapi({description:"Imagem do curso (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{200:{description:"Course updated successfully",summary:"Course Updated"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:I.object({errors:I.record(I.string(),I.string())})}}},404:{description:"Course not found with the provided ID",summary:"Course Not Found",content:{"application/json":{schema:I.object({message:I.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:I.object({message:I.string()})}}}}},Pl={method:"delete",path:"/courses/{id}",tags:["Courses"],summary:"Delete course",security:[{bearerAuth:[]}],request:{params:gm},responses:{200:{description:"Course deleted successfully",summary:"Course Deleted"},400:{description:"Invalid course ID format",summary:"Validation Error",content:{"application/json":{schema:I.object({errors:I.record(I.string(),I.string())})}}},404:{description:"Course not found with the provided ID",summary:"Course Not Found",content:{"application/json":{schema:I.object({message:I.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:I.object({message:I.string()})}}}}};import{$Enums as vm}from"@prisma/client";import w from"zod";import{extendZodWithOpenApi as Mb}from"@asteasolutions/zod-to-openapi";import Be from"zod";Mb(Be);var Im=Be.object({code:Be.string(),title:Be.string(),description:Be.string().optional(),notes:Be.string().optional(),leaderId:Be.uuid(),deputyLeaderId:Be.uuid(),secretaryId:Be.uuid(),memberIds:Be.array(Be.uuid())}),Vo=class{constructor(e){this.etpRepository=e}async handle(e,t){try{let{code:r,title:i,description:n,notes:s,leaderId:m,deputyLeaderId:c,secretaryId:d,memberIds:h}=Im.parse(e.body);if(await this.etpRepository.findByCode(r))throw new ce("J\xE1 existe um ETP cadastrado com este c\xF3digo.");return await this.etpRepository.create({code:r,title:i,description:n,notes:s,leaderId:m,deputyLeaderId:c,secretaryId:d,memberIds:h}),t.sendStatus(201)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as Ab}from"@asteasolutions/zod-to-openapi";import bm from"zod";Ab(bm);var Cm=bm.object({id:bm.uuid()}),Zo=class{constructor(e){this.etpRepository=e}async handle(e,t){try{let{id:r}=Cm.parse({id:e.params.id});if(!await this.etpRepository.findById(r))throw new p("O ETP n\xE3o existe.");return await this.etpRepository.deleteById(r),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as Pb}from"@asteasolutions/zod-to-openapi";import wm from"zod";Pb(wm);var Jo=wm.object({id:wm.uuid()}),Ko=class{constructor(e){this.etpRepository=e}async handle(e,t){try{let{id:r}=Jo.parse({id:e.params.id}),i=await this.etpRepository.findById(r);if(!i)throw new p("O ETP n\xE3o existe.");return t.status(200).json(i)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as Tb}from"@asteasolutions/zod-to-openapi";import Me from"zod";Tb(Me);var Sm=Me.object({id:Me.uuid(),code:Me.string().optional(),title:Me.string().optional(),description:Me.string().optional(),notes:Me.string().optional(),leaderId:Me.uuid().optional(),deputyLeaderId:Me.uuid().optional(),secretaryId:Me.uuid().optional(),memberIds:Me.array(Me.uuid()).optional()}),Yo=class{constructor(e){this.etpRepository=e}async handle(e,t){try{let{id:r,code:i,title:n,description:s,notes:m,leaderId:c,deputyLeaderId:d,secretaryId:h,memberIds:E}=Sm.parse({id:e.params.id,...e.body});if(!await this.etpRepository.findById(r))throw new p("O ETP n\xE3o existe.");if(i){let X=await this.etpRepository.findByCode(i);if(X&&X.id!==r)throw new ce("J\xE1 existe um ETP com este c\xF3digo.")}return await this.etpRepository.update({id:r,code:i,title:n,description:s,notes:m,leaderId:c,deputyLeaderId:d,secretaryId:h,memberIds:E}),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var Db=1,Fb=9,Xo=w.object({id:w.uuid(),registrationNumber:w.string(),mainEtps:w.string().nullable(),formations:w.string().nullable(),degrees:w.array(w.enum(vm.Degree)),occupations:w.string(),seniority:w.enum(vm.Seniority),institutions:w.string(),biography:w.string().nullable(),createdAt:w.date(),updatedAt:w.date(),user:w.object({id:w.uuid(),name:w.string(),emailAddress:w.string(),avatarUrl:w.string().nullable(),orcid:w.string().nullable(),phone:w.string().nullable(),lattesUrl:w.string().nullable(),role:w.enum(vm.UserRole)})}),Tl=w.object({id:w.uuid(),code:w.string(),title:w.string(),description:w.string().nullable(),notes:w.string().nullable(),createdAt:w.date(),updatedAt:w.date(),leader:w.object({id:w.uuid(),researcher:Xo}).nullable(),deputyLeader:w.object({id:w.uuid(),researcher:Xo}).nullable(),secretary:w.object({id:w.uuid(),researcher:Xo}).nullable(),members:w.array(Xo)}),Dl={method:"post",path:"/etp",tags:["ETPs"],summary:"Create a new ETP with single leader, deputy leader, secretary and multiple members",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:Im}}}},responses:{201:{description:"ETP created successfully",summary:"ETP Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:w.object({errors:w.record(w.string(),w.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:w.object({message:w.string()})}}},409:{description:"ETP with this code already exists",summary:"Conflict",content:{"application/json":{schema:w.object({message:w.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:w.object({message:w.string()})}}}}},Fl={method:"get",path:"/etp",tags:["ETPs"],summary:"List all ETPs with pagination and filters",request:{query:w.object({page:w.coerce.number().min(1).default(Db).optional(),limit:w.coerce.number().min(1).default(Fb).optional(),code:w.string().optional(),title:w.string().optional(),description:w.string().optional(),notes:w.string().optional(),orderBy:w.enum(["asc","desc"]).optional()})},responses:{200:{description:"List of ETPs retrieved successfully with pagination",summary:"ETPs Retrieved",content:{"application/json":{schema:w.object({page:w.number(),totalPages:w.number(),offset:w.number(),limit:w.number(),etps:w.array(Tl)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:w.object({message:w.string()})}}}}},Bl={method:"get",path:"/etp/{id}",tags:["ETPs"],summary:"Find ETP by ID",request:{params:Jo},responses:{200:{description:"ETP details retrieved successfully",summary:"ETP Retrieved",content:{"application/json":{schema:Tl}}},400:{description:"Invalid ETP ID format",summary:"Validation Error",content:{"application/json":{schema:w.object({errors:w.record(w.string(),w.string())})}}},404:{description:"ETP not found with the provided ID",summary:"ETP Not Found",content:{"application/json":{schema:w.object({message:w.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:w.object({message:w.string()})}}}}},ql={method:"put",path:"/etp/{id}",tags:["ETPs"],summary:"Update ETP and manage user relationships (single leader, deputy leader, secretary, multiple members)",security:[{bearerAuth:[]}],request:{params:Jo,body:{content:{"application/json":{schema:Sm.omit({id:!0})}}}},responses:{200:{description:"ETP updated successfully",summary:"ETP Updated"},400:{description:"Invalid input data or ETP ID format",summary:"Validation Error",content:{"application/json":{schema:w.object({errors:w.record(w.string(),w.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:w.object({message:w.string()})}}},404:{description:"ETP not found with the provided ID",summary:"ETP Not Found",content:{"application/json":{schema:w.object({message:w.string()})}}},409:{description:"ETP with this code already exists",summary:"Conflict",content:{"application/json":{schema:w.object({message:w.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:w.object({message:w.string()})}}}}},Ul={method:"delete",path:"/etp/{id}",tags:["ETPs"],summary:"Delete ETP",security:[{bearerAuth:[]}],request:{params:Cm},responses:{200:{description:"ETP deleted successfully",summary:"ETP Deleted"},400:{description:"Invalid ETP ID format",summary:"Validation Error",content:{"application/json":{schema:w.object({errors:w.record(w.string(),w.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:w.object({message:w.string()})}}},404:{description:"ETP not found with the provided ID",summary:"ETP Not Found",content:{"application/json":{schema:w.object({message:w.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:w.object({message:w.string()})}}}}};import{EventFormat as Xb,EventStatus as $b}from"@prisma/client";import N from"zod";import{extendZodWithOpenApi as Bb}from"@asteasolutions/zod-to-openapi";import{EventFormat as $o,EventStatus as Em}from"@prisma/client";import Ae from"zod";var qb=5,kl=1024,Ub=kl*kl,kb=qb*Ub;Bb(Ae);var jm=Ae.object({title:Ae.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio"),description:Ae.string().optional(),startDate:Ae.coerce.date(),endDate:Ae.coerce.date(),location:Ae.string().optional(),format:Ae.enum($o).default($o.ONLINE),eventLink:Ae.string().url("Link do evento deve ser uma URL v\xE1lida").optional().or(Ae.literal("")),status:Ae.enum(Em).default(Em.PENDING),image:Ae.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=kb,"A imagem deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.")}).refine(o=>o.format===$o.ONLINE?!!o.eventLink:o.format===$o.IN_PERSON?!!o.location:!0,{message:"Eventos online devem ter link e eventos presenciais devem ter localiza\xE7\xE3o",path:["format"]}),Qo=class{constructor(e,t){this.eventRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{title:r,description:i,startDate:n,endDate:s,location:m,format:c,eventLink:d,status:h,image:E}=jm.parse({...e.body,image:e.file}),F=await this.eventRepository.create({title:r,description:i,startDate:n,endDate:s,location:m||void 0,format:c,eventLink:d||void 0,status:h??Em.PENDING}),X=await this.firebaseStorageService.uploadFile({file:E,folder:M.EVENT,id:F.id});return await this.eventRepository.update({id:F.id,imageUrl:X}),t.sendStatus(201)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as Ob}from"@asteasolutions/zod-to-openapi";import xm from"zod";Ob(xm);var Mm=xm.object({id:xm.uuid()}),ei=class{constructor(e){this.eventRepository=e}async handle(e,t){try{let{id:r}=Mm.parse({id:e.params.id});if(!await this.eventRepository.findById(r))throw new p("O evento n\xE3o existe.");return await this.eventRepository.deleteById(r),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as Gb}from"@asteasolutions/zod-to-openapi";import Am from"zod";Gb(Am);var ti=Am.object({id:Am.uuid()}),ri=class{constructor(e){this.eventRepository=e}async handle(e,t){try{let{id:r}=ti.parse({id:e.params.id}),i=await this.eventRepository.findById(r);if(!i)throw new p("O evento n\xE3o existe.");return t.status(200).json(i)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as Nb}from"@asteasolutions/zod-to-openapi";import{EventFormat as Lb,EventStatus as Wb}from"@prisma/client";import lr from"zod";var _b=1,zb=10;Nb(lr);var Pm=lr.object({page:lr.coerce.number().min(1).default(_b),limit:lr.coerce.number().min(1).default(zb),title:lr.string().optional(),status:lr.nativeEnum(Wb).optional(),format:lr.nativeEnum(Lb).optional(),orderBy:lr.enum(["asc","desc"]).optional()}),oi=class{constructor(e){this.eventRepository=e}async handle(e,t){try{let{page:r,limit:i,...n}=Pm.parse(e.query),s=i*r-i,[m,c]=await Promise.all([this.eventRepository.find({pagination:{offset:s,limit:i},filter:n}),this.eventRepository.count({filter:n})]),d=Math.max(Math.ceil(c/i),1);t.status(200).json({page:r,totalPages:d,offset:s,limit:i,events:m})}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as Hb}from"@asteasolutions/zod-to-openapi";import{EventFormat as Vb,EventStatus as Zb}from"@prisma/client";import be from"zod";var Kb=5,Ol=1024,Jb=Ol*Ol,Yb=Kb*Jb;Hb(be);var Tm=be.object({id:be.uuid(),title:be.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio").optional(),description:be.string().optional(),startDate:be.coerce.date().optional(),endDate:be.coerce.date().optional(),location:be.string().optional(),format:be.nativeEnum(Vb).optional(),eventLink:be.string().url("Link do evento deve ser uma URL v\xE1lida").optional().or(be.literal("")),status:be.nativeEnum(Zb).optional(),image:be.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=Yb,"A imagem deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.").optional()}),ii=class{constructor(e,t){this.eventRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{id:r,title:i,description:n,startDate:s,endDate:m,location:c,format:d,eventLink:h,status:E,image:F}=Tm.parse({id:e.params.id,...e.body,image:e.file});if(!await this.eventRepository.findById(r))throw new p("O evento n\xE3o existe.");let te;return F&&(te=await this.firebaseStorageService.uploadFile({file:F,folder:M.EVENT,id:r})),await this.eventRepository.update({id:r,title:i,description:n,startDate:s,endDate:m,location:c||void 0,format:d,eventLink:h||void 0,status:E,imageUrl:te}),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var Gl=N.object({id:N.uuid(),title:N.string(),description:N.string().nullable(),imageUrl:N.string().nullable(),startDate:N.date(),endDate:N.date(),location:N.string().nullable(),status:N.nativeEnum($b),format:N.nativeEnum(Xb),eventLink:N.string().nullable(),createdAt:N.date(),updatedAt:N.date()}),Nl={method:"post",path:"/event",tags:["Events"],summary:"Create a new event",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:jm}}}},responses:{201:{description:"Event created successfully",summary:"Event Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:N.object({errors:N.record(N.string(),N.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:N.object({message:N.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:N.object({message:N.string()})}}}}},Ll={method:"get",path:"/event",tags:["Events"],summary:"List all events with pagination and filters",request:{query:Pm},responses:{200:{description:"List of events retrieved successfully with pagination",summary:"Events Retrieved",content:{"application/json":{schema:N.object({page:N.number(),totalPages:N.number(),offset:N.number(),limit:N.number(),events:N.array(Gl)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:N.object({errors:N.record(N.string(),N.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:N.object({message:N.string()})}}}}},Wl={method:"get",path:"/event/{id}",tags:["Events"],summary:"Find event by ID",request:{params:ti},responses:{200:{description:"Event details retrieved successfully",summary:"Event Retrieved",content:{"application/json":{schema:Gl}}},400:{description:"Invalid event ID format",summary:"Validation Error",content:{"application/json":{schema:N.object({errors:N.record(N.string(),N.string())})}}},404:{description:"Event not found with the provided ID",summary:"Event Not Found",content:{"application/json":{schema:N.object({message:N.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:N.object({message:N.string()})}}}}},_l={method:"put",path:"/event/{id}",tags:["Events"],summary:"Update event",security:[{bearerAuth:[]}],request:{params:ti,body:{content:{"multipart/form-data":{schema:Tm.omit({id:!0})}}}},responses:{200:{description:"Event updated successfully",summary:"Event Updated"},400:{description:"Invalid input data or event ID format",summary:"Validation Error",content:{"application/json":{schema:N.object({errors:N.record(N.string(),N.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:N.object({message:N.string()})}}},404:{description:"Event not found with the provided ID",summary:"Event Not Found",content:{"application/json":{schema:N.object({message:N.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:N.object({message:N.string()})}}}}},zl={method:"delete",path:"/event/{id}",tags:["Events"],summary:"Delete event",security:[{bearerAuth:[]}],request:{params:Mm},responses:{200:{description:"Event deleted successfully",summary:"Event Deleted"},400:{description:"Invalid event ID format",summary:"Validation Error",content:{"application/json":{schema:N.object({errors:N.record(N.string(),N.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:N.object({message:N.string()})}}},404:{description:"Event not found with the provided ID",summary:"Event Not Found",content:{"application/json":{schema:N.object({message:N.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:N.object({message:N.string()})}}}}};import{InMemoriamRole as fC}from"@prisma/client";import B from"zod";import{extendZodWithOpenApi as Qb}from"@asteasolutions/zod-to-openapi";import{InMemoriamRole as eC}from"@prisma/client";import ur from"zod";var Vl=2,Hl=1024,rC=Hl*Hl,tC=Vl*rC;Qb(ur);var Dm=ur.object({name:ur.string().min(1,"Nome \xE9 obrigat\xF3rio"),birthDate:ur.coerce.date(),deathDate:ur.coerce.date(),biography:ur.string().optional(),photo:ur.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=tC,`A imagem deve ter no m\xE1ximo ${Vl}MB.`).optional(),role:ur.enum(eC)}).refine(o=>o.deathDate>o.birthDate,{message:"Data de falecimento deve ser posterior \xE0 data de nascimento",path:["deathDate"]}),ni=class{constructor(e,t){this.inMemoriamRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{name:r,birthDate:i,deathDate:n,biography:s,role:m,photo:c}=Dm.parse({...e.body,photo:e.file}),d=await this.inMemoriamRepository.create({name:r,birthDate:i,deathDate:n,biography:s??void 0,role:m}),h;return c&&(h=await this.firebaseStorageService.uploadFile({file:c,id:d.id,folder:M.IN_MEMORIAM}),await this.inMemoriamRepository.update({id:d.id,photoUrl:h})),t.sendStatus(201)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as oC}from"@asteasolutions/zod-to-openapi";import Fm from"zod";oC(Fm);var Bm=Fm.object({id:Fm.uuid()}),si=class{constructor(e,t){this.inMemoriamRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{id:r}=Bm.parse({id:e.params.id}),i=await this.inMemoriamRepository.findById(r);if(!i)throw new p("O in memoriam n\xE3o existe.");return i.photoUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.photoUrl}),await this.inMemoriamRepository.deleteById(r),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as iC}from"@asteasolutions/zod-to-openapi";import qm from"zod";iC(qm);var mi=qm.object({id:qm.uuid()}),ai=class{constructor(e){this.inMemoriamRepository=e}async handle(e,t){try{let{id:r}=mi.parse({id:e.params.id}),i=await this.inMemoriamRepository.findById(r);if(!i)throw new p("O in memoriam n\xE3o existe.");return t.status(200).json(i)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as nC}from"@asteasolutions/zod-to-openapi";import{InMemoriamRole as sC}from"@prisma/client";import Um from"zod";nC(Um);var km=Um.object({role:Um.enum(sC)}),ci=class{constructor(e){this.inMemoriamRepository=e}async handle(e,t){try{let{role:r}=km.parse({role:e.params.role}),i=await this.inMemoriamRepository.findByRole(r);return t.status(200).json(i)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as aC}from"@asteasolutions/zod-to-openapi";import{InMemoriamRole as mC}from"@prisma/client";import gr from"zod";var cC=1,pC=9;aC(gr);var Om=gr.object({page:gr.coerce.number().min(1).default(cC),limit:gr.coerce.number().min(1).default(pC),name:gr.string().optional(),biography:gr.string().optional(),role:gr.enum(mC).optional(),orderBy:gr.enum(["asc","desc"]).default("desc")}),pi=class{constructor(e){this.inMemoriamRepository=e}async handle(e,t){try{let{page:r,limit:i,...n}=Om.parse(e.query),s=i*r-i,[m,c]=await Promise.all([this.inMemoriamRepository.find({pagination:{offset:s,limit:i},filter:n}),this.inMemoriamRepository.count({filter:n})]),d=Math.max(Math.ceil(c/i),1);t.status(200).json({page:r,totalPages:d,offset:s,limit:i,inMemoriam:m})}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as dC}from"@asteasolutions/zod-to-openapi";import{InMemoriamRole as lC}from"@prisma/client";import Ke from"zod";var Kl=2,Zl=1024,uC=Zl*Zl,gC=Kl*uC;dC(Ke);var Gm=Ke.object({id:Ke.uuid(),name:Ke.string().min(1,"Nome \xE9 obrigat\xF3rio").optional(),birthDate:Ke.coerce.date().optional(),deathDate:Ke.coerce.date().optional(),biography:Ke.string().optional(),photo:Ke.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=gC,`A imagem deve ter no m\xE1ximo ${Kl}MB.`).optional(),role:Ke.enum(lC).optional()}).refine(o=>o.birthDate&&o.deathDate?o.deathDate>o.birthDate:!0,{message:"Data de falecimento deve ser posterior \xE0 data de nascimento",path:["deathDate"]}),di=class{constructor(e,t){this.inMemoriamRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{id:r,name:i,birthDate:n,deathDate:s,biography:m,photo:c,role:d}=Gm.parse({id:e.params.id,...e.body,photo:e.file}),h=await this.inMemoriamRepository.findById(r);if(!h)throw new p("O registro in memoriam n\xE3o existe.");let E=h.photoUrl;return c&&(E=await this.firebaseStorageService.uploadFile({file:c,id:r,folder:M.IN_MEMORIAM})),await this.inMemoriamRepository.update({id:r,name:i,birthDate:n,deathDate:s,biography:m,photoUrl:E??void 0,role:d}),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var Nm=B.object({id:B.uuid(),name:B.string(),birthDate:B.date(),deathDate:B.date(),biography:B.string().nullable(),photoUrl:B.string().nullable(),role:B.enum(fC),createdAt:B.date(),updatedAt:B.date()}),Jl={method:"post",path:"/in-memoriam",tags:["In Memoriam"],summary:"Create a new in memoriam record with optional photo upload",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:Dm}}}},responses:{201:{description:"In memoriam record created successfully",summary:"In Memoriam Created"},400:{description:"Invalid input data, missing required fields, or invalid photo format/size",summary:"Validation Error",content:{"application/json":{schema:B.object({errors:B.record(B.string(),B.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:B.object({message:B.string()})}}},409:{description:"In memoriam record with this name already exists",summary:"Conflict",content:{"application/json":{schema:B.object({message:B.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:B.object({message:B.string()})}}}}},Yl={method:"get",path:"/in-memoriam",tags:["In Memoriam"],summary:"List all in memoriam records with pagination and filters",request:{query:Om},responses:{200:{description:"List of in memoriam records retrieved successfully with pagination",summary:"In Memoriam Records Retrieved",content:{"application/json":{schema:B.object({page:B.number(),totalPages:B.number(),offset:B.number(),limit:B.number(),inMemoriam:B.array(Nm)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:B.object({errors:B.record(B.string(),B.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:B.object({message:B.string()})}}}}},Xl={method:"get",path:"/in-memoriam/{id}",tags:["In Memoriam"],summary:"Find in memoriam record by ID",request:{params:mi},responses:{200:{description:"In memoriam record details retrieved successfully",summary:"In Memoriam Record Retrieved",content:{"application/json":{schema:Nm}}},400:{description:"Invalid in memoriam record ID format",summary:"Validation Error",content:{"application/json":{schema:B.object({errors:B.record(B.string(),B.string())})}}},404:{description:"In memoriam record not found with the provided ID",summary:"In Memoriam Record Not Found",content:{"application/json":{schema:B.object({message:B.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:B.object({message:B.string()})}}}}},$l={method:"put",path:"/in-memoriam/{id}",tags:["In Memoriam"],summary:"Update in memoriam record with optional photo upload",security:[{bearerAuth:[]}],request:{params:mi,body:{content:{"multipart/form-data":{schema:Gm.omit({id:!0})}}}},responses:{200:{description:"In memoriam record updated successfully",summary:"In Memoriam Record Updated"},400:{description:"Invalid input data, in memoriam record ID format, or invalid photo format/size",summary:"Validation Error",content:{"application/json":{schema:B.object({errors:B.record(B.string(),B.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:B.object({message:B.string()})}}},404:{description:"In memoriam record not found with the provided ID",summary:"In Memoriam Record Not Found",content:{"application/json":{schema:B.object({message:B.string()})}}},409:{description:"In memoriam record with this name already exists",summary:"Conflict",content:{"application/json":{schema:B.object({message:B.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:B.object({message:B.string()})}}}}},Ql={method:"delete",path:"/in-memoriam/{id}",tags:["In Memoriam"],summary:"Delete in memoriam record",security:[{bearerAuth:[]}],request:{params:Bm},responses:{200:{description:"In memoriam record deleted successfully",summary:"In Memoriam Record Deleted"},400:{description:"Invalid in memoriam record ID format",summary:"Validation Error",content:{"application/json":{schema:B.object({errors:B.record(B.string(),B.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:B.object({message:B.string()})}}},404:{description:"In memoriam record not found with the provided ID",summary:"In Memoriam Record Not Found",content:{"application/json":{schema:B.object({message:B.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:B.object({message:B.string()})}}}}},nD={method:"get",path:"/in-memoriam/role/{role}",tags:["In Memoriam"],summary:"Find in memoriam records by role",request:{params:km},responses:{200:{description:"In memoriam records retrieved successfully by role",summary:"In Memoriam Records Retrieved by Role",content:{"application/json":{schema:B.array(Nm)}}},400:{description:"Invalid role parameter provided",summary:"Validation Error",content:{"application/json":{schema:B.object({errors:B.record(B.string(),B.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:B.object({message:B.string()})}}}}};import $ from"zod";import{extendZodWithOpenApi as yC}from"@asteasolutions/zod-to-openapi";import Jt from"zod";var ru=2,eu=1024,hC=eu*eu,RC=ru*hC;yC(Jt);var Lm=Jt.object({image:Jt.any().refine(o=>o==null||typeof o!="object"||typeof o.size!="number"?!1:o.size<=RC,`A imagem deve ter no m\xE1ximo ${ru}MB.`),caption:Jt.string().optional(),congressId:Jt.uuid()}),li=class{constructor(e,t,r){this.internationalScientificCongressGalleryRepository=e;this.internationalScientificCongressRepository=t;this.firebaseStorageService=r}async handle(e,t){try{let{image:r,caption:i,congressId:n}=Lm.parse({...e.body,...e.params,image:e.file});if(!await this.internationalScientificCongressRepository.findById(n))throw new p("O congresso n\xE3o existe.");let m=await this.internationalScientificCongressGalleryRepository.create({imageUrl:"",caption:i||void 0,congressId:n}),c=await this.firebaseStorageService.uploadFile({file:r,id:m.id,folder:M.INTERNATIONAL_SCIENTIFIC_CONGRESS_GALLERY});return await this.internationalScientificCongressGalleryRepository.update({id:m.id,imageUrl:c}),t.sendStatus(201)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as IC}from"@asteasolutions/zod-to-openapi";import Wm from"zod";IC(Wm);var gi=Wm.object({id:Wm.uuid()}),ui=class{constructor(e){this.internationalScientificCongressGalleryRepository=e}async handle(e,t){try{let{id:r}=gi.parse({id:e.params.id});if(!await this.internationalScientificCongressGalleryRepository.findById(r))throw new p("A imagem da galeria n\xE3o existe.");return await this.internationalScientificCongressGalleryRepository.deleteById(r),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as bC}from"@asteasolutions/zod-to-openapi";import dt from"zod";var CC=1,wC=9;bC(dt);var _m=dt.object({congressId:dt.uuid(),page:dt.coerce.number().min(1).default(CC),limit:dt.coerce.number().min(1).default(wC),caption:dt.string().optional()}),fi=class{constructor(e){this.internationalScientificCongressGalleryRepository=e}async handle(e,t){try{let{congressId:r,page:i,limit:n,...s}=_m.parse({congressId:e.params.congressId,...e.query}),m=n*i-n,[c,d]=await Promise.all([this.internationalScientificCongressGalleryRepository.findByCongressId({pagination:{offset:m,limit:n},filter:{congressId:r,...s}}),this.internationalScientificCongressGalleryRepository.count({filter:{congressId:r,caption:s.caption}})]),h=Math.max(Math.ceil(d/n),1);return t.status(200).json({page:i,totalPages:h,offset:m,limit:n,galleryImages:c})}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as SC}from"@asteasolutions/zod-to-openapi";import Yt from"zod";var ou=2,tu=1024,vC=tu*tu,EC=ou*vC;SC(Yt);var zm=Yt.object({id:Yt.uuid(),image:Yt.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=EC,`A imagem deve ter no m\xE1ximo ${ou}MB.`).optional(),caption:Yt.string().optional()}),yi=class{constructor(e,t){this.internationalScientificCongressGalleryRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{id:r,image:i,caption:n}=zm.parse({id:e.params.id,...e.body,image:e.file}),s=await this.internationalScientificCongressGalleryRepository.findById(r);if(!s)throw new p("A imagem da galeria n\xE3o existe.");let m=s.imageUrl;return i&&(m=await this.firebaseStorageService.uploadFile({file:i,id:r,folder:M.INTERNATIONAL_SCIENTIFIC_CONGRESS_GALLERY})),await this.internationalScientificCongressGalleryRepository.update({id:r,imageUrl:m??void 0,caption:n||void 0}),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var jC=$.object({id:$.uuid(),imageUrl:$.string(),caption:$.string().nullable(),congressId:$.uuid()}),iu={method:"post",path:"/international-scientific-congress/{congressId}/gallery",tags:["International Scientific Congresses"],summary:"Create a new congress gallery image",security:[{bearerAuth:[]}],request:{params:$.object({congressId:$.uuid()}),body:{content:{"application/json":{schema:Lm.omit({congressId:!0})}}}},responses:{201:{description:"Congress gallery image created successfully",summary:"Congress Gallery Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:$.object({errors:$.record($.string(),$.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:$.object({message:$.string()})}}},404:{description:"Congress not found with the provided ID",summary:"Congress Not Found",content:{"application/json":{schema:$.object({message:$.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:$.object({message:$.string()})}}}}},nu={method:"get",path:"/international-scientific-congress/{congressId}/gallery",tags:["International Scientific Congresses"],summary:"Find congress gallery images by congress ID",request:{params:_m},responses:{200:{description:"Congress gallery images retrieved successfully by congress ID",summary:"Congress Galleries Retrieved",content:{"application/json":{schema:$.array(jC)}}},400:{description:"Invalid congress ID parameter provided",summary:"Validation Error",content:{"application/json":{schema:$.object({errors:$.record($.string(),$.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:$.object({message:$.string()})}}}}},su={method:"put",path:"/international-scientific-congress/gallery/{id}",tags:["International Scientific Congresses"],summary:"Update congress gallery image",security:[{bearerAuth:[]}],request:{params:gi,body:{content:{"application/json":{schema:zm.omit({id:!0})}}}},responses:{200:{description:"Congress gallery image updated successfully",summary:"Congress Gallery Updated"},400:{description:"Invalid input data or gallery ID format",summary:"Validation Error",content:{"application/json":{schema:$.object({errors:$.record($.string(),$.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:$.object({message:$.string()})}}},404:{description:"Congress gallery image not found with the provided ID",summary:"Congress Gallery Not Found",content:{"application/json":{schema:$.object({message:$.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:$.object({message:$.string()})}}}}},au={method:"delete",path:"/international-scientific-congress/gallery/{id}",tags:["International Scientific Congresses"],summary:"Delete congress gallery image",security:[{bearerAuth:[]}],request:{params:gi},responses:{200:{description:"Congress gallery image deleted successfully",summary:"Congress Gallery Deleted"},400:{description:"Invalid gallery ID format",summary:"Validation Error",content:{"application/json":{schema:$.object({errors:$.record($.string(),$.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:$.object({message:$.string()})}}},404:{description:"Congress gallery image not found with the provided ID",summary:"Congress Gallery Not Found",content:{"application/json":{schema:$.object({message:$.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:$.object({message:$.string()})}}}}};import Q from"zod";import{extendZodWithOpenApi as xC}from"@asteasolutions/zod-to-openapi";import Xt from"zod";var cu=2,mu=1024,MC=mu*mu,AC=cu*MC;xC(Xt);var Hm=Xt.object({name:Xt.string().min(1,"Nome \xE9 obrigat\xF3rio"),logo:Xt.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=AC,`A imagem deve ter no m\xE1ximo ${cu}MB.`).optional(),congressId:Xt.uuid()}),hi=class{constructor(e,t,r){this.internationalScientificCongressPartnerRepository=e;this.internationalScientificCongressRepository=t;this.firebaseStorageService=r}async handle(e,t){try{let{name:r,logo:i,congressId:n}=Hm.parse({...e.body,...e.params,logo:e.file});if(!await this.internationalScientificCongressRepository.findById(n))throw new p("O congresso n\xE3o existe.");let m=await this.internationalScientificCongressPartnerRepository.create({name:r,congressId:n}),c;return i&&(c=await this.firebaseStorageService.uploadFile({file:i,id:m.id,folder:M.PARTNER}),await this.internationalScientificCongressPartnerRepository.update({id:m.id,logoUrl:c})),t.sendStatus(201)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as PC}from"@asteasolutions/zod-to-openapi";import Vm from"zod";PC(Vm);var Ii=Vm.object({id:Vm.uuid()}),Ri=class{constructor(e){this.internationalScientificCongressPartnerRepository=e}async handle(e,t){try{let{id:r}=Ii.parse({id:e.params.id});if(!await this.internationalScientificCongressPartnerRepository.findById(r))throw new p("O parceiro n\xE3o existe.");return await this.internationalScientificCongressPartnerRepository.deleteById(r),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as TC}from"@asteasolutions/zod-to-openapi";import lt from"zod";var DC=1,FC=9;TC(lt);var Zm=lt.object({congressId:lt.uuid(),page:lt.coerce.number().min(1).optional(),limit:lt.coerce.number().min(1).optional(),name:lt.string().optional()}),bi=class{constructor(e){this.internationalScientificCongressPartnerRepository=e}async handle(e,t){try{let{congressId:r,page:i,limit:n,...s}=Zm.parse({congressId:e.params.congressId,...e.query});if(i!==void 0&&n!==void 0){let c=i||DC,d=n||FC,h=d*c-d,[E,F]=await Promise.all([this.internationalScientificCongressPartnerRepository.findByCongressId({pagination:{offset:h,limit:d},filter:{congressId:r,...s}}),this.internationalScientificCongressPartnerRepository.count({filter:{congressId:r,name:s.name}})]),X=Math.max(Math.ceil(F/d),1);return t.status(200).json({page:c,totalPages:X,offset:h,limit:d,partners:E})}let m=await this.internationalScientificCongressPartnerRepository.findByCongressId({filter:{congressId:r,...s}});return t.status(200).json(m)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as BC}from"@asteasolutions/zod-to-openapi";import $t from"zod";var du=2,pu=1024,qC=pu*pu,UC=du*qC;BC($t);var Km=$t.object({id:$t.uuid(),name:$t.string().min(1,"Nome \xE9 obrigat\xF3rio").optional(),logo:$t.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=UC,`A imagem deve ter no m\xE1ximo ${du}MB.`).optional()}),Ci=class{constructor(e,t){this.internationalScientificCongressPartnerRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{id:r,name:i,logo:n}=Km.parse({id:e.params.id,...e.body,logo:e.file}),s=await this.internationalScientificCongressPartnerRepository.findById(r);if(!s)throw new p("O parceiro n\xE3o existe.");let m=s.logoUrl;return n&&(m=await this.firebaseStorageService.uploadFile({file:n,id:r,folder:M.PARTNER})),await this.internationalScientificCongressPartnerRepository.update({id:r,name:i,logoUrl:m??void 0}),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var kC=Q.object({id:Q.uuid(),name:Q.string(),logoUrl:Q.string().nullable(),congressId:Q.uuid()}),lu={method:"post",path:"/international-scientific-congress/{congressId}/partner",tags:["International Scientific Congresses"],summary:"Create a new congress partner",security:[{bearerAuth:[]}],request:{params:Q.object({congressId:Q.uuid()}),body:{content:{"application/json":{schema:Hm.omit({congressId:!0})}}}},responses:{201:{description:"Congress partner created successfully",summary:"Congress Partner Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:Q.object({errors:Q.record(Q.string(),Q.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:Q.object({message:Q.string()})}}},404:{description:"Congress not found with the provided ID",summary:"Congress Not Found",content:{"application/json":{schema:Q.object({message:Q.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Q.object({message:Q.string()})}}}}},uu={method:"get",path:"/international-scientific-congress/{congressId}/partner",tags:["International Scientific Congresses"],summary:"Find congress partners by congress ID",request:{params:Zm},responses:{200:{description:"Congress partners retrieved successfully by congress ID",summary:"Congress Partners Retrieved",content:{"application/json":{schema:Q.array(kC)}}},400:{description:"Invalid congress ID parameter provided",summary:"Validation Error",content:{"application/json":{schema:Q.object({errors:Q.record(Q.string(),Q.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Q.object({message:Q.string()})}}}}},gu={method:"put",path:"/international-scientific-congress/partner/{id}",tags:["International Scientific Congresses"],summary:"Update congress partner",security:[{bearerAuth:[]}],request:{params:Ii,body:{content:{"application/json":{schema:Km.omit({id:!0})}}}},responses:{200:{description:"Congress partner updated successfully",summary:"Congress Partner Updated"},400:{description:"Invalid input data or partner ID format",summary:"Validation Error",content:{"application/json":{schema:Q.object({errors:Q.record(Q.string(),Q.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:Q.object({message:Q.string()})}}},404:{description:"Congress partner not found with the provided ID",summary:"Congress Partner Not Found",content:{"application/json":{schema:Q.object({message:Q.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Q.object({message:Q.string()})}}}}},fu={method:"delete",path:"/international-scientific-congress/partner/{id}",tags:["International Scientific Congresses"],summary:"Delete congress partner",security:[{bearerAuth:[]}],request:{params:Ii},responses:{200:{description:"Congress partner deleted successfully",summary:"Congress Partner Deleted"},400:{description:"Invalid partner ID format",summary:"Validation Error",content:{"application/json":{schema:Q.object({errors:Q.record(Q.string(),Q.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:Q.object({message:Q.string()})}}},404:{description:"Congress partner not found with the provided ID",summary:"Congress Partner Not Found",content:{"application/json":{schema:Q.object({message:Q.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Q.object({message:Q.string()})}}}}};import g from"zod";import{extendZodWithOpenApi as OC}from"@asteasolutions/zod-to-openapi";import me from"zod";OC(me);var Jm=me.object({title:me.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio"),edition:me.coerce.number().int().positive("Edi\xE7\xE3o deve ser um n\xFAmero positivo"),startDate:me.coerce.date(),endDate:me.coerce.date(),description:me.string().optional(),location:me.string().optional(),congressLink:me.url("Link do congresso deve ser uma URL v\xE1lida").optional().or(me.literal("")),noticeUrl:me.url("URL do edital deve ser uma URL v\xE1lida").optional().or(me.literal("")),scheduleUrl:me.url("URL do cronograma deve ser uma URL v\xE1lida").optional().or(me.literal("")),programUrl:me.url("URL da programa\xE7\xE3o deve ser uma URL v\xE1lida").optional().or(me.literal("")),adminReportUrl:me.url("URL do relat\xF3rio administrativo deve ser uma URL v\xE1lida").optional().or(me.literal("")),proceedingsUrl:me.url("URL dos anais deve ser uma URL v\xE1lida").optional().or(me.literal(""))}).refine(o=>o.endDate>=o.startDate,{message:"Data de t\xE9rmino deve ser posterior ou igual \xE0 data de in\xEDcio",path:["endDate"]}),wi=class{constructor(e){this.internationalScientificCongressRepository=e}async handle(e,t){try{let r=Jm.parse(e.body);return await this.internationalScientificCongressRepository.create(r),t.sendStatus(201)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as GC}from"@asteasolutions/zod-to-openapi";import Ym from"zod";GC(Ym);var Xm=Ym.object({id:Ym.uuid()}),Si=class{constructor(e){this.internationalScientificCongressRepository=e}async handle(e,t){try{let{id:r}=Xm.parse({id:e.params.id});if(!await this.internationalScientificCongressRepository.findById(r))throw new p("O congresso n\xE3o existe.");return await this.internationalScientificCongressRepository.deleteById(r),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as NC}from"@asteasolutions/zod-to-openapi";import $m from"zod";NC($m);var Qm=$m.object({edition:$m.coerce.number().int().positive()}),vi=class{constructor(e){this.internationalScientificCongressRepository=e}async handle(e,t){try{let{edition:r}=Qm.parse({edition:e.params.edition}),i=await this.internationalScientificCongressRepository.findByEdition(r);return t.status(200).json(i)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as LC}from"@asteasolutions/zod-to-openapi";import ec from"zod";LC(ec);var ji=ec.object({id:ec.uuid()}),Ei=class{constructor(e){this.internationalScientificCongressRepository=e}async handle(e,t){try{let{id:r}=ji.parse({id:e.params.id}),i=await this.internationalScientificCongressRepository.findById(r);if(!i)throw new p("O congresso n\xE3o existe.");return t.status(200).json(i)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as WC}from"@asteasolutions/zod-to-openapi";import fr from"zod";var _C=1,zC=10;WC(fr);var rc=fr.object({page:fr.coerce.number().min(1).default(_C),limit:fr.coerce.number().min(1).default(zC),title:fr.string().optional(),edition:fr.coerce.number().int().positive().optional(),location:fr.string().optional(),orderBy:fr.enum(["asc","desc"]).optional()}),xi=class{constructor(e){this.internationalScientificCongressRepository=e}async handle(e,t){try{let{page:r,limit:i,...n}=rc.parse(e.query),s=i*r-i,[m,c]=await Promise.all([this.internationalScientificCongressRepository.find({pagination:{offset:s,limit:i},filter:n}),this.internationalScientificCongressRepository.count({filter:n})]),d=Math.max(Math.ceil(c/i),1);t.status(200).json({page:r,totalPages:d,offset:s,limit:i,congresses:m})}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as HC}from"@asteasolutions/zod-to-openapi";import ae from"zod";HC(ae);var tc=ae.object({id:ae.uuid(),title:ae.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio").optional(),edition:ae.coerce.number().int().positive("Edi\xE7\xE3o deve ser um n\xFAmero positivo").optional(),startDate:ae.coerce.date().optional(),endDate:ae.coerce.date().optional(),description:ae.string().optional(),location:ae.string().optional(),congressLink:ae.url("Link do congresso deve ser uma URL v\xE1lida").optional().or(ae.literal("")),noticeUrl:ae.url("URL do edital deve ser uma URL v\xE1lida").optional().or(ae.literal("")),scheduleUrl:ae.url("URL do cronograma deve ser uma URL v\xE1lida").optional().or(ae.literal("")),programUrl:ae.url("URL da programa\xE7\xE3o deve ser uma URL v\xE1lida").optional().or(ae.literal("")),adminReportUrl:ae.url("URL do relat\xF3rio administrativo deve ser uma URL v\xE1lida").optional().or(ae.literal("")),proceedingsUrl:ae.url("URL dos anais deve ser uma URL v\xE1lida").optional().or(ae.literal(""))}),Mi=class{constructor(e){this.internationalScientificCongressRepository=e}async handle(e,t){try{let{id:r,...i}=tc.parse({id:e.params.id,...e.body});if(!await this.internationalScientificCongressRepository.findById(r))throw new p("O congresso n\xE3o existe.");return await this.internationalScientificCongressRepository.update({...i,id:r}),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var VC=9,ZC=g.object({image:g.any().openapi({type:"string",format:"binary"}),caption:g.string().optional()}),KC=g.object({image:g.any().openapi({type:"string",format:"binary"}).optional(),caption:g.string().optional()}),JC=g.object({id:g.uuid(),name:g.string(),logoUrl:g.string().nullable(),congressId:g.uuid()}),oc=g.object({id:g.uuid(),imageUrl:g.string(),caption:g.string().nullable(),congressId:g.uuid()}),ic=g.object({id:g.uuid(),title:g.string(),edition:g.number(),startDate:g.date(),endDate:g.date(),description:g.string().nullable(),location:g.string().nullable(),congressLink:g.string().nullable(),noticeUrl:g.string().nullable(),scheduleUrl:g.string().nullable(),programUrl:g.string().nullable(),adminReportUrl:g.string().nullable(),proceedingsUrl:g.string().nullable(),partners:g.array(JC),galleries:g.array(oc),createdAt:g.date(),updatedAt:g.date()}),yu={method:"post",path:"/international-scientific-congress",tags:["International Scientific Congresses"],summary:"Create a new international scientific congress",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:Jm}}}},responses:{201:{description:"International scientific congress created successfully",summary:"International Scientific Congress Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:g.object({message:g.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}},hu={method:"get",path:"/international-scientific-congress",tags:["International Scientific Congresses"],summary:"List all international scientific congresses with pagination and filters",request:{query:rc},responses:{200:{description:"List of international scientific congresses retrieved successfully with pagination",summary:"International Scientific Congresses Retrieved",content:{"application/json":{schema:g.object({page:g.number(),totalPages:g.number(),offset:g.number(),limit:g.number(),congresses:g.array(ic)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}},Ru={method:"get",path:"/international-scientific-congress/{id}",tags:["International Scientific Congresses"],summary:"Find international scientific congress by ID",request:{params:ji},responses:{200:{description:"International scientific congress details retrieved successfully",summary:"International Scientific Congress Retrieved",content:{"application/json":{schema:ic}}},400:{description:"Invalid international scientific congress ID format",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},404:{description:"International scientific congress not found with the provided ID",summary:"International Scientific Congress Not Found",content:{"application/json":{schema:g.object({message:g.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}},Iu={method:"get",path:"/international-scientific-congress/edition/{edition}",tags:["International Scientific Congresses"],summary:"Find international scientific congresses by edition",request:{params:Qm},responses:{200:{description:"International scientific congresses retrieved successfully by edition",summary:"International Scientific Congresses Retrieved by Edition",content:{"application/json":{schema:g.array(ic)}}},400:{description:"Invalid edition parameter provided",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}},bu={method:"put",path:"/international-scientific-congress/{id}",tags:["International Scientific Congresses"],summary:"Update international scientific congress",security:[{bearerAuth:[]}],request:{params:ji,body:{content:{"application/json":{schema:tc.omit({id:!0})}}}},responses:{200:{description:"International scientific congress updated successfully",summary:"International Scientific Congress Updated"},400:{description:"Invalid input data or international scientific congress ID format",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:g.object({message:g.string()})}}},404:{description:"International scientific congress not found with the provided ID",summary:"International Scientific Congress Not Found",content:{"application/json":{schema:g.object({message:g.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}},Cu={method:"delete",path:"/international-scientific-congress/{id}",tags:["International Scientific Congresses"],summary:"Delete international scientific congress",security:[{bearerAuth:[]}],request:{params:Xm},responses:{200:{description:"International scientific congress deleted successfully",summary:"International Scientific Congress Deleted"},400:{description:"Invalid international scientific congress ID format",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:g.object({message:g.string()})}}},404:{description:"International scientific congress not found with the provided ID",summary:"International Scientific Congress Not Found",content:{"application/json":{schema:g.object({message:g.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}},rB={method:"post",path:"/international-scientific-congress/{congressId}/gallery",tags:["International Scientific Congress Gallery"],summary:"Create a new gallery image for a congress",security:[{bearerAuth:[]}],request:{params:g.object({congressId:g.uuid()}),body:{content:{"multipart/form-data":{schema:ZC}}}},responses:{201:{description:"Gallery image created successfully",summary:"Gallery Image Created"},400:{description:"Invalid input data, missing required fields, or invalid image format/size",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:g.object({message:g.string()})}}},404:{description:"Congress not found with the provided ID",summary:"Congress Not Found",content:{"application/json":{schema:g.object({message:g.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}},tB={method:"get",path:"/international-scientific-congress/{congressId}/gallery",tags:["International Scientific Congress Gallery"],summary:"List all gallery images for a congress with pagination",request:{params:g.object({congressId:g.uuid()}),query:g.object({page:g.coerce.number().min(1).default(1),limit:g.coerce.number().min(1).default(VC),caption:g.string().optional()})},responses:{200:{description:"Gallery images retrieved successfully with pagination",summary:"Gallery Images Retrieved",content:{"application/json":{schema:g.object({page:g.number(),totalPages:g.number(),offset:g.number(),limit:g.number(),galleries:g.array(oc)})}}},400:{description:"Invalid congress ID format or query parameters",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}},oB={method:"get",path:"/international-scientific-congress/gallery/{id}",tags:["International Scientific Congress Gallery"],summary:"Find a gallery image by ID",request:{params:g.object({id:g.uuid()})},responses:{200:{description:"Gallery image retrieved successfully",summary:"Gallery Image Retrieved",content:{"application/json":{schema:oc}}},400:{description:"Invalid gallery image ID format",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},404:{description:"Gallery image not found with the provided ID",summary:"Gallery Image Not Found",content:{"application/json":{schema:g.object({message:g.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}},iB={method:"put",path:"/international-scientific-congress/gallery/{id}",tags:["International Scientific Congress Gallery"],summary:"Update a gallery image with optional image upload",security:[{bearerAuth:[]}],request:{params:g.object({id:g.uuid()}),body:{content:{"multipart/form-data":{schema:KC}}}},responses:{200:{description:"Gallery image updated successfully",summary:"Gallery Image Updated"},400:{description:"Invalid input data, gallery ID format, or invalid image format/size",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:g.object({message:g.string()})}}},404:{description:"Gallery image not found with the provided ID",summary:"Gallery Image Not Found",content:{"application/json":{schema:g.object({message:g.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}},nB={method:"delete",path:"/international-scientific-congress/gallery/{id}",tags:["International Scientific Congress Gallery"],summary:"Delete a gallery image",security:[{bearerAuth:[]}],request:{params:g.object({id:g.uuid()})},responses:{200:{description:"Gallery image deleted successfully",summary:"Gallery Image Deleted"},400:{description:"Invalid gallery ID format",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:g.object({message:g.string()})}}},404:{description:"Gallery image not found with the provided ID",summary:"Gallery Image Not Found",content:{"application/json":{schema:g.object({message:g.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}};import Z from"zod";import{extendZodWithOpenApi as YC}from"@asteasolutions/zod-to-openapi";import Qt from"zod";YC(Qt);var nc=Qt.object({title:Qt.string().min(1),link:Qt.url(),country:Qt.string().min(1)}),Ai=class{constructor(e){this.lawRepository=e}async handle(e,t){try{let{title:r,link:i,country:n}=nc.parse(e.body);return await this.lawRepository.create({title:r,link:i,country:n}),t.sendStatus(201)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as XC}from"@asteasolutions/zod-to-openapi";import sc from"zod";XC(sc);var ac=sc.object({id:sc.uuid()}),Pi=class{constructor(e){this.lawRepository=e}async handle(e,t){try{let{id:r}=ac.parse({id:e.params.id});if(!await this.lawRepository.findById(r))throw new p("A lei n\xE3o existe.");return await this.lawRepository.deleteById(r),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as $C}from"@asteasolutions/zod-to-openapi";import mc from"zod";$C(mc);var Di=mc.object({id:mc.uuid()}),Ti=class{constructor(e){this.lawRepository=e}async handle(e,t){try{let{id:r}=Di.parse({id:e.params.id}),i=await this.lawRepository.findById(r);if(!i)throw new p("A lei n\xE3o existe.");return t.status(200).json(i)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as QC}from"@asteasolutions/zod-to-openapi";import ut from"zod";QC(ut);var cc=ut.object({id:ut.uuid(),title:ut.string().min(1).optional(),link:ut.url().optional(),country:ut.string().min(1).optional()}),Fi=class{constructor(e){this.lawRepository=e}async handle(e,t){try{let{id:r,title:i,link:n,country:s}=cc.parse({id:e.params.id,...e.body});if(!await this.lawRepository.findById(r))throw new p("A lei n\xE3o existe.");return await this.lawRepository.update({id:r,title:i,link:n,country:s}),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var wu=Z.object({id:Z.uuid(),title:Z.string(),link:Z.string(),country:Z.string(),createdAt:Z.date(),updatedAt:Z.date()}),Su={method:"post",path:"/law",tags:["Laws"],summary:"Create a new Law",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:nc}}}},responses:{201:{description:"Law created successfully",summary:"Law Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:Z.object({errors:Z.record(Z.string(),Z.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:Z.object({message:Z.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Z.object({message:Z.string()})}}}}},vu={method:"get",path:"/law",tags:["Laws"],summary:"List all Laws with filters",request:{query:Z.object({page:Z.coerce.number().optional(),limit:Z.coerce.number().optional(),title:Z.string().optional(),country:Z.string().optional(),orderBy:Z.enum(["asc","desc"]).optional()})},responses:{200:{description:"List of Laws retrieved successfully",summary:"Laws Retrieved",content:{"application/json":{schema:Z.object({page:Z.number(),totalPages:Z.number(),offset:Z.number(),limit:Z.number(),laws:Z.array(wu)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Z.object({message:Z.string()})}}}}},Eu={method:"get",path:"/law/{id}",tags:["Laws"],summary:"Find Law by ID",request:{params:Di},responses:{200:{description:"Law details retrieved successfully",summary:"Law Retrieved",content:{"application/json":{schema:wu}}},400:{description:"Invalid Law ID format",summary:"Validation Error",content:{"application/json":{schema:Z.object({errors:Z.record(Z.string(),Z.string())})}}},404:{description:"Law not found with the provided ID",summary:"Law Not Found",content:{"application/json":{schema:Z.object({message:Z.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Z.object({message:Z.string()})}}}}},ju={method:"put",path:"/law/{id}",tags:["Laws"],summary:"Update Law",security:[{bearerAuth:[]}],request:{params:Di,body:{content:{"application/json":{schema:cc.omit({id:!0})}}}},responses:{200:{description:"Law updated successfully",summary:"Law Updated"},400:{description:"Invalid input data or Law ID format",summary:"Validation Error",content:{"application/json":{schema:Z.object({errors:Z.record(Z.string(),Z.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:Z.object({message:Z.string()})}}},404:{description:"Law not found with the provided ID",summary:"Law Not Found",content:{"application/json":{schema:Z.object({message:Z.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Z.object({message:Z.string()})}}}}},xu={method:"delete",path:"/law/{id}",tags:["Laws"],summary:"Delete Law",security:[{bearerAuth:[]}],request:{params:ac},responses:{200:{description:"Law deleted successfully",summary:"Law Deleted"},400:{description:"Invalid Law ID format",summary:"Validation Error",content:{"application/json":{schema:Z.object({errors:Z.record(Z.string(),Z.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:Z.object({message:Z.string()})}}},404:{description:"Law not found with the provided ID",summary:"Law Not Found",content:{"application/json":{schema:Z.object({message:Z.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Z.object({message:Z.string()})}}}}};import{$Enums as iw}from"@prisma/client";import W from"zod";import{extendZodWithOpenApi as ew}from"@asteasolutions/zod-to-openapi";import gt from"zod";ew(gt);var pc=gt.object({role:gt.string().min(1),description:gt.string().optional(),userId:gt.uuid(),order:gt.number().optional()}),Bi=class{constructor(e){this.legitimatorCommitteeMemberRepository=e}async handle(e,t){try{let{role:r,description:i,userId:n,order:s}=pc.parse(e.body);return await this.legitimatorCommitteeMemberRepository.create({role:r,description:i,userId:n,order:s??0}),t.sendStatus(201)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as rw}from"@asteasolutions/zod-to-openapi";import dc from"zod";rw(dc);var lc=dc.object({id:dc.uuid()}),qi=class{constructor(e){this.legitimatorCommitteeMemberRepository=e}async handle(e,t){try{let{id:r}=lc.parse({id:e.params.id});if(!await this.legitimatorCommitteeMemberRepository.findById(r))throw new p("O membro do comit\xEA legitimador n\xE3o existe.");return await this.legitimatorCommitteeMemberRepository.deleteById(r),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as tw}from"@asteasolutions/zod-to-openapi";import uc from"zod";tw(uc);var ki=uc.object({id:uc.uuid()}),Ui=class{constructor(e){this.legitimatorCommitteeMemberRepository=e}async handle(e,t){try{let{id:r}=ki.parse({id:e.params.id}),i=await this.legitimatorCommitteeMemberRepository.findById(r);if(!i)throw new p("O membro do comit\xEA legitimador n\xE3o existe.");return t.status(200).json(i)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as ow}from"@asteasolutions/zod-to-openapi";import Fr from"zod";ow(Fr);var gc=Fr.object({id:Fr.uuid(),role:Fr.string().min(1).optional(),description:Fr.string().optional(),userId:Fr.uuid().optional(),order:Fr.number().optional()}),Oi=class{constructor(e){this.legitimatorCommitteeMemberRepository=e}async handle(e,t){try{let{id:r,role:i,description:n,userId:s,order:m}=gc.parse({id:e.params.id,...e.body});if(!await this.legitimatorCommitteeMemberRepository.findById(r))throw new p("O membro do comit\xEA legitimador n\xE3o existe.");return await this.legitimatorCommitteeMemberRepository.update({id:r,role:i,description:n,userId:s,order:m}),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var nw=W.object({id:W.uuid(),name:W.string(),emailAddress:W.string(),avatarUrl:W.string().nullable(),orcid:W.string().nullable(),phone:W.string().nullable(),lattesUrl:W.string().nullable(),role:W.enum(iw.UserRole)}),Mu=W.object({id:W.uuid(),role:W.string(),description:W.string().nullable(),order:W.number(),createdAt:W.date(),updatedAt:W.date(),userId:W.uuid(),user:nw}),Au={method:"post",path:"/legitimator-committee-member",tags:["Legitimator Committee Members"],summary:"Create a new Legitimator Committee Member",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:pc}}}},responses:{201:{description:"Legitimator Committee Member created successfully",summary:"Legitimator Committee Member Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:W.object({errors:W.record(W.string(),W.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:W.object({message:W.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:W.object({message:W.string()})}}}}},Pu={method:"get",path:"/legitimator-committee-member",tags:["Legitimator Committee Members"],summary:"List all Legitimator Committee Members with filters",request:{query:W.object({role:W.string().optional(),orderBy:W.enum(["asc","desc"]).optional()})},responses:{200:{description:"List of Legitimator Committee Members retrieved successfully",summary:"Legitimator Committee Members Retrieved",content:{"application/json":{schema:W.object({members:W.array(Mu)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:W.object({message:W.string()})}}}}},Tu={method:"get",path:"/legitimator-committee-member/{id}",tags:["Legitimator Committee Members"],summary:"Find Legitimator Committee Member by ID",request:{params:ki},responses:{200:{description:"Legitimator Committee Member details retrieved successfully",summary:"Legitimator Committee Member Retrieved",content:{"application/json":{schema:Mu}}},400:{description:"Invalid Legitimator Committee Member ID format",summary:"Validation Error",content:{"application/json":{schema:W.object({errors:W.record(W.string(),W.string())})}}},404:{description:"Legitimator Committee Member not found with the provided ID",summary:"Legitimator Committee Member Not Found",content:{"application/json":{schema:W.object({message:W.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:W.object({message:W.string()})}}}}},Du={method:"put",path:"/legitimator-committee-member/{id}",tags:["Legitimator Committee Members"],summary:"Update Legitimator Committee Member",security:[{bearerAuth:[]}],request:{params:ki,body:{content:{"application/json":{schema:gc.omit({id:!0})}}}},responses:{200:{description:"Legitimator Committee Member updated successfully",summary:"Legitimator Committee Member Updated"},400:{description:"Invalid input data or Legitimator Committee Member ID format",summary:"Validation Error",content:{"application/json":{schema:W.object({errors:W.record(W.string(),W.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:W.object({message:W.string()})}}},404:{description:"Legitimator Committee Member not found with the provided ID",summary:"Legitimator Committee Member Not Found",content:{"application/json":{schema:W.object({message:W.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:W.object({message:W.string()})}}}}},Fu={method:"delete",path:"/legitimator-committee-member/{id}",tags:["Legitimator Committee Members"],summary:"Delete Legitimator Committee Member",security:[{bearerAuth:[]}],request:{params:lc},responses:{200:{description:"Legitimator Committee Member deleted successfully",summary:"Legitimator Committee Member Deleted"},400:{description:"Invalid Legitimator Committee Member ID format",summary:"Validation Error",content:{"application/json":{schema:W.object({errors:W.record(W.string(),W.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:W.object({message:W.string()})}}},404:{description:"Legitimator Committee Member not found with the provided ID",summary:"Legitimator Committee Member Not Found",content:{"application/json":{schema:W.object({message:W.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:W.object({message:W.string()})}}}}};import{$Enums as pw}from"@prisma/client";import T from"zod";import{extendZodWithOpenApi as sw}from"@asteasolutions/zod-to-openapi";import Je from"zod";sw(Je);var fc=Je.object({name:Je.string().min(1),description:Je.string().optional(),members:Je.array(Je.object({userId:Je.uuid(),role:Je.string().min(1),order:Je.number().optional()}))}),Gi=class{constructor(e){this.managementTeamRepository=e}async handle(e,t){try{let{name:r,description:i,members:n}=fc.parse(e.body);if(await this.managementTeamRepository.findByName(r))throw new ce("J\xE1 existe um time de gest\xE3o cadastrado com este nome.");return await this.managementTeamRepository.create({name:r,description:i,members:n.map(m=>({userId:m.userId,role:m.role,order:m.order??0}))}),t.sendStatus(201)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as aw}from"@asteasolutions/zod-to-openapi";import yc from"zod";aw(yc);var hc=yc.object({id:yc.uuid()}),Ni=class{constructor(e){this.managementTeamRepository=e}async handle(e,t){try{let{id:r}=hc.parse({id:e.params.id});if(!await this.managementTeamRepository.findById(r))throw new p("O time de gest\xE3o n\xE3o existe.");return await this.managementTeamRepository.deleteById(r),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as mw}from"@asteasolutions/zod-to-openapi";import Rc from"zod";mw(Rc);var Wi=Rc.object({id:Rc.uuid()}),Li=class{constructor(e){this.managementTeamRepository=e}async handle(e,t){try{let{id:r}=Wi.parse({id:e.params.id}),i=await this.managementTeamRepository.findById(r);if(!i)throw new p("O time de gest\xE3o n\xE3o existe.");return t.status(200).json(i)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as cw}from"@asteasolutions/zod-to-openapi";import Le from"zod";cw(Le);var Ic=Le.object({id:Le.uuid(),name:Le.string().min(1).optional(),description:Le.string().optional(),members:Le.array(Le.object({userId:Le.uuid(),role:Le.string().min(1),order:Le.number().optional()})).optional()}),_i=class{constructor(e){this.managementTeamRepository=e}async handle(e,t){try{let{id:r,name:i,description:n,members:s}=Ic.parse({id:e.params.id,...e.body}),m=await this.managementTeamRepository.findById(r);if(!m)throw new p("O time de gest\xE3o n\xE3o existe.");if(i&&i!==m.name){let c=await this.managementTeamRepository.findByName(i);if(c&&c.id!==r)throw new ce("J\xE1 existe um time de gest\xE3o com este nome.")}return await this.managementTeamRepository.update({id:r,name:i,description:n,members:s?s.map(c=>({userId:c.userId,role:c.role,order:c.order??0})):void 0}),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var dw=T.object({id:T.uuid(),name:T.string(),emailAddress:T.string(),avatarUrl:T.string().nullable(),orcid:T.string().nullable(),phone:T.string().nullable(),lattesUrl:T.string().nullable(),role:T.enum(pw.UserRole)}),lw=T.object({id:T.uuid(),role:T.string(),description:T.string().nullable(),order:T.number(),teamId:T.uuid(),userId:T.uuid(),createdAt:T.date(),updatedAt:T.date(),user:dw}),Bu=T.object({id:T.uuid(),name:T.string(),description:T.string().nullable(),createdAt:T.date(),updatedAt:T.date(),members:T.array(lw)}),qu={method:"post",path:"/management-team",tags:["Management Teams"],summary:"Create a new Management Team with multiple members",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:fc}}}},responses:{201:{description:"Management Team created successfully",summary:"Management Team Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:T.object({errors:T.record(T.string(),T.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:T.object({message:T.string()})}}},409:{description:"Management Team with this name already exists",summary:"Conflict",content:{"application/json":{schema:T.object({message:T.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:T.object({message:T.string()})}}}}},Uu={method:"get",path:"/management-team",tags:["Management Teams"],summary:"List all Management Teams with filters",request:{query:T.object({name:T.string().optional(),description:T.string().optional(),orderBy:T.enum(["asc","desc"]).optional()})},responses:{200:{description:"List of Management Teams retrieved successfully",summary:"Management Teams Retrieved",content:{"application/json":{schema:T.object({teams:T.array(Bu)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:T.object({message:T.string()})}}}}},ku={method:"get",path:"/management-team/{id}",tags:["Management Teams"],summary:"Find Management Team by ID",request:{params:Wi},responses:{200:{description:"Management Team details retrieved successfully",summary:"Management Team Retrieved",content:{"application/json":{schema:Bu}}},400:{description:"Invalid Management Team ID format",summary:"Validation Error",content:{"application/json":{schema:T.object({errors:T.record(T.string(),T.string())})}}},404:{description:"Management Team not found with the provided ID",summary:"Management Team Not Found",content:{"application/json":{schema:T.object({message:T.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:T.object({message:T.string()})}}}}},Ou={method:"put",path:"/management-team/{id}",tags:["Management Teams"],summary:"Update Management Team and manage member relationships",security:[{bearerAuth:[]}],request:{params:Wi,body:{content:{"application/json":{schema:Ic.omit({id:!0})}}}},responses:{200:{description:"Management Team updated successfully",summary:"Management Team Updated"},400:{description:"Invalid input data or Management Team ID format",summary:"Validation Error",content:{"application/json":{schema:T.object({errors:T.record(T.string(),T.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:T.object({message:T.string()})}}},404:{description:"Management Team not found with the provided ID",summary:"Management Team Not Found",content:{"application/json":{schema:T.object({message:T.string()})}}},409:{description:"Management Team with this name already exists",summary:"Conflict",content:{"application/json":{schema:T.object({message:T.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:T.object({message:T.string()})}}}}},Gu={method:"delete",path:"/management-team/{id}",tags:["Management Teams"],summary:"Delete Management Team",security:[{bearerAuth:[]}],request:{params:hc},responses:{200:{description:"Management Team deleted successfully",summary:"Management Team Deleted"},400:{description:"Invalid Management Team ID format",summary:"Validation Error",content:{"application/json":{schema:T.object({errors:T.record(T.string(),T.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:T.object({message:T.string()})}}},404:{description:"Management Team not found with the provided ID",summary:"Management Team Not Found",content:{"application/json":{schema:T.object({message:T.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:T.object({message:T.string()})}}}}};import{MeetingFormat as bw,MeetingStatus as Cw}from"@prisma/client";import z from"zod";import{extendZodWithOpenApi as uw}from"@asteasolutions/zod-to-openapi";import ft from"zod";var Lu=10,Nu=1024,gw=Nu*Nu,fw=Lu*gw;uw(ft);var bc=ft.object({title:ft.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio"),publishedAt:ft.coerce.date(),meetingId:ft.uuid(),document:ft.any().refine(o=>o==null||typeof o!="object"||typeof o.size!="number"?!1:o.size<=fw,`O documento deve ter no m\xE1ximo ${Lu}MB.`)}),zi=class{constructor(e,t,r){this.meetingMinuteRepository=e;this.meetingRepository=t;this.firebaseStorageService=r}async handle(e,t){try{let{title:r,publishedAt:i,meetingId:n,document:s}=bc.parse({...e.body,...e.params,document:e.file});if(!await this.meetingRepository.findById(n))throw new p("A reuni\xE3o n\xE3o existe.");if(await this.meetingMinuteRepository.findByMeetingId(n))throw new a("Esta reuni\xE3o j\xE1 possui uma ata.");let d=await this.meetingMinuteRepository.create({title:r,publishedAt:i,meetingId:n,documentUrl:""}),h=await this.firebaseStorageService.uploadFile({file:s,id:d.id,folder:M.MEETING_MINUTE});return await this.meetingMinuteRepository.update({id:d.id,documentUrl:h}),t.sendStatus(201)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as yw}from"@asteasolutions/zod-to-openapi";import Cc from"zod";yw(Cc);var eo=Cc.object({meetingId:Cc.uuid()}),Hi=class{constructor(e){this.meetingMinuteRepository=e}async handle(e,t){try{let{meetingId:r}=eo.parse({meetingId:e.params.meetingId}),i=await this.meetingMinuteRepository.findByMeetingId(r);return t.status(200).json(i)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as hw}from"@asteasolutions/zod-to-openapi";import yt from"zod";var _u=10,Wu=1024,Rw=Wu*Wu,Iw=_u*Rw;hw(yt);var wc=yt.object({meetingId:yt.uuid(),title:yt.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio").optional(),publishedAt:yt.coerce.date().optional(),document:yt.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=Iw,`O documento deve ter no m\xE1ximo ${_u}MB.`).optional()}),Vi=class{constructor(e,t){this.meetingMinuteRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{meetingId:r,title:i,publishedAt:n,document:s}=wc.parse({meetingId:e.params.meetingId,...e.body,document:e.file}),m=await this.meetingMinuteRepository.findByMeetingId(r);if(!m)throw new p("A ata n\xE3o existe para esta reuni\xE3o.");let c=m.documentUrl;return s&&(m.documentUrl&&await this.firebaseStorageService.deleteFile({fileUrl:m.documentUrl}),c=await this.firebaseStorageService.uploadFile({file:s,id:m.id,folder:M.MEETING_MINUTE})),await this.meetingMinuteRepository.update({id:m.id,title:i,publishedAt:n,documentUrl:c??void 0}),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var ww=z.object({id:z.uuid(),title:z.string(),scheduledAt:z.date(),format:z.enum(bw),agenda:z.string(),meetingLink:z.string().nullable(),location:z.string().nullable(),status:z.enum(Cw),createdAt:z.date(),updatedAt:z.date()}),Sw=z.object({id:z.uuid(),title:z.string(),publishedAt:z.date(),documentUrl:z.string(),meetingId:z.uuid(),meeting:ww,createdAt:z.date(),updatedAt:z.date()}),zu={method:"post",path:"/meeting/{meetingId}/minute",tags:["Meetings"],summary:"Create a new meeting minute with document upload",security:[{bearerAuth:[]}],request:{params:z.object({meetingId:z.uuid()}),body:{content:{"multipart/form-data":{schema:bc.omit({meetingId:!0})}}}},responses:{201:{description:"Meeting minute created successfully",summary:"Meeting Minute Created"},400:{description:"Invalid input data, missing required fields, or invalid document format/size",summary:"Validation Error",content:{"application/json":{schema:z.object({errors:z.record(z.string(),z.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:z.object({message:z.string()})}}},404:{description:"Meeting not found with the provided ID",summary:"Meeting Not Found",content:{"application/json":{schema:z.object({message:z.string()})}}},409:{description:"Meeting already has a minute",summary:"Conflict",content:{"application/json":{schema:z.object({message:z.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:z.object({message:z.string()})}}}}},Hu={method:"get",path:"/meeting/{meetingId}/minute",tags:["Meetings"],summary:"Find meeting minute by meeting ID",request:{params:eo},responses:{200:{description:"Meeting minute retrieved successfully by meeting ID",summary:"Meeting Minute Retrieved by Meeting ID",content:{"application/json":{schema:Sw.nullable()}}},400:{description:"Invalid meeting ID parameter provided",summary:"Validation Error",content:{"application/json":{schema:z.object({errors:z.record(z.string(),z.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:z.object({message:z.string()})}}}}},Vu={method:"put",path:"/meeting/{meetingId}/minute",tags:["Meetings"],summary:"Update meeting minute with optional document upload",security:[{bearerAuth:[]}],request:{params:eo,body:{content:{"multipart/form-data":{schema:wc.omit({meetingId:!0})}}}},responses:{200:{description:"Meeting minute updated successfully",summary:"Meeting Minute Updated"},400:{description:"Invalid input data, meeting minute ID format, or invalid document format/size",summary:"Validation Error",content:{"application/json":{schema:z.object({errors:z.record(z.string(),z.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:z.object({message:z.string()})}}},404:{description:"Meeting minute not found with the provided ID",summary:"Meeting Minute Not Found",content:{"application/json":{schema:z.object({message:z.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:z.object({message:z.string()})}}}}},Zu={method:"delete",path:"/meeting/{meetingId}/minute",tags:["Meetings"],summary:"Delete meeting minute",security:[{bearerAuth:[]}],request:{params:eo},responses:{200:{description:"Meeting minute deleted successfully",summary:"Meeting Minute Deleted"},400:{description:"Invalid meeting minute ID format",summary:"Validation Error",content:{"application/json":{schema:z.object({errors:z.record(z.string(),z.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:z.object({message:z.string()})}}},404:{description:"Meeting minute not found with the provided ID",summary:"Meeting Minute Not Found",content:{"application/json":{schema:z.object({message:z.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:z.object({message:z.string()})}}}}};import{MeetingFormat as kw,MeetingStatus as Ow}from"@prisma/client";import A from"zod";import{extendZodWithOpenApi as vw}from"@asteasolutions/zod-to-openapi";import{MeetingFormat as Zi,MeetingStatus as Sc}from"@prisma/client";import We from"zod";vw(We);var vc=We.object({title:We.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio"),scheduledAt:We.coerce.date(),format:We.enum(Zi).default(Zi.ONLINE),agenda:We.string().min(1,"Pauta \xE9 obrigat\xF3ria"),meetingLink:We.string().url("Link da reuni\xE3o deve ser uma URL v\xE1lida").optional().or(We.literal("")),location:We.string().optional(),status:We.enum(Sc).default(Sc.PENDING)}).refine(o=>o.format===Zi.ONLINE?!!o.meetingLink:o.format===Zi.IN_PERSON?!!o.location:!0,{message:"Reuni\xF5es online devem ter link e reuni\xF5es presenciais devem ter localiza\xE7\xE3o",path:["format"]}),Ki=class{constructor(e){this.meetingRepository=e}async handle(e,t){try{let{title:r,scheduledAt:i,format:n,agenda:s,meetingLink:m,location:c,status:d}=vc.parse(e.body);return await this.meetingRepository.create({title:r,scheduledAt:i,format:n,agenda:s,meetingLink:m||void 0,location:c||void 0,status:d??Sc.PENDING}),t.sendStatus(201)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as Ew}from"@asteasolutions/zod-to-openapi";import Ec from"zod";Ew(Ec);var jc=Ec.object({id:Ec.uuid()}),Ji=class{constructor(e){this.meetingRepository=e}async handle(e,t){try{let{id:r}=jc.parse({id:e.params.id});if(!await this.meetingRepository.findById(r))throw new p("A reuni\xE3o n\xE3o existe.");return await this.meetingRepository.deleteById(r),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as jw}from"@asteasolutions/zod-to-openapi";import xc from"zod";jw(xc);var Xi=xc.object({id:xc.uuid()}),Yi=class{constructor(e){this.meetingRepository=e}async handle(e,t){try{let{id:r}=Xi.parse({id:e.params.id}),i=await this.meetingRepository.findById(r);if(!i)throw new p("A reuni\xE3o n\xE3o existe.");return t.status(200).json(i)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as xw}from"@asteasolutions/zod-to-openapi";import{MeetingStatus as Mw}from"@prisma/client";import Mc from"zod";xw(Mc);var Ac=Mc.object({status:Mc.enum(Mw)}),$i=class{constructor(e){this.meetingRepository=e}async handle(e,t){try{let{status:r}=Ac.parse({status:e.params.status}),i=await this.meetingRepository.findByStatus(r);return t.status(200).json(i)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as Aw}from"@asteasolutions/zod-to-openapi";import{MeetingFormat as Pw,MeetingStatus as Tw}from"@prisma/client";import yr from"zod";var Dw=1,Fw=10;Aw(yr);var Pc=yr.object({page:yr.coerce.number().min(1).default(Dw),limit:yr.coerce.number().min(1).default(Fw),title:yr.string().optional(),format:yr.enum(Pw).optional(),status:yr.enum(Tw).optional(),orderBy:yr.enum(["asc","desc"]).optional()}),Qi=class{constructor(e){this.meetingRepository=e}async handle(e,t){try{let{page:r,limit:i,...n}=Pc.parse(e.query),s=i*r-i,[m,c]=await Promise.all([this.meetingRepository.find({pagination:{offset:s,limit:i},filter:n}),this.meetingRepository.count({filter:n})]),d=Math.max(Math.ceil(c/i),1);t.status(200).json({page:r,totalPages:d,offset:s,limit:i,meetings:m})}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as Bw}from"@asteasolutions/zod-to-openapi";import{MeetingFormat as qw,MeetingStatus as Uw}from"@prisma/client";import qe from"zod";Bw(qe);var Tc=qe.object({id:qe.uuid(),title:qe.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio").optional(),scheduledAt:qe.coerce.date().optional(),format:qe.enum(qw).optional(),agenda:qe.string().min(1,"Pauta \xE9 obrigat\xF3ria").optional(),meetingLink:qe.string().url("Link da reuni\xE3o deve ser uma URL v\xE1lida").optional().or(qe.literal("")),location:qe.string().optional(),status:qe.enum(Uw).optional()}),en=class{constructor(e){this.meetingRepository=e}async handle(e,t){try{let{id:r,title:i,scheduledAt:n,format:s,agenda:m,meetingLink:c,location:d,status:h}=Tc.parse({id:e.params.id,...e.body});if(!await this.meetingRepository.findById(r))throw new p("A reuni\xE3o n\xE3o existe.");return await this.meetingRepository.update({id:r,title:i,scheduledAt:n,format:s,agenda:m,meetingLink:c||void 0,location:d||void 0,status:h}),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var Gw=A.object({id:A.uuid(),title:A.string(),publishedAt:A.date(),documentUrl:A.string(),meetingId:A.uuid(),createdAt:A.date(),updatedAt:A.date()}),Dc=A.object({id:A.uuid(),title:A.string(),scheduledAt:A.date(),format:A.enum(kw),agenda:A.string(),meetingLink:A.string().nullable(),location:A.string().nullable(),status:A.enum(Ow),minutes:Gw.nullable(),createdAt:A.date(),updatedAt:A.date()}),Ku={method:"post",path:"/meeting",tags:["Meetings"],summary:"Create a new meeting",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:vc}}}},responses:{201:{description:"Meeting created successfully",summary:"Meeting Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:A.object({errors:A.record(A.string(),A.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:A.object({message:A.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:A.object({message:A.string()})}}}}},Ju={method:"get",path:"/meeting",tags:["Meetings"],summary:"List all meetings with pagination and filters",request:{query:Pc},responses:{200:{description:"List of meetings retrieved successfully with pagination",summary:"Meetings Retrieved",content:{"application/json":{schema:A.object({page:A.number(),totalPages:A.number(),offset:A.number(),limit:A.number(),meetings:A.array(Dc)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:A.object({errors:A.record(A.string(),A.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:A.object({message:A.string()})}}}}},Yu={method:"get",path:"/meeting/{id}",tags:["Meetings"],summary:"Find meeting by ID",request:{params:Xi},responses:{200:{description:"Meeting details retrieved successfully",summary:"Meeting Retrieved",content:{"application/json":{schema:Dc}}},400:{description:"Invalid meeting ID format",summary:"Validation Error",content:{"application/json":{schema:A.object({errors:A.record(A.string(),A.string())})}}},404:{description:"Meeting not found with the provided ID",summary:"Meeting Not Found",content:{"application/json":{schema:A.object({message:A.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:A.object({message:A.string()})}}}}},Xu={method:"get",path:"/meeting/status/{status}",tags:["Meetings"],summary:"Find meetings by status",request:{params:Ac},responses:{200:{description:"Meetings retrieved successfully by status",summary:"Meetings Retrieved by Status",content:{"application/json":{schema:A.array(Dc)}}},400:{description:"Invalid status parameter provided",summary:"Validation Error",content:{"application/json":{schema:A.object({errors:A.record(A.string(),A.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:A.object({message:A.string()})}}}}},$u={method:"put",path:"/meeting/{id}",tags:["Meetings"],summary:"Update meeting",security:[{bearerAuth:[]}],request:{params:Xi,body:{content:{"application/json":{schema:Tc.omit({id:!0})}}}},responses:{200:{description:"Meeting updated successfully",summary:"Meeting Updated"},400:{description:"Invalid input data or meeting ID format",summary:"Validation Error",content:{"application/json":{schema:A.object({errors:A.record(A.string(),A.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:A.object({message:A.string()})}}},404:{description:"Meeting not found with the provided ID",summary:"Meeting Not Found",content:{"application/json":{schema:A.object({message:A.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:A.object({message:A.string()})}}}}},Qu={method:"delete",path:"/meeting/{id}",tags:["Meetings"],summary:"Delete meeting",security:[{bearerAuth:[]}],request:{params:jc},responses:{200:{description:"Meeting deleted successfully",summary:"Meeting Deleted"},400:{description:"Invalid meeting ID format",summary:"Validation Error",content:{"application/json":{schema:A.object({errors:A.record(A.string(),A.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:A.object({message:A.string()})}}},404:{description:"Meeting not found with the provided ID",summary:"Meeting Not Found",content:{"application/json":{schema:A.object({message:A.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:A.object({message:A.string()})}}}}};import U from"zod";import{extendZodWithOpenApi as Nw}from"@asteasolutions/zod-to-openapi";import Ce from"zod";var rg=2,eg=1024,Lw=eg*eg,Ww=rg*Lw;Nw(Ce);var Fc=Ce.object({name:Ce.string().min(1,"Nome \xE9 obrigat\xF3rio"),logo:Ce.any().refine(o=>o==null||typeof o!="object"||typeof o.size!="number"?!1:o.size<=Ww,`A imagem deve ter no m\xE1ximo ${rg}MB.`),city:Ce.string().optional(),state:Ce.string().optional(),country:Ce.string().optional(),description:Ce.string().optional(),website:Ce.url("URL do site deve ser v\xE1lida").optional(),email:Ce.email("Email deve ser v\xE1lido").optional(),phone:Ce.string().optional(),address:Ce.string().optional(),functioning:Ce.string().optional()}),rn=class{constructor(e,t){this.museumRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{name:r,logo:i,city:n,state:s,country:m,description:c,website:d,email:h,phone:E,address:F,functioning:X}=Fc.parse({...e.body,logo:e.file}),te=await this.museumRepository.create({name:r,city:n,state:s,country:m,description:c,website:d,email:h,phone:E,address:F,functioning:X}),se=await this.firebaseStorageService.uploadFile({file:i,id:te.id,folder:M.MUSEUM});return await this.museumRepository.update({id:te.id,logoUrl:se}),t.sendStatus(201)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as _w}from"@asteasolutions/zod-to-openapi";import Bc from"zod";_w(Bc);var qc=Bc.object({id:Bc.uuid()}),tn=class{constructor(e,t){this.museumRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{id:r}=qc.parse({id:e.params.id}),i=await this.museumRepository.findById(r);if(!i)throw new p("O museu n\xE3o existe.");return i.logoUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.logoUrl}),await this.museumRepository.deleteById(r),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as zw}from"@asteasolutions/zod-to-openapi";import Uc from"zod";zw(Uc);var nn=Uc.object({id:Uc.uuid()}),on=class{constructor(e){this.museumRepository=e}async handle(e,t){try{let{id:r}=nn.parse({id:e.params.id}),i=await this.museumRepository.findById(r);if(!i)throw new p("O museu n\xE3o existe.");return t.status(200).json(i)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as Hw}from"@asteasolutions/zod-to-openapi";import Ye from"zod";var Vw=1,Zw=9;Hw(Ye);var kc=Ye.object({page:Ye.coerce.number().min(1).default(Vw),limit:Ye.coerce.number().min(1).default(Zw),name:Ye.string().optional(),city:Ye.string().optional(),state:Ye.string().optional(),country:Ye.string().optional(),orderBy:Ye.enum(["asc","desc"]).optional()}),sn=class{constructor(e){this.museumRepository=e}async handle(e,t){try{let{page:r,limit:i,...n}=kc.parse(e.query),s=i*r-i,[m,c]=await Promise.all([this.museumRepository.find({pagination:{offset:s,limit:i},filter:n}),this.museumRepository.count({filter:n})]),d=Math.max(Math.ceil(c/i),1);t.status(200).json({page:r,totalPages:d,offset:s,limit:i,museums:m})}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as Kw}from"@asteasolutions/zod-to-openapi";import Re from"zod";var og=2,tg=1024,Jw=tg*tg,Yw=og*Jw;Kw(Re);var Oc=Re.object({id:Re.uuid(),name:Re.string().min(1,"Nome \xE9 obrigat\xF3rio").optional(),logo:Re.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=Yw,`A imagem deve ter no m\xE1ximo ${og}MB.`).optional(),city:Re.string().optional(),state:Re.string().optional(),country:Re.string().optional(),description:Re.string().optional(),website:Re.url("URL do site deve ser v\xE1lida").optional(),email:Re.string().email("Email deve ser v\xE1lido").optional(),phone:Re.string().optional(),address:Re.string().optional(),functioning:Re.string().optional()}),an=class{constructor(e,t){this.museumRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{id:r,name:i,logo:n,city:s,state:m,country:c,description:d,website:h,email:E,phone:F,address:X,functioning:te}=Oc.parse({id:e.params.id,...e.body,logo:e.file}),se=await this.museumRepository.findById(r);if(!se)throw new p("O museu n\xE3o existe.");let fe=se.logoUrl;if(n&&(fe=await this.firebaseStorageService.uploadFile({file:n,id:r,folder:"images/museums"})),!fe)throw new a("Logo URL \xE9 obrigat\xF3rio");return await this.museumRepository.update({id:r,name:i,logoUrl:fe,city:s,state:m,country:c,description:d,website:h,email:E,phone:F,address:X,functioning:te}),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var ig=U.object({id:U.uuid(),logoUrl:U.string().nullable(),name:U.string(),city:U.string().nullable(),state:U.string().nullable(),country:U.string().nullable(),description:U.string().nullable(),website:U.string().nullable(),email:U.string().nullable(),phone:U.string().nullable(),address:U.string().nullable(),functioning:U.string().nullable(),createdAt:U.date(),updatedAt:U.date()}),ng={method:"post",path:"/museum",tags:["Museums"],summary:"Create a new museum with logo upload",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:Fc}}}},responses:{201:{description:"Museum created successfully",summary:"Museum Created"},400:{description:"Invalid input data, missing required fields, or invalid logo format/size",summary:"Validation Error",content:{"application/json":{schema:U.object({errors:U.record(U.string(),U.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:U.object({message:U.string()})}}},409:{description:"Museum with this name already exists",summary:"Conflict",content:{"application/json":{schema:U.object({message:U.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:U.object({message:U.string()})}}}}},sg={method:"get",path:"/museum",tags:["Museums"],summary:"List all museums with pagination and filters",request:{query:kc},responses:{200:{description:"List of museums retrieved successfully with pagination",summary:"Museums Retrieved",content:{"application/json":{schema:U.object({page:U.number(),totalPages:U.number(),offset:U.number(),limit:U.number(),museums:U.array(ig)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:U.object({errors:U.record(U.string(),U.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:U.object({message:U.string()})}}}}},ag={method:"get",path:"/museum/{id}",tags:["Museums"],summary:"Find museum by ID",request:{params:nn},responses:{200:{description:"Museum details retrieved successfully",summary:"Museum Retrieved",content:{"application/json":{schema:ig}}},400:{description:"Invalid museum ID format",summary:"Validation Error",content:{"application/json":{schema:U.object({errors:U.record(U.string(),U.string())})}}},404:{description:"Museum not found with the provided ID",summary:"Museum Not Found",content:{"application/json":{schema:U.object({message:U.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:U.object({message:U.string()})}}}}},mg={method:"put",path:"/museum/{id}",tags:["Museums"],summary:"Update museum with optional logo upload",security:[{bearerAuth:[]}],request:{params:nn,body:{content:{"multipart/form-data":{schema:Oc.omit({id:!0})}}}},responses:{200:{description:"Museum updated successfully",summary:"Museum Updated"},400:{description:"Invalid input data, museum ID format, or invalid logo format/size",summary:"Validation Error",content:{"application/json":{schema:U.object({errors:U.record(U.string(),U.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:U.object({message:U.string()})}}},404:{description:"Museum not found with the provided ID",summary:"Museum Not Found",content:{"application/json":{schema:U.object({message:U.string()})}}},409:{description:"Museum with this name already exists",summary:"Conflict",content:{"application/json":{schema:U.object({message:U.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:U.object({message:U.string()})}}}}},cg={method:"delete",path:"/museum/{id}",tags:["Museums"],summary:"Delete museum",security:[{bearerAuth:[]}],request:{params:qc},responses:{200:{description:"Museum deleted successfully",summary:"Museum Deleted"},400:{description:"Invalid museum ID format",summary:"Validation Error",content:{"application/json":{schema:U.object({errors:U.record(U.string(),U.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:U.object({message:U.string()})}}},404:{description:"Museum not found with the provided ID",summary:"Museum Not Found",content:{"application/json":{schema:U.object({message:U.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:U.object({message:U.string()})}}}}};import q from"zod";import{extendZodWithOpenApi as Xw}from"@asteasolutions/zod-to-openapi";import ro from"zod";var $w=5,pg=1024,Qw=pg*pg,eS=$w*Qw;Xw(ro);var Gc=ro.object({title:ro.string().min(1),content:ro.string().min(1),image:ro.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=eS,{message:"A imagem deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB."})}),mn=class{constructor(e,t){this.newsRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{title:r,content:i,image:n}=Gc.parse({...e.body,image:e.file}),s=e.user.id,m=await this.firebaseStorageService.uploadFile({file:n,folder:M.NEWS,id:s});await this.newsRepository.create({title:r,content:i,authorId:s,imageUrl:m}),t.sendStatus(201)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as rS}from"@asteasolutions/zod-to-openapi";import hr from"zod";var tS=1,oS=7;rS(hr);var pn=hr.object({page:hr.coerce.number().min(1).default(tS),limit:hr.coerce.number().min(1).default(oS),authorId:hr.string(),title:hr.string().optional(),content:hr.string().optional(),orderBy:hr.enum(["asc","desc"]).default("desc")}),cn=class{constructor(e){this.newsRepository=e}async handle(e,t){try{let{page:r,limit:i,authorId:n,...s}=pn.parse(e.query),m=i*r-i,[c,d]=await Promise.all([this.newsRepository.findByAuthorId({authorId:n,pagination:{offset:m,limit:i},filter:s}),this.newsRepository.count({filter:{authorId:n,...s}})]),h=Math.max(Math.ceil(d/i),1);t.status(200).json({page:r,totalPages:h,offset:m,limit:i,news:c})}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as iS}from"@asteasolutions/zod-to-openapi";import Nc from"zod";iS(Nc);var Lc=Nc.object({id:Nc.string()}),dn=class{constructor(e){this.newsRepository=e}async handle(e,t){try{let{id:r}=Lc.parse(e.params),i=await this.newsRepository.findById(r);if(!i)throw new p("Not\xEDcia n\xE3o encontrada.");t.status(200).json(i)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as nS}from"@asteasolutions/zod-to-openapi";import Rr from"zod";var sS=1,aS=9;nS(Rr);var Wc=Rr.object({page:Rr.coerce.number().min(1).default(sS),limit:Rr.coerce.number().min(1).default(aS),title:Rr.string().optional(),content:Rr.string().optional(),authorId:Rr.string().optional(),orderBy:Rr.enum(["asc","desc"]).default("desc")}),ln=class{constructor(e){this.newsRepository=e}async handle(e,t){try{let{page:r,limit:i,...n}=Wc.parse(e.query),s=i*r-i,[m,c]=await Promise.all([this.newsRepository.find({pagination:{offset:s,limit:i},filter:n}),this.newsRepository.count({filter:n})]),d=Math.max(Math.ceil(c/i),1);t.status(200).json({page:r,totalPages:d,offset:s,limit:i,news:m})}catch(r){if(r instanceof Error)throw new a(r.message)}}};var dg={method:"post",path:"/news",tags:["News"],summary:"Create news",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:Gc}}}},responses:{201:{description:"News article created successfully",summary:"News Created",content:{"application/json":{schema:q.object({message:q.string()})}}},400:{description:"Invalid input data or file format",summary:"Validation Error",content:{"application/json":{schema:q.object({errors:q.record(q.string(),q.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:q.object({message:q.string()})}}}}},lg={method:"get",path:"/news",tags:["News"],summary:"List news",request:{query:Wc},responses:{200:{description:"Paginated list of news articles retrieved successfully",summary:"News Retrieved",content:{"application/json":{schema:q.object({page:q.number(),totalPages:q.number(),offset:q.number(),limit:q.number(),news:q.array(q.object({title:q.string(),content:q.string(),id:q.string(),createdAt:q.date(),updatedAt:q.date(),imageUrl:q.string().nullable()}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:q.object({errors:q.record(q.string(),q.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:q.object({message:q.string()})}}}}},ug={method:"get",path:"/news/{id}",tags:["News"],summary:"Find news by ID",request:{params:Lc},responses:{200:{description:"News article details retrieved successfully",summary:"News Retrieved",content:{"application/json":{schema:q.object({page:q.number(),totalPages:q.number(),offset:q.number(),limit:q.number(),news:q.object({title:q.string(),content:q.string(),id:q.string(),createdAt:q.date(),updatedAt:q.date(),imageUrl:q.string().nullable()})})}}},400:{description:"Invalid news ID format",summary:"Validation Error",content:{"application/json":{schema:q.object({errors:q.record(q.string(),q.string())})}}},404:{description:"News article not found with the provided ID",summary:"News Not Found",content:{"application/json":{schema:q.object({message:q.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:q.object({message:q.string()})}}}}},gg={method:"get",path:"/news/author/{author_id}",tags:["News"],summary:"List news by author",request:{params:pn.pick({authorId:!0}).transform(()=>({author_id:""})),query:pn.omit({authorId:!0})},responses:{200:{description:"Paginated list of news articles by author retrieved successfully",summary:"Author News Retrieved",content:{"application/json":{schema:q.object({page:q.number(),totalPages:q.number(),offset:q.number(),limit:q.number(),news:q.array(q.object({title:q.string(),content:q.string(),id:q.string(),createdAt:q.date(),updatedAt:q.date(),imageUrl:q.string().nullable()}))})}}},400:{description:"Invalid author ID or query parameters",summary:"Validation Error",content:{"application/json":{schema:q.object({errors:q.record(q.string(),q.string())})}}},404:{description:"Author not found with the provided ID",summary:"Author Not Found",content:{"application/json":{schema:q.object({message:q.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:q.object({message:q.string()})}}}}};import G from"zod";import{extendZodWithOpenApi as mS}from"@asteasolutions/zod-to-openapi";import _e from"zod";var yg=2,fg=1024,cS=fg*fg,pS=yg*cS;mS(_e);var _c=_e.object({name:_e.string().min(1,"Nome \xE9 obrigat\xF3rio"),logo:_e.any().refine(o=>o==null||typeof o!="object"||typeof o.size!="number"?!1:o.size<=pS,`A imagem deve ter no m\xE1ximo ${yg}MB.`),websiteUrl:_e.url("URL do site deve ser v\xE1lida").optional(),description:_e.string().optional(),category:_e.string().optional(),since:_e.coerce.date(),isActive:_e.preprocess(o=>o==="true",_e.boolean().optional())}),un=class{constructor(e,t){this.partnerRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{name:r,logo:i,websiteUrl:n,description:s,category:m,since:c,isActive:d}=_c.parse({...e.body,logo:e.file}),h=await this.partnerRepository.create({name:r,websiteUrl:n,description:s,category:m,since:c,isActive:d}),E=await this.firebaseStorageService.uploadFile({file:i,id:h.id,folder:M.PARTNER});return await this.partnerRepository.update({id:h.id,logoUrl:E}),t.sendStatus(201)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as dS}from"@asteasolutions/zod-to-openapi";import zc from"zod";dS(zc);var Hc=zc.object({id:zc.uuid()}),gn=class{constructor(e,t){this.partnerRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{id:r}=Hc.parse({id:e.params.id}),i=await this.partnerRepository.findById(r);if(!i)throw new p("O parceiro n\xE3o existe.");return i.logoUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.logoUrl}),await this.partnerRepository.deleteById(r),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as lS}from"@asteasolutions/zod-to-openapi";import Vc from"zod";lS(Vc);var yn=Vc.object({id:Vc.uuid()}),fn=class{constructor(e){this.partnerRepository=e}async handle(e,t){try{let{id:r}=yn.parse({id:e.params.id}),i=await this.partnerRepository.findById(r);if(!i)throw new p("O parceiro n\xE3o existe.");return t.status(200).json(i)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as uS}from"@asteasolutions/zod-to-openapi";import Xe from"zod";var gS=1,fS=9;uS(Xe);var Zc=Xe.object({page:Xe.coerce.number().min(1).default(gS),limit:Xe.coerce.number().min(1).default(fS),name:Xe.string().optional(),description:Xe.string().optional(),category:Xe.string().optional(),isActive:Xe.coerce.boolean().optional(),orderBy:Xe.enum(["asc","desc"]).optional()}),hn=class{constructor(e){this.partnerRepository=e}async handle(e,t){try{let{page:r,limit:i,...n}=Zc.parse(e.query),s=i*r-i,[m,c]=await Promise.all([this.partnerRepository.find({pagination:{offset:s,limit:i},filter:n}),this.partnerRepository.count({filter:n})]),d=Math.max(Math.ceil(c/i),1);t.status(200).json({page:r,totalPages:d,offset:s,limit:i,partners:m})}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as yS}from"@asteasolutions/zod-to-openapi";import Ue from"zod";var Rg=2,hg=1024,hS=hg*hg,RS=Rg*hS;yS(Ue);var Kc=Ue.object({id:Ue.uuid(),name:Ue.string().min(1,"Nome \xE9 obrigat\xF3rio").optional(),logo:Ue.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=RS,`A imagem deve ter no m\xE1ximo ${Rg}MB.`).optional(),websiteUrl:Ue.url("URL do site deve ser v\xE1lida").optional(),description:Ue.string().optional(),category:Ue.string().optional(),since:Ue.coerce.date().optional(),isActive:Ue.preprocess(o=>o==="true",Ue.boolean().optional())}),Rn=class{constructor(e,t){this.partnerRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{id:r,name:i,logo:n,websiteUrl:s,description:m,category:c,since:d,isActive:h}=Kc.parse({id:e.params.id,...e.body,logo:e.file}),E=await this.partnerRepository.findById(r);if(!E)throw new p("O parceiro n\xE3o existe.");let F=E.logoUrl;if(n&&(F=await this.firebaseStorageService.uploadFile({file:n,id:r,folder:"images/partners"})),!F)throw new a("Logo URL \xE9 obrigat\xF3rio");return await this.partnerRepository.update({id:r,name:i,logoUrl:F,websiteUrl:s,description:m,category:c,since:d,isActive:h}),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var Ig=G.object({id:G.uuid(),name:G.string(),logoUrl:G.string(),description:G.string().nullable(),category:G.string().nullable(),since:G.date(),isActive:G.boolean(),createdAt:G.date(),updatedAt:G.date()}),bg={method:"post",path:"/partner",tags:["Partners"],summary:"Create a new partner with logo upload",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:_c}}}},responses:{201:{description:"Partner created successfully",summary:"Partner Created"},400:{description:"Invalid input data, missing required fields, or invalid logo format/size",summary:"Validation Error",content:{"application/json":{schema:G.object({errors:G.record(G.string(),G.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:G.object({message:G.string()})}}},409:{description:"Partner with this name already exists",summary:"Conflict",content:{"application/json":{schema:G.object({message:G.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:G.object({message:G.string()})}}}}},Cg={method:"get",path:"/partner",tags:["Partners"],summary:"List all partners with pagination and filters",request:{query:Zc},responses:{200:{description:"List of partners retrieved successfully with pagination",summary:"Partners Retrieved",content:{"application/json":{schema:G.object({page:G.number(),totalPages:G.number(),offset:G.number(),limit:G.number(),partners:G.array(Ig)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:G.object({errors:G.record(G.string(),G.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:G.object({message:G.string()})}}}}},wg={method:"get",path:"/partner/{id}",tags:["Partners"],summary:"Find partner by ID",request:{params:yn},responses:{200:{description:"Partner details retrieved successfully",summary:"Partner Retrieved",content:{"application/json":{schema:Ig}}},400:{description:"Invalid partner ID format",summary:"Validation Error",content:{"application/json":{schema:G.object({errors:G.record(G.string(),G.string())})}}},404:{description:"Partner not found with the provided ID",summary:"Partner Not Found",content:{"application/json":{schema:G.object({message:G.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:G.object({message:G.string()})}}}}},Sg={method:"put",path:"/partner/{id}",tags:["Partners"],summary:"Update partner with optional logo upload",security:[{bearerAuth:[]}],request:{params:yn,body:{content:{"multipart/form-data":{schema:Kc.omit({id:!0})}}}},responses:{200:{description:"Partner updated successfully",summary:"Partner Updated"},400:{description:"Invalid input data, partner ID format, or invalid logo format/size",summary:"Validation Error",content:{"application/json":{schema:G.object({errors:G.record(G.string(),G.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:G.object({message:G.string()})}}},404:{description:"Partner not found with the provided ID",summary:"Partner Not Found",content:{"application/json":{schema:G.object({message:G.string()})}}},409:{description:"Partner with this name already exists",summary:"Conflict",content:{"application/json":{schema:G.object({message:G.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:G.object({message:G.string()})}}}}},vg={method:"delete",path:"/partner/{id}",tags:["Partners"],summary:"Delete partner",security:[{bearerAuth:[]}],request:{params:Hc},responses:{200:{description:"Partner deleted successfully",summary:"Partner Deleted"},400:{description:"Invalid partner ID format",summary:"Validation Error",content:{"application/json":{schema:G.object({errors:G.record(G.string(),G.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:G.object({message:G.string()})}}},404:{description:"Partner not found with the provided ID",summary:"Partner Not Found",content:{"application/json":{schema:G.object({message:G.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:G.object({message:G.string()})}}}}};import{$Enums as Eg}from"@prisma/client";import L from"zod";import{extendZodWithOpenApi as IS}from"@asteasolutions/zod-to-openapi";import{PendencyStatus as bS}from"@prisma/client";import Ir from"zod";IS(Ir);var bn=Ir.object({userId:Ir.uuid(),title:Ir.string().min(1),description:Ir.string().optional(),status:Ir.enum(bS).default("PENDING"),dueDate:Ir.coerce.date().optional(),document:Ir.any().refine(o=>o&&typeof o=="object"&&o.size>0,"Arquivo do documento \xE9 obrigat\xF3rio")}),In=class{constructor(e,t,r){this.userRepository=e;this.pendencyRepository=t;this.firebaseStorageService=r}async handle(e,t){try{let{userId:r,title:i,description:n,status:s,dueDate:m,document:c}=bn.parse({...e.body,userId:e.params.user_id,document:e.file});if(!await this.userRepository.findById(r))throw new ye("O usu\xE1rio n\xE3o existe.");let h=await this.firebaseStorageService.uploadFile({file:c,id:r,folder:M.PENDENCY});return await this.pendencyRepository.create({userId:r,title:i,description:n,status:s,dueDate:m,documentUrl:h}),t.sendStatus(201)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as CS}from"@asteasolutions/zod-to-openapi";import Jc from"zod";CS(Jc);var Yc=Jc.object({id:Jc.uuid()}),Cn=class{constructor(e,t){this.pendencyRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{id:r}=Yc.parse({id:e.params.pendency_id}),i=await this.pendencyRepository.findById(r);if(!i)throw new p("A pend\xEAncia n\xE3o existe.");return await Promise.all([this.pendencyRepository.deleteById(i.id),this.firebaseStorageService.deleteFile({fileUrl:i.documentUrl})]),t.sendStatus(204)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as wS}from"@asteasolutions/zod-to-openapi";import{PendencyStatus as SS}from"@prisma/client";import $e from"zod";var vS=1,ES=6;wS($e);var Xc=$e.object({page:$e.coerce.number().min(1).default(vS),limit:$e.coerce.number().min(1).default(ES),title:$e.string().optional(),description:$e.string().optional(),status:$e.enum(SS).default("PENDING"),userId:$e.uuid().optional(),orderBy:$e.enum(["asc","desc"]).default("desc")}),wn=class{constructor(e){this.pendencyRepository=e}async handle(e,t){try{let{description:r,limit:i,orderBy:n,page:s,title:m,status:c,userId:d}=Xc.parse(e.query),h=s*i-i,[E,F]=await Promise.all([this.pendencyRepository.find({pagination:{offset:h,limit:i},filter:{title:m,description:r,status:c,orderBy:n,userId:d}}),this.pendencyRepository.count({filter:{title:m,description:r,status:c,userId:d}})]),X=Math.max(Math.ceil(F/i),1);return t.status(200).json({page:s,totalPages:X,offset:h,limit:i,pendencies:E})}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as jS}from"@asteasolutions/zod-to-openapi";import $c from"zod";jS($c);var Qc=$c.object({pendencyId:$c.uuid()}),Sn=class{constructor(e){this.pendencyRepository=e}async handle(e,t){try{let{pendencyId:r}=Qc.parse({pendencyId:e.params.pendency_id}),i=await this.pendencyRepository.findById(r);if(!i)throw new p("Pend\xEAncia n\xE3o encontrada.");return t.status(200).json(i)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as xS}from"@asteasolutions/zod-to-openapi";import{PendencyStatus as MS}from"@prisma/client";import br from"zod";xS(br);var En=br.object({id:br.uuid(),title:br.string().min(1),description:br.string().optional(),status:br.enum(MS),dueDate:br.coerce.date().optional(),document:br.any().refine(o=>o==null||typeof o=="object"&&typeof o.size=="number"&&(o.size===0||o.size>0),"Arquivo do documento \xE9 inv\xE1lido").optional()}),vn=class{constructor(e,t){this.pendencyRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{document:r,id:i,...n}=En.parse({...e.body,id:e.params.pendency_id,document:e.file}),s=await this.pendencyRepository.findById(i);if(!s)throw new ye("A pend\xEAncia n\xE3o existe");let m=s.documentUrl;return r&&r.size>0&&(m=await this.firebaseStorageService.updateFile({file:r,id:s.userId,folder:M.PENDENCY,fileUrl:s.documentUrl})),await this.pendencyRepository.update({...n,id:i,documentUrl:m}),t.sendStatus(204)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var jg={method:"post",path:"/pendency/{user_id}",tags:["Pendencies"],summary:"Create pendency for user",security:[{bearerAuth:[]}],request:{params:bn.pick({userId:!0}).transform(()=>({user_id:""})),body:{content:{"multipart/form-data":{schema:bn.omit({userId:!0})}}}},responses:{201:{description:"Pendency created successfully for the user",summary:"Pendency Created",content:{"application/json":{schema:L.object({})}}},400:{description:"Invalid input data or file format",summary:"Validation Error",content:{"application/json":{schema:L.object({errors:L.record(L.string(),L.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:L.object({message:L.string()})}}}}},xg={method:"get",path:"/pendency",tags:["Pendencies"],summary:"List pendencies",security:[{bearerAuth:[]}],request:{query:Xc},responses:{200:{description:"Paginated list of pendencies retrieved successfully",summary:"Pendencies Retrieved",content:{"application/json":{schema:L.object({page:L.number(),totalPages:L.number(),offset:L.number(),limit:L.number(),pendencies:L.array(L.object({id:L.string(),title:L.string(),description:L.string().nullable(),status:L.enum(Eg.PendencyStatus),dueDate:L.date().nullable(),documentUrl:L.string(),userId:L.string(),createdAt:L.date(),updatedAt:L.date()}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:L.object({errors:L.record(L.string(),L.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:L.object({message:L.string()})}}}}},Mg={method:"get",path:"/pendency/{pendency_id}",tags:["Pendencies"],summary:"Find pendency by ID",security:[{bearerAuth:[]}],request:{params:Qc},responses:{200:{description:"Pendency details retrieved successfully",summary:"Pendency Retrieved",content:{"application/json":{schema:L.object({id:L.string(),title:L.string(),description:L.string().nullable(),status:L.enum(Eg.PendencyStatus),dueDate:L.date().nullable(),documentUrl:L.string(),userId:L.string(),createdAt:L.date(),updatedAt:L.date()}).nullable()}}},400:{description:"Invalid pendency ID format",summary:"Validation Error",content:{"application/json":{schema:L.object({errors:L.record(L.string(),L.string())})}}},404:{description:"Pendency not found with the provided ID",summary:"Pendency Not Found",content:{"application/json":{schema:L.object({message:L.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:L.object({message:L.string()})}}}}},Ag={method:"put",path:"/pendency/{pendency_id}",tags:["Pendencies"],summary:"Update pendency",security:[{bearerAuth:[]}],request:{params:En.pick({id:!0}).transform(()=>({pendency_id:""})),body:{content:{"multipart/form-data":{schema:En.omit({id:!0})}}}},responses:{204:{description:"Pendency updated successfully",summary:"Pendency Updated"},400:{description:"Invalid input data or pendency does not exist",summary:"Validation Error",content:{"application/json":{schema:L.object({errors:L.record(L.string(),L.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:L.object({message:L.string()})}}}}},Pg={method:"delete",path:"/pendency/{pendency_id}",tags:["Pendencies"],summary:"Delete pendency",security:[{bearerAuth:[]}],request:{params:Yc},responses:{204:{description:"Pendency deleted successfully",summary:"Pendency Deleted"},400:{description:"Invalid pendency ID format",summary:"Validation Error",content:{"application/json":{schema:L.object({errors:L.record(L.string(),L.string())})}}},404:{description:"Pendency not found with the provided ID",summary:"Pendency Not Found",content:{"application/json":{schema:L.object({message:L.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:L.object({message:L.string()})}}}}};import j from"zod";import{extendZodWithOpenApi as AS}from"@asteasolutions/zod-to-openapi";import ep from"zod";AS(ep);var rp=ep.object({id:ep.uuid()}),jn=class{constructor(e,t){this.postGraduateProgramRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{id:r}=rp.parse({id:e.params.id}),i=await this.postGraduateProgramRepository.findById(r);if(!i)throw new p("O programa de p\xF3s-gradua\xE7\xE3o n\xE3o existe.");return i.imageUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.imageUrl}),await this.postGraduateProgramRepository.deleteById(r),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as PS}from"@asteasolutions/zod-to-openapi";import tp from"zod";PS(tp);var op=tp.object({id:tp.uuid()}),xn=class{constructor(e){this.postGraduateProgramRepository=e}async handle(e,t){try{let{id:r}=op.parse({id:e.params.id}),i=await this.postGraduateProgramRepository.findById(r);if(!i)throw new p("Programa de p\xF3s-gradua\xE7\xE3o n\xE3o encontrado.");return t.status(200).json(i)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as TS}from"@asteasolutions/zod-to-openapi";import Cr from"zod";var DS=1,FS=6;TS(Cr);var ip=Cr.object({page:Cr.coerce.number().min(1).default(DS),limit:Cr.coerce.number().min(1).default(FS),title:Cr.string().optional(),description:Cr.string().optional(),contact:Cr.string().optional(),orderBy:Cr.enum(["asc","desc"]).default("desc")}),Mn=class{constructor(e){this.postGraduateProgramRepository=e}async handle(e,t){try{let{limit:r,page:i,...n}=ip.parse(e.query),s=i*r-r,[m,c]=await Promise.all([this.postGraduateProgramRepository.find({pagination:{offset:s,limit:r},filter:n}),this.postGraduateProgramRepository.count({filter:n})]),d=Math.max(Math.ceil(c/r),1);return t.status(200).json({page:i,totalPages:d,offset:s,limit:r,postGraduatePrograms:m})}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as BS}from"@asteasolutions/zod-to-openapi";import ze from"zod";var Dg=5,Tg=1024,qS=Tg*Tg,US=Dg*qS;BS(ze);var np=ze.object({id:ze.uuid(),title:ze.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio.").optional(),description:ze.string().optional(),startDate:ze.coerce.date().optional(),endDate:ze.coerce.date().optional(),contact:ze.string().min(1,"Contato \xE9 obrigat\xF3rio.").optional(),registrationLink:ze.url("URL de inscri\xE7\xE3o deve ser v\xE1lida").optional(),image:ze.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=US,`A imagem deve ter no m\xE1ximo ${Dg}MB.`).optional()}),An=class{constructor(e,t){this.postGraduateProgramRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{id:r,image:i,title:n,description:s,startDate:m,endDate:c,contact:d,registrationLink:h}=np.parse({id:e.params.id,...e.body,image:e.file}),E=await this.postGraduateProgramRepository.findById(r);if(!E)throw new p("O programa de p\xF3s-gradua\xE7\xE3o n\xE3o existe.");let F=E.imageUrl;if(i&&(F=await this.firebaseStorageService.uploadFile({file:i,id:r,folder:M.POST_GRADUATE_PROGRAM})),!F)throw new a("URL da imagem \xE9 obrigat\xF3rio");return await this.postGraduateProgramRepository.update({id:r,title:n,description:s,startDate:m,endDate:c,contact:d,registrationLink:h,imageUrl:F}),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var Fg={method:"post",path:"/post-graduate-programs",tags:["Post Graduate Programs"],summary:"Create post-graduate program",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:j.object({title:j.string().min(1).openapi({description:"T\xEDtulo do programa"}),description:j.string().optional().openapi({description:"Descri\xE7\xE3o do programa"}),startDate:j.string().openapi({description:"Data de in\xEDcio (ISO 8601)",example:"2024-01-01T10:00:00Z"}),endDate:j.string().openapi({description:"Data de t\xE9rmino (ISO 8601)",example:"2024-12-31T10:00:00Z"}),contact:j.string().min(1).openapi({description:"Informa\xE7\xF5es de contato"}),registrationLink:j.string().url().optional().openapi({description:"Link de inscri\xE7\xE3o"}),image:j.string().optional().openapi({description:"Imagem do programa (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{201:{description:"Post-graduate program created successfully",summary:"Program Created"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:j.object({errors:j.record(j.string(),j.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:j.object({message:j.string()})}}}}},Bg={method:"get",path:"/post-graduate-programs",tags:["Post Graduate Programs"],summary:"List post-graduate programs",security:[{bearerAuth:[]}],request:{query:ip},responses:{200:{description:"Paginated list of post-graduate programs retrieved successfully",summary:"Programs Retrieved",content:{"application/json":{schema:j.object({page:j.number(),totalPages:j.number(),offset:j.number(),limit:j.number(),postGraduatePrograms:j.array(j.object({id:j.string(),title:j.string(),imageUrl:j.string().nullable(),description:j.string().nullable(),startDate:j.date(),endDate:j.date(),contact:j.string(),registrationLink:j.string().nullable(),createdAt:j.date(),updatedAt:j.date()}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:j.object({errors:j.record(j.string(),j.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:j.object({message:j.string()})}}}}},qg={method:"get",path:"/post-graduate-programs/{id}",tags:["Post Graduate Programs"],summary:"Find post-graduate program by ID",security:[{bearerAuth:[]}],request:{params:op},responses:{200:{description:"Post-graduate program details retrieved successfully",summary:"Program Retrieved",content:{"application/json":{schema:j.object({id:j.string(),title:j.string(),imageUrl:j.string().nullable(),description:j.string().nullable(),startDate:j.date(),endDate:j.date(),contact:j.string(),registrationLink:j.string().nullable(),createdAt:j.date(),updatedAt:j.date()}).nullable()}}},400:{description:"Invalid program ID format",summary:"Validation Error",content:{"application/json":{schema:j.object({errors:j.record(j.string(),j.string())})}}},404:{description:"Post-graduate program not found with the provided ID",summary:"Program Not Found",content:{"application/json":{schema:j.object({message:j.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:j.object({message:j.string()})}}}}},Ug={method:"put",path:"/post-graduate-programs/{id}",tags:["Post Graduate Programs"],summary:"Update post-graduate program",security:[{bearerAuth:[]}],request:{params:np.pick({id:!0}),body:{content:{"multipart/form-data":{schema:j.object({title:j.string().min(1).optional().openapi({description:"T\xEDtulo do programa"}),description:j.string().optional().openapi({description:"Descri\xE7\xE3o do programa"}),startDate:j.string().optional().openapi({description:"Data de in\xEDcio (ISO 8601)",example:"2024-01-01T10:00:00Z"}),endDate:j.string().optional().openapi({description:"Data de t\xE9rmino (ISO 8601)",example:"2024-12-31T10:00:00Z"}),contact:j.string().min(1).optional().openapi({description:"Informa\xE7\xF5es de contato"}),registrationLink:j.string().url().optional().openapi({description:"Link de inscri\xE7\xE3o"}),image:j.string().optional().openapi({description:"Imagem do programa (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{200:{description:"Post-graduate program updated successfully",summary:"Program Updated"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:j.object({errors:j.record(j.string(),j.string())})}}},404:{description:"Post-graduate program not found with the provided ID",summary:"Program Not Found",content:{"application/json":{schema:j.object({message:j.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:j.object({message:j.string()})}}}}},kg={method:"delete",path:"/post-graduate-programs/{id}",tags:["Post Graduate Programs"],summary:"Delete post-graduate program",security:[{bearerAuth:[]}],request:{params:rp},responses:{200:{description:"Post-graduate program deleted successfully",summary:"Program Deleted"},400:{description:"Invalid program ID format",summary:"Validation Error",content:{"application/json":{schema:j.object({errors:j.record(j.string(),j.string())})}}},404:{description:"Post-graduate program not found with the provided ID",summary:"Program Not Found",content:{"application/json":{schema:j.object({message:j.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:j.object({message:j.string()})}}}}};import{$Enums as LS}from"@prisma/client";import H from"zod";import{extendZodWithOpenApi as kS}from"@asteasolutions/zod-to-openapi";import to from"zod";kS(to);var sp=to.object({role:to.string().min(1),description:to.string().optional(),userId:to.uuid()}),Pn=class{constructor(e){this.referenceCenterTeamMemberRepository=e}async handle(e,t){try{let{role:r,description:i,userId:n}=sp.parse(e.body);return await this.referenceCenterTeamMemberRepository.create({role:r,description:i,userId:n}),t.sendStatus(201)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as OS}from"@asteasolutions/zod-to-openapi";import ap from"zod";OS(ap);var mp=ap.object({id:ap.uuid()}),Tn=class{constructor(e){this.referenceCenterTeamMemberRepository=e}async handle(e,t){try{let{id:r}=mp.parse({id:e.params.id});if(!await this.referenceCenterTeamMemberRepository.findById(r))throw new p("O membro do centro de refer\xEAncia n\xE3o existe.");return await this.referenceCenterTeamMemberRepository.deleteById(r),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as GS}from"@asteasolutions/zod-to-openapi";import cp from"zod";GS(cp);var Fn=cp.object({id:cp.uuid()}),Dn=class{constructor(e){this.referenceCenterTeamMemberRepository=e}async handle(e,t){try{let{id:r}=Fn.parse({id:e.params.id}),i=await this.referenceCenterTeamMemberRepository.findById(r);if(!i)throw new p("O membro do centro de refer\xEAncia n\xE3o existe.");return t.status(200).json(i)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as NS}from"@asteasolutions/zod-to-openapi";import ht from"zod";NS(ht);var pp=ht.object({id:ht.uuid(),role:ht.string().min(1).optional(),description:ht.string().optional(),userId:ht.uuid().optional()}),Bn=class{constructor(e){this.referenceCenterTeamMemberRepository=e}async handle(e,t){try{let{id:r,role:i,description:n,userId:s}=pp.parse({id:e.params.id,...e.body});if(!await this.referenceCenterTeamMemberRepository.findById(r))throw new p("O membro do centro de refer\xEAncia n\xE3o existe.");return await this.referenceCenterTeamMemberRepository.update({id:r,role:i,description:n,userId:s}),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var WS=H.object({id:H.uuid(),name:H.string(),emailAddress:H.string(),avatarUrl:H.string().nullable(),orcid:H.string().nullable(),phone:H.string().nullable(),lattesUrl:H.string().nullable(),role:H.enum(LS.UserRole)}),Og=H.object({id:H.uuid(),role:H.string(),description:H.string().nullable(),createdAt:H.date(),updatedAt:H.date(),userId:H.uuid(),user:WS}),Gg={method:"post",path:"/reference-center-team-member",tags:["Reference Center Team Members"],summary:"Create a new Reference Center Team Member",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:sp}}}},responses:{201:{description:"Reference Center Team Member created successfully",summary:"Reference Center Team Member Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:H.object({errors:H.record(H.string(),H.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:H.object({message:H.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:H.object({message:H.string()})}}}}},Ng={method:"get",path:"/reference-center-team-member",tags:["Reference Center Team Members"],summary:"List all Reference Center Team Members with filters",request:{query:H.object({role:H.string().optional(),orderBy:H.enum(["asc","desc"]).optional()})},responses:{200:{description:"List of Reference Center Team Members retrieved successfully",summary:"Reference Center Team Members Retrieved",content:{"application/json":{schema:H.object({members:H.array(Og)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:H.object({message:H.string()})}}}}},Lg={method:"get",path:"/reference-center-team-member/{id}",tags:["Reference Center Team Members"],summary:"Find Reference Center Team Member by ID",request:{params:Fn},responses:{200:{description:"Reference Center Team Member details retrieved successfully",summary:"Reference Center Team Member Retrieved",content:{"application/json":{schema:Og}}},400:{description:"Invalid Reference Center Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:H.object({errors:H.record(H.string(),H.string())})}}},404:{description:"Reference Center Team Member not found with the provided ID",summary:"Reference Center Team Member Not Found",content:{"application/json":{schema:H.object({message:H.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:H.object({message:H.string()})}}}}},Wg={method:"put",path:"/reference-center-team-member/{id}",tags:["Reference Center Team Members"],summary:"Update Reference Center Team Member",security:[{bearerAuth:[]}],request:{params:Fn,body:{content:{"application/json":{schema:pp.omit({id:!0})}}}},responses:{200:{description:"Reference Center Team Member updated successfully",summary:"Reference Center Team Member Updated"},400:{description:"Invalid input data or Reference Center Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:H.object({errors:H.record(H.string(),H.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:H.object({message:H.string()})}}},404:{description:"Reference Center Team Member not found with the provided ID",summary:"Reference Center Team Member Not Found",content:{"application/json":{schema:H.object({message:H.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:H.object({message:H.string()})}}}}},_g={method:"delete",path:"/reference-center-team-member/{id}",tags:["Reference Center Team Members"],summary:"Delete Reference Center Team Member",security:[{bearerAuth:[]}],request:{params:mp},responses:{200:{description:"Reference Center Team Member deleted successfully",summary:"Reference Center Team Member Deleted"},400:{description:"Invalid Reference Center Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:H.object({errors:H.record(H.string(),H.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:H.object({message:H.string()})}}},404:{description:"Reference Center Team Member not found with the provided ID",summary:"Reference Center Team Member Not Found",content:{"application/json":{schema:H.object({message:H.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:H.object({message:H.string()})}}}}};import{RegimentStatus as iv}from"@prisma/client";import k from"zod";import{extendZodWithOpenApi as _S}from"@asteasolutions/zod-to-openapi";import{RegimentStatus as Hg}from"@prisma/client";import Br from"zod";var Vg=10,zg=1024,zS=zg*zg,HS=Vg*zS;_S(Br);var dp=Br.object({title:Br.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio"),version:Br.string().min(1,"Vers\xE3o \xE9 obrigat\xF3ria"),publishedAt:Br.coerce.date(),document:Br.any().refine(o=>o==null||typeof o!="object"||typeof o.size!="number"?!1:o.size<=HS,`O documento deve ter no m\xE1ximo ${Vg}MB.`),status:Br.enum(Hg).optional()}),qn=class{constructor(e,t){this.regimentRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{title:r,version:i,publishedAt:n,document:s,status:m}=dp.parse({...e.body,document:e.file}),c=await this.regimentRepository.create({title:r,version:i,publishedAt:n,documentUrl:"",status:m??Hg.IN_FORCE}),d=await this.firebaseStorageService.uploadFile({file:s,id:c.id,folder:M.REGIMENT});return await this.regimentRepository.update({id:c.id,documentUrl:d}),t.sendStatus(201)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as VS}from"@asteasolutions/zod-to-openapi";import lp from"zod";VS(lp);var up=lp.object({id:lp.uuid()}),Un=class{constructor(e,t){this.regimentRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{id:r}=up.parse({id:e.params.id}),i=await this.regimentRepository.findById(r);if(!i)throw new p("O regimento n\xE3o existe.");return i.documentUrl&&await this.firebaseStorageService.deleteFile({fileUrl:i.documentUrl}),await this.regimentRepository.deleteById(r),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as ZS}from"@asteasolutions/zod-to-openapi";import gp from"zod";ZS(gp);var On=gp.object({id:gp.uuid()}),kn=class{constructor(e){this.regimentRepository=e}async handle(e,t){try{let{id:r}=On.parse({id:e.params.id}),i=await this.regimentRepository.findById(r);if(!i)throw new p("O regimento n\xE3o existe.");return t.status(200).json(i)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as KS}from"@asteasolutions/zod-to-openapi";import{RegimentStatus as JS}from"@prisma/client";import fp from"zod";KS(fp);var yp=fp.object({status:fp.enum(JS)}),Gn=class{constructor(e){this.regimentRepository=e}async handle(e,t){try{let{status:r}=yp.parse({status:e.params.status}),i=await this.regimentRepository.findByStatus(r);return t.status(200).json(i)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as YS}from"@asteasolutions/zod-to-openapi";import{RegimentStatus as XS}from"@prisma/client";import qr from"zod";var $S=1,QS=10;YS(qr);var hp=qr.object({page:qr.coerce.number().min(1).default($S),limit:qr.coerce.number().min(1).default(QS),title:qr.string().optional(),status:qr.enum(XS).optional(),orderBy:qr.enum(["asc","desc"]).optional()}),Nn=class{constructor(e){this.regimentRepository=e}async handle(e,t){try{let{page:r,limit:i,...n}=hp.parse(e.query),s=i*r-i,[m,c]=await Promise.all([this.regimentRepository.find({pagination:{offset:s,limit:i},filter:n}),this.regimentRepository.count({filter:n})]),d=Math.max(Math.ceil(c/i),1);t.status(200).json({page:r,totalPages:d,offset:s,limit:i,regiments:m})}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as ev}from"@asteasolutions/zod-to-openapi";import{RegimentStatus as rv}from"@prisma/client";import wr from"zod";var Kg=10,Zg=1024,tv=Zg*Zg,ov=Kg*tv;ev(wr);var Rp=wr.object({id:wr.uuid(),title:wr.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio").optional(),version:wr.string().min(1,"Vers\xE3o \xE9 obrigat\xF3ria").optional(),publishedAt:wr.coerce.date().optional(),document:wr.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=ov,`O documento deve ter no m\xE1ximo ${Kg}MB.`).optional(),status:wr.enum(rv).optional()}),Ln=class{constructor(e,t){this.regimentRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{id:r,title:i,version:n,publishedAt:s,document:m,status:c}=Rp.parse({id:e.params.id,...e.body,document:e.file}),d=await this.regimentRepository.findById(r);if(!d)throw new p("O regimento n\xE3o existe.");let h=d.documentUrl;return m&&(d.documentUrl&&await this.firebaseStorageService.deleteFile({fileUrl:d.documentUrl}),h=await this.firebaseStorageService.uploadFile({file:m,id:r,folder:M.REGIMENT})),await this.regimentRepository.update({id:r,title:i,version:n,publishedAt:s,documentUrl:h??void 0,status:c}),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var Ip=k.object({id:k.uuid(),title:k.string(),version:k.string(),publishedAt:k.date(),documentUrl:k.string(),status:k.enum(iv),createdAt:k.date(),updatedAt:k.date()}),Jg={method:"post",path:"/regiment",tags:["Regiments"],summary:"Create a new regiment with document upload",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:dp}}}},responses:{201:{description:"Regiment created successfully",summary:"Regiment Created"},400:{description:"Invalid input data, missing required fields, or invalid document format/size",summary:"Validation Error",content:{"application/json":{schema:k.object({errors:k.record(k.string(),k.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:k.object({message:k.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:k.object({message:k.string()})}}}}},Yg={method:"get",path:"/regiment",tags:["Regiments"],summary:"List all regiments with pagination and filters",request:{query:hp},responses:{200:{description:"List of regiments retrieved successfully with pagination",summary:"Regiments Retrieved",content:{"application/json":{schema:k.object({page:k.number(),totalPages:k.number(),offset:k.number(),limit:k.number(),regiments:k.array(Ip)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:k.object({errors:k.record(k.string(),k.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:k.object({message:k.string()})}}}}},Xg={method:"get",path:"/regiment/{id}",tags:["Regiments"],summary:"Find regiment by ID",request:{params:On},responses:{200:{description:"Regiment details retrieved successfully",summary:"Regiment Retrieved",content:{"application/json":{schema:Ip}}},400:{description:"Invalid regiment ID format",summary:"Validation Error",content:{"application/json":{schema:k.object({errors:k.record(k.string(),k.string())})}}},404:{description:"Regiment not found with the provided ID",summary:"Regiment Not Found",content:{"application/json":{schema:k.object({message:k.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:k.object({message:k.string()})}}}}},$g={method:"get",path:"/regiment/status/{status}",tags:["Regiments"],summary:"Find regiments by status",request:{params:yp},responses:{200:{description:"Regiments retrieved successfully by status",summary:"Regiments Retrieved by Status",content:{"application/json":{schema:k.array(Ip)}}},400:{description:"Invalid status parameter provided",summary:"Validation Error",content:{"application/json":{schema:k.object({errors:k.record(k.string(),k.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:k.object({message:k.string()})}}}}},Qg={method:"put",path:"/regiment/{id}",tags:["Regiments"],summary:"Update regiment with optional document upload",security:[{bearerAuth:[]}],request:{params:On,body:{content:{"multipart/form-data":{schema:Rp.omit({id:!0})}}}},responses:{200:{description:"Regiment updated successfully",summary:"Regiment Updated"},400:{description:"Invalid input data, regiment ID format, or invalid document format/size",summary:"Validation Error",content:{"application/json":{schema:k.object({errors:k.record(k.string(),k.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:k.object({message:k.string()})}}},404:{description:"Regiment not found with the provided ID",summary:"Regiment Not Found",content:{"application/json":{schema:k.object({message:k.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:k.object({message:k.string()})}}}}},ef={method:"delete",path:"/regiment/{id}",tags:["Regiments"],summary:"Delete regiment",security:[{bearerAuth:[]}],request:{params:up},responses:{200:{description:"Regiment deleted successfully",summary:"Regiment Deleted"},400:{description:"Invalid regiment ID format",summary:"Validation Error",content:{"application/json":{schema:k.object({errors:k.record(k.string(),k.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:k.object({message:k.string()})}}},404:{description:"Regiment not found with the provided ID",summary:"Regiment Not Found",content:{"application/json":{schema:k.object({message:k.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:k.object({message:k.string()})}}}}};import ee from"zod";import{extendZodWithOpenApi as nv}from"@asteasolutions/zod-to-openapi";import oo from"zod";var tf=5,rf=1024,sv=rf*rf,av=tf*sv;nv(oo);var bp=oo.object({caption:oo.string().optional(),image:oo.any().refine(o=>o==null||typeof o!="object"||typeof o.size!="number"?!1:o.size<=av,`A imagem deve ter no m\xE1ximo ${tf}MB.`),congressId:oo.uuid()}),Wn=class{constructor(e,t,r){this.regionalCongressGalleryRepository=e;this.regionalCongressRepository=t;this.firebaseStorageService=r}async handle(e,t){try{let{caption:r,image:i,congressId:n}=bp.parse({...e.body,...e.params,image:e.file});if(!await this.regionalCongressRepository.findById(n))throw new p("O congresso n\xE3o existe.");let m=await this.regionalCongressGalleryRepository.create({caption:r,congressId:n,imageUrl:""}),c=await this.firebaseStorageService.uploadFile({file:i,id:m.id,folder:M.GALLERY});return await this.regionalCongressGalleryRepository.update({id:m.id,imageUrl:c}),t.sendStatus(201)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as mv}from"@asteasolutions/zod-to-openapi";import Cp from"zod";mv(Cp);var zn=Cp.object({id:Cp.uuid("ID inv\xE1lido")}),_n=class{constructor(e){this.regionalCongressGalleryRepository=e}async handle(e,t){try{let{id:r}=zn.parse(e.params);if(!await this.regionalCongressGalleryRepository.findById(r))throw new p("Item de galeria n\xE3o encontrado");return await this.regionalCongressGalleryRepository.deleteById(r),t.sendStatus(204)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as cv}from"@asteasolutions/zod-to-openapi";import Rt from"zod";cv(Rt);var wp=Rt.object({congressId:Rt.uuid("ID do congresso inv\xE1lido"),page:Rt.coerce.number().int().positive().default(1),limit:Rt.coerce.number().int().positive().default(10),caption:Rt.string().optional()}),Hn=class{constructor(e){this.regionalCongressGalleryRepository=e}async handle(e,t){try{let{page:r,limit:i,...n}=wp.parse({...e.params,...e.query}),s=(r-1)*i,m=await this.regionalCongressGalleryRepository.findByCongressId({pagination:{offset:s,limit:i},filter:n});if(!m)throw new p("Itens de galeria n\xE3o encontrados");let c=await this.regionalCongressGalleryRepository.count({filter:n});return t.status(200).json({data:m,pagination:{page:r,limit:i,total:c,totalPages:Math.ceil(c/i)}})}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as pv}from"@asteasolutions/zod-to-openapi";import io from"zod";var nf=5,of=1024,dv=of*of,lv=nf*dv;pv(io);var Sp=io.object({id:io.string().uuid("ID inv\xE1lido"),caption:io.string().optional(),image:io.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=lv,`A imagem deve ter no m\xE1ximo ${nf}MB.`).optional()}),Vn=class{constructor(e,t){this.regionalCongressGalleryRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{id:r,caption:i,image:n}=Sp.parse({...e.params,...e.body,image:e.file});if(!await this.regionalCongressGalleryRepository.findById(r))throw new p("Item de galeria n\xE3o encontrado");let m;return n&&(m=await this.firebaseStorageService.uploadFile({file:n,id:r,folder:M.GALLERY})),await this.regionalCongressGalleryRepository.update({id:r,caption:i,...m&&{imageUrl:m}}),t.sendStatus(204)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var uv=ee.object({id:ee.uuid(),imageUrl:ee.string(),caption:ee.string().nullable(),congressId:ee.uuid()}),sf={method:"post",path:"/regional-congress/{congressId}/gallery",tags:["Regional Congresses"],summary:"Create a new congress gallery image",security:[{bearerAuth:[]}],request:{params:ee.object({congressId:ee.uuid()}),body:{content:{"application/json":{schema:bp.omit({congressId:!0})}}}},responses:{201:{description:"Congress gallery image created successfully",summary:"Congress Gallery Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:ee.object({errors:ee.record(ee.string(),ee.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:ee.object({message:ee.string()})}}},404:{description:"Congress not found with the provided ID",summary:"Congress Not Found",content:{"application/json":{schema:ee.object({message:ee.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:ee.object({message:ee.string()})}}}}},af={method:"get",path:"/regional-congress/{congressId}/gallery",tags:["Regional Congresses"],summary:"Find congress gallery images by congress ID",request:{params:wp},responses:{200:{description:"Congress gallery images retrieved successfully by congress ID",summary:"Congress Galleries Retrieved",content:{"application/json":{schema:ee.array(uv)}}},400:{description:"Invalid congress ID parameter provided",summary:"Validation Error",content:{"application/json":{schema:ee.object({errors:ee.record(ee.string(),ee.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:ee.object({message:ee.string()})}}}}},mf={method:"put",path:"/regional-congress/gallery/{id}",tags:["Regional Congresses"],summary:"Update congress gallery image",security:[{bearerAuth:[]}],request:{params:zn,body:{content:{"application/json":{schema:Sp.omit({id:!0})}}}},responses:{200:{description:"Congress gallery image updated successfully",summary:"Congress Gallery Updated"},400:{description:"Invalid input data or gallery ID format",summary:"Validation Error",content:{"application/json":{schema:ee.object({errors:ee.record(ee.string(),ee.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:ee.object({message:ee.string()})}}},404:{description:"Congress gallery image not found with the provided ID",summary:"Congress Gallery Not Found",content:{"application/json":{schema:ee.object({message:ee.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:ee.object({message:ee.string()})}}}}},cf={method:"delete",path:"/regional-congress/gallery/{id}",tags:["Regional Congresses"],summary:"Delete congress gallery image",security:[{bearerAuth:[]}],request:{params:zn},responses:{200:{description:"Congress gallery image deleted successfully",summary:"Congress Gallery Deleted"},400:{description:"Invalid gallery ID format",summary:"Validation Error",content:{"application/json":{schema:ee.object({errors:ee.record(ee.string(),ee.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:ee.object({message:ee.string()})}}},404:{description:"Congress gallery image not found with the provided ID",summary:"Congress Gallery Not Found",content:{"application/json":{schema:ee.object({message:ee.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:ee.object({message:ee.string()})}}}}};import re from"zod";import{extendZodWithOpenApi as gv}from"@asteasolutions/zod-to-openapi";import no from"zod";var df=2,pf=1024,fv=pf*pf,yv=df*fv;gv(no);var vp=no.object({name:no.string().min(1,"Nome \xE9 obrigat\xF3rio"),logo:no.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=yv,`A imagem deve ter no m\xE1ximo ${df}MB.`).optional(),congressId:no.uuid()}),Zn=class{constructor(e,t,r){this.regionalCongressPartnerRepository=e;this.regionalCongressRepository=t;this.firebaseStorageService=r}async handle(e,t){try{let{name:r,logo:i,congressId:n}=vp.parse({...e.body,...e.params,logo:e.file});if(!await this.regionalCongressRepository.findById(n))throw new p("O congresso n\xE3o existe.");let m=await this.regionalCongressPartnerRepository.create({name:r,congressId:n}),c;return i&&(c=await this.firebaseStorageService.uploadFile({file:i,id:m.id,folder:M.PARTNER}),await this.regionalCongressPartnerRepository.update({id:m.id,logoUrl:c})),t.sendStatus(201)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as hv}from"@asteasolutions/zod-to-openapi";import Ep from"zod";hv(Ep);var Jn=Ep.object({id:Ep.string().uuid("ID inv\xE1lido")}),Kn=class{constructor(e){this.regionalCongressPartnerRepository=e}async handle(e,t){try{let{id:r}=Jn.parse(e.params);if(!await this.regionalCongressPartnerRepository.findById(r))throw new p("Parceiro n\xE3o encontrado");return await this.regionalCongressPartnerRepository.deleteById(r),t.sendStatus(204)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as Rv}from"@asteasolutions/zod-to-openapi";import It from"zod";Rv(It);var jp=It.object({congressId:It.uuid("ID do congresso inv\xE1lido"),page:It.coerce.number().int().positive().optional(),limit:It.coerce.number().int().positive().optional(),name:It.string().optional()}),Yn=class{constructor(e){this.regionalCongressPartnerRepository=e}async handle(e,t){try{let{congressId:r,page:i,limit:n,name:s}=jp.parse({...e.params,...e.query}),m=i!==void 0&&n!==void 0,c=m?{offset:(i-1)*n,limit:n}:void 0,d=await this.regionalCongressPartnerRepository.findByCongressId({pagination:c,filter:{congressId:r,name:s}});if(!d)throw new p("Parceiros n\xE3o encontrados");if(!m)return t.status(200).json(d);let h=await this.regionalCongressPartnerRepository.count({filter:{congressId:r,name:s}});return t.status(200).json({data:d,pagination:{page:i,limit:n,total:h,totalPages:Math.ceil(h/n)}})}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as Iv}from"@asteasolutions/zod-to-openapi";import so from"zod";var uf=2,lf=1024,bv=lf*lf,Cv=uf*bv;Iv(so);var xp=so.object({id:so.string().uuid("ID inv\xE1lido"),name:so.string().min(1,"Nome \xE9 obrigat\xF3rio").optional(),logo:so.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=Cv,`A imagem deve ter no m\xE1ximo ${uf}MB.`).optional()}),Xn=class{constructor(e,t){this.regionalCongressPartnerRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{id:r,name:i,logo:n}=xp.parse({...e.params,...e.body,logo:e.file});if(!await this.regionalCongressPartnerRepository.findById(r))throw new p("Parceiro n\xE3o encontrado");let m;return n&&(m=await this.firebaseStorageService.uploadFile({file:n,id:r,folder:M.PARTNER})),await this.regionalCongressPartnerRepository.update({id:r,name:i,...m&&{logoUrl:m}}),t.sendStatus(204)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var wv=re.object({id:re.uuid(),name:re.string(),logoUrl:re.string().nullable(),congressId:re.uuid()}),gf={method:"post",path:"/regional-congress/{congressId}/partner",tags:["Regional Congresses"],summary:"Create a new congress partner",security:[{bearerAuth:[]}],request:{params:re.object({congressId:re.uuid()}),body:{content:{"application/json":{schema:vp.omit({congressId:!0})}}}},responses:{201:{description:"Congress partner created successfully",summary:"Congress Partner Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:re.object({errors:re.record(re.string(),re.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:re.object({message:re.string()})}}},404:{description:"Congress not found with the provided ID",summary:"Congress Not Found",content:{"application/json":{schema:re.object({message:re.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:re.object({message:re.string()})}}}}},ff={method:"get",path:"/regional-congress/{congressId}/partner",tags:["Regional Congresses"],summary:"Find congress partners by congress ID",request:{params:jp},responses:{200:{description:"Congress partners retrieved successfully by congress ID",summary:"Congress Partners Retrieved",content:{"application/json":{schema:re.array(wv)}}},400:{description:"Invalid congress ID parameter provided",summary:"Validation Error",content:{"application/json":{schema:re.object({errors:re.record(re.string(),re.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:re.object({message:re.string()})}}}}},yf={method:"put",path:"/regional-congress/partner/{id}",tags:["Regional Congresses"],summary:"Update congress partner",security:[{bearerAuth:[]}],request:{params:Jn,body:{content:{"application/json":{schema:xp.omit({id:!0})}}}},responses:{200:{description:"Congress partner updated successfully",summary:"Congress Partner Updated"},400:{description:"Invalid input data or partner ID format",summary:"Validation Error",content:{"application/json":{schema:re.object({errors:re.record(re.string(),re.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:re.object({message:re.string()})}}},404:{description:"Congress partner not found with the provided ID",summary:"Congress Partner Not Found",content:{"application/json":{schema:re.object({message:re.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:re.object({message:re.string()})}}}}},hf={method:"delete",path:"/regional-congress/partner/{id}",tags:["Regional Congresses"],summary:"Delete congress partner",security:[{bearerAuth:[]}],request:{params:Jn},responses:{200:{description:"Congress partner deleted successfully",summary:"Congress Partner Deleted"},400:{description:"Invalid partner ID format",summary:"Validation Error",content:{"application/json":{schema:re.object({errors:re.record(re.string(),re.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:re.object({message:re.string()})}}},404:{description:"Congress partner not found with the provided ID",summary:"Congress Partner Not Found",content:{"application/json":{schema:re.object({message:re.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:re.object({message:re.string()})}}}}};import f from"zod";import{extendZodWithOpenApi as Sv}from"@asteasolutions/zod-to-openapi";import ne from"zod";Sv(ne);var Mp=ne.object({title:ne.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio"),edition:ne.coerce.number().int().positive("Edi\xE7\xE3o deve ser um n\xFAmero positivo"),startDate:ne.coerce.date(),endDate:ne.coerce.date(),description:ne.string().optional(),location:ne.string().optional(),congressLink:ne.union([ne.url("Link do congresso deve ser uma URL v\xE1lida"),ne.literal("")]),noticeUrl:ne.union([ne.url("URL do edital deve ser uma URL v\xE1lida"),ne.literal("")]),scheduleUrl:ne.union([ne.url("URL do cronograma deve ser uma URL v\xE1lida"),ne.literal("")]),programUrl:ne.union([ne.url("URL da programa\xE7\xE3o deve ser uma URL v\xE1lida"),ne.literal("")]),adminReportUrl:ne.union([ne.url("URL do relat\xF3rio administrativo deve ser uma URL v\xE1lida"),ne.literal("")]),proceedingsUrl:ne.union([ne.url("URL dos anais deve ser uma URL v\xE1lida"),ne.literal("")])}).refine(o=>o.endDate>=o.startDate,{message:"Data de t\xE9rmino deve ser posterior ou igual \xE0 data de in\xEDcio",path:["endDate"]}),$n=class{constructor(e){this.regionalCongressRepository=e}async handle(e,t){try{let r=Mp.parse(e.body);return await this.regionalCongressRepository.create(r),t.sendStatus(201)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as vv}from"@asteasolutions/zod-to-openapi";import Ap from"zod";vv(Ap);var Pp=Ap.object({id:Ap.string().uuid("ID inv\xE1lido")}),Qn=class{constructor(e){this.regionalCongressRepository=e}async handle(e,t){try{let{id:r}=Pp.parse(e.params);if(!await this.regionalCongressRepository.findById(r))throw new p("Congresso regional n\xE3o encontrado");return await this.regionalCongressRepository.deleteById(r),t.sendStatus(204)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as Ev}from"@asteasolutions/zod-to-openapi";import Tp from"zod";Ev(Tp);var Dp=Tp.object({edition:Tp.coerce.number().int().positive("Edi\xE7\xE3o deve ser um n\xFAmero positivo")}),es=class{constructor(e){this.regionalCongressRepository=e}async handle(e,t){try{let{edition:r}=Dp.parse(e.params),i=await this.regionalCongressRepository.findByEdition(r);if(!i||i.length===0)throw new p("Congresso regional n\xE3o encontrado");return t.status(200).json(i)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as jv}from"@asteasolutions/zod-to-openapi";import Fp from"zod";jv(Fp);var ts=Fp.object({id:Fp.string().uuid("ID inv\xE1lido")}),rs=class{constructor(e){this.regionalCongressRepository=e}async handle(e,t){try{let{id:r}=ts.parse(e.params),i=await this.regionalCongressRepository.findById(r);if(!i)throw new p("Congresso regional n\xE3o encontrado");return t.status(200).json(i)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as xv}from"@asteasolutions/zod-to-openapi";import Sr from"zod";xv(Sr);var Bp=Sr.object({page:Sr.coerce.number().int().positive().default(1),limit:Sr.coerce.number().int().positive().default(10),title:Sr.string().optional(),edition:Sr.coerce.number().int().positive().optional(),location:Sr.string().optional(),orderBy:Sr.enum(["asc","desc"]).optional().default("desc")}),os=class{constructor(e){this.regionalCongressRepository=e}async handle(e,t){try{let{page:r,limit:i,orderBy:n,...s}=Bp.parse(e.query),m=(r-1)*i,c=await this.regionalCongressRepository.find({pagination:{offset:m,limit:i},filter:{...s,orderBy:n}});if(!c)throw new p("Congressos regionais n\xE3o encontrados");let d=await this.regionalCongressRepository.count({filter:s});return t.status(200).json({data:c,pagination:{page:r,limit:i,total:d,totalPages:Math.ceil(d/i)}})}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as Mv}from"@asteasolutions/zod-to-openapi";import ie from"zod";Mv(ie);var qp=ie.object({id:ie.string().uuid("ID inv\xE1lido"),title:ie.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio").optional(),edition:ie.coerce.number().int().positive("Edi\xE7\xE3o deve ser um n\xFAmero positivo").optional(),startDate:ie.coerce.date().optional(),endDate:ie.coerce.date().optional(),description:ie.string().optional(),location:ie.string().optional(),congressLink:ie.union([ie.url("Link do congresso deve ser uma URL v\xE1lida"),ie.literal("")]),noticeUrl:ie.union([ie.url("URL do edital deve ser uma URL v\xE1lida"),ie.literal("")]),scheduleUrl:ie.union([ie.url("URL do cronograma deve ser uma URL v\xE1lida"),ie.literal("")]),programUrl:ie.union([ie.url("URL da programa\xE7\xE3o deve ser uma URL v\xE1lida"),ie.literal("")]),adminReportUrl:ie.union([ie.url("URL do relat\xF3rio administrativo deve ser uma URL v\xE1lida"),ie.literal("")]),proceedingsUrl:ie.union([ie.url("URL dos anais deve ser uma URL v\xE1lida"),ie.literal("")])}).refine(o=>o.startDate&&o.endDate?o.endDate>=o.startDate:!0,{message:"Data de t\xE9rmino deve ser posterior ou igual \xE0 data de in\xEDcio",path:["endDate"]}),is=class{constructor(e){this.regionalCongressRepository=e}async handle(e,t){try{let{id:r}=ie.object({id:ie.string().uuid()}).parse(e.params);if(!await this.regionalCongressRepository.findById(r))throw new p("Congresso regional n\xE3o encontrado");let n=qp.parse({id:r,...e.body});return await this.regionalCongressRepository.update(n),t.sendStatus(204)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var Av=9,Pv=f.object({image:f.any().openapi({type:"string",format:"binary"}),caption:f.string().optional()}),Tv=f.object({image:f.any().openapi({type:"string",format:"binary"}).optional(),caption:f.string().optional()}),Dv=f.object({id:f.uuid(),name:f.string(),logoUrl:f.string().nullable(),congressId:f.uuid()}),Up=f.object({id:f.uuid(),imageUrl:f.string(),caption:f.string().nullable(),congressId:f.uuid()}),kp=f.object({id:f.uuid(),title:f.string(),edition:f.number(),startDate:f.date(),endDate:f.date(),description:f.string().nullable(),location:f.string().nullable(),congressLink:f.string().nullable(),noticeUrl:f.string().nullable(),scheduleUrl:f.string().nullable(),programUrl:f.string().nullable(),adminReportUrl:f.string().nullable(),proceedingsUrl:f.string().nullable(),partners:f.array(Dv),galleries:f.array(Up),createdAt:f.date(),updatedAt:f.date()}),Rf={method:"post",path:"/regional-congress",tags:["Regional Congresses"],summary:"Create a new regional congress",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:Mp}}}},responses:{201:{description:"Regional congress created successfully",summary:"Regional Congress Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:f.object({errors:f.record(f.string(),f.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:f.object({message:f.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:f.object({message:f.string()})}}}}},If={method:"get",path:"/regional-congress",tags:["Regional Congresses"],summary:"List all regional congresses with pagination and filters",request:{query:Bp},responses:{200:{description:"List of regional congresses retrieved successfully with pagination",summary:"Regional Congresses Retrieved",content:{"application/json":{schema:f.object({page:f.number(),totalPages:f.number(),offset:f.number(),limit:f.number(),congresses:f.array(kp)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:f.object({errors:f.record(f.string(),f.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:f.object({message:f.string()})}}}}},bf={method:"get",path:"/regional-congress/{id}",tags:["Regional Congresses"],summary:"Find regional congress by ID",request:{params:ts},responses:{200:{description:"Regional congress details retrieved successfully",summary:"Regional Congress Retrieved",content:{"application/json":{schema:kp}}},400:{description:"Invalid regional congress ID format",summary:"Validation Error",content:{"application/json":{schema:f.object({errors:f.record(f.string(),f.string())})}}},404:{description:"Regional congress not found with the provided ID",summary:"Regional Congress Not Found",content:{"application/json":{schema:f.object({message:f.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:f.object({message:f.string()})}}}}},Cf={method:"get",path:"/regional-congress/edition/{edition}",tags:["Regional Congresses"],summary:"Find regional congresses by edition",request:{params:Dp},responses:{200:{description:"Regional congresses retrieved successfully by edition",summary:"Regional Congresses Retrieved by Edition",content:{"application/json":{schema:f.array(kp)}}},400:{description:"Invalid edition parameter provided",summary:"Validation Error",content:{"application/json":{schema:f.object({errors:f.record(f.string(),f.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:f.object({message:f.string()})}}}}},wf={method:"put",path:"/regional-congress/{id}",tags:["Regional Congresses"],summary:"Update regional congress",security:[{bearerAuth:[]}],request:{params:ts,body:{content:{"application/json":{schema:qp.omit({id:!0})}}}},responses:{200:{description:"Regional congress updated successfully",summary:"Regional Congress Updated"},400:{description:"Invalid input data or regional congress ID format",summary:"Validation Error",content:{"application/json":{schema:f.object({errors:f.record(f.string(),f.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:f.object({message:f.string()})}}},404:{description:"Regional congress not found with the provided ID",summary:"Regional Congress Not Found",content:{"application/json":{schema:f.object({message:f.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:f.object({message:f.string()})}}}}},Sf={method:"delete",path:"/regional-congress/{id}",tags:["Regional Congresses"],summary:"Delete regional congress",security:[{bearerAuth:[]}],request:{params:Pp},responses:{200:{description:"Regional congress deleted successfully",summary:"Regional Congress Deleted"},400:{description:"Invalid regional congress ID format",summary:"Validation Error",content:{"application/json":{schema:f.object({errors:f.record(f.string(),f.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:f.object({message:f.string()})}}},404:{description:"Regional congress not found with the provided ID",summary:"Regional Congress Not Found",content:{"application/json":{schema:f.object({message:f.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:f.object({message:f.string()})}}}}},GW={method:"post",path:"/regional-congress/{congressId}/gallery",tags:["Regional Congress Gallery"],summary:"Create a new gallery image for a congress",security:[{bearerAuth:[]}],request:{params:f.object({congressId:f.uuid()}),body:{content:{"multipart/form-data":{schema:Pv}}}},responses:{201:{description:"Gallery image created successfully",summary:"Gallery Image Created"},400:{description:"Invalid input data, missing required fields, or invalid image format/size",summary:"Validation Error",content:{"application/json":{schema:f.object({errors:f.record(f.string(),f.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:f.object({message:f.string()})}}},404:{description:"Congress not found with the provided ID",summary:"Congress Not Found",content:{"application/json":{schema:f.object({message:f.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:f.object({message:f.string()})}}}}},NW={method:"get",path:"/regional-congress/{congressId}/gallery",tags:["Regional Congress Gallery"],summary:"List all gallery images for a congress with pagination",request:{params:f.object({congressId:f.uuid()}),query:f.object({page:f.coerce.number().min(1).default(1),limit:f.coerce.number().min(1).default(Av),caption:f.string().optional()})},responses:{200:{description:"Gallery images retrieved successfully with pagination",summary:"Gallery Images Retrieved",content:{"application/json":{schema:f.object({page:f.number(),totalPages:f.number(),offset:f.number(),limit:f.number(),galleries:f.array(Up)})}}},400:{description:"Invalid congress ID format or query parameters",summary:"Validation Error",content:{"application/json":{schema:f.object({errors:f.record(f.string(),f.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:f.object({message:f.string()})}}}}},LW={method:"get",path:"/regional-congress/gallery/{id}",tags:["Regional Congress Gallery"],summary:"Find a gallery image by ID",request:{params:f.object({id:f.uuid()})},responses:{200:{description:"Gallery image retrieved successfully",summary:"Gallery Image Retrieved",content:{"application/json":{schema:Up}}},400:{description:"Invalid gallery image ID format",summary:"Validation Error",content:{"application/json":{schema:f.object({errors:f.record(f.string(),f.string())})}}},404:{description:"Gallery image not found with the provided ID",summary:"Gallery Image Not Found",content:{"application/json":{schema:f.object({message:f.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:f.object({message:f.string()})}}}}},WW={method:"put",path:"/regional-congress/gallery/{id}",tags:["Regional Congress Gallery"],summary:"Update a gallery image with optional image upload",security:[{bearerAuth:[]}],request:{params:f.object({id:f.uuid()}),body:{content:{"multipart/form-data":{schema:Tv}}}},responses:{200:{description:"Gallery image updated successfully",summary:"Gallery Image Updated"},400:{description:"Invalid input data, gallery ID format, or invalid image format/size",summary:"Validation Error",content:{"application/json":{schema:f.object({errors:f.record(f.string(),f.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:f.object({message:f.string()})}}},404:{description:"Gallery image not found with the provided ID",summary:"Gallery Image Not Found",content:{"application/json":{schema:f.object({message:f.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:f.object({message:f.string()})}}}}},_W={method:"delete",path:"/regional-congress/gallery/{id}",tags:["Regional Congress Gallery"],summary:"Delete a gallery image",security:[{bearerAuth:[]}],request:{params:f.object({id:f.uuid()})},responses:{200:{description:"Gallery image deleted successfully",summary:"Gallery Image Deleted"},400:{description:"Invalid gallery ID format",summary:"Validation Error",content:{"application/json":{schema:f.object({errors:f.record(f.string(),f.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:f.object({message:f.string()})}}},404:{description:"Gallery image not found with the provided ID",summary:"Gallery Image Not Found",content:{"application/json":{schema:f.object({message:f.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:f.object({message:f.string()})}}}}};import y from"zod";import{extendZodWithOpenApi as Fv}from"@asteasolutions/zod-to-openapi";import Op from"zod";Fv(Op);var Gp=Op.object({id:Op.uuid()}),ns=class{constructor(e,t){this.researchGroupRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{id:r}=Gp.parse({id:e.params.id}),i=await this.researchGroupRepository.findById(r);if(!i)throw new p("O grupo de pesquisa n\xE3o existe.");return i.logoUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.logoUrl}),await this.researchGroupRepository.deleteById(r),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as Bv}from"@asteasolutions/zod-to-openapi";import Np from"zod";Bv(Np);var Lp=Np.object({id:Np.uuid()}),ss=class{constructor(e){this.researchGroupRepository=e}async handle(e,t){try{let{id:r}=Lp.parse({id:e.params.id}),i=await this.researchGroupRepository.findById(r);if(!i)throw new p("Grupo de pesquisa n\xE3o encontrado.");return t.status(200).json(i)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as qv}from"@asteasolutions/zod-to-openapi";import Qe from"zod";var Uv=1,kv=6;qv(Qe);var Wp=Qe.object({page:Qe.coerce.number().min(1).default(Uv),limit:Qe.coerce.number().min(1).default(kv),name:Qe.string().optional(),acronym:Qe.string().optional(),description:Qe.string().optional(),leader:Qe.string().optional(),orderBy:Qe.enum(["asc","desc"]).default("desc")}),as=class{constructor(e){this.researchGroupRepository=e}async handle(e,t){try{let{limit:r,page:i,...n}=Wp.parse(e.query),s=i*r-r,[m,c]=await Promise.all([this.researchGroupRepository.find({pagination:{offset:s,limit:r},filter:n}),this.researchGroupRepository.count({filter:n})]),d=Math.max(Math.ceil(c/r),1);return t.status(200).json({page:i,totalPages:d,offset:s,limit:r,researchGroups:m})}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as Ov}from"@asteasolutions/zod-to-openapi";import we from"zod";var Ef=5,vf=1024,Gv=vf*vf,Nv=Ef*Gv;Ov(we);var _p=we.object({id:we.uuid(),name:we.string().min(1,"Nome \xE9 obrigat\xF3rio.").optional(),acronym:we.string().optional(),description:we.string().optional(),url:we.url("URL deve ser v\xE1lida.").optional(),foundedAt:we.coerce.date().optional(),scope:we.string().optional(),email:we.email("E-mail deve ser v\xE1lido.").optional(),leaderId:we.uuid("L\xEDder \xE9 obrigat\xF3rio.").optional(),deputyLeaderId:we.uuid("Vice-l\xEDder \xE9 obrigat\xF3rio.").optional(),logo:we.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=Nv,`O logo deve ter no m\xE1ximo ${Ef}MB.`).optional()}),ms=class{constructor(e,t){this.researchGroupRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{id:r,logo:i,name:n,acronym:s,description:m,url:c,foundedAt:d,scope:h,email:E,leaderId:F,deputyLeaderId:X}=_p.parse({id:e.params.id,...e.body,logo:e.file}),te=await this.researchGroupRepository.findById(r);if(!te)throw new p("O grupo de pesquisa n\xE3o existe.");let se=te.logoUrl;return i&&(se=await this.firebaseStorageService.uploadFile({file:i,id:r,folder:M.RESEARCH_GROUP_LOGO})),await this.researchGroupRepository.update({id:r,name:n,acronym:s,description:m,url:c,foundedAt:d,scope:h,email:E,leaderId:F,deputyLeaderId:X,logoUrl:se}),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var jf={method:"post",path:"/research-groups",tags:["Research Groups"],summary:"Create research group",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:y.object({name:y.string().min(1).openapi({description:"Nome do grupo de pesquisa"}),acronym:y.string().optional().openapi({description:"Sigla do grupo"}),description:y.string().optional().openapi({description:"Descri\xE7\xE3o do grupo"}),url:y.string().url().optional().openapi({description:"URL do grupo"}),foundedAt:y.string().openapi({description:"Data de funda\xE7\xE3o (ISO 8601)",example:"2024-01-01T00:00:00Z"}),scope:y.string().optional().openapi({description:"Escopo do grupo"}),email:y.string().email().optional().openapi({description:"E-mail de contato"}),leaderId:y.string().uuid().openapi({description:"ID do l\xEDder (UUID)"}),deputyLeaderId:y.string().uuid().openapi({description:"ID do vice-l\xEDder (UUID)"}),logo:y.string().optional().openapi({description:"Logo do grupo (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{201:{description:"Research group created successfully",summary:"Research Group Created"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:y.object({errors:y.record(y.string(),y.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:y.object({message:y.string()})}}}}},xf={method:"get",path:"/research-groups",tags:["Research Groups"],summary:"List research groups",security:[{bearerAuth:[]}],request:{query:Wp},responses:{200:{description:"Paginated list of research groups with leader information retrieved successfully",summary:"Research Groups Retrieved",content:{"application/json":{schema:y.object({page:y.number(),totalPages:y.number(),offset:y.number(),limit:y.number(),researchGroups:y.array(y.object({id:y.string(),name:y.string(),acronym:y.string().nullable(),description:y.string().nullable(),url:y.string().nullable(),logoUrl:y.string().nullable(),foundedAt:y.date(),scope:y.string().nullable(),email:y.string().nullable(),leaderId:y.string(),deputyLeaderId:y.string(),createdAt:y.date(),updatedAt:y.date(),leader:y.object({id:y.uuid(),name:y.string(),emailAddress:y.email(),avatarUrl:y.string().nullable(),createdAt:y.date(),updatedAt:y.date()}),deputyLeader:y.object({id:y.uuid(),name:y.string(),emailAddress:y.email(),avatarUrl:y.string().nullable(),createdAt:y.date(),updatedAt:y.date()})}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:y.object({errors:y.record(y.string(),y.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:y.object({message:y.string()})}}}}},Mf={method:"get",path:"/research-groups/{id}",tags:["Research Groups"],summary:"Find research group by ID",security:[{bearerAuth:[]}],request:{params:Lp},responses:{200:{description:"Research group details retrieved successfully",summary:"Research Group Retrieved",content:{"application/json":{schema:y.object({id:y.string(),name:y.string(),acronym:y.string().nullable(),description:y.string().nullable(),url:y.string().nullable(),logoUrl:y.string().nullable(),foundedAt:y.date(),scope:y.string().nullable(),email:y.string().nullable(),leaderId:y.string(),deputyLeaderId:y.string(),createdAt:y.date(),updatedAt:y.date(),leader:y.object({id:y.uuid(),name:y.string(),emailAddress:y.email(),avatarUrl:y.string().nullable(),createdAt:y.date(),updatedAt:y.date()}),deputyLeader:y.object({id:y.uuid(),name:y.string(),emailAddress:y.email(),avatarUrl:y.string().nullable(),createdAt:y.date(),updatedAt:y.date()})}).nullable()}}},400:{description:"Invalid research group ID format",summary:"Validation Error",content:{"application/json":{schema:y.object({errors:y.record(y.string(),y.string())})}}},404:{description:"Research group not found with the provided ID",summary:"Research Group Not Found",content:{"application/json":{schema:y.object({message:y.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:y.object({message:y.string()})}}}}},Af={method:"put",path:"/research-groups/{id}",tags:["Research Groups"],summary:"Update research group",security:[{bearerAuth:[]}],request:{params:_p.pick({id:!0}),body:{content:{"multipart/form-data":{schema:y.object({name:y.string().min(1).optional().openapi({description:"Nome do grupo de pesquisa"}),acronym:y.string().optional().openapi({description:"Sigla do grupo"}),description:y.string().optional().openapi({description:"Descri\xE7\xE3o do grupo"}),url:y.string().url().optional().openapi({description:"URL do grupo"}),foundedAt:y.string().optional().openapi({description:"Data de funda\xE7\xE3o (ISO 8601)",example:"2024-01-01T00:00:00Z"}),scope:y.string().optional().openapi({description:"Escopo do grupo"}),email:y.string().email().optional().openapi({description:"E-mail de contato"}),leaderId:y.string().uuid().optional().openapi({description:"ID do l\xEDder (UUID)"}),deputyLeaderId:y.string().uuid().optional().openapi({description:"ID do vice-l\xEDder (UUID)"}),logo:y.string().optional().openapi({description:"Logo do grupo (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{200:{description:"Research group updated successfully",summary:"Research Group Updated"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:y.object({errors:y.record(y.string(),y.string())})}}},404:{description:"Research group not found with the provided ID",summary:"Research Group Not Found",content:{"application/json":{schema:y.object({message:y.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:y.object({message:y.string()})}}}}},Pf={method:"delete",path:"/research-groups/{id}",tags:["Research Groups"],summary:"Delete research group",security:[{bearerAuth:[]}],request:{params:Gp},responses:{200:{description:"Research group deleted successfully",summary:"Research Group Deleted"},400:{description:"Invalid research group ID format",summary:"Validation Error",content:{"application/json":{schema:y.object({errors:y.record(y.string(),y.string())})}}},404:{description:"Research group not found with the provided ID",summary:"Research Group Not Found",content:{"application/json":{schema:y.object({message:y.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:y.object({message:y.string()})}}}}};import{$Enums as Xp}from"@prisma/client";import C from"zod";import{extendZodWithOpenApi as Lv}from"@asteasolutions/zod-to-openapi";import{Degree as Wv,Seniority as _v}from"@prisma/client";import Pe from"zod";Lv(Pe);var zp=Pe.object({registrationNumber:Pe.string(),mainEtps:Pe.string().optional(),formations:Pe.string().optional(),degrees:Pe.array(Pe.enum(Wv)),occupations:Pe.string(),seniority:Pe.enum(_v),institutions:Pe.string(),biography:Pe.string().optional(),userId:Pe.string()}),cs=class{constructor(e){this.researcherRepository=e}async handle(e,t){try{let{registrationNumber:r,mainEtps:i,formations:n,degrees:s,occupations:m,seniority:c,institutions:d,biography:h,userId:E}=zp.parse(e.body);if(await this.researcherRepository.findByRegistrationNumber(r))throw new ce("J\xE1 existe um pesquisador cadastrado com este n\xFAmero de registro.");if(await this.researcherRepository.findByUserId(E))throw new ce("Usu\xE1rio j\xE1 possui um perfil de pesquisador.");return await this.researcherRepository.create({registrationNumber:r,mainEtps:i,formations:n,degrees:s,occupations:m,seniority:c,institutions:d,biography:h,userId:E}),t.sendStatus(201)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as zv}from"@asteasolutions/zod-to-openapi";import Hp from"zod";zv(Hp);var Vp=Hp.object({id:Hp.uuid()}),ps=class{constructor(e){this.researcherRepository=e}async handle(e,t){try{let{id:r}=Vp.parse({id:e.params.id});if(!await this.researcherRepository.findById(r))throw new p("O pesquisador n\xE3o existe.");return await this.researcherRepository.deleteById(r),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as Hv}from"@asteasolutions/zod-to-openapi";import Zp from"zod";Hv(Zp);var ls=Zp.object({id:Zp.uuid()}),ds=class{constructor(e){this.researcherRepository=e}async handle(e,t){try{let{id:r}=ls.parse({id:e.params.id}),i=await this.researcherRepository.findById(r);if(!i)throw new p("O pesquisador n\xE3o existe.");return t.status(200).json(i)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as Vv}from"@asteasolutions/zod-to-openapi";import Kp from"zod";Vv(Kp);var Jp=Kp.object({userId:Kp.uuid()}),us=class{constructor(e){this.researcherRepository=e}async handle(e,t){try{let{userId:r}=Jp.parse({userId:e.params.userId}),i=await this.researcherRepository.findByUserId(r);if(!i)throw new p("O pesquisador n\xE3o existe para este usu\xE1rio.");return t.status(200).json(i)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as Zv}from"@asteasolutions/zod-to-openapi";import{Degree as Kv,Seniority as Jv}from"@prisma/client";import Te from"zod";Zv(Te);var Yp=Te.object({id:Te.uuid(),registrationNumber:Te.string().optional(),mainEtps:Te.string().optional(),formations:Te.string().optional(),degrees:Te.array(Te.enum(Kv)).optional(),occupations:Te.string().optional(),seniority:Te.enum(Jv).optional(),institutions:Te.string().optional(),biography:Te.string().optional()}),gs=class{constructor(e){this.researcherRepository=e}async handle(e,t){try{let{id:r,registrationNumber:i,mainEtps:n,formations:s,degrees:m,occupations:c,seniority:d,institutions:h,biography:E}=Yp.parse({id:e.params.id,...e.body}),F=await this.researcherRepository.findById(r);if(!F)throw new p("O pesquisador n\xE3o existe.");if(i&&i!==F.registrationNumber){let X=await this.researcherRepository.findByRegistrationNumber(i);if(X&&X.id!==r)throw new ce("J\xE1 existe um pesquisador com este n\xFAmero de registro.")}return await this.researcherRepository.update({id:r,registrationNumber:i,mainEtps:n,formations:s,degrees:m,occupations:c,seniority:d,institutions:h,biography:E}),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var Yv=1,Xv=9,$p=C.object({id:C.uuid(),registrationNumber:C.string(),mainEtps:C.string().nullable(),formations:C.string().nullable(),degrees:C.array(C.enum(Xp.Degree)),occupations:C.string(),seniority:C.enum(Xp.Seniority),institutions:C.string(),biography:C.string().nullable(),createdAt:C.date(),updatedAt:C.date(),userId:C.uuid(),user:C.object({id:C.uuid(),name:C.string(),emailAddress:C.string(),avatarUrl:C.string().nullable(),orcid:C.string().nullable(),phone:C.string().nullable(),lattesUrl:C.string().nullable(),role:C.enum(Xp.UserRole)})}),Tf={method:"post",path:"/researcher",tags:["Researchers"],summary:"Create a new researcher profile",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:zp}}}},responses:{201:{description:"Researcher profile created successfully",summary:"Researcher Created",content:{"application/json":{schema:C.object({message:C.string()})}}},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:C.object({errors:C.record(C.string(),C.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:C.object({message:C.string()})}}},409:{description:"Researcher with this registration number already exists or user already has a researcher profile",summary:"Conflict",content:{"application/json":{schema:C.object({message:C.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:C.object({message:C.string()})}}}}},Df={method:"get",path:"/researcher",tags:["Researchers"],summary:"List all researchers with pagination and filters",request:{query:C.object({page:C.coerce.number().min(1).default(Yv).optional(),limit:C.coerce.number().min(1).default(Xv).optional(),userId:C.string().optional(),registrationNumber:C.string().optional(),name:C.string().optional(),emailAddress:C.string().optional(),mainEtps:C.string().optional(),formations:C.string().optional(),occupations:C.string().optional(),institutions:C.string().optional(),biography:C.string().optional(),orderBy:C.enum(["asc","desc"]).optional()})},responses:{200:{description:"List of researchers retrieved successfully with pagination",summary:"Researchers Retrieved",content:{"application/json":{schema:C.object({page:C.number(),totalPages:C.number(),offset:C.number(),limit:C.number(),researchers:C.array($p)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:C.object({message:C.string()})}}}}},Ff={method:"get",path:"/researcher/{id}",tags:["Researchers"],summary:"Find researcher by ID",request:{params:ls},responses:{200:{description:"Researcher details retrieved successfully",summary:"Researcher Retrieved",content:{"application/json":{schema:$p}}},400:{description:"Invalid researcher ID format",summary:"Validation Error",content:{"application/json":{schema:C.object({errors:C.record(C.string(),C.string())})}}},404:{description:"Researcher not found with the provided ID",summary:"Researcher Not Found",content:{"application/json":{schema:C.object({message:C.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:C.object({message:C.string()})}}}}},Bf={method:"get",path:"/researcher/user/{userId}",tags:["Researchers"],summary:"Find researcher by user ID",request:{params:Jp},responses:{200:{description:"Researcher details retrieved successfully",summary:"Researcher Retrieved",content:{"application/json":{schema:$p}}},400:{description:"Invalid user ID format",summary:"Validation Error",content:{"application/json":{schema:C.object({errors:C.record(C.string(),C.string())})}}},404:{description:"Researcher not found for this user",summary:"Researcher Not Found",content:{"application/json":{schema:C.object({message:C.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:C.object({message:C.string()})}}}}},qf={method:"put",path:"/researcher/{id}",tags:["Researchers"],summary:"Update researcher profile",security:[{bearerAuth:[]}],request:{params:ls,body:{content:{"application/json":{schema:Yp.omit({id:!0})}}}},responses:{200:{description:"Researcher profile updated successfully",summary:"Researcher Updated",content:{"application/json":{schema:C.object({message:C.string()})}}},400:{description:"Invalid input data or researcher ID format",summary:"Validation Error",content:{"application/json":{schema:C.object({errors:C.record(C.string(),C.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:C.object({message:C.string()})}}},404:{description:"Researcher not found with the provided ID",summary:"Researcher Not Found",content:{"application/json":{schema:C.object({message:C.string()})}}},409:{description:"Researcher with this registration number already exists",summary:"Conflict",content:{"application/json":{schema:C.object({message:C.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:C.object({message:C.string()})}}}}},Uf={method:"delete",path:"/researcher/{id}",tags:["Researchers"],summary:"Delete researcher profile",security:[{bearerAuth:[]}],request:{params:Vp},responses:{200:{description:"Researcher profile deleted successfully",summary:"Researcher Deleted"},400:{description:"Invalid researcher ID format",summary:"Validation Error",content:{"application/json":{schema:C.object({errors:C.record(C.string(),C.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:C.object({message:C.string()})}}},404:{description:"Researcher not found with the provided ID",summary:"Researcher Not Found",content:{"application/json":{schema:C.object({message:C.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:C.object({message:C.string()})}}}}};import R from"zod";import{extendZodWithOpenApi as $v}from"@asteasolutions/zod-to-openapi";import Qp from"zod";$v(Qp);var ed=Qp.object({id:Qp.uuid()}),fs=class{constructor(e){this.scientificArticlesRepository=e}async handle(e,t){try{let{id:r}=ed.parse({id:e.params.id});if(!await this.scientificArticlesRepository.findById(r))throw new p("O artigo cient\xEDfico n\xE3o existe.");return await this.scientificArticlesRepository.deleteById(r),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as Qv}from"@asteasolutions/zod-to-openapi";import rd from"zod";Qv(rd);var td=rd.object({id:rd.uuid()}),ys=class{constructor(e){this.scientificArticlesRepository=e}async handle(e,t){try{let{id:r}=td.parse({id:e.params.id}),i=await this.scientificArticlesRepository.findById(r);if(!i)throw new p("Artigo cient\xEDfico n\xE3o encontrado.");return t.status(200).json(i)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as eE}from"@asteasolutions/zod-to-openapi";import vr from"zod";var rE=1,tE=6;eE(vr);var od=vr.object({page:vr.coerce.number().min(1).default(rE),limit:vr.coerce.number().min(1).default(tE),title:vr.string().optional(),author:vr.string().optional(),journal:vr.string().optional(),orderBy:vr.enum(["asc","desc"]).default("desc")}),hs=class{constructor(e){this.scientificArticlesRepository=e}async handle(e,t){try{let{limit:r,page:i,...n}=od.parse(e.query),s=i*r-r,[m,c]=await Promise.all([this.scientificArticlesRepository.find({pagination:{offset:s,limit:r},filter:n}),this.scientificArticlesRepository.count({filter:n})]),d=Math.max(Math.ceil(c/r),1);return t.status(200).json({page:i,totalPages:d,offset:s,limit:r,scientificArticles:m})}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as oE}from"@asteasolutions/zod-to-openapi";import pe from"zod";oE(pe);var id=pe.object({id:pe.uuid(),title:pe.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio.").optional(),author:pe.string().min(1,"Autor \xE9 obrigat\xF3rio.").optional(),journal:pe.string().optional(),volume:pe.string().optional(),edition:pe.string().optional(),pageStart:pe.coerce.number().optional(),pageEnd:pe.coerce.number().optional(),startDate:pe.coerce.date().optional(),endDate:pe.coerce.date().optional(),city:pe.string().optional(),state:pe.string().optional(),country:pe.string().optional(),publisher:pe.string().optional(),description:pe.string().optional(),year:pe.coerce.number().optional(),accessUrl:pe.url("URL de acesso deve ser v\xE1lida").optional()}),Rs=class{constructor(e){this.scientificArticlesRepository=e}async handle(e,t){try{let{id:r,title:i,author:n,journal:s,volume:m,edition:c,pageStart:d,pageEnd:h,startDate:E,endDate:F,city:X,state:te,country:se,publisher:fe,description:Kt,year:Ja,accessUrl:zI}=id.parse({id:e.params.id,...e.body});if(!await this.scientificArticlesRepository.findById(r))throw new p("O artigo cient\xEDfico n\xE3o existe.");return await this.scientificArticlesRepository.update({id:r,title:i,author:n,journal:s,volume:m,edition:c,pageStart:d,pageEnd:h,startDate:E,endDate:F,city:X,state:te,country:se,publisher:fe,description:Kt,year:Ja,accessUrl:zI}),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var kf={method:"post",path:"/scientific-articles",tags:["Scientific Articles"],summary:"Create scientific article",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:R.object({title:R.string().min(1).openapi({description:"T\xEDtulo do artigo"}),author:R.string().min(1).openapi({description:"Autor do artigo"}),journal:R.string().optional().openapi({description:"Nome do peri\xF3dico/revista"}),volume:R.string().optional().openapi({description:"Volume"}),edition:R.string().optional().openapi({description:"N\xFAmero/Edi\xE7\xE3o"}),pageStart:R.number().optional().openapi({description:"P\xE1gina inicial"}),pageEnd:R.number().optional().openapi({description:"P\xE1gina final"}),startDate:R.string().openapi({description:"Data de in\xEDcio (ISO 8601)",example:"2024-01-01T10:00:00Z"}),endDate:R.string().openapi({description:"Data de t\xE9rmino (ISO 8601)",example:"2024-12-31T10:00:00Z"}),city:R.string().optional().openapi({description:"Cidade"}),state:R.string().optional().openapi({description:"Estado"}),country:R.string().optional().openapi({description:"Pa\xEDs"}),publisher:R.string().optional().openapi({description:"Editora/Institui\xE7\xE3o"}),description:R.string().optional().openapi({description:"Descri\xE7\xE3o do artigo"}),year:R.number().optional().openapi({description:"Ano"}),accessUrl:R.string().url().optional().openapi({description:"URL de acesso"})})}}}},responses:{201:{description:"Scientific article created successfully",summary:"Article Created"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:R.object({errors:R.record(R.string(),R.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:R.object({message:R.string()})}}}}},Of={method:"get",path:"/scientific-articles",tags:["Scientific Articles"],summary:"List scientific articles",security:[{bearerAuth:[]}],request:{query:od},responses:{200:{description:"Paginated list of scientific articles retrieved successfully",summary:"Articles Retrieved",content:{"application/json":{schema:R.object({page:R.number(),totalPages:R.number(),offset:R.number(),limit:R.number(),scientificArticles:R.array(R.object({id:R.string(),title:R.string(),author:R.string(),journal:R.string().nullable(),volume:R.string().nullable(),edition:R.string().nullable(),pageStart:R.number().nullable(),pageEnd:R.number().nullable(),startDate:R.date(),endDate:R.date(),city:R.string().nullable(),state:R.string().nullable(),country:R.string().nullable(),publisher:R.string().nullable(),description:R.string().nullable(),year:R.number().nullable(),accessUrl:R.string().nullable(),createdAt:R.date(),updatedAt:R.date()}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:R.object({errors:R.record(R.string(),R.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:R.object({message:R.string()})}}}}},Gf={method:"get",path:"/scientific-articles/{id}",tags:["Scientific Articles"],summary:"Find scientific article by ID",security:[{bearerAuth:[]}],request:{params:td},responses:{200:{description:"Scientific article details retrieved successfully",summary:"Article Retrieved",content:{"application/json":{schema:R.object({id:R.string(),title:R.string(),author:R.string(),journal:R.string().nullable(),volume:R.string().nullable(),edition:R.string().nullable(),pageStart:R.number().nullable(),pageEnd:R.number().nullable(),startDate:R.date(),endDate:R.date(),city:R.string().nullable(),state:R.string().nullable(),country:R.string().nullable(),publisher:R.string().nullable(),description:R.string().nullable(),year:R.number().nullable(),accessUrl:R.string().nullable(),createdAt:R.date(),updatedAt:R.date()}).nullable()}}},400:{description:"Invalid article ID format",summary:"Validation Error",content:{"application/json":{schema:R.object({errors:R.record(R.string(),R.string())})}}},404:{description:"Scientific article not found with the provided ID",summary:"Article Not Found",content:{"application/json":{schema:R.object({message:R.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:R.object({message:R.string()})}}}}},Nf={method:"put",path:"/scientific-articles/{id}",tags:["Scientific Articles"],summary:"Update scientific article",security:[{bearerAuth:[]}],request:{params:id.pick({id:!0}),body:{content:{"application/json":{schema:R.object({title:R.string().min(1).optional().openapi({description:"T\xEDtulo do artigo"}),author:R.string().min(1).optional().openapi({description:"Autor do artigo"}),journal:R.string().optional().openapi({description:"Nome do peri\xF3dico/revista"}),volume:R.string().optional().openapi({description:"Volume"}),edition:R.string().optional().openapi({description:"N\xFAmero/Edi\xE7\xE3o"}),pageStart:R.number().optional().openapi({description:"P\xE1gina inicial"}),pageEnd:R.number().optional().openapi({description:"P\xE1gina final"}),startDate:R.string().optional().openapi({description:"Data de in\xEDcio (ISO 8601)",example:"2024-01-01T10:00:00Z"}),endDate:R.string().optional().openapi({description:"Data de t\xE9rmino (ISO 8601)",example:"2024-12-31T10:00:00Z"}),city:R.string().optional().openapi({description:"Cidade"}),state:R.string().optional().openapi({description:"Estado"}),country:R.string().optional().openapi({description:"Pa\xEDs"}),publisher:R.string().optional().openapi({description:"Editora/Institui\xE7\xE3o"}),description:R.string().optional().openapi({description:"Descri\xE7\xE3o do artigo"}),year:R.number().optional().openapi({description:"Ano"}),accessUrl:R.string().url().optional().openapi({description:"URL de acesso"})})}}}},responses:{200:{description:"Scientific article updated successfully",summary:"Article Updated"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:R.object({errors:R.record(R.string(),R.string())})}}},404:{description:"Scientific article not found with the provided ID",summary:"Article Not Found",content:{"application/json":{schema:R.object({message:R.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:R.object({message:R.string()})}}}}},Lf={method:"delete",path:"/scientific-articles/{id}",tags:["Scientific Articles"],summary:"Delete scientific article",security:[{bearerAuth:[]}],request:{params:ed},responses:{200:{description:"Scientific article deleted successfully",summary:"Article Deleted"},400:{description:"Invalid article ID format",summary:"Validation Error",content:{"application/json":{schema:R.object({errors:R.record(R.string(),R.string())})}}},404:{description:"Scientific article not found with the provided ID",summary:"Article Not Found",content:{"application/json":{schema:R.object({message:R.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:R.object({message:R.string()})}}}}};import x from"zod";import{extendZodWithOpenApi as iE}from"@asteasolutions/zod-to-openapi";import nd from"zod";iE(nd);var sd=nd.object({id:nd.uuid()}),Is=class{constructor(e,t){this.scientificJournalRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{id:r}=sd.parse({id:e.params.id}),i=await this.scientificJournalRepository.findById(r);if(!i)throw new p("A revista cient\xEDfica n\xE3o existe.");return i.logoUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.logoUrl}),await this.scientificJournalRepository.deleteById(r),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as nE}from"@asteasolutions/zod-to-openapi";import ad from"zod";nE(ad);var md=ad.object({id:ad.uuid()}),bs=class{constructor(e){this.scientificJournalRepository=e}async handle(e,t){try{let{id:r}=md.parse({id:e.params.id}),i=await this.scientificJournalRepository.findById(r);if(!i)throw new p("Revista cient\xEDfica n\xE3o encontrada.");return t.status(200).json(i)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as sE}from"@asteasolutions/zod-to-openapi";import He from"zod";var aE=1,mE=6;sE(He);var cd=He.object({page:He.coerce.number().min(1).default(aE),limit:He.coerce.number().min(1).default(mE),name:He.string().optional(),description:He.string().optional(),issn:He.string().optional(),directors:He.string().optional(),editorialBoard:He.string().optional(),orderBy:He.enum(["asc","desc"]).default("desc")}),Cs=class{constructor(e){this.scientificJournalRepository=e}async handle(e,t){try{let{limit:r,page:i,...n}=cd.parse(e.query),s=i*r-r,[m,c]=await Promise.all([this.scientificJournalRepository.find({pagination:{offset:s,limit:r},filter:n}),this.scientificJournalRepository.count({filter:n})]),d=Math.max(Math.ceil(c/r),1);return t.status(200).json({page:i,totalPages:d,offset:s,limit:r,scientificJournals:m})}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as cE}from"@asteasolutions/zod-to-openapi";import Ve from"zod";var _f=5,Wf=1024,pE=Wf*Wf,dE=_f*pE;cE(Ve);var pd=Ve.object({id:Ve.uuid(),name:Ve.string().min(1,"Nome \xE9 obrigat\xF3rio.").optional(),issn:Ve.string().min(1,"ISSN \xE9 obrigat\xF3rio.").optional(),description:Ve.string().min(1,"Descri\xE7\xE3o \xE9 obrigat\xF3ria.").optional(),journalUrl:Ve.url("URL da revista deve ser v\xE1lida.").optional(),directors:Ve.string().optional(),editorialBoard:Ve.string().optional(),logo:Ve.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=dE,`O logo deve ter no m\xE1ximo ${_f}MB.`).optional()}),ws=class{constructor(e,t){this.scientificJournalRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{id:r,logo:i,name:n,issn:s,description:m,journalUrl:c,directors:d,editorialBoard:h}=pd.parse({id:e.params.id,...e.body,logo:e.file}),E=await this.scientificJournalRepository.findById(r);if(!E)throw new p("A revista cient\xEDfica n\xE3o existe.");let F=E.logoUrl;return i&&(F=await this.firebaseStorageService.uploadFile({file:i,id:r,folder:M.SCIENTIFIC_JOURNAL})),await this.scientificJournalRepository.update({id:r,name:n,issn:s,description:m,journalUrl:c,directors:d,editorialBoard:h,logoUrl:F}),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var zf={method:"post",path:"/scientific-journals",tags:["Scientific Journals"],summary:"Create scientific journal",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:x.object({name:x.string().min(1).openapi({description:"Nome da revista cient\xEDfica"}),issn:x.string().min(1).openapi({description:"ISSN da revista"}),description:x.string().min(1).openapi({description:"Descri\xE7\xE3o da revista"}),journalUrl:x.string().url().openapi({description:"URL da revista"}),directors:x.string().optional().openapi({description:"Diretores da revista"}),editorialBoard:x.string().optional().openapi({description:"Conselho editorial"}),logo:x.string().optional().openapi({description:"Logo da revista (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{201:{description:"Scientific journal created successfully",summary:"Journal Created"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:x.object({errors:x.record(x.string(),x.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:x.object({message:x.string()})}}}}},Hf={method:"get",path:"/scientific-journals",tags:["Scientific Journals"],summary:"List scientific journals",security:[{bearerAuth:[]}],request:{query:cd},responses:{200:{description:"Paginated list of scientific journals retrieved successfully",summary:"Journals Retrieved",content:{"application/json":{schema:x.object({page:x.number(),totalPages:x.number(),offset:x.number(),limit:x.number(),scientificJournals:x.array(x.object({id:x.string(),name:x.string(),issn:x.string(),description:x.string(),logoUrl:x.string().nullable(),journalUrl:x.string(),directors:x.string().nullable(),editorialBoard:x.string().nullable(),createdAt:x.date(),updatedAt:x.date()}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:x.object({errors:x.record(x.string(),x.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:x.object({message:x.string()})}}}}},Vf={method:"get",path:"/scientific-journals/{id}",tags:["Scientific Journals"],summary:"Find scientific journal by ID",security:[{bearerAuth:[]}],request:{params:md},responses:{200:{description:"Scientific journal details retrieved successfully",summary:"Journal Retrieved",content:{"application/json":{schema:x.object({id:x.string(),name:x.string(),issn:x.string(),description:x.string(),logoUrl:x.string().nullable(),journalUrl:x.string(),directors:x.string().nullable(),editorialBoard:x.string().nullable(),createdAt:x.date(),updatedAt:x.date()}).nullable()}}},400:{description:"Invalid journal ID format",summary:"Validation Error",content:{"application/json":{schema:x.object({errors:x.record(x.string(),x.string())})}}},404:{description:"Scientific journal not found with the provided ID",summary:"Journal Not Found",content:{"application/json":{schema:x.object({message:x.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:x.object({message:x.string()})}}}}},Zf={method:"put",path:"/scientific-journals/{id}",tags:["Scientific Journals"],summary:"Update scientific journal",security:[{bearerAuth:[]}],request:{params:pd.pick({id:!0}),body:{content:{"multipart/form-data":{schema:x.object({name:x.string().min(1).optional().openapi({description:"Nome da revista cient\xEDfica"}),issn:x.string().min(1).optional().openapi({description:"ISSN da revista"}),description:x.string().min(1).optional().openapi({description:"Descri\xE7\xE3o da revista"}),journalUrl:x.string().url().optional().openapi({description:"URL da revista"}),directors:x.string().optional().openapi({description:"Diretores da revista"}),editorialBoard:x.string().optional().openapi({description:"Conselho editorial"}),logo:x.string().optional().openapi({description:"Logo da revista (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{200:{description:"Scientific journal updated successfully",summary:"Journal Updated"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:x.object({errors:x.record(x.string(),x.string())})}}},404:{description:"Scientific journal not found with the provided ID",summary:"Journal Not Found",content:{"application/json":{schema:x.object({message:x.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:x.object({message:x.string()})}}}}},Kf={method:"delete",path:"/scientific-journals/{id}",tags:["Scientific Journals"],summary:"Delete scientific journal",security:[{bearerAuth:[]}],request:{params:sd},responses:{200:{description:"Scientific journal deleted successfully",summary:"Journal Deleted"},400:{description:"Invalid journal ID format",summary:"Validation Error",content:{"application/json":{schema:x.object({errors:x.record(x.string(),x.string())})}}},404:{description:"Scientific journal not found with the provided ID",summary:"Journal Not Found",content:{"application/json":{schema:x.object({message:x.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:x.object({message:x.string()})}}}}};import{$Enums as yE}from"@prisma/client";import _ from"zod";import{extendZodWithOpenApi as lE}from"@asteasolutions/zod-to-openapi";import bt from"zod";lE(bt);var dd=bt.object({role:bt.string().min(1),description:bt.string().optional(),userId:bt.uuid(),order:bt.number().optional()}),Ss=class{constructor(e){this.sdhcTeamMemberRepository=e}async handle(e,t){try{let{role:r,description:i,userId:n,order:s}=dd.parse(e.body);return await this.sdhcTeamMemberRepository.create({role:r,description:i,userId:n,order:s??0}),t.sendStatus(201)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as uE}from"@asteasolutions/zod-to-openapi";import ld from"zod";uE(ld);var ud=ld.object({id:ld.uuid()}),vs=class{constructor(e){this.sdhcTeamMemberRepository=e}async handle(e,t){try{let{id:r}=ud.parse({id:e.params.id});if(!await this.sdhcTeamMemberRepository.findById(r))throw new p("O membro da equipe SDHC n\xE3o existe.");return await this.sdhcTeamMemberRepository.deleteById(r),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as gE}from"@asteasolutions/zod-to-openapi";import gd from"zod";gE(gd);var js=gd.object({id:gd.uuid()}),Es=class{constructor(e){this.sdhcTeamMemberRepository=e}async handle(e,t){try{let{id:r}=js.parse({id:e.params.id}),i=await this.sdhcTeamMemberRepository.findById(r);if(!i)throw new p("O membro da equipe SDHC n\xE3o existe.");return t.status(200).json(i)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as fE}from"@asteasolutions/zod-to-openapi";import Ur from"zod";fE(Ur);var fd=Ur.object({id:Ur.uuid(),role:Ur.string().min(1).optional(),description:Ur.string().optional(),userId:Ur.uuid().optional(),order:Ur.number().optional()}),xs=class{constructor(e){this.sdhcTeamMemberRepository=e}async handle(e,t){try{let{id:r,role:i,description:n,userId:s,order:m}=fd.parse({id:e.params.id,...e.body});if(!await this.sdhcTeamMemberRepository.findById(r))throw new p("O membro da equipe SDHC n\xE3o existe.");return await this.sdhcTeamMemberRepository.update({id:r,role:i,description:n,userId:s,order:m}),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var hE=_.object({id:_.uuid(),name:_.string(),emailAddress:_.string(),avatarUrl:_.string().nullable(),orcid:_.string().nullable(),phone:_.string().nullable(),lattesUrl:_.string().nullable(),role:_.enum(yE.UserRole)}),Jf=_.object({id:_.uuid(),role:_.string(),description:_.string().nullable(),order:_.number(),createdAt:_.date(),updatedAt:_.date(),userId:_.uuid(),user:hE}),Yf={method:"post",path:"/sdhc-team-member",tags:["SDHC Team Members"],summary:"Create a new SDHC Team Member",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:dd}}}},responses:{201:{description:"SDHC Team Member created successfully",summary:"SDHC Team Member Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:_.object({errors:_.record(_.string(),_.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:_.object({message:_.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:_.object({message:_.string()})}}}}},Xf={method:"get",path:"/sdhc-team-member",tags:["SDHC Team Members"],summary:"List all SDHC Team Members with filters",request:{query:_.object({role:_.string().optional(),orderBy:_.enum(["asc","desc"]).optional()})},responses:{200:{description:"List of SDHC Team Members retrieved successfully",summary:"SDHC Team Members Retrieved",content:{"application/json":{schema:_.object({members:_.array(Jf)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:_.object({message:_.string()})}}}}},$f={method:"get",path:"/sdhc-team-member/{id}",tags:["SDHC Team Members"],summary:"Find SDHC Team Member by ID",request:{params:js},responses:{200:{description:"SDHC Team Member details retrieved successfully",summary:"SDHC Team Member Retrieved",content:{"application/json":{schema:Jf}}},400:{description:"Invalid SDHC Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:_.object({errors:_.record(_.string(),_.string())})}}},404:{description:"SDHC Team Member not found with the provided ID",summary:"SDHC Team Member Not Found",content:{"application/json":{schema:_.object({message:_.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:_.object({message:_.string()})}}}}},Qf={method:"put",path:"/sdhc-team-member/{id}",tags:["SDHC Team Members"],summary:"Update SDHC Team Member",security:[{bearerAuth:[]}],request:{params:js,body:{content:{"application/json":{schema:fd.omit({id:!0})}}}},responses:{200:{description:"SDHC Team Member updated successfully",summary:"SDHC Team Member Updated"},400:{description:"Invalid input data or SDHC Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:_.object({errors:_.record(_.string(),_.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:_.object({message:_.string()})}}},404:{description:"SDHC Team Member not found with the provided ID",summary:"SDHC Team Member Not Found",content:{"application/json":{schema:_.object({message:_.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:_.object({message:_.string()})}}}}},ey={method:"delete",path:"/sdhc-team-member/{id}",tags:["SDHC Team Members"],summary:"Delete SDHC Team Member",security:[{bearerAuth:[]}],request:{params:ud},responses:{200:{description:"SDHC Team Member deleted successfully",summary:"SDHC Team Member Deleted"},400:{description:"Invalid SDHC Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:_.object({errors:_.record(_.string(),_.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:_.object({message:_.string()})}}},404:{description:"SDHC Team Member not found with the provided ID",summary:"SDHC Team Member Not Found",content:{"application/json":{schema:_.object({message:_.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:_.object({message:_.string()})}}}}};import{$Enums as oy}from"@prisma/client";import Y from"zod";import{extendZodWithOpenApi as RE}from"@asteasolutions/zod-to-openapi";import yd from"zod";RE(yd);var hd=yd.object({id:yd.string()}),Ms=class{constructor(e){this.userRepository=e}async handle(e,t){try{let{id:r}=hd.parse({id:e.params.id}),i=await this.userRepository.findById(r);if(!i)throw new p("O usu\xE1rio n\xE3o existe.");let n=e.user.id;if(i.id!==n)throw new je("Voc\xEA n\xE3o tem permiss\xE3o para deletar o usu\xE1rio");return await this.userRepository.deleteById(i.id),t.sendStatus(204)}catch(r){if(console.log(r),r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as IE}from"@asteasolutions/zod-to-openapi";import{z as Rd}from"zod";IE(Rd);var Id=Rd.object({id:Rd.string().min(1,"id do usu\xE1rio n\xE3o fornecido.")}),As=class{constructor(e){this.userRepository=e}async handle(e,t){try{let{id:r}=Id.parse(e.params),i=await this.userRepository.findById(r);if(!i)throw new p("Usu\xE1rio n\xE3o encontrado");t.status(200).json(i)}catch(r){if(console.log(r),r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as bE}from"@asteasolutions/zod-to-openapi";import kr from"zod";var ty=2,ry=1024,CE=ry*ry,wE=ty*CE,SE=/^\d{4}-\d{4}-\d{4}-\d{4}$/,vE=/^\(?\d{2}\)?[\s-]?\d{4,5}-?\d{4}$/;bE(kr);var bd=kr.object({name:kr.string().optional(),lattesUrl:kr.string().optional(),orcid:kr.string().optional().transform(o=>o===void 0?void 0:o.trim()).refine(o=>o===void 0||o===""||SE.test(o),{message:"ORCID inv\xE1lido. Deve estar no formato 0000-0000-0000-0000"}),phone:kr.string().optional().refine(o=>o===void 0||o===""||vE.test(o),{message:"Telefone inv\xE1lido. Deve estar no formato (99) 99999-9999"}),avatarImage:kr.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=wE,`A imagem deve ter no m\xE1ximo ${ty}MB.`).optional()}),Ps=class{constructor(e,t){this.userRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{avatarImage:r,...i}=bd.parse({...e.body,avatarImage:e.file}),n=e.user.id,s=await this.userRepository.findById(n);if(!s)throw new ye("O usu\xE1rio n\xE3o existe");let m=s.avatarUrl;return r&&(s.avatarUrl?m=await this.firebaseStorageService.updateFile({file:r,id:n,folder:M.USER,fileUrl:s.avatarUrl}):m=await this.firebaseStorageService.uploadFile({file:r,id:n,folder:M.USER})),await this.userRepository.update({...i,id:n,avatarUrl:m||void 0}),t.sendStatus(204)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var iy={method:"get",path:"/users/{id}",tags:["Users"],summary:"Find user by ID",request:{params:Id},responses:{200:{description:"User details retrieved successfully",summary:"User Retrieved",content:{"application/json":{schema:Y.object({id:Y.string(),name:Y.string(),createdAt:Y.date(),updatedAt:Y.date(),role:Y.enum(oy.UserRole),lattesUrl:Y.string().nullable(),orcid:Y.string().nullable(),phone:Y.string().nullable(),avatarUrl:Y.url().nullable(),emailAddress:Y.email()})}}},400:{description:"Invalid user ID format",summary:"Validation Error",content:{"application/json":{schema:Y.object({errors:Y.record(Y.string(),Y.string())})}}},404:{description:"User not found with the provided ID",summary:"User Not Found",content:{"application/json":{schema:Y.object({message:Y.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Y.object({message:Y.string()})}}}}},ny={method:"put",path:"/users",tags:["Users"],summary:"Update authenticated user",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:bd}}}},responses:{200:{description:"User profile updated successfully",summary:"User Updated",content:{"application/json":{schema:Y.object({message:Y.string()})}}},400:{description:"Invalid input data or file format",summary:"Validation Error",content:{"application/json":{schema:Y.object({errors:Y.record(Y.string(),Y.string())})}}},401:{description:"User not authenticated or unauthorized",summary:"Authentication Required",content:{"application/json":{schema:Y.object({message:Y.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Y.object({message:Y.string()})}}}}},sy={method:"delete",path:"/users",tags:["Users"],summary:"Delete authenticated user",security:[{bearerAuth:[]}],request:{params:hd},responses:{200:{description:"User account deleted successfully",summary:"User Deleted",content:{"application/json":{schema:Y.object({message:Y.string()})}}},400:{description:"Invalid request parameters",summary:"Validation Error",content:{"application/json":{schema:Y.object({errors:Y.record(Y.string(),Y.string())})}}},401:{description:"User not authenticated or unauthorized",summary:"Authentication Required",content:{"application/json":{schema:Y.object({message:Y.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Y.object({message:Y.string()})}}}}},ay={method:"get",path:"/users",tags:["Users"],summary:"List users",responses:{200:{description:"Complete list of users retrieved successfully",summary:"Users Retrieved",content:{"application/json":{schema:Y.array(Y.object({id:Y.string(),name:Y.string(),createdAt:Y.date(),updatedAt:Y.date(),role:Y.enum(oy.UserRole),lattesUrl:Y.url().nullable(),orcid:Y.string().nullable(),phone:Y.string().nullable(),avatarUrl:Y.string().nullable(),emailAddress:Y.email()}))}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Y.object({message:Y.string()})}}}}};import S from"zod";import{extendZodWithOpenApi as EE}from"@asteasolutions/zod-to-openapi";import Cd from"zod";EE(Cd);var wd=Cd.object({id:Cd.uuid()}),Ts=class{constructor(e,t){this.webinarRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{id:r}=wd.parse({id:e.params.id}),i=await this.webinarRepository.findById(r);if(!i)throw new p("O webinar n\xE3o existe.");return i.thumbnailUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.thumbnailUrl}),await this.webinarRepository.deleteById(r),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as jE}from"@asteasolutions/zod-to-openapi";import Sd from"zod";jE(Sd);var vd=Sd.object({id:Sd.uuid()}),Ds=class{constructor(e){this.webinarRepository=e}async handle(e,t){try{let{id:r}=vd.parse({id:e.params.id}),i=await this.webinarRepository.findById(r);if(!i)throw new p("Webinar n\xE3o encontrado.");return t.status(200).json(i)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as xE}from"@asteasolutions/zod-to-openapi";import Or from"zod";var ME=1,AE=6;xE(Or);var Ed=Or.object({page:Or.coerce.number().min(1).default(ME),limit:Or.coerce.number().min(1).default(AE),title:Or.string().optional(),description:Or.string().optional(),orderBy:Or.enum(["asc","desc"]).default("desc")}),Fs=class{constructor(e){this.webinarRepository=e}async handle(e,t){try{let{limit:r,page:i,...n}=Ed.parse(e.query),s=i*r-r,[m,c]=await Promise.all([this.webinarRepository.find({pagination:{offset:s,limit:r},filter:n}),this.webinarRepository.count({filter:n})]),d=Math.max(Math.ceil(c/r),1);return t.status(200).json({page:i,totalPages:d,offset:s,limit:r,webinars:m})}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as PE}from"@asteasolutions/zod-to-openapi";import ke from"zod";var cy=5,my=1024,TE=my*my,DE=cy*TE;PE(ke);var jd=ke.object({id:ke.uuid(),title:ke.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio.").optional(),description:ke.string().optional(),scheduledAt:ke.coerce.date().optional(),webinarLink:ke.url("URL do webinar deve ser v\xE1lida").optional(),guestIds:ke.transform(o=>typeof o=="string"?o.split(","):o).pipe(ke.array(ke.uuid())).optional(),thumbnail:ke.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=DE,`A thumbnail deve ter no m\xE1ximo ${cy}MB.`).optional()}),Bs=class{constructor(e,t){this.webinarRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{id:r,thumbnail:i,title:n,description:s,scheduledAt:m,webinarLink:c,guestIds:d}=jd.parse({id:e.params.id,...e.body,thumbnail:e.file}),h=await this.webinarRepository.findById(r);if(!h)throw new p("O webinar n\xE3o existe.");let E=h.thumbnailUrl;if(i&&(E=await this.firebaseStorageService.uploadFile({file:i,id:r,folder:M.WEBINAR})),!E)throw new a("Thumbnail URL \xE9 obrigat\xF3rio");return await this.webinarRepository.update({id:r,title:n,description:s,scheduledAt:m,webinarLink:c,thumbnailUrl:E,guestIds:d}),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var py={method:"post",path:"/webinars",tags:["Webinars"],summary:"Create webinar",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:S.object({title:S.string().min(1).openapi({description:"T\xEDtulo do webinar"}),description:S.string().optional().openapi({description:"Descri\xE7\xE3o do webinar"}),scheduledAt:S.string().openapi({description:"Data e hora agendada (ISO 8601)",example:"2024-01-01T10:00:00Z"}),webinarLink:S.string().url().optional().openapi({description:"Link do webinar"}),guestIds:S.string().openapi({description:"IDs dos convidados separados por v\xEDrgula",example:"uuid1,uuid2,uuid3"}),thumbnail:S.string().optional().openapi({description:"Imagem de thumbnail (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{201:{description:"Webinar created successfully",summary:"Webinar Created"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:S.object({errors:S.record(S.string(),S.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:S.object({message:S.string()})}}}}},dy={method:"get",path:"/webinars",tags:["Webinars"],summary:"List webinars",security:[{bearerAuth:[]}],request:{query:Ed},responses:{200:{description:"Paginated list of webinars with guest information retrieved successfully",summary:"Webinars Retrieved",content:{"application/json":{schema:S.object({page:S.number(),totalPages:S.number(),offset:S.number(),limit:S.number(),webinars:S.array(S.object({id:S.string(),title:S.string(),description:S.string().nullable(),scheduledAt:S.date(),webinarLink:S.string().nullable(),thumbnailUrl:S.string().nullable(),createdAt:S.date(),updatedAt:S.date(),guests:S.array(S.object({id:S.uuid(),name:S.string(),emailAddress:S.email(),avatarUrl:S.string().nullable(),createdAt:S.date(),updatedAt:S.date()}))}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:S.object({errors:S.record(S.string(),S.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:S.object({message:S.string()})}}}}},ly={method:"get",path:"/webinars/{id}",tags:["Webinars"],summary:"Find webinar by ID",security:[{bearerAuth:[]}],request:{params:vd},responses:{200:{description:"Webinar details retrieved successfully",summary:"Webinar Retrieved",content:{"application/json":{schema:S.object({id:S.string(),title:S.string(),description:S.string().nullable(),scheduledAt:S.date(),webinarLink:S.string().nullable(),thumbnailUrl:S.string().nullable(),createdAt:S.date(),updatedAt:S.date(),guests:S.array(S.object({id:S.uuid(),name:S.string(),emailAddress:S.email(),avatarUrl:S.string().nullable(),createdAt:S.date(),updatedAt:S.date()}))}).nullable()}}},400:{description:"Invalid webinar ID format",summary:"Validation Error",content:{"application/json":{schema:S.object({errors:S.record(S.string(),S.string())})}}},404:{description:"Webinar not found with the provided ID",summary:"Webinar Not Found",content:{"application/json":{schema:S.object({message:S.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:S.object({message:S.string()})}}}}},uy={method:"put",path:"/webinars/{id}",tags:["Webinars"],summary:"Update webinar",security:[{bearerAuth:[]}],request:{params:jd.pick({id:!0}),body:{content:{"multipart/form-data":{schema:S.object({title:S.string().min(1).optional().openapi({description:"T\xEDtulo do webinar"}),description:S.string().optional().openapi({description:"Descri\xE7\xE3o do webinar"}),scheduledAt:S.string().optional().openapi({description:"Data e hora agendada (ISO 8601)",example:"2024-01-01T10:00:00Z"}),webinarLink:S.string().url().optional().openapi({description:"Link do webinar"}),guestIds:S.string().optional().openapi({description:"IDs dos convidados separados por v\xEDrgula",example:"uuid1,uuid2,uuid3"}),thumbnail:S.string().optional().openapi({description:"Imagem de thumbnail (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{200:{description:"Webinar updated successfully",summary:"Webinar Updated"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:S.object({errors:S.record(S.string(),S.string())})}}},404:{description:"Webinar not found with the provided ID",summary:"Webinar Not Found",content:{"application/json":{schema:S.object({message:S.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:S.object({message:S.string()})}}}}},gy={method:"delete",path:"/webinars/{id}",tags:["Webinars"],summary:"Delete webinar",security:[{bearerAuth:[]}],request:{params:wd},responses:{200:{description:"Webinar deleted successfully",summary:"Webinar Deleted"},400:{description:"Invalid webinar ID format",summary:"Validation Error",content:{"application/json":{schema:S.object({errors:S.record(S.string(),S.string())})}}},404:{description:"Webinar not found with the provided ID",summary:"Webinar Not Found",content:{"application/json":{schema:S.object({message:S.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:S.object({message:S.string()})}}}}};import{$Enums as kE}from"@prisma/client";import V from"zod";import{extendZodWithOpenApi as FE}from"@asteasolutions/zod-to-openapi";import ao from"zod";FE(ao);var xd=ao.object({role:ao.string().min(1),description:ao.string().optional(),userId:ao.uuid()}),qs=class{constructor(e){this.workGroupTeamMemberRepository=e}async handle(e,t){try{let{role:r,description:i,userId:n}=xd.parse(e.body);return await this.workGroupTeamMemberRepository.create({role:r,description:i,userId:n}),t.sendStatus(201)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as BE}from"@asteasolutions/zod-to-openapi";import Md from"zod";BE(Md);var Ad=Md.object({id:Md.uuid()}),Us=class{constructor(e){this.workGroupTeamMemberRepository=e}async handle(e,t){try{let{id:r}=Ad.parse({id:e.params.id});if(!await this.workGroupTeamMemberRepository.findById(r))throw new p("O membro do grupo de trabalho n\xE3o existe.");return await this.workGroupTeamMemberRepository.deleteById(r),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as qE}from"@asteasolutions/zod-to-openapi";import Pd from"zod";qE(Pd);var Os=Pd.object({id:Pd.uuid()}),ks=class{constructor(e){this.workGroupTeamMemberRepository=e}async handle(e,t){try{let{id:r}=Os.parse({id:e.params.id}),i=await this.workGroupTeamMemberRepository.findById(r);if(!i)throw new p("O membro do grupo de trabalho n\xE3o existe.");return t.status(200).json(i)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as UE}from"@asteasolutions/zod-to-openapi";import Ct from"zod";UE(Ct);var Td=Ct.object({id:Ct.uuid(),role:Ct.string().min(1).optional(),description:Ct.string().optional(),userId:Ct.uuid().optional()}),Gs=class{constructor(e){this.workGroupTeamMemberRepository=e}async handle(e,t){try{let{id:r,role:i,description:n,userId:s}=Td.parse({id:e.params.id,...e.body});if(!await this.workGroupTeamMemberRepository.findById(r))throw new p("O membro do grupo de trabalho n\xE3o existe.");return await this.workGroupTeamMemberRepository.update({id:r,role:i,description:n,userId:s}),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var OE=V.object({id:V.uuid(),name:V.string(),emailAddress:V.string(),avatarUrl:V.string().nullable(),orcid:V.string().nullable(),phone:V.string().nullable(),lattesUrl:V.string().nullable(),role:V.enum(kE.UserRole)}),fy=V.object({id:V.uuid(),role:V.string(),description:V.string().nullable(),createdAt:V.date(),updatedAt:V.date(),userId:V.uuid(),user:OE}),yy={method:"post",path:"/work-group-team-member",tags:["Work Group Team Members"],summary:"Create a new Work Group Team Member",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:xd}}}},responses:{201:{description:"Work Group Team Member created successfully",summary:"Work Group Team Member Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:V.object({errors:V.record(V.string(),V.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:V.object({message:V.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:V.object({message:V.string()})}}}}},hy={method:"get",path:"/work-group-team-member",tags:["Work Group Team Members"],summary:"List all Work Group Team Members with filters",request:{query:V.object({role:V.string().optional(),orderBy:V.enum(["asc","desc"]).optional()})},responses:{200:{description:"List of Work Group Team Members retrieved successfully",summary:"Work Group Team Members Retrieved",content:{"application/json":{schema:V.object({members:V.array(fy)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:V.object({message:V.string()})}}}}},Ry={method:"get",path:"/work-group-team-member/{id}",tags:["Work Group Team Members"],summary:"Find Work Group Team Member by ID",request:{params:Os},responses:{200:{description:"Work Group Team Member details retrieved successfully",summary:"Work Group Team Member Retrieved",content:{"application/json":{schema:fy}}},400:{description:"Invalid Work Group Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:V.object({errors:V.record(V.string(),V.string())})}}},404:{description:"Work Group Team Member not found with the provided ID",summary:"Work Group Team Member Not Found",content:{"application/json":{schema:V.object({message:V.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:V.object({message:V.string()})}}}}},Iy={method:"put",path:"/work-group-team-member/{id}",tags:["Work Group Team Members"],summary:"Update Work Group Team Member",security:[{bearerAuth:[]}],request:{params:Os,body:{content:{"application/json":{schema:Td.omit({id:!0})}}}},responses:{200:{description:"Work Group Team Member updated successfully",summary:"Work Group Team Member Updated"},400:{description:"Invalid input data or Work Group Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:V.object({errors:V.record(V.string(),V.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:V.object({message:V.string()})}}},404:{description:"Work Group Team Member not found with the provided ID",summary:"Work Group Team Member Not Found",content:{"application/json":{schema:V.object({message:V.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:V.object({message:V.string()})}}}}},by={method:"delete",path:"/work-group-team-member/{id}",tags:["Work Group Team Members"],summary:"Delete Work Group Team Member",security:[{bearerAuth:[]}],request:{params:Ad},responses:{200:{description:"Work Group Team Member deleted successfully",summary:"Work Group Team Member Deleted"},400:{description:"Invalid Work Group Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:V.object({errors:V.record(V.string(),V.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:V.object({message:V.string()})}}},404:{description:"Work Group Team Member not found with the provided ID",summary:"Work Group Team Member Not Found",content:{"application/json":{schema:V.object({message:V.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:V.object({message:V.string()})}}}}};var u=new GE;u.registerComponent("securitySchemes","bearerAuth",{type:"http",scheme:"bearer",bearerFormat:"JWT"});u.registerPath(sl);u.registerPath(al);u.registerPath(ml);u.registerPath(cl);u.registerPath(dl);u.registerPath(ll);u.registerPath(pl);u.registerPath(iy);u.registerPath(ny);u.registerPath(sy);u.registerPath(ay);u.registerPath(dg);u.registerPath(lg);u.registerPath(ug);u.registerPath(gg);u.registerPath(Il);u.registerPath(bl);u.registerPath(Cl);u.registerPath(wl);u.registerPath(Sl);u.registerPath(jg);u.registerPath(xg);u.registerPath(Mg);u.registerPath(Ag);u.registerPath(Pg);u.registerPath(Jl);u.registerPath(Yl);u.registerPath(Xl);u.registerPath($l);u.registerPath(Ql);u.registerPath(Tf);u.registerPath(Df);u.registerPath(Ff);u.registerPath(Bf);u.registerPath(qf);u.registerPath(Uf);u.registerPath(Dl);u.registerPath(Fl);u.registerPath(Bl);u.registerPath(ql);u.registerPath(Ul);u.registerPath(bg);u.registerPath(Cg);u.registerPath(wg);u.registerPath(Sg);u.registerPath(vg);u.registerPath(ng);u.registerPath(sg);u.registerPath(ag);u.registerPath(mg);u.registerPath(cg);u.registerPath(qu);u.registerPath(Uu);u.registerPath(ku);u.registerPath(Ou);u.registerPath(Gu);u.registerPath(Yf);u.registerPath(Xf);u.registerPath($f);u.registerPath(Qf);u.registerPath(ey);u.registerPath(Au);u.registerPath(Pu);u.registerPath(Tu);u.registerPath(Du);u.registerPath(Fu);u.registerPath(Jg);u.registerPath(Yg);u.registerPath(Xg);u.registerPath($g);u.registerPath(Qg);u.registerPath(ef);u.registerPath(Ku);u.registerPath(Ju);u.registerPath(Yu);u.registerPath(Xu);u.registerPath($u);u.registerPath(Qu);u.registerPath(zu);u.registerPath(Hu);u.registerPath(Vu);u.registerPath(Zu);u.registerPath(yu);u.registerPath(hu);u.registerPath(Ru);u.registerPath(Iu);u.registerPath(bu);u.registerPath(Cu);u.registerPath(lu);u.registerPath(uu);u.registerPath(gu);u.registerPath(fu);u.registerPath(iu);u.registerPath(nu);u.registerPath(su);u.registerPath(au);u.registerPath(Rf);u.registerPath(If);u.registerPath(bf);u.registerPath(Cf);u.registerPath(wf);u.registerPath(Sf);u.registerPath(gf);u.registerPath(ff);u.registerPath(yf);u.registerPath(hf);u.registerPath(sf);u.registerPath(af);u.registerPath(mf);u.registerPath(cf);u.registerPath(py);u.registerPath(dy);u.registerPath(ly);u.registerPath(uy);u.registerPath(gy);u.registerPath(jl);u.registerPath(xl);u.registerPath(Ml);u.registerPath(Al);u.registerPath(Pl);u.registerPath(Fg);u.registerPath(Bg);u.registerPath(qg);u.registerPath(Ug);u.registerPath(kg);u.registerPath(Nl);u.registerPath(Ll);u.registerPath(Wl);u.registerPath(_l);u.registerPath(zl);u.registerPath(zf);u.registerPath(Hf);u.registerPath(Vf);u.registerPath(Zf);u.registerPath(Kf);u.registerPath(kf);u.registerPath(Of);u.registerPath(Gf);u.registerPath(Nf);u.registerPath(Lf);u.registerPath(gl);u.registerPath(fl);u.registerPath(yl);u.registerPath(hl);u.registerPath(Rl);u.registerPath(Su);u.registerPath(vu);u.registerPath(Eu);u.registerPath(ju);u.registerPath(xu);u.registerPath(yy);u.registerPath(hy);u.registerPath(Ry);u.registerPath(Iy);u.registerPath(by);u.registerPath(Gg);u.registerPath(Ng);u.registerPath(Lg);u.registerPath(Wg);u.registerPath(_g);u.registerPath(jf);u.registerPath(xf);u.registerPath(Mf);u.registerPath(Af);u.registerPath(Pf);var LE=new NE(u.definitions),Cy=LE.generateDocument({openapi:"3.0.0",info:{title:"API da Rede CT",version:"1.0.0",description:"API com valida\xE7\xE3o Zod"}});import{Router as KE}from"express";import{extendZodWithOpenApi as WE}from"@asteasolutions/zod-to-openapi";import Dd from"zod";WE(Dd);var _E=Dd.object({authenticatedUserId:Dd.uuid()}),Ns=class{constructor(e){this.userRepository=e}async handle(e,t){try{let{authenticatedUserId:r}=_E.parse({authenticatedUserId:e.user.id}),i=await this.userRepository.findById(r);if(!i)throw new p("Usu\xE1rio n\xE3o encontrado.");return t.status(200).json(i)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{PrismaClient as zE}from"@prisma/client";var O=new zE({log:["warn","error"]});var Ls=class{constructor(e){this.prisma=e}async register({userId:e,title:t,description:r,certificationUrl:i}){await this.prisma.certification.create({data:{title:t,description:r,certificationUrl:i,user:{connect:{id:e}}}})}async find({pagination:{offset:e,limit:t},filter:{description:r,orderBy:i,title:n,userId:s}}){let m={},c=[];return s&&(m.userId=s),n&&c.push({title:{contains:n,mode:"insensitive"}}),r&&c.push({description:{contains:r,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.certification.findMany({where:m,include:{user:{omit:{passwordHash:!0}}},orderBy:{updatedAt:i},skip:e,take:t})}async findById(e){return await this.prisma.certification.findFirst({where:{id:e}})}async findByUserId({pagination:{limit:e,offset:t},filter:{description:r,orderBy:i,title:n},userId:s}){let m={userId:s},c=[];return n&&c.push({title:{contains:n,mode:"insensitive"}}),r&&c.push({description:{contains:r,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.certification.findMany({where:m,include:{user:{omit:{passwordHash:!0}}},skip:t,take:e,orderBy:i?{updatedAt:i}:{updatedAt:"desc"}})}async update({id:e,...t}){await this.prisma.certification.update({where:{id:e},data:t})}async deleteById(e){await this.prisma.certification.delete({where:{id:e}})}async count({filter:{description:e,title:t,userId:r}}){let i={},n=[];return r&&(i.userId=r),t&&n.push({title:{contains:t,mode:"insensitive"}}),e&&n.push({description:{contains:e,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.certification.count({where:i})}};function Er(){return new Ls(O)}var Ws=class{constructor(e){this.prisma=e}async create(e){await this.prisma.news.create({data:e})}async find({pagination:{offset:e,limit:t},filter:{authorId:r,content:i,title:n,orderBy:s}}){let m={};r&&(m.authorId={contains:r,mode:"insensitive"});let c=[];return n&&c.push({title:{contains:n,mode:"insensitive"}}),i&&c.push({content:{contains:i,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.news.findMany({where:m,omit:{authorId:!0},include:{author:!0},orderBy:{updatedAt:s},skip:e,take:t})}async findById(e){return await this.prisma.news.findUnique({where:{id:e},omit:{authorId:!0},include:{author:!0}})}async findByAuthorId({authorId:e,pagination:{offset:t,limit:r},filter:{orderBy:i="desc",content:n,title:s}}){let m={authorId:e},c=[];return s&&c.push({title:{contains:s,mode:"insensitive"}}),n&&c.push({content:{contains:n,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.news.findMany({omit:{authorId:!0},where:m,orderBy:{updatedAt:i},skip:t,take:r})}async update(e){await this.prisma.news.update({where:{id:e.id},data:{title:e.title,content:e.content,imageUrl:e.imageUrl}})}async delete(e){await this.prisma.news.delete({where:{id:e}})}async count({filter:{authorId:e,content:t,title:r}}){let i={};e&&(i.authorId={contains:e,mode:"insensitive"});let n=[];return r&&n.push({title:{contains:r,mode:"insensitive"}}),t&&n.push({content:{contains:t,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.news.count({where:i})}};function er(){return new Ws(O)}var _s=class{constructor(e){this.prisma=e}async create(e){await this.prisma.pendency.create({data:e})}async find({filter:{description:e,orderBy:t,title:r,status:i,userId:n},pagination:{limit:s,offset:m}}){let c={userId:n,AND:{status:{equals:i}}};e&&(c.description={contains:e,mode:"insensitive"});let d=[];return r&&d.push({title:{contains:r,mode:"insensitive"}}),d.length>0&&(c.OR=d),await this.prisma.pendency.findMany({where:c,orderBy:{updatedAt:t},include:{user:{omit:{passwordHash:!0}}},skip:m,take:s})}async findById(e){return await this.prisma.pendency.findFirst({where:{id:e},include:{user:{omit:{passwordHash:!0}}}})}async findByUserId({filter:{description:e,orderBy:t,title:r,status:i},pagination:{limit:n,offset:s},userId:m}){let c={userId:m,AND:{status:{equals:i}}},d=[];return e&&d.push({description:{contains:e,mode:"insensitive"}}),r&&d.push({title:{contains:r,mode:"insensitive"}}),d.length>0&&(c.OR=d),await this.prisma.pendency.findMany({where:c,orderBy:{updatedAt:t},include:{user:{omit:{passwordHash:!0}}},skip:s,take:n})}async update({id:e,...t}){await this.prisma.pendency.update({where:{id:e},data:t})}async deleteById(e){await this.prisma.pendency.delete({where:{id:e}})}async count({filter:{description:e,title:t,status:r,userId:i}}){let n={userId:i},s=[];return e&&s.push({description:{contains:e,mode:"insensitive"}}),t&&s.push({title:{contains:t,mode:"insensitive"}}),r&&s.push({status:{equals:r}}),s.length>0&&(n.OR=s),await this.prisma.pendency.count({where:n})}};function jr(){return new _s(O)}var zs=class{constructor(e){this.prisma=e}async create(e){await this.prisma.user.create({data:e})}async update(e){await this.prisma.user.update({where:{id:e.id},data:{lattesUrl:e.lattesUrl??null,orcid:e.orcid??null,phone:e.phone??null,avatarUrl:e.avatarUrl??null}})}async deleteById(e){await this.prisma.user.delete({where:{id:e}})}async find(){return await this.prisma.user.findMany({omit:{passwordHash:!0}})}async findByEmail(e){return await this.prisma.user.findFirst({where:{emailAddress:e}})}async findById(e){return await this.prisma.user.findFirst({where:{id:e},omit:{passwordHash:!0}})}};function Se(){return new zs(O)}import{compare as HE,hash as VE}from"bcryptjs";var Hs=class{constructor(e,t){this.hashFn=e;this.compareFn=t}async hash(e){return await this.hashFn(e,6)}async compare({password:e,hashedPassword:t}){return await this.compareFn(e,t)}};function Fd(){return new Hs(VE,HE)}import wy from"jsonwebtoken";import ve from"zod";var ZE=ve.object({JWT_SECRET:ve.string(),FIREBASE_BUCKET:ve.string(),FIREBASE_CLIENT_EMAIL:ve.string(),FIREBASE_PRIVATE_KEY:ve.string(),FIREBASE_PROJECT_ID:ve.string(),FIREBASE_TYPE:ve.string(),FIREBASE_PRIVATE_KEY_ID:ve.string(),FIREBASE_CLIENT_ID:ve.string(),FIREBASE_AUTH_URI:ve.string(),FIREBASE_TOKEN_URI:ve.string(),FIREBASE_AUTH_PROVIDER_X509_CERT_URL:ve.string(),FIREBASE_CLIENT_X509_CERT_URL:ve.string()}),ge=ZE.parse(process.env);var Vs=class{constructor(e,t){this.signFn=e;this.verifyFn=t}sign(e){try{return this.signFn(e,ge.JWT_SECRET,{expiresIn:"3d",subject:e.id})}catch{return null}}verify(e){try{return this.verifyFn(e,ge.JWT_SECRET)}catch{return null}}};function Zs(){return new Vs(wy.sign,wy.verify)}function Sy(){return{signUpController:new Ao(Se(),Fd())}}function vy(){return{signInController:new xo(Se(),Fd(),Zs())}}function Ey(){return{findAuthenticatedUserController:new Ns(Se())}}function jy(){return{findAuthenticatedUserController:new vo(er())}}function xy(){return{findAuthenticatedUserCertificationsController:new So(Er())}}function My(){return{findAuthenticatedUserPendenciesController:new Eo(jr())}}var Ks=class{constructor(e){this.jwtService=e}authenticated(e,t,r){let i=e.headers.authorization;if(!i?.startsWith("Bearer "))return t.status(401).json({message:"Token inv\xE1lido.",invalid:!0});let n=i.split(" ")[1];if(!n)return t.status(401).json({message:"Token n\xE3o fornecido."});try{let s=this.jwtService.verify(n);if(!s)return t.status(401).json({message:"Token inv\xE1lido.",invalid:!0});e.user=s,r()}catch(s){if(console.log(s),s instanceof Error)return t.status(401).json({message:s.message})}}isAdmin(e,t,r){let i=e.headers.authorization;if(!i?.startsWith("Bearer "))return t.status(401).json({message:"Token inv\xE1lido.",invalid:!0});let n=i.split(" ")[1];if(!n)return t.status(401).json({message:"Token n\xE3o fornecido."});try{let s=this.jwtService.verify(n);if(!s)return t.status(401).json({message:"Token inv\xE1lido.",invalid:!0});if(s.role!=="ADMIN")return t.status(401).json({message:"\xC9 necess\xE1rio ter permiss\xF5es de administrador."});e.user=s,r()}catch(s){if(console.log(s),s instanceof Error)return t.status(401).json({message:s.message})}}};function J(){return{authMiddleware:new Ks(Zs())}}var rr=KE(),{authMiddleware:mo}=J();rr.post("/sign-up",async(o,e)=>{let{signUpController:t}=Sy();await t.handle(o,e)});rr.post("/sign-in",async(o,e)=>{let{signInController:t}=vy();await t.handle(o,e)});rr.get("/user",(o,e,t)=>{mo.authenticated(o,e,t)},async(o,e)=>{let{findAuthenticatedUserController:t}=Ey();await t.handle(o,e)});rr.get("/user/news",(o,e,t)=>{mo.authenticated(o,e,t)},async(o,e)=>{let{findAuthenticatedUserController:t}=jy();await t.handle(o,e)});rr.get("/admin",(o,e,t)=>{mo.isAdmin(o,e,t)},(o,e)=>{try{e.status(200).json({success:!0})}catch(t){t instanceof Error&&e.status(500).json({message:t.message})}});rr.get("/certifications",(o,e,t)=>{mo.authenticated(o,e,t)},async(o,e)=>{let{findAuthenticatedUserCertificationsController:t}=xy();await t.handle(o,e)});rr.get("/pendencies",(o,e,t)=>{mo.authenticated(o,e,t)},async(o,e)=>{let{findAuthenticatedUserPendenciesController:t}=My();await t.handle(o,e)});import{Router as ij}from"express";import{extendZodWithOpenApi as JE}from"@asteasolutions/zod-to-openapi";import Oe from"zod";var YE=5,Ay=1024,XE=Ay*Ay,Bd=YE*XE;JE(Oe);var $E=Oe.object({volumeNumber:Oe.coerce.number().int().positive("N\xFAmero do volume \xE9 obrigat\xF3rio."),year:Oe.coerce.number().int().positive("Ano \xE9 obrigat\xF3rio."),title:Oe.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),author:Oe.string().min(1,"Autor \xE9 obrigat\xF3rio."),accessUrl:Oe.url().optional(),description:Oe.string().optional(),authorImage:Oe.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=Bd,"A imagem do autor deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB."),coverImage:Oe.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=Bd,"A imagem da capa deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB."),catalogSheet:Oe.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&typeof o.size=="number"&&o.size<=Bd,"A ficha catalogr\xE1fica deve ter no m\xE1ximo 5MB.")}),Js=class{constructor(e,t){this.bookVolumeRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{volumeNumber:r,year:i,title:n,author:s,accessUrl:m,description:c,authorImage:d,coverImage:h,catalogSheet:E}=$E.parse({...e.body,authorImage:e.files?.authorImage?.[0],coverImage:e.files?.coverImage?.[0],catalogSheet:e.files?.catalogSheet?.[0]}),F=await this.bookVolumeRepository.create({volumeNumber:r,year:i,title:n,author:s,accessUrl:m,description:c}),X=F.authorImageUrl,te=F.coverImageUrl,se=F.catalogSheetUrl;return X=await this.firebaseStorageService.uploadFile({file:d,folder:M.BOOK_VOLUME_AUTHOR_IMAGE,id:F.id}),te=await this.firebaseStorageService.uploadFile({file:h,folder:M.BOOK_VOLUME_COVER,id:F.id}),se=await this.firebaseStorageService.uploadFile({file:E,folder:M.BOOK_VOLUME_CATALOG_SHEET,id:F.id}),await this.bookVolumeRepository.update({id:F.id,authorImageUrl:X,coverImageUrl:te,catalogSheetUrl:se}),t.sendStatus(201)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var Ys=class{constructor(e){this.prisma=e}async create({volumeNumber:e,year:t,title:r,author:i,accessUrl:n,authorImageUrl:s,coverImageUrl:m,catalogSheetUrl:c,description:d}){return await this.prisma.bookVolume.create({data:{volumeNumber:e,year:t,title:r,author:i,accessUrl:n,authorImageUrl:s,coverImageUrl:m,catalogSheetUrl:c,description:d}})}async find({pagination:{offset:e,limit:t},filter:{title:r,author:i,description:n,orderBy:s}}){let m={},c=[];return r&&c.push({title:{contains:r,mode:"insensitive"}}),i&&c.push({author:{contains:i,mode:"insensitive"}}),n&&c.push({description:{contains:n,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.bookVolume.findMany({where:m,orderBy:{updatedAt:s},skip:e,take:t})}async findById(e){return await this.prisma.bookVolume.findFirst({where:{id:e}})}async update({id:e,volumeNumber:t,year:r,title:i,author:n,accessUrl:s,authorImageUrl:m,coverImageUrl:c,catalogSheetUrl:d,description:h}){await this.prisma.bookVolume.update({where:{id:e},data:{volumeNumber:t,year:r,title:i,author:n,accessUrl:s,authorImageUrl:m,coverImageUrl:c,catalogSheetUrl:d,description:h}})}async deleteById(e){await this.prisma.bookVolume.delete({where:{id:e}})}async count({filter:{title:e,author:t,description:r}}){let i={},n=[];return e&&n.push({title:{contains:e,mode:"insensitive"}}),t&&n.push({author:{contains:t,mode:"insensitive"}}),r&&n.push({description:{contains:r,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.bookVolume.count({where:i})}};function wt(){return new Ys(O)}import{getStorage as ej}from"firebase-admin/storage";import{config as QE}from"dotenv";import Py from"firebase-admin";QE();var qd=Py.initializeApp({credential:Py.credential.cert({clientEmail:ge.FIREBASE_CLIENT_EMAIL,privateKey:ge.FIREBASE_PRIVATE_KEY,projectId:ge.FIREBASE_PROJECT_ID,type:ge.FIREBASE_TYPE,privateKeyId:ge.FIREBASE_PRIVATE_KEY_ID,clientId:ge.FIREBASE_CLIENT_ID,authUri:ge.FIREBASE_AUTH_URI,tokenUri:ge.FIREBASE_TOKEN_URI,authProviderX509CertUrl:ge.FIREBASE_AUTH_PROVIDER_X509_CERT_URL,clientX509CertUrl:ge.FIREBASE_CLIENT_X509_CERT_URL}),storageBucket:ge.FIREBASE_BUCKET});qd.name?console.log("\u{1F525} Firebase conectado com sucesso!"):console.error("\u274C Erro ao se conectar ao Firebase.");var rj=ej(qd),Ty=rj.bucket(ge.FIREBASE_BUCKET);import{randomUUID as tj}from"node:crypto";var oj=/https:\/\/storage\.googleapis\.com\/[^/]+\/(.+)$/,Xs=class{constructor(e){this.bucket=e}async uploadFile({file:e,folder:t,id:r}){let i=`${tj()}-${e?.originalname}`,n=this.bucket.file(`${t}/${r}/${i}`);return await new Promise((s,m)=>{let c=n.createWriteStream({metadata:{contentType:e?.mimetype}});c.on("error",d=>{m(d)}),c.on("finish",async()=>{try{await n.makePublic();let d=`https://storage.googleapis.com/${this.bucket.name}/${n.name}`;s(d)}catch(d){m(d)}}),c.end(e.buffer)})}async updateFile({file:e,id:t,fileUrl:r,folder:i}){try{let n=this.getPath(r);if(!n)throw new Error("Arquivo n\xE3o encontrado.");let[s,m]=await Promise.all([this.bucket.file(n).delete(),this.uploadFile({file:e,id:t,folder:i})]);return m}catch{throw new Error("Erro ao atualizar o arquivo.")}}async deleteFile({fileUrl:e}){let t=this.getPath(e);if(!t)throw new Error("Arquivo n\xE3o encontrado.");try{await this.bucket.file(t).delete()}catch{throw new Error("Erro ao deletar o arquivo.")}}getPath(e){let t=e.match(oj);return t?t[1]:null}};function D(){return new Xs(Ty)}function Dy(){return{createBookVolumeController:new Js(wt(),D())}}function Fy(){return{findBookVolumesController:new Do(wt())}}function By(){return{findBookVolumeByIdController:new To(wt())}}function qy(){return{updateBookVolumeController:new Bo(wt(),D())}}function Uy(){return{deleteBookVolumeController:new Po(wt(),D())}}import ky from"multer";var K=ky({storage:ky.memoryStorage()});var Gr=ij(),{authMiddleware:co}=J();Gr.post("/",(o,e,t)=>{co.isAdmin(o,e,t)},K.fields([{name:"authorImage",maxCount:1},{name:"coverImage",maxCount:1},{name:"catalogSheet",maxCount:1}]),async(o,e)=>{let{createBookVolumeController:t}=Dy();await t.handle(o,e)});Gr.get("/",(o,e,t)=>{co.isAdmin(o,e,t)},async(o,e)=>{let{findBookVolumesController:t}=Fy();await t.handle(o,e)});Gr.get("/:id",(o,e,t)=>{co.isAdmin(o,e,t)},async(o,e)=>{let{findBookVolumeByIdController:t}=By();await t.handle(o,e)});Gr.put("/:id",(o,e,t)=>{co.isAdmin(o,e,t)},K.fields([{name:"authorImage",maxCount:1},{name:"coverImage",maxCount:1},{name:"catalogSheet",maxCount:1}]),async(o,e)=>{let{updateBookVolumeController:t}=qy();await t.handle(o,e)});Gr.delete("/:id",(o,e,t)=>{co.isAdmin(o,e,t)},async(o,e)=>{let{deleteBookVolumeController:t}=Uy();await t.handle(o,e)});import{Router as nj}from"express";function Oy(){return{registerCertificationController:new Oo(Se(),Er(),D())}}function Gy(){return{findCertificationsController:new ko(Er())}}function Ny(){return{findCertificationByIdController:new Uo(Er())}}function Ly(){return{updateCertificationController:new No(Er(),D())}}function Wy(){return{deleteCertificationController:new qo(Er(),D())}}var Nr=nj(),{authMiddleware:po}=J();Nr.post("/:user_id",(o,e,t)=>{po.isAdmin(o,e,t)},K.single("certification"),async(o,e)=>{let{registerCertificationController:t}=Oy();await t.handle(o,e)});Nr.get("/",(o,e,t)=>{po.isAdmin(o,e,t)},async(o,e)=>{let{findCertificationsController:t}=Gy();await t.handle(o,e)});Nr.get("/:certification_id",(o,e,t)=>{po.isAdmin(o,e,t)},async(o,e)=>{let{findCertificationByIdController:t}=Ny();await t.handle(o,e)});Nr.put("/:certification_id",(o,e,t)=>{po.isAdmin(o,e,t)},K.single("certification"),async(o,e)=>{let{updateCertificationController:t}=Ly();await t.handle(o,e)});Nr.delete("/:certification_id",(o,e,t)=>{po.isAdmin(o,e,t)},async(o,e)=>{let{deleteCertificationController:t}=Wy();await t.handle(o,e)});import{Router as dj}from"express";import{extendZodWithOpenApi as sj}from"@asteasolutions/zod-to-openapi";import Ee from"zod";var aj=5,_y=1024,mj=_y*_y,cj=aj*mj;sj(Ee);var pj=Ee.object({title:Ee.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),coordinatorId:Ee.string().uuid("Coordenador \xE9 obrigat\xF3rio."),email:Ee.email("E-mail deve ser v\xE1lido."),location:Ee.string().min(1,"Localiza\xE7\xE3o \xE9 obrigat\xF3ria."),scheduledAt:Ee.coerce.date(),registrationLink:Ee.url().optional(),description:Ee.string().optional(),instructorIds:Ee.transform(o=>typeof o=="string"?o.split(","):o).pipe(Ee.array(Ee.uuid())),image:Ee.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=cj,"A imagem deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.")}),$s=class{constructor(e,t){this.courseRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{title:r,coordinatorId:i,email:n,location:s,scheduledAt:m,registrationLink:c,description:d,instructorIds:h,image:E}=pj.parse({...e.body,image:e.file}),F=await this.courseRepository.create({title:r,coordinatorId:i,email:n,location:s,scheduledAt:m,registrationLink:c||void 0,description:d,instructorIds:h}),X=await this.firebaseStorageService.uploadFile({file:E,folder:M.COURSE,id:F.id});return await this.courseRepository.update({id:F.id,imageUrl:X}),t.sendStatus(201)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var Qs=class{constructor(e){this.prisma=e}async create({title:e,imageUrl:t,coordinatorId:r,email:i,instructorIds:n,scheduledAt:s,location:m,registrationLink:c,description:d}){return await this.prisma.course.create({data:{title:e,imageUrl:t,coordinatorId:r,email:i,scheduledAt:s,location:m,registrationLink:c,description:d,instructors:{connect:n?.map(h=>({id:h}))}}})}async find({pagination:{offset:e,limit:t},filter:{description:r,orderBy:i,title:n,coordinator:s}}){let m={},c=[];return n&&c.push({title:{contains:n,mode:"insensitive"}}),r&&c.push({description:{contains:r,mode:"insensitive"}}),s&&c.push({coordinator:{name:{contains:s,mode:"insensitive"}}}),c.length>0&&(m.OR=c),await this.prisma.course.findMany({where:m,include:{coordinator:{omit:{passwordHash:!0}},instructors:{omit:{passwordHash:!0}}},orderBy:{updatedAt:i},skip:e,take:t})}async findById(e){return await this.prisma.course.findFirst({where:{id:e},include:{coordinator:{omit:{passwordHash:!0}},instructors:{omit:{passwordHash:!0}}}})}async update({id:e,title:t,imageUrl:r,coordinatorId:i,email:n,instructorIds:s,scheduledAt:m,location:c,registrationLink:d,description:h}){s!==void 0&&await this.prisma.course.update({where:{id:e},data:{instructors:{set:[]}}}),await this.prisma.course.update({where:{id:e},data:{title:t,imageUrl:r,coordinatorId:i,email:n,scheduledAt:m,location:c,registrationLink:d,description:h,...s?.length>0&&{instructors:{connect:s.map(E=>({id:E}))}}}})}async deleteById(e){await this.prisma.course.delete({where:{id:e}})}async count({filter:{description:e,title:t,coordinator:r}}){let i={},n=[];return t&&n.push({title:{contains:t,mode:"insensitive"}}),e&&n.push({description:{contains:e,mode:"insensitive"}}),r&&n.push({coordinator:{name:{contains:r,mode:"insensitive"}}}),n.length>0&&(i.OR=n),await this.prisma.course.count({where:i})}};function St(){return new Qs(O)}function zy(){return{createCourseController:new $s(St(),D())}}function Hy(){return{findCoursesController:new zo(St())}}function Vy(){return{findCourseByIdController:new _o(St())}}function Zy(){return{updateCourseController:new Ho(St(),D())}}function Ky(){return{deleteCourseController:new Wo(St(),D())}}var Lr=dj(),{authMiddleware:lo}=J();Lr.post("/",(o,e,t)=>{lo.isAdmin(o,e,t)},K.single("image"),async(o,e)=>{let{createCourseController:t}=zy();await t.handle(o,e)});Lr.get("/",(o,e,t)=>{lo.isAdmin(o,e,t)},async(o,e)=>{let{findCoursesController:t}=Hy();await t.handle(o,e)});Lr.get("/:id",(o,e,t)=>{lo.isAdmin(o,e,t)},async(o,e)=>{let{findCourseByIdController:t}=Vy();await t.handle(o,e)});Lr.put("/:id",(o,e,t)=>{lo.isAdmin(o,e,t)},K.single("image"),async(o,e)=>{let{updateCourseController:t}=Zy();await t.handle(o,e)});Lr.delete("/:id",(o,e,t)=>{lo.isAdmin(o,e,t)},async(o,e)=>{let{deleteCourseController:t}=Ky();await t.handle(o,e)});import{Router as yj}from"express";import{extendZodWithOpenApi as lj}from"@asteasolutions/zod-to-openapi";import tr from"zod";var uj=1,gj=9;lj(tr);var fj=tr.object({page:tr.coerce.number().min(1).default(uj),limit:tr.coerce.number().min(1).default(gj),code:tr.string().optional(),title:tr.string().optional(),description:tr.string().optional(),notes:tr.string().optional(),orderBy:tr.enum(["asc","desc"]).default("desc")}),ea=class{constructor(e){this.etpRepository=e}async handle(e,t){try{let{page:r,limit:i,...n}=fj.parse(e.query),s=i*r-i,[m,c]=await Promise.all([this.etpRepository.find({pagination:{offset:s,limit:i},filter:n}),this.etpRepository.count({filter:n})]),d=Math.max(Math.ceil(c/i),1);t.status(200).json({page:r,totalPages:d,offset:s,limit:i,etps:m})}catch(r){if(r instanceof Error)throw new a(r.message)}}};var ra=class{constructor(e){this.prisma=e}async create(e){let{leaderId:t,deputyLeaderId:r,secretaryId:i,memberIds:n,...s}=e;await this.prisma.$transaction(async m=>{let c=await m.eTP.create({data:s});await m.eTPLeader.create({data:{etpId:c.id,researcherId:t}}),await m.eTPDeputy.create({data:{etpId:c.id,researcherId:r}}),await m.eTPSecretary.create({data:{etpId:c.id,researcherId:i}}),await m.eTP.update({where:{id:c.id},data:{members:{connect:n.map(d=>({id:d}))}}})})}async update(e){let{leaderId:t,deputyLeaderId:r,secretaryId:i,memberIds:n,...s}=e;await this.prisma.$transaction(async m=>{await m.eTP.update({where:{id:e.id},data:s}),await this.updateLeader(m,e.id,t),await this.updateDeputyLeader(m,e.id,r),await this.updateSecretary(m,e.id,i),await this.updateMembers(m,e.id,n)})}async updateLeader(e,t,r){r!==void 0&&(await e.eTPLeader.deleteMany({where:{etpId:t}}),r&&await e.eTPLeader.create({data:{etpId:t,researcherId:r}}))}async updateDeputyLeader(e,t,r){r!==void 0&&(await e.eTPDeputy.deleteMany({where:{etpId:t}}),r&&await e.eTPDeputy.create({data:{etpId:t,researcherId:r}}))}async updateSecretary(e,t,r){r!==void 0&&(await e.eTPSecretary.deleteMany({where:{etpId:t}}),r&&await e.eTPSecretary.create({data:{etpId:t,researcherId:r}}))}async updateMembers(e,t,r){r!==void 0&&await e.eTP.update({where:{id:t},data:{members:{set:r.map(i=>({id:i}))}}})}async deleteById(e){await this.prisma.eTP.delete({where:{id:e}})}async find({pagination:{offset:e,limit:t},filter:{code:r,title:i,description:n,notes:s,orderBy:m}}){let c={},d=[];return r&&d.push({code:{contains:r,mode:"insensitive"}}),i&&d.push({title:{contains:i,mode:"insensitive"}}),n&&d.push({description:{contains:n,mode:"insensitive"}}),s&&d.push({notes:{contains:s,mode:"insensitive"}}),d.length>0&&(c.OR=d),await this.prisma.eTP.findMany({where:c,include:{leader:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},deputyLeader:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},secretary:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},members:{include:{user:{omit:{passwordHash:!0}}}}},orderBy:{updatedAt:m},skip:e,take:t})}async findById(e){return await this.prisma.eTP.findFirst({where:{id:e},include:{leader:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},deputyLeader:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},secretary:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},members:{include:{user:{omit:{passwordHash:!0}}}}}})}async findByCode(e){return await this.prisma.eTP.findFirst({where:{code:e},include:{leader:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},deputyLeader:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},secretary:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},members:{include:{user:{omit:{passwordHash:!0}}}}}})}async count({filter:{code:e,title:t,description:r,notes:i}}){let n={},s=[];return e&&s.push({code:{contains:e,mode:"insensitive"}}),t&&s.push({title:{contains:t,mode:"insensitive"}}),r&&s.push({description:{contains:r,mode:"insensitive"}}),i&&s.push({notes:{contains:i,mode:"insensitive"}}),s.length>0&&(n.OR=s),await this.prisma.eTP.count({where:n})}};function vt(){return new ra(O)}function Jy(){return{createETPController:new Vo(vt())}}function Yy(){return{findETPsController:new ea(vt())}}function Xy(){return{findETPByIdController:new Ko(vt())}}function $y(){return{updateETPController:new Yo(vt())}}function Qy(){return{deleteETPController:new Zo(vt())}}var Wr=yj(),{authMiddleware:Ud}=J();Wr.post("/",(o,e,t)=>{Ud.authenticated(o,e,t)},async(o,e)=>{let{createETPController:t}=Jy();await t.handle(o,e)});Wr.get("/",async(o,e)=>{let{findETPsController:t}=Yy();await t.handle(o,e)});Wr.get("/:id",async(o,e)=>{let{findETPByIdController:t}=Xy();await t.handle(o,e)});Wr.put("/:id",(o,e,t)=>{Ud.authenticated(o,e,t)},async(o,e)=>{let{updateETPController:t}=$y();await t.handle(o,e)});Wr.delete("/:id",(o,e,t)=>{Ud.authenticated(o,e,t)},async(o,e)=>{let{deleteETPController:t}=Qy();await t.handle(o,e)});import{Router as hj}from"express";var ta=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.event.create({data:e})}async update(e){await this.prisma.event.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.event.delete({where:{id:e}})}async find({pagination:{offset:e,limit:t},filter:{title:r,status:i,format:n,orderBy:s}}){let m={},c=[];return i&&(m.status=i),n&&(m.format=n),r&&c.push({title:{contains:r,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.event.findMany({where:m,orderBy:s?{startDate:s}:{startDate:"desc"},skip:e,take:t})}async findById(e){return await this.prisma.event.findFirst({where:{id:e}})}async count({filter:{title:e,status:t,format:r}}){let i={},n=[];return t&&(i.status=t),r&&(i.format=r),e&&n.push({title:{contains:e,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.event.count({where:i})}};function Et(){return new ta(O)}function eh(){return{createEventController:new Qo(Et(),D())}}function rh(){return{findEventsController:new oi(Et())}}function th(){return{findEventByIdController:new ri(Et())}}function oh(){return{updateEventController:new ii(Et(),D())}}function ih(){return{deleteEventController:new ei(Et())}}var _r=hj(),{authMiddleware:kd}=J();_r.post("/",(o,e,t)=>{kd.authenticated(o,e,t)},K.single("image"),async(o,e)=>{let{createEventController:t}=eh();await t.handle(o,e)});_r.get("/",async(o,e)=>{let{findEventsController:t}=rh();await t.handle(o,e)});_r.get("/:id",async(o,e)=>{let{findEventByIdController:t}=th();await t.handle(o,e)});_r.put("/:id",(o,e,t)=>{kd.authenticated(o,e,t)},K.single("image"),async(o,e)=>{let{updateEventController:t}=oh();await t.handle(o,e)});_r.delete("/:id",(o,e,t)=>{kd.authenticated(o,e,t)},async(o,e)=>{let{deleteEventController:t}=ih();await t.handle(o,e)});import{Router as Rj}from"express";var oa=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.inMemoriam.create({data:e})}async update(e){await this.prisma.inMemoriam.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.inMemoriam.delete({where:{id:e}})}async find({pagination:{offset:e,limit:t},filter:{name:r,biography:i,role:n,orderBy:s}}){let m={},c=[];return n&&(m.role=n),r&&c.push({name:{contains:r,mode:"insensitive"}}),i&&c.push({biography:{contains:i,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.inMemoriam.findMany({where:m,orderBy:{updatedAt:s},skip:e,take:t})}async findById(e){return await this.prisma.inMemoriam.findFirst({where:{id:e}})}async findByRole(e){return await this.prisma.inMemoriam.findMany({where:{role:e}})}async count({filter:{name:e,biography:t,role:r}}){let i={},n=[];return r&&(i.role=r),e&&n.push({name:{contains:e,mode:"insensitive"}}),t&&n.push({biography:{contains:t,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.inMemoriam.count({where:i})}};function zr(){return new oa(O)}function nh(){return{createInMemoriamController:new ni(zr(),D())}}function sh(){return{findInMemoriamsController:new pi(zr())}}function ah(){return{findInMemoriamByIdController:new ai(zr())}}function mh(){return{findInMemoriamByRoleController:new ci(zr())}}function ch(){return{updateInMemoriamController:new di(zr(),D())}}function ph(){return{deleteInMemoriamController:new si(zr(),D())}}var xr=Rj(),{authMiddleware:Od}=J();xr.post("/",(o,e,t)=>{Od.authenticated(o,e,t)},K.single("photo"),async(o,e)=>{let{createInMemoriamController:t}=nh();await t.handle(o,e)});xr.get("/",async(o,e)=>{let{findInMemoriamsController:t}=sh();await t.handle(o,e)});xr.get("/:id",async(o,e)=>{let{findInMemoriamByIdController:t}=ah();await t.handle(o,e)});xr.get("/role/:role",async(o,e)=>{let{findInMemoriamByRoleController:t}=mh();await t.handle(o,e)});xr.put("/:id",(o,e,t)=>{Od.authenticated(o,e,t)},K.single("photo"),async(o,e)=>{let{updateInMemoriamController:t}=ch();await t.handle(o,e)});xr.delete("/:id",(o,e,t)=>{Od.authenticated(o,e,t)},async(o,e)=>{let{deleteInMemoriamController:t}=ph();await t.handle(o,e)});import{Router as Ij}from"express";var Gd=Ij();Gd.get("/",(o,e)=>{e.status(200).json({message:"Rede CT"})});import{Router as vj}from"express";var ia=class{constructor(e){this.prisma=e}async create(e){await this.prisma.internationalScientificCongress.create({data:e})}async update(e){await this.prisma.internationalScientificCongress.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.internationalScientificCongress.delete({where:{id:e}})}async find({pagination:{offset:e,limit:t},filter:{title:r,edition:i,location:n,orderBy:s}}){let m={},c=[];return i&&c.push({edition:{equals:i}}),r&&c.push({title:{contains:r,mode:"insensitive"}}),n&&c.push({location:{contains:n,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.internationalScientificCongress.findMany({where:m,include:{partners:!0,galleries:!0},orderBy:s?{startDate:s}:{startDate:"desc"},skip:e,take:t})}async findById(e){return await this.prisma.internationalScientificCongress.findFirst({where:{id:e},include:{partners:!0,galleries:!0}})}async findByEdition(e){return await this.prisma.internationalScientificCongress.findMany({where:{edition:e},include:{partners:!0,galleries:!0}})}async count({filter:{title:e,edition:t,location:r}}){let i={},n=[];return t&&n.push({edition:{equals:t}}),e&&n.push({title:{contains:e,mode:"insensitive"}}),r&&n.push({location:{contains:r,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.internationalScientificCongress.count({where:i})}};function Ge(){return new ia(O)}function dh(){return{createInternationalScientificCongressController:new wi(Ge())}}function lh(){return{findInternationalScientificCongressesController:new xi(Ge())}}function uh(){return{findInternationalScientificCongressByIdController:new Ei(Ge())}}function gh(){return{findInternationalScientificCongressByEditionController:new vi(Ge())}}function fh(){return{updateInternationalScientificCongressController:new Mi(Ge())}}function yh(){return{deleteInternationalScientificCongressController:new Si(Ge())}}import{extendZodWithOpenApi as bj}from"@asteasolutions/zod-to-openapi";import Nd from"zod";bj(Nd);var Cj=Nd.object({id:Nd.uuid()}),na=class{constructor(e){this.internationalScientificCongressGalleryRepository=e}async handle(e,t){try{let{id:r}=Cj.parse({id:e.params.id}),i=await this.internationalScientificCongressGalleryRepository.findById(r);if(!i)throw new p("A imagem da galeria n\xE3o existe.");return t.status(200).json(i)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var sa=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.internationalScientificCongressGalleryItem.create({data:e})}async update(e){await this.prisma.internationalScientificCongressGalleryItem.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.internationalScientificCongressGalleryItem.delete({where:{id:e}})}async findByCongressId(e){let{pagination:t,filter:r}=e;return await this.prisma.internationalScientificCongressGalleryItem.findMany({where:{congressId:r.congressId,...r.caption&&{caption:{contains:r.caption,mode:"insensitive"}}},skip:t.offset,take:t.limit})}async findById(e){return await this.prisma.internationalScientificCongressGalleryItem.findFirst({where:{id:e}})}async count(e){let{filter:t}=e;return await this.prisma.internationalScientificCongressGalleryItem.count({where:{congressId:t.congressId,...t.caption&&{caption:{contains:t.caption,mode:"insensitive"}}}})}};function jt(){return new sa(O)}function hh(){return{createInternationalScientificCongressGalleryController:new li(jt(),Ge(),D())}}function Rh(){return{findInternationalScientificCongressGalleriesByCongressIdController:new fi(jt())}}function Ih(){return{findInternationalScientificCongressGalleryByIdController:new na(jt())}}function bh(){return{updateInternationalScientificCongressGalleryController:new yi(jt(),D())}}function Ch(){return{deleteInternationalScientificCongressGalleryController:new ui(jt())}}import{extendZodWithOpenApi as wj}from"@asteasolutions/zod-to-openapi";import Ld from"zod";wj(Ld);var Sj=Ld.object({id:Ld.uuid()}),aa=class{constructor(e){this.internationalScientificCongressPartnerRepository=e}async handle(e,t){try{let{id:r}=Sj.parse({id:e.params.id}),i=await this.internationalScientificCongressPartnerRepository.findById(r);if(!i)throw new p("O parceiro n\xE3o existe.");return t.status(200).json(i)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var ma=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.internationalScientificCongressPartner.create({data:e})}async update(e){await this.prisma.internationalScientificCongressPartner.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.internationalScientificCongressPartner.delete({where:{id:e}})}async findByCongressId(e){return await this.prisma.internationalScientificCongressPartner.findMany({where:{congressId:e.filter.congressId,name:e.filter.name?{contains:e.filter.name,mode:"insensitive"}:void 0},skip:e.pagination?.offset,take:e.pagination?.limit})}async findById(e){return await this.prisma.internationalScientificCongressPartner.findFirst({where:{id:e}})}async count(e){return await this.prisma.internationalScientificCongressPartner.count({where:{congressId:e.filter.congressId,name:e.filter.name?{contains:e.filter.name,mode:"insensitive"}:void 0}})}};function xt(){return new ma(O)}function wh(){return{createInternationalScientificCongressPartnerController:new hi(xt(),Ge(),D())}}function Sh(){return{findInternationalScientificCongressPartnersByCongressIdController:new bi(xt())}}function vh(){return{findInternationalScientificCongressPartnerByIdController:new aa(xt())}}function Eh(){return{updateInternationalScientificCongressPartnerController:new Ci(xt(),D())}}function jh(){return{deleteInternationalScientificCongressPartnerController:new Ri(xt())}}var de=vj(),{authMiddleware:or}=J();de.post("/",(o,e,t)=>{or.authenticated(o,e,t)},async(o,e)=>{let{createInternationalScientificCongressController:t}=dh();await t.handle(o,e)});de.get("/",async(o,e)=>{let{findInternationalScientificCongressesController:t}=lh();await t.handle(o,e)});de.get("/:id",async(o,e)=>{let{findInternationalScientificCongressByIdController:t}=uh();await t.handle(o,e)});de.get("/edition/:edition",async(o,e)=>{let{findInternationalScientificCongressByEditionController:t}=gh();await t.handle(o,e)});de.put("/:id",(o,e,t)=>{or.authenticated(o,e,t)},async(o,e)=>{let{updateInternationalScientificCongressController:t}=fh();await t.handle(o,e)});de.delete("/:id",(o,e,t)=>{or.authenticated(o,e,t)},async(o,e)=>{let{deleteInternationalScientificCongressController:t}=yh();await t.handle(o,e)});de.post("/:congressId/gallery",(o,e,t)=>{or.authenticated(o,e,t)},K.single("image"),async(o,e)=>{let{createInternationalScientificCongressGalleryController:t}=hh();await t.handle(o,e)});de.get("/:congressId/gallery",async(o,e)=>{let{findInternationalScientificCongressGalleriesByCongressIdController:t}=Rh();await t.handle(o,e)});de.get("/gallery/:id",async(o,e)=>{let{findInternationalScientificCongressGalleryByIdController:t}=Ih();await t.handle(o,e)});de.put("/gallery/:id",(o,e,t)=>{or.authenticated(o,e,t)},K.single("image"),async(o,e)=>{let{updateInternationalScientificCongressGalleryController:t}=bh();await t.handle(o,e)});de.delete("/gallery/:id",(o,e,t)=>{or.authenticated(o,e,t)},async(o,e)=>{let{deleteInternationalScientificCongressGalleryController:t}=Ch();await t.handle(o,e)});de.post("/:congressId/partner",(o,e,t)=>{or.authenticated(o,e,t)},K.single("logo"),async(o,e)=>{let{createInternationalScientificCongressPartnerController:t}=wh();await t.handle(o,e)});de.get("/:congressId/partner",async(o,e)=>{let{findInternationalScientificCongressPartnersByCongressIdController:t}=Sh();await t.handle(o,e)});de.get("/partner/:id",async(o,e)=>{let{findInternationalScientificCongressPartnerByIdController:t}=vh();await t.handle(o,e)});de.put("/partner/:id",(o,e,t)=>{or.authenticated(o,e,t)},K.single("logo"),async(o,e)=>{let{updateInternationalScientificCongressPartnerController:t}=Eh();await t.handle(o,e)});de.delete("/partner/:id",(o,e,t)=>{or.authenticated(o,e,t)},async(o,e)=>{let{deleteInternationalScientificCongressPartnerController:t}=jh();await t.handle(o,e)});import{Router as Aj}from"express";import{extendZodWithOpenApi as Ej}from"@asteasolutions/zod-to-openapi";import Hr from"zod";var jj=1,xj=10;Ej(Hr);var Mj=Hr.object({page:Hr.coerce.number().min(1).default(jj),limit:Hr.coerce.number().min(1).default(xj),title:Hr.string().optional(),country:Hr.string().optional(),orderBy:Hr.enum(["asc","desc"]).optional()}),ca=class{constructor(e){this.lawRepository=e}async handle(e,t){try{let{page:r,limit:i,...n}=Mj.parse(e.query),s=i*r-i,[m,c]=await Promise.all([this.lawRepository.find({pagination:{offset:s,limit:i},filter:n}),this.lawRepository.count({filter:n})]),d=Math.max(Math.ceil(c/i),1);t.status(200).json({page:r,totalPages:d,offset:s,limit:i,laws:m})}catch(r){if(r instanceof Error)throw new a(r.message)}}};var pa=class{constructor(e){this.prisma=e}async create(e){await this.prisma.law.create({data:{...e}})}async update(e){let{id:t,...r}=e;await this.prisma.law.update({where:{id:t},data:r})}async deleteById(e){await this.prisma.law.delete({where:{id:e}})}async find({pagination:e,filter:{title:t,country:r,orderBy:i}}){let n={};return t&&(n.title={contains:t,mode:"insensitive"}),r&&(n.country={contains:r,mode:"insensitive"}),await this.prisma.law.findMany({where:n,orderBy:{updatedAt:i??"desc"},...e&&{skip:e.offset,take:e.limit}})}async findById(e){return await this.prisma.law.findFirst({where:{id:e}})}async count({filter:{title:e,country:t}}){let r={};return e&&(r.title={contains:e,mode:"insensitive"}),t&&(r.country={contains:t,mode:"insensitive"}),await this.prisma.law.count({where:r})}};function Mt(){return new pa(O)}function xh(){return{createLawController:new Ai(Mt())}}function Mh(){return{findLawsController:new ca(Mt())}}function Ah(){return{findLawByIdController:new Ti(Mt())}}function Ph(){return{updateLawController:new Fi(Mt())}}function Th(){return{deleteLawController:new Pi(Mt())}}var Vr=Aj(),{authMiddleware:Wd}=J();Vr.post("/",(o,e,t)=>{Wd.authenticated(o,e,t)},async(o,e)=>{let{createLawController:t}=xh();await t.handle(o,e)});Vr.get("/",async(o,e)=>{let{findLawsController:t}=Mh();await t.handle(o,e)});Vr.get("/:id",async(o,e)=>{let{findLawByIdController:t}=Ah();await t.handle(o,e)});Vr.put("/:id",(o,e,t)=>{Wd.authenticated(o,e,t)},async(o,e)=>{let{updateLawController:t}=Ph();await t.handle(o,e)});Vr.delete("/:id",(o,e,t)=>{Wd.authenticated(o,e,t)},async(o,e)=>{let{deleteLawController:t}=Th();await t.handle(o,e)});import{Router as Dj}from"express";import{extendZodWithOpenApi as Pj}from"@asteasolutions/zod-to-openapi";import da from"zod";Pj(da);var Tj=da.object({role:da.string().optional(),orderBy:da.enum(["asc","desc"]).optional()}),la=class{constructor(e){this.legitimatorCommitteeMemberRepository=e}async handle(e,t){try{let r=Tj.parse(e.query),i=await this.legitimatorCommitteeMemberRepository.find({filter:r});t.status(200).json({members:i})}catch(r){if(r instanceof Error)throw new a(r.message)}}};var ua=class{constructor(e){this.prisma=e}async create(e){await this.prisma.legitimatorCommitteeMember.create({data:{...e,order:e.order??0}})}async update(e){let{id:t,...r}=e;await this.prisma.legitimatorCommitteeMember.update({where:{id:t},data:r})}async deleteById(e){await this.prisma.legitimatorCommitteeMember.delete({where:{id:e}})}async find({filter:{role:e,orderBy:t}}){let r={};return e&&(r.role={contains:e,mode:"insensitive"}),await this.prisma.legitimatorCommitteeMember.findMany({where:r,include:{user:{omit:{passwordHash:!0}}},orderBy:t?[{order:"asc"},{updatedAt:t}]:[{order:"asc"},{updatedAt:"desc"}]})}async findById(e){return await this.prisma.legitimatorCommitteeMember.findFirst({where:{id:e},include:{user:{omit:{passwordHash:!0}}}})}async count({filter:{role:e}}){let t={};return e&&(t.role={contains:e,mode:"insensitive"}),await this.prisma.legitimatorCommitteeMember.count({where:t})}};function At(){return new ua(O)}function Dh(){return{createLegitimatorCommitteeMemberController:new Bi(At())}}function Fh(){return{findLegitimatorCommitteeMembersController:new la(At())}}function Bh(){return{findLegitimatorCommitteeMemberByIdController:new Ui(At())}}function qh(){return{updateLegitimatorCommitteeMemberController:new Oi(At())}}function Uh(){return{deleteLegitimatorCommitteeMemberController:new qi(At())}}var Zr=Dj(),{authMiddleware:_d}=J();Zr.post("/",(o,e,t)=>{_d.authenticated(o,e,t)},async(o,e)=>{let{createLegitimatorCommitteeMemberController:t}=Dh();await t.handle(o,e)});Zr.get("/",async(o,e)=>{let{findLegitimatorCommitteeMembersController:t}=Fh();await t.handle(o,e)});Zr.get("/:id",async(o,e)=>{let{findLegitimatorCommitteeMemberByIdController:t}=Bh();await t.handle(o,e)});Zr.put("/:id",(o,e,t)=>{_d.authenticated(o,e,t)},async(o,e)=>{let{updateLegitimatorCommitteeMemberController:t}=qh();await t.handle(o,e)});Zr.delete("/:id",(o,e,t)=>{_d.authenticated(o,e,t)},async(o,e)=>{let{deleteLegitimatorCommitteeMemberController:t}=Uh();await t.handle(o,e)});import{Router as qj}from"express";import{extendZodWithOpenApi as Fj}from"@asteasolutions/zod-to-openapi";import uo from"zod";Fj(uo);var Bj=uo.object({name:uo.string().optional(),description:uo.string().optional(),orderBy:uo.enum(["asc","desc"]).default("desc")}),ga=class{constructor(e){this.managementTeamRepository=e}async handle(e,t){try{let r=Bj.parse(e.query),i=await this.managementTeamRepository.find({filter:r});t.status(200).json({teams:i})}catch(r){if(r instanceof Error)throw new a(r.message)}}};var fa=class{constructor(e){this.prisma=e}async create(e){let{members:t,...r}=e;await this.prisma.$transaction(async i=>{let n=await i.managementTeam.create({data:r});return await i.managementTeamMember.createMany({data:t.map(({userId:s,role:m,order:c})=>({teamId:n.id,userId:s,role:m,order:c??0}))}),n})}async update(e){let{members:t,...r}=e;await this.prisma.$transaction(async i=>{let n=await i.managementTeam.update({where:{id:e.id},data:r});return t!==void 0&&(await i.managementTeamMember.deleteMany({where:{teamId:e.id}}),t.length>0&&await i.managementTeamMember.createMany({data:t.map(({userId:s,role:m,order:c})=>({teamId:e.id,userId:s,role:m,order:c??0}))})),n})}async deleteById(e){await this.prisma.managementTeam.delete({where:{id:e}})}async find({filter:{name:e,description:t,orderBy:r}}){let i={},n=[];return e&&n.push({name:{contains:e,mode:"insensitive"}}),t&&n.push({description:{contains:t,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.managementTeam.findMany({where:i,include:{members:{include:{user:{omit:{passwordHash:!0}}},orderBy:{order:"asc"}}},orderBy:{updatedAt:r}})}async findById(e){return await this.prisma.managementTeam.findFirst({where:{id:e},include:{members:{include:{user:{omit:{passwordHash:!0}}},orderBy:{order:"asc"}}}})}async findByName(e){return await this.prisma.managementTeam.findFirst({where:{name:e},include:{members:{include:{user:{omit:{passwordHash:!0}}},orderBy:{order:"asc"}}}})}async count({filter:{name:e,description:t}}){let r={},i=[];return e&&i.push({name:{contains:e,mode:"insensitive"}}),t&&i.push({description:{contains:t,mode:"insensitive"}}),i.length>0&&(r.OR=i),await this.prisma.managementTeam.count({where:r})}};function Pt(){return new fa(O)}function kh(){return{createManagementTeamController:new Gi(Pt())}}function Oh(){return{findManagementTeamsController:new ga(Pt())}}function Gh(){return{findManagementTeamByIdController:new Li(Pt())}}function Nh(){return{updateManagementTeamController:new _i(Pt())}}function Lh(){return{deleteManagementTeamController:new Ni(Pt())}}var Kr=qj(),{authMiddleware:zd}=J();Kr.post("/",(o,e,t)=>{zd.authenticated(o,e,t)},async(o,e)=>{let{createManagementTeamController:t}=kh();await t.handle(o,e)});Kr.get("/",async(o,e)=>{let{findManagementTeamsController:t}=Oh();await t.handle(o,e)});Kr.get("/:id",async(o,e)=>{let{findManagementTeamByIdController:t}=Gh();await t.handle(o,e)});Kr.put("/:id",(o,e,t)=>{zd.authenticated(o,e,t)},async(o,e)=>{let{updateManagementTeamController:t}=Nh();await t.handle(o,e)});Kr.delete("/:id",(o,e,t)=>{zd.authenticated(o,e,t)},async(o,e)=>{let{deleteManagementTeamController:t}=Lh();await t.handle(o,e)});import{Router as Oj}from"express";var ya=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.meeting.create({data:e})}async update(e){await this.prisma.meeting.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.meeting.delete({where:{id:e}})}async find({pagination:{offset:e,limit:t},filter:{title:r,format:i,status:n,orderBy:s}}){let m={},c=[];return i&&(m.format=i),n&&(m.status=n),r&&c.push({title:{contains:r,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.meeting.findMany({where:m,include:{minutes:!0},orderBy:s?{scheduledAt:s}:{scheduledAt:"desc"},skip:e,take:t})}async findById(e){return await this.prisma.meeting.findFirst({where:{id:e},include:{minutes:!0}})}async findByStatus(e){return await this.prisma.meeting.findMany({where:{status:e},include:{minutes:!0}})}async count({filter:{title:e,format:t,status:r}}){let i={},n=[];return t&&(i.format=t),r&&(i.status=r),e&&n.push({title:{contains:e,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.meeting.count({where:i})}};function ir(){return new ya(O)}function Wh(){return{createMeetingController:new Ki(ir())}}function _h(){return{findMeetingsController:new Qi(ir())}}function zh(){return{findMeetingByIdController:new Yi(ir())}}function Hh(){return{findMeetingByStatusController:new $i(ir())}}function Vh(){return{updateMeetingController:new en(ir())}}function Zh(){return{deleteMeetingController:new Ji(ir())}}import{extendZodWithOpenApi as Uj}from"@asteasolutions/zod-to-openapi";import Hd from"zod";Uj(Hd);var kj=Hd.object({meetingId:Hd.uuid()}),ha=class{constructor(e,t){this.meetingMinuteRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{meetingId:r}=kj.parse({meetingId:e.params.meetingId}),i=await this.meetingMinuteRepository.findByMeetingId(r);if(!i)throw new p("A ata n\xE3o existe para esta reuni\xE3o.");return i.documentUrl&&await this.firebaseStorageService.deleteFile({fileUrl:i.documentUrl}),await this.meetingMinuteRepository.deleteByMeetingId(i.id),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var Ra=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.meetingMinute.create({data:e,include:{meeting:!0}})}async update(e){await this.prisma.meetingMinute.update({where:{id:e.id},data:e})}async deleteByMeetingId(e){await this.prisma.meetingMinute.delete({where:{id:e}})}async findByMeetingId(e){return await this.prisma.meetingMinute.findFirst({where:{meetingId:e},include:{meeting:!0}})}};function go(){return new Ra(O)}function Kh(){return{createMeetingMinuteController:new zi(go(),ir(),D())}}function Jh(){return{findMeetingMinuteByMeetingIdController:new Hi(go())}}function Yh(){return{updateMeetingMinuteByMeetingIdController:new Vi(go(),D())}}function Xh(){return{deleteMeetingMinuteByMeetingIdController:new ha(go(),D())}}var De=Oj(),{authMiddleware:Tt}=J();De.post("/",(o,e,t)=>{Tt.authenticated(o,e,t)},async(o,e)=>{let{createMeetingController:t}=Wh();await t.handle(o,e)});De.get("/",async(o,e)=>{let{findMeetingsController:t}=_h();await t.handle(o,e)});De.get("/:id",async(o,e)=>{let{findMeetingByIdController:t}=zh();await t.handle(o,e)});De.get("/status/:status",async(o,e)=>{let{findMeetingByStatusController:t}=Hh();await t.handle(o,e)});De.put("/:id",(o,e,t)=>{Tt.authenticated(o,e,t)},async(o,e)=>{let{updateMeetingController:t}=Vh();await t.handle(o,e)});De.delete("/:id",(o,e,t)=>{Tt.authenticated(o,e,t)},async(o,e)=>{let{deleteMeetingController:t}=Zh();await t.handle(o,e)});De.post("/:meetingId/minute",(o,e,t)=>{Tt.authenticated(o,e,t)},K.single("document"),async(o,e)=>{let{createMeetingMinuteController:t}=Kh();await t.handle(o,e)});De.get("/:meetingId/minute",async(o,e)=>{let{findMeetingMinuteByMeetingIdController:t}=Jh();await t.handle(o,e)});De.put("/:meetingId/minute",(o,e,t)=>{Tt.authenticated(o,e,t)},K.single("document"),async(o,e)=>{let{updateMeetingMinuteByMeetingIdController:t}=Yh();await t.handle(o,e)});De.delete("/:meetingId/minute",(o,e,t)=>{Tt.authenticated(o,e,t)},async(o,e)=>{let{deleteMeetingMinuteByMeetingIdController:t}=Xh();await t.handle(o,e)});import{Router as Gj}from"express";var Ia=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.museum.create({data:e})}async update(e){await this.prisma.museum.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.museum.delete({where:{id:e}})}async find({pagination:e,filter:{name:t,city:r,state:i,country:n,orderBy:s}}){let m={},c=[];return t&&c.push({name:{contains:t,mode:"insensitive"}}),r&&c.push({city:{contains:r,mode:"insensitive"}}),i&&c.push({state:{contains:i,mode:"insensitive"}}),n&&c.push({country:{contains:n,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.museum.findMany({where:m,orderBy:s?{updatedAt:s}:{updatedAt:"desc"},...e&&{skip:e.offset,take:e.limit}})}async findById(e){return await this.prisma.museum.findFirst({where:{id:e}})}async count({filter:{name:e,city:t,state:r,country:i}}){let n={},s=[];return e&&s.push({name:{contains:e,mode:"insensitive"}}),t&&s.push({city:{contains:t,mode:"insensitive"}}),r&&s.push({state:{contains:r,mode:"insensitive"}}),i&&s.push({country:{contains:i,mode:"insensitive"}}),s.length>0&&(n.OR=s),await this.prisma.museum.count({where:n})}};function Dt(){return new Ia(O)}function $h(){return{createMuseumController:new rn(Dt(),D())}}function Qh(){return{findMuseumsController:new sn(Dt())}}function eR(){return{findMuseumByIdController:new on(Dt())}}function rR(){return{updateMuseumController:new an(Dt(),D())}}function tR(){return{deleteMuseumController:new tn(Dt(),D())}}var Jr=Gj(),{authMiddleware:Vd}=J();Jr.post("/",(o,e,t)=>{Vd.authenticated(o,e,t)},K.single("logo"),async(o,e)=>{let{createMuseumController:t}=$h();await t.handle(o,e)});Jr.get("/",async(o,e)=>{let{findMuseumsController:t}=Qh();await t.handle(o,e)});Jr.get("/:id",async(o,e)=>{let{findMuseumByIdController:t}=eR();await t.handle(o,e)});Jr.put("/:id",(o,e,t)=>{Vd.authenticated(o,e,t)},K.single("logo"),async(o,e)=>{let{updateMuseumController:t}=rR();await t.handle(o,e)});Jr.delete("/:id",(o,e,t)=>{Vd.authenticated(o,e,t)},async(o,e)=>{let{deleteMuseumController:t}=tR();await t.handle(o,e)});import{Router as Zj}from"express";import{extendZodWithOpenApi as Nj}from"@asteasolutions/zod-to-openapi";import Zd from"zod";Nj(Zd);var Lj=Zd.object({id:Zd.string()}),ba=class{constructor(e,t){this.newsRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{id:r}=Lj.parse(e.params),i=e.user.id,n=await this.newsRepository.findById(r);if(!n)throw new p("Not\xEDcia n\xE3o encontrada.");if(n.author.id!==i)throw new je("Sem permiss\xE3o.");await Promise.all([this.newsRepository.delete(r),this.firebaseStorageService.deleteFile({fileUrl:n.imageUrl})]),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as Wj}from"@asteasolutions/zod-to-openapi";import Ft from"zod";var _j=5,oR=1024,zj=oR*oR,Hj=_j*zj;Wj(Ft);var Vj=Ft.object({id:Ft.string(),title:Ft.string().min(1),content:Ft.string().min(1),image:Ft.any().optional().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=Hj,"A imagem deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.")}),Ca=class{constructor(e,t){this.newsRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{id:r,title:i,content:n,image:s}=Vj.parse({id:e.params.id,image:e.file,...e.body}),m=await this.newsRepository.findById(r);if(!m)throw new p("Not\xEDcia n\xE3o encontrada.");let c=e.user.id;if(m.author.id!==c)throw new je("Sem permiss\xE3o.");let d=m.imageUrl||"";s&&m.imageUrl&&(d=await this.firebaseStorageService.updateFile({file:s,folder:M.NEWS,id:r,fileUrl:m.imageUrl}));let h=await this.newsRepository.update({id:r,title:i,content:n,imageUrl:d});t.status(200).json(h)}catch(r){if(r instanceof Error)throw new a(r.message)}}};function iR(){return{createNewsController:new mn(er(),D())}}function nR(){return{findAllNewsController:new ln(er())}}function sR(){return{findNewsByIdController:new dn(er())}}function aR(){return{findNewsByAuthorIdController:new cn(er())}}function mR(){return{updateNewsController:new Ca(er(),D())}}function cR(){return{deleteNewsController:new ba(er(),D())}}var Mr=Zj(),{authMiddleware:Kd}=J();Mr.post("/",(o,e,t)=>{Kd.authenticated(o,e,t)},K.single("image"),async(o,e)=>{let{createNewsController:t}=iR();await t.handle(o,e)});Mr.get("/",async(o,e)=>{let{findAllNewsController:t}=nR();await t.handle(o,e)});Mr.get("/:id",async(o,e)=>{let{findNewsByIdController:t}=sR();await t.handle(o,e)});Mr.get("/author/:authorId",async(o,e)=>{let{findNewsByAuthorIdController:t}=aR();await t.handle(o,e)});Mr.put("/:id",(o,e,t)=>{Kd.authenticated(o,e,t)},K.single("image"),async(o,e)=>{let{updateNewsController:t}=mR();await t.handle(o,e)});Mr.delete("/:id",(o,e,t)=>{Kd.authenticated(o,e,t)},async(o,e)=>{let{deleteNewsController:t}=cR();await t.handle(o,e)});import{Router as Kj}from"express";var wa=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.partner.create({data:e})}async update(e){await this.prisma.partner.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.partner.delete({where:{id:e}})}async find({pagination:e,filter:{name:t,description:r,category:i,isActive:n,orderBy:s}}){let m={},c=[];return n!==void 0&&(m.isActive=n),t&&c.push({name:{contains:t,mode:"insensitive"}}),r&&c.push({description:{contains:r,mode:"insensitive"}}),i&&c.push({category:{contains:i,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.partner.findMany({where:m,orderBy:s?{updatedAt:s}:{updatedAt:"desc"},...e&&{skip:e.offset,take:e.limit}})}async findById(e){return await this.prisma.partner.findFirst({where:{id:e}})}async count({filter:{name:e,description:t,category:r,isActive:i}}){let n={},s=[];return i!==void 0&&(n.isActive=i),e&&s.push({name:{contains:e,mode:"insensitive"}}),t&&s.push({description:{contains:t,mode:"insensitive"}}),r&&s.push({category:{contains:r,mode:"insensitive"}}),s.length>0&&(n.OR=s),await this.prisma.partner.count({where:n})}};function Bt(){return new wa(O)}function pR(){return{createPartnerController:new un(Bt(),D())}}function dR(){return{findPartnersController:new hn(Bt())}}function lR(){return{findPartnerByIdController:new fn(Bt())}}function uR(){return{updatePartnerController:new Rn(Bt(),D())}}function gR(){return{deletePartnerController:new gn(Bt(),D())}}var Yr=Kj(),{authMiddleware:Jd}=J();Yr.post("/",(o,e,t)=>{Jd.authenticated(o,e,t)},K.single("logo"),async(o,e)=>{let{createPartnerController:t}=pR();await t.handle(o,e)});Yr.get("/",async(o,e)=>{let{findPartnersController:t}=dR();await t.handle(o,e)});Yr.get("/:id",async(o,e)=>{let{findPartnerByIdController:t}=lR();await t.handle(o,e)});Yr.put("/:id",(o,e,t)=>{Jd.authenticated(o,e,t)},K.single("logo"),async(o,e)=>{let{updatePartnerController:t}=uR();await t.handle(o,e)});Yr.delete("/:id",(o,e,t)=>{Jd.authenticated(o,e,t)},async(o,e)=>{let{deletePartnerController:t}=gR();await t.handle(o,e)});import{Router as Jj}from"express";function fR(){return{createPendencyController:new In(Se(),jr(),D())}}function yR(){return{findPendenciesController:new wn(jr())}}function hR(){return{findPendencyByIdController:new Sn(jr())}}function RR(){return{updatePendencyController:new vn(jr(),D())}}function IR(){return{deletePendencyController:new Cn(jr(),D())}}var Xr=Jj(),{authMiddleware:fo}=J();Xr.post("/:user_id",(o,e,t)=>{fo.isAdmin(o,e,t)},K.single("document"),async(o,e)=>{let{createPendencyController:t}=fR();await t.handle(o,e)});Xr.get("/",(o,e,t)=>{fo.isAdmin(o,e,t)},async(o,e)=>{let{findPendenciesController:t}=yR();await t.handle(o,e)});Xr.get("/:pendency_id",(o,e,t)=>{fo.isAdmin(o,e,t)},async(o,e)=>{let{findPendencyByIdController:t}=hR();await t.handle(o,e)});Xr.put("/:pendency_id",(o,e,t)=>{fo.isAdmin(o,e,t)},K.single("document"),async(o,e)=>{let{updatePendencyController:t}=RR();await t.handle(o,e)});Xr.delete("/:pendency_id",(o,e,t)=>{fo.isAdmin(o,e,t)},async(o,e)=>{let{deletePendencyController:t}=IR();await t.handle(o,e)});import{Router as rx}from"express";import{extendZodWithOpenApi as Yj}from"@asteasolutions/zod-to-openapi";import nr from"zod";var Xj=5,bR=1024,$j=bR*bR,Qj=Xj*$j;Yj(nr);var ex=nr.object({title:nr.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),description:nr.string().optional(),startDate:nr.coerce.date(),endDate:nr.coerce.date(),contact:nr.string().min(1,"Contato \xE9 obrigat\xF3rio."),registrationLink:nr.url().optional(),image:nr.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=Qj,"A imagem deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.")}),Sa=class{constructor(e,t){this.postGraduateProgramRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{title:r,description:i,startDate:n,endDate:s,contact:m,registrationLink:c,image:d}=ex.parse({...e.body,image:e.file}),h=await this.postGraduateProgramRepository.create({title:r,description:i,startDate:n,endDate:s,contact:m,registrationLink:c||void 0}),E=await this.firebaseStorageService.uploadFile({file:d,folder:M.POST_GRADUATE_PROGRAM,id:h.id});return await this.postGraduateProgramRepository.update({id:h.id,imageUrl:E}),t.sendStatus(201)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var va=class{constructor(e){this.prisma=e}async create({title:e,imageUrl:t,description:r,startDate:i,endDate:n,contact:s,registrationLink:m}){return await this.prisma.postGraduateProgram.create({data:{title:e,imageUrl:t,description:r,startDate:i,endDate:n,contact:s,registrationLink:m}})}async find({pagination:{offset:e,limit:t},filter:{description:r,orderBy:i,title:n,contact:s}}){let m={},c=[];return n&&c.push({title:{contains:n,mode:"insensitive"}}),r&&c.push({description:{contains:r,mode:"insensitive"}}),s&&c.push({contact:{contains:s,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.postGraduateProgram.findMany({where:m,orderBy:{updatedAt:i},skip:e,take:t})}async findById(e){return await this.prisma.postGraduateProgram.findFirst({where:{id:e}})}async update({id:e,title:t,imageUrl:r,description:i,startDate:n,endDate:s,contact:m,registrationLink:c}){await this.prisma.postGraduateProgram.update({where:{id:e},data:{title:t,imageUrl:r,description:i,startDate:n,endDate:s,contact:m,registrationLink:c}})}async deleteById(e){await this.prisma.postGraduateProgram.delete({where:{id:e}})}async count({filter:{description:e,title:t,contact:r}}){let i={},n=[];return t&&n.push({title:{contains:t,mode:"insensitive"}}),e&&n.push({description:{contains:e,mode:"insensitive"}}),r&&n.push({contact:{contains:r,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.postGraduateProgram.count({where:i})}};function qt(){return new va(O)}function CR(){return{createPostGraduateProgramController:new Sa(qt(),D())}}function wR(){return{findPostGraduateProgramsController:new Mn(qt())}}function SR(){return{findPostGraduateProgramByIdController:new xn(qt())}}function vR(){return{updatePostGraduateProgramController:new An(qt(),D())}}function ER(){return{deletePostGraduateProgramController:new jn(qt(),D())}}var $r=rx(),{authMiddleware:yo}=J();$r.post("/",(o,e,t)=>{yo.isAdmin(o,e,t)},K.single("image"),async(o,e)=>{let{createPostGraduateProgramController:t}=CR();await t.handle(o,e)});$r.get("/",(o,e,t)=>{yo.isAdmin(o,e,t)},async(o,e)=>{let{findPostGraduateProgramsController:t}=wR();await t.handle(o,e)});$r.get("/:id",(o,e,t)=>{yo.isAdmin(o,e,t)},async(o,e)=>{let{findPostGraduateProgramByIdController:t}=SR();await t.handle(o,e)});$r.put("/:id",(o,e,t)=>{yo.isAdmin(o,e,t)},K.single("image"),async(o,e)=>{let{updatePostGraduateProgramController:t}=vR();await t.handle(o,e)});$r.delete("/:id",(o,e,t)=>{yo.isAdmin(o,e,t)},async(o,e)=>{let{deletePostGraduateProgramController:t}=ER();await t.handle(o,e)});import{Router as sx}from"express";import{extendZodWithOpenApi as tx}from"@asteasolutions/zod-to-openapi";import Ut from"zod";var ox=1,ix=7;tx(Ut);var nx=Ut.object({page:Ut.coerce.number().min(1).default(ox),limit:Ut.coerce.number().min(1).default(ix),role:Ut.string().optional(),orderBy:Ut.enum(["asc","desc"]).optional()}),Ea=class{constructor(e){this.referenceCenterTeamMemberRepository=e}async handle(e,t){try{let{page:r,limit:i,...n}=nx.parse(e.query),s=i*r-i,[m,c]=await Promise.all([this.referenceCenterTeamMemberRepository.find({pagination:{offset:s,limit:i},filter:n}),this.referenceCenterTeamMemberRepository.count({filter:n})]),d=Math.max(Math.ceil(c/i),1);t.status(200).json({page:r,totalPages:d,offset:s,limit:i,members:m})}catch(r){if(r instanceof Error)throw new a(r.message)}}};var ja=class{constructor(e){this.prisma=e}async create(e){await this.prisma.referenceCenterTeamMember.create({data:{...e}})}async update(e){let{id:t,...r}=e;await this.prisma.referenceCenterTeamMember.update({where:{id:t},data:r})}async deleteById(e){await this.prisma.referenceCenterTeamMember.delete({where:{id:e}})}async find({pagination:e,filter:{role:t,orderBy:r}}){let i={};return t&&(i.role={contains:t,mode:"insensitive"}),await this.prisma.referenceCenterTeamMember.findMany({where:i,include:{user:{omit:{passwordHash:!0}}},orderBy:{updatedAt:r??"desc"},...e&&{skip:e.offset,take:e.limit}})}async findById(e){return await this.prisma.referenceCenterTeamMember.findFirst({where:{id:e},include:{user:{omit:{passwordHash:!0}}}})}async count({filter:{role:e}}){let t={};return e&&(t.role={contains:e,mode:"insensitive"}),await this.prisma.referenceCenterTeamMember.count({where:t})}};function kt(){return new ja(O)}function jR(){return{createReferenceCenterTeamMemberController:new Pn(kt())}}function xR(){return{findReferenceCenterTeamMembersController:new Ea(kt())}}function MR(){return{findReferenceCenterTeamMemberByIdController:new Dn(kt())}}function AR(){return{updateReferenceCenterTeamMemberController:new Bn(kt())}}function PR(){return{deleteReferenceCenterTeamMemberController:new Tn(kt())}}var Qr=sx(),{authMiddleware:Yd}=J();Qr.post("/",(o,e,t)=>{Yd.authenticated(o,e,t)},async(o,e)=>{let{createReferenceCenterTeamMemberController:t}=jR();await t.handle(o,e)});Qr.get("/",async(o,e)=>{let{findReferenceCenterTeamMembersController:t}=xR();await t.handle(o,e)});Qr.get("/:id",async(o,e)=>{let{findReferenceCenterTeamMemberByIdController:t}=MR();await t.handle(o,e)});Qr.put("/:id",(o,e,t)=>{Yd.authenticated(o,e,t)},async(o,e)=>{let{updateReferenceCenterTeamMemberController:t}=AR();await t.handle(o,e)});Qr.delete("/:id",(o,e,t)=>{Yd.authenticated(o,e,t)},async(o,e)=>{let{deleteReferenceCenterTeamMemberController:t}=PR();await t.handle(o,e)});import{Router as ax}from"express";var xa=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.regiment.create({data:e})}async update(e){await this.prisma.regiment.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.regiment.delete({where:{id:e}})}async find({pagination:{offset:e,limit:t},filter:{title:r,status:i,orderBy:n}}){let s={},m=[];return i&&(s.status=i),r&&m.push({title:{contains:r,mode:"insensitive"}}),m.length>0&&(s.OR=m),await this.prisma.regiment.findMany({where:s,orderBy:n?{updatedAt:n}:{updatedAt:"desc"},skip:e,take:t})}async findById(e){return await this.prisma.regiment.findFirst({where:{id:e}})}async findByStatus(e){return await this.prisma.regiment.findMany({where:{status:e}})}async count({filter:{title:e,status:t}}){let r={},i=[];return t&&(r.status=t),e&&i.push({title:{contains:e,mode:"insensitive"}}),i.length>0&&(r.OR=i),await this.prisma.regiment.count({where:r})}};function et(){return new xa(O)}function TR(){return{createRegimentController:new qn(et(),D())}}function DR(){return{findRegimentsController:new Nn(et())}}function FR(){return{findRegimentByIdController:new kn(et())}}function BR(){return{findRegimentByStatusController:new Gn(et())}}function qR(){return{updateRegimentController:new Ln(et(),D())}}function UR(){return{deleteRegimentController:new Un(et(),D())}}var Ar=ax(),{authMiddleware:Xd}=J();Ar.post("/",(o,e,t)=>{Xd.authenticated(o,e,t)},K.single("document"),async(o,e)=>{let{createRegimentController:t}=TR();await t.handle(o,e)});Ar.get("/",async(o,e)=>{let{findRegimentsController:t}=DR();await t.handle(o,e)});Ar.get("/:id",async(o,e)=>{let{findRegimentByIdController:t}=FR();await t.handle(o,e)});Ar.get("/status/:status",async(o,e)=>{let{findRegimentByStatusController:t}=BR();await t.handle(o,e)});Ar.put("/:id",(o,e,t)=>{Xd.authenticated(o,e,t)},K.single("document"),async(o,e)=>{let{updateRegimentController:t}=qR();await t.handle(o,e)});Ar.delete("/:id",(o,e,t)=>{Xd.authenticated(o,e,t)},async(o,e)=>{let{deleteRegimentController:t}=UR();await t.handle(o,e)});import{Router as lx}from"express";import{extendZodWithOpenApi as mx}from"@asteasolutions/zod-to-openapi";import $d from"zod";mx($d);var cx=$d.object({id:$d.string().uuid("ID inv\xE1lido")}),Ma=class{constructor(e){this.regionalCongressGalleryRepository=e}async handle(e,t){try{let{id:r}=cx.parse(e.params),i=await this.regionalCongressGalleryRepository.findById(r);if(!i)throw new p("Item de galeria n\xE3o encontrado");return t.status(200).json(i)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var Aa=class{constructor(e){this.prisma=e}async create(e){await this.prisma.regionalCongress.create({data:e})}async update(e){await this.prisma.regionalCongress.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.regionalCongress.delete({where:{id:e}})}async find({pagination:{offset:e,limit:t},filter:{title:r,edition:i,location:n,orderBy:s}}){let m={},c=[];return i&&c.push({edition:{equals:i}}),r&&c.push({title:{contains:r,mode:"insensitive"}}),n&&c.push({location:{contains:n,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.regionalCongress.findMany({where:m,include:{regionalCongressPartners:!0,regionalCongressGalleryItems:!0},orderBy:s?{startDate:s}:{startDate:"desc"},skip:e,take:t})}async findById(e){return await this.prisma.regionalCongress.findFirst({where:{id:e},include:{regionalCongressPartners:!0,regionalCongressGalleryItems:!0}})}async findByEdition(e){return await this.prisma.regionalCongress.findMany({where:{edition:e},include:{regionalCongressPartners:!0,regionalCongressGalleryItems:!0}})}async count({filter:{title:e,edition:t,location:r}}){let i={},n=[];return t&&n.push({edition:{equals:t}}),e&&n.push({title:{contains:e,mode:"insensitive"}}),r&&n.push({location:{contains:r,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.regionalCongress.count({where:i})}};function Ne(){return new Aa(O)}var Pa=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.regionalCongressGalleryItem.create({data:e})}async update(e){await this.prisma.regionalCongressGalleryItem.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.regionalCongressGalleryItem.delete({where:{id:e}})}async findByCongressId({pagination:e,filter:t}){return await this.prisma.regionalCongressGalleryItem.findMany({where:{congressId:t.congressId,...t.caption&&{caption:{contains:t.caption,mode:"insensitive"}}},skip:e.offset,take:e.limit})}async findById(e){return await this.prisma.regionalCongressGalleryItem.findFirst({where:{id:e}})}async count({filter:e}){return await this.prisma.regionalCongressGalleryItem.count({where:{congressId:e.congressId,...e.caption&&{caption:{contains:e.caption,mode:"insensitive"}}}})}};function Ot(){return new Pa(O)}function kR(){return{createRegionalCongressGalleryController:new Wn(Ot(),Ne(),D())}}function OR(){return{findRegionalCongressGalleriesByCongressIdController:new Hn(Ot())}}function GR(){return{findRegionalCongressGalleryByIdController:new Ma(Ot())}}function NR(){return{updateRegionalCongressGalleryController:new Vn(Ot(),D())}}function LR(){return{deleteRegionalCongressGalleryController:new _n(Ot())}}import{extendZodWithOpenApi as px}from"@asteasolutions/zod-to-openapi";import Qd from"zod";px(Qd);var dx=Qd.object({id:Qd.string().uuid("ID inv\xE1lido")}),Ta=class{constructor(e){this.regionalCongressPartnerRepository=e}async handle(e,t){try{let{id:r}=dx.parse(e.params),i=await this.regionalCongressPartnerRepository.findById(r);if(!i)throw new p("Parceiro n\xE3o encontrado");return t.status(200).json(i)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var Da=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.regionalCongressPartner.create({data:e})}async update(e){await this.prisma.regionalCongressPartner.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.regionalCongressPartner.delete({where:{id:e}})}async findByCongressId(e){return await this.prisma.regionalCongressPartner.findMany({where:{congressId:e.filter.congressId,name:e.filter.name?{contains:e.filter.name,mode:"insensitive"}:void 0},skip:e.pagination?.offset,take:e.pagination?.limit})}async findById(e){return await this.prisma.regionalCongressPartner.findFirst({where:{id:e}})}async count(e){return await this.prisma.regionalCongressPartner.count({where:{congressId:e.filter.congressId,name:e.filter.name?{contains:e.filter.name,mode:"insensitive"}:void 0}})}};function Gt(){return new Da(O)}function WR(){return{createRegionalCongressPartnerController:new Zn(Gt(),Ne(),D())}}function _R(){return{findRegionalCongressPartnersByCongressIdController:new Yn(Gt())}}function zR(){return{findRegionalCongressPartnerByIdController:new Ta(Gt())}}function HR(){return{updateRegionalCongressPartnerController:new Xn(Gt(),D())}}function VR(){return{deleteRegionalCongressPartnerController:new Kn(Gt())}}function ZR(){return{createRegionalCongressController:new $n(Ne())}}function KR(){return{findRegionalCongressesController:new os(Ne())}}function JR(){return{findRegionalCongressByIdController:new rs(Ne())}}function YR(){return{findRegionalCongressByEditionController:new es(Ne())}}function XR(){return{updateRegionalCongressController:new is(Ne())}}function $R(){return{deleteRegionalCongressController:new Qn(Ne())}}var le=lx(),{authMiddleware:sr}=J();le.post("/",(o,e,t)=>{sr.authenticated(o,e,t)},async(o,e)=>{let{createRegionalCongressController:t}=ZR();await t.handle(o,e)});le.get("/",async(o,e)=>{let{findRegionalCongressesController:t}=KR();await t.handle(o,e)});le.get("/:id",async(o,e)=>{let{findRegionalCongressByIdController:t}=JR();await t.handle(o,e)});le.get("/edition/:edition",async(o,e)=>{let{findRegionalCongressByEditionController:t}=YR();await t.handle(o,e)});le.put("/:id",(o,e,t)=>{sr.authenticated(o,e,t)},async(o,e)=>{let{updateRegionalCongressController:t}=XR();await t.handle(o,e)});le.delete("/:id",(o,e,t)=>{sr.authenticated(o,e,t)},async(o,e)=>{let{deleteRegionalCongressController:t}=$R();await t.handle(o,e)});le.post("/:congressId/gallery",(o,e,t)=>{sr.authenticated(o,e,t)},K.single("image"),async(o,e)=>{let{createRegionalCongressGalleryController:t}=kR();await t.handle(o,e)});le.get("/:congressId/gallery",async(o,e)=>{let{findRegionalCongressGalleriesByCongressIdController:t}=OR();await t.handle(o,e)});le.get("/gallery/:id",async(o,e)=>{let{findRegionalCongressGalleryByIdController:t}=GR();await t.handle(o,e)});le.put("/gallery/:id",(o,e,t)=>{sr.authenticated(o,e,t)},K.single("image"),async(o,e)=>{let{updateRegionalCongressGalleryController:t}=NR();await t.handle(o,e)});le.delete("/gallery/:id",(o,e,t)=>{sr.authenticated(o,e,t)},async(o,e)=>{let{deleteRegionalCongressGalleryController:t}=LR();await t.handle(o,e)});le.post("/:congressId/partner",(o,e,t)=>{sr.authenticated(o,e,t)},K.single("logo"),async(o,e)=>{let{createRegionalCongressPartnerController:t}=WR();await t.handle(o,e)});le.get("/:congressId/partner",async(o,e)=>{let{findRegionalCongressPartnersByCongressIdController:t}=_R();await t.handle(o,e)});le.get("/partner/:id",async(o,e)=>{let{findRegionalCongressPartnerByIdController:t}=zR();await t.handle(o,e)});le.put("/partner/:id",(o,e,t)=>{sr.authenticated(o,e,t)},K.single("logo"),async(o,e)=>{let{updateRegionalCongressPartnerController:t}=HR();await t.handle(o,e)});le.delete("/partner/:id",(o,e,t)=>{sr.authenticated(o,e,t)},async(o,e)=>{let{deleteRegionalCongressPartnerController:t}=VR();await t.handle(o,e)});import{Router as Rx}from"express";import{extendZodWithOpenApi as ux}from"@asteasolutions/zod-to-openapi";import Fe from"zod";var gx=5,QR=1024,fx=QR*QR,yx=gx*fx;ux(Fe);var hx=Fe.object({name:Fe.string().min(1,"Nome \xE9 obrigat\xF3rio."),acronym:Fe.string().optional(),description:Fe.string().optional(),url:Fe.url("URL deve ser v\xE1lida.").optional(),foundedAt:Fe.coerce.date(),scope:Fe.string().optional(),email:Fe.email("E-mail deve ser v\xE1lido.").optional(),leaderId:Fe.uuid("L\xEDder \xE9 obrigat\xF3rio."),deputyLeaderId:Fe.uuid("Vice-l\xEDder \xE9 obrigat\xF3rio."),logo:Fe.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=yx,"O logo deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.").optional()}),Fa=class{constructor(e,t){this.researchGroupRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{name:r,acronym:i,description:n,url:s,foundedAt:m,scope:c,email:d,leaderId:h,deputyLeaderId:E,logo:F}=hx.parse({...e.body,logo:e.file}),X=await this.researchGroupRepository.create({name:r,acronym:i,description:n,url:s,foundedAt:m,scope:c,email:d,leaderId:h,deputyLeaderId:E});if(F){let te=await this.firebaseStorageService.uploadFile({file:F,folder:M.RESEARCH_GROUP_LOGO,id:X.id});await this.researchGroupRepository.update({id:X.id,logoUrl:te})}return t.sendStatus(201)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var Ba=class{constructor(e){this.prisma=e}async create({name:e,acronym:t,description:r,url:i,logoUrl:n,foundedAt:s,scope:m,email:c,leaderId:d,deputyLeaderId:h}){return await this.prisma.researchGroup.create({data:{name:e,acronym:t,description:r,url:i,logoUrl:n,foundedAt:s,scope:m,email:c,leaderId:d,deputyLeaderId:h}})}async find({pagination:{offset:e,limit:t},filter:{name:r,acronym:i,description:n,leader:s,orderBy:m}}){let c={},d=[];return r&&d.push({name:{contains:r,mode:"insensitive"}}),i&&d.push({acronym:{contains:i,mode:"insensitive"}}),n&&d.push({description:{contains:n,mode:"insensitive"}}),s&&d.push({leader:{name:{contains:s,mode:"insensitive"}}}),d.length>0&&(c.OR=d),await this.prisma.researchGroup.findMany({where:c,include:{leader:{omit:{passwordHash:!0}},deputyLeader:{omit:{passwordHash:!0}}},orderBy:{updatedAt:m},skip:e,take:t})}async findById(e){return await this.prisma.researchGroup.findFirst({where:{id:e},include:{leader:{omit:{passwordHash:!0}},deputyLeader:{omit:{passwordHash:!0}}}})}async update({id:e,name:t,acronym:r,description:i,url:n,logoUrl:s,foundedAt:m,scope:c,email:d,leaderId:h,deputyLeaderId:E}){await this.prisma.researchGroup.update({where:{id:e},data:{name:t,acronym:r,description:i,url:n,logoUrl:s,foundedAt:m,scope:c,email:d,leaderId:h,deputyLeaderId:E}})}async deleteById(e){await this.prisma.researchGroup.delete({where:{id:e}})}async count({filter:{name:e,acronym:t,description:r,leader:i}}){let n={},s=[];return e&&s.push({name:{contains:e,mode:"insensitive"}}),t&&s.push({acronym:{contains:t,mode:"insensitive"}}),r&&s.push({description:{contains:r,mode:"insensitive"}}),i&&s.push({leader:{name:{contains:i,mode:"insensitive"}}}),s.length>0&&(n.OR=s),await this.prisma.researchGroup.count({where:n})}};function Nt(){return new Ba(O)}function eI(){return{createResearchGroupController:new Fa(Nt(),D())}}function rI(){return{findResearchGroupsController:new as(Nt())}}function tI(){return{findResearchGroupByIdController:new ss(Nt())}}function oI(){return{updateResearchGroupController:new ms(Nt(),D())}}function iI(){return{deleteResearchGroupController:new ns(Nt(),D())}}var rt=Rx(),{authMiddleware:ho}=J();rt.post("/",(o,e,t)=>{ho.isAdmin(o,e,t)},K.single("logo"),async(o,e)=>{let{createResearchGroupController:t}=eI();await t.handle(o,e)});rt.get("/",(o,e,t)=>{ho.isAdmin(o,e,t)},async(o,e)=>{let{findResearchGroupsController:t}=rI();await t.handle(o,e)});rt.get("/:id",(o,e,t)=>{ho.isAdmin(o,e,t)},async(o,e)=>{let{findResearchGroupByIdController:t}=tI();await t.handle(o,e)});rt.put("/:id",(o,e,t)=>{ho.isAdmin(o,e,t)},K.single("logo"),async(o,e)=>{let{updateResearchGroupController:t}=oI();await t.handle(o,e)});rt.delete("/:id",(o,e,t)=>{ho.isAdmin(o,e,t)},async(o,e)=>{let{deleteResearchGroupController:t}=iI();await t.handle(o,e)});import{Router as Sx}from"express";import{extendZodWithOpenApi as Ix}from"@asteasolutions/zod-to-openapi";import Ie from"zod";var bx=1,Cx=9;Ix(Ie);var wx=Ie.object({page:Ie.coerce.number().min(1).default(bx),limit:Ie.coerce.number().min(1).default(Cx),userId:Ie.string().optional(),registrationNumber:Ie.string().optional(),name:Ie.string().optional(),emailAddress:Ie.string().optional(),mainEtps:Ie.string().optional(),formations:Ie.string().optional(),occupations:Ie.string().optional(),institutions:Ie.string().optional(),biography:Ie.string().optional(),orderBy:Ie.enum(["asc","desc"]).default("desc")}),qa=class{constructor(e){this.researcherRepository=e}async handle(e,t){try{let{page:r,limit:i,...n}=wx.parse(e.query),s=i*r-i,[m,c]=await Promise.all([this.researcherRepository.find({pagination:{offset:s,limit:i},filter:{userName:n.name,...n}}),this.researcherRepository.count({filter:{userName:n.name,...n}})]),d=Math.max(Math.ceil(c/i),1);t.status(200).json({page:r,totalPages:d,offset:s,limit:i,researchers:m})}catch(r){if(r instanceof Error)throw new a(r.message)}}};var Ua=class{constructor(e){this.prisma=e}async create(e){await this.prisma.researcher.create({data:e})}async update(e){await this.prisma.researcher.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.researcher.delete({where:{id:e}})}async find({pagination:e,filter:{biography:t,degrees:r,formations:i,institutions:n,mainEtps:s,occupations:m,orderBy:c,registrationNumber:d,seniority:h,userId:E,userName:F}}){let X={},te=[];return F&&te.push({user:{name:{contains:F,mode:"insensitive"}}}),d&&te.push({registrationNumber:{contains:d,mode:"insensitive"}}),s&&te.push({mainEtps:{contains:s,mode:"insensitive"}}),i&&te.push({formations:{contains:i,mode:"insensitive"}}),m&&te.push({occupations:{contains:m,mode:"insensitive"}}),n&&te.push({institutions:{contains:n,mode:"insensitive"}}),t&&te.push({biography:{contains:t,mode:"insensitive"}}),te.length>0&&(X.OR=te),r&&r.length>0&&(X.degrees={hasSome:r}),h&&(X.seniority=h),E&&(X.userId={equals:E}),await this.prisma.researcher.findMany({where:X,omit:{userId:!0},include:{user:{omit:{passwordHash:!0}}},orderBy:{updatedAt:c},...e&&{skip:e.offset,take:e.limit}})}async findById(e){return await this.prisma.researcher.findFirst({where:{id:e},include:{user:{omit:{passwordHash:!0}}}})}async findByUserId(e){return await this.prisma.researcher.findFirst({where:{userId:e},include:{user:{omit:{passwordHash:!0}}}})}async findByRegistrationNumber(e){return await this.prisma.researcher.findFirst({where:{registrationNumber:e},include:{user:{omit:{passwordHash:!0}}}})}async count({filter:{biography:e,degrees:t,formations:r,institutions:i,mainEtps:n,occupations:s,registrationNumber:m,seniority:c,userId:d,userName:h}}){let E={},F=[];return h&&F.push({user:{name:{contains:h,mode:"insensitive"}}}),m&&F.push({registrationNumber:{contains:m,mode:"insensitive"}}),F.length>0&&(E.OR=F),n&&(E.mainEtps={contains:n,mode:"insensitive"}),r&&(E.formations={contains:r,mode:"insensitive"}),t&&t.length>0&&(E.degrees={hasSome:t}),s&&(E.occupations={contains:s,mode:"insensitive"}),c&&(E.seniority=c),i&&(E.institutions={contains:i,mode:"insensitive"}),e&&(E.biography={contains:e,mode:"insensitive"}),d&&(E.userId={equals:d}),await this.prisma.researcher.count({where:E})}};function tt(){return new Ua(O)}function nI(){return{createResearcherController:new cs(tt())}}function sI(){return{findResearchersController:new qa(tt())}}function aI(){return{findResearcherByIdController:new ds(tt())}}function mI(){return{findResearcherByUserIdController:new us(tt())}}function cI(){return{updateResearcherController:new gs(tt())}}function pI(){return{deleteResearcherController:new ps(tt())}}var Pr=Sx(),{authMiddleware:el}=J();Pr.post("/",(o,e,t)=>{el.authenticated(o,e,t)},async(o,e)=>{let{createResearcherController:t}=nI();await t.handle(o,e)});Pr.get("/",async(o,e)=>{let{findResearchersController:t}=sI();await t.handle(o,e)});Pr.get("/:id",async(o,e)=>{let{findResearcherByIdController:t}=aI();await t.handle(o,e)});Pr.get("/user/:userId",async(o,e)=>{let{findResearcherByUserIdController:t}=mI();await t.handle(o,e)});Pr.put("/:id",(o,e,t)=>{el.authenticated(o,e,t)},async(o,e)=>{let{updateResearcherController:t}=cI();await t.handle(o,e)});Pr.delete("/:id",(o,e,t)=>{el.authenticated(o,e,t)},async(o,e)=>{let{deleteResearcherController:t}=pI();await t.handle(o,e)});import{Router as jx}from"express";import{extendZodWithOpenApi as vx}from"@asteasolutions/zod-to-openapi";import ue from"zod";vx(ue);var Ex=ue.object({title:ue.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),author:ue.string().min(1,"Autor \xE9 obrigat\xF3rio."),journal:ue.string().optional(),volume:ue.string().optional(),edition:ue.string().optional(),pageStart:ue.coerce.number().optional(),pageEnd:ue.coerce.number().optional(),startDate:ue.coerce.date(),endDate:ue.coerce.date(),city:ue.string().optional(),state:ue.string().optional(),country:ue.string().optional(),publisher:ue.string().optional(),description:ue.string().optional(),year:ue.coerce.number().optional(),accessUrl:ue.url().optional()}),ka=class{constructor(e){this.scientificArticlesRepository=e}async handle(e,t){try{let{title:r,author:i,journal:n,volume:s,edition:m,pageStart:c,pageEnd:d,startDate:h,endDate:E,city:F,state:X,country:te,publisher:se,description:fe,year:Kt,accessUrl:Ja}=Ex.parse(e.body);return await this.scientificArticlesRepository.create({title:r,author:i,journal:n,volume:s,edition:m,pageStart:c,pageEnd:d,startDate:h,endDate:E,city:F,state:X,country:te,publisher:se,description:fe,year:Kt,accessUrl:Ja}),t.sendStatus(201)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var Oa=class{constructor(e){this.prisma=e}async create({title:e,author:t,journal:r,volume:i,edition:n,pageStart:s,pageEnd:m,startDate:c,endDate:d,city:h,state:E,country:F,publisher:X,description:te,year:se,accessUrl:fe}){return await this.prisma.scientificArticle.create({data:{title:e,author:t,journal:r,volume:i,edition:n,pageStart:s,pageEnd:m,startDate:c,endDate:d,city:h,state:E,country:F,publisher:X,description:te,year:se,accessUrl:fe}})}async find({pagination:{offset:e,limit:t},filter:{title:r,author:i,journal:n,orderBy:s}}){let m={},c=[];return r&&c.push({title:{contains:r,mode:"insensitive"}}),i&&c.push({author:{contains:i,mode:"insensitive"}}),n&&c.push({journal:{contains:n,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.scientificArticle.findMany({where:m,orderBy:{updatedAt:s},skip:e,take:t})}async findById(e){return await this.prisma.scientificArticle.findFirst({where:{id:e}})}async update({id:e,title:t,author:r,journal:i,volume:n,edition:s,pageStart:m,pageEnd:c,startDate:d,endDate:h,city:E,state:F,country:X,publisher:te,description:se,year:fe,accessUrl:Kt}){await this.prisma.scientificArticle.update({where:{id:e},data:{title:t,author:r,journal:i,volume:n,edition:s,pageStart:m,pageEnd:c,startDate:d,endDate:h,city:E,state:F,country:X,publisher:te,description:se,year:fe,accessUrl:Kt}})}async deleteById(e){await this.prisma.scientificArticle.delete({where:{id:e}})}async count({filter:{title:e,author:t,journal:r}}){let i={},n=[];return e&&n.push({title:{contains:e,mode:"insensitive"}}),t&&n.push({author:{contains:t,mode:"insensitive"}}),r&&n.push({journal:{contains:r,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.scientificArticle.count({where:i})}};function Lt(){return new Oa(O)}function dI(){return{createScientificArticleController:new ka(Lt())}}function lI(){return{findScientificArticlesController:new hs(Lt())}}function uI(){return{findScientificArticleByIdController:new ys(Lt())}}function gI(){return{updateScientificArticleController:new Rs(Lt())}}function fI(){return{deleteScientificArticleController:new fs(Lt())}}var ot=jx(),{authMiddleware:Ro}=J();ot.post("/",(o,e,t)=>{Ro.isAdmin(o,e,t)},async(o,e)=>{let{createScientificArticleController:t}=dI();await t.handle(o,e)});ot.get("/",(o,e,t)=>{Ro.isAdmin(o,e,t)},async(o,e)=>{let{findScientificArticlesController:t}=lI();await t.handle(o,e)});ot.get("/:id",(o,e,t)=>{Ro.isAdmin(o,e,t)},async(o,e)=>{let{findScientificArticleByIdController:t}=uI();await t.handle(o,e)});ot.put("/:id",(o,e,t)=>{Ro.isAdmin(o,e,t)},async(o,e)=>{let{updateScientificArticleController:t}=gI();await t.handle(o,e)});ot.delete("/:id",(o,e,t)=>{Ro.isAdmin(o,e,t)},async(o,e)=>{let{deleteScientificArticleController:t}=fI();await t.handle(o,e)});import{Router as Dx}from"express";import{extendZodWithOpenApi as xx}from"@asteasolutions/zod-to-openapi";import ar from"zod";var Mx=5,yI=1024,Ax=yI*yI,Px=Mx*Ax;xx(ar);var Tx=ar.object({name:ar.string().min(1,"Nome \xE9 obrigat\xF3rio."),issn:ar.string().min(1,"ISSN \xE9 obrigat\xF3rio."),description:ar.string().min(1,"Descri\xE7\xE3o \xE9 obrigat\xF3ria."),journalUrl:ar.url("URL da revista deve ser v\xE1lida."),directors:ar.string().optional(),editorialBoard:ar.string().optional(),logo:ar.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=Px,"O logo deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.").optional()}),Ga=class{constructor(e,t){this.scientificJournalRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{name:r,issn:i,description:n,journalUrl:s,directors:m,editorialBoard:c,logo:d}=Tx.parse({...e.body,logo:e.file}),h=await this.scientificJournalRepository.create({name:r,issn:i,description:n,journalUrl:s,directors:m,editorialBoard:c});if(d){let E=await this.firebaseStorageService.uploadFile({file:d,folder:M.SCIENTIFIC_JOURNAL,id:h.id});await this.scientificJournalRepository.update({id:h.id,logoUrl:E})}return t.sendStatus(201)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var Na=class{constructor(e){this.prisma=e}async create({name:e,issn:t,description:r,logoUrl:i,journalUrl:n,directors:s,editorialBoard:m}){return await this.prisma.scientificJournal.create({data:{name:e,issn:t,description:r,logoUrl:i,journalUrl:n,directors:s,editorialBoard:m}})}async find({pagination:{offset:e,limit:t},filter:{name:r,description:i,issn:n,directors:s,editorialBoard:m,orderBy:c}}){let d={},h=[];return r&&h.push({name:{contains:r,mode:"insensitive"}}),i&&h.push({description:{contains:i,mode:"insensitive"}}),n&&h.push({issn:{contains:n,mode:"insensitive"}}),s&&h.push({directors:{contains:s,mode:"insensitive"}}),m&&h.push({editorialBoard:{contains:m,mode:"insensitive"}}),h.length>0&&(d.OR=h),await this.prisma.scientificJournal.findMany({where:d,orderBy:{updatedAt:c},skip:e,take:t})}async findById(e){return await this.prisma.scientificJournal.findFirst({where:{id:e}})}async update({id:e,name:t,issn:r,description:i,logoUrl:n,journalUrl:s,directors:m,editorialBoard:c}){await this.prisma.scientificJournal.update({where:{id:e},data:{name:t,issn:r,description:i,logoUrl:n,journalUrl:s,directors:m,editorialBoard:c}})}async deleteById(e){await this.prisma.scientificJournal.delete({where:{id:e}})}async count({filter:{name:e,description:t,issn:r,directors:i,editorialBoard:n}}){let s={},m=[];return e&&m.push({name:{contains:e,mode:"insensitive"}}),t&&m.push({description:{contains:t,mode:"insensitive"}}),r&&m.push({issn:{contains:r,mode:"insensitive"}}),i&&m.push({directors:{contains:i,mode:"insensitive"}}),n&&m.push({editorialBoard:{contains:n,mode:"insensitive"}}),m.length>0&&(s.OR=m),await this.prisma.scientificJournal.count({where:s})}};function Wt(){return new Na(O)}function hI(){return{createScientificJournalController:new Ga(Wt(),D())}}function RI(){return{findScientificJournalsController:new Cs(Wt())}}function II(){return{findScientificJournalByIdController:new bs(Wt())}}function bI(){return{updateScientificJournalController:new ws(Wt(),D())}}function CI(){return{deleteScientificJournalController:new Is(Wt(),D())}}var it=Dx(),{authMiddleware:Io}=J();it.post("/",(o,e,t)=>{Io.isAdmin(o,e,t)},K.single("logo"),async(o,e)=>{let{createScientificJournalController:t}=hI();await t.handle(o,e)});it.get("/",(o,e,t)=>{Io.isAdmin(o,e,t)},async(o,e)=>{let{findScientificJournalsController:t}=RI();await t.handle(o,e)});it.get("/:id",(o,e,t)=>{Io.isAdmin(o,e,t)},async(o,e)=>{let{findScientificJournalByIdController:t}=II();await t.handle(o,e)});it.put("/:id",(o,e,t)=>{Io.isAdmin(o,e,t)},K.single("logo"),async(o,e)=>{let{updateScientificJournalController:t}=bI();await t.handle(o,e)});it.delete("/:id",(o,e,t)=>{Io.isAdmin(o,e,t)},async(o,e)=>{let{deleteScientificJournalController:t}=CI();await t.handle(o,e)});import{Router as qx}from"express";import{extendZodWithOpenApi as Fx}from"@asteasolutions/zod-to-openapi";import La from"zod";Fx(La);var Bx=La.object({role:La.string().optional(),orderBy:La.enum(["asc","desc"]).optional()}),Wa=class{constructor(e){this.sdhcTeamMemberRepository=e}async handle(e,t){try{let r=Bx.parse(e.query),i=await this.sdhcTeamMemberRepository.find({filter:r});t.status(200).json({members:i})}catch(r){if(r instanceof Error)throw new a(r.message)}}};var _a=class{constructor(e){this.prisma=e}async create(e){await this.prisma.sDHCTeamMember.create({data:{...e,order:e.order??0}})}async update(e){let{id:t,...r}=e;await this.prisma.sDHCTeamMember.update({where:{id:t},data:r})}async deleteById(e){await this.prisma.sDHCTeamMember.delete({where:{id:e}})}async find({filter:{role:e,orderBy:t}}){let r={};return e&&(r.role={contains:e,mode:"insensitive"}),await this.prisma.sDHCTeamMember.findMany({where:r,include:{user:{omit:{passwordHash:!0}}},orderBy:t?[{order:"asc"},{updatedAt:t}]:[{order:"asc"},{updatedAt:"desc"}]})}async findById(e){return await this.prisma.sDHCTeamMember.findFirst({where:{id:e},include:{user:{omit:{passwordHash:!0}}}})}async count({filter:{role:e}}){let t={};return e&&(t.role={contains:e,mode:"insensitive"}),await this.prisma.sDHCTeamMember.count({where:t})}};function _t(){return new _a(O)}function wI(){return{createSDHCTeamMemberController:new Ss(_t())}}function SI(){return{findSDHCTeamMembersController:new Wa(_t())}}function vI(){return{findSDHCTeamMemberByIdController:new Es(_t())}}function EI(){return{updateSDHCTeamMemberController:new xs(_t())}}function jI(){return{deleteSDHCTeamMemberController:new vs(_t())}}var nt=qx(),{authMiddleware:rl}=J();nt.post("/",(o,e,t)=>{rl.authenticated(o,e,t)},async(o,e)=>{let{createSDHCTeamMemberController:t}=wI();await t.handle(o,e)});nt.get("/",async(o,e)=>{let{findSDHCTeamMembersController:t}=SI();await t.handle(o,e)});nt.get("/:id",async(o,e)=>{let{findSDHCTeamMemberByIdController:t}=vI();await t.handle(o,e)});nt.put("/:id",(o,e,t)=>{rl.authenticated(o,e,t)},async(o,e)=>{let{updateSDHCTeamMemberController:t}=EI();await t.handle(o,e)});nt.delete("/:id",(o,e,t)=>{rl.authenticated(o,e,t)},async(o,e)=>{let{deleteSDHCTeamMemberController:t}=jI();await t.handle(o,e)});import{Router as Ux}from"express";var za=class{constructor(e){this.userRepository=e}async handle(e,t){try{let r=await this.userRepository.find();t.status(200).json(r)}catch(r){if(r instanceof Error)throw new a(r.message)}}};function xI(){return{updateUserController:new Ps(Se(),D())}}function MI(){return{deleteUserController:new Ms(Se())}}function AI(){return{findUsersController:new za(Se())}}function PI(){return{findUserController:new As(Se())}}var zt=Ux(),{authMiddleware:TI}=J();zt.get("/:id",async(o,e)=>{let{findUserController:t}=PI();await t.handle(o,e)});zt.put("/",(o,e,t)=>{TI.authenticated(o,e,t)},K.single("avatarImage"),async(o,e)=>{let{updateUserController:t}=xI();await t.handle(o,e)});zt.delete("/:id",(o,e,t)=>{TI.authenticated(o,e,t)},async(o,e)=>{let{deleteUserController:t}=MI();await t.handle(o,e)});zt.get("/",async(o,e)=>{let{findUsersController:t}=AI();await t.handle(o,e)});import{Router as Wx}from"express";import{extendZodWithOpenApi as kx}from"@asteasolutions/zod-to-openapi";import Ze from"zod";var Ox=5,DI=1024,Gx=DI*DI,Nx=Ox*Gx;kx(Ze);var Lx=Ze.object({title:Ze.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),description:Ze.string().optional(),scheduledAt:Ze.coerce.date(),webinarLink:Ze.url().optional(),guestIds:Ze.transform(o=>typeof o=="string"?o.split(","):o).pipe(Ze.array(Ze.uuid())),thumbnail:Ze.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=Nx,"A thumbnail deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.")}),Ha=class{constructor(e,t){this.webinarRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{title:r,description:i,scheduledAt:n,webinarLink:s,guestIds:m,thumbnail:c}=Lx.parse({...e.body,thumbnail:e.file}),d=await this.webinarRepository.create({title:r,description:i,scheduledAt:n,webinarLink:s||void 0,guestIds:m}),h=await this.firebaseStorageService.uploadFile({file:c,folder:M.WEBINAR,id:d.id});return await this.webinarRepository.update({id:d.id,thumbnailUrl:h}),t.sendStatus(201)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var Va=class{constructor(e){this.prisma=e}async create({title:e,description:t,scheduledAt:r,webinarLink:i,thumbnailUrl:n,guestIds:s}){return await this.prisma.webinar.create({data:{title:e,description:t,scheduledAt:r,webinarLink:i,thumbnailUrl:n,guests:s?{connect:s.map(m=>({id:m}))}:void 0}})}async find({pagination:{offset:e,limit:t},filter:{description:r,orderBy:i,title:n}}){let s={},m=[];return n&&m.push({title:{contains:n,mode:"insensitive"}}),r&&m.push({description:{contains:r,mode:"insensitive"}}),m.length>0&&(s.OR=m),await this.prisma.webinar.findMany({where:s,include:{guests:{omit:{passwordHash:!0}}},orderBy:{updatedAt:i},skip:e,take:t})}async findById(e){return await this.prisma.webinar.findFirst({where:{id:e},include:{guests:{omit:{passwordHash:!0}}}})}async update({id:e,title:t,description:r,scheduledAt:i,webinarLink:n,thumbnailUrl:s,guestIds:m}){await this.prisma.webinar.update({where:{id:e},data:{title:t,description:r,scheduledAt:i,webinarLink:n,thumbnailUrl:s,guests:m?{connect:m.map(c=>({id:c}))}:void 0}})}async deleteById(e){await this.prisma.webinar.delete({where:{id:e}})}async count({filter:{description:e,title:t}}){let r={},i=[];return t&&i.push({title:{contains:t,mode:"insensitive"}}),e&&i.push({description:{contains:e,mode:"insensitive"}}),i.length>0&&(r.OR=i),await this.prisma.webinar.count({where:r})}};function Ht(){return new Va(O)}function FI(){return{createWebinarController:new Ha(Ht(),D())}}function BI(){return{findWebinarsController:new Fs(Ht())}}function qI(){return{findWebinarByIdController:new Ds(Ht())}}function UI(){return{updateWebinarController:new Bs(Ht(),D())}}function kI(){return{deleteWebinarController:new Ts(Ht(),D())}}var st=Wx(),{authMiddleware:bo}=J();st.post("/",(o,e,t)=>{bo.isAdmin(o,e,t)},K.single("thumbnail"),async(o,e)=>{let{createWebinarController:t}=FI();await t.handle(o,e)});st.get("/",(o,e,t)=>{bo.isAdmin(o,e,t)},async(o,e)=>{let{findWebinarsController:t}=BI();await t.handle(o,e)});st.get("/:id",(o,e,t)=>{bo.isAdmin(o,e,t)},async(o,e)=>{let{findWebinarByIdController:t}=qI();await t.handle(o,e)});st.put("/:id",(o,e,t)=>{bo.isAdmin(o,e,t)},K.single("thumbnail"),async(o,e)=>{let{updateWebinarController:t}=UI();await t.handle(o,e)});st.delete("/:id",(o,e,t)=>{bo.isAdmin(o,e,t)},async(o,e)=>{let{deleteWebinarController:t}=kI();await t.handle(o,e)});import{Router as Zx}from"express";import{extendZodWithOpenApi as _x}from"@asteasolutions/zod-to-openapi";import Vt from"zod";var zx=1,Hx=7;_x(Vt);var Vx=Vt.object({page:Vt.coerce.number().min(1).default(zx),limit:Vt.coerce.number().min(1).default(Hx),role:Vt.string().optional(),orderBy:Vt.enum(["asc","desc"]).optional()}),Za=class{constructor(e){this.workGroupTeamMemberRepository=e}async handle(e,t){try{let{page:r,limit:i,...n}=Vx.parse(e.query),s=i*r-i,[m,c]=await Promise.all([this.workGroupTeamMemberRepository.find({pagination:{offset:s,limit:i},filter:n}),this.workGroupTeamMemberRepository.count({filter:n})]),d=Math.max(Math.ceil(c/i),1);t.status(200).json({page:r,totalPages:d,offset:s,limit:i,members:m})}catch(r){if(r instanceof Error)throw new a(r.message)}}};var Ka=class{constructor(e){this.prisma=e}async create(e){await this.prisma.workGroupTeamMember.create({data:{...e}})}async update(e){let{id:t,...r}=e;await this.prisma.workGroupTeamMember.update({where:{id:t},data:r})}async deleteById(e){await this.prisma.workGroupTeamMember.delete({where:{id:e}})}async find({pagination:e,filter:{role:t,orderBy:r}}){let i={};return t&&(i.role={contains:t,mode:"insensitive"}),await this.prisma.workGroupTeamMember.findMany({where:i,include:{user:{omit:{passwordHash:!0}}},orderBy:{updatedAt:r??"desc"},...e&&{skip:e.offset,take:e.limit}})}async findById(e){return await this.prisma.workGroupTeamMember.findFirst({where:{id:e},include:{user:{omit:{passwordHash:!0}}}})}async count({filter:{role:e}}){let t={};return e&&(t.role={contains:e,mode:"insensitive"}),await this.prisma.workGroupTeamMember.count({where:t})}};function Zt(){return new Ka(O)}function OI(){return{createWorkGroupTeamMemberController:new qs(Zt())}}function GI(){return{findWorkGroupTeamMembersController:new Za(Zt())}}function NI(){return{findWorkGroupTeamMemberByIdController:new ks(Zt())}}function LI(){return{updateWorkGroupTeamMemberController:new Gs(Zt())}}function WI(){return{deleteWorkGroupTeamMemberController:new Us(Zt())}}var at=Zx(),{authMiddleware:tl}=J();at.post("/",(o,e,t)=>{tl.authenticated(o,e,t)},async(o,e)=>{let{createWorkGroupTeamMemberController:t}=OI();await t.handle(o,e)});at.get("/",async(o,e)=>{let{findWorkGroupTeamMembersController:t}=GI();await t.handle(o,e)});at.get("/:id",async(o,e)=>{let{findWorkGroupTeamMemberByIdController:t}=NI();await t.handle(o,e)});at.put("/:id",(o,e,t)=>{tl.authenticated(o,e,t)},async(o,e)=>{let{updateWorkGroupTeamMemberController:t}=LI();await t.handle(o,e)});at.delete("/:id",(o,e,t)=>{tl.authenticated(o,e,t)},async(o,e)=>{let{deleteWorkGroupTeamMemberController:t}=WI();await t.handle(o,e)});var oe=ol(),Yx={methods:["GET","POST","PUT","DELETE"],origin:["http://localhost:3000","https://rede-ct.vercel.app"],credentials:!0};oe.use(Jx(Yx));oe.use(ol.json());oe.use(ol.urlencoded({extended:!1}));oe.use("/docs",Kx({content:Cy,theme:"kepler"}));oe.use("/",Gd);oe.use("/auth",rr);oe.use("/user",zt);oe.use("/news",Mr);oe.use("/certification",Nr);oe.use("/pendency",Xr);oe.use("/researcher",Pr);oe.use("/in-memoriam",xr);oe.use("/etp",Wr);oe.use("/partner",Yr);oe.use("/management-team",Kr);oe.use("/sdhc-team-member",nt);oe.use("/legitimator-committee-member",Zr);oe.use("/regiment",Ar);oe.use("/meeting",De);oe.use("/international-scientific-congress",de);oe.use("/regional-congress",le);oe.use("/webinars",st);oe.use("/courses",Lr);oe.use("/post-graduate-programs",$r);oe.use("/event",_r);oe.use("/scientific-journals",it);oe.use("/book-volumes",Gr);oe.use("/scientific-articles",ot);oe.use("/work-group-team-member",at);oe.use("/reference-center-team-member",Qr);oe.use("/law",Vr);oe.use("/research-groups",rt);oe.use("/museum",Jr);oe.use((o,e,t,r)=>{let{errorHandler:i}=il();i.handle(o,e,t,r)});var $x=Xx.createServer(oe),_I=4e3;$x.listen(_I,()=>{console.log(`\u{1F680} Aplica\xE7\xE3o rodando na porta ${_I}.`)});

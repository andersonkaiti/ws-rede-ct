import lw from"node:http";import{apiReference as cw}from"@scalar/express-api-reference";import pw from"cors";import Zc from"express";import Iy from"zod";var se=class extends Error{};var re=class extends Error{};var m=class extends Error{};var p=class extends Error{};var ue=class extends Error{};import{ZodError as Ry}from"zod";var Dr=class extends Ry{};var Ur=class{handle(e,r,t,i){return e instanceof Dr?t.status(400).json({message:"Validation error",error:Iy.treeifyError(e)}):e instanceof se?t.status(400).json({message:e.message}):e instanceof p?t.status(404).json({message:e.message}):e instanceof ue?t.status(401).json({message:e.message}):e instanceof re?t.status(409).json({message:e.message}):e instanceof m?t.status(500).json({message:e.message}):t.status(500).json({message:"Internal server error"})}};function Jc(){return{errorHandler:new Ur}}import{OpenAPIRegistry as EC,OpenApiGeneratorV3 as jC}from"@asteasolutions/zod-to-openapi";import{$Enums as Yc}from"@prisma/client";import h from"zod";import{extendZodWithOpenApi as by}from"@asteasolutions/zod-to-openapi";import gt from"zod";var Cy=1,Sy=6;by(gt);var ws=gt.object({page:gt.coerce.number().min(1).default(Cy),limit:gt.coerce.number().min(1).default(Sy),title:gt.string().optional(),description:gt.string().optional(),orderBy:gt.enum(["asc","desc"]).default("desc")}),qr=class{constructor(e){this.certificationRepository=e}async handle(e,r){try{let{title:t,description:i,limit:n,orderBy:s,page:a}=ws.parse(e.query),c=a*n-n,d=e.user.id,[R,A]=await Promise.all([this.certificationRepository.findByUserId({userId:d,pagination:{offset:c,limit:n},filter:{title:t,description:i,orderBy:s}}),this.certificationRepository.count({filter:{title:t,description:i,userId:d}})]),G=Math.max(Math.ceil(A/n),1);return r.status(200).json({page:a,totalPages:G,offset:c,limit:n,totalCertifications:A,certifications:R})}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as wy}from"@asteasolutions/zod-to-openapi";import ft from"zod";var vy=1,Ey=7;wy(ft);var vs=ft.object({page:ft.coerce.number().min(1).default(vy),limit:ft.coerce.number().min(1).default(Ey),title:ft.string().optional(),content:ft.string().optional(),orderBy:ft.enum(["asc","desc"]).default("desc")}),Or=class{constructor(e){this.newsRepository=e}async handle(e,r){try{let{page:t,limit:i,content:n,orderBy:s,title:a}=vs.parse(e.query),c=i*t-i,d=e.user.id,[R,A]=await Promise.all([this.newsRepository.findByAuthorId({authorId:d,pagination:{offset:c,limit:i},filter:{orderBy:s,title:a,content:n}}),this.newsRepository.count({filter:{authorId:d,content:n,title:a}})]),G=Math.ceil(A/i);r.status(200).json({page:t,totalPages:G,offset:c,limit:i,news:R})}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as jy}from"@asteasolutions/zod-to-openapi";import{PendencyStatus as xy}from"@prisma/client";import Ve from"zod";var Py=1,My=6;jy(Ve);var Es=Ve.object({page:Ve.coerce.number().min(1).default(Py),limit:Ve.coerce.number().min(1).default(My),title:Ve.string().optional(),description:Ve.string().optional(),status:Ve.enum(xy).default("PENDING"),orderBy:Ve.enum(["asc","desc"]).default("desc")}),kr=class{constructor(e){this.pendencyRepository=e}async handle(e,r){try{let{limit:t,page:i,...n}=Es.parse(e.query),s=i*t-t,a=e.user.id,[c,d]=await Promise.all([this.pendencyRepository.findByUserId({userId:a,pagination:{offset:s,limit:t},filter:n}),this.pendencyRepository.count({filter:{...n,userId:a}})]),R=Math.max(Math.ceil(d/t),1);return r.status(200).json({page:i,totalPages:R,offset:s,limit:t,pendencies:c})}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as Ay}from"@asteasolutions/zod-to-openapi";import Nr from"zod";Ay(Nr);var js=Nr.object({password:Nr.string(),email:Nr.email()}),Gr=class{constructor(e,r,t){this.userRepository=e;this.bcrypt=r;this.jwtService=t}async handle(e,r){try{let{email:t,password:i}=js.parse(e.body),n=await this.userRepository.findByEmail(t);if(!n)return r.status(401).json({message:"Usu\xE1rio n\xE3o existe."});if(!await this.bcrypt.compare({password:i,hashedPassword:n.passwordHash}))throw new ue("Senha inv\xE1lida.");let{id:a,role:c}=n,d=this.jwtService.sign({id:a,role:c,email:t});return r.status(200).json({token:d})}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as Ty}from"@asteasolutions/zod-to-openapi";import kt from"zod";var Lr=8;Ty(kt);var xs=kt.object({name:kt.string("Nome \xE9 obrigat\xF3rio.").min(1,"Nome \xE9 obrigat\xF3rio."),emailAddress:kt.email("E-mail inv\xE1lido.").min(1,"E-mail \xE9 obrigat\xF3rio."),password:kt.string("A senha \xE9 obrigat\xF3ria.").min(Lr,`A senha deve ter pelo menos ${Lr} caracteres.`),confirmPassword:kt.string("A senha \xE9 obrigat\xF3ria.").min(Lr,`A senha deve ter pelo menos ${Lr} caracteres.`)}).refine(o=>o.password===o.confirmPassword,{message:"As senhas n\xE3o coincidem.",path:["confirmPassword"]}),_r=class{constructor(e,r){this.userRepository=e;this.bcrypt=r}async handle(e,r){try{let{emailAddress:t,name:i,password:n}=xs.parse(e.body);if(await this.userRepository.findByEmail(t))throw new re("Usu\xE1rio j\xE1 existe.");let a=await this.bcrypt.hash(n);return await this.userRepository.create({name:i,emailAddress:t,passwordHash:a}),r.status(201).json()}catch(t){if(t instanceof Error)throw new m(t.message)}}};var Xc={method:"post",path:"/auth/sign-up",tags:["Authentication"],summary:"Create a new user",request:{body:{content:{"application/json":{schema:xs}}}},responses:{201:{description:"User created successfully",summary:"User Registration Successful",content:{"application/json":{schema:h.object({message:h.string()})}}},400:{description:"Invalid input data provided",summary:"Validation Error",content:{"application/json":{schema:h.object({errors:h.record(h.string(),h.string())})}}},409:{description:"User already exists with this email",summary:"User Already Exists",content:{"application/json":{schema:h.object({message:h.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:h.object({message:h.string()})}}}}},$c={method:"post",path:"/auth/sign-in",tags:["Authentication"],summary:"Sign in",request:{body:{content:{"application/json":{schema:js}}}},responses:{200:{description:"Authentication successful, JWT token returned",summary:"Login Successful",content:{"application/json":{schema:h.object({token:h.string()})}}},400:{description:"Invalid credentials or input data",summary:"Validation Error",content:{"application/json":{schema:h.object({errors:h.record(h.string(),h.string())})}}},401:{description:"Invalid email or password",summary:"Authentication Failed",content:{"application/json":{schema:h.object({message:h.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:h.object({message:h.string()})}}}}},Qc={method:"get",path:"/auth/user",tags:["Authentication"],summary:"Search for authenticated user",security:[{bearerAuth:[]}],responses:{200:{description:"Authenticated user information retrieved successfully",summary:"User Information Retrieved",content:{"application/json":{schema:h.object({name:h.string(),id:h.string(),avatarUrl:h.string().nullable(),createdAt:h.date(),updatedAt:h.date(),emailAddress:h.string(),orcid:h.string().nullable(),phone:h.string().nullable(),lattesUrl:h.string().nullable(),role:h.enum(Yc.UserRole)}).nullable()}}},400:{description:"Invalid request parameters",summary:"Validation Error",content:{"application/json":{schema:h.object({errors:h.record(h.string(),h.string())})}}},404:{description:"User not found or not authenticated",summary:"User Not Found",content:{"application/json":{schema:h.object({message:h.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:h.object({message:h.string()})}}}}},ep={method:"get",path:"/auth/user/news",tags:["Authentication"],summary:"List authenticated user news",security:[{bearerAuth:[]}],request:{query:vs},responses:{200:{description:"Paginated list of authenticated user news retrieved successfully",summary:"User News Retrieved",content:{"application/json":{schema:h.object({page:h.number(),totalPages:h.number(),offset:h.number(),limit:h.number(),news:h.object({content:h.string(),id:h.string(),title:h.string(),createdAt:h.date(),updatedAt:h.date(),imageUrl:h.string().nullable()})})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:h.object({errors:h.record(h.string(),h.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:h.object({message:h.string()})}}}}},tp={method:"get",path:"/auth/admin",tags:["Authentication"],summary:"Verify admin access",security:[{bearerAuth:[]}],responses:{200:{description:"Admin access verified successfully",summary:"Admin Access Granted",content:{"application/json":{schema:h.object({success:h.boolean()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:h.object({message:h.string()})}}}}},rp={method:"get",path:"/auth/certifications",tags:["Authentication"],summary:"List all authenticated user's certifications",security:[{bearerAuth:[]}],request:{query:ws},responses:{200:{description:"Paginated list of authenticated user certifications retrieved successfully",summary:"User Certifications Retrieved",content:{"application/json":{schema:h.object({page:h.number(),totalPages:h.number(),offset:h.number(),limit:h.number(),certifications:h.object({description:h.string(),id:h.string(),title:h.string(),certificationUrl:h.string(),createdAt:h.date(),updatedAt:h.date(),userId:h.string()})})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:h.object({errors:h.record(h.string(),h.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:h.object({message:h.string()})}}}}},op={method:"get",path:"/auth/pendencies",tags:["Authentication"],summary:"List all authenticated user's pendencies",security:[{bearerAuth:[]}],request:{query:Es},responses:{200:{description:"Paginated list of authenticated user pendencies retrieved successfully",summary:"User Pendencies Retrieved",content:{"application/json":{schema:h.object({page:h.number(),totalPages:h.number(),offset:h.number(),limit:h.number(),pendencies:h.object({id:h.string(),title:h.string(),description:h.string(),status:h.enum(Yc.PendencyStatus),createdAt:h.date(),updatedAt:h.date(),userId:h.string()})})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:h.object({errors:h.record(h.string(),h.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:h.object({message:h.string()})}}}}};import S from"zod";import{extendZodWithOpenApi as Fy}from"@asteasolutions/zod-to-openapi";import Ps from"zod";Fy(Ps);var Ms=Ps.object({id:Ps.uuid()}),Wr=class{constructor(e,r){this.bookVolumeRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=Ms.parse({id:e.params.id}),i=await this.bookVolumeRepository.findById(t);if(!i)throw new p("O volume de livro n\xE3o existe.");return i.authorImageUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.authorImageUrl}),i.coverImageUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.coverImageUrl}),i.catalogSheetUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.catalogSheetUrl}),await this.bookVolumeRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as By}from"@asteasolutions/zod-to-openapi";import As from"zod";By(As);var Ts=As.object({id:As.uuid()}),zr=class{constructor(e){this.bookVolumeRepository=e}async handle(e,r){try{let{id:t}=Ts.parse({id:e.params.id}),i=await this.bookVolumeRepository.findById(t);if(!i)throw new p("Volume de livro n\xE3o encontrado.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as Dy}from"@asteasolutions/zod-to-openapi";import Ze from"zod";var Uy=1,qy=6;Dy(Ze);var Fs=Ze.object({page:Ze.coerce.number().min(1).default(Uy),limit:Ze.coerce.number().min(1).default(qy),title:Ze.string().optional(),author:Ze.string().optional(),description:Ze.string().optional(),orderBy:Ze.enum(["asc","desc"]).default("desc")}),Hr=class{constructor(e){this.bookVolumeRepository=e}async handle(e,r){try{let{limit:t,page:i,...n}=Fs.parse(e.query),s=i*t-t,[a,c]=await Promise.all([this.bookVolumeRepository.find({pagination:{offset:s,limit:t},filter:n}),this.bookVolumeRepository.count({filter:n})]),d=Math.max(Math.ceil(c/t),1);return r.status(200).json({page:i,totalPages:d,offset:s,limit:t,bookVolumes:a})}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as Oy}from"@asteasolutions/zod-to-openapi";import ge from"zod";var j={NEWS:"images/news",USER:"images/user",IN_MEMORIAM:"images/in-memoriam",PARTNER:"images/partners",CERTIFICATION:"documents/certifications",PENDENCY:"documents/pendencies",REGIMENT:"documents/regiments",MEETING_MINUTE:"documents/meeting-minutes",INTERNATIONAL_SCIENTIFIC_CONGRESS_GALLERY:"images/international-scientific-congress-gallery",GALLERY:"images/regional-congress-gallery",REGIONAL_CONGRESS_GALLERY:"images/regional-congress-gallery",WEBINAR:"images/webinars",COURSE:"images/courses",POST_GRADUATE_PROGRAM:"images/post-graduate-programs",EVENT:"images/events",SCIENTIFIC_JOURNAL:"images/scientific-journals",BOOK_VOLUME_AUTHOR_IMAGE:"images/book-volumes/authors",BOOK_VOLUME_COVER:"images/book-volumes/covers",BOOK_VOLUME_CATALOG_SHEET:"documents/book-volumes/catalog-sheets"};var Vr=5,ip=1024,ky=ip*ip,Bs=Vr*ky;Oy(ge);var Ds=ge.object({id:ge.uuid(),volumeNumber:ge.coerce.number().int().positive().optional(),year:ge.coerce.number().int().positive().optional(),title:ge.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio.").optional(),author:ge.string().min(1,"Autor \xE9 obrigat\xF3rio.").optional(),accessUrl:ge.string().url("URL de acesso deve ser v\xE1lida").optional(),description:ge.string().optional(),authorImage:ge.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=Bs,`A imagem do autor deve ter no m\xE1ximo ${Vr}MB.`).optional(),coverImage:ge.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=Bs,`A imagem da capa deve ter no m\xE1ximo ${Vr}MB.`).optional(),catalogSheet:ge.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=Bs,`A ficha catalogr\xE1fica deve ter no m\xE1ximo ${Vr}MB.`).optional()}),Zr=class{constructor(e,r){this.bookVolumeRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,volumeNumber:i,year:n,title:s,author:a,accessUrl:c,description:d,authorImage:R,coverImage:A,catalogSheet:G}=Ds.parse({id:e.params.id,...e.body,authorImage:e.files?.authorImage?.[0],coverImage:e.files?.coverImage?.[0],catalogSheet:e.files?.catalogSheet?.[0]}),J=await this.bookVolumeRepository.findById(t);if(!J)throw new p("O volume de livro n\xE3o existe.");let Q=J.authorImageUrl,ur=J.coverImageUrl,Kc=J.catalogSheetUrl;return R&&(Q=await this.firebaseStorageService.uploadFile({file:R,id:t,folder:j.BOOK_VOLUME_AUTHOR_IMAGE})),A&&(ur=await this.firebaseStorageService.uploadFile({file:A,id:t,folder:j.BOOK_VOLUME_COVER})),G&&(Kc=await this.firebaseStorageService.uploadFile({file:G,id:t,folder:j.BOOK_VOLUME_CATALOG_SHEET})),await this.bookVolumeRepository.update({id:t,volumeNumber:i,year:n,title:s,author:a,accessUrl:c,description:d,authorImageUrl:Q,coverImageUrl:ur,catalogSheetUrl:Kc}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var np={method:"post",path:"/book-volumes",tags:["Book Volumes"],summary:"Create book volume",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:S.object({volumeNumber:S.number().int().positive().openapi({description:"N\xFAmero do volume"}),year:S.number().int().positive().openapi({description:"Ano de publica\xE7\xE3o"}),title:S.string().min(1).openapi({description:"T\xEDtulo do livro"}),author:S.string().min(1).openapi({description:"Nome do autor"}),accessUrl:S.string().url().optional().openapi({description:"URL de acesso ao livro"}),description:S.string().optional().openapi({description:"Descri\xE7\xE3o do livro"}),authorImage:S.string().optional().openapi({description:"Imagem do autor (m\xE1ximo 5MB)",type:"string",format:"binary"}),coverImage:S.string().optional().openapi({description:"Imagem da capa (m\xE1ximo 5MB)",type:"string",format:"binary"}),catalogSheet:S.string().optional().openapi({description:"Ficha catalogr\xE1fica (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{201:{description:"Book volume created successfully",summary:"Volume Created"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:S.object({errors:S.record(S.string(),S.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:S.object({message:S.string()})}}}}},sp={method:"get",path:"/book-volumes",tags:["Book Volumes"],summary:"List book volumes",security:[{bearerAuth:[]}],request:{query:Fs},responses:{200:{description:"Paginated list of book volumes retrieved successfully",summary:"Volumes Retrieved",content:{"application/json":{schema:S.object({page:S.number(),totalPages:S.number(),offset:S.number(),limit:S.number(),bookVolumes:S.array(S.object({id:S.string(),volumeNumber:S.number(),year:S.number(),title:S.string(),author:S.string(),accessUrl:S.string().nullable(),authorImageUrl:S.string().nullable(),coverImageUrl:S.string().nullable(),catalogSheetUrl:S.string().nullable(),description:S.string().nullable(),createdAt:S.date(),updatedAt:S.date()}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:S.object({errors:S.record(S.string(),S.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:S.object({message:S.string()})}}}}},ap={method:"get",path:"/book-volumes/{id}",tags:["Book Volumes"],summary:"Find book volume by ID",security:[{bearerAuth:[]}],request:{params:Ts},responses:{200:{description:"Book volume details retrieved successfully",summary:"Volume Retrieved",content:{"application/json":{schema:S.object({id:S.string(),volumeNumber:S.number(),year:S.number(),title:S.string(),author:S.string(),accessUrl:S.string().nullable(),authorImageUrl:S.string().nullable(),coverImageUrl:S.string().nullable(),catalogSheetUrl:S.string().nullable(),description:S.string().nullable(),createdAt:S.date(),updatedAt:S.date()}).nullable()}}},400:{description:"Invalid volume ID format",summary:"Validation Error",content:{"application/json":{schema:S.object({errors:S.record(S.string(),S.string())})}}},404:{description:"Book volume not found with the provided ID",summary:"Volume Not Found",content:{"application/json":{schema:S.object({message:S.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:S.object({message:S.string()})}}}}},mp={method:"put",path:"/book-volumes/{id}",tags:["Book Volumes"],summary:"Update book volume",security:[{bearerAuth:[]}],request:{params:Ds.pick({id:!0}),body:{content:{"multipart/form-data":{schema:S.object({volumeNumber:S.number().int().positive().optional().openapi({description:"N\xFAmero do volume"}),year:S.number().int().positive().optional().openapi({description:"Ano de publica\xE7\xE3o"}),title:S.string().min(1).optional().openapi({description:"T\xEDtulo do livro"}),author:S.string().min(1).optional().openapi({description:"Nome do autor"}),accessUrl:S.string().url().optional().openapi({description:"URL de acesso ao livro"}),description:S.string().optional().openapi({description:"Descri\xE7\xE3o do livro"}),authorImage:S.string().optional().openapi({description:"Imagem do autor (m\xE1ximo 5MB)",type:"string",format:"binary"}),coverImage:S.string().optional().openapi({description:"Imagem da capa (m\xE1ximo 5MB)",type:"string",format:"binary"}),catalogSheet:S.string().optional().openapi({description:"Ficha catalogr\xE1fica (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{200:{description:"Book volume updated successfully",summary:"Volume Updated"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:S.object({errors:S.record(S.string(),S.string())})}}},404:{description:"Book volume not found with the provided ID",summary:"Volume Not Found",content:{"application/json":{schema:S.object({message:S.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:S.object({message:S.string()})}}}}},cp={method:"delete",path:"/book-volumes/{id}",tags:["Book Volumes"],summary:"Delete book volume",security:[{bearerAuth:[]}],request:{params:Ms},responses:{200:{description:"Book volume deleted successfully",summary:"Volume Deleted"},400:{description:"Invalid volume ID format",summary:"Validation Error",content:{"application/json":{schema:S.object({errors:S.record(S.string(),S.string())})}}},404:{description:"Book volume not found with the provided ID",summary:"Volume Not Found",content:{"application/json":{schema:S.object({message:S.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:S.object({message:S.string()})}}}}};import{$Enums as Vy}from"@prisma/client";import x from"zod";import{extendZodWithOpenApi as Ny}from"@asteasolutions/zod-to-openapi";import Us from"zod";Ny(Us);var qs=Us.object({id:Us.string()}),Kr=class{constructor(e,r){this.certificationRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=qs.parse({id:e.params.certification_id}),i=await this.certificationRepository.findById(t);if(!i)throw new p("A certifica\xE7\xE3o n\xE3o existe.");return await Promise.all([this.certificationRepository.deleteById(i.id),this.firebaseStorageService.deleteFile({fileUrl:i.certificationUrl})]),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as Gy}from"@asteasolutions/zod-to-openapi";import Os from"zod";Gy(Os);var ks=Os.object({certificationId:Os.uuid()}),Jr=class{constructor(e){this.certificationRepository=e}async handle(e,r){try{let{certificationId:t}=ks.parse({certificationId:e.params.certification_id}),i=await this.certificationRepository.findById(t);if(!i)throw new p("Certificado n\xE3o encontrado.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as Ly}from"@asteasolutions/zod-to-openapi";import Ke from"zod";var _y=1,Wy=6;Ly(Ke);var Ns=Ke.object({page:Ke.coerce.number().min(1).default(_y),limit:Ke.coerce.number().min(1).default(Wy),title:Ke.string().optional(),description:Ke.string().optional(),userId:Ke.uuid().optional(),orderBy:Ke.enum(["asc","desc"]).default("desc")}),Yr=class{constructor(e){this.certificationRepository=e}async handle(e,r){try{let{limit:t,page:i,...n}=Ns.parse(e.query),s=i*t-t,[a,c]=await Promise.all([this.certificationRepository.find({pagination:{offset:s,limit:t},filter:n}),this.certificationRepository.count({filter:n})]),d=Math.max(Math.ceil(c/t),1);return r.status(200).json({page:i,totalPages:d,offset:s,limit:t,certifications:a})}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as zy}from"@asteasolutions/zod-to-openapi";import Nt from"zod";zy(Nt);var $r=Nt.object({userId:Nt.uuid(),title:Nt.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),description:Nt.string().min(1,"Descri\xE7\xE3o \xE9 obrigat\xF3ria."),certification:Nt.any().refine(o=>o&&typeof o=="object"&&o.size>0,"Arquivo do certificado \xE9 obrigat\xF3rio")}),Xr=class{constructor(e,r,t){this.userRepository=e;this.certificationRepository=r;this.firebaseStorageService=t}async handle(e,r){try{let{userId:t,title:i,description:n,certification:s}=$r.parse({...e.body,userId:e.params.user_id,certification:e.file});if(!await this.userRepository.findById(t))throw new se("O usu\xE1rio n\xE3o existe.");let c=await this.firebaseStorageService.uploadFile({file:s,id:t,folder:j.CERTIFICATION});return await this.certificationRepository.register({userId:t,title:i,description:n,certificationUrl:c}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as Hy}from"@asteasolutions/zod-to-openapi";import Gt from"zod";Hy(Gt);var eo=Gt.object({id:Gt.uuid(),title:Gt.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),description:Gt.string().min(1,"Descri\xE7\xE3o \xE9 obrigat\xF3ria."),certification:Gt.any().refine(o=>o==null||typeof o=="object"&&typeof o.size=="number"&&(o.size===0||o.size>0),"Arquivo do certificado \xE9 inv\xE1lido").optional()}),Qr=class{constructor(e,r){this.certificationRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{certification:t,id:i,...n}=eo.parse({...e.body,id:e.params.certification_id,certification:e.file}),s=await this.certificationRepository.findById(i);if(!s)throw new se("A certifica\xE7\xE3o n\xE3o existe");let a=s.certificationUrl;return t&&t.size>0&&(a=await this.firebaseStorageService.updateFile({file:t,id:s.userId,folder:j.CERTIFICATION,fileUrl:s.certificationUrl})),await this.certificationRepository.update({...n,id:i,certificationUrl:a}),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var pp={method:"post",path:"/certifications/{user_id}",tags:["Certifications"],summary:"Register certification for user",security:[{bearerAuth:[]}],request:{params:$r.pick({userId:!0}).transform(()=>({user_id:""})),body:{content:{"multipart/form-data":{schema:$r.omit({userId:!0})}}}},responses:{201:{description:"Certification registered successfully for the user",summary:"Certification Registered",content:{"application/json":{schema:x.object({message:x.string()})}}},400:{description:"Invalid input data or file format",summary:"Validation Error",content:{"application/json":{schema:x.object({errors:x.record(x.string(),x.string())})}}},404:{description:"User not found with the provided ID",summary:"User Not Found",content:{"application/json":{schema:x.object({message:x.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:x.object({message:x.string()})}}}}},dp={method:"get",path:"/certifications",tags:["Certifications"],summary:"List certifications",security:[{bearerAuth:[]}],request:{query:Ns},responses:{200:{description:"Paginated list of certifications with user information retrieved successfully",summary:"Certifications Retrieved",content:{"application/json":{schema:x.object({page:x.number(),totalPages:x.number(),offset:x.number(),limit:x.number(),certifications:x.array(x.object({description:x.string(),userId:x.string(),title:x.string(),id:x.string(),createdAt:x.date(),updatedAt:x.date(),certificationUrl:x.url(),user:x.object({id:x.uuid(),name:x.string(),createdAt:x.date(),updatedAt:x.date(),avatarUrl:x.string().nullable(),emailAddress:x.email(),orcid:x.string().nullable(),phone:x.string().nullable(),lattesUrl:x.url().nullable(),role:x.enum(Vy.UserRole)})}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:x.object({errors:x.record(x.string(),x.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:x.object({message:x.string()})}}}}},lp={method:"get",path:"/certifications/{certification_id}",tags:["Certifications"],summary:"Find certification by ID",security:[{bearerAuth:[]}],request:{params:ks},responses:{200:{description:"Certification details retrieved successfully",summary:"Certification Retrieved",content:{"application/json":{schema:x.object({description:x.string(),userId:x.string(),title:x.string(),id:x.string(),createdAt:x.date(),updatedAt:x.date(),certificationUrl:x.url()}).nullable()}}},400:{description:"Invalid certification ID format",summary:"Validation Error",content:{"application/json":{schema:x.object({errors:x.record(x.string(),x.string())})}}},404:{description:"Certification not found with the provided ID",summary:"Certification Not Found",content:{"application/json":{schema:x.object({message:x.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:x.object({message:x.string()})}}}}},up={method:"put",path:"/certifications/{certification_id}",tags:["Certifications"],summary:"Update certification",security:[{bearerAuth:[]}],request:{params:eo.pick({id:!0}).transform(()=>({certification_id:""})),body:{content:{"multipart/form-data":{schema:eo.omit({id:!0})}}}},responses:{204:{description:"Certification updated successfully",summary:"Certification Updated"},400:{description:"Invalid input data or file format",summary:"Validation Error",content:{"application/json":{schema:x.object({errors:x.record(x.string(),x.string())})}}},404:{description:"Certification not found with the provided ID",summary:"Certification Not Found",content:{"application/json":{schema:x.object({message:x.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:x.object({message:x.string()})}}}}},gp={method:"delete",path:"/certifications/{certification_id}",tags:["Certifications"],summary:"Delete certification",security:[{bearerAuth:[]}],request:{params:qs},responses:{204:{description:"Certification deleted successfully",summary:"Certification Deleted"},400:{description:"Invalid certification ID format",summary:"Validation Error",content:{"application/json":{schema:x.object({errors:x.record(x.string(),x.string())})}}},404:{description:"Certification not found with the provided ID",summary:"Certification Not Found",content:{"application/json":{schema:x.object({message:x.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:x.object({message:x.string()})}}}}};import y from"zod";import{extendZodWithOpenApi as Zy}from"@asteasolutions/zod-to-openapi";import Gs from"zod";Zy(Gs);var Ls=Gs.object({id:Gs.uuid()}),to=class{constructor(e,r){this.courseRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=Ls.parse({id:e.params.id}),i=await this.courseRepository.findById(t);if(!i)throw new p("O curso n\xE3o existe.");return i.imageUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.imageUrl}),await this.courseRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as Ky}from"@asteasolutions/zod-to-openapi";import _s from"zod";Ky(_s);var Ws=_s.object({id:_s.uuid()}),ro=class{constructor(e){this.courseRepository=e}async handle(e,r){try{let{id:t}=Ws.parse({id:e.params.id}),i=await this.courseRepository.findById(t);if(!i)throw new p("Curso n\xE3o encontrado.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as Jy}from"@asteasolutions/zod-to-openapi";import Je from"zod";var Yy=1,Xy=6;Jy(Je);var zs=Je.object({page:Je.coerce.number().min(1).default(Yy),limit:Je.coerce.number().min(1).default(Xy),title:Je.string().optional(),description:Je.string().optional(),coordinator:Je.string().optional(),orderBy:Je.enum(["asc","desc"]).default("desc")}),oo=class{constructor(e){this.courseRepository=e}async handle(e,r){try{let{limit:t,page:i,...n}=zs.parse(e.query),s=i*t-t,[a,c]=await Promise.all([this.courseRepository.find({pagination:{offset:s,limit:t},filter:n}),this.courseRepository.count({filter:n})]),d=Math.max(Math.ceil(c/t),1);return r.status(200).json({page:i,totalPages:d,offset:s,limit:t,courses:a})}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as $y}from"@asteasolutions/zod-to-openapi";import ae from"zod";var yp=5,fp=1024,Qy=fp*fp,eh=yp*Qy;$y(ae);var Hs=ae.object({id:ae.uuid(),title:ae.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio.").optional(),coordinatorId:ae.string().uuid("Coordenador \xE9 obrigat\xF3rio.").optional(),email:ae.string().email("E-mail deve ser v\xE1lido.").optional(),location:ae.string().min(1,"Localiza\xE7\xE3o \xE9 obrigat\xF3ria.").optional(),scheduledAt:ae.coerce.date().optional(),registrationLink:ae.url("URL de inscri\xE7\xE3o deve ser v\xE1lida").optional(),description:ae.string().optional(),instructorIds:ae.transform(o=>typeof o=="string"?o.split(","):o).pipe(ae.array(ae.uuid())).optional(),image:ae.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=eh,`A imagem deve ter no m\xE1ximo ${yp}MB.`).optional()}),io=class{constructor(e,r){this.courseRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,image:i,title:n,coordinatorId:s,email:a,location:c,scheduledAt:d,registrationLink:R,description:A,instructorIds:G}=Hs.parse({id:e.params.id,...e.body,image:e.file}),J=await this.courseRepository.findById(t);if(!J)throw new p("O curso n\xE3o existe.");let Q=J.imageUrl;if(i&&(Q=await this.firebaseStorageService.uploadFile({file:i,id:t,folder:j.COURSE})),!Q)throw new m("URL da imagem \xE9 obrigat\xF3rio");return await this.courseRepository.update({id:t,title:n,coordinatorId:s,email:a,location:c,scheduledAt:d,registrationLink:R,description:A,imageUrl:Q,instructorIds:G}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var hp={method:"post",path:"/courses",tags:["Courses"],summary:"Create course",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:y.object({title:y.string().min(1).openapi({description:"T\xEDtulo do curso"}),coordinator:y.string().min(1).openapi({description:"Nome do coordenador"}),email:y.string().email().openapi({description:"E-mail de contato"}),location:y.string().min(1).openapi({description:"Localiza\xE7\xE3o do curso"}),scheduledAt:y.string().openapi({description:"Data e hora agendada (ISO 8601)",example:"2024-01-01T10:00:00Z"}),registrationLink:y.string().url().optional().openapi({description:"Link de inscri\xE7\xE3o"}),description:y.string().optional().openapi({description:"Descri\xE7\xE3o do curso"}),instructorIds:y.string().openapi({description:"IDs dos instrutores separados por v\xEDrgula",example:"uuid1,uuid2,uuid3"}),image:y.string().optional().openapi({description:"Imagem do curso (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{201:{description:"Course created successfully",summary:"Course Created"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:y.object({errors:y.record(y.string(),y.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:y.object({message:y.string()})}}}}},Rp={method:"get",path:"/courses",tags:["Courses"],summary:"List courses",security:[{bearerAuth:[]}],request:{query:zs},responses:{200:{description:"Paginated list of courses with instructor information retrieved successfully",summary:"Courses Retrieved",content:{"application/json":{schema:y.object({page:y.number(),totalPages:y.number(),offset:y.number(),limit:y.number(),courses:y.array(y.object({id:y.string(),title:y.string(),imageUrl:y.string().nullable(),coordinator:y.string(),email:y.string(),scheduledAt:y.date(),location:y.string(),registrationLink:y.string().nullable(),description:y.string().nullable(),createdAt:y.date(),updatedAt:y.date(),instructors:y.array(y.object({id:y.uuid(),name:y.string(),emailAddress:y.email(),avatarUrl:y.string().nullable(),createdAt:y.date(),updatedAt:y.date()}))}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:y.object({errors:y.record(y.string(),y.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:y.object({message:y.string()})}}}}},Ip={method:"get",path:"/courses/{id}",tags:["Courses"],summary:"Find course by ID",security:[{bearerAuth:[]}],request:{params:Ws},responses:{200:{description:"Course details retrieved successfully",summary:"Course Retrieved",content:{"application/json":{schema:y.object({id:y.string(),title:y.string(),imageUrl:y.string().nullable(),coordinator:y.string(),email:y.string(),scheduledAt:y.date(),location:y.string(),registrationLink:y.string().nullable(),description:y.string().nullable(),createdAt:y.date(),updatedAt:y.date(),instructors:y.array(y.object({id:y.uuid(),name:y.string(),emailAddress:y.email(),avatarUrl:y.string().nullable(),createdAt:y.date(),updatedAt:y.date()}))}).nullable()}}},400:{description:"Invalid course ID format",summary:"Validation Error",content:{"application/json":{schema:y.object({errors:y.record(y.string(),y.string())})}}},404:{description:"Course not found with the provided ID",summary:"Course Not Found",content:{"application/json":{schema:y.object({message:y.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:y.object({message:y.string()})}}}}},bp={method:"put",path:"/courses/{id}",tags:["Courses"],summary:"Update course",security:[{bearerAuth:[]}],request:{params:Hs.pick({id:!0}),body:{content:{"multipart/form-data":{schema:y.object({title:y.string().min(1).optional().openapi({description:"T\xEDtulo do curso"}),coordinator:y.string().min(1).optional().openapi({description:"Nome do coordenador"}),email:y.string().email().optional().openapi({description:"E-mail de contato"}),location:y.string().min(1).optional().openapi({description:"Localiza\xE7\xE3o do curso"}),scheduledAt:y.string().optional().openapi({description:"Data e hora agendada (ISO 8601)",example:"2024-01-01T10:00:00Z"}),registrationLink:y.string().url().optional().openapi({description:"Link de inscri\xE7\xE3o"}),description:y.string().optional().openapi({description:"Descri\xE7\xE3o do curso"}),instructorIds:y.string().optional().openapi({description:"IDs dos instrutores separados por v\xEDrgula",example:"uuid1,uuid2,uuid3"}),image:y.string().optional().openapi({description:"Imagem do curso (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{200:{description:"Course updated successfully",summary:"Course Updated"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:y.object({errors:y.record(y.string(),y.string())})}}},404:{description:"Course not found with the provided ID",summary:"Course Not Found",content:{"application/json":{schema:y.object({message:y.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:y.object({message:y.string()})}}}}},Cp={method:"delete",path:"/courses/{id}",tags:["Courses"],summary:"Delete course",security:[{bearerAuth:[]}],request:{params:Ls},responses:{200:{description:"Course deleted successfully",summary:"Course Deleted"},400:{description:"Invalid course ID format",summary:"Validation Error",content:{"application/json":{schema:y.object({errors:y.record(y.string(),y.string())})}}},404:{description:"Course not found with the provided ID",summary:"Course Not Found",content:{"application/json":{schema:y.object({message:y.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:y.object({message:y.string()})}}}}};import{$Enums as Xs}from"@prisma/client";import b from"zod";import{extendZodWithOpenApi as th}from"@asteasolutions/zod-to-openapi";import be from"zod";th(be);var Vs=be.object({code:be.string(),title:be.string(),description:be.string().optional(),notes:be.string().optional(),leaderId:be.uuid(),deputyLeaderId:be.uuid(),secretaryId:be.uuid(),memberIds:be.array(be.uuid())}),no=class{constructor(e){this.etpRepository=e}async handle(e,r){try{let{code:t,title:i,description:n,notes:s,leaderId:a,deputyLeaderId:c,secretaryId:d,memberIds:R}=Vs.parse(e.body);if(await this.etpRepository.findByCode(t))throw new re("J\xE1 existe um ETP cadastrado com este c\xF3digo.");return await this.etpRepository.create({code:t,title:i,description:n,notes:s,leaderId:a,deputyLeaderId:c,secretaryId:d,memberIds:R}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as rh}from"@asteasolutions/zod-to-openapi";import Zs from"zod";rh(Zs);var Ks=Zs.object({id:Zs.uuid()}),so=class{constructor(e){this.etpRepository=e}async handle(e,r){try{let{id:t}=Ks.parse({id:e.params.id});if(!await this.etpRepository.findById(t))throw new p("O ETP n\xE3o existe.");return await this.etpRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as oh}from"@asteasolutions/zod-to-openapi";import Js from"zod";oh(Js);var mo=Js.object({id:Js.uuid()}),ao=class{constructor(e){this.etpRepository=e}async handle(e,r){try{let{id:t}=mo.parse({id:e.params.id}),i=await this.etpRepository.findById(t);if(!i)throw new p("O ETP n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as ih}from"@asteasolutions/zod-to-openapi";import fe from"zod";ih(fe);var Ys=fe.object({id:fe.uuid(),code:fe.string().optional(),title:fe.string().optional(),description:fe.string().optional(),notes:fe.string().optional(),leaderId:fe.uuid().optional(),deputyLeaderId:fe.uuid().optional(),secretaryId:fe.uuid().optional(),memberIds:fe.array(fe.uuid()).optional()}),co=class{constructor(e){this.etpRepository=e}async handle(e,r){try{let{id:t,code:i,title:n,description:s,notes:a,leaderId:c,deputyLeaderId:d,secretaryId:R,memberIds:A}=Ys.parse({id:e.params.id,...e.body});if(!await this.etpRepository.findById(t))throw new p("O ETP n\xE3o existe.");if(i){let J=await this.etpRepository.findByCode(i);if(J&&J.id!==t)throw new re("J\xE1 existe um ETP com este c\xF3digo.")}return await this.etpRepository.update({id:t,code:i,title:n,description:s,notes:a,leaderId:c,deputyLeaderId:d,secretaryId:R,memberIds:A}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var nh=1,sh=9,po=b.object({id:b.uuid(),registrationNumber:b.string(),mainEtps:b.string().nullable(),formations:b.string().nullable(),degrees:b.array(b.enum(Xs.Degree)),occupations:b.string(),seniority:b.enum(Xs.Seniority),institutions:b.string(),biography:b.string().nullable(),createdAt:b.date(),updatedAt:b.date(),user:b.object({id:b.uuid(),name:b.string(),emailAddress:b.string(),avatarUrl:b.string().nullable(),orcid:b.string().nullable(),phone:b.string().nullable(),lattesUrl:b.string().nullable(),role:b.enum(Xs.UserRole)})}),Sp=b.object({id:b.uuid(),code:b.string(),title:b.string(),description:b.string().nullable(),notes:b.string().nullable(),createdAt:b.date(),updatedAt:b.date(),leader:b.object({id:b.uuid(),researcher:po}).nullable(),deputyLeader:b.object({id:b.uuid(),researcher:po}).nullable(),secretary:b.object({id:b.uuid(),researcher:po}).nullable(),members:b.array(po)}),wp={method:"post",path:"/etp",tags:["ETPs"],summary:"Create a new ETP with single leader, deputy leader, secretary and multiple members",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:Vs}}}},responses:{201:{description:"ETP created successfully",summary:"ETP Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:b.object({errors:b.record(b.string(),b.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:b.object({message:b.string()})}}},409:{description:"ETP with this code already exists",summary:"Conflict",content:{"application/json":{schema:b.object({message:b.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:b.object({message:b.string()})}}}}},vp={method:"get",path:"/etp",tags:["ETPs"],summary:"List all ETPs with pagination and filters",request:{query:b.object({page:b.coerce.number().min(1).default(nh).optional(),limit:b.coerce.number().min(1).default(sh).optional(),code:b.string().optional(),title:b.string().optional(),description:b.string().optional(),notes:b.string().optional(),orderBy:b.enum(["asc","desc"]).optional()})},responses:{200:{description:"List of ETPs retrieved successfully with pagination",summary:"ETPs Retrieved",content:{"application/json":{schema:b.object({page:b.number(),totalPages:b.number(),offset:b.number(),limit:b.number(),etps:b.array(Sp)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:b.object({message:b.string()})}}}}},Ep={method:"get",path:"/etp/{id}",tags:["ETPs"],summary:"Find ETP by ID",request:{params:mo},responses:{200:{description:"ETP details retrieved successfully",summary:"ETP Retrieved",content:{"application/json":{schema:Sp}}},400:{description:"Invalid ETP ID format",summary:"Validation Error",content:{"application/json":{schema:b.object({errors:b.record(b.string(),b.string())})}}},404:{description:"ETP not found with the provided ID",summary:"ETP Not Found",content:{"application/json":{schema:b.object({message:b.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:b.object({message:b.string()})}}}}},jp={method:"put",path:"/etp/{id}",tags:["ETPs"],summary:"Update ETP and manage user relationships (single leader, deputy leader, secretary, multiple members)",security:[{bearerAuth:[]}],request:{params:mo,body:{content:{"application/json":{schema:Ys.omit({id:!0})}}}},responses:{200:{description:"ETP updated successfully",summary:"ETP Updated"},400:{description:"Invalid input data or ETP ID format",summary:"Validation Error",content:{"application/json":{schema:b.object({errors:b.record(b.string(),b.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:b.object({message:b.string()})}}},404:{description:"ETP not found with the provided ID",summary:"ETP Not Found",content:{"application/json":{schema:b.object({message:b.string()})}}},409:{description:"ETP with this code already exists",summary:"Conflict",content:{"application/json":{schema:b.object({message:b.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:b.object({message:b.string()})}}}}},xp={method:"delete",path:"/etp/{id}",tags:["ETPs"],summary:"Delete ETP",security:[{bearerAuth:[]}],request:{params:Ks},responses:{200:{description:"ETP deleted successfully",summary:"ETP Deleted"},400:{description:"Invalid ETP ID format",summary:"Validation Error",content:{"application/json":{schema:b.object({errors:b.record(b.string(),b.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:b.object({message:b.string()})}}},404:{description:"ETP not found with the provided ID",summary:"ETP Not Found",content:{"application/json":{schema:b.object({message:b.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:b.object({message:b.string()})}}}}};import{EventFormat as vh,EventStatus as Eh}from"@prisma/client";import U from"zod";import{extendZodWithOpenApi as ah}from"@asteasolutions/zod-to-openapi";import{EventFormat as lo,EventStatus as $s}from"@prisma/client";import ye from"zod";var mh=5,Pp=1024,ch=Pp*Pp,ph=mh*ch;ah(ye);var Qs=ye.object({title:ye.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio"),description:ye.string().optional(),startDate:ye.coerce.date(),endDate:ye.coerce.date(),location:ye.string().optional(),format:ye.enum(lo).default(lo.ONLINE),eventLink:ye.string().url("Link do evento deve ser uma URL v\xE1lida").optional().or(ye.literal("")),status:ye.enum($s).default($s.PENDING),image:ye.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=ph,"A imagem deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.")}).refine(o=>o.format===lo.ONLINE?!!o.eventLink:o.format===lo.IN_PERSON?!!o.location:!0,{message:"Eventos online devem ter link e eventos presenciais devem ter localiza\xE7\xE3o",path:["format"]}),uo=class{constructor(e,r){this.eventRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{title:t,description:i,startDate:n,endDate:s,location:a,format:c,eventLink:d,status:R,image:A}=Qs.parse({...e.body,image:e.file}),G=await this.eventRepository.create({title:t,description:i,startDate:n,endDate:s,location:a||void 0,format:c,eventLink:d||void 0,status:R??$s.PENDING}),J=await this.firebaseStorageService.uploadFile({file:A,folder:j.EVENT,id:G.id});return await this.eventRepository.update({id:G.id,imageUrl:J}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as dh}from"@asteasolutions/zod-to-openapi";import ea from"zod";dh(ea);var ta=ea.object({id:ea.uuid()}),go=class{constructor(e){this.eventRepository=e}async handle(e,r){try{let{id:t}=ta.parse({id:e.params.id});if(!await this.eventRepository.findById(t))throw new p("O evento n\xE3o existe.");return await this.eventRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as lh}from"@asteasolutions/zod-to-openapi";import ra from"zod";lh(ra);var yo=ra.object({id:ra.uuid()}),fo=class{constructor(e){this.eventRepository=e}async handle(e,r){try{let{id:t}=yo.parse({id:e.params.id}),i=await this.eventRepository.findById(t);if(!i)throw new p("O evento n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as uh}from"@asteasolutions/zod-to-openapi";import{EventFormat as gh,EventStatus as fh}from"@prisma/client";import Ye from"zod";var yh=1,hh=10;uh(Ye);var oa=Ye.object({page:Ye.coerce.number().min(1).default(yh),limit:Ye.coerce.number().min(1).default(hh),title:Ye.string().optional(),status:Ye.nativeEnum(fh).optional(),format:Ye.nativeEnum(gh).optional(),orderBy:Ye.enum(["asc","desc"]).optional()}),ho=class{constructor(e){this.eventRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=oa.parse(e.query),s=i*t-i,[a,c]=await Promise.all([this.eventRepository.find({pagination:{offset:s,limit:i},filter:n}),this.eventRepository.count({filter:n})]),d=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:d,offset:s,limit:i,events:a})}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as Rh}from"@asteasolutions/zod-to-openapi";import{EventFormat as Ih,EventStatus as bh}from"@prisma/client";import ce from"zod";var Ch=5,Mp=1024,Sh=Mp*Mp,wh=Ch*Sh;Rh(ce);var ia=ce.object({id:ce.uuid(),title:ce.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio").optional(),description:ce.string().optional(),startDate:ce.coerce.date().optional(),endDate:ce.coerce.date().optional(),location:ce.string().optional(),format:ce.nativeEnum(Ih).optional(),eventLink:ce.string().url("Link do evento deve ser uma URL v\xE1lida").optional().or(ce.literal("")),status:ce.nativeEnum(bh).optional(),image:ce.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=wh,"A imagem deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.").optional()}),Ro=class{constructor(e,r){this.eventRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,title:i,description:n,startDate:s,endDate:a,location:c,format:d,eventLink:R,status:A,image:G}=ia.parse({id:e.params.id,...e.body,image:e.file});if(!await this.eventRepository.findById(t))throw new p("O evento n\xE3o existe.");let Q;return G&&(Q=await this.firebaseStorageService.uploadFile({file:G,folder:j.EVENT,id:t})),await this.eventRepository.update({id:t,title:i,description:n,startDate:s,endDate:a,location:c||void 0,format:d,eventLink:R||void 0,status:A,imageUrl:Q}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var Ap=U.object({id:U.uuid(),title:U.string(),description:U.string().nullable(),imageUrl:U.string().nullable(),startDate:U.date(),endDate:U.date(),location:U.string().nullable(),status:U.nativeEnum(Eh),format:U.nativeEnum(vh),eventLink:U.string().nullable(),createdAt:U.date(),updatedAt:U.date()}),Tp={method:"post",path:"/event",tags:["Events"],summary:"Create a new event",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:Qs}}}},responses:{201:{description:"Event created successfully",summary:"Event Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:U.object({errors:U.record(U.string(),U.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:U.object({message:U.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:U.object({message:U.string()})}}}}},Fp={method:"get",path:"/event",tags:["Events"],summary:"List all events with pagination and filters",request:{query:oa},responses:{200:{description:"List of events retrieved successfully with pagination",summary:"Events Retrieved",content:{"application/json":{schema:U.object({page:U.number(),totalPages:U.number(),offset:U.number(),limit:U.number(),events:U.array(Ap)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:U.object({errors:U.record(U.string(),U.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:U.object({message:U.string()})}}}}},Bp={method:"get",path:"/event/{id}",tags:["Events"],summary:"Find event by ID",request:{params:yo},responses:{200:{description:"Event details retrieved successfully",summary:"Event Retrieved",content:{"application/json":{schema:Ap}}},400:{description:"Invalid event ID format",summary:"Validation Error",content:{"application/json":{schema:U.object({errors:U.record(U.string(),U.string())})}}},404:{description:"Event not found with the provided ID",summary:"Event Not Found",content:{"application/json":{schema:U.object({message:U.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:U.object({message:U.string()})}}}}},Dp={method:"put",path:"/event/{id}",tags:["Events"],summary:"Update event",security:[{bearerAuth:[]}],request:{params:yo,body:{content:{"multipart/form-data":{schema:ia.omit({id:!0})}}}},responses:{200:{description:"Event updated successfully",summary:"Event Updated"},400:{description:"Invalid input data or event ID format",summary:"Validation Error",content:{"application/json":{schema:U.object({errors:U.record(U.string(),U.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:U.object({message:U.string()})}}},404:{description:"Event not found with the provided ID",summary:"Event Not Found",content:{"application/json":{schema:U.object({message:U.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:U.object({message:U.string()})}}}}},Up={method:"delete",path:"/event/{id}",tags:["Events"],summary:"Delete event",security:[{bearerAuth:[]}],request:{params:ta},responses:{200:{description:"Event deleted successfully",summary:"Event Deleted"},400:{description:"Invalid event ID format",summary:"Validation Error",content:{"application/json":{schema:U.object({errors:U.record(U.string(),U.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:U.object({message:U.string()})}}},404:{description:"Event not found with the provided ID",summary:"Event Not Found",content:{"application/json":{schema:U.object({message:U.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:U.object({message:U.string()})}}}}};import{InMemoriamRole as _h}from"@prisma/client";import M from"zod";import{extendZodWithOpenApi as jh}from"@asteasolutions/zod-to-openapi";import{InMemoriamRole as xh}from"@prisma/client";import Xe from"zod";var Op=2,qp=1024,Ph=qp*qp,Mh=Op*Ph;jh(Xe);var na=Xe.object({name:Xe.string().min(1,"Nome \xE9 obrigat\xF3rio"),birthDate:Xe.coerce.date(),deathDate:Xe.coerce.date(),biography:Xe.string().optional(),photo:Xe.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=Mh,`A imagem deve ter no m\xE1ximo ${Op}MB.`).optional(),role:Xe.enum(xh)}).refine(o=>o.deathDate>o.birthDate,{message:"Data de falecimento deve ser posterior \xE0 data de nascimento",path:["deathDate"]}),Io=class{constructor(e,r){this.inMemoriamRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{name:t,birthDate:i,deathDate:n,biography:s,role:a,photo:c}=na.parse({...e.body,photo:e.file}),d=await this.inMemoriamRepository.create({name:t,birthDate:i,deathDate:n,biography:s??void 0,role:a}),R;return c&&(R=await this.firebaseStorageService.uploadFile({file:c,id:d.id,folder:j.IN_MEMORIAM}),await this.inMemoriamRepository.update({id:d.id,photoUrl:R})),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as Ah}from"@asteasolutions/zod-to-openapi";import sa from"zod";Ah(sa);var aa=sa.object({id:sa.uuid()}),bo=class{constructor(e,r){this.inMemoriamRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=aa.parse({id:e.params.id}),i=await this.inMemoriamRepository.findById(t);if(!i)throw new p("O in memoriam n\xE3o existe.");return i.photoUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.photoUrl}),await this.inMemoriamRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as Th}from"@asteasolutions/zod-to-openapi";import ma from"zod";Th(ma);var So=ma.object({id:ma.uuid()}),Co=class{constructor(e){this.inMemoriamRepository=e}async handle(e,r){try{let{id:t}=So.parse({id:e.params.id}),i=await this.inMemoriamRepository.findById(t);if(!i)throw new p("O in memoriam n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as Fh}from"@asteasolutions/zod-to-openapi";import{InMemoriamRole as Bh}from"@prisma/client";import ca from"zod";Fh(ca);var pa=ca.object({role:ca.enum(Bh)}),wo=class{constructor(e){this.inMemoriamRepository=e}async handle(e,r){try{let{role:t}=pa.parse({role:e.params.role}),i=await this.inMemoriamRepository.findByRole(t);return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as Dh}from"@asteasolutions/zod-to-openapi";import{InMemoriamRole as Uh}from"@prisma/client";import $e from"zod";var qh=1,Oh=9;Dh($e);var da=$e.object({page:$e.coerce.number().min(1).default(qh),limit:$e.coerce.number().min(1).default(Oh),name:$e.string().optional(),biography:$e.string().optional(),role:$e.enum(Uh).optional(),orderBy:$e.enum(["asc","desc"]).default("desc")}),vo=class{constructor(e){this.inMemoriamRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=da.parse(e.query),s=i*t-i,[a,c]=await Promise.all([this.inMemoriamRepository.find({pagination:{offset:s,limit:i},filter:n}),this.inMemoriamRepository.count({filter:n})]),d=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:d,offset:s,limit:i,inMemoriam:a})}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as kh}from"@asteasolutions/zod-to-openapi";import{InMemoriamRole as Nh}from"@prisma/client";import De from"zod";var Np=2,kp=1024,Gh=kp*kp,Lh=Np*Gh;kh(De);var la=De.object({id:De.uuid(),name:De.string().min(1,"Nome \xE9 obrigat\xF3rio").optional(),birthDate:De.coerce.date().optional(),deathDate:De.coerce.date().optional(),biography:De.string().optional(),photo:De.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=Lh,`A imagem deve ter no m\xE1ximo ${Np}MB.`).optional(),role:De.enum(Nh).optional()}).refine(o=>o.birthDate&&o.deathDate?o.deathDate>o.birthDate:!0,{message:"Data de falecimento deve ser posterior \xE0 data de nascimento",path:["deathDate"]}),Eo=class{constructor(e,r){this.inMemoriamRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,name:i,birthDate:n,deathDate:s,biography:a,photo:c,role:d}=la.parse({id:e.params.id,...e.body,photo:e.file}),R=await this.inMemoriamRepository.findById(t);if(!R)throw new p("O registro in memoriam n\xE3o existe.");let A=R.photoUrl;return c&&(A=await this.firebaseStorageService.uploadFile({file:c,id:t,folder:j.IN_MEMORIAM})),await this.inMemoriamRepository.update({id:t,name:i,birthDate:n,deathDate:s,biography:a,photoUrl:A??void 0,role:d}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var ua=M.object({id:M.uuid(),name:M.string(),birthDate:M.date(),deathDate:M.date(),biography:M.string().nullable(),photoUrl:M.string().nullable(),role:M.enum(_h),createdAt:M.date(),updatedAt:M.date()}),Gp={method:"post",path:"/in-memoriam",tags:["In Memoriam"],summary:"Create a new in memoriam record with optional photo upload",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:na}}}},responses:{201:{description:"In memoriam record created successfully",summary:"In Memoriam Created"},400:{description:"Invalid input data, missing required fields, or invalid photo format/size",summary:"Validation Error",content:{"application/json":{schema:M.object({errors:M.record(M.string(),M.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:M.object({message:M.string()})}}},409:{description:"In memoriam record with this name already exists",summary:"Conflict",content:{"application/json":{schema:M.object({message:M.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:M.object({message:M.string()})}}}}},Lp={method:"get",path:"/in-memoriam",tags:["In Memoriam"],summary:"List all in memoriam records with pagination and filters",request:{query:da},responses:{200:{description:"List of in memoriam records retrieved successfully with pagination",summary:"In Memoriam Records Retrieved",content:{"application/json":{schema:M.object({page:M.number(),totalPages:M.number(),offset:M.number(),limit:M.number(),inMemoriam:M.array(ua)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:M.object({errors:M.record(M.string(),M.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:M.object({message:M.string()})}}}}},_p={method:"get",path:"/in-memoriam/{id}",tags:["In Memoriam"],summary:"Find in memoriam record by ID",request:{params:So},responses:{200:{description:"In memoriam record details retrieved successfully",summary:"In Memoriam Record Retrieved",content:{"application/json":{schema:ua}}},400:{description:"Invalid in memoriam record ID format",summary:"Validation Error",content:{"application/json":{schema:M.object({errors:M.record(M.string(),M.string())})}}},404:{description:"In memoriam record not found with the provided ID",summary:"In Memoriam Record Not Found",content:{"application/json":{schema:M.object({message:M.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:M.object({message:M.string()})}}}}},Wp={method:"put",path:"/in-memoriam/{id}",tags:["In Memoriam"],summary:"Update in memoriam record with optional photo upload",security:[{bearerAuth:[]}],request:{params:So,body:{content:{"multipart/form-data":{schema:la.omit({id:!0})}}}},responses:{200:{description:"In memoriam record updated successfully",summary:"In Memoriam Record Updated"},400:{description:"Invalid input data, in memoriam record ID format, or invalid photo format/size",summary:"Validation Error",content:{"application/json":{schema:M.object({errors:M.record(M.string(),M.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:M.object({message:M.string()})}}},404:{description:"In memoriam record not found with the provided ID",summary:"In Memoriam Record Not Found",content:{"application/json":{schema:M.object({message:M.string()})}}},409:{description:"In memoriam record with this name already exists",summary:"Conflict",content:{"application/json":{schema:M.object({message:M.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:M.object({message:M.string()})}}}}},zp={method:"delete",path:"/in-memoriam/{id}",tags:["In Memoriam"],summary:"Delete in memoriam record",security:[{bearerAuth:[]}],request:{params:aa},responses:{200:{description:"In memoriam record deleted successfully",summary:"In Memoriam Record Deleted"},400:{description:"Invalid in memoriam record ID format",summary:"Validation Error",content:{"application/json":{schema:M.object({errors:M.record(M.string(),M.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:M.object({message:M.string()})}}},404:{description:"In memoriam record not found with the provided ID",summary:"In Memoriam Record Not Found",content:{"application/json":{schema:M.object({message:M.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:M.object({message:M.string()})}}}}},IP={method:"get",path:"/in-memoriam/role/{role}",tags:["In Memoriam"],summary:"Find in memoriam records by role",request:{params:pa},responses:{200:{description:"In memoriam records retrieved successfully by role",summary:"In Memoriam Records Retrieved by Role",content:{"application/json":{schema:M.array(ua)}}},400:{description:"Invalid role parameter provided",summary:"Validation Error",content:{"application/json":{schema:M.object({errors:M.record(M.string(),M.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:M.object({message:M.string()})}}}}};import z from"zod";import{extendZodWithOpenApi as Wh}from"@asteasolutions/zod-to-openapi";import gr from"zod";var Vp=2,Hp=1024,zh=Hp*Hp,Hh=Vp*zh;Wh(gr);var ga=gr.object({image:gr.any().refine(o=>o==null||typeof o!="object"||typeof o.size!="number"?!1:o.size<=Hh,`A imagem deve ter no m\xE1ximo ${Vp}MB.`),caption:gr.string().optional(),congressId:gr.uuid()}),jo=class{constructor(e,r,t){this.internationalScientificCongressGalleryRepository=e;this.internationalScientificCongressRepository=r;this.firebaseStorageService=t}async handle(e,r){try{let{image:t,caption:i,congressId:n}=ga.parse({...e.body,...e.params,image:e.file});if(!await this.internationalScientificCongressRepository.findById(n))throw new p("O congresso n\xE3o existe.");let a=await this.internationalScientificCongressGalleryRepository.create({imageUrl:"",caption:i||void 0,congressId:n}),c=await this.firebaseStorageService.uploadFile({file:t,id:a.id,folder:j.INTERNATIONAL_SCIENTIFIC_CONGRESS_GALLERY});return await this.internationalScientificCongressGalleryRepository.update({id:a.id,imageUrl:c}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as Vh}from"@asteasolutions/zod-to-openapi";import fa from"zod";Vh(fa);var Po=fa.object({id:fa.uuid()}),xo=class{constructor(e){this.internationalScientificCongressGalleryRepository=e}async handle(e,r){try{let{id:t}=Po.parse({id:e.params.id});if(!await this.internationalScientificCongressGalleryRepository.findById(t))throw new p("A imagem da galeria n\xE3o existe.");return await this.internationalScientificCongressGalleryRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as Zh}from"@asteasolutions/zod-to-openapi";import Lt from"zod";var Kh=1,Jh=9;Zh(Lt);var ya=Lt.object({congressId:Lt.uuid(),page:Lt.coerce.number().min(1).default(Kh),limit:Lt.coerce.number().min(1).default(Jh),caption:Lt.string().optional()}),Mo=class{constructor(e){this.internationalScientificCongressGalleryRepository=e}async handle(e,r){try{let{congressId:t,page:i,limit:n,...s}=ya.parse({congressId:e.params.congressId,...e.query}),a=n*i-n,[c,d]=await Promise.all([this.internationalScientificCongressGalleryRepository.findByCongressId({pagination:{offset:a,limit:n},filter:{congressId:t,...s}}),this.internationalScientificCongressGalleryRepository.count({filter:{congressId:t,caption:s.caption}})]),R=Math.max(Math.ceil(d/n),1);return r.status(200).json({page:i,totalPages:R,offset:a,limit:n,galleryImages:c})}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as Yh}from"@asteasolutions/zod-to-openapi";import fr from"zod";var Kp=2,Zp=1024,Xh=Zp*Zp,$h=Kp*Xh;Yh(fr);var ha=fr.object({id:fr.uuid(),image:fr.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=$h,`A imagem deve ter no m\xE1ximo ${Kp}MB.`).optional(),caption:fr.string().optional()}),Ao=class{constructor(e,r){this.internationalScientificCongressGalleryRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,image:i,caption:n}=ha.parse({id:e.params.id,...e.body,image:e.file}),s=await this.internationalScientificCongressGalleryRepository.findById(t);if(!s)throw new p("A imagem da galeria n\xE3o existe.");let a=s.imageUrl;return i&&(a=await this.firebaseStorageService.uploadFile({file:i,id:t,folder:j.INTERNATIONAL_SCIENTIFIC_CONGRESS_GALLERY})),await this.internationalScientificCongressGalleryRepository.update({id:t,imageUrl:a??void 0,caption:n||void 0}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var Qh=z.object({id:z.uuid(),imageUrl:z.string(),caption:z.string().nullable(),congressId:z.uuid()}),Jp={method:"post",path:"/international-scientific-congress/{congressId}/gallery",tags:["International Scientific Congresses"],summary:"Create a new congress gallery image",security:[{bearerAuth:[]}],request:{params:z.object({congressId:z.uuid()}),body:{content:{"application/json":{schema:ga.omit({congressId:!0})}}}},responses:{201:{description:"Congress gallery image created successfully",summary:"Congress Gallery Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:z.object({errors:z.record(z.string(),z.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:z.object({message:z.string()})}}},404:{description:"Congress not found with the provided ID",summary:"Congress Not Found",content:{"application/json":{schema:z.object({message:z.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:z.object({message:z.string()})}}}}},Yp={method:"get",path:"/international-scientific-congress/{congressId}/gallery",tags:["International Scientific Congresses"],summary:"Find congress gallery images by congress ID",request:{params:ya},responses:{200:{description:"Congress gallery images retrieved successfully by congress ID",summary:"Congress Galleries Retrieved",content:{"application/json":{schema:z.array(Qh)}}},400:{description:"Invalid congress ID parameter provided",summary:"Validation Error",content:{"application/json":{schema:z.object({errors:z.record(z.string(),z.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:z.object({message:z.string()})}}}}},Xp={method:"put",path:"/international-scientific-congress/gallery/{id}",tags:["International Scientific Congresses"],summary:"Update congress gallery image",security:[{bearerAuth:[]}],request:{params:Po,body:{content:{"application/json":{schema:ha.omit({id:!0})}}}},responses:{200:{description:"Congress gallery image updated successfully",summary:"Congress Gallery Updated"},400:{description:"Invalid input data or gallery ID format",summary:"Validation Error",content:{"application/json":{schema:z.object({errors:z.record(z.string(),z.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:z.object({message:z.string()})}}},404:{description:"Congress gallery image not found with the provided ID",summary:"Congress Gallery Not Found",content:{"application/json":{schema:z.object({message:z.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:z.object({message:z.string()})}}}}},$p={method:"delete",path:"/international-scientific-congress/gallery/{id}",tags:["International Scientific Congresses"],summary:"Delete congress gallery image",security:[{bearerAuth:[]}],request:{params:Po},responses:{200:{description:"Congress gallery image deleted successfully",summary:"Congress Gallery Deleted"},400:{description:"Invalid gallery ID format",summary:"Validation Error",content:{"application/json":{schema:z.object({errors:z.record(z.string(),z.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:z.object({message:z.string()})}}},404:{description:"Congress gallery image not found with the provided ID",summary:"Congress Gallery Not Found",content:{"application/json":{schema:z.object({message:z.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:z.object({message:z.string()})}}}}};import H from"zod";import{extendZodWithOpenApi as eR}from"@asteasolutions/zod-to-openapi";import yr from"zod";var ed=2,Qp=1024,tR=Qp*Qp,rR=ed*tR;eR(yr);var Ra=yr.object({name:yr.string().min(1,"Nome \xE9 obrigat\xF3rio"),logo:yr.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=rR,`A imagem deve ter no m\xE1ximo ${ed}MB.`).optional(),congressId:yr.uuid()}),To=class{constructor(e,r,t){this.internationalScientificCongressPartnerRepository=e;this.internationalScientificCongressRepository=r;this.firebaseStorageService=t}async handle(e,r){try{let{name:t,logo:i,congressId:n}=Ra.parse({...e.body,...e.params,logo:e.file});if(!await this.internationalScientificCongressRepository.findById(n))throw new p("O congresso n\xE3o existe.");let a=await this.internationalScientificCongressPartnerRepository.create({name:t,congressId:n}),c;return i&&(c=await this.firebaseStorageService.uploadFile({file:i,id:a.id,folder:j.PARTNER}),await this.internationalScientificCongressPartnerRepository.update({id:a.id,logoUrl:c})),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as oR}from"@asteasolutions/zod-to-openapi";import Ia from"zod";oR(Ia);var Bo=Ia.object({id:Ia.uuid()}),Fo=class{constructor(e){this.internationalScientificCongressPartnerRepository=e}async handle(e,r){try{let{id:t}=Bo.parse({id:e.params.id});if(!await this.internationalScientificCongressPartnerRepository.findById(t))throw new p("O parceiro n\xE3o existe.");return await this.internationalScientificCongressPartnerRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as iR}from"@asteasolutions/zod-to-openapi";import _t from"zod";var nR=1,sR=9;iR(_t);var ba=_t.object({congressId:_t.uuid(),page:_t.coerce.number().min(1).optional(),limit:_t.coerce.number().min(1).optional(),name:_t.string().optional()}),Do=class{constructor(e){this.internationalScientificCongressPartnerRepository=e}async handle(e,r){try{let{congressId:t,page:i,limit:n,...s}=ba.parse({congressId:e.params.congressId,...e.query});if(i!==void 0&&n!==void 0){let c=i||nR,d=n||sR,R=d*c-d,[A,G]=await Promise.all([this.internationalScientificCongressPartnerRepository.findByCongressId({pagination:{offset:R,limit:d},filter:{congressId:t,...s}}),this.internationalScientificCongressPartnerRepository.count({filter:{congressId:t,name:s.name}})]),J=Math.max(Math.ceil(G/d),1);return r.status(200).json({page:c,totalPages:J,offset:R,limit:d,partners:A})}let a=await this.internationalScientificCongressPartnerRepository.findByCongressId({filter:{congressId:t,...s}});return r.status(200).json(a)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as aR}from"@asteasolutions/zod-to-openapi";import hr from"zod";var rd=2,td=1024,mR=td*td,cR=rd*mR;aR(hr);var Ca=hr.object({id:hr.uuid(),name:hr.string().min(1,"Nome \xE9 obrigat\xF3rio").optional(),logo:hr.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=cR,`A imagem deve ter no m\xE1ximo ${rd}MB.`).optional()}),Uo=class{constructor(e,r){this.internationalScientificCongressPartnerRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,name:i,logo:n}=Ca.parse({id:e.params.id,...e.body,logo:e.file}),s=await this.internationalScientificCongressPartnerRepository.findById(t);if(!s)throw new p("O parceiro n\xE3o existe.");let a=s.logoUrl;return n&&(a=await this.firebaseStorageService.uploadFile({file:n,id:t,folder:j.PARTNER})),await this.internationalScientificCongressPartnerRepository.update({id:t,name:i,logoUrl:a??void 0}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var pR=H.object({id:H.uuid(),name:H.string(),logoUrl:H.string().nullable(),congressId:H.uuid()}),od={method:"post",path:"/international-scientific-congress/{congressId}/partner",tags:["International Scientific Congresses"],summary:"Create a new congress partner",security:[{bearerAuth:[]}],request:{params:H.object({congressId:H.uuid()}),body:{content:{"application/json":{schema:Ra.omit({congressId:!0})}}}},responses:{201:{description:"Congress partner created successfully",summary:"Congress Partner Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:H.object({errors:H.record(H.string(),H.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:H.object({message:H.string()})}}},404:{description:"Congress not found with the provided ID",summary:"Congress Not Found",content:{"application/json":{schema:H.object({message:H.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:H.object({message:H.string()})}}}}},id={method:"get",path:"/international-scientific-congress/{congressId}/partner",tags:["International Scientific Congresses"],summary:"Find congress partners by congress ID",request:{params:ba},responses:{200:{description:"Congress partners retrieved successfully by congress ID",summary:"Congress Partners Retrieved",content:{"application/json":{schema:H.array(pR)}}},400:{description:"Invalid congress ID parameter provided",summary:"Validation Error",content:{"application/json":{schema:H.object({errors:H.record(H.string(),H.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:H.object({message:H.string()})}}}}},nd={method:"put",path:"/international-scientific-congress/partner/{id}",tags:["International Scientific Congresses"],summary:"Update congress partner",security:[{bearerAuth:[]}],request:{params:Bo,body:{content:{"application/json":{schema:Ca.omit({id:!0})}}}},responses:{200:{description:"Congress partner updated successfully",summary:"Congress Partner Updated"},400:{description:"Invalid input data or partner ID format",summary:"Validation Error",content:{"application/json":{schema:H.object({errors:H.record(H.string(),H.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:H.object({message:H.string()})}}},404:{description:"Congress partner not found with the provided ID",summary:"Congress Partner Not Found",content:{"application/json":{schema:H.object({message:H.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:H.object({message:H.string()})}}}}},sd={method:"delete",path:"/international-scientific-congress/partner/{id}",tags:["International Scientific Congresses"],summary:"Delete congress partner",security:[{bearerAuth:[]}],request:{params:Bo},responses:{200:{description:"Congress partner deleted successfully",summary:"Congress Partner Deleted"},400:{description:"Invalid partner ID format",summary:"Validation Error",content:{"application/json":{schema:H.object({errors:H.record(H.string(),H.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:H.object({message:H.string()})}}},404:{description:"Congress partner not found with the provided ID",summary:"Congress Partner Not Found",content:{"application/json":{schema:H.object({message:H.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:H.object({message:H.string()})}}}}};import l from"zod";import{extendZodWithOpenApi as dR}from"@asteasolutions/zod-to-openapi";import te from"zod";dR(te);var Sa=te.object({title:te.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio"),edition:te.coerce.number().int().positive("Edi\xE7\xE3o deve ser um n\xFAmero positivo"),startDate:te.coerce.date(),endDate:te.coerce.date(),description:te.string().optional(),location:te.string().optional(),congressLink:te.url("Link do congresso deve ser uma URL v\xE1lida").optional().or(te.literal("")),noticeUrl:te.url("URL do edital deve ser uma URL v\xE1lida").optional().or(te.literal("")),scheduleUrl:te.url("URL do cronograma deve ser uma URL v\xE1lida").optional().or(te.literal("")),programUrl:te.url("URL da programa\xE7\xE3o deve ser uma URL v\xE1lida").optional().or(te.literal("")),adminReportUrl:te.url("URL do relat\xF3rio administrativo deve ser uma URL v\xE1lida").optional().or(te.literal("")),proceedingsUrl:te.url("URL dos anais deve ser uma URL v\xE1lida").optional().or(te.literal(""))}).refine(o=>o.endDate>=o.startDate,{message:"Data de t\xE9rmino deve ser posterior ou igual \xE0 data de in\xEDcio",path:["endDate"]}),qo=class{constructor(e){this.internationalScientificCongressRepository=e}async handle(e,r){try{let t=Sa.parse(e.body);return await this.internationalScientificCongressRepository.create(t),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as lR}from"@asteasolutions/zod-to-openapi";import wa from"zod";lR(wa);var va=wa.object({id:wa.uuid()}),Oo=class{constructor(e){this.internationalScientificCongressRepository=e}async handle(e,r){try{let{id:t}=va.parse({id:e.params.id});if(!await this.internationalScientificCongressRepository.findById(t))throw new p("O congresso n\xE3o existe.");return await this.internationalScientificCongressRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as uR}from"@asteasolutions/zod-to-openapi";import Ea from"zod";uR(Ea);var ja=Ea.object({edition:Ea.coerce.number().int().positive()}),ko=class{constructor(e){this.internationalScientificCongressRepository=e}async handle(e,r){try{let{edition:t}=ja.parse({edition:e.params.edition}),i=await this.internationalScientificCongressRepository.findByEdition(t);return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as gR}from"@asteasolutions/zod-to-openapi";import xa from"zod";gR(xa);var Go=xa.object({id:xa.uuid()}),No=class{constructor(e){this.internationalScientificCongressRepository=e}async handle(e,r){try{let{id:t}=Go.parse({id:e.params.id}),i=await this.internationalScientificCongressRepository.findById(t);if(!i)throw new p("O congresso n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as fR}from"@asteasolutions/zod-to-openapi";import Qe from"zod";var yR=1,hR=10;fR(Qe);var Pa=Qe.object({page:Qe.coerce.number().min(1).default(yR),limit:Qe.coerce.number().min(1).default(hR),title:Qe.string().optional(),edition:Qe.coerce.number().int().positive().optional(),location:Qe.string().optional(),orderBy:Qe.enum(["asc","desc"]).optional()}),Lo=class{constructor(e){this.internationalScientificCongressRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=Pa.parse(e.query),s=i*t-i,[a,c]=await Promise.all([this.internationalScientificCongressRepository.find({pagination:{offset:s,limit:i},filter:n}),this.internationalScientificCongressRepository.count({filter:n})]),d=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:d,offset:s,limit:i,congresses:a})}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as RR}from"@asteasolutions/zod-to-openapi";import ee from"zod";RR(ee);var Ma=ee.object({id:ee.uuid(),title:ee.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio").optional(),edition:ee.coerce.number().int().positive("Edi\xE7\xE3o deve ser um n\xFAmero positivo").optional(),startDate:ee.coerce.date().optional(),endDate:ee.coerce.date().optional(),description:ee.string().optional(),location:ee.string().optional(),congressLink:ee.url("Link do congresso deve ser uma URL v\xE1lida").optional().or(ee.literal("")),noticeUrl:ee.url("URL do edital deve ser uma URL v\xE1lida").optional().or(ee.literal("")),scheduleUrl:ee.url("URL do cronograma deve ser uma URL v\xE1lida").optional().or(ee.literal("")),programUrl:ee.url("URL da programa\xE7\xE3o deve ser uma URL v\xE1lida").optional().or(ee.literal("")),adminReportUrl:ee.url("URL do relat\xF3rio administrativo deve ser uma URL v\xE1lida").optional().or(ee.literal("")),proceedingsUrl:ee.url("URL dos anais deve ser uma URL v\xE1lida").optional().or(ee.literal(""))}),_o=class{constructor(e){this.internationalScientificCongressRepository=e}async handle(e,r){try{let{id:t,...i}=Ma.parse({id:e.params.id,...e.body});if(!await this.internationalScientificCongressRepository.findById(t))throw new p("O congresso n\xE3o existe.");return await this.internationalScientificCongressRepository.update({...i,id:t}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var IR=9,bR=l.object({image:l.any().openapi({type:"string",format:"binary"}),caption:l.string().optional()}),CR=l.object({image:l.any().openapi({type:"string",format:"binary"}).optional(),caption:l.string().optional()}),SR=l.object({id:l.uuid(),name:l.string(),logoUrl:l.string().nullable(),congressId:l.uuid()}),Aa=l.object({id:l.uuid(),imageUrl:l.string(),caption:l.string().nullable(),congressId:l.uuid()}),Ta=l.object({id:l.uuid(),title:l.string(),edition:l.number(),startDate:l.date(),endDate:l.date(),description:l.string().nullable(),location:l.string().nullable(),congressLink:l.string().nullable(),noticeUrl:l.string().nullable(),scheduleUrl:l.string().nullable(),programUrl:l.string().nullable(),adminReportUrl:l.string().nullable(),proceedingsUrl:l.string().nullable(),partners:l.array(SR),galleries:l.array(Aa),createdAt:l.date(),updatedAt:l.date()}),ad={method:"post",path:"/international-scientific-congress",tags:["International Scientific Congresses"],summary:"Create a new international scientific congress",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:Sa}}}},responses:{201:{description:"International scientific congress created successfully",summary:"International Scientific Congress Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:l.object({errors:l.record(l.string(),l.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:l.object({message:l.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:l.object({message:l.string()})}}}}},md={method:"get",path:"/international-scientific-congress",tags:["International Scientific Congresses"],summary:"List all international scientific congresses with pagination and filters",request:{query:Pa},responses:{200:{description:"List of international scientific congresses retrieved successfully with pagination",summary:"International Scientific Congresses Retrieved",content:{"application/json":{schema:l.object({page:l.number(),totalPages:l.number(),offset:l.number(),limit:l.number(),congresses:l.array(Ta)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:l.object({errors:l.record(l.string(),l.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:l.object({message:l.string()})}}}}},cd={method:"get",path:"/international-scientific-congress/{id}",tags:["International Scientific Congresses"],summary:"Find international scientific congress by ID",request:{params:Go},responses:{200:{description:"International scientific congress details retrieved successfully",summary:"International Scientific Congress Retrieved",content:{"application/json":{schema:Ta}}},400:{description:"Invalid international scientific congress ID format",summary:"Validation Error",content:{"application/json":{schema:l.object({errors:l.record(l.string(),l.string())})}}},404:{description:"International scientific congress not found with the provided ID",summary:"International Scientific Congress Not Found",content:{"application/json":{schema:l.object({message:l.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:l.object({message:l.string()})}}}}},pd={method:"get",path:"/international-scientific-congress/edition/{edition}",tags:["International Scientific Congresses"],summary:"Find international scientific congresses by edition",request:{params:ja},responses:{200:{description:"International scientific congresses retrieved successfully by edition",summary:"International Scientific Congresses Retrieved by Edition",content:{"application/json":{schema:l.array(Ta)}}},400:{description:"Invalid edition parameter provided",summary:"Validation Error",content:{"application/json":{schema:l.object({errors:l.record(l.string(),l.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:l.object({message:l.string()})}}}}},dd={method:"put",path:"/international-scientific-congress/{id}",tags:["International Scientific Congresses"],summary:"Update international scientific congress",security:[{bearerAuth:[]}],request:{params:Go,body:{content:{"application/json":{schema:Ma.omit({id:!0})}}}},responses:{200:{description:"International scientific congress updated successfully",summary:"International Scientific Congress Updated"},400:{description:"Invalid input data or international scientific congress ID format",summary:"Validation Error",content:{"application/json":{schema:l.object({errors:l.record(l.string(),l.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:l.object({message:l.string()})}}},404:{description:"International scientific congress not found with the provided ID",summary:"International Scientific Congress Not Found",content:{"application/json":{schema:l.object({message:l.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:l.object({message:l.string()})}}}}},ld={method:"delete",path:"/international-scientific-congress/{id}",tags:["International Scientific Congresses"],summary:"Delete international scientific congress",security:[{bearerAuth:[]}],request:{params:va},responses:{200:{description:"International scientific congress deleted successfully",summary:"International Scientific Congress Deleted"},400:{description:"Invalid international scientific congress ID format",summary:"Validation Error",content:{"application/json":{schema:l.object({errors:l.record(l.string(),l.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:l.object({message:l.string()})}}},404:{description:"International scientific congress not found with the provided ID",summary:"International Scientific Congress Not Found",content:{"application/json":{schema:l.object({message:l.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:l.object({message:l.string()})}}}}},fM={method:"post",path:"/international-scientific-congress/{congressId}/gallery",tags:["International Scientific Congress Gallery"],summary:"Create a new gallery image for a congress",security:[{bearerAuth:[]}],request:{params:l.object({congressId:l.uuid()}),body:{content:{"multipart/form-data":{schema:bR}}}},responses:{201:{description:"Gallery image created successfully",summary:"Gallery Image Created"},400:{description:"Invalid input data, missing required fields, or invalid image format/size",summary:"Validation Error",content:{"application/json":{schema:l.object({errors:l.record(l.string(),l.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:l.object({message:l.string()})}}},404:{description:"Congress not found with the provided ID",summary:"Congress Not Found",content:{"application/json":{schema:l.object({message:l.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:l.object({message:l.string()})}}}}},yM={method:"get",path:"/international-scientific-congress/{congressId}/gallery",tags:["International Scientific Congress Gallery"],summary:"List all gallery images for a congress with pagination",request:{params:l.object({congressId:l.uuid()}),query:l.object({page:l.coerce.number().min(1).default(1),limit:l.coerce.number().min(1).default(IR),caption:l.string().optional()})},responses:{200:{description:"Gallery images retrieved successfully with pagination",summary:"Gallery Images Retrieved",content:{"application/json":{schema:l.object({page:l.number(),totalPages:l.number(),offset:l.number(),limit:l.number(),galleries:l.array(Aa)})}}},400:{description:"Invalid congress ID format or query parameters",summary:"Validation Error",content:{"application/json":{schema:l.object({errors:l.record(l.string(),l.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:l.object({message:l.string()})}}}}},hM={method:"get",path:"/international-scientific-congress/gallery/{id}",tags:["International Scientific Congress Gallery"],summary:"Find a gallery image by ID",request:{params:l.object({id:l.uuid()})},responses:{200:{description:"Gallery image retrieved successfully",summary:"Gallery Image Retrieved",content:{"application/json":{schema:Aa}}},400:{description:"Invalid gallery image ID format",summary:"Validation Error",content:{"application/json":{schema:l.object({errors:l.record(l.string(),l.string())})}}},404:{description:"Gallery image not found with the provided ID",summary:"Gallery Image Not Found",content:{"application/json":{schema:l.object({message:l.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:l.object({message:l.string()})}}}}},RM={method:"put",path:"/international-scientific-congress/gallery/{id}",tags:["International Scientific Congress Gallery"],summary:"Update a gallery image with optional image upload",security:[{bearerAuth:[]}],request:{params:l.object({id:l.uuid()}),body:{content:{"multipart/form-data":{schema:CR}}}},responses:{200:{description:"Gallery image updated successfully",summary:"Gallery Image Updated"},400:{description:"Invalid input data, gallery ID format, or invalid image format/size",summary:"Validation Error",content:{"application/json":{schema:l.object({errors:l.record(l.string(),l.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:l.object({message:l.string()})}}},404:{description:"Gallery image not found with the provided ID",summary:"Gallery Image Not Found",content:{"application/json":{schema:l.object({message:l.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:l.object({message:l.string()})}}}}},IM={method:"delete",path:"/international-scientific-congress/gallery/{id}",tags:["International Scientific Congress Gallery"],summary:"Delete a gallery image",security:[{bearerAuth:[]}],request:{params:l.object({id:l.uuid()})},responses:{200:{description:"Gallery image deleted successfully",summary:"Gallery Image Deleted"},400:{description:"Invalid gallery ID format",summary:"Validation Error",content:{"application/json":{schema:l.object({errors:l.record(l.string(),l.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:l.object({message:l.string()})}}},404:{description:"Gallery image not found with the provided ID",summary:"Gallery Image Not Found",content:{"application/json":{schema:l.object({message:l.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:l.object({message:l.string()})}}}}};import{$Enums as xR}from"@prisma/client";import O from"zod";import{extendZodWithOpenApi as wR}from"@asteasolutions/zod-to-openapi";import Wt from"zod";wR(Wt);var Fa=Wt.object({role:Wt.string().min(1),description:Wt.string().optional(),userId:Wt.uuid(),order:Wt.number().optional()}),Wo=class{constructor(e){this.legitimatorCommitteeMemberRepository=e}async handle(e,r){try{let{role:t,description:i,userId:n,order:s}=Fa.parse(e.body);return await this.legitimatorCommitteeMemberRepository.create({role:t,description:i,userId:n,order:s??0}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as vR}from"@asteasolutions/zod-to-openapi";import Ba from"zod";vR(Ba);var Da=Ba.object({id:Ba.uuid()}),zo=class{constructor(e){this.legitimatorCommitteeMemberRepository=e}async handle(e,r){try{let{id:t}=Da.parse({id:e.params.id});if(!await this.legitimatorCommitteeMemberRepository.findById(t))throw new p("O membro do comit\xEA legitimador n\xE3o existe.");return await this.legitimatorCommitteeMemberRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as ER}from"@asteasolutions/zod-to-openapi";import Ua from"zod";ER(Ua);var Vo=Ua.object({id:Ua.uuid()}),Ho=class{constructor(e){this.legitimatorCommitteeMemberRepository=e}async handle(e,r){try{let{id:t}=Vo.parse({id:e.params.id}),i=await this.legitimatorCommitteeMemberRepository.findById(t);if(!i)throw new p("O membro do comit\xEA legitimador n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as jR}from"@asteasolutions/zod-to-openapi";import yt from"zod";jR(yt);var qa=yt.object({id:yt.uuid(),role:yt.string().min(1).optional(),description:yt.string().optional(),userId:yt.uuid().optional(),order:yt.number().optional()}),Zo=class{constructor(e){this.legitimatorCommitteeMemberRepository=e}async handle(e,r){try{let{id:t,role:i,description:n,userId:s,order:a}=qa.parse({id:e.params.id,...e.body});if(!await this.legitimatorCommitteeMemberRepository.findById(t))throw new p("O membro do comit\xEA legitimador n\xE3o existe.");return await this.legitimatorCommitteeMemberRepository.update({id:t,role:i,description:n,userId:s,order:a}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var PR=O.object({id:O.uuid(),name:O.string(),emailAddress:O.string(),avatarUrl:O.string().nullable(),orcid:O.string().nullable(),phone:O.string().nullable(),lattesUrl:O.string().nullable(),role:O.enum(xR.UserRole)}),ud=O.object({id:O.uuid(),role:O.string(),description:O.string().nullable(),order:O.number(),createdAt:O.date(),updatedAt:O.date(),userId:O.uuid(),user:PR}),gd={method:"post",path:"/legitimator-committee-member",tags:["Legitimator Committee Members"],summary:"Create a new Legitimator Committee Member",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:Fa}}}},responses:{201:{description:"Legitimator Committee Member created successfully",summary:"Legitimator Committee Member Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:O.object({errors:O.record(O.string(),O.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:O.object({message:O.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:O.object({message:O.string()})}}}}},fd={method:"get",path:"/legitimator-committee-member",tags:["Legitimator Committee Members"],summary:"List all Legitimator Committee Members with filters",request:{query:O.object({role:O.string().optional(),orderBy:O.enum(["asc","desc"]).optional()})},responses:{200:{description:"List of Legitimator Committee Members retrieved successfully",summary:"Legitimator Committee Members Retrieved",content:{"application/json":{schema:O.object({members:O.array(ud)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:O.object({message:O.string()})}}}}},yd={method:"get",path:"/legitimator-committee-member/{id}",tags:["Legitimator Committee Members"],summary:"Find Legitimator Committee Member by ID",request:{params:Vo},responses:{200:{description:"Legitimator Committee Member details retrieved successfully",summary:"Legitimator Committee Member Retrieved",content:{"application/json":{schema:ud}}},400:{description:"Invalid Legitimator Committee Member ID format",summary:"Validation Error",content:{"application/json":{schema:O.object({errors:O.record(O.string(),O.string())})}}},404:{description:"Legitimator Committee Member not found with the provided ID",summary:"Legitimator Committee Member Not Found",content:{"application/json":{schema:O.object({message:O.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:O.object({message:O.string()})}}}}},hd={method:"put",path:"/legitimator-committee-member/{id}",tags:["Legitimator Committee Members"],summary:"Update Legitimator Committee Member",security:[{bearerAuth:[]}],request:{params:Vo,body:{content:{"application/json":{schema:qa.omit({id:!0})}}}},responses:{200:{description:"Legitimator Committee Member updated successfully",summary:"Legitimator Committee Member Updated"},400:{description:"Invalid input data or Legitimator Committee Member ID format",summary:"Validation Error",content:{"application/json":{schema:O.object({errors:O.record(O.string(),O.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:O.object({message:O.string()})}}},404:{description:"Legitimator Committee Member not found with the provided ID",summary:"Legitimator Committee Member Not Found",content:{"application/json":{schema:O.object({message:O.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:O.object({message:O.string()})}}}}},Rd={method:"delete",path:"/legitimator-committee-member/{id}",tags:["Legitimator Committee Members"],summary:"Delete Legitimator Committee Member",security:[{bearerAuth:[]}],request:{params:Da},responses:{200:{description:"Legitimator Committee Member deleted successfully",summary:"Legitimator Committee Member Deleted"},400:{description:"Invalid Legitimator Committee Member ID format",summary:"Validation Error",content:{"application/json":{schema:O.object({errors:O.record(O.string(),O.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:O.object({message:O.string()})}}},404:{description:"Legitimator Committee Member not found with the provided ID",summary:"Legitimator Committee Member Not Found",content:{"application/json":{schema:O.object({message:O.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:O.object({message:O.string()})}}}}};import{$Enums as BR}from"@prisma/client";import P from"zod";import{extendZodWithOpenApi as MR}from"@asteasolutions/zod-to-openapi";import Ue from"zod";MR(Ue);var Oa=Ue.object({name:Ue.string().min(1),description:Ue.string().optional(),members:Ue.array(Ue.object({userId:Ue.uuid(),role:Ue.string().min(1),order:Ue.number().optional()}))}),Ko=class{constructor(e){this.managementTeamRepository=e}async handle(e,r){try{let{name:t,description:i,members:n}=Oa.parse(e.body);if(await this.managementTeamRepository.findByName(t))throw new re("J\xE1 existe um time de gest\xE3o cadastrado com este nome.");return await this.managementTeamRepository.create({name:t,description:i,members:n.map(a=>({userId:a.userId,role:a.role,order:a.order??0}))}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as AR}from"@asteasolutions/zod-to-openapi";import ka from"zod";AR(ka);var Na=ka.object({id:ka.uuid()}),Jo=class{constructor(e){this.managementTeamRepository=e}async handle(e,r){try{let{id:t}=Na.parse({id:e.params.id});if(!await this.managementTeamRepository.findById(t))throw new p("O time de gest\xE3o n\xE3o existe.");return await this.managementTeamRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as TR}from"@asteasolutions/zod-to-openapi";import Ga from"zod";TR(Ga);var Xo=Ga.object({id:Ga.uuid()}),Yo=class{constructor(e){this.managementTeamRepository=e}async handle(e,r){try{let{id:t}=Xo.parse({id:e.params.id}),i=await this.managementTeamRepository.findById(t);if(!i)throw new p("O time de gest\xE3o n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as FR}from"@asteasolutions/zod-to-openapi";import xe from"zod";FR(xe);var La=xe.object({id:xe.uuid(),name:xe.string().min(1).optional(),description:xe.string().optional(),members:xe.array(xe.object({userId:xe.uuid(),role:xe.string().min(1),order:xe.number().optional()})).optional()}),$o=class{constructor(e){this.managementTeamRepository=e}async handle(e,r){try{let{id:t,name:i,description:n,members:s}=La.parse({id:e.params.id,...e.body}),a=await this.managementTeamRepository.findById(t);if(!a)throw new p("O time de gest\xE3o n\xE3o existe.");if(i&&i!==a.name){let c=await this.managementTeamRepository.findByName(i);if(c&&c.id!==t)throw new re("J\xE1 existe um time de gest\xE3o com este nome.")}return await this.managementTeamRepository.update({id:t,name:i,description:n,members:s?s.map(c=>({userId:c.userId,role:c.role,order:c.order??0})):void 0}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var DR=P.object({id:P.uuid(),name:P.string(),emailAddress:P.string(),avatarUrl:P.string().nullable(),orcid:P.string().nullable(),phone:P.string().nullable(),lattesUrl:P.string().nullable(),role:P.enum(BR.UserRole)}),UR=P.object({id:P.uuid(),role:P.string(),description:P.string().nullable(),order:P.number(),teamId:P.uuid(),userId:P.uuid(),createdAt:P.date(),updatedAt:P.date(),user:DR}),Id=P.object({id:P.uuid(),name:P.string(),description:P.string().nullable(),createdAt:P.date(),updatedAt:P.date(),members:P.array(UR)}),bd={method:"post",path:"/management-team",tags:["Management Teams"],summary:"Create a new Management Team with multiple members",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:Oa}}}},responses:{201:{description:"Management Team created successfully",summary:"Management Team Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:P.object({errors:P.record(P.string(),P.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:P.object({message:P.string()})}}},409:{description:"Management Team with this name already exists",summary:"Conflict",content:{"application/json":{schema:P.object({message:P.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:P.object({message:P.string()})}}}}},Cd={method:"get",path:"/management-team",tags:["Management Teams"],summary:"List all Management Teams with filters",request:{query:P.object({name:P.string().optional(),description:P.string().optional(),orderBy:P.enum(["asc","desc"]).optional()})},responses:{200:{description:"List of Management Teams retrieved successfully",summary:"Management Teams Retrieved",content:{"application/json":{schema:P.object({teams:P.array(Id)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:P.object({message:P.string()})}}}}},Sd={method:"get",path:"/management-team/{id}",tags:["Management Teams"],summary:"Find Management Team by ID",request:{params:Xo},responses:{200:{description:"Management Team details retrieved successfully",summary:"Management Team Retrieved",content:{"application/json":{schema:Id}}},400:{description:"Invalid Management Team ID format",summary:"Validation Error",content:{"application/json":{schema:P.object({errors:P.record(P.string(),P.string())})}}},404:{description:"Management Team not found with the provided ID",summary:"Management Team Not Found",content:{"application/json":{schema:P.object({message:P.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:P.object({message:P.string()})}}}}},wd={method:"put",path:"/management-team/{id}",tags:["Management Teams"],summary:"Update Management Team and manage member relationships",security:[{bearerAuth:[]}],request:{params:Xo,body:{content:{"application/json":{schema:La.omit({id:!0})}}}},responses:{200:{description:"Management Team updated successfully",summary:"Management Team Updated"},400:{description:"Invalid input data or Management Team ID format",summary:"Validation Error",content:{"application/json":{schema:P.object({errors:P.record(P.string(),P.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:P.object({message:P.string()})}}},404:{description:"Management Team not found with the provided ID",summary:"Management Team Not Found",content:{"application/json":{schema:P.object({message:P.string()})}}},409:{description:"Management Team with this name already exists",summary:"Conflict",content:{"application/json":{schema:P.object({message:P.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:P.object({message:P.string()})}}}}},vd={method:"delete",path:"/management-team/{id}",tags:["Management Teams"],summary:"Delete Management Team",security:[{bearerAuth:[]}],request:{params:Na},responses:{200:{description:"Management Team deleted successfully",summary:"Management Team Deleted"},400:{description:"Invalid Management Team ID format",summary:"Validation Error",content:{"application/json":{schema:P.object({errors:P.record(P.string(),P.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:P.object({message:P.string()})}}},404:{description:"Management Team not found with the provided ID",summary:"Management Team Not Found",content:{"application/json":{schema:P.object({message:P.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:P.object({message:P.string()})}}}}};import{MeetingFormat as WR,MeetingStatus as zR}from"@prisma/client";import N from"zod";import{extendZodWithOpenApi as qR}from"@asteasolutions/zod-to-openapi";import zt from"zod";var jd=10,Ed=1024,OR=Ed*Ed,kR=jd*OR;qR(zt);var _a=zt.object({title:zt.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio"),publishedAt:zt.coerce.date(),meetingId:zt.uuid(),document:zt.any().refine(o=>o==null||typeof o!="object"||typeof o.size!="number"?!1:o.size<=kR,`O documento deve ter no m\xE1ximo ${jd}MB.`)}),Qo=class{constructor(e,r,t){this.meetingMinuteRepository=e;this.meetingRepository=r;this.firebaseStorageService=t}async handle(e,r){try{let{title:t,publishedAt:i,meetingId:n,document:s}=_a.parse({...e.body,...e.params,document:e.file});if(!await this.meetingRepository.findById(n))throw new p("A reuni\xE3o n\xE3o existe.");if(await this.meetingMinuteRepository.findByMeetingId(n))throw new m("Esta reuni\xE3o j\xE1 possui uma ata.");let d=await this.meetingMinuteRepository.create({title:t,publishedAt:i,meetingId:n,documentUrl:""}),R=await this.firebaseStorageService.uploadFile({file:s,id:d.id,folder:j.MEETING_MINUTE});return await this.meetingMinuteRepository.update({id:d.id,documentUrl:R}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as NR}from"@asteasolutions/zod-to-openapi";import Wa from"zod";NR(Wa);var Rr=Wa.object({meetingId:Wa.uuid()}),ei=class{constructor(e){this.meetingMinuteRepository=e}async handle(e,r){try{let{meetingId:t}=Rr.parse({meetingId:e.params.meetingId}),i=await this.meetingMinuteRepository.findByMeetingId(t);return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as GR}from"@asteasolutions/zod-to-openapi";import Ht from"zod";var Pd=10,xd=1024,LR=xd*xd,_R=Pd*LR;GR(Ht);var za=Ht.object({meetingId:Ht.uuid(),title:Ht.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio").optional(),publishedAt:Ht.coerce.date().optional(),document:Ht.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=_R,`O documento deve ter no m\xE1ximo ${Pd}MB.`).optional()}),ti=class{constructor(e,r){this.meetingMinuteRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{meetingId:t,title:i,publishedAt:n,document:s}=za.parse({meetingId:e.params.meetingId,...e.body,document:e.file}),a=await this.meetingMinuteRepository.findByMeetingId(t);if(!a)throw new p("A ata n\xE3o existe para esta reuni\xE3o.");let c=a.documentUrl;return s&&(a.documentUrl&&await this.firebaseStorageService.deleteFile({fileUrl:a.documentUrl}),c=await this.firebaseStorageService.uploadFile({file:s,id:a.id,folder:j.MEETING_MINUTE})),await this.meetingMinuteRepository.update({id:a.id,title:i,publishedAt:n,documentUrl:c??void 0}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var HR=N.object({id:N.uuid(),title:N.string(),scheduledAt:N.date(),format:N.enum(WR),agenda:N.string(),meetingLink:N.string().nullable(),location:N.string().nullable(),status:N.enum(zR),createdAt:N.date(),updatedAt:N.date()}),VR=N.object({id:N.uuid(),title:N.string(),publishedAt:N.date(),documentUrl:N.string(),meetingId:N.uuid(),meeting:HR,createdAt:N.date(),updatedAt:N.date()}),Md={method:"post",path:"/meeting/{meetingId}/minute",tags:["Meetings"],summary:"Create a new meeting minute with document upload",security:[{bearerAuth:[]}],request:{params:N.object({meetingId:N.uuid()}),body:{content:{"multipart/form-data":{schema:_a.omit({meetingId:!0})}}}},responses:{201:{description:"Meeting minute created successfully",summary:"Meeting Minute Created"},400:{description:"Invalid input data, missing required fields, or invalid document format/size",summary:"Validation Error",content:{"application/json":{schema:N.object({errors:N.record(N.string(),N.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:N.object({message:N.string()})}}},404:{description:"Meeting not found with the provided ID",summary:"Meeting Not Found",content:{"application/json":{schema:N.object({message:N.string()})}}},409:{description:"Meeting already has a minute",summary:"Conflict",content:{"application/json":{schema:N.object({message:N.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:N.object({message:N.string()})}}}}},Ad={method:"get",path:"/meeting/{meetingId}/minute",tags:["Meetings"],summary:"Find meeting minute by meeting ID",request:{params:Rr},responses:{200:{description:"Meeting minute retrieved successfully by meeting ID",summary:"Meeting Minute Retrieved by Meeting ID",content:{"application/json":{schema:VR.nullable()}}},400:{description:"Invalid meeting ID parameter provided",summary:"Validation Error",content:{"application/json":{schema:N.object({errors:N.record(N.string(),N.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:N.object({message:N.string()})}}}}},Td={method:"put",path:"/meeting/{meetingId}/minute",tags:["Meetings"],summary:"Update meeting minute with optional document upload",security:[{bearerAuth:[]}],request:{params:Rr,body:{content:{"multipart/form-data":{schema:za.omit({meetingId:!0})}}}},responses:{200:{description:"Meeting minute updated successfully",summary:"Meeting Minute Updated"},400:{description:"Invalid input data, meeting minute ID format, or invalid document format/size",summary:"Validation Error",content:{"application/json":{schema:N.object({errors:N.record(N.string(),N.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:N.object({message:N.string()})}}},404:{description:"Meeting minute not found with the provided ID",summary:"Meeting Minute Not Found",content:{"application/json":{schema:N.object({message:N.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:N.object({message:N.string()})}}}}},Fd={method:"delete",path:"/meeting/{meetingId}/minute",tags:["Meetings"],summary:"Delete meeting minute",security:[{bearerAuth:[]}],request:{params:Rr},responses:{200:{description:"Meeting minute deleted successfully",summary:"Meeting Minute Deleted"},400:{description:"Invalid meeting minute ID format",summary:"Validation Error",content:{"application/json":{schema:N.object({errors:N.record(N.string(),N.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:N.object({message:N.string()})}}},404:{description:"Meeting minute not found with the provided ID",summary:"Meeting Minute Not Found",content:{"application/json":{schema:N.object({message:N.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:N.object({message:N.string()})}}}}};import{MeetingFormat as sI,MeetingStatus as aI}from"@prisma/client";import E from"zod";import{extendZodWithOpenApi as ZR}from"@asteasolutions/zod-to-openapi";import{MeetingFormat as ri,MeetingStatus as Ha}from"@prisma/client";import Pe from"zod";ZR(Pe);var Va=Pe.object({title:Pe.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio"),scheduledAt:Pe.coerce.date(),format:Pe.enum(ri).default(ri.ONLINE),agenda:Pe.string().min(1,"Pauta \xE9 obrigat\xF3ria"),meetingLink:Pe.string().url("Link da reuni\xE3o deve ser uma URL v\xE1lida").optional().or(Pe.literal("")),location:Pe.string().optional(),status:Pe.enum(Ha).default(Ha.PENDING)}).refine(o=>o.format===ri.ONLINE?!!o.meetingLink:o.format===ri.IN_PERSON?!!o.location:!0,{message:"Reuni\xF5es online devem ter link e reuni\xF5es presenciais devem ter localiza\xE7\xE3o",path:["format"]}),oi=class{constructor(e){this.meetingRepository=e}async handle(e,r){try{let{title:t,scheduledAt:i,format:n,agenda:s,meetingLink:a,location:c,status:d}=Va.parse(e.body);return await this.meetingRepository.create({title:t,scheduledAt:i,format:n,agenda:s,meetingLink:a||void 0,location:c||void 0,status:d??Ha.PENDING}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as KR}from"@asteasolutions/zod-to-openapi";import Za from"zod";KR(Za);var Ka=Za.object({id:Za.uuid()}),ii=class{constructor(e){this.meetingRepository=e}async handle(e,r){try{let{id:t}=Ka.parse({id:e.params.id});if(!await this.meetingRepository.findById(t))throw new p("A reuni\xE3o n\xE3o existe.");return await this.meetingRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as JR}from"@asteasolutions/zod-to-openapi";import Ja from"zod";JR(Ja);var si=Ja.object({id:Ja.uuid()}),ni=class{constructor(e){this.meetingRepository=e}async handle(e,r){try{let{id:t}=si.parse({id:e.params.id}),i=await this.meetingRepository.findById(t);if(!i)throw new p("A reuni\xE3o n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as YR}from"@asteasolutions/zod-to-openapi";import{MeetingStatus as XR}from"@prisma/client";import Ya from"zod";YR(Ya);var Xa=Ya.object({status:Ya.enum(XR)}),ai=class{constructor(e){this.meetingRepository=e}async handle(e,r){try{let{status:t}=Xa.parse({status:e.params.status}),i=await this.meetingRepository.findByStatus(t);return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as $R}from"@asteasolutions/zod-to-openapi";import{MeetingFormat as QR,MeetingStatus as eI}from"@prisma/client";import et from"zod";var tI=1,rI=10;$R(et);var $a=et.object({page:et.coerce.number().min(1).default(tI),limit:et.coerce.number().min(1).default(rI),title:et.string().optional(),format:et.enum(QR).optional(),status:et.enum(eI).optional(),orderBy:et.enum(["asc","desc"]).optional()}),mi=class{constructor(e){this.meetingRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=$a.parse(e.query),s=i*t-i,[a,c]=await Promise.all([this.meetingRepository.find({pagination:{offset:s,limit:i},filter:n}),this.meetingRepository.count({filter:n})]),d=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:d,offset:s,limit:i,meetings:a})}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as oI}from"@asteasolutions/zod-to-openapi";import{MeetingFormat as iI,MeetingStatus as nI}from"@prisma/client";import Ce from"zod";oI(Ce);var Qa=Ce.object({id:Ce.uuid(),title:Ce.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio").optional(),scheduledAt:Ce.coerce.date().optional(),format:Ce.enum(iI).optional(),agenda:Ce.string().min(1,"Pauta \xE9 obrigat\xF3ria").optional(),meetingLink:Ce.string().url("Link da reuni\xE3o deve ser uma URL v\xE1lida").optional().or(Ce.literal("")),location:Ce.string().optional(),status:Ce.enum(nI).optional()}),ci=class{constructor(e){this.meetingRepository=e}async handle(e,r){try{let{id:t,title:i,scheduledAt:n,format:s,agenda:a,meetingLink:c,location:d,status:R}=Qa.parse({id:e.params.id,...e.body});if(!await this.meetingRepository.findById(t))throw new p("A reuni\xE3o n\xE3o existe.");return await this.meetingRepository.update({id:t,title:i,scheduledAt:n,format:s,agenda:a,meetingLink:c||void 0,location:d||void 0,status:R}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var mI=E.object({id:E.uuid(),title:E.string(),publishedAt:E.date(),documentUrl:E.string(),meetingId:E.uuid(),createdAt:E.date(),updatedAt:E.date()}),em=E.object({id:E.uuid(),title:E.string(),scheduledAt:E.date(),format:E.enum(sI),agenda:E.string(),meetingLink:E.string().nullable(),location:E.string().nullable(),status:E.enum(aI),minutes:mI.nullable(),createdAt:E.date(),updatedAt:E.date()}),Bd={method:"post",path:"/meeting",tags:["Meetings"],summary:"Create a new meeting",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:Va}}}},responses:{201:{description:"Meeting created successfully",summary:"Meeting Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:E.object({errors:E.record(E.string(),E.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:E.object({message:E.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:E.object({message:E.string()})}}}}},Dd={method:"get",path:"/meeting",tags:["Meetings"],summary:"List all meetings with pagination and filters",request:{query:$a},responses:{200:{description:"List of meetings retrieved successfully with pagination",summary:"Meetings Retrieved",content:{"application/json":{schema:E.object({page:E.number(),totalPages:E.number(),offset:E.number(),limit:E.number(),meetings:E.array(em)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:E.object({errors:E.record(E.string(),E.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:E.object({message:E.string()})}}}}},Ud={method:"get",path:"/meeting/{id}",tags:["Meetings"],summary:"Find meeting by ID",request:{params:si},responses:{200:{description:"Meeting details retrieved successfully",summary:"Meeting Retrieved",content:{"application/json":{schema:em}}},400:{description:"Invalid meeting ID format",summary:"Validation Error",content:{"application/json":{schema:E.object({errors:E.record(E.string(),E.string())})}}},404:{description:"Meeting not found with the provided ID",summary:"Meeting Not Found",content:{"application/json":{schema:E.object({message:E.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:E.object({message:E.string()})}}}}},qd={method:"get",path:"/meeting/status/{status}",tags:["Meetings"],summary:"Find meetings by status",request:{params:Xa},responses:{200:{description:"Meetings retrieved successfully by status",summary:"Meetings Retrieved by Status",content:{"application/json":{schema:E.array(em)}}},400:{description:"Invalid status parameter provided",summary:"Validation Error",content:{"application/json":{schema:E.object({errors:E.record(E.string(),E.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:E.object({message:E.string()})}}}}},Od={method:"put",path:"/meeting/{id}",tags:["Meetings"],summary:"Update meeting",security:[{bearerAuth:[]}],request:{params:si,body:{content:{"application/json":{schema:Qa.omit({id:!0})}}}},responses:{200:{description:"Meeting updated successfully",summary:"Meeting Updated"},400:{description:"Invalid input data or meeting ID format",summary:"Validation Error",content:{"application/json":{schema:E.object({errors:E.record(E.string(),E.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:E.object({message:E.string()})}}},404:{description:"Meeting not found with the provided ID",summary:"Meeting Not Found",content:{"application/json":{schema:E.object({message:E.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:E.object({message:E.string()})}}}}},kd={method:"delete",path:"/meeting/{id}",tags:["Meetings"],summary:"Delete meeting",security:[{bearerAuth:[]}],request:{params:Ka},responses:{200:{description:"Meeting deleted successfully",summary:"Meeting Deleted"},400:{description:"Invalid meeting ID format",summary:"Validation Error",content:{"application/json":{schema:E.object({errors:E.record(E.string(),E.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:E.object({message:E.string()})}}},404:{description:"Meeting not found with the provided ID",summary:"Meeting Not Found",content:{"application/json":{schema:E.object({message:E.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:E.object({message:E.string()})}}}}};import T from"zod";import{extendZodWithOpenApi as cI}from"@asteasolutions/zod-to-openapi";import Ir from"zod";var pI=5,Nd=1024,dI=Nd*Nd,lI=pI*dI;cI(Ir);var tm=Ir.object({title:Ir.string().min(1),content:Ir.string().min(1),image:Ir.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=lI,{message:"A imagem deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB."})}),pi=class{constructor(e,r){this.newsRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{title:t,content:i,image:n}=tm.parse({...e.body,image:e.file}),s=e.user.id,a=await this.firebaseStorageService.uploadFile({file:n,folder:j.NEWS,id:s});await this.newsRepository.create({title:t,content:i,authorId:s,imageUrl:a}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as uI}from"@asteasolutions/zod-to-openapi";import tt from"zod";var gI=1,fI=7;uI(tt);var li=tt.object({page:tt.coerce.number().min(1).default(gI),limit:tt.coerce.number().min(1).default(fI),authorId:tt.string(),title:tt.string().optional(),content:tt.string().optional(),orderBy:tt.enum(["asc","desc"]).default("desc")}),di=class{constructor(e){this.newsRepository=e}async handle(e,r){try{let{page:t,limit:i,authorId:n,...s}=li.parse(e.query),a=i*t-i,[c,d]=await Promise.all([this.newsRepository.findByAuthorId({authorId:n,pagination:{offset:a,limit:i},filter:s}),this.newsRepository.count({filter:{authorId:n,...s}})]),R=Math.max(Math.ceil(d/i),1);r.status(200).json({page:t,totalPages:R,offset:a,limit:i,news:c})}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as yI}from"@asteasolutions/zod-to-openapi";import rm from"zod";yI(rm);var om=rm.object({id:rm.string()}),ui=class{constructor(e){this.newsRepository=e}async handle(e,r){try{let{id:t}=om.parse(e.params),i=await this.newsRepository.findById(t);if(!i)throw new p("Not\xEDcia n\xE3o encontrada.");r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as hI}from"@asteasolutions/zod-to-openapi";import rt from"zod";var RI=1,II=9;hI(rt);var im=rt.object({page:rt.coerce.number().min(1).default(RI),limit:rt.coerce.number().min(1).default(II),title:rt.string().optional(),content:rt.string().optional(),authorId:rt.string().optional(),orderBy:rt.enum(["asc","desc"]).default("desc")}),gi=class{constructor(e){this.newsRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=im.parse(e.query),s=i*t-i,[a,c]=await Promise.all([this.newsRepository.find({pagination:{offset:s,limit:i},filter:n}),this.newsRepository.count({filter:n})]),d=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:d,offset:s,limit:i,news:a})}catch(t){if(t instanceof Error)throw new m(t.message)}}};var Gd={method:"post",path:"/news",tags:["News"],summary:"Create news",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:tm}}}},responses:{201:{description:"News article created successfully",summary:"News Created",content:{"application/json":{schema:T.object({message:T.string()})}}},400:{description:"Invalid input data or file format",summary:"Validation Error",content:{"application/json":{schema:T.object({errors:T.record(T.string(),T.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:T.object({message:T.string()})}}}}},Ld={method:"get",path:"/news",tags:["News"],summary:"List news",request:{query:im},responses:{200:{description:"Paginated list of news articles retrieved successfully",summary:"News Retrieved",content:{"application/json":{schema:T.object({page:T.number(),totalPages:T.number(),offset:T.number(),limit:T.number(),news:T.array(T.object({title:T.string(),content:T.string(),id:T.string(),createdAt:T.date(),updatedAt:T.date(),imageUrl:T.string().nullable()}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:T.object({errors:T.record(T.string(),T.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:T.object({message:T.string()})}}}}},_d={method:"get",path:"/news/{id}",tags:["News"],summary:"Find news by ID",request:{params:om},responses:{200:{description:"News article details retrieved successfully",summary:"News Retrieved",content:{"application/json":{schema:T.object({page:T.number(),totalPages:T.number(),offset:T.number(),limit:T.number(),news:T.object({title:T.string(),content:T.string(),id:T.string(),createdAt:T.date(),updatedAt:T.date(),imageUrl:T.string().nullable()})})}}},400:{description:"Invalid news ID format",summary:"Validation Error",content:{"application/json":{schema:T.object({errors:T.record(T.string(),T.string())})}}},404:{description:"News article not found with the provided ID",summary:"News Not Found",content:{"application/json":{schema:T.object({message:T.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:T.object({message:T.string()})}}}}},Wd={method:"get",path:"/news/author/{author_id}",tags:["News"],summary:"List news by author",request:{params:li.pick({authorId:!0}).transform(()=>({author_id:""})),query:li.omit({authorId:!0})},responses:{200:{description:"Paginated list of news articles by author retrieved successfully",summary:"Author News Retrieved",content:{"application/json":{schema:T.object({page:T.number(),totalPages:T.number(),offset:T.number(),limit:T.number(),news:T.array(T.object({title:T.string(),content:T.string(),id:T.string(),createdAt:T.date(),updatedAt:T.date(),imageUrl:T.string().nullable()}))})}}},400:{description:"Invalid author ID or query parameters",summary:"Validation Error",content:{"application/json":{schema:T.object({errors:T.record(T.string(),T.string())})}}},404:{description:"Author not found with the provided ID",summary:"Author Not Found",content:{"application/json":{schema:T.object({message:T.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:T.object({message:T.string()})}}}}};import D from"zod";import{extendZodWithOpenApi as bI}from"@asteasolutions/zod-to-openapi";import Me from"zod";var Hd=2,zd=1024,CI=zd*zd,SI=Hd*CI;bI(Me);var nm=Me.object({name:Me.string().min(1,"Nome \xE9 obrigat\xF3rio"),logo:Me.any().refine(o=>o==null||typeof o!="object"||typeof o.size!="number"?!1:o.size<=SI,`A imagem deve ter no m\xE1ximo ${Hd}MB.`),websiteUrl:Me.url("URL do site deve ser v\xE1lida").optional(),description:Me.string().optional(),category:Me.string().optional(),since:Me.coerce.date(),isActive:Me.preprocess(o=>o==="true",Me.boolean().optional())}),fi=class{constructor(e,r){this.partnerRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{name:t,logo:i,websiteUrl:n,description:s,category:a,since:c,isActive:d}=nm.parse({...e.body,logo:e.file}),R=await this.partnerRepository.create({name:t,websiteUrl:n,description:s,category:a,since:c,isActive:d}),A=await this.firebaseStorageService.uploadFile({file:i,id:R.id,folder:j.PARTNER});return await this.partnerRepository.update({id:R.id,logoUrl:A}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as wI}from"@asteasolutions/zod-to-openapi";import sm from"zod";wI(sm);var am=sm.object({id:sm.uuid()}),yi=class{constructor(e,r){this.partnerRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=am.parse({id:e.params.id}),i=await this.partnerRepository.findById(t);if(!i)throw new p("O parceiro n\xE3o existe.");return i.logoUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.logoUrl}),await this.partnerRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as vI}from"@asteasolutions/zod-to-openapi";import mm from"zod";vI(mm);var Ri=mm.object({id:mm.uuid()}),hi=class{constructor(e){this.partnerRepository=e}async handle(e,r){try{let{id:t}=Ri.parse({id:e.params.id}),i=await this.partnerRepository.findById(t);if(!i)throw new p("O parceiro n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as EI}from"@asteasolutions/zod-to-openapi";import qe from"zod";var jI=1,xI=9;EI(qe);var cm=qe.object({page:qe.coerce.number().min(1).default(jI),limit:qe.coerce.number().min(1).default(xI),name:qe.string().optional(),description:qe.string().optional(),category:qe.string().optional(),isActive:qe.coerce.boolean().optional(),orderBy:qe.enum(["asc","desc"]).optional()}),Ii=class{constructor(e){this.partnerRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=cm.parse(e.query),s=i*t-i,[a,c]=await Promise.all([this.partnerRepository.find({pagination:{offset:s,limit:i},filter:n}),this.partnerRepository.count({filter:n})]),d=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:d,offset:s,limit:i,partners:a})}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as PI}from"@asteasolutions/zod-to-openapi";import Se from"zod";var Zd=2,Vd=1024,MI=Vd*Vd,AI=Zd*MI;PI(Se);var pm=Se.object({id:Se.uuid(),name:Se.string().min(1,"Nome \xE9 obrigat\xF3rio").optional(),logo:Se.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=AI,`A imagem deve ter no m\xE1ximo ${Zd}MB.`).optional(),websiteUrl:Se.url("URL do site deve ser v\xE1lida").optional(),description:Se.string().optional(),category:Se.string().optional(),since:Se.coerce.date().optional(),isActive:Se.preprocess(o=>o==="true",Se.boolean().optional())}),bi=class{constructor(e,r){this.partnerRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,name:i,logo:n,websiteUrl:s,description:a,category:c,since:d,isActive:R}=pm.parse({id:e.params.id,...e.body,logo:e.file}),A=await this.partnerRepository.findById(t);if(!A)throw new p("O parceiro n\xE3o existe.");let G=A.logoUrl;if(n&&(G=await this.firebaseStorageService.uploadFile({file:n,id:t,folder:"images/partners"})),!G)throw new m("Logo URL \xE9 obrigat\xF3rio");return await this.partnerRepository.update({id:t,name:i,logoUrl:G,websiteUrl:s,description:a,category:c,since:d,isActive:R}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var Kd=D.object({id:D.uuid(),name:D.string(),logoUrl:D.string(),description:D.string().nullable(),category:D.string().nullable(),since:D.date(),isActive:D.boolean(),createdAt:D.date(),updatedAt:D.date()}),Jd={method:"post",path:"/partner",tags:["Partners"],summary:"Create a new partner with logo upload",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:nm}}}},responses:{201:{description:"Partner created successfully",summary:"Partner Created"},400:{description:"Invalid input data, missing required fields, or invalid logo format/size",summary:"Validation Error",content:{"application/json":{schema:D.object({errors:D.record(D.string(),D.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:D.object({message:D.string()})}}},409:{description:"Partner with this name already exists",summary:"Conflict",content:{"application/json":{schema:D.object({message:D.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:D.object({message:D.string()})}}}}},Yd={method:"get",path:"/partner",tags:["Partners"],summary:"List all partners with pagination and filters",request:{query:cm},responses:{200:{description:"List of partners retrieved successfully with pagination",summary:"Partners Retrieved",content:{"application/json":{schema:D.object({page:D.number(),totalPages:D.number(),offset:D.number(),limit:D.number(),partners:D.array(Kd)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:D.object({errors:D.record(D.string(),D.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:D.object({message:D.string()})}}}}},Xd={method:"get",path:"/partner/{id}",tags:["Partners"],summary:"Find partner by ID",request:{params:Ri},responses:{200:{description:"Partner details retrieved successfully",summary:"Partner Retrieved",content:{"application/json":{schema:Kd}}},400:{description:"Invalid partner ID format",summary:"Validation Error",content:{"application/json":{schema:D.object({errors:D.record(D.string(),D.string())})}}},404:{description:"Partner not found with the provided ID",summary:"Partner Not Found",content:{"application/json":{schema:D.object({message:D.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:D.object({message:D.string()})}}}}},$d={method:"put",path:"/partner/{id}",tags:["Partners"],summary:"Update partner with optional logo upload",security:[{bearerAuth:[]}],request:{params:Ri,body:{content:{"multipart/form-data":{schema:pm.omit({id:!0})}}}},responses:{200:{description:"Partner updated successfully",summary:"Partner Updated"},400:{description:"Invalid input data, partner ID format, or invalid logo format/size",summary:"Validation Error",content:{"application/json":{schema:D.object({errors:D.record(D.string(),D.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:D.object({message:D.string()})}}},404:{description:"Partner not found with the provided ID",summary:"Partner Not Found",content:{"application/json":{schema:D.object({message:D.string()})}}},409:{description:"Partner with this name already exists",summary:"Conflict",content:{"application/json":{schema:D.object({message:D.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:D.object({message:D.string()})}}}}},Qd={method:"delete",path:"/partner/{id}",tags:["Partners"],summary:"Delete partner",security:[{bearerAuth:[]}],request:{params:am},responses:{200:{description:"Partner deleted successfully",summary:"Partner Deleted"},400:{description:"Invalid partner ID format",summary:"Validation Error",content:{"application/json":{schema:D.object({errors:D.record(D.string(),D.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:D.object({message:D.string()})}}},404:{description:"Partner not found with the provided ID",summary:"Partner Not Found",content:{"application/json":{schema:D.object({message:D.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:D.object({message:D.string()})}}}}};import{$Enums as el}from"@prisma/client";import q from"zod";import{extendZodWithOpenApi as TI}from"@asteasolutions/zod-to-openapi";import{PendencyStatus as FI}from"@prisma/client";import ot from"zod";TI(ot);var Si=ot.object({userId:ot.uuid(),title:ot.string().min(1),description:ot.string().optional(),status:ot.enum(FI).default("PENDING"),dueDate:ot.coerce.date().optional(),document:ot.any().refine(o=>o&&typeof o=="object"&&o.size>0,"Arquivo do documento \xE9 obrigat\xF3rio")}),Ci=class{constructor(e,r,t){this.userRepository=e;this.pendencyRepository=r;this.firebaseStorageService=t}async handle(e,r){try{let{userId:t,title:i,description:n,status:s,dueDate:a,document:c}=Si.parse({...e.body,userId:e.params.user_id,document:e.file});if(!await this.userRepository.findById(t))throw new se("O usu\xE1rio n\xE3o existe.");let R=await this.firebaseStorageService.uploadFile({file:c,id:t,folder:j.PENDENCY});return await this.pendencyRepository.create({userId:t,title:i,description:n,status:s,dueDate:a,documentUrl:R}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as BI}from"@asteasolutions/zod-to-openapi";import dm from"zod";BI(dm);var lm=dm.object({id:dm.uuid()}),wi=class{constructor(e,r){this.pendencyRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=lm.parse({id:e.params.pendency_id}),i=await this.pendencyRepository.findById(t);if(!i)throw new p("A pend\xEAncia n\xE3o existe.");return await Promise.all([this.pendencyRepository.deleteById(i.id),this.firebaseStorageService.deleteFile({fileUrl:i.documentUrl})]),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as DI}from"@asteasolutions/zod-to-openapi";import{PendencyStatus as UI}from"@prisma/client";import Oe from"zod";var qI=1,OI=6;DI(Oe);var um=Oe.object({page:Oe.coerce.number().min(1).default(qI),limit:Oe.coerce.number().min(1).default(OI),title:Oe.string().optional(),description:Oe.string().optional(),status:Oe.enum(UI).default("PENDING"),userId:Oe.uuid().optional(),orderBy:Oe.enum(["asc","desc"]).default("desc")}),vi=class{constructor(e){this.pendencyRepository=e}async handle(e,r){try{let{description:t,limit:i,orderBy:n,page:s,title:a,status:c,userId:d}=um.parse(e.query),R=s*i-i,[A,G]=await Promise.all([this.pendencyRepository.find({pagination:{offset:R,limit:i},filter:{title:a,description:t,status:c,orderBy:n,userId:d}}),this.pendencyRepository.count({filter:{title:a,description:t,status:c,userId:d}})]),J=Math.max(Math.ceil(G/i),1);return r.status(200).json({page:s,totalPages:J,offset:R,limit:i,pendencies:A})}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as kI}from"@asteasolutions/zod-to-openapi";import gm from"zod";kI(gm);var fm=gm.object({pendencyId:gm.uuid()}),Ei=class{constructor(e){this.pendencyRepository=e}async handle(e,r){try{let{pendencyId:t}=fm.parse({pendencyId:e.params.pendency_id}),i=await this.pendencyRepository.findById(t);if(!i)throw new p("Pend\xEAncia n\xE3o encontrada.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as NI}from"@asteasolutions/zod-to-openapi";import{PendencyStatus as GI}from"@prisma/client";import it from"zod";NI(it);var xi=it.object({id:it.uuid(),title:it.string().min(1),description:it.string().optional(),status:it.enum(GI),dueDate:it.coerce.date().optional(),document:it.any().refine(o=>o==null||typeof o=="object"&&typeof o.size=="number"&&(o.size===0||o.size>0),"Arquivo do documento \xE9 inv\xE1lido").optional()}),ji=class{constructor(e,r){this.pendencyRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{document:t,id:i,...n}=xi.parse({...e.body,id:e.params.pendency_id,document:e.file}),s=await this.pendencyRepository.findById(i);if(!s)throw new se("A pend\xEAncia n\xE3o existe");let a=s.documentUrl;return t&&t.size>0&&(a=await this.firebaseStorageService.updateFile({file:t,id:s.userId,folder:j.PENDENCY,fileUrl:s.documentUrl})),await this.pendencyRepository.update({...n,id:i,documentUrl:a}),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var tl={method:"post",path:"/pendency/{user_id}",tags:["Pendencies"],summary:"Create pendency for user",security:[{bearerAuth:[]}],request:{params:Si.pick({userId:!0}).transform(()=>({user_id:""})),body:{content:{"multipart/form-data":{schema:Si.omit({userId:!0})}}}},responses:{201:{description:"Pendency created successfully for the user",summary:"Pendency Created",content:{"application/json":{schema:q.object({})}}},400:{description:"Invalid input data or file format",summary:"Validation Error",content:{"application/json":{schema:q.object({errors:q.record(q.string(),q.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:q.object({message:q.string()})}}}}},rl={method:"get",path:"/pendency",tags:["Pendencies"],summary:"List pendencies",security:[{bearerAuth:[]}],request:{query:um},responses:{200:{description:"Paginated list of pendencies retrieved successfully",summary:"Pendencies Retrieved",content:{"application/json":{schema:q.object({page:q.number(),totalPages:q.number(),offset:q.number(),limit:q.number(),pendencies:q.array(q.object({id:q.string(),title:q.string(),description:q.string().nullable(),status:q.enum(el.PendencyStatus),dueDate:q.date().nullable(),documentUrl:q.string(),userId:q.string(),createdAt:q.date(),updatedAt:q.date()}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:q.object({errors:q.record(q.string(),q.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:q.object({message:q.string()})}}}}},ol={method:"get",path:"/pendency/{pendency_id}",tags:["Pendencies"],summary:"Find pendency by ID",security:[{bearerAuth:[]}],request:{params:fm},responses:{200:{description:"Pendency details retrieved successfully",summary:"Pendency Retrieved",content:{"application/json":{schema:q.object({id:q.string(),title:q.string(),description:q.string().nullable(),status:q.enum(el.PendencyStatus),dueDate:q.date().nullable(),documentUrl:q.string(),userId:q.string(),createdAt:q.date(),updatedAt:q.date()}).nullable()}}},400:{description:"Invalid pendency ID format",summary:"Validation Error",content:{"application/json":{schema:q.object({errors:q.record(q.string(),q.string())})}}},404:{description:"Pendency not found with the provided ID",summary:"Pendency Not Found",content:{"application/json":{schema:q.object({message:q.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:q.object({message:q.string()})}}}}},il={method:"put",path:"/pendency/{pendency_id}",tags:["Pendencies"],summary:"Update pendency",security:[{bearerAuth:[]}],request:{params:xi.pick({id:!0}).transform(()=>({pendency_id:""})),body:{content:{"multipart/form-data":{schema:xi.omit({id:!0})}}}},responses:{204:{description:"Pendency updated successfully",summary:"Pendency Updated"},400:{description:"Invalid input data or pendency does not exist",summary:"Validation Error",content:{"application/json":{schema:q.object({errors:q.record(q.string(),q.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:q.object({message:q.string()})}}}}},nl={method:"delete",path:"/pendency/{pendency_id}",tags:["Pendencies"],summary:"Delete pendency",security:[{bearerAuth:[]}],request:{params:lm},responses:{204:{description:"Pendency deleted successfully",summary:"Pendency Deleted"},400:{description:"Invalid pendency ID format",summary:"Validation Error",content:{"application/json":{schema:q.object({errors:q.record(q.string(),q.string())})}}},404:{description:"Pendency not found with the provided ID",summary:"Pendency Not Found",content:{"application/json":{schema:q.object({message:q.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:q.object({message:q.string()})}}}}};import w from"zod";import{extendZodWithOpenApi as LI}from"@asteasolutions/zod-to-openapi";import ym from"zod";LI(ym);var hm=ym.object({id:ym.uuid()}),Pi=class{constructor(e,r){this.postGraduateProgramRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=hm.parse({id:e.params.id}),i=await this.postGraduateProgramRepository.findById(t);if(!i)throw new p("O programa de p\xF3s-gradua\xE7\xE3o n\xE3o existe.");return i.imageUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.imageUrl}),await this.postGraduateProgramRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as _I}from"@asteasolutions/zod-to-openapi";import Rm from"zod";_I(Rm);var Im=Rm.object({id:Rm.uuid()}),Mi=class{constructor(e){this.postGraduateProgramRepository=e}async handle(e,r){try{let{id:t}=Im.parse({id:e.params.id}),i=await this.postGraduateProgramRepository.findById(t);if(!i)throw new p("Programa de p\xF3s-gradua\xE7\xE3o n\xE3o encontrado.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as WI}from"@asteasolutions/zod-to-openapi";import nt from"zod";var zI=1,HI=6;WI(nt);var bm=nt.object({page:nt.coerce.number().min(1).default(zI),limit:nt.coerce.number().min(1).default(HI),title:nt.string().optional(),description:nt.string().optional(),contact:nt.string().optional(),orderBy:nt.enum(["asc","desc"]).default("desc")}),Ai=class{constructor(e){this.postGraduateProgramRepository=e}async handle(e,r){try{let{limit:t,page:i,...n}=bm.parse(e.query),s=i*t-t,[a,c]=await Promise.all([this.postGraduateProgramRepository.find({pagination:{offset:s,limit:t},filter:n}),this.postGraduateProgramRepository.count({filter:n})]),d=Math.max(Math.ceil(c/t),1);return r.status(200).json({page:i,totalPages:d,offset:s,limit:t,postGraduatePrograms:a})}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as VI}from"@asteasolutions/zod-to-openapi";import Ae from"zod";var al=5,sl=1024,ZI=sl*sl,KI=al*ZI;VI(Ae);var Cm=Ae.object({id:Ae.uuid(),title:Ae.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio.").optional(),description:Ae.string().optional(),startDate:Ae.coerce.date().optional(),endDate:Ae.coerce.date().optional(),contact:Ae.string().min(1,"Contato \xE9 obrigat\xF3rio.").optional(),registrationLink:Ae.url("URL de inscri\xE7\xE3o deve ser v\xE1lida").optional(),image:Ae.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=KI,`A imagem deve ter no m\xE1ximo ${al}MB.`).optional()}),Ti=class{constructor(e,r){this.postGraduateProgramRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,image:i,title:n,description:s,startDate:a,endDate:c,contact:d,registrationLink:R}=Cm.parse({id:e.params.id,...e.body,image:e.file}),A=await this.postGraduateProgramRepository.findById(t);if(!A)throw new p("O programa de p\xF3s-gradua\xE7\xE3o n\xE3o existe.");let G=A.imageUrl;if(i&&(G=await this.firebaseStorageService.uploadFile({file:i,id:t,folder:j.POST_GRADUATE_PROGRAM})),!G)throw new m("URL da imagem \xE9 obrigat\xF3rio");return await this.postGraduateProgramRepository.update({id:t,title:n,description:s,startDate:a,endDate:c,contact:d,registrationLink:R,imageUrl:G}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var ml={method:"post",path:"/post-graduate-programs",tags:["Post Graduate Programs"],summary:"Create post-graduate program",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:w.object({title:w.string().min(1).openapi({description:"T\xEDtulo do programa"}),description:w.string().optional().openapi({description:"Descri\xE7\xE3o do programa"}),startDate:w.string().openapi({description:"Data de in\xEDcio (ISO 8601)",example:"2024-01-01T10:00:00Z"}),endDate:w.string().openapi({description:"Data de t\xE9rmino (ISO 8601)",example:"2024-12-31T10:00:00Z"}),contact:w.string().min(1).openapi({description:"Informa\xE7\xF5es de contato"}),registrationLink:w.string().url().optional().openapi({description:"Link de inscri\xE7\xE3o"}),image:w.string().optional().openapi({description:"Imagem do programa (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{201:{description:"Post-graduate program created successfully",summary:"Program Created"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:w.object({errors:w.record(w.string(),w.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:w.object({message:w.string()})}}}}},cl={method:"get",path:"/post-graduate-programs",tags:["Post Graduate Programs"],summary:"List post-graduate programs",security:[{bearerAuth:[]}],request:{query:bm},responses:{200:{description:"Paginated list of post-graduate programs retrieved successfully",summary:"Programs Retrieved",content:{"application/json":{schema:w.object({page:w.number(),totalPages:w.number(),offset:w.number(),limit:w.number(),postGraduatePrograms:w.array(w.object({id:w.string(),title:w.string(),imageUrl:w.string().nullable(),description:w.string().nullable(),startDate:w.date(),endDate:w.date(),contact:w.string(),registrationLink:w.string().nullable(),createdAt:w.date(),updatedAt:w.date()}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:w.object({errors:w.record(w.string(),w.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:w.object({message:w.string()})}}}}},pl={method:"get",path:"/post-graduate-programs/{id}",tags:["Post Graduate Programs"],summary:"Find post-graduate program by ID",security:[{bearerAuth:[]}],request:{params:Im},responses:{200:{description:"Post-graduate program details retrieved successfully",summary:"Program Retrieved",content:{"application/json":{schema:w.object({id:w.string(),title:w.string(),imageUrl:w.string().nullable(),description:w.string().nullable(),startDate:w.date(),endDate:w.date(),contact:w.string(),registrationLink:w.string().nullable(),createdAt:w.date(),updatedAt:w.date()}).nullable()}}},400:{description:"Invalid program ID format",summary:"Validation Error",content:{"application/json":{schema:w.object({errors:w.record(w.string(),w.string())})}}},404:{description:"Post-graduate program not found with the provided ID",summary:"Program Not Found",content:{"application/json":{schema:w.object({message:w.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:w.object({message:w.string()})}}}}},dl={method:"put",path:"/post-graduate-programs/{id}",tags:["Post Graduate Programs"],summary:"Update post-graduate program",security:[{bearerAuth:[]}],request:{params:Cm.pick({id:!0}),body:{content:{"multipart/form-data":{schema:w.object({title:w.string().min(1).optional().openapi({description:"T\xEDtulo do programa"}),description:w.string().optional().openapi({description:"Descri\xE7\xE3o do programa"}),startDate:w.string().optional().openapi({description:"Data de in\xEDcio (ISO 8601)",example:"2024-01-01T10:00:00Z"}),endDate:w.string().optional().openapi({description:"Data de t\xE9rmino (ISO 8601)",example:"2024-12-31T10:00:00Z"}),contact:w.string().min(1).optional().openapi({description:"Informa\xE7\xF5es de contato"}),registrationLink:w.string().url().optional().openapi({description:"Link de inscri\xE7\xE3o"}),image:w.string().optional().openapi({description:"Imagem do programa (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{200:{description:"Post-graduate program updated successfully",summary:"Program Updated"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:w.object({errors:w.record(w.string(),w.string())})}}},404:{description:"Post-graduate program not found with the provided ID",summary:"Program Not Found",content:{"application/json":{schema:w.object({message:w.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:w.object({message:w.string()})}}}}},ll={method:"delete",path:"/post-graduate-programs/{id}",tags:["Post Graduate Programs"],summary:"Delete post-graduate program",security:[{bearerAuth:[]}],request:{params:hm},responses:{200:{description:"Post-graduate program deleted successfully",summary:"Program Deleted"},400:{description:"Invalid program ID format",summary:"Validation Error",content:{"application/json":{schema:w.object({errors:w.record(w.string(),w.string())})}}},404:{description:"Post-graduate program not found with the provided ID",summary:"Program Not Found",content:{"application/json":{schema:w.object({message:w.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:w.object({message:w.string()})}}}}};import{RegimentStatus as pb}from"@prisma/client";import B from"zod";import{extendZodWithOpenApi as JI}from"@asteasolutions/zod-to-openapi";import{RegimentStatus as gl}from"@prisma/client";import ht from"zod";var fl=10,ul=1024,YI=ul*ul,XI=fl*YI;JI(ht);var Sm=ht.object({title:ht.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio"),version:ht.string().min(1,"Vers\xE3o \xE9 obrigat\xF3ria"),publishedAt:ht.coerce.date(),document:ht.any().refine(o=>o==null||typeof o!="object"||typeof o.size!="number"?!1:o.size<=XI,`O documento deve ter no m\xE1ximo ${fl}MB.`),status:ht.enum(gl).optional()}),Fi=class{constructor(e,r){this.regimentRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{title:t,version:i,publishedAt:n,document:s,status:a}=Sm.parse({...e.body,document:e.file}),c=await this.regimentRepository.create({title:t,version:i,publishedAt:n,documentUrl:"",status:a??gl.IN_FORCE}),d=await this.firebaseStorageService.uploadFile({file:s,id:c.id,folder:j.REGIMENT});return await this.regimentRepository.update({id:c.id,documentUrl:d}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as $I}from"@asteasolutions/zod-to-openapi";import wm from"zod";$I(wm);var vm=wm.object({id:wm.uuid()}),Bi=class{constructor(e,r){this.regimentRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=vm.parse({id:e.params.id}),i=await this.regimentRepository.findById(t);if(!i)throw new p("O regimento n\xE3o existe.");return i.documentUrl&&await this.firebaseStorageService.deleteFile({fileUrl:i.documentUrl}),await this.regimentRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as QI}from"@asteasolutions/zod-to-openapi";import Em from"zod";QI(Em);var Ui=Em.object({id:Em.uuid()}),Di=class{constructor(e){this.regimentRepository=e}async handle(e,r){try{let{id:t}=Ui.parse({id:e.params.id}),i=await this.regimentRepository.findById(t);if(!i)throw new p("O regimento n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as eb}from"@asteasolutions/zod-to-openapi";import{RegimentStatus as tb}from"@prisma/client";import jm from"zod";eb(jm);var xm=jm.object({status:jm.enum(tb)}),qi=class{constructor(e){this.regimentRepository=e}async handle(e,r){try{let{status:t}=xm.parse({status:e.params.status}),i=await this.regimentRepository.findByStatus(t);return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as rb}from"@asteasolutions/zod-to-openapi";import{RegimentStatus as ob}from"@prisma/client";import Rt from"zod";var ib=1,nb=10;rb(Rt);var Pm=Rt.object({page:Rt.coerce.number().min(1).default(ib),limit:Rt.coerce.number().min(1).default(nb),title:Rt.string().optional(),status:Rt.enum(ob).optional(),orderBy:Rt.enum(["asc","desc"]).optional()}),Oi=class{constructor(e){this.regimentRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=Pm.parse(e.query),s=i*t-i,[a,c]=await Promise.all([this.regimentRepository.find({pagination:{offset:s,limit:i},filter:n}),this.regimentRepository.count({filter:n})]),d=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:d,offset:s,limit:i,regiments:a})}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as sb}from"@asteasolutions/zod-to-openapi";import{RegimentStatus as ab}from"@prisma/client";import st from"zod";var hl=10,yl=1024,mb=yl*yl,cb=hl*mb;sb(st);var Mm=st.object({id:st.uuid(),title:st.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio").optional(),version:st.string().min(1,"Vers\xE3o \xE9 obrigat\xF3ria").optional(),publishedAt:st.coerce.date().optional(),document:st.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=cb,`O documento deve ter no m\xE1ximo ${hl}MB.`).optional(),status:st.enum(ab).optional()}),ki=class{constructor(e,r){this.regimentRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,title:i,version:n,publishedAt:s,document:a,status:c}=Mm.parse({id:e.params.id,...e.body,document:e.file}),d=await this.regimentRepository.findById(t);if(!d)throw new p("O regimento n\xE3o existe.");let R=d.documentUrl;return a&&(d.documentUrl&&await this.firebaseStorageService.deleteFile({fileUrl:d.documentUrl}),R=await this.firebaseStorageService.uploadFile({file:a,id:t,folder:j.REGIMENT})),await this.regimentRepository.update({id:t,title:i,version:n,publishedAt:s,documentUrl:R??void 0,status:c}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var Am=B.object({id:B.uuid(),title:B.string(),version:B.string(),publishedAt:B.date(),documentUrl:B.string(),status:B.enum(pb),createdAt:B.date(),updatedAt:B.date()}),Rl={method:"post",path:"/regiment",tags:["Regiments"],summary:"Create a new regiment with document upload",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:Sm}}}},responses:{201:{description:"Regiment created successfully",summary:"Regiment Created"},400:{description:"Invalid input data, missing required fields, or invalid document format/size",summary:"Validation Error",content:{"application/json":{schema:B.object({errors:B.record(B.string(),B.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:B.object({message:B.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:B.object({message:B.string()})}}}}},Il={method:"get",path:"/regiment",tags:["Regiments"],summary:"List all regiments with pagination and filters",request:{query:Pm},responses:{200:{description:"List of regiments retrieved successfully with pagination",summary:"Regiments Retrieved",content:{"application/json":{schema:B.object({page:B.number(),totalPages:B.number(),offset:B.number(),limit:B.number(),regiments:B.array(Am)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:B.object({errors:B.record(B.string(),B.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:B.object({message:B.string()})}}}}},bl={method:"get",path:"/regiment/{id}",tags:["Regiments"],summary:"Find regiment by ID",request:{params:Ui},responses:{200:{description:"Regiment details retrieved successfully",summary:"Regiment Retrieved",content:{"application/json":{schema:Am}}},400:{description:"Invalid regiment ID format",summary:"Validation Error",content:{"application/json":{schema:B.object({errors:B.record(B.string(),B.string())})}}},404:{description:"Regiment not found with the provided ID",summary:"Regiment Not Found",content:{"application/json":{schema:B.object({message:B.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:B.object({message:B.string()})}}}}},Cl={method:"get",path:"/regiment/status/{status}",tags:["Regiments"],summary:"Find regiments by status",request:{params:xm},responses:{200:{description:"Regiments retrieved successfully by status",summary:"Regiments Retrieved by Status",content:{"application/json":{schema:B.array(Am)}}},400:{description:"Invalid status parameter provided",summary:"Validation Error",content:{"application/json":{schema:B.object({errors:B.record(B.string(),B.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:B.object({message:B.string()})}}}}},Sl={method:"put",path:"/regiment/{id}",tags:["Regiments"],summary:"Update regiment with optional document upload",security:[{bearerAuth:[]}],request:{params:Ui,body:{content:{"multipart/form-data":{schema:Mm.omit({id:!0})}}}},responses:{200:{description:"Regiment updated successfully",summary:"Regiment Updated"},400:{description:"Invalid input data, regiment ID format, or invalid document format/size",summary:"Validation Error",content:{"application/json":{schema:B.object({errors:B.record(B.string(),B.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:B.object({message:B.string()})}}},404:{description:"Regiment not found with the provided ID",summary:"Regiment Not Found",content:{"application/json":{schema:B.object({message:B.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:B.object({message:B.string()})}}}}},wl={method:"delete",path:"/regiment/{id}",tags:["Regiments"],summary:"Delete regiment",security:[{bearerAuth:[]}],request:{params:vm},responses:{200:{description:"Regiment deleted successfully",summary:"Regiment Deleted"},400:{description:"Invalid regiment ID format",summary:"Validation Error",content:{"application/json":{schema:B.object({errors:B.record(B.string(),B.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:B.object({message:B.string()})}}},404:{description:"Regiment not found with the provided ID",summary:"Regiment Not Found",content:{"application/json":{schema:B.object({message:B.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:B.object({message:B.string()})}}}}};import V from"zod";import{extendZodWithOpenApi as db}from"@asteasolutions/zod-to-openapi";import br from"zod";var El=5,vl=1024,lb=vl*vl,ub=El*lb;db(br);var Tm=br.object({caption:br.string().optional(),image:br.any().refine(o=>o==null||typeof o!="object"||typeof o.size!="number"?!1:o.size<=ub,`A imagem deve ter no m\xE1ximo ${El}MB.`),congressId:br.uuid()}),Ni=class{constructor(e,r,t){this.regionalCongressGalleryRepository=e;this.regionalCongressRepository=r;this.firebaseStorageService=t}async handle(e,r){try{let{caption:t,image:i,congressId:n}=Tm.parse({...e.body,...e.params,image:e.file});if(!await this.regionalCongressRepository.findById(n))throw new p("O congresso n\xE3o existe.");let a=await this.regionalCongressGalleryRepository.create({caption:t,congressId:n,imageUrl:""}),c=await this.firebaseStorageService.uploadFile({file:i,id:a.id,folder:j.GALLERY});return await this.regionalCongressGalleryRepository.update({id:a.id,imageUrl:c}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as gb}from"@asteasolutions/zod-to-openapi";import Fm from"zod";gb(Fm);var Li=Fm.object({id:Fm.uuid("ID inv\xE1lido")}),Gi=class{constructor(e){this.regionalCongressGalleryRepository=e}async handle(e,r){try{let{id:t}=Li.parse(e.params);if(!await this.regionalCongressGalleryRepository.findById(t))throw new p("Item de galeria n\xE3o encontrado");return await this.regionalCongressGalleryRepository.deleteById(t),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as fb}from"@asteasolutions/zod-to-openapi";import Vt from"zod";fb(Vt);var Bm=Vt.object({congressId:Vt.uuid("ID do congresso inv\xE1lido"),page:Vt.coerce.number().int().positive().default(1),limit:Vt.coerce.number().int().positive().default(10),caption:Vt.string().optional()}),_i=class{constructor(e){this.regionalCongressGalleryRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=Bm.parse({...e.params,...e.query}),s=(t-1)*i,a=await this.regionalCongressGalleryRepository.findByCongressId({pagination:{offset:s,limit:i},filter:n});if(!a)throw new p("Itens de galeria n\xE3o encontrados");let c=await this.regionalCongressGalleryRepository.count({filter:n});return r.status(200).json({data:a,pagination:{page:t,limit:i,total:c,totalPages:Math.ceil(c/i)}})}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as yb}from"@asteasolutions/zod-to-openapi";import Cr from"zod";var xl=5,jl=1024,hb=jl*jl,Rb=xl*hb;yb(Cr);var Dm=Cr.object({id:Cr.string().uuid("ID inv\xE1lido"),caption:Cr.string().optional(),image:Cr.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=Rb,`A imagem deve ter no m\xE1ximo ${xl}MB.`).optional()}),Wi=class{constructor(e,r){this.regionalCongressGalleryRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,caption:i,image:n}=Dm.parse({...e.params,...e.body,image:e.file});if(!await this.regionalCongressGalleryRepository.findById(t))throw new p("Item de galeria n\xE3o encontrado");let a;return n&&(a=await this.firebaseStorageService.uploadFile({file:n,id:t,folder:j.GALLERY})),await this.regionalCongressGalleryRepository.update({id:t,caption:i,...a&&{imageUrl:a}}),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var Ib=V.object({id:V.uuid(),imageUrl:V.string(),caption:V.string().nullable(),congressId:V.uuid()}),Pl={method:"post",path:"/regional-congress/{congressId}/gallery",tags:["Regional Congresses"],summary:"Create a new congress gallery image",security:[{bearerAuth:[]}],request:{params:V.object({congressId:V.uuid()}),body:{content:{"application/json":{schema:Tm.omit({congressId:!0})}}}},responses:{201:{description:"Congress gallery image created successfully",summary:"Congress Gallery Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:V.object({errors:V.record(V.string(),V.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:V.object({message:V.string()})}}},404:{description:"Congress not found with the provided ID",summary:"Congress Not Found",content:{"application/json":{schema:V.object({message:V.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:V.object({message:V.string()})}}}}},Ml={method:"get",path:"/regional-congress/{congressId}/gallery",tags:["Regional Congresses"],summary:"Find congress gallery images by congress ID",request:{params:Bm},responses:{200:{description:"Congress gallery images retrieved successfully by congress ID",summary:"Congress Galleries Retrieved",content:{"application/json":{schema:V.array(Ib)}}},400:{description:"Invalid congress ID parameter provided",summary:"Validation Error",content:{"application/json":{schema:V.object({errors:V.record(V.string(),V.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:V.object({message:V.string()})}}}}},Al={method:"put",path:"/regional-congress/gallery/{id}",tags:["Regional Congresses"],summary:"Update congress gallery image",security:[{bearerAuth:[]}],request:{params:Li,body:{content:{"application/json":{schema:Dm.omit({id:!0})}}}},responses:{200:{description:"Congress gallery image updated successfully",summary:"Congress Gallery Updated"},400:{description:"Invalid input data or gallery ID format",summary:"Validation Error",content:{"application/json":{schema:V.object({errors:V.record(V.string(),V.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:V.object({message:V.string()})}}},404:{description:"Congress gallery image not found with the provided ID",summary:"Congress Gallery Not Found",content:{"application/json":{schema:V.object({message:V.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:V.object({message:V.string()})}}}}},Tl={method:"delete",path:"/regional-congress/gallery/{id}",tags:["Regional Congresses"],summary:"Delete congress gallery image",security:[{bearerAuth:[]}],request:{params:Li},responses:{200:{description:"Congress gallery image deleted successfully",summary:"Congress Gallery Deleted"},400:{description:"Invalid gallery ID format",summary:"Validation Error",content:{"application/json":{schema:V.object({errors:V.record(V.string(),V.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:V.object({message:V.string()})}}},404:{description:"Congress gallery image not found with the provided ID",summary:"Congress Gallery Not Found",content:{"application/json":{schema:V.object({message:V.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:V.object({message:V.string()})}}}}};import Z from"zod";import{extendZodWithOpenApi as bb}from"@asteasolutions/zod-to-openapi";import Sr from"zod";var Bl=2,Fl=1024,Cb=Fl*Fl,Sb=Bl*Cb;bb(Sr);var Um=Sr.object({name:Sr.string().min(1,"Nome \xE9 obrigat\xF3rio"),logo:Sr.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=Sb,`A imagem deve ter no m\xE1ximo ${Bl}MB.`).optional(),congressId:Sr.uuid()}),zi=class{constructor(e,r,t){this.regionalCongressPartnerRepository=e;this.regionalCongressRepository=r;this.firebaseStorageService=t}async handle(e,r){try{let{name:t,logo:i,congressId:n}=Um.parse({...e.body,...e.params,logo:e.file});if(!await this.regionalCongressRepository.findById(n))throw new p("O congresso n\xE3o existe.");let a=await this.regionalCongressPartnerRepository.create({name:t,congressId:n}),c;return i&&(c=await this.firebaseStorageService.uploadFile({file:i,id:a.id,folder:j.PARTNER}),await this.regionalCongressPartnerRepository.update({id:a.id,logoUrl:c})),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as wb}from"@asteasolutions/zod-to-openapi";import qm from"zod";wb(qm);var Vi=qm.object({id:qm.string().uuid("ID inv\xE1lido")}),Hi=class{constructor(e){this.regionalCongressPartnerRepository=e}async handle(e,r){try{let{id:t}=Vi.parse(e.params);if(!await this.regionalCongressPartnerRepository.findById(t))throw new p("Parceiro n\xE3o encontrado");return await this.regionalCongressPartnerRepository.deleteById(t),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as vb}from"@asteasolutions/zod-to-openapi";import Zt from"zod";vb(Zt);var Om=Zt.object({congressId:Zt.uuid("ID do congresso inv\xE1lido"),page:Zt.coerce.number().int().positive().optional(),limit:Zt.coerce.number().int().positive().optional(),name:Zt.string().optional()}),Zi=class{constructor(e){this.regionalCongressPartnerRepository=e}async handle(e,r){try{let{congressId:t,page:i,limit:n,name:s}=Om.parse({...e.params,...e.query}),a=i!==void 0&&n!==void 0,c=a?{offset:(i-1)*n,limit:n}:void 0,d=await this.regionalCongressPartnerRepository.findByCongressId({pagination:c,filter:{congressId:t,name:s}});if(!d)throw new p("Parceiros n\xE3o encontrados");if(!a)return r.status(200).json(d);let R=await this.regionalCongressPartnerRepository.count({filter:{congressId:t,name:s}});return r.status(200).json({data:d,pagination:{page:i,limit:n,total:R,totalPages:Math.ceil(R/n)}})}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as Eb}from"@asteasolutions/zod-to-openapi";import wr from"zod";var Ul=2,Dl=1024,jb=Dl*Dl,xb=Ul*jb;Eb(wr);var km=wr.object({id:wr.string().uuid("ID inv\xE1lido"),name:wr.string().min(1,"Nome \xE9 obrigat\xF3rio").optional(),logo:wr.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=xb,`A imagem deve ter no m\xE1ximo ${Ul}MB.`).optional()}),Ki=class{constructor(e,r){this.regionalCongressPartnerRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,name:i,logo:n}=km.parse({...e.params,...e.body,logo:e.file});if(!await this.regionalCongressPartnerRepository.findById(t))throw new p("Parceiro n\xE3o encontrado");let a;return n&&(a=await this.firebaseStorageService.uploadFile({file:n,id:t,folder:j.PARTNER})),await this.regionalCongressPartnerRepository.update({id:t,name:i,...a&&{logoUrl:a}}),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var Pb=Z.object({id:Z.uuid(),name:Z.string(),logoUrl:Z.string().nullable(),congressId:Z.uuid()}),ql={method:"post",path:"/regional-congress/{congressId}/partner",tags:["Regional Congresses"],summary:"Create a new congress partner",security:[{bearerAuth:[]}],request:{params:Z.object({congressId:Z.uuid()}),body:{content:{"application/json":{schema:Um.omit({congressId:!0})}}}},responses:{201:{description:"Congress partner created successfully",summary:"Congress Partner Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:Z.object({errors:Z.record(Z.string(),Z.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:Z.object({message:Z.string()})}}},404:{description:"Congress not found with the provided ID",summary:"Congress Not Found",content:{"application/json":{schema:Z.object({message:Z.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Z.object({message:Z.string()})}}}}},Ol={method:"get",path:"/regional-congress/{congressId}/partner",tags:["Regional Congresses"],summary:"Find congress partners by congress ID",request:{params:Om},responses:{200:{description:"Congress partners retrieved successfully by congress ID",summary:"Congress Partners Retrieved",content:{"application/json":{schema:Z.array(Pb)}}},400:{description:"Invalid congress ID parameter provided",summary:"Validation Error",content:{"application/json":{schema:Z.object({errors:Z.record(Z.string(),Z.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Z.object({message:Z.string()})}}}}},kl={method:"put",path:"/regional-congress/partner/{id}",tags:["Regional Congresses"],summary:"Update congress partner",security:[{bearerAuth:[]}],request:{params:Vi,body:{content:{"application/json":{schema:km.omit({id:!0})}}}},responses:{200:{description:"Congress partner updated successfully",summary:"Congress Partner Updated"},400:{description:"Invalid input data or partner ID format",summary:"Validation Error",content:{"application/json":{schema:Z.object({errors:Z.record(Z.string(),Z.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:Z.object({message:Z.string()})}}},404:{description:"Congress partner not found with the provided ID",summary:"Congress Partner Not Found",content:{"application/json":{schema:Z.object({message:Z.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Z.object({message:Z.string()})}}}}},Nl={method:"delete",path:"/regional-congress/partner/{id}",tags:["Regional Congresses"],summary:"Delete congress partner",security:[{bearerAuth:[]}],request:{params:Vi},responses:{200:{description:"Congress partner deleted successfully",summary:"Congress Partner Deleted"},400:{description:"Invalid partner ID format",summary:"Validation Error",content:{"application/json":{schema:Z.object({errors:Z.record(Z.string(),Z.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:Z.object({message:Z.string()})}}},404:{description:"Congress partner not found with the provided ID",summary:"Congress Partner Not Found",content:{"application/json":{schema:Z.object({message:Z.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Z.object({message:Z.string()})}}}}};import u from"zod";import{extendZodWithOpenApi as Mb}from"@asteasolutions/zod-to-openapi";import $ from"zod";Mb($);var Nm=$.object({title:$.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio"),edition:$.coerce.number().int().positive("Edi\xE7\xE3o deve ser um n\xFAmero positivo"),startDate:$.coerce.date(),endDate:$.coerce.date(),description:$.string().optional(),location:$.string().optional(),congressLink:$.union([$.url("Link do congresso deve ser uma URL v\xE1lida"),$.literal("")]),noticeUrl:$.union([$.url("URL do edital deve ser uma URL v\xE1lida"),$.literal("")]),scheduleUrl:$.union([$.url("URL do cronograma deve ser uma URL v\xE1lida"),$.literal("")]),programUrl:$.union([$.url("URL da programa\xE7\xE3o deve ser uma URL v\xE1lida"),$.literal("")]),adminReportUrl:$.union([$.url("URL do relat\xF3rio administrativo deve ser uma URL v\xE1lida"),$.literal("")]),proceedingsUrl:$.union([$.url("URL dos anais deve ser uma URL v\xE1lida"),$.literal("")])}).refine(o=>o.endDate>=o.startDate,{message:"Data de t\xE9rmino deve ser posterior ou igual \xE0 data de in\xEDcio",path:["endDate"]}),Ji=class{constructor(e){this.regionalCongressRepository=e}async handle(e,r){try{let t=Nm.parse(e.body);return await this.regionalCongressRepository.create(t),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as Ab}from"@asteasolutions/zod-to-openapi";import Gm from"zod";Ab(Gm);var Lm=Gm.object({id:Gm.string().uuid("ID inv\xE1lido")}),Yi=class{constructor(e){this.regionalCongressRepository=e}async handle(e,r){try{let{id:t}=Lm.parse(e.params);if(!await this.regionalCongressRepository.findById(t))throw new p("Congresso regional n\xE3o encontrado");return await this.regionalCongressRepository.deleteById(t),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as Tb}from"@asteasolutions/zod-to-openapi";import _m from"zod";Tb(_m);var Wm=_m.object({edition:_m.coerce.number().int().positive("Edi\xE7\xE3o deve ser um n\xFAmero positivo")}),Xi=class{constructor(e){this.regionalCongressRepository=e}async handle(e,r){try{let{edition:t}=Wm.parse(e.params),i=await this.regionalCongressRepository.findByEdition(t);if(!i||i.length===0)throw new p("Congresso regional n\xE3o encontrado");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as Fb}from"@asteasolutions/zod-to-openapi";import zm from"zod";Fb(zm);var Qi=zm.object({id:zm.string().uuid("ID inv\xE1lido")}),$i=class{constructor(e){this.regionalCongressRepository=e}async handle(e,r){try{let{id:t}=Qi.parse(e.params),i=await this.regionalCongressRepository.findById(t);if(!i)throw new p("Congresso regional n\xE3o encontrado");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as Bb}from"@asteasolutions/zod-to-openapi";import at from"zod";Bb(at);var Hm=at.object({page:at.coerce.number().int().positive().default(1),limit:at.coerce.number().int().positive().default(10),title:at.string().optional(),edition:at.coerce.number().int().positive().optional(),location:at.string().optional(),orderBy:at.enum(["asc","desc"]).optional().default("desc")}),en=class{constructor(e){this.regionalCongressRepository=e}async handle(e,r){try{let{page:t,limit:i,orderBy:n,...s}=Hm.parse(e.query),a=(t-1)*i,c=await this.regionalCongressRepository.find({pagination:{offset:a,limit:i},filter:{...s,orderBy:n}});if(!c)throw new p("Congressos regionais n\xE3o encontrados");let d=await this.regionalCongressRepository.count({filter:s});return r.status(200).json({data:c,pagination:{page:t,limit:i,total:d,totalPages:Math.ceil(d/i)}})}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as Db}from"@asteasolutions/zod-to-openapi";import X from"zod";Db(X);var Vm=X.object({id:X.string().uuid("ID inv\xE1lido"),title:X.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio").optional(),edition:X.coerce.number().int().positive("Edi\xE7\xE3o deve ser um n\xFAmero positivo").optional(),startDate:X.coerce.date().optional(),endDate:X.coerce.date().optional(),description:X.string().optional(),location:X.string().optional(),congressLink:X.union([X.url("Link do congresso deve ser uma URL v\xE1lida"),X.literal("")]),noticeUrl:X.union([X.url("URL do edital deve ser uma URL v\xE1lida"),X.literal("")]),scheduleUrl:X.union([X.url("URL do cronograma deve ser uma URL v\xE1lida"),X.literal("")]),programUrl:X.union([X.url("URL da programa\xE7\xE3o deve ser uma URL v\xE1lida"),X.literal("")]),adminReportUrl:X.union([X.url("URL do relat\xF3rio administrativo deve ser uma URL v\xE1lida"),X.literal("")]),proceedingsUrl:X.union([X.url("URL dos anais deve ser uma URL v\xE1lida"),X.literal("")])}).refine(o=>o.startDate&&o.endDate?o.endDate>=o.startDate:!0,{message:"Data de t\xE9rmino deve ser posterior ou igual \xE0 data de in\xEDcio",path:["endDate"]}),tn=class{constructor(e){this.regionalCongressRepository=e}async handle(e,r){try{let{id:t}=X.object({id:X.string().uuid()}).parse(e.params);if(!await this.regionalCongressRepository.findById(t))throw new p("Congresso regional n\xE3o encontrado");let n=Vm.parse({id:t,...e.body});return await this.regionalCongressRepository.update(n),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var Ub=9,qb=u.object({image:u.any().openapi({type:"string",format:"binary"}),caption:u.string().optional()}),Ob=u.object({image:u.any().openapi({type:"string",format:"binary"}).optional(),caption:u.string().optional()}),kb=u.object({id:u.uuid(),name:u.string(),logoUrl:u.string().nullable(),congressId:u.uuid()}),Zm=u.object({id:u.uuid(),imageUrl:u.string(),caption:u.string().nullable(),congressId:u.uuid()}),Km=u.object({id:u.uuid(),title:u.string(),edition:u.number(),startDate:u.date(),endDate:u.date(),description:u.string().nullable(),location:u.string().nullable(),congressLink:u.string().nullable(),noticeUrl:u.string().nullable(),scheduleUrl:u.string().nullable(),programUrl:u.string().nullable(),adminReportUrl:u.string().nullable(),proceedingsUrl:u.string().nullable(),partners:u.array(kb),galleries:u.array(Zm),createdAt:u.date(),updatedAt:u.date()}),Gl={method:"post",path:"/regional-congress",tags:["Regional Congresses"],summary:"Create a new regional congress",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:Nm}}}},responses:{201:{description:"Regional congress created successfully",summary:"Regional Congress Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:u.object({errors:u.record(u.string(),u.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:u.object({message:u.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:u.object({message:u.string()})}}}}},Ll={method:"get",path:"/regional-congress",tags:["Regional Congresses"],summary:"List all regional congresses with pagination and filters",request:{query:Hm},responses:{200:{description:"List of regional congresses retrieved successfully with pagination",summary:"Regional Congresses Retrieved",content:{"application/json":{schema:u.object({page:u.number(),totalPages:u.number(),offset:u.number(),limit:u.number(),congresses:u.array(Km)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:u.object({errors:u.record(u.string(),u.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:u.object({message:u.string()})}}}}},_l={method:"get",path:"/regional-congress/{id}",tags:["Regional Congresses"],summary:"Find regional congress by ID",request:{params:Qi},responses:{200:{description:"Regional congress details retrieved successfully",summary:"Regional Congress Retrieved",content:{"application/json":{schema:Km}}},400:{description:"Invalid regional congress ID format",summary:"Validation Error",content:{"application/json":{schema:u.object({errors:u.record(u.string(),u.string())})}}},404:{description:"Regional congress not found with the provided ID",summary:"Regional Congress Not Found",content:{"application/json":{schema:u.object({message:u.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:u.object({message:u.string()})}}}}},Wl={method:"get",path:"/regional-congress/edition/{edition}",tags:["Regional Congresses"],summary:"Find regional congresses by edition",request:{params:Wm},responses:{200:{description:"Regional congresses retrieved successfully by edition",summary:"Regional Congresses Retrieved by Edition",content:{"application/json":{schema:u.array(Km)}}},400:{description:"Invalid edition parameter provided",summary:"Validation Error",content:{"application/json":{schema:u.object({errors:u.record(u.string(),u.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:u.object({message:u.string()})}}}}},zl={method:"put",path:"/regional-congress/{id}",tags:["Regional Congresses"],summary:"Update regional congress",security:[{bearerAuth:[]}],request:{params:Qi,body:{content:{"application/json":{schema:Vm.omit({id:!0})}}}},responses:{200:{description:"Regional congress updated successfully",summary:"Regional Congress Updated"},400:{description:"Invalid input data or regional congress ID format",summary:"Validation Error",content:{"application/json":{schema:u.object({errors:u.record(u.string(),u.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:u.object({message:u.string()})}}},404:{description:"Regional congress not found with the provided ID",summary:"Regional Congress Not Found",content:{"application/json":{schema:u.object({message:u.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:u.object({message:u.string()})}}}}},Hl={method:"delete",path:"/regional-congress/{id}",tags:["Regional Congresses"],summary:"Delete regional congress",security:[{bearerAuth:[]}],request:{params:Lm},responses:{200:{description:"Regional congress deleted successfully",summary:"Regional Congress Deleted"},400:{description:"Invalid regional congress ID format",summary:"Validation Error",content:{"application/json":{schema:u.object({errors:u.record(u.string(),u.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:u.object({message:u.string()})}}},404:{description:"Regional congress not found with the provided ID",summary:"Regional Congress Not Found",content:{"application/json":{schema:u.object({message:u.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:u.object({message:u.string()})}}}}},lO={method:"post",path:"/regional-congress/{congressId}/gallery",tags:["Regional Congress Gallery"],summary:"Create a new gallery image for a congress",security:[{bearerAuth:[]}],request:{params:u.object({congressId:u.uuid()}),body:{content:{"multipart/form-data":{schema:qb}}}},responses:{201:{description:"Gallery image created successfully",summary:"Gallery Image Created"},400:{description:"Invalid input data, missing required fields, or invalid image format/size",summary:"Validation Error",content:{"application/json":{schema:u.object({errors:u.record(u.string(),u.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:u.object({message:u.string()})}}},404:{description:"Congress not found with the provided ID",summary:"Congress Not Found",content:{"application/json":{schema:u.object({message:u.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:u.object({message:u.string()})}}}}},uO={method:"get",path:"/regional-congress/{congressId}/gallery",tags:["Regional Congress Gallery"],summary:"List all gallery images for a congress with pagination",request:{params:u.object({congressId:u.uuid()}),query:u.object({page:u.coerce.number().min(1).default(1),limit:u.coerce.number().min(1).default(Ub),caption:u.string().optional()})},responses:{200:{description:"Gallery images retrieved successfully with pagination",summary:"Gallery Images Retrieved",content:{"application/json":{schema:u.object({page:u.number(),totalPages:u.number(),offset:u.number(),limit:u.number(),galleries:u.array(Zm)})}}},400:{description:"Invalid congress ID format or query parameters",summary:"Validation Error",content:{"application/json":{schema:u.object({errors:u.record(u.string(),u.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:u.object({message:u.string()})}}}}},gO={method:"get",path:"/regional-congress/gallery/{id}",tags:["Regional Congress Gallery"],summary:"Find a gallery image by ID",request:{params:u.object({id:u.uuid()})},responses:{200:{description:"Gallery image retrieved successfully",summary:"Gallery Image Retrieved",content:{"application/json":{schema:Zm}}},400:{description:"Invalid gallery image ID format",summary:"Validation Error",content:{"application/json":{schema:u.object({errors:u.record(u.string(),u.string())})}}},404:{description:"Gallery image not found with the provided ID",summary:"Gallery Image Not Found",content:{"application/json":{schema:u.object({message:u.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:u.object({message:u.string()})}}}}},fO={method:"put",path:"/regional-congress/gallery/{id}",tags:["Regional Congress Gallery"],summary:"Update a gallery image with optional image upload",security:[{bearerAuth:[]}],request:{params:u.object({id:u.uuid()}),body:{content:{"multipart/form-data":{schema:Ob}}}},responses:{200:{description:"Gallery image updated successfully",summary:"Gallery Image Updated"},400:{description:"Invalid input data, gallery ID format, or invalid image format/size",summary:"Validation Error",content:{"application/json":{schema:u.object({errors:u.record(u.string(),u.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:u.object({message:u.string()})}}},404:{description:"Gallery image not found with the provided ID",summary:"Gallery Image Not Found",content:{"application/json":{schema:u.object({message:u.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:u.object({message:u.string()})}}}}},yO={method:"delete",path:"/regional-congress/gallery/{id}",tags:["Regional Congress Gallery"],summary:"Delete a gallery image",security:[{bearerAuth:[]}],request:{params:u.object({id:u.uuid()})},responses:{200:{description:"Gallery image deleted successfully",summary:"Gallery Image Deleted"},400:{description:"Invalid gallery ID format",summary:"Validation Error",content:{"application/json":{schema:u.object({errors:u.record(u.string(),u.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:u.object({message:u.string()})}}},404:{description:"Gallery image not found with the provided ID",summary:"Gallery Image Not Found",content:{"application/json":{schema:u.object({message:u.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:u.object({message:u.string()})}}}}};import{$Enums as rc}from"@prisma/client";import I from"zod";import{extendZodWithOpenApi as Nb}from"@asteasolutions/zod-to-openapi";import{Degree as Gb,Seniority as Lb}from"@prisma/client";import he from"zod";Nb(he);var Jm=he.object({registrationNumber:he.string(),mainEtps:he.string().optional(),formations:he.string().optional(),degrees:he.array(he.enum(Gb)),occupations:he.string(),seniority:he.enum(Lb),institutions:he.string(),biography:he.string().optional(),userId:he.string()}),rn=class{constructor(e){this.researcherRepository=e}async handle(e,r){try{let{registrationNumber:t,mainEtps:i,formations:n,degrees:s,occupations:a,seniority:c,institutions:d,biography:R,userId:A}=Jm.parse(e.body);if(await this.researcherRepository.findByRegistrationNumber(t))throw new re("J\xE1 existe um pesquisador cadastrado com este n\xFAmero de registro.");if(await this.researcherRepository.findByUserId(A))throw new re("Usu\xE1rio j\xE1 possui um perfil de pesquisador.");return await this.researcherRepository.create({registrationNumber:t,mainEtps:i,formations:n,degrees:s,occupations:a,seniority:c,institutions:d,biography:R,userId:A}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as _b}from"@asteasolutions/zod-to-openapi";import Ym from"zod";_b(Ym);var Xm=Ym.object({id:Ym.uuid()}),on=class{constructor(e){this.researcherRepository=e}async handle(e,r){try{let{id:t}=Xm.parse({id:e.params.id});if(!await this.researcherRepository.findById(t))throw new p("O pesquisador n\xE3o existe.");return await this.researcherRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as Wb}from"@asteasolutions/zod-to-openapi";import $m from"zod";Wb($m);var sn=$m.object({id:$m.uuid()}),nn=class{constructor(e){this.researcherRepository=e}async handle(e,r){try{let{id:t}=sn.parse({id:e.params.id}),i=await this.researcherRepository.findById(t);if(!i)throw new p("O pesquisador n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as zb}from"@asteasolutions/zod-to-openapi";import Qm from"zod";zb(Qm);var ec=Qm.object({userId:Qm.uuid()}),an=class{constructor(e){this.researcherRepository=e}async handle(e,r){try{let{userId:t}=ec.parse({userId:e.params.userId}),i=await this.researcherRepository.findByUserId(t);if(!i)throw new p("O pesquisador n\xE3o existe para este usu\xE1rio.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as Hb}from"@asteasolutions/zod-to-openapi";import{Degree as Vb,Seniority as Zb}from"@prisma/client";import Re from"zod";Hb(Re);var tc=Re.object({id:Re.uuid(),registrationNumber:Re.string().optional(),mainEtps:Re.string().optional(),formations:Re.string().optional(),degrees:Re.array(Re.enum(Vb)).optional(),occupations:Re.string().optional(),seniority:Re.enum(Zb).optional(),institutions:Re.string().optional(),biography:Re.string().optional()}),mn=class{constructor(e){this.researcherRepository=e}async handle(e,r){try{let{id:t,registrationNumber:i,mainEtps:n,formations:s,degrees:a,occupations:c,seniority:d,institutions:R,biography:A}=tc.parse({id:e.params.id,...e.body}),G=await this.researcherRepository.findById(t);if(!G)throw new p("O pesquisador n\xE3o existe.");if(i&&i!==G.registrationNumber){let J=await this.researcherRepository.findByRegistrationNumber(i);if(J&&J.id!==t)throw new re("J\xE1 existe um pesquisador com este n\xFAmero de registro.")}return await this.researcherRepository.update({id:t,registrationNumber:i,mainEtps:n,formations:s,degrees:a,occupations:c,seniority:d,institutions:R,biography:A}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var Kb=1,Jb=9,oc=I.object({id:I.uuid(),registrationNumber:I.string(),mainEtps:I.string().nullable(),formations:I.string().nullable(),degrees:I.array(I.enum(rc.Degree)),occupations:I.string(),seniority:I.enum(rc.Seniority),institutions:I.string(),biography:I.string().nullable(),createdAt:I.date(),updatedAt:I.date(),userId:I.uuid(),user:I.object({id:I.uuid(),name:I.string(),emailAddress:I.string(),avatarUrl:I.string().nullable(),orcid:I.string().nullable(),phone:I.string().nullable(),lattesUrl:I.string().nullable(),role:I.enum(rc.UserRole)})}),Vl={method:"post",path:"/researcher",tags:["Researchers"],summary:"Create a new researcher profile",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:Jm}}}},responses:{201:{description:"Researcher profile created successfully",summary:"Researcher Created",content:{"application/json":{schema:I.object({message:I.string()})}}},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:I.object({errors:I.record(I.string(),I.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:I.object({message:I.string()})}}},409:{description:"Researcher with this registration number already exists or user already has a researcher profile",summary:"Conflict",content:{"application/json":{schema:I.object({message:I.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:I.object({message:I.string()})}}}}},Zl={method:"get",path:"/researcher",tags:["Researchers"],summary:"List all researchers with pagination and filters",request:{query:I.object({page:I.coerce.number().min(1).default(Kb).optional(),limit:I.coerce.number().min(1).default(Jb).optional(),userId:I.string().optional(),registrationNumber:I.string().optional(),name:I.string().optional(),emailAddress:I.string().optional(),mainEtps:I.string().optional(),formations:I.string().optional(),occupations:I.string().optional(),institutions:I.string().optional(),biography:I.string().optional(),orderBy:I.enum(["asc","desc"]).optional()})},responses:{200:{description:"List of researchers retrieved successfully with pagination",summary:"Researchers Retrieved",content:{"application/json":{schema:I.object({page:I.number(),totalPages:I.number(),offset:I.number(),limit:I.number(),researchers:I.array(oc)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:I.object({message:I.string()})}}}}},Kl={method:"get",path:"/researcher/{id}",tags:["Researchers"],summary:"Find researcher by ID",request:{params:sn},responses:{200:{description:"Researcher details retrieved successfully",summary:"Researcher Retrieved",content:{"application/json":{schema:oc}}},400:{description:"Invalid researcher ID format",summary:"Validation Error",content:{"application/json":{schema:I.object({errors:I.record(I.string(),I.string())})}}},404:{description:"Researcher not found with the provided ID",summary:"Researcher Not Found",content:{"application/json":{schema:I.object({message:I.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:I.object({message:I.string()})}}}}},Jl={method:"get",path:"/researcher/user/{userId}",tags:["Researchers"],summary:"Find researcher by user ID",request:{params:ec},responses:{200:{description:"Researcher details retrieved successfully",summary:"Researcher Retrieved",content:{"application/json":{schema:oc}}},400:{description:"Invalid user ID format",summary:"Validation Error",content:{"application/json":{schema:I.object({errors:I.record(I.string(),I.string())})}}},404:{description:"Researcher not found for this user",summary:"Researcher Not Found",content:{"application/json":{schema:I.object({message:I.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:I.object({message:I.string()})}}}}},Yl={method:"put",path:"/researcher/{id}",tags:["Researchers"],summary:"Update researcher profile",security:[{bearerAuth:[]}],request:{params:sn,body:{content:{"application/json":{schema:tc.omit({id:!0})}}}},responses:{200:{description:"Researcher profile updated successfully",summary:"Researcher Updated",content:{"application/json":{schema:I.object({message:I.string()})}}},400:{description:"Invalid input data or researcher ID format",summary:"Validation Error",content:{"application/json":{schema:I.object({errors:I.record(I.string(),I.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:I.object({message:I.string()})}}},404:{description:"Researcher not found with the provided ID",summary:"Researcher Not Found",content:{"application/json":{schema:I.object({message:I.string()})}}},409:{description:"Researcher with this registration number already exists",summary:"Conflict",content:{"application/json":{schema:I.object({message:I.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:I.object({message:I.string()})}}}}},Xl={method:"delete",path:"/researcher/{id}",tags:["Researchers"],summary:"Delete researcher profile",security:[{bearerAuth:[]}],request:{params:Xm},responses:{200:{description:"Researcher profile deleted successfully",summary:"Researcher Deleted"},400:{description:"Invalid researcher ID format",summary:"Validation Error",content:{"application/json":{schema:I.object({errors:I.record(I.string(),I.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:I.object({message:I.string()})}}},404:{description:"Researcher not found with the provided ID",summary:"Researcher Not Found",content:{"application/json":{schema:I.object({message:I.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:I.object({message:I.string()})}}}}};import v from"zod";import{extendZodWithOpenApi as Yb}from"@asteasolutions/zod-to-openapi";import ic from"zod";Yb(ic);var nc=ic.object({id:ic.uuid()}),cn=class{constructor(e,r){this.scientificJournalRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=nc.parse({id:e.params.id}),i=await this.scientificJournalRepository.findById(t);if(!i)throw new p("A revista cient\xEDfica n\xE3o existe.");return i.logoUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.logoUrl}),await this.scientificJournalRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as Xb}from"@asteasolutions/zod-to-openapi";import sc from"zod";Xb(sc);var ac=sc.object({id:sc.uuid()}),pn=class{constructor(e){this.scientificJournalRepository=e}async handle(e,r){try{let{id:t}=ac.parse({id:e.params.id}),i=await this.scientificJournalRepository.findById(t);if(!i)throw new p("Revista cient\xEDfica n\xE3o encontrada.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as $b}from"@asteasolutions/zod-to-openapi";import Te from"zod";var Qb=1,eC=6;$b(Te);var mc=Te.object({page:Te.coerce.number().min(1).default(Qb),limit:Te.coerce.number().min(1).default(eC),name:Te.string().optional(),description:Te.string().optional(),issn:Te.string().optional(),directors:Te.string().optional(),editorialBoard:Te.string().optional(),orderBy:Te.enum(["asc","desc"]).default("desc")}),dn=class{constructor(e){this.scientificJournalRepository=e}async handle(e,r){try{let{limit:t,page:i,...n}=mc.parse(e.query),s=i*t-t,[a,c]=await Promise.all([this.scientificJournalRepository.find({pagination:{offset:s,limit:t},filter:n}),this.scientificJournalRepository.count({filter:n})]),d=Math.max(Math.ceil(c/t),1);return r.status(200).json({page:i,totalPages:d,offset:s,limit:t,scientificJournals:a})}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as tC}from"@asteasolutions/zod-to-openapi";import Fe from"zod";var Ql=5,$l=1024,rC=$l*$l,oC=Ql*rC;tC(Fe);var cc=Fe.object({id:Fe.uuid(),name:Fe.string().min(1,"Nome \xE9 obrigat\xF3rio.").optional(),issn:Fe.string().min(1,"ISSN \xE9 obrigat\xF3rio.").optional(),description:Fe.string().min(1,"Descri\xE7\xE3o \xE9 obrigat\xF3ria.").optional(),journalUrl:Fe.url("URL da revista deve ser v\xE1lida.").optional(),directors:Fe.string().optional(),editorialBoard:Fe.string().optional(),logo:Fe.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=oC,`O logo deve ter no m\xE1ximo ${Ql}MB.`).optional()}),ln=class{constructor(e,r){this.scientificJournalRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,logo:i,name:n,issn:s,description:a,journalUrl:c,directors:d,editorialBoard:R}=cc.parse({id:e.params.id,...e.body,logo:e.file}),A=await this.scientificJournalRepository.findById(t);if(!A)throw new p("A revista cient\xEDfica n\xE3o existe.");let G=A.logoUrl;return i&&(G=await this.firebaseStorageService.uploadFile({file:i,id:t,folder:j.SCIENTIFIC_JOURNAL})),await this.scientificJournalRepository.update({id:t,name:n,issn:s,description:a,journalUrl:c,directors:d,editorialBoard:R,logoUrl:G}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var eu={method:"post",path:"/scientific-journals",tags:["Scientific Journals"],summary:"Create scientific journal",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:v.object({name:v.string().min(1).openapi({description:"Nome da revista cient\xEDfica"}),issn:v.string().min(1).openapi({description:"ISSN da revista"}),description:v.string().min(1).openapi({description:"Descri\xE7\xE3o da revista"}),journalUrl:v.string().url().openapi({description:"URL da revista"}),directors:v.string().optional().openapi({description:"Diretores da revista"}),editorialBoard:v.string().optional().openapi({description:"Conselho editorial"}),logo:v.string().optional().openapi({description:"Logo da revista (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{201:{description:"Scientific journal created successfully",summary:"Journal Created"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:v.object({errors:v.record(v.string(),v.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:v.object({message:v.string()})}}}}},tu={method:"get",path:"/scientific-journals",tags:["Scientific Journals"],summary:"List scientific journals",security:[{bearerAuth:[]}],request:{query:mc},responses:{200:{description:"Paginated list of scientific journals retrieved successfully",summary:"Journals Retrieved",content:{"application/json":{schema:v.object({page:v.number(),totalPages:v.number(),offset:v.number(),limit:v.number(),scientificJournals:v.array(v.object({id:v.string(),name:v.string(),issn:v.string(),description:v.string(),logoUrl:v.string().nullable(),journalUrl:v.string(),directors:v.string().nullable(),editorialBoard:v.string().nullable(),createdAt:v.date(),updatedAt:v.date()}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:v.object({errors:v.record(v.string(),v.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:v.object({message:v.string()})}}}}},ru={method:"get",path:"/scientific-journals/{id}",tags:["Scientific Journals"],summary:"Find scientific journal by ID",security:[{bearerAuth:[]}],request:{params:ac},responses:{200:{description:"Scientific journal details retrieved successfully",summary:"Journal Retrieved",content:{"application/json":{schema:v.object({id:v.string(),name:v.string(),issn:v.string(),description:v.string(),logoUrl:v.string().nullable(),journalUrl:v.string(),directors:v.string().nullable(),editorialBoard:v.string().nullable(),createdAt:v.date(),updatedAt:v.date()}).nullable()}}},400:{description:"Invalid journal ID format",summary:"Validation Error",content:{"application/json":{schema:v.object({errors:v.record(v.string(),v.string())})}}},404:{description:"Scientific journal not found with the provided ID",summary:"Journal Not Found",content:{"application/json":{schema:v.object({message:v.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:v.object({message:v.string()})}}}}},ou={method:"put",path:"/scientific-journals/{id}",tags:["Scientific Journals"],summary:"Update scientific journal",security:[{bearerAuth:[]}],request:{params:cc.pick({id:!0}),body:{content:{"multipart/form-data":{schema:v.object({name:v.string().min(1).optional().openapi({description:"Nome da revista cient\xEDfica"}),issn:v.string().min(1).optional().openapi({description:"ISSN da revista"}),description:v.string().min(1).optional().openapi({description:"Descri\xE7\xE3o da revista"}),journalUrl:v.string().url().optional().openapi({description:"URL da revista"}),directors:v.string().optional().openapi({description:"Diretores da revista"}),editorialBoard:v.string().optional().openapi({description:"Conselho editorial"}),logo:v.string().optional().openapi({description:"Logo da revista (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{200:{description:"Scientific journal updated successfully",summary:"Journal Updated"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:v.object({errors:v.record(v.string(),v.string())})}}},404:{description:"Scientific journal not found with the provided ID",summary:"Journal Not Found",content:{"application/json":{schema:v.object({message:v.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:v.object({message:v.string()})}}}}},iu={method:"delete",path:"/scientific-journals/{id}",tags:["Scientific Journals"],summary:"Delete scientific journal",security:[{bearerAuth:[]}],request:{params:nc},responses:{200:{description:"Scientific journal deleted successfully",summary:"Journal Deleted"},400:{description:"Invalid journal ID format",summary:"Validation Error",content:{"application/json":{schema:v.object({errors:v.record(v.string(),v.string())})}}},404:{description:"Scientific journal not found with the provided ID",summary:"Journal Not Found",content:{"application/json":{schema:v.object({message:v.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:v.object({message:v.string()})}}}}};import{$Enums as mC}from"@prisma/client";import k from"zod";import{extendZodWithOpenApi as iC}from"@asteasolutions/zod-to-openapi";import Kt from"zod";iC(Kt);var pc=Kt.object({role:Kt.string().min(1),description:Kt.string().optional(),userId:Kt.uuid(),order:Kt.number().optional()}),un=class{constructor(e){this.sdhcTeamMemberRepository=e}async handle(e,r){try{let{role:t,description:i,userId:n,order:s}=pc.parse(e.body);return await this.sdhcTeamMemberRepository.create({role:t,description:i,userId:n,order:s??0}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as nC}from"@asteasolutions/zod-to-openapi";import dc from"zod";nC(dc);var lc=dc.object({id:dc.uuid()}),gn=class{constructor(e){this.sdhcTeamMemberRepository=e}async handle(e,r){try{let{id:t}=lc.parse({id:e.params.id});if(!await this.sdhcTeamMemberRepository.findById(t))throw new p("O membro da equipe SDHC n\xE3o existe.");return await this.sdhcTeamMemberRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as sC}from"@asteasolutions/zod-to-openapi";import uc from"zod";sC(uc);var yn=uc.object({id:uc.uuid()}),fn=class{constructor(e){this.sdhcTeamMemberRepository=e}async handle(e,r){try{let{id:t}=yn.parse({id:e.params.id}),i=await this.sdhcTeamMemberRepository.findById(t);if(!i)throw new p("O membro da equipe SDHC n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as aC}from"@asteasolutions/zod-to-openapi";import It from"zod";aC(It);var gc=It.object({id:It.uuid(),role:It.string().min(1).optional(),description:It.string().optional(),userId:It.uuid().optional(),order:It.number().optional()}),hn=class{constructor(e){this.sdhcTeamMemberRepository=e}async handle(e,r){try{let{id:t,role:i,description:n,userId:s,order:a}=gc.parse({id:e.params.id,...e.body});if(!await this.sdhcTeamMemberRepository.findById(t))throw new p("O membro da equipe SDHC n\xE3o existe.");return await this.sdhcTeamMemberRepository.update({id:t,role:i,description:n,userId:s,order:a}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var cC=k.object({id:k.uuid(),name:k.string(),emailAddress:k.string(),avatarUrl:k.string().nullable(),orcid:k.string().nullable(),phone:k.string().nullable(),lattesUrl:k.string().nullable(),role:k.enum(mC.UserRole)}),nu=k.object({id:k.uuid(),role:k.string(),description:k.string().nullable(),order:k.number(),createdAt:k.date(),updatedAt:k.date(),userId:k.uuid(),user:cC}),su={method:"post",path:"/sdhc-team-member",tags:["SDHC Team Members"],summary:"Create a new SDHC Team Member",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:pc}}}},responses:{201:{description:"SDHC Team Member created successfully",summary:"SDHC Team Member Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:k.object({errors:k.record(k.string(),k.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:k.object({message:k.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:k.object({message:k.string()})}}}}},au={method:"get",path:"/sdhc-team-member",tags:["SDHC Team Members"],summary:"List all SDHC Team Members with filters",request:{query:k.object({role:k.string().optional(),orderBy:k.enum(["asc","desc"]).optional()})},responses:{200:{description:"List of SDHC Team Members retrieved successfully",summary:"SDHC Team Members Retrieved",content:{"application/json":{schema:k.object({members:k.array(nu)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:k.object({message:k.string()})}}}}},mu={method:"get",path:"/sdhc-team-member/{id}",tags:["SDHC Team Members"],summary:"Find SDHC Team Member by ID",request:{params:yn},responses:{200:{description:"SDHC Team Member details retrieved successfully",summary:"SDHC Team Member Retrieved",content:{"application/json":{schema:nu}}},400:{description:"Invalid SDHC Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:k.object({errors:k.record(k.string(),k.string())})}}},404:{description:"SDHC Team Member not found with the provided ID",summary:"SDHC Team Member Not Found",content:{"application/json":{schema:k.object({message:k.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:k.object({message:k.string()})}}}}},cu={method:"put",path:"/sdhc-team-member/{id}",tags:["SDHC Team Members"],summary:"Update SDHC Team Member",security:[{bearerAuth:[]}],request:{params:yn,body:{content:{"application/json":{schema:gc.omit({id:!0})}}}},responses:{200:{description:"SDHC Team Member updated successfully",summary:"SDHC Team Member Updated"},400:{description:"Invalid input data or SDHC Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:k.object({errors:k.record(k.string(),k.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:k.object({message:k.string()})}}},404:{description:"SDHC Team Member not found with the provided ID",summary:"SDHC Team Member Not Found",content:{"application/json":{schema:k.object({message:k.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:k.object({message:k.string()})}}}}},pu={method:"delete",path:"/sdhc-team-member/{id}",tags:["SDHC Team Members"],summary:"Delete SDHC Team Member",security:[{bearerAuth:[]}],request:{params:lc},responses:{200:{description:"SDHC Team Member deleted successfully",summary:"SDHC Team Member Deleted"},400:{description:"Invalid SDHC Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:k.object({errors:k.record(k.string(),k.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:k.object({message:k.string()})}}},404:{description:"SDHC Team Member not found with the provided ID",summary:"SDHC Team Member Not Found",content:{"application/json":{schema:k.object({message:k.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:k.object({message:k.string()})}}}}};import{$Enums as uu}from"@prisma/client";import L from"zod";import{extendZodWithOpenApi as pC}from"@asteasolutions/zod-to-openapi";import fc from"zod";pC(fc);var yc=fc.object({id:fc.string()}),Rn=class{constructor(e){this.userRepository=e}async handle(e,r){try{let{id:t}=yc.parse({id:e.params.id}),i=await this.userRepository.findById(t);if(!i)throw new p("O usu\xE1rio n\xE3o existe.");let n=e.user.id;if(i.id!==n)throw new ue("Voc\xEA n\xE3o tem permiss\xE3o para deletar o usu\xE1rio");return await this.userRepository.deleteById(i.id),r.sendStatus(204)}catch(t){if(console.log(t),t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as dC}from"@asteasolutions/zod-to-openapi";import{z as hc}from"zod";dC(hc);var Rc=hc.object({id:hc.string().min(1,"id do usu\xE1rio n\xE3o fornecido.")}),In=class{constructor(e){this.userRepository=e}async handle(e,r){try{let{id:t}=Rc.parse(e.params),i=await this.userRepository.findById(t);if(!i)throw new p("Usu\xE1rio n\xE3o encontrado");r.status(200).json(i)}catch(t){if(console.log(t),t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as lC}from"@asteasolutions/zod-to-openapi";import bt from"zod";var lu=2,du=1024,uC=du*du,gC=lu*uC,fC=/^\d{4}-\d{4}-\d{4}-\d{4}$/,yC=/^\(?\d{2}\)?[\s-]?\d{4,5}-?\d{4}$/;lC(bt);var Ic=bt.object({name:bt.string().optional(),lattesUrl:bt.string().optional(),orcid:bt.string().optional().transform(o=>o===void 0?void 0:o.trim()).refine(o=>o===void 0||o===""||fC.test(o),{message:"ORCID inv\xE1lido. Deve estar no formato 0000-0000-0000-0000"}),phone:bt.string().optional().refine(o=>o===void 0||o===""||yC.test(o),{message:"Telefone inv\xE1lido. Deve estar no formato (99) 99999-9999"}),avatarImage:bt.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=gC,`A imagem deve ter no m\xE1ximo ${lu}MB.`).optional()}),bn=class{constructor(e,r){this.userRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{avatarImage:t,...i}=Ic.parse({...e.body,avatarImage:e.file}),n=e.user.id,s=await this.userRepository.findById(n);if(!s)throw new se("O usu\xE1rio n\xE3o existe");let a=s.avatarUrl;return t&&(s.avatarUrl?a=await this.firebaseStorageService.updateFile({file:t,id:n,folder:j.USER,fileUrl:s.avatarUrl}):a=await this.firebaseStorageService.uploadFile({file:t,id:n,folder:j.USER})),await this.userRepository.update({...i,id:n,avatarUrl:a||void 0}),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var gu={method:"get",path:"/users/{id}",tags:["Users"],summary:"Find user by ID",request:{params:Rc},responses:{200:{description:"User details retrieved successfully",summary:"User Retrieved",content:{"application/json":{schema:L.object({id:L.string(),name:L.string(),createdAt:L.date(),updatedAt:L.date(),role:L.enum(uu.UserRole),lattesUrl:L.string().nullable(),orcid:L.string().nullable(),phone:L.string().nullable(),avatarUrl:L.url().nullable(),emailAddress:L.email()})}}},400:{description:"Invalid user ID format",summary:"Validation Error",content:{"application/json":{schema:L.object({errors:L.record(L.string(),L.string())})}}},404:{description:"User not found with the provided ID",summary:"User Not Found",content:{"application/json":{schema:L.object({message:L.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:L.object({message:L.string()})}}}}},fu={method:"put",path:"/users",tags:["Users"],summary:"Update authenticated user",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:Ic}}}},responses:{200:{description:"User profile updated successfully",summary:"User Updated",content:{"application/json":{schema:L.object({message:L.string()})}}},400:{description:"Invalid input data or file format",summary:"Validation Error",content:{"application/json":{schema:L.object({errors:L.record(L.string(),L.string())})}}},401:{description:"User not authenticated or unauthorized",summary:"Authentication Required",content:{"application/json":{schema:L.object({message:L.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:L.object({message:L.string()})}}}}},yu={method:"delete",path:"/users",tags:["Users"],summary:"Delete authenticated user",security:[{bearerAuth:[]}],request:{params:yc},responses:{200:{description:"User account deleted successfully",summary:"User Deleted",content:{"application/json":{schema:L.object({message:L.string()})}}},400:{description:"Invalid request parameters",summary:"Validation Error",content:{"application/json":{schema:L.object({errors:L.record(L.string(),L.string())})}}},401:{description:"User not authenticated or unauthorized",summary:"Authentication Required",content:{"application/json":{schema:L.object({message:L.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:L.object({message:L.string()})}}}}},hu={method:"get",path:"/users",tags:["Users"],summary:"List users",responses:{200:{description:"Complete list of users retrieved successfully",summary:"Users Retrieved",content:{"application/json":{schema:L.array(L.object({id:L.string(),name:L.string(),createdAt:L.date(),updatedAt:L.date(),role:L.enum(uu.UserRole),lattesUrl:L.url().nullable(),orcid:L.string().nullable(),phone:L.string().nullable(),avatarUrl:L.string().nullable(),emailAddress:L.email()}))}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:L.object({message:L.string()})}}}}};import C from"zod";import{extendZodWithOpenApi as hC}from"@asteasolutions/zod-to-openapi";import bc from"zod";hC(bc);var Cc=bc.object({id:bc.uuid()}),Cn=class{constructor(e,r){this.webinarRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=Cc.parse({id:e.params.id}),i=await this.webinarRepository.findById(t);if(!i)throw new p("O webinar n\xE3o existe.");return i.thumbnailUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.thumbnailUrl}),await this.webinarRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as RC}from"@asteasolutions/zod-to-openapi";import Sc from"zod";RC(Sc);var wc=Sc.object({id:Sc.uuid()}),Sn=class{constructor(e){this.webinarRepository=e}async handle(e,r){try{let{id:t}=wc.parse({id:e.params.id}),i=await this.webinarRepository.findById(t);if(!i)throw new p("Webinar n\xE3o encontrado.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as IC}from"@asteasolutions/zod-to-openapi";import Ct from"zod";var bC=1,CC=6;IC(Ct);var vc=Ct.object({page:Ct.coerce.number().min(1).default(bC),limit:Ct.coerce.number().min(1).default(CC),title:Ct.string().optional(),description:Ct.string().optional(),orderBy:Ct.enum(["asc","desc"]).default("desc")}),wn=class{constructor(e){this.webinarRepository=e}async handle(e,r){try{let{limit:t,page:i,...n}=vc.parse(e.query),s=i*t-t,[a,c]=await Promise.all([this.webinarRepository.find({pagination:{offset:s,limit:t},filter:n}),this.webinarRepository.count({filter:n})]),d=Math.max(Math.ceil(c/t),1);return r.status(200).json({page:i,totalPages:d,offset:s,limit:t,webinars:a})}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as SC}from"@asteasolutions/zod-to-openapi";import we from"zod";var Iu=5,Ru=1024,wC=Ru*Ru,vC=Iu*wC;SC(we);var Ec=we.object({id:we.uuid(),title:we.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio.").optional(),description:we.string().optional(),scheduledAt:we.coerce.date().optional(),webinarLink:we.url("URL do webinar deve ser v\xE1lida").optional(),guestIds:we.transform(o=>typeof o=="string"?o.split(","):o).pipe(we.array(we.uuid())).optional(),thumbnail:we.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=vC,`A thumbnail deve ter no m\xE1ximo ${Iu}MB.`).optional()}),vn=class{constructor(e,r){this.webinarRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,thumbnail:i,title:n,description:s,scheduledAt:a,webinarLink:c,guestIds:d}=Ec.parse({id:e.params.id,...e.body,thumbnail:e.file}),R=await this.webinarRepository.findById(t);if(!R)throw new p("O webinar n\xE3o existe.");let A=R.thumbnailUrl;if(i&&(A=await this.firebaseStorageService.uploadFile({file:i,id:t,folder:j.WEBINAR})),!A)throw new m("Thumbnail URL \xE9 obrigat\xF3rio");return await this.webinarRepository.update({id:t,title:n,description:s,scheduledAt:a,webinarLink:c,thumbnailUrl:A,guestIds:d}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var bu={method:"post",path:"/webinars",tags:["Webinars"],summary:"Create webinar",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:C.object({title:C.string().min(1).openapi({description:"T\xEDtulo do webinar"}),description:C.string().optional().openapi({description:"Descri\xE7\xE3o do webinar"}),scheduledAt:C.string().openapi({description:"Data e hora agendada (ISO 8601)",example:"2024-01-01T10:00:00Z"}),webinarLink:C.string().url().optional().openapi({description:"Link do webinar"}),guestIds:C.string().openapi({description:"IDs dos convidados separados por v\xEDrgula",example:"uuid1,uuid2,uuid3"}),thumbnail:C.string().optional().openapi({description:"Imagem de thumbnail (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{201:{description:"Webinar created successfully",summary:"Webinar Created"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:C.object({errors:C.record(C.string(),C.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:C.object({message:C.string()})}}}}},Cu={method:"get",path:"/webinars",tags:["Webinars"],summary:"List webinars",security:[{bearerAuth:[]}],request:{query:vc},responses:{200:{description:"Paginated list of webinars with guest information retrieved successfully",summary:"Webinars Retrieved",content:{"application/json":{schema:C.object({page:C.number(),totalPages:C.number(),offset:C.number(),limit:C.number(),webinars:C.array(C.object({id:C.string(),title:C.string(),description:C.string().nullable(),scheduledAt:C.date(),webinarLink:C.string().nullable(),thumbnailUrl:C.string().nullable(),createdAt:C.date(),updatedAt:C.date(),guests:C.array(C.object({id:C.uuid(),name:C.string(),emailAddress:C.email(),avatarUrl:C.string().nullable(),createdAt:C.date(),updatedAt:C.date()}))}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:C.object({errors:C.record(C.string(),C.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:C.object({message:C.string()})}}}}},Su={method:"get",path:"/webinars/{id}",tags:["Webinars"],summary:"Find webinar by ID",security:[{bearerAuth:[]}],request:{params:wc},responses:{200:{description:"Webinar details retrieved successfully",summary:"Webinar Retrieved",content:{"application/json":{schema:C.object({id:C.string(),title:C.string(),description:C.string().nullable(),scheduledAt:C.date(),webinarLink:C.string().nullable(),thumbnailUrl:C.string().nullable(),createdAt:C.date(),updatedAt:C.date(),guests:C.array(C.object({id:C.uuid(),name:C.string(),emailAddress:C.email(),avatarUrl:C.string().nullable(),createdAt:C.date(),updatedAt:C.date()}))}).nullable()}}},400:{description:"Invalid webinar ID format",summary:"Validation Error",content:{"application/json":{schema:C.object({errors:C.record(C.string(),C.string())})}}},404:{description:"Webinar not found with the provided ID",summary:"Webinar Not Found",content:{"application/json":{schema:C.object({message:C.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:C.object({message:C.string()})}}}}},wu={method:"put",path:"/webinars/{id}",tags:["Webinars"],summary:"Update webinar",security:[{bearerAuth:[]}],request:{params:Ec.pick({id:!0}),body:{content:{"multipart/form-data":{schema:C.object({title:C.string().min(1).optional().openapi({description:"T\xEDtulo do webinar"}),description:C.string().optional().openapi({description:"Descri\xE7\xE3o do webinar"}),scheduledAt:C.string().optional().openapi({description:"Data e hora agendada (ISO 8601)",example:"2024-01-01T10:00:00Z"}),webinarLink:C.string().url().optional().openapi({description:"Link do webinar"}),guestIds:C.string().optional().openapi({description:"IDs dos convidados separados por v\xEDrgula",example:"uuid1,uuid2,uuid3"}),thumbnail:C.string().optional().openapi({description:"Imagem de thumbnail (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{200:{description:"Webinar updated successfully",summary:"Webinar Updated"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:C.object({errors:C.record(C.string(),C.string())})}}},404:{description:"Webinar not found with the provided ID",summary:"Webinar Not Found",content:{"application/json":{schema:C.object({message:C.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:C.object({message:C.string()})}}}}},vu={method:"delete",path:"/webinars/{id}",tags:["Webinars"],summary:"Delete webinar",security:[{bearerAuth:[]}],request:{params:Cc},responses:{200:{description:"Webinar deleted successfully",summary:"Webinar Deleted"},400:{description:"Invalid webinar ID format",summary:"Validation Error",content:{"application/json":{schema:C.object({errors:C.record(C.string(),C.string())})}}},404:{description:"Webinar not found with the provided ID",summary:"Webinar Not Found",content:{"application/json":{schema:C.object({message:C.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:C.object({message:C.string()})}}}}};var f=new EC;f.registerComponent("securitySchemes","bearerAuth",{type:"http",scheme:"bearer",bearerFormat:"JWT"});f.registerPath(Xc);f.registerPath($c);f.registerPath(Qc);f.registerPath(ep);f.registerPath(rp);f.registerPath(op);f.registerPath(tp);f.registerPath(gu);f.registerPath(fu);f.registerPath(yu);f.registerPath(hu);f.registerPath(Gd);f.registerPath(Ld);f.registerPath(_d);f.registerPath(Wd);f.registerPath(pp);f.registerPath(dp);f.registerPath(lp);f.registerPath(up);f.registerPath(gp);f.registerPath(tl);f.registerPath(rl);f.registerPath(ol);f.registerPath(il);f.registerPath(nl);f.registerPath(Gp);f.registerPath(Lp);f.registerPath(_p);f.registerPath(Wp);f.registerPath(zp);f.registerPath(Vl);f.registerPath(Zl);f.registerPath(Kl);f.registerPath(Jl);f.registerPath(Yl);f.registerPath(Xl);f.registerPath(wp);f.registerPath(vp);f.registerPath(Ep);f.registerPath(jp);f.registerPath(xp);f.registerPath(Jd);f.registerPath(Yd);f.registerPath(Xd);f.registerPath($d);f.registerPath(Qd);f.registerPath(bd);f.registerPath(Cd);f.registerPath(Sd);f.registerPath(wd);f.registerPath(vd);f.registerPath(su);f.registerPath(au);f.registerPath(mu);f.registerPath(cu);f.registerPath(pu);f.registerPath(gd);f.registerPath(fd);f.registerPath(yd);f.registerPath(hd);f.registerPath(Rd);f.registerPath(Rl);f.registerPath(Il);f.registerPath(bl);f.registerPath(Cl);f.registerPath(Sl);f.registerPath(wl);f.registerPath(Bd);f.registerPath(Dd);f.registerPath(Ud);f.registerPath(qd);f.registerPath(Od);f.registerPath(kd);f.registerPath(Md);f.registerPath(Ad);f.registerPath(Td);f.registerPath(Fd);f.registerPath(ad);f.registerPath(md);f.registerPath(cd);f.registerPath(pd);f.registerPath(dd);f.registerPath(ld);f.registerPath(od);f.registerPath(id);f.registerPath(nd);f.registerPath(sd);f.registerPath(Jp);f.registerPath(Yp);f.registerPath(Xp);f.registerPath($p);f.registerPath(Gl);f.registerPath(Ll);f.registerPath(_l);f.registerPath(Wl);f.registerPath(zl);f.registerPath(Hl);f.registerPath(ql);f.registerPath(Ol);f.registerPath(kl);f.registerPath(Nl);f.registerPath(Pl);f.registerPath(Ml);f.registerPath(Al);f.registerPath(Tl);f.registerPath(bu);f.registerPath(Cu);f.registerPath(Su);f.registerPath(wu);f.registerPath(vu);f.registerPath(hp);f.registerPath(Rp);f.registerPath(Ip);f.registerPath(bp);f.registerPath(Cp);f.registerPath(ml);f.registerPath(cl);f.registerPath(pl);f.registerPath(dl);f.registerPath(ll);f.registerPath(Tp);f.registerPath(Fp);f.registerPath(Bp);f.registerPath(Dp);f.registerPath(Up);f.registerPath(eu);f.registerPath(tu);f.registerPath(ru);f.registerPath(ou);f.registerPath(iu);f.registerPath(np);f.registerPath(sp);f.registerPath(ap);f.registerPath(mp);f.registerPath(cp);var xC=new jC(f.definitions),Eu=xC.generateDocument({openapi:"3.0.0",info:{title:"API da Rede CT",version:"1.0.0",description:"API com valida\xE7\xE3o Zod"}});import{Router as DC}from"express";import{extendZodWithOpenApi as PC}from"@asteasolutions/zod-to-openapi";import jc from"zod";PC(jc);var MC=jc.object({authenticatedUserId:jc.uuid()}),En=class{constructor(e){this.userRepository=e}async handle(e,r){try{let{authenticatedUserId:t}=MC.parse({authenticatedUserId:e.user.id}),i=await this.userRepository.findById(t);if(!i)throw new p("Usu\xE1rio n\xE3o encontrado.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{PrismaClient as AC}from"@prisma/client";var _=new AC({log:["warn","error"]});var jn=class{constructor(e){this.prisma=e}async register({userId:e,title:r,description:t,certificationUrl:i}){await this.prisma.certification.create({data:{title:r,description:t,certificationUrl:i,user:{connect:{id:e}}}})}async find({pagination:{offset:e,limit:r},filter:{description:t,orderBy:i,title:n,userId:s}}){let a={},c=[];return s&&(a.userId=s),n&&c.push({title:{contains:n,mode:"insensitive"}}),t&&c.push({description:{contains:t,mode:"insensitive"}}),c.length>0&&(a.OR=c),await this.prisma.certification.findMany({where:a,include:{user:{omit:{passwordHash:!0}}},orderBy:{updatedAt:i},skip:e,take:r})}async findById(e){return await this.prisma.certification.findFirst({where:{id:e}})}async findByUserId({pagination:{limit:e,offset:r},filter:{description:t,orderBy:i,title:n},userId:s}){let a={userId:s},c=[];return n&&c.push({title:{contains:n,mode:"insensitive"}}),t&&c.push({description:{contains:t,mode:"insensitive"}}),c.length>0&&(a.OR=c),await this.prisma.certification.findMany({where:a,include:{user:{omit:{passwordHash:!0}}},skip:r,take:e,orderBy:i?{updatedAt:i}:{updatedAt:"desc"}})}async update({id:e,...r}){await this.prisma.certification.update({where:{id:e},data:r})}async deleteById(e){await this.prisma.certification.delete({where:{id:e}})}async count({filter:{description:e,title:r,userId:t}}){let i={},n=[];return t&&(i.userId=t),r&&n.push({title:{contains:r,mode:"insensitive"}}),e&&n.push({description:{contains:e,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.certification.count({where:i})}};function mt(){return new jn(_)}var xn=class{constructor(e){this.prisma=e}async create(e){await this.prisma.news.create({data:e})}async find({pagination:{offset:e,limit:r},filter:{authorId:t,content:i,title:n,orderBy:s}}){let a={};t&&(a.authorId={contains:t,mode:"insensitive"});let c=[];return n&&c.push({title:{contains:n,mode:"insensitive"}}),i&&c.push({content:{contains:i,mode:"insensitive"}}),c.length>0&&(a.OR=c),await this.prisma.news.findMany({where:a,omit:{authorId:!0},include:{author:!0},orderBy:{updatedAt:s},skip:e,take:r})}async findById(e){return await this.prisma.news.findUnique({where:{id:e},omit:{authorId:!0},include:{author:!0}})}async findByAuthorId({authorId:e,pagination:{offset:r,limit:t},filter:{orderBy:i="desc",content:n,title:s}}){let a={authorId:e},c=[];return s&&c.push({title:{contains:s,mode:"insensitive"}}),n&&c.push({content:{contains:n,mode:"insensitive"}}),c.length>0&&(a.OR=c),await this.prisma.news.findMany({omit:{authorId:!0},where:a,orderBy:{updatedAt:i},skip:r,take:t})}async update(e){await this.prisma.news.update({where:{id:e.id},data:{title:e.title,content:e.content,imageUrl:e.imageUrl}})}async delete(e){await this.prisma.news.delete({where:{id:e}})}async count({filter:{authorId:e,content:r,title:t}}){let i={};e&&(i.authorId={contains:e,mode:"insensitive"});let n=[];return t&&n.push({title:{contains:t,mode:"insensitive"}}),r&&n.push({content:{contains:r,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.news.count({where:i})}};function ke(){return new xn(_)}var Pn=class{constructor(e){this.prisma=e}async create(e){await this.prisma.pendency.create({data:e})}async find({filter:{description:e,orderBy:r,title:t,status:i,userId:n},pagination:{limit:s,offset:a}}){let c={userId:n,AND:{status:{equals:i}}};e&&(c.description={contains:e,mode:"insensitive"});let d=[];return t&&d.push({title:{contains:t,mode:"insensitive"}}),d.length>0&&(c.OR=d),await this.prisma.pendency.findMany({where:c,orderBy:{updatedAt:r},include:{user:{omit:{passwordHash:!0}}},skip:a,take:s})}async findById(e){return await this.prisma.pendency.findFirst({where:{id:e},include:{user:{omit:{passwordHash:!0}}}})}async findByUserId({filter:{description:e,orderBy:r,title:t,status:i},pagination:{limit:n,offset:s},userId:a}){let c={userId:a,AND:{status:{equals:i}}},d=[];return e&&d.push({description:{contains:e,mode:"insensitive"}}),t&&d.push({title:{contains:t,mode:"insensitive"}}),d.length>0&&(c.OR=d),await this.prisma.pendency.findMany({where:c,orderBy:{updatedAt:r},include:{user:{omit:{passwordHash:!0}}},skip:s,take:n})}async update({id:e,...r}){await this.prisma.pendency.update({where:{id:e},data:r})}async deleteById(e){await this.prisma.pendency.delete({where:{id:e}})}async count({filter:{description:e,title:r,status:t,userId:i}}){let n={userId:i},s=[];return e&&s.push({description:{contains:e,mode:"insensitive"}}),r&&s.push({title:{contains:r,mode:"insensitive"}}),t&&s.push({status:{equals:t}}),s.length>0&&(n.OR=s),await this.prisma.pendency.count({where:n})}};function ct(){return new Pn(_)}var Mn=class{constructor(e){this.prisma=e}async create(e){await this.prisma.user.create({data:e})}async update(e){await this.prisma.user.update({where:{id:e.id},data:{lattesUrl:e.lattesUrl??null,orcid:e.orcid??null,phone:e.phone??null,avatarUrl:e.avatarUrl??null}})}async deleteById(e){await this.prisma.user.delete({where:{id:e}})}async find(){return await this.prisma.user.findMany({omit:{passwordHash:!0}})}async findByEmail(e){return await this.prisma.user.findFirst({where:{emailAddress:e}})}async findById(e){return await this.prisma.user.findFirst({where:{id:e},omit:{passwordHash:!0}})}};function pe(){return new Mn(_)}import{compare as TC,hash as FC}from"bcryptjs";var An=class{constructor(e,r){this.hashFn=e;this.compareFn=r}async hash(e){return await this.hashFn(e,6)}async compare({password:e,hashedPassword:r}){return await this.compareFn(e,r)}};function xc(){return new An(FC,TC)}import ju from"jsonwebtoken";import de from"zod";var BC=de.object({JWT_SECRET:de.string(),FIREBASE_BUCKET:de.string(),FIREBASE_CLIENT_EMAIL:de.string(),FIREBASE_PRIVATE_KEY:de.string(),FIREBASE_PROJECT_ID:de.string(),FIREBASE_TYPE:de.string(),FIREBASE_PRIVATE_KEY_ID:de.string(),FIREBASE_CLIENT_ID:de.string(),FIREBASE_AUTH_URI:de.string(),FIREBASE_TOKEN_URI:de.string(),FIREBASE_AUTH_PROVIDER_X509_CERT_URL:de.string(),FIREBASE_CLIENT_X509_CERT_URL:de.string()}),ne=BC.parse(process.env);var Tn=class{constructor(e,r){this.signFn=e;this.verifyFn=r}sign(e){try{return this.signFn(e,ne.JWT_SECRET,{expiresIn:"3d",subject:e.id})}catch{return null}}verify(e){try{return this.verifyFn(e,ne.JWT_SECRET)}catch{return null}}};function Fn(){return new Tn(ju.sign,ju.verify)}function xu(){return{signUpController:new _r(pe(),xc())}}function Pu(){return{signInController:new Gr(pe(),xc(),Fn())}}function Mu(){return{findAuthenticatedUserController:new En(pe())}}function Au(){return{findAuthenticatedUserController:new Or(ke())}}function Tu(){return{findAuthenticatedUserCertificationsController:new qr(mt())}}function Fu(){return{findAuthenticatedUserPendenciesController:new kr(ct())}}var Bn=class{constructor(e){this.jwtService=e}authenticated(e,r,t){let i=e.headers.authorization;if(!i?.startsWith("Bearer "))return r.status(401).json({message:"Token inv\xE1lido.",invalid:!0});let n=i.split(" ")[1];if(!n)return r.status(401).json({message:"Token n\xE3o fornecido."});try{let s=this.jwtService.verify(n);if(!s)return r.status(401).json({message:"Token inv\xE1lido.",invalid:!0});e.user=s,t()}catch(s){if(console.log(s),s instanceof Error)return r.status(401).json({message:s.message})}}isAdmin(e,r,t){let i=e.headers.authorization;if(!i?.startsWith("Bearer "))return r.status(401).json({message:"Token inv\xE1lido.",invalid:!0});let n=i.split(" ")[1];if(!n)return r.status(401).json({message:"Token n\xE3o fornecido."});try{let s=this.jwtService.verify(n);if(!s)return r.status(401).json({message:"Token inv\xE1lido.",invalid:!0});if(s.role!=="ADMIN")return r.status(401).json({message:"\xC9 necess\xE1rio ter permiss\xF5es de administrador."});e.user=s,t()}catch(s){if(console.log(s),s instanceof Error)return r.status(401).json({message:s.message})}}};function K(){return{authMiddleware:new Bn(Fn())}}var Ne=DC(),{authMiddleware:vr}=K();Ne.post("/sign-up",async(o,e)=>{let{signUpController:r}=xu();await r.handle(o,e)});Ne.post("/sign-in",async(o,e)=>{let{signInController:r}=Pu();await r.handle(o,e)});Ne.get("/user",(o,e,r)=>{vr.authenticated(o,e,r)},async(o,e)=>{let{findAuthenticatedUserController:r}=Mu();await r.handle(o,e)});Ne.get("/user/news",(o,e,r)=>{vr.authenticated(o,e,r)},async(o,e)=>{let{findAuthenticatedUserController:r}=Au();await r.handle(o,e)});Ne.get("/admin",(o,e,r)=>{vr.isAdmin(o,e,r)},(o,e)=>{try{e.status(200).json({success:!0})}catch(r){r instanceof Error&&e.status(500).json({message:r.message})}});Ne.get("/certifications",(o,e,r)=>{vr.authenticated(o,e,r)},async(o,e)=>{let{findAuthenticatedUserCertificationsController:r}=Tu();await r.handle(o,e)});Ne.get("/pendencies",(o,e,r)=>{vr.authenticated(o,e,r)},async(o,e)=>{let{findAuthenticatedUserPendenciesController:r}=Fu();await r.handle(o,e)});import{Router as zC}from"express";import{extendZodWithOpenApi as UC}from"@asteasolutions/zod-to-openapi";import ve from"zod";var qC=5,Bu=1024,OC=Bu*Bu,Pc=qC*OC;UC(ve);var kC=ve.object({volumeNumber:ve.coerce.number().int().positive("N\xFAmero do volume \xE9 obrigat\xF3rio."),year:ve.coerce.number().int().positive("Ano \xE9 obrigat\xF3rio."),title:ve.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),author:ve.string().min(1,"Autor \xE9 obrigat\xF3rio."),accessUrl:ve.url().optional(),description:ve.string().optional(),authorImage:ve.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=Pc,"A imagem do autor deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB."),coverImage:ve.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=Pc,"A imagem da capa deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB."),catalogSheet:ve.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&typeof o.size=="number"&&o.size<=Pc,"A ficha catalogr\xE1fica deve ter no m\xE1ximo 5MB.")}),Dn=class{constructor(e,r){this.bookVolumeRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{volumeNumber:t,year:i,title:n,author:s,accessUrl:a,description:c,authorImage:d,coverImage:R,catalogSheet:A}=kC.parse({...e.body,authorImage:e.files?.authorImage?.[0],coverImage:e.files?.coverImage?.[0],catalogSheet:e.files?.catalogSheet?.[0]}),G=await this.bookVolumeRepository.create({volumeNumber:t,year:i,title:n,author:s,accessUrl:a,description:c}),J=G.authorImageUrl,Q=G.coverImageUrl,ur=G.catalogSheetUrl;return J=await this.firebaseStorageService.uploadFile({file:d,folder:j.BOOK_VOLUME_AUTHOR_IMAGE,id:G.id}),Q=await this.firebaseStorageService.uploadFile({file:R,folder:j.BOOK_VOLUME_COVER,id:G.id}),ur=await this.firebaseStorageService.uploadFile({file:A,folder:j.BOOK_VOLUME_CATALOG_SHEET,id:G.id}),await this.bookVolumeRepository.update({id:G.id,authorImageUrl:J,coverImageUrl:Q,catalogSheetUrl:ur}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var Un=class{constructor(e){this.prisma=e}async create({volumeNumber:e,year:r,title:t,author:i,accessUrl:n,authorImageUrl:s,coverImageUrl:a,catalogSheetUrl:c,description:d}){return await this.prisma.bookVolume.create({data:{volumeNumber:e,year:r,title:t,author:i,accessUrl:n,authorImageUrl:s,coverImageUrl:a,catalogSheetUrl:c,description:d}})}async find({pagination:{offset:e,limit:r},filter:{title:t,author:i,description:n,orderBy:s}}){let a={},c=[];return t&&c.push({title:{contains:t,mode:"insensitive"}}),i&&c.push({author:{contains:i,mode:"insensitive"}}),n&&c.push({description:{contains:n,mode:"insensitive"}}),c.length>0&&(a.OR=c),await this.prisma.bookVolume.findMany({where:a,orderBy:{updatedAt:s},skip:e,take:r})}async findById(e){return await this.prisma.bookVolume.findFirst({where:{id:e}})}async update({id:e,volumeNumber:r,year:t,title:i,author:n,accessUrl:s,authorImageUrl:a,coverImageUrl:c,catalogSheetUrl:d,description:R}){await this.prisma.bookVolume.update({where:{id:e},data:{volumeNumber:r,year:t,title:i,author:n,accessUrl:s,authorImageUrl:a,coverImageUrl:c,catalogSheetUrl:d,description:R}})}async deleteById(e){await this.prisma.bookVolume.delete({where:{id:e}})}async count({filter:{title:e,author:r,description:t}}){let i={},n=[];return e&&n.push({title:{contains:e,mode:"insensitive"}}),r&&n.push({author:{contains:r,mode:"insensitive"}}),t&&n.push({description:{contains:t,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.bookVolume.count({where:i})}};function Jt(){return new Un(_)}import{getStorage as GC}from"firebase-admin/storage";import{config as NC}from"dotenv";import Du from"firebase-admin";NC();var Mc=Du.initializeApp({credential:Du.credential.cert({clientEmail:ne.FIREBASE_CLIENT_EMAIL,privateKey:ne.FIREBASE_PRIVATE_KEY,projectId:ne.FIREBASE_PROJECT_ID,type:ne.FIREBASE_TYPE,privateKeyId:ne.FIREBASE_PRIVATE_KEY_ID,clientId:ne.FIREBASE_CLIENT_ID,authUri:ne.FIREBASE_AUTH_URI,tokenUri:ne.FIREBASE_TOKEN_URI,authProviderX509CertUrl:ne.FIREBASE_AUTH_PROVIDER_X509_CERT_URL,clientX509CertUrl:ne.FIREBASE_CLIENT_X509_CERT_URL}),storageBucket:ne.FIREBASE_BUCKET});Mc.name?console.log("\u{1F525} Firebase conectado com sucesso!"):console.error("\u274C Erro ao se conectar ao Firebase.");var LC=GC(Mc),Uu=LC.bucket(ne.FIREBASE_BUCKET);import{randomUUID as _C}from"node:crypto";var WC=/https:\/\/storage\.googleapis\.com\/[^/]+\/(.+)$/,qn=class{constructor(e){this.bucket=e}async uploadFile({file:e,folder:r,id:t}){let i=`${_C()}-${e?.originalname}`,n=this.bucket.file(`${r}/${t}/${i}`);return await new Promise((s,a)=>{let c=n.createWriteStream({metadata:{contentType:e?.mimetype}});c.on("error",d=>{a(d)}),c.on("finish",async()=>{try{await n.makePublic();let d=`https://storage.googleapis.com/${this.bucket.name}/${n.name}`;s(d)}catch(d){a(d)}}),c.end(e.buffer)})}async updateFile({file:e,id:r,fileUrl:t,folder:i}){try{let n=this.getPath(t);if(!n)throw new Error("Arquivo n\xE3o encontrado.");let[s,a]=await Promise.all([this.bucket.file(n).delete(),this.uploadFile({file:e,id:r,folder:i})]);return a}catch{throw new Error("Erro ao atualizar o arquivo.")}}async deleteFile({fileUrl:e}){let r=this.getPath(e);if(!r)throw new Error("Arquivo n\xE3o encontrado.");try{await this.bucket.file(r).delete()}catch{throw new Error("Erro ao deletar o arquivo.")}}getPath(e){let r=e.match(WC);return r?r[1]:null}};function F(){return new qn(Uu)}function qu(){return{createBookVolumeController:new Dn(Jt(),F())}}function Ou(){return{findBookVolumesController:new Hr(Jt())}}function ku(){return{findBookVolumeByIdController:new zr(Jt())}}function Nu(){return{updateBookVolumeController:new Zr(Jt(),F())}}function Gu(){return{deleteBookVolumeController:new Wr(Jt(),F())}}import Lu from"multer";var W=Lu({storage:Lu.memoryStorage()});var St=zC(),{authMiddleware:Er}=K();St.post("/",(o,e,r)=>{Er.isAdmin(o,e,r)},W.fields([{name:"authorImage",maxCount:1},{name:"coverImage",maxCount:1},{name:"catalogSheet",maxCount:1}]),async(o,e)=>{let{createBookVolumeController:r}=qu();await r.handle(o,e)});St.get("/",(o,e,r)=>{Er.isAdmin(o,e,r)},async(o,e)=>{let{findBookVolumesController:r}=Ou();await r.handle(o,e)});St.get("/:id",(o,e,r)=>{Er.isAdmin(o,e,r)},async(o,e)=>{let{findBookVolumeByIdController:r}=ku();await r.handle(o,e)});St.put("/:id",(o,e,r)=>{Er.isAdmin(o,e,r)},W.fields([{name:"authorImage",maxCount:1},{name:"coverImage",maxCount:1},{name:"catalogSheet",maxCount:1}]),async(o,e)=>{let{updateBookVolumeController:r}=Nu();await r.handle(o,e)});St.delete("/:id",(o,e,r)=>{Er.isAdmin(o,e,r)},async(o,e)=>{let{deleteBookVolumeController:r}=Gu();await r.handle(o,e)});import{Router as HC}from"express";function _u(){return{registerCertificationController:new Xr(pe(),mt(),F())}}function Wu(){return{findCertificationsController:new Yr(mt())}}function zu(){return{findCertificationByIdController:new Jr(mt())}}function Hu(){return{updateCertificationController:new Qr(mt(),F())}}function Vu(){return{deleteCertificationController:new Kr(mt(),F())}}var wt=HC(),{authMiddleware:jr}=K();wt.post("/:user_id",(o,e,r)=>{jr.isAdmin(o,e,r)},W.single("certification"),async(o,e)=>{let{registerCertificationController:r}=_u();await r.handle(o,e)});wt.get("/",(o,e,r)=>{jr.isAdmin(o,e,r)},async(o,e)=>{let{findCertificationsController:r}=Wu();await r.handle(o,e)});wt.get("/:certification_id",(o,e,r)=>{jr.isAdmin(o,e,r)},async(o,e)=>{let{findCertificationByIdController:r}=zu();await r.handle(o,e)});wt.put("/:certification_id",(o,e,r)=>{jr.isAdmin(o,e,r)},W.single("certification"),async(o,e)=>{let{updateCertificationController:r}=Hu();await r.handle(o,e)});wt.delete("/:certification_id",(o,e,r)=>{jr.isAdmin(o,e,r)},async(o,e)=>{let{deleteCertificationController:r}=Vu();await r.handle(o,e)});import{Router as XC}from"express";import{extendZodWithOpenApi as VC}from"@asteasolutions/zod-to-openapi";import le from"zod";var ZC=5,Zu=1024,KC=Zu*Zu,JC=ZC*KC;VC(le);var YC=le.object({title:le.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),coordinatorId:le.string().uuid("Coordenador \xE9 obrigat\xF3rio."),email:le.email("E-mail deve ser v\xE1lido."),location:le.string().min(1,"Localiza\xE7\xE3o \xE9 obrigat\xF3ria."),scheduledAt:le.coerce.date(),registrationLink:le.url().optional(),description:le.string().optional(),instructorIds:le.transform(o=>typeof o=="string"?o.split(","):o).pipe(le.array(le.uuid())),image:le.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=JC,"A imagem deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.")}),On=class{constructor(e,r){this.courseRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{title:t,coordinatorId:i,email:n,location:s,scheduledAt:a,registrationLink:c,description:d,instructorIds:R,image:A}=YC.parse({...e.body,image:e.file}),G=await this.courseRepository.create({title:t,coordinatorId:i,email:n,location:s,scheduledAt:a,registrationLink:c||void 0,description:d,instructorIds:R}),J=await this.firebaseStorageService.uploadFile({file:A,folder:j.COURSE,id:G.id});return await this.courseRepository.update({id:G.id,imageUrl:J}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var kn=class{constructor(e){this.prisma=e}async create({title:e,imageUrl:r,coordinatorId:t,email:i,instructorIds:n,scheduledAt:s,location:a,registrationLink:c,description:d}){return await this.prisma.course.create({data:{title:e,imageUrl:r,coordinatorId:t,email:i,scheduledAt:s,location:a,registrationLink:c,description:d,instructors:{connect:n?.map(R=>({id:R}))}}})}async find({pagination:{offset:e,limit:r},filter:{description:t,orderBy:i,title:n,coordinator:s}}){let a={},c=[];return n&&c.push({title:{contains:n,mode:"insensitive"}}),t&&c.push({description:{contains:t,mode:"insensitive"}}),s&&c.push({coordinator:{name:{contains:s,mode:"insensitive"}}}),c.length>0&&(a.OR=c),await this.prisma.course.findMany({where:a,include:{coordinator:{omit:{passwordHash:!0}},instructors:{omit:{passwordHash:!0}}},orderBy:{updatedAt:i},skip:e,take:r})}async findById(e){return await this.prisma.course.findFirst({where:{id:e},include:{coordinator:{omit:{passwordHash:!0}},instructors:{omit:{passwordHash:!0}}}})}async update({id:e,title:r,imageUrl:t,coordinatorId:i,email:n,instructorIds:s,scheduledAt:a,location:c,registrationLink:d,description:R}){s!==void 0&&await this.prisma.course.update({where:{id:e},data:{instructors:{set:[]}}}),await this.prisma.course.update({where:{id:e},data:{title:r,imageUrl:t,coordinatorId:i,email:n,scheduledAt:a,location:c,registrationLink:d,description:R,...s?.length>0&&{instructors:{connect:s.map(A=>({id:A}))}}}})}async deleteById(e){await this.prisma.course.delete({where:{id:e}})}async count({filter:{description:e,title:r,coordinator:t}}){let i={},n=[];return r&&n.push({title:{contains:r,mode:"insensitive"}}),e&&n.push({description:{contains:e,mode:"insensitive"}}),t&&n.push({coordinator:{name:{contains:t,mode:"insensitive"}}}),n.length>0&&(i.OR=n),await this.prisma.course.count({where:i})}};function Yt(){return new kn(_)}function Ku(){return{createCourseController:new On(Yt(),F())}}function Ju(){return{findCoursesController:new oo(Yt())}}function Yu(){return{findCourseByIdController:new ro(Yt())}}function Xu(){return{updateCourseController:new io(Yt(),F())}}function $u(){return{deleteCourseController:new to(Yt(),F())}}var vt=XC(),{authMiddleware:xr}=K();vt.post("/",(o,e,r)=>{xr.isAdmin(o,e,r)},W.single("image"),async(o,e)=>{let{createCourseController:r}=Ku();await r.handle(o,e)});vt.get("/",(o,e,r)=>{xr.isAdmin(o,e,r)},async(o,e)=>{let{findCoursesController:r}=Ju();await r.handle(o,e)});vt.get("/:id",(o,e,r)=>{xr.isAdmin(o,e,r)},async(o,e)=>{let{findCourseByIdController:r}=Yu();await r.handle(o,e)});vt.put("/:id",(o,e,r)=>{xr.isAdmin(o,e,r)},W.single("image"),async(o,e)=>{let{updateCourseController:r}=Xu();await r.handle(o,e)});vt.delete("/:id",(o,e,r)=>{xr.isAdmin(o,e,r)},async(o,e)=>{let{deleteCourseController:r}=$u();await r.handle(o,e)});import{Router as rS}from"express";import{extendZodWithOpenApi as $C}from"@asteasolutions/zod-to-openapi";import Ge from"zod";var QC=1,eS=9;$C(Ge);var tS=Ge.object({page:Ge.coerce.number().min(1).default(QC),limit:Ge.coerce.number().min(1).default(eS),code:Ge.string().optional(),title:Ge.string().optional(),description:Ge.string().optional(),notes:Ge.string().optional(),orderBy:Ge.enum(["asc","desc"]).default("desc")}),Nn=class{constructor(e){this.etpRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=tS.parse(e.query),s=i*t-i,[a,c]=await Promise.all([this.etpRepository.find({pagination:{offset:s,limit:i},filter:n}),this.etpRepository.count({filter:n})]),d=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:d,offset:s,limit:i,etps:a})}catch(t){if(t instanceof Error)throw new m(t.message)}}};var Gn=class{constructor(e){this.prisma=e}async create(e){let{leaderId:r,deputyLeaderId:t,secretaryId:i,memberIds:n,...s}=e;await this.prisma.$transaction(async a=>{let c=await a.eTP.create({data:s});await a.eTPLeader.create({data:{etpId:c.id,researcherId:r}}),await a.eTPDeputy.create({data:{etpId:c.id,researcherId:t}}),await a.eTPSecretary.create({data:{etpId:c.id,researcherId:i}}),await a.eTP.update({where:{id:c.id},data:{members:{connect:n.map(d=>({id:d}))}}})})}async update(e){let{leaderId:r,deputyLeaderId:t,secretaryId:i,memberIds:n,...s}=e;await this.prisma.$transaction(async a=>{await a.eTP.update({where:{id:e.id},data:s}),await this.updateLeader(a,e.id,r),await this.updateDeputyLeader(a,e.id,t),await this.updateSecretary(a,e.id,i),await this.updateMembers(a,e.id,n)})}async updateLeader(e,r,t){t!==void 0&&(await e.eTPLeader.deleteMany({where:{etpId:r}}),t&&await e.eTPLeader.create({data:{etpId:r,researcherId:t}}))}async updateDeputyLeader(e,r,t){t!==void 0&&(await e.eTPDeputy.deleteMany({where:{etpId:r}}),t&&await e.eTPDeputy.create({data:{etpId:r,researcherId:t}}))}async updateSecretary(e,r,t){t!==void 0&&(await e.eTPSecretary.deleteMany({where:{etpId:r}}),t&&await e.eTPSecretary.create({data:{etpId:r,researcherId:t}}))}async updateMembers(e,r,t){t!==void 0&&await e.eTP.update({where:{id:r},data:{members:{set:t.map(i=>({id:i}))}}})}async deleteById(e){await this.prisma.eTP.delete({where:{id:e}})}async find({pagination:{offset:e,limit:r},filter:{code:t,title:i,description:n,notes:s,orderBy:a}}){let c={},d=[];return t&&d.push({code:{contains:t,mode:"insensitive"}}),i&&d.push({title:{contains:i,mode:"insensitive"}}),n&&d.push({description:{contains:n,mode:"insensitive"}}),s&&d.push({notes:{contains:s,mode:"insensitive"}}),d.length>0&&(c.OR=d),await this.prisma.eTP.findMany({where:c,include:{leader:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},deputyLeader:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},secretary:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},members:{include:{user:{omit:{passwordHash:!0}}}}},orderBy:{updatedAt:a},skip:e,take:r})}async findById(e){return await this.prisma.eTP.findFirst({where:{id:e},include:{leader:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},deputyLeader:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},secretary:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},members:{include:{user:{omit:{passwordHash:!0}}}}}})}async findByCode(e){return await this.prisma.eTP.findFirst({where:{code:e},include:{leader:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},deputyLeader:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},secretary:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},members:{include:{user:{omit:{passwordHash:!0}}}}}})}async count({filter:{code:e,title:r,description:t,notes:i}}){let n={},s=[];return e&&s.push({code:{contains:e,mode:"insensitive"}}),r&&s.push({title:{contains:r,mode:"insensitive"}}),t&&s.push({description:{contains:t,mode:"insensitive"}}),i&&s.push({notes:{contains:i,mode:"insensitive"}}),s.length>0&&(n.OR=s),await this.prisma.eTP.count({where:n})}};function Xt(){return new Gn(_)}function Qu(){return{createETPController:new no(Xt())}}function eg(){return{findETPsController:new Nn(Xt())}}function tg(){return{findETPByIdController:new ao(Xt())}}function rg(){return{updateETPController:new co(Xt())}}function og(){return{deleteETPController:new so(Xt())}}var Et=rS(),{authMiddleware:Ac}=K();Et.post("/",(o,e,r)=>{Ac.authenticated(o,e,r)},async(o,e)=>{let{createETPController:r}=Qu();await r.handle(o,e)});Et.get("/",async(o,e)=>{let{findETPsController:r}=eg();await r.handle(o,e)});Et.get("/:id",async(o,e)=>{let{findETPByIdController:r}=tg();await r.handle(o,e)});Et.put("/:id",(o,e,r)=>{Ac.authenticated(o,e,r)},async(o,e)=>{let{updateETPController:r}=rg();await r.handle(o,e)});Et.delete("/:id",(o,e,r)=>{Ac.authenticated(o,e,r)},async(o,e)=>{let{deleteETPController:r}=og();await r.handle(o,e)});import{Router as oS}from"express";var Ln=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.event.create({data:e})}async update(e){await this.prisma.event.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.event.delete({where:{id:e}})}async find({pagination:{offset:e,limit:r},filter:{title:t,status:i,format:n,orderBy:s}}){let a={},c=[];return i&&(a.status=i),n&&(a.format=n),t&&c.push({title:{contains:t,mode:"insensitive"}}),c.length>0&&(a.OR=c),await this.prisma.event.findMany({where:a,orderBy:s?{startDate:s}:{startDate:"desc"},skip:e,take:r})}async findById(e){return await this.prisma.event.findFirst({where:{id:e}})}async count({filter:{title:e,status:r,format:t}}){let i={},n=[];return r&&(i.status=r),t&&(i.format=t),e&&n.push({title:{contains:e,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.event.count({where:i})}};function $t(){return new Ln(_)}function ig(){return{createEventController:new uo($t(),F())}}function ng(){return{findEventsController:new ho($t())}}function sg(){return{findEventByIdController:new fo($t())}}function ag(){return{updateEventController:new Ro($t(),F())}}function mg(){return{deleteEventController:new go($t())}}var jt=oS(),{authMiddleware:Tc}=K();jt.post("/",(o,e,r)=>{Tc.authenticated(o,e,r)},W.single("image"),async(o,e)=>{let{createEventController:r}=ig();await r.handle(o,e)});jt.get("/",async(o,e)=>{let{findEventsController:r}=ng();await r.handle(o,e)});jt.get("/:id",async(o,e)=>{let{findEventByIdController:r}=sg();await r.handle(o,e)});jt.put("/:id",(o,e,r)=>{Tc.authenticated(o,e,r)},W.single("image"),async(o,e)=>{let{updateEventController:r}=ag();await r.handle(o,e)});jt.delete("/:id",(o,e,r)=>{Tc.authenticated(o,e,r)},async(o,e)=>{let{deleteEventController:r}=mg();await r.handle(o,e)});import{Router as iS}from"express";var _n=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.inMemoriam.create({data:e})}async update(e){await this.prisma.inMemoriam.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.inMemoriam.delete({where:{id:e}})}async find({pagination:{offset:e,limit:r},filter:{name:t,biography:i,role:n,orderBy:s}}){let a={},c=[];return n&&(a.role=n),t&&c.push({name:{contains:t,mode:"insensitive"}}),i&&c.push({biography:{contains:i,mode:"insensitive"}}),c.length>0&&(a.OR=c),await this.prisma.inMemoriam.findMany({where:a,orderBy:{updatedAt:s},skip:e,take:r})}async findById(e){return await this.prisma.inMemoriam.findFirst({where:{id:e}})}async findByRole(e){return await this.prisma.inMemoriam.findMany({where:{role:e}})}async count({filter:{name:e,biography:r,role:t}}){let i={},n=[];return t&&(i.role=t),e&&n.push({name:{contains:e,mode:"insensitive"}}),r&&n.push({biography:{contains:r,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.inMemoriam.count({where:i})}};function xt(){return new _n(_)}function cg(){return{createInMemoriamController:new Io(xt(),F())}}function pg(){return{findInMemoriamsController:new vo(xt())}}function dg(){return{findInMemoriamByIdController:new Co(xt())}}function lg(){return{findInMemoriamByRoleController:new wo(xt())}}function ug(){return{updateInMemoriamController:new Eo(xt(),F())}}function gg(){return{deleteInMemoriamController:new bo(xt(),F())}}var pt=iS(),{authMiddleware:Fc}=K();pt.post("/",(o,e,r)=>{Fc.authenticated(o,e,r)},W.single("photo"),async(o,e)=>{let{createInMemoriamController:r}=cg();await r.handle(o,e)});pt.get("/",async(o,e)=>{let{findInMemoriamsController:r}=pg();await r.handle(o,e)});pt.get("/:id",async(o,e)=>{let{findInMemoriamByIdController:r}=dg();await r.handle(o,e)});pt.get("/role/:role",async(o,e)=>{let{findInMemoriamByRoleController:r}=lg();await r.handle(o,e)});pt.put("/:id",(o,e,r)=>{Fc.authenticated(o,e,r)},W.single("photo"),async(o,e)=>{let{updateInMemoriamController:r}=ug();await r.handle(o,e)});pt.delete("/:id",(o,e,r)=>{Fc.authenticated(o,e,r)},async(o,e)=>{let{deleteInMemoriamController:r}=gg();await r.handle(o,e)});import{Router as nS}from"express";var Bc=nS();Bc.get("/",(o,e)=>{e.status(200).json({message:"Rede CT"})});import{Router as pS}from"express";var Wn=class{constructor(e){this.prisma=e}async create(e){await this.prisma.internationalScientificCongress.create({data:e})}async update(e){await this.prisma.internationalScientificCongress.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.internationalScientificCongress.delete({where:{id:e}})}async find({pagination:{offset:e,limit:r},filter:{title:t,edition:i,location:n,orderBy:s}}){let a={},c=[];return i&&c.push({edition:{equals:i}}),t&&c.push({title:{contains:t,mode:"insensitive"}}),n&&c.push({location:{contains:n,mode:"insensitive"}}),c.length>0&&(a.OR=c),await this.prisma.internationalScientificCongress.findMany({where:a,include:{partners:!0,galleries:!0},orderBy:s?{startDate:s}:{startDate:"desc"},skip:e,take:r})}async findById(e){return await this.prisma.internationalScientificCongress.findFirst({where:{id:e},include:{partners:!0,galleries:!0}})}async findByEdition(e){return await this.prisma.internationalScientificCongress.findMany({where:{edition:e},include:{partners:!0,galleries:!0}})}async count({filter:{title:e,edition:r,location:t}}){let i={},n=[];return r&&n.push({edition:{equals:r}}),e&&n.push({title:{contains:e,mode:"insensitive"}}),t&&n.push({location:{contains:t,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.internationalScientificCongress.count({where:i})}};function Ee(){return new Wn(_)}function fg(){return{createInternationalScientificCongressController:new qo(Ee())}}function yg(){return{findInternationalScientificCongressesController:new Lo(Ee())}}function hg(){return{findInternationalScientificCongressByIdController:new No(Ee())}}function Rg(){return{findInternationalScientificCongressByEditionController:new ko(Ee())}}function Ig(){return{updateInternationalScientificCongressController:new _o(Ee())}}function bg(){return{deleteInternationalScientificCongressController:new Oo(Ee())}}import{extendZodWithOpenApi as sS}from"@asteasolutions/zod-to-openapi";import Dc from"zod";sS(Dc);var aS=Dc.object({id:Dc.uuid()}),zn=class{constructor(e){this.internationalScientificCongressGalleryRepository=e}async handle(e,r){try{let{id:t}=aS.parse({id:e.params.id}),i=await this.internationalScientificCongressGalleryRepository.findById(t);if(!i)throw new p("A imagem da galeria n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var Hn=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.internationalScientificCongressGalleryItem.create({data:e})}async update(e){await this.prisma.internationalScientificCongressGalleryItem.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.internationalScientificCongressGalleryItem.delete({where:{id:e}})}async findByCongressId(e){let{pagination:r,filter:t}=e;return await this.prisma.internationalScientificCongressGalleryItem.findMany({where:{congressId:t.congressId,...t.caption&&{caption:{contains:t.caption,mode:"insensitive"}}},skip:r.offset,take:r.limit})}async findById(e){return await this.prisma.internationalScientificCongressGalleryItem.findFirst({where:{id:e}})}async count(e){let{filter:r}=e;return await this.prisma.internationalScientificCongressGalleryItem.count({where:{congressId:r.congressId,...r.caption&&{caption:{contains:r.caption,mode:"insensitive"}}}})}};function Qt(){return new Hn(_)}function Cg(){return{createInternationalScientificCongressGalleryController:new jo(Qt(),Ee(),F())}}function Sg(){return{findInternationalScientificCongressGalleriesByCongressIdController:new Mo(Qt())}}function wg(){return{findInternationalScientificCongressGalleryByIdController:new zn(Qt())}}function vg(){return{updateInternationalScientificCongressGalleryController:new Ao(Qt(),F())}}function Eg(){return{deleteInternationalScientificCongressGalleryController:new xo(Qt())}}import{extendZodWithOpenApi as mS}from"@asteasolutions/zod-to-openapi";import Uc from"zod";mS(Uc);var cS=Uc.object({id:Uc.uuid()}),Vn=class{constructor(e){this.internationalScientificCongressPartnerRepository=e}async handle(e,r){try{let{id:t}=cS.parse({id:e.params.id}),i=await this.internationalScientificCongressPartnerRepository.findById(t);if(!i)throw new p("O parceiro n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var Zn=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.internationalScientificCongressPartner.create({data:e})}async update(e){await this.prisma.internationalScientificCongressPartner.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.internationalScientificCongressPartner.delete({where:{id:e}})}async findByCongressId(e){return await this.prisma.internationalScientificCongressPartner.findMany({where:{congressId:e.filter.congressId,name:e.filter.name?{contains:e.filter.name,mode:"insensitive"}:void 0},skip:e.pagination?.offset,take:e.pagination?.limit})}async findById(e){return await this.prisma.internationalScientificCongressPartner.findFirst({where:{id:e}})}async count(e){return await this.prisma.internationalScientificCongressPartner.count({where:{congressId:e.filter.congressId,name:e.filter.name?{contains:e.filter.name,mode:"insensitive"}:void 0}})}};function er(){return new Zn(_)}function jg(){return{createInternationalScientificCongressPartnerController:new To(er(),Ee(),F())}}function xg(){return{findInternationalScientificCongressPartnersByCongressIdController:new Do(er())}}function Pg(){return{findInternationalScientificCongressPartnerByIdController:new Vn(er())}}function Mg(){return{updateInternationalScientificCongressPartnerController:new Uo(er(),F())}}function Ag(){return{deleteInternationalScientificCongressPartnerController:new Fo(er())}}var oe=pS(),{authMiddleware:Le}=K();oe.post("/",(o,e,r)=>{Le.authenticated(o,e,r)},async(o,e)=>{let{createInternationalScientificCongressController:r}=fg();await r.handle(o,e)});oe.get("/",async(o,e)=>{let{findInternationalScientificCongressesController:r}=yg();await r.handle(o,e)});oe.get("/:id",async(o,e)=>{let{findInternationalScientificCongressByIdController:r}=hg();await r.handle(o,e)});oe.get("/edition/:edition",async(o,e)=>{let{findInternationalScientificCongressByEditionController:r}=Rg();await r.handle(o,e)});oe.put("/:id",(o,e,r)=>{Le.authenticated(o,e,r)},async(o,e)=>{let{updateInternationalScientificCongressController:r}=Ig();await r.handle(o,e)});oe.delete("/:id",(o,e,r)=>{Le.authenticated(o,e,r)},async(o,e)=>{let{deleteInternationalScientificCongressController:r}=bg();await r.handle(o,e)});oe.post("/:congressId/gallery",(o,e,r)=>{Le.authenticated(o,e,r)},W.single("image"),async(o,e)=>{let{createInternationalScientificCongressGalleryController:r}=Cg();await r.handle(o,e)});oe.get("/:congressId/gallery",async(o,e)=>{let{findInternationalScientificCongressGalleriesByCongressIdController:r}=Sg();await r.handle(o,e)});oe.get("/gallery/:id",async(o,e)=>{let{findInternationalScientificCongressGalleryByIdController:r}=wg();await r.handle(o,e)});oe.put("/gallery/:id",(o,e,r)=>{Le.authenticated(o,e,r)},W.single("image"),async(o,e)=>{let{updateInternationalScientificCongressGalleryController:r}=vg();await r.handle(o,e)});oe.delete("/gallery/:id",(o,e,r)=>{Le.authenticated(o,e,r)},async(o,e)=>{let{deleteInternationalScientificCongressGalleryController:r}=Eg();await r.handle(o,e)});oe.post("/:congressId/partner",(o,e,r)=>{Le.authenticated(o,e,r)},W.single("logo"),async(o,e)=>{let{createInternationalScientificCongressPartnerController:r}=jg();await r.handle(o,e)});oe.get("/:congressId/partner",async(o,e)=>{let{findInternationalScientificCongressPartnersByCongressIdController:r}=xg();await r.handle(o,e)});oe.get("/partner/:id",async(o,e)=>{let{findInternationalScientificCongressPartnerByIdController:r}=Pg();await r.handle(o,e)});oe.put("/partner/:id",(o,e,r)=>{Le.authenticated(o,e,r)},W.single("logo"),async(o,e)=>{let{updateInternationalScientificCongressPartnerController:r}=Mg();await r.handle(o,e)});oe.delete("/partner/:id",(o,e,r)=>{Le.authenticated(o,e,r)},async(o,e)=>{let{deleteInternationalScientificCongressPartnerController:r}=Ag();await r.handle(o,e)});import{Router as uS}from"express";import{extendZodWithOpenApi as dS}from"@asteasolutions/zod-to-openapi";import Kn from"zod";dS(Kn);var lS=Kn.object({role:Kn.string().optional(),orderBy:Kn.enum(["asc","desc"]).optional()}),Jn=class{constructor(e){this.legitimatorCommitteeMemberRepository=e}async handle(e,r){try{let t=lS.parse(e.query),i=await this.legitimatorCommitteeMemberRepository.find({filter:t});r.status(200).json({members:i})}catch(t){if(t instanceof Error)throw new m(t.message)}}};var Yn=class{constructor(e){this.prisma=e}async create(e){await this.prisma.legitimatorCommitteeMember.create({data:{...e,order:e.order??0}})}async update(e){let{id:r,...t}=e;await this.prisma.legitimatorCommitteeMember.update({where:{id:r},data:t})}async deleteById(e){await this.prisma.legitimatorCommitteeMember.delete({where:{id:e}})}async find({filter:{role:e,orderBy:r}}){let t={};return e&&(t.role={contains:e,mode:"insensitive"}),await this.prisma.legitimatorCommitteeMember.findMany({where:t,include:{user:{omit:{passwordHash:!0}}},orderBy:r?[{order:"asc"},{updatedAt:r}]:[{order:"asc"},{updatedAt:"desc"}]})}async findById(e){return await this.prisma.legitimatorCommitteeMember.findFirst({where:{id:e},include:{user:{omit:{passwordHash:!0}}}})}async count({filter:{role:e}}){let r={};return e&&(r.role={contains:e,mode:"insensitive"}),await this.prisma.legitimatorCommitteeMember.count({where:r})}};function tr(){return new Yn(_)}function Tg(){return{createLegitimatorCommitteeMemberController:new Wo(tr())}}function Fg(){return{findLegitimatorCommitteeMembersController:new Jn(tr())}}function Bg(){return{findLegitimatorCommitteeMemberByIdController:new Ho(tr())}}function Dg(){return{updateLegitimatorCommitteeMemberController:new Zo(tr())}}function Ug(){return{deleteLegitimatorCommitteeMemberController:new zo(tr())}}var Pt=uS(),{authMiddleware:qc}=K();Pt.post("/",(o,e,r)=>{qc.authenticated(o,e,r)},async(o,e)=>{let{createLegitimatorCommitteeMemberController:r}=Tg();await r.handle(o,e)});Pt.get("/",async(o,e)=>{let{findLegitimatorCommitteeMembersController:r}=Fg();await r.handle(o,e)});Pt.get("/:id",async(o,e)=>{let{findLegitimatorCommitteeMemberByIdController:r}=Bg();await r.handle(o,e)});Pt.put("/:id",(o,e,r)=>{qc.authenticated(o,e,r)},async(o,e)=>{let{updateLegitimatorCommitteeMemberController:r}=Dg();await r.handle(o,e)});Pt.delete("/:id",(o,e,r)=>{qc.authenticated(o,e,r)},async(o,e)=>{let{deleteLegitimatorCommitteeMemberController:r}=Ug();await r.handle(o,e)});import{Router as yS}from"express";import{extendZodWithOpenApi as gS}from"@asteasolutions/zod-to-openapi";import Pr from"zod";gS(Pr);var fS=Pr.object({name:Pr.string().optional(),description:Pr.string().optional(),orderBy:Pr.enum(["asc","desc"]).default("desc")}),Xn=class{constructor(e){this.managementTeamRepository=e}async handle(e,r){try{let t=fS.parse(e.query),i=await this.managementTeamRepository.find({filter:t});r.status(200).json({teams:i})}catch(t){if(t instanceof Error)throw new m(t.message)}}};var $n=class{constructor(e){this.prisma=e}async create(e){let{members:r,...t}=e;await this.prisma.$transaction(async i=>{let n=await i.managementTeam.create({data:t});return await i.managementTeamMember.createMany({data:r.map(({userId:s,role:a,order:c})=>({teamId:n.id,userId:s,role:a,order:c??0}))}),n})}async update(e){let{members:r,...t}=e;await this.prisma.$transaction(async i=>{let n=await i.managementTeam.update({where:{id:e.id},data:t});return r!==void 0&&(await i.managementTeamMember.deleteMany({where:{teamId:e.id}}),r.length>0&&await i.managementTeamMember.createMany({data:r.map(({userId:s,role:a,order:c})=>({teamId:e.id,userId:s,role:a,order:c??0}))})),n})}async deleteById(e){await this.prisma.managementTeam.delete({where:{id:e}})}async find({filter:{name:e,description:r,orderBy:t}}){let i={},n=[];return e&&n.push({name:{contains:e,mode:"insensitive"}}),r&&n.push({description:{contains:r,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.managementTeam.findMany({where:i,include:{members:{include:{user:{omit:{passwordHash:!0}}},orderBy:{order:"asc"}}},orderBy:{updatedAt:t}})}async findById(e){return await this.prisma.managementTeam.findFirst({where:{id:e},include:{members:{include:{user:{omit:{passwordHash:!0}}},orderBy:{order:"asc"}}}})}async findByName(e){return await this.prisma.managementTeam.findFirst({where:{name:e},include:{members:{include:{user:{omit:{passwordHash:!0}}},orderBy:{order:"asc"}}}})}async count({filter:{name:e,description:r}}){let t={},i=[];return e&&i.push({name:{contains:e,mode:"insensitive"}}),r&&i.push({description:{contains:r,mode:"insensitive"}}),i.length>0&&(t.OR=i),await this.prisma.managementTeam.count({where:t})}};function rr(){return new $n(_)}function qg(){return{createManagementTeamController:new Ko(rr())}}function Og(){return{findManagementTeamsController:new Xn(rr())}}function kg(){return{findManagementTeamByIdController:new Yo(rr())}}function Ng(){return{updateManagementTeamController:new $o(rr())}}function Gg(){return{deleteManagementTeamController:new Jo(rr())}}var Mt=yS(),{authMiddleware:Oc}=K();Mt.post("/",(o,e,r)=>{Oc.authenticated(o,e,r)},async(o,e)=>{let{createManagementTeamController:r}=qg();await r.handle(o,e)});Mt.get("/",async(o,e)=>{let{findManagementTeamsController:r}=Og();await r.handle(o,e)});Mt.get("/:id",async(o,e)=>{let{findManagementTeamByIdController:r}=kg();await r.handle(o,e)});Mt.put("/:id",(o,e,r)=>{Oc.authenticated(o,e,r)},async(o,e)=>{let{updateManagementTeamController:r}=Ng();await r.handle(o,e)});Mt.delete("/:id",(o,e,r)=>{Oc.authenticated(o,e,r)},async(o,e)=>{let{deleteManagementTeamController:r}=Gg();await r.handle(o,e)});import{Router as IS}from"express";var Qn=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.meeting.create({data:e})}async update(e){await this.prisma.meeting.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.meeting.delete({where:{id:e}})}async find({pagination:{offset:e,limit:r},filter:{title:t,format:i,status:n,orderBy:s}}){let a={},c=[];return i&&(a.format=i),n&&(a.status=n),t&&c.push({title:{contains:t,mode:"insensitive"}}),c.length>0&&(a.OR=c),await this.prisma.meeting.findMany({where:a,include:{minutes:!0},orderBy:s?{scheduledAt:s}:{scheduledAt:"desc"},skip:e,take:r})}async findById(e){return await this.prisma.meeting.findFirst({where:{id:e},include:{minutes:!0}})}async findByStatus(e){return await this.prisma.meeting.findMany({where:{status:e},include:{minutes:!0}})}async count({filter:{title:e,format:r,status:t}}){let i={},n=[];return r&&(i.format=r),t&&(i.status=t),e&&n.push({title:{contains:e,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.meeting.count({where:i})}};function _e(){return new Qn(_)}function Lg(){return{createMeetingController:new oi(_e())}}function _g(){return{findMeetingsController:new mi(_e())}}function Wg(){return{findMeetingByIdController:new ni(_e())}}function zg(){return{findMeetingByStatusController:new ai(_e())}}function Hg(){return{updateMeetingController:new ci(_e())}}function Vg(){return{deleteMeetingController:new ii(_e())}}import{extendZodWithOpenApi as hS}from"@asteasolutions/zod-to-openapi";import kc from"zod";hS(kc);var RS=kc.object({meetingId:kc.uuid()}),es=class{constructor(e,r){this.meetingMinuteRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{meetingId:t}=RS.parse({meetingId:e.params.meetingId}),i=await this.meetingMinuteRepository.findByMeetingId(t);if(!i)throw new p("A ata n\xE3o existe para esta reuni\xE3o.");return i.documentUrl&&await this.firebaseStorageService.deleteFile({fileUrl:i.documentUrl}),await this.meetingMinuteRepository.deleteByMeetingId(i.id),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var ts=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.meetingMinute.create({data:e,include:{meeting:!0}})}async update(e){await this.prisma.meetingMinute.update({where:{id:e.id},data:e})}async deleteByMeetingId(e){await this.prisma.meetingMinute.delete({where:{id:e}})}async findByMeetingId(e){return await this.prisma.meetingMinute.findFirst({where:{meetingId:e},include:{meeting:!0}})}};function Mr(){return new ts(_)}function Zg(){return{createMeetingMinuteController:new Qo(Mr(),_e(),F())}}function Kg(){return{findMeetingMinuteByMeetingIdController:new ei(Mr())}}function Jg(){return{updateMeetingMinuteByMeetingIdController:new ti(Mr(),F())}}function Yg(){return{deleteMeetingMinuteByMeetingIdController:new es(Mr(),F())}}var Ie=IS(),{authMiddleware:or}=K();Ie.post("/",(o,e,r)=>{or.authenticated(o,e,r)},async(o,e)=>{let{createMeetingController:r}=Lg();await r.handle(o,e)});Ie.get("/",async(o,e)=>{let{findMeetingsController:r}=_g();await r.handle(o,e)});Ie.get("/:id",async(o,e)=>{let{findMeetingByIdController:r}=Wg();await r.handle(o,e)});Ie.get("/status/:status",async(o,e)=>{let{findMeetingByStatusController:r}=zg();await r.handle(o,e)});Ie.put("/:id",(o,e,r)=>{or.authenticated(o,e,r)},async(o,e)=>{let{updateMeetingController:r}=Hg();await r.handle(o,e)});Ie.delete("/:id",(o,e,r)=>{or.authenticated(o,e,r)},async(o,e)=>{let{deleteMeetingController:r}=Vg();await r.handle(o,e)});Ie.post("/:meetingId/minute",(o,e,r)=>{or.authenticated(o,e,r)},W.single("document"),async(o,e)=>{let{createMeetingMinuteController:r}=Zg();await r.handle(o,e)});Ie.get("/:meetingId/minute",async(o,e)=>{let{findMeetingMinuteByMeetingIdController:r}=Kg();await r.handle(o,e)});Ie.put("/:meetingId/minute",(o,e,r)=>{or.authenticated(o,e,r)},W.single("document"),async(o,e)=>{let{updateMeetingMinuteByMeetingIdController:r}=Jg();await r.handle(o,e)});Ie.delete("/:meetingId/minute",(o,e,r)=>{or.authenticated(o,e,r)},async(o,e)=>{let{deleteMeetingMinuteByMeetingIdController:r}=Yg();await r.handle(o,e)});import{Router as xS}from"express";import{extendZodWithOpenApi as bS}from"@asteasolutions/zod-to-openapi";import Nc from"zod";bS(Nc);var CS=Nc.object({id:Nc.string()}),rs=class{constructor(e,r){this.newsRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=CS.parse(e.params),i=e.user.id,n=await this.newsRepository.findById(t);if(!n)throw new p("Not\xEDcia n\xE3o encontrada.");if(n.author.id!==i)throw new ue("Sem permiss\xE3o.");await Promise.all([this.newsRepository.delete(t),this.firebaseStorageService.deleteFile({fileUrl:n.imageUrl})]),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as SS}from"@asteasolutions/zod-to-openapi";import ir from"zod";var wS=5,Xg=1024,vS=Xg*Xg,ES=wS*vS;SS(ir);var jS=ir.object({id:ir.string(),title:ir.string().min(1),content:ir.string().min(1),image:ir.any().optional().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=ES,"A imagem deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.")}),os=class{constructor(e,r){this.newsRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,title:i,content:n,image:s}=jS.parse({id:e.params.id,image:e.file,...e.body}),a=await this.newsRepository.findById(t);if(!a)throw new p("Not\xEDcia n\xE3o encontrada.");let c=e.user.id;if(a.author.id!==c)throw new ue("Sem permiss\xE3o.");let d=a.imageUrl||"";s&&a.imageUrl&&(d=await this.firebaseStorageService.updateFile({file:s,folder:j.NEWS,id:t,fileUrl:a.imageUrl}));let R=await this.newsRepository.update({id:t,title:i,content:n,imageUrl:d});r.status(200).json(R)}catch(t){if(t instanceof Error)throw new m(t.message)}}};function $g(){return{createNewsController:new pi(ke(),F())}}function Qg(){return{findAllNewsController:new gi(ke())}}function ef(){return{findNewsByIdController:new ui(ke())}}function tf(){return{findNewsByAuthorIdController:new di(ke())}}function rf(){return{updateNewsController:new os(ke(),F())}}function of(){return{deleteNewsController:new rs(ke(),F())}}var dt=xS(),{authMiddleware:Gc}=K();dt.post("/",(o,e,r)=>{Gc.authenticated(o,e,r)},W.single("image"),async(o,e)=>{let{createNewsController:r}=$g();await r.handle(o,e)});dt.get("/",async(o,e)=>{let{findAllNewsController:r}=Qg();await r.handle(o,e)});dt.get("/:id",async(o,e)=>{let{findNewsByIdController:r}=ef();await r.handle(o,e)});dt.get("/author/:authorId",async(o,e)=>{let{findNewsByAuthorIdController:r}=tf();await r.handle(o,e)});dt.put("/:id",(o,e,r)=>{Gc.authenticated(o,e,r)},W.single("image"),async(o,e)=>{let{updateNewsController:r}=rf();await r.handle(o,e)});dt.delete("/:id",(o,e,r)=>{Gc.authenticated(o,e,r)},async(o,e)=>{let{deleteNewsController:r}=of();await r.handle(o,e)});import{Router as PS}from"express";var is=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.partner.create({data:e})}async update(e){await this.prisma.partner.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.partner.delete({where:{id:e}})}async find({pagination:e,filter:{name:r,description:t,category:i,isActive:n,orderBy:s}}){let a={},c=[];return n!==void 0&&(a.isActive=n),r&&c.push({name:{contains:r,mode:"insensitive"}}),t&&c.push({description:{contains:t,mode:"insensitive"}}),i&&c.push({category:{contains:i,mode:"insensitive"}}),c.length>0&&(a.OR=c),await this.prisma.partner.findMany({where:a,orderBy:s?{updatedAt:s}:{updatedAt:"desc"},...e&&{skip:e.offset,take:e.limit}})}async findById(e){return await this.prisma.partner.findFirst({where:{id:e}})}async count({filter:{name:e,description:r,category:t,isActive:i}}){let n={},s=[];return i!==void 0&&(n.isActive=i),e&&s.push({name:{contains:e,mode:"insensitive"}}),r&&s.push({description:{contains:r,mode:"insensitive"}}),t&&s.push({category:{contains:t,mode:"insensitive"}}),s.length>0&&(n.OR=s),await this.prisma.partner.count({where:n})}};function nr(){return new is(_)}function nf(){return{createPartnerController:new fi(nr(),F())}}function sf(){return{findPartnersController:new Ii(nr())}}function af(){return{findPartnerByIdController:new hi(nr())}}function mf(){return{updatePartnerController:new bi(nr(),F())}}function cf(){return{deletePartnerController:new yi(nr(),F())}}var At=PS(),{authMiddleware:Lc}=K();At.post("/",(o,e,r)=>{Lc.authenticated(o,e,r)},W.single("logo"),async(o,e)=>{let{createPartnerController:r}=nf();await r.handle(o,e)});At.get("/",async(o,e)=>{let{findPartnersController:r}=sf();await r.handle(o,e)});At.get("/:id",async(o,e)=>{let{findPartnerByIdController:r}=af();await r.handle(o,e)});At.put("/:id",(o,e,r)=>{Lc.authenticated(o,e,r)},W.single("logo"),async(o,e)=>{let{updatePartnerController:r}=mf();await r.handle(o,e)});At.delete("/:id",(o,e,r)=>{Lc.authenticated(o,e,r)},async(o,e)=>{let{deletePartnerController:r}=cf();await r.handle(o,e)});import{Router as MS}from"express";function pf(){return{createPendencyController:new Ci(pe(),ct(),F())}}function df(){return{findPendenciesController:new vi(ct())}}function lf(){return{findPendencyByIdController:new Ei(ct())}}function uf(){return{updatePendencyController:new ji(ct(),F())}}function gf(){return{deletePendencyController:new wi(ct(),F())}}var Tt=MS(),{authMiddleware:Ar}=K();Tt.post("/:user_id",(o,e,r)=>{Ar.isAdmin(o,e,r)},W.single("document"),async(o,e)=>{let{createPendencyController:r}=pf();await r.handle(o,e)});Tt.get("/",(o,e,r)=>{Ar.isAdmin(o,e,r)},async(o,e)=>{let{findPendenciesController:r}=df();await r.handle(o,e)});Tt.get("/:pendency_id",(o,e,r)=>{Ar.isAdmin(o,e,r)},async(o,e)=>{let{findPendencyByIdController:r}=lf();await r.handle(o,e)});Tt.put("/:pendency_id",(o,e,r)=>{Ar.isAdmin(o,e,r)},W.single("document"),async(o,e)=>{let{updatePendencyController:r}=uf();await r.handle(o,e)});Tt.delete("/:pendency_id",(o,e,r)=>{Ar.isAdmin(o,e,r)},async(o,e)=>{let{deletePendencyController:r}=gf();await r.handle(o,e)});import{Router as US}from"express";import{extendZodWithOpenApi as AS}from"@asteasolutions/zod-to-openapi";import We from"zod";var TS=5,ff=1024,FS=ff*ff,BS=TS*FS;AS(We);var DS=We.object({title:We.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),description:We.string().optional(),startDate:We.coerce.date(),endDate:We.coerce.date(),contact:We.string().min(1,"Contato \xE9 obrigat\xF3rio."),registrationLink:We.url().optional(),image:We.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=BS,"A imagem deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.")}),ns=class{constructor(e,r){this.postGraduateProgramRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{title:t,description:i,startDate:n,endDate:s,contact:a,registrationLink:c,image:d}=DS.parse({...e.body,image:e.file}),R=await this.postGraduateProgramRepository.create({title:t,description:i,startDate:n,endDate:s,contact:a,registrationLink:c||void 0}),A=await this.firebaseStorageService.uploadFile({file:d,folder:j.POST_GRADUATE_PROGRAM,id:R.id});return await this.postGraduateProgramRepository.update({id:R.id,imageUrl:A}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var ss=class{constructor(e){this.prisma=e}async create({title:e,imageUrl:r,description:t,startDate:i,endDate:n,contact:s,registrationLink:a}){return await this.prisma.postGraduateProgram.create({data:{title:e,imageUrl:r,description:t,startDate:i,endDate:n,contact:s,registrationLink:a}})}async find({pagination:{offset:e,limit:r},filter:{description:t,orderBy:i,title:n,contact:s}}){let a={},c=[];return n&&c.push({title:{contains:n,mode:"insensitive"}}),t&&c.push({description:{contains:t,mode:"insensitive"}}),s&&c.push({contact:{contains:s,mode:"insensitive"}}),c.length>0&&(a.OR=c),await this.prisma.postGraduateProgram.findMany({where:a,orderBy:{updatedAt:i},skip:e,take:r})}async findById(e){return await this.prisma.postGraduateProgram.findFirst({where:{id:e}})}async update({id:e,title:r,imageUrl:t,description:i,startDate:n,endDate:s,contact:a,registrationLink:c}){await this.prisma.postGraduateProgram.update({where:{id:e},data:{title:r,imageUrl:t,description:i,startDate:n,endDate:s,contact:a,registrationLink:c}})}async deleteById(e){await this.prisma.postGraduateProgram.delete({where:{id:e}})}async count({filter:{description:e,title:r,contact:t}}){let i={},n=[];return r&&n.push({title:{contains:r,mode:"insensitive"}}),e&&n.push({description:{contains:e,mode:"insensitive"}}),t&&n.push({contact:{contains:t,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.postGraduateProgram.count({where:i})}};function sr(){return new ss(_)}function yf(){return{createPostGraduateProgramController:new ns(sr(),F())}}function hf(){return{findPostGraduateProgramsController:new Ai(sr())}}function Rf(){return{findPostGraduateProgramByIdController:new Mi(sr())}}function If(){return{updatePostGraduateProgramController:new Ti(sr(),F())}}function bf(){return{deletePostGraduateProgramController:new Pi(sr(),F())}}var Ft=US(),{authMiddleware:Tr}=K();Ft.post("/",(o,e,r)=>{Tr.isAdmin(o,e,r)},W.single("image"),async(o,e)=>{let{createPostGraduateProgramController:r}=yf();await r.handle(o,e)});Ft.get("/",(o,e,r)=>{Tr.isAdmin(o,e,r)},async(o,e)=>{let{findPostGraduateProgramsController:r}=hf();await r.handle(o,e)});Ft.get("/:id",(o,e,r)=>{Tr.isAdmin(o,e,r)},async(o,e)=>{let{findPostGraduateProgramByIdController:r}=Rf();await r.handle(o,e)});Ft.put("/:id",(o,e,r)=>{Tr.isAdmin(o,e,r)},W.single("image"),async(o,e)=>{let{updatePostGraduateProgramController:r}=If();await r.handle(o,e)});Ft.delete("/:id",(o,e,r)=>{Tr.isAdmin(o,e,r)},async(o,e)=>{let{deletePostGraduateProgramController:r}=bf();await r.handle(o,e)});import{Router as qS}from"express";var as=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.regiment.create({data:e})}async update(e){await this.prisma.regiment.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.regiment.delete({where:{id:e}})}async find({pagination:{offset:e,limit:r},filter:{title:t,status:i,orderBy:n}}){let s={},a=[];return i&&(s.status=i),t&&a.push({title:{contains:t,mode:"insensitive"}}),a.length>0&&(s.OR=a),await this.prisma.regiment.findMany({where:s,orderBy:n?{updatedAt:n}:{updatedAt:"desc"},skip:e,take:r})}async findById(e){return await this.prisma.regiment.findFirst({where:{id:e}})}async findByStatus(e){return await this.prisma.regiment.findMany({where:{status:e}})}async count({filter:{title:e,status:r}}){let t={},i=[];return r&&(t.status=r),e&&i.push({title:{contains:e,mode:"insensitive"}}),i.length>0&&(t.OR=i),await this.prisma.regiment.count({where:t})}};function Bt(){return new as(_)}function Cf(){return{createRegimentController:new Fi(Bt(),F())}}function Sf(){return{findRegimentsController:new Oi(Bt())}}function wf(){return{findRegimentByIdController:new Di(Bt())}}function vf(){return{findRegimentByStatusController:new qi(Bt())}}function Ef(){return{updateRegimentController:new ki(Bt(),F())}}function jf(){return{deleteRegimentController:new Bi(Bt(),F())}}var lt=qS(),{authMiddleware:_c}=K();lt.post("/",(o,e,r)=>{_c.authenticated(o,e,r)},W.single("document"),async(o,e)=>{let{createRegimentController:r}=Cf();await r.handle(o,e)});lt.get("/",async(o,e)=>{let{findRegimentsController:r}=Sf();await r.handle(o,e)});lt.get("/:id",async(o,e)=>{let{findRegimentByIdController:r}=wf();await r.handle(o,e)});lt.get("/status/:status",async(o,e)=>{let{findRegimentByStatusController:r}=vf();await r.handle(o,e)});lt.put("/:id",(o,e,r)=>{_c.authenticated(o,e,r)},W.single("document"),async(o,e)=>{let{updateRegimentController:r}=Ef();await r.handle(o,e)});lt.delete("/:id",(o,e,r)=>{_c.authenticated(o,e,r)},async(o,e)=>{let{deleteRegimentController:r}=jf();await r.handle(o,e)});import{Router as LS}from"express";import{extendZodWithOpenApi as OS}from"@asteasolutions/zod-to-openapi";import Wc from"zod";OS(Wc);var kS=Wc.object({id:Wc.string().uuid("ID inv\xE1lido")}),ms=class{constructor(e){this.regionalCongressGalleryRepository=e}async handle(e,r){try{let{id:t}=kS.parse(e.params),i=await this.regionalCongressGalleryRepository.findById(t);if(!i)throw new p("Item de galeria n\xE3o encontrado");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var cs=class{constructor(e){this.prisma=e}async create(e){await this.prisma.regionalCongress.create({data:e})}async update(e){await this.prisma.regionalCongress.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.regionalCongress.delete({where:{id:e}})}async find({pagination:{offset:e,limit:r},filter:{title:t,edition:i,location:n,orderBy:s}}){let a={},c=[];return i&&c.push({edition:{equals:i}}),t&&c.push({title:{contains:t,mode:"insensitive"}}),n&&c.push({location:{contains:n,mode:"insensitive"}}),c.length>0&&(a.OR=c),await this.prisma.regionalCongress.findMany({where:a,include:{regionalCongressPartners:!0,regionalCongressGalleryItems:!0},orderBy:s?{startDate:s}:{startDate:"desc"},skip:e,take:r})}async findById(e){return await this.prisma.regionalCongress.findFirst({where:{id:e},include:{regionalCongressPartners:!0,regionalCongressGalleryItems:!0}})}async findByEdition(e){return await this.prisma.regionalCongress.findMany({where:{edition:e},include:{regionalCongressPartners:!0,regionalCongressGalleryItems:!0}})}async count({filter:{title:e,edition:r,location:t}}){let i={},n=[];return r&&n.push({edition:{equals:r}}),e&&n.push({title:{contains:e,mode:"insensitive"}}),t&&n.push({location:{contains:t,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.regionalCongress.count({where:i})}};function je(){return new cs(_)}var ps=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.regionalCongressGalleryItem.create({data:e})}async update(e){await this.prisma.regionalCongressGalleryItem.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.regionalCongressGalleryItem.delete({where:{id:e}})}async findByCongressId({pagination:e,filter:r}){return await this.prisma.regionalCongressGalleryItem.findMany({where:{congressId:r.congressId,...r.caption&&{caption:{contains:r.caption,mode:"insensitive"}}},skip:e.offset,take:e.limit})}async findById(e){return await this.prisma.regionalCongressGalleryItem.findFirst({where:{id:e}})}async count({filter:e}){return await this.prisma.regionalCongressGalleryItem.count({where:{congressId:e.congressId,...e.caption&&{caption:{contains:e.caption,mode:"insensitive"}}}})}};function ar(){return new ps(_)}function xf(){return{createRegionalCongressGalleryController:new Ni(ar(),je(),F())}}function Pf(){return{findRegionalCongressGalleriesByCongressIdController:new _i(ar())}}function Mf(){return{findRegionalCongressGalleryByIdController:new ms(ar())}}function Af(){return{updateRegionalCongressGalleryController:new Wi(ar(),F())}}function Tf(){return{deleteRegionalCongressGalleryController:new Gi(ar())}}import{extendZodWithOpenApi as NS}from"@asteasolutions/zod-to-openapi";import zc from"zod";NS(zc);var GS=zc.object({id:zc.string().uuid("ID inv\xE1lido")}),ds=class{constructor(e){this.regionalCongressPartnerRepository=e}async handle(e,r){try{let{id:t}=GS.parse(e.params),i=await this.regionalCongressPartnerRepository.findById(t);if(!i)throw new p("Parceiro n\xE3o encontrado");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var ls=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.regionalCongressPartner.create({data:e})}async update(e){await this.prisma.regionalCongressPartner.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.regionalCongressPartner.delete({where:{id:e}})}async findByCongressId(e){return await this.prisma.regionalCongressPartner.findMany({where:{congressId:e.filter.congressId,name:e.filter.name?{contains:e.filter.name,mode:"insensitive"}:void 0},skip:e.pagination?.offset,take:e.pagination?.limit})}async findById(e){return await this.prisma.regionalCongressPartner.findFirst({where:{id:e}})}async count(e){return await this.prisma.regionalCongressPartner.count({where:{congressId:e.filter.congressId,name:e.filter.name?{contains:e.filter.name,mode:"insensitive"}:void 0}})}};function mr(){return new ls(_)}function Ff(){return{createRegionalCongressPartnerController:new zi(mr(),je(),F())}}function Bf(){return{findRegionalCongressPartnersByCongressIdController:new Zi(mr())}}function Df(){return{findRegionalCongressPartnerByIdController:new ds(mr())}}function Uf(){return{updateRegionalCongressPartnerController:new Ki(mr(),F())}}function qf(){return{deleteRegionalCongressPartnerController:new Hi(mr())}}function Of(){return{createRegionalCongressController:new Ji(je())}}function kf(){return{findRegionalCongressesController:new en(je())}}function Nf(){return{findRegionalCongressByIdController:new $i(je())}}function Gf(){return{findRegionalCongressByEditionController:new Xi(je())}}function Lf(){return{updateRegionalCongressController:new tn(je())}}function _f(){return{deleteRegionalCongressController:new Yi(je())}}var ie=LS(),{authMiddleware:ze}=K();ie.post("/",(o,e,r)=>{ze.authenticated(o,e,r)},async(o,e)=>{let{createRegionalCongressController:r}=Of();await r.handle(o,e)});ie.get("/",async(o,e)=>{let{findRegionalCongressesController:r}=kf();await r.handle(o,e)});ie.get("/:id",async(o,e)=>{let{findRegionalCongressByIdController:r}=Nf();await r.handle(o,e)});ie.get("/edition/:edition",async(o,e)=>{let{findRegionalCongressByEditionController:r}=Gf();await r.handle(o,e)});ie.put("/:id",(o,e,r)=>{ze.authenticated(o,e,r)},async(o,e)=>{let{updateRegionalCongressController:r}=Lf();await r.handle(o,e)});ie.delete("/:id",(o,e,r)=>{ze.authenticated(o,e,r)},async(o,e)=>{let{deleteRegionalCongressController:r}=_f();await r.handle(o,e)});ie.post("/:congressId/gallery",(o,e,r)=>{ze.authenticated(o,e,r)},W.single("image"),async(o,e)=>{let{createRegionalCongressGalleryController:r}=xf();await r.handle(o,e)});ie.get("/:congressId/gallery",async(o,e)=>{let{findRegionalCongressGalleriesByCongressIdController:r}=Pf();await r.handle(o,e)});ie.get("/gallery/:id",async(o,e)=>{let{findRegionalCongressGalleryByIdController:r}=Mf();await r.handle(o,e)});ie.put("/gallery/:id",(o,e,r)=>{ze.authenticated(o,e,r)},W.single("image"),async(o,e)=>{let{updateRegionalCongressGalleryController:r}=Af();await r.handle(o,e)});ie.delete("/gallery/:id",(o,e,r)=>{ze.authenticated(o,e,r)},async(o,e)=>{let{deleteRegionalCongressGalleryController:r}=Tf();await r.handle(o,e)});ie.post("/:congressId/partner",(o,e,r)=>{ze.authenticated(o,e,r)},W.single("logo"),async(o,e)=>{let{createRegionalCongressPartnerController:r}=Ff();await r.handle(o,e)});ie.get("/:congressId/partner",async(o,e)=>{let{findRegionalCongressPartnersByCongressIdController:r}=Bf();await r.handle(o,e)});ie.get("/partner/:id",async(o,e)=>{let{findRegionalCongressPartnerByIdController:r}=Df();await r.handle(o,e)});ie.put("/partner/:id",(o,e,r)=>{ze.authenticated(o,e,r)},W.single("logo"),async(o,e)=>{let{updateRegionalCongressPartnerController:r}=Uf();await r.handle(o,e)});ie.delete("/partner/:id",(o,e,r)=>{ze.authenticated(o,e,r)},async(o,e)=>{let{deleteRegionalCongressPartnerController:r}=qf();await r.handle(o,e)});import{Router as VS}from"express";import{extendZodWithOpenApi as _S}from"@asteasolutions/zod-to-openapi";import me from"zod";var WS=1,zS=9;_S(me);var HS=me.object({page:me.coerce.number().min(1).default(WS),limit:me.coerce.number().min(1).default(zS),userId:me.string().optional(),registrationNumber:me.string().optional(),name:me.string().optional(),emailAddress:me.string().optional(),mainEtps:me.string().optional(),formations:me.string().optional(),occupations:me.string().optional(),institutions:me.string().optional(),biography:me.string().optional(),orderBy:me.enum(["asc","desc"]).default("desc")}),us=class{constructor(e){this.researcherRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=HS.parse(e.query),s=i*t-i,[a,c]=await Promise.all([this.researcherRepository.find({pagination:{offset:s,limit:i},filter:{userName:n.name,...n}}),this.researcherRepository.count({filter:{userName:n.name,...n}})]),d=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:d,offset:s,limit:i,researchers:a})}catch(t){if(t instanceof Error)throw new m(t.message)}}};var gs=class{constructor(e){this.prisma=e}async create(e){await this.prisma.researcher.create({data:e})}async update(e){await this.prisma.researcher.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.researcher.delete({where:{id:e}})}async find({pagination:e,filter:{biography:r,degrees:t,formations:i,institutions:n,mainEtps:s,occupations:a,orderBy:c,registrationNumber:d,seniority:R,userId:A,userName:G}}){let J={},Q=[];return G&&Q.push({user:{name:{contains:G,mode:"insensitive"}}}),d&&Q.push({registrationNumber:{contains:d,mode:"insensitive"}}),s&&Q.push({mainEtps:{contains:s,mode:"insensitive"}}),i&&Q.push({formations:{contains:i,mode:"insensitive"}}),a&&Q.push({occupations:{contains:a,mode:"insensitive"}}),n&&Q.push({institutions:{contains:n,mode:"insensitive"}}),r&&Q.push({biography:{contains:r,mode:"insensitive"}}),Q.length>0&&(J.OR=Q),t&&t.length>0&&(J.degrees={hasSome:t}),R&&(J.seniority=R),A&&(J.userId={equals:A}),await this.prisma.researcher.findMany({where:J,omit:{userId:!0},include:{user:{omit:{passwordHash:!0}}},orderBy:{updatedAt:c},...e&&{skip:e.offset,take:e.limit}})}async findById(e){return await this.prisma.researcher.findFirst({where:{id:e},include:{user:{omit:{passwordHash:!0}}}})}async findByUserId(e){return await this.prisma.researcher.findFirst({where:{userId:e},include:{user:{omit:{passwordHash:!0}}}})}async findByRegistrationNumber(e){return await this.prisma.researcher.findFirst({where:{registrationNumber:e},include:{user:{omit:{passwordHash:!0}}}})}async count({filter:{biography:e,degrees:r,formations:t,institutions:i,mainEtps:n,occupations:s,registrationNumber:a,seniority:c,userId:d,userName:R}}){let A={},G=[];return R&&G.push({user:{name:{contains:R,mode:"insensitive"}}}),a&&G.push({registrationNumber:{contains:a,mode:"insensitive"}}),G.length>0&&(A.OR=G),n&&(A.mainEtps={contains:n,mode:"insensitive"}),t&&(A.formations={contains:t,mode:"insensitive"}),r&&r.length>0&&(A.degrees={hasSome:r}),s&&(A.occupations={contains:s,mode:"insensitive"}),c&&(A.seniority=c),i&&(A.institutions={contains:i,mode:"insensitive"}),e&&(A.biography={contains:e,mode:"insensitive"}),d&&(A.userId={equals:d}),await this.prisma.researcher.count({where:A})}};function Dt(){return new gs(_)}function Wf(){return{createResearcherController:new rn(Dt())}}function zf(){return{findResearchersController:new us(Dt())}}function Hf(){return{findResearcherByIdController:new nn(Dt())}}function Vf(){return{findResearcherByUserIdController:new an(Dt())}}function Zf(){return{updateResearcherController:new mn(Dt())}}function Kf(){return{deleteResearcherController:new on(Dt())}}var ut=VS(),{authMiddleware:Hc}=K();ut.post("/",(o,e,r)=>{Hc.authenticated(o,e,r)},async(o,e)=>{let{createResearcherController:r}=Wf();await r.handle(o,e)});ut.get("/",async(o,e)=>{let{findResearchersController:r}=zf();await r.handle(o,e)});ut.get("/:id",async(o,e)=>{let{findResearcherByIdController:r}=Hf();await r.handle(o,e)});ut.get("/user/:userId",async(o,e)=>{let{findResearcherByUserIdController:r}=Vf();await r.handle(o,e)});ut.put("/:id",(o,e,r)=>{Hc.authenticated(o,e,r)},async(o,e)=>{let{updateResearcherController:r}=Zf();await r.handle(o,e)});ut.delete("/:id",(o,e,r)=>{Hc.authenticated(o,e,r)},async(o,e)=>{let{deleteResearcherController:r}=Kf();await r.handle(o,e)});import{Router as $S}from"express";import{extendZodWithOpenApi as ZS}from"@asteasolutions/zod-to-openapi";import He from"zod";var KS=5,Jf=1024,JS=Jf*Jf,YS=KS*JS;ZS(He);var XS=He.object({name:He.string().min(1,"Nome \xE9 obrigat\xF3rio."),issn:He.string().min(1,"ISSN \xE9 obrigat\xF3rio."),description:He.string().min(1,"Descri\xE7\xE3o \xE9 obrigat\xF3ria."),journalUrl:He.url("URL da revista deve ser v\xE1lida."),directors:He.string().optional(),editorialBoard:He.string().optional(),logo:He.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=YS,"O logo deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.").optional()}),fs=class{constructor(e,r){this.scientificJournalRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{name:t,issn:i,description:n,journalUrl:s,directors:a,editorialBoard:c,logo:d}=XS.parse({...e.body,logo:e.file}),R=await this.scientificJournalRepository.create({name:t,issn:i,description:n,journalUrl:s,directors:a,editorialBoard:c});if(d){let A=await this.firebaseStorageService.uploadFile({file:d,folder:j.SCIENTIFIC_JOURNAL,id:R.id});await this.scientificJournalRepository.update({id:R.id,logoUrl:A})}return r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var ys=class{constructor(e){this.prisma=e}async create({name:e,issn:r,description:t,logoUrl:i,journalUrl:n,directors:s,editorialBoard:a}){return await this.prisma.scientificJournal.create({data:{name:e,issn:r,description:t,logoUrl:i,journalUrl:n,directors:s,editorialBoard:a}})}async find({pagination:{offset:e,limit:r},filter:{name:t,description:i,issn:n,directors:s,editorialBoard:a,orderBy:c}}){let d={},R=[];return t&&R.push({name:{contains:t,mode:"insensitive"}}),i&&R.push({description:{contains:i,mode:"insensitive"}}),n&&R.push({issn:{contains:n,mode:"insensitive"}}),s&&R.push({directors:{contains:s,mode:"insensitive"}}),a&&R.push({editorialBoard:{contains:a,mode:"insensitive"}}),R.length>0&&(d.OR=R),await this.prisma.scientificJournal.findMany({where:d,orderBy:{updatedAt:c},skip:e,take:r})}async findById(e){return await this.prisma.scientificJournal.findFirst({where:{id:e}})}async update({id:e,name:r,issn:t,description:i,logoUrl:n,journalUrl:s,directors:a,editorialBoard:c}){await this.prisma.scientificJournal.update({where:{id:e},data:{name:r,issn:t,description:i,logoUrl:n,journalUrl:s,directors:a,editorialBoard:c}})}async deleteById(e){await this.prisma.scientificJournal.delete({where:{id:e}})}async count({filter:{name:e,description:r,issn:t,directors:i,editorialBoard:n}}){let s={},a=[];return e&&a.push({name:{contains:e,mode:"insensitive"}}),r&&a.push({description:{contains:r,mode:"insensitive"}}),t&&a.push({issn:{contains:t,mode:"insensitive"}}),i&&a.push({directors:{contains:i,mode:"insensitive"}}),n&&a.push({editorialBoard:{contains:n,mode:"insensitive"}}),a.length>0&&(s.OR=a),await this.prisma.scientificJournal.count({where:s})}};function cr(){return new ys(_)}function Yf(){return{createScientificJournalController:new fs(cr(),F())}}function Xf(){return{findScientificJournalsController:new dn(cr())}}function $f(){return{findScientificJournalByIdController:new pn(cr())}}function Qf(){return{updateScientificJournalController:new ln(cr(),F())}}function ey(){return{deleteScientificJournalController:new cn(cr(),F())}}var Ut=$S(),{authMiddleware:Fr}=K();Ut.post("/",(o,e,r)=>{Fr.isAdmin(o,e,r)},W.single("logo"),async(o,e)=>{let{createScientificJournalController:r}=Yf();await r.handle(o,e)});Ut.get("/",(o,e,r)=>{Fr.isAdmin(o,e,r)},async(o,e)=>{let{findScientificJournalsController:r}=Xf();await r.handle(o,e)});Ut.get("/:id",(o,e,r)=>{Fr.isAdmin(o,e,r)},async(o,e)=>{let{findScientificJournalByIdController:r}=$f();await r.handle(o,e)});Ut.put("/:id",(o,e,r)=>{Fr.isAdmin(o,e,r)},W.single("logo"),async(o,e)=>{let{updateScientificJournalController:r}=Qf();await r.handle(o,e)});Ut.delete("/:id",(o,e,r)=>{Fr.isAdmin(o,e,r)},async(o,e)=>{let{deleteScientificJournalController:r}=ey();await r.handle(o,e)});import{Router as tw}from"express";import{extendZodWithOpenApi as QS}from"@asteasolutions/zod-to-openapi";import hs from"zod";QS(hs);var ew=hs.object({role:hs.string().optional(),orderBy:hs.enum(["asc","desc"]).optional()}),Rs=class{constructor(e){this.sdhcTeamMemberRepository=e}async handle(e,r){try{let t=ew.parse(e.query),i=await this.sdhcTeamMemberRepository.find({filter:t});r.status(200).json({members:i})}catch(t){if(t instanceof Error)throw new m(t.message)}}};var Is=class{constructor(e){this.prisma=e}async create(e){await this.prisma.sDHCTeamMember.create({data:{...e,order:e.order??0}})}async update(e){let{id:r,...t}=e;await this.prisma.sDHCTeamMember.update({where:{id:r},data:t})}async deleteById(e){await this.prisma.sDHCTeamMember.delete({where:{id:e}})}async find({filter:{role:e,orderBy:r}}){let t={};return e&&(t.role={contains:e,mode:"insensitive"}),await this.prisma.sDHCTeamMember.findMany({where:t,include:{user:{omit:{passwordHash:!0}}},orderBy:r?[{order:"asc"},{updatedAt:r}]:[{order:"asc"},{updatedAt:"desc"}]})}async findById(e){return await this.prisma.sDHCTeamMember.findFirst({where:{id:e},include:{user:{omit:{passwordHash:!0}}}})}async count({filter:{role:e}}){let r={};return e&&(r.role={contains:e,mode:"insensitive"}),await this.prisma.sDHCTeamMember.count({where:r})}};function pr(){return new Is(_)}function ty(){return{createSDHCTeamMemberController:new un(pr())}}function ry(){return{findSDHCTeamMembersController:new Rs(pr())}}function oy(){return{findSDHCTeamMemberByIdController:new fn(pr())}}function iy(){return{updateSDHCTeamMemberController:new hn(pr())}}function ny(){return{deleteSDHCTeamMemberController:new gn(pr())}}var qt=tw(),{authMiddleware:Vc}=K();qt.post("/",(o,e,r)=>{Vc.authenticated(o,e,r)},async(o,e)=>{let{createSDHCTeamMemberController:r}=ty();await r.handle(o,e)});qt.get("/",async(o,e)=>{let{findSDHCTeamMembersController:r}=ry();await r.handle(o,e)});qt.get("/:id",async(o,e)=>{let{findSDHCTeamMemberByIdController:r}=oy();await r.handle(o,e)});qt.put("/:id",(o,e,r)=>{Vc.authenticated(o,e,r)},async(o,e)=>{let{updateSDHCTeamMemberController:r}=iy();await r.handle(o,e)});qt.delete("/:id",(o,e,r)=>{Vc.authenticated(o,e,r)},async(o,e)=>{let{deleteSDHCTeamMemberController:r}=ny();await r.handle(o,e)});import{Router as rw}from"express";var bs=class{constructor(e){this.userRepository=e}async handle(e,r){try{let t=await this.userRepository.find();r.status(200).json(t)}catch(t){if(t instanceof Error)throw new m(t.message)}}};function sy(){return{updateUserController:new bn(pe(),F())}}function ay(){return{deleteUserController:new Rn(pe())}}function my(){return{findUsersController:new bs(pe())}}function cy(){return{findUserController:new In(pe())}}var dr=rw(),{authMiddleware:py}=K();dr.get("/:id",async(o,e)=>{let{findUserController:r}=cy();await r.handle(o,e)});dr.put("/",(o,e,r)=>{py.authenticated(o,e,r)},W.single("avatarImage"),async(o,e)=>{let{updateUserController:r}=sy();await r.handle(o,e)});dr.delete("/:id",(o,e,r)=>{py.authenticated(o,e,r)},async(o,e)=>{let{deleteUserController:r}=ay();await r.handle(o,e)});dr.get("/",async(o,e)=>{let{findUsersController:r}=my();await r.handle(o,e)});import{Router as mw}from"express";import{extendZodWithOpenApi as ow}from"@asteasolutions/zod-to-openapi";import Be from"zod";var iw=5,dy=1024,nw=dy*dy,sw=iw*nw;ow(Be);var aw=Be.object({title:Be.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),description:Be.string().optional(),scheduledAt:Be.coerce.date(),webinarLink:Be.url().optional(),guestIds:Be.transform(o=>typeof o=="string"?o.split(","):o).pipe(Be.array(Be.uuid())),thumbnail:Be.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=sw,"A thumbnail deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.")}),Cs=class{constructor(e,r){this.webinarRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{title:t,description:i,scheduledAt:n,webinarLink:s,guestIds:a,thumbnail:c}=aw.parse({...e.body,thumbnail:e.file}),d=await this.webinarRepository.create({title:t,description:i,scheduledAt:n,webinarLink:s||void 0,guestIds:a}),R=await this.firebaseStorageService.uploadFile({file:c,folder:j.WEBINAR,id:d.id});return await this.webinarRepository.update({id:d.id,thumbnailUrl:R}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var Ss=class{constructor(e){this.prisma=e}async create({title:e,description:r,scheduledAt:t,webinarLink:i,thumbnailUrl:n,guestIds:s}){return await this.prisma.webinar.create({data:{title:e,description:r,scheduledAt:t,webinarLink:i,thumbnailUrl:n,guests:s?{connect:s.map(a=>({id:a}))}:void 0}})}async find({pagination:{offset:e,limit:r},filter:{description:t,orderBy:i,title:n}}){let s={},a=[];return n&&a.push({title:{contains:n,mode:"insensitive"}}),t&&a.push({description:{contains:t,mode:"insensitive"}}),a.length>0&&(s.OR=a),await this.prisma.webinar.findMany({where:s,include:{guests:{omit:{passwordHash:!0}}},orderBy:{updatedAt:i},skip:e,take:r})}async findById(e){return await this.prisma.webinar.findFirst({where:{id:e},include:{guests:{omit:{passwordHash:!0}}}})}async update({id:e,title:r,description:t,scheduledAt:i,webinarLink:n,thumbnailUrl:s,guestIds:a}){await this.prisma.webinar.update({where:{id:e},data:{title:r,description:t,scheduledAt:i,webinarLink:n,thumbnailUrl:s,guests:a?{connect:a.map(c=>({id:c}))}:void 0}})}async deleteById(e){await this.prisma.webinar.delete({where:{id:e}})}async count({filter:{description:e,title:r}}){let t={},i=[];return r&&i.push({title:{contains:r,mode:"insensitive"}}),e&&i.push({description:{contains:e,mode:"insensitive"}}),i.length>0&&(t.OR=i),await this.prisma.webinar.count({where:t})}};function lr(){return new Ss(_)}function ly(){return{createWebinarController:new Cs(lr(),F())}}function uy(){return{findWebinarsController:new wn(lr())}}function gy(){return{findWebinarByIdController:new Sn(lr())}}function fy(){return{updateWebinarController:new vn(lr(),F())}}function yy(){return{deleteWebinarController:new Cn(lr(),F())}}var Ot=mw(),{authMiddleware:Br}=K();Ot.post("/",(o,e,r)=>{Br.isAdmin(o,e,r)},W.single("thumbnail"),async(o,e)=>{let{createWebinarController:r}=ly();await r.handle(o,e)});Ot.get("/",(o,e,r)=>{Br.isAdmin(o,e,r)},async(o,e)=>{let{findWebinarsController:r}=uy();await r.handle(o,e)});Ot.get("/:id",(o,e,r)=>{Br.isAdmin(o,e,r)},async(o,e)=>{let{findWebinarByIdController:r}=gy();await r.handle(o,e)});Ot.put("/:id",(o,e,r)=>{Br.isAdmin(o,e,r)},W.single("thumbnail"),async(o,e)=>{let{updateWebinarController:r}=fy();await r.handle(o,e)});Ot.delete("/:id",(o,e,r)=>{Br.isAdmin(o,e,r)},async(o,e)=>{let{deleteWebinarController:r}=yy();await r.handle(o,e)});var Y=Zc(),dw={methods:["GET","POST","PUT","DELETE"],origin:["http://localhost:3000","https://rede-ct.vercel.app"],credentials:!0};Y.use(pw(dw));Y.use(Zc.json());Y.use(Zc.urlencoded({extended:!1}));Y.use("/docs",cw({content:Eu,theme:"kepler"}));Y.use("/",Bc);Y.use("/auth",Ne);Y.use("/user",dr);Y.use("/news",dt);Y.use("/certification",wt);Y.use("/pendency",Tt);Y.use("/researcher",ut);Y.use("/in-memoriam",pt);Y.use("/etp",Et);Y.use("/partner",At);Y.use("/management-team",Mt);Y.use("/sdhc-team-member",qt);Y.use("/legitimator-committee-member",Pt);Y.use("/regiment",lt);Y.use("/meeting",Ie);Y.use("/international-scientific-congress",oe);Y.use("/regional-congress",ie);Y.use("/webinars",Ot);Y.use("/courses",vt);Y.use("/post-graduate-programs",Ft);Y.use("/event",jt);Y.use("/scientific-journals",Ut);Y.use("/book-volumes",St);Y.use((o,e,r,t)=>{let{errorHandler:i}=Jc();i.handle(o,e,r,t)});var uw=lw.createServer(Y),hy=4e3;uw.listen(hy,()=>{console.log(`\u{1F680} Aplica\xE7\xE3o rodando na porta ${hy}.`)});

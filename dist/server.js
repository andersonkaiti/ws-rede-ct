import zM from"node:http";import{apiReference as WM}from"@scalar/express-api-reference";import _M from"cors";import Sl from"express";import xb from"zod";var he=class extends Error{};var pe=class extends Error{};var a=class extends Error{};var p=class extends Error{};var xe=class extends Error{};import{ZodError as jb}from"zod";var xo=class extends jb{};var Mo=class{handle(e,r,t,i){return e instanceof xo?t.status(400).json({message:"Validation error",error:xb.treeifyError(e)}):e instanceof he?t.status(400).json({message:e.message}):e instanceof p?t.status(404).json({message:e.message}):e instanceof xe?t.status(401).json({message:e.message}):e instanceof pe?t.status(409).json({message:e.message}):e instanceof a?t.status(500).json({message:e.message}):t.status(500).json({message:"Internal server error"})}};function vl(){return{errorHandler:new Mo}}import{OpenAPIRegistry as Dj,OpenApiGeneratorV3 as Fj}from"@asteasolutions/zod-to-openapi";import{$Enums as El}from"@prisma/client";import b from"zod";import{extendZodWithOpenApi as Mb}from"@asteasolutions/zod-to-openapi";import qt from"zod";var Tb=1,Ab=6;Mb(qt);var cm=qt.object({page:qt.coerce.number().min(1).default(Tb),limit:qt.coerce.number().min(1).default(Ab),title:qt.string().optional(),description:qt.string().optional(),orderBy:qt.enum(["asc","desc"]).default("desc")}),To=class{constructor(e){this.certificationRepository=e}async handle(e,r){try{let{title:t,description:i,limit:n,orderBy:s,page:m}=cm.parse(e.query),c=m*n-n,d=e.user.id,[y,S]=await Promise.all([this.certificationRepository.findByUserId({userId:d,pagination:{offset:c,limit:n},filter:{title:t,description:i,orderBy:s}}),this.certificationRepository.count({filter:{title:t,description:i,userId:d}})]),A=Math.max(Math.ceil(S/n),1);return r.status(200).json({page:m,totalPages:A,offset:c,limit:n,totalCertifications:S,certifications:y})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Pb}from"@asteasolutions/zod-to-openapi";import Ut from"zod";var Db=1,Fb=7;Pb(Ut);var pm=Ut.object({page:Ut.coerce.number().min(1).default(Db),limit:Ut.coerce.number().min(1).default(Fb),title:Ut.string().optional(),content:Ut.string().optional(),orderBy:Ut.enum(["asc","desc"]).default("desc")}),Ao=class{constructor(e){this.newsRepository=e}async handle(e,r){try{let{page:t,limit:i,content:n,orderBy:s,title:m}=pm.parse(e.query),c=i*t-i,d=e.user.id,[y,S]=await Promise.all([this.newsRepository.findByAuthorId({authorId:d,pagination:{offset:c,limit:i},filter:{orderBy:s,title:m,content:n}}),this.newsRepository.count({filter:{authorId:d,content:n,title:m}})]),A=Math.ceil(S/i);r.status(200).json({page:t,totalPages:A,offset:c,limit:i,news:y})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Bb}from"@asteasolutions/zod-to-openapi";import{PendencyStatus as qb}from"@prisma/client";import lt from"zod";var Ub=1,Ob=6;Bb(lt);var dm=lt.object({page:lt.coerce.number().min(1).default(Ub),limit:lt.coerce.number().min(1).default(Ob),title:lt.string().optional(),description:lt.string().optional(),status:lt.enum(qb).default("PENDING"),orderBy:lt.enum(["asc","desc"]).default("desc")}),Po=class{constructor(e){this.pendencyRepository=e}async handle(e,r){try{let{limit:t,page:i,...n}=dm.parse(e.query),s=i*t-t,m=e.user.id,[c,d]=await Promise.all([this.pendencyRepository.findByUserId({userId:m,pagination:{offset:s,limit:t},filter:n}),this.pendencyRepository.count({filter:{...n,userId:m}})]),y=Math.max(Math.ceil(d/t),1);return r.status(200).json({page:i,totalPages:y,offset:s,limit:t,pendencies:c})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as kb}from"@asteasolutions/zod-to-openapi";import Do from"zod";kb(Do);var lm=Do.object({password:Do.string(),email:Do.email()}),Fo=class{constructor(e,r,t){this.userRepository=e;this.bcrypt=r;this.jwtService=t}async handle(e,r){try{let{email:t,password:i}=lm.parse(e.body),n=await this.userRepository.findByEmail(t);if(!n)return r.status(401).json({message:"Usu\xE1rio n\xE3o existe."});if(!await this.bcrypt.compare({password:i,hashedPassword:n.passwordHash}))throw new xe("Senha inv\xE1lida.");let{id:m,role:c}=n,d=this.jwtService.sign({id:m,role:c,email:t});return r.status(200).json({token:d})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Gb}from"@asteasolutions/zod-to-openapi";import ur from"zod";var Bo=8;Gb(ur);var um=ur.object({name:ur.string("Nome \xE9 obrigat\xF3rio.").min(1,"Nome \xE9 obrigat\xF3rio."),emailAddress:ur.email("E-mail inv\xE1lido.").min(1,"E-mail \xE9 obrigat\xF3rio."),password:ur.string("A senha \xE9 obrigat\xF3ria.").min(Bo,`A senha deve ter pelo menos ${Bo} caracteres.`),confirmPassword:ur.string("A senha \xE9 obrigat\xF3ria.").min(Bo,`A senha deve ter pelo menos ${Bo} caracteres.`)}).refine(o=>o.password===o.confirmPassword,{message:"As senhas n\xE3o coincidem.",path:["confirmPassword"]}),qo=class{constructor(e,r){this.userRepository=e;this.bcrypt=r}async handle(e,r){try{let{emailAddress:t,name:i,password:n}=um.parse(e.body);if(await this.userRepository.findByEmail(t))throw new pe("Usu\xE1rio j\xE1 existe.");let m=await this.bcrypt.hash(n);return await this.userRepository.create({name:i,emailAddress:t,passwordHash:m}),r.status(201).json()}catch(t){if(t instanceof Error)throw new a(t.message)}}};var jl={method:"post",path:"/auth/sign-up",tags:["Authentication"],summary:"Create a new user",request:{body:{content:{"application/json":{schema:um}}}},responses:{201:{description:"User created successfully",summary:"User Registration Successful",content:{"application/json":{schema:b.object({message:b.string()})}}},400:{description:"Invalid input data provided",summary:"Validation Error",content:{"application/json":{schema:b.object({errors:b.record(b.string(),b.string())})}}},409:{description:"User already exists with this email",summary:"User Already Exists",content:{"application/json":{schema:b.object({message:b.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:b.object({message:b.string()})}}}}},xl={method:"post",path:"/auth/sign-in",tags:["Authentication"],summary:"Sign in",request:{body:{content:{"application/json":{schema:lm}}}},responses:{200:{description:"Authentication successful, JWT token returned",summary:"Login Successful",content:{"application/json":{schema:b.object({token:b.string()})}}},400:{description:"Invalid credentials or input data",summary:"Validation Error",content:{"application/json":{schema:b.object({errors:b.record(b.string(),b.string())})}}},401:{description:"Invalid email or password",summary:"Authentication Failed",content:{"application/json":{schema:b.object({message:b.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:b.object({message:b.string()})}}}}},Ml={method:"get",path:"/auth/user",tags:["Authentication"],summary:"Search for authenticated user",security:[{bearerAuth:[]}],responses:{200:{description:"Authenticated user information retrieved successfully",summary:"User Information Retrieved",content:{"application/json":{schema:b.object({name:b.string(),id:b.string(),avatarUrl:b.string().nullable(),createdAt:b.date(),updatedAt:b.date(),emailAddress:b.string(),orcid:b.string().nullable(),phone:b.string().nullable(),lattesUrl:b.string().nullable(),role:b.enum(El.UserRole)}).nullable()}}},400:{description:"Invalid request parameters",summary:"Validation Error",content:{"application/json":{schema:b.object({errors:b.record(b.string(),b.string())})}}},404:{description:"User not found or not authenticated",summary:"User Not Found",content:{"application/json":{schema:b.object({message:b.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:b.object({message:b.string()})}}}}},Tl={method:"get",path:"/auth/user/news",tags:["Authentication"],summary:"List authenticated user news",security:[{bearerAuth:[]}],request:{query:pm},responses:{200:{description:"Paginated list of authenticated user news retrieved successfully",summary:"User News Retrieved",content:{"application/json":{schema:b.object({page:b.number(),totalPages:b.number(),offset:b.number(),limit:b.number(),news:b.object({content:b.string(),id:b.string(),title:b.string(),createdAt:b.date(),updatedAt:b.date(),imageUrl:b.string().nullable()})})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:b.object({errors:b.record(b.string(),b.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:b.object({message:b.string()})}}}}},Al={method:"get",path:"/auth/admin",tags:["Authentication"],summary:"Verify admin access",security:[{bearerAuth:[]}],responses:{200:{description:"Admin access verified successfully",summary:"Admin Access Granted",content:{"application/json":{schema:b.object({success:b.boolean()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:b.object({message:b.string()})}}}}},Pl={method:"get",path:"/auth/certifications",tags:["Authentication"],summary:"List all authenticated user's certifications",security:[{bearerAuth:[]}],request:{query:cm},responses:{200:{description:"Paginated list of authenticated user certifications retrieved successfully",summary:"User Certifications Retrieved",content:{"application/json":{schema:b.object({page:b.number(),totalPages:b.number(),offset:b.number(),limit:b.number(),certifications:b.object({description:b.string(),id:b.string(),title:b.string(),certificationUrl:b.string(),createdAt:b.date(),updatedAt:b.date(),userId:b.string()})})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:b.object({errors:b.record(b.string(),b.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:b.object({message:b.string()})}}}}},Dl={method:"get",path:"/auth/pendencies",tags:["Authentication"],summary:"List all authenticated user's pendencies",security:[{bearerAuth:[]}],request:{query:dm},responses:{200:{description:"Paginated list of authenticated user pendencies retrieved successfully",summary:"User Pendencies Retrieved",content:{"application/json":{schema:b.object({page:b.number(),totalPages:b.number(),offset:b.number(),limit:b.number(),pendencies:b.object({id:b.string(),title:b.string(),description:b.string(),status:b.enum(El.PendencyStatus),createdAt:b.date(),updatedAt:b.date(),userId:b.string()})})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:b.object({errors:b.record(b.string(),b.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:b.object({message:b.string()})}}}}};import E from"zod";import{extendZodWithOpenApi as Nb}from"@asteasolutions/zod-to-openapi";import gm from"zod";Nb(gm);var fm=gm.object({id:gm.uuid()}),Uo=class{constructor(e,r){this.bookVolumeRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=fm.parse({id:e.params.id}),i=await this.bookVolumeRepository.findById(t);if(!i)throw new p("O volume de livro n\xE3o existe.");return i.authorImageUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.authorImageUrl}),i.coverImageUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.coverImageUrl}),i.catalogSheetUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.catalogSheetUrl}),await this.bookVolumeRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Lb}from"@asteasolutions/zod-to-openapi";import ym from"zod";Lb(ym);var hm=ym.object({id:ym.uuid()}),Oo=class{constructor(e){this.bookVolumeRepository=e}async handle(e,r){try{let{id:t}=hm.parse({id:e.params.id}),i=await this.bookVolumeRepository.findById(t);if(!i)throw new p("Volume de livro n\xE3o encontrado.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Wb}from"@asteasolutions/zod-to-openapi";import ut from"zod";var _b=1,Hb=6;Wb(ut);var Rm=ut.object({page:ut.coerce.number().min(1).default(_b),limit:ut.coerce.number().min(1).default(Hb),title:ut.string().optional(),author:ut.string().optional(),description:ut.string().optional(),orderBy:ut.enum(["asc","desc"]).default("desc")}),ko=class{constructor(e){this.bookVolumeRepository=e}async handle(e,r){try{let{limit:t,page:i,...n}=Rm.parse(e.query),s=i*t-t,[m,c]=await Promise.all([this.bookVolumeRepository.find({pagination:{offset:s,limit:t},filter:n}),this.bookVolumeRepository.count({filter:n})]),d=Math.max(Math.ceil(c/t),1);return r.status(200).json({page:i,totalPages:d,offset:s,limit:t,bookVolumes:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as zb}from"@asteasolutions/zod-to-openapi";import Me from"zod";var j={NEWS:"images/news",USER:"images/user",IN_MEMORIAM:"images/in-memoriam",PARTNER:"images/partners",CERTIFICATION:"documents/certifications",PENDENCY:"documents/pendencies",REGIMENT:"documents/regiments",MEETING_MINUTE:"documents/meeting-minutes",INTERNATIONAL_SCIENTIFIC_CONGRESS_GALLERY:"images/international-scientific-congress-gallery",GALLERY:"images/regional-congress-gallery",REGIONAL_CONGRESS_GALLERY:"images/regional-congress-gallery",WEBINAR:"images/webinars",COURSE:"images/courses",POST_GRADUATE_PROGRAM:"images/post-graduate-programs",EVENT:"images/events",SCIENTIFIC_JOURNAL:"images/scientific-journals",BOOK_VOLUME_AUTHOR_IMAGE:"images/book-volumes/authors",BOOK_VOLUME_COVER:"images/book-volumes/covers",BOOK_VOLUME_CATALOG_SHEET:"documents/book-volumes/catalog-sheets",RESEARCH_GROUP_LOGO:"images/research-groups",MUSEUM:"images/museums",REDECT_HIGHLIGHT:"images/redect-highlights"};var Go=5,Fl=1024,Vb=Fl*Fl,Im=Go*Vb;zb(Me);var bm=Me.object({id:Me.uuid(),volumeNumber:Me.coerce.number().int().positive().optional(),year:Me.coerce.number().int().positive().optional(),title:Me.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio.").optional(),author:Me.string().min(1,"Autor \xE9 obrigat\xF3rio.").optional(),accessUrl:Me.string().url("URL de acesso deve ser v\xE1lida").optional(),description:Me.string().optional(),authorImage:Me.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=Im,`A imagem do autor deve ter no m\xE1ximo ${Go}MB.`).optional(),coverImage:Me.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=Im,`A imagem da capa deve ter no m\xE1ximo ${Go}MB.`).optional(),catalogSheet:Me.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=Im,`A ficha catalogr\xE1fica deve ter no m\xE1ximo ${Go}MB.`).optional()}),No=class{constructor(e,r){this.bookVolumeRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,volumeNumber:i,year:n,title:s,author:m,accessUrl:c,description:d,authorImage:y,coverImage:S,catalogSheet:A}=bm.parse({id:e.params.id,...e.body,authorImage:e.files?.authorImage?.[0],coverImage:e.files?.coverImage?.[0],catalogSheet:e.files?.catalogSheet?.[0]}),$=await this.bookVolumeRepository.findById(t);if(!$)throw new p("O volume de livro n\xE3o existe.");let oe=$.authorImageUrl,ae=$.coverImageUrl,ye=$.catalogSheetUrl;return y&&(oe=await this.firebaseStorageService.uploadFile({file:y,id:t,folder:j.BOOK_VOLUME_AUTHOR_IMAGE})),S&&(ae=await this.firebaseStorageService.uploadFile({file:S,id:t,folder:j.BOOK_VOLUME_COVER})),A&&(ye=await this.firebaseStorageService.uploadFile({file:A,id:t,folder:j.BOOK_VOLUME_CATALOG_SHEET})),await this.bookVolumeRepository.update({id:t,volumeNumber:i,year:n,title:s,author:m,accessUrl:c,description:d,authorImageUrl:oe,coverImageUrl:ae,catalogSheetUrl:ye}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Bl={method:"post",path:"/book-volumes",tags:["Book Volumes"],summary:"Create book volume",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:E.object({volumeNumber:E.number().int().positive().openapi({description:"N\xFAmero do volume"}),year:E.number().int().positive().openapi({description:"Ano de publica\xE7\xE3o"}),title:E.string().min(1).openapi({description:"T\xEDtulo do livro"}),author:E.string().min(1).openapi({description:"Nome do autor"}),accessUrl:E.string().url().optional().openapi({description:"URL de acesso ao livro"}),description:E.string().optional().openapi({description:"Descri\xE7\xE3o do livro"}),authorImage:E.string().optional().openapi({description:"Imagem do autor (m\xE1ximo 5MB)",type:"string",format:"binary"}),coverImage:E.string().optional().openapi({description:"Imagem da capa (m\xE1ximo 5MB)",type:"string",format:"binary"}),catalogSheet:E.string().optional().openapi({description:"Ficha catalogr\xE1fica (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{201:{description:"Book volume created successfully",summary:"Volume Created"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:E.object({errors:E.record(E.string(),E.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:E.object({message:E.string()})}}}}},ql={method:"get",path:"/book-volumes",tags:["Book Volumes"],summary:"List book volumes",security:[{bearerAuth:[]}],request:{query:Rm},responses:{200:{description:"Paginated list of book volumes retrieved successfully",summary:"Volumes Retrieved",content:{"application/json":{schema:E.object({page:E.number(),totalPages:E.number(),offset:E.number(),limit:E.number(),bookVolumes:E.array(E.object({id:E.string(),volumeNumber:E.number(),year:E.number(),title:E.string(),author:E.string(),accessUrl:E.string().nullable(),authorImageUrl:E.string().nullable(),coverImageUrl:E.string().nullable(),catalogSheetUrl:E.string().nullable(),description:E.string().nullable(),createdAt:E.date(),updatedAt:E.date()}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:E.object({errors:E.record(E.string(),E.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:E.object({message:E.string()})}}}}},Ul={method:"get",path:"/book-volumes/{id}",tags:["Book Volumes"],summary:"Find book volume by ID",security:[{bearerAuth:[]}],request:{params:hm},responses:{200:{description:"Book volume details retrieved successfully",summary:"Volume Retrieved",content:{"application/json":{schema:E.object({id:E.string(),volumeNumber:E.number(),year:E.number(),title:E.string(),author:E.string(),accessUrl:E.string().nullable(),authorImageUrl:E.string().nullable(),coverImageUrl:E.string().nullable(),catalogSheetUrl:E.string().nullable(),description:E.string().nullable(),createdAt:E.date(),updatedAt:E.date()}).nullable()}}},400:{description:"Invalid volume ID format",summary:"Validation Error",content:{"application/json":{schema:E.object({errors:E.record(E.string(),E.string())})}}},404:{description:"Book volume not found with the provided ID",summary:"Volume Not Found",content:{"application/json":{schema:E.object({message:E.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:E.object({message:E.string()})}}}}},Ol={method:"put",path:"/book-volumes/{id}",tags:["Book Volumes"],summary:"Update book volume",security:[{bearerAuth:[]}],request:{params:bm.pick({id:!0}),body:{content:{"multipart/form-data":{schema:E.object({volumeNumber:E.number().int().positive().optional().openapi({description:"N\xFAmero do volume"}),year:E.number().int().positive().optional().openapi({description:"Ano de publica\xE7\xE3o"}),title:E.string().min(1).optional().openapi({description:"T\xEDtulo do livro"}),author:E.string().min(1).optional().openapi({description:"Nome do autor"}),accessUrl:E.string().url().optional().openapi({description:"URL de acesso ao livro"}),description:E.string().optional().openapi({description:"Descri\xE7\xE3o do livro"}),authorImage:E.string().optional().openapi({description:"Imagem do autor (m\xE1ximo 5MB)",type:"string",format:"binary"}),coverImage:E.string().optional().openapi({description:"Imagem da capa (m\xE1ximo 5MB)",type:"string",format:"binary"}),catalogSheet:E.string().optional().openapi({description:"Ficha catalogr\xE1fica (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{200:{description:"Book volume updated successfully",summary:"Volume Updated"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:E.object({errors:E.record(E.string(),E.string())})}}},404:{description:"Book volume not found with the provided ID",summary:"Volume Not Found",content:{"application/json":{schema:E.object({message:E.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:E.object({message:E.string()})}}}}},kl={method:"delete",path:"/book-volumes/{id}",tags:["Book Volumes"],summary:"Delete book volume",security:[{bearerAuth:[]}],request:{params:fm},responses:{200:{description:"Book volume deleted successfully",summary:"Volume Deleted"},400:{description:"Invalid volume ID format",summary:"Validation Error",content:{"application/json":{schema:E.object({errors:E.record(E.string(),E.string())})}}},404:{description:"Book volume not found with the provided ID",summary:"Volume Not Found",content:{"application/json":{schema:E.object({message:E.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:E.object({message:E.string()})}}}}};import{$Enums as eC}from"@prisma/client";import D from"zod";import{extendZodWithOpenApi as Zb}from"@asteasolutions/zod-to-openapi";import Cm from"zod";Zb(Cm);var wm=Cm.object({id:Cm.string()}),Lo=class{constructor(e,r){this.certificationRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=wm.parse({id:e.params.certification_id}),i=await this.certificationRepository.findById(t);if(!i)throw new p("A certifica\xE7\xE3o n\xE3o existe.");return await Promise.all([this.certificationRepository.deleteById(i.id),this.firebaseStorageService.deleteFile({fileUrl:i.certificationUrl})]),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Kb}from"@asteasolutions/zod-to-openapi";import Sm from"zod";Kb(Sm);var vm=Sm.object({certificationId:Sm.uuid()}),Wo=class{constructor(e){this.certificationRepository=e}async handle(e,r){try{let{certificationId:t}=vm.parse({certificationId:e.params.certification_id}),i=await this.certificationRepository.findById(t);if(!i)throw new p("Certificado n\xE3o encontrado.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Jb}from"@asteasolutions/zod-to-openapi";import gt from"zod";var Yb=1,Xb=6;Jb(gt);var Em=gt.object({page:gt.coerce.number().min(1).default(Yb),limit:gt.coerce.number().min(1).default(Xb),title:gt.string().optional(),description:gt.string().optional(),userId:gt.uuid().optional(),orderBy:gt.enum(["asc","desc"]).default("desc")}),_o=class{constructor(e){this.certificationRepository=e}async handle(e,r){try{let{limit:t,page:i,...n}=Em.parse(e.query),s=i*t-t,[m,c]=await Promise.all([this.certificationRepository.find({pagination:{offset:s,limit:t},filter:n}),this.certificationRepository.count({filter:n})]),d=Math.max(Math.ceil(c/t),1);return r.status(200).json({page:i,totalPages:d,offset:s,limit:t,certifications:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as $b}from"@asteasolutions/zod-to-openapi";import gr from"zod";$b(gr);var zo=gr.object({userId:gr.uuid(),title:gr.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),description:gr.string().min(1,"Descri\xE7\xE3o \xE9 obrigat\xF3ria."),certification:gr.any().refine(o=>o&&typeof o=="object"&&o.size>0,"Arquivo do certificado \xE9 obrigat\xF3rio")}),Ho=class{constructor(e,r,t){this.userRepository=e;this.certificationRepository=r;this.firebaseStorageService=t}async handle(e,r){try{let{userId:t,title:i,description:n,certification:s}=zo.parse({...e.body,userId:e.params.user_id,certification:e.file});if(!await this.userRepository.findById(t))throw new he("O usu\xE1rio n\xE3o existe.");let c=await this.firebaseStorageService.uploadFile({file:s,id:t,folder:j.CERTIFICATION});return await this.certificationRepository.register({userId:t,title:i,description:n,certificationUrl:c}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Qb}from"@asteasolutions/zod-to-openapi";import fr from"zod";Qb(fr);var Zo=fr.object({id:fr.uuid(),title:fr.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),description:fr.string().min(1,"Descri\xE7\xE3o \xE9 obrigat\xF3ria."),certification:fr.any().refine(o=>o==null||typeof o=="object"&&typeof o.size=="number"&&(o.size===0||o.size>0),"Arquivo do certificado \xE9 inv\xE1lido").optional()}),Vo=class{constructor(e,r){this.certificationRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{certification:t,id:i,...n}=Zo.parse({...e.body,id:e.params.certification_id,certification:e.file}),s=await this.certificationRepository.findById(i);if(!s)throw new he("A certifica\xE7\xE3o n\xE3o existe");let m=s.certificationUrl;return t&&t.size>0&&(m=await this.firebaseStorageService.updateFile({file:t,id:s.userId,folder:j.CERTIFICATION,fileUrl:s.certificationUrl})),await this.certificationRepository.update({...n,id:i,certificationUrl:m}),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Gl={method:"post",path:"/certifications/{user_id}",tags:["Certifications"],summary:"Register certification for user",security:[{bearerAuth:[]}],request:{params:zo.pick({userId:!0}).transform(()=>({user_id:""})),body:{content:{"multipart/form-data":{schema:zo.omit({userId:!0})}}}},responses:{201:{description:"Certification registered successfully for the user",summary:"Certification Registered",content:{"application/json":{schema:D.object({message:D.string()})}}},400:{description:"Invalid input data or file format",summary:"Validation Error",content:{"application/json":{schema:D.object({errors:D.record(D.string(),D.string())})}}},404:{description:"User not found with the provided ID",summary:"User Not Found",content:{"application/json":{schema:D.object({message:D.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:D.object({message:D.string()})}}}}},Nl={method:"get",path:"/certifications",tags:["Certifications"],summary:"List certifications",security:[{bearerAuth:[]}],request:{query:Em},responses:{200:{description:"Paginated list of certifications with user information retrieved successfully",summary:"Certifications Retrieved",content:{"application/json":{schema:D.object({page:D.number(),totalPages:D.number(),offset:D.number(),limit:D.number(),certifications:D.array(D.object({description:D.string(),userId:D.string(),title:D.string(),id:D.string(),createdAt:D.date(),updatedAt:D.date(),certificationUrl:D.url(),user:D.object({id:D.uuid(),name:D.string(),createdAt:D.date(),updatedAt:D.date(),avatarUrl:D.string().nullable(),emailAddress:D.email(),orcid:D.string().nullable(),phone:D.string().nullable(),lattesUrl:D.url().nullable(),role:D.enum(eC.UserRole)})}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:D.object({errors:D.record(D.string(),D.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:D.object({message:D.string()})}}}}},Ll={method:"get",path:"/certifications/{certification_id}",tags:["Certifications"],summary:"Find certification by ID",security:[{bearerAuth:[]}],request:{params:vm},responses:{200:{description:"Certification details retrieved successfully",summary:"Certification Retrieved",content:{"application/json":{schema:D.object({description:D.string(),userId:D.string(),title:D.string(),id:D.string(),createdAt:D.date(),updatedAt:D.date(),certificationUrl:D.url()}).nullable()}}},400:{description:"Invalid certification ID format",summary:"Validation Error",content:{"application/json":{schema:D.object({errors:D.record(D.string(),D.string())})}}},404:{description:"Certification not found with the provided ID",summary:"Certification Not Found",content:{"application/json":{schema:D.object({message:D.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:D.object({message:D.string()})}}}}},Wl={method:"put",path:"/certifications/{certification_id}",tags:["Certifications"],summary:"Update certification",security:[{bearerAuth:[]}],request:{params:Zo.pick({id:!0}).transform(()=>({certification_id:""})),body:{content:{"multipart/form-data":{schema:Zo.omit({id:!0})}}}},responses:{204:{description:"Certification updated successfully",summary:"Certification Updated"},400:{description:"Invalid input data or file format",summary:"Validation Error",content:{"application/json":{schema:D.object({errors:D.record(D.string(),D.string())})}}},404:{description:"Certification not found with the provided ID",summary:"Certification Not Found",content:{"application/json":{schema:D.object({message:D.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:D.object({message:D.string()})}}}}},_l={method:"delete",path:"/certifications/{certification_id}",tags:["Certifications"],summary:"Delete certification",security:[{bearerAuth:[]}],request:{params:wm},responses:{204:{description:"Certification deleted successfully",summary:"Certification Deleted"},400:{description:"Invalid certification ID format",summary:"Validation Error",content:{"application/json":{schema:D.object({errors:D.record(D.string(),D.string())})}}},404:{description:"Certification not found with the provided ID",summary:"Certification Not Found",content:{"application/json":{schema:D.object({message:D.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:D.object({message:D.string()})}}}}};import I from"zod";import{extendZodWithOpenApi as tC}from"@asteasolutions/zod-to-openapi";import jm from"zod";tC(jm);var xm=jm.object({id:jm.uuid()}),Ko=class{constructor(e,r){this.courseRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=xm.parse({id:e.params.id}),i=await this.courseRepository.findById(t);if(!i)throw new p("O curso n\xE3o existe.");return i.imageUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.imageUrl}),await this.courseRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as rC}from"@asteasolutions/zod-to-openapi";import Mm from"zod";rC(Mm);var Tm=Mm.object({id:Mm.uuid()}),Jo=class{constructor(e){this.courseRepository=e}async handle(e,r){try{let{id:t}=Tm.parse({id:e.params.id}),i=await this.courseRepository.findById(t);if(!i)throw new p("Curso n\xE3o encontrado.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as oC}from"@asteasolutions/zod-to-openapi";import ft from"zod";var iC=1,nC=6;oC(ft);var Am=ft.object({page:ft.coerce.number().min(1).default(iC),limit:ft.coerce.number().min(1).default(nC),title:ft.string().optional(),description:ft.string().optional(),coordinator:ft.string().optional(),orderBy:ft.enum(["asc","desc"]).default("desc")}),Yo=class{constructor(e){this.courseRepository=e}async handle(e,r){try{let{limit:t,page:i,...n}=Am.parse(e.query),s=i*t-t,[m,c]=await Promise.all([this.courseRepository.find({pagination:{offset:s,limit:t},filter:n}),this.courseRepository.count({filter:n})]),d=Math.max(Math.ceil(c/t),1);return r.status(200).json({page:i,totalPages:d,offset:s,limit:t,courses:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as sC}from"@asteasolutions/zod-to-openapi";import Re from"zod";var zl=5,Hl=1024,aC=Hl*Hl,mC=zl*aC;sC(Re);var Pm=Re.object({id:Re.uuid(),title:Re.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio.").optional(),coordinatorId:Re.string().uuid("Coordenador \xE9 obrigat\xF3rio.").optional(),email:Re.string().email("E-mail deve ser v\xE1lido.").optional(),location:Re.string().min(1,"Localiza\xE7\xE3o \xE9 obrigat\xF3ria.").optional(),scheduledAt:Re.coerce.date().optional(),registrationLink:Re.url("URL de inscri\xE7\xE3o deve ser v\xE1lida").optional(),description:Re.string().optional(),instructorIds:Re.transform(o=>typeof o=="string"?o.split(","):o).pipe(Re.array(Re.uuid())).optional(),image:Re.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=mC,`A imagem deve ter no m\xE1ximo ${zl}MB.`).optional()}),Xo=class{constructor(e,r){this.courseRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,image:i,title:n,coordinatorId:s,email:m,location:c,scheduledAt:d,registrationLink:y,description:S,instructorIds:A}=Pm.parse({id:e.params.id,...e.body,image:e.file}),$=await this.courseRepository.findById(t);if(!$)throw new p("O curso n\xE3o existe.");let oe=$.imageUrl;if(i&&(oe=await this.firebaseStorageService.uploadFile({file:i,id:t,folder:j.COURSE})),!oe)throw new a("URL da imagem \xE9 obrigat\xF3rio");return await this.courseRepository.update({id:t,title:n,coordinatorId:s,email:m,location:c,scheduledAt:d,registrationLink:y,description:S,imageUrl:oe,instructorIds:A}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Vl={method:"post",path:"/courses",tags:["Courses"],summary:"Create course",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:I.object({title:I.string().min(1).openapi({description:"T\xEDtulo do curso"}),coordinator:I.string().min(1).openapi({description:"Nome do coordenador"}),email:I.string().email().openapi({description:"E-mail de contato"}),location:I.string().min(1).openapi({description:"Localiza\xE7\xE3o do curso"}),scheduledAt:I.string().openapi({description:"Data e hora agendada (ISO 8601)",example:"2024-01-01T10:00:00Z"}),registrationLink:I.string().url().optional().openapi({description:"Link de inscri\xE7\xE3o"}),description:I.string().optional().openapi({description:"Descri\xE7\xE3o do curso"}),instructorIds:I.string().openapi({description:"IDs dos instrutores separados por v\xEDrgula",example:"uuid1,uuid2,uuid3"}),image:I.string().optional().openapi({description:"Imagem do curso (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{201:{description:"Course created successfully",summary:"Course Created"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:I.object({errors:I.record(I.string(),I.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:I.object({message:I.string()})}}}}},Zl={method:"get",path:"/courses",tags:["Courses"],summary:"List courses",security:[{bearerAuth:[]}],request:{query:Am},responses:{200:{description:"Paginated list of courses with instructor information retrieved successfully",summary:"Courses Retrieved",content:{"application/json":{schema:I.object({page:I.number(),totalPages:I.number(),offset:I.number(),limit:I.number(),courses:I.array(I.object({id:I.string(),title:I.string(),imageUrl:I.string().nullable(),coordinator:I.string(),email:I.string(),scheduledAt:I.date(),location:I.string(),registrationLink:I.string().nullable(),description:I.string().nullable(),createdAt:I.date(),updatedAt:I.date(),instructors:I.array(I.object({id:I.uuid(),name:I.string(),emailAddress:I.email(),avatarUrl:I.string().nullable(),createdAt:I.date(),updatedAt:I.date()}))}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:I.object({errors:I.record(I.string(),I.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:I.object({message:I.string()})}}}}},Kl={method:"get",path:"/courses/{id}",tags:["Courses"],summary:"Find course by ID",security:[{bearerAuth:[]}],request:{params:Tm},responses:{200:{description:"Course details retrieved successfully",summary:"Course Retrieved",content:{"application/json":{schema:I.object({id:I.string(),title:I.string(),imageUrl:I.string().nullable(),coordinator:I.string(),email:I.string(),scheduledAt:I.date(),location:I.string(),registrationLink:I.string().nullable(),description:I.string().nullable(),createdAt:I.date(),updatedAt:I.date(),instructors:I.array(I.object({id:I.uuid(),name:I.string(),emailAddress:I.email(),avatarUrl:I.string().nullable(),createdAt:I.date(),updatedAt:I.date()}))}).nullable()}}},400:{description:"Invalid course ID format",summary:"Validation Error",content:{"application/json":{schema:I.object({errors:I.record(I.string(),I.string())})}}},404:{description:"Course not found with the provided ID",summary:"Course Not Found",content:{"application/json":{schema:I.object({message:I.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:I.object({message:I.string()})}}}}},Jl={method:"put",path:"/courses/{id}",tags:["Courses"],summary:"Update course",security:[{bearerAuth:[]}],request:{params:Pm.pick({id:!0}),body:{content:{"multipart/form-data":{schema:I.object({title:I.string().min(1).optional().openapi({description:"T\xEDtulo do curso"}),coordinator:I.string().min(1).optional().openapi({description:"Nome do coordenador"}),email:I.string().email().optional().openapi({description:"E-mail de contato"}),location:I.string().min(1).optional().openapi({description:"Localiza\xE7\xE3o do curso"}),scheduledAt:I.string().optional().openapi({description:"Data e hora agendada (ISO 8601)",example:"2024-01-01T10:00:00Z"}),registrationLink:I.string().url().optional().openapi({description:"Link de inscri\xE7\xE3o"}),description:I.string().optional().openapi({description:"Descri\xE7\xE3o do curso"}),instructorIds:I.string().optional().openapi({description:"IDs dos instrutores separados por v\xEDrgula",example:"uuid1,uuid2,uuid3"}),image:I.string().optional().openapi({description:"Imagem do curso (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{200:{description:"Course updated successfully",summary:"Course Updated"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:I.object({errors:I.record(I.string(),I.string())})}}},404:{description:"Course not found with the provided ID",summary:"Course Not Found",content:{"application/json":{schema:I.object({message:I.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:I.object({message:I.string()})}}}}},Yl={method:"delete",path:"/courses/{id}",tags:["Courses"],summary:"Delete course",security:[{bearerAuth:[]}],request:{params:xm},responses:{200:{description:"Course deleted successfully",summary:"Course Deleted"},400:{description:"Invalid course ID format",summary:"Validation Error",content:{"application/json":{schema:I.object({errors:I.record(I.string(),I.string())})}}},404:{description:"Course not found with the provided ID",summary:"Course Not Found",content:{"application/json":{schema:I.object({message:I.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:I.object({message:I.string()})}}}}};import{$Enums as Om}from"@prisma/client";import w from"zod";import{extendZodWithOpenApi as cC}from"@asteasolutions/zod-to-openapi";import qe from"zod";cC(qe);var Dm=qe.object({code:qe.string(),title:qe.string(),description:qe.string().optional(),notes:qe.string().optional(),leaderId:qe.uuid(),deputyLeaderId:qe.uuid(),secretaryId:qe.uuid(),memberIds:qe.array(qe.uuid())}),$o=class{constructor(e){this.etpRepository=e}async handle(e,r){try{let{code:t,title:i,description:n,notes:s,leaderId:m,deputyLeaderId:c,secretaryId:d,memberIds:y}=Dm.parse(e.body);if(await this.etpRepository.findByCode(t))throw new pe("J\xE1 existe um ETP cadastrado com este c\xF3digo.");return await this.etpRepository.create({code:t,title:i,description:n,notes:s,leaderId:m,deputyLeaderId:c,secretaryId:d,memberIds:y}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as pC}from"@asteasolutions/zod-to-openapi";import Fm from"zod";pC(Fm);var Bm=Fm.object({id:Fm.uuid()}),Qo=class{constructor(e){this.etpRepository=e}async handle(e,r){try{let{id:t}=Bm.parse({id:e.params.id});if(!await this.etpRepository.findById(t))throw new p("O ETP n\xE3o existe.");return await this.etpRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as dC}from"@asteasolutions/zod-to-openapi";import qm from"zod";dC(qm);var ti=qm.object({id:qm.uuid()}),ei=class{constructor(e){this.etpRepository=e}async handle(e,r){try{let{id:t}=ti.parse({id:e.params.id}),i=await this.etpRepository.findById(t);if(!i)throw new p("O ETP n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as lC}from"@asteasolutions/zod-to-openapi";import Te from"zod";lC(Te);var Um=Te.object({id:Te.uuid(),code:Te.string().optional(),title:Te.string().optional(),description:Te.string().optional(),notes:Te.string().optional(),leaderId:Te.uuid().optional(),deputyLeaderId:Te.uuid().optional(),secretaryId:Te.uuid().optional(),memberIds:Te.array(Te.uuid()).optional()}),ri=class{constructor(e){this.etpRepository=e}async handle(e,r){try{let{id:t,code:i,title:n,description:s,notes:m,leaderId:c,deputyLeaderId:d,secretaryId:y,memberIds:S}=Um.parse({id:e.params.id,...e.body});if(!await this.etpRepository.findById(t))throw new p("O ETP n\xE3o existe.");if(i){let $=await this.etpRepository.findByCode(i);if($&&$.id!==t)throw new pe("J\xE1 existe um ETP com este c\xF3digo.")}return await this.etpRepository.update({id:t,code:i,title:n,description:s,notes:m,leaderId:c,deputyLeaderId:d,secretaryId:y,memberIds:S}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var uC=1,gC=9,oi=w.object({id:w.uuid(),registrationNumber:w.string(),mainEtps:w.string().nullable(),formations:w.string().nullable(),degrees:w.array(w.enum(Om.Degree)),occupations:w.string(),seniority:w.enum(Om.Seniority),institutions:w.string(),biography:w.string().nullable(),createdAt:w.date(),updatedAt:w.date(),user:w.object({id:w.uuid(),name:w.string(),emailAddress:w.string(),avatarUrl:w.string().nullable(),orcid:w.string().nullable(),phone:w.string().nullable(),lattesUrl:w.string().nullable(),role:w.enum(Om.UserRole)})}),Xl=w.object({id:w.uuid(),code:w.string(),title:w.string(),description:w.string().nullable(),notes:w.string().nullable(),createdAt:w.date(),updatedAt:w.date(),leader:w.object({id:w.uuid(),researcher:oi}).nullable(),deputyLeader:w.object({id:w.uuid(),researcher:oi}).nullable(),secretary:w.object({id:w.uuid(),researcher:oi}).nullable(),members:w.array(oi)}),$l={method:"post",path:"/etp",tags:["ETPs"],summary:"Create a new ETP with single leader, deputy leader, secretary and multiple members",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:Dm}}}},responses:{201:{description:"ETP created successfully",summary:"ETP Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:w.object({errors:w.record(w.string(),w.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:w.object({message:w.string()})}}},409:{description:"ETP with this code already exists",summary:"Conflict",content:{"application/json":{schema:w.object({message:w.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:w.object({message:w.string()})}}}}},Ql={method:"get",path:"/etp",tags:["ETPs"],summary:"List all ETPs with pagination and filters",request:{query:w.object({page:w.coerce.number().min(1).default(uC).optional(),limit:w.coerce.number().min(1).default(gC).optional(),code:w.string().optional(),title:w.string().optional(),description:w.string().optional(),notes:w.string().optional(),orderBy:w.enum(["asc","desc"]).optional()})},responses:{200:{description:"List of ETPs retrieved successfully with pagination",summary:"ETPs Retrieved",content:{"application/json":{schema:w.object({page:w.number(),totalPages:w.number(),offset:w.number(),limit:w.number(),etps:w.array(Xl)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:w.object({message:w.string()})}}}}},eu={method:"get",path:"/etp/{id}",tags:["ETPs"],summary:"Find ETP by ID",request:{params:ti},responses:{200:{description:"ETP details retrieved successfully",summary:"ETP Retrieved",content:{"application/json":{schema:Xl}}},400:{description:"Invalid ETP ID format",summary:"Validation Error",content:{"application/json":{schema:w.object({errors:w.record(w.string(),w.string())})}}},404:{description:"ETP not found with the provided ID",summary:"ETP Not Found",content:{"application/json":{schema:w.object({message:w.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:w.object({message:w.string()})}}}}},tu={method:"put",path:"/etp/{id}",tags:["ETPs"],summary:"Update ETP and manage user relationships (single leader, deputy leader, secretary, multiple members)",security:[{bearerAuth:[]}],request:{params:ti,body:{content:{"application/json":{schema:Um.omit({id:!0})}}}},responses:{200:{description:"ETP updated successfully",summary:"ETP Updated"},400:{description:"Invalid input data or ETP ID format",summary:"Validation Error",content:{"application/json":{schema:w.object({errors:w.record(w.string(),w.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:w.object({message:w.string()})}}},404:{description:"ETP not found with the provided ID",summary:"ETP Not Found",content:{"application/json":{schema:w.object({message:w.string()})}}},409:{description:"ETP with this code already exists",summary:"Conflict",content:{"application/json":{schema:w.object({message:w.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:w.object({message:w.string()})}}}}},ru={method:"delete",path:"/etp/{id}",tags:["ETPs"],summary:"Delete ETP",security:[{bearerAuth:[]}],request:{params:Bm},responses:{200:{description:"ETP deleted successfully",summary:"ETP Deleted"},400:{description:"Invalid ETP ID format",summary:"Validation Error",content:{"application/json":{schema:w.object({errors:w.record(w.string(),w.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:w.object({message:w.string()})}}},404:{description:"ETP not found with the provided ID",summary:"ETP Not Found",content:{"application/json":{schema:w.object({message:w.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:w.object({message:w.string()})}}}}};import{EventFormat as DC,EventStatus as FC}from"@prisma/client";import N from"zod";import{extendZodWithOpenApi as fC}from"@asteasolutions/zod-to-openapi";import{EventFormat as ii,EventStatus as km}from"@prisma/client";import Ae from"zod";var yC=5,ou=1024,hC=ou*ou,RC=yC*hC;fC(Ae);var Gm=Ae.object({title:Ae.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio"),description:Ae.string().optional(),startDate:Ae.coerce.date(),endDate:Ae.coerce.date(),location:Ae.string().optional(),format:Ae.enum(ii).default(ii.ONLINE),eventLink:Ae.string().url("Link do evento deve ser uma URL v\xE1lida").optional().or(Ae.literal("")),status:Ae.enum(km).default(km.PENDING),image:Ae.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=RC,"A imagem deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.")}).refine(o=>o.format===ii.ONLINE?!!o.eventLink:o.format===ii.IN_PERSON?!!o.location:!0,{message:"Eventos online devem ter link e eventos presenciais devem ter localiza\xE7\xE3o",path:["format"]}),ni=class{constructor(e,r){this.eventRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{title:t,description:i,startDate:n,endDate:s,location:m,format:c,eventLink:d,status:y,image:S}=Gm.parse({...e.body,image:e.file}),A=await this.eventRepository.create({title:t,description:i,startDate:n,endDate:s,location:m||void 0,format:c,eventLink:d||void 0,status:y??km.PENDING}),$=await this.firebaseStorageService.uploadFile({file:S,folder:j.EVENT,id:A.id});return await this.eventRepository.update({id:A.id,imageUrl:$}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as IC}from"@asteasolutions/zod-to-openapi";import Nm from"zod";IC(Nm);var Lm=Nm.object({id:Nm.uuid()}),si=class{constructor(e){this.eventRepository=e}async handle(e,r){try{let{id:t}=Lm.parse({id:e.params.id});if(!await this.eventRepository.findById(t))throw new p("O evento n\xE3o existe.");return await this.eventRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as bC}from"@asteasolutions/zod-to-openapi";import Wm from"zod";bC(Wm);var mi=Wm.object({id:Wm.uuid()}),ai=class{constructor(e){this.eventRepository=e}async handle(e,r){try{let{id:t}=mi.parse({id:e.params.id}),i=await this.eventRepository.findById(t);if(!i)throw new p("O evento n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as CC}from"@asteasolutions/zod-to-openapi";import{EventFormat as wC,EventStatus as SC}from"@prisma/client";import yt from"zod";var vC=1,EC=10;CC(yt);var _m=yt.object({page:yt.coerce.number().min(1).default(vC),limit:yt.coerce.number().min(1).default(EC),title:yt.string().optional(),status:yt.nativeEnum(SC).optional(),format:yt.nativeEnum(wC).optional(),orderBy:yt.enum(["asc","desc"]).optional()}),ci=class{constructor(e){this.eventRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=_m.parse(e.query),s=i*t-i,[m,c]=await Promise.all([this.eventRepository.find({pagination:{offset:s,limit:i},filter:n}),this.eventRepository.count({filter:n})]),d=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:d,offset:s,limit:i,events:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as jC}from"@asteasolutions/zod-to-openapi";import{EventFormat as xC,EventStatus as MC}from"@prisma/client";import Ce from"zod";var TC=5,iu=1024,AC=iu*iu,PC=TC*AC;jC(Ce);var Hm=Ce.object({id:Ce.uuid(),title:Ce.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio").optional(),description:Ce.string().optional(),startDate:Ce.coerce.date().optional(),endDate:Ce.coerce.date().optional(),location:Ce.string().optional(),format:Ce.nativeEnum(xC).optional(),eventLink:Ce.string().url("Link do evento deve ser uma URL v\xE1lida").optional().or(Ce.literal("")),status:Ce.nativeEnum(MC).optional(),image:Ce.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=PC,"A imagem deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.").optional()}),pi=class{constructor(e,r){this.eventRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,title:i,description:n,startDate:s,endDate:m,location:c,format:d,eventLink:y,status:S,image:A}=Hm.parse({id:e.params.id,...e.body,image:e.file});if(!await this.eventRepository.findById(t))throw new p("O evento n\xE3o existe.");let oe;return A&&(oe=await this.firebaseStorageService.uploadFile({file:A,folder:j.EVENT,id:t})),await this.eventRepository.update({id:t,title:i,description:n,startDate:s,endDate:m,location:c||void 0,format:d,eventLink:y||void 0,status:S,imageUrl:oe}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var nu=N.object({id:N.uuid(),title:N.string(),description:N.string().nullable(),imageUrl:N.string().nullable(),startDate:N.date(),endDate:N.date(),location:N.string().nullable(),status:N.nativeEnum(FC),format:N.nativeEnum(DC),eventLink:N.string().nullable(),createdAt:N.date(),updatedAt:N.date()}),su={method:"post",path:"/event",tags:["Events"],summary:"Create a new event",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:Gm}}}},responses:{201:{description:"Event created successfully",summary:"Event Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:N.object({errors:N.record(N.string(),N.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:N.object({message:N.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:N.object({message:N.string()})}}}}},au={method:"get",path:"/event",tags:["Events"],summary:"List all events with pagination and filters",request:{query:_m},responses:{200:{description:"List of events retrieved successfully with pagination",summary:"Events Retrieved",content:{"application/json":{schema:N.object({page:N.number(),totalPages:N.number(),offset:N.number(),limit:N.number(),events:N.array(nu)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:N.object({errors:N.record(N.string(),N.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:N.object({message:N.string()})}}}}},mu={method:"get",path:"/event/{id}",tags:["Events"],summary:"Find event by ID",request:{params:mi},responses:{200:{description:"Event details retrieved successfully",summary:"Event Retrieved",content:{"application/json":{schema:nu}}},400:{description:"Invalid event ID format",summary:"Validation Error",content:{"application/json":{schema:N.object({errors:N.record(N.string(),N.string())})}}},404:{description:"Event not found with the provided ID",summary:"Event Not Found",content:{"application/json":{schema:N.object({message:N.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:N.object({message:N.string()})}}}}},cu={method:"put",path:"/event/{id}",tags:["Events"],summary:"Update event",security:[{bearerAuth:[]}],request:{params:mi,body:{content:{"multipart/form-data":{schema:Hm.omit({id:!0})}}}},responses:{200:{description:"Event updated successfully",summary:"Event Updated"},400:{description:"Invalid input data or event ID format",summary:"Validation Error",content:{"application/json":{schema:N.object({errors:N.record(N.string(),N.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:N.object({message:N.string()})}}},404:{description:"Event not found with the provided ID",summary:"Event Not Found",content:{"application/json":{schema:N.object({message:N.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:N.object({message:N.string()})}}}}},pu={method:"delete",path:"/event/{id}",tags:["Events"],summary:"Delete event",security:[{bearerAuth:[]}],request:{params:Lm},responses:{200:{description:"Event deleted successfully",summary:"Event Deleted"},400:{description:"Invalid event ID format",summary:"Validation Error",content:{"application/json":{schema:N.object({errors:N.record(N.string(),N.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:N.object({message:N.string()})}}},404:{description:"Event not found with the provided ID",summary:"Event Not Found",content:{"application/json":{schema:N.object({message:N.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:N.object({message:N.string()})}}}}};import{InMemoriamRole as YC}from"@prisma/client";import B from"zod";import{extendZodWithOpenApi as BC}from"@asteasolutions/zod-to-openapi";import{InMemoriamRole as qC}from"@prisma/client";import ht from"zod";var lu=2,du=1024,UC=du*du,OC=lu*UC;BC(ht);var zm=ht.object({name:ht.string().min(1,"Nome \xE9 obrigat\xF3rio"),birthDate:ht.coerce.date(),deathDate:ht.coerce.date(),biography:ht.string().optional(),photo:ht.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=OC,`A imagem deve ter no m\xE1ximo ${lu}MB.`).optional(),role:ht.enum(qC)}).refine(o=>o.deathDate>o.birthDate,{message:"Data de falecimento deve ser posterior \xE0 data de nascimento",path:["deathDate"]}),di=class{constructor(e,r){this.inMemoriamRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{name:t,birthDate:i,deathDate:n,biography:s,role:m,photo:c}=zm.parse({...e.body,photo:e.file}),d=await this.inMemoriamRepository.create({name:t,birthDate:i,deathDate:n,biography:s??void 0,role:m}),y;return c&&(y=await this.firebaseStorageService.uploadFile({file:c,id:d.id,folder:j.IN_MEMORIAM}),await this.inMemoriamRepository.update({id:d.id,photoUrl:y})),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as kC}from"@asteasolutions/zod-to-openapi";import Vm from"zod";kC(Vm);var Zm=Vm.object({id:Vm.uuid()}),li=class{constructor(e,r){this.inMemoriamRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=Zm.parse({id:e.params.id}),i=await this.inMemoriamRepository.findById(t);if(!i)throw new p("O in memoriam n\xE3o existe.");return i.photoUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.photoUrl}),await this.inMemoriamRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as GC}from"@asteasolutions/zod-to-openapi";import Km from"zod";GC(Km);var gi=Km.object({id:Km.uuid()}),ui=class{constructor(e){this.inMemoriamRepository=e}async handle(e,r){try{let{id:t}=gi.parse({id:e.params.id}),i=await this.inMemoriamRepository.findById(t);if(!i)throw new p("O in memoriam n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as NC}from"@asteasolutions/zod-to-openapi";import{InMemoriamRole as LC}from"@prisma/client";import Jm from"zod";NC(Jm);var Ym=Jm.object({role:Jm.enum(LC)}),fi=class{constructor(e){this.inMemoriamRepository=e}async handle(e,r){try{let{role:t}=Ym.parse({role:e.params.role}),i=await this.inMemoriamRepository.findByRole(t);return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as WC}from"@asteasolutions/zod-to-openapi";import{InMemoriamRole as _C}from"@prisma/client";import Rt from"zod";var HC=1,zC=9;WC(Rt);var Xm=Rt.object({page:Rt.coerce.number().min(1).default(HC),limit:Rt.coerce.number().min(1).default(zC),name:Rt.string().optional(),biography:Rt.string().optional(),role:Rt.enum(_C).optional(),orderBy:Rt.enum(["asc","desc"]).default("desc")}),yi=class{constructor(e){this.inMemoriamRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=Xm.parse(e.query),s=i*t-i,[m,c]=await Promise.all([this.inMemoriamRepository.find({pagination:{offset:s,limit:i},filter:n}),this.inMemoriamRepository.count({filter:n})]),d=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:d,offset:s,limit:i,inMemoriam:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as VC}from"@asteasolutions/zod-to-openapi";import{InMemoriamRole as ZC}from"@prisma/client";import Ye from"zod";var gu=2,uu=1024,KC=uu*uu,JC=gu*KC;VC(Ye);var $m=Ye.object({id:Ye.uuid(),name:Ye.string().min(1,"Nome \xE9 obrigat\xF3rio").optional(),birthDate:Ye.coerce.date().optional(),deathDate:Ye.coerce.date().optional(),biography:Ye.string().optional(),photo:Ye.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=JC,`A imagem deve ter no m\xE1ximo ${gu}MB.`).optional(),role:Ye.enum(ZC).optional()}).refine(o=>o.birthDate&&o.deathDate?o.deathDate>o.birthDate:!0,{message:"Data de falecimento deve ser posterior \xE0 data de nascimento",path:["deathDate"]}),hi=class{constructor(e,r){this.inMemoriamRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,name:i,birthDate:n,deathDate:s,biography:m,photo:c,role:d}=$m.parse({id:e.params.id,...e.body,photo:e.file}),y=await this.inMemoriamRepository.findById(t);if(!y)throw new p("O registro in memoriam n\xE3o existe.");let S=y.photoUrl;return c&&(S=await this.firebaseStorageService.uploadFile({file:c,id:t,folder:j.IN_MEMORIAM})),await this.inMemoriamRepository.update({id:t,name:i,birthDate:n,deathDate:s,biography:m,photoUrl:S??void 0,role:d}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Qm=B.object({id:B.uuid(),name:B.string(),birthDate:B.date(),deathDate:B.date(),biography:B.string().nullable(),photoUrl:B.string().nullable(),role:B.enum(YC),createdAt:B.date(),updatedAt:B.date()}),fu={method:"post",path:"/in-memoriam",tags:["In Memoriam"],summary:"Create a new in memoriam record with optional photo upload",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:zm}}}},responses:{201:{description:"In memoriam record created successfully",summary:"In Memoriam Created"},400:{description:"Invalid input data, missing required fields, or invalid photo format/size",summary:"Validation Error",content:{"application/json":{schema:B.object({errors:B.record(B.string(),B.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:B.object({message:B.string()})}}},409:{description:"In memoriam record with this name already exists",summary:"Conflict",content:{"application/json":{schema:B.object({message:B.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:B.object({message:B.string()})}}}}},yu={method:"get",path:"/in-memoriam",tags:["In Memoriam"],summary:"List all in memoriam records with pagination and filters",request:{query:Xm},responses:{200:{description:"List of in memoriam records retrieved successfully with pagination",summary:"In Memoriam Records Retrieved",content:{"application/json":{schema:B.object({page:B.number(),totalPages:B.number(),offset:B.number(),limit:B.number(),inMemoriam:B.array(Qm)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:B.object({errors:B.record(B.string(),B.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:B.object({message:B.string()})}}}}},hu={method:"get",path:"/in-memoriam/{id}",tags:["In Memoriam"],summary:"Find in memoriam record by ID",request:{params:gi},responses:{200:{description:"In memoriam record details retrieved successfully",summary:"In Memoriam Record Retrieved",content:{"application/json":{schema:Qm}}},400:{description:"Invalid in memoriam record ID format",summary:"Validation Error",content:{"application/json":{schema:B.object({errors:B.record(B.string(),B.string())})}}},404:{description:"In memoriam record not found with the provided ID",summary:"In Memoriam Record Not Found",content:{"application/json":{schema:B.object({message:B.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:B.object({message:B.string()})}}}}},Ru={method:"put",path:"/in-memoriam/{id}",tags:["In Memoriam"],summary:"Update in memoriam record with optional photo upload",security:[{bearerAuth:[]}],request:{params:gi,body:{content:{"multipart/form-data":{schema:$m.omit({id:!0})}}}},responses:{200:{description:"In memoriam record updated successfully",summary:"In Memoriam Record Updated"},400:{description:"Invalid input data, in memoriam record ID format, or invalid photo format/size",summary:"Validation Error",content:{"application/json":{schema:B.object({errors:B.record(B.string(),B.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:B.object({message:B.string()})}}},404:{description:"In memoriam record not found with the provided ID",summary:"In Memoriam Record Not Found",content:{"application/json":{schema:B.object({message:B.string()})}}},409:{description:"In memoriam record with this name already exists",summary:"Conflict",content:{"application/json":{schema:B.object({message:B.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:B.object({message:B.string()})}}}}},Iu={method:"delete",path:"/in-memoriam/{id}",tags:["In Memoriam"],summary:"Delete in memoriam record",security:[{bearerAuth:[]}],request:{params:Zm},responses:{200:{description:"In memoriam record deleted successfully",summary:"In Memoriam Record Deleted"},400:{description:"Invalid in memoriam record ID format",summary:"Validation Error",content:{"application/json":{schema:B.object({errors:B.record(B.string(),B.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:B.object({message:B.string()})}}},404:{description:"In memoriam record not found with the provided ID",summary:"In Memoriam Record Not Found",content:{"application/json":{schema:B.object({message:B.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:B.object({message:B.string()})}}}}},QD={method:"get",path:"/in-memoriam/role/{role}",tags:["In Memoriam"],summary:"Find in memoriam records by role",request:{params:Ym},responses:{200:{description:"In memoriam records retrieved successfully by role",summary:"In Memoriam Records Retrieved by Role",content:{"application/json":{schema:B.array(Qm)}}},400:{description:"Invalid role parameter provided",summary:"Validation Error",content:{"application/json":{schema:B.object({errors:B.record(B.string(),B.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:B.object({message:B.string()})}}}}};import Q from"zod";import{extendZodWithOpenApi as XC}from"@asteasolutions/zod-to-openapi";import to from"zod";var Cu=2,bu=1024,$C=bu*bu,QC=Cu*$C;XC(to);var ec=to.object({image:to.any().refine(o=>o==null||typeof o!="object"||typeof o.size!="number"?!1:o.size<=QC,`A imagem deve ter no m\xE1ximo ${Cu}MB.`),caption:to.string().optional(),congressId:to.uuid()}),Ri=class{constructor(e,r,t){this.internationalScientificCongressGalleryRepository=e;this.internationalScientificCongressRepository=r;this.firebaseStorageService=t}async handle(e,r){try{let{image:t,caption:i,congressId:n}=ec.parse({...e.body,...e.params,image:e.file});if(!await this.internationalScientificCongressRepository.findById(n))throw new p("O congresso n\xE3o existe.");let m=await this.internationalScientificCongressGalleryRepository.create({imageUrl:"",caption:i||void 0,congressId:n}),c=await this.firebaseStorageService.uploadFile({file:t,id:m.id,folder:j.INTERNATIONAL_SCIENTIFIC_CONGRESS_GALLERY});return await this.internationalScientificCongressGalleryRepository.update({id:m.id,imageUrl:c}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as ew}from"@asteasolutions/zod-to-openapi";import tc from"zod";ew(tc);var bi=tc.object({id:tc.uuid()}),Ii=class{constructor(e){this.internationalScientificCongressGalleryRepository=e}async handle(e,r){try{let{id:t}=bi.parse({id:e.params.id});if(!await this.internationalScientificCongressGalleryRepository.findById(t))throw new p("A imagem da galeria n\xE3o existe.");return await this.internationalScientificCongressGalleryRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as tw}from"@asteasolutions/zod-to-openapi";import yr from"zod";var rw=1,ow=9;tw(yr);var rc=yr.object({congressId:yr.uuid(),page:yr.coerce.number().min(1).default(rw),limit:yr.coerce.number().min(1).default(ow),caption:yr.string().optional()}),Ci=class{constructor(e){this.internationalScientificCongressGalleryRepository=e}async handle(e,r){try{let{congressId:t,page:i,limit:n,...s}=rc.parse({congressId:e.params.congressId,...e.query}),m=n*i-n,[c,d]=await Promise.all([this.internationalScientificCongressGalleryRepository.findByCongressId({pagination:{offset:m,limit:n},filter:{congressId:t,...s}}),this.internationalScientificCongressGalleryRepository.count({filter:{congressId:t,caption:s.caption}})]),y=Math.max(Math.ceil(d/n),1);return r.status(200).json({page:i,totalPages:y,offset:m,limit:n,galleryImages:c})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as iw}from"@asteasolutions/zod-to-openapi";import ro from"zod";var Su=2,wu=1024,nw=wu*wu,sw=Su*nw;iw(ro);var oc=ro.object({id:ro.uuid(),image:ro.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=sw,`A imagem deve ter no m\xE1ximo ${Su}MB.`).optional(),caption:ro.string().optional()}),wi=class{constructor(e,r){this.internationalScientificCongressGalleryRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,image:i,caption:n}=oc.parse({id:e.params.id,...e.body,image:e.file}),s=await this.internationalScientificCongressGalleryRepository.findById(t);if(!s)throw new p("A imagem da galeria n\xE3o existe.");let m=s.imageUrl;return i&&(m=await this.firebaseStorageService.uploadFile({file:i,id:t,folder:j.INTERNATIONAL_SCIENTIFIC_CONGRESS_GALLERY})),await this.internationalScientificCongressGalleryRepository.update({id:t,imageUrl:m??void 0,caption:n||void 0}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var aw=Q.object({id:Q.uuid(),imageUrl:Q.string(),caption:Q.string().nullable(),congressId:Q.uuid()}),vu={method:"post",path:"/international-scientific-congress/{congressId}/gallery",tags:["International Scientific Congresses"],summary:"Create a new congress gallery image",security:[{bearerAuth:[]}],request:{params:Q.object({congressId:Q.uuid()}),body:{content:{"application/json":{schema:ec.omit({congressId:!0})}}}},responses:{201:{description:"Congress gallery image created successfully",summary:"Congress Gallery Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:Q.object({errors:Q.record(Q.string(),Q.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:Q.object({message:Q.string()})}}},404:{description:"Congress not found with the provided ID",summary:"Congress Not Found",content:{"application/json":{schema:Q.object({message:Q.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Q.object({message:Q.string()})}}}}},Eu={method:"get",path:"/international-scientific-congress/{congressId}/gallery",tags:["International Scientific Congresses"],summary:"Find congress gallery images by congress ID",request:{params:rc},responses:{200:{description:"Congress gallery images retrieved successfully by congress ID",summary:"Congress Galleries Retrieved",content:{"application/json":{schema:Q.array(aw)}}},400:{description:"Invalid congress ID parameter provided",summary:"Validation Error",content:{"application/json":{schema:Q.object({errors:Q.record(Q.string(),Q.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Q.object({message:Q.string()})}}}}},ju={method:"put",path:"/international-scientific-congress/gallery/{id}",tags:["International Scientific Congresses"],summary:"Update congress gallery image",security:[{bearerAuth:[]}],request:{params:bi,body:{content:{"application/json":{schema:oc.omit({id:!0})}}}},responses:{200:{description:"Congress gallery image updated successfully",summary:"Congress Gallery Updated"},400:{description:"Invalid input data or gallery ID format",summary:"Validation Error",content:{"application/json":{schema:Q.object({errors:Q.record(Q.string(),Q.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:Q.object({message:Q.string()})}}},404:{description:"Congress gallery image not found with the provided ID",summary:"Congress Gallery Not Found",content:{"application/json":{schema:Q.object({message:Q.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Q.object({message:Q.string()})}}}}},xu={method:"delete",path:"/international-scientific-congress/gallery/{id}",tags:["International Scientific Congresses"],summary:"Delete congress gallery image",security:[{bearerAuth:[]}],request:{params:bi},responses:{200:{description:"Congress gallery image deleted successfully",summary:"Congress Gallery Deleted"},400:{description:"Invalid gallery ID format",summary:"Validation Error",content:{"application/json":{schema:Q.object({errors:Q.record(Q.string(),Q.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:Q.object({message:Q.string()})}}},404:{description:"Congress gallery image not found with the provided ID",summary:"Congress Gallery Not Found",content:{"application/json":{schema:Q.object({message:Q.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Q.object({message:Q.string()})}}}}};import ee from"zod";import{extendZodWithOpenApi as mw}from"@asteasolutions/zod-to-openapi";import oo from"zod";var Tu=2,Mu=1024,cw=Mu*Mu,pw=Tu*cw;mw(oo);var ic=oo.object({name:oo.string().min(1,"Nome \xE9 obrigat\xF3rio"),logo:oo.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=pw,`A imagem deve ter no m\xE1ximo ${Tu}MB.`).optional(),congressId:oo.uuid()}),Si=class{constructor(e,r,t){this.internationalScientificCongressPartnerRepository=e;this.internationalScientificCongressRepository=r;this.firebaseStorageService=t}async handle(e,r){try{let{name:t,logo:i,congressId:n}=ic.parse({...e.body,...e.params,logo:e.file});if(!await this.internationalScientificCongressRepository.findById(n))throw new p("O congresso n\xE3o existe.");let m=await this.internationalScientificCongressPartnerRepository.create({name:t,congressId:n}),c;return i&&(c=await this.firebaseStorageService.uploadFile({file:i,id:m.id,folder:j.PARTNER}),await this.internationalScientificCongressPartnerRepository.update({id:m.id,logoUrl:c})),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as dw}from"@asteasolutions/zod-to-openapi";import nc from"zod";dw(nc);var Ei=nc.object({id:nc.uuid()}),vi=class{constructor(e){this.internationalScientificCongressPartnerRepository=e}async handle(e,r){try{let{id:t}=Ei.parse({id:e.params.id});if(!await this.internationalScientificCongressPartnerRepository.findById(t))throw new p("O parceiro n\xE3o existe.");return await this.internationalScientificCongressPartnerRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as lw}from"@asteasolutions/zod-to-openapi";import hr from"zod";var uw=1,gw=9;lw(hr);var sc=hr.object({congressId:hr.uuid(),page:hr.coerce.number().min(1).optional(),limit:hr.coerce.number().min(1).optional(),name:hr.string().optional()}),ji=class{constructor(e){this.internationalScientificCongressPartnerRepository=e}async handle(e,r){try{let{congressId:t,page:i,limit:n,...s}=sc.parse({congressId:e.params.congressId,...e.query});if(i!==void 0&&n!==void 0){let c=i||uw,d=n||gw,y=d*c-d,[S,A]=await Promise.all([this.internationalScientificCongressPartnerRepository.findByCongressId({pagination:{offset:y,limit:d},filter:{congressId:t,...s}}),this.internationalScientificCongressPartnerRepository.count({filter:{congressId:t,name:s.name}})]),$=Math.max(Math.ceil(A/d),1);return r.status(200).json({page:c,totalPages:$,offset:y,limit:d,partners:S})}let m=await this.internationalScientificCongressPartnerRepository.findByCongressId({filter:{congressId:t,...s}});return r.status(200).json(m)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as fw}from"@asteasolutions/zod-to-openapi";import io from"zod";var Pu=2,Au=1024,yw=Au*Au,hw=Pu*yw;fw(io);var ac=io.object({id:io.uuid(),name:io.string().min(1,"Nome \xE9 obrigat\xF3rio").optional(),logo:io.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=hw,`A imagem deve ter no m\xE1ximo ${Pu}MB.`).optional()}),xi=class{constructor(e,r){this.internationalScientificCongressPartnerRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,name:i,logo:n}=ac.parse({id:e.params.id,...e.body,logo:e.file}),s=await this.internationalScientificCongressPartnerRepository.findById(t);if(!s)throw new p("O parceiro n\xE3o existe.");let m=s.logoUrl;return n&&(m=await this.firebaseStorageService.uploadFile({file:n,id:t,folder:j.PARTNER})),await this.internationalScientificCongressPartnerRepository.update({id:t,name:i,logoUrl:m??void 0}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Rw=ee.object({id:ee.uuid(),name:ee.string(),logoUrl:ee.string().nullable(),congressId:ee.uuid()}),Du={method:"post",path:"/international-scientific-congress/{congressId}/partner",tags:["International Scientific Congresses"],summary:"Create a new congress partner",security:[{bearerAuth:[]}],request:{params:ee.object({congressId:ee.uuid()}),body:{content:{"application/json":{schema:ic.omit({congressId:!0})}}}},responses:{201:{description:"Congress partner created successfully",summary:"Congress Partner Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:ee.object({errors:ee.record(ee.string(),ee.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:ee.object({message:ee.string()})}}},404:{description:"Congress not found with the provided ID",summary:"Congress Not Found",content:{"application/json":{schema:ee.object({message:ee.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:ee.object({message:ee.string()})}}}}},Fu={method:"get",path:"/international-scientific-congress/{congressId}/partner",tags:["International Scientific Congresses"],summary:"Find congress partners by congress ID",request:{params:sc},responses:{200:{description:"Congress partners retrieved successfully by congress ID",summary:"Congress Partners Retrieved",content:{"application/json":{schema:ee.array(Rw)}}},400:{description:"Invalid congress ID parameter provided",summary:"Validation Error",content:{"application/json":{schema:ee.object({errors:ee.record(ee.string(),ee.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:ee.object({message:ee.string()})}}}}},Bu={method:"put",path:"/international-scientific-congress/partner/{id}",tags:["International Scientific Congresses"],summary:"Update congress partner",security:[{bearerAuth:[]}],request:{params:Ei,body:{content:{"application/json":{schema:ac.omit({id:!0})}}}},responses:{200:{description:"Congress partner updated successfully",summary:"Congress Partner Updated"},400:{description:"Invalid input data or partner ID format",summary:"Validation Error",content:{"application/json":{schema:ee.object({errors:ee.record(ee.string(),ee.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:ee.object({message:ee.string()})}}},404:{description:"Congress partner not found with the provided ID",summary:"Congress Partner Not Found",content:{"application/json":{schema:ee.object({message:ee.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:ee.object({message:ee.string()})}}}}},qu={method:"delete",path:"/international-scientific-congress/partner/{id}",tags:["International Scientific Congresses"],summary:"Delete congress partner",security:[{bearerAuth:[]}],request:{params:Ei},responses:{200:{description:"Congress partner deleted successfully",summary:"Congress Partner Deleted"},400:{description:"Invalid partner ID format",summary:"Validation Error",content:{"application/json":{schema:ee.object({errors:ee.record(ee.string(),ee.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:ee.object({message:ee.string()})}}},404:{description:"Congress partner not found with the provided ID",summary:"Congress Partner Not Found",content:{"application/json":{schema:ee.object({message:ee.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:ee.object({message:ee.string()})}}}}};import g from"zod";import{extendZodWithOpenApi as Iw}from"@asteasolutions/zod-to-openapi";import ce from"zod";Iw(ce);var mc=ce.object({title:ce.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio"),edition:ce.coerce.number().int().positive("Edi\xE7\xE3o deve ser um n\xFAmero positivo"),startDate:ce.coerce.date(),endDate:ce.coerce.date(),description:ce.string().optional(),location:ce.string().optional(),congressLink:ce.url("Link do congresso deve ser uma URL v\xE1lida").optional().or(ce.literal("")),noticeUrl:ce.url("URL do edital deve ser uma URL v\xE1lida").optional().or(ce.literal("")),scheduleUrl:ce.url("URL do cronograma deve ser uma URL v\xE1lida").optional().or(ce.literal("")),programUrl:ce.url("URL da programa\xE7\xE3o deve ser uma URL v\xE1lida").optional().or(ce.literal("")),adminReportUrl:ce.url("URL do relat\xF3rio administrativo deve ser uma URL v\xE1lida").optional().or(ce.literal("")),proceedingsUrl:ce.url("URL dos anais deve ser uma URL v\xE1lida").optional().or(ce.literal(""))}).refine(o=>o.endDate>=o.startDate,{message:"Data de t\xE9rmino deve ser posterior ou igual \xE0 data de in\xEDcio",path:["endDate"]}),Mi=class{constructor(e){this.internationalScientificCongressRepository=e}async handle(e,r){try{let t=mc.parse(e.body);return await this.internationalScientificCongressRepository.create(t),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as bw}from"@asteasolutions/zod-to-openapi";import cc from"zod";bw(cc);var pc=cc.object({id:cc.uuid()}),Ti=class{constructor(e){this.internationalScientificCongressRepository=e}async handle(e,r){try{let{id:t}=pc.parse({id:e.params.id});if(!await this.internationalScientificCongressRepository.findById(t))throw new p("O congresso n\xE3o existe.");return await this.internationalScientificCongressRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Cw}from"@asteasolutions/zod-to-openapi";import dc from"zod";Cw(dc);var lc=dc.object({edition:dc.coerce.number().int().positive()}),Ai=class{constructor(e){this.internationalScientificCongressRepository=e}async handle(e,r){try{let{edition:t}=lc.parse({edition:e.params.edition}),i=await this.internationalScientificCongressRepository.findByEdition(t);return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as ww}from"@asteasolutions/zod-to-openapi";import uc from"zod";ww(uc);var Di=uc.object({id:uc.uuid()}),Pi=class{constructor(e){this.internationalScientificCongressRepository=e}async handle(e,r){try{let{id:t}=Di.parse({id:e.params.id}),i=await this.internationalScientificCongressRepository.findById(t);if(!i)throw new p("O congresso n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Sw}from"@asteasolutions/zod-to-openapi";import It from"zod";var vw=1,Ew=10;Sw(It);var gc=It.object({page:It.coerce.number().min(1).default(vw),limit:It.coerce.number().min(1).default(Ew),title:It.string().optional(),edition:It.coerce.number().int().positive().optional(),location:It.string().optional(),orderBy:It.enum(["asc","desc"]).optional()}),Fi=class{constructor(e){this.internationalScientificCongressRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=gc.parse(e.query),s=i*t-i,[m,c]=await Promise.all([this.internationalScientificCongressRepository.find({pagination:{offset:s,limit:i},filter:n}),this.internationalScientificCongressRepository.count({filter:n})]),d=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:d,offset:s,limit:i,congresses:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as jw}from"@asteasolutions/zod-to-openapi";import me from"zod";jw(me);var fc=me.object({id:me.uuid(),title:me.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio").optional(),edition:me.coerce.number().int().positive("Edi\xE7\xE3o deve ser um n\xFAmero positivo").optional(),startDate:me.coerce.date().optional(),endDate:me.coerce.date().optional(),description:me.string().optional(),location:me.string().optional(),congressLink:me.url("Link do congresso deve ser uma URL v\xE1lida").optional().or(me.literal("")),noticeUrl:me.url("URL do edital deve ser uma URL v\xE1lida").optional().or(me.literal("")),scheduleUrl:me.url("URL do cronograma deve ser uma URL v\xE1lida").optional().or(me.literal("")),programUrl:me.url("URL da programa\xE7\xE3o deve ser uma URL v\xE1lida").optional().or(me.literal("")),adminReportUrl:me.url("URL do relat\xF3rio administrativo deve ser uma URL v\xE1lida").optional().or(me.literal("")),proceedingsUrl:me.url("URL dos anais deve ser uma URL v\xE1lida").optional().or(me.literal(""))}),Bi=class{constructor(e){this.internationalScientificCongressRepository=e}async handle(e,r){try{let{id:t,...i}=fc.parse({id:e.params.id,...e.body});if(!await this.internationalScientificCongressRepository.findById(t))throw new p("O congresso n\xE3o existe.");return await this.internationalScientificCongressRepository.update({...i,id:t}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var xw=9,Mw=g.object({image:g.any().openapi({type:"string",format:"binary"}),caption:g.string().optional()}),Tw=g.object({image:g.any().openapi({type:"string",format:"binary"}).optional(),caption:g.string().optional()}),Aw=g.object({id:g.uuid(),name:g.string(),logoUrl:g.string().nullable(),congressId:g.uuid()}),yc=g.object({id:g.uuid(),imageUrl:g.string(),caption:g.string().nullable(),congressId:g.uuid()}),hc=g.object({id:g.uuid(),title:g.string(),edition:g.number(),startDate:g.date(),endDate:g.date(),description:g.string().nullable(),location:g.string().nullable(),congressLink:g.string().nullable(),noticeUrl:g.string().nullable(),scheduleUrl:g.string().nullable(),programUrl:g.string().nullable(),adminReportUrl:g.string().nullable(),proceedingsUrl:g.string().nullable(),partners:g.array(Aw),galleries:g.array(yc),createdAt:g.date(),updatedAt:g.date()}),Uu={method:"post",path:"/international-scientific-congress",tags:["International Scientific Congresses"],summary:"Create a new international scientific congress",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:mc}}}},responses:{201:{description:"International scientific congress created successfully",summary:"International Scientific Congress Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:g.object({message:g.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}},Ou={method:"get",path:"/international-scientific-congress",tags:["International Scientific Congresses"],summary:"List all international scientific congresses with pagination and filters",request:{query:gc},responses:{200:{description:"List of international scientific congresses retrieved successfully with pagination",summary:"International Scientific Congresses Retrieved",content:{"application/json":{schema:g.object({page:g.number(),totalPages:g.number(),offset:g.number(),limit:g.number(),congresses:g.array(hc)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}},ku={method:"get",path:"/international-scientific-congress/{id}",tags:["International Scientific Congresses"],summary:"Find international scientific congress by ID",request:{params:Di},responses:{200:{description:"International scientific congress details retrieved successfully",summary:"International Scientific Congress Retrieved",content:{"application/json":{schema:hc}}},400:{description:"Invalid international scientific congress ID format",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},404:{description:"International scientific congress not found with the provided ID",summary:"International Scientific Congress Not Found",content:{"application/json":{schema:g.object({message:g.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}},Gu={method:"get",path:"/international-scientific-congress/edition/{edition}",tags:["International Scientific Congresses"],summary:"Find international scientific congresses by edition",request:{params:lc},responses:{200:{description:"International scientific congresses retrieved successfully by edition",summary:"International Scientific Congresses Retrieved by Edition",content:{"application/json":{schema:g.array(hc)}}},400:{description:"Invalid edition parameter provided",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}},Nu={method:"put",path:"/international-scientific-congress/{id}",tags:["International Scientific Congresses"],summary:"Update international scientific congress",security:[{bearerAuth:[]}],request:{params:Di,body:{content:{"application/json":{schema:fc.omit({id:!0})}}}},responses:{200:{description:"International scientific congress updated successfully",summary:"International Scientific Congress Updated"},400:{description:"Invalid input data or international scientific congress ID format",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:g.object({message:g.string()})}}},404:{description:"International scientific congress not found with the provided ID",summary:"International Scientific Congress Not Found",content:{"application/json":{schema:g.object({message:g.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}},Lu={method:"delete",path:"/international-scientific-congress/{id}",tags:["International Scientific Congresses"],summary:"Delete international scientific congress",security:[{bearerAuth:[]}],request:{params:pc},responses:{200:{description:"International scientific congress deleted successfully",summary:"International Scientific Congress Deleted"},400:{description:"Invalid international scientific congress ID format",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:g.object({message:g.string()})}}},404:{description:"International scientific congress not found with the provided ID",summary:"International Scientific Congress Not Found",content:{"application/json":{schema:g.object({message:g.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}},JB={method:"post",path:"/international-scientific-congress/{congressId}/gallery",tags:["International Scientific Congress Gallery"],summary:"Create a new gallery image for a congress",security:[{bearerAuth:[]}],request:{params:g.object({congressId:g.uuid()}),body:{content:{"multipart/form-data":{schema:Mw}}}},responses:{201:{description:"Gallery image created successfully",summary:"Gallery Image Created"},400:{description:"Invalid input data, missing required fields, or invalid image format/size",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:g.object({message:g.string()})}}},404:{description:"Congress not found with the provided ID",summary:"Congress Not Found",content:{"application/json":{schema:g.object({message:g.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}},YB={method:"get",path:"/international-scientific-congress/{congressId}/gallery",tags:["International Scientific Congress Gallery"],summary:"List all gallery images for a congress with pagination",request:{params:g.object({congressId:g.uuid()}),query:g.object({page:g.coerce.number().min(1).default(1),limit:g.coerce.number().min(1).default(xw),caption:g.string().optional()})},responses:{200:{description:"Gallery images retrieved successfully with pagination",summary:"Gallery Images Retrieved",content:{"application/json":{schema:g.object({page:g.number(),totalPages:g.number(),offset:g.number(),limit:g.number(),galleries:g.array(yc)})}}},400:{description:"Invalid congress ID format or query parameters",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}},XB={method:"get",path:"/international-scientific-congress/gallery/{id}",tags:["International Scientific Congress Gallery"],summary:"Find a gallery image by ID",request:{params:g.object({id:g.uuid()})},responses:{200:{description:"Gallery image retrieved successfully",summary:"Gallery Image Retrieved",content:{"application/json":{schema:yc}}},400:{description:"Invalid gallery image ID format",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},404:{description:"Gallery image not found with the provided ID",summary:"Gallery Image Not Found",content:{"application/json":{schema:g.object({message:g.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}},$B={method:"put",path:"/international-scientific-congress/gallery/{id}",tags:["International Scientific Congress Gallery"],summary:"Update a gallery image with optional image upload",security:[{bearerAuth:[]}],request:{params:g.object({id:g.uuid()}),body:{content:{"multipart/form-data":{schema:Tw}}}},responses:{200:{description:"Gallery image updated successfully",summary:"Gallery Image Updated"},400:{description:"Invalid input data, gallery ID format, or invalid image format/size",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:g.object({message:g.string()})}}},404:{description:"Gallery image not found with the provided ID",summary:"Gallery Image Not Found",content:{"application/json":{schema:g.object({message:g.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}},QB={method:"delete",path:"/international-scientific-congress/gallery/{id}",tags:["International Scientific Congress Gallery"],summary:"Delete a gallery image",security:[{bearerAuth:[]}],request:{params:g.object({id:g.uuid()})},responses:{200:{description:"Gallery image deleted successfully",summary:"Gallery Image Deleted"},400:{description:"Invalid gallery ID format",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:g.object({message:g.string()})}}},404:{description:"Gallery image not found with the provided ID",summary:"Gallery Image Not Found",content:{"application/json":{schema:g.object({message:g.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}};import Y from"zod";import{extendZodWithOpenApi as Pw}from"@asteasolutions/zod-to-openapi";import no from"zod";Pw(no);var Rc=no.object({title:no.string().min(1),link:no.url(),country:no.string().min(1)}),qi=class{constructor(e){this.lawRepository=e}async handle(e,r){try{let{title:t,link:i,country:n}=Rc.parse(e.body);return await this.lawRepository.create({title:t,link:i,country:n}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Dw}from"@asteasolutions/zod-to-openapi";import Ic from"zod";Dw(Ic);var bc=Ic.object({id:Ic.uuid()}),Ui=class{constructor(e){this.lawRepository=e}async handle(e,r){try{let{id:t}=bc.parse({id:e.params.id});if(!await this.lawRepository.findById(t))throw new p("A lei n\xE3o existe.");return await this.lawRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Fw}from"@asteasolutions/zod-to-openapi";import Cc from"zod";Fw(Cc);var ki=Cc.object({id:Cc.uuid()}),Oi=class{constructor(e){this.lawRepository=e}async handle(e,r){try{let{id:t}=ki.parse({id:e.params.id}),i=await this.lawRepository.findById(t);if(!i)throw new p("A lei n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Bw}from"@asteasolutions/zod-to-openapi";import Rr from"zod";Bw(Rr);var wc=Rr.object({id:Rr.uuid(),title:Rr.string().min(1).optional(),link:Rr.url().optional(),country:Rr.string().min(1).optional()}),Gi=class{constructor(e){this.lawRepository=e}async handle(e,r){try{let{id:t,title:i,link:n,country:s}=wc.parse({id:e.params.id,...e.body});if(!await this.lawRepository.findById(t))throw new p("A lei n\xE3o existe.");return await this.lawRepository.update({id:t,title:i,link:n,country:s}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Wu=Y.object({id:Y.uuid(),title:Y.string(),link:Y.string(),country:Y.string(),createdAt:Y.date(),updatedAt:Y.date()}),_u={method:"post",path:"/law",tags:["Laws"],summary:"Create a new Law",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:Rc}}}},responses:{201:{description:"Law created successfully",summary:"Law Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:Y.object({errors:Y.record(Y.string(),Y.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:Y.object({message:Y.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Y.object({message:Y.string()})}}}}},Hu={method:"get",path:"/law",tags:["Laws"],summary:"List all Laws with filters",request:{query:Y.object({page:Y.coerce.number().optional(),limit:Y.coerce.number().optional(),title:Y.string().optional(),country:Y.string().optional(),orderBy:Y.enum(["asc","desc"]).optional()})},responses:{200:{description:"List of Laws retrieved successfully",summary:"Laws Retrieved",content:{"application/json":{schema:Y.object({page:Y.number(),totalPages:Y.number(),offset:Y.number(),limit:Y.number(),laws:Y.array(Wu)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Y.object({message:Y.string()})}}}}},zu={method:"get",path:"/law/{id}",tags:["Laws"],summary:"Find Law by ID",request:{params:ki},responses:{200:{description:"Law details retrieved successfully",summary:"Law Retrieved",content:{"application/json":{schema:Wu}}},400:{description:"Invalid Law ID format",summary:"Validation Error",content:{"application/json":{schema:Y.object({errors:Y.record(Y.string(),Y.string())})}}},404:{description:"Law not found with the provided ID",summary:"Law Not Found",content:{"application/json":{schema:Y.object({message:Y.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Y.object({message:Y.string()})}}}}},Vu={method:"put",path:"/law/{id}",tags:["Laws"],summary:"Update Law",security:[{bearerAuth:[]}],request:{params:ki,body:{content:{"application/json":{schema:wc.omit({id:!0})}}}},responses:{200:{description:"Law updated successfully",summary:"Law Updated"},400:{description:"Invalid input data or Law ID format",summary:"Validation Error",content:{"application/json":{schema:Y.object({errors:Y.record(Y.string(),Y.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:Y.object({message:Y.string()})}}},404:{description:"Law not found with the provided ID",summary:"Law Not Found",content:{"application/json":{schema:Y.object({message:Y.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Y.object({message:Y.string()})}}}}},Zu={method:"delete",path:"/law/{id}",tags:["Laws"],summary:"Delete Law",security:[{bearerAuth:[]}],request:{params:bc},responses:{200:{description:"Law deleted successfully",summary:"Law Deleted"},400:{description:"Invalid Law ID format",summary:"Validation Error",content:{"application/json":{schema:Y.object({errors:Y.record(Y.string(),Y.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:Y.object({message:Y.string()})}}},404:{description:"Law not found with the provided ID",summary:"Law Not Found",content:{"application/json":{schema:Y.object({message:Y.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Y.object({message:Y.string()})}}}}};import{$Enums as Gw}from"@prisma/client";import W from"zod";import{extendZodWithOpenApi as qw}from"@asteasolutions/zod-to-openapi";import Ir from"zod";qw(Ir);var Sc=Ir.object({role:Ir.string().min(1),description:Ir.string().optional(),userId:Ir.uuid(),order:Ir.number().optional()}),Ni=class{constructor(e){this.legitimatorCommitteeMemberRepository=e}async handle(e,r){try{let{role:t,description:i,userId:n,order:s}=Sc.parse(e.body);return await this.legitimatorCommitteeMemberRepository.create({role:t,description:i,userId:n,order:s??0}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Uw}from"@asteasolutions/zod-to-openapi";import vc from"zod";Uw(vc);var Ec=vc.object({id:vc.uuid()}),Li=class{constructor(e){this.legitimatorCommitteeMemberRepository=e}async handle(e,r){try{let{id:t}=Ec.parse({id:e.params.id});if(!await this.legitimatorCommitteeMemberRepository.findById(t))throw new p("O membro do comit\xEA legitimador n\xE3o existe.");return await this.legitimatorCommitteeMemberRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Ow}from"@asteasolutions/zod-to-openapi";import jc from"zod";Ow(jc);var _i=jc.object({id:jc.uuid()}),Wi=class{constructor(e){this.legitimatorCommitteeMemberRepository=e}async handle(e,r){try{let{id:t}=_i.parse({id:e.params.id}),i=await this.legitimatorCommitteeMemberRepository.findById(t);if(!i)throw new p("O membro do comit\xEA legitimador n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as kw}from"@asteasolutions/zod-to-openapi";import Ot from"zod";kw(Ot);var xc=Ot.object({id:Ot.uuid(),role:Ot.string().min(1).optional(),description:Ot.string().optional(),userId:Ot.uuid().optional(),order:Ot.number().optional()}),Hi=class{constructor(e){this.legitimatorCommitteeMemberRepository=e}async handle(e,r){try{let{id:t,role:i,description:n,userId:s,order:m}=xc.parse({id:e.params.id,...e.body});if(!await this.legitimatorCommitteeMemberRepository.findById(t))throw new p("O membro do comit\xEA legitimador n\xE3o existe.");return await this.legitimatorCommitteeMemberRepository.update({id:t,role:i,description:n,userId:s,order:m}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Nw=W.object({id:W.uuid(),name:W.string(),emailAddress:W.string(),avatarUrl:W.string().nullable(),orcid:W.string().nullable(),phone:W.string().nullable(),lattesUrl:W.string().nullable(),role:W.enum(Gw.UserRole)}),Ku=W.object({id:W.uuid(),role:W.string(),description:W.string().nullable(),order:W.number(),createdAt:W.date(),updatedAt:W.date(),userId:W.uuid(),user:Nw}),Ju={method:"post",path:"/legitimator-committee-member",tags:["Legitimator Committee Members"],summary:"Create a new Legitimator Committee Member",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:Sc}}}},responses:{201:{description:"Legitimator Committee Member created successfully",summary:"Legitimator Committee Member Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:W.object({errors:W.record(W.string(),W.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:W.object({message:W.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:W.object({message:W.string()})}}}}},Yu={method:"get",path:"/legitimator-committee-member",tags:["Legitimator Committee Members"],summary:"List all Legitimator Committee Members with filters",request:{query:W.object({role:W.string().optional(),orderBy:W.enum(["asc","desc"]).optional()})},responses:{200:{description:"List of Legitimator Committee Members retrieved successfully",summary:"Legitimator Committee Members Retrieved",content:{"application/json":{schema:W.object({members:W.array(Ku)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:W.object({message:W.string()})}}}}},Xu={method:"get",path:"/legitimator-committee-member/{id}",tags:["Legitimator Committee Members"],summary:"Find Legitimator Committee Member by ID",request:{params:_i},responses:{200:{description:"Legitimator Committee Member details retrieved successfully",summary:"Legitimator Committee Member Retrieved",content:{"application/json":{schema:Ku}}},400:{description:"Invalid Legitimator Committee Member ID format",summary:"Validation Error",content:{"application/json":{schema:W.object({errors:W.record(W.string(),W.string())})}}},404:{description:"Legitimator Committee Member not found with the provided ID",summary:"Legitimator Committee Member Not Found",content:{"application/json":{schema:W.object({message:W.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:W.object({message:W.string()})}}}}},$u={method:"put",path:"/legitimator-committee-member/{id}",tags:["Legitimator Committee Members"],summary:"Update Legitimator Committee Member",security:[{bearerAuth:[]}],request:{params:_i,body:{content:{"application/json":{schema:xc.omit({id:!0})}}}},responses:{200:{description:"Legitimator Committee Member updated successfully",summary:"Legitimator Committee Member Updated"},400:{description:"Invalid input data or Legitimator Committee Member ID format",summary:"Validation Error",content:{"application/json":{schema:W.object({errors:W.record(W.string(),W.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:W.object({message:W.string()})}}},404:{description:"Legitimator Committee Member not found with the provided ID",summary:"Legitimator Committee Member Not Found",content:{"application/json":{schema:W.object({message:W.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:W.object({message:W.string()})}}}}},Qu={method:"delete",path:"/legitimator-committee-member/{id}",tags:["Legitimator Committee Members"],summary:"Delete Legitimator Committee Member",security:[{bearerAuth:[]}],request:{params:Ec},responses:{200:{description:"Legitimator Committee Member deleted successfully",summary:"Legitimator Committee Member Deleted"},400:{description:"Invalid Legitimator Committee Member ID format",summary:"Validation Error",content:{"application/json":{schema:W.object({errors:W.record(W.string(),W.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:W.object({message:W.string()})}}},404:{description:"Legitimator Committee Member not found with the provided ID",summary:"Legitimator Committee Member Not Found",content:{"application/json":{schema:W.object({message:W.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:W.object({message:W.string()})}}}}};import{$Enums as zw}from"@prisma/client";import F from"zod";import{extendZodWithOpenApi as Lw}from"@asteasolutions/zod-to-openapi";import Xe from"zod";Lw(Xe);var Mc=Xe.object({name:Xe.string().min(1),description:Xe.string().optional(),members:Xe.array(Xe.object({userId:Xe.uuid(),role:Xe.string().min(1),order:Xe.number().optional()}))}),zi=class{constructor(e){this.managementTeamRepository=e}async handle(e,r){try{let{name:t,description:i,members:n}=Mc.parse(e.body);if(await this.managementTeamRepository.findByName(t))throw new pe("J\xE1 existe um time de gest\xE3o cadastrado com este nome.");return await this.managementTeamRepository.create({name:t,description:i,members:n.map(m=>({userId:m.userId,role:m.role,order:m.order??0}))}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Ww}from"@asteasolutions/zod-to-openapi";import Tc from"zod";Ww(Tc);var Ac=Tc.object({id:Tc.uuid()}),Vi=class{constructor(e){this.managementTeamRepository=e}async handle(e,r){try{let{id:t}=Ac.parse({id:e.params.id});if(!await this.managementTeamRepository.findById(t))throw new p("O time de gest\xE3o n\xE3o existe.");return await this.managementTeamRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as _w}from"@asteasolutions/zod-to-openapi";import Pc from"zod";_w(Pc);var Ki=Pc.object({id:Pc.uuid()}),Zi=class{constructor(e){this.managementTeamRepository=e}async handle(e,r){try{let{id:t}=Ki.parse({id:e.params.id}),i=await this.managementTeamRepository.findById(t);if(!i)throw new p("O time de gest\xE3o n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Hw}from"@asteasolutions/zod-to-openapi";import We from"zod";Hw(We);var Dc=We.object({id:We.uuid(),name:We.string().min(1).optional(),description:We.string().optional(),members:We.array(We.object({userId:We.uuid(),role:We.string().min(1),order:We.number().optional()})).optional()}),Ji=class{constructor(e){this.managementTeamRepository=e}async handle(e,r){try{let{id:t,name:i,description:n,members:s}=Dc.parse({id:e.params.id,...e.body}),m=await this.managementTeamRepository.findById(t);if(!m)throw new p("O time de gest\xE3o n\xE3o existe.");if(i&&i!==m.name){let c=await this.managementTeamRepository.findByName(i);if(c&&c.id!==t)throw new pe("J\xE1 existe um time de gest\xE3o com este nome.")}return await this.managementTeamRepository.update({id:t,name:i,description:n,members:s?s.map(c=>({userId:c.userId,role:c.role,order:c.order??0})):void 0}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Vw=F.object({id:F.uuid(),name:F.string(),emailAddress:F.string(),avatarUrl:F.string().nullable(),orcid:F.string().nullable(),phone:F.string().nullable(),lattesUrl:F.string().nullable(),role:F.enum(zw.UserRole)}),Zw=F.object({id:F.uuid(),role:F.string(),description:F.string().nullable(),order:F.number(),teamId:F.uuid(),userId:F.uuid(),createdAt:F.date(),updatedAt:F.date(),user:Vw}),eg=F.object({id:F.uuid(),name:F.string(),description:F.string().nullable(),createdAt:F.date(),updatedAt:F.date(),members:F.array(Zw)}),tg={method:"post",path:"/management-team",tags:["Management Teams"],summary:"Create a new Management Team with multiple members",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:Mc}}}},responses:{201:{description:"Management Team created successfully",summary:"Management Team Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:F.object({errors:F.record(F.string(),F.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:F.object({message:F.string()})}}},409:{description:"Management Team with this name already exists",summary:"Conflict",content:{"application/json":{schema:F.object({message:F.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:F.object({message:F.string()})}}}}},rg={method:"get",path:"/management-team",tags:["Management Teams"],summary:"List all Management Teams with filters",request:{query:F.object({name:F.string().optional(),description:F.string().optional(),orderBy:F.enum(["asc","desc"]).optional()})},responses:{200:{description:"List of Management Teams retrieved successfully",summary:"Management Teams Retrieved",content:{"application/json":{schema:F.object({teams:F.array(eg)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:F.object({message:F.string()})}}}}},og={method:"get",path:"/management-team/{id}",tags:["Management Teams"],summary:"Find Management Team by ID",request:{params:Ki},responses:{200:{description:"Management Team details retrieved successfully",summary:"Management Team Retrieved",content:{"application/json":{schema:eg}}},400:{description:"Invalid Management Team ID format",summary:"Validation Error",content:{"application/json":{schema:F.object({errors:F.record(F.string(),F.string())})}}},404:{description:"Management Team not found with the provided ID",summary:"Management Team Not Found",content:{"application/json":{schema:F.object({message:F.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:F.object({message:F.string()})}}}}},ig={method:"put",path:"/management-team/{id}",tags:["Management Teams"],summary:"Update Management Team and manage member relationships",security:[{bearerAuth:[]}],request:{params:Ki,body:{content:{"application/json":{schema:Dc.omit({id:!0})}}}},responses:{200:{description:"Management Team updated successfully",summary:"Management Team Updated"},400:{description:"Invalid input data or Management Team ID format",summary:"Validation Error",content:{"application/json":{schema:F.object({errors:F.record(F.string(),F.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:F.object({message:F.string()})}}},404:{description:"Management Team not found with the provided ID",summary:"Management Team Not Found",content:{"application/json":{schema:F.object({message:F.string()})}}},409:{description:"Management Team with this name already exists",summary:"Conflict",content:{"application/json":{schema:F.object({message:F.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:F.object({message:F.string()})}}}}},ng={method:"delete",path:"/management-team/{id}",tags:["Management Teams"],summary:"Delete Management Team",security:[{bearerAuth:[]}],request:{params:Ac},responses:{200:{description:"Management Team deleted successfully",summary:"Management Team Deleted"},400:{description:"Invalid Management Team ID format",summary:"Validation Error",content:{"application/json":{schema:F.object({errors:F.record(F.string(),F.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:F.object({message:F.string()})}}},404:{description:"Management Team not found with the provided ID",summary:"Management Team Not Found",content:{"application/json":{schema:F.object({message:F.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:F.object({message:F.string()})}}}}};import{MeetingFormat as tS,MeetingStatus as rS}from"@prisma/client";import z from"zod";import{extendZodWithOpenApi as Kw}from"@asteasolutions/zod-to-openapi";import br from"zod";var ag=10,sg=1024,Jw=sg*sg,Yw=ag*Jw;Kw(br);var Fc=br.object({title:br.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio"),publishedAt:br.coerce.date(),meetingId:br.uuid(),document:br.any().refine(o=>o==null||typeof o!="object"||typeof o.size!="number"?!1:o.size<=Yw,`O documento deve ter no m\xE1ximo ${ag}MB.`)}),Yi=class{constructor(e,r,t){this.meetingMinuteRepository=e;this.meetingRepository=r;this.firebaseStorageService=t}async handle(e,r){try{let{title:t,publishedAt:i,meetingId:n,document:s}=Fc.parse({...e.body,...e.params,document:e.file});if(!await this.meetingRepository.findById(n))throw new p("A reuni\xE3o n\xE3o existe.");if(await this.meetingMinuteRepository.findByMeetingId(n))throw new a("Esta reuni\xE3o j\xE1 possui uma ata.");let d=await this.meetingMinuteRepository.create({title:t,publishedAt:i,meetingId:n,documentUrl:""}),y=await this.firebaseStorageService.uploadFile({file:s,id:d.id,folder:j.MEETING_MINUTE});return await this.meetingMinuteRepository.update({id:d.id,documentUrl:y}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Xw}from"@asteasolutions/zod-to-openapi";import Bc from"zod";Xw(Bc);var so=Bc.object({meetingId:Bc.uuid()}),Xi=class{constructor(e){this.meetingMinuteRepository=e}async handle(e,r){try{let{meetingId:t}=so.parse({meetingId:e.params.meetingId}),i=await this.meetingMinuteRepository.findByMeetingId(t);return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as $w}from"@asteasolutions/zod-to-openapi";import Cr from"zod";var cg=10,mg=1024,Qw=mg*mg,eS=cg*Qw;$w(Cr);var qc=Cr.object({meetingId:Cr.uuid(),title:Cr.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio").optional(),publishedAt:Cr.coerce.date().optional(),document:Cr.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=eS,`O documento deve ter no m\xE1ximo ${cg}MB.`).optional()}),$i=class{constructor(e,r){this.meetingMinuteRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{meetingId:t,title:i,publishedAt:n,document:s}=qc.parse({meetingId:e.params.meetingId,...e.body,document:e.file}),m=await this.meetingMinuteRepository.findByMeetingId(t);if(!m)throw new p("A ata n\xE3o existe para esta reuni\xE3o.");let c=m.documentUrl;return s&&(m.documentUrl&&await this.firebaseStorageService.deleteFile({fileUrl:m.documentUrl}),c=await this.firebaseStorageService.uploadFile({file:s,id:m.id,folder:j.MEETING_MINUTE})),await this.meetingMinuteRepository.update({id:m.id,title:i,publishedAt:n,documentUrl:c??void 0}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var oS=z.object({id:z.uuid(),title:z.string(),scheduledAt:z.date(),format:z.enum(tS),agenda:z.string(),meetingLink:z.string().nullable(),location:z.string().nullable(),status:z.enum(rS),createdAt:z.date(),updatedAt:z.date()}),iS=z.object({id:z.uuid(),title:z.string(),publishedAt:z.date(),documentUrl:z.string(),meetingId:z.uuid(),meeting:oS,createdAt:z.date(),updatedAt:z.date()}),pg={method:"post",path:"/meeting/{meetingId}/minute",tags:["Meetings"],summary:"Create a new meeting minute with document upload",security:[{bearerAuth:[]}],request:{params:z.object({meetingId:z.uuid()}),body:{content:{"multipart/form-data":{schema:Fc.omit({meetingId:!0})}}}},responses:{201:{description:"Meeting minute created successfully",summary:"Meeting Minute Created"},400:{description:"Invalid input data, missing required fields, or invalid document format/size",summary:"Validation Error",content:{"application/json":{schema:z.object({errors:z.record(z.string(),z.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:z.object({message:z.string()})}}},404:{description:"Meeting not found with the provided ID",summary:"Meeting Not Found",content:{"application/json":{schema:z.object({message:z.string()})}}},409:{description:"Meeting already has a minute",summary:"Conflict",content:{"application/json":{schema:z.object({message:z.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:z.object({message:z.string()})}}}}},dg={method:"get",path:"/meeting/{meetingId}/minute",tags:["Meetings"],summary:"Find meeting minute by meeting ID",request:{params:so},responses:{200:{description:"Meeting minute retrieved successfully by meeting ID",summary:"Meeting Minute Retrieved by Meeting ID",content:{"application/json":{schema:iS.nullable()}}},400:{description:"Invalid meeting ID parameter provided",summary:"Validation Error",content:{"application/json":{schema:z.object({errors:z.record(z.string(),z.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:z.object({message:z.string()})}}}}},lg={method:"put",path:"/meeting/{meetingId}/minute",tags:["Meetings"],summary:"Update meeting minute with optional document upload",security:[{bearerAuth:[]}],request:{params:so,body:{content:{"multipart/form-data":{schema:qc.omit({meetingId:!0})}}}},responses:{200:{description:"Meeting minute updated successfully",summary:"Meeting Minute Updated"},400:{description:"Invalid input data, meeting minute ID format, or invalid document format/size",summary:"Validation Error",content:{"application/json":{schema:z.object({errors:z.record(z.string(),z.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:z.object({message:z.string()})}}},404:{description:"Meeting minute not found with the provided ID",summary:"Meeting Minute Not Found",content:{"application/json":{schema:z.object({message:z.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:z.object({message:z.string()})}}}}},ug={method:"delete",path:"/meeting/{meetingId}/minute",tags:["Meetings"],summary:"Delete meeting minute",security:[{bearerAuth:[]}],request:{params:so},responses:{200:{description:"Meeting minute deleted successfully",summary:"Meeting Minute Deleted"},400:{description:"Invalid meeting minute ID format",summary:"Validation Error",content:{"application/json":{schema:z.object({errors:z.record(z.string(),z.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:z.object({message:z.string()})}}},404:{description:"Meeting minute not found with the provided ID",summary:"Meeting Minute Not Found",content:{"application/json":{schema:z.object({message:z.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:z.object({message:z.string()})}}}}};import{MeetingFormat as RS,MeetingStatus as IS}from"@prisma/client";import P from"zod";import{extendZodWithOpenApi as nS}from"@asteasolutions/zod-to-openapi";import{MeetingFormat as Qi,MeetingStatus as Uc}from"@prisma/client";import _e from"zod";nS(_e);var Oc=_e.object({title:_e.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio"),scheduledAt:_e.coerce.date(),format:_e.enum(Qi).default(Qi.ONLINE),agenda:_e.string().min(1,"Pauta \xE9 obrigat\xF3ria"),meetingLink:_e.string().url("Link da reuni\xE3o deve ser uma URL v\xE1lida").optional().or(_e.literal("")),location:_e.string().optional(),status:_e.enum(Uc).default(Uc.PENDING)}).refine(o=>o.format===Qi.ONLINE?!!o.meetingLink:o.format===Qi.IN_PERSON?!!o.location:!0,{message:"Reuni\xF5es online devem ter link e reuni\xF5es presenciais devem ter localiza\xE7\xE3o",path:["format"]}),en=class{constructor(e){this.meetingRepository=e}async handle(e,r){try{let{title:t,scheduledAt:i,format:n,agenda:s,meetingLink:m,location:c,status:d}=Oc.parse(e.body);return await this.meetingRepository.create({title:t,scheduledAt:i,format:n,agenda:s,meetingLink:m||void 0,location:c||void 0,status:d??Uc.PENDING}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as sS}from"@asteasolutions/zod-to-openapi";import kc from"zod";sS(kc);var Gc=kc.object({id:kc.uuid()}),tn=class{constructor(e){this.meetingRepository=e}async handle(e,r){try{let{id:t}=Gc.parse({id:e.params.id});if(!await this.meetingRepository.findById(t))throw new p("A reuni\xE3o n\xE3o existe.");return await this.meetingRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as aS}from"@asteasolutions/zod-to-openapi";import Nc from"zod";aS(Nc);var on=Nc.object({id:Nc.uuid()}),rn=class{constructor(e){this.meetingRepository=e}async handle(e,r){try{let{id:t}=on.parse({id:e.params.id}),i=await this.meetingRepository.findById(t);if(!i)throw new p("A reuni\xE3o n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as mS}from"@asteasolutions/zod-to-openapi";import{MeetingStatus as cS}from"@prisma/client";import Lc from"zod";mS(Lc);var Wc=Lc.object({status:Lc.enum(cS)}),nn=class{constructor(e){this.meetingRepository=e}async handle(e,r){try{let{status:t}=Wc.parse({status:e.params.status}),i=await this.meetingRepository.findByStatus(t);return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as pS}from"@asteasolutions/zod-to-openapi";import{MeetingFormat as dS,MeetingStatus as lS}from"@prisma/client";import bt from"zod";var uS=1,gS=10;pS(bt);var _c=bt.object({page:bt.coerce.number().min(1).default(uS),limit:bt.coerce.number().min(1).default(gS),title:bt.string().optional(),format:bt.enum(dS).optional(),status:bt.enum(lS).optional(),orderBy:bt.enum(["asc","desc"]).optional()}),sn=class{constructor(e){this.meetingRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=_c.parse(e.query),s=i*t-i,[m,c]=await Promise.all([this.meetingRepository.find({pagination:{offset:s,limit:i},filter:n}),this.meetingRepository.count({filter:n})]),d=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:d,offset:s,limit:i,meetings:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as fS}from"@asteasolutions/zod-to-openapi";import{MeetingFormat as yS,MeetingStatus as hS}from"@prisma/client";import Ue from"zod";fS(Ue);var Hc=Ue.object({id:Ue.uuid(),title:Ue.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio").optional(),scheduledAt:Ue.coerce.date().optional(),format:Ue.enum(yS).optional(),agenda:Ue.string().min(1,"Pauta \xE9 obrigat\xF3ria").optional(),meetingLink:Ue.string().url("Link da reuni\xE3o deve ser uma URL v\xE1lida").optional().or(Ue.literal("")),location:Ue.string().optional(),status:Ue.enum(hS).optional()}),an=class{constructor(e){this.meetingRepository=e}async handle(e,r){try{let{id:t,title:i,scheduledAt:n,format:s,agenda:m,meetingLink:c,location:d,status:y}=Hc.parse({id:e.params.id,...e.body});if(!await this.meetingRepository.findById(t))throw new p("A reuni\xE3o n\xE3o existe.");return await this.meetingRepository.update({id:t,title:i,scheduledAt:n,format:s,agenda:m,meetingLink:c||void 0,location:d||void 0,status:y}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var bS=P.object({id:P.uuid(),title:P.string(),publishedAt:P.date(),documentUrl:P.string(),meetingId:P.uuid(),createdAt:P.date(),updatedAt:P.date()}),zc=P.object({id:P.uuid(),title:P.string(),scheduledAt:P.date(),format:P.enum(RS),agenda:P.string(),meetingLink:P.string().nullable(),location:P.string().nullable(),status:P.enum(IS),minutes:bS.nullable(),createdAt:P.date(),updatedAt:P.date()}),gg={method:"post",path:"/meeting",tags:["Meetings"],summary:"Create a new meeting",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:Oc}}}},responses:{201:{description:"Meeting created successfully",summary:"Meeting Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:P.object({errors:P.record(P.string(),P.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:P.object({message:P.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:P.object({message:P.string()})}}}}},fg={method:"get",path:"/meeting",tags:["Meetings"],summary:"List all meetings with pagination and filters",request:{query:_c},responses:{200:{description:"List of meetings retrieved successfully with pagination",summary:"Meetings Retrieved",content:{"application/json":{schema:P.object({page:P.number(),totalPages:P.number(),offset:P.number(),limit:P.number(),meetings:P.array(zc)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:P.object({errors:P.record(P.string(),P.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:P.object({message:P.string()})}}}}},yg={method:"get",path:"/meeting/{id}",tags:["Meetings"],summary:"Find meeting by ID",request:{params:on},responses:{200:{description:"Meeting details retrieved successfully",summary:"Meeting Retrieved",content:{"application/json":{schema:zc}}},400:{description:"Invalid meeting ID format",summary:"Validation Error",content:{"application/json":{schema:P.object({errors:P.record(P.string(),P.string())})}}},404:{description:"Meeting not found with the provided ID",summary:"Meeting Not Found",content:{"application/json":{schema:P.object({message:P.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:P.object({message:P.string()})}}}}},hg={method:"get",path:"/meeting/status/{status}",tags:["Meetings"],summary:"Find meetings by status",request:{params:Wc},responses:{200:{description:"Meetings retrieved successfully by status",summary:"Meetings Retrieved by Status",content:{"application/json":{schema:P.array(zc)}}},400:{description:"Invalid status parameter provided",summary:"Validation Error",content:{"application/json":{schema:P.object({errors:P.record(P.string(),P.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:P.object({message:P.string()})}}}}},Rg={method:"put",path:"/meeting/{id}",tags:["Meetings"],summary:"Update meeting",security:[{bearerAuth:[]}],request:{params:on,body:{content:{"application/json":{schema:Hc.omit({id:!0})}}}},responses:{200:{description:"Meeting updated successfully",summary:"Meeting Updated"},400:{description:"Invalid input data or meeting ID format",summary:"Validation Error",content:{"application/json":{schema:P.object({errors:P.record(P.string(),P.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:P.object({message:P.string()})}}},404:{description:"Meeting not found with the provided ID",summary:"Meeting Not Found",content:{"application/json":{schema:P.object({message:P.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:P.object({message:P.string()})}}}}},Ig={method:"delete",path:"/meeting/{id}",tags:["Meetings"],summary:"Delete meeting",security:[{bearerAuth:[]}],request:{params:Gc},responses:{200:{description:"Meeting deleted successfully",summary:"Meeting Deleted"},400:{description:"Invalid meeting ID format",summary:"Validation Error",content:{"application/json":{schema:P.object({errors:P.record(P.string(),P.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:P.object({message:P.string()})}}},404:{description:"Meeting not found with the provided ID",summary:"Meeting Not Found",content:{"application/json":{schema:P.object({message:P.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:P.object({message:P.string()})}}}}};import U from"zod";import{extendZodWithOpenApi as CS}from"@asteasolutions/zod-to-openapi";import we from"zod";var Cg=2,bg=1024,wS=bg*bg,SS=Cg*wS;CS(we);var Vc=we.object({name:we.string().min(1,"Nome \xE9 obrigat\xF3rio"),logo:we.any().refine(o=>o==null||typeof o!="object"||typeof o.size!="number"?!1:o.size<=SS,`A imagem deve ter no m\xE1ximo ${Cg}MB.`),city:we.string().optional(),state:we.string().optional(),country:we.string().optional(),description:we.string().optional(),website:we.url("URL do site deve ser v\xE1lida").optional(),email:we.email("Email deve ser v\xE1lido").optional(),phone:we.string().optional(),address:we.string().optional(),functioning:we.string().optional()}),mn=class{constructor(e,r){this.museumRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{name:t,logo:i,city:n,state:s,country:m,description:c,website:d,email:y,phone:S,address:A,functioning:$}=Vc.parse({...e.body,logo:e.file}),oe=await this.museumRepository.create({name:t,city:n,state:s,country:m,description:c,website:d,email:y,phone:S,address:A,functioning:$}),ae=await this.firebaseStorageService.uploadFile({file:i,id:oe.id,folder:j.MUSEUM});return await this.museumRepository.update({id:oe.id,logoUrl:ae}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as vS}from"@asteasolutions/zod-to-openapi";import Zc from"zod";vS(Zc);var Kc=Zc.object({id:Zc.uuid()}),cn=class{constructor(e,r){this.museumRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=Kc.parse({id:e.params.id}),i=await this.museumRepository.findById(t);if(!i)throw new p("O museu n\xE3o existe.");return i.logoUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.logoUrl}),await this.museumRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as ES}from"@asteasolutions/zod-to-openapi";import Jc from"zod";ES(Jc);var dn=Jc.object({id:Jc.uuid()}),pn=class{constructor(e){this.museumRepository=e}async handle(e,r){try{let{id:t}=dn.parse({id:e.params.id}),i=await this.museumRepository.findById(t);if(!i)throw new p("O museu n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as jS}from"@asteasolutions/zod-to-openapi";import $e from"zod";var xS=1,MS=9;jS($e);var Yc=$e.object({page:$e.coerce.number().min(1).default(xS),limit:$e.coerce.number().min(1).default(MS),name:$e.string().optional(),city:$e.string().optional(),state:$e.string().optional(),country:$e.string().optional(),orderBy:$e.enum(["asc","desc"]).optional()}),ln=class{constructor(e){this.museumRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=Yc.parse(e.query),s=i*t-i,[m,c]=await Promise.all([this.museumRepository.find({pagination:{offset:s,limit:i},filter:n}),this.museumRepository.count({filter:n})]),d=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:d,offset:s,limit:i,museums:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as TS}from"@asteasolutions/zod-to-openapi";import Ie from"zod";var Sg=2,wg=1024,AS=wg*wg,PS=Sg*AS;TS(Ie);var Xc=Ie.object({id:Ie.uuid(),name:Ie.string().min(1,"Nome \xE9 obrigat\xF3rio").optional(),logo:Ie.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=PS,`A imagem deve ter no m\xE1ximo ${Sg}MB.`).optional(),city:Ie.string().optional(),state:Ie.string().optional(),country:Ie.string().optional(),description:Ie.string().optional(),website:Ie.url("URL do site deve ser v\xE1lida").optional(),email:Ie.string().email("Email deve ser v\xE1lido").optional(),phone:Ie.string().optional(),address:Ie.string().optional(),functioning:Ie.string().optional()}),un=class{constructor(e,r){this.museumRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,name:i,logo:n,city:s,state:m,country:c,description:d,website:y,email:S,phone:A,address:$,functioning:oe}=Xc.parse({id:e.params.id,...e.body,logo:e.file}),ae=await this.museumRepository.findById(t);if(!ae)throw new p("O museu n\xE3o existe.");let ye=ae.logoUrl;if(n&&(ye=await this.firebaseStorageService.uploadFile({file:n,id:t,folder:"images/museums"})),!ye)throw new a("Logo URL \xE9 obrigat\xF3rio");return await this.museumRepository.update({id:t,name:i,logoUrl:ye,city:s,state:m,country:c,description:d,website:y,email:S,phone:A,address:$,functioning:oe}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var vg=U.object({id:U.uuid(),logoUrl:U.string().nullable(),name:U.string(),city:U.string().nullable(),state:U.string().nullable(),country:U.string().nullable(),description:U.string().nullable(),website:U.string().nullable(),email:U.string().nullable(),phone:U.string().nullable(),address:U.string().nullable(),functioning:U.string().nullable(),createdAt:U.date(),updatedAt:U.date()}),Eg={method:"post",path:"/museum",tags:["Museums"],summary:"Create a new museum with logo upload",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:Vc}}}},responses:{201:{description:"Museum created successfully",summary:"Museum Created"},400:{description:"Invalid input data, missing required fields, or invalid logo format/size",summary:"Validation Error",content:{"application/json":{schema:U.object({errors:U.record(U.string(),U.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:U.object({message:U.string()})}}},409:{description:"Museum with this name already exists",summary:"Conflict",content:{"application/json":{schema:U.object({message:U.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:U.object({message:U.string()})}}}}},jg={method:"get",path:"/museum",tags:["Museums"],summary:"List all museums with pagination and filters",request:{query:Yc},responses:{200:{description:"List of museums retrieved successfully with pagination",summary:"Museums Retrieved",content:{"application/json":{schema:U.object({page:U.number(),totalPages:U.number(),offset:U.number(),limit:U.number(),museums:U.array(vg)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:U.object({errors:U.record(U.string(),U.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:U.object({message:U.string()})}}}}},xg={method:"get",path:"/museum/{id}",tags:["Museums"],summary:"Find museum by ID",request:{params:dn},responses:{200:{description:"Museum details retrieved successfully",summary:"Museum Retrieved",content:{"application/json":{schema:vg}}},400:{description:"Invalid museum ID format",summary:"Validation Error",content:{"application/json":{schema:U.object({errors:U.record(U.string(),U.string())})}}},404:{description:"Museum not found with the provided ID",summary:"Museum Not Found",content:{"application/json":{schema:U.object({message:U.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:U.object({message:U.string()})}}}}},Mg={method:"put",path:"/museum/{id}",tags:["Museums"],summary:"Update museum with optional logo upload",security:[{bearerAuth:[]}],request:{params:dn,body:{content:{"multipart/form-data":{schema:Xc.omit({id:!0})}}}},responses:{200:{description:"Museum updated successfully",summary:"Museum Updated"},400:{description:"Invalid input data, museum ID format, or invalid logo format/size",summary:"Validation Error",content:{"application/json":{schema:U.object({errors:U.record(U.string(),U.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:U.object({message:U.string()})}}},404:{description:"Museum not found with the provided ID",summary:"Museum Not Found",content:{"application/json":{schema:U.object({message:U.string()})}}},409:{description:"Museum with this name already exists",summary:"Conflict",content:{"application/json":{schema:U.object({message:U.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:U.object({message:U.string()})}}}}},Tg={method:"delete",path:"/museum/{id}",tags:["Museums"],summary:"Delete museum",security:[{bearerAuth:[]}],request:{params:Kc},responses:{200:{description:"Museum deleted successfully",summary:"Museum Deleted"},400:{description:"Invalid museum ID format",summary:"Validation Error",content:{"application/json":{schema:U.object({errors:U.record(U.string(),U.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:U.object({message:U.string()})}}},404:{description:"Museum not found with the provided ID",summary:"Museum Not Found",content:{"application/json":{schema:U.object({message:U.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:U.object({message:U.string()})}}}}};import q from"zod";import{extendZodWithOpenApi as DS}from"@asteasolutions/zod-to-openapi";import ao from"zod";var FS=5,Ag=1024,BS=Ag*Ag,qS=FS*BS;DS(ao);var $c=ao.object({title:ao.string().min(1),content:ao.string().min(1),image:ao.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=qS,{message:"A imagem deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB."})}),gn=class{constructor(e,r){this.newsRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{title:t,content:i,image:n}=$c.parse({...e.body,image:e.file}),s=e.user.id,m=await this.firebaseStorageService.uploadFile({file:n,folder:j.NEWS,id:s});await this.newsRepository.create({title:t,content:i,authorId:s,imageUrl:m}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as US}from"@asteasolutions/zod-to-openapi";import Ct from"zod";var OS=1,kS=7;US(Ct);var yn=Ct.object({page:Ct.coerce.number().min(1).default(OS),limit:Ct.coerce.number().min(1).default(kS),authorId:Ct.string(),title:Ct.string().optional(),content:Ct.string().optional(),orderBy:Ct.enum(["asc","desc"]).default("desc")}),fn=class{constructor(e){this.newsRepository=e}async handle(e,r){try{let{page:t,limit:i,authorId:n,...s}=yn.parse(e.query),m=i*t-i,[c,d]=await Promise.all([this.newsRepository.findByAuthorId({authorId:n,pagination:{offset:m,limit:i},filter:s}),this.newsRepository.count({filter:{authorId:n,...s}})]),y=Math.max(Math.ceil(d/i),1);r.status(200).json({page:t,totalPages:y,offset:m,limit:i,news:c})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as GS}from"@asteasolutions/zod-to-openapi";import Qc from"zod";GS(Qc);var ep=Qc.object({id:Qc.string()}),hn=class{constructor(e){this.newsRepository=e}async handle(e,r){try{let{id:t}=ep.parse(e.params),i=await this.newsRepository.findById(t);if(!i)throw new p("Not\xEDcia n\xE3o encontrada.");r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as NS}from"@asteasolutions/zod-to-openapi";import wt from"zod";var LS=1,WS=9;NS(wt);var tp=wt.object({page:wt.coerce.number().min(1).default(LS),limit:wt.coerce.number().min(1).default(WS),title:wt.string().optional(),content:wt.string().optional(),authorId:wt.string().optional(),orderBy:wt.enum(["asc","desc"]).default("desc")}),Rn=class{constructor(e){this.newsRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=tp.parse(e.query),s=i*t-i,[m,c]=await Promise.all([this.newsRepository.find({pagination:{offset:s,limit:i},filter:n}),this.newsRepository.count({filter:n})]),d=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:d,offset:s,limit:i,news:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Pg={method:"post",path:"/news",tags:["News"],summary:"Create news",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:$c}}}},responses:{201:{description:"News article created successfully",summary:"News Created",content:{"application/json":{schema:q.object({message:q.string()})}}},400:{description:"Invalid input data or file format",summary:"Validation Error",content:{"application/json":{schema:q.object({errors:q.record(q.string(),q.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:q.object({message:q.string()})}}}}},Dg={method:"get",path:"/news",tags:["News"],summary:"List news",request:{query:tp},responses:{200:{description:"Paginated list of news articles retrieved successfully",summary:"News Retrieved",content:{"application/json":{schema:q.object({page:q.number(),totalPages:q.number(),offset:q.number(),limit:q.number(),news:q.array(q.object({title:q.string(),content:q.string(),id:q.string(),createdAt:q.date(),updatedAt:q.date(),imageUrl:q.string().nullable()}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:q.object({errors:q.record(q.string(),q.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:q.object({message:q.string()})}}}}},Fg={method:"get",path:"/news/{id}",tags:["News"],summary:"Find news by ID",request:{params:ep},responses:{200:{description:"News article details retrieved successfully",summary:"News Retrieved",content:{"application/json":{schema:q.object({page:q.number(),totalPages:q.number(),offset:q.number(),limit:q.number(),news:q.object({title:q.string(),content:q.string(),id:q.string(),createdAt:q.date(),updatedAt:q.date(),imageUrl:q.string().nullable()})})}}},400:{description:"Invalid news ID format",summary:"Validation Error",content:{"application/json":{schema:q.object({errors:q.record(q.string(),q.string())})}}},404:{description:"News article not found with the provided ID",summary:"News Not Found",content:{"application/json":{schema:q.object({message:q.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:q.object({message:q.string()})}}}}},Bg={method:"get",path:"/news/author/{author_id}",tags:["News"],summary:"List news by author",request:{params:yn.pick({authorId:!0}).transform(()=>({author_id:""})),query:yn.omit({authorId:!0})},responses:{200:{description:"Paginated list of news articles by author retrieved successfully",summary:"Author News Retrieved",content:{"application/json":{schema:q.object({page:q.number(),totalPages:q.number(),offset:q.number(),limit:q.number(),news:q.array(q.object({title:q.string(),content:q.string(),id:q.string(),createdAt:q.date(),updatedAt:q.date(),imageUrl:q.string().nullable()}))})}}},400:{description:"Invalid author ID or query parameters",summary:"Validation Error",content:{"application/json":{schema:q.object({errors:q.record(q.string(),q.string())})}}},404:{description:"Author not found with the provided ID",summary:"Author Not Found",content:{"application/json":{schema:q.object({message:q.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:q.object({message:q.string()})}}}}};import G from"zod";import{extendZodWithOpenApi as _S}from"@asteasolutions/zod-to-openapi";import He from"zod";var Ug=2,qg=1024,HS=qg*qg,zS=Ug*HS;_S(He);var rp=He.object({name:He.string().min(1,"Nome \xE9 obrigat\xF3rio"),logo:He.any().refine(o=>o==null||typeof o!="object"||typeof o.size!="number"?!1:o.size<=zS,`A imagem deve ter no m\xE1ximo ${Ug}MB.`),websiteUrl:He.url("URL do site deve ser v\xE1lida").optional(),description:He.string().optional(),category:He.string().optional(),since:He.coerce.date(),isActive:He.preprocess(o=>o==="true",He.boolean().optional())}),In=class{constructor(e,r){this.partnerRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{name:t,logo:i,websiteUrl:n,description:s,category:m,since:c,isActive:d}=rp.parse({...e.body,logo:e.file}),y=await this.partnerRepository.create({name:t,websiteUrl:n,description:s,category:m,since:c,isActive:d}),S=await this.firebaseStorageService.uploadFile({file:i,id:y.id,folder:j.PARTNER});return await this.partnerRepository.update({id:y.id,logoUrl:S}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as VS}from"@asteasolutions/zod-to-openapi";import op from"zod";VS(op);var ip=op.object({id:op.uuid()}),bn=class{constructor(e,r){this.partnerRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=ip.parse({id:e.params.id}),i=await this.partnerRepository.findById(t);if(!i)throw new p("O parceiro n\xE3o existe.");return i.logoUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.logoUrl}),await this.partnerRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as ZS}from"@asteasolutions/zod-to-openapi";import np from"zod";ZS(np);var wn=np.object({id:np.uuid()}),Cn=class{constructor(e){this.partnerRepository=e}async handle(e,r){try{let{id:t}=wn.parse({id:e.params.id}),i=await this.partnerRepository.findById(t);if(!i)throw new p("O parceiro n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as KS}from"@asteasolutions/zod-to-openapi";import Qe from"zod";var JS=1,YS=9;KS(Qe);var sp=Qe.object({page:Qe.coerce.number().min(1).default(JS),limit:Qe.coerce.number().min(1).default(YS),name:Qe.string().optional(),description:Qe.string().optional(),category:Qe.string().optional(),isActive:Qe.coerce.boolean().optional(),orderBy:Qe.enum(["asc","desc"]).optional()}),Sn=class{constructor(e){this.partnerRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=sp.parse(e.query),s=i*t-i,[m,c]=await Promise.all([this.partnerRepository.find({pagination:{offset:s,limit:i},filter:n}),this.partnerRepository.count({filter:n})]),d=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:d,offset:s,limit:i,partners:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as XS}from"@asteasolutions/zod-to-openapi";import Oe from"zod";var kg=2,Og=1024,$S=Og*Og,QS=kg*$S;XS(Oe);var ap=Oe.object({id:Oe.uuid(),name:Oe.string().min(1,"Nome \xE9 obrigat\xF3rio").optional(),logo:Oe.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=QS,`A imagem deve ter no m\xE1ximo ${kg}MB.`).optional(),websiteUrl:Oe.url("URL do site deve ser v\xE1lida").optional(),description:Oe.string().optional(),category:Oe.string().optional(),since:Oe.coerce.date().optional(),isActive:Oe.preprocess(o=>o==="true",Oe.boolean().optional())}),vn=class{constructor(e,r){this.partnerRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,name:i,logo:n,websiteUrl:s,description:m,category:c,since:d,isActive:y}=ap.parse({id:e.params.id,...e.body,logo:e.file}),S=await this.partnerRepository.findById(t);if(!S)throw new p("O parceiro n\xE3o existe.");let A=S.logoUrl;if(n&&(A=await this.firebaseStorageService.uploadFile({file:n,id:t,folder:"images/partners"})),!A)throw new a("Logo URL \xE9 obrigat\xF3rio");return await this.partnerRepository.update({id:t,name:i,logoUrl:A,websiteUrl:s,description:m,category:c,since:d,isActive:y}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Gg=G.object({id:G.uuid(),name:G.string(),logoUrl:G.string(),description:G.string().nullable(),category:G.string().nullable(),since:G.date(),isActive:G.boolean(),createdAt:G.date(),updatedAt:G.date()}),Ng={method:"post",path:"/partner",tags:["Partners"],summary:"Create a new partner with logo upload",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:rp}}}},responses:{201:{description:"Partner created successfully",summary:"Partner Created"},400:{description:"Invalid input data, missing required fields, or invalid logo format/size",summary:"Validation Error",content:{"application/json":{schema:G.object({errors:G.record(G.string(),G.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:G.object({message:G.string()})}}},409:{description:"Partner with this name already exists",summary:"Conflict",content:{"application/json":{schema:G.object({message:G.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:G.object({message:G.string()})}}}}},Lg={method:"get",path:"/partner",tags:["Partners"],summary:"List all partners with pagination and filters",request:{query:sp},responses:{200:{description:"List of partners retrieved successfully with pagination",summary:"Partners Retrieved",content:{"application/json":{schema:G.object({page:G.number(),totalPages:G.number(),offset:G.number(),limit:G.number(),partners:G.array(Gg)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:G.object({errors:G.record(G.string(),G.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:G.object({message:G.string()})}}}}},Wg={method:"get",path:"/partner/{id}",tags:["Partners"],summary:"Find partner by ID",request:{params:wn},responses:{200:{description:"Partner details retrieved successfully",summary:"Partner Retrieved",content:{"application/json":{schema:Gg}}},400:{description:"Invalid partner ID format",summary:"Validation Error",content:{"application/json":{schema:G.object({errors:G.record(G.string(),G.string())})}}},404:{description:"Partner not found with the provided ID",summary:"Partner Not Found",content:{"application/json":{schema:G.object({message:G.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:G.object({message:G.string()})}}}}},_g={method:"put",path:"/partner/{id}",tags:["Partners"],summary:"Update partner with optional logo upload",security:[{bearerAuth:[]}],request:{params:wn,body:{content:{"multipart/form-data":{schema:ap.omit({id:!0})}}}},responses:{200:{description:"Partner updated successfully",summary:"Partner Updated"},400:{description:"Invalid input data, partner ID format, or invalid logo format/size",summary:"Validation Error",content:{"application/json":{schema:G.object({errors:G.record(G.string(),G.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:G.object({message:G.string()})}}},404:{description:"Partner not found with the provided ID",summary:"Partner Not Found",content:{"application/json":{schema:G.object({message:G.string()})}}},409:{description:"Partner with this name already exists",summary:"Conflict",content:{"application/json":{schema:G.object({message:G.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:G.object({message:G.string()})}}}}},Hg={method:"delete",path:"/partner/{id}",tags:["Partners"],summary:"Delete partner",security:[{bearerAuth:[]}],request:{params:ip},responses:{200:{description:"Partner deleted successfully",summary:"Partner Deleted"},400:{description:"Invalid partner ID format",summary:"Validation Error",content:{"application/json":{schema:G.object({errors:G.record(G.string(),G.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:G.object({message:G.string()})}}},404:{description:"Partner not found with the provided ID",summary:"Partner Not Found",content:{"application/json":{schema:G.object({message:G.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:G.object({message:G.string()})}}}}};import{$Enums as zg}from"@prisma/client";import L from"zod";import{extendZodWithOpenApi as ev}from"@asteasolutions/zod-to-openapi";import{PendencyStatus as tv}from"@prisma/client";import St from"zod";ev(St);var jn=St.object({userId:St.uuid(),title:St.string().min(1),description:St.string().optional(),status:St.enum(tv).default("PENDING"),dueDate:St.coerce.date().optional(),document:St.any().refine(o=>o&&typeof o=="object"&&o.size>0,"Arquivo do documento \xE9 obrigat\xF3rio")}),En=class{constructor(e,r,t){this.userRepository=e;this.pendencyRepository=r;this.firebaseStorageService=t}async handle(e,r){try{let{userId:t,title:i,description:n,status:s,dueDate:m,document:c}=jn.parse({...e.body,userId:e.params.user_id,document:e.file});if(!await this.userRepository.findById(t))throw new he("O usu\xE1rio n\xE3o existe.");let y=await this.firebaseStorageService.uploadFile({file:c,id:t,folder:j.PENDENCY});return await this.pendencyRepository.create({userId:t,title:i,description:n,status:s,dueDate:m,documentUrl:y}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as rv}from"@asteasolutions/zod-to-openapi";import mp from"zod";rv(mp);var cp=mp.object({id:mp.uuid()}),xn=class{constructor(e,r){this.pendencyRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=cp.parse({id:e.params.pendency_id}),i=await this.pendencyRepository.findById(t);if(!i)throw new p("A pend\xEAncia n\xE3o existe.");return await Promise.all([this.pendencyRepository.deleteById(i.id),this.firebaseStorageService.deleteFile({fileUrl:i.documentUrl})]),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as ov}from"@asteasolutions/zod-to-openapi";import{PendencyStatus as iv}from"@prisma/client";import et from"zod";var nv=1,sv=6;ov(et);var pp=et.object({page:et.coerce.number().min(1).default(nv),limit:et.coerce.number().min(1).default(sv),title:et.string().optional(),description:et.string().optional(),status:et.enum(iv).default("PENDING"),userId:et.uuid().optional(),orderBy:et.enum(["asc","desc"]).default("desc")}),Mn=class{constructor(e){this.pendencyRepository=e}async handle(e,r){try{let{description:t,limit:i,orderBy:n,page:s,title:m,status:c,userId:d}=pp.parse(e.query),y=s*i-i,[S,A]=await Promise.all([this.pendencyRepository.find({pagination:{offset:y,limit:i},filter:{title:m,description:t,status:c,orderBy:n,userId:d}}),this.pendencyRepository.count({filter:{title:m,description:t,status:c,userId:d}})]),$=Math.max(Math.ceil(A/i),1);return r.status(200).json({page:s,totalPages:$,offset:y,limit:i,pendencies:S})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as av}from"@asteasolutions/zod-to-openapi";import dp from"zod";av(dp);var lp=dp.object({pendencyId:dp.uuid()}),Tn=class{constructor(e){this.pendencyRepository=e}async handle(e,r){try{let{pendencyId:t}=lp.parse({pendencyId:e.params.pendency_id}),i=await this.pendencyRepository.findById(t);if(!i)throw new p("Pend\xEAncia n\xE3o encontrada.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as mv}from"@asteasolutions/zod-to-openapi";import{PendencyStatus as cv}from"@prisma/client";import vt from"zod";mv(vt);var Pn=vt.object({id:vt.uuid(),title:vt.string().min(1),description:vt.string().optional(),status:vt.enum(cv),dueDate:vt.coerce.date().optional(),document:vt.any().refine(o=>o==null||typeof o=="object"&&typeof o.size=="number"&&(o.size===0||o.size>0),"Arquivo do documento \xE9 inv\xE1lido").optional()}),An=class{constructor(e,r){this.pendencyRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{document:t,id:i,...n}=Pn.parse({...e.body,id:e.params.pendency_id,document:e.file}),s=await this.pendencyRepository.findById(i);if(!s)throw new he("A pend\xEAncia n\xE3o existe");let m=s.documentUrl;return t&&t.size>0&&(m=await this.firebaseStorageService.updateFile({file:t,id:s.userId,folder:j.PENDENCY,fileUrl:s.documentUrl})),await this.pendencyRepository.update({...n,id:i,documentUrl:m}),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Vg={method:"post",path:"/pendency/{user_id}",tags:["Pendencies"],summary:"Create pendency for user",security:[{bearerAuth:[]}],request:{params:jn.pick({userId:!0}).transform(()=>({user_id:""})),body:{content:{"multipart/form-data":{schema:jn.omit({userId:!0})}}}},responses:{201:{description:"Pendency created successfully for the user",summary:"Pendency Created",content:{"application/json":{schema:L.object({})}}},400:{description:"Invalid input data or file format",summary:"Validation Error",content:{"application/json":{schema:L.object({errors:L.record(L.string(),L.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:L.object({message:L.string()})}}}}},Zg={method:"get",path:"/pendency",tags:["Pendencies"],summary:"List pendencies",security:[{bearerAuth:[]}],request:{query:pp},responses:{200:{description:"Paginated list of pendencies retrieved successfully",summary:"Pendencies Retrieved",content:{"application/json":{schema:L.object({page:L.number(),totalPages:L.number(),offset:L.number(),limit:L.number(),pendencies:L.array(L.object({id:L.string(),title:L.string(),description:L.string().nullable(),status:L.enum(zg.PendencyStatus),dueDate:L.date().nullable(),documentUrl:L.string(),userId:L.string(),createdAt:L.date(),updatedAt:L.date()}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:L.object({errors:L.record(L.string(),L.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:L.object({message:L.string()})}}}}},Kg={method:"get",path:"/pendency/{pendency_id}",tags:["Pendencies"],summary:"Find pendency by ID",security:[{bearerAuth:[]}],request:{params:lp},responses:{200:{description:"Pendency details retrieved successfully",summary:"Pendency Retrieved",content:{"application/json":{schema:L.object({id:L.string(),title:L.string(),description:L.string().nullable(),status:L.enum(zg.PendencyStatus),dueDate:L.date().nullable(),documentUrl:L.string(),userId:L.string(),createdAt:L.date(),updatedAt:L.date()}).nullable()}}},400:{description:"Invalid pendency ID format",summary:"Validation Error",content:{"application/json":{schema:L.object({errors:L.record(L.string(),L.string())})}}},404:{description:"Pendency not found with the provided ID",summary:"Pendency Not Found",content:{"application/json":{schema:L.object({message:L.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:L.object({message:L.string()})}}}}},Jg={method:"put",path:"/pendency/{pendency_id}",tags:["Pendencies"],summary:"Update pendency",security:[{bearerAuth:[]}],request:{params:Pn.pick({id:!0}).transform(()=>({pendency_id:""})),body:{content:{"multipart/form-data":{schema:Pn.omit({id:!0})}}}},responses:{204:{description:"Pendency updated successfully",summary:"Pendency Updated"},400:{description:"Invalid input data or pendency does not exist",summary:"Validation Error",content:{"application/json":{schema:L.object({errors:L.record(L.string(),L.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:L.object({message:L.string()})}}}}},Yg={method:"delete",path:"/pendency/{pendency_id}",tags:["Pendencies"],summary:"Delete pendency",security:[{bearerAuth:[]}],request:{params:cp},responses:{204:{description:"Pendency deleted successfully",summary:"Pendency Deleted"},400:{description:"Invalid pendency ID format",summary:"Validation Error",content:{"application/json":{schema:L.object({errors:L.record(L.string(),L.string())})}}},404:{description:"Pendency not found with the provided ID",summary:"Pendency Not Found",content:{"application/json":{schema:L.object({message:L.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:L.object({message:L.string()})}}}}};import x from"zod";import{extendZodWithOpenApi as pv}from"@asteasolutions/zod-to-openapi";import up from"zod";pv(up);var gp=up.object({id:up.uuid()}),Dn=class{constructor(e,r){this.postGraduateProgramRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=gp.parse({id:e.params.id}),i=await this.postGraduateProgramRepository.findById(t);if(!i)throw new p("O programa de p\xF3s-gradua\xE7\xE3o n\xE3o existe.");return i.imageUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.imageUrl}),await this.postGraduateProgramRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as dv}from"@asteasolutions/zod-to-openapi";import fp from"zod";dv(fp);var yp=fp.object({id:fp.uuid()}),Fn=class{constructor(e){this.postGraduateProgramRepository=e}async handle(e,r){try{let{id:t}=yp.parse({id:e.params.id}),i=await this.postGraduateProgramRepository.findById(t);if(!i)throw new p("Programa de p\xF3s-gradua\xE7\xE3o n\xE3o encontrado.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as lv}from"@asteasolutions/zod-to-openapi";import Et from"zod";var uv=1,gv=6;lv(Et);var hp=Et.object({page:Et.coerce.number().min(1).default(uv),limit:Et.coerce.number().min(1).default(gv),title:Et.string().optional(),description:Et.string().optional(),contact:Et.string().optional(),orderBy:Et.enum(["asc","desc"]).default("desc")}),Bn=class{constructor(e){this.postGraduateProgramRepository=e}async handle(e,r){try{let{limit:t,page:i,...n}=hp.parse(e.query),s=i*t-t,[m,c]=await Promise.all([this.postGraduateProgramRepository.find({pagination:{offset:s,limit:t},filter:n}),this.postGraduateProgramRepository.count({filter:n})]),d=Math.max(Math.ceil(c/t),1);return r.status(200).json({page:i,totalPages:d,offset:s,limit:t,postGraduatePrograms:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as fv}from"@asteasolutions/zod-to-openapi";import ze from"zod";var $g=5,Xg=1024,yv=Xg*Xg,hv=$g*yv;fv(ze);var Rp=ze.object({id:ze.uuid(),title:ze.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio.").optional(),description:ze.string().optional(),startDate:ze.coerce.date().optional(),endDate:ze.coerce.date().optional(),contact:ze.string().min(1,"Contato \xE9 obrigat\xF3rio.").optional(),registrationLink:ze.url("URL de inscri\xE7\xE3o deve ser v\xE1lida").optional(),image:ze.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=hv,`A imagem deve ter no m\xE1ximo ${$g}MB.`).optional()}),qn=class{constructor(e,r){this.postGraduateProgramRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,image:i,title:n,description:s,startDate:m,endDate:c,contact:d,registrationLink:y}=Rp.parse({id:e.params.id,...e.body,image:e.file}),S=await this.postGraduateProgramRepository.findById(t);if(!S)throw new p("O programa de p\xF3s-gradua\xE7\xE3o n\xE3o existe.");let A=S.imageUrl;if(i&&(A=await this.firebaseStorageService.uploadFile({file:i,id:t,folder:j.POST_GRADUATE_PROGRAM})),!A)throw new a("URL da imagem \xE9 obrigat\xF3rio");return await this.postGraduateProgramRepository.update({id:t,title:n,description:s,startDate:m,endDate:c,contact:d,registrationLink:y,imageUrl:A}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Qg={method:"post",path:"/post-graduate-programs",tags:["Post Graduate Programs"],summary:"Create post-graduate program",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:x.object({title:x.string().min(1).openapi({description:"T\xEDtulo do programa"}),description:x.string().optional().openapi({description:"Descri\xE7\xE3o do programa"}),startDate:x.string().openapi({description:"Data de in\xEDcio (ISO 8601)",example:"2024-01-01T10:00:00Z"}),endDate:x.string().openapi({description:"Data de t\xE9rmino (ISO 8601)",example:"2024-12-31T10:00:00Z"}),contact:x.string().min(1).openapi({description:"Informa\xE7\xF5es de contato"}),registrationLink:x.string().url().optional().openapi({description:"Link de inscri\xE7\xE3o"}),image:x.string().optional().openapi({description:"Imagem do programa (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{201:{description:"Post-graduate program created successfully",summary:"Program Created"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:x.object({errors:x.record(x.string(),x.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:x.object({message:x.string()})}}}}},ef={method:"get",path:"/post-graduate-programs",tags:["Post Graduate Programs"],summary:"List post-graduate programs",security:[{bearerAuth:[]}],request:{query:hp},responses:{200:{description:"Paginated list of post-graduate programs retrieved successfully",summary:"Programs Retrieved",content:{"application/json":{schema:x.object({page:x.number(),totalPages:x.number(),offset:x.number(),limit:x.number(),postGraduatePrograms:x.array(x.object({id:x.string(),title:x.string(),imageUrl:x.string().nullable(),description:x.string().nullable(),startDate:x.date(),endDate:x.date(),contact:x.string(),registrationLink:x.string().nullable(),createdAt:x.date(),updatedAt:x.date()}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:x.object({errors:x.record(x.string(),x.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:x.object({message:x.string()})}}}}},tf={method:"get",path:"/post-graduate-programs/{id}",tags:["Post Graduate Programs"],summary:"Find post-graduate program by ID",security:[{bearerAuth:[]}],request:{params:yp},responses:{200:{description:"Post-graduate program details retrieved successfully",summary:"Program Retrieved",content:{"application/json":{schema:x.object({id:x.string(),title:x.string(),imageUrl:x.string().nullable(),description:x.string().nullable(),startDate:x.date(),endDate:x.date(),contact:x.string(),registrationLink:x.string().nullable(),createdAt:x.date(),updatedAt:x.date()}).nullable()}}},400:{description:"Invalid program ID format",summary:"Validation Error",content:{"application/json":{schema:x.object({errors:x.record(x.string(),x.string())})}}},404:{description:"Post-graduate program not found with the provided ID",summary:"Program Not Found",content:{"application/json":{schema:x.object({message:x.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:x.object({message:x.string()})}}}}},rf={method:"put",path:"/post-graduate-programs/{id}",tags:["Post Graduate Programs"],summary:"Update post-graduate program",security:[{bearerAuth:[]}],request:{params:Rp.pick({id:!0}),body:{content:{"multipart/form-data":{schema:x.object({title:x.string().min(1).optional().openapi({description:"T\xEDtulo do programa"}),description:x.string().optional().openapi({description:"Descri\xE7\xE3o do programa"}),startDate:x.string().optional().openapi({description:"Data de in\xEDcio (ISO 8601)",example:"2024-01-01T10:00:00Z"}),endDate:x.string().optional().openapi({description:"Data de t\xE9rmino (ISO 8601)",example:"2024-12-31T10:00:00Z"}),contact:x.string().min(1).optional().openapi({description:"Informa\xE7\xF5es de contato"}),registrationLink:x.string().url().optional().openapi({description:"Link de inscri\xE7\xE3o"}),image:x.string().optional().openapi({description:"Imagem do programa (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{200:{description:"Post-graduate program updated successfully",summary:"Program Updated"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:x.object({errors:x.record(x.string(),x.string())})}}},404:{description:"Post-graduate program not found with the provided ID",summary:"Program Not Found",content:{"application/json":{schema:x.object({message:x.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:x.object({message:x.string()})}}}}},of={method:"delete",path:"/post-graduate-programs/{id}",tags:["Post Graduate Programs"],summary:"Delete post-graduate program",security:[{bearerAuth:[]}],request:{params:gp},responses:{200:{description:"Post-graduate program deleted successfully",summary:"Program Deleted"},400:{description:"Invalid program ID format",summary:"Validation Error",content:{"application/json":{schema:x.object({errors:x.record(x.string(),x.string())})}}},404:{description:"Post-graduate program not found with the provided ID",summary:"Program Not Found",content:{"application/json":{schema:x.object({message:x.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:x.object({message:x.string()})}}}}};import V from"zod";import{extendZodWithOpenApi as Rv}from"@asteasolutions/zod-to-openapi";import{RedeCTHighlightType as Iv}from"@prisma/client";import tt from"zod";var sf=2,nf=1024,bv=nf*nf,Cv=sf*bv;Rv(tt);var Ip=tt.object({type:tt.enum(Iv),name:tt.string().min(1,"Nome \xE9 obrigat\xF3rio"),image:tt.any().refine(o=>o==null||typeof o!="object"||typeof o.size!="number"?!1:o.size<=Cv,`A imagem deve ter no m\xE1ximo ${sf}MB.`),description:tt.string().optional(),honorableMention:tt.string().optional(),honoredAt:tt.coerce.date(),meritUrl:tt.url("URL do m\xE9rito deve ser v\xE1lida").optional()}),Un=class{constructor(e,r){this.redectHighlightRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{type:t,name:i,image:n,description:s,honorableMention:m,honoredAt:c,meritUrl:d}=Ip.parse({...e.body,image:e.file}),y=await this.redectHighlightRepository.create({type:t,name:i,description:s,honorableMention:m,honoredAt:c,meritUrl:d}),S=await this.firebaseStorageService.uploadFile({file:n,id:y.id,folder:j.REDECT_HIGHLIGHT});return await this.redectHighlightRepository.update({id:y.id,imageUrl:S}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as wv}from"@asteasolutions/zod-to-openapi";import bp from"zod";wv(bp);var Cp=bp.object({id:bp.uuid()}),On=class{constructor(e,r){this.redectHighlightRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=Cp.parse(e.params),i=await this.redectHighlightRepository.findById(t);if(!i)throw new p("O destaque n\xE3o existe.");return i.imageUrl&&await this.firebaseStorageService.deleteFile({fileUrl:i.imageUrl}),await this.redectHighlightRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Sv}from"@asteasolutions/zod-to-openapi";import wp from"zod";Sv(wp);var Gn=wp.object({id:wp.uuid()}),kn=class{constructor(e){this.redectHighlightRepository=e}async handle(e,r){try{let{id:t}=Gn.parse(e.params),i=await this.redectHighlightRepository.findById(t);if(!i)throw new p("Destaque n\xE3o encontrado.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as vv}from"@asteasolutions/zod-to-openapi";import rt from"zod";var Ev=1,jv=9;vv(rt);var Sp=rt.object({page:rt.coerce.number().min(1).default(Ev),limit:rt.coerce.number().min(1).default(jv),name:rt.string().optional(),type:rt.enum(["PERSON","INSTITUTION"]).optional(),description:rt.string().optional(),honorableMention:rt.string().optional(),orderBy:rt.enum(["asc","desc"]).optional()}),Nn=class{constructor(e){this.redectHighlightRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=Sp.parse(e.query),s=i*t-i,[m,c]=await Promise.all([this.redectHighlightRepository.find({pagination:{offset:s,limit:i},filter:n}),this.redectHighlightRepository.count({filter:n})]),d=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:d,offset:s,limit:i,highlights:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as xv}from"@asteasolutions/zod-to-openapi";import Ve from"zod";var mf=2,af=1024,Mv=af*af,Tv=mf*Mv;xv(Ve);var vp=Ve.object({id:Ve.uuid(),type:Ve.enum(["PERSON","INSTITUTION"]).optional(),name:Ve.string().min(1,"Nome \xE9 obrigat\xF3rio").optional(),image:Ve.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=Tv,`A imagem deve ter no m\xE1ximo ${mf}MB.`).optional(),description:Ve.string().optional(),honorableMention:Ve.string().optional(),honoredAt:Ve.coerce.date().optional(),meritUrl:Ve.url("URL do m\xE9rito deve ser v\xE1lida").optional()}),Ln=class{constructor(e,r){this.redectHighlightRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,type:i,name:n,image:s,description:m,honorableMention:c,honoredAt:d,meritUrl:y}=vp.parse({id:e.params.id,...e.body,image:e.file}),S=await this.redectHighlightRepository.findById(t);if(!S)throw new p("O destaque n\xE3o existe.");let A=S.imageUrl;if(s&&(A=await this.firebaseStorageService.uploadFile({file:s,id:t,folder:"images/redect-highlights"})),!A)throw new a("URL da imagem \xE9 obrigat\xF3ria");return await this.redectHighlightRepository.update({id:t,type:i,name:n,imageUrl:A,description:m,honorableMention:c,honoredAt:d,meritUrl:y}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var cf=V.object({id:V.uuid(),type:V.enum(["PERSON","INSTITUTION"]),name:V.string(),description:V.string().nullable(),honorableMention:V.string().nullable(),imageUrl:V.string().nullable(),honoredAt:V.date(),meritUrl:V.string().nullable(),createdAt:V.date(),updatedAt:V.date()}),pf={method:"post",path:"/redect-highlight",tags:["RedeCT Highlights"],summary:"Create a new RedeCT highlight with image upload",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:Ip}}}},responses:{201:{description:"RedeCT highlight created successfully",summary:"Highlight Created"},400:{description:"Invalid input data, missing required fields, or invalid image format/size",summary:"Validation Error",content:{"application/json":{schema:V.object({errors:V.record(V.string(),V.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:V.object({message:V.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:V.object({message:V.string()})}}}}},df={method:"get",path:"/redect-highlight",tags:["RedeCT Highlights"],summary:"List all RedeCT highlights with pagination and filters",request:{query:Sp},responses:{200:{description:"List of RedeCT highlights retrieved successfully with pagination",summary:"Highlights Retrieved",content:{"application/json":{schema:V.object({page:V.number(),totalPages:V.number(),offset:V.number(),limit:V.number(),highlights:V.array(cf)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:V.object({errors:V.record(V.string(),V.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:V.object({message:V.string()})}}}}},lf={method:"get",path:"/redect-highlight/{id}",tags:["RedeCT Highlights"],summary:"Find RedeCT highlight by ID",request:{params:Gn},responses:{200:{description:"RedeCT highlight details retrieved successfully",summary:"Highlight Retrieved",content:{"application/json":{schema:cf}}},400:{description:"Invalid highlight ID format",summary:"Validation Error",content:{"application/json":{schema:V.object({errors:V.record(V.string(),V.string())})}}},404:{description:"RedeCT highlight not found with the provided ID",summary:"Highlight Not Found",content:{"application/json":{schema:V.object({message:V.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:V.object({message:V.string()})}}}}},uf={method:"put",path:"/redect-highlight/{id}",tags:["RedeCT Highlights"],summary:"Update RedeCT highlight with optional image upload",security:[{bearerAuth:[]}],request:{params:Gn,body:{content:{"multipart/form-data":{schema:vp.omit({id:!0})}}}},responses:{200:{description:"RedeCT highlight updated successfully",summary:"Highlight Updated"},400:{description:"Invalid input data, highlight ID format, or invalid image format/size",summary:"Validation Error",content:{"application/json":{schema:V.object({errors:V.record(V.string(),V.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:V.object({message:V.string()})}}},404:{description:"RedeCT highlight not found with the provided ID",summary:"Highlight Not Found",content:{"application/json":{schema:V.object({message:V.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:V.object({message:V.string()})}}}}},gf={method:"delete",path:"/redect-highlight/{id}",tags:["RedeCT Highlights"],summary:"Delete RedeCT highlight",security:[{bearerAuth:[]}],request:{params:Cp},responses:{200:{description:"RedeCT highlight deleted successfully",summary:"Highlight Deleted"},400:{description:"Invalid highlight ID format",summary:"Validation Error",content:{"application/json":{schema:V.object({errors:V.record(V.string(),V.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:V.object({message:V.string()})}}},404:{description:"RedeCT highlight not found with the provided ID",summary:"Highlight Not Found",content:{"application/json":{schema:V.object({message:V.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:V.object({message:V.string()})}}}}};import{$Enums as Bv}from"@prisma/client";import Z from"zod";import{extendZodWithOpenApi as Av}from"@asteasolutions/zod-to-openapi";import mo from"zod";Av(mo);var Ep=mo.object({role:mo.string().min(1),description:mo.string().optional(),userId:mo.uuid()}),Wn=class{constructor(e){this.referenceCenterTeamMemberRepository=e}async handle(e,r){try{let{role:t,description:i,userId:n}=Ep.parse(e.body);return await this.referenceCenterTeamMemberRepository.create({role:t,description:i,userId:n}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Pv}from"@asteasolutions/zod-to-openapi";import jp from"zod";Pv(jp);var xp=jp.object({id:jp.uuid()}),_n=class{constructor(e){this.referenceCenterTeamMemberRepository=e}async handle(e,r){try{let{id:t}=xp.parse({id:e.params.id});if(!await this.referenceCenterTeamMemberRepository.findById(t))throw new p("O membro do centro de refer\xEAncia n\xE3o existe.");return await this.referenceCenterTeamMemberRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Dv}from"@asteasolutions/zod-to-openapi";import Mp from"zod";Dv(Mp);var zn=Mp.object({id:Mp.uuid()}),Hn=class{constructor(e){this.referenceCenterTeamMemberRepository=e}async handle(e,r){try{let{id:t}=zn.parse({id:e.params.id}),i=await this.referenceCenterTeamMemberRepository.findById(t);if(!i)throw new p("O membro do centro de refer\xEAncia n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Fv}from"@asteasolutions/zod-to-openapi";import wr from"zod";Fv(wr);var Tp=wr.object({id:wr.uuid(),role:wr.string().min(1).optional(),description:wr.string().optional(),userId:wr.uuid().optional()}),Vn=class{constructor(e){this.referenceCenterTeamMemberRepository=e}async handle(e,r){try{let{id:t,role:i,description:n,userId:s}=Tp.parse({id:e.params.id,...e.body});if(!await this.referenceCenterTeamMemberRepository.findById(t))throw new p("O membro do centro de refer\xEAncia n\xE3o existe.");return await this.referenceCenterTeamMemberRepository.update({id:t,role:i,description:n,userId:s}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var qv=Z.object({id:Z.uuid(),name:Z.string(),emailAddress:Z.string(),avatarUrl:Z.string().nullable(),orcid:Z.string().nullable(),phone:Z.string().nullable(),lattesUrl:Z.string().nullable(),role:Z.enum(Bv.UserRole)}),ff=Z.object({id:Z.uuid(),role:Z.string(),description:Z.string().nullable(),createdAt:Z.date(),updatedAt:Z.date(),userId:Z.uuid(),user:qv}),yf={method:"post",path:"/reference-center-team-member",tags:["Reference Center Team Members"],summary:"Create a new Reference Center Team Member",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:Ep}}}},responses:{201:{description:"Reference Center Team Member created successfully",summary:"Reference Center Team Member Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:Z.object({errors:Z.record(Z.string(),Z.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:Z.object({message:Z.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Z.object({message:Z.string()})}}}}},hf={method:"get",path:"/reference-center-team-member",tags:["Reference Center Team Members"],summary:"List all Reference Center Team Members with filters",request:{query:Z.object({role:Z.string().optional(),orderBy:Z.enum(["asc","desc"]).optional()})},responses:{200:{description:"List of Reference Center Team Members retrieved successfully",summary:"Reference Center Team Members Retrieved",content:{"application/json":{schema:Z.object({members:Z.array(ff)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Z.object({message:Z.string()})}}}}},Rf={method:"get",path:"/reference-center-team-member/{id}",tags:["Reference Center Team Members"],summary:"Find Reference Center Team Member by ID",request:{params:zn},responses:{200:{description:"Reference Center Team Member details retrieved successfully",summary:"Reference Center Team Member Retrieved",content:{"application/json":{schema:ff}}},400:{description:"Invalid Reference Center Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:Z.object({errors:Z.record(Z.string(),Z.string())})}}},404:{description:"Reference Center Team Member not found with the provided ID",summary:"Reference Center Team Member Not Found",content:{"application/json":{schema:Z.object({message:Z.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Z.object({message:Z.string()})}}}}},If={method:"put",path:"/reference-center-team-member/{id}",tags:["Reference Center Team Members"],summary:"Update Reference Center Team Member",security:[{bearerAuth:[]}],request:{params:zn,body:{content:{"application/json":{schema:Tp.omit({id:!0})}}}},responses:{200:{description:"Reference Center Team Member updated successfully",summary:"Reference Center Team Member Updated"},400:{description:"Invalid input data or Reference Center Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:Z.object({errors:Z.record(Z.string(),Z.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:Z.object({message:Z.string()})}}},404:{description:"Reference Center Team Member not found with the provided ID",summary:"Reference Center Team Member Not Found",content:{"application/json":{schema:Z.object({message:Z.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Z.object({message:Z.string()})}}}}},bf={method:"delete",path:"/reference-center-team-member/{id}",tags:["Reference Center Team Members"],summary:"Delete Reference Center Team Member",security:[{bearerAuth:[]}],request:{params:xp},responses:{200:{description:"Reference Center Team Member deleted successfully",summary:"Reference Center Team Member Deleted"},400:{description:"Invalid Reference Center Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:Z.object({errors:Z.record(Z.string(),Z.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:Z.object({message:Z.string()})}}},404:{description:"Reference Center Team Member not found with the provided ID",summary:"Reference Center Team Member Not Found",content:{"application/json":{schema:Z.object({message:Z.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Z.object({message:Z.string()})}}}}};import{RegimentStatus as Xv}from"@prisma/client";import k from"zod";import{extendZodWithOpenApi as Uv}from"@asteasolutions/zod-to-openapi";import{RegimentStatus as wf}from"@prisma/client";import kt from"zod";var Sf=10,Cf=1024,Ov=Cf*Cf,kv=Sf*Ov;Uv(kt);var Ap=kt.object({title:kt.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio"),version:kt.string().min(1,"Vers\xE3o \xE9 obrigat\xF3ria"),publishedAt:kt.coerce.date(),document:kt.any().refine(o=>o==null||typeof o!="object"||typeof o.size!="number"?!1:o.size<=kv,`O documento deve ter no m\xE1ximo ${Sf}MB.`),status:kt.enum(wf).optional()}),Zn=class{constructor(e,r){this.regimentRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{title:t,version:i,publishedAt:n,document:s,status:m}=Ap.parse({...e.body,document:e.file}),c=await this.regimentRepository.create({title:t,version:i,publishedAt:n,documentUrl:"",status:m??wf.IN_FORCE}),d=await this.firebaseStorageService.uploadFile({file:s,id:c.id,folder:j.REGIMENT});return await this.regimentRepository.update({id:c.id,documentUrl:d}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Gv}from"@asteasolutions/zod-to-openapi";import Pp from"zod";Gv(Pp);var Dp=Pp.object({id:Pp.uuid()}),Kn=class{constructor(e,r){this.regimentRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=Dp.parse({id:e.params.id}),i=await this.regimentRepository.findById(t);if(!i)throw new p("O regimento n\xE3o existe.");return i.documentUrl&&await this.firebaseStorageService.deleteFile({fileUrl:i.documentUrl}),await this.regimentRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Nv}from"@asteasolutions/zod-to-openapi";import Fp from"zod";Nv(Fp);var Yn=Fp.object({id:Fp.uuid()}),Jn=class{constructor(e){this.regimentRepository=e}async handle(e,r){try{let{id:t}=Yn.parse({id:e.params.id}),i=await this.regimentRepository.findById(t);if(!i)throw new p("O regimento n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Lv}from"@asteasolutions/zod-to-openapi";import{RegimentStatus as Wv}from"@prisma/client";import Bp from"zod";Lv(Bp);var qp=Bp.object({status:Bp.enum(Wv)}),Xn=class{constructor(e){this.regimentRepository=e}async handle(e,r){try{let{status:t}=qp.parse({status:e.params.status}),i=await this.regimentRepository.findByStatus(t);return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as _v}from"@asteasolutions/zod-to-openapi";import{RegimentStatus as Hv}from"@prisma/client";import Gt from"zod";var zv=1,Vv=10;_v(Gt);var Up=Gt.object({page:Gt.coerce.number().min(1).default(zv),limit:Gt.coerce.number().min(1).default(Vv),title:Gt.string().optional(),status:Gt.enum(Hv).optional(),orderBy:Gt.enum(["asc","desc"]).optional()}),$n=class{constructor(e){this.regimentRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=Up.parse(e.query),s=i*t-i,[m,c]=await Promise.all([this.regimentRepository.find({pagination:{offset:s,limit:i},filter:n}),this.regimentRepository.count({filter:n})]),d=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:d,offset:s,limit:i,regiments:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Zv}from"@asteasolutions/zod-to-openapi";import{RegimentStatus as Kv}from"@prisma/client";import jt from"zod";var Ef=10,vf=1024,Jv=vf*vf,Yv=Ef*Jv;Zv(jt);var Op=jt.object({id:jt.uuid(),title:jt.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio").optional(),version:jt.string().min(1,"Vers\xE3o \xE9 obrigat\xF3ria").optional(),publishedAt:jt.coerce.date().optional(),document:jt.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=Yv,`O documento deve ter no m\xE1ximo ${Ef}MB.`).optional(),status:jt.enum(Kv).optional()}),Qn=class{constructor(e,r){this.regimentRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,title:i,version:n,publishedAt:s,document:m,status:c}=Op.parse({id:e.params.id,...e.body,document:e.file}),d=await this.regimentRepository.findById(t);if(!d)throw new p("O regimento n\xE3o existe.");let y=d.documentUrl;return m&&(d.documentUrl&&await this.firebaseStorageService.deleteFile({fileUrl:d.documentUrl}),y=await this.firebaseStorageService.uploadFile({file:m,id:t,folder:j.REGIMENT})),await this.regimentRepository.update({id:t,title:i,version:n,publishedAt:s,documentUrl:y??void 0,status:c}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var kp=k.object({id:k.uuid(),title:k.string(),version:k.string(),publishedAt:k.date(),documentUrl:k.string(),status:k.enum(Xv),createdAt:k.date(),updatedAt:k.date()}),jf={method:"post",path:"/regiment",tags:["Regiments"],summary:"Create a new regiment with document upload",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:Ap}}}},responses:{201:{description:"Regiment created successfully",summary:"Regiment Created"},400:{description:"Invalid input data, missing required fields, or invalid document format/size",summary:"Validation Error",content:{"application/json":{schema:k.object({errors:k.record(k.string(),k.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:k.object({message:k.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:k.object({message:k.string()})}}}}},xf={method:"get",path:"/regiment",tags:["Regiments"],summary:"List all regiments with pagination and filters",request:{query:Up},responses:{200:{description:"List of regiments retrieved successfully with pagination",summary:"Regiments Retrieved",content:{"application/json":{schema:k.object({page:k.number(),totalPages:k.number(),offset:k.number(),limit:k.number(),regiments:k.array(kp)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:k.object({errors:k.record(k.string(),k.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:k.object({message:k.string()})}}}}},Mf={method:"get",path:"/regiment/{id}",tags:["Regiments"],summary:"Find regiment by ID",request:{params:Yn},responses:{200:{description:"Regiment details retrieved successfully",summary:"Regiment Retrieved",content:{"application/json":{schema:kp}}},400:{description:"Invalid regiment ID format",summary:"Validation Error",content:{"application/json":{schema:k.object({errors:k.record(k.string(),k.string())})}}},404:{description:"Regiment not found with the provided ID",summary:"Regiment Not Found",content:{"application/json":{schema:k.object({message:k.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:k.object({message:k.string()})}}}}},Tf={method:"get",path:"/regiment/status/{status}",tags:["Regiments"],summary:"Find regiments by status",request:{params:qp},responses:{200:{description:"Regiments retrieved successfully by status",summary:"Regiments Retrieved by Status",content:{"application/json":{schema:k.array(kp)}}},400:{description:"Invalid status parameter provided",summary:"Validation Error",content:{"application/json":{schema:k.object({errors:k.record(k.string(),k.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:k.object({message:k.string()})}}}}},Af={method:"put",path:"/regiment/{id}",tags:["Regiments"],summary:"Update regiment with optional document upload",security:[{bearerAuth:[]}],request:{params:Yn,body:{content:{"multipart/form-data":{schema:Op.omit({id:!0})}}}},responses:{200:{description:"Regiment updated successfully",summary:"Regiment Updated"},400:{description:"Invalid input data, regiment ID format, or invalid document format/size",summary:"Validation Error",content:{"application/json":{schema:k.object({errors:k.record(k.string(),k.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:k.object({message:k.string()})}}},404:{description:"Regiment not found with the provided ID",summary:"Regiment Not Found",content:{"application/json":{schema:k.object({message:k.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:k.object({message:k.string()})}}}}},Pf={method:"delete",path:"/regiment/{id}",tags:["Regiments"],summary:"Delete regiment",security:[{bearerAuth:[]}],request:{params:Dp},responses:{200:{description:"Regiment deleted successfully",summary:"Regiment Deleted"},400:{description:"Invalid regiment ID format",summary:"Validation Error",content:{"application/json":{schema:k.object({errors:k.record(k.string(),k.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:k.object({message:k.string()})}}},404:{description:"Regiment not found with the provided ID",summary:"Regiment Not Found",content:{"application/json":{schema:k.object({message:k.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:k.object({message:k.string()})}}}}};import te from"zod";import{extendZodWithOpenApi as $v}from"@asteasolutions/zod-to-openapi";import co from"zod";var Ff=5,Df=1024,Qv=Df*Df,eE=Ff*Qv;$v(co);var Gp=co.object({caption:co.string().optional(),image:co.any().refine(o=>o==null||typeof o!="object"||typeof o.size!="number"?!1:o.size<=eE,`A imagem deve ter no m\xE1ximo ${Ff}MB.`),congressId:co.uuid()}),es=class{constructor(e,r,t){this.regionalCongressGalleryRepository=e;this.regionalCongressRepository=r;this.firebaseStorageService=t}async handle(e,r){try{let{caption:t,image:i,congressId:n}=Gp.parse({...e.body,...e.params,image:e.file});if(!await this.regionalCongressRepository.findById(n))throw new p("O congresso n\xE3o existe.");let m=await this.regionalCongressGalleryRepository.create({caption:t,congressId:n,imageUrl:""}),c=await this.firebaseStorageService.uploadFile({file:i,id:m.id,folder:j.GALLERY});return await this.regionalCongressGalleryRepository.update({id:m.id,imageUrl:c}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as tE}from"@asteasolutions/zod-to-openapi";import Np from"zod";tE(Np);var rs=Np.object({id:Np.uuid("ID inv\xE1lido")}),ts=class{constructor(e){this.regionalCongressGalleryRepository=e}async handle(e,r){try{let{id:t}=rs.parse(e.params);if(!await this.regionalCongressGalleryRepository.findById(t))throw new p("Item de galeria n\xE3o encontrado");return await this.regionalCongressGalleryRepository.deleteById(t),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as rE}from"@asteasolutions/zod-to-openapi";import Sr from"zod";rE(Sr);var Lp=Sr.object({congressId:Sr.uuid("ID do congresso inv\xE1lido"),page:Sr.coerce.number().int().positive().default(1),limit:Sr.coerce.number().int().positive().default(10),caption:Sr.string().optional()}),os=class{constructor(e){this.regionalCongressGalleryRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=Lp.parse({...e.params,...e.query}),s=(t-1)*i,m=await this.regionalCongressGalleryRepository.findByCongressId({pagination:{offset:s,limit:i},filter:n});if(!m)throw new p("Itens de galeria n\xE3o encontrados");let c=await this.regionalCongressGalleryRepository.count({filter:n});return r.status(200).json({data:m,pagination:{page:t,limit:i,total:c,totalPages:Math.ceil(c/i)}})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as oE}from"@asteasolutions/zod-to-openapi";import po from"zod";var qf=5,Bf=1024,iE=Bf*Bf,nE=qf*iE;oE(po);var Wp=po.object({id:po.string().uuid("ID inv\xE1lido"),caption:po.string().optional(),image:po.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=nE,`A imagem deve ter no m\xE1ximo ${qf}MB.`).optional()}),is=class{constructor(e,r){this.regionalCongressGalleryRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,caption:i,image:n}=Wp.parse({...e.params,...e.body,image:e.file});if(!await this.regionalCongressGalleryRepository.findById(t))throw new p("Item de galeria n\xE3o encontrado");let m;return n&&(m=await this.firebaseStorageService.uploadFile({file:n,id:t,folder:j.GALLERY})),await this.regionalCongressGalleryRepository.update({id:t,caption:i,...m&&{imageUrl:m}}),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var sE=te.object({id:te.uuid(),imageUrl:te.string(),caption:te.string().nullable(),congressId:te.uuid()}),Uf={method:"post",path:"/regional-congress/{congressId}/gallery",tags:["Regional Congresses"],summary:"Create a new congress gallery image",security:[{bearerAuth:[]}],request:{params:te.object({congressId:te.uuid()}),body:{content:{"application/json":{schema:Gp.omit({congressId:!0})}}}},responses:{201:{description:"Congress gallery image created successfully",summary:"Congress Gallery Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:te.object({errors:te.record(te.string(),te.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:te.object({message:te.string()})}}},404:{description:"Congress not found with the provided ID",summary:"Congress Not Found",content:{"application/json":{schema:te.object({message:te.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:te.object({message:te.string()})}}}}},Of={method:"get",path:"/regional-congress/{congressId}/gallery",tags:["Regional Congresses"],summary:"Find congress gallery images by congress ID",request:{params:Lp},responses:{200:{description:"Congress gallery images retrieved successfully by congress ID",summary:"Congress Galleries Retrieved",content:{"application/json":{schema:te.array(sE)}}},400:{description:"Invalid congress ID parameter provided",summary:"Validation Error",content:{"application/json":{schema:te.object({errors:te.record(te.string(),te.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:te.object({message:te.string()})}}}}},kf={method:"put",path:"/regional-congress/gallery/{id}",tags:["Regional Congresses"],summary:"Update congress gallery image",security:[{bearerAuth:[]}],request:{params:rs,body:{content:{"application/json":{schema:Wp.omit({id:!0})}}}},responses:{200:{description:"Congress gallery image updated successfully",summary:"Congress Gallery Updated"},400:{description:"Invalid input data or gallery ID format",summary:"Validation Error",content:{"application/json":{schema:te.object({errors:te.record(te.string(),te.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:te.object({message:te.string()})}}},404:{description:"Congress gallery image not found with the provided ID",summary:"Congress Gallery Not Found",content:{"application/json":{schema:te.object({message:te.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:te.object({message:te.string()})}}}}},Gf={method:"delete",path:"/regional-congress/gallery/{id}",tags:["Regional Congresses"],summary:"Delete congress gallery image",security:[{bearerAuth:[]}],request:{params:rs},responses:{200:{description:"Congress gallery image deleted successfully",summary:"Congress Gallery Deleted"},400:{description:"Invalid gallery ID format",summary:"Validation Error",content:{"application/json":{schema:te.object({errors:te.record(te.string(),te.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:te.object({message:te.string()})}}},404:{description:"Congress gallery image not found with the provided ID",summary:"Congress Gallery Not Found",content:{"application/json":{schema:te.object({message:te.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:te.object({message:te.string()})}}}}};import re from"zod";import{extendZodWithOpenApi as aE}from"@asteasolutions/zod-to-openapi";import lo from"zod";var Lf=2,Nf=1024,mE=Nf*Nf,cE=Lf*mE;aE(lo);var _p=lo.object({name:lo.string().min(1,"Nome \xE9 obrigat\xF3rio"),logo:lo.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=cE,`A imagem deve ter no m\xE1ximo ${Lf}MB.`).optional(),congressId:lo.uuid()}),ns=class{constructor(e,r,t){this.regionalCongressPartnerRepository=e;this.regionalCongressRepository=r;this.firebaseStorageService=t}async handle(e,r){try{let{name:t,logo:i,congressId:n}=_p.parse({...e.body,...e.params,logo:e.file});if(!await this.regionalCongressRepository.findById(n))throw new p("O congresso n\xE3o existe.");let m=await this.regionalCongressPartnerRepository.create({name:t,congressId:n}),c;return i&&(c=await this.firebaseStorageService.uploadFile({file:i,id:m.id,folder:j.PARTNER}),await this.regionalCongressPartnerRepository.update({id:m.id,logoUrl:c})),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as pE}from"@asteasolutions/zod-to-openapi";import Hp from"zod";pE(Hp);var as=Hp.object({id:Hp.string().uuid("ID inv\xE1lido")}),ss=class{constructor(e){this.regionalCongressPartnerRepository=e}async handle(e,r){try{let{id:t}=as.parse(e.params);if(!await this.regionalCongressPartnerRepository.findById(t))throw new p("Parceiro n\xE3o encontrado");return await this.regionalCongressPartnerRepository.deleteById(t),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as dE}from"@asteasolutions/zod-to-openapi";import vr from"zod";dE(vr);var zp=vr.object({congressId:vr.uuid("ID do congresso inv\xE1lido"),page:vr.coerce.number().int().positive().optional(),limit:vr.coerce.number().int().positive().optional(),name:vr.string().optional()}),ms=class{constructor(e){this.regionalCongressPartnerRepository=e}async handle(e,r){try{let{congressId:t,page:i,limit:n,name:s}=zp.parse({...e.params,...e.query}),m=i!==void 0&&n!==void 0,c=m?{offset:(i-1)*n,limit:n}:void 0,d=await this.regionalCongressPartnerRepository.findByCongressId({pagination:c,filter:{congressId:t,name:s}});if(!d)throw new p("Parceiros n\xE3o encontrados");if(!m)return r.status(200).json(d);let y=await this.regionalCongressPartnerRepository.count({filter:{congressId:t,name:s}});return r.status(200).json({data:d,pagination:{page:i,limit:n,total:y,totalPages:Math.ceil(y/n)}})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as lE}from"@asteasolutions/zod-to-openapi";import uo from"zod";var _f=2,Wf=1024,uE=Wf*Wf,gE=_f*uE;lE(uo);var Vp=uo.object({id:uo.string().uuid("ID inv\xE1lido"),name:uo.string().min(1,"Nome \xE9 obrigat\xF3rio").optional(),logo:uo.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=gE,`A imagem deve ter no m\xE1ximo ${_f}MB.`).optional()}),cs=class{constructor(e,r){this.regionalCongressPartnerRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,name:i,logo:n}=Vp.parse({...e.params,...e.body,logo:e.file});if(!await this.regionalCongressPartnerRepository.findById(t))throw new p("Parceiro n\xE3o encontrado");let m;return n&&(m=await this.firebaseStorageService.uploadFile({file:n,id:t,folder:j.PARTNER})),await this.regionalCongressPartnerRepository.update({id:t,name:i,...m&&{logoUrl:m}}),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var fE=re.object({id:re.uuid(),name:re.string(),logoUrl:re.string().nullable(),congressId:re.uuid()}),Hf={method:"post",path:"/regional-congress/{congressId}/partner",tags:["Regional Congresses"],summary:"Create a new congress partner",security:[{bearerAuth:[]}],request:{params:re.object({congressId:re.uuid()}),body:{content:{"application/json":{schema:_p.omit({congressId:!0})}}}},responses:{201:{description:"Congress partner created successfully",summary:"Congress Partner Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:re.object({errors:re.record(re.string(),re.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:re.object({message:re.string()})}}},404:{description:"Congress not found with the provided ID",summary:"Congress Not Found",content:{"application/json":{schema:re.object({message:re.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:re.object({message:re.string()})}}}}},zf={method:"get",path:"/regional-congress/{congressId}/partner",tags:["Regional Congresses"],summary:"Find congress partners by congress ID",request:{params:zp},responses:{200:{description:"Congress partners retrieved successfully by congress ID",summary:"Congress Partners Retrieved",content:{"application/json":{schema:re.array(fE)}}},400:{description:"Invalid congress ID parameter provided",summary:"Validation Error",content:{"application/json":{schema:re.object({errors:re.record(re.string(),re.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:re.object({message:re.string()})}}}}},Vf={method:"put",path:"/regional-congress/partner/{id}",tags:["Regional Congresses"],summary:"Update congress partner",security:[{bearerAuth:[]}],request:{params:as,body:{content:{"application/json":{schema:Vp.omit({id:!0})}}}},responses:{200:{description:"Congress partner updated successfully",summary:"Congress Partner Updated"},400:{description:"Invalid input data or partner ID format",summary:"Validation Error",content:{"application/json":{schema:re.object({errors:re.record(re.string(),re.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:re.object({message:re.string()})}}},404:{description:"Congress partner not found with the provided ID",summary:"Congress Partner Not Found",content:{"application/json":{schema:re.object({message:re.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:re.object({message:re.string()})}}}}},Zf={method:"delete",path:"/regional-congress/partner/{id}",tags:["Regional Congresses"],summary:"Delete congress partner",security:[{bearerAuth:[]}],request:{params:as},responses:{200:{description:"Congress partner deleted successfully",summary:"Congress Partner Deleted"},400:{description:"Invalid partner ID format",summary:"Validation Error",content:{"application/json":{schema:re.object({errors:re.record(re.string(),re.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:re.object({message:re.string()})}}},404:{description:"Congress partner not found with the provided ID",summary:"Congress Partner Not Found",content:{"application/json":{schema:re.object({message:re.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:re.object({message:re.string()})}}}}};import f from"zod";import{extendZodWithOpenApi as yE}from"@asteasolutions/zod-to-openapi";import se from"zod";yE(se);var Zp=se.object({title:se.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio"),edition:se.coerce.number().int().positive("Edi\xE7\xE3o deve ser um n\xFAmero positivo"),startDate:se.coerce.date(),endDate:se.coerce.date(),description:se.string().optional(),location:se.string().optional(),congressLink:se.union([se.url("Link do congresso deve ser uma URL v\xE1lida"),se.literal("")]),noticeUrl:se.union([se.url("URL do edital deve ser uma URL v\xE1lida"),se.literal("")]),scheduleUrl:se.union([se.url("URL do cronograma deve ser uma URL v\xE1lida"),se.literal("")]),programUrl:se.union([se.url("URL da programa\xE7\xE3o deve ser uma URL v\xE1lida"),se.literal("")]),adminReportUrl:se.union([se.url("URL do relat\xF3rio administrativo deve ser uma URL v\xE1lida"),se.literal("")]),proceedingsUrl:se.union([se.url("URL dos anais deve ser uma URL v\xE1lida"),se.literal("")])}).refine(o=>o.endDate>=o.startDate,{message:"Data de t\xE9rmino deve ser posterior ou igual \xE0 data de in\xEDcio",path:["endDate"]}),ps=class{constructor(e){this.regionalCongressRepository=e}async handle(e,r){try{let t=Zp.parse(e.body);return await this.regionalCongressRepository.create(t),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as hE}from"@asteasolutions/zod-to-openapi";import Kp from"zod";hE(Kp);var Jp=Kp.object({id:Kp.string().uuid("ID inv\xE1lido")}),ds=class{constructor(e){this.regionalCongressRepository=e}async handle(e,r){try{let{id:t}=Jp.parse(e.params);if(!await this.regionalCongressRepository.findById(t))throw new p("Congresso regional n\xE3o encontrado");return await this.regionalCongressRepository.deleteById(t),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as RE}from"@asteasolutions/zod-to-openapi";import Yp from"zod";RE(Yp);var Xp=Yp.object({edition:Yp.coerce.number().int().positive("Edi\xE7\xE3o deve ser um n\xFAmero positivo")}),ls=class{constructor(e){this.regionalCongressRepository=e}async handle(e,r){try{let{edition:t}=Xp.parse(e.params),i=await this.regionalCongressRepository.findByEdition(t);if(!i||i.length===0)throw new p("Congresso regional n\xE3o encontrado");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as IE}from"@asteasolutions/zod-to-openapi";import $p from"zod";IE($p);var gs=$p.object({id:$p.string().uuid("ID inv\xE1lido")}),us=class{constructor(e){this.regionalCongressRepository=e}async handle(e,r){try{let{id:t}=gs.parse(e.params),i=await this.regionalCongressRepository.findById(t);if(!i)throw new p("Congresso regional n\xE3o encontrado");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as bE}from"@asteasolutions/zod-to-openapi";import xt from"zod";bE(xt);var Qp=xt.object({page:xt.coerce.number().int().positive().default(1),limit:xt.coerce.number().int().positive().default(10),title:xt.string().optional(),edition:xt.coerce.number().int().positive().optional(),location:xt.string().optional(),orderBy:xt.enum(["asc","desc"]).optional().default("desc")}),fs=class{constructor(e){this.regionalCongressRepository=e}async handle(e,r){try{let{page:t,limit:i,orderBy:n,...s}=Qp.parse(e.query),m=(t-1)*i,c=await this.regionalCongressRepository.find({pagination:{offset:m,limit:i},filter:{...s,orderBy:n}});if(!c)throw new p("Congressos regionais n\xE3o encontrados");let d=await this.regionalCongressRepository.count({filter:s});return r.status(200).json({data:c,pagination:{page:t,limit:i,total:d,totalPages:Math.ceil(d/i)}})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as CE}from"@asteasolutions/zod-to-openapi";import ne from"zod";CE(ne);var ed=ne.object({id:ne.string().uuid("ID inv\xE1lido"),title:ne.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio").optional(),edition:ne.coerce.number().int().positive("Edi\xE7\xE3o deve ser um n\xFAmero positivo").optional(),startDate:ne.coerce.date().optional(),endDate:ne.coerce.date().optional(),description:ne.string().optional(),location:ne.string().optional(),congressLink:ne.union([ne.url("Link do congresso deve ser uma URL v\xE1lida"),ne.literal("")]),noticeUrl:ne.union([ne.url("URL do edital deve ser uma URL v\xE1lida"),ne.literal("")]),scheduleUrl:ne.union([ne.url("URL do cronograma deve ser uma URL v\xE1lida"),ne.literal("")]),programUrl:ne.union([ne.url("URL da programa\xE7\xE3o deve ser uma URL v\xE1lida"),ne.literal("")]),adminReportUrl:ne.union([ne.url("URL do relat\xF3rio administrativo deve ser uma URL v\xE1lida"),ne.literal("")]),proceedingsUrl:ne.union([ne.url("URL dos anais deve ser uma URL v\xE1lida"),ne.literal("")])}).refine(o=>o.startDate&&o.endDate?o.endDate>=o.startDate:!0,{message:"Data de t\xE9rmino deve ser posterior ou igual \xE0 data de in\xEDcio",path:["endDate"]}),ys=class{constructor(e){this.regionalCongressRepository=e}async handle(e,r){try{let{id:t}=ne.object({id:ne.string().uuid()}).parse(e.params);if(!await this.regionalCongressRepository.findById(t))throw new p("Congresso regional n\xE3o encontrado");let n=ed.parse({id:t,...e.body});return await this.regionalCongressRepository.update(n),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var wE=9,SE=f.object({image:f.any().openapi({type:"string",format:"binary"}),caption:f.string().optional()}),vE=f.object({image:f.any().openapi({type:"string",format:"binary"}).optional(),caption:f.string().optional()}),EE=f.object({id:f.uuid(),name:f.string(),logoUrl:f.string().nullable(),congressId:f.uuid()}),td=f.object({id:f.uuid(),imageUrl:f.string(),caption:f.string().nullable(),congressId:f.uuid()}),rd=f.object({id:f.uuid(),title:f.string(),edition:f.number(),startDate:f.date(),endDate:f.date(),description:f.string().nullable(),location:f.string().nullable(),congressLink:f.string().nullable(),noticeUrl:f.string().nullable(),scheduleUrl:f.string().nullable(),programUrl:f.string().nullable(),adminReportUrl:f.string().nullable(),proceedingsUrl:f.string().nullable(),partners:f.array(EE),galleries:f.array(td),createdAt:f.date(),updatedAt:f.date()}),Kf={method:"post",path:"/regional-congress",tags:["Regional Congresses"],summary:"Create a new regional congress",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:Zp}}}},responses:{201:{description:"Regional congress created successfully",summary:"Regional Congress Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:f.object({errors:f.record(f.string(),f.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:f.object({message:f.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:f.object({message:f.string()})}}}}},Jf={method:"get",path:"/regional-congress",tags:["Regional Congresses"],summary:"List all regional congresses with pagination and filters",request:{query:Qp},responses:{200:{description:"List of regional congresses retrieved successfully with pagination",summary:"Regional Congresses Retrieved",content:{"application/json":{schema:f.object({page:f.number(),totalPages:f.number(),offset:f.number(),limit:f.number(),congresses:f.array(rd)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:f.object({errors:f.record(f.string(),f.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:f.object({message:f.string()})}}}}},Yf={method:"get",path:"/regional-congress/{id}",tags:["Regional Congresses"],summary:"Find regional congress by ID",request:{params:gs},responses:{200:{description:"Regional congress details retrieved successfully",summary:"Regional Congress Retrieved",content:{"application/json":{schema:rd}}},400:{description:"Invalid regional congress ID format",summary:"Validation Error",content:{"application/json":{schema:f.object({errors:f.record(f.string(),f.string())})}}},404:{description:"Regional congress not found with the provided ID",summary:"Regional Congress Not Found",content:{"application/json":{schema:f.object({message:f.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:f.object({message:f.string()})}}}}},Xf={method:"get",path:"/regional-congress/edition/{edition}",tags:["Regional Congresses"],summary:"Find regional congresses by edition",request:{params:Xp},responses:{200:{description:"Regional congresses retrieved successfully by edition",summary:"Regional Congresses Retrieved by Edition",content:{"application/json":{schema:f.array(rd)}}},400:{description:"Invalid edition parameter provided",summary:"Validation Error",content:{"application/json":{schema:f.object({errors:f.record(f.string(),f.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:f.object({message:f.string()})}}}}},$f={method:"put",path:"/regional-congress/{id}",tags:["Regional Congresses"],summary:"Update regional congress",security:[{bearerAuth:[]}],request:{params:gs,body:{content:{"application/json":{schema:ed.omit({id:!0})}}}},responses:{200:{description:"Regional congress updated successfully",summary:"Regional Congress Updated"},400:{description:"Invalid input data or regional congress ID format",summary:"Validation Error",content:{"application/json":{schema:f.object({errors:f.record(f.string(),f.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:f.object({message:f.string()})}}},404:{description:"Regional congress not found with the provided ID",summary:"Regional Congress Not Found",content:{"application/json":{schema:f.object({message:f.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:f.object({message:f.string()})}}}}},Qf={method:"delete",path:"/regional-congress/{id}",tags:["Regional Congresses"],summary:"Delete regional congress",security:[{bearerAuth:[]}],request:{params:Jp},responses:{200:{description:"Regional congress deleted successfully",summary:"Regional Congress Deleted"},400:{description:"Invalid regional congress ID format",summary:"Validation Error",content:{"application/json":{schema:f.object({errors:f.record(f.string(),f.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:f.object({message:f.string()})}}},404:{description:"Regional congress not found with the provided ID",summary:"Regional Congress Not Found",content:{"application/json":{schema:f.object({message:f.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:f.object({message:f.string()})}}}}},y1={method:"post",path:"/regional-congress/{congressId}/gallery",tags:["Regional Congress Gallery"],summary:"Create a new gallery image for a congress",security:[{bearerAuth:[]}],request:{params:f.object({congressId:f.uuid()}),body:{content:{"multipart/form-data":{schema:SE}}}},responses:{201:{description:"Gallery image created successfully",summary:"Gallery Image Created"},400:{description:"Invalid input data, missing required fields, or invalid image format/size",summary:"Validation Error",content:{"application/json":{schema:f.object({errors:f.record(f.string(),f.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:f.object({message:f.string()})}}},404:{description:"Congress not found with the provided ID",summary:"Congress Not Found",content:{"application/json":{schema:f.object({message:f.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:f.object({message:f.string()})}}}}},h1={method:"get",path:"/regional-congress/{congressId}/gallery",tags:["Regional Congress Gallery"],summary:"List all gallery images for a congress with pagination",request:{params:f.object({congressId:f.uuid()}),query:f.object({page:f.coerce.number().min(1).default(1),limit:f.coerce.number().min(1).default(wE),caption:f.string().optional()})},responses:{200:{description:"Gallery images retrieved successfully with pagination",summary:"Gallery Images Retrieved",content:{"application/json":{schema:f.object({page:f.number(),totalPages:f.number(),offset:f.number(),limit:f.number(),galleries:f.array(td)})}}},400:{description:"Invalid congress ID format or query parameters",summary:"Validation Error",content:{"application/json":{schema:f.object({errors:f.record(f.string(),f.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:f.object({message:f.string()})}}}}},R1={method:"get",path:"/regional-congress/gallery/{id}",tags:["Regional Congress Gallery"],summary:"Find a gallery image by ID",request:{params:f.object({id:f.uuid()})},responses:{200:{description:"Gallery image retrieved successfully",summary:"Gallery Image Retrieved",content:{"application/json":{schema:td}}},400:{description:"Invalid gallery image ID format",summary:"Validation Error",content:{"application/json":{schema:f.object({errors:f.record(f.string(),f.string())})}}},404:{description:"Gallery image not found with the provided ID",summary:"Gallery Image Not Found",content:{"application/json":{schema:f.object({message:f.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:f.object({message:f.string()})}}}}},I1={method:"put",path:"/regional-congress/gallery/{id}",tags:["Regional Congress Gallery"],summary:"Update a gallery image with optional image upload",security:[{bearerAuth:[]}],request:{params:f.object({id:f.uuid()}),body:{content:{"multipart/form-data":{schema:vE}}}},responses:{200:{description:"Gallery image updated successfully",summary:"Gallery Image Updated"},400:{description:"Invalid input data, gallery ID format, or invalid image format/size",summary:"Validation Error",content:{"application/json":{schema:f.object({errors:f.record(f.string(),f.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:f.object({message:f.string()})}}},404:{description:"Gallery image not found with the provided ID",summary:"Gallery Image Not Found",content:{"application/json":{schema:f.object({message:f.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:f.object({message:f.string()})}}}}},b1={method:"delete",path:"/regional-congress/gallery/{id}",tags:["Regional Congress Gallery"],summary:"Delete a gallery image",security:[{bearerAuth:[]}],request:{params:f.object({id:f.uuid()})},responses:{200:{description:"Gallery image deleted successfully",summary:"Gallery Image Deleted"},400:{description:"Invalid gallery ID format",summary:"Validation Error",content:{"application/json":{schema:f.object({errors:f.record(f.string(),f.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:f.object({message:f.string()})}}},404:{description:"Gallery image not found with the provided ID",summary:"Gallery Image Not Found",content:{"application/json":{schema:f.object({message:f.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:f.object({message:f.string()})}}}}};import h from"zod";import{extendZodWithOpenApi as jE}from"@asteasolutions/zod-to-openapi";import od from"zod";jE(od);var id=od.object({id:od.uuid()}),hs=class{constructor(e,r){this.researchGroupRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=id.parse({id:e.params.id}),i=await this.researchGroupRepository.findById(t);if(!i)throw new p("O grupo de pesquisa n\xE3o existe.");return i.logoUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.logoUrl}),await this.researchGroupRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as xE}from"@asteasolutions/zod-to-openapi";import nd from"zod";xE(nd);var sd=nd.object({id:nd.uuid()}),Rs=class{constructor(e){this.researchGroupRepository=e}async handle(e,r){try{let{id:t}=sd.parse({id:e.params.id}),i=await this.researchGroupRepository.findById(t);if(!i)throw new p("Grupo de pesquisa n\xE3o encontrado.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as ME}from"@asteasolutions/zod-to-openapi";import ot from"zod";var TE=1,AE=6;ME(ot);var ad=ot.object({page:ot.coerce.number().min(1).default(TE),limit:ot.coerce.number().min(1).default(AE),name:ot.string().optional(),acronym:ot.string().optional(),description:ot.string().optional(),leader:ot.string().optional(),orderBy:ot.enum(["asc","desc"]).default("desc")}),Is=class{constructor(e){this.researchGroupRepository=e}async handle(e,r){try{let{limit:t,page:i,...n}=ad.parse(e.query),s=i*t-t,[m,c]=await Promise.all([this.researchGroupRepository.find({pagination:{offset:s,limit:t},filter:n}),this.researchGroupRepository.count({filter:n})]),d=Math.max(Math.ceil(c/t),1);return r.status(200).json({page:i,totalPages:d,offset:s,limit:t,researchGroups:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as PE}from"@asteasolutions/zod-to-openapi";import Se from"zod";var ty=5,ey=1024,DE=ey*ey,FE=ty*DE;PE(Se);var md=Se.object({id:Se.uuid(),name:Se.string().min(1,"Nome \xE9 obrigat\xF3rio.").optional(),acronym:Se.string().optional(),description:Se.string().optional(),url:Se.url("URL deve ser v\xE1lida.").optional(),foundedAt:Se.coerce.date().optional(),scope:Se.string().optional(),email:Se.email("E-mail deve ser v\xE1lido.").optional(),leaderId:Se.uuid("L\xEDder \xE9 obrigat\xF3rio.").optional(),deputyLeaderId:Se.uuid("Vice-l\xEDder \xE9 obrigat\xF3rio.").optional(),logo:Se.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=FE,`O logo deve ter no m\xE1ximo ${ty}MB.`).optional()}),bs=class{constructor(e,r){this.researchGroupRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,logo:i,name:n,acronym:s,description:m,url:c,foundedAt:d,scope:y,email:S,leaderId:A,deputyLeaderId:$}=md.parse({id:e.params.id,...e.body,logo:e.file}),oe=await this.researchGroupRepository.findById(t);if(!oe)throw new p("O grupo de pesquisa n\xE3o existe.");let ae=oe.logoUrl;return i&&(ae=await this.firebaseStorageService.uploadFile({file:i,id:t,folder:j.RESEARCH_GROUP_LOGO})),await this.researchGroupRepository.update({id:t,name:n,acronym:s,description:m,url:c,foundedAt:d,scope:y,email:S,leaderId:A,deputyLeaderId:$,logoUrl:ae}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var ry={method:"post",path:"/research-groups",tags:["Research Groups"],summary:"Create research group",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:h.object({name:h.string().min(1).openapi({description:"Nome do grupo de pesquisa"}),acronym:h.string().optional().openapi({description:"Sigla do grupo"}),description:h.string().optional().openapi({description:"Descri\xE7\xE3o do grupo"}),url:h.string().url().optional().openapi({description:"URL do grupo"}),foundedAt:h.string().openapi({description:"Data de funda\xE7\xE3o (ISO 8601)",example:"2024-01-01T00:00:00Z"}),scope:h.string().optional().openapi({description:"Escopo do grupo"}),email:h.string().email().optional().openapi({description:"E-mail de contato"}),leaderId:h.string().uuid().openapi({description:"ID do l\xEDder (UUID)"}),deputyLeaderId:h.string().uuid().openapi({description:"ID do vice-l\xEDder (UUID)"}),logo:h.string().optional().openapi({description:"Logo do grupo (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{201:{description:"Research group created successfully",summary:"Research Group Created"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:h.object({errors:h.record(h.string(),h.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:h.object({message:h.string()})}}}}},oy={method:"get",path:"/research-groups",tags:["Research Groups"],summary:"List research groups",security:[{bearerAuth:[]}],request:{query:ad},responses:{200:{description:"Paginated list of research groups with leader information retrieved successfully",summary:"Research Groups Retrieved",content:{"application/json":{schema:h.object({page:h.number(),totalPages:h.number(),offset:h.number(),limit:h.number(),researchGroups:h.array(h.object({id:h.string(),name:h.string(),acronym:h.string().nullable(),description:h.string().nullable(),url:h.string().nullable(),logoUrl:h.string().nullable(),foundedAt:h.date(),scope:h.string().nullable(),email:h.string().nullable(),leaderId:h.string(),deputyLeaderId:h.string(),createdAt:h.date(),updatedAt:h.date(),leader:h.object({id:h.uuid(),name:h.string(),emailAddress:h.email(),avatarUrl:h.string().nullable(),createdAt:h.date(),updatedAt:h.date()}),deputyLeader:h.object({id:h.uuid(),name:h.string(),emailAddress:h.email(),avatarUrl:h.string().nullable(),createdAt:h.date(),updatedAt:h.date()})}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:h.object({errors:h.record(h.string(),h.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:h.object({message:h.string()})}}}}},iy={method:"get",path:"/research-groups/{id}",tags:["Research Groups"],summary:"Find research group by ID",security:[{bearerAuth:[]}],request:{params:sd},responses:{200:{description:"Research group details retrieved successfully",summary:"Research Group Retrieved",content:{"application/json":{schema:h.object({id:h.string(),name:h.string(),acronym:h.string().nullable(),description:h.string().nullable(),url:h.string().nullable(),logoUrl:h.string().nullable(),foundedAt:h.date(),scope:h.string().nullable(),email:h.string().nullable(),leaderId:h.string(),deputyLeaderId:h.string(),createdAt:h.date(),updatedAt:h.date(),leader:h.object({id:h.uuid(),name:h.string(),emailAddress:h.email(),avatarUrl:h.string().nullable(),createdAt:h.date(),updatedAt:h.date()}),deputyLeader:h.object({id:h.uuid(),name:h.string(),emailAddress:h.email(),avatarUrl:h.string().nullable(),createdAt:h.date(),updatedAt:h.date()})}).nullable()}}},400:{description:"Invalid research group ID format",summary:"Validation Error",content:{"application/json":{schema:h.object({errors:h.record(h.string(),h.string())})}}},404:{description:"Research group not found with the provided ID",summary:"Research Group Not Found",content:{"application/json":{schema:h.object({message:h.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:h.object({message:h.string()})}}}}},ny={method:"put",path:"/research-groups/{id}",tags:["Research Groups"],summary:"Update research group",security:[{bearerAuth:[]}],request:{params:md.pick({id:!0}),body:{content:{"multipart/form-data":{schema:h.object({name:h.string().min(1).optional().openapi({description:"Nome do grupo de pesquisa"}),acronym:h.string().optional().openapi({description:"Sigla do grupo"}),description:h.string().optional().openapi({description:"Descri\xE7\xE3o do grupo"}),url:h.string().url().optional().openapi({description:"URL do grupo"}),foundedAt:h.string().optional().openapi({description:"Data de funda\xE7\xE3o (ISO 8601)",example:"2024-01-01T00:00:00Z"}),scope:h.string().optional().openapi({description:"Escopo do grupo"}),email:h.string().email().optional().openapi({description:"E-mail de contato"}),leaderId:h.string().uuid().optional().openapi({description:"ID do l\xEDder (UUID)"}),deputyLeaderId:h.string().uuid().optional().openapi({description:"ID do vice-l\xEDder (UUID)"}),logo:h.string().optional().openapi({description:"Logo do grupo (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{200:{description:"Research group updated successfully",summary:"Research Group Updated"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:h.object({errors:h.record(h.string(),h.string())})}}},404:{description:"Research group not found with the provided ID",summary:"Research Group Not Found",content:{"application/json":{schema:h.object({message:h.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:h.object({message:h.string()})}}}}},sy={method:"delete",path:"/research-groups/{id}",tags:["Research Groups"],summary:"Delete research group",security:[{bearerAuth:[]}],request:{params:id},responses:{200:{description:"Research group deleted successfully",summary:"Research Group Deleted"},400:{description:"Invalid research group ID format",summary:"Validation Error",content:{"application/json":{schema:h.object({errors:h.record(h.string(),h.string())})}}},404:{description:"Research group not found with the provided ID",summary:"Research Group Not Found",content:{"application/json":{schema:h.object({message:h.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:h.object({message:h.string()})}}}}};import{$Enums as yd}from"@prisma/client";import C from"zod";import{extendZodWithOpenApi as BE}from"@asteasolutions/zod-to-openapi";import{Degree as qE,Seniority as UE}from"@prisma/client";import Pe from"zod";BE(Pe);var cd=Pe.object({registrationNumber:Pe.string(),mainEtps:Pe.string().optional(),formations:Pe.string().optional(),degrees:Pe.array(Pe.enum(qE)),occupations:Pe.string(),seniority:Pe.enum(UE),institutions:Pe.string(),biography:Pe.string().optional(),userId:Pe.string()}),Cs=class{constructor(e){this.researcherRepository=e}async handle(e,r){try{let{registrationNumber:t,mainEtps:i,formations:n,degrees:s,occupations:m,seniority:c,institutions:d,biography:y,userId:S}=cd.parse(e.body);if(await this.researcherRepository.findByRegistrationNumber(t))throw new pe("J\xE1 existe um pesquisador cadastrado com este n\xFAmero de registro.");if(await this.researcherRepository.findByUserId(S))throw new pe("Usu\xE1rio j\xE1 possui um perfil de pesquisador.");return await this.researcherRepository.create({registrationNumber:t,mainEtps:i,formations:n,degrees:s,occupations:m,seniority:c,institutions:d,biography:y,userId:S}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as OE}from"@asteasolutions/zod-to-openapi";import pd from"zod";OE(pd);var dd=pd.object({id:pd.uuid()}),ws=class{constructor(e){this.researcherRepository=e}async handle(e,r){try{let{id:t}=dd.parse({id:e.params.id});if(!await this.researcherRepository.findById(t))throw new p("O pesquisador n\xE3o existe.");return await this.researcherRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as kE}from"@asteasolutions/zod-to-openapi";import ld from"zod";kE(ld);var vs=ld.object({id:ld.uuid()}),Ss=class{constructor(e){this.researcherRepository=e}async handle(e,r){try{let{id:t}=vs.parse({id:e.params.id}),i=await this.researcherRepository.findById(t);if(!i)throw new p("O pesquisador n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as GE}from"@asteasolutions/zod-to-openapi";import ud from"zod";GE(ud);var gd=ud.object({userId:ud.uuid()}),Es=class{constructor(e){this.researcherRepository=e}async handle(e,r){try{let{userId:t}=gd.parse({userId:e.params.userId}),i=await this.researcherRepository.findByUserId(t);if(!i)throw new p("O pesquisador n\xE3o existe para este usu\xE1rio.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as NE}from"@asteasolutions/zod-to-openapi";import{Degree as LE,Seniority as WE}from"@prisma/client";import De from"zod";NE(De);var fd=De.object({id:De.uuid(),registrationNumber:De.string().optional(),mainEtps:De.string().optional(),formations:De.string().optional(),degrees:De.array(De.enum(LE)).optional(),occupations:De.string().optional(),seniority:De.enum(WE).optional(),institutions:De.string().optional(),biography:De.string().optional()}),js=class{constructor(e){this.researcherRepository=e}async handle(e,r){try{let{id:t,registrationNumber:i,mainEtps:n,formations:s,degrees:m,occupations:c,seniority:d,institutions:y,biography:S}=fd.parse({id:e.params.id,...e.body}),A=await this.researcherRepository.findById(t);if(!A)throw new p("O pesquisador n\xE3o existe.");if(i&&i!==A.registrationNumber){let $=await this.researcherRepository.findByRegistrationNumber(i);if($&&$.id!==t)throw new pe("J\xE1 existe um pesquisador com este n\xFAmero de registro.")}return await this.researcherRepository.update({id:t,registrationNumber:i,mainEtps:n,formations:s,degrees:m,occupations:c,seniority:d,institutions:y,biography:S}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var _E=1,HE=9,hd=C.object({id:C.uuid(),registrationNumber:C.string(),mainEtps:C.string().nullable(),formations:C.string().nullable(),degrees:C.array(C.enum(yd.Degree)),occupations:C.string(),seniority:C.enum(yd.Seniority),institutions:C.string(),biography:C.string().nullable(),createdAt:C.date(),updatedAt:C.date(),userId:C.uuid(),user:C.object({id:C.uuid(),name:C.string(),emailAddress:C.string(),avatarUrl:C.string().nullable(),orcid:C.string().nullable(),phone:C.string().nullable(),lattesUrl:C.string().nullable(),role:C.enum(yd.UserRole)})}),ay={method:"post",path:"/researcher",tags:["Researchers"],summary:"Create a new researcher profile",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:cd}}}},responses:{201:{description:"Researcher profile created successfully",summary:"Researcher Created",content:{"application/json":{schema:C.object({message:C.string()})}}},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:C.object({errors:C.record(C.string(),C.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:C.object({message:C.string()})}}},409:{description:"Researcher with this registration number already exists or user already has a researcher profile",summary:"Conflict",content:{"application/json":{schema:C.object({message:C.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:C.object({message:C.string()})}}}}},my={method:"get",path:"/researcher",tags:["Researchers"],summary:"List all researchers with pagination and filters",request:{query:C.object({page:C.coerce.number().min(1).default(_E).optional(),limit:C.coerce.number().min(1).default(HE).optional(),userId:C.string().optional(),registrationNumber:C.string().optional(),name:C.string().optional(),emailAddress:C.string().optional(),mainEtps:C.string().optional(),formations:C.string().optional(),occupations:C.string().optional(),institutions:C.string().optional(),biography:C.string().optional(),orderBy:C.enum(["asc","desc"]).optional()})},responses:{200:{description:"List of researchers retrieved successfully with pagination",summary:"Researchers Retrieved",content:{"application/json":{schema:C.object({page:C.number(),totalPages:C.number(),offset:C.number(),limit:C.number(),researchers:C.array(hd)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:C.object({message:C.string()})}}}}},cy={method:"get",path:"/researcher/{id}",tags:["Researchers"],summary:"Find researcher by ID",request:{params:vs},responses:{200:{description:"Researcher details retrieved successfully",summary:"Researcher Retrieved",content:{"application/json":{schema:hd}}},400:{description:"Invalid researcher ID format",summary:"Validation Error",content:{"application/json":{schema:C.object({errors:C.record(C.string(),C.string())})}}},404:{description:"Researcher not found with the provided ID",summary:"Researcher Not Found",content:{"application/json":{schema:C.object({message:C.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:C.object({message:C.string()})}}}}},py={method:"get",path:"/researcher/user/{userId}",tags:["Researchers"],summary:"Find researcher by user ID",request:{params:gd},responses:{200:{description:"Researcher details retrieved successfully",summary:"Researcher Retrieved",content:{"application/json":{schema:hd}}},400:{description:"Invalid user ID format",summary:"Validation Error",content:{"application/json":{schema:C.object({errors:C.record(C.string(),C.string())})}}},404:{description:"Researcher not found for this user",summary:"Researcher Not Found",content:{"application/json":{schema:C.object({message:C.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:C.object({message:C.string()})}}}}},dy={method:"put",path:"/researcher/{id}",tags:["Researchers"],summary:"Update researcher profile",security:[{bearerAuth:[]}],request:{params:vs,body:{content:{"application/json":{schema:fd.omit({id:!0})}}}},responses:{200:{description:"Researcher profile updated successfully",summary:"Researcher Updated",content:{"application/json":{schema:C.object({message:C.string()})}}},400:{description:"Invalid input data or researcher ID format",summary:"Validation Error",content:{"application/json":{schema:C.object({errors:C.record(C.string(),C.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:C.object({message:C.string()})}}},404:{description:"Researcher not found with the provided ID",summary:"Researcher Not Found",content:{"application/json":{schema:C.object({message:C.string()})}}},409:{description:"Researcher with this registration number already exists",summary:"Conflict",content:{"application/json":{schema:C.object({message:C.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:C.object({message:C.string()})}}}}},ly={method:"delete",path:"/researcher/{id}",tags:["Researchers"],summary:"Delete researcher profile",security:[{bearerAuth:[]}],request:{params:dd},responses:{200:{description:"Researcher profile deleted successfully",summary:"Researcher Deleted"},400:{description:"Invalid researcher ID format",summary:"Validation Error",content:{"application/json":{schema:C.object({errors:C.record(C.string(),C.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:C.object({message:C.string()})}}},404:{description:"Researcher not found with the provided ID",summary:"Researcher Not Found",content:{"application/json":{schema:C.object({message:C.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:C.object({message:C.string()})}}}}};import R from"zod";import{extendZodWithOpenApi as zE}from"@asteasolutions/zod-to-openapi";import Rd from"zod";zE(Rd);var Id=Rd.object({id:Rd.uuid()}),xs=class{constructor(e){this.scientificArticlesRepository=e}async handle(e,r){try{let{id:t}=Id.parse({id:e.params.id});if(!await this.scientificArticlesRepository.findById(t))throw new p("O artigo cient\xEDfico n\xE3o existe.");return await this.scientificArticlesRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as VE}from"@asteasolutions/zod-to-openapi";import bd from"zod";VE(bd);var Cd=bd.object({id:bd.uuid()}),Ms=class{constructor(e){this.scientificArticlesRepository=e}async handle(e,r){try{let{id:t}=Cd.parse({id:e.params.id}),i=await this.scientificArticlesRepository.findById(t);if(!i)throw new p("Artigo cient\xEDfico n\xE3o encontrado.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as ZE}from"@asteasolutions/zod-to-openapi";import Mt from"zod";var KE=1,JE=6;ZE(Mt);var wd=Mt.object({page:Mt.coerce.number().min(1).default(KE),limit:Mt.coerce.number().min(1).default(JE),title:Mt.string().optional(),author:Mt.string().optional(),journal:Mt.string().optional(),orderBy:Mt.enum(["asc","desc"]).default("desc")}),Ts=class{constructor(e){this.scientificArticlesRepository=e}async handle(e,r){try{let{limit:t,page:i,...n}=wd.parse(e.query),s=i*t-t,[m,c]=await Promise.all([this.scientificArticlesRepository.find({pagination:{offset:s,limit:t},filter:n}),this.scientificArticlesRepository.count({filter:n})]),d=Math.max(Math.ceil(c/t),1);return r.status(200).json({page:i,totalPages:d,offset:s,limit:t,scientificArticles:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as YE}from"@asteasolutions/zod-to-openapi";import de from"zod";YE(de);var Sd=de.object({id:de.uuid(),title:de.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio.").optional(),author:de.string().min(1,"Autor \xE9 obrigat\xF3rio.").optional(),journal:de.string().optional(),volume:de.string().optional(),edition:de.string().optional(),pageStart:de.coerce.number().optional(),pageEnd:de.coerce.number().optional(),startDate:de.coerce.date().optional(),endDate:de.coerce.date().optional(),city:de.string().optional(),state:de.string().optional(),country:de.string().optional(),publisher:de.string().optional(),description:de.string().optional(),year:de.coerce.number().optional(),accessUrl:de.url("URL de acesso deve ser v\xE1lida").optional()}),As=class{constructor(e){this.scientificArticlesRepository=e}async handle(e,r){try{let{id:t,title:i,author:n,journal:s,volume:m,edition:c,pageStart:d,pageEnd:y,startDate:S,endDate:A,city:$,state:oe,country:ae,publisher:ye,description:eo,year:mm,accessUrl:Eb}=Sd.parse({id:e.params.id,...e.body});if(!await this.scientificArticlesRepository.findById(t))throw new p("O artigo cient\xEDfico n\xE3o existe.");return await this.scientificArticlesRepository.update({id:t,title:i,author:n,journal:s,volume:m,edition:c,pageStart:d,pageEnd:y,startDate:S,endDate:A,city:$,state:oe,country:ae,publisher:ye,description:eo,year:mm,accessUrl:Eb}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var uy={method:"post",path:"/scientific-articles",tags:["Scientific Articles"],summary:"Create scientific article",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:R.object({title:R.string().min(1).openapi({description:"T\xEDtulo do artigo"}),author:R.string().min(1).openapi({description:"Autor do artigo"}),journal:R.string().optional().openapi({description:"Nome do peri\xF3dico/revista"}),volume:R.string().optional().openapi({description:"Volume"}),edition:R.string().optional().openapi({description:"N\xFAmero/Edi\xE7\xE3o"}),pageStart:R.number().optional().openapi({description:"P\xE1gina inicial"}),pageEnd:R.number().optional().openapi({description:"P\xE1gina final"}),startDate:R.string().openapi({description:"Data de in\xEDcio (ISO 8601)",example:"2024-01-01T10:00:00Z"}),endDate:R.string().openapi({description:"Data de t\xE9rmino (ISO 8601)",example:"2024-12-31T10:00:00Z"}),city:R.string().optional().openapi({description:"Cidade"}),state:R.string().optional().openapi({description:"Estado"}),country:R.string().optional().openapi({description:"Pa\xEDs"}),publisher:R.string().optional().openapi({description:"Editora/Institui\xE7\xE3o"}),description:R.string().optional().openapi({description:"Descri\xE7\xE3o do artigo"}),year:R.number().optional().openapi({description:"Ano"}),accessUrl:R.string().url().optional().openapi({description:"URL de acesso"})})}}}},responses:{201:{description:"Scientific article created successfully",summary:"Article Created"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:R.object({errors:R.record(R.string(),R.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:R.object({message:R.string()})}}}}},gy={method:"get",path:"/scientific-articles",tags:["Scientific Articles"],summary:"List scientific articles",security:[{bearerAuth:[]}],request:{query:wd},responses:{200:{description:"Paginated list of scientific articles retrieved successfully",summary:"Articles Retrieved",content:{"application/json":{schema:R.object({page:R.number(),totalPages:R.number(),offset:R.number(),limit:R.number(),scientificArticles:R.array(R.object({id:R.string(),title:R.string(),author:R.string(),journal:R.string().nullable(),volume:R.string().nullable(),edition:R.string().nullable(),pageStart:R.number().nullable(),pageEnd:R.number().nullable(),startDate:R.date(),endDate:R.date(),city:R.string().nullable(),state:R.string().nullable(),country:R.string().nullable(),publisher:R.string().nullable(),description:R.string().nullable(),year:R.number().nullable(),accessUrl:R.string().nullable(),createdAt:R.date(),updatedAt:R.date()}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:R.object({errors:R.record(R.string(),R.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:R.object({message:R.string()})}}}}},fy={method:"get",path:"/scientific-articles/{id}",tags:["Scientific Articles"],summary:"Find scientific article by ID",security:[{bearerAuth:[]}],request:{params:Cd},responses:{200:{description:"Scientific article details retrieved successfully",summary:"Article Retrieved",content:{"application/json":{schema:R.object({id:R.string(),title:R.string(),author:R.string(),journal:R.string().nullable(),volume:R.string().nullable(),edition:R.string().nullable(),pageStart:R.number().nullable(),pageEnd:R.number().nullable(),startDate:R.date(),endDate:R.date(),city:R.string().nullable(),state:R.string().nullable(),country:R.string().nullable(),publisher:R.string().nullable(),description:R.string().nullable(),year:R.number().nullable(),accessUrl:R.string().nullable(),createdAt:R.date(),updatedAt:R.date()}).nullable()}}},400:{description:"Invalid article ID format",summary:"Validation Error",content:{"application/json":{schema:R.object({errors:R.record(R.string(),R.string())})}}},404:{description:"Scientific article not found with the provided ID",summary:"Article Not Found",content:{"application/json":{schema:R.object({message:R.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:R.object({message:R.string()})}}}}},yy={method:"put",path:"/scientific-articles/{id}",tags:["Scientific Articles"],summary:"Update scientific article",security:[{bearerAuth:[]}],request:{params:Sd.pick({id:!0}),body:{content:{"application/json":{schema:R.object({title:R.string().min(1).optional().openapi({description:"T\xEDtulo do artigo"}),author:R.string().min(1).optional().openapi({description:"Autor do artigo"}),journal:R.string().optional().openapi({description:"Nome do peri\xF3dico/revista"}),volume:R.string().optional().openapi({description:"Volume"}),edition:R.string().optional().openapi({description:"N\xFAmero/Edi\xE7\xE3o"}),pageStart:R.number().optional().openapi({description:"P\xE1gina inicial"}),pageEnd:R.number().optional().openapi({description:"P\xE1gina final"}),startDate:R.string().optional().openapi({description:"Data de in\xEDcio (ISO 8601)",example:"2024-01-01T10:00:00Z"}),endDate:R.string().optional().openapi({description:"Data de t\xE9rmino (ISO 8601)",example:"2024-12-31T10:00:00Z"}),city:R.string().optional().openapi({description:"Cidade"}),state:R.string().optional().openapi({description:"Estado"}),country:R.string().optional().openapi({description:"Pa\xEDs"}),publisher:R.string().optional().openapi({description:"Editora/Institui\xE7\xE3o"}),description:R.string().optional().openapi({description:"Descri\xE7\xE3o do artigo"}),year:R.number().optional().openapi({description:"Ano"}),accessUrl:R.string().url().optional().openapi({description:"URL de acesso"})})}}}},responses:{200:{description:"Scientific article updated successfully",summary:"Article Updated"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:R.object({errors:R.record(R.string(),R.string())})}}},404:{description:"Scientific article not found with the provided ID",summary:"Article Not Found",content:{"application/json":{schema:R.object({message:R.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:R.object({message:R.string()})}}}}},hy={method:"delete",path:"/scientific-articles/{id}",tags:["Scientific Articles"],summary:"Delete scientific article",security:[{bearerAuth:[]}],request:{params:Id},responses:{200:{description:"Scientific article deleted successfully",summary:"Article Deleted"},400:{description:"Invalid article ID format",summary:"Validation Error",content:{"application/json":{schema:R.object({errors:R.record(R.string(),R.string())})}}},404:{description:"Scientific article not found with the provided ID",summary:"Article Not Found",content:{"application/json":{schema:R.object({message:R.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:R.object({message:R.string()})}}}}};import M from"zod";import{extendZodWithOpenApi as XE}from"@asteasolutions/zod-to-openapi";import vd from"zod";XE(vd);var Ed=vd.object({id:vd.uuid()}),Ps=class{constructor(e,r){this.scientificJournalRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=Ed.parse({id:e.params.id}),i=await this.scientificJournalRepository.findById(t);if(!i)throw new p("A revista cient\xEDfica n\xE3o existe.");return i.logoUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.logoUrl}),await this.scientificJournalRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as $E}from"@asteasolutions/zod-to-openapi";import jd from"zod";$E(jd);var xd=jd.object({id:jd.uuid()}),Ds=class{constructor(e){this.scientificJournalRepository=e}async handle(e,r){try{let{id:t}=xd.parse({id:e.params.id}),i=await this.scientificJournalRepository.findById(t);if(!i)throw new p("Revista cient\xEDfica n\xE3o encontrada.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as QE}from"@asteasolutions/zod-to-openapi";import Ze from"zod";var ej=1,tj=6;QE(Ze);var Md=Ze.object({page:Ze.coerce.number().min(1).default(ej),limit:Ze.coerce.number().min(1).default(tj),name:Ze.string().optional(),description:Ze.string().optional(),issn:Ze.string().optional(),directors:Ze.string().optional(),editorialBoard:Ze.string().optional(),orderBy:Ze.enum(["asc","desc"]).default("desc")}),Fs=class{constructor(e){this.scientificJournalRepository=e}async handle(e,r){try{let{limit:t,page:i,...n}=Md.parse(e.query),s=i*t-t,[m,c]=await Promise.all([this.scientificJournalRepository.find({pagination:{offset:s,limit:t},filter:n}),this.scientificJournalRepository.count({filter:n})]),d=Math.max(Math.ceil(c/t),1);return r.status(200).json({page:i,totalPages:d,offset:s,limit:t,scientificJournals:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as rj}from"@asteasolutions/zod-to-openapi";import Ke from"zod";var Iy=5,Ry=1024,oj=Ry*Ry,ij=Iy*oj;rj(Ke);var Td=Ke.object({id:Ke.uuid(),name:Ke.string().min(1,"Nome \xE9 obrigat\xF3rio.").optional(),issn:Ke.string().min(1,"ISSN \xE9 obrigat\xF3rio.").optional(),description:Ke.string().min(1,"Descri\xE7\xE3o \xE9 obrigat\xF3ria.").optional(),journalUrl:Ke.url("URL da revista deve ser v\xE1lida.").optional(),directors:Ke.string().optional(),editorialBoard:Ke.string().optional(),logo:Ke.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=ij,`O logo deve ter no m\xE1ximo ${Iy}MB.`).optional()}),Bs=class{constructor(e,r){this.scientificJournalRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,logo:i,name:n,issn:s,description:m,journalUrl:c,directors:d,editorialBoard:y}=Td.parse({id:e.params.id,...e.body,logo:e.file}),S=await this.scientificJournalRepository.findById(t);if(!S)throw new p("A revista cient\xEDfica n\xE3o existe.");let A=S.logoUrl;return i&&(A=await this.firebaseStorageService.uploadFile({file:i,id:t,folder:j.SCIENTIFIC_JOURNAL})),await this.scientificJournalRepository.update({id:t,name:n,issn:s,description:m,journalUrl:c,directors:d,editorialBoard:y,logoUrl:A}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var by={method:"post",path:"/scientific-journals",tags:["Scientific Journals"],summary:"Create scientific journal",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:M.object({name:M.string().min(1).openapi({description:"Nome da revista cient\xEDfica"}),issn:M.string().min(1).openapi({description:"ISSN da revista"}),description:M.string().min(1).openapi({description:"Descri\xE7\xE3o da revista"}),journalUrl:M.string().url().openapi({description:"URL da revista"}),directors:M.string().optional().openapi({description:"Diretores da revista"}),editorialBoard:M.string().optional().openapi({description:"Conselho editorial"}),logo:M.string().optional().openapi({description:"Logo da revista (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{201:{description:"Scientific journal created successfully",summary:"Journal Created"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:M.object({errors:M.record(M.string(),M.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:M.object({message:M.string()})}}}}},Cy={method:"get",path:"/scientific-journals",tags:["Scientific Journals"],summary:"List scientific journals",security:[{bearerAuth:[]}],request:{query:Md},responses:{200:{description:"Paginated list of scientific journals retrieved successfully",summary:"Journals Retrieved",content:{"application/json":{schema:M.object({page:M.number(),totalPages:M.number(),offset:M.number(),limit:M.number(),scientificJournals:M.array(M.object({id:M.string(),name:M.string(),issn:M.string(),description:M.string(),logoUrl:M.string().nullable(),journalUrl:M.string(),directors:M.string().nullable(),editorialBoard:M.string().nullable(),createdAt:M.date(),updatedAt:M.date()}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:M.object({errors:M.record(M.string(),M.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:M.object({message:M.string()})}}}}},wy={method:"get",path:"/scientific-journals/{id}",tags:["Scientific Journals"],summary:"Find scientific journal by ID",security:[{bearerAuth:[]}],request:{params:xd},responses:{200:{description:"Scientific journal details retrieved successfully",summary:"Journal Retrieved",content:{"application/json":{schema:M.object({id:M.string(),name:M.string(),issn:M.string(),description:M.string(),logoUrl:M.string().nullable(),journalUrl:M.string(),directors:M.string().nullable(),editorialBoard:M.string().nullable(),createdAt:M.date(),updatedAt:M.date()}).nullable()}}},400:{description:"Invalid journal ID format",summary:"Validation Error",content:{"application/json":{schema:M.object({errors:M.record(M.string(),M.string())})}}},404:{description:"Scientific journal not found with the provided ID",summary:"Journal Not Found",content:{"application/json":{schema:M.object({message:M.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:M.object({message:M.string()})}}}}},Sy={method:"put",path:"/scientific-journals/{id}",tags:["Scientific Journals"],summary:"Update scientific journal",security:[{bearerAuth:[]}],request:{params:Td.pick({id:!0}),body:{content:{"multipart/form-data":{schema:M.object({name:M.string().min(1).optional().openapi({description:"Nome da revista cient\xEDfica"}),issn:M.string().min(1).optional().openapi({description:"ISSN da revista"}),description:M.string().min(1).optional().openapi({description:"Descri\xE7\xE3o da revista"}),journalUrl:M.string().url().optional().openapi({description:"URL da revista"}),directors:M.string().optional().openapi({description:"Diretores da revista"}),editorialBoard:M.string().optional().openapi({description:"Conselho editorial"}),logo:M.string().optional().openapi({description:"Logo da revista (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{200:{description:"Scientific journal updated successfully",summary:"Journal Updated"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:M.object({errors:M.record(M.string(),M.string())})}}},404:{description:"Scientific journal not found with the provided ID",summary:"Journal Not Found",content:{"application/json":{schema:M.object({message:M.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:M.object({message:M.string()})}}}}},vy={method:"delete",path:"/scientific-journals/{id}",tags:["Scientific Journals"],summary:"Delete scientific journal",security:[{bearerAuth:[]}],request:{params:Ed},responses:{200:{description:"Scientific journal deleted successfully",summary:"Journal Deleted"},400:{description:"Invalid journal ID format",summary:"Validation Error",content:{"application/json":{schema:M.object({errors:M.record(M.string(),M.string())})}}},404:{description:"Scientific journal not found with the provided ID",summary:"Journal Not Found",content:{"application/json":{schema:M.object({message:M.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:M.object({message:M.string()})}}}}};import{$Enums as cj}from"@prisma/client";import _ from"zod";import{extendZodWithOpenApi as nj}from"@asteasolutions/zod-to-openapi";import Er from"zod";nj(Er);var Ad=Er.object({role:Er.string().min(1),description:Er.string().optional(),userId:Er.uuid(),order:Er.number().optional()}),qs=class{constructor(e){this.sdhcTeamMemberRepository=e}async handle(e,r){try{let{role:t,description:i,userId:n,order:s}=Ad.parse(e.body);return await this.sdhcTeamMemberRepository.create({role:t,description:i,userId:n,order:s??0}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as sj}from"@asteasolutions/zod-to-openapi";import Pd from"zod";sj(Pd);var Dd=Pd.object({id:Pd.uuid()}),Us=class{constructor(e){this.sdhcTeamMemberRepository=e}async handle(e,r){try{let{id:t}=Dd.parse({id:e.params.id});if(!await this.sdhcTeamMemberRepository.findById(t))throw new p("O membro da equipe SDHC n\xE3o existe.");return await this.sdhcTeamMemberRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as aj}from"@asteasolutions/zod-to-openapi";import Fd from"zod";aj(Fd);var ks=Fd.object({id:Fd.uuid()}),Os=class{constructor(e){this.sdhcTeamMemberRepository=e}async handle(e,r){try{let{id:t}=ks.parse({id:e.params.id}),i=await this.sdhcTeamMemberRepository.findById(t);if(!i)throw new p("O membro da equipe SDHC n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as mj}from"@asteasolutions/zod-to-openapi";import Nt from"zod";mj(Nt);var Bd=Nt.object({id:Nt.uuid(),role:Nt.string().min(1).optional(),description:Nt.string().optional(),userId:Nt.uuid().optional(),order:Nt.number().optional()}),Gs=class{constructor(e){this.sdhcTeamMemberRepository=e}async handle(e,r){try{let{id:t,role:i,description:n,userId:s,order:m}=Bd.parse({id:e.params.id,...e.body});if(!await this.sdhcTeamMemberRepository.findById(t))throw new p("O membro da equipe SDHC n\xE3o existe.");return await this.sdhcTeamMemberRepository.update({id:t,role:i,description:n,userId:s,order:m}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var pj=_.object({id:_.uuid(),name:_.string(),emailAddress:_.string(),avatarUrl:_.string().nullable(),orcid:_.string().nullable(),phone:_.string().nullable(),lattesUrl:_.string().nullable(),role:_.enum(cj.UserRole)}),Ey=_.object({id:_.uuid(),role:_.string(),description:_.string().nullable(),order:_.number(),createdAt:_.date(),updatedAt:_.date(),userId:_.uuid(),user:pj}),jy={method:"post",path:"/sdhc-team-member",tags:["SDHC Team Members"],summary:"Create a new SDHC Team Member",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:Ad}}}},responses:{201:{description:"SDHC Team Member created successfully",summary:"SDHC Team Member Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:_.object({errors:_.record(_.string(),_.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:_.object({message:_.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:_.object({message:_.string()})}}}}},xy={method:"get",path:"/sdhc-team-member",tags:["SDHC Team Members"],summary:"List all SDHC Team Members with filters",request:{query:_.object({role:_.string().optional(),orderBy:_.enum(["asc","desc"]).optional()})},responses:{200:{description:"List of SDHC Team Members retrieved successfully",summary:"SDHC Team Members Retrieved",content:{"application/json":{schema:_.object({members:_.array(Ey)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:_.object({message:_.string()})}}}}},My={method:"get",path:"/sdhc-team-member/{id}",tags:["SDHC Team Members"],summary:"Find SDHC Team Member by ID",request:{params:ks},responses:{200:{description:"SDHC Team Member details retrieved successfully",summary:"SDHC Team Member Retrieved",content:{"application/json":{schema:Ey}}},400:{description:"Invalid SDHC Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:_.object({errors:_.record(_.string(),_.string())})}}},404:{description:"SDHC Team Member not found with the provided ID",summary:"SDHC Team Member Not Found",content:{"application/json":{schema:_.object({message:_.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:_.object({message:_.string()})}}}}},Ty={method:"put",path:"/sdhc-team-member/{id}",tags:["SDHC Team Members"],summary:"Update SDHC Team Member",security:[{bearerAuth:[]}],request:{params:ks,body:{content:{"application/json":{schema:Bd.omit({id:!0})}}}},responses:{200:{description:"SDHC Team Member updated successfully",summary:"SDHC Team Member Updated"},400:{description:"Invalid input data or SDHC Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:_.object({errors:_.record(_.string(),_.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:_.object({message:_.string()})}}},404:{description:"SDHC Team Member not found with the provided ID",summary:"SDHC Team Member Not Found",content:{"application/json":{schema:_.object({message:_.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:_.object({message:_.string()})}}}}},Ay={method:"delete",path:"/sdhc-team-member/{id}",tags:["SDHC Team Members"],summary:"Delete SDHC Team Member",security:[{bearerAuth:[]}],request:{params:Dd},responses:{200:{description:"SDHC Team Member deleted successfully",summary:"SDHC Team Member Deleted"},400:{description:"Invalid SDHC Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:_.object({errors:_.record(_.string(),_.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:_.object({message:_.string()})}}},404:{description:"SDHC Team Member not found with the provided ID",summary:"SDHC Team Member Not Found",content:{"application/json":{schema:_.object({message:_.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:_.object({message:_.string()})}}}}};import{$Enums as Fy}from"@prisma/client";import X from"zod";import{extendZodWithOpenApi as dj}from"@asteasolutions/zod-to-openapi";import qd from"zod";dj(qd);var Ud=qd.object({id:qd.string()}),Ns=class{constructor(e){this.userRepository=e}async handle(e,r){try{let{id:t}=Ud.parse({id:e.params.id}),i=await this.userRepository.findById(t);if(!i)throw new p("O usu\xE1rio n\xE3o existe.");let n=e.user.id;if(i.id!==n)throw new xe("Voc\xEA n\xE3o tem permiss\xE3o para deletar o usu\xE1rio");return await this.userRepository.deleteById(i.id),r.sendStatus(204)}catch(t){if(console.log(t),t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as lj}from"@asteasolutions/zod-to-openapi";import{z as Od}from"zod";lj(Od);var kd=Od.object({id:Od.string().min(1,"id do usu\xE1rio n\xE3o fornecido.")}),Ls=class{constructor(e){this.userRepository=e}async handle(e,r){try{let{id:t}=kd.parse(e.params),i=await this.userRepository.findById(t);if(!i)throw new p("Usu\xE1rio n\xE3o encontrado");r.status(200).json(i)}catch(t){if(console.log(t),t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as uj}from"@asteasolutions/zod-to-openapi";import Lt from"zod";var Dy=2,Py=1024,gj=Py*Py,fj=Dy*gj,yj=/^\d{4}-\d{4}-\d{4}-\d{4}$/,hj=/^\(?\d{2}\)?[\s-]?\d{4,5}-?\d{4}$/;uj(Lt);var Gd=Lt.object({name:Lt.string().optional(),lattesUrl:Lt.string().optional(),orcid:Lt.string().optional().transform(o=>o===void 0?void 0:o.trim()).refine(o=>o===void 0||o===""||yj.test(o),{message:"ORCID inv\xE1lido. Deve estar no formato 0000-0000-0000-0000"}),phone:Lt.string().optional().refine(o=>o===void 0||o===""||hj.test(o),{message:"Telefone inv\xE1lido. Deve estar no formato (99) 99999-9999"}),avatarImage:Lt.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=fj,`A imagem deve ter no m\xE1ximo ${Dy}MB.`).optional()}),Ws=class{constructor(e,r){this.userRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{avatarImage:t,...i}=Gd.parse({...e.body,avatarImage:e.file}),n=e.user.id,s=await this.userRepository.findById(n);if(!s)throw new he("O usu\xE1rio n\xE3o existe");let m=s.avatarUrl;return t&&(s.avatarUrl?m=await this.firebaseStorageService.updateFile({file:t,id:n,folder:j.USER,fileUrl:s.avatarUrl}):m=await this.firebaseStorageService.uploadFile({file:t,id:n,folder:j.USER})),await this.userRepository.update({...i,id:n,avatarUrl:m||void 0}),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var By={method:"get",path:"/users/{id}",tags:["Users"],summary:"Find user by ID",request:{params:kd},responses:{200:{description:"User details retrieved successfully",summary:"User Retrieved",content:{"application/json":{schema:X.object({id:X.string(),name:X.string(),createdAt:X.date(),updatedAt:X.date(),role:X.enum(Fy.UserRole),lattesUrl:X.string().nullable(),orcid:X.string().nullable(),phone:X.string().nullable(),avatarUrl:X.url().nullable(),emailAddress:X.email()})}}},400:{description:"Invalid user ID format",summary:"Validation Error",content:{"application/json":{schema:X.object({errors:X.record(X.string(),X.string())})}}},404:{description:"User not found with the provided ID",summary:"User Not Found",content:{"application/json":{schema:X.object({message:X.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:X.object({message:X.string()})}}}}},qy={method:"put",path:"/users",tags:["Users"],summary:"Update authenticated user",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:Gd}}}},responses:{200:{description:"User profile updated successfully",summary:"User Updated",content:{"application/json":{schema:X.object({message:X.string()})}}},400:{description:"Invalid input data or file format",summary:"Validation Error",content:{"application/json":{schema:X.object({errors:X.record(X.string(),X.string())})}}},401:{description:"User not authenticated or unauthorized",summary:"Authentication Required",content:{"application/json":{schema:X.object({message:X.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:X.object({message:X.string()})}}}}},Uy={method:"delete",path:"/users",tags:["Users"],summary:"Delete authenticated user",security:[{bearerAuth:[]}],request:{params:Ud},responses:{200:{description:"User account deleted successfully",summary:"User Deleted",content:{"application/json":{schema:X.object({message:X.string()})}}},400:{description:"Invalid request parameters",summary:"Validation Error",content:{"application/json":{schema:X.object({errors:X.record(X.string(),X.string())})}}},401:{description:"User not authenticated or unauthorized",summary:"Authentication Required",content:{"application/json":{schema:X.object({message:X.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:X.object({message:X.string()})}}}}},Oy={method:"get",path:"/users",tags:["Users"],summary:"List users",responses:{200:{description:"Complete list of users retrieved successfully",summary:"Users Retrieved",content:{"application/json":{schema:X.array(X.object({id:X.string(),name:X.string(),createdAt:X.date(),updatedAt:X.date(),role:X.enum(Fy.UserRole),lattesUrl:X.url().nullable(),orcid:X.string().nullable(),phone:X.string().nullable(),avatarUrl:X.string().nullable(),emailAddress:X.email()}))}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:X.object({message:X.string()})}}}}};import v from"zod";import{extendZodWithOpenApi as Rj}from"@asteasolutions/zod-to-openapi";import Nd from"zod";Rj(Nd);var Ld=Nd.object({id:Nd.uuid()}),_s=class{constructor(e,r){this.webinarRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=Ld.parse({id:e.params.id}),i=await this.webinarRepository.findById(t);if(!i)throw new p("O webinar n\xE3o existe.");return i.thumbnailUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.thumbnailUrl}),await this.webinarRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Ij}from"@asteasolutions/zod-to-openapi";import Wd from"zod";Ij(Wd);var _d=Wd.object({id:Wd.uuid()}),Hs=class{constructor(e){this.webinarRepository=e}async handle(e,r){try{let{id:t}=_d.parse({id:e.params.id}),i=await this.webinarRepository.findById(t);if(!i)throw new p("Webinar n\xE3o encontrado.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as bj}from"@asteasolutions/zod-to-openapi";import Wt from"zod";var Cj=1,wj=6;bj(Wt);var Hd=Wt.object({page:Wt.coerce.number().min(1).default(Cj),limit:Wt.coerce.number().min(1).default(wj),title:Wt.string().optional(),description:Wt.string().optional(),orderBy:Wt.enum(["asc","desc"]).default("desc")}),zs=class{constructor(e){this.webinarRepository=e}async handle(e,r){try{let{limit:t,page:i,...n}=Hd.parse(e.query),s=i*t-t,[m,c]=await Promise.all([this.webinarRepository.find({pagination:{offset:s,limit:t},filter:n}),this.webinarRepository.count({filter:n})]),d=Math.max(Math.ceil(c/t),1);return r.status(200).json({page:i,totalPages:d,offset:s,limit:t,webinars:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Sj}from"@asteasolutions/zod-to-openapi";import ke from"zod";var Gy=5,ky=1024,vj=ky*ky,Ej=Gy*vj;Sj(ke);var zd=ke.object({id:ke.uuid(),title:ke.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio.").optional(),description:ke.string().optional(),scheduledAt:ke.coerce.date().optional(),webinarLink:ke.url("URL do webinar deve ser v\xE1lida").optional(),guestIds:ke.transform(o=>typeof o=="string"?o.split(","):o).pipe(ke.array(ke.uuid())).optional(),thumbnail:ke.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=Ej,`A thumbnail deve ter no m\xE1ximo ${Gy}MB.`).optional()}),Vs=class{constructor(e,r){this.webinarRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,thumbnail:i,title:n,description:s,scheduledAt:m,webinarLink:c,guestIds:d}=zd.parse({id:e.params.id,...e.body,thumbnail:e.file}),y=await this.webinarRepository.findById(t);if(!y)throw new p("O webinar n\xE3o existe.");let S=y.thumbnailUrl;if(i&&(S=await this.firebaseStorageService.uploadFile({file:i,id:t,folder:j.WEBINAR})),!S)throw new a("Thumbnail URL \xE9 obrigat\xF3rio");return await this.webinarRepository.update({id:t,title:n,description:s,scheduledAt:m,webinarLink:c,thumbnailUrl:S,guestIds:d}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Ny={method:"post",path:"/webinars",tags:["Webinars"],summary:"Create webinar",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:v.object({title:v.string().min(1).openapi({description:"T\xEDtulo do webinar"}),description:v.string().optional().openapi({description:"Descri\xE7\xE3o do webinar"}),scheduledAt:v.string().openapi({description:"Data e hora agendada (ISO 8601)",example:"2024-01-01T10:00:00Z"}),webinarLink:v.string().url().optional().openapi({description:"Link do webinar"}),guestIds:v.string().openapi({description:"IDs dos convidados separados por v\xEDrgula",example:"uuid1,uuid2,uuid3"}),thumbnail:v.string().optional().openapi({description:"Imagem de thumbnail (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{201:{description:"Webinar created successfully",summary:"Webinar Created"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:v.object({errors:v.record(v.string(),v.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:v.object({message:v.string()})}}}}},Ly={method:"get",path:"/webinars",tags:["Webinars"],summary:"List webinars",security:[{bearerAuth:[]}],request:{query:Hd},responses:{200:{description:"Paginated list of webinars with guest information retrieved successfully",summary:"Webinars Retrieved",content:{"application/json":{schema:v.object({page:v.number(),totalPages:v.number(),offset:v.number(),limit:v.number(),webinars:v.array(v.object({id:v.string(),title:v.string(),description:v.string().nullable(),scheduledAt:v.date(),webinarLink:v.string().nullable(),thumbnailUrl:v.string().nullable(),createdAt:v.date(),updatedAt:v.date(),guests:v.array(v.object({id:v.uuid(),name:v.string(),emailAddress:v.email(),avatarUrl:v.string().nullable(),createdAt:v.date(),updatedAt:v.date()}))}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:v.object({errors:v.record(v.string(),v.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:v.object({message:v.string()})}}}}},Wy={method:"get",path:"/webinars/{id}",tags:["Webinars"],summary:"Find webinar by ID",security:[{bearerAuth:[]}],request:{params:_d},responses:{200:{description:"Webinar details retrieved successfully",summary:"Webinar Retrieved",content:{"application/json":{schema:v.object({id:v.string(),title:v.string(),description:v.string().nullable(),scheduledAt:v.date(),webinarLink:v.string().nullable(),thumbnailUrl:v.string().nullable(),createdAt:v.date(),updatedAt:v.date(),guests:v.array(v.object({id:v.uuid(),name:v.string(),emailAddress:v.email(),avatarUrl:v.string().nullable(),createdAt:v.date(),updatedAt:v.date()}))}).nullable()}}},400:{description:"Invalid webinar ID format",summary:"Validation Error",content:{"application/json":{schema:v.object({errors:v.record(v.string(),v.string())})}}},404:{description:"Webinar not found with the provided ID",summary:"Webinar Not Found",content:{"application/json":{schema:v.object({message:v.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:v.object({message:v.string()})}}}}},_y={method:"put",path:"/webinars/{id}",tags:["Webinars"],summary:"Update webinar",security:[{bearerAuth:[]}],request:{params:zd.pick({id:!0}),body:{content:{"multipart/form-data":{schema:v.object({title:v.string().min(1).optional().openapi({description:"T\xEDtulo do webinar"}),description:v.string().optional().openapi({description:"Descri\xE7\xE3o do webinar"}),scheduledAt:v.string().optional().openapi({description:"Data e hora agendada (ISO 8601)",example:"2024-01-01T10:00:00Z"}),webinarLink:v.string().url().optional().openapi({description:"Link do webinar"}),guestIds:v.string().optional().openapi({description:"IDs dos convidados separados por v\xEDrgula",example:"uuid1,uuid2,uuid3"}),thumbnail:v.string().optional().openapi({description:"Imagem de thumbnail (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{200:{description:"Webinar updated successfully",summary:"Webinar Updated"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:v.object({errors:v.record(v.string(),v.string())})}}},404:{description:"Webinar not found with the provided ID",summary:"Webinar Not Found",content:{"application/json":{schema:v.object({message:v.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:v.object({message:v.string()})}}}}},Hy={method:"delete",path:"/webinars/{id}",tags:["Webinars"],summary:"Delete webinar",security:[{bearerAuth:[]}],request:{params:Ld},responses:{200:{description:"Webinar deleted successfully",summary:"Webinar Deleted"},400:{description:"Invalid webinar ID format",summary:"Validation Error",content:{"application/json":{schema:v.object({errors:v.record(v.string(),v.string())})}}},404:{description:"Webinar not found with the provided ID",summary:"Webinar Not Found",content:{"application/json":{schema:v.object({message:v.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:v.object({message:v.string()})}}}}};import{$Enums as Aj}from"@prisma/client";import K from"zod";import{extendZodWithOpenApi as jj}from"@asteasolutions/zod-to-openapi";import go from"zod";jj(go);var Vd=go.object({role:go.string().min(1),description:go.string().optional(),userId:go.uuid()}),Zs=class{constructor(e){this.workGroupTeamMemberRepository=e}async handle(e,r){try{let{role:t,description:i,userId:n}=Vd.parse(e.body);return await this.workGroupTeamMemberRepository.create({role:t,description:i,userId:n}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as xj}from"@asteasolutions/zod-to-openapi";import Zd from"zod";xj(Zd);var Kd=Zd.object({id:Zd.uuid()}),Ks=class{constructor(e){this.workGroupTeamMemberRepository=e}async handle(e,r){try{let{id:t}=Kd.parse({id:e.params.id});if(!await this.workGroupTeamMemberRepository.findById(t))throw new p("O membro do grupo de trabalho n\xE3o existe.");return await this.workGroupTeamMemberRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Mj}from"@asteasolutions/zod-to-openapi";import Jd from"zod";Mj(Jd);var Ys=Jd.object({id:Jd.uuid()}),Js=class{constructor(e){this.workGroupTeamMemberRepository=e}async handle(e,r){try{let{id:t}=Ys.parse({id:e.params.id}),i=await this.workGroupTeamMemberRepository.findById(t);if(!i)throw new p("O membro do grupo de trabalho n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Tj}from"@asteasolutions/zod-to-openapi";import jr from"zod";Tj(jr);var Yd=jr.object({id:jr.uuid(),role:jr.string().min(1).optional(),description:jr.string().optional(),userId:jr.uuid().optional()}),Xs=class{constructor(e){this.workGroupTeamMemberRepository=e}async handle(e,r){try{let{id:t,role:i,description:n,userId:s}=Yd.parse({id:e.params.id,...e.body});if(!await this.workGroupTeamMemberRepository.findById(t))throw new p("O membro do grupo de trabalho n\xE3o existe.");return await this.workGroupTeamMemberRepository.update({id:t,role:i,description:n,userId:s}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Pj=K.object({id:K.uuid(),name:K.string(),emailAddress:K.string(),avatarUrl:K.string().nullable(),orcid:K.string().nullable(),phone:K.string().nullable(),lattesUrl:K.string().nullable(),role:K.enum(Aj.UserRole)}),zy=K.object({id:K.uuid(),role:K.string(),description:K.string().nullable(),createdAt:K.date(),updatedAt:K.date(),userId:K.uuid(),user:Pj}),Vy={method:"post",path:"/work-group-team-member",tags:["Work Group Team Members"],summary:"Create a new Work Group Team Member",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:Vd}}}},responses:{201:{description:"Work Group Team Member created successfully",summary:"Work Group Team Member Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:K.object({errors:K.record(K.string(),K.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:K.object({message:K.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:K.object({message:K.string()})}}}}},Zy={method:"get",path:"/work-group-team-member",tags:["Work Group Team Members"],summary:"List all Work Group Team Members with filters",request:{query:K.object({role:K.string().optional(),orderBy:K.enum(["asc","desc"]).optional()})},responses:{200:{description:"List of Work Group Team Members retrieved successfully",summary:"Work Group Team Members Retrieved",content:{"application/json":{schema:K.object({members:K.array(zy)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:K.object({message:K.string()})}}}}},Ky={method:"get",path:"/work-group-team-member/{id}",tags:["Work Group Team Members"],summary:"Find Work Group Team Member by ID",request:{params:Ys},responses:{200:{description:"Work Group Team Member details retrieved successfully",summary:"Work Group Team Member Retrieved",content:{"application/json":{schema:zy}}},400:{description:"Invalid Work Group Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:K.object({errors:K.record(K.string(),K.string())})}}},404:{description:"Work Group Team Member not found with the provided ID",summary:"Work Group Team Member Not Found",content:{"application/json":{schema:K.object({message:K.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:K.object({message:K.string()})}}}}},Jy={method:"put",path:"/work-group-team-member/{id}",tags:["Work Group Team Members"],summary:"Update Work Group Team Member",security:[{bearerAuth:[]}],request:{params:Ys,body:{content:{"application/json":{schema:Yd.omit({id:!0})}}}},responses:{200:{description:"Work Group Team Member updated successfully",summary:"Work Group Team Member Updated"},400:{description:"Invalid input data or Work Group Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:K.object({errors:K.record(K.string(),K.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:K.object({message:K.string()})}}},404:{description:"Work Group Team Member not found with the provided ID",summary:"Work Group Team Member Not Found",content:{"application/json":{schema:K.object({message:K.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:K.object({message:K.string()})}}}}},Yy={method:"delete",path:"/work-group-team-member/{id}",tags:["Work Group Team Members"],summary:"Delete Work Group Team Member",security:[{bearerAuth:[]}],request:{params:Kd},responses:{200:{description:"Work Group Team Member deleted successfully",summary:"Work Group Team Member Deleted"},400:{description:"Invalid Work Group Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:K.object({errors:K.record(K.string(),K.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:K.object({message:K.string()})}}},404:{description:"Work Group Team Member not found with the provided ID",summary:"Work Group Team Member Not Found",content:{"application/json":{schema:K.object({message:K.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:K.object({message:K.string()})}}}}};var u=new Dj;u.registerComponent("securitySchemes","bearerAuth",{type:"http",scheme:"bearer",bearerFormat:"JWT"});u.registerPath(jl);u.registerPath(xl);u.registerPath(Ml);u.registerPath(Tl);u.registerPath(Pl);u.registerPath(Dl);u.registerPath(Al);u.registerPath(By);u.registerPath(qy);u.registerPath(Uy);u.registerPath(Oy);u.registerPath(Pg);u.registerPath(Dg);u.registerPath(Fg);u.registerPath(Bg);u.registerPath(Gl);u.registerPath(Nl);u.registerPath(Ll);u.registerPath(Wl);u.registerPath(_l);u.registerPath(Vg);u.registerPath(Zg);u.registerPath(Kg);u.registerPath(Jg);u.registerPath(Yg);u.registerPath(fu);u.registerPath(yu);u.registerPath(hu);u.registerPath(Ru);u.registerPath(Iu);u.registerPath(ay);u.registerPath(my);u.registerPath(cy);u.registerPath(py);u.registerPath(dy);u.registerPath(ly);u.registerPath($l);u.registerPath(Ql);u.registerPath(eu);u.registerPath(tu);u.registerPath(ru);u.registerPath(Ng);u.registerPath(Lg);u.registerPath(Wg);u.registerPath(_g);u.registerPath(Hg);u.registerPath(Eg);u.registerPath(jg);u.registerPath(xg);u.registerPath(Mg);u.registerPath(Tg);u.registerPath(pf);u.registerPath(df);u.registerPath(lf);u.registerPath(uf);u.registerPath(gf);u.registerPath(tg);u.registerPath(rg);u.registerPath(og);u.registerPath(ig);u.registerPath(ng);u.registerPath(jy);u.registerPath(xy);u.registerPath(My);u.registerPath(Ty);u.registerPath(Ay);u.registerPath(Ju);u.registerPath(Yu);u.registerPath(Xu);u.registerPath($u);u.registerPath(Qu);u.registerPath(jf);u.registerPath(xf);u.registerPath(Mf);u.registerPath(Tf);u.registerPath(Af);u.registerPath(Pf);u.registerPath(gg);u.registerPath(fg);u.registerPath(yg);u.registerPath(hg);u.registerPath(Rg);u.registerPath(Ig);u.registerPath(pg);u.registerPath(dg);u.registerPath(lg);u.registerPath(ug);u.registerPath(Uu);u.registerPath(Ou);u.registerPath(ku);u.registerPath(Gu);u.registerPath(Nu);u.registerPath(Lu);u.registerPath(Du);u.registerPath(Fu);u.registerPath(Bu);u.registerPath(qu);u.registerPath(vu);u.registerPath(Eu);u.registerPath(ju);u.registerPath(xu);u.registerPath(Kf);u.registerPath(Jf);u.registerPath(Yf);u.registerPath(Xf);u.registerPath($f);u.registerPath(Qf);u.registerPath(Hf);u.registerPath(zf);u.registerPath(Vf);u.registerPath(Zf);u.registerPath(Uf);u.registerPath(Of);u.registerPath(kf);u.registerPath(Gf);u.registerPath(Ny);u.registerPath(Ly);u.registerPath(Wy);u.registerPath(_y);u.registerPath(Hy);u.registerPath(Vl);u.registerPath(Zl);u.registerPath(Kl);u.registerPath(Jl);u.registerPath(Yl);u.registerPath(Qg);u.registerPath(ef);u.registerPath(tf);u.registerPath(rf);u.registerPath(of);u.registerPath(su);u.registerPath(au);u.registerPath(mu);u.registerPath(cu);u.registerPath(pu);u.registerPath(by);u.registerPath(Cy);u.registerPath(wy);u.registerPath(Sy);u.registerPath(vy);u.registerPath(uy);u.registerPath(gy);u.registerPath(fy);u.registerPath(yy);u.registerPath(hy);u.registerPath(Bl);u.registerPath(ql);u.registerPath(Ul);u.registerPath(Ol);u.registerPath(kl);u.registerPath(_u);u.registerPath(Hu);u.registerPath(zu);u.registerPath(Vu);u.registerPath(Zu);u.registerPath(Vy);u.registerPath(Zy);u.registerPath(Ky);u.registerPath(Jy);u.registerPath(Yy);u.registerPath(yf);u.registerPath(hf);u.registerPath(Rf);u.registerPath(If);u.registerPath(bf);u.registerPath(ry);u.registerPath(oy);u.registerPath(iy);u.registerPath(ny);u.registerPath(sy);var Bj=new Fj(u.definitions),Xy=Bj.generateDocument({openapi:"3.0.0",info:{title:"API da Rede CT",version:"1.0.0",description:"API com valida\xE7\xE3o Zod"}});import{Router as Lj}from"express";import{extendZodWithOpenApi as qj}from"@asteasolutions/zod-to-openapi";import Xd from"zod";qj(Xd);var Uj=Xd.object({authenticatedUserId:Xd.uuid()}),$s=class{constructor(e){this.userRepository=e}async handle(e,r){try{let{authenticatedUserId:t}=Uj.parse({authenticatedUserId:e.user.id}),i=await this.userRepository.findById(t);if(!i)throw new p("Usu\xE1rio n\xE3o encontrado.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{PrismaClient as Oj}from"@prisma/client";var O=new Oj({log:["warn","error"]});var Qs=class{constructor(e){this.prisma=e}async register({userId:e,title:r,description:t,certificationUrl:i}){await this.prisma.certification.create({data:{title:r,description:t,certificationUrl:i,user:{connect:{id:e}}}})}async find({pagination:{offset:e,limit:r},filter:{description:t,orderBy:i,title:n,userId:s}}){let m={},c=[];return s&&(m.userId=s),n&&c.push({title:{contains:n,mode:"insensitive"}}),t&&c.push({description:{contains:t,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.certification.findMany({where:m,include:{user:{omit:{passwordHash:!0}}},orderBy:{updatedAt:i},skip:e,take:r})}async findById(e){return await this.prisma.certification.findFirst({where:{id:e}})}async findByUserId({pagination:{limit:e,offset:r},filter:{description:t,orderBy:i,title:n},userId:s}){let m={userId:s},c=[];return n&&c.push({title:{contains:n,mode:"insensitive"}}),t&&c.push({description:{contains:t,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.certification.findMany({where:m,include:{user:{omit:{passwordHash:!0}}},skip:r,take:e,orderBy:i?{updatedAt:i}:{updatedAt:"desc"}})}async update({id:e,...r}){await this.prisma.certification.update({where:{id:e},data:r})}async deleteById(e){await this.prisma.certification.delete({where:{id:e}})}async count({filter:{description:e,title:r,userId:t}}){let i={},n=[];return t&&(i.userId=t),r&&n.push({title:{contains:r,mode:"insensitive"}}),e&&n.push({description:{contains:e,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.certification.count({where:i})}};function Tt(){return new Qs(O)}var ea=class{constructor(e){this.prisma=e}async create(e){await this.prisma.news.create({data:e})}async find({pagination:{offset:e,limit:r},filter:{authorId:t,content:i,title:n,orderBy:s}}){let m={};t&&(m.authorId={contains:t,mode:"insensitive"});let c=[];return n&&c.push({title:{contains:n,mode:"insensitive"}}),i&&c.push({content:{contains:i,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.news.findMany({where:m,omit:{authorId:!0},include:{author:!0},orderBy:{updatedAt:s},skip:e,take:r})}async findById(e){return await this.prisma.news.findUnique({where:{id:e},omit:{authorId:!0},include:{author:!0}})}async findByAuthorId({authorId:e,pagination:{offset:r,limit:t},filter:{orderBy:i="desc",content:n,title:s}}){let m={authorId:e},c=[];return s&&c.push({title:{contains:s,mode:"insensitive"}}),n&&c.push({content:{contains:n,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.news.findMany({omit:{authorId:!0},where:m,orderBy:{updatedAt:i},skip:r,take:t})}async update(e){await this.prisma.news.update({where:{id:e.id},data:{title:e.title,content:e.content,imageUrl:e.imageUrl}})}async delete(e){await this.prisma.news.delete({where:{id:e}})}async count({filter:{authorId:e,content:r,title:t}}){let i={};e&&(i.authorId={contains:e,mode:"insensitive"});let n=[];return t&&n.push({title:{contains:t,mode:"insensitive"}}),r&&n.push({content:{contains:r,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.news.count({where:i})}};function it(){return new ea(O)}var ta=class{constructor(e){this.prisma=e}async create(e){await this.prisma.pendency.create({data:e})}async find({filter:{description:e,orderBy:r,title:t,status:i,userId:n},pagination:{limit:s,offset:m}}){let c={userId:n,AND:{status:{equals:i}}};e&&(c.description={contains:e,mode:"insensitive"});let d=[];return t&&d.push({title:{contains:t,mode:"insensitive"}}),d.length>0&&(c.OR=d),await this.prisma.pendency.findMany({where:c,orderBy:{updatedAt:r},include:{user:{omit:{passwordHash:!0}}},skip:m,take:s})}async findById(e){return await this.prisma.pendency.findFirst({where:{id:e},include:{user:{omit:{passwordHash:!0}}}})}async findByUserId({filter:{description:e,orderBy:r,title:t,status:i},pagination:{limit:n,offset:s},userId:m}){let c={userId:m,AND:{status:{equals:i}}},d=[];return e&&d.push({description:{contains:e,mode:"insensitive"}}),t&&d.push({title:{contains:t,mode:"insensitive"}}),d.length>0&&(c.OR=d),await this.prisma.pendency.findMany({where:c,orderBy:{updatedAt:r},include:{user:{omit:{passwordHash:!0}}},skip:s,take:n})}async update({id:e,...r}){await this.prisma.pendency.update({where:{id:e},data:r})}async deleteById(e){await this.prisma.pendency.delete({where:{id:e}})}async count({filter:{description:e,title:r,status:t,userId:i}}){let n={userId:i},s=[];return e&&s.push({description:{contains:e,mode:"insensitive"}}),r&&s.push({title:{contains:r,mode:"insensitive"}}),t&&s.push({status:{equals:t}}),s.length>0&&(n.OR=s),await this.prisma.pendency.count({where:n})}};function At(){return new ta(O)}var ra=class{constructor(e){this.prisma=e}async create(e){await this.prisma.user.create({data:e})}async update(e){await this.prisma.user.update({where:{id:e.id},data:{lattesUrl:e.lattesUrl??null,orcid:e.orcid??null,phone:e.phone??null,avatarUrl:e.avatarUrl??null}})}async deleteById(e){await this.prisma.user.delete({where:{id:e}})}async find(){return await this.prisma.user.findMany({omit:{passwordHash:!0}})}async findByEmail(e){return await this.prisma.user.findFirst({where:{emailAddress:e}})}async findById(e){return await this.prisma.user.findFirst({where:{id:e},omit:{passwordHash:!0}})}};function ve(){return new ra(O)}import{compare as kj,hash as Gj}from"bcryptjs";var oa=class{constructor(e,r){this.hashFn=e;this.compareFn=r}async hash(e){return await this.hashFn(e,6)}async compare({password:e,hashedPassword:r}){return await this.compareFn(e,r)}};function $d(){return new oa(Gj,kj)}import $y from"jsonwebtoken";import Ee from"zod";var Nj=Ee.object({JWT_SECRET:Ee.string(),FIREBASE_BUCKET:Ee.string(),FIREBASE_CLIENT_EMAIL:Ee.string(),FIREBASE_PRIVATE_KEY:Ee.string(),FIREBASE_PROJECT_ID:Ee.string(),FIREBASE_TYPE:Ee.string(),FIREBASE_PRIVATE_KEY_ID:Ee.string(),FIREBASE_CLIENT_ID:Ee.string(),FIREBASE_AUTH_URI:Ee.string(),FIREBASE_TOKEN_URI:Ee.string(),FIREBASE_AUTH_PROVIDER_X509_CERT_URL:Ee.string(),FIREBASE_CLIENT_X509_CERT_URL:Ee.string()}),fe=Nj.parse(process.env);var ia=class{constructor(e,r){this.signFn=e;this.verifyFn=r}sign(e){try{return this.signFn(e,fe.JWT_SECRET,{expiresIn:"3d",subject:e.id})}catch{return null}}verify(e){try{return this.verifyFn(e,fe.JWT_SECRET)}catch{return null}}};function na(){return new ia($y.sign,$y.verify)}function Qy(){return{signUpController:new qo(ve(),$d())}}function eh(){return{signInController:new Fo(ve(),$d(),na())}}function th(){return{findAuthenticatedUserController:new $s(ve())}}function rh(){return{findAuthenticatedUserController:new Ao(it())}}function oh(){return{findAuthenticatedUserCertificationsController:new To(Tt())}}function ih(){return{findAuthenticatedUserPendenciesController:new Po(At())}}var sa=class{constructor(e){this.jwtService=e}authenticated(e,r,t){let i=e.headers.authorization;if(!i?.startsWith("Bearer "))return r.status(401).json({message:"Token inv\xE1lido.",invalid:!0});let n=i.split(" ")[1];if(!n)return r.status(401).json({message:"Token n\xE3o fornecido."});try{let s=this.jwtService.verify(n);if(!s)return r.status(401).json({message:"Token inv\xE1lido.",invalid:!0});e.user=s,t()}catch(s){if(console.log(s),s instanceof Error)return r.status(401).json({message:s.message})}}isAdmin(e,r,t){let i=e.headers.authorization;if(!i?.startsWith("Bearer "))return r.status(401).json({message:"Token inv\xE1lido.",invalid:!0});let n=i.split(" ")[1];if(!n)return r.status(401).json({message:"Token n\xE3o fornecido."});try{let s=this.jwtService.verify(n);if(!s)return r.status(401).json({message:"Token inv\xE1lido.",invalid:!0});if(s.role!=="ADMIN")return r.status(401).json({message:"\xC9 necess\xE1rio ter permiss\xF5es de administrador."});e.user=s,t()}catch(s){if(console.log(s),s instanceof Error)return r.status(401).json({message:s.message})}}};function J(){return{authMiddleware:new sa(na())}}var nt=Lj(),{authMiddleware:fo}=J();nt.post("/sign-up",async(o,e)=>{let{signUpController:r}=Qy();await r.handle(o,e)});nt.post("/sign-in",async(o,e)=>{let{signInController:r}=eh();await r.handle(o,e)});nt.get("/user",(o,e,r)=>{fo.authenticated(o,e,r)},async(o,e)=>{let{findAuthenticatedUserController:r}=th();await r.handle(o,e)});nt.get("/user/news",(o,e,r)=>{fo.authenticated(o,e,r)},async(o,e)=>{let{findAuthenticatedUserController:r}=rh();await r.handle(o,e)});nt.get("/admin",(o,e,r)=>{fo.isAdmin(o,e,r)},(o,e)=>{try{e.status(200).json({success:!0})}catch(r){r instanceof Error&&e.status(500).json({message:r.message})}});nt.get("/certifications",(o,e,r)=>{fo.authenticated(o,e,r)},async(o,e)=>{let{findAuthenticatedUserCertificationsController:r}=oh();await r.handle(o,e)});nt.get("/pendencies",(o,e,r)=>{fo.authenticated(o,e,r)},async(o,e)=>{let{findAuthenticatedUserPendenciesController:r}=ih();await r.handle(o,e)});import{Router as Xj}from"express";import{extendZodWithOpenApi as Wj}from"@asteasolutions/zod-to-openapi";import Ge from"zod";var _j=5,nh=1024,Hj=nh*nh,Qd=_j*Hj;Wj(Ge);var zj=Ge.object({volumeNumber:Ge.coerce.number().int().positive("N\xFAmero do volume \xE9 obrigat\xF3rio."),year:Ge.coerce.number().int().positive("Ano \xE9 obrigat\xF3rio."),title:Ge.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),author:Ge.string().min(1,"Autor \xE9 obrigat\xF3rio."),accessUrl:Ge.url().optional(),description:Ge.string().optional(),authorImage:Ge.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=Qd,"A imagem do autor deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB."),coverImage:Ge.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=Qd,"A imagem da capa deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB."),catalogSheet:Ge.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&typeof o.size=="number"&&o.size<=Qd,"A ficha catalogr\xE1fica deve ter no m\xE1ximo 5MB.")}),aa=class{constructor(e,r){this.bookVolumeRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{volumeNumber:t,year:i,title:n,author:s,accessUrl:m,description:c,authorImage:d,coverImage:y,catalogSheet:S}=zj.parse({...e.body,authorImage:e.files?.authorImage?.[0],coverImage:e.files?.coverImage?.[0],catalogSheet:e.files?.catalogSheet?.[0]}),A=await this.bookVolumeRepository.create({volumeNumber:t,year:i,title:n,author:s,accessUrl:m,description:c}),$=A.authorImageUrl,oe=A.coverImageUrl,ae=A.catalogSheetUrl;return $=await this.firebaseStorageService.uploadFile({file:d,folder:j.BOOK_VOLUME_AUTHOR_IMAGE,id:A.id}),oe=await this.firebaseStorageService.uploadFile({file:y,folder:j.BOOK_VOLUME_COVER,id:A.id}),ae=await this.firebaseStorageService.uploadFile({file:S,folder:j.BOOK_VOLUME_CATALOG_SHEET,id:A.id}),await this.bookVolumeRepository.update({id:A.id,authorImageUrl:$,coverImageUrl:oe,catalogSheetUrl:ae}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var ma=class{constructor(e){this.prisma=e}async create({volumeNumber:e,year:r,title:t,author:i,accessUrl:n,authorImageUrl:s,coverImageUrl:m,catalogSheetUrl:c,description:d}){return await this.prisma.bookVolume.create({data:{volumeNumber:e,year:r,title:t,author:i,accessUrl:n,authorImageUrl:s,coverImageUrl:m,catalogSheetUrl:c,description:d}})}async find({pagination:{offset:e,limit:r},filter:{title:t,author:i,description:n,orderBy:s}}){let m={},c=[];return t&&c.push({title:{contains:t,mode:"insensitive"}}),i&&c.push({author:{contains:i,mode:"insensitive"}}),n&&c.push({description:{contains:n,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.bookVolume.findMany({where:m,orderBy:{updatedAt:s},skip:e,take:r})}async findById(e){return await this.prisma.bookVolume.findFirst({where:{id:e}})}async update({id:e,volumeNumber:r,year:t,title:i,author:n,accessUrl:s,authorImageUrl:m,coverImageUrl:c,catalogSheetUrl:d,description:y}){await this.prisma.bookVolume.update({where:{id:e},data:{volumeNumber:r,year:t,title:i,author:n,accessUrl:s,authorImageUrl:m,coverImageUrl:c,catalogSheetUrl:d,description:y}})}async deleteById(e){await this.prisma.bookVolume.delete({where:{id:e}})}async count({filter:{title:e,author:r,description:t}}){let i={},n=[];return e&&n.push({title:{contains:e,mode:"insensitive"}}),r&&n.push({author:{contains:r,mode:"insensitive"}}),t&&n.push({description:{contains:t,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.bookVolume.count({where:i})}};function xr(){return new ma(O)}import{getStorage as Zj}from"firebase-admin/storage";import{config as Vj}from"dotenv";import sh from"firebase-admin";Vj();var el=sh.initializeApp({credential:sh.credential.cert({clientEmail:fe.FIREBASE_CLIENT_EMAIL,privateKey:fe.FIREBASE_PRIVATE_KEY,projectId:fe.FIREBASE_PROJECT_ID,type:fe.FIREBASE_TYPE,privateKeyId:fe.FIREBASE_PRIVATE_KEY_ID,clientId:fe.FIREBASE_CLIENT_ID,authUri:fe.FIREBASE_AUTH_URI,tokenUri:fe.FIREBASE_TOKEN_URI,authProviderX509CertUrl:fe.FIREBASE_AUTH_PROVIDER_X509_CERT_URL,clientX509CertUrl:fe.FIREBASE_CLIENT_X509_CERT_URL}),storageBucket:fe.FIREBASE_BUCKET});el.name?console.log("\u{1F525} Firebase conectado com sucesso!"):console.error("\u274C Erro ao se conectar ao Firebase.");var Kj=Zj(el),ah=Kj.bucket(fe.FIREBASE_BUCKET);import{randomUUID as Jj}from"node:crypto";var Yj=/https:\/\/storage\.googleapis\.com\/[^/]+\/(.+)$/,ca=class{constructor(e){this.bucket=e}async uploadFile({file:e,folder:r,id:t}){let i=`${Jj()}-${e?.originalname}`,n=this.bucket.file(`${r}/${t}/${i}`);return await new Promise((s,m)=>{let c=n.createWriteStream({metadata:{contentType:e?.mimetype}});c.on("error",d=>{m(d)}),c.on("finish",async()=>{try{await n.makePublic();let d=`https://storage.googleapis.com/${this.bucket.name}/${n.name}`;s(d)}catch(d){m(d)}}),c.end(e.buffer)})}async updateFile({file:e,id:r,fileUrl:t,folder:i}){try{let n=this.getPath(t);if(!n)throw new Error("Arquivo n\xE3o encontrado.");let[s,m]=await Promise.all([this.bucket.file(n).delete(),this.uploadFile({file:e,id:r,folder:i})]);return m}catch{throw new Error("Erro ao atualizar o arquivo.")}}async deleteFile({fileUrl:e}){let r=this.getPath(e);if(!r)throw new Error("Arquivo n\xE3o encontrado.");try{await this.bucket.file(r).delete()}catch{throw new Error("Erro ao deletar o arquivo.")}}getPath(e){let r=e.match(Yj);return r?r[1]:null}};function T(){return new ca(ah)}function mh(){return{createBookVolumeController:new aa(xr(),T())}}function ch(){return{findBookVolumesController:new ko(xr())}}function ph(){return{findBookVolumeByIdController:new Oo(xr())}}function dh(){return{updateBookVolumeController:new No(xr(),T())}}function lh(){return{deleteBookVolumeController:new Uo(xr(),T())}}import uh from"multer";var H=uh({storage:uh.memoryStorage()});var _t=Xj(),{authMiddleware:yo}=J();_t.post("/",(o,e,r)=>{yo.isAdmin(o,e,r)},H.fields([{name:"authorImage",maxCount:1},{name:"coverImage",maxCount:1},{name:"catalogSheet",maxCount:1}]),async(o,e)=>{let{createBookVolumeController:r}=mh();await r.handle(o,e)});_t.get("/",(o,e,r)=>{yo.isAdmin(o,e,r)},async(o,e)=>{let{findBookVolumesController:r}=ch();await r.handle(o,e)});_t.get("/:id",(o,e,r)=>{yo.isAdmin(o,e,r)},async(o,e)=>{let{findBookVolumeByIdController:r}=ph();await r.handle(o,e)});_t.put("/:id",(o,e,r)=>{yo.isAdmin(o,e,r)},H.fields([{name:"authorImage",maxCount:1},{name:"coverImage",maxCount:1},{name:"catalogSheet",maxCount:1}]),async(o,e)=>{let{updateBookVolumeController:r}=dh();await r.handle(o,e)});_t.delete("/:id",(o,e,r)=>{yo.isAdmin(o,e,r)},async(o,e)=>{let{deleteBookVolumeController:r}=lh();await r.handle(o,e)});import{Router as $j}from"express";function gh(){return{registerCertificationController:new Ho(ve(),Tt(),T())}}function fh(){return{findCertificationsController:new _o(Tt())}}function yh(){return{findCertificationByIdController:new Wo(Tt())}}function hh(){return{updateCertificationController:new Vo(Tt(),T())}}function Rh(){return{deleteCertificationController:new Lo(Tt(),T())}}var Ht=$j(),{authMiddleware:ho}=J();Ht.post("/:user_id",(o,e,r)=>{ho.isAdmin(o,e,r)},H.single("certification"),async(o,e)=>{let{registerCertificationController:r}=gh();await r.handle(o,e)});Ht.get("/",(o,e,r)=>{ho.isAdmin(o,e,r)},async(o,e)=>{let{findCertificationsController:r}=fh();await r.handle(o,e)});Ht.get("/:certification_id",(o,e,r)=>{ho.isAdmin(o,e,r)},async(o,e)=>{let{findCertificationByIdController:r}=yh();await r.handle(o,e)});Ht.put("/:certification_id",(o,e,r)=>{ho.isAdmin(o,e,r)},H.single("certification"),async(o,e)=>{let{updateCertificationController:r}=hh();await r.handle(o,e)});Ht.delete("/:certification_id",(o,e,r)=>{ho.isAdmin(o,e,r)},async(o,e)=>{let{deleteCertificationController:r}=Rh();await r.handle(o,e)});import{Router as ix}from"express";import{extendZodWithOpenApi as Qj}from"@asteasolutions/zod-to-openapi";import je from"zod";var ex=5,Ih=1024,tx=Ih*Ih,rx=ex*tx;Qj(je);var ox=je.object({title:je.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),coordinatorId:je.string().uuid("Coordenador \xE9 obrigat\xF3rio."),email:je.email("E-mail deve ser v\xE1lido."),location:je.string().min(1,"Localiza\xE7\xE3o \xE9 obrigat\xF3ria."),scheduledAt:je.coerce.date(),registrationLink:je.url().optional(),description:je.string().optional(),instructorIds:je.transform(o=>typeof o=="string"?o.split(","):o).pipe(je.array(je.uuid())),image:je.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=rx,"A imagem deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.")}),pa=class{constructor(e,r){this.courseRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{title:t,coordinatorId:i,email:n,location:s,scheduledAt:m,registrationLink:c,description:d,instructorIds:y,image:S}=ox.parse({...e.body,image:e.file}),A=await this.courseRepository.create({title:t,coordinatorId:i,email:n,location:s,scheduledAt:m,registrationLink:c||void 0,description:d,instructorIds:y}),$=await this.firebaseStorageService.uploadFile({file:S,folder:j.COURSE,id:A.id});return await this.courseRepository.update({id:A.id,imageUrl:$}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var da=class{constructor(e){this.prisma=e}async create({title:e,imageUrl:r,coordinatorId:t,email:i,instructorIds:n,scheduledAt:s,location:m,registrationLink:c,description:d}){return await this.prisma.course.create({data:{title:e,imageUrl:r,coordinatorId:t,email:i,scheduledAt:s,location:m,registrationLink:c,description:d,instructors:{connect:n?.map(y=>({id:y}))}}})}async find({pagination:{offset:e,limit:r},filter:{description:t,orderBy:i,title:n,coordinator:s}}){let m={},c=[];return n&&c.push({title:{contains:n,mode:"insensitive"}}),t&&c.push({description:{contains:t,mode:"insensitive"}}),s&&c.push({coordinator:{name:{contains:s,mode:"insensitive"}}}),c.length>0&&(m.OR=c),await this.prisma.course.findMany({where:m,include:{coordinator:{omit:{passwordHash:!0}},instructors:{omit:{passwordHash:!0}}},orderBy:{updatedAt:i},skip:e,take:r})}async findById(e){return await this.prisma.course.findFirst({where:{id:e},include:{coordinator:{omit:{passwordHash:!0}},instructors:{omit:{passwordHash:!0}}}})}async update({id:e,title:r,imageUrl:t,coordinatorId:i,email:n,instructorIds:s,scheduledAt:m,location:c,registrationLink:d,description:y}){s!==void 0&&await this.prisma.course.update({where:{id:e},data:{instructors:{set:[]}}}),await this.prisma.course.update({where:{id:e},data:{title:r,imageUrl:t,coordinatorId:i,email:n,scheduledAt:m,location:c,registrationLink:d,description:y,...s?.length>0&&{instructors:{connect:s.map(S=>({id:S}))}}}})}async deleteById(e){await this.prisma.course.delete({where:{id:e}})}async count({filter:{description:e,title:r,coordinator:t}}){let i={},n=[];return r&&n.push({title:{contains:r,mode:"insensitive"}}),e&&n.push({description:{contains:e,mode:"insensitive"}}),t&&n.push({coordinator:{name:{contains:t,mode:"insensitive"}}}),n.length>0&&(i.OR=n),await this.prisma.course.count({where:i})}};function Mr(){return new da(O)}function bh(){return{createCourseController:new pa(Mr(),T())}}function Ch(){return{findCoursesController:new Yo(Mr())}}function wh(){return{findCourseByIdController:new Jo(Mr())}}function Sh(){return{updateCourseController:new Xo(Mr(),T())}}function vh(){return{deleteCourseController:new Ko(Mr(),T())}}var zt=ix(),{authMiddleware:Ro}=J();zt.post("/",(o,e,r)=>{Ro.isAdmin(o,e,r)},H.single("image"),async(o,e)=>{let{createCourseController:r}=bh();await r.handle(o,e)});zt.get("/",(o,e,r)=>{Ro.isAdmin(o,e,r)},async(o,e)=>{let{findCoursesController:r}=Ch();await r.handle(o,e)});zt.get("/:id",(o,e,r)=>{Ro.isAdmin(o,e,r)},async(o,e)=>{let{findCourseByIdController:r}=wh();await r.handle(o,e)});zt.put("/:id",(o,e,r)=>{Ro.isAdmin(o,e,r)},H.single("image"),async(o,e)=>{let{updateCourseController:r}=Sh();await r.handle(o,e)});zt.delete("/:id",(o,e,r)=>{Ro.isAdmin(o,e,r)},async(o,e)=>{let{deleteCourseController:r}=vh();await r.handle(o,e)});import{Router as cx}from"express";import{extendZodWithOpenApi as nx}from"@asteasolutions/zod-to-openapi";import st from"zod";var sx=1,ax=9;nx(st);var mx=st.object({page:st.coerce.number().min(1).default(sx),limit:st.coerce.number().min(1).default(ax),code:st.string().optional(),title:st.string().optional(),description:st.string().optional(),notes:st.string().optional(),orderBy:st.enum(["asc","desc"]).default("desc")}),la=class{constructor(e){this.etpRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=mx.parse(e.query),s=i*t-i,[m,c]=await Promise.all([this.etpRepository.find({pagination:{offset:s,limit:i},filter:n}),this.etpRepository.count({filter:n})]),d=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:d,offset:s,limit:i,etps:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};var ua=class{constructor(e){this.prisma=e}async create(e){let{leaderId:r,deputyLeaderId:t,secretaryId:i,memberIds:n,...s}=e;await this.prisma.$transaction(async m=>{let c=await m.eTP.create({data:s});await m.eTPLeader.create({data:{etpId:c.id,researcherId:r}}),await m.eTPDeputy.create({data:{etpId:c.id,researcherId:t}}),await m.eTPSecretary.create({data:{etpId:c.id,researcherId:i}}),await m.eTP.update({where:{id:c.id},data:{members:{connect:n.map(d=>({id:d}))}}})})}async update(e){let{leaderId:r,deputyLeaderId:t,secretaryId:i,memberIds:n,...s}=e;await this.prisma.$transaction(async m=>{await m.eTP.update({where:{id:e.id},data:s}),await this.updateLeader(m,e.id,r),await this.updateDeputyLeader(m,e.id,t),await this.updateSecretary(m,e.id,i),await this.updateMembers(m,e.id,n)})}async updateLeader(e,r,t){t!==void 0&&(await e.eTPLeader.deleteMany({where:{etpId:r}}),t&&await e.eTPLeader.create({data:{etpId:r,researcherId:t}}))}async updateDeputyLeader(e,r,t){t!==void 0&&(await e.eTPDeputy.deleteMany({where:{etpId:r}}),t&&await e.eTPDeputy.create({data:{etpId:r,researcherId:t}}))}async updateSecretary(e,r,t){t!==void 0&&(await e.eTPSecretary.deleteMany({where:{etpId:r}}),t&&await e.eTPSecretary.create({data:{etpId:r,researcherId:t}}))}async updateMembers(e,r,t){t!==void 0&&await e.eTP.update({where:{id:r},data:{members:{set:t.map(i=>({id:i}))}}})}async deleteById(e){await this.prisma.eTP.delete({where:{id:e}})}async find({pagination:{offset:e,limit:r},filter:{code:t,title:i,description:n,notes:s,orderBy:m}}){let c={},d=[];return t&&d.push({code:{contains:t,mode:"insensitive"}}),i&&d.push({title:{contains:i,mode:"insensitive"}}),n&&d.push({description:{contains:n,mode:"insensitive"}}),s&&d.push({notes:{contains:s,mode:"insensitive"}}),d.length>0&&(c.OR=d),await this.prisma.eTP.findMany({where:c,include:{leader:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},deputyLeader:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},secretary:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},members:{include:{user:{omit:{passwordHash:!0}}}}},orderBy:{updatedAt:m},skip:e,take:r})}async findById(e){return await this.prisma.eTP.findFirst({where:{id:e},include:{leader:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},deputyLeader:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},secretary:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},members:{include:{user:{omit:{passwordHash:!0}}}}}})}async findByCode(e){return await this.prisma.eTP.findFirst({where:{code:e},include:{leader:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},deputyLeader:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},secretary:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},members:{include:{user:{omit:{passwordHash:!0}}}}}})}async count({filter:{code:e,title:r,description:t,notes:i}}){let n={},s=[];return e&&s.push({code:{contains:e,mode:"insensitive"}}),r&&s.push({title:{contains:r,mode:"insensitive"}}),t&&s.push({description:{contains:t,mode:"insensitive"}}),i&&s.push({notes:{contains:i,mode:"insensitive"}}),s.length>0&&(n.OR=s),await this.prisma.eTP.count({where:n})}};function Tr(){return new ua(O)}function Eh(){return{createETPController:new $o(Tr())}}function jh(){return{findETPsController:new la(Tr())}}function xh(){return{findETPByIdController:new ei(Tr())}}function Mh(){return{updateETPController:new ri(Tr())}}function Th(){return{deleteETPController:new Qo(Tr())}}var Vt=cx(),{authMiddleware:tl}=J();Vt.post("/",(o,e,r)=>{tl.authenticated(o,e,r)},async(o,e)=>{let{createETPController:r}=Eh();await r.handle(o,e)});Vt.get("/",async(o,e)=>{let{findETPsController:r}=jh();await r.handle(o,e)});Vt.get("/:id",async(o,e)=>{let{findETPByIdController:r}=xh();await r.handle(o,e)});Vt.put("/:id",(o,e,r)=>{tl.authenticated(o,e,r)},async(o,e)=>{let{updateETPController:r}=Mh();await r.handle(o,e)});Vt.delete("/:id",(o,e,r)=>{tl.authenticated(o,e,r)},async(o,e)=>{let{deleteETPController:r}=Th();await r.handle(o,e)});import{Router as px}from"express";var ga=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.event.create({data:e})}async update(e){await this.prisma.event.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.event.delete({where:{id:e}})}async find({pagination:{offset:e,limit:r},filter:{title:t,status:i,format:n,orderBy:s}}){let m={},c=[];return i&&(m.status=i),n&&(m.format=n),t&&c.push({title:{contains:t,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.event.findMany({where:m,orderBy:s?{startDate:s}:{startDate:"desc"},skip:e,take:r})}async findById(e){return await this.prisma.event.findFirst({where:{id:e}})}async count({filter:{title:e,status:r,format:t}}){let i={},n=[];return r&&(i.status=r),t&&(i.format=t),e&&n.push({title:{contains:e,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.event.count({where:i})}};function Ar(){return new ga(O)}function Ah(){return{createEventController:new ni(Ar(),T())}}function Ph(){return{findEventsController:new ci(Ar())}}function Dh(){return{findEventByIdController:new ai(Ar())}}function Fh(){return{updateEventController:new pi(Ar(),T())}}function Bh(){return{deleteEventController:new si(Ar())}}var Zt=px(),{authMiddleware:rl}=J();Zt.post("/",(o,e,r)=>{rl.authenticated(o,e,r)},H.single("image"),async(o,e)=>{let{createEventController:r}=Ah();await r.handle(o,e)});Zt.get("/",async(o,e)=>{let{findEventsController:r}=Ph();await r.handle(o,e)});Zt.get("/:id",async(o,e)=>{let{findEventByIdController:r}=Dh();await r.handle(o,e)});Zt.put("/:id",(o,e,r)=>{rl.authenticated(o,e,r)},H.single("image"),async(o,e)=>{let{updateEventController:r}=Fh();await r.handle(o,e)});Zt.delete("/:id",(o,e,r)=>{rl.authenticated(o,e,r)},async(o,e)=>{let{deleteEventController:r}=Bh();await r.handle(o,e)});import{Router as dx}from"express";var fa=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.inMemoriam.create({data:e})}async update(e){await this.prisma.inMemoriam.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.inMemoriam.delete({where:{id:e}})}async find({pagination:{offset:e,limit:r},filter:{name:t,biography:i,role:n,orderBy:s}}){let m={},c=[];return n&&(m.role=n),t&&c.push({name:{contains:t,mode:"insensitive"}}),i&&c.push({biography:{contains:i,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.inMemoriam.findMany({where:m,orderBy:{updatedAt:s},skip:e,take:r})}async findById(e){return await this.prisma.inMemoriam.findFirst({where:{id:e}})}async findByRole(e){return await this.prisma.inMemoriam.findMany({where:{role:e}})}async count({filter:{name:e,biography:r,role:t}}){let i={},n=[];return t&&(i.role=t),e&&n.push({name:{contains:e,mode:"insensitive"}}),r&&n.push({biography:{contains:r,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.inMemoriam.count({where:i})}};function Kt(){return new fa(O)}function qh(){return{createInMemoriamController:new di(Kt(),T())}}function Uh(){return{findInMemoriamsController:new yi(Kt())}}function Oh(){return{findInMemoriamByIdController:new ui(Kt())}}function kh(){return{findInMemoriamByRoleController:new fi(Kt())}}function Gh(){return{updateInMemoriamController:new hi(Kt(),T())}}function Nh(){return{deleteInMemoriamController:new li(Kt(),T())}}var Pt=dx(),{authMiddleware:ol}=J();Pt.post("/",(o,e,r)=>{ol.authenticated(o,e,r)},H.single("photo"),async(o,e)=>{let{createInMemoriamController:r}=qh();await r.handle(o,e)});Pt.get("/",async(o,e)=>{let{findInMemoriamsController:r}=Uh();await r.handle(o,e)});Pt.get("/:id",async(o,e)=>{let{findInMemoriamByIdController:r}=Oh();await r.handle(o,e)});Pt.get("/role/:role",async(o,e)=>{let{findInMemoriamByRoleController:r}=kh();await r.handle(o,e)});Pt.put("/:id",(o,e,r)=>{ol.authenticated(o,e,r)},H.single("photo"),async(o,e)=>{let{updateInMemoriamController:r}=Gh();await r.handle(o,e)});Pt.delete("/:id",(o,e,r)=>{ol.authenticated(o,e,r)},async(o,e)=>{let{deleteInMemoriamController:r}=Nh();await r.handle(o,e)});import{Router as lx}from"express";var il=lx();il.get("/",(o,e)=>{e.status(200).json({message:"Rede CT"})});import{Router as hx}from"express";var ya=class{constructor(e){this.prisma=e}async create(e){await this.prisma.internationalScientificCongress.create({data:e})}async update(e){await this.prisma.internationalScientificCongress.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.internationalScientificCongress.delete({where:{id:e}})}async find({pagination:{offset:e,limit:r},filter:{title:t,edition:i,location:n,orderBy:s}}){let m={},c=[];return i&&c.push({edition:{equals:i}}),t&&c.push({title:{contains:t,mode:"insensitive"}}),n&&c.push({location:{contains:n,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.internationalScientificCongress.findMany({where:m,include:{partners:!0,galleries:!0},orderBy:s?{startDate:s}:{startDate:"desc"},skip:e,take:r})}async findById(e){return await this.prisma.internationalScientificCongress.findFirst({where:{id:e},include:{partners:!0,galleries:!0}})}async findByEdition(e){return await this.prisma.internationalScientificCongress.findMany({where:{edition:e},include:{partners:!0,galleries:!0}})}async count({filter:{title:e,edition:r,location:t}}){let i={},n=[];return r&&n.push({edition:{equals:r}}),e&&n.push({title:{contains:e,mode:"insensitive"}}),t&&n.push({location:{contains:t,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.internationalScientificCongress.count({where:i})}};function Ne(){return new ya(O)}function Lh(){return{createInternationalScientificCongressController:new Mi(Ne())}}function Wh(){return{findInternationalScientificCongressesController:new Fi(Ne())}}function _h(){return{findInternationalScientificCongressByIdController:new Pi(Ne())}}function Hh(){return{findInternationalScientificCongressByEditionController:new Ai(Ne())}}function zh(){return{updateInternationalScientificCongressController:new Bi(Ne())}}function Vh(){return{deleteInternationalScientificCongressController:new Ti(Ne())}}import{extendZodWithOpenApi as ux}from"@asteasolutions/zod-to-openapi";import nl from"zod";ux(nl);var gx=nl.object({id:nl.uuid()}),ha=class{constructor(e){this.internationalScientificCongressGalleryRepository=e}async handle(e,r){try{let{id:t}=gx.parse({id:e.params.id}),i=await this.internationalScientificCongressGalleryRepository.findById(t);if(!i)throw new p("A imagem da galeria n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Ra=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.internationalScientificCongressGalleryItem.create({data:e})}async update(e){await this.prisma.internationalScientificCongressGalleryItem.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.internationalScientificCongressGalleryItem.delete({where:{id:e}})}async findByCongressId(e){let{pagination:r,filter:t}=e;return await this.prisma.internationalScientificCongressGalleryItem.findMany({where:{congressId:t.congressId,...t.caption&&{caption:{contains:t.caption,mode:"insensitive"}}},skip:r.offset,take:r.limit})}async findById(e){return await this.prisma.internationalScientificCongressGalleryItem.findFirst({where:{id:e}})}async count(e){let{filter:r}=e;return await this.prisma.internationalScientificCongressGalleryItem.count({where:{congressId:r.congressId,...r.caption&&{caption:{contains:r.caption,mode:"insensitive"}}}})}};function Pr(){return new Ra(O)}function Zh(){return{createInternationalScientificCongressGalleryController:new Ri(Pr(),Ne(),T())}}function Kh(){return{findInternationalScientificCongressGalleriesByCongressIdController:new Ci(Pr())}}function Jh(){return{findInternationalScientificCongressGalleryByIdController:new ha(Pr())}}function Yh(){return{updateInternationalScientificCongressGalleryController:new wi(Pr(),T())}}function Xh(){return{deleteInternationalScientificCongressGalleryController:new Ii(Pr())}}import{extendZodWithOpenApi as fx}from"@asteasolutions/zod-to-openapi";import sl from"zod";fx(sl);var yx=sl.object({id:sl.uuid()}),Ia=class{constructor(e){this.internationalScientificCongressPartnerRepository=e}async handle(e,r){try{let{id:t}=yx.parse({id:e.params.id}),i=await this.internationalScientificCongressPartnerRepository.findById(t);if(!i)throw new p("O parceiro n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var ba=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.internationalScientificCongressPartner.create({data:e})}async update(e){await this.prisma.internationalScientificCongressPartner.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.internationalScientificCongressPartner.delete({where:{id:e}})}async findByCongressId(e){return await this.prisma.internationalScientificCongressPartner.findMany({where:{congressId:e.filter.congressId,name:e.filter.name?{contains:e.filter.name,mode:"insensitive"}:void 0},skip:e.pagination?.offset,take:e.pagination?.limit})}async findById(e){return await this.prisma.internationalScientificCongressPartner.findFirst({where:{id:e}})}async count(e){return await this.prisma.internationalScientificCongressPartner.count({where:{congressId:e.filter.congressId,name:e.filter.name?{contains:e.filter.name,mode:"insensitive"}:void 0}})}};function Dr(){return new ba(O)}function $h(){return{createInternationalScientificCongressPartnerController:new Si(Dr(),Ne(),T())}}function Qh(){return{findInternationalScientificCongressPartnersByCongressIdController:new ji(Dr())}}function eR(){return{findInternationalScientificCongressPartnerByIdController:new Ia(Dr())}}function tR(){return{updateInternationalScientificCongressPartnerController:new xi(Dr(),T())}}function rR(){return{deleteInternationalScientificCongressPartnerController:new vi(Dr())}}var le=hx(),{authMiddleware:at}=J();le.post("/",(o,e,r)=>{at.authenticated(o,e,r)},async(o,e)=>{let{createInternationalScientificCongressController:r}=Lh();await r.handle(o,e)});le.get("/",async(o,e)=>{let{findInternationalScientificCongressesController:r}=Wh();await r.handle(o,e)});le.get("/:id",async(o,e)=>{let{findInternationalScientificCongressByIdController:r}=_h();await r.handle(o,e)});le.get("/edition/:edition",async(o,e)=>{let{findInternationalScientificCongressByEditionController:r}=Hh();await r.handle(o,e)});le.put("/:id",(o,e,r)=>{at.authenticated(o,e,r)},async(o,e)=>{let{updateInternationalScientificCongressController:r}=zh();await r.handle(o,e)});le.delete("/:id",(o,e,r)=>{at.authenticated(o,e,r)},async(o,e)=>{let{deleteInternationalScientificCongressController:r}=Vh();await r.handle(o,e)});le.post("/:congressId/gallery",(o,e,r)=>{at.authenticated(o,e,r)},H.single("image"),async(o,e)=>{let{createInternationalScientificCongressGalleryController:r}=Zh();await r.handle(o,e)});le.get("/:congressId/gallery",async(o,e)=>{let{findInternationalScientificCongressGalleriesByCongressIdController:r}=Kh();await r.handle(o,e)});le.get("/gallery/:id",async(o,e)=>{let{findInternationalScientificCongressGalleryByIdController:r}=Jh();await r.handle(o,e)});le.put("/gallery/:id",(o,e,r)=>{at.authenticated(o,e,r)},H.single("image"),async(o,e)=>{let{updateInternationalScientificCongressGalleryController:r}=Yh();await r.handle(o,e)});le.delete("/gallery/:id",(o,e,r)=>{at.authenticated(o,e,r)},async(o,e)=>{let{deleteInternationalScientificCongressGalleryController:r}=Xh();await r.handle(o,e)});le.post("/:congressId/partner",(o,e,r)=>{at.authenticated(o,e,r)},H.single("logo"),async(o,e)=>{let{createInternationalScientificCongressPartnerController:r}=$h();await r.handle(o,e)});le.get("/:congressId/partner",async(o,e)=>{let{findInternationalScientificCongressPartnersByCongressIdController:r}=Qh();await r.handle(o,e)});le.get("/partner/:id",async(o,e)=>{let{findInternationalScientificCongressPartnerByIdController:r}=eR();await r.handle(o,e)});le.put("/partner/:id",(o,e,r)=>{at.authenticated(o,e,r)},H.single("logo"),async(o,e)=>{let{updateInternationalScientificCongressPartnerController:r}=tR();await r.handle(o,e)});le.delete("/partner/:id",(o,e,r)=>{at.authenticated(o,e,r)},async(o,e)=>{let{deleteInternationalScientificCongressPartnerController:r}=rR();await r.handle(o,e)});import{Router as wx}from"express";import{extendZodWithOpenApi as Rx}from"@asteasolutions/zod-to-openapi";import Jt from"zod";var Ix=1,bx=10;Rx(Jt);var Cx=Jt.object({page:Jt.coerce.number().min(1).default(Ix),limit:Jt.coerce.number().min(1).default(bx),title:Jt.string().optional(),country:Jt.string().optional(),orderBy:Jt.enum(["asc","desc"]).optional()}),Ca=class{constructor(e){this.lawRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=Cx.parse(e.query),s=i*t-i,[m,c]=await Promise.all([this.lawRepository.find({pagination:{offset:s,limit:i},filter:n}),this.lawRepository.count({filter:n})]),d=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:d,offset:s,limit:i,laws:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};var wa=class{constructor(e){this.prisma=e}async create(e){await this.prisma.law.create({data:{...e}})}async update(e){let{id:r,...t}=e;await this.prisma.law.update({where:{id:r},data:t})}async deleteById(e){await this.prisma.law.delete({where:{id:e}})}async find({pagination:e,filter:{title:r,country:t,orderBy:i}}){let n={};return r&&(n.title={contains:r,mode:"insensitive"}),t&&(n.country={contains:t,mode:"insensitive"}),await this.prisma.law.findMany({where:n,orderBy:{updatedAt:i??"desc"},...e&&{skip:e.offset,take:e.limit}})}async findById(e){return await this.prisma.law.findFirst({where:{id:e}})}async count({filter:{title:e,country:r}}){let t={};return e&&(t.title={contains:e,mode:"insensitive"}),r&&(t.country={contains:r,mode:"insensitive"}),await this.prisma.law.count({where:t})}};function Fr(){return new wa(O)}function oR(){return{createLawController:new qi(Fr())}}function iR(){return{findLawsController:new Ca(Fr())}}function nR(){return{findLawByIdController:new Oi(Fr())}}function sR(){return{updateLawController:new Gi(Fr())}}function aR(){return{deleteLawController:new Ui(Fr())}}var Yt=wx(),{authMiddleware:al}=J();Yt.post("/",(o,e,r)=>{al.authenticated(o,e,r)},async(o,e)=>{let{createLawController:r}=oR();await r.handle(o,e)});Yt.get("/",async(o,e)=>{let{findLawsController:r}=iR();await r.handle(o,e)});Yt.get("/:id",async(o,e)=>{let{findLawByIdController:r}=nR();await r.handle(o,e)});Yt.put("/:id",(o,e,r)=>{al.authenticated(o,e,r)},async(o,e)=>{let{updateLawController:r}=sR();await r.handle(o,e)});Yt.delete("/:id",(o,e,r)=>{al.authenticated(o,e,r)},async(o,e)=>{let{deleteLawController:r}=aR();await r.handle(o,e)});import{Router as Ex}from"express";import{extendZodWithOpenApi as Sx}from"@asteasolutions/zod-to-openapi";import Sa from"zod";Sx(Sa);var vx=Sa.object({role:Sa.string().optional(),orderBy:Sa.enum(["asc","desc"]).optional()}),va=class{constructor(e){this.legitimatorCommitteeMemberRepository=e}async handle(e,r){try{let t=vx.parse(e.query),i=await this.legitimatorCommitteeMemberRepository.find({filter:t});r.status(200).json({members:i})}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Ea=class{constructor(e){this.prisma=e}async create(e){await this.prisma.legitimatorCommitteeMember.create({data:{...e,order:e.order??0}})}async update(e){let{id:r,...t}=e;await this.prisma.legitimatorCommitteeMember.update({where:{id:r},data:t})}async deleteById(e){await this.prisma.legitimatorCommitteeMember.delete({where:{id:e}})}async find({filter:{role:e,orderBy:r}}){let t={};return e&&(t.role={contains:e,mode:"insensitive"}),await this.prisma.legitimatorCommitteeMember.findMany({where:t,include:{user:{omit:{passwordHash:!0}}},orderBy:r?[{order:"asc"},{updatedAt:r}]:[{order:"asc"},{updatedAt:"desc"}]})}async findById(e){return await this.prisma.legitimatorCommitteeMember.findFirst({where:{id:e},include:{user:{omit:{passwordHash:!0}}}})}async count({filter:{role:e}}){let r={};return e&&(r.role={contains:e,mode:"insensitive"}),await this.prisma.legitimatorCommitteeMember.count({where:r})}};function Br(){return new Ea(O)}function mR(){return{createLegitimatorCommitteeMemberController:new Ni(Br())}}function cR(){return{findLegitimatorCommitteeMembersController:new va(Br())}}function pR(){return{findLegitimatorCommitteeMemberByIdController:new Wi(Br())}}function dR(){return{updateLegitimatorCommitteeMemberController:new Hi(Br())}}function lR(){return{deleteLegitimatorCommitteeMemberController:new Li(Br())}}var Xt=Ex(),{authMiddleware:ml}=J();Xt.post("/",(o,e,r)=>{ml.authenticated(o,e,r)},async(o,e)=>{let{createLegitimatorCommitteeMemberController:r}=mR();await r.handle(o,e)});Xt.get("/",async(o,e)=>{let{findLegitimatorCommitteeMembersController:r}=cR();await r.handle(o,e)});Xt.get("/:id",async(o,e)=>{let{findLegitimatorCommitteeMemberByIdController:r}=pR();await r.handle(o,e)});Xt.put("/:id",(o,e,r)=>{ml.authenticated(o,e,r)},async(o,e)=>{let{updateLegitimatorCommitteeMemberController:r}=dR();await r.handle(o,e)});Xt.delete("/:id",(o,e,r)=>{ml.authenticated(o,e,r)},async(o,e)=>{let{deleteLegitimatorCommitteeMemberController:r}=lR();await r.handle(o,e)});import{Router as Mx}from"express";import{extendZodWithOpenApi as jx}from"@asteasolutions/zod-to-openapi";import Io from"zod";jx(Io);var xx=Io.object({name:Io.string().optional(),description:Io.string().optional(),orderBy:Io.enum(["asc","desc"]).default("desc")}),ja=class{constructor(e){this.managementTeamRepository=e}async handle(e,r){try{let t=xx.parse(e.query),i=await this.managementTeamRepository.find({filter:t});r.status(200).json({teams:i})}catch(t){if(t instanceof Error)throw new a(t.message)}}};var xa=class{constructor(e){this.prisma=e}async create(e){let{members:r,...t}=e;await this.prisma.$transaction(async i=>{let n=await i.managementTeam.create({data:t});return await i.managementTeamMember.createMany({data:r.map(({userId:s,role:m,order:c})=>({teamId:n.id,userId:s,role:m,order:c??0}))}),n})}async update(e){let{members:r,...t}=e;await this.prisma.$transaction(async i=>{let n=await i.managementTeam.update({where:{id:e.id},data:t});return r!==void 0&&(await i.managementTeamMember.deleteMany({where:{teamId:e.id}}),r.length>0&&await i.managementTeamMember.createMany({data:r.map(({userId:s,role:m,order:c})=>({teamId:e.id,userId:s,role:m,order:c??0}))})),n})}async deleteById(e){await this.prisma.managementTeam.delete({where:{id:e}})}async find({filter:{name:e,description:r,orderBy:t}}){let i={},n=[];return e&&n.push({name:{contains:e,mode:"insensitive"}}),r&&n.push({description:{contains:r,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.managementTeam.findMany({where:i,include:{members:{include:{user:{omit:{passwordHash:!0}}},orderBy:{order:"asc"}}},orderBy:{updatedAt:t}})}async findById(e){return await this.prisma.managementTeam.findFirst({where:{id:e},include:{members:{include:{user:{omit:{passwordHash:!0}}},orderBy:{order:"asc"}}}})}async findByName(e){return await this.prisma.managementTeam.findFirst({where:{name:e},include:{members:{include:{user:{omit:{passwordHash:!0}}},orderBy:{order:"asc"}}}})}async count({filter:{name:e,description:r}}){let t={},i=[];return e&&i.push({name:{contains:e,mode:"insensitive"}}),r&&i.push({description:{contains:r,mode:"insensitive"}}),i.length>0&&(t.OR=i),await this.prisma.managementTeam.count({where:t})}};function qr(){return new xa(O)}function uR(){return{createManagementTeamController:new zi(qr())}}function gR(){return{findManagementTeamsController:new ja(qr())}}function fR(){return{findManagementTeamByIdController:new Zi(qr())}}function yR(){return{updateManagementTeamController:new Ji(qr())}}function hR(){return{deleteManagementTeamController:new Vi(qr())}}var $t=Mx(),{authMiddleware:cl}=J();$t.post("/",(o,e,r)=>{cl.authenticated(o,e,r)},async(o,e)=>{let{createManagementTeamController:r}=uR();await r.handle(o,e)});$t.get("/",async(o,e)=>{let{findManagementTeamsController:r}=gR();await r.handle(o,e)});$t.get("/:id",async(o,e)=>{let{findManagementTeamByIdController:r}=fR();await r.handle(o,e)});$t.put("/:id",(o,e,r)=>{cl.authenticated(o,e,r)},async(o,e)=>{let{updateManagementTeamController:r}=yR();await r.handle(o,e)});$t.delete("/:id",(o,e,r)=>{cl.authenticated(o,e,r)},async(o,e)=>{let{deleteManagementTeamController:r}=hR();await r.handle(o,e)});import{Router as Px}from"express";var Ma=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.meeting.create({data:e})}async update(e){await this.prisma.meeting.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.meeting.delete({where:{id:e}})}async find({pagination:{offset:e,limit:r},filter:{title:t,format:i,status:n,orderBy:s}}){let m={},c=[];return i&&(m.format=i),n&&(m.status=n),t&&c.push({title:{contains:t,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.meeting.findMany({where:m,include:{minutes:!0},orderBy:s?{scheduledAt:s}:{scheduledAt:"desc"},skip:e,take:r})}async findById(e){return await this.prisma.meeting.findFirst({where:{id:e},include:{minutes:!0}})}async findByStatus(e){return await this.prisma.meeting.findMany({where:{status:e},include:{minutes:!0}})}async count({filter:{title:e,format:r,status:t}}){let i={},n=[];return r&&(i.format=r),t&&(i.status=t),e&&n.push({title:{contains:e,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.meeting.count({where:i})}};function mt(){return new Ma(O)}function RR(){return{createMeetingController:new en(mt())}}function IR(){return{findMeetingsController:new sn(mt())}}function bR(){return{findMeetingByIdController:new rn(mt())}}function CR(){return{findMeetingByStatusController:new nn(mt())}}function wR(){return{updateMeetingController:new an(mt())}}function SR(){return{deleteMeetingController:new tn(mt())}}import{extendZodWithOpenApi as Tx}from"@asteasolutions/zod-to-openapi";import pl from"zod";Tx(pl);var Ax=pl.object({meetingId:pl.uuid()}),Ta=class{constructor(e,r){this.meetingMinuteRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{meetingId:t}=Ax.parse({meetingId:e.params.meetingId}),i=await this.meetingMinuteRepository.findByMeetingId(t);if(!i)throw new p("A ata n\xE3o existe para esta reuni\xE3o.");return i.documentUrl&&await this.firebaseStorageService.deleteFile({fileUrl:i.documentUrl}),await this.meetingMinuteRepository.deleteByMeetingId(i.id),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Aa=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.meetingMinute.create({data:e,include:{meeting:!0}})}async update(e){await this.prisma.meetingMinute.update({where:{id:e.id},data:e})}async deleteByMeetingId(e){await this.prisma.meetingMinute.delete({where:{id:e}})}async findByMeetingId(e){return await this.prisma.meetingMinute.findFirst({where:{meetingId:e},include:{meeting:!0}})}};function bo(){return new Aa(O)}function vR(){return{createMeetingMinuteController:new Yi(bo(),mt(),T())}}function ER(){return{findMeetingMinuteByMeetingIdController:new Xi(bo())}}function jR(){return{updateMeetingMinuteByMeetingIdController:new $i(bo(),T())}}function xR(){return{deleteMeetingMinuteByMeetingIdController:new Ta(bo(),T())}}var Fe=Px(),{authMiddleware:Ur}=J();Fe.post("/",(o,e,r)=>{Ur.authenticated(o,e,r)},async(o,e)=>{let{createMeetingController:r}=RR();await r.handle(o,e)});Fe.get("/",async(o,e)=>{let{findMeetingsController:r}=IR();await r.handle(o,e)});Fe.get("/:id",async(o,e)=>{let{findMeetingByIdController:r}=bR();await r.handle(o,e)});Fe.get("/status/:status",async(o,e)=>{let{findMeetingByStatusController:r}=CR();await r.handle(o,e)});Fe.put("/:id",(o,e,r)=>{Ur.authenticated(o,e,r)},async(o,e)=>{let{updateMeetingController:r}=wR();await r.handle(o,e)});Fe.delete("/:id",(o,e,r)=>{Ur.authenticated(o,e,r)},async(o,e)=>{let{deleteMeetingController:r}=SR();await r.handle(o,e)});Fe.post("/:meetingId/minute",(o,e,r)=>{Ur.authenticated(o,e,r)},H.single("document"),async(o,e)=>{let{createMeetingMinuteController:r}=vR();await r.handle(o,e)});Fe.get("/:meetingId/minute",async(o,e)=>{let{findMeetingMinuteByMeetingIdController:r}=ER();await r.handle(o,e)});Fe.put("/:meetingId/minute",(o,e,r)=>{Ur.authenticated(o,e,r)},H.single("document"),async(o,e)=>{let{updateMeetingMinuteByMeetingIdController:r}=jR();await r.handle(o,e)});Fe.delete("/:meetingId/minute",(o,e,r)=>{Ur.authenticated(o,e,r)},async(o,e)=>{let{deleteMeetingMinuteByMeetingIdController:r}=xR();await r.handle(o,e)});import{Router as Dx}from"express";var Pa=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.museum.create({data:e})}async update(e){await this.prisma.museum.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.museum.delete({where:{id:e}})}async find({pagination:e,filter:{name:r,city:t,state:i,country:n,orderBy:s}}){let m={},c=[];return r&&c.push({name:{contains:r,mode:"insensitive"}}),t&&c.push({city:{contains:t,mode:"insensitive"}}),i&&c.push({state:{contains:i,mode:"insensitive"}}),n&&c.push({country:{contains:n,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.museum.findMany({where:m,orderBy:s?{updatedAt:s}:{updatedAt:"desc"},...e&&{skip:e.offset,take:e.limit}})}async findById(e){return await this.prisma.museum.findFirst({where:{id:e}})}async count({filter:{name:e,city:r,state:t,country:i}}){let n={},s=[];return e&&s.push({name:{contains:e,mode:"insensitive"}}),r&&s.push({city:{contains:r,mode:"insensitive"}}),t&&s.push({state:{contains:t,mode:"insensitive"}}),i&&s.push({country:{contains:i,mode:"insensitive"}}),s.length>0&&(n.OR=s),await this.prisma.museum.count({where:n})}};function Or(){return new Pa(O)}function MR(){return{createMuseumController:new mn(Or(),T())}}function TR(){return{findMuseumsController:new ln(Or())}}function AR(){return{findMuseumByIdController:new pn(Or())}}function PR(){return{updateMuseumController:new un(Or(),T())}}function DR(){return{deleteMuseumController:new cn(Or(),T())}}var Qt=Dx(),{authMiddleware:dl}=J();Qt.post("/",(o,e,r)=>{dl.authenticated(o,e,r)},H.single("logo"),async(o,e)=>{let{createMuseumController:r}=MR();await r.handle(o,e)});Qt.get("/",async(o,e)=>{let{findMuseumsController:r}=TR();await r.handle(o,e)});Qt.get("/:id",async(o,e)=>{let{findMuseumByIdController:r}=AR();await r.handle(o,e)});Qt.put("/:id",(o,e,r)=>{dl.authenticated(o,e,r)},H.single("logo"),async(o,e)=>{let{updateMuseumController:r}=PR();await r.handle(o,e)});Qt.delete("/:id",(o,e,r)=>{dl.authenticated(o,e,r)},async(o,e)=>{let{deleteMuseumController:r}=DR();await r.handle(o,e)});import{Router as Nx}from"express";import{extendZodWithOpenApi as Fx}from"@asteasolutions/zod-to-openapi";import ll from"zod";Fx(ll);var Bx=ll.object({id:ll.string()}),Da=class{constructor(e,r){this.newsRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=Bx.parse(e.params),i=e.user.id,n=await this.newsRepository.findById(t);if(!n)throw new p("Not\xEDcia n\xE3o encontrada.");if(n.author.id!==i)throw new xe("Sem permiss\xE3o.");await Promise.all([this.newsRepository.delete(t),this.firebaseStorageService.deleteFile({fileUrl:n.imageUrl})]),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as qx}from"@asteasolutions/zod-to-openapi";import kr from"zod";var Ux=5,FR=1024,Ox=FR*FR,kx=Ux*Ox;qx(kr);var Gx=kr.object({id:kr.string(),title:kr.string().min(1),content:kr.string().min(1),image:kr.any().optional().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=kx,"A imagem deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.")}),Fa=class{constructor(e,r){this.newsRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,title:i,content:n,image:s}=Gx.parse({id:e.params.id,image:e.file,...e.body}),m=await this.newsRepository.findById(t);if(!m)throw new p("Not\xEDcia n\xE3o encontrada.");let c=e.user.id;if(m.author.id!==c)throw new xe("Sem permiss\xE3o.");let d=m.imageUrl||"";s&&m.imageUrl&&(d=await this.firebaseStorageService.updateFile({file:s,folder:j.NEWS,id:t,fileUrl:m.imageUrl}));let y=await this.newsRepository.update({id:t,title:i,content:n,imageUrl:d});r.status(200).json(y)}catch(t){if(t instanceof Error)throw new a(t.message)}}};function BR(){return{createNewsController:new gn(it(),T())}}function qR(){return{findAllNewsController:new Rn(it())}}function UR(){return{findNewsByIdController:new hn(it())}}function OR(){return{findNewsByAuthorIdController:new fn(it())}}function kR(){return{updateNewsController:new Fa(it(),T())}}function GR(){return{deleteNewsController:new Da(it(),T())}}var Dt=Nx(),{authMiddleware:ul}=J();Dt.post("/",(o,e,r)=>{ul.authenticated(o,e,r)},H.single("image"),async(o,e)=>{let{createNewsController:r}=BR();await r.handle(o,e)});Dt.get("/",async(o,e)=>{let{findAllNewsController:r}=qR();await r.handle(o,e)});Dt.get("/:id",async(o,e)=>{let{findNewsByIdController:r}=UR();await r.handle(o,e)});Dt.get("/author/:authorId",async(o,e)=>{let{findNewsByAuthorIdController:r}=OR();await r.handle(o,e)});Dt.put("/:id",(o,e,r)=>{ul.authenticated(o,e,r)},H.single("image"),async(o,e)=>{let{updateNewsController:r}=kR();await r.handle(o,e)});Dt.delete("/:id",(o,e,r)=>{ul.authenticated(o,e,r)},async(o,e)=>{let{deleteNewsController:r}=GR();await r.handle(o,e)});import{Router as Lx}from"express";var Ba=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.partner.create({data:e})}async update(e){await this.prisma.partner.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.partner.delete({where:{id:e}})}async find({pagination:e,filter:{name:r,description:t,category:i,isActive:n,orderBy:s}}){let m={},c=[];return n!==void 0&&(m.isActive=n),r&&c.push({name:{contains:r,mode:"insensitive"}}),t&&c.push({description:{contains:t,mode:"insensitive"}}),i&&c.push({category:{contains:i,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.partner.findMany({where:m,orderBy:s?{updatedAt:s}:{updatedAt:"desc"},...e&&{skip:e.offset,take:e.limit}})}async findById(e){return await this.prisma.partner.findFirst({where:{id:e}})}async count({filter:{name:e,description:r,category:t,isActive:i}}){let n={},s=[];return i!==void 0&&(n.isActive=i),e&&s.push({name:{contains:e,mode:"insensitive"}}),r&&s.push({description:{contains:r,mode:"insensitive"}}),t&&s.push({category:{contains:t,mode:"insensitive"}}),s.length>0&&(n.OR=s),await this.prisma.partner.count({where:n})}};function Gr(){return new Ba(O)}function NR(){return{createPartnerController:new In(Gr(),T())}}function LR(){return{findPartnersController:new Sn(Gr())}}function WR(){return{findPartnerByIdController:new Cn(Gr())}}function _R(){return{updatePartnerController:new vn(Gr(),T())}}function HR(){return{deletePartnerController:new bn(Gr(),T())}}var er=Lx(),{authMiddleware:gl}=J();er.post("/",(o,e,r)=>{gl.authenticated(o,e,r)},H.single("logo"),async(o,e)=>{let{createPartnerController:r}=NR();await r.handle(o,e)});er.get("/",async(o,e)=>{let{findPartnersController:r}=LR();await r.handle(o,e)});er.get("/:id",async(o,e)=>{let{findPartnerByIdController:r}=WR();await r.handle(o,e)});er.put("/:id",(o,e,r)=>{gl.authenticated(o,e,r)},H.single("logo"),async(o,e)=>{let{updatePartnerController:r}=_R();await r.handle(o,e)});er.delete("/:id",(o,e,r)=>{gl.authenticated(o,e,r)},async(o,e)=>{let{deletePartnerController:r}=HR();await r.handle(o,e)});import{Router as Wx}from"express";function zR(){return{createPendencyController:new En(ve(),At(),T())}}function VR(){return{findPendenciesController:new Mn(At())}}function ZR(){return{findPendencyByIdController:new Tn(At())}}function KR(){return{updatePendencyController:new An(At(),T())}}function JR(){return{deletePendencyController:new xn(At(),T())}}var tr=Wx(),{authMiddleware:Co}=J();tr.post("/:user_id",(o,e,r)=>{Co.isAdmin(o,e,r)},H.single("document"),async(o,e)=>{let{createPendencyController:r}=zR();await r.handle(o,e)});tr.get("/",(o,e,r)=>{Co.isAdmin(o,e,r)},async(o,e)=>{let{findPendenciesController:r}=VR();await r.handle(o,e)});tr.get("/:pendency_id",(o,e,r)=>{Co.isAdmin(o,e,r)},async(o,e)=>{let{findPendencyByIdController:r}=ZR();await r.handle(o,e)});tr.put("/:pendency_id",(o,e,r)=>{Co.isAdmin(o,e,r)},H.single("document"),async(o,e)=>{let{updatePendencyController:r}=KR();await r.handle(o,e)});tr.delete("/:pendency_id",(o,e,r)=>{Co.isAdmin(o,e,r)},async(o,e)=>{let{deletePendencyController:r}=JR();await r.handle(o,e)});import{Router as Kx}from"express";import{extendZodWithOpenApi as _x}from"@asteasolutions/zod-to-openapi";import ct from"zod";var Hx=5,YR=1024,zx=YR*YR,Vx=Hx*zx;_x(ct);var Zx=ct.object({title:ct.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),description:ct.string().optional(),startDate:ct.coerce.date(),endDate:ct.coerce.date(),contact:ct.string().min(1,"Contato \xE9 obrigat\xF3rio."),registrationLink:ct.url().optional(),image:ct.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=Vx,"A imagem deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.")}),qa=class{constructor(e,r){this.postGraduateProgramRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{title:t,description:i,startDate:n,endDate:s,contact:m,registrationLink:c,image:d}=Zx.parse({...e.body,image:e.file}),y=await this.postGraduateProgramRepository.create({title:t,description:i,startDate:n,endDate:s,contact:m,registrationLink:c||void 0}),S=await this.firebaseStorageService.uploadFile({file:d,folder:j.POST_GRADUATE_PROGRAM,id:y.id});return await this.postGraduateProgramRepository.update({id:y.id,imageUrl:S}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Ua=class{constructor(e){this.prisma=e}async create({title:e,imageUrl:r,description:t,startDate:i,endDate:n,contact:s,registrationLink:m}){return await this.prisma.postGraduateProgram.create({data:{title:e,imageUrl:r,description:t,startDate:i,endDate:n,contact:s,registrationLink:m}})}async find({pagination:{offset:e,limit:r},filter:{description:t,orderBy:i,title:n,contact:s}}){let m={},c=[];return n&&c.push({title:{contains:n,mode:"insensitive"}}),t&&c.push({description:{contains:t,mode:"insensitive"}}),s&&c.push({contact:{contains:s,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.postGraduateProgram.findMany({where:m,orderBy:{updatedAt:i},skip:e,take:r})}async findById(e){return await this.prisma.postGraduateProgram.findFirst({where:{id:e}})}async update({id:e,title:r,imageUrl:t,description:i,startDate:n,endDate:s,contact:m,registrationLink:c}){await this.prisma.postGraduateProgram.update({where:{id:e},data:{title:r,imageUrl:t,description:i,startDate:n,endDate:s,contact:m,registrationLink:c}})}async deleteById(e){await this.prisma.postGraduateProgram.delete({where:{id:e}})}async count({filter:{description:e,title:r,contact:t}}){let i={},n=[];return r&&n.push({title:{contains:r,mode:"insensitive"}}),e&&n.push({description:{contains:e,mode:"insensitive"}}),t&&n.push({contact:{contains:t,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.postGraduateProgram.count({where:i})}};function Nr(){return new Ua(O)}function XR(){return{createPostGraduateProgramController:new qa(Nr(),T())}}function $R(){return{findPostGraduateProgramsController:new Bn(Nr())}}function QR(){return{findPostGraduateProgramByIdController:new Fn(Nr())}}function eI(){return{updatePostGraduateProgramController:new qn(Nr(),T())}}function tI(){return{deletePostGraduateProgramController:new Dn(Nr(),T())}}var rr=Kx(),{authMiddleware:wo}=J();rr.post("/",(o,e,r)=>{wo.isAdmin(o,e,r)},H.single("image"),async(o,e)=>{let{createPostGraduateProgramController:r}=XR();await r.handle(o,e)});rr.get("/",(o,e,r)=>{wo.isAdmin(o,e,r)},async(o,e)=>{let{findPostGraduateProgramsController:r}=$R();await r.handle(o,e)});rr.get("/:id",(o,e,r)=>{wo.isAdmin(o,e,r)},async(o,e)=>{let{findPostGraduateProgramByIdController:r}=QR();await r.handle(o,e)});rr.put("/:id",(o,e,r)=>{wo.isAdmin(o,e,r)},H.single("image"),async(o,e)=>{let{updatePostGraduateProgramController:r}=eI();await r.handle(o,e)});rr.delete("/:id",(o,e,r)=>{wo.isAdmin(o,e,r)},async(o,e)=>{let{deletePostGraduateProgramController:r}=tI();await r.handle(o,e)});import{Router as Jx}from"express";var Oa=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.redeCTHighlight.create({data:e})}async update(e){await this.prisma.redeCTHighlight.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.redeCTHighlight.delete({where:{id:e}})}async find({pagination:e,filter:{name:r,type:t,description:i,honorableMention:n,orderBy:s}}){let m={},c=[];return t&&(m.type=t),r&&c.push({name:{contains:r,mode:"insensitive"}}),i&&c.push({description:{contains:i,mode:"insensitive"}}),n&&c.push({honorableMention:{contains:n,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.redeCTHighlight.findMany({where:m,orderBy:s?{updatedAt:s}:{updatedAt:"desc"},...e&&{skip:e.offset,take:e.limit}})}async findById(e){return await this.prisma.redeCTHighlight.findFirst({where:{id:e}})}async count({filter:{name:e,type:r,description:t,honorableMention:i}}){let n={},s=[];return r&&(n.type=r),e&&s.push({name:{contains:e,mode:"insensitive"}}),t&&s.push({description:{contains:t,mode:"insensitive"}}),i&&s.push({honorableMention:{contains:i,mode:"insensitive"}}),s.length>0&&(n.OR=s),await this.prisma.redeCTHighlight.count({where:n})}};function Lr(){return new Oa(O)}function rI(){return{createRedeCTHighlightController:new Un(Lr(),T())}}function oI(){return{findRedeCTHighlightsController:new Nn(Lr())}}function iI(){return{findRedeCTHighlightByIdController:new kn(Lr())}}function nI(){return{updateRedeCTHighlightController:new Ln(Lr(),T())}}function sI(){return{deleteRedeCTHighlightController:new On(Lr(),T())}}var or=Jx(),{authMiddleware:fl}=J();or.post("/",(o,e,r)=>{fl.authenticated(o,e,r)},H.single("image"),async(o,e)=>{let{createRedeCTHighlightController:r}=rI();await r.handle(o,e)});or.get("/",async(o,e)=>{let{findRedeCTHighlightsController:r}=oI();await r.handle(o,e)});or.get("/:id",async(o,e)=>{let{findRedeCTHighlightByIdController:r}=iI();await r.handle(o,e)});or.put("/:id",(o,e,r)=>{fl.authenticated(o,e,r)},H.single("image"),async(o,e)=>{let{updateRedeCTHighlightController:r}=nI();await r.handle(o,e)});or.delete("/:id",(o,e,r)=>{fl.authenticated(o,e,r)},async(o,e)=>{let{deleteRedeCTHighlightController:r}=sI();await r.handle(o,e)});import{Router as eM}from"express";import{extendZodWithOpenApi as Yx}from"@asteasolutions/zod-to-openapi";import Wr from"zod";var Xx=1,$x=7;Yx(Wr);var Qx=Wr.object({page:Wr.coerce.number().min(1).default(Xx),limit:Wr.coerce.number().min(1).default($x),role:Wr.string().optional(),orderBy:Wr.enum(["asc","desc"]).optional()}),ka=class{constructor(e){this.referenceCenterTeamMemberRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=Qx.parse(e.query),s=i*t-i,[m,c]=await Promise.all([this.referenceCenterTeamMemberRepository.find({pagination:{offset:s,limit:i},filter:n}),this.referenceCenterTeamMemberRepository.count({filter:n})]),d=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:d,offset:s,limit:i,members:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Ga=class{constructor(e){this.prisma=e}async create(e){await this.prisma.referenceCenterTeamMember.create({data:{...e}})}async update(e){let{id:r,...t}=e;await this.prisma.referenceCenterTeamMember.update({where:{id:r},data:t})}async deleteById(e){await this.prisma.referenceCenterTeamMember.delete({where:{id:e}})}async find({pagination:e,filter:{role:r,orderBy:t}}){let i={};return r&&(i.role={contains:r,mode:"insensitive"}),await this.prisma.referenceCenterTeamMember.findMany({where:i,include:{user:{omit:{passwordHash:!0}}},orderBy:{updatedAt:t??"desc"},...e&&{skip:e.offset,take:e.limit}})}async findById(e){return await this.prisma.referenceCenterTeamMember.findFirst({where:{id:e},include:{user:{omit:{passwordHash:!0}}}})}async count({filter:{role:e}}){let r={};return e&&(r.role={contains:e,mode:"insensitive"}),await this.prisma.referenceCenterTeamMember.count({where:r})}};function _r(){return new Ga(O)}function aI(){return{createReferenceCenterTeamMemberController:new Wn(_r())}}function mI(){return{findReferenceCenterTeamMembersController:new ka(_r())}}function cI(){return{findReferenceCenterTeamMemberByIdController:new Hn(_r())}}function pI(){return{updateReferenceCenterTeamMemberController:new Vn(_r())}}function dI(){return{deleteReferenceCenterTeamMemberController:new _n(_r())}}var ir=eM(),{authMiddleware:yl}=J();ir.post("/",(o,e,r)=>{yl.authenticated(o,e,r)},async(o,e)=>{let{createReferenceCenterTeamMemberController:r}=aI();await r.handle(o,e)});ir.get("/",async(o,e)=>{let{findReferenceCenterTeamMembersController:r}=mI();await r.handle(o,e)});ir.get("/:id",async(o,e)=>{let{findReferenceCenterTeamMemberByIdController:r}=cI();await r.handle(o,e)});ir.put("/:id",(o,e,r)=>{yl.authenticated(o,e,r)},async(o,e)=>{let{updateReferenceCenterTeamMemberController:r}=pI();await r.handle(o,e)});ir.delete("/:id",(o,e,r)=>{yl.authenticated(o,e,r)},async(o,e)=>{let{deleteReferenceCenterTeamMemberController:r}=dI();await r.handle(o,e)});import{Router as tM}from"express";var Na=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.regiment.create({data:e})}async update(e){await this.prisma.regiment.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.regiment.delete({where:{id:e}})}async find({pagination:{offset:e,limit:r},filter:{title:t,status:i,orderBy:n}}){let s={},m=[];return i&&(s.status=i),t&&m.push({title:{contains:t,mode:"insensitive"}}),m.length>0&&(s.OR=m),await this.prisma.regiment.findMany({where:s,orderBy:n?{updatedAt:n}:{updatedAt:"desc"},skip:e,take:r})}async findById(e){return await this.prisma.regiment.findFirst({where:{id:e}})}async findByStatus(e){return await this.prisma.regiment.findMany({where:{status:e}})}async count({filter:{title:e,status:r}}){let t={},i=[];return r&&(t.status=r),e&&i.push({title:{contains:e,mode:"insensitive"}}),i.length>0&&(t.OR=i),await this.prisma.regiment.count({where:t})}};function nr(){return new Na(O)}function lI(){return{createRegimentController:new Zn(nr(),T())}}function uI(){return{findRegimentsController:new $n(nr())}}function gI(){return{findRegimentByIdController:new Jn(nr())}}function fI(){return{findRegimentByStatusController:new Xn(nr())}}function yI(){return{updateRegimentController:new Qn(nr(),T())}}function hI(){return{deleteRegimentController:new Kn(nr(),T())}}var Ft=tM(),{authMiddleware:hl}=J();Ft.post("/",(o,e,r)=>{hl.authenticated(o,e,r)},H.single("document"),async(o,e)=>{let{createRegimentController:r}=lI();await r.handle(o,e)});Ft.get("/",async(o,e)=>{let{findRegimentsController:r}=uI();await r.handle(o,e)});Ft.get("/:id",async(o,e)=>{let{findRegimentByIdController:r}=gI();await r.handle(o,e)});Ft.get("/status/:status",async(o,e)=>{let{findRegimentByStatusController:r}=fI();await r.handle(o,e)});Ft.put("/:id",(o,e,r)=>{hl.authenticated(o,e,r)},H.single("document"),async(o,e)=>{let{updateRegimentController:r}=yI();await r.handle(o,e)});Ft.delete("/:id",(o,e,r)=>{hl.authenticated(o,e,r)},async(o,e)=>{let{deleteRegimentController:r}=hI();await r.handle(o,e)});import{Router as sM}from"express";import{extendZodWithOpenApi as rM}from"@asteasolutions/zod-to-openapi";import Rl from"zod";rM(Rl);var oM=Rl.object({id:Rl.string().uuid("ID inv\xE1lido")}),La=class{constructor(e){this.regionalCongressGalleryRepository=e}async handle(e,r){try{let{id:t}=oM.parse(e.params),i=await this.regionalCongressGalleryRepository.findById(t);if(!i)throw new p("Item de galeria n\xE3o encontrado");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Wa=class{constructor(e){this.prisma=e}async create(e){await this.prisma.regionalCongress.create({data:e})}async update(e){await this.prisma.regionalCongress.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.regionalCongress.delete({where:{id:e}})}async find({pagination:{offset:e,limit:r},filter:{title:t,edition:i,location:n,orderBy:s}}){let m={},c=[];return i&&c.push({edition:{equals:i}}),t&&c.push({title:{contains:t,mode:"insensitive"}}),n&&c.push({location:{contains:n,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.regionalCongress.findMany({where:m,include:{regionalCongressPartners:!0,regionalCongressGalleryItems:!0},orderBy:s?{startDate:s}:{startDate:"desc"},skip:e,take:r})}async findById(e){return await this.prisma.regionalCongress.findFirst({where:{id:e},include:{regionalCongressPartners:!0,regionalCongressGalleryItems:!0}})}async findByEdition(e){return await this.prisma.regionalCongress.findMany({where:{edition:e},include:{regionalCongressPartners:!0,regionalCongressGalleryItems:!0}})}async count({filter:{title:e,edition:r,location:t}}){let i={},n=[];return r&&n.push({edition:{equals:r}}),e&&n.push({title:{contains:e,mode:"insensitive"}}),t&&n.push({location:{contains:t,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.regionalCongress.count({where:i})}};function Le(){return new Wa(O)}var _a=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.regionalCongressGalleryItem.create({data:e})}async update(e){await this.prisma.regionalCongressGalleryItem.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.regionalCongressGalleryItem.delete({where:{id:e}})}async findByCongressId({pagination:e,filter:r}){return await this.prisma.regionalCongressGalleryItem.findMany({where:{congressId:r.congressId,...r.caption&&{caption:{contains:r.caption,mode:"insensitive"}}},skip:e.offset,take:e.limit})}async findById(e){return await this.prisma.regionalCongressGalleryItem.findFirst({where:{id:e}})}async count({filter:e}){return await this.prisma.regionalCongressGalleryItem.count({where:{congressId:e.congressId,...e.caption&&{caption:{contains:e.caption,mode:"insensitive"}}}})}};function Hr(){return new _a(O)}function RI(){return{createRegionalCongressGalleryController:new es(Hr(),Le(),T())}}function II(){return{findRegionalCongressGalleriesByCongressIdController:new os(Hr())}}function bI(){return{findRegionalCongressGalleryByIdController:new La(Hr())}}function CI(){return{updateRegionalCongressGalleryController:new is(Hr(),T())}}function wI(){return{deleteRegionalCongressGalleryController:new ts(Hr())}}import{extendZodWithOpenApi as iM}from"@asteasolutions/zod-to-openapi";import Il from"zod";iM(Il);var nM=Il.object({id:Il.string().uuid("ID inv\xE1lido")}),Ha=class{constructor(e){this.regionalCongressPartnerRepository=e}async handle(e,r){try{let{id:t}=nM.parse(e.params),i=await this.regionalCongressPartnerRepository.findById(t);if(!i)throw new p("Parceiro n\xE3o encontrado");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var za=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.regionalCongressPartner.create({data:e})}async update(e){await this.prisma.regionalCongressPartner.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.regionalCongressPartner.delete({where:{id:e}})}async findByCongressId(e){return await this.prisma.regionalCongressPartner.findMany({where:{congressId:e.filter.congressId,name:e.filter.name?{contains:e.filter.name,mode:"insensitive"}:void 0},skip:e.pagination?.offset,take:e.pagination?.limit})}async findById(e){return await this.prisma.regionalCongressPartner.findFirst({where:{id:e}})}async count(e){return await this.prisma.regionalCongressPartner.count({where:{congressId:e.filter.congressId,name:e.filter.name?{contains:e.filter.name,mode:"insensitive"}:void 0}})}};function zr(){return new za(O)}function SI(){return{createRegionalCongressPartnerController:new ns(zr(),Le(),T())}}function vI(){return{findRegionalCongressPartnersByCongressIdController:new ms(zr())}}function EI(){return{findRegionalCongressPartnerByIdController:new Ha(zr())}}function jI(){return{updateRegionalCongressPartnerController:new cs(zr(),T())}}function xI(){return{deleteRegionalCongressPartnerController:new ss(zr())}}function MI(){return{createRegionalCongressController:new ps(Le())}}function TI(){return{findRegionalCongressesController:new fs(Le())}}function AI(){return{findRegionalCongressByIdController:new us(Le())}}function PI(){return{findRegionalCongressByEditionController:new ls(Le())}}function DI(){return{updateRegionalCongressController:new ys(Le())}}function FI(){return{deleteRegionalCongressController:new ds(Le())}}var ue=sM(),{authMiddleware:pt}=J();ue.post("/",(o,e,r)=>{pt.authenticated(o,e,r)},async(o,e)=>{let{createRegionalCongressController:r}=MI();await r.handle(o,e)});ue.get("/",async(o,e)=>{let{findRegionalCongressesController:r}=TI();await r.handle(o,e)});ue.get("/:id",async(o,e)=>{let{findRegionalCongressByIdController:r}=AI();await r.handle(o,e)});ue.get("/edition/:edition",async(o,e)=>{let{findRegionalCongressByEditionController:r}=PI();await r.handle(o,e)});ue.put("/:id",(o,e,r)=>{pt.authenticated(o,e,r)},async(o,e)=>{let{updateRegionalCongressController:r}=DI();await r.handle(o,e)});ue.delete("/:id",(o,e,r)=>{pt.authenticated(o,e,r)},async(o,e)=>{let{deleteRegionalCongressController:r}=FI();await r.handle(o,e)});ue.post("/:congressId/gallery",(o,e,r)=>{pt.authenticated(o,e,r)},H.single("image"),async(o,e)=>{let{createRegionalCongressGalleryController:r}=RI();await r.handle(o,e)});ue.get("/:congressId/gallery",async(o,e)=>{let{findRegionalCongressGalleriesByCongressIdController:r}=II();await r.handle(o,e)});ue.get("/gallery/:id",async(o,e)=>{let{findRegionalCongressGalleryByIdController:r}=bI();await r.handle(o,e)});ue.put("/gallery/:id",(o,e,r)=>{pt.authenticated(o,e,r)},H.single("image"),async(o,e)=>{let{updateRegionalCongressGalleryController:r}=CI();await r.handle(o,e)});ue.delete("/gallery/:id",(o,e,r)=>{pt.authenticated(o,e,r)},async(o,e)=>{let{deleteRegionalCongressGalleryController:r}=wI();await r.handle(o,e)});ue.post("/:congressId/partner",(o,e,r)=>{pt.authenticated(o,e,r)},H.single("logo"),async(o,e)=>{let{createRegionalCongressPartnerController:r}=SI();await r.handle(o,e)});ue.get("/:congressId/partner",async(o,e)=>{let{findRegionalCongressPartnersByCongressIdController:r}=vI();await r.handle(o,e)});ue.get("/partner/:id",async(o,e)=>{let{findRegionalCongressPartnerByIdController:r}=EI();await r.handle(o,e)});ue.put("/partner/:id",(o,e,r)=>{pt.authenticated(o,e,r)},H.single("logo"),async(o,e)=>{let{updateRegionalCongressPartnerController:r}=jI();await r.handle(o,e)});ue.delete("/partner/:id",(o,e,r)=>{pt.authenticated(o,e,r)},async(o,e)=>{let{deleteRegionalCongressPartnerController:r}=xI();await r.handle(o,e)});import{Router as lM}from"express";import{extendZodWithOpenApi as aM}from"@asteasolutions/zod-to-openapi";import Be from"zod";var mM=5,BI=1024,cM=BI*BI,pM=mM*cM;aM(Be);var dM=Be.object({name:Be.string().min(1,"Nome \xE9 obrigat\xF3rio."),acronym:Be.string().optional(),description:Be.string().optional(),url:Be.url("URL deve ser v\xE1lida.").optional(),foundedAt:Be.coerce.date(),scope:Be.string().optional(),email:Be.email("E-mail deve ser v\xE1lido.").optional(),leaderId:Be.uuid("L\xEDder \xE9 obrigat\xF3rio."),deputyLeaderId:Be.uuid("Vice-l\xEDder \xE9 obrigat\xF3rio."),logo:Be.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=pM,"O logo deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.").optional()}),Va=class{constructor(e,r){this.researchGroupRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{name:t,acronym:i,description:n,url:s,foundedAt:m,scope:c,email:d,leaderId:y,deputyLeaderId:S,logo:A}=dM.parse({...e.body,logo:e.file}),$=await this.researchGroupRepository.create({name:t,acronym:i,description:n,url:s,foundedAt:m,scope:c,email:d,leaderId:y,deputyLeaderId:S});if(A){let oe=await this.firebaseStorageService.uploadFile({file:A,folder:j.RESEARCH_GROUP_LOGO,id:$.id});await this.researchGroupRepository.update({id:$.id,logoUrl:oe})}return r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Za=class{constructor(e){this.prisma=e}async create({name:e,acronym:r,description:t,url:i,logoUrl:n,foundedAt:s,scope:m,email:c,leaderId:d,deputyLeaderId:y}){return await this.prisma.researchGroup.create({data:{name:e,acronym:r,description:t,url:i,logoUrl:n,foundedAt:s,scope:m,email:c,leaderId:d,deputyLeaderId:y}})}async find({pagination:{offset:e,limit:r},filter:{name:t,acronym:i,description:n,leader:s,orderBy:m}}){let c={},d=[];return t&&d.push({name:{contains:t,mode:"insensitive"}}),i&&d.push({acronym:{contains:i,mode:"insensitive"}}),n&&d.push({description:{contains:n,mode:"insensitive"}}),s&&d.push({leader:{name:{contains:s,mode:"insensitive"}}}),d.length>0&&(c.OR=d),await this.prisma.researchGroup.findMany({where:c,include:{leader:{omit:{passwordHash:!0}},deputyLeader:{omit:{passwordHash:!0}}},orderBy:{updatedAt:m},skip:e,take:r})}async findById(e){return await this.prisma.researchGroup.findFirst({where:{id:e},include:{leader:{omit:{passwordHash:!0}},deputyLeader:{omit:{passwordHash:!0}}}})}async update({id:e,name:r,acronym:t,description:i,url:n,logoUrl:s,foundedAt:m,scope:c,email:d,leaderId:y,deputyLeaderId:S}){await this.prisma.researchGroup.update({where:{id:e},data:{name:r,acronym:t,description:i,url:n,logoUrl:s,foundedAt:m,scope:c,email:d,leaderId:y,deputyLeaderId:S}})}async deleteById(e){await this.prisma.researchGroup.delete({where:{id:e}})}async count({filter:{name:e,acronym:r,description:t,leader:i}}){let n={},s=[];return e&&s.push({name:{contains:e,mode:"insensitive"}}),r&&s.push({acronym:{contains:r,mode:"insensitive"}}),t&&s.push({description:{contains:t,mode:"insensitive"}}),i&&s.push({leader:{name:{contains:i,mode:"insensitive"}}}),s.length>0&&(n.OR=s),await this.prisma.researchGroup.count({where:n})}};function Vr(){return new Za(O)}function qI(){return{createResearchGroupController:new Va(Vr(),T())}}function UI(){return{findResearchGroupsController:new Is(Vr())}}function OI(){return{findResearchGroupByIdController:new Rs(Vr())}}function kI(){return{updateResearchGroupController:new bs(Vr(),T())}}function GI(){return{deleteResearchGroupController:new hs(Vr(),T())}}var sr=lM(),{authMiddleware:So}=J();sr.post("/",(o,e,r)=>{So.isAdmin(o,e,r)},H.single("logo"),async(o,e)=>{let{createResearchGroupController:r}=qI();await r.handle(o,e)});sr.get("/",(o,e,r)=>{So.isAdmin(o,e,r)},async(o,e)=>{let{findResearchGroupsController:r}=UI();await r.handle(o,e)});sr.get("/:id",(o,e,r)=>{So.isAdmin(o,e,r)},async(o,e)=>{let{findResearchGroupByIdController:r}=OI();await r.handle(o,e)});sr.put("/:id",(o,e,r)=>{So.isAdmin(o,e,r)},H.single("logo"),async(o,e)=>{let{updateResearchGroupController:r}=kI();await r.handle(o,e)});sr.delete("/:id",(o,e,r)=>{So.isAdmin(o,e,r)},async(o,e)=>{let{deleteResearchGroupController:r}=GI();await r.handle(o,e)});import{Router as hM}from"express";import{extendZodWithOpenApi as uM}from"@asteasolutions/zod-to-openapi";import be from"zod";var gM=1,fM=9;uM(be);var yM=be.object({page:be.coerce.number().min(1).default(gM),limit:be.coerce.number().min(1).default(fM),userId:be.string().optional(),registrationNumber:be.string().optional(),name:be.string().optional(),emailAddress:be.string().optional(),mainEtps:be.string().optional(),formations:be.string().optional(),occupations:be.string().optional(),institutions:be.string().optional(),biography:be.string().optional(),orderBy:be.enum(["asc","desc"]).default("desc")}),Ka=class{constructor(e){this.researcherRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=yM.parse(e.query),s=i*t-i,[m,c]=await Promise.all([this.researcherRepository.find({pagination:{offset:s,limit:i},filter:{userName:n.name,...n}}),this.researcherRepository.count({filter:{userName:n.name,...n}})]),d=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:d,offset:s,limit:i,researchers:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Ja=class{constructor(e){this.prisma=e}async create(e){await this.prisma.researcher.create({data:e})}async update(e){await this.prisma.researcher.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.researcher.delete({where:{id:e}})}async find({pagination:e,filter:{biography:r,degrees:t,formations:i,institutions:n,mainEtps:s,occupations:m,orderBy:c,registrationNumber:d,seniority:y,userId:S,userName:A}}){let $={},oe=[];return A&&oe.push({user:{name:{contains:A,mode:"insensitive"}}}),d&&oe.push({registrationNumber:{contains:d,mode:"insensitive"}}),s&&oe.push({mainEtps:{contains:s,mode:"insensitive"}}),i&&oe.push({formations:{contains:i,mode:"insensitive"}}),m&&oe.push({occupations:{contains:m,mode:"insensitive"}}),n&&oe.push({institutions:{contains:n,mode:"insensitive"}}),r&&oe.push({biography:{contains:r,mode:"insensitive"}}),oe.length>0&&($.OR=oe),t&&t.length>0&&($.degrees={hasSome:t}),y&&($.seniority=y),S&&($.userId={equals:S}),await this.prisma.researcher.findMany({where:$,omit:{userId:!0},include:{user:{omit:{passwordHash:!0}}},orderBy:{updatedAt:c},...e&&{skip:e.offset,take:e.limit}})}async findById(e){return await this.prisma.researcher.findFirst({where:{id:e},include:{user:{omit:{passwordHash:!0}}}})}async findByUserId(e){return await this.prisma.researcher.findFirst({where:{userId:e},include:{user:{omit:{passwordHash:!0}}}})}async findByRegistrationNumber(e){return await this.prisma.researcher.findFirst({where:{registrationNumber:e},include:{user:{omit:{passwordHash:!0}}}})}async count({filter:{biography:e,degrees:r,formations:t,institutions:i,mainEtps:n,occupations:s,registrationNumber:m,seniority:c,userId:d,userName:y}}){let S={},A=[];return y&&A.push({user:{name:{contains:y,mode:"insensitive"}}}),m&&A.push({registrationNumber:{contains:m,mode:"insensitive"}}),A.length>0&&(S.OR=A),n&&(S.mainEtps={contains:n,mode:"insensitive"}),t&&(S.formations={contains:t,mode:"insensitive"}),r&&r.length>0&&(S.degrees={hasSome:r}),s&&(S.occupations={contains:s,mode:"insensitive"}),c&&(S.seniority=c),i&&(S.institutions={contains:i,mode:"insensitive"}),e&&(S.biography={contains:e,mode:"insensitive"}),d&&(S.userId={equals:d}),await this.prisma.researcher.count({where:S})}};function ar(){return new Ja(O)}function NI(){return{createResearcherController:new Cs(ar())}}function LI(){return{findResearchersController:new Ka(ar())}}function WI(){return{findResearcherByIdController:new Ss(ar())}}function _I(){return{findResearcherByUserIdController:new Es(ar())}}function HI(){return{updateResearcherController:new js(ar())}}function zI(){return{deleteResearcherController:new ws(ar())}}var Bt=hM(),{authMiddleware:bl}=J();Bt.post("/",(o,e,r)=>{bl.authenticated(o,e,r)},async(o,e)=>{let{createResearcherController:r}=NI();await r.handle(o,e)});Bt.get("/",async(o,e)=>{let{findResearchersController:r}=LI();await r.handle(o,e)});Bt.get("/:id",async(o,e)=>{let{findResearcherByIdController:r}=WI();await r.handle(o,e)});Bt.get("/user/:userId",async(o,e)=>{let{findResearcherByUserIdController:r}=_I();await r.handle(o,e)});Bt.put("/:id",(o,e,r)=>{bl.authenticated(o,e,r)},async(o,e)=>{let{updateResearcherController:r}=HI();await r.handle(o,e)});Bt.delete("/:id",(o,e,r)=>{bl.authenticated(o,e,r)},async(o,e)=>{let{deleteResearcherController:r}=zI();await r.handle(o,e)});import{Router as bM}from"express";import{extendZodWithOpenApi as RM}from"@asteasolutions/zod-to-openapi";import ge from"zod";RM(ge);var IM=ge.object({title:ge.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),author:ge.string().min(1,"Autor \xE9 obrigat\xF3rio."),journal:ge.string().optional(),volume:ge.string().optional(),edition:ge.string().optional(),pageStart:ge.coerce.number().optional(),pageEnd:ge.coerce.number().optional(),startDate:ge.coerce.date(),endDate:ge.coerce.date(),city:ge.string().optional(),state:ge.string().optional(),country:ge.string().optional(),publisher:ge.string().optional(),description:ge.string().optional(),year:ge.coerce.number().optional(),accessUrl:ge.url().optional()}),Ya=class{constructor(e){this.scientificArticlesRepository=e}async handle(e,r){try{let{title:t,author:i,journal:n,volume:s,edition:m,pageStart:c,pageEnd:d,startDate:y,endDate:S,city:A,state:$,country:oe,publisher:ae,description:ye,year:eo,accessUrl:mm}=IM.parse(e.body);return await this.scientificArticlesRepository.create({title:t,author:i,journal:n,volume:s,edition:m,pageStart:c,pageEnd:d,startDate:y,endDate:S,city:A,state:$,country:oe,publisher:ae,description:ye,year:eo,accessUrl:mm}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Xa=class{constructor(e){this.prisma=e}async create({title:e,author:r,journal:t,volume:i,edition:n,pageStart:s,pageEnd:m,startDate:c,endDate:d,city:y,state:S,country:A,publisher:$,description:oe,year:ae,accessUrl:ye}){return await this.prisma.scientificArticle.create({data:{title:e,author:r,journal:t,volume:i,edition:n,pageStart:s,pageEnd:m,startDate:c,endDate:d,city:y,state:S,country:A,publisher:$,description:oe,year:ae,accessUrl:ye}})}async find({pagination:{offset:e,limit:r},filter:{title:t,author:i,journal:n,orderBy:s}}){let m={},c=[];return t&&c.push({title:{contains:t,mode:"insensitive"}}),i&&c.push({author:{contains:i,mode:"insensitive"}}),n&&c.push({journal:{contains:n,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.scientificArticle.findMany({where:m,orderBy:{updatedAt:s},skip:e,take:r})}async findById(e){return await this.prisma.scientificArticle.findFirst({where:{id:e}})}async update({id:e,title:r,author:t,journal:i,volume:n,edition:s,pageStart:m,pageEnd:c,startDate:d,endDate:y,city:S,state:A,country:$,publisher:oe,description:ae,year:ye,accessUrl:eo}){await this.prisma.scientificArticle.update({where:{id:e},data:{title:r,author:t,journal:i,volume:n,edition:s,pageStart:m,pageEnd:c,startDate:d,endDate:y,city:S,state:A,country:$,publisher:oe,description:ae,year:ye,accessUrl:eo}})}async deleteById(e){await this.prisma.scientificArticle.delete({where:{id:e}})}async count({filter:{title:e,author:r,journal:t}}){let i={},n=[];return e&&n.push({title:{contains:e,mode:"insensitive"}}),r&&n.push({author:{contains:r,mode:"insensitive"}}),t&&n.push({journal:{contains:t,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.scientificArticle.count({where:i})}};function Zr(){return new Xa(O)}function VI(){return{createScientificArticleController:new Ya(Zr())}}function ZI(){return{findScientificArticlesController:new Ts(Zr())}}function KI(){return{findScientificArticleByIdController:new Ms(Zr())}}function JI(){return{updateScientificArticleController:new As(Zr())}}function YI(){return{deleteScientificArticleController:new xs(Zr())}}var mr=bM(),{authMiddleware:vo}=J();mr.post("/",(o,e,r)=>{vo.isAdmin(o,e,r)},async(o,e)=>{let{createScientificArticleController:r}=VI();await r.handle(o,e)});mr.get("/",(o,e,r)=>{vo.isAdmin(o,e,r)},async(o,e)=>{let{findScientificArticlesController:r}=ZI();await r.handle(o,e)});mr.get("/:id",(o,e,r)=>{vo.isAdmin(o,e,r)},async(o,e)=>{let{findScientificArticleByIdController:r}=KI();await r.handle(o,e)});mr.put("/:id",(o,e,r)=>{vo.isAdmin(o,e,r)},async(o,e)=>{let{updateScientificArticleController:r}=JI();await r.handle(o,e)});mr.delete("/:id",(o,e,r)=>{vo.isAdmin(o,e,r)},async(o,e)=>{let{deleteScientificArticleController:r}=YI();await r.handle(o,e)});import{Router as jM}from"express";import{extendZodWithOpenApi as CM}from"@asteasolutions/zod-to-openapi";import dt from"zod";var wM=5,XI=1024,SM=XI*XI,vM=wM*SM;CM(dt);var EM=dt.object({name:dt.string().min(1,"Nome \xE9 obrigat\xF3rio."),issn:dt.string().min(1,"ISSN \xE9 obrigat\xF3rio."),description:dt.string().min(1,"Descri\xE7\xE3o \xE9 obrigat\xF3ria."),journalUrl:dt.url("URL da revista deve ser v\xE1lida."),directors:dt.string().optional(),editorialBoard:dt.string().optional(),logo:dt.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=vM,"O logo deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.").optional()}),$a=class{constructor(e,r){this.scientificJournalRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{name:t,issn:i,description:n,journalUrl:s,directors:m,editorialBoard:c,logo:d}=EM.parse({...e.body,logo:e.file}),y=await this.scientificJournalRepository.create({name:t,issn:i,description:n,journalUrl:s,directors:m,editorialBoard:c});if(d){let S=await this.firebaseStorageService.uploadFile({file:d,folder:j.SCIENTIFIC_JOURNAL,id:y.id});await this.scientificJournalRepository.update({id:y.id,logoUrl:S})}return r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Qa=class{constructor(e){this.prisma=e}async create({name:e,issn:r,description:t,logoUrl:i,journalUrl:n,directors:s,editorialBoard:m}){return await this.prisma.scientificJournal.create({data:{name:e,issn:r,description:t,logoUrl:i,journalUrl:n,directors:s,editorialBoard:m}})}async find({pagination:{offset:e,limit:r},filter:{name:t,description:i,issn:n,directors:s,editorialBoard:m,orderBy:c}}){let d={},y=[];return t&&y.push({name:{contains:t,mode:"insensitive"}}),i&&y.push({description:{contains:i,mode:"insensitive"}}),n&&y.push({issn:{contains:n,mode:"insensitive"}}),s&&y.push({directors:{contains:s,mode:"insensitive"}}),m&&y.push({editorialBoard:{contains:m,mode:"insensitive"}}),y.length>0&&(d.OR=y),await this.prisma.scientificJournal.findMany({where:d,orderBy:{updatedAt:c},skip:e,take:r})}async findById(e){return await this.prisma.scientificJournal.findFirst({where:{id:e}})}async update({id:e,name:r,issn:t,description:i,logoUrl:n,journalUrl:s,directors:m,editorialBoard:c}){await this.prisma.scientificJournal.update({where:{id:e},data:{name:r,issn:t,description:i,logoUrl:n,journalUrl:s,directors:m,editorialBoard:c}})}async deleteById(e){await this.prisma.scientificJournal.delete({where:{id:e}})}async count({filter:{name:e,description:r,issn:t,directors:i,editorialBoard:n}}){let s={},m=[];return e&&m.push({name:{contains:e,mode:"insensitive"}}),r&&m.push({description:{contains:r,mode:"insensitive"}}),t&&m.push({issn:{contains:t,mode:"insensitive"}}),i&&m.push({directors:{contains:i,mode:"insensitive"}}),n&&m.push({editorialBoard:{contains:n,mode:"insensitive"}}),m.length>0&&(s.OR=m),await this.prisma.scientificJournal.count({where:s})}};function Kr(){return new Qa(O)}function $I(){return{createScientificJournalController:new $a(Kr(),T())}}function QI(){return{findScientificJournalsController:new Fs(Kr())}}function eb(){return{findScientificJournalByIdController:new Ds(Kr())}}function tb(){return{updateScientificJournalController:new Bs(Kr(),T())}}function rb(){return{deleteScientificJournalController:new Ps(Kr(),T())}}var cr=jM(),{authMiddleware:Eo}=J();cr.post("/",(o,e,r)=>{Eo.isAdmin(o,e,r)},H.single("logo"),async(o,e)=>{let{createScientificJournalController:r}=$I();await r.handle(o,e)});cr.get("/",(o,e,r)=>{Eo.isAdmin(o,e,r)},async(o,e)=>{let{findScientificJournalsController:r}=QI();await r.handle(o,e)});cr.get("/:id",(o,e,r)=>{Eo.isAdmin(o,e,r)},async(o,e)=>{let{findScientificJournalByIdController:r}=eb();await r.handle(o,e)});cr.put("/:id",(o,e,r)=>{Eo.isAdmin(o,e,r)},H.single("logo"),async(o,e)=>{let{updateScientificJournalController:r}=tb();await r.handle(o,e)});cr.delete("/:id",(o,e,r)=>{Eo.isAdmin(o,e,r)},async(o,e)=>{let{deleteScientificJournalController:r}=rb();await r.handle(o,e)});import{Router as TM}from"express";import{extendZodWithOpenApi as xM}from"@asteasolutions/zod-to-openapi";import em from"zod";xM(em);var MM=em.object({role:em.string().optional(),orderBy:em.enum(["asc","desc"]).optional()}),tm=class{constructor(e){this.sdhcTeamMemberRepository=e}async handle(e,r){try{let t=MM.parse(e.query),i=await this.sdhcTeamMemberRepository.find({filter:t});r.status(200).json({members:i})}catch(t){if(t instanceof Error)throw new a(t.message)}}};var rm=class{constructor(e){this.prisma=e}async create(e){await this.prisma.sDHCTeamMember.create({data:{...e,order:e.order??0}})}async update(e){let{id:r,...t}=e;await this.prisma.sDHCTeamMember.update({where:{id:r},data:t})}async deleteById(e){await this.prisma.sDHCTeamMember.delete({where:{id:e}})}async find({filter:{role:e,orderBy:r}}){let t={};return e&&(t.role={contains:e,mode:"insensitive"}),await this.prisma.sDHCTeamMember.findMany({where:t,include:{user:{omit:{passwordHash:!0}}},orderBy:r?[{order:"asc"},{updatedAt:r}]:[{order:"asc"},{updatedAt:"desc"}]})}async findById(e){return await this.prisma.sDHCTeamMember.findFirst({where:{id:e},include:{user:{omit:{passwordHash:!0}}}})}async count({filter:{role:e}}){let r={};return e&&(r.role={contains:e,mode:"insensitive"}),await this.prisma.sDHCTeamMember.count({where:r})}};function Jr(){return new rm(O)}function ob(){return{createSDHCTeamMemberController:new qs(Jr())}}function ib(){return{findSDHCTeamMembersController:new tm(Jr())}}function nb(){return{findSDHCTeamMemberByIdController:new Os(Jr())}}function sb(){return{updateSDHCTeamMemberController:new Gs(Jr())}}function ab(){return{deleteSDHCTeamMemberController:new Us(Jr())}}var pr=TM(),{authMiddleware:Cl}=J();pr.post("/",(o,e,r)=>{Cl.authenticated(o,e,r)},async(o,e)=>{let{createSDHCTeamMemberController:r}=ob();await r.handle(o,e)});pr.get("/",async(o,e)=>{let{findSDHCTeamMembersController:r}=ib();await r.handle(o,e)});pr.get("/:id",async(o,e)=>{let{findSDHCTeamMemberByIdController:r}=nb();await r.handle(o,e)});pr.put("/:id",(o,e,r)=>{Cl.authenticated(o,e,r)},async(o,e)=>{let{updateSDHCTeamMemberController:r}=sb();await r.handle(o,e)});pr.delete("/:id",(o,e,r)=>{Cl.authenticated(o,e,r)},async(o,e)=>{let{deleteSDHCTeamMemberController:r}=ab();await r.handle(o,e)});import{Router as AM}from"express";var om=class{constructor(e){this.userRepository=e}async handle(e,r){try{let t=await this.userRepository.find();r.status(200).json(t)}catch(t){if(t instanceof Error)throw new a(t.message)}}};function mb(){return{updateUserController:new Ws(ve(),T())}}function cb(){return{deleteUserController:new Ns(ve())}}function pb(){return{findUsersController:new om(ve())}}function db(){return{findUserController:new Ls(ve())}}var Yr=AM(),{authMiddleware:lb}=J();Yr.get("/:id",async(o,e)=>{let{findUserController:r}=db();await r.handle(o,e)});Yr.put("/",(o,e,r)=>{lb.authenticated(o,e,r)},H.single("avatarImage"),async(o,e)=>{let{updateUserController:r}=mb();await r.handle(o,e)});Yr.delete("/:id",(o,e,r)=>{lb.authenticated(o,e,r)},async(o,e)=>{let{deleteUserController:r}=cb();await r.handle(o,e)});Yr.get("/",async(o,e)=>{let{findUsersController:r}=pb();await r.handle(o,e)});import{Router as UM}from"express";import{extendZodWithOpenApi as PM}from"@asteasolutions/zod-to-openapi";import Je from"zod";var DM=5,ub=1024,FM=ub*ub,BM=DM*FM;PM(Je);var qM=Je.object({title:Je.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),description:Je.string().optional(),scheduledAt:Je.coerce.date(),webinarLink:Je.url().optional(),guestIds:Je.transform(o=>typeof o=="string"?o.split(","):o).pipe(Je.array(Je.uuid())),thumbnail:Je.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=BM,"A thumbnail deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.")}),im=class{constructor(e,r){this.webinarRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{title:t,description:i,scheduledAt:n,webinarLink:s,guestIds:m,thumbnail:c}=qM.parse({...e.body,thumbnail:e.file}),d=await this.webinarRepository.create({title:t,description:i,scheduledAt:n,webinarLink:s||void 0,guestIds:m}),y=await this.firebaseStorageService.uploadFile({file:c,folder:j.WEBINAR,id:d.id});return await this.webinarRepository.update({id:d.id,thumbnailUrl:y}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var nm=class{constructor(e){this.prisma=e}async create({title:e,description:r,scheduledAt:t,webinarLink:i,thumbnailUrl:n,guestIds:s}){return await this.prisma.webinar.create({data:{title:e,description:r,scheduledAt:t,webinarLink:i,thumbnailUrl:n,guests:s?{connect:s.map(m=>({id:m}))}:void 0}})}async find({pagination:{offset:e,limit:r},filter:{description:t,orderBy:i,title:n}}){let s={},m=[];return n&&m.push({title:{contains:n,mode:"insensitive"}}),t&&m.push({description:{contains:t,mode:"insensitive"}}),m.length>0&&(s.OR=m),await this.prisma.webinar.findMany({where:s,include:{guests:{omit:{passwordHash:!0}}},orderBy:{updatedAt:i},skip:e,take:r})}async findById(e){return await this.prisma.webinar.findFirst({where:{id:e},include:{guests:{omit:{passwordHash:!0}}}})}async update({id:e,title:r,description:t,scheduledAt:i,webinarLink:n,thumbnailUrl:s,guestIds:m}){await this.prisma.webinar.update({where:{id:e},data:{title:r,description:t,scheduledAt:i,webinarLink:n,thumbnailUrl:s,guests:m?{connect:m.map(c=>({id:c}))}:void 0}})}async deleteById(e){await this.prisma.webinar.delete({where:{id:e}})}async count({filter:{description:e,title:r}}){let t={},i=[];return r&&i.push({title:{contains:r,mode:"insensitive"}}),e&&i.push({description:{contains:e,mode:"insensitive"}}),i.length>0&&(t.OR=i),await this.prisma.webinar.count({where:t})}};function Xr(){return new nm(O)}function gb(){return{createWebinarController:new im(Xr(),T())}}function fb(){return{findWebinarsController:new zs(Xr())}}function yb(){return{findWebinarByIdController:new Hs(Xr())}}function hb(){return{updateWebinarController:new Vs(Xr(),T())}}function Rb(){return{deleteWebinarController:new _s(Xr(),T())}}var dr=UM(),{authMiddleware:jo}=J();dr.post("/",(o,e,r)=>{jo.isAdmin(o,e,r)},H.single("thumbnail"),async(o,e)=>{let{createWebinarController:r}=gb();await r.handle(o,e)});dr.get("/",(o,e,r)=>{jo.isAdmin(o,e,r)},async(o,e)=>{let{findWebinarsController:r}=fb();await r.handle(o,e)});dr.get("/:id",(o,e,r)=>{jo.isAdmin(o,e,r)},async(o,e)=>{let{findWebinarByIdController:r}=yb();await r.handle(o,e)});dr.put("/:id",(o,e,r)=>{jo.isAdmin(o,e,r)},H.single("thumbnail"),async(o,e)=>{let{updateWebinarController:r}=hb();await r.handle(o,e)});dr.delete("/:id",(o,e,r)=>{jo.isAdmin(o,e,r)},async(o,e)=>{let{deleteWebinarController:r}=Rb();await r.handle(o,e)});import{Router as LM}from"express";import{extendZodWithOpenApi as OM}from"@asteasolutions/zod-to-openapi";import $r from"zod";var kM=1,GM=7;OM($r);var NM=$r.object({page:$r.coerce.number().min(1).default(kM),limit:$r.coerce.number().min(1).default(GM),role:$r.string().optional(),orderBy:$r.enum(["asc","desc"]).optional()}),sm=class{constructor(e){this.workGroupTeamMemberRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=NM.parse(e.query),s=i*t-i,[m,c]=await Promise.all([this.workGroupTeamMemberRepository.find({pagination:{offset:s,limit:i},filter:n}),this.workGroupTeamMemberRepository.count({filter:n})]),d=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:d,offset:s,limit:i,members:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};var am=class{constructor(e){this.prisma=e}async create(e){await this.prisma.workGroupTeamMember.create({data:{...e}})}async update(e){let{id:r,...t}=e;await this.prisma.workGroupTeamMember.update({where:{id:r},data:t})}async deleteById(e){await this.prisma.workGroupTeamMember.delete({where:{id:e}})}async find({pagination:e,filter:{role:r,orderBy:t}}){let i={};return r&&(i.role={contains:r,mode:"insensitive"}),await this.prisma.workGroupTeamMember.findMany({where:i,include:{user:{omit:{passwordHash:!0}}},orderBy:{updatedAt:t??"desc"},...e&&{skip:e.offset,take:e.limit}})}async findById(e){return await this.prisma.workGroupTeamMember.findFirst({where:{id:e},include:{user:{omit:{passwordHash:!0}}}})}async count({filter:{role:e}}){let r={};return e&&(r.role={contains:e,mode:"insensitive"}),await this.prisma.workGroupTeamMember.count({where:r})}};function Qr(){return new am(O)}function Ib(){return{createWorkGroupTeamMemberController:new Zs(Qr())}}function bb(){return{findWorkGroupTeamMembersController:new sm(Qr())}}function Cb(){return{findWorkGroupTeamMemberByIdController:new Js(Qr())}}function wb(){return{updateWorkGroupTeamMemberController:new Xs(Qr())}}function Sb(){return{deleteWorkGroupTeamMemberController:new Ks(Qr())}}var lr=LM(),{authMiddleware:wl}=J();lr.post("/",(o,e,r)=>{wl.authenticated(o,e,r)},async(o,e)=>{let{createWorkGroupTeamMemberController:r}=Ib();await r.handle(o,e)});lr.get("/",async(o,e)=>{let{findWorkGroupTeamMembersController:r}=bb();await r.handle(o,e)});lr.get("/:id",async(o,e)=>{let{findWorkGroupTeamMemberByIdController:r}=Cb();await r.handle(o,e)});lr.put("/:id",(o,e,r)=>{wl.authenticated(o,e,r)},async(o,e)=>{let{updateWorkGroupTeamMemberController:r}=wb();await r.handle(o,e)});lr.delete("/:id",(o,e,r)=>{wl.authenticated(o,e,r)},async(o,e)=>{let{deleteWorkGroupTeamMemberController:r}=Sb();await r.handle(o,e)});var ie=Sl(),HM={methods:["GET","POST","PUT","DELETE"],origin:["http://localhost:3000","https://rede-ct.vercel.app"],credentials:!0};ie.use(_M(HM));ie.use(Sl.json());ie.use(Sl.urlencoded({extended:!1}));ie.use("/docs",WM({content:Xy,theme:"kepler"}));ie.use("/",il);ie.use("/auth",nt);ie.use("/user",Yr);ie.use("/news",Dt);ie.use("/certification",Ht);ie.use("/pendency",tr);ie.use("/researcher",Bt);ie.use("/in-memoriam",Pt);ie.use("/etp",Vt);ie.use("/partner",er);ie.use("/management-team",$t);ie.use("/sdhc-team-member",pr);ie.use("/legitimator-committee-member",Xt);ie.use("/regiment",Ft);ie.use("/meeting",Fe);ie.use("/international-scientific-congress",le);ie.use("/regional-congress",ue);ie.use("/webinars",dr);ie.use("/courses",zt);ie.use("/post-graduate-programs",rr);ie.use("/event",Zt);ie.use("/scientific-journals",cr);ie.use("/book-volumes",_t);ie.use("/scientific-articles",mr);ie.use("/work-group-team-member",lr);ie.use("/reference-center-team-member",ir);ie.use("/law",Yt);ie.use("/research-groups",sr);ie.use("/museum",Qt);ie.use("/redect-highlight",or);ie.use((o,e,r,t)=>{let{errorHandler:i}=vl();i.handle(o,e,r,t)});var VM=zM.createServer(ie),vb=4e3;VM.listen(vb,()=>{console.log(`\u{1F680} Aplica\xE7\xE3o rodando na porta ${vb}.`)});

import Rw from"node:http";import{apiReference as fw}from"@scalar/express-api-reference";import yw from"cors";import vc from"express";import Of from"zod";var ne=class extends Error{};var ee=class extends Error{};var m=class extends Error{};var p=class extends Error{};var le=class extends Error{};import{ZodError as Bf}from"zod";var jr=class extends Bf{};var xr=class{handle(e,r,t,i){return e instanceof jr?t.status(400).json({message:"Validation error",error:Of.treeifyError(e)}):e instanceof ne?t.status(400).json({message:e.message}):e instanceof p?t.status(404).json({message:e.message}):e instanceof le?t.status(401).json({message:e.message}):e instanceof ee?t.status(409).json({message:e.message}):e instanceof m?t.status(500).json({message:e.message}):t.status(500).json({message:"Internal server error"})}};function Ec(){return{errorHandler:new xr}}import{OpenAPIRegistry as BC,OpenApiGeneratorV3 as OC}from"@asteasolutions/zod-to-openapi";import{$Enums as jc}from"@prisma/client";import h from"zod";import{extendZodWithOpenApi as Nf}from"@asteasolutions/zod-to-openapi";import pt from"zod";var kf=1,Gf=6;Nf(pt);var ms=pt.object({page:pt.coerce.number().min(1).default(kf),limit:pt.coerce.number().min(1).default(Gf),title:pt.string().optional(),description:pt.string().optional(),orderBy:pt.enum(["asc","desc"]).default("desc")}),Pr=class{constructor(e){this.certificationRepository=e}async handle(e,r){try{let{title:t,description:i,limit:n,orderBy:s,page:a}=ms.parse(e.query),c=a*n-n,u=e.user.id,[b,T]=await Promise.all([this.certificationRepository.findByUserId({userId:u,pagination:{offset:c,limit:n},filter:{title:t,description:i,orderBy:s}}),this.certificationRepository.count({filter:{title:t,description:i,userId:u}})]),Z=Math.max(Math.ceil(T/n),1);return r.status(200).json({page:a,totalPages:Z,offset:c,limit:n,totalCertifications:T,certifications:b})}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as Lf}from"@asteasolutions/zod-to-openapi";import dt from"zod";var _f=1,Wf=7;Lf(dt);var cs=dt.object({page:dt.coerce.number().min(1).default(_f),limit:dt.coerce.number().min(1).default(Wf),title:dt.string().optional(),content:dt.string().optional(),orderBy:dt.enum(["asc","desc"]).default("desc")}),Mr=class{constructor(e){this.newsRepository=e}async handle(e,r){try{let{page:t,limit:i,content:n,orderBy:s,title:a}=cs.parse(e.query),c=i*t-i,u=e.user.id,[b,T]=await Promise.all([this.newsRepository.findByAuthorId({authorId:u,pagination:{offset:c,limit:i},filter:{orderBy:s,title:a,content:n}}),this.newsRepository.count({filter:{authorId:u,content:n,title:a}})]),Z=Math.ceil(T/i);r.status(200).json({page:t,totalPages:Z,offset:c,limit:i,news:b})}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as Hf}from"@asteasolutions/zod-to-openapi";import{PendencyStatus as zf}from"@prisma/client";import We from"zod";var Zf=1,Vf=6;Hf(We);var ps=We.object({page:We.coerce.number().min(1).default(Zf),limit:We.coerce.number().min(1).default(Vf),title:We.string().optional(),description:We.string().optional(),status:We.enum(zf).default("PENDING"),orderBy:We.enum(["asc","desc"]).default("desc")}),Ar=class{constructor(e){this.pendencyRepository=e}async handle(e,r){try{let{limit:t,page:i,...n}=ps.parse(e.query),s=i*t-t,a=e.user.id,[c,u]=await Promise.all([this.pendencyRepository.findByUserId({userId:a,pagination:{offset:s,limit:t},filter:n}),this.pendencyRepository.count({filter:{...n,userId:a}})]),b=Math.max(Math.ceil(u/t),1);return r.status(200).json({page:i,totalPages:b,offset:s,limit:t,pendencies:c})}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as Kf}from"@asteasolutions/zod-to-openapi";import Tr from"zod";Kf(Tr);var ds=Tr.object({password:Tr.string(),email:Tr.email()}),Dr=class{constructor(e,r,t){this.userRepository=e;this.bcrypt=r;this.jwtService=t}async handle(e,r){try{let{email:t,password:i}=ds.parse(e.body),n=await this.userRepository.findByEmail(t);if(!n)return r.status(401).json({message:"Usu\xE1rio n\xE3o existe."});if(!await this.bcrypt.compare({password:i,hashedPassword:n.passwordHash}))throw new le("Senha inv\xE1lida.");let{id:a,role:c}=n,u=this.jwtService.sign({id:a,role:c,email:t});return r.status(200).json({token:u})}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as Jf}from"@asteasolutions/zod-to-openapi";import Ft from"zod";var Fr=8;Jf(Ft);var ls=Ft.object({name:Ft.string("Nome \xE9 obrigat\xF3rio.").min(1,"Nome \xE9 obrigat\xF3rio."),emailAddress:Ft.email("E-mail inv\xE1lido.").min(1,"E-mail \xE9 obrigat\xF3rio."),password:Ft.string("A senha \xE9 obrigat\xF3ria.").min(Fr,`A senha deve ter pelo menos ${Fr} caracteres.`),confirmPassword:Ft.string("A senha \xE9 obrigat\xF3ria.").min(Fr,`A senha deve ter pelo menos ${Fr} caracteres.`)}).refine(o=>o.password===o.confirmPassword,{message:"As senhas n\xE3o coincidem.",path:["confirmPassword"]}),Ur=class{constructor(e,r){this.userRepository=e;this.bcrypt=r}async handle(e,r){try{let{emailAddress:t,name:i,password:n}=ls.parse(e.body);if(await this.userRepository.findByEmail(t))throw new ee("Usu\xE1rio j\xE1 existe.");let a=await this.bcrypt.hash(n);return await this.userRepository.create({name:i,emailAddress:t,passwordHash:a}),r.status(201).json()}catch(t){if(t instanceof Error)throw new m(t.message)}}};var xc={method:"post",path:"/auth/sign-up",tags:["Authentication"],summary:"Create a new user",request:{body:{content:{"application/json":{schema:ls}}}},responses:{201:{description:"User created successfully",summary:"User Registration Successful",content:{"application/json":{schema:h.object({message:h.string()})}}},400:{description:"Invalid input data provided",summary:"Validation Error",content:{"application/json":{schema:h.object({errors:h.record(h.string(),h.string())})}}},409:{description:"User already exists with this email",summary:"User Already Exists",content:{"application/json":{schema:h.object({message:h.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:h.object({message:h.string()})}}}}},Pc={method:"post",path:"/auth/sign-in",tags:["Authentication"],summary:"Sign in",request:{body:{content:{"application/json":{schema:ds}}}},responses:{200:{description:"Authentication successful, JWT token returned",summary:"Login Successful",content:{"application/json":{schema:h.object({token:h.string()})}}},400:{description:"Invalid credentials or input data",summary:"Validation Error",content:{"application/json":{schema:h.object({errors:h.record(h.string(),h.string())})}}},401:{description:"Invalid email or password",summary:"Authentication Failed",content:{"application/json":{schema:h.object({message:h.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:h.object({message:h.string()})}}}}},Mc={method:"get",path:"/auth/user",tags:["Authentication"],summary:"Search for authenticated user",security:[{bearerAuth:[]}],responses:{200:{description:"Authenticated user information retrieved successfully",summary:"User Information Retrieved",content:{"application/json":{schema:h.object({name:h.string(),id:h.string(),avatarUrl:h.string().nullable(),createdAt:h.date(),updatedAt:h.date(),emailAddress:h.string(),orcid:h.string().nullable(),phone:h.string().nullable(),lattesUrl:h.string().nullable(),role:h.enum(jc.UserRole)}).nullable()}}},400:{description:"Invalid request parameters",summary:"Validation Error",content:{"application/json":{schema:h.object({errors:h.record(h.string(),h.string())})}}},404:{description:"User not found or not authenticated",summary:"User Not Found",content:{"application/json":{schema:h.object({message:h.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:h.object({message:h.string()})}}}}},Ac={method:"get",path:"/auth/user/news",tags:["Authentication"],summary:"List authenticated user news",security:[{bearerAuth:[]}],request:{query:cs},responses:{200:{description:"Paginated list of authenticated user news retrieved successfully",summary:"User News Retrieved",content:{"application/json":{schema:h.object({page:h.number(),totalPages:h.number(),offset:h.number(),limit:h.number(),news:h.object({content:h.string(),id:h.string(),title:h.string(),createdAt:h.date(),updatedAt:h.date(),imageUrl:h.string().nullable()})})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:h.object({errors:h.record(h.string(),h.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:h.object({message:h.string()})}}}}},Tc={method:"get",path:"/auth/admin",tags:["Authentication"],summary:"Verify admin access",security:[{bearerAuth:[]}],responses:{200:{description:"Admin access verified successfully",summary:"Admin Access Granted",content:{"application/json":{schema:h.object({success:h.boolean()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:h.object({message:h.string()})}}}}},Dc={method:"get",path:"/auth/certifications",tags:["Authentication"],summary:"List all authenticated user's certifications",security:[{bearerAuth:[]}],request:{query:ms},responses:{200:{description:"Paginated list of authenticated user certifications retrieved successfully",summary:"User Certifications Retrieved",content:{"application/json":{schema:h.object({page:h.number(),totalPages:h.number(),offset:h.number(),limit:h.number(),certifications:h.object({description:h.string(),id:h.string(),title:h.string(),certificationUrl:h.string(),createdAt:h.date(),updatedAt:h.date(),userId:h.string()})})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:h.object({errors:h.record(h.string(),h.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:h.object({message:h.string()})}}}}},Fc={method:"get",path:"/auth/pendencies",tags:["Authentication"],summary:"List all authenticated user's pendencies",security:[{bearerAuth:[]}],request:{query:ps},responses:{200:{description:"Paginated list of authenticated user pendencies retrieved successfully",summary:"User Pendencies Retrieved",content:{"application/json":{schema:h.object({page:h.number(),totalPages:h.number(),offset:h.number(),limit:h.number(),pendencies:h.object({id:h.string(),title:h.string(),description:h.string(),status:h.enum(jc.PendencyStatus),createdAt:h.date(),updatedAt:h.date(),userId:h.string()})})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:h.object({errors:h.record(h.string(),h.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:h.object({message:h.string()})}}}}};import{$Enums as oy}from"@prisma/client";import E from"zod";import{extendZodWithOpenApi as Yf}from"@asteasolutions/zod-to-openapi";import us from"zod";Yf(us);var gs=us.object({id:us.string()}),qr=class{constructor(e,r){this.certificationRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=gs.parse({id:e.params.certification_id}),i=await this.certificationRepository.findById(t);if(!i)throw new p("A certifica\xE7\xE3o n\xE3o existe.");return await Promise.all([this.certificationRepository.deleteById(i.id),this.firebaseStorageService.deleteFile({fileUrl:i.certificationUrl})]),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as Xf}from"@asteasolutions/zod-to-openapi";import fs from"zod";Xf(fs);var ys=fs.object({certificationId:fs.uuid()}),Br=class{constructor(e){this.certificationRepository=e}async handle(e,r){try{let{certificationId:t}=ys.parse({certificationId:e.params.certification_id}),i=await this.certificationRepository.findById(t);if(!i)throw new p("Certificado n\xE3o encontrado.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as $f}from"@asteasolutions/zod-to-openapi";import He from"zod";var Qf=1,ey=6;$f(He);var hs=He.object({page:He.coerce.number().min(1).default(Qf),limit:He.coerce.number().min(1).default(ey),title:He.string().optional(),description:He.string().optional(),userId:He.uuid().optional(),orderBy:He.enum(["asc","desc"]).default("desc")}),Or=class{constructor(e){this.certificationRepository=e}async handle(e,r){try{let{limit:t,page:i,...n}=hs.parse(e.query),s=i*t-t,[a,c]=await Promise.all([this.certificationRepository.find({pagination:{offset:s,limit:t},filter:n}),this.certificationRepository.count({filter:n})]),u=Math.max(Math.ceil(c/t),1);return r.status(200).json({page:i,totalPages:u,offset:s,limit:t,certifications:a})}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as ty}from"@asteasolutions/zod-to-openapi";import Ut from"zod";var M={NEWS:"images/news",USER:"images/user",IN_MEMORIAM:"images/in-memoriam",PARTNER:"images/partners",CERTIFICATION:"documents/certifications",PENDENCY:"documents/pendencies",REGIMENT:"documents/regiments",MEETING_MINUTE:"documents/meeting-minutes",INTERNATIONAL_SCIENTIFIC_CONGRESS_GALLERY:"images/international-scientific-congress-gallery",GALLERY:"images/regional-congress-gallery",REGIONAL_CONGRESS_GALLERY:"images/regional-congress-gallery",WEBINAR:"images/webinars",COURSE:"images/courses",POST_GRADUATE_PROGRAM:"images/post-graduate-programs",EVENT:"images/events",SCIENTIFIC_JOURNAL:"images/scientific-journals"};ty(Ut);var kr=Ut.object({userId:Ut.uuid(),title:Ut.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),description:Ut.string().min(1,"Descri\xE7\xE3o \xE9 obrigat\xF3ria."),certification:Ut.any().refine(o=>o&&typeof o=="object"&&o.size>0,"Arquivo do certificado \xE9 obrigat\xF3rio")}),Nr=class{constructor(e,r,t){this.userRepository=e;this.certificationRepository=r;this.firebaseStorageService=t}async handle(e,r){try{let{userId:t,title:i,description:n,certification:s}=kr.parse({...e.body,userId:e.params.user_id,certification:e.file});if(!await this.userRepository.findById(t))throw new ne("O usu\xE1rio n\xE3o existe.");let c=await this.firebaseStorageService.uploadFile({file:s,id:t,folder:M.CERTIFICATION});return await this.certificationRepository.register({userId:t,title:i,description:n,certificationUrl:c}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as ry}from"@asteasolutions/zod-to-openapi";import qt from"zod";ry(qt);var Lr=qt.object({id:qt.uuid(),title:qt.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),description:qt.string().min(1,"Descri\xE7\xE3o \xE9 obrigat\xF3ria."),certification:qt.any().refine(o=>o==null||typeof o=="object"&&typeof o.size=="number"&&(o.size===0||o.size>0),"Arquivo do certificado \xE9 inv\xE1lido").optional()}),Gr=class{constructor(e,r){this.certificationRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{certification:t,id:i,...n}=Lr.parse({...e.body,id:e.params.certification_id,certification:e.file}),s=await this.certificationRepository.findById(i);if(!s)throw new ne("A certifica\xE7\xE3o n\xE3o existe");let a=s.certificationUrl;return t&&t.size>0&&(a=await this.firebaseStorageService.updateFile({file:t,id:s.userId,folder:M.CERTIFICATION,fileUrl:s.certificationUrl})),await this.certificationRepository.update({...n,id:i,certificationUrl:a}),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var Uc={method:"post",path:"/certifications/{user_id}",tags:["Certifications"],summary:"Register certification for user",security:[{bearerAuth:[]}],request:{params:kr.pick({userId:!0}).transform(()=>({user_id:""})),body:{content:{"multipart/form-data":{schema:kr.omit({userId:!0})}}}},responses:{201:{description:"Certification registered successfully for the user",summary:"Certification Registered",content:{"application/json":{schema:E.object({message:E.string()})}}},400:{description:"Invalid input data or file format",summary:"Validation Error",content:{"application/json":{schema:E.object({errors:E.record(E.string(),E.string())})}}},404:{description:"User not found with the provided ID",summary:"User Not Found",content:{"application/json":{schema:E.object({message:E.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:E.object({message:E.string()})}}}}},qc={method:"get",path:"/certifications",tags:["Certifications"],summary:"List certifications",security:[{bearerAuth:[]}],request:{query:hs},responses:{200:{description:"Paginated list of certifications with user information retrieved successfully",summary:"Certifications Retrieved",content:{"application/json":{schema:E.object({page:E.number(),totalPages:E.number(),offset:E.number(),limit:E.number(),certifications:E.array(E.object({description:E.string(),userId:E.string(),title:E.string(),id:E.string(),createdAt:E.date(),updatedAt:E.date(),certificationUrl:E.url(),user:E.object({id:E.uuid(),name:E.string(),createdAt:E.date(),updatedAt:E.date(),avatarUrl:E.string().nullable(),emailAddress:E.email(),orcid:E.string().nullable(),phone:E.string().nullable(),lattesUrl:E.url().nullable(),role:E.enum(oy.UserRole)})}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:E.object({errors:E.record(E.string(),E.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:E.object({message:E.string()})}}}}},Bc={method:"get",path:"/certifications/{certification_id}",tags:["Certifications"],summary:"Find certification by ID",security:[{bearerAuth:[]}],request:{params:ys},responses:{200:{description:"Certification details retrieved successfully",summary:"Certification Retrieved",content:{"application/json":{schema:E.object({description:E.string(),userId:E.string(),title:E.string(),id:E.string(),createdAt:E.date(),updatedAt:E.date(),certificationUrl:E.url()}).nullable()}}},400:{description:"Invalid certification ID format",summary:"Validation Error",content:{"application/json":{schema:E.object({errors:E.record(E.string(),E.string())})}}},404:{description:"Certification not found with the provided ID",summary:"Certification Not Found",content:{"application/json":{schema:E.object({message:E.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:E.object({message:E.string()})}}}}},Oc={method:"put",path:"/certifications/{certification_id}",tags:["Certifications"],summary:"Update certification",security:[{bearerAuth:[]}],request:{params:Lr.pick({id:!0}).transform(()=>({certification_id:""})),body:{content:{"multipart/form-data":{schema:Lr.omit({id:!0})}}}},responses:{204:{description:"Certification updated successfully",summary:"Certification Updated"},400:{description:"Invalid input data or file format",summary:"Validation Error",content:{"application/json":{schema:E.object({errors:E.record(E.string(),E.string())})}}},404:{description:"Certification not found with the provided ID",summary:"Certification Not Found",content:{"application/json":{schema:E.object({message:E.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:E.object({message:E.string()})}}}}},Nc={method:"delete",path:"/certifications/{certification_id}",tags:["Certifications"],summary:"Delete certification",security:[{bearerAuth:[]}],request:{params:gs},responses:{204:{description:"Certification deleted successfully",summary:"Certification Deleted"},400:{description:"Invalid certification ID format",summary:"Validation Error",content:{"application/json":{schema:E.object({errors:E.record(E.string(),E.string())})}}},404:{description:"Certification not found with the provided ID",summary:"Certification Not Found",content:{"application/json":{schema:E.object({message:E.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:E.object({message:E.string()})}}}}};import y from"zod";import{extendZodWithOpenApi as iy}from"@asteasolutions/zod-to-openapi";import Rs from"zod";iy(Rs);var Is=Rs.object({id:Rs.uuid()}),_r=class{constructor(e,r){this.courseRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=Is.parse({id:e.params.id}),i=await this.courseRepository.findById(t);if(!i)throw new p("O curso n\xE3o existe.");return i.imageUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.imageUrl}),await this.courseRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as ny}from"@asteasolutions/zod-to-openapi";import Cs from"zod";ny(Cs);var bs=Cs.object({id:Cs.uuid()}),Wr=class{constructor(e){this.courseRepository=e}async handle(e,r){try{let{id:t}=bs.parse({id:e.params.id}),i=await this.courseRepository.findById(t);if(!i)throw new p("Curso n\xE3o encontrado.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as sy}from"@asteasolutions/zod-to-openapi";import ze from"zod";var ay=1,my=6;sy(ze);var ws=ze.object({page:ze.coerce.number().min(1).default(ay),limit:ze.coerce.number().min(1).default(my),title:ze.string().optional(),description:ze.string().optional(),coordinator:ze.string().optional(),orderBy:ze.enum(["asc","desc"]).default("desc")}),Hr=class{constructor(e){this.courseRepository=e}async handle(e,r){try{let{limit:t,page:i,...n}=ws.parse(e.query),s=i*t-t,[a,c]=await Promise.all([this.courseRepository.find({pagination:{offset:s,limit:t},filter:n}),this.courseRepository.count({filter:n})]),u=Math.max(Math.ceil(c/t),1);return r.status(200).json({page:i,totalPages:u,offset:s,limit:t,courses:a})}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as cy}from"@asteasolutions/zod-to-openapi";import se from"zod";var Gc=5,kc=1024,py=kc*kc,dy=Gc*py;cy(se);var Ss=se.object({id:se.uuid(),title:se.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio.").optional(),coordinatorId:se.string().uuid("Coordenador \xE9 obrigat\xF3rio.").optional(),email:se.string().email("E-mail deve ser v\xE1lido.").optional(),location:se.string().min(1,"Localiza\xE7\xE3o \xE9 obrigat\xF3ria.").optional(),scheduledAt:se.coerce.date().optional(),registrationLink:se.url("URL de inscri\xE7\xE3o deve ser v\xE1lida").optional(),description:se.string().optional(),instructorIds:se.transform(o=>typeof o=="string"?o.split(","):o).pipe(se.array(se.uuid())).optional(),image:se.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=dy,`A imagem deve ter no m\xE1ximo ${Gc}MB.`).optional()}),zr=class{constructor(e,r){this.courseRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,image:i,title:n,coordinatorId:s,email:a,location:c,scheduledAt:u,registrationLink:b,description:T,instructorIds:Z}=Ss.parse({id:e.params.id,...e.body,image:e.file}),X=await this.courseRepository.findById(t);if(!X)throw new p("O curso n\xE3o existe.");let ie=X.imageUrl;if(i&&(ie=await this.firebaseStorageService.uploadFile({file:i,id:t,folder:M.COURSE})),!ie)throw new m("URL da imagem \xE9 obrigat\xF3rio");return await this.courseRepository.update({id:t,title:n,coordinatorId:s,email:a,location:c,scheduledAt:u,registrationLink:b,description:T,imageUrl:ie,instructorIds:Z}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var Lc={method:"post",path:"/courses",tags:["Courses"],summary:"Create course",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:y.object({title:y.string().min(1).openapi({description:"T\xEDtulo do curso"}),coordinator:y.string().min(1).openapi({description:"Nome do coordenador"}),email:y.string().email().openapi({description:"E-mail de contato"}),location:y.string().min(1).openapi({description:"Localiza\xE7\xE3o do curso"}),scheduledAt:y.string().openapi({description:"Data e hora agendada (ISO 8601)",example:"2024-01-01T10:00:00Z"}),registrationLink:y.string().url().optional().openapi({description:"Link de inscri\xE7\xE3o"}),description:y.string().optional().openapi({description:"Descri\xE7\xE3o do curso"}),instructorIds:y.string().openapi({description:"IDs dos instrutores separados por v\xEDrgula",example:"uuid1,uuid2,uuid3"}),image:y.string().optional().openapi({description:"Imagem do curso (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{201:{description:"Course created successfully",summary:"Course Created"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:y.object({errors:y.record(y.string(),y.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:y.object({message:y.string()})}}}}},_c={method:"get",path:"/courses",tags:["Courses"],summary:"List courses",security:[{bearerAuth:[]}],request:{query:ws},responses:{200:{description:"Paginated list of courses with instructor information retrieved successfully",summary:"Courses Retrieved",content:{"application/json":{schema:y.object({page:y.number(),totalPages:y.number(),offset:y.number(),limit:y.number(),courses:y.array(y.object({id:y.string(),title:y.string(),imageUrl:y.string().nullable(),coordinator:y.string(),email:y.string(),scheduledAt:y.date(),location:y.string(),registrationLink:y.string().nullable(),description:y.string().nullable(),createdAt:y.date(),updatedAt:y.date(),instructors:y.array(y.object({id:y.uuid(),name:y.string(),emailAddress:y.email(),avatarUrl:y.string().nullable(),createdAt:y.date(),updatedAt:y.date()}))}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:y.object({errors:y.record(y.string(),y.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:y.object({message:y.string()})}}}}},Wc={method:"get",path:"/courses/{id}",tags:["Courses"],summary:"Find course by ID",security:[{bearerAuth:[]}],request:{params:bs},responses:{200:{description:"Course details retrieved successfully",summary:"Course Retrieved",content:{"application/json":{schema:y.object({id:y.string(),title:y.string(),imageUrl:y.string().nullable(),coordinator:y.string(),email:y.string(),scheduledAt:y.date(),location:y.string(),registrationLink:y.string().nullable(),description:y.string().nullable(),createdAt:y.date(),updatedAt:y.date(),instructors:y.array(y.object({id:y.uuid(),name:y.string(),emailAddress:y.email(),avatarUrl:y.string().nullable(),createdAt:y.date(),updatedAt:y.date()}))}).nullable()}}},400:{description:"Invalid course ID format",summary:"Validation Error",content:{"application/json":{schema:y.object({errors:y.record(y.string(),y.string())})}}},404:{description:"Course not found with the provided ID",summary:"Course Not Found",content:{"application/json":{schema:y.object({message:y.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:y.object({message:y.string()})}}}}},Hc={method:"put",path:"/courses/{id}",tags:["Courses"],summary:"Update course",security:[{bearerAuth:[]}],request:{params:Ss.pick({id:!0}),body:{content:{"multipart/form-data":{schema:y.object({title:y.string().min(1).optional().openapi({description:"T\xEDtulo do curso"}),coordinator:y.string().min(1).optional().openapi({description:"Nome do coordenador"}),email:y.string().email().optional().openapi({description:"E-mail de contato"}),location:y.string().min(1).optional().openapi({description:"Localiza\xE7\xE3o do curso"}),scheduledAt:y.string().optional().openapi({description:"Data e hora agendada (ISO 8601)",example:"2024-01-01T10:00:00Z"}),registrationLink:y.string().url().optional().openapi({description:"Link de inscri\xE7\xE3o"}),description:y.string().optional().openapi({description:"Descri\xE7\xE3o do curso"}),instructorIds:y.string().optional().openapi({description:"IDs dos instrutores separados por v\xEDrgula",example:"uuid1,uuid2,uuid3"}),image:y.string().optional().openapi({description:"Imagem do curso (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{200:{description:"Course updated successfully",summary:"Course Updated"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:y.object({errors:y.record(y.string(),y.string())})}}},404:{description:"Course not found with the provided ID",summary:"Course Not Found",content:{"application/json":{schema:y.object({message:y.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:y.object({message:y.string()})}}}}},zc={method:"delete",path:"/courses/{id}",tags:["Courses"],summary:"Delete course",security:[{bearerAuth:[]}],request:{params:Is},responses:{200:{description:"Course deleted successfully",summary:"Course Deleted"},400:{description:"Invalid course ID format",summary:"Validation Error",content:{"application/json":{schema:y.object({errors:y.record(y.string(),y.string())})}}},404:{description:"Course not found with the provided ID",summary:"Course Not Found",content:{"application/json":{schema:y.object({message:y.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:y.object({message:y.string()})}}}}};import{$Enums as Ms}from"@prisma/client";import I from"zod";import{extendZodWithOpenApi as ly}from"@asteasolutions/zod-to-openapi";import Re from"zod";ly(Re);var vs=Re.object({code:Re.string(),title:Re.string(),description:Re.string().optional(),notes:Re.string().optional(),leaderId:Re.uuid(),deputyLeaderId:Re.uuid(),secretaryId:Re.uuid(),memberIds:Re.array(Re.uuid())}),Zr=class{constructor(e){this.etpRepository=e}async handle(e,r){try{let{code:t,title:i,description:n,notes:s,leaderId:a,deputyLeaderId:c,secretaryId:u,memberIds:b}=vs.parse(e.body);if(await this.etpRepository.findByCode(t))throw new ee("J\xE1 existe um ETP cadastrado com este c\xF3digo.");return await this.etpRepository.create({code:t,title:i,description:n,notes:s,leaderId:a,deputyLeaderId:c,secretaryId:u,memberIds:b}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as uy}from"@asteasolutions/zod-to-openapi";import Es from"zod";uy(Es);var js=Es.object({id:Es.uuid()}),Vr=class{constructor(e){this.etpRepository=e}async handle(e,r){try{let{id:t}=js.parse({id:e.params.id});if(!await this.etpRepository.findById(t))throw new p("O ETP n\xE3o existe.");return await this.etpRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as gy}from"@asteasolutions/zod-to-openapi";import xs from"zod";gy(xs);var Jr=xs.object({id:xs.uuid()}),Kr=class{constructor(e){this.etpRepository=e}async handle(e,r){try{let{id:t}=Jr.parse({id:e.params.id}),i=await this.etpRepository.findById(t);if(!i)throw new p("O ETP n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as fy}from"@asteasolutions/zod-to-openapi";import ue from"zod";fy(ue);var Ps=ue.object({id:ue.uuid(),code:ue.string().optional(),title:ue.string().optional(),description:ue.string().optional(),notes:ue.string().optional(),leaderId:ue.uuid().optional(),deputyLeaderId:ue.uuid().optional(),secretaryId:ue.uuid().optional(),memberIds:ue.array(ue.uuid()).optional()}),Yr=class{constructor(e){this.etpRepository=e}async handle(e,r){try{let{id:t,code:i,title:n,description:s,notes:a,leaderId:c,deputyLeaderId:u,secretaryId:b,memberIds:T}=Ps.parse({id:e.params.id,...e.body});if(!await this.etpRepository.findById(t))throw new p("O ETP n\xE3o existe.");if(i){let X=await this.etpRepository.findByCode(i);if(X&&X.id!==t)throw new ee("J\xE1 existe um ETP com este c\xF3digo.")}return await this.etpRepository.update({id:t,code:i,title:n,description:s,notes:a,leaderId:c,deputyLeaderId:u,secretaryId:b,memberIds:T}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var yy=1,hy=9,Xr=I.object({id:I.uuid(),registrationNumber:I.string(),mainEtps:I.string().nullable(),formations:I.string().nullable(),degrees:I.array(I.enum(Ms.Degree)),occupations:I.string(),seniority:I.enum(Ms.Seniority),institutions:I.string(),biography:I.string().nullable(),createdAt:I.date(),updatedAt:I.date(),user:I.object({id:I.uuid(),name:I.string(),emailAddress:I.string(),avatarUrl:I.string().nullable(),orcid:I.string().nullable(),phone:I.string().nullable(),lattesUrl:I.string().nullable(),role:I.enum(Ms.UserRole)})}),Zc=I.object({id:I.uuid(),code:I.string(),title:I.string(),description:I.string().nullable(),notes:I.string().nullable(),createdAt:I.date(),updatedAt:I.date(),leader:I.object({id:I.uuid(),researcher:Xr}).nullable(),deputyLeader:I.object({id:I.uuid(),researcher:Xr}).nullable(),secretary:I.object({id:I.uuid(),researcher:Xr}).nullable(),members:I.array(Xr)}),Vc={method:"post",path:"/etp",tags:["ETPs"],summary:"Create a new ETP with single leader, deputy leader, secretary and multiple members",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:vs}}}},responses:{201:{description:"ETP created successfully",summary:"ETP Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:I.object({errors:I.record(I.string(),I.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:I.object({message:I.string()})}}},409:{description:"ETP with this code already exists",summary:"Conflict",content:{"application/json":{schema:I.object({message:I.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:I.object({message:I.string()})}}}}},Kc={method:"get",path:"/etp",tags:["ETPs"],summary:"List all ETPs with pagination and filters",request:{query:I.object({page:I.coerce.number().min(1).default(yy).optional(),limit:I.coerce.number().min(1).default(hy).optional(),code:I.string().optional(),title:I.string().optional(),description:I.string().optional(),notes:I.string().optional(),orderBy:I.enum(["asc","desc"]).optional()})},responses:{200:{description:"List of ETPs retrieved successfully with pagination",summary:"ETPs Retrieved",content:{"application/json":{schema:I.object({page:I.number(),totalPages:I.number(),offset:I.number(),limit:I.number(),etps:I.array(Zc)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:I.object({message:I.string()})}}}}},Jc={method:"get",path:"/etp/{id}",tags:["ETPs"],summary:"Find ETP by ID",request:{params:Jr},responses:{200:{description:"ETP details retrieved successfully",summary:"ETP Retrieved",content:{"application/json":{schema:Zc}}},400:{description:"Invalid ETP ID format",summary:"Validation Error",content:{"application/json":{schema:I.object({errors:I.record(I.string(),I.string())})}}},404:{description:"ETP not found with the provided ID",summary:"ETP Not Found",content:{"application/json":{schema:I.object({message:I.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:I.object({message:I.string()})}}}}},Yc={method:"put",path:"/etp/{id}",tags:["ETPs"],summary:"Update ETP and manage user relationships (single leader, deputy leader, secretary, multiple members)",security:[{bearerAuth:[]}],request:{params:Jr,body:{content:{"application/json":{schema:Ps.omit({id:!0})}}}},responses:{200:{description:"ETP updated successfully",summary:"ETP Updated"},400:{description:"Invalid input data or ETP ID format",summary:"Validation Error",content:{"application/json":{schema:I.object({errors:I.record(I.string(),I.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:I.object({message:I.string()})}}},404:{description:"ETP not found with the provided ID",summary:"ETP Not Found",content:{"application/json":{schema:I.object({message:I.string()})}}},409:{description:"ETP with this code already exists",summary:"Conflict",content:{"application/json":{schema:I.object({message:I.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:I.object({message:I.string()})}}}}},Xc={method:"delete",path:"/etp/{id}",tags:["ETPs"],summary:"Delete ETP",security:[{bearerAuth:[]}],request:{params:js},responses:{200:{description:"ETP deleted successfully",summary:"ETP Deleted"},400:{description:"Invalid ETP ID format",summary:"Validation Error",content:{"application/json":{schema:I.object({errors:I.record(I.string(),I.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:I.object({message:I.string()})}}},404:{description:"ETP not found with the provided ID",summary:"ETP Not Found",content:{"application/json":{schema:I.object({message:I.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:I.object({message:I.string()})}}}}};import{EventFormat as qy,EventStatus as By}from"@prisma/client";import F from"zod";import{extendZodWithOpenApi as Ry}from"@asteasolutions/zod-to-openapi";import{EventFormat as $r,EventStatus as As}from"@prisma/client";import ge from"zod";var Iy=5,$c=1024,Cy=$c*$c,by=Iy*Cy;Ry(ge);var Ts=ge.object({title:ge.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio"),description:ge.string().optional(),startDate:ge.coerce.date(),endDate:ge.coerce.date(),location:ge.string().optional(),format:ge.enum($r).default($r.ONLINE),eventLink:ge.string().url("Link do evento deve ser uma URL v\xE1lida").optional().or(ge.literal("")),status:ge.enum(As).default(As.PENDING),image:ge.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=by,"A imagem deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.")}).refine(o=>o.format===$r.ONLINE?!!o.eventLink:o.format===$r.IN_PERSON?!!o.location:!0,{message:"Eventos online devem ter link e eventos presenciais devem ter localiza\xE7\xE3o",path:["format"]}),Qr=class{constructor(e,r){this.eventRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{title:t,description:i,startDate:n,endDate:s,location:a,format:c,eventLink:u,status:b,image:T}=Ts.parse({...e.body,image:e.file}),Z=await this.eventRepository.create({title:t,description:i,startDate:n,endDate:s,location:a||void 0,format:c,eventLink:u||void 0,status:b??As.PENDING}),X=await this.firebaseStorageService.uploadFile({file:T,folder:M.EVENT,id:Z.id});return await this.eventRepository.update({id:Z.id,imageUrl:X}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as wy}from"@asteasolutions/zod-to-openapi";import Ds from"zod";wy(Ds);var Fs=Ds.object({id:Ds.uuid()}),eo=class{constructor(e){this.eventRepository=e}async handle(e,r){try{let{id:t}=Fs.parse({id:e.params.id});if(!await this.eventRepository.findById(t))throw new p("O evento n\xE3o existe.");return await this.eventRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as Sy}from"@asteasolutions/zod-to-openapi";import Us from"zod";Sy(Us);var ro=Us.object({id:Us.uuid()}),to=class{constructor(e){this.eventRepository=e}async handle(e,r){try{let{id:t}=ro.parse({id:e.params.id}),i=await this.eventRepository.findById(t);if(!i)throw new p("O evento n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as vy}from"@asteasolutions/zod-to-openapi";import{EventFormat as Ey,EventStatus as jy}from"@prisma/client";import Ze from"zod";var xy=1,Py=10;vy(Ze);var qs=Ze.object({page:Ze.coerce.number().min(1).default(xy),limit:Ze.coerce.number().min(1).default(Py),title:Ze.string().optional(),status:Ze.nativeEnum(jy).optional(),format:Ze.nativeEnum(Ey).optional(),orderBy:Ze.enum(["asc","desc"]).optional()}),oo=class{constructor(e){this.eventRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=qs.parse(e.query),s=i*t-i,[a,c]=await Promise.all([this.eventRepository.find({pagination:{offset:s,limit:i},filter:n}),this.eventRepository.count({filter:n})]),u=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:u,offset:s,limit:i,events:a})}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as My}from"@asteasolutions/zod-to-openapi";import{EventFormat as Ay,EventStatus as Ty}from"@prisma/client";import me from"zod";var Dy=5,Qc=1024,Fy=Qc*Qc,Uy=Dy*Fy;My(me);var Bs=me.object({id:me.uuid(),title:me.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio").optional(),description:me.string().optional(),startDate:me.coerce.date().optional(),endDate:me.coerce.date().optional(),location:me.string().optional(),format:me.nativeEnum(Ay).optional(),eventLink:me.string().url("Link do evento deve ser uma URL v\xE1lida").optional().or(me.literal("")),status:me.nativeEnum(Ty).optional(),image:me.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=Uy,"A imagem deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.").optional()}),io=class{constructor(e,r){this.eventRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,title:i,description:n,startDate:s,endDate:a,location:c,format:u,eventLink:b,status:T,image:Z}=Bs.parse({id:e.params.id,...e.body,image:e.file});if(!await this.eventRepository.findById(t))throw new p("O evento n\xE3o existe.");let ie;return Z&&(ie=await this.firebaseStorageService.uploadFile({file:Z,folder:M.EVENT,id:t})),await this.eventRepository.update({id:t,title:i,description:n,startDate:s,endDate:a,location:c||void 0,format:u,eventLink:b||void 0,status:T,imageUrl:ie}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var ep=F.object({id:F.uuid(),title:F.string(),description:F.string().nullable(),imageUrl:F.string().nullable(),startDate:F.date(),endDate:F.date(),location:F.string().nullable(),status:F.nativeEnum(By),format:F.nativeEnum(qy),eventLink:F.string().nullable(),createdAt:F.date(),updatedAt:F.date()}),tp={method:"post",path:"/event",tags:["Events"],summary:"Create a new event",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:Ts}}}},responses:{201:{description:"Event created successfully",summary:"Event Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:F.object({errors:F.record(F.string(),F.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:F.object({message:F.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:F.object({message:F.string()})}}}}},rp={method:"get",path:"/event",tags:["Events"],summary:"List all events with pagination and filters",request:{query:qs},responses:{200:{description:"List of events retrieved successfully with pagination",summary:"Events Retrieved",content:{"application/json":{schema:F.object({page:F.number(),totalPages:F.number(),offset:F.number(),limit:F.number(),events:F.array(ep)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:F.object({errors:F.record(F.string(),F.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:F.object({message:F.string()})}}}}},op={method:"get",path:"/event/{id}",tags:["Events"],summary:"Find event by ID",request:{params:ro},responses:{200:{description:"Event details retrieved successfully",summary:"Event Retrieved",content:{"application/json":{schema:ep}}},400:{description:"Invalid event ID format",summary:"Validation Error",content:{"application/json":{schema:F.object({errors:F.record(F.string(),F.string())})}}},404:{description:"Event not found with the provided ID",summary:"Event Not Found",content:{"application/json":{schema:F.object({message:F.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:F.object({message:F.string()})}}}}},ip={method:"put",path:"/event/{id}",tags:["Events"],summary:"Update event",security:[{bearerAuth:[]}],request:{params:ro,body:{content:{"multipart/form-data":{schema:Bs.omit({id:!0})}}}},responses:{200:{description:"Event updated successfully",summary:"Event Updated"},400:{description:"Invalid input data or event ID format",summary:"Validation Error",content:{"application/json":{schema:F.object({errors:F.record(F.string(),F.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:F.object({message:F.string()})}}},404:{description:"Event not found with the provided ID",summary:"Event Not Found",content:{"application/json":{schema:F.object({message:F.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:F.object({message:F.string()})}}}}},np={method:"delete",path:"/event/{id}",tags:["Events"],summary:"Delete event",security:[{bearerAuth:[]}],request:{params:Fs},responses:{200:{description:"Event deleted successfully",summary:"Event Deleted"},400:{description:"Invalid event ID format",summary:"Validation Error",content:{"application/json":{schema:F.object({errors:F.record(F.string(),F.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:F.object({message:F.string()})}}},404:{description:"Event not found with the provided ID",summary:"Event Not Found",content:{"application/json":{schema:F.object({message:F.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:F.object({message:F.string()})}}}}};import{InMemoriamRole as Qy}from"@prisma/client";import x from"zod";import{extendZodWithOpenApi as Oy}from"@asteasolutions/zod-to-openapi";import{InMemoriamRole as Ny}from"@prisma/client";import Ve from"zod";var ap=2,sp=1024,ky=sp*sp,Gy=ap*ky;Oy(Ve);var Os=Ve.object({name:Ve.string().min(1,"Nome \xE9 obrigat\xF3rio"),birthDate:Ve.coerce.date(),deathDate:Ve.coerce.date(),biography:Ve.string().optional(),photo:Ve.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=Gy,`A imagem deve ter no m\xE1ximo ${ap}MB.`).optional(),role:Ve.enum(Ny)}).refine(o=>o.deathDate>o.birthDate,{message:"Data de falecimento deve ser posterior \xE0 data de nascimento",path:["deathDate"]}),no=class{constructor(e,r){this.inMemoriamRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{name:t,birthDate:i,deathDate:n,biography:s,role:a,photo:c}=Os.parse({...e.body,photo:e.file}),u=await this.inMemoriamRepository.create({name:t,birthDate:i,deathDate:n,biography:s??void 0,role:a}),b;return c&&(b=await this.firebaseStorageService.uploadFile({file:c,id:u.id,folder:M.IN_MEMORIAM}),await this.inMemoriamRepository.update({id:u.id,photoUrl:b})),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as Ly}from"@asteasolutions/zod-to-openapi";import Ns from"zod";Ly(Ns);var ks=Ns.object({id:Ns.uuid()}),so=class{constructor(e,r){this.inMemoriamRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=ks.parse({id:e.params.id}),i=await this.inMemoriamRepository.findById(t);if(!i)throw new p("O in memoriam n\xE3o existe.");return i.photoUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.photoUrl}),await this.inMemoriamRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as _y}from"@asteasolutions/zod-to-openapi";import Gs from"zod";_y(Gs);var mo=Gs.object({id:Gs.uuid()}),ao=class{constructor(e){this.inMemoriamRepository=e}async handle(e,r){try{let{id:t}=mo.parse({id:e.params.id}),i=await this.inMemoriamRepository.findById(t);if(!i)throw new p("O in memoriam n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as Wy}from"@asteasolutions/zod-to-openapi";import{InMemoriamRole as Hy}from"@prisma/client";import Ls from"zod";Wy(Ls);var _s=Ls.object({role:Ls.enum(Hy)}),co=class{constructor(e){this.inMemoriamRepository=e}async handle(e,r){try{let{role:t}=_s.parse({role:e.params.role}),i=await this.inMemoriamRepository.findByRole(t);return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as zy}from"@asteasolutions/zod-to-openapi";import{InMemoriamRole as Zy}from"@prisma/client";import Ke from"zod";var Vy=1,Ky=9;zy(Ke);var Ws=Ke.object({page:Ke.coerce.number().min(1).default(Vy),limit:Ke.coerce.number().min(1).default(Ky),name:Ke.string().optional(),biography:Ke.string().optional(),role:Ke.enum(Zy).optional(),orderBy:Ke.enum(["asc","desc"]).default("desc")}),po=class{constructor(e){this.inMemoriamRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=Ws.parse(e.query),s=i*t-i,[a,c]=await Promise.all([this.inMemoriamRepository.find({pagination:{offset:s,limit:i},filter:n}),this.inMemoriamRepository.count({filter:n})]),u=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:u,offset:s,limit:i,inMemoriam:a})}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as Jy}from"@asteasolutions/zod-to-openapi";import{InMemoriamRole as Yy}from"@prisma/client";import Te from"zod";var cp=2,mp=1024,Xy=mp*mp,$y=cp*Xy;Jy(Te);var Hs=Te.object({id:Te.uuid(),name:Te.string().min(1,"Nome \xE9 obrigat\xF3rio").optional(),birthDate:Te.coerce.date().optional(),deathDate:Te.coerce.date().optional(),biography:Te.string().optional(),photo:Te.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=$y,`A imagem deve ter no m\xE1ximo ${cp}MB.`).optional(),role:Te.enum(Yy).optional()}).refine(o=>o.birthDate&&o.deathDate?o.deathDate>o.birthDate:!0,{message:"Data de falecimento deve ser posterior \xE0 data de nascimento",path:["deathDate"]}),lo=class{constructor(e,r){this.inMemoriamRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,name:i,birthDate:n,deathDate:s,biography:a,photo:c,role:u}=Hs.parse({id:e.params.id,...e.body,photo:e.file}),b=await this.inMemoriamRepository.findById(t);if(!b)throw new p("O registro in memoriam n\xE3o existe.");let T=b.photoUrl;return c&&(T=await this.firebaseStorageService.uploadFile({file:c,id:t,folder:M.IN_MEMORIAM})),await this.inMemoriamRepository.update({id:t,name:i,birthDate:n,deathDate:s,biography:a,photoUrl:T??void 0,role:u}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var zs=x.object({id:x.uuid(),name:x.string(),birthDate:x.date(),deathDate:x.date(),biography:x.string().nullable(),photoUrl:x.string().nullable(),role:x.enum(Qy),createdAt:x.date(),updatedAt:x.date()}),pp={method:"post",path:"/in-memoriam",tags:["In Memoriam"],summary:"Create a new in memoriam record with optional photo upload",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:Os}}}},responses:{201:{description:"In memoriam record created successfully",summary:"In Memoriam Created"},400:{description:"Invalid input data, missing required fields, or invalid photo format/size",summary:"Validation Error",content:{"application/json":{schema:x.object({errors:x.record(x.string(),x.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:x.object({message:x.string()})}}},409:{description:"In memoriam record with this name already exists",summary:"Conflict",content:{"application/json":{schema:x.object({message:x.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:x.object({message:x.string()})}}}}},dp={method:"get",path:"/in-memoriam",tags:["In Memoriam"],summary:"List all in memoriam records with pagination and filters",request:{query:Ws},responses:{200:{description:"List of in memoriam records retrieved successfully with pagination",summary:"In Memoriam Records Retrieved",content:{"application/json":{schema:x.object({page:x.number(),totalPages:x.number(),offset:x.number(),limit:x.number(),inMemoriam:x.array(zs)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:x.object({errors:x.record(x.string(),x.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:x.object({message:x.string()})}}}}},lp={method:"get",path:"/in-memoriam/{id}",tags:["In Memoriam"],summary:"Find in memoriam record by ID",request:{params:mo},responses:{200:{description:"In memoriam record details retrieved successfully",summary:"In Memoriam Record Retrieved",content:{"application/json":{schema:zs}}},400:{description:"Invalid in memoriam record ID format",summary:"Validation Error",content:{"application/json":{schema:x.object({errors:x.record(x.string(),x.string())})}}},404:{description:"In memoriam record not found with the provided ID",summary:"In Memoriam Record Not Found",content:{"application/json":{schema:x.object({message:x.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:x.object({message:x.string()})}}}}},up={method:"put",path:"/in-memoriam/{id}",tags:["In Memoriam"],summary:"Update in memoriam record with optional photo upload",security:[{bearerAuth:[]}],request:{params:mo,body:{content:{"multipart/form-data":{schema:Hs.omit({id:!0})}}}},responses:{200:{description:"In memoriam record updated successfully",summary:"In Memoriam Record Updated"},400:{description:"Invalid input data, in memoriam record ID format, or invalid photo format/size",summary:"Validation Error",content:{"application/json":{schema:x.object({errors:x.record(x.string(),x.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:x.object({message:x.string()})}}},404:{description:"In memoriam record not found with the provided ID",summary:"In Memoriam Record Not Found",content:{"application/json":{schema:x.object({message:x.string()})}}},409:{description:"In memoriam record with this name already exists",summary:"Conflict",content:{"application/json":{schema:x.object({message:x.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:x.object({message:x.string()})}}}}},gp={method:"delete",path:"/in-memoriam/{id}",tags:["In Memoriam"],summary:"Delete in memoriam record",security:[{bearerAuth:[]}],request:{params:ks},responses:{200:{description:"In memoriam record deleted successfully",summary:"In Memoriam Record Deleted"},400:{description:"Invalid in memoriam record ID format",summary:"Validation Error",content:{"application/json":{schema:x.object({errors:x.record(x.string(),x.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:x.object({message:x.string()})}}},404:{description:"In memoriam record not found with the provided ID",summary:"In Memoriam Record Not Found",content:{"application/json":{schema:x.object({message:x.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:x.object({message:x.string()})}}}}},Jj={method:"get",path:"/in-memoriam/role/{role}",tags:["In Memoriam"],summary:"Find in memoriam records by role",request:{params:_s},responses:{200:{description:"In memoriam records retrieved successfully by role",summary:"In Memoriam Records Retrieved by Role",content:{"application/json":{schema:x.array(zs)}}},400:{description:"Invalid role parameter provided",summary:"Validation Error",content:{"application/json":{schema:x.object({errors:x.record(x.string(),x.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:x.object({message:x.string()})}}}}};import _ from"zod";import{extendZodWithOpenApi as eh}from"@asteasolutions/zod-to-openapi";import ar from"zod";var yp=2,fp=1024,th=fp*fp,rh=yp*th;eh(ar);var Zs=ar.object({image:ar.any().refine(o=>o==null||typeof o!="object"||typeof o.size!="number"?!1:o.size<=rh,`A imagem deve ter no m\xE1ximo ${yp}MB.`),caption:ar.string().optional(),congressId:ar.uuid()}),uo=class{constructor(e,r,t){this.internationalScientificCongressGalleryRepository=e;this.internationalScientificCongressRepository=r;this.firebaseStorageService=t}async handle(e,r){try{let{image:t,caption:i,congressId:n}=Zs.parse({...e.body,...e.params,image:e.file});if(!await this.internationalScientificCongressRepository.findById(n))throw new p("O congresso n\xE3o existe.");let a=await this.internationalScientificCongressGalleryRepository.create({imageUrl:"",caption:i||void 0,congressId:n}),c=await this.firebaseStorageService.uploadFile({file:t,id:a.id,folder:M.INTERNATIONAL_SCIENTIFIC_CONGRESS_GALLERY});return await this.internationalScientificCongressGalleryRepository.update({id:a.id,imageUrl:c}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as oh}from"@asteasolutions/zod-to-openapi";import Vs from"zod";oh(Vs);var fo=Vs.object({id:Vs.uuid()}),go=class{constructor(e){this.internationalScientificCongressGalleryRepository=e}async handle(e,r){try{let{id:t}=fo.parse({id:e.params.id});if(!await this.internationalScientificCongressGalleryRepository.findById(t))throw new p("A imagem da galeria n\xE3o existe.");return await this.internationalScientificCongressGalleryRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as ih}from"@asteasolutions/zod-to-openapi";import Bt from"zod";var nh=1,sh=9;ih(Bt);var Ks=Bt.object({congressId:Bt.uuid(),page:Bt.coerce.number().min(1).default(nh),limit:Bt.coerce.number().min(1).default(sh),caption:Bt.string().optional()}),yo=class{constructor(e){this.internationalScientificCongressGalleryRepository=e}async handle(e,r){try{let{congressId:t,page:i,limit:n,...s}=Ks.parse({congressId:e.params.congressId,...e.query}),a=n*i-n,[c,u]=await Promise.all([this.internationalScientificCongressGalleryRepository.findByCongressId({pagination:{offset:a,limit:n},filter:{congressId:t,...s}}),this.internationalScientificCongressGalleryRepository.count({filter:{congressId:t,caption:s.caption}})]),b=Math.max(Math.ceil(u/n),1);return r.status(200).json({page:i,totalPages:b,offset:a,limit:n,galleryImages:c})}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as ah}from"@asteasolutions/zod-to-openapi";import mr from"zod";var Rp=2,hp=1024,mh=hp*hp,ch=Rp*mh;ah(mr);var Js=mr.object({id:mr.uuid(),image:mr.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=ch,`A imagem deve ter no m\xE1ximo ${Rp}MB.`).optional(),caption:mr.string().optional()}),ho=class{constructor(e,r){this.internationalScientificCongressGalleryRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,image:i,caption:n}=Js.parse({id:e.params.id,...e.body,image:e.file}),s=await this.internationalScientificCongressGalleryRepository.findById(t);if(!s)throw new p("A imagem da galeria n\xE3o existe.");let a=s.imageUrl;return i&&(a=await this.firebaseStorageService.uploadFile({file:i,id:t,folder:M.INTERNATIONAL_SCIENTIFIC_CONGRESS_GALLERY})),await this.internationalScientificCongressGalleryRepository.update({id:t,imageUrl:a??void 0,caption:n||void 0}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var ph=_.object({id:_.uuid(),imageUrl:_.string(),caption:_.string().nullable(),congressId:_.uuid()}),Ip={method:"post",path:"/international-scientific-congress/{congressId}/gallery",tags:["International Scientific Congresses"],summary:"Create a new congress gallery image",security:[{bearerAuth:[]}],request:{params:_.object({congressId:_.uuid()}),body:{content:{"application/json":{schema:Zs.omit({congressId:!0})}}}},responses:{201:{description:"Congress gallery image created successfully",summary:"Congress Gallery Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:_.object({errors:_.record(_.string(),_.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:_.object({message:_.string()})}}},404:{description:"Congress not found with the provided ID",summary:"Congress Not Found",content:{"application/json":{schema:_.object({message:_.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:_.object({message:_.string()})}}}}},Cp={method:"get",path:"/international-scientific-congress/{congressId}/gallery",tags:["International Scientific Congresses"],summary:"Find congress gallery images by congress ID",request:{params:Ks},responses:{200:{description:"Congress gallery images retrieved successfully by congress ID",summary:"Congress Galleries Retrieved",content:{"application/json":{schema:_.array(ph)}}},400:{description:"Invalid congress ID parameter provided",summary:"Validation Error",content:{"application/json":{schema:_.object({errors:_.record(_.string(),_.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:_.object({message:_.string()})}}}}},bp={method:"put",path:"/international-scientific-congress/gallery/{id}",tags:["International Scientific Congresses"],summary:"Update congress gallery image",security:[{bearerAuth:[]}],request:{params:fo,body:{content:{"application/json":{schema:Js.omit({id:!0})}}}},responses:{200:{description:"Congress gallery image updated successfully",summary:"Congress Gallery Updated"},400:{description:"Invalid input data or gallery ID format",summary:"Validation Error",content:{"application/json":{schema:_.object({errors:_.record(_.string(),_.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:_.object({message:_.string()})}}},404:{description:"Congress gallery image not found with the provided ID",summary:"Congress Gallery Not Found",content:{"application/json":{schema:_.object({message:_.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:_.object({message:_.string()})}}}}},wp={method:"delete",path:"/international-scientific-congress/gallery/{id}",tags:["International Scientific Congresses"],summary:"Delete congress gallery image",security:[{bearerAuth:[]}],request:{params:fo},responses:{200:{description:"Congress gallery image deleted successfully",summary:"Congress Gallery Deleted"},400:{description:"Invalid gallery ID format",summary:"Validation Error",content:{"application/json":{schema:_.object({errors:_.record(_.string(),_.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:_.object({message:_.string()})}}},404:{description:"Congress gallery image not found with the provided ID",summary:"Congress Gallery Not Found",content:{"application/json":{schema:_.object({message:_.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:_.object({message:_.string()})}}}}};import W from"zod";import{extendZodWithOpenApi as dh}from"@asteasolutions/zod-to-openapi";import cr from"zod";var vp=2,Sp=1024,lh=Sp*Sp,uh=vp*lh;dh(cr);var Ys=cr.object({name:cr.string().min(1,"Nome \xE9 obrigat\xF3rio"),logo:cr.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=uh,`A imagem deve ter no m\xE1ximo ${vp}MB.`).optional(),congressId:cr.uuid()}),Ro=class{constructor(e,r,t){this.internationalScientificCongressPartnerRepository=e;this.internationalScientificCongressRepository=r;this.firebaseStorageService=t}async handle(e,r){try{let{name:t,logo:i,congressId:n}=Ys.parse({...e.body,...e.params,logo:e.file});if(!await this.internationalScientificCongressRepository.findById(n))throw new p("O congresso n\xE3o existe.");let a=await this.internationalScientificCongressPartnerRepository.create({name:t,congressId:n}),c;return i&&(c=await this.firebaseStorageService.uploadFile({file:i,id:a.id,folder:M.PARTNER}),await this.internationalScientificCongressPartnerRepository.update({id:a.id,logoUrl:c})),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as gh}from"@asteasolutions/zod-to-openapi";import Xs from"zod";gh(Xs);var Co=Xs.object({id:Xs.uuid()}),Io=class{constructor(e){this.internationalScientificCongressPartnerRepository=e}async handle(e,r){try{let{id:t}=Co.parse({id:e.params.id});if(!await this.internationalScientificCongressPartnerRepository.findById(t))throw new p("O parceiro n\xE3o existe.");return await this.internationalScientificCongressPartnerRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as fh}from"@asteasolutions/zod-to-openapi";import Ot from"zod";var yh=1,hh=9;fh(Ot);var $s=Ot.object({congressId:Ot.uuid(),page:Ot.coerce.number().min(1).optional(),limit:Ot.coerce.number().min(1).optional(),name:Ot.string().optional()}),bo=class{constructor(e){this.internationalScientificCongressPartnerRepository=e}async handle(e,r){try{let{congressId:t,page:i,limit:n,...s}=$s.parse({congressId:e.params.congressId,...e.query});if(i!==void 0&&n!==void 0){let c=i||yh,u=n||hh,b=u*c-u,[T,Z]=await Promise.all([this.internationalScientificCongressPartnerRepository.findByCongressId({pagination:{offset:b,limit:u},filter:{congressId:t,...s}}),this.internationalScientificCongressPartnerRepository.count({filter:{congressId:t,name:s.name}})]),X=Math.max(Math.ceil(Z/u),1);return r.status(200).json({page:c,totalPages:X,offset:b,limit:u,partners:T})}let a=await this.internationalScientificCongressPartnerRepository.findByCongressId({filter:{congressId:t,...s}});return r.status(200).json(a)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as Rh}from"@asteasolutions/zod-to-openapi";import pr from"zod";var jp=2,Ep=1024,Ih=Ep*Ep,Ch=jp*Ih;Rh(pr);var Qs=pr.object({id:pr.uuid(),name:pr.string().min(1,"Nome \xE9 obrigat\xF3rio").optional(),logo:pr.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=Ch,`A imagem deve ter no m\xE1ximo ${jp}MB.`).optional()}),wo=class{constructor(e,r){this.internationalScientificCongressPartnerRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,name:i,logo:n}=Qs.parse({id:e.params.id,...e.body,logo:e.file}),s=await this.internationalScientificCongressPartnerRepository.findById(t);if(!s)throw new p("O parceiro n\xE3o existe.");let a=s.logoUrl;return n&&(a=await this.firebaseStorageService.uploadFile({file:n,id:t,folder:M.PARTNER})),await this.internationalScientificCongressPartnerRepository.update({id:t,name:i,logoUrl:a??void 0}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var bh=W.object({id:W.uuid(),name:W.string(),logoUrl:W.string().nullable(),congressId:W.uuid()}),xp={method:"post",path:"/international-scientific-congress/{congressId}/partner",tags:["International Scientific Congresses"],summary:"Create a new congress partner",security:[{bearerAuth:[]}],request:{params:W.object({congressId:W.uuid()}),body:{content:{"application/json":{schema:Ys.omit({congressId:!0})}}}},responses:{201:{description:"Congress partner created successfully",summary:"Congress Partner Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:W.object({errors:W.record(W.string(),W.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:W.object({message:W.string()})}}},404:{description:"Congress not found with the provided ID",summary:"Congress Not Found",content:{"application/json":{schema:W.object({message:W.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:W.object({message:W.string()})}}}}},Pp={method:"get",path:"/international-scientific-congress/{congressId}/partner",tags:["International Scientific Congresses"],summary:"Find congress partners by congress ID",request:{params:$s},responses:{200:{description:"Congress partners retrieved successfully by congress ID",summary:"Congress Partners Retrieved",content:{"application/json":{schema:W.array(bh)}}},400:{description:"Invalid congress ID parameter provided",summary:"Validation Error",content:{"application/json":{schema:W.object({errors:W.record(W.string(),W.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:W.object({message:W.string()})}}}}},Mp={method:"put",path:"/international-scientific-congress/partner/{id}",tags:["International Scientific Congresses"],summary:"Update congress partner",security:[{bearerAuth:[]}],request:{params:Co,body:{content:{"application/json":{schema:Qs.omit({id:!0})}}}},responses:{200:{description:"Congress partner updated successfully",summary:"Congress Partner Updated"},400:{description:"Invalid input data or partner ID format",summary:"Validation Error",content:{"application/json":{schema:W.object({errors:W.record(W.string(),W.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:W.object({message:W.string()})}}},404:{description:"Congress partner not found with the provided ID",summary:"Congress Partner Not Found",content:{"application/json":{schema:W.object({message:W.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:W.object({message:W.string()})}}}}},Ap={method:"delete",path:"/international-scientific-congress/partner/{id}",tags:["International Scientific Congresses"],summary:"Delete congress partner",security:[{bearerAuth:[]}],request:{params:Co},responses:{200:{description:"Congress partner deleted successfully",summary:"Congress Partner Deleted"},400:{description:"Invalid partner ID format",summary:"Validation Error",content:{"application/json":{schema:W.object({errors:W.record(W.string(),W.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:W.object({message:W.string()})}}},404:{description:"Congress partner not found with the provided ID",summary:"Congress Partner Not Found",content:{"application/json":{schema:W.object({message:W.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:W.object({message:W.string()})}}}}};import d from"zod";import{extendZodWithOpenApi as wh}from"@asteasolutions/zod-to-openapi";import Q from"zod";wh(Q);var ea=Q.object({title:Q.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio"),edition:Q.coerce.number().int().positive("Edi\xE7\xE3o deve ser um n\xFAmero positivo"),startDate:Q.coerce.date(),endDate:Q.coerce.date(),description:Q.string().optional(),location:Q.string().optional(),congressLink:Q.url("Link do congresso deve ser uma URL v\xE1lida").optional().or(Q.literal("")),noticeUrl:Q.url("URL do edital deve ser uma URL v\xE1lida").optional().or(Q.literal("")),scheduleUrl:Q.url("URL do cronograma deve ser uma URL v\xE1lida").optional().or(Q.literal("")),programUrl:Q.url("URL da programa\xE7\xE3o deve ser uma URL v\xE1lida").optional().or(Q.literal("")),adminReportUrl:Q.url("URL do relat\xF3rio administrativo deve ser uma URL v\xE1lida").optional().or(Q.literal("")),proceedingsUrl:Q.url("URL dos anais deve ser uma URL v\xE1lida").optional().or(Q.literal(""))}).refine(o=>o.endDate>=o.startDate,{message:"Data de t\xE9rmino deve ser posterior ou igual \xE0 data de in\xEDcio",path:["endDate"]}),So=class{constructor(e){this.internationalScientificCongressRepository=e}async handle(e,r){try{let t=ea.parse(e.body);return await this.internationalScientificCongressRepository.create(t),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as Sh}from"@asteasolutions/zod-to-openapi";import ta from"zod";Sh(ta);var ra=ta.object({id:ta.uuid()}),vo=class{constructor(e){this.internationalScientificCongressRepository=e}async handle(e,r){try{let{id:t}=ra.parse({id:e.params.id});if(!await this.internationalScientificCongressRepository.findById(t))throw new p("O congresso n\xE3o existe.");return await this.internationalScientificCongressRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as vh}from"@asteasolutions/zod-to-openapi";import oa from"zod";vh(oa);var ia=oa.object({edition:oa.coerce.number().int().positive()}),Eo=class{constructor(e){this.internationalScientificCongressRepository=e}async handle(e,r){try{let{edition:t}=ia.parse({edition:e.params.edition}),i=await this.internationalScientificCongressRepository.findByEdition(t);return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as Eh}from"@asteasolutions/zod-to-openapi";import na from"zod";Eh(na);var xo=na.object({id:na.uuid()}),jo=class{constructor(e){this.internationalScientificCongressRepository=e}async handle(e,r){try{let{id:t}=xo.parse({id:e.params.id}),i=await this.internationalScientificCongressRepository.findById(t);if(!i)throw new p("O congresso n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as jh}from"@asteasolutions/zod-to-openapi";import Je from"zod";var xh=1,Ph=10;jh(Je);var sa=Je.object({page:Je.coerce.number().min(1).default(xh),limit:Je.coerce.number().min(1).default(Ph),title:Je.string().optional(),edition:Je.coerce.number().int().positive().optional(),location:Je.string().optional(),orderBy:Je.enum(["asc","desc"]).optional()}),Po=class{constructor(e){this.internationalScientificCongressRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=sa.parse(e.query),s=i*t-i,[a,c]=await Promise.all([this.internationalScientificCongressRepository.find({pagination:{offset:s,limit:i},filter:n}),this.internationalScientificCongressRepository.count({filter:n})]),u=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:u,offset:s,limit:i,congresses:a})}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as Mh}from"@asteasolutions/zod-to-openapi";import $ from"zod";Mh($);var aa=$.object({id:$.uuid(),title:$.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio").optional(),edition:$.coerce.number().int().positive("Edi\xE7\xE3o deve ser um n\xFAmero positivo").optional(),startDate:$.coerce.date().optional(),endDate:$.coerce.date().optional(),description:$.string().optional(),location:$.string().optional(),congressLink:$.url("Link do congresso deve ser uma URL v\xE1lida").optional().or($.literal("")),noticeUrl:$.url("URL do edital deve ser uma URL v\xE1lida").optional().or($.literal("")),scheduleUrl:$.url("URL do cronograma deve ser uma URL v\xE1lida").optional().or($.literal("")),programUrl:$.url("URL da programa\xE7\xE3o deve ser uma URL v\xE1lida").optional().or($.literal("")),adminReportUrl:$.url("URL do relat\xF3rio administrativo deve ser uma URL v\xE1lida").optional().or($.literal("")),proceedingsUrl:$.url("URL dos anais deve ser uma URL v\xE1lida").optional().or($.literal(""))}),Mo=class{constructor(e){this.internationalScientificCongressRepository=e}async handle(e,r){try{let{id:t,...i}=aa.parse({id:e.params.id,...e.body});if(!await this.internationalScientificCongressRepository.findById(t))throw new p("O congresso n\xE3o existe.");return await this.internationalScientificCongressRepository.update({...i,id:t}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var Ah=9,Th=d.object({image:d.any().openapi({type:"string",format:"binary"}),caption:d.string().optional()}),Dh=d.object({image:d.any().openapi({type:"string",format:"binary"}).optional(),caption:d.string().optional()}),Fh=d.object({id:d.uuid(),name:d.string(),logoUrl:d.string().nullable(),congressId:d.uuid()}),ma=d.object({id:d.uuid(),imageUrl:d.string(),caption:d.string().nullable(),congressId:d.uuid()}),ca=d.object({id:d.uuid(),title:d.string(),edition:d.number(),startDate:d.date(),endDate:d.date(),description:d.string().nullable(),location:d.string().nullable(),congressLink:d.string().nullable(),noticeUrl:d.string().nullable(),scheduleUrl:d.string().nullable(),programUrl:d.string().nullable(),adminReportUrl:d.string().nullable(),proceedingsUrl:d.string().nullable(),partners:d.array(Fh),galleries:d.array(ma),createdAt:d.date(),updatedAt:d.date()}),Tp={method:"post",path:"/international-scientific-congress",tags:["International Scientific Congresses"],summary:"Create a new international scientific congress",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:ea}}}},responses:{201:{description:"International scientific congress created successfully",summary:"International Scientific Congress Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:d.object({errors:d.record(d.string(),d.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:d.object({message:d.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:d.object({message:d.string()})}}}}},Dp={method:"get",path:"/international-scientific-congress",tags:["International Scientific Congresses"],summary:"List all international scientific congresses with pagination and filters",request:{query:sa},responses:{200:{description:"List of international scientific congresses retrieved successfully with pagination",summary:"International Scientific Congresses Retrieved",content:{"application/json":{schema:d.object({page:d.number(),totalPages:d.number(),offset:d.number(),limit:d.number(),congresses:d.array(ca)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:d.object({errors:d.record(d.string(),d.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:d.object({message:d.string()})}}}}},Fp={method:"get",path:"/international-scientific-congress/{id}",tags:["International Scientific Congresses"],summary:"Find international scientific congress by ID",request:{params:xo},responses:{200:{description:"International scientific congress details retrieved successfully",summary:"International Scientific Congress Retrieved",content:{"application/json":{schema:ca}}},400:{description:"Invalid international scientific congress ID format",summary:"Validation Error",content:{"application/json":{schema:d.object({errors:d.record(d.string(),d.string())})}}},404:{description:"International scientific congress not found with the provided ID",summary:"International Scientific Congress Not Found",content:{"application/json":{schema:d.object({message:d.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:d.object({message:d.string()})}}}}},Up={method:"get",path:"/international-scientific-congress/edition/{edition}",tags:["International Scientific Congresses"],summary:"Find international scientific congresses by edition",request:{params:ia},responses:{200:{description:"International scientific congresses retrieved successfully by edition",summary:"International Scientific Congresses Retrieved by Edition",content:{"application/json":{schema:d.array(ca)}}},400:{description:"Invalid edition parameter provided",summary:"Validation Error",content:{"application/json":{schema:d.object({errors:d.record(d.string(),d.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:d.object({message:d.string()})}}}}},qp={method:"put",path:"/international-scientific-congress/{id}",tags:["International Scientific Congresses"],summary:"Update international scientific congress",security:[{bearerAuth:[]}],request:{params:xo,body:{content:{"application/json":{schema:aa.omit({id:!0})}}}},responses:{200:{description:"International scientific congress updated successfully",summary:"International Scientific Congress Updated"},400:{description:"Invalid input data or international scientific congress ID format",summary:"Validation Error",content:{"application/json":{schema:d.object({errors:d.record(d.string(),d.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:d.object({message:d.string()})}}},404:{description:"International scientific congress not found with the provided ID",summary:"International Scientific Congress Not Found",content:{"application/json":{schema:d.object({message:d.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:d.object({message:d.string()})}}}}},Bp={method:"delete",path:"/international-scientific-congress/{id}",tags:["International Scientific Congresses"],summary:"Delete international scientific congress",security:[{bearerAuth:[]}],request:{params:ra},responses:{200:{description:"International scientific congress deleted successfully",summary:"International Scientific Congress Deleted"},400:{description:"Invalid international scientific congress ID format",summary:"Validation Error",content:{"application/json":{schema:d.object({errors:d.record(d.string(),d.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:d.object({message:d.string()})}}},404:{description:"International scientific congress not found with the provided ID",summary:"International Scientific Congress Not Found",content:{"application/json":{schema:d.object({message:d.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:d.object({message:d.string()})}}}}},zP={method:"post",path:"/international-scientific-congress/{congressId}/gallery",tags:["International Scientific Congress Gallery"],summary:"Create a new gallery image for a congress",security:[{bearerAuth:[]}],request:{params:d.object({congressId:d.uuid()}),body:{content:{"multipart/form-data":{schema:Th}}}},responses:{201:{description:"Gallery image created successfully",summary:"Gallery Image Created"},400:{description:"Invalid input data, missing required fields, or invalid image format/size",summary:"Validation Error",content:{"application/json":{schema:d.object({errors:d.record(d.string(),d.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:d.object({message:d.string()})}}},404:{description:"Congress not found with the provided ID",summary:"Congress Not Found",content:{"application/json":{schema:d.object({message:d.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:d.object({message:d.string()})}}}}},ZP={method:"get",path:"/international-scientific-congress/{congressId}/gallery",tags:["International Scientific Congress Gallery"],summary:"List all gallery images for a congress with pagination",request:{params:d.object({congressId:d.uuid()}),query:d.object({page:d.coerce.number().min(1).default(1),limit:d.coerce.number().min(1).default(Ah),caption:d.string().optional()})},responses:{200:{description:"Gallery images retrieved successfully with pagination",summary:"Gallery Images Retrieved",content:{"application/json":{schema:d.object({page:d.number(),totalPages:d.number(),offset:d.number(),limit:d.number(),galleries:d.array(ma)})}}},400:{description:"Invalid congress ID format or query parameters",summary:"Validation Error",content:{"application/json":{schema:d.object({errors:d.record(d.string(),d.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:d.object({message:d.string()})}}}}},VP={method:"get",path:"/international-scientific-congress/gallery/{id}",tags:["International Scientific Congress Gallery"],summary:"Find a gallery image by ID",request:{params:d.object({id:d.uuid()})},responses:{200:{description:"Gallery image retrieved successfully",summary:"Gallery Image Retrieved",content:{"application/json":{schema:ma}}},400:{description:"Invalid gallery image ID format",summary:"Validation Error",content:{"application/json":{schema:d.object({errors:d.record(d.string(),d.string())})}}},404:{description:"Gallery image not found with the provided ID",summary:"Gallery Image Not Found",content:{"application/json":{schema:d.object({message:d.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:d.object({message:d.string()})}}}}},KP={method:"put",path:"/international-scientific-congress/gallery/{id}",tags:["International Scientific Congress Gallery"],summary:"Update a gallery image with optional image upload",security:[{bearerAuth:[]}],request:{params:d.object({id:d.uuid()}),body:{content:{"multipart/form-data":{schema:Dh}}}},responses:{200:{description:"Gallery image updated successfully",summary:"Gallery Image Updated"},400:{description:"Invalid input data, gallery ID format, or invalid image format/size",summary:"Validation Error",content:{"application/json":{schema:d.object({errors:d.record(d.string(),d.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:d.object({message:d.string()})}}},404:{description:"Gallery image not found with the provided ID",summary:"Gallery Image Not Found",content:{"application/json":{schema:d.object({message:d.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:d.object({message:d.string()})}}}}},JP={method:"delete",path:"/international-scientific-congress/gallery/{id}",tags:["International Scientific Congress Gallery"],summary:"Delete a gallery image",security:[{bearerAuth:[]}],request:{params:d.object({id:d.uuid()})},responses:{200:{description:"Gallery image deleted successfully",summary:"Gallery Image Deleted"},400:{description:"Invalid gallery ID format",summary:"Validation Error",content:{"application/json":{schema:d.object({errors:d.record(d.string(),d.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:d.object({message:d.string()})}}},404:{description:"Gallery image not found with the provided ID",summary:"Gallery Image Not Found",content:{"application/json":{schema:d.object({message:d.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:d.object({message:d.string()})}}}}};import{$Enums as Nh}from"@prisma/client";import B from"zod";import{extendZodWithOpenApi as Uh}from"@asteasolutions/zod-to-openapi";import Nt from"zod";Uh(Nt);var pa=Nt.object({role:Nt.string().min(1),description:Nt.string().optional(),userId:Nt.uuid(),order:Nt.number().optional()}),Ao=class{constructor(e){this.legitimatorCommitteeMemberRepository=e}async handle(e,r){try{let{role:t,description:i,userId:n,order:s}=pa.parse(e.body);return await this.legitimatorCommitteeMemberRepository.create({role:t,description:i,userId:n,order:s??0}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as qh}from"@asteasolutions/zod-to-openapi";import da from"zod";qh(da);var la=da.object({id:da.uuid()}),To=class{constructor(e){this.legitimatorCommitteeMemberRepository=e}async handle(e,r){try{let{id:t}=la.parse({id:e.params.id});if(!await this.legitimatorCommitteeMemberRepository.findById(t))throw new p("O membro do comit\xEA legitimador n\xE3o existe.");return await this.legitimatorCommitteeMemberRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as Bh}from"@asteasolutions/zod-to-openapi";import ua from"zod";Bh(ua);var Fo=ua.object({id:ua.uuid()}),Do=class{constructor(e){this.legitimatorCommitteeMemberRepository=e}async handle(e,r){try{let{id:t}=Fo.parse({id:e.params.id}),i=await this.legitimatorCommitteeMemberRepository.findById(t);if(!i)throw new p("O membro do comit\xEA legitimador n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as Oh}from"@asteasolutions/zod-to-openapi";import lt from"zod";Oh(lt);var ga=lt.object({id:lt.uuid(),role:lt.string().min(1).optional(),description:lt.string().optional(),userId:lt.uuid().optional(),order:lt.number().optional()}),Uo=class{constructor(e){this.legitimatorCommitteeMemberRepository=e}async handle(e,r){try{let{id:t,role:i,description:n,userId:s,order:a}=ga.parse({id:e.params.id,...e.body});if(!await this.legitimatorCommitteeMemberRepository.findById(t))throw new p("O membro do comit\xEA legitimador n\xE3o existe.");return await this.legitimatorCommitteeMemberRepository.update({id:t,role:i,description:n,userId:s,order:a}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var kh=B.object({id:B.uuid(),name:B.string(),emailAddress:B.string(),avatarUrl:B.string().nullable(),orcid:B.string().nullable(),phone:B.string().nullable(),lattesUrl:B.string().nullable(),role:B.enum(Nh.UserRole)}),Op=B.object({id:B.uuid(),role:B.string(),description:B.string().nullable(),order:B.number(),createdAt:B.date(),updatedAt:B.date(),userId:B.uuid(),user:kh}),Np={method:"post",path:"/legitimator-committee-member",tags:["Legitimator Committee Members"],summary:"Create a new Legitimator Committee Member",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:pa}}}},responses:{201:{description:"Legitimator Committee Member created successfully",summary:"Legitimator Committee Member Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:B.object({errors:B.record(B.string(),B.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:B.object({message:B.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:B.object({message:B.string()})}}}}},kp={method:"get",path:"/legitimator-committee-member",tags:["Legitimator Committee Members"],summary:"List all Legitimator Committee Members with filters",request:{query:B.object({role:B.string().optional(),orderBy:B.enum(["asc","desc"]).optional()})},responses:{200:{description:"List of Legitimator Committee Members retrieved successfully",summary:"Legitimator Committee Members Retrieved",content:{"application/json":{schema:B.object({members:B.array(Op)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:B.object({message:B.string()})}}}}},Gp={method:"get",path:"/legitimator-committee-member/{id}",tags:["Legitimator Committee Members"],summary:"Find Legitimator Committee Member by ID",request:{params:Fo},responses:{200:{description:"Legitimator Committee Member details retrieved successfully",summary:"Legitimator Committee Member Retrieved",content:{"application/json":{schema:Op}}},400:{description:"Invalid Legitimator Committee Member ID format",summary:"Validation Error",content:{"application/json":{schema:B.object({errors:B.record(B.string(),B.string())})}}},404:{description:"Legitimator Committee Member not found with the provided ID",summary:"Legitimator Committee Member Not Found",content:{"application/json":{schema:B.object({message:B.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:B.object({message:B.string()})}}}}},Lp={method:"put",path:"/legitimator-committee-member/{id}",tags:["Legitimator Committee Members"],summary:"Update Legitimator Committee Member",security:[{bearerAuth:[]}],request:{params:Fo,body:{content:{"application/json":{schema:ga.omit({id:!0})}}}},responses:{200:{description:"Legitimator Committee Member updated successfully",summary:"Legitimator Committee Member Updated"},400:{description:"Invalid input data or Legitimator Committee Member ID format",summary:"Validation Error",content:{"application/json":{schema:B.object({errors:B.record(B.string(),B.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:B.object({message:B.string()})}}},404:{description:"Legitimator Committee Member not found with the provided ID",summary:"Legitimator Committee Member Not Found",content:{"application/json":{schema:B.object({message:B.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:B.object({message:B.string()})}}}}},_p={method:"delete",path:"/legitimator-committee-member/{id}",tags:["Legitimator Committee Members"],summary:"Delete Legitimator Committee Member",security:[{bearerAuth:[]}],request:{params:la},responses:{200:{description:"Legitimator Committee Member deleted successfully",summary:"Legitimator Committee Member Deleted"},400:{description:"Invalid Legitimator Committee Member ID format",summary:"Validation Error",content:{"application/json":{schema:B.object({errors:B.record(B.string(),B.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:B.object({message:B.string()})}}},404:{description:"Legitimator Committee Member not found with the provided ID",summary:"Legitimator Committee Member Not Found",content:{"application/json":{schema:B.object({message:B.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:B.object({message:B.string()})}}}}};import{$Enums as Hh}from"@prisma/client";import j from"zod";import{extendZodWithOpenApi as Gh}from"@asteasolutions/zod-to-openapi";import De from"zod";Gh(De);var fa=De.object({name:De.string().min(1),description:De.string().optional(),members:De.array(De.object({userId:De.uuid(),role:De.string().min(1),order:De.number().optional()}))}),qo=class{constructor(e){this.managementTeamRepository=e}async handle(e,r){try{let{name:t,description:i,members:n}=fa.parse(e.body);if(await this.managementTeamRepository.findByName(t))throw new ee("J\xE1 existe um time de gest\xE3o cadastrado com este nome.");return await this.managementTeamRepository.create({name:t,description:i,members:n.map(a=>({userId:a.userId,role:a.role,order:a.order??0}))}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as Lh}from"@asteasolutions/zod-to-openapi";import ya from"zod";Lh(ya);var ha=ya.object({id:ya.uuid()}),Bo=class{constructor(e){this.managementTeamRepository=e}async handle(e,r){try{let{id:t}=ha.parse({id:e.params.id});if(!await this.managementTeamRepository.findById(t))throw new p("O time de gest\xE3o n\xE3o existe.");return await this.managementTeamRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as _h}from"@asteasolutions/zod-to-openapi";import Ra from"zod";_h(Ra);var No=Ra.object({id:Ra.uuid()}),Oo=class{constructor(e){this.managementTeamRepository=e}async handle(e,r){try{let{id:t}=No.parse({id:e.params.id}),i=await this.managementTeamRepository.findById(t);if(!i)throw new p("O time de gest\xE3o n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as Wh}from"@asteasolutions/zod-to-openapi";import ve from"zod";Wh(ve);var Ia=ve.object({id:ve.uuid(),name:ve.string().min(1).optional(),description:ve.string().optional(),members:ve.array(ve.object({userId:ve.uuid(),role:ve.string().min(1),order:ve.number().optional()})).optional()}),ko=class{constructor(e){this.managementTeamRepository=e}async handle(e,r){try{let{id:t,name:i,description:n,members:s}=Ia.parse({id:e.params.id,...e.body}),a=await this.managementTeamRepository.findById(t);if(!a)throw new p("O time de gest\xE3o n\xE3o existe.");if(i&&i!==a.name){let c=await this.managementTeamRepository.findByName(i);if(c&&c.id!==t)throw new ee("J\xE1 existe um time de gest\xE3o com este nome.")}return await this.managementTeamRepository.update({id:t,name:i,description:n,members:s?s.map(c=>({userId:c.userId,role:c.role,order:c.order??0})):void 0}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var zh=j.object({id:j.uuid(),name:j.string(),emailAddress:j.string(),avatarUrl:j.string().nullable(),orcid:j.string().nullable(),phone:j.string().nullable(),lattesUrl:j.string().nullable(),role:j.enum(Hh.UserRole)}),Zh=j.object({id:j.uuid(),role:j.string(),description:j.string().nullable(),order:j.number(),teamId:j.uuid(),userId:j.uuid(),createdAt:j.date(),updatedAt:j.date(),user:zh}),Wp=j.object({id:j.uuid(),name:j.string(),description:j.string().nullable(),createdAt:j.date(),updatedAt:j.date(),members:j.array(Zh)}),Hp={method:"post",path:"/management-team",tags:["Management Teams"],summary:"Create a new Management Team with multiple members",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:fa}}}},responses:{201:{description:"Management Team created successfully",summary:"Management Team Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:j.object({errors:j.record(j.string(),j.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:j.object({message:j.string()})}}},409:{description:"Management Team with this name already exists",summary:"Conflict",content:{"application/json":{schema:j.object({message:j.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:j.object({message:j.string()})}}}}},zp={method:"get",path:"/management-team",tags:["Management Teams"],summary:"List all Management Teams with filters",request:{query:j.object({name:j.string().optional(),description:j.string().optional(),orderBy:j.enum(["asc","desc"]).optional()})},responses:{200:{description:"List of Management Teams retrieved successfully",summary:"Management Teams Retrieved",content:{"application/json":{schema:j.object({teams:j.array(Wp)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:j.object({message:j.string()})}}}}},Zp={method:"get",path:"/management-team/{id}",tags:["Management Teams"],summary:"Find Management Team by ID",request:{params:No},responses:{200:{description:"Management Team details retrieved successfully",summary:"Management Team Retrieved",content:{"application/json":{schema:Wp}}},400:{description:"Invalid Management Team ID format",summary:"Validation Error",content:{"application/json":{schema:j.object({errors:j.record(j.string(),j.string())})}}},404:{description:"Management Team not found with the provided ID",summary:"Management Team Not Found",content:{"application/json":{schema:j.object({message:j.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:j.object({message:j.string()})}}}}},Vp={method:"put",path:"/management-team/{id}",tags:["Management Teams"],summary:"Update Management Team and manage member relationships",security:[{bearerAuth:[]}],request:{params:No,body:{content:{"application/json":{schema:Ia.omit({id:!0})}}}},responses:{200:{description:"Management Team updated successfully",summary:"Management Team Updated"},400:{description:"Invalid input data or Management Team ID format",summary:"Validation Error",content:{"application/json":{schema:j.object({errors:j.record(j.string(),j.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:j.object({message:j.string()})}}},404:{description:"Management Team not found with the provided ID",summary:"Management Team Not Found",content:{"application/json":{schema:j.object({message:j.string()})}}},409:{description:"Management Team with this name already exists",summary:"Conflict",content:{"application/json":{schema:j.object({message:j.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:j.object({message:j.string()})}}}}},Kp={method:"delete",path:"/management-team/{id}",tags:["Management Teams"],summary:"Delete Management Team",security:[{bearerAuth:[]}],request:{params:ha},responses:{200:{description:"Management Team deleted successfully",summary:"Management Team Deleted"},400:{description:"Invalid Management Team ID format",summary:"Validation Error",content:{"application/json":{schema:j.object({errors:j.record(j.string(),j.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:j.object({message:j.string()})}}},404:{description:"Management Team not found with the provided ID",summary:"Management Team Not Found",content:{"application/json":{schema:j.object({message:j.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:j.object({message:j.string()})}}}}};import{MeetingFormat as eR,MeetingStatus as tR}from"@prisma/client";import N from"zod";import{extendZodWithOpenApi as Vh}from"@asteasolutions/zod-to-openapi";import kt from"zod";var Yp=10,Jp=1024,Kh=Jp*Jp,Jh=Yp*Kh;Vh(kt);var Ca=kt.object({title:kt.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio"),publishedAt:kt.coerce.date(),meetingId:kt.uuid(),document:kt.any().refine(o=>o==null||typeof o!="object"||typeof o.size!="number"?!1:o.size<=Jh,`O documento deve ter no m\xE1ximo ${Yp}MB.`)}),Go=class{constructor(e,r,t){this.meetingMinuteRepository=e;this.meetingRepository=r;this.firebaseStorageService=t}async handle(e,r){try{let{title:t,publishedAt:i,meetingId:n,document:s}=Ca.parse({...e.body,...e.params,document:e.file});if(!await this.meetingRepository.findById(n))throw new p("A reuni\xE3o n\xE3o existe.");if(await this.meetingMinuteRepository.findByMeetingId(n))throw new m("Esta reuni\xE3o j\xE1 possui uma ata.");let u=await this.meetingMinuteRepository.create({title:t,publishedAt:i,meetingId:n,documentUrl:""}),b=await this.firebaseStorageService.uploadFile({file:s,id:u.id,folder:M.MEETING_MINUTE});return await this.meetingMinuteRepository.update({id:u.id,documentUrl:b}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as Yh}from"@asteasolutions/zod-to-openapi";import ba from"zod";Yh(ba);var dr=ba.object({meetingId:ba.uuid()}),Lo=class{constructor(e){this.meetingMinuteRepository=e}async handle(e,r){try{let{meetingId:t}=dr.parse({meetingId:e.params.meetingId}),i=await this.meetingMinuteRepository.findByMeetingId(t);return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as Xh}from"@asteasolutions/zod-to-openapi";import Gt from"zod";var $p=10,Xp=1024,$h=Xp*Xp,Qh=$p*$h;Xh(Gt);var wa=Gt.object({meetingId:Gt.uuid(),title:Gt.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio").optional(),publishedAt:Gt.coerce.date().optional(),document:Gt.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=Qh,`O documento deve ter no m\xE1ximo ${$p}MB.`).optional()}),_o=class{constructor(e,r){this.meetingMinuteRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{meetingId:t,title:i,publishedAt:n,document:s}=wa.parse({meetingId:e.params.meetingId,...e.body,document:e.file}),a=await this.meetingMinuteRepository.findByMeetingId(t);if(!a)throw new p("A ata n\xE3o existe para esta reuni\xE3o.");let c=a.documentUrl;return s&&(a.documentUrl&&await this.firebaseStorageService.deleteFile({fileUrl:a.documentUrl}),c=await this.firebaseStorageService.uploadFile({file:s,id:a.id,folder:M.MEETING_MINUTE})),await this.meetingMinuteRepository.update({id:a.id,title:i,publishedAt:n,documentUrl:c??void 0}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var rR=N.object({id:N.uuid(),title:N.string(),scheduledAt:N.date(),format:N.enum(eR),agenda:N.string(),meetingLink:N.string().nullable(),location:N.string().nullable(),status:N.enum(tR),createdAt:N.date(),updatedAt:N.date()}),oR=N.object({id:N.uuid(),title:N.string(),publishedAt:N.date(),documentUrl:N.string(),meetingId:N.uuid(),meeting:rR,createdAt:N.date(),updatedAt:N.date()}),Qp={method:"post",path:"/meeting/{meetingId}/minute",tags:["Meetings"],summary:"Create a new meeting minute with document upload",security:[{bearerAuth:[]}],request:{params:N.object({meetingId:N.uuid()}),body:{content:{"multipart/form-data":{schema:Ca.omit({meetingId:!0})}}}},responses:{201:{description:"Meeting minute created successfully",summary:"Meeting Minute Created"},400:{description:"Invalid input data, missing required fields, or invalid document format/size",summary:"Validation Error",content:{"application/json":{schema:N.object({errors:N.record(N.string(),N.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:N.object({message:N.string()})}}},404:{description:"Meeting not found with the provided ID",summary:"Meeting Not Found",content:{"application/json":{schema:N.object({message:N.string()})}}},409:{description:"Meeting already has a minute",summary:"Conflict",content:{"application/json":{schema:N.object({message:N.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:N.object({message:N.string()})}}}}},ed={method:"get",path:"/meeting/{meetingId}/minute",tags:["Meetings"],summary:"Find meeting minute by meeting ID",request:{params:dr},responses:{200:{description:"Meeting minute retrieved successfully by meeting ID",summary:"Meeting Minute Retrieved by Meeting ID",content:{"application/json":{schema:oR.nullable()}}},400:{description:"Invalid meeting ID parameter provided",summary:"Validation Error",content:{"application/json":{schema:N.object({errors:N.record(N.string(),N.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:N.object({message:N.string()})}}}}},td={method:"put",path:"/meeting/{meetingId}/minute",tags:["Meetings"],summary:"Update meeting minute with optional document upload",security:[{bearerAuth:[]}],request:{params:dr,body:{content:{"multipart/form-data":{schema:wa.omit({meetingId:!0})}}}},responses:{200:{description:"Meeting minute updated successfully",summary:"Meeting Minute Updated"},400:{description:"Invalid input data, meeting minute ID format, or invalid document format/size",summary:"Validation Error",content:{"application/json":{schema:N.object({errors:N.record(N.string(),N.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:N.object({message:N.string()})}}},404:{description:"Meeting minute not found with the provided ID",summary:"Meeting Minute Not Found",content:{"application/json":{schema:N.object({message:N.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:N.object({message:N.string()})}}}}},rd={method:"delete",path:"/meeting/{meetingId}/minute",tags:["Meetings"],summary:"Delete meeting minute",security:[{bearerAuth:[]}],request:{params:dr},responses:{200:{description:"Meeting minute deleted successfully",summary:"Meeting Minute Deleted"},400:{description:"Invalid meeting minute ID format",summary:"Validation Error",content:{"application/json":{schema:N.object({errors:N.record(N.string(),N.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:N.object({message:N.string()})}}},404:{description:"Meeting minute not found with the provided ID",summary:"Meeting Minute Not Found",content:{"application/json":{schema:N.object({message:N.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:N.object({message:N.string()})}}}}};import{MeetingFormat as hR,MeetingStatus as RR}from"@prisma/client";import v from"zod";import{extendZodWithOpenApi as iR}from"@asteasolutions/zod-to-openapi";import{MeetingFormat as Wo,MeetingStatus as Sa}from"@prisma/client";import Ee from"zod";iR(Ee);var va=Ee.object({title:Ee.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio"),scheduledAt:Ee.coerce.date(),format:Ee.enum(Wo).default(Wo.ONLINE),agenda:Ee.string().min(1,"Pauta \xE9 obrigat\xF3ria"),meetingLink:Ee.string().url("Link da reuni\xE3o deve ser uma URL v\xE1lida").optional().or(Ee.literal("")),location:Ee.string().optional(),status:Ee.enum(Sa).default(Sa.PENDING)}).refine(o=>o.format===Wo.ONLINE?!!o.meetingLink:o.format===Wo.IN_PERSON?!!o.location:!0,{message:"Reuni\xF5es online devem ter link e reuni\xF5es presenciais devem ter localiza\xE7\xE3o",path:["format"]}),Ho=class{constructor(e){this.meetingRepository=e}async handle(e,r){try{let{title:t,scheduledAt:i,format:n,agenda:s,meetingLink:a,location:c,status:u}=va.parse(e.body);return await this.meetingRepository.create({title:t,scheduledAt:i,format:n,agenda:s,meetingLink:a||void 0,location:c||void 0,status:u??Sa.PENDING}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as nR}from"@asteasolutions/zod-to-openapi";import Ea from"zod";nR(Ea);var ja=Ea.object({id:Ea.uuid()}),zo=class{constructor(e){this.meetingRepository=e}async handle(e,r){try{let{id:t}=ja.parse({id:e.params.id});if(!await this.meetingRepository.findById(t))throw new p("A reuni\xE3o n\xE3o existe.");return await this.meetingRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as sR}from"@asteasolutions/zod-to-openapi";import xa from"zod";sR(xa);var Vo=xa.object({id:xa.uuid()}),Zo=class{constructor(e){this.meetingRepository=e}async handle(e,r){try{let{id:t}=Vo.parse({id:e.params.id}),i=await this.meetingRepository.findById(t);if(!i)throw new p("A reuni\xE3o n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as aR}from"@asteasolutions/zod-to-openapi";import{MeetingStatus as mR}from"@prisma/client";import Pa from"zod";aR(Pa);var Ma=Pa.object({status:Pa.enum(mR)}),Ko=class{constructor(e){this.meetingRepository=e}async handle(e,r){try{let{status:t}=Ma.parse({status:e.params.status}),i=await this.meetingRepository.findByStatus(t);return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as cR}from"@asteasolutions/zod-to-openapi";import{MeetingFormat as pR,MeetingStatus as dR}from"@prisma/client";import Ye from"zod";var lR=1,uR=10;cR(Ye);var Aa=Ye.object({page:Ye.coerce.number().min(1).default(lR),limit:Ye.coerce.number().min(1).default(uR),title:Ye.string().optional(),format:Ye.enum(pR).optional(),status:Ye.enum(dR).optional(),orderBy:Ye.enum(["asc","desc"]).optional()}),Jo=class{constructor(e){this.meetingRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=Aa.parse(e.query),s=i*t-i,[a,c]=await Promise.all([this.meetingRepository.find({pagination:{offset:s,limit:i},filter:n}),this.meetingRepository.count({filter:n})]),u=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:u,offset:s,limit:i,meetings:a})}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as gR}from"@asteasolutions/zod-to-openapi";import{MeetingFormat as fR,MeetingStatus as yR}from"@prisma/client";import Ie from"zod";gR(Ie);var Ta=Ie.object({id:Ie.uuid(),title:Ie.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio").optional(),scheduledAt:Ie.coerce.date().optional(),format:Ie.enum(fR).optional(),agenda:Ie.string().min(1,"Pauta \xE9 obrigat\xF3ria").optional(),meetingLink:Ie.string().url("Link da reuni\xE3o deve ser uma URL v\xE1lida").optional().or(Ie.literal("")),location:Ie.string().optional(),status:Ie.enum(yR).optional()}),Yo=class{constructor(e){this.meetingRepository=e}async handle(e,r){try{let{id:t,title:i,scheduledAt:n,format:s,agenda:a,meetingLink:c,location:u,status:b}=Ta.parse({id:e.params.id,...e.body});if(!await this.meetingRepository.findById(t))throw new p("A reuni\xE3o n\xE3o existe.");return await this.meetingRepository.update({id:t,title:i,scheduledAt:n,format:s,agenda:a,meetingLink:c||void 0,location:u||void 0,status:b}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var IR=v.object({id:v.uuid(),title:v.string(),publishedAt:v.date(),documentUrl:v.string(),meetingId:v.uuid(),createdAt:v.date(),updatedAt:v.date()}),Da=v.object({id:v.uuid(),title:v.string(),scheduledAt:v.date(),format:v.enum(hR),agenda:v.string(),meetingLink:v.string().nullable(),location:v.string().nullable(),status:v.enum(RR),minutes:IR.nullable(),createdAt:v.date(),updatedAt:v.date()}),od={method:"post",path:"/meeting",tags:["Meetings"],summary:"Create a new meeting",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:va}}}},responses:{201:{description:"Meeting created successfully",summary:"Meeting Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:v.object({errors:v.record(v.string(),v.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:v.object({message:v.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:v.object({message:v.string()})}}}}},id={method:"get",path:"/meeting",tags:["Meetings"],summary:"List all meetings with pagination and filters",request:{query:Aa},responses:{200:{description:"List of meetings retrieved successfully with pagination",summary:"Meetings Retrieved",content:{"application/json":{schema:v.object({page:v.number(),totalPages:v.number(),offset:v.number(),limit:v.number(),meetings:v.array(Da)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:v.object({errors:v.record(v.string(),v.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:v.object({message:v.string()})}}}}},nd={method:"get",path:"/meeting/{id}",tags:["Meetings"],summary:"Find meeting by ID",request:{params:Vo},responses:{200:{description:"Meeting details retrieved successfully",summary:"Meeting Retrieved",content:{"application/json":{schema:Da}}},400:{description:"Invalid meeting ID format",summary:"Validation Error",content:{"application/json":{schema:v.object({errors:v.record(v.string(),v.string())})}}},404:{description:"Meeting not found with the provided ID",summary:"Meeting Not Found",content:{"application/json":{schema:v.object({message:v.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:v.object({message:v.string()})}}}}},sd={method:"get",path:"/meeting/status/{status}",tags:["Meetings"],summary:"Find meetings by status",request:{params:Ma},responses:{200:{description:"Meetings retrieved successfully by status",summary:"Meetings Retrieved by Status",content:{"application/json":{schema:v.array(Da)}}},400:{description:"Invalid status parameter provided",summary:"Validation Error",content:{"application/json":{schema:v.object({errors:v.record(v.string(),v.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:v.object({message:v.string()})}}}}},ad={method:"put",path:"/meeting/{id}",tags:["Meetings"],summary:"Update meeting",security:[{bearerAuth:[]}],request:{params:Vo,body:{content:{"application/json":{schema:Ta.omit({id:!0})}}}},responses:{200:{description:"Meeting updated successfully",summary:"Meeting Updated"},400:{description:"Invalid input data or meeting ID format",summary:"Validation Error",content:{"application/json":{schema:v.object({errors:v.record(v.string(),v.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:v.object({message:v.string()})}}},404:{description:"Meeting not found with the provided ID",summary:"Meeting Not Found",content:{"application/json":{schema:v.object({message:v.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:v.object({message:v.string()})}}}}},md={method:"delete",path:"/meeting/{id}",tags:["Meetings"],summary:"Delete meeting",security:[{bearerAuth:[]}],request:{params:ja},responses:{200:{description:"Meeting deleted successfully",summary:"Meeting Deleted"},400:{description:"Invalid meeting ID format",summary:"Validation Error",content:{"application/json":{schema:v.object({errors:v.record(v.string(),v.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:v.object({message:v.string()})}}},404:{description:"Meeting not found with the provided ID",summary:"Meeting Not Found",content:{"application/json":{schema:v.object({message:v.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:v.object({message:v.string()})}}}}};import P from"zod";import{extendZodWithOpenApi as CR}from"@asteasolutions/zod-to-openapi";import lr from"zod";var bR=5,cd=1024,wR=cd*cd,SR=bR*wR;CR(lr);var Fa=lr.object({title:lr.string().min(1),content:lr.string().min(1),image:lr.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=SR,{message:"A imagem deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB."})}),Xo=class{constructor(e,r){this.newsRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{title:t,content:i,image:n}=Fa.parse({...e.body,image:e.file}),s=e.user.id,a=await this.firebaseStorageService.uploadFile({file:n,folder:M.NEWS,id:s});await this.newsRepository.create({title:t,content:i,authorId:s,imageUrl:a}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as vR}from"@asteasolutions/zod-to-openapi";import Xe from"zod";var ER=1,jR=7;vR(Xe);var Qo=Xe.object({page:Xe.coerce.number().min(1).default(ER),limit:Xe.coerce.number().min(1).default(jR),authorId:Xe.string(),title:Xe.string().optional(),content:Xe.string().optional(),orderBy:Xe.enum(["asc","desc"]).default("desc")}),$o=class{constructor(e){this.newsRepository=e}async handle(e,r){try{let{page:t,limit:i,authorId:n,...s}=Qo.parse(e.query),a=i*t-i,[c,u]=await Promise.all([this.newsRepository.findByAuthorId({authorId:n,pagination:{offset:a,limit:i},filter:s}),this.newsRepository.count({filter:{authorId:n,...s}})]),b=Math.max(Math.ceil(u/i),1);r.status(200).json({page:t,totalPages:b,offset:a,limit:i,news:c})}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as xR}from"@asteasolutions/zod-to-openapi";import Ua from"zod";xR(Ua);var qa=Ua.object({id:Ua.string()}),ei=class{constructor(e){this.newsRepository=e}async handle(e,r){try{let{id:t}=qa.parse(e.params),i=await this.newsRepository.findById(t);if(!i)throw new p("Not\xEDcia n\xE3o encontrada.");r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as PR}from"@asteasolutions/zod-to-openapi";import $e from"zod";var MR=1,AR=9;PR($e);var Ba=$e.object({page:$e.coerce.number().min(1).default(MR),limit:$e.coerce.number().min(1).default(AR),title:$e.string().optional(),content:$e.string().optional(),authorId:$e.string().optional(),orderBy:$e.enum(["asc","desc"]).default("desc")}),ti=class{constructor(e){this.newsRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=Ba.parse(e.query),s=i*t-i,[a,c]=await Promise.all([this.newsRepository.find({pagination:{offset:s,limit:i},filter:n}),this.newsRepository.count({filter:n})]),u=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:u,offset:s,limit:i,news:a})}catch(t){if(t instanceof Error)throw new m(t.message)}}};var pd={method:"post",path:"/news",tags:["News"],summary:"Create news",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:Fa}}}},responses:{201:{description:"News article created successfully",summary:"News Created",content:{"application/json":{schema:P.object({message:P.string()})}}},400:{description:"Invalid input data or file format",summary:"Validation Error",content:{"application/json":{schema:P.object({errors:P.record(P.string(),P.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:P.object({message:P.string()})}}}}},dd={method:"get",path:"/news",tags:["News"],summary:"List news",request:{query:Ba},responses:{200:{description:"Paginated list of news articles retrieved successfully",summary:"News Retrieved",content:{"application/json":{schema:P.object({page:P.number(),totalPages:P.number(),offset:P.number(),limit:P.number(),news:P.array(P.object({title:P.string(),content:P.string(),id:P.string(),createdAt:P.date(),updatedAt:P.date(),imageUrl:P.string().nullable()}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:P.object({errors:P.record(P.string(),P.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:P.object({message:P.string()})}}}}},ld={method:"get",path:"/news/{id}",tags:["News"],summary:"Find news by ID",request:{params:qa},responses:{200:{description:"News article details retrieved successfully",summary:"News Retrieved",content:{"application/json":{schema:P.object({page:P.number(),totalPages:P.number(),offset:P.number(),limit:P.number(),news:P.object({title:P.string(),content:P.string(),id:P.string(),createdAt:P.date(),updatedAt:P.date(),imageUrl:P.string().nullable()})})}}},400:{description:"Invalid news ID format",summary:"Validation Error",content:{"application/json":{schema:P.object({errors:P.record(P.string(),P.string())})}}},404:{description:"News article not found with the provided ID",summary:"News Not Found",content:{"application/json":{schema:P.object({message:P.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:P.object({message:P.string()})}}}}},ud={method:"get",path:"/news/author/{author_id}",tags:["News"],summary:"List news by author",request:{params:Qo.pick({authorId:!0}).transform(()=>({author_id:""})),query:Qo.omit({authorId:!0})},responses:{200:{description:"Paginated list of news articles by author retrieved successfully",summary:"Author News Retrieved",content:{"application/json":{schema:P.object({page:P.number(),totalPages:P.number(),offset:P.number(),limit:P.number(),news:P.array(P.object({title:P.string(),content:P.string(),id:P.string(),createdAt:P.date(),updatedAt:P.date(),imageUrl:P.string().nullable()}))})}}},400:{description:"Invalid author ID or query parameters",summary:"Validation Error",content:{"application/json":{schema:P.object({errors:P.record(P.string(),P.string())})}}},404:{description:"Author not found with the provided ID",summary:"Author Not Found",content:{"application/json":{schema:P.object({message:P.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:P.object({message:P.string()})}}}}};import D from"zod";import{extendZodWithOpenApi as TR}from"@asteasolutions/zod-to-openapi";import je from"zod";var fd=2,gd=1024,DR=gd*gd,FR=fd*DR;TR(je);var Oa=je.object({name:je.string().min(1,"Nome \xE9 obrigat\xF3rio"),logo:je.any().refine(o=>o==null||typeof o!="object"||typeof o.size!="number"?!1:o.size<=FR,`A imagem deve ter no m\xE1ximo ${fd}MB.`),websiteUrl:je.url("URL do site deve ser v\xE1lida").optional(),description:je.string().optional(),category:je.string().optional(),since:je.coerce.date(),isActive:je.preprocess(o=>o==="true",je.boolean().optional())}),ri=class{constructor(e,r){this.partnerRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{name:t,logo:i,websiteUrl:n,description:s,category:a,since:c,isActive:u}=Oa.parse({...e.body,logo:e.file}),b=await this.partnerRepository.create({name:t,websiteUrl:n,description:s,category:a,since:c,isActive:u}),T=await this.firebaseStorageService.uploadFile({file:i,id:b.id,folder:M.PARTNER});return await this.partnerRepository.update({id:b.id,logoUrl:T}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as UR}from"@asteasolutions/zod-to-openapi";import Na from"zod";UR(Na);var ka=Na.object({id:Na.uuid()}),oi=class{constructor(e,r){this.partnerRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=ka.parse({id:e.params.id}),i=await this.partnerRepository.findById(t);if(!i)throw new p("O parceiro n\xE3o existe.");return i.logoUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.logoUrl}),await this.partnerRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as qR}from"@asteasolutions/zod-to-openapi";import Ga from"zod";qR(Ga);var ni=Ga.object({id:Ga.uuid()}),ii=class{constructor(e){this.partnerRepository=e}async handle(e,r){try{let{id:t}=ni.parse({id:e.params.id}),i=await this.partnerRepository.findById(t);if(!i)throw new p("O parceiro n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as BR}from"@asteasolutions/zod-to-openapi";import Fe from"zod";var OR=1,NR=9;BR(Fe);var La=Fe.object({page:Fe.coerce.number().min(1).default(OR),limit:Fe.coerce.number().min(1).default(NR),name:Fe.string().optional(),description:Fe.string().optional(),category:Fe.string().optional(),isActive:Fe.coerce.boolean().optional(),orderBy:Fe.enum(["asc","desc"]).optional()}),si=class{constructor(e){this.partnerRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=La.parse(e.query),s=i*t-i,[a,c]=await Promise.all([this.partnerRepository.find({pagination:{offset:s,limit:i},filter:n}),this.partnerRepository.count({filter:n})]),u=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:u,offset:s,limit:i,partners:a})}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as kR}from"@asteasolutions/zod-to-openapi";import Ce from"zod";var hd=2,yd=1024,GR=yd*yd,LR=hd*GR;kR(Ce);var _a=Ce.object({id:Ce.uuid(),name:Ce.string().min(1,"Nome \xE9 obrigat\xF3rio").optional(),logo:Ce.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=LR,`A imagem deve ter no m\xE1ximo ${hd}MB.`).optional(),websiteUrl:Ce.url("URL do site deve ser v\xE1lida").optional(),description:Ce.string().optional(),category:Ce.string().optional(),since:Ce.coerce.date().optional(),isActive:Ce.preprocess(o=>o==="true",Ce.boolean().optional())}),ai=class{constructor(e,r){this.partnerRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,name:i,logo:n,websiteUrl:s,description:a,category:c,since:u,isActive:b}=_a.parse({id:e.params.id,...e.body,logo:e.file}),T=await this.partnerRepository.findById(t);if(!T)throw new p("O parceiro n\xE3o existe.");let Z=T.logoUrl;if(n&&(Z=await this.firebaseStorageService.uploadFile({file:n,id:t,folder:"images/partners"})),!Z)throw new m("Logo URL \xE9 obrigat\xF3rio");return await this.partnerRepository.update({id:t,name:i,logoUrl:Z,websiteUrl:s,description:a,category:c,since:u,isActive:b}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var Rd=D.object({id:D.uuid(),name:D.string(),logoUrl:D.string(),description:D.string().nullable(),category:D.string().nullable(),since:D.date(),isActive:D.boolean(),createdAt:D.date(),updatedAt:D.date()}),Id={method:"post",path:"/partner",tags:["Partners"],summary:"Create a new partner with logo upload",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:Oa}}}},responses:{201:{description:"Partner created successfully",summary:"Partner Created"},400:{description:"Invalid input data, missing required fields, or invalid logo format/size",summary:"Validation Error",content:{"application/json":{schema:D.object({errors:D.record(D.string(),D.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:D.object({message:D.string()})}}},409:{description:"Partner with this name already exists",summary:"Conflict",content:{"application/json":{schema:D.object({message:D.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:D.object({message:D.string()})}}}}},Cd={method:"get",path:"/partner",tags:["Partners"],summary:"List all partners with pagination and filters",request:{query:La},responses:{200:{description:"List of partners retrieved successfully with pagination",summary:"Partners Retrieved",content:{"application/json":{schema:D.object({page:D.number(),totalPages:D.number(),offset:D.number(),limit:D.number(),partners:D.array(Rd)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:D.object({errors:D.record(D.string(),D.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:D.object({message:D.string()})}}}}},bd={method:"get",path:"/partner/{id}",tags:["Partners"],summary:"Find partner by ID",request:{params:ni},responses:{200:{description:"Partner details retrieved successfully",summary:"Partner Retrieved",content:{"application/json":{schema:Rd}}},400:{description:"Invalid partner ID format",summary:"Validation Error",content:{"application/json":{schema:D.object({errors:D.record(D.string(),D.string())})}}},404:{description:"Partner not found with the provided ID",summary:"Partner Not Found",content:{"application/json":{schema:D.object({message:D.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:D.object({message:D.string()})}}}}},wd={method:"put",path:"/partner/{id}",tags:["Partners"],summary:"Update partner with optional logo upload",security:[{bearerAuth:[]}],request:{params:ni,body:{content:{"multipart/form-data":{schema:_a.omit({id:!0})}}}},responses:{200:{description:"Partner updated successfully",summary:"Partner Updated"},400:{description:"Invalid input data, partner ID format, or invalid logo format/size",summary:"Validation Error",content:{"application/json":{schema:D.object({errors:D.record(D.string(),D.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:D.object({message:D.string()})}}},404:{description:"Partner not found with the provided ID",summary:"Partner Not Found",content:{"application/json":{schema:D.object({message:D.string()})}}},409:{description:"Partner with this name already exists",summary:"Conflict",content:{"application/json":{schema:D.object({message:D.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:D.object({message:D.string()})}}}}},Sd={method:"delete",path:"/partner/{id}",tags:["Partners"],summary:"Delete partner",security:[{bearerAuth:[]}],request:{params:ka},responses:{200:{description:"Partner deleted successfully",summary:"Partner Deleted"},400:{description:"Invalid partner ID format",summary:"Validation Error",content:{"application/json":{schema:D.object({errors:D.record(D.string(),D.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:D.object({message:D.string()})}}},404:{description:"Partner not found with the provided ID",summary:"Partner Not Found",content:{"application/json":{schema:D.object({message:D.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:D.object({message:D.string()})}}}}};import{$Enums as vd}from"@prisma/client";import U from"zod";import{extendZodWithOpenApi as _R}from"@asteasolutions/zod-to-openapi";import{PendencyStatus as WR}from"@prisma/client";import Qe from"zod";_R(Qe);var ci=Qe.object({userId:Qe.uuid(),title:Qe.string().min(1),description:Qe.string().optional(),status:Qe.enum(WR).default("PENDING"),dueDate:Qe.coerce.date().optional(),document:Qe.any().refine(o=>o&&typeof o=="object"&&o.size>0,"Arquivo do documento \xE9 obrigat\xF3rio")}),mi=class{constructor(e,r,t){this.userRepository=e;this.pendencyRepository=r;this.firebaseStorageService=t}async handle(e,r){try{let{userId:t,title:i,description:n,status:s,dueDate:a,document:c}=ci.parse({...e.body,userId:e.params.user_id,document:e.file});if(!await this.userRepository.findById(t))throw new ne("O usu\xE1rio n\xE3o existe.");let b=await this.firebaseStorageService.uploadFile({file:c,id:t,folder:M.PENDENCY});return await this.pendencyRepository.create({userId:t,title:i,description:n,status:s,dueDate:a,documentUrl:b}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as HR}from"@asteasolutions/zod-to-openapi";import Wa from"zod";HR(Wa);var Ha=Wa.object({id:Wa.uuid()}),pi=class{constructor(e,r){this.pendencyRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=Ha.parse({id:e.params.pendency_id}),i=await this.pendencyRepository.findById(t);if(!i)throw new p("A pend\xEAncia n\xE3o existe.");return await Promise.all([this.pendencyRepository.deleteById(i.id),this.firebaseStorageService.deleteFile({fileUrl:i.documentUrl})]),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as zR}from"@asteasolutions/zod-to-openapi";import{PendencyStatus as ZR}from"@prisma/client";import Ue from"zod";var VR=1,KR=6;zR(Ue);var za=Ue.object({page:Ue.coerce.number().min(1).default(VR),limit:Ue.coerce.number().min(1).default(KR),title:Ue.string().optional(),description:Ue.string().optional(),status:Ue.enum(ZR).default("PENDING"),userId:Ue.uuid().optional(),orderBy:Ue.enum(["asc","desc"]).default("desc")}),di=class{constructor(e){this.pendencyRepository=e}async handle(e,r){try{let{description:t,limit:i,orderBy:n,page:s,title:a,status:c,userId:u}=za.parse(e.query),b=s*i-i,[T,Z]=await Promise.all([this.pendencyRepository.find({pagination:{offset:b,limit:i},filter:{title:a,description:t,status:c,orderBy:n,userId:u}}),this.pendencyRepository.count({filter:{title:a,description:t,status:c,userId:u}})]),X=Math.max(Math.ceil(Z/i),1);return r.status(200).json({page:s,totalPages:X,offset:b,limit:i,pendencies:T})}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as JR}from"@asteasolutions/zod-to-openapi";import Za from"zod";JR(Za);var Va=Za.object({pendencyId:Za.uuid()}),li=class{constructor(e){this.pendencyRepository=e}async handle(e,r){try{let{pendencyId:t}=Va.parse({pendencyId:e.params.pendency_id}),i=await this.pendencyRepository.findById(t);if(!i)throw new p("Pend\xEAncia n\xE3o encontrada.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as YR}from"@asteasolutions/zod-to-openapi";import{PendencyStatus as XR}from"@prisma/client";import et from"zod";YR(et);var gi=et.object({id:et.uuid(),title:et.string().min(1),description:et.string().optional(),status:et.enum(XR),dueDate:et.coerce.date().optional(),document:et.any().refine(o=>o==null||typeof o=="object"&&typeof o.size=="number"&&(o.size===0||o.size>0),"Arquivo do documento \xE9 inv\xE1lido").optional()}),ui=class{constructor(e,r){this.pendencyRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{document:t,id:i,...n}=gi.parse({...e.body,id:e.params.pendency_id,document:e.file}),s=await this.pendencyRepository.findById(i);if(!s)throw new ne("A pend\xEAncia n\xE3o existe");let a=s.documentUrl;return t&&t.size>0&&(a=await this.firebaseStorageService.updateFile({file:t,id:s.userId,folder:M.PENDENCY,fileUrl:s.documentUrl})),await this.pendencyRepository.update({...n,id:i,documentUrl:a}),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var Ed={method:"post",path:"/pendency/{user_id}",tags:["Pendencies"],summary:"Create pendency for user",security:[{bearerAuth:[]}],request:{params:ci.pick({userId:!0}).transform(()=>({user_id:""})),body:{content:{"multipart/form-data":{schema:ci.omit({userId:!0})}}}},responses:{201:{description:"Pendency created successfully for the user",summary:"Pendency Created",content:{"application/json":{schema:U.object({})}}},400:{description:"Invalid input data or file format",summary:"Validation Error",content:{"application/json":{schema:U.object({errors:U.record(U.string(),U.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:U.object({message:U.string()})}}}}},jd={method:"get",path:"/pendency",tags:["Pendencies"],summary:"List pendencies",security:[{bearerAuth:[]}],request:{query:za},responses:{200:{description:"Paginated list of pendencies retrieved successfully",summary:"Pendencies Retrieved",content:{"application/json":{schema:U.object({page:U.number(),totalPages:U.number(),offset:U.number(),limit:U.number(),pendencies:U.array(U.object({id:U.string(),title:U.string(),description:U.string().nullable(),status:U.enum(vd.PendencyStatus),dueDate:U.date().nullable(),documentUrl:U.string(),userId:U.string(),createdAt:U.date(),updatedAt:U.date()}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:U.object({errors:U.record(U.string(),U.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:U.object({message:U.string()})}}}}},xd={method:"get",path:"/pendency/{pendency_id}",tags:["Pendencies"],summary:"Find pendency by ID",security:[{bearerAuth:[]}],request:{params:Va},responses:{200:{description:"Pendency details retrieved successfully",summary:"Pendency Retrieved",content:{"application/json":{schema:U.object({id:U.string(),title:U.string(),description:U.string().nullable(),status:U.enum(vd.PendencyStatus),dueDate:U.date().nullable(),documentUrl:U.string(),userId:U.string(),createdAt:U.date(),updatedAt:U.date()}).nullable()}}},400:{description:"Invalid pendency ID format",summary:"Validation Error",content:{"application/json":{schema:U.object({errors:U.record(U.string(),U.string())})}}},404:{description:"Pendency not found with the provided ID",summary:"Pendency Not Found",content:{"application/json":{schema:U.object({message:U.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:U.object({message:U.string()})}}}}},Pd={method:"put",path:"/pendency/{pendency_id}",tags:["Pendencies"],summary:"Update pendency",security:[{bearerAuth:[]}],request:{params:gi.pick({id:!0}).transform(()=>({pendency_id:""})),body:{content:{"multipart/form-data":{schema:gi.omit({id:!0})}}}},responses:{204:{description:"Pendency updated successfully",summary:"Pendency Updated"},400:{description:"Invalid input data or pendency does not exist",summary:"Validation Error",content:{"application/json":{schema:U.object({errors:U.record(U.string(),U.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:U.object({message:U.string()})}}}}},Md={method:"delete",path:"/pendency/{pendency_id}",tags:["Pendencies"],summary:"Delete pendency",security:[{bearerAuth:[]}],request:{params:Ha},responses:{204:{description:"Pendency deleted successfully",summary:"Pendency Deleted"},400:{description:"Invalid pendency ID format",summary:"Validation Error",content:{"application/json":{schema:U.object({errors:U.record(U.string(),U.string())})}}},404:{description:"Pendency not found with the provided ID",summary:"Pendency Not Found",content:{"application/json":{schema:U.object({message:U.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:U.object({message:U.string()})}}}}};import w from"zod";import{extendZodWithOpenApi as $R}from"@asteasolutions/zod-to-openapi";import Ka from"zod";$R(Ka);var Ja=Ka.object({id:Ka.uuid()}),fi=class{constructor(e,r){this.postGraduateProgramRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=Ja.parse({id:e.params.id}),i=await this.postGraduateProgramRepository.findById(t);if(!i)throw new p("O programa de p\xF3s-gradua\xE7\xE3o n\xE3o existe.");return i.imageUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.imageUrl}),await this.postGraduateProgramRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as QR}from"@asteasolutions/zod-to-openapi";import Ya from"zod";QR(Ya);var Xa=Ya.object({id:Ya.uuid()}),yi=class{constructor(e){this.postGraduateProgramRepository=e}async handle(e,r){try{let{id:t}=Xa.parse({id:e.params.id}),i=await this.postGraduateProgramRepository.findById(t);if(!i)throw new p("Programa de p\xF3s-gradua\xE7\xE3o n\xE3o encontrado.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as eI}from"@asteasolutions/zod-to-openapi";import tt from"zod";var tI=1,rI=6;eI(tt);var $a=tt.object({page:tt.coerce.number().min(1).default(tI),limit:tt.coerce.number().min(1).default(rI),title:tt.string().optional(),description:tt.string().optional(),contact:tt.string().optional(),orderBy:tt.enum(["asc","desc"]).default("desc")}),hi=class{constructor(e){this.postGraduateProgramRepository=e}async handle(e,r){try{let{limit:t,page:i,...n}=$a.parse(e.query),s=i*t-t,[a,c]=await Promise.all([this.postGraduateProgramRepository.find({pagination:{offset:s,limit:t},filter:n}),this.postGraduateProgramRepository.count({filter:n})]),u=Math.max(Math.ceil(c/t),1);return r.status(200).json({page:i,totalPages:u,offset:s,limit:t,postGraduatePrograms:a})}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as oI}from"@asteasolutions/zod-to-openapi";import xe from"zod";var Td=5,Ad=1024,iI=Ad*Ad,nI=Td*iI;oI(xe);var Qa=xe.object({id:xe.uuid(),title:xe.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio.").optional(),description:xe.string().optional(),startDate:xe.coerce.date().optional(),endDate:xe.coerce.date().optional(),contact:xe.string().min(1,"Contato \xE9 obrigat\xF3rio.").optional(),registrationLink:xe.url("URL de inscri\xE7\xE3o deve ser v\xE1lida").optional(),image:xe.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=nI,`A imagem deve ter no m\xE1ximo ${Td}MB.`).optional()}),Ri=class{constructor(e,r){this.postGraduateProgramRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,image:i,title:n,description:s,startDate:a,endDate:c,contact:u,registrationLink:b}=Qa.parse({id:e.params.id,...e.body,image:e.file}),T=await this.postGraduateProgramRepository.findById(t);if(!T)throw new p("O programa de p\xF3s-gradua\xE7\xE3o n\xE3o existe.");let Z=T.imageUrl;if(i&&(Z=await this.firebaseStorageService.uploadFile({file:i,id:t,folder:M.POST_GRADUATE_PROGRAM})),!Z)throw new m("URL da imagem \xE9 obrigat\xF3rio");return await this.postGraduateProgramRepository.update({id:t,title:n,description:s,startDate:a,endDate:c,contact:u,registrationLink:b,imageUrl:Z}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var Dd={method:"post",path:"/post-graduate-programs",tags:["Post Graduate Programs"],summary:"Create post-graduate program",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:w.object({title:w.string().min(1).openapi({description:"T\xEDtulo do programa"}),description:w.string().optional().openapi({description:"Descri\xE7\xE3o do programa"}),startDate:w.string().openapi({description:"Data de in\xEDcio (ISO 8601)",example:"2024-01-01T10:00:00Z"}),endDate:w.string().openapi({description:"Data de t\xE9rmino (ISO 8601)",example:"2024-12-31T10:00:00Z"}),contact:w.string().min(1).openapi({description:"Informa\xE7\xF5es de contato"}),registrationLink:w.string().url().optional().openapi({description:"Link de inscri\xE7\xE3o"}),image:w.string().optional().openapi({description:"Imagem do programa (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{201:{description:"Post-graduate program created successfully",summary:"Program Created"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:w.object({errors:w.record(w.string(),w.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:w.object({message:w.string()})}}}}},Fd={method:"get",path:"/post-graduate-programs",tags:["Post Graduate Programs"],summary:"List post-graduate programs",security:[{bearerAuth:[]}],request:{query:$a},responses:{200:{description:"Paginated list of post-graduate programs retrieved successfully",summary:"Programs Retrieved",content:{"application/json":{schema:w.object({page:w.number(),totalPages:w.number(),offset:w.number(),limit:w.number(),postGraduatePrograms:w.array(w.object({id:w.string(),title:w.string(),imageUrl:w.string().nullable(),description:w.string().nullable(),startDate:w.date(),endDate:w.date(),contact:w.string(),registrationLink:w.string().nullable(),createdAt:w.date(),updatedAt:w.date()}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:w.object({errors:w.record(w.string(),w.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:w.object({message:w.string()})}}}}},Ud={method:"get",path:"/post-graduate-programs/{id}",tags:["Post Graduate Programs"],summary:"Find post-graduate program by ID",security:[{bearerAuth:[]}],request:{params:Xa},responses:{200:{description:"Post-graduate program details retrieved successfully",summary:"Program Retrieved",content:{"application/json":{schema:w.object({id:w.string(),title:w.string(),imageUrl:w.string().nullable(),description:w.string().nullable(),startDate:w.date(),endDate:w.date(),contact:w.string(),registrationLink:w.string().nullable(),createdAt:w.date(),updatedAt:w.date()}).nullable()}}},400:{description:"Invalid program ID format",summary:"Validation Error",content:{"application/json":{schema:w.object({errors:w.record(w.string(),w.string())})}}},404:{description:"Post-graduate program not found with the provided ID",summary:"Program Not Found",content:{"application/json":{schema:w.object({message:w.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:w.object({message:w.string()})}}}}},qd={method:"put",path:"/post-graduate-programs/{id}",tags:["Post Graduate Programs"],summary:"Update post-graduate program",security:[{bearerAuth:[]}],request:{params:Qa.pick({id:!0}),body:{content:{"multipart/form-data":{schema:w.object({title:w.string().min(1).optional().openapi({description:"T\xEDtulo do programa"}),description:w.string().optional().openapi({description:"Descri\xE7\xE3o do programa"}),startDate:w.string().optional().openapi({description:"Data de in\xEDcio (ISO 8601)",example:"2024-01-01T10:00:00Z"}),endDate:w.string().optional().openapi({description:"Data de t\xE9rmino (ISO 8601)",example:"2024-12-31T10:00:00Z"}),contact:w.string().min(1).optional().openapi({description:"Informa\xE7\xF5es de contato"}),registrationLink:w.string().url().optional().openapi({description:"Link de inscri\xE7\xE3o"}),image:w.string().optional().openapi({description:"Imagem do programa (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{200:{description:"Post-graduate program updated successfully",summary:"Program Updated"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:w.object({errors:w.record(w.string(),w.string())})}}},404:{description:"Post-graduate program not found with the provided ID",summary:"Program Not Found",content:{"application/json":{schema:w.object({message:w.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:w.object({message:w.string()})}}}}},Bd={method:"delete",path:"/post-graduate-programs/{id}",tags:["Post Graduate Programs"],summary:"Delete post-graduate program",security:[{bearerAuth:[]}],request:{params:Ja},responses:{200:{description:"Post-graduate program deleted successfully",summary:"Program Deleted"},400:{description:"Invalid program ID format",summary:"Validation Error",content:{"application/json":{schema:w.object({errors:w.record(w.string(),w.string())})}}},404:{description:"Post-graduate program not found with the provided ID",summary:"Program Not Found",content:{"application/json":{schema:w.object({message:w.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:w.object({message:w.string()})}}}}};import{RegimentStatus as bI}from"@prisma/client";import A from"zod";import{extendZodWithOpenApi as sI}from"@asteasolutions/zod-to-openapi";import{RegimentStatus as Nd}from"@prisma/client";import ut from"zod";var kd=10,Od=1024,aI=Od*Od,mI=kd*aI;sI(ut);var em=ut.object({title:ut.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio"),version:ut.string().min(1,"Vers\xE3o \xE9 obrigat\xF3ria"),publishedAt:ut.coerce.date(),document:ut.any().refine(o=>o==null||typeof o!="object"||typeof o.size!="number"?!1:o.size<=mI,`O documento deve ter no m\xE1ximo ${kd}MB.`),status:ut.enum(Nd).optional()}),Ii=class{constructor(e,r){this.regimentRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{title:t,version:i,publishedAt:n,document:s,status:a}=em.parse({...e.body,document:e.file}),c=await this.regimentRepository.create({title:t,version:i,publishedAt:n,documentUrl:"",status:a??Nd.IN_FORCE}),u=await this.firebaseStorageService.uploadFile({file:s,id:c.id,folder:M.REGIMENT});return await this.regimentRepository.update({id:c.id,documentUrl:u}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as cI}from"@asteasolutions/zod-to-openapi";import tm from"zod";cI(tm);var rm=tm.object({id:tm.uuid()}),Ci=class{constructor(e,r){this.regimentRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=rm.parse({id:e.params.id}),i=await this.regimentRepository.findById(t);if(!i)throw new p("O regimento n\xE3o existe.");return i.documentUrl&&await this.firebaseStorageService.deleteFile({fileUrl:i.documentUrl}),await this.regimentRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as pI}from"@asteasolutions/zod-to-openapi";import om from"zod";pI(om);var wi=om.object({id:om.uuid()}),bi=class{constructor(e){this.regimentRepository=e}async handle(e,r){try{let{id:t}=wi.parse({id:e.params.id}),i=await this.regimentRepository.findById(t);if(!i)throw new p("O regimento n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as dI}from"@asteasolutions/zod-to-openapi";import{RegimentStatus as lI}from"@prisma/client";import im from"zod";dI(im);var nm=im.object({status:im.enum(lI)}),Si=class{constructor(e){this.regimentRepository=e}async handle(e,r){try{let{status:t}=nm.parse({status:e.params.status}),i=await this.regimentRepository.findByStatus(t);return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as uI}from"@asteasolutions/zod-to-openapi";import{RegimentStatus as gI}from"@prisma/client";import gt from"zod";var fI=1,yI=10;uI(gt);var sm=gt.object({page:gt.coerce.number().min(1).default(fI),limit:gt.coerce.number().min(1).default(yI),title:gt.string().optional(),status:gt.enum(gI).optional(),orderBy:gt.enum(["asc","desc"]).optional()}),vi=class{constructor(e){this.regimentRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=sm.parse(e.query),s=i*t-i,[a,c]=await Promise.all([this.regimentRepository.find({pagination:{offset:s,limit:i},filter:n}),this.regimentRepository.count({filter:n})]),u=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:u,offset:s,limit:i,regiments:a})}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as hI}from"@asteasolutions/zod-to-openapi";import{RegimentStatus as RI}from"@prisma/client";import rt from"zod";var Ld=10,Gd=1024,II=Gd*Gd,CI=Ld*II;hI(rt);var am=rt.object({id:rt.uuid(),title:rt.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio").optional(),version:rt.string().min(1,"Vers\xE3o \xE9 obrigat\xF3ria").optional(),publishedAt:rt.coerce.date().optional(),document:rt.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=CI,`O documento deve ter no m\xE1ximo ${Ld}MB.`).optional(),status:rt.enum(RI).optional()}),Ei=class{constructor(e,r){this.regimentRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,title:i,version:n,publishedAt:s,document:a,status:c}=am.parse({id:e.params.id,...e.body,document:e.file}),u=await this.regimentRepository.findById(t);if(!u)throw new p("O regimento n\xE3o existe.");let b=u.documentUrl;return a&&(u.documentUrl&&await this.firebaseStorageService.deleteFile({fileUrl:u.documentUrl}),b=await this.firebaseStorageService.uploadFile({file:a,id:t,folder:M.REGIMENT})),await this.regimentRepository.update({id:t,title:i,version:n,publishedAt:s,documentUrl:b??void 0,status:c}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var mm=A.object({id:A.uuid(),title:A.string(),version:A.string(),publishedAt:A.date(),documentUrl:A.string(),status:A.enum(bI),createdAt:A.date(),updatedAt:A.date()}),_d={method:"post",path:"/regiment",tags:["Regiments"],summary:"Create a new regiment with document upload",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:em}}}},responses:{201:{description:"Regiment created successfully",summary:"Regiment Created"},400:{description:"Invalid input data, missing required fields, or invalid document format/size",summary:"Validation Error",content:{"application/json":{schema:A.object({errors:A.record(A.string(),A.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:A.object({message:A.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:A.object({message:A.string()})}}}}},Wd={method:"get",path:"/regiment",tags:["Regiments"],summary:"List all regiments with pagination and filters",request:{query:sm},responses:{200:{description:"List of regiments retrieved successfully with pagination",summary:"Regiments Retrieved",content:{"application/json":{schema:A.object({page:A.number(),totalPages:A.number(),offset:A.number(),limit:A.number(),regiments:A.array(mm)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:A.object({errors:A.record(A.string(),A.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:A.object({message:A.string()})}}}}},Hd={method:"get",path:"/regiment/{id}",tags:["Regiments"],summary:"Find regiment by ID",request:{params:wi},responses:{200:{description:"Regiment details retrieved successfully",summary:"Regiment Retrieved",content:{"application/json":{schema:mm}}},400:{description:"Invalid regiment ID format",summary:"Validation Error",content:{"application/json":{schema:A.object({errors:A.record(A.string(),A.string())})}}},404:{description:"Regiment not found with the provided ID",summary:"Regiment Not Found",content:{"application/json":{schema:A.object({message:A.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:A.object({message:A.string()})}}}}},zd={method:"get",path:"/regiment/status/{status}",tags:["Regiments"],summary:"Find regiments by status",request:{params:nm},responses:{200:{description:"Regiments retrieved successfully by status",summary:"Regiments Retrieved by Status",content:{"application/json":{schema:A.array(mm)}}},400:{description:"Invalid status parameter provided",summary:"Validation Error",content:{"application/json":{schema:A.object({errors:A.record(A.string(),A.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:A.object({message:A.string()})}}}}},Zd={method:"put",path:"/regiment/{id}",tags:["Regiments"],summary:"Update regiment with optional document upload",security:[{bearerAuth:[]}],request:{params:wi,body:{content:{"multipart/form-data":{schema:am.omit({id:!0})}}}},responses:{200:{description:"Regiment updated successfully",summary:"Regiment Updated"},400:{description:"Invalid input data, regiment ID format, or invalid document format/size",summary:"Validation Error",content:{"application/json":{schema:A.object({errors:A.record(A.string(),A.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:A.object({message:A.string()})}}},404:{description:"Regiment not found with the provided ID",summary:"Regiment Not Found",content:{"application/json":{schema:A.object({message:A.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:A.object({message:A.string()})}}}}},Vd={method:"delete",path:"/regiment/{id}",tags:["Regiments"],summary:"Delete regiment",security:[{bearerAuth:[]}],request:{params:rm},responses:{200:{description:"Regiment deleted successfully",summary:"Regiment Deleted"},400:{description:"Invalid regiment ID format",summary:"Validation Error",content:{"application/json":{schema:A.object({errors:A.record(A.string(),A.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:A.object({message:A.string()})}}},404:{description:"Regiment not found with the provided ID",summary:"Regiment Not Found",content:{"application/json":{schema:A.object({message:A.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:A.object({message:A.string()})}}}}};import H from"zod";import{extendZodWithOpenApi as wI}from"@asteasolutions/zod-to-openapi";import ur from"zod";var Jd=5,Kd=1024,SI=Kd*Kd,vI=Jd*SI;wI(ur);var cm=ur.object({caption:ur.string().optional(),image:ur.any().refine(o=>o==null||typeof o!="object"||typeof o.size!="number"?!1:o.size<=vI,`A imagem deve ter no m\xE1ximo ${Jd}MB.`),congressId:ur.uuid()}),ji=class{constructor(e,r,t){this.regionalCongressGalleryRepository=e;this.regionalCongressRepository=r;this.firebaseStorageService=t}async handle(e,r){try{let{caption:t,image:i,congressId:n}=cm.parse({...e.body,...e.params,image:e.file});if(!await this.regionalCongressRepository.findById(n))throw new p("O congresso n\xE3o existe.");let a=await this.regionalCongressGalleryRepository.create({caption:t,congressId:n,imageUrl:""}),c=await this.firebaseStorageService.uploadFile({file:i,id:a.id,folder:M.GALLERY});return await this.regionalCongressGalleryRepository.update({id:a.id,imageUrl:c}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as EI}from"@asteasolutions/zod-to-openapi";import pm from"zod";EI(pm);var Pi=pm.object({id:pm.uuid("ID inv\xE1lido")}),xi=class{constructor(e){this.regionalCongressGalleryRepository=e}async handle(e,r){try{let{id:t}=Pi.parse(e.params);if(!await this.regionalCongressGalleryRepository.findById(t))throw new p("Item de galeria n\xE3o encontrado");return await this.regionalCongressGalleryRepository.deleteById(t),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as jI}from"@asteasolutions/zod-to-openapi";import Lt from"zod";jI(Lt);var dm=Lt.object({congressId:Lt.uuid("ID do congresso inv\xE1lido"),page:Lt.coerce.number().int().positive().default(1),limit:Lt.coerce.number().int().positive().default(10),caption:Lt.string().optional()}),Mi=class{constructor(e){this.regionalCongressGalleryRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=dm.parse({...e.params,...e.query}),s=(t-1)*i,a=await this.regionalCongressGalleryRepository.findByCongressId({pagination:{offset:s,limit:i},filter:n});if(!a)throw new p("Itens de galeria n\xE3o encontrados");let c=await this.regionalCongressGalleryRepository.count({filter:n});return r.status(200).json({data:a,pagination:{page:t,limit:i,total:c,totalPages:Math.ceil(c/i)}})}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as xI}from"@asteasolutions/zod-to-openapi";import gr from"zod";var Xd=5,Yd=1024,PI=Yd*Yd,MI=Xd*PI;xI(gr);var lm=gr.object({id:gr.string().uuid("ID inv\xE1lido"),caption:gr.string().optional(),image:gr.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=MI,`A imagem deve ter no m\xE1ximo ${Xd}MB.`).optional()}),Ai=class{constructor(e,r){this.regionalCongressGalleryRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,caption:i,image:n}=lm.parse({...e.params,...e.body,image:e.file});if(!await this.regionalCongressGalleryRepository.findById(t))throw new p("Item de galeria n\xE3o encontrado");let a;return n&&(a=await this.firebaseStorageService.uploadFile({file:n,id:t,folder:M.GALLERY})),await this.regionalCongressGalleryRepository.update({id:t,caption:i,...a&&{imageUrl:a}}),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var AI=H.object({id:H.uuid(),imageUrl:H.string(),caption:H.string().nullable(),congressId:H.uuid()}),$d={method:"post",path:"/regional-congress/{congressId}/gallery",tags:["Regional Congresses"],summary:"Create a new congress gallery image",security:[{bearerAuth:[]}],request:{params:H.object({congressId:H.uuid()}),body:{content:{"application/json":{schema:cm.omit({congressId:!0})}}}},responses:{201:{description:"Congress gallery image created successfully",summary:"Congress Gallery Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:H.object({errors:H.record(H.string(),H.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:H.object({message:H.string()})}}},404:{description:"Congress not found with the provided ID",summary:"Congress Not Found",content:{"application/json":{schema:H.object({message:H.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:H.object({message:H.string()})}}}}},Qd={method:"get",path:"/regional-congress/{congressId}/gallery",tags:["Regional Congresses"],summary:"Find congress gallery images by congress ID",request:{params:dm},responses:{200:{description:"Congress gallery images retrieved successfully by congress ID",summary:"Congress Galleries Retrieved",content:{"application/json":{schema:H.array(AI)}}},400:{description:"Invalid congress ID parameter provided",summary:"Validation Error",content:{"application/json":{schema:H.object({errors:H.record(H.string(),H.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:H.object({message:H.string()})}}}}},el={method:"put",path:"/regional-congress/gallery/{id}",tags:["Regional Congresses"],summary:"Update congress gallery image",security:[{bearerAuth:[]}],request:{params:Pi,body:{content:{"application/json":{schema:lm.omit({id:!0})}}}},responses:{200:{description:"Congress gallery image updated successfully",summary:"Congress Gallery Updated"},400:{description:"Invalid input data or gallery ID format",summary:"Validation Error",content:{"application/json":{schema:H.object({errors:H.record(H.string(),H.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:H.object({message:H.string()})}}},404:{description:"Congress gallery image not found with the provided ID",summary:"Congress Gallery Not Found",content:{"application/json":{schema:H.object({message:H.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:H.object({message:H.string()})}}}}},tl={method:"delete",path:"/regional-congress/gallery/{id}",tags:["Regional Congresses"],summary:"Delete congress gallery image",security:[{bearerAuth:[]}],request:{params:Pi},responses:{200:{description:"Congress gallery image deleted successfully",summary:"Congress Gallery Deleted"},400:{description:"Invalid gallery ID format",summary:"Validation Error",content:{"application/json":{schema:H.object({errors:H.record(H.string(),H.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:H.object({message:H.string()})}}},404:{description:"Congress gallery image not found with the provided ID",summary:"Congress Gallery Not Found",content:{"application/json":{schema:H.object({message:H.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:H.object({message:H.string()})}}}}};import z from"zod";import{extendZodWithOpenApi as TI}from"@asteasolutions/zod-to-openapi";import fr from"zod";var ol=2,rl=1024,DI=rl*rl,FI=ol*DI;TI(fr);var um=fr.object({name:fr.string().min(1,"Nome \xE9 obrigat\xF3rio"),logo:fr.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=FI,`A imagem deve ter no m\xE1ximo ${ol}MB.`).optional(),congressId:fr.uuid()}),Ti=class{constructor(e,r,t){this.regionalCongressPartnerRepository=e;this.regionalCongressRepository=r;this.firebaseStorageService=t}async handle(e,r){try{let{name:t,logo:i,congressId:n}=um.parse({...e.body,...e.params,logo:e.file});if(!await this.regionalCongressRepository.findById(n))throw new p("O congresso n\xE3o existe.");let a=await this.regionalCongressPartnerRepository.create({name:t,congressId:n}),c;return i&&(c=await this.firebaseStorageService.uploadFile({file:i,id:a.id,folder:M.PARTNER}),await this.regionalCongressPartnerRepository.update({id:a.id,logoUrl:c})),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as UI}from"@asteasolutions/zod-to-openapi";import gm from"zod";UI(gm);var Fi=gm.object({id:gm.string().uuid("ID inv\xE1lido")}),Di=class{constructor(e){this.regionalCongressPartnerRepository=e}async handle(e,r){try{let{id:t}=Fi.parse(e.params);if(!await this.regionalCongressPartnerRepository.findById(t))throw new p("Parceiro n\xE3o encontrado");return await this.regionalCongressPartnerRepository.deleteById(t),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as qI}from"@asteasolutions/zod-to-openapi";import _t from"zod";qI(_t);var fm=_t.object({congressId:_t.uuid("ID do congresso inv\xE1lido"),page:_t.coerce.number().int().positive().optional(),limit:_t.coerce.number().int().positive().optional(),name:_t.string().optional()}),Ui=class{constructor(e){this.regionalCongressPartnerRepository=e}async handle(e,r){try{let{congressId:t,page:i,limit:n,name:s}=fm.parse({...e.params,...e.query}),a=i!==void 0&&n!==void 0,c=a?{offset:(i-1)*n,limit:n}:void 0,u=await this.regionalCongressPartnerRepository.findByCongressId({pagination:c,filter:{congressId:t,name:s}});if(!u)throw new p("Parceiros n\xE3o encontrados");if(!a)return r.status(200).json(u);let b=await this.regionalCongressPartnerRepository.count({filter:{congressId:t,name:s}});return r.status(200).json({data:u,pagination:{page:i,limit:n,total:b,totalPages:Math.ceil(b/n)}})}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as BI}from"@asteasolutions/zod-to-openapi";import yr from"zod";var nl=2,il=1024,OI=il*il,NI=nl*OI;BI(yr);var ym=yr.object({id:yr.string().uuid("ID inv\xE1lido"),name:yr.string().min(1,"Nome \xE9 obrigat\xF3rio").optional(),logo:yr.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=NI,`A imagem deve ter no m\xE1ximo ${nl}MB.`).optional()}),qi=class{constructor(e,r){this.regionalCongressPartnerRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,name:i,logo:n}=ym.parse({...e.params,...e.body,logo:e.file});if(!await this.regionalCongressPartnerRepository.findById(t))throw new p("Parceiro n\xE3o encontrado");let a;return n&&(a=await this.firebaseStorageService.uploadFile({file:n,id:t,folder:M.PARTNER})),await this.regionalCongressPartnerRepository.update({id:t,name:i,...a&&{logoUrl:a}}),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var kI=z.object({id:z.uuid(),name:z.string(),logoUrl:z.string().nullable(),congressId:z.uuid()}),sl={method:"post",path:"/regional-congress/{congressId}/partner",tags:["Regional Congresses"],summary:"Create a new congress partner",security:[{bearerAuth:[]}],request:{params:z.object({congressId:z.uuid()}),body:{content:{"application/json":{schema:um.omit({congressId:!0})}}}},responses:{201:{description:"Congress partner created successfully",summary:"Congress Partner Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:z.object({errors:z.record(z.string(),z.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:z.object({message:z.string()})}}},404:{description:"Congress not found with the provided ID",summary:"Congress Not Found",content:{"application/json":{schema:z.object({message:z.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:z.object({message:z.string()})}}}}},al={method:"get",path:"/regional-congress/{congressId}/partner",tags:["Regional Congresses"],summary:"Find congress partners by congress ID",request:{params:fm},responses:{200:{description:"Congress partners retrieved successfully by congress ID",summary:"Congress Partners Retrieved",content:{"application/json":{schema:z.array(kI)}}},400:{description:"Invalid congress ID parameter provided",summary:"Validation Error",content:{"application/json":{schema:z.object({errors:z.record(z.string(),z.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:z.object({message:z.string()})}}}}},ml={method:"put",path:"/regional-congress/partner/{id}",tags:["Regional Congresses"],summary:"Update congress partner",security:[{bearerAuth:[]}],request:{params:Fi,body:{content:{"application/json":{schema:ym.omit({id:!0})}}}},responses:{200:{description:"Congress partner updated successfully",summary:"Congress Partner Updated"},400:{description:"Invalid input data or partner ID format",summary:"Validation Error",content:{"application/json":{schema:z.object({errors:z.record(z.string(),z.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:z.object({message:z.string()})}}},404:{description:"Congress partner not found with the provided ID",summary:"Congress Partner Not Found",content:{"application/json":{schema:z.object({message:z.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:z.object({message:z.string()})}}}}},cl={method:"delete",path:"/regional-congress/partner/{id}",tags:["Regional Congresses"],summary:"Delete congress partner",security:[{bearerAuth:[]}],request:{params:Fi},responses:{200:{description:"Congress partner deleted successfully",summary:"Congress Partner Deleted"},400:{description:"Invalid partner ID format",summary:"Validation Error",content:{"application/json":{schema:z.object({errors:z.record(z.string(),z.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:z.object({message:z.string()})}}},404:{description:"Congress partner not found with the provided ID",summary:"Congress Partner Not Found",content:{"application/json":{schema:z.object({message:z.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:z.object({message:z.string()})}}}}};import l from"zod";import{extendZodWithOpenApi as GI}from"@asteasolutions/zod-to-openapi";import Y from"zod";GI(Y);var hm=Y.object({title:Y.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio"),edition:Y.coerce.number().int().positive("Edi\xE7\xE3o deve ser um n\xFAmero positivo"),startDate:Y.coerce.date(),endDate:Y.coerce.date(),description:Y.string().optional(),location:Y.string().optional(),congressLink:Y.union([Y.url("Link do congresso deve ser uma URL v\xE1lida"),Y.literal("")]),noticeUrl:Y.union([Y.url("URL do edital deve ser uma URL v\xE1lida"),Y.literal("")]),scheduleUrl:Y.union([Y.url("URL do cronograma deve ser uma URL v\xE1lida"),Y.literal("")]),programUrl:Y.union([Y.url("URL da programa\xE7\xE3o deve ser uma URL v\xE1lida"),Y.literal("")]),adminReportUrl:Y.union([Y.url("URL do relat\xF3rio administrativo deve ser uma URL v\xE1lida"),Y.literal("")]),proceedingsUrl:Y.union([Y.url("URL dos anais deve ser uma URL v\xE1lida"),Y.literal("")])}).refine(o=>o.endDate>=o.startDate,{message:"Data de t\xE9rmino deve ser posterior ou igual \xE0 data de in\xEDcio",path:["endDate"]}),Bi=class{constructor(e){this.regionalCongressRepository=e}async handle(e,r){try{let t=hm.parse(e.body);return await this.regionalCongressRepository.create(t),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as LI}from"@asteasolutions/zod-to-openapi";import Rm from"zod";LI(Rm);var Im=Rm.object({id:Rm.string().uuid("ID inv\xE1lido")}),Oi=class{constructor(e){this.regionalCongressRepository=e}async handle(e,r){try{let{id:t}=Im.parse(e.params);if(!await this.regionalCongressRepository.findById(t))throw new p("Congresso regional n\xE3o encontrado");return await this.regionalCongressRepository.deleteById(t),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as _I}from"@asteasolutions/zod-to-openapi";import Cm from"zod";_I(Cm);var bm=Cm.object({edition:Cm.coerce.number().int().positive("Edi\xE7\xE3o deve ser um n\xFAmero positivo")}),Ni=class{constructor(e){this.regionalCongressRepository=e}async handle(e,r){try{let{edition:t}=bm.parse(e.params),i=await this.regionalCongressRepository.findByEdition(t);if(!i||i.length===0)throw new p("Congresso regional n\xE3o encontrado");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as WI}from"@asteasolutions/zod-to-openapi";import wm from"zod";WI(wm);var Gi=wm.object({id:wm.string().uuid("ID inv\xE1lido")}),ki=class{constructor(e){this.regionalCongressRepository=e}async handle(e,r){try{let{id:t}=Gi.parse(e.params),i=await this.regionalCongressRepository.findById(t);if(!i)throw new p("Congresso regional n\xE3o encontrado");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as HI}from"@asteasolutions/zod-to-openapi";import ot from"zod";HI(ot);var Sm=ot.object({page:ot.coerce.number().int().positive().default(1),limit:ot.coerce.number().int().positive().default(10),title:ot.string().optional(),edition:ot.coerce.number().int().positive().optional(),location:ot.string().optional(),orderBy:ot.enum(["asc","desc"]).optional().default("desc")}),Li=class{constructor(e){this.regionalCongressRepository=e}async handle(e,r){try{let{page:t,limit:i,orderBy:n,...s}=Sm.parse(e.query),a=(t-1)*i,c=await this.regionalCongressRepository.find({pagination:{offset:a,limit:i},filter:{...s,orderBy:n}});if(!c)throw new p("Congressos regionais n\xE3o encontrados");let u=await this.regionalCongressRepository.count({filter:s});return r.status(200).json({data:c,pagination:{page:t,limit:i,total:u,totalPages:Math.ceil(u/i)}})}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as zI}from"@asteasolutions/zod-to-openapi";import K from"zod";zI(K);var vm=K.object({id:K.string().uuid("ID inv\xE1lido"),title:K.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio").optional(),edition:K.coerce.number().int().positive("Edi\xE7\xE3o deve ser um n\xFAmero positivo").optional(),startDate:K.coerce.date().optional(),endDate:K.coerce.date().optional(),description:K.string().optional(),location:K.string().optional(),congressLink:K.union([K.url("Link do congresso deve ser uma URL v\xE1lida"),K.literal("")]),noticeUrl:K.union([K.url("URL do edital deve ser uma URL v\xE1lida"),K.literal("")]),scheduleUrl:K.union([K.url("URL do cronograma deve ser uma URL v\xE1lida"),K.literal("")]),programUrl:K.union([K.url("URL da programa\xE7\xE3o deve ser uma URL v\xE1lida"),K.literal("")]),adminReportUrl:K.union([K.url("URL do relat\xF3rio administrativo deve ser uma URL v\xE1lida"),K.literal("")]),proceedingsUrl:K.union([K.url("URL dos anais deve ser uma URL v\xE1lida"),K.literal("")])}).refine(o=>o.startDate&&o.endDate?o.endDate>=o.startDate:!0,{message:"Data de t\xE9rmino deve ser posterior ou igual \xE0 data de in\xEDcio",path:["endDate"]}),_i=class{constructor(e){this.regionalCongressRepository=e}async handle(e,r){try{let{id:t}=K.object({id:K.string().uuid()}).parse(e.params);if(!await this.regionalCongressRepository.findById(t))throw new p("Congresso regional n\xE3o encontrado");let n=vm.parse({id:t,...e.body});return await this.regionalCongressRepository.update(n),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var ZI=9,VI=l.object({image:l.any().openapi({type:"string",format:"binary"}),caption:l.string().optional()}),KI=l.object({image:l.any().openapi({type:"string",format:"binary"}).optional(),caption:l.string().optional()}),JI=l.object({id:l.uuid(),name:l.string(),logoUrl:l.string().nullable(),congressId:l.uuid()}),Em=l.object({id:l.uuid(),imageUrl:l.string(),caption:l.string().nullable(),congressId:l.uuid()}),jm=l.object({id:l.uuid(),title:l.string(),edition:l.number(),startDate:l.date(),endDate:l.date(),description:l.string().nullable(),location:l.string().nullable(),congressLink:l.string().nullable(),noticeUrl:l.string().nullable(),scheduleUrl:l.string().nullable(),programUrl:l.string().nullable(),adminReportUrl:l.string().nullable(),proceedingsUrl:l.string().nullable(),partners:l.array(JI),galleries:l.array(Em),createdAt:l.date(),updatedAt:l.date()}),pl={method:"post",path:"/regional-congress",tags:["Regional Congresses"],summary:"Create a new regional congress",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:hm}}}},responses:{201:{description:"Regional congress created successfully",summary:"Regional Congress Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:l.object({errors:l.record(l.string(),l.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:l.object({message:l.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:l.object({message:l.string()})}}}}},dl={method:"get",path:"/regional-congress",tags:["Regional Congresses"],summary:"List all regional congresses with pagination and filters",request:{query:Sm},responses:{200:{description:"List of regional congresses retrieved successfully with pagination",summary:"Regional Congresses Retrieved",content:{"application/json":{schema:l.object({page:l.number(),totalPages:l.number(),offset:l.number(),limit:l.number(),congresses:l.array(jm)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:l.object({errors:l.record(l.string(),l.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:l.object({message:l.string()})}}}}},ll={method:"get",path:"/regional-congress/{id}",tags:["Regional Congresses"],summary:"Find regional congress by ID",request:{params:Gi},responses:{200:{description:"Regional congress details retrieved successfully",summary:"Regional Congress Retrieved",content:{"application/json":{schema:jm}}},400:{description:"Invalid regional congress ID format",summary:"Validation Error",content:{"application/json":{schema:l.object({errors:l.record(l.string(),l.string())})}}},404:{description:"Regional congress not found with the provided ID",summary:"Regional Congress Not Found",content:{"application/json":{schema:l.object({message:l.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:l.object({message:l.string()})}}}}},ul={method:"get",path:"/regional-congress/edition/{edition}",tags:["Regional Congresses"],summary:"Find regional congresses by edition",request:{params:bm},responses:{200:{description:"Regional congresses retrieved successfully by edition",summary:"Regional Congresses Retrieved by Edition",content:{"application/json":{schema:l.array(jm)}}},400:{description:"Invalid edition parameter provided",summary:"Validation Error",content:{"application/json":{schema:l.object({errors:l.record(l.string(),l.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:l.object({message:l.string()})}}}}},gl={method:"put",path:"/regional-congress/{id}",tags:["Regional Congresses"],summary:"Update regional congress",security:[{bearerAuth:[]}],request:{params:Gi,body:{content:{"application/json":{schema:vm.omit({id:!0})}}}},responses:{200:{description:"Regional congress updated successfully",summary:"Regional Congress Updated"},400:{description:"Invalid input data or regional congress ID format",summary:"Validation Error",content:{"application/json":{schema:l.object({errors:l.record(l.string(),l.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:l.object({message:l.string()})}}},404:{description:"Regional congress not found with the provided ID",summary:"Regional Congress Not Found",content:{"application/json":{schema:l.object({message:l.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:l.object({message:l.string()})}}}}},fl={method:"delete",path:"/regional-congress/{id}",tags:["Regional Congresses"],summary:"Delete regional congress",security:[{bearerAuth:[]}],request:{params:Im},responses:{200:{description:"Regional congress deleted successfully",summary:"Regional Congress Deleted"},400:{description:"Invalid regional congress ID format",summary:"Validation Error",content:{"application/json":{schema:l.object({errors:l.record(l.string(),l.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:l.object({message:l.string()})}}},404:{description:"Regional congress not found with the provided ID",summary:"Regional Congress Not Found",content:{"application/json":{schema:l.object({message:l.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:l.object({message:l.string()})}}}}},_q={method:"post",path:"/regional-congress/{congressId}/gallery",tags:["Regional Congress Gallery"],summary:"Create a new gallery image for a congress",security:[{bearerAuth:[]}],request:{params:l.object({congressId:l.uuid()}),body:{content:{"multipart/form-data":{schema:VI}}}},responses:{201:{description:"Gallery image created successfully",summary:"Gallery Image Created"},400:{description:"Invalid input data, missing required fields, or invalid image format/size",summary:"Validation Error",content:{"application/json":{schema:l.object({errors:l.record(l.string(),l.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:l.object({message:l.string()})}}},404:{description:"Congress not found with the provided ID",summary:"Congress Not Found",content:{"application/json":{schema:l.object({message:l.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:l.object({message:l.string()})}}}}},Wq={method:"get",path:"/regional-congress/{congressId}/gallery",tags:["Regional Congress Gallery"],summary:"List all gallery images for a congress with pagination",request:{params:l.object({congressId:l.uuid()}),query:l.object({page:l.coerce.number().min(1).default(1),limit:l.coerce.number().min(1).default(ZI),caption:l.string().optional()})},responses:{200:{description:"Gallery images retrieved successfully with pagination",summary:"Gallery Images Retrieved",content:{"application/json":{schema:l.object({page:l.number(),totalPages:l.number(),offset:l.number(),limit:l.number(),galleries:l.array(Em)})}}},400:{description:"Invalid congress ID format or query parameters",summary:"Validation Error",content:{"application/json":{schema:l.object({errors:l.record(l.string(),l.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:l.object({message:l.string()})}}}}},Hq={method:"get",path:"/regional-congress/gallery/{id}",tags:["Regional Congress Gallery"],summary:"Find a gallery image by ID",request:{params:l.object({id:l.uuid()})},responses:{200:{description:"Gallery image retrieved successfully",summary:"Gallery Image Retrieved",content:{"application/json":{schema:Em}}},400:{description:"Invalid gallery image ID format",summary:"Validation Error",content:{"application/json":{schema:l.object({errors:l.record(l.string(),l.string())})}}},404:{description:"Gallery image not found with the provided ID",summary:"Gallery Image Not Found",content:{"application/json":{schema:l.object({message:l.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:l.object({message:l.string()})}}}}},zq={method:"put",path:"/regional-congress/gallery/{id}",tags:["Regional Congress Gallery"],summary:"Update a gallery image with optional image upload",security:[{bearerAuth:[]}],request:{params:l.object({id:l.uuid()}),body:{content:{"multipart/form-data":{schema:KI}}}},responses:{200:{description:"Gallery image updated successfully",summary:"Gallery Image Updated"},400:{description:"Invalid input data, gallery ID format, or invalid image format/size",summary:"Validation Error",content:{"application/json":{schema:l.object({errors:l.record(l.string(),l.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:l.object({message:l.string()})}}},404:{description:"Gallery image not found with the provided ID",summary:"Gallery Image Not Found",content:{"application/json":{schema:l.object({message:l.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:l.object({message:l.string()})}}}}},Zq={method:"delete",path:"/regional-congress/gallery/{id}",tags:["Regional Congress Gallery"],summary:"Delete a gallery image",security:[{bearerAuth:[]}],request:{params:l.object({id:l.uuid()})},responses:{200:{description:"Gallery image deleted successfully",summary:"Gallery Image Deleted"},400:{description:"Invalid gallery ID format",summary:"Validation Error",content:{"application/json":{schema:l.object({errors:l.record(l.string(),l.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:l.object({message:l.string()})}}},404:{description:"Gallery image not found with the provided ID",summary:"Gallery Image Not Found",content:{"application/json":{schema:l.object({message:l.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:l.object({message:l.string()})}}}}};import{$Enums as Um}from"@prisma/client";import R from"zod";import{extendZodWithOpenApi as YI}from"@asteasolutions/zod-to-openapi";import{Degree as XI,Seniority as $I}from"@prisma/client";import fe from"zod";YI(fe);var xm=fe.object({registrationNumber:fe.string(),mainEtps:fe.string().optional(),formations:fe.string().optional(),degrees:fe.array(fe.enum(XI)),occupations:fe.string(),seniority:fe.enum($I),institutions:fe.string(),biography:fe.string().optional(),userId:fe.string()}),Wi=class{constructor(e){this.researcherRepository=e}async handle(e,r){try{let{registrationNumber:t,mainEtps:i,formations:n,degrees:s,occupations:a,seniority:c,institutions:u,biography:b,userId:T}=xm.parse(e.body);if(await this.researcherRepository.findByRegistrationNumber(t))throw new ee("J\xE1 existe um pesquisador cadastrado com este n\xFAmero de registro.");if(await this.researcherRepository.findByUserId(T))throw new ee("Usu\xE1rio j\xE1 possui um perfil de pesquisador.");return await this.researcherRepository.create({registrationNumber:t,mainEtps:i,formations:n,degrees:s,occupations:a,seniority:c,institutions:u,biography:b,userId:T}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as QI}from"@asteasolutions/zod-to-openapi";import Pm from"zod";QI(Pm);var Mm=Pm.object({id:Pm.uuid()}),Hi=class{constructor(e){this.researcherRepository=e}async handle(e,r){try{let{id:t}=Mm.parse({id:e.params.id});if(!await this.researcherRepository.findById(t))throw new p("O pesquisador n\xE3o existe.");return await this.researcherRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as eC}from"@asteasolutions/zod-to-openapi";import Am from"zod";eC(Am);var Zi=Am.object({id:Am.uuid()}),zi=class{constructor(e){this.researcherRepository=e}async handle(e,r){try{let{id:t}=Zi.parse({id:e.params.id}),i=await this.researcherRepository.findById(t);if(!i)throw new p("O pesquisador n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as tC}from"@asteasolutions/zod-to-openapi";import Tm from"zod";tC(Tm);var Dm=Tm.object({userId:Tm.uuid()}),Vi=class{constructor(e){this.researcherRepository=e}async handle(e,r){try{let{userId:t}=Dm.parse({userId:e.params.userId}),i=await this.researcherRepository.findByUserId(t);if(!i)throw new p("O pesquisador n\xE3o existe para este usu\xE1rio.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as rC}from"@asteasolutions/zod-to-openapi";import{Degree as oC,Seniority as iC}from"@prisma/client";import ye from"zod";rC(ye);var Fm=ye.object({id:ye.uuid(),registrationNumber:ye.string().optional(),mainEtps:ye.string().optional(),formations:ye.string().optional(),degrees:ye.array(ye.enum(oC)).optional(),occupations:ye.string().optional(),seniority:ye.enum(iC).optional(),institutions:ye.string().optional(),biography:ye.string().optional()}),Ki=class{constructor(e){this.researcherRepository=e}async handle(e,r){try{let{id:t,registrationNumber:i,mainEtps:n,formations:s,degrees:a,occupations:c,seniority:u,institutions:b,biography:T}=Fm.parse({id:e.params.id,...e.body}),Z=await this.researcherRepository.findById(t);if(!Z)throw new p("O pesquisador n\xE3o existe.");if(i&&i!==Z.registrationNumber){let X=await this.researcherRepository.findByRegistrationNumber(i);if(X&&X.id!==t)throw new ee("J\xE1 existe um pesquisador com este n\xFAmero de registro.")}return await this.researcherRepository.update({id:t,registrationNumber:i,mainEtps:n,formations:s,degrees:a,occupations:c,seniority:u,institutions:b,biography:T}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var nC=1,sC=9,qm=R.object({id:R.uuid(),registrationNumber:R.string(),mainEtps:R.string().nullable(),formations:R.string().nullable(),degrees:R.array(R.enum(Um.Degree)),occupations:R.string(),seniority:R.enum(Um.Seniority),institutions:R.string(),biography:R.string().nullable(),createdAt:R.date(),updatedAt:R.date(),userId:R.uuid(),user:R.object({id:R.uuid(),name:R.string(),emailAddress:R.string(),avatarUrl:R.string().nullable(),orcid:R.string().nullable(),phone:R.string().nullable(),lattesUrl:R.string().nullable(),role:R.enum(Um.UserRole)})}),yl={method:"post",path:"/researcher",tags:["Researchers"],summary:"Create a new researcher profile",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:xm}}}},responses:{201:{description:"Researcher profile created successfully",summary:"Researcher Created",content:{"application/json":{schema:R.object({message:R.string()})}}},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:R.object({errors:R.record(R.string(),R.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:R.object({message:R.string()})}}},409:{description:"Researcher with this registration number already exists or user already has a researcher profile",summary:"Conflict",content:{"application/json":{schema:R.object({message:R.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:R.object({message:R.string()})}}}}},hl={method:"get",path:"/researcher",tags:["Researchers"],summary:"List all researchers with pagination and filters",request:{query:R.object({page:R.coerce.number().min(1).default(nC).optional(),limit:R.coerce.number().min(1).default(sC).optional(),userId:R.string().optional(),registrationNumber:R.string().optional(),name:R.string().optional(),emailAddress:R.string().optional(),mainEtps:R.string().optional(),formations:R.string().optional(),occupations:R.string().optional(),institutions:R.string().optional(),biography:R.string().optional(),orderBy:R.enum(["asc","desc"]).optional()})},responses:{200:{description:"List of researchers retrieved successfully with pagination",summary:"Researchers Retrieved",content:{"application/json":{schema:R.object({page:R.number(),totalPages:R.number(),offset:R.number(),limit:R.number(),researchers:R.array(qm)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:R.object({message:R.string()})}}}}},Rl={method:"get",path:"/researcher/{id}",tags:["Researchers"],summary:"Find researcher by ID",request:{params:Zi},responses:{200:{description:"Researcher details retrieved successfully",summary:"Researcher Retrieved",content:{"application/json":{schema:qm}}},400:{description:"Invalid researcher ID format",summary:"Validation Error",content:{"application/json":{schema:R.object({errors:R.record(R.string(),R.string())})}}},404:{description:"Researcher not found with the provided ID",summary:"Researcher Not Found",content:{"application/json":{schema:R.object({message:R.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:R.object({message:R.string()})}}}}},Il={method:"get",path:"/researcher/user/{userId}",tags:["Researchers"],summary:"Find researcher by user ID",request:{params:Dm},responses:{200:{description:"Researcher details retrieved successfully",summary:"Researcher Retrieved",content:{"application/json":{schema:qm}}},400:{description:"Invalid user ID format",summary:"Validation Error",content:{"application/json":{schema:R.object({errors:R.record(R.string(),R.string())})}}},404:{description:"Researcher not found for this user",summary:"Researcher Not Found",content:{"application/json":{schema:R.object({message:R.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:R.object({message:R.string()})}}}}},Cl={method:"put",path:"/researcher/{id}",tags:["Researchers"],summary:"Update researcher profile",security:[{bearerAuth:[]}],request:{params:Zi,body:{content:{"application/json":{schema:Fm.omit({id:!0})}}}},responses:{200:{description:"Researcher profile updated successfully",summary:"Researcher Updated",content:{"application/json":{schema:R.object({message:R.string()})}}},400:{description:"Invalid input data or researcher ID format",summary:"Validation Error",content:{"application/json":{schema:R.object({errors:R.record(R.string(),R.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:R.object({message:R.string()})}}},404:{description:"Researcher not found with the provided ID",summary:"Researcher Not Found",content:{"application/json":{schema:R.object({message:R.string()})}}},409:{description:"Researcher with this registration number already exists",summary:"Conflict",content:{"application/json":{schema:R.object({message:R.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:R.object({message:R.string()})}}}}},bl={method:"delete",path:"/researcher/{id}",tags:["Researchers"],summary:"Delete researcher profile",security:[{bearerAuth:[]}],request:{params:Mm},responses:{200:{description:"Researcher profile deleted successfully",summary:"Researcher Deleted"},400:{description:"Invalid researcher ID format",summary:"Validation Error",content:{"application/json":{schema:R.object({errors:R.record(R.string(),R.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:R.object({message:R.string()})}}},404:{description:"Researcher not found with the provided ID",summary:"Researcher Not Found",content:{"application/json":{schema:R.object({message:R.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:R.object({message:R.string()})}}}}};import S from"zod";import{extendZodWithOpenApi as aC}from"@asteasolutions/zod-to-openapi";import Bm from"zod";aC(Bm);var Om=Bm.object({id:Bm.uuid()}),Ji=class{constructor(e,r){this.scientificJournalRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=Om.parse({id:e.params.id}),i=await this.scientificJournalRepository.findById(t);if(!i)throw new p("A revista cient\xEDfica n\xE3o existe.");return i.logoUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.logoUrl}),await this.scientificJournalRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as mC}from"@asteasolutions/zod-to-openapi";import Nm from"zod";mC(Nm);var km=Nm.object({id:Nm.uuid()}),Yi=class{constructor(e){this.scientificJournalRepository=e}async handle(e,r){try{let{id:t}=km.parse({id:e.params.id}),i=await this.scientificJournalRepository.findById(t);if(!i)throw new p("Revista cient\xEDfica n\xE3o encontrada.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as cC}from"@asteasolutions/zod-to-openapi";import Pe from"zod";var pC=1,dC=6;cC(Pe);var Gm=Pe.object({page:Pe.coerce.number().min(1).default(pC),limit:Pe.coerce.number().min(1).default(dC),name:Pe.string().optional(),description:Pe.string().optional(),issn:Pe.string().optional(),directors:Pe.string().optional(),editorialBoard:Pe.string().optional(),orderBy:Pe.enum(["asc","desc"]).default("desc")}),Xi=class{constructor(e){this.scientificJournalRepository=e}async handle(e,r){try{let{limit:t,page:i,...n}=Gm.parse(e.query),s=i*t-t,[a,c]=await Promise.all([this.scientificJournalRepository.find({pagination:{offset:s,limit:t},filter:n}),this.scientificJournalRepository.count({filter:n})]),u=Math.max(Math.ceil(c/t),1);return r.status(200).json({page:i,totalPages:u,offset:s,limit:t,scientificJournals:a})}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as lC}from"@asteasolutions/zod-to-openapi";import Me from"zod";var Sl=5,wl=1024,uC=wl*wl,gC=Sl*uC;lC(Me);var Lm=Me.object({id:Me.uuid(),name:Me.string().min(1,"Nome \xE9 obrigat\xF3rio.").optional(),issn:Me.string().min(1,"ISSN \xE9 obrigat\xF3rio.").optional(),description:Me.string().min(1,"Descri\xE7\xE3o \xE9 obrigat\xF3ria.").optional(),journalUrl:Me.url("URL da revista deve ser v\xE1lida.").optional(),directors:Me.string().optional(),editorialBoard:Me.string().optional(),logo:Me.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=gC,`O logo deve ter no m\xE1ximo ${Sl}MB.`).optional()}),$i=class{constructor(e,r){this.scientificJournalRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,logo:i,name:n,issn:s,description:a,journalUrl:c,directors:u,editorialBoard:b}=Lm.parse({id:e.params.id,...e.body,logo:e.file}),T=await this.scientificJournalRepository.findById(t);if(!T)throw new p("A revista cient\xEDfica n\xE3o existe.");let Z=T.logoUrl;return i&&(Z=await this.firebaseStorageService.uploadFile({file:i,id:t,folder:M.SCIENTIFIC_JOURNAL})),await this.scientificJournalRepository.update({id:t,name:n,issn:s,description:a,journalUrl:c,directors:u,editorialBoard:b,logoUrl:Z}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var vl={method:"post",path:"/scientific-journals",tags:["Scientific Journals"],summary:"Create scientific journal",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:S.object({name:S.string().min(1).openapi({description:"Nome da revista cient\xEDfica"}),issn:S.string().min(1).openapi({description:"ISSN da revista"}),description:S.string().min(1).openapi({description:"Descri\xE7\xE3o da revista"}),journalUrl:S.string().url().openapi({description:"URL da revista"}),directors:S.string().optional().openapi({description:"Diretores da revista"}),editorialBoard:S.string().optional().openapi({description:"Conselho editorial"}),logo:S.string().optional().openapi({description:"Logo da revista (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{201:{description:"Scientific journal created successfully",summary:"Journal Created"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:S.object({errors:S.record(S.string(),S.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:S.object({message:S.string()})}}}}},El={method:"get",path:"/scientific-journals",tags:["Scientific Journals"],summary:"List scientific journals",security:[{bearerAuth:[]}],request:{query:Gm},responses:{200:{description:"Paginated list of scientific journals retrieved successfully",summary:"Journals Retrieved",content:{"application/json":{schema:S.object({page:S.number(),totalPages:S.number(),offset:S.number(),limit:S.number(),scientificJournals:S.array(S.object({id:S.string(),name:S.string(),issn:S.string(),description:S.string(),logoUrl:S.string().nullable(),journalUrl:S.string(),directors:S.string().nullable(),editorialBoard:S.string().nullable(),createdAt:S.date(),updatedAt:S.date()}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:S.object({errors:S.record(S.string(),S.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:S.object({message:S.string()})}}}}},jl={method:"get",path:"/scientific-journals/{id}",tags:["Scientific Journals"],summary:"Find scientific journal by ID",security:[{bearerAuth:[]}],request:{params:km},responses:{200:{description:"Scientific journal details retrieved successfully",summary:"Journal Retrieved",content:{"application/json":{schema:S.object({id:S.string(),name:S.string(),issn:S.string(),description:S.string(),logoUrl:S.string().nullable(),journalUrl:S.string(),directors:S.string().nullable(),editorialBoard:S.string().nullable(),createdAt:S.date(),updatedAt:S.date()}).nullable()}}},400:{description:"Invalid journal ID format",summary:"Validation Error",content:{"application/json":{schema:S.object({errors:S.record(S.string(),S.string())})}}},404:{description:"Scientific journal not found with the provided ID",summary:"Journal Not Found",content:{"application/json":{schema:S.object({message:S.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:S.object({message:S.string()})}}}}},xl={method:"put",path:"/scientific-journals/{id}",tags:["Scientific Journals"],summary:"Update scientific journal",security:[{bearerAuth:[]}],request:{params:Lm.pick({id:!0}),body:{content:{"multipart/form-data":{schema:S.object({name:S.string().min(1).optional().openapi({description:"Nome da revista cient\xEDfica"}),issn:S.string().min(1).optional().openapi({description:"ISSN da revista"}),description:S.string().min(1).optional().openapi({description:"Descri\xE7\xE3o da revista"}),journalUrl:S.string().url().optional().openapi({description:"URL da revista"}),directors:S.string().optional().openapi({description:"Diretores da revista"}),editorialBoard:S.string().optional().openapi({description:"Conselho editorial"}),logo:S.string().optional().openapi({description:"Logo da revista (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{200:{description:"Scientific journal updated successfully",summary:"Journal Updated"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:S.object({errors:S.record(S.string(),S.string())})}}},404:{description:"Scientific journal not found with the provided ID",summary:"Journal Not Found",content:{"application/json":{schema:S.object({message:S.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:S.object({message:S.string()})}}}}},Pl={method:"delete",path:"/scientific-journals/{id}",tags:["Scientific Journals"],summary:"Delete scientific journal",security:[{bearerAuth:[]}],request:{params:Om},responses:{200:{description:"Scientific journal deleted successfully",summary:"Journal Deleted"},400:{description:"Invalid journal ID format",summary:"Validation Error",content:{"application/json":{schema:S.object({errors:S.record(S.string(),S.string())})}}},404:{description:"Scientific journal not found with the provided ID",summary:"Journal Not Found",content:{"application/json":{schema:S.object({message:S.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:S.object({message:S.string()})}}}}};import{$Enums as IC}from"@prisma/client";import O from"zod";import{extendZodWithOpenApi as fC}from"@asteasolutions/zod-to-openapi";import Wt from"zod";fC(Wt);var _m=Wt.object({role:Wt.string().min(1),description:Wt.string().optional(),userId:Wt.uuid(),order:Wt.number().optional()}),Qi=class{constructor(e){this.sdhcTeamMemberRepository=e}async handle(e,r){try{let{role:t,description:i,userId:n,order:s}=_m.parse(e.body);return await this.sdhcTeamMemberRepository.create({role:t,description:i,userId:n,order:s??0}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as yC}from"@asteasolutions/zod-to-openapi";import Wm from"zod";yC(Wm);var Hm=Wm.object({id:Wm.uuid()}),en=class{constructor(e){this.sdhcTeamMemberRepository=e}async handle(e,r){try{let{id:t}=Hm.parse({id:e.params.id});if(!await this.sdhcTeamMemberRepository.findById(t))throw new p("O membro da equipe SDHC n\xE3o existe.");return await this.sdhcTeamMemberRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as hC}from"@asteasolutions/zod-to-openapi";import zm from"zod";hC(zm);var rn=zm.object({id:zm.uuid()}),tn=class{constructor(e){this.sdhcTeamMemberRepository=e}async handle(e,r){try{let{id:t}=rn.parse({id:e.params.id}),i=await this.sdhcTeamMemberRepository.findById(t);if(!i)throw new p("O membro da equipe SDHC n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as RC}from"@asteasolutions/zod-to-openapi";import ft from"zod";RC(ft);var Zm=ft.object({id:ft.uuid(),role:ft.string().min(1).optional(),description:ft.string().optional(),userId:ft.uuid().optional(),order:ft.number().optional()}),on=class{constructor(e){this.sdhcTeamMemberRepository=e}async handle(e,r){try{let{id:t,role:i,description:n,userId:s,order:a}=Zm.parse({id:e.params.id,...e.body});if(!await this.sdhcTeamMemberRepository.findById(t))throw new p("O membro da equipe SDHC n\xE3o existe.");return await this.sdhcTeamMemberRepository.update({id:t,role:i,description:n,userId:s,order:a}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var CC=O.object({id:O.uuid(),name:O.string(),emailAddress:O.string(),avatarUrl:O.string().nullable(),orcid:O.string().nullable(),phone:O.string().nullable(),lattesUrl:O.string().nullable(),role:O.enum(IC.UserRole)}),Ml=O.object({id:O.uuid(),role:O.string(),description:O.string().nullable(),order:O.number(),createdAt:O.date(),updatedAt:O.date(),userId:O.uuid(),user:CC}),Al={method:"post",path:"/sdhc-team-member",tags:["SDHC Team Members"],summary:"Create a new SDHC Team Member",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:_m}}}},responses:{201:{description:"SDHC Team Member created successfully",summary:"SDHC Team Member Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:O.object({errors:O.record(O.string(),O.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:O.object({message:O.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:O.object({message:O.string()})}}}}},Tl={method:"get",path:"/sdhc-team-member",tags:["SDHC Team Members"],summary:"List all SDHC Team Members with filters",request:{query:O.object({role:O.string().optional(),orderBy:O.enum(["asc","desc"]).optional()})},responses:{200:{description:"List of SDHC Team Members retrieved successfully",summary:"SDHC Team Members Retrieved",content:{"application/json":{schema:O.object({members:O.array(Ml)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:O.object({message:O.string()})}}}}},Dl={method:"get",path:"/sdhc-team-member/{id}",tags:["SDHC Team Members"],summary:"Find SDHC Team Member by ID",request:{params:rn},responses:{200:{description:"SDHC Team Member details retrieved successfully",summary:"SDHC Team Member Retrieved",content:{"application/json":{schema:Ml}}},400:{description:"Invalid SDHC Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:O.object({errors:O.record(O.string(),O.string())})}}},404:{description:"SDHC Team Member not found with the provided ID",summary:"SDHC Team Member Not Found",content:{"application/json":{schema:O.object({message:O.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:O.object({message:O.string()})}}}}},Fl={method:"put",path:"/sdhc-team-member/{id}",tags:["SDHC Team Members"],summary:"Update SDHC Team Member",security:[{bearerAuth:[]}],request:{params:rn,body:{content:{"application/json":{schema:Zm.omit({id:!0})}}}},responses:{200:{description:"SDHC Team Member updated successfully",summary:"SDHC Team Member Updated"},400:{description:"Invalid input data or SDHC Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:O.object({errors:O.record(O.string(),O.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:O.object({message:O.string()})}}},404:{description:"SDHC Team Member not found with the provided ID",summary:"SDHC Team Member Not Found",content:{"application/json":{schema:O.object({message:O.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:O.object({message:O.string()})}}}}},Ul={method:"delete",path:"/sdhc-team-member/{id}",tags:["SDHC Team Members"],summary:"Delete SDHC Team Member",security:[{bearerAuth:[]}],request:{params:Hm},responses:{200:{description:"SDHC Team Member deleted successfully",summary:"SDHC Team Member Deleted"},400:{description:"Invalid SDHC Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:O.object({errors:O.record(O.string(),O.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:O.object({message:O.string()})}}},404:{description:"SDHC Team Member not found with the provided ID",summary:"SDHC Team Member Not Found",content:{"application/json":{schema:O.object({message:O.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:O.object({message:O.string()})}}}}};import{$Enums as Ol}from"@prisma/client";import k from"zod";import{extendZodWithOpenApi as bC}from"@asteasolutions/zod-to-openapi";import Vm from"zod";bC(Vm);var Km=Vm.object({id:Vm.string()}),nn=class{constructor(e){this.userRepository=e}async handle(e,r){try{let{id:t}=Km.parse({id:e.params.id}),i=await this.userRepository.findById(t);if(!i)throw new p("O usu\xE1rio n\xE3o existe.");let n=e.user.id;if(i.id!==n)throw new le("Voc\xEA n\xE3o tem permiss\xE3o para deletar o usu\xE1rio");return await this.userRepository.deleteById(i.id),r.sendStatus(204)}catch(t){if(console.log(t),t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as wC}from"@asteasolutions/zod-to-openapi";import{z as Jm}from"zod";wC(Jm);var Ym=Jm.object({id:Jm.string().min(1,"id do usu\xE1rio n\xE3o fornecido.")}),sn=class{constructor(e){this.userRepository=e}async handle(e,r){try{let{id:t}=Ym.parse(e.params),i=await this.userRepository.findById(t);if(!i)throw new p("Usu\xE1rio n\xE3o encontrado");r.status(200).json(i)}catch(t){if(console.log(t),t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as SC}from"@asteasolutions/zod-to-openapi";import yt from"zod";var Bl=2,ql=1024,vC=ql*ql,EC=Bl*vC,jC=/^\d{4}-\d{4}-\d{4}-\d{4}$/,xC=/^\(?\d{2}\)?[\s-]?\d{4,5}-?\d{4}$/;SC(yt);var Xm=yt.object({name:yt.string().optional(),lattesUrl:yt.string().optional(),orcid:yt.string().optional().transform(o=>o===void 0?void 0:o.trim()).refine(o=>o===void 0||o===""||jC.test(o),{message:"ORCID inv\xE1lido. Deve estar no formato 0000-0000-0000-0000"}),phone:yt.string().optional().refine(o=>o===void 0||o===""||xC.test(o),{message:"Telefone inv\xE1lido. Deve estar no formato (99) 99999-9999"}),avatarImage:yt.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=EC,`A imagem deve ter no m\xE1ximo ${Bl}MB.`).optional()}),an=class{constructor(e,r){this.userRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{avatarImage:t,...i}=Xm.parse({...e.body,avatarImage:e.file}),n=e.user.id,s=await this.userRepository.findById(n);if(!s)throw new ne("O usu\xE1rio n\xE3o existe");let a=s.avatarUrl;return t&&(s.avatarUrl?a=await this.firebaseStorageService.updateFile({file:t,id:n,folder:M.USER,fileUrl:s.avatarUrl}):a=await this.firebaseStorageService.uploadFile({file:t,id:n,folder:M.USER})),await this.userRepository.update({...i,id:n,avatarUrl:a||void 0}),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var Nl={method:"get",path:"/users/{id}",tags:["Users"],summary:"Find user by ID",request:{params:Ym},responses:{200:{description:"User details retrieved successfully",summary:"User Retrieved",content:{"application/json":{schema:k.object({id:k.string(),name:k.string(),createdAt:k.date(),updatedAt:k.date(),role:k.enum(Ol.UserRole),lattesUrl:k.string().nullable(),orcid:k.string().nullable(),phone:k.string().nullable(),avatarUrl:k.url().nullable(),emailAddress:k.email()})}}},400:{description:"Invalid user ID format",summary:"Validation Error",content:{"application/json":{schema:k.object({errors:k.record(k.string(),k.string())})}}},404:{description:"User not found with the provided ID",summary:"User Not Found",content:{"application/json":{schema:k.object({message:k.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:k.object({message:k.string()})}}}}},kl={method:"put",path:"/users",tags:["Users"],summary:"Update authenticated user",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:Xm}}}},responses:{200:{description:"User profile updated successfully",summary:"User Updated",content:{"application/json":{schema:k.object({message:k.string()})}}},400:{description:"Invalid input data or file format",summary:"Validation Error",content:{"application/json":{schema:k.object({errors:k.record(k.string(),k.string())})}}},401:{description:"User not authenticated or unauthorized",summary:"Authentication Required",content:{"application/json":{schema:k.object({message:k.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:k.object({message:k.string()})}}}}},Gl={method:"delete",path:"/users",tags:["Users"],summary:"Delete authenticated user",security:[{bearerAuth:[]}],request:{params:Km},responses:{200:{description:"User account deleted successfully",summary:"User Deleted",content:{"application/json":{schema:k.object({message:k.string()})}}},400:{description:"Invalid request parameters",summary:"Validation Error",content:{"application/json":{schema:k.object({errors:k.record(k.string(),k.string())})}}},401:{description:"User not authenticated or unauthorized",summary:"Authentication Required",content:{"application/json":{schema:k.object({message:k.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:k.object({message:k.string()})}}}}},Ll={method:"get",path:"/users",tags:["Users"],summary:"List users",responses:{200:{description:"Complete list of users retrieved successfully",summary:"Users Retrieved",content:{"application/json":{schema:k.array(k.object({id:k.string(),name:k.string(),createdAt:k.date(),updatedAt:k.date(),role:k.enum(Ol.UserRole),lattesUrl:k.url().nullable(),orcid:k.string().nullable(),phone:k.string().nullable(),avatarUrl:k.string().nullable(),emailAddress:k.email()}))}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:k.object({message:k.string()})}}}}};import C from"zod";import{extendZodWithOpenApi as PC}from"@asteasolutions/zod-to-openapi";import $m from"zod";PC($m);var Qm=$m.object({id:$m.uuid()}),mn=class{constructor(e,r){this.webinarRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=Qm.parse({id:e.params.id}),i=await this.webinarRepository.findById(t);if(!i)throw new p("O webinar n\xE3o existe.");return i.thumbnailUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.thumbnailUrl}),await this.webinarRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as MC}from"@asteasolutions/zod-to-openapi";import ec from"zod";MC(ec);var tc=ec.object({id:ec.uuid()}),cn=class{constructor(e){this.webinarRepository=e}async handle(e,r){try{let{id:t}=tc.parse({id:e.params.id}),i=await this.webinarRepository.findById(t);if(!i)throw new p("Webinar n\xE3o encontrado.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as AC}from"@asteasolutions/zod-to-openapi";import ht from"zod";var TC=1,DC=6;AC(ht);var rc=ht.object({page:ht.coerce.number().min(1).default(TC),limit:ht.coerce.number().min(1).default(DC),title:ht.string().optional(),description:ht.string().optional(),orderBy:ht.enum(["asc","desc"]).default("desc")}),pn=class{constructor(e){this.webinarRepository=e}async handle(e,r){try{let{limit:t,page:i,...n}=rc.parse(e.query),s=i*t-t,[a,c]=await Promise.all([this.webinarRepository.find({pagination:{offset:s,limit:t},filter:n}),this.webinarRepository.count({filter:n})]),u=Math.max(Math.ceil(c/t),1);return r.status(200).json({page:i,totalPages:u,offset:s,limit:t,webinars:a})}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as FC}from"@asteasolutions/zod-to-openapi";import be from"zod";var Wl=5,_l=1024,UC=_l*_l,qC=Wl*UC;FC(be);var oc=be.object({id:be.uuid(),title:be.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio.").optional(),description:be.string().optional(),scheduledAt:be.coerce.date().optional(),webinarLink:be.url("URL do webinar deve ser v\xE1lida").optional(),guestIds:be.transform(o=>typeof o=="string"?o.split(","):o).pipe(be.array(be.uuid())).optional(),thumbnail:be.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=qC,`A thumbnail deve ter no m\xE1ximo ${Wl}MB.`).optional()}),dn=class{constructor(e,r){this.webinarRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,thumbnail:i,title:n,description:s,scheduledAt:a,webinarLink:c,guestIds:u}=oc.parse({id:e.params.id,...e.body,thumbnail:e.file}),b=await this.webinarRepository.findById(t);if(!b)throw new p("O webinar n\xE3o existe.");let T=b.thumbnailUrl;if(i&&(T=await this.firebaseStorageService.uploadFile({file:i,id:t,folder:M.WEBINAR})),!T)throw new m("Thumbnail URL \xE9 obrigat\xF3rio");return await this.webinarRepository.update({id:t,title:n,description:s,scheduledAt:a,webinarLink:c,thumbnailUrl:T,guestIds:u}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var Hl={method:"post",path:"/webinars",tags:["Webinars"],summary:"Create webinar",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:C.object({title:C.string().min(1).openapi({description:"T\xEDtulo do webinar"}),description:C.string().optional().openapi({description:"Descri\xE7\xE3o do webinar"}),scheduledAt:C.string().openapi({description:"Data e hora agendada (ISO 8601)",example:"2024-01-01T10:00:00Z"}),webinarLink:C.string().url().optional().openapi({description:"Link do webinar"}),guestIds:C.string().openapi({description:"IDs dos convidados separados por v\xEDrgula",example:"uuid1,uuid2,uuid3"}),thumbnail:C.string().optional().openapi({description:"Imagem de thumbnail (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{201:{description:"Webinar created successfully",summary:"Webinar Created"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:C.object({errors:C.record(C.string(),C.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:C.object({message:C.string()})}}}}},zl={method:"get",path:"/webinars",tags:["Webinars"],summary:"List webinars",security:[{bearerAuth:[]}],request:{query:rc},responses:{200:{description:"Paginated list of webinars with guest information retrieved successfully",summary:"Webinars Retrieved",content:{"application/json":{schema:C.object({page:C.number(),totalPages:C.number(),offset:C.number(),limit:C.number(),webinars:C.array(C.object({id:C.string(),title:C.string(),description:C.string().nullable(),scheduledAt:C.date(),webinarLink:C.string().nullable(),thumbnailUrl:C.string().nullable(),createdAt:C.date(),updatedAt:C.date(),guests:C.array(C.object({id:C.uuid(),name:C.string(),emailAddress:C.email(),avatarUrl:C.string().nullable(),createdAt:C.date(),updatedAt:C.date()}))}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:C.object({errors:C.record(C.string(),C.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:C.object({message:C.string()})}}}}},Zl={method:"get",path:"/webinars/{id}",tags:["Webinars"],summary:"Find webinar by ID",security:[{bearerAuth:[]}],request:{params:tc},responses:{200:{description:"Webinar details retrieved successfully",summary:"Webinar Retrieved",content:{"application/json":{schema:C.object({id:C.string(),title:C.string(),description:C.string().nullable(),scheduledAt:C.date(),webinarLink:C.string().nullable(),thumbnailUrl:C.string().nullable(),createdAt:C.date(),updatedAt:C.date(),guests:C.array(C.object({id:C.uuid(),name:C.string(),emailAddress:C.email(),avatarUrl:C.string().nullable(),createdAt:C.date(),updatedAt:C.date()}))}).nullable()}}},400:{description:"Invalid webinar ID format",summary:"Validation Error",content:{"application/json":{schema:C.object({errors:C.record(C.string(),C.string())})}}},404:{description:"Webinar not found with the provided ID",summary:"Webinar Not Found",content:{"application/json":{schema:C.object({message:C.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:C.object({message:C.string()})}}}}},Vl={method:"put",path:"/webinars/{id}",tags:["Webinars"],summary:"Update webinar",security:[{bearerAuth:[]}],request:{params:oc.pick({id:!0}),body:{content:{"multipart/form-data":{schema:C.object({title:C.string().min(1).optional().openapi({description:"T\xEDtulo do webinar"}),description:C.string().optional().openapi({description:"Descri\xE7\xE3o do webinar"}),scheduledAt:C.string().optional().openapi({description:"Data e hora agendada (ISO 8601)",example:"2024-01-01T10:00:00Z"}),webinarLink:C.string().url().optional().openapi({description:"Link do webinar"}),guestIds:C.string().optional().openapi({description:"IDs dos convidados separados por v\xEDrgula",example:"uuid1,uuid2,uuid3"}),thumbnail:C.string().optional().openapi({description:"Imagem de thumbnail (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{200:{description:"Webinar updated successfully",summary:"Webinar Updated"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:C.object({errors:C.record(C.string(),C.string())})}}},404:{description:"Webinar not found with the provided ID",summary:"Webinar Not Found",content:{"application/json":{schema:C.object({message:C.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:C.object({message:C.string()})}}}}},Kl={method:"delete",path:"/webinars/{id}",tags:["Webinars"],summary:"Delete webinar",security:[{bearerAuth:[]}],request:{params:Qm},responses:{200:{description:"Webinar deleted successfully",summary:"Webinar Deleted"},400:{description:"Invalid webinar ID format",summary:"Validation Error",content:{"application/json":{schema:C.object({errors:C.record(C.string(),C.string())})}}},404:{description:"Webinar not found with the provided ID",summary:"Webinar Not Found",content:{"application/json":{schema:C.object({message:C.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:C.object({message:C.string()})}}}}};var f=new BC;f.registerComponent("securitySchemes","bearerAuth",{type:"http",scheme:"bearer",bearerFormat:"JWT"});f.registerPath(xc);f.registerPath(Pc);f.registerPath(Mc);f.registerPath(Ac);f.registerPath(Dc);f.registerPath(Fc);f.registerPath(Tc);f.registerPath(Nl);f.registerPath(kl);f.registerPath(Gl);f.registerPath(Ll);f.registerPath(pd);f.registerPath(dd);f.registerPath(ld);f.registerPath(ud);f.registerPath(Uc);f.registerPath(qc);f.registerPath(Bc);f.registerPath(Oc);f.registerPath(Nc);f.registerPath(Ed);f.registerPath(jd);f.registerPath(xd);f.registerPath(Pd);f.registerPath(Md);f.registerPath(pp);f.registerPath(dp);f.registerPath(lp);f.registerPath(up);f.registerPath(gp);f.registerPath(yl);f.registerPath(hl);f.registerPath(Rl);f.registerPath(Il);f.registerPath(Cl);f.registerPath(bl);f.registerPath(Vc);f.registerPath(Kc);f.registerPath(Jc);f.registerPath(Yc);f.registerPath(Xc);f.registerPath(Id);f.registerPath(Cd);f.registerPath(bd);f.registerPath(wd);f.registerPath(Sd);f.registerPath(Hp);f.registerPath(zp);f.registerPath(Zp);f.registerPath(Vp);f.registerPath(Kp);f.registerPath(Al);f.registerPath(Tl);f.registerPath(Dl);f.registerPath(Fl);f.registerPath(Ul);f.registerPath(Np);f.registerPath(kp);f.registerPath(Gp);f.registerPath(Lp);f.registerPath(_p);f.registerPath(_d);f.registerPath(Wd);f.registerPath(Hd);f.registerPath(zd);f.registerPath(Zd);f.registerPath(Vd);f.registerPath(od);f.registerPath(id);f.registerPath(nd);f.registerPath(sd);f.registerPath(ad);f.registerPath(md);f.registerPath(Qp);f.registerPath(ed);f.registerPath(td);f.registerPath(rd);f.registerPath(Tp);f.registerPath(Dp);f.registerPath(Fp);f.registerPath(Up);f.registerPath(qp);f.registerPath(Bp);f.registerPath(xp);f.registerPath(Pp);f.registerPath(Mp);f.registerPath(Ap);f.registerPath(Ip);f.registerPath(Cp);f.registerPath(bp);f.registerPath(wp);f.registerPath(pl);f.registerPath(dl);f.registerPath(ll);f.registerPath(ul);f.registerPath(gl);f.registerPath(fl);f.registerPath(sl);f.registerPath(al);f.registerPath(ml);f.registerPath(cl);f.registerPath($d);f.registerPath(Qd);f.registerPath(el);f.registerPath(tl);f.registerPath(Hl);f.registerPath(zl);f.registerPath(Zl);f.registerPath(Vl);f.registerPath(Kl);f.registerPath(Lc);f.registerPath(_c);f.registerPath(Wc);f.registerPath(Hc);f.registerPath(zc);f.registerPath(Dd);f.registerPath(Fd);f.registerPath(Ud);f.registerPath(qd);f.registerPath(Bd);f.registerPath(tp);f.registerPath(rp);f.registerPath(op);f.registerPath(ip);f.registerPath(np);f.registerPath(vl);f.registerPath(El);f.registerPath(jl);f.registerPath(xl);f.registerPath(Pl);var NC=new OC(f.definitions),Jl=NC.generateDocument({openapi:"3.0.0",info:{title:"API da Rede CT",version:"1.0.0",description:"API com valida\xE7\xE3o Zod"}});import{Router as zC}from"express";import{extendZodWithOpenApi as kC}from"@asteasolutions/zod-to-openapi";import ic from"zod";kC(ic);var GC=ic.object({authenticatedUserId:ic.uuid()}),ln=class{constructor(e){this.userRepository=e}async handle(e,r){try{let{authenticatedUserId:t}=GC.parse({authenticatedUserId:e.user.id}),i=await this.userRepository.findById(t);if(!i)throw new p("Usu\xE1rio n\xE3o encontrado.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{PrismaClient as LC}from"@prisma/client";var G=new LC({log:["warn","error"]});var un=class{constructor(e){this.prisma=e}async register({userId:e,title:r,description:t,certificationUrl:i}){await this.prisma.certification.create({data:{title:r,description:t,certificationUrl:i,user:{connect:{id:e}}}})}async find({pagination:{offset:e,limit:r},filter:{description:t,orderBy:i,title:n,userId:s}}){let a={},c=[];return s&&(a.userId=s),n&&c.push({title:{contains:n,mode:"insensitive"}}),t&&c.push({description:{contains:t,mode:"insensitive"}}),c.length>0&&(a.OR=c),await this.prisma.certification.findMany({where:a,include:{user:{omit:{passwordHash:!0}}},orderBy:{updatedAt:i},skip:e,take:r})}async findById(e){return await this.prisma.certification.findFirst({where:{id:e}})}async findByUserId({pagination:{limit:e,offset:r},filter:{description:t,orderBy:i,title:n},userId:s}){let a={userId:s},c=[];return n&&c.push({title:{contains:n,mode:"insensitive"}}),t&&c.push({description:{contains:t,mode:"insensitive"}}),c.length>0&&(a.OR=c),await this.prisma.certification.findMany({where:a,include:{user:{omit:{passwordHash:!0}}},skip:r,take:e,orderBy:i?{updatedAt:i}:{updatedAt:"desc"}})}async update({id:e,...r}){await this.prisma.certification.update({where:{id:e},data:r})}async deleteById(e){await this.prisma.certification.delete({where:{id:e}})}async count({filter:{description:e,title:r,userId:t}}){let i={},n=[];return t&&(i.userId=t),r&&n.push({title:{contains:r,mode:"insensitive"}}),e&&n.push({description:{contains:e,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.certification.count({where:i})}};function it(){return new un(G)}var gn=class{constructor(e){this.prisma=e}async create(e){await this.prisma.news.create({data:e})}async find({pagination:{offset:e,limit:r},filter:{authorId:t,content:i,title:n,orderBy:s}}){let a={};t&&(a.authorId={contains:t,mode:"insensitive"});let c=[];return n&&c.push({title:{contains:n,mode:"insensitive"}}),i&&c.push({content:{contains:i,mode:"insensitive"}}),c.length>0&&(a.OR=c),await this.prisma.news.findMany({where:a,omit:{authorId:!0},include:{author:!0},orderBy:{updatedAt:s},skip:e,take:r})}async findById(e){return await this.prisma.news.findUnique({where:{id:e},omit:{authorId:!0},include:{author:!0}})}async findByAuthorId({authorId:e,pagination:{offset:r,limit:t},filter:{orderBy:i="desc",content:n,title:s}}){let a={authorId:e},c=[];return s&&c.push({title:{contains:s,mode:"insensitive"}}),n&&c.push({content:{contains:n,mode:"insensitive"}}),c.length>0&&(a.OR=c),await this.prisma.news.findMany({omit:{authorId:!0},where:a,orderBy:{updatedAt:i},skip:r,take:t})}async update(e){await this.prisma.news.update({where:{id:e.id},data:{title:e.title,content:e.content,imageUrl:e.imageUrl}})}async delete(e){await this.prisma.news.delete({where:{id:e}})}async count({filter:{authorId:e,content:r,title:t}}){let i={};e&&(i.authorId={contains:e,mode:"insensitive"});let n=[];return t&&n.push({title:{contains:t,mode:"insensitive"}}),r&&n.push({content:{contains:r,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.news.count({where:i})}};function qe(){return new gn(G)}var fn=class{constructor(e){this.prisma=e}async create(e){await this.prisma.pendency.create({data:e})}async find({filter:{description:e,orderBy:r,title:t,status:i,userId:n},pagination:{limit:s,offset:a}}){let c={userId:n,AND:{status:{equals:i}}};e&&(c.description={contains:e,mode:"insensitive"});let u=[];return t&&u.push({title:{contains:t,mode:"insensitive"}}),u.length>0&&(c.OR=u),await this.prisma.pendency.findMany({where:c,orderBy:{updatedAt:r},include:{user:{omit:{passwordHash:!0}}},skip:a,take:s})}async findById(e){return await this.prisma.pendency.findFirst({where:{id:e},include:{user:{omit:{passwordHash:!0}}}})}async findByUserId({filter:{description:e,orderBy:r,title:t,status:i},pagination:{limit:n,offset:s},userId:a}){let c={userId:a,AND:{status:{equals:i}}},u=[];return e&&u.push({description:{contains:e,mode:"insensitive"}}),t&&u.push({title:{contains:t,mode:"insensitive"}}),u.length>0&&(c.OR=u),await this.prisma.pendency.findMany({where:c,orderBy:{updatedAt:r},include:{user:{omit:{passwordHash:!0}}},skip:s,take:n})}async update({id:e,...r}){await this.prisma.pendency.update({where:{id:e},data:r})}async deleteById(e){await this.prisma.pendency.delete({where:{id:e}})}async count({filter:{description:e,title:r,status:t,userId:i}}){let n={userId:i},s=[];return e&&s.push({description:{contains:e,mode:"insensitive"}}),r&&s.push({title:{contains:r,mode:"insensitive"}}),t&&s.push({status:{equals:t}}),s.length>0&&(n.OR=s),await this.prisma.pendency.count({where:n})}};function nt(){return new fn(G)}var yn=class{constructor(e){this.prisma=e}async create(e){await this.prisma.user.create({data:e})}async update(e){await this.prisma.user.update({where:{id:e.id},data:{lattesUrl:e.lattesUrl??null,orcid:e.orcid??null,phone:e.phone??null,avatarUrl:e.avatarUrl??null}})}async deleteById(e){await this.prisma.user.delete({where:{id:e}})}async find(){return await this.prisma.user.findMany({omit:{passwordHash:!0}})}async findByEmail(e){return await this.prisma.user.findFirst({where:{emailAddress:e}})}async findById(e){return await this.prisma.user.findFirst({where:{id:e},omit:{passwordHash:!0}})}};function ce(){return new yn(G)}import{compare as _C,hash as WC}from"bcryptjs";var hn=class{constructor(e,r){this.hashFn=e;this.compareFn=r}async hash(e){return await this.hashFn(e,6)}async compare({password:e,hashedPassword:r}){return await this.compareFn(e,r)}};function nc(){return new hn(WC,_C)}import Yl from"jsonwebtoken";import pe from"zod";var HC=pe.object({JWT_SECRET:pe.string(),FIREBASE_BUCKET:pe.string(),FIREBASE_CLIENT_EMAIL:pe.string(),FIREBASE_PRIVATE_KEY:pe.string(),FIREBASE_PROJECT_ID:pe.string(),FIREBASE_TYPE:pe.string(),FIREBASE_PRIVATE_KEY_ID:pe.string(),FIREBASE_CLIENT_ID:pe.string(),FIREBASE_AUTH_URI:pe.string(),FIREBASE_TOKEN_URI:pe.string(),FIREBASE_AUTH_PROVIDER_X509_CERT_URL:pe.string(),FIREBASE_CLIENT_X509_CERT_URL:pe.string()}),oe=HC.parse(process.env);var Rn=class{constructor(e,r){this.signFn=e;this.verifyFn=r}sign(e){try{return this.signFn(e,oe.JWT_SECRET,{expiresIn:"3d",subject:e.id})}catch{return null}}verify(e){try{return this.verifyFn(e,oe.JWT_SECRET)}catch{return null}}};function In(){return new Rn(Yl.sign,Yl.verify)}function Xl(){return{signUpController:new Ur(ce(),nc())}}function $l(){return{signInController:new Dr(ce(),nc(),In())}}function Ql(){return{findAuthenticatedUserController:new ln(ce())}}function eu(){return{findAuthenticatedUserController:new Mr(qe())}}function tu(){return{findAuthenticatedUserCertificationsController:new Pr(it())}}function ru(){return{findAuthenticatedUserPendenciesController:new Ar(nt())}}var Cn=class{constructor(e){this.jwtService=e}authenticated(e,r,t){let i=e.headers.authorization;if(!i?.startsWith("Bearer "))return r.status(401).json({message:"Token inv\xE1lido.",invalid:!0});let n=i.split(" ")[1];if(!n)return r.status(401).json({message:"Token n\xE3o fornecido."});try{let s=this.jwtService.verify(n);if(!s)return r.status(401).json({message:"Token inv\xE1lido.",invalid:!0});e.user=s,t()}catch(s){if(console.log(s),s instanceof Error)return r.status(401).json({message:s.message})}}isAdmin(e,r,t){let i=e.headers.authorization;if(!i?.startsWith("Bearer "))return r.status(401).json({message:"Token inv\xE1lido.",invalid:!0});let n=i.split(" ")[1];if(!n)return r.status(401).json({message:"Token n\xE3o fornecido."});try{let s=this.jwtService.verify(n);if(!s)return r.status(401).json({message:"Token inv\xE1lido.",invalid:!0});if(s.role!=="ADMIN")return r.status(401).json({message:"\xC9 necess\xE1rio ter permiss\xF5es de administrador."});e.user=s,t()}catch(s){if(console.log(s),s instanceof Error)return r.status(401).json({message:s.message})}}};function V(){return{authMiddleware:new Cn(In())}}var Be=zC(),{authMiddleware:hr}=V();Be.post("/sign-up",async(o,e)=>{let{signUpController:r}=Xl();await r.handle(o,e)});Be.post("/sign-in",async(o,e)=>{let{signInController:r}=$l();await r.handle(o,e)});Be.get("/user",(o,e,r)=>{hr.authenticated(o,e,r)},async(o,e)=>{let{findAuthenticatedUserController:r}=Ql();await r.handle(o,e)});Be.get("/user/news",(o,e,r)=>{hr.authenticated(o,e,r)},async(o,e)=>{let{findAuthenticatedUserController:r}=eu();await r.handle(o,e)});Be.get("/admin",(o,e,r)=>{hr.isAdmin(o,e,r)},(o,e)=>{try{e.status(200).json({success:!0})}catch(r){r instanceof Error&&e.status(500).json({message:r.message})}});Be.get("/certifications",(o,e,r)=>{hr.authenticated(o,e,r)},async(o,e)=>{let{findAuthenticatedUserCertificationsController:r}=tu();await r.handle(o,e)});Be.get("/pendencies",(o,e,r)=>{hr.authenticated(o,e,r)},async(o,e)=>{let{findAuthenticatedUserPendenciesController:r}=ru();await r.handle(o,e)});import{Router as XC}from"express";import{getStorage as VC}from"firebase-admin/storage";import{config as ZC}from"dotenv";import ou from"firebase-admin";ZC();var sc=ou.initializeApp({credential:ou.credential.cert({clientEmail:oe.FIREBASE_CLIENT_EMAIL,privateKey:oe.FIREBASE_PRIVATE_KEY,projectId:oe.FIREBASE_PROJECT_ID,type:oe.FIREBASE_TYPE,privateKeyId:oe.FIREBASE_PRIVATE_KEY_ID,clientId:oe.FIREBASE_CLIENT_ID,authUri:oe.FIREBASE_AUTH_URI,tokenUri:oe.FIREBASE_TOKEN_URI,authProviderX509CertUrl:oe.FIREBASE_AUTH_PROVIDER_X509_CERT_URL,clientX509CertUrl:oe.FIREBASE_CLIENT_X509_CERT_URL}),storageBucket:oe.FIREBASE_BUCKET});sc.name?console.log("\u{1F525} Firebase conectado com sucesso!"):console.error("\u274C Erro ao se conectar ao Firebase.");var KC=VC(sc),iu=KC.bucket(oe.FIREBASE_BUCKET);import{randomUUID as JC}from"node:crypto";var YC=/https:\/\/storage\.googleapis\.com\/[^/]+\/(.+)$/,bn=class{constructor(e){this.bucket=e}async uploadFile({file:e,folder:r,id:t}){let i=`${JC()}-${e?.originalname}`,n=this.bucket.file(`${r}/${t}/${i}`);return await new Promise((s,a)=>{let c=n.createWriteStream({metadata:{contentType:e?.mimetype}});c.on("error",u=>{a(u)}),c.on("finish",async()=>{try{await n.makePublic();let u=`https://storage.googleapis.com/${this.bucket.name}/${n.name}`;s(u)}catch(u){a(u)}}),c.end(e.buffer)})}async updateFile({file:e,id:r,fileUrl:t,folder:i}){try{let n=this.getPath(t);if(!n)throw new Error("Arquivo n\xE3o encontrado.");let[s,a]=await Promise.all([this.bucket.file(n).delete(),this.uploadFile({file:e,id:r,folder:i})]);return a}catch{throw new Error("Erro ao atualizar o arquivo.")}}async deleteFile({fileUrl:e}){let r=this.getPath(e);if(!r)throw new Error("Arquivo n\xE3o encontrado.");try{await this.bucket.file(r).delete()}catch{throw new Error("Erro ao deletar o arquivo.")}}getPath(e){let r=e.match(YC);return r?r[1]:null}};function q(){return new bn(iu)}function nu(){return{registerCertificationController:new Nr(ce(),it(),q())}}function su(){return{findCertificationsController:new Or(it())}}function au(){return{findCertificationByIdController:new Br(it())}}function mu(){return{updateCertificationController:new Gr(it(),q())}}function cu(){return{deleteCertificationController:new qr(it(),q())}}import pu from"multer";var L=pu({storage:pu.memoryStorage()});var Rt=XC(),{authMiddleware:Rr}=V();Rt.post("/:user_id",(o,e,r)=>{Rr.isAdmin(o,e,r)},L.single("certification"),async(o,e)=>{let{registerCertificationController:r}=nu();await r.handle(o,e)});Rt.get("/",(o,e,r)=>{Rr.isAdmin(o,e,r)},async(o,e)=>{let{findCertificationsController:r}=su();await r.handle(o,e)});Rt.get("/:certification_id",(o,e,r)=>{Rr.isAdmin(o,e,r)},async(o,e)=>{let{findCertificationByIdController:r}=au();await r.handle(o,e)});Rt.put("/:certification_id",(o,e,r)=>{Rr.isAdmin(o,e,r)},L.single("certification"),async(o,e)=>{let{updateCertificationController:r}=mu();await r.handle(o,e)});Rt.delete("/:certification_id",(o,e,r)=>{Rr.isAdmin(o,e,r)},async(o,e)=>{let{deleteCertificationController:r}=cu();await r.handle(o,e)});import{Router as ob}from"express";import{extendZodWithOpenApi as $C}from"@asteasolutions/zod-to-openapi";import de from"zod";var QC=5,du=1024,eb=du*du,tb=QC*eb;$C(de);var rb=de.object({title:de.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),coordinatorId:de.string().uuid("Coordenador \xE9 obrigat\xF3rio."),email:de.email("E-mail deve ser v\xE1lido."),location:de.string().min(1,"Localiza\xE7\xE3o \xE9 obrigat\xF3ria."),scheduledAt:de.coerce.date(),registrationLink:de.url().optional(),description:de.string().optional(),instructorIds:de.transform(o=>typeof o=="string"?o.split(","):o).pipe(de.array(de.uuid())),image:de.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=tb,"A imagem deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.")}),wn=class{constructor(e,r){this.courseRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{title:t,coordinatorId:i,email:n,location:s,scheduledAt:a,registrationLink:c,description:u,instructorIds:b,image:T}=rb.parse({...e.body,image:e.file}),Z=await this.courseRepository.create({title:t,coordinatorId:i,email:n,location:s,scheduledAt:a,registrationLink:c||void 0,description:u,instructorIds:b}),X=await this.firebaseStorageService.uploadFile({file:T,folder:M.COURSE,id:Z.id});return await this.courseRepository.update({id:Z.id,imageUrl:X}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var Sn=class{constructor(e){this.prisma=e}async create({title:e,imageUrl:r,coordinatorId:t,email:i,instructorIds:n,scheduledAt:s,location:a,registrationLink:c,description:u}){return await this.prisma.course.create({data:{title:e,imageUrl:r,coordinatorId:t,email:i,scheduledAt:s,location:a,registrationLink:c,description:u,instructors:{connect:n?.map(b=>({id:b}))}}})}async find({pagination:{offset:e,limit:r},filter:{description:t,orderBy:i,title:n,coordinator:s}}){let a={},c=[];return n&&c.push({title:{contains:n,mode:"insensitive"}}),t&&c.push({description:{contains:t,mode:"insensitive"}}),s&&c.push({coordinator:{name:{contains:s,mode:"insensitive"}}}),c.length>0&&(a.OR=c),await this.prisma.course.findMany({where:a,include:{coordinator:{omit:{passwordHash:!0}},instructors:{omit:{passwordHash:!0}}},orderBy:{updatedAt:i},skip:e,take:r})}async findById(e){return await this.prisma.course.findFirst({where:{id:e},include:{coordinator:{omit:{passwordHash:!0}},instructors:{omit:{passwordHash:!0}}}})}async update({id:e,title:r,imageUrl:t,coordinatorId:i,email:n,instructorIds:s,scheduledAt:a,location:c,registrationLink:u,description:b}){s!==void 0&&await this.prisma.course.update({where:{id:e},data:{instructors:{set:[]}}}),await this.prisma.course.update({where:{id:e},data:{title:r,imageUrl:t,coordinatorId:i,email:n,scheduledAt:a,location:c,registrationLink:u,description:b,...s?.length>0&&{instructors:{connect:s.map(T=>({id:T}))}}}})}async deleteById(e){await this.prisma.course.delete({where:{id:e}})}async count({filter:{description:e,title:r,coordinator:t}}){let i={},n=[];return r&&n.push({title:{contains:r,mode:"insensitive"}}),e&&n.push({description:{contains:e,mode:"insensitive"}}),t&&n.push({coordinator:{name:{contains:t,mode:"insensitive"}}}),n.length>0&&(i.OR=n),await this.prisma.course.count({where:i})}};function Ht(){return new Sn(G)}function lu(){return{createCourseController:new wn(Ht(),q())}}function uu(){return{findCoursesController:new Hr(Ht())}}function gu(){return{findCourseByIdController:new Wr(Ht())}}function fu(){return{updateCourseController:new zr(Ht(),q())}}function yu(){return{deleteCourseController:new _r(Ht(),q())}}var It=ob(),{authMiddleware:Ir}=V();It.post("/",(o,e,r)=>{Ir.isAdmin(o,e,r)},L.single("image"),async(o,e)=>{let{createCourseController:r}=lu();await r.handle(o,e)});It.get("/",(o,e,r)=>{Ir.isAdmin(o,e,r)},async(o,e)=>{let{findCoursesController:r}=uu();await r.handle(o,e)});It.get("/:id",(o,e,r)=>{Ir.isAdmin(o,e,r)},async(o,e)=>{let{findCourseByIdController:r}=gu();await r.handle(o,e)});It.put("/:id",(o,e,r)=>{Ir.isAdmin(o,e,r)},L.single("image"),async(o,e)=>{let{updateCourseController:r}=fu();await r.handle(o,e)});It.delete("/:id",(o,e,r)=>{Ir.isAdmin(o,e,r)},async(o,e)=>{let{deleteCourseController:r}=yu();await r.handle(o,e)});import{Router as mb}from"express";import{extendZodWithOpenApi as ib}from"@asteasolutions/zod-to-openapi";import Oe from"zod";var nb=1,sb=9;ib(Oe);var ab=Oe.object({page:Oe.coerce.number().min(1).default(nb),limit:Oe.coerce.number().min(1).default(sb),code:Oe.string().optional(),title:Oe.string().optional(),description:Oe.string().optional(),notes:Oe.string().optional(),orderBy:Oe.enum(["asc","desc"]).default("desc")}),vn=class{constructor(e){this.etpRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=ab.parse(e.query),s=i*t-i,[a,c]=await Promise.all([this.etpRepository.find({pagination:{offset:s,limit:i},filter:n}),this.etpRepository.count({filter:n})]),u=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:u,offset:s,limit:i,etps:a})}catch(t){if(t instanceof Error)throw new m(t.message)}}};var En=class{constructor(e){this.prisma=e}async create(e){let{leaderId:r,deputyLeaderId:t,secretaryId:i,memberIds:n,...s}=e;await this.prisma.$transaction(async a=>{let c=await a.eTP.create({data:s});await a.eTPLeader.create({data:{etpId:c.id,researcherId:r}}),await a.eTPDeputy.create({data:{etpId:c.id,researcherId:t}}),await a.eTPSecretary.create({data:{etpId:c.id,researcherId:i}}),await a.eTP.update({where:{id:c.id},data:{members:{connect:n.map(u=>({id:u}))}}})})}async update(e){let{leaderId:r,deputyLeaderId:t,secretaryId:i,memberIds:n,...s}=e;await this.prisma.$transaction(async a=>{await a.eTP.update({where:{id:e.id},data:s}),await this.updateLeader(a,e.id,r),await this.updateDeputyLeader(a,e.id,t),await this.updateSecretary(a,e.id,i),await this.updateMembers(a,e.id,n)})}async updateLeader(e,r,t){t!==void 0&&(await e.eTPLeader.deleteMany({where:{etpId:r}}),t&&await e.eTPLeader.create({data:{etpId:r,researcherId:t}}))}async updateDeputyLeader(e,r,t){t!==void 0&&(await e.eTPDeputy.deleteMany({where:{etpId:r}}),t&&await e.eTPDeputy.create({data:{etpId:r,researcherId:t}}))}async updateSecretary(e,r,t){t!==void 0&&(await e.eTPSecretary.deleteMany({where:{etpId:r}}),t&&await e.eTPSecretary.create({data:{etpId:r,researcherId:t}}))}async updateMembers(e,r,t){t!==void 0&&await e.eTP.update({where:{id:r},data:{members:{set:t.map(i=>({id:i}))}}})}async deleteById(e){await this.prisma.eTP.delete({where:{id:e}})}async find({pagination:{offset:e,limit:r},filter:{code:t,title:i,description:n,notes:s,orderBy:a}}){let c={},u=[];return t&&u.push({code:{contains:t,mode:"insensitive"}}),i&&u.push({title:{contains:i,mode:"insensitive"}}),n&&u.push({description:{contains:n,mode:"insensitive"}}),s&&u.push({notes:{contains:s,mode:"insensitive"}}),u.length>0&&(c.OR=u),await this.prisma.eTP.findMany({where:c,include:{leader:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},deputyLeader:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},secretary:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},members:{include:{user:{omit:{passwordHash:!0}}}}},orderBy:{updatedAt:a},skip:e,take:r})}async findById(e){return await this.prisma.eTP.findFirst({where:{id:e},include:{leader:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},deputyLeader:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},secretary:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},members:{include:{user:{omit:{passwordHash:!0}}}}}})}async findByCode(e){return await this.prisma.eTP.findFirst({where:{code:e},include:{leader:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},deputyLeader:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},secretary:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},members:{include:{user:{omit:{passwordHash:!0}}}}}})}async count({filter:{code:e,title:r,description:t,notes:i}}){let n={},s=[];return e&&s.push({code:{contains:e,mode:"insensitive"}}),r&&s.push({title:{contains:r,mode:"insensitive"}}),t&&s.push({description:{contains:t,mode:"insensitive"}}),i&&s.push({notes:{contains:i,mode:"insensitive"}}),s.length>0&&(n.OR=s),await this.prisma.eTP.count({where:n})}};function zt(){return new En(G)}function hu(){return{createETPController:new Zr(zt())}}function Ru(){return{findETPsController:new vn(zt())}}function Iu(){return{findETPByIdController:new Kr(zt())}}function Cu(){return{updateETPController:new Yr(zt())}}function bu(){return{deleteETPController:new Vr(zt())}}var Ct=mb(),{authMiddleware:ac}=V();Ct.post("/",(o,e,r)=>{ac.authenticated(o,e,r)},async(o,e)=>{let{createETPController:r}=hu();await r.handle(o,e)});Ct.get("/",async(o,e)=>{let{findETPsController:r}=Ru();await r.handle(o,e)});Ct.get("/:id",async(o,e)=>{let{findETPByIdController:r}=Iu();await r.handle(o,e)});Ct.put("/:id",(o,e,r)=>{ac.authenticated(o,e,r)},async(o,e)=>{let{updateETPController:r}=Cu();await r.handle(o,e)});Ct.delete("/:id",(o,e,r)=>{ac.authenticated(o,e,r)},async(o,e)=>{let{deleteETPController:r}=bu();await r.handle(o,e)});import{Router as cb}from"express";var jn=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.event.create({data:e})}async update(e){await this.prisma.event.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.event.delete({where:{id:e}})}async find({pagination:{offset:e,limit:r},filter:{title:t,status:i,format:n,orderBy:s}}){let a={},c=[];return i&&(a.status=i),n&&(a.format=n),t&&c.push({title:{contains:t,mode:"insensitive"}}),c.length>0&&(a.OR=c),await this.prisma.event.findMany({where:a,orderBy:s?{startDate:s}:{startDate:"desc"},skip:e,take:r})}async findById(e){return await this.prisma.event.findFirst({where:{id:e}})}async count({filter:{title:e,status:r,format:t}}){let i={},n=[];return r&&(i.status=r),t&&(i.format=t),e&&n.push({title:{contains:e,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.event.count({where:i})}};function Zt(){return new jn(G)}function wu(){return{createEventController:new Qr(Zt(),q())}}function Su(){return{findEventsController:new oo(Zt())}}function vu(){return{findEventByIdController:new to(Zt())}}function Eu(){return{updateEventController:new io(Zt(),q())}}function ju(){return{deleteEventController:new eo(Zt())}}var bt=cb(),{authMiddleware:mc}=V();bt.post("/",(o,e,r)=>{mc.authenticated(o,e,r)},L.single("image"),async(o,e)=>{let{createEventController:r}=wu();await r.handle(o,e)});bt.get("/",async(o,e)=>{let{findEventsController:r}=Su();await r.handle(o,e)});bt.get("/:id",async(o,e)=>{let{findEventByIdController:r}=vu();await r.handle(o,e)});bt.put("/:id",(o,e,r)=>{mc.authenticated(o,e,r)},L.single("image"),async(o,e)=>{let{updateEventController:r}=Eu();await r.handle(o,e)});bt.delete("/:id",(o,e,r)=>{mc.authenticated(o,e,r)},async(o,e)=>{let{deleteEventController:r}=ju();await r.handle(o,e)});import{Router as pb}from"express";var xn=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.inMemoriam.create({data:e})}async update(e){await this.prisma.inMemoriam.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.inMemoriam.delete({where:{id:e}})}async find({pagination:{offset:e,limit:r},filter:{name:t,biography:i,role:n,orderBy:s}}){let a={},c=[];return n&&(a.role=n),t&&c.push({name:{contains:t,mode:"insensitive"}}),i&&c.push({biography:{contains:i,mode:"insensitive"}}),c.length>0&&(a.OR=c),await this.prisma.inMemoriam.findMany({where:a,orderBy:{updatedAt:s},skip:e,take:r})}async findById(e){return await this.prisma.inMemoriam.findFirst({where:{id:e}})}async findByRole(e){return await this.prisma.inMemoriam.findMany({where:{role:e}})}async count({filter:{name:e,biography:r,role:t}}){let i={},n=[];return t&&(i.role=t),e&&n.push({name:{contains:e,mode:"insensitive"}}),r&&n.push({biography:{contains:r,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.inMemoriam.count({where:i})}};function wt(){return new xn(G)}function xu(){return{createInMemoriamController:new no(wt(),q())}}function Pu(){return{findInMemoriamsController:new po(wt())}}function Mu(){return{findInMemoriamByIdController:new ao(wt())}}function Au(){return{findInMemoriamByRoleController:new co(wt())}}function Tu(){return{updateInMemoriamController:new lo(wt(),q())}}function Du(){return{deleteInMemoriamController:new so(wt(),q())}}var st=pb(),{authMiddleware:cc}=V();st.post("/",(o,e,r)=>{cc.authenticated(o,e,r)},L.single("photo"),async(o,e)=>{let{createInMemoriamController:r}=xu();await r.handle(o,e)});st.get("/",async(o,e)=>{let{findInMemoriamsController:r}=Pu();await r.handle(o,e)});st.get("/:id",async(o,e)=>{let{findInMemoriamByIdController:r}=Mu();await r.handle(o,e)});st.get("/role/:role",async(o,e)=>{let{findInMemoriamByRoleController:r}=Au();await r.handle(o,e)});st.put("/:id",(o,e,r)=>{cc.authenticated(o,e,r)},L.single("photo"),async(o,e)=>{let{updateInMemoriamController:r}=Tu();await r.handle(o,e)});st.delete("/:id",(o,e,r)=>{cc.authenticated(o,e,r)},async(o,e)=>{let{deleteInMemoriamController:r}=Du();await r.handle(o,e)});import{Router as db}from"express";var pc=db();pc.get("/",(o,e)=>{e.status(200).json({message:"Rede CT"})});import{Router as yb}from"express";var Pn=class{constructor(e){this.prisma=e}async create(e){await this.prisma.internationalScientificCongress.create({data:e})}async update(e){await this.prisma.internationalScientificCongress.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.internationalScientificCongress.delete({where:{id:e}})}async find({pagination:{offset:e,limit:r},filter:{title:t,edition:i,location:n,orderBy:s}}){let a={},c=[];return i&&c.push({edition:{equals:i}}),t&&c.push({title:{contains:t,mode:"insensitive"}}),n&&c.push({location:{contains:n,mode:"insensitive"}}),c.length>0&&(a.OR=c),await this.prisma.internationalScientificCongress.findMany({where:a,include:{partners:!0,galleries:!0},orderBy:s?{startDate:s}:{startDate:"desc"},skip:e,take:r})}async findById(e){return await this.prisma.internationalScientificCongress.findFirst({where:{id:e},include:{partners:!0,galleries:!0}})}async findByEdition(e){return await this.prisma.internationalScientificCongress.findMany({where:{edition:e},include:{partners:!0,galleries:!0}})}async count({filter:{title:e,edition:r,location:t}}){let i={},n=[];return r&&n.push({edition:{equals:r}}),e&&n.push({title:{contains:e,mode:"insensitive"}}),t&&n.push({location:{contains:t,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.internationalScientificCongress.count({where:i})}};function we(){return new Pn(G)}function Fu(){return{createInternationalScientificCongressController:new So(we())}}function Uu(){return{findInternationalScientificCongressesController:new Po(we())}}function qu(){return{findInternationalScientificCongressByIdController:new jo(we())}}function Bu(){return{findInternationalScientificCongressByEditionController:new Eo(we())}}function Ou(){return{updateInternationalScientificCongressController:new Mo(we())}}function Nu(){return{deleteInternationalScientificCongressController:new vo(we())}}import{extendZodWithOpenApi as lb}from"@asteasolutions/zod-to-openapi";import dc from"zod";lb(dc);var ub=dc.object({id:dc.uuid()}),Mn=class{constructor(e){this.internationalScientificCongressGalleryRepository=e}async handle(e,r){try{let{id:t}=ub.parse({id:e.params.id}),i=await this.internationalScientificCongressGalleryRepository.findById(t);if(!i)throw new p("A imagem da galeria n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var An=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.internationalScientificCongressGalleryItem.create({data:e})}async update(e){await this.prisma.internationalScientificCongressGalleryItem.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.internationalScientificCongressGalleryItem.delete({where:{id:e}})}async findByCongressId(e){let{pagination:r,filter:t}=e;return await this.prisma.internationalScientificCongressGalleryItem.findMany({where:{congressId:t.congressId,...t.caption&&{caption:{contains:t.caption,mode:"insensitive"}}},skip:r.offset,take:r.limit})}async findById(e){return await this.prisma.internationalScientificCongressGalleryItem.findFirst({where:{id:e}})}async count(e){let{filter:r}=e;return await this.prisma.internationalScientificCongressGalleryItem.count({where:{congressId:r.congressId,...r.caption&&{caption:{contains:r.caption,mode:"insensitive"}}}})}};function Vt(){return new An(G)}function ku(){return{createInternationalScientificCongressGalleryController:new uo(Vt(),we(),q())}}function Gu(){return{findInternationalScientificCongressGalleriesByCongressIdController:new yo(Vt())}}function Lu(){return{findInternationalScientificCongressGalleryByIdController:new Mn(Vt())}}function _u(){return{updateInternationalScientificCongressGalleryController:new ho(Vt(),q())}}function Wu(){return{deleteInternationalScientificCongressGalleryController:new go(Vt())}}import{extendZodWithOpenApi as gb}from"@asteasolutions/zod-to-openapi";import lc from"zod";gb(lc);var fb=lc.object({id:lc.uuid()}),Tn=class{constructor(e){this.internationalScientificCongressPartnerRepository=e}async handle(e,r){try{let{id:t}=fb.parse({id:e.params.id}),i=await this.internationalScientificCongressPartnerRepository.findById(t);if(!i)throw new p("O parceiro n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var Dn=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.internationalScientificCongressPartner.create({data:e})}async update(e){await this.prisma.internationalScientificCongressPartner.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.internationalScientificCongressPartner.delete({where:{id:e}})}async findByCongressId(e){return await this.prisma.internationalScientificCongressPartner.findMany({where:{congressId:e.filter.congressId,name:e.filter.name?{contains:e.filter.name,mode:"insensitive"}:void 0},skip:e.pagination?.offset,take:e.pagination?.limit})}async findById(e){return await this.prisma.internationalScientificCongressPartner.findFirst({where:{id:e}})}async count(e){return await this.prisma.internationalScientificCongressPartner.count({where:{congressId:e.filter.congressId,name:e.filter.name?{contains:e.filter.name,mode:"insensitive"}:void 0}})}};function Kt(){return new Dn(G)}function Hu(){return{createInternationalScientificCongressPartnerController:new Ro(Kt(),we(),q())}}function zu(){return{findInternationalScientificCongressPartnersByCongressIdController:new bo(Kt())}}function Zu(){return{findInternationalScientificCongressPartnerByIdController:new Tn(Kt())}}function Vu(){return{updateInternationalScientificCongressPartnerController:new wo(Kt(),q())}}function Ku(){return{deleteInternationalScientificCongressPartnerController:new Io(Kt())}}var te=yb(),{authMiddleware:Ne}=V();te.post("/",(o,e,r)=>{Ne.authenticated(o,e,r)},async(o,e)=>{let{createInternationalScientificCongressController:r}=Fu();await r.handle(o,e)});te.get("/",async(o,e)=>{let{findInternationalScientificCongressesController:r}=Uu();await r.handle(o,e)});te.get("/:id",async(o,e)=>{let{findInternationalScientificCongressByIdController:r}=qu();await r.handle(o,e)});te.get("/edition/:edition",async(o,e)=>{let{findInternationalScientificCongressByEditionController:r}=Bu();await r.handle(o,e)});te.put("/:id",(o,e,r)=>{Ne.authenticated(o,e,r)},async(o,e)=>{let{updateInternationalScientificCongressController:r}=Ou();await r.handle(o,e)});te.delete("/:id",(o,e,r)=>{Ne.authenticated(o,e,r)},async(o,e)=>{let{deleteInternationalScientificCongressController:r}=Nu();await r.handle(o,e)});te.post("/:congressId/gallery",(o,e,r)=>{Ne.authenticated(o,e,r)},L.single("image"),async(o,e)=>{let{createInternationalScientificCongressGalleryController:r}=ku();await r.handle(o,e)});te.get("/:congressId/gallery",async(o,e)=>{let{findInternationalScientificCongressGalleriesByCongressIdController:r}=Gu();await r.handle(o,e)});te.get("/gallery/:id",async(o,e)=>{let{findInternationalScientificCongressGalleryByIdController:r}=Lu();await r.handle(o,e)});te.put("/gallery/:id",(o,e,r)=>{Ne.authenticated(o,e,r)},L.single("image"),async(o,e)=>{let{updateInternationalScientificCongressGalleryController:r}=_u();await r.handle(o,e)});te.delete("/gallery/:id",(o,e,r)=>{Ne.authenticated(o,e,r)},async(o,e)=>{let{deleteInternationalScientificCongressGalleryController:r}=Wu();await r.handle(o,e)});te.post("/:congressId/partner",(o,e,r)=>{Ne.authenticated(o,e,r)},L.single("logo"),async(o,e)=>{let{createInternationalScientificCongressPartnerController:r}=Hu();await r.handle(o,e)});te.get("/:congressId/partner",async(o,e)=>{let{findInternationalScientificCongressPartnersByCongressIdController:r}=zu();await r.handle(o,e)});te.get("/partner/:id",async(o,e)=>{let{findInternationalScientificCongressPartnerByIdController:r}=Zu();await r.handle(o,e)});te.put("/partner/:id",(o,e,r)=>{Ne.authenticated(o,e,r)},L.single("logo"),async(o,e)=>{let{updateInternationalScientificCongressPartnerController:r}=Vu();await r.handle(o,e)});te.delete("/partner/:id",(o,e,r)=>{Ne.authenticated(o,e,r)},async(o,e)=>{let{deleteInternationalScientificCongressPartnerController:r}=Ku();await r.handle(o,e)});import{Router as Ib}from"express";import{extendZodWithOpenApi as hb}from"@asteasolutions/zod-to-openapi";import Fn from"zod";hb(Fn);var Rb=Fn.object({role:Fn.string().optional(),orderBy:Fn.enum(["asc","desc"]).optional()}),Un=class{constructor(e){this.legitimatorCommitteeMemberRepository=e}async handle(e,r){try{let t=Rb.parse(e.query),i=await this.legitimatorCommitteeMemberRepository.find({filter:t});r.status(200).json({members:i})}catch(t){if(t instanceof Error)throw new m(t.message)}}};var qn=class{constructor(e){this.prisma=e}async create(e){await this.prisma.legitimatorCommitteeMember.create({data:{...e,order:e.order??0}})}async update(e){let{id:r,...t}=e;await this.prisma.legitimatorCommitteeMember.update({where:{id:r},data:t})}async deleteById(e){await this.prisma.legitimatorCommitteeMember.delete({where:{id:e}})}async find({filter:{role:e,orderBy:r}}){let t={};return e&&(t.role={contains:e,mode:"insensitive"}),await this.prisma.legitimatorCommitteeMember.findMany({where:t,include:{user:{omit:{passwordHash:!0}}},orderBy:r?[{order:"asc"},{updatedAt:r}]:[{order:"asc"},{updatedAt:"desc"}]})}async findById(e){return await this.prisma.legitimatorCommitteeMember.findFirst({where:{id:e},include:{user:{omit:{passwordHash:!0}}}})}async count({filter:{role:e}}){let r={};return e&&(r.role={contains:e,mode:"insensitive"}),await this.prisma.legitimatorCommitteeMember.count({where:r})}};function Jt(){return new qn(G)}function Ju(){return{createLegitimatorCommitteeMemberController:new Ao(Jt())}}function Yu(){return{findLegitimatorCommitteeMembersController:new Un(Jt())}}function Xu(){return{findLegitimatorCommitteeMemberByIdController:new Do(Jt())}}function $u(){return{updateLegitimatorCommitteeMemberController:new Uo(Jt())}}function Qu(){return{deleteLegitimatorCommitteeMemberController:new To(Jt())}}var St=Ib(),{authMiddleware:uc}=V();St.post("/",(o,e,r)=>{uc.authenticated(o,e,r)},async(o,e)=>{let{createLegitimatorCommitteeMemberController:r}=Ju();await r.handle(o,e)});St.get("/",async(o,e)=>{let{findLegitimatorCommitteeMembersController:r}=Yu();await r.handle(o,e)});St.get("/:id",async(o,e)=>{let{findLegitimatorCommitteeMemberByIdController:r}=Xu();await r.handle(o,e)});St.put("/:id",(o,e,r)=>{uc.authenticated(o,e,r)},async(o,e)=>{let{updateLegitimatorCommitteeMemberController:r}=$u();await r.handle(o,e)});St.delete("/:id",(o,e,r)=>{uc.authenticated(o,e,r)},async(o,e)=>{let{deleteLegitimatorCommitteeMemberController:r}=Qu();await r.handle(o,e)});import{Router as wb}from"express";import{extendZodWithOpenApi as Cb}from"@asteasolutions/zod-to-openapi";import Cr from"zod";Cb(Cr);var bb=Cr.object({name:Cr.string().optional(),description:Cr.string().optional(),orderBy:Cr.enum(["asc","desc"]).default("desc")}),Bn=class{constructor(e){this.managementTeamRepository=e}async handle(e,r){try{let t=bb.parse(e.query),i=await this.managementTeamRepository.find({filter:t});r.status(200).json({teams:i})}catch(t){if(t instanceof Error)throw new m(t.message)}}};var On=class{constructor(e){this.prisma=e}async create(e){let{members:r,...t}=e;await this.prisma.$transaction(async i=>{let n=await i.managementTeam.create({data:t});return await i.managementTeamMember.createMany({data:r.map(({userId:s,role:a,order:c})=>({teamId:n.id,userId:s,role:a,order:c??0}))}),n})}async update(e){let{members:r,...t}=e;await this.prisma.$transaction(async i=>{let n=await i.managementTeam.update({where:{id:e.id},data:t});return r!==void 0&&(await i.managementTeamMember.deleteMany({where:{teamId:e.id}}),r.length>0&&await i.managementTeamMember.createMany({data:r.map(({userId:s,role:a,order:c})=>({teamId:e.id,userId:s,role:a,order:c??0}))})),n})}async deleteById(e){await this.prisma.managementTeam.delete({where:{id:e}})}async find({filter:{name:e,description:r,orderBy:t}}){let i={},n=[];return e&&n.push({name:{contains:e,mode:"insensitive"}}),r&&n.push({description:{contains:r,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.managementTeam.findMany({where:i,include:{members:{include:{user:{omit:{passwordHash:!0}}},orderBy:{order:"asc"}}},orderBy:{updatedAt:t}})}async findById(e){return await this.prisma.managementTeam.findFirst({where:{id:e},include:{members:{include:{user:{omit:{passwordHash:!0}}},orderBy:{order:"asc"}}}})}async findByName(e){return await this.prisma.managementTeam.findFirst({where:{name:e},include:{members:{include:{user:{omit:{passwordHash:!0}}},orderBy:{order:"asc"}}}})}async count({filter:{name:e,description:r}}){let t={},i=[];return e&&i.push({name:{contains:e,mode:"insensitive"}}),r&&i.push({description:{contains:r,mode:"insensitive"}}),i.length>0&&(t.OR=i),await this.prisma.managementTeam.count({where:t})}};function Yt(){return new On(G)}function eg(){return{createManagementTeamController:new qo(Yt())}}function tg(){return{findManagementTeamsController:new Bn(Yt())}}function rg(){return{findManagementTeamByIdController:new Oo(Yt())}}function og(){return{updateManagementTeamController:new ko(Yt())}}function ig(){return{deleteManagementTeamController:new Bo(Yt())}}var vt=wb(),{authMiddleware:gc}=V();vt.post("/",(o,e,r)=>{gc.authenticated(o,e,r)},async(o,e)=>{let{createManagementTeamController:r}=eg();await r.handle(o,e)});vt.get("/",async(o,e)=>{let{findManagementTeamsController:r}=tg();await r.handle(o,e)});vt.get("/:id",async(o,e)=>{let{findManagementTeamByIdController:r}=rg();await r.handle(o,e)});vt.put("/:id",(o,e,r)=>{gc.authenticated(o,e,r)},async(o,e)=>{let{updateManagementTeamController:r}=og();await r.handle(o,e)});vt.delete("/:id",(o,e,r)=>{gc.authenticated(o,e,r)},async(o,e)=>{let{deleteManagementTeamController:r}=ig();await r.handle(o,e)});import{Router as Eb}from"express";var Nn=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.meeting.create({data:e})}async update(e){await this.prisma.meeting.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.meeting.delete({where:{id:e}})}async find({pagination:{offset:e,limit:r},filter:{title:t,format:i,status:n,orderBy:s}}){let a={},c=[];return i&&(a.format=i),n&&(a.status=n),t&&c.push({title:{contains:t,mode:"insensitive"}}),c.length>0&&(a.OR=c),await this.prisma.meeting.findMany({where:a,include:{minutes:!0},orderBy:s?{scheduledAt:s}:{scheduledAt:"desc"},skip:e,take:r})}async findById(e){return await this.prisma.meeting.findFirst({where:{id:e},include:{minutes:!0}})}async findByStatus(e){return await this.prisma.meeting.findMany({where:{status:e},include:{minutes:!0}})}async count({filter:{title:e,format:r,status:t}}){let i={},n=[];return r&&(i.format=r),t&&(i.status=t),e&&n.push({title:{contains:e,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.meeting.count({where:i})}};function ke(){return new Nn(G)}function ng(){return{createMeetingController:new Ho(ke())}}function sg(){return{findMeetingsController:new Jo(ke())}}function ag(){return{findMeetingByIdController:new Zo(ke())}}function mg(){return{findMeetingByStatusController:new Ko(ke())}}function cg(){return{updateMeetingController:new Yo(ke())}}function pg(){return{deleteMeetingController:new zo(ke())}}import{extendZodWithOpenApi as Sb}from"@asteasolutions/zod-to-openapi";import fc from"zod";Sb(fc);var vb=fc.object({meetingId:fc.uuid()}),kn=class{constructor(e,r){this.meetingMinuteRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{meetingId:t}=vb.parse({meetingId:e.params.meetingId}),i=await this.meetingMinuteRepository.findByMeetingId(t);if(!i)throw new p("A ata n\xE3o existe para esta reuni\xE3o.");return i.documentUrl&&await this.firebaseStorageService.deleteFile({fileUrl:i.documentUrl}),await this.meetingMinuteRepository.deleteByMeetingId(i.id),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var Gn=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.meetingMinute.create({data:e,include:{meeting:!0}})}async update(e){await this.prisma.meetingMinute.update({where:{id:e.id},data:e})}async deleteByMeetingId(e){await this.prisma.meetingMinute.delete({where:{id:e}})}async findByMeetingId(e){return await this.prisma.meetingMinute.findFirst({where:{meetingId:e},include:{meeting:!0}})}};function br(){return new Gn(G)}function dg(){return{createMeetingMinuteController:new Go(br(),ke(),q())}}function lg(){return{findMeetingMinuteByMeetingIdController:new Lo(br())}}function ug(){return{updateMeetingMinuteByMeetingIdController:new _o(br(),q())}}function gg(){return{deleteMeetingMinuteByMeetingIdController:new kn(br(),q())}}var he=Eb(),{authMiddleware:Xt}=V();he.post("/",(o,e,r)=>{Xt.authenticated(o,e,r)},async(o,e)=>{let{createMeetingController:r}=ng();await r.handle(o,e)});he.get("/",async(o,e)=>{let{findMeetingsController:r}=sg();await r.handle(o,e)});he.get("/:id",async(o,e)=>{let{findMeetingByIdController:r}=ag();await r.handle(o,e)});he.get("/status/:status",async(o,e)=>{let{findMeetingByStatusController:r}=mg();await r.handle(o,e)});he.put("/:id",(o,e,r)=>{Xt.authenticated(o,e,r)},async(o,e)=>{let{updateMeetingController:r}=cg();await r.handle(o,e)});he.delete("/:id",(o,e,r)=>{Xt.authenticated(o,e,r)},async(o,e)=>{let{deleteMeetingController:r}=pg();await r.handle(o,e)});he.post("/:meetingId/minute",(o,e,r)=>{Xt.authenticated(o,e,r)},L.single("document"),async(o,e)=>{let{createMeetingMinuteController:r}=dg();await r.handle(o,e)});he.get("/:meetingId/minute",async(o,e)=>{let{findMeetingMinuteByMeetingIdController:r}=lg();await r.handle(o,e)});he.put("/:meetingId/minute",(o,e,r)=>{Xt.authenticated(o,e,r)},L.single("document"),async(o,e)=>{let{updateMeetingMinuteByMeetingIdController:r}=ug();await r.handle(o,e)});he.delete("/:meetingId/minute",(o,e,r)=>{Xt.authenticated(o,e,r)},async(o,e)=>{let{deleteMeetingMinuteByMeetingIdController:r}=gg();await r.handle(o,e)});import{Router as Fb}from"express";import{extendZodWithOpenApi as jb}from"@asteasolutions/zod-to-openapi";import yc from"zod";jb(yc);var xb=yc.object({id:yc.string()}),Ln=class{constructor(e,r){this.newsRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=xb.parse(e.params),i=e.user.id,n=await this.newsRepository.findById(t);if(!n)throw new p("Not\xEDcia n\xE3o encontrada.");if(n.author.id!==i)throw new le("Sem permiss\xE3o.");await Promise.all([this.newsRepository.delete(t),this.firebaseStorageService.deleteFile({fileUrl:n.imageUrl})]),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as Pb}from"@asteasolutions/zod-to-openapi";import $t from"zod";var Mb=5,fg=1024,Ab=fg*fg,Tb=Mb*Ab;Pb($t);var Db=$t.object({id:$t.string(),title:$t.string().min(1),content:$t.string().min(1),image:$t.any().optional().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=Tb,"A imagem deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.")}),_n=class{constructor(e,r){this.newsRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,title:i,content:n,image:s}=Db.parse({id:e.params.id,image:e.file,...e.body}),a=await this.newsRepository.findById(t);if(!a)throw new p("Not\xEDcia n\xE3o encontrada.");let c=e.user.id;if(a.author.id!==c)throw new le("Sem permiss\xE3o.");let u=a.imageUrl||"";s&&a.imageUrl&&(u=await this.firebaseStorageService.updateFile({file:s,folder:M.NEWS,id:t,fileUrl:a.imageUrl}));let b=await this.newsRepository.update({id:t,title:i,content:n,imageUrl:u});r.status(200).json(b)}catch(t){if(t instanceof Error)throw new m(t.message)}}};function yg(){return{createNewsController:new Xo(qe(),q())}}function hg(){return{findAllNewsController:new ti(qe())}}function Rg(){return{findNewsByIdController:new ei(qe())}}function Ig(){return{findNewsByAuthorIdController:new $o(qe())}}function Cg(){return{updateNewsController:new _n(qe(),q())}}function bg(){return{deleteNewsController:new Ln(qe(),q())}}var at=Fb(),{authMiddleware:hc}=V();at.post("/",(o,e,r)=>{hc.authenticated(o,e,r)},L.single("image"),async(o,e)=>{let{createNewsController:r}=yg();await r.handle(o,e)});at.get("/",async(o,e)=>{let{findAllNewsController:r}=hg();await r.handle(o,e)});at.get("/:id",async(o,e)=>{let{findNewsByIdController:r}=Rg();await r.handle(o,e)});at.get("/author/:authorId",async(o,e)=>{let{findNewsByAuthorIdController:r}=Ig();await r.handle(o,e)});at.put("/:id",(o,e,r)=>{hc.authenticated(o,e,r)},L.single("image"),async(o,e)=>{let{updateNewsController:r}=Cg();await r.handle(o,e)});at.delete("/:id",(o,e,r)=>{hc.authenticated(o,e,r)},async(o,e)=>{let{deleteNewsController:r}=bg();await r.handle(o,e)});import{Router as Ub}from"express";var Wn=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.partner.create({data:e})}async update(e){await this.prisma.partner.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.partner.delete({where:{id:e}})}async find({pagination:e,filter:{name:r,description:t,category:i,isActive:n,orderBy:s}}){let a={},c=[];return n!==void 0&&(a.isActive=n),r&&c.push({name:{contains:r,mode:"insensitive"}}),t&&c.push({description:{contains:t,mode:"insensitive"}}),i&&c.push({category:{contains:i,mode:"insensitive"}}),c.length>0&&(a.OR=c),await this.prisma.partner.findMany({where:a,orderBy:s?{updatedAt:s}:{updatedAt:"desc"},...e&&{skip:e.offset,take:e.limit}})}async findById(e){return await this.prisma.partner.findFirst({where:{id:e}})}async count({filter:{name:e,description:r,category:t,isActive:i}}){let n={},s=[];return i!==void 0&&(n.isActive=i),e&&s.push({name:{contains:e,mode:"insensitive"}}),r&&s.push({description:{contains:r,mode:"insensitive"}}),t&&s.push({category:{contains:t,mode:"insensitive"}}),s.length>0&&(n.OR=s),await this.prisma.partner.count({where:n})}};function Qt(){return new Wn(G)}function wg(){return{createPartnerController:new ri(Qt(),q())}}function Sg(){return{findPartnersController:new si(Qt())}}function vg(){return{findPartnerByIdController:new ii(Qt())}}function Eg(){return{updatePartnerController:new ai(Qt(),q())}}function jg(){return{deletePartnerController:new oi(Qt(),q())}}var Et=Ub(),{authMiddleware:Rc}=V();Et.post("/",(o,e,r)=>{Rc.authenticated(o,e,r)},L.single("logo"),async(o,e)=>{let{createPartnerController:r}=wg();await r.handle(o,e)});Et.get("/",async(o,e)=>{let{findPartnersController:r}=Sg();await r.handle(o,e)});Et.get("/:id",async(o,e)=>{let{findPartnerByIdController:r}=vg();await r.handle(o,e)});Et.put("/:id",(o,e,r)=>{Rc.authenticated(o,e,r)},L.single("logo"),async(o,e)=>{let{updatePartnerController:r}=Eg();await r.handle(o,e)});Et.delete("/:id",(o,e,r)=>{Rc.authenticated(o,e,r)},async(o,e)=>{let{deletePartnerController:r}=jg();await r.handle(o,e)});import{Router as qb}from"express";function xg(){return{createPendencyController:new mi(ce(),nt(),q())}}function Pg(){return{findPendenciesController:new di(nt())}}function Mg(){return{findPendencyByIdController:new li(nt())}}function Ag(){return{updatePendencyController:new ui(nt(),q())}}function Tg(){return{deletePendencyController:new pi(nt(),q())}}var jt=qb(),{authMiddleware:wr}=V();jt.post("/:user_id",(o,e,r)=>{wr.isAdmin(o,e,r)},L.single("document"),async(o,e)=>{let{createPendencyController:r}=xg();await r.handle(o,e)});jt.get("/",(o,e,r)=>{wr.isAdmin(o,e,r)},async(o,e)=>{let{findPendenciesController:r}=Pg();await r.handle(o,e)});jt.get("/:pendency_id",(o,e,r)=>{wr.isAdmin(o,e,r)},async(o,e)=>{let{findPendencyByIdController:r}=Mg();await r.handle(o,e)});jt.put("/:pendency_id",(o,e,r)=>{wr.isAdmin(o,e,r)},L.single("document"),async(o,e)=>{let{updatePendencyController:r}=Ag();await r.handle(o,e)});jt.delete("/:pendency_id",(o,e,r)=>{wr.isAdmin(o,e,r)},async(o,e)=>{let{deletePendencyController:r}=Tg();await r.handle(o,e)});import{Router as Lb}from"express";import{extendZodWithOpenApi as Bb}from"@asteasolutions/zod-to-openapi";import Ge from"zod";var Ob=5,Dg=1024,Nb=Dg*Dg,kb=Ob*Nb;Bb(Ge);var Gb=Ge.object({title:Ge.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),description:Ge.string().optional(),startDate:Ge.coerce.date(),endDate:Ge.coerce.date(),contact:Ge.string().min(1,"Contato \xE9 obrigat\xF3rio."),registrationLink:Ge.url().optional(),image:Ge.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=kb,"A imagem deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.")}),Hn=class{constructor(e,r){this.postGraduateProgramRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{title:t,description:i,startDate:n,endDate:s,contact:a,registrationLink:c,image:u}=Gb.parse({...e.body,image:e.file}),b=await this.postGraduateProgramRepository.create({title:t,description:i,startDate:n,endDate:s,contact:a,registrationLink:c||void 0}),T=await this.firebaseStorageService.uploadFile({file:u,folder:M.POST_GRADUATE_PROGRAM,id:b.id});return await this.postGraduateProgramRepository.update({id:b.id,imageUrl:T}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var zn=class{constructor(e){this.prisma=e}async create({title:e,imageUrl:r,description:t,startDate:i,endDate:n,contact:s,registrationLink:a}){return await this.prisma.postGraduateProgram.create({data:{title:e,imageUrl:r,description:t,startDate:i,endDate:n,contact:s,registrationLink:a}})}async find({pagination:{offset:e,limit:r},filter:{description:t,orderBy:i,title:n,contact:s}}){let a={},c=[];return n&&c.push({title:{contains:n,mode:"insensitive"}}),t&&c.push({description:{contains:t,mode:"insensitive"}}),s&&c.push({contact:{contains:s,mode:"insensitive"}}),c.length>0&&(a.OR=c),await this.prisma.postGraduateProgram.findMany({where:a,orderBy:{updatedAt:i},skip:e,take:r})}async findById(e){return await this.prisma.postGraduateProgram.findFirst({where:{id:e}})}async update({id:e,title:r,imageUrl:t,description:i,startDate:n,endDate:s,contact:a,registrationLink:c}){await this.prisma.postGraduateProgram.update({where:{id:e},data:{title:r,imageUrl:t,description:i,startDate:n,endDate:s,contact:a,registrationLink:c}})}async deleteById(e){await this.prisma.postGraduateProgram.delete({where:{id:e}})}async count({filter:{description:e,title:r,contact:t}}){let i={},n=[];return r&&n.push({title:{contains:r,mode:"insensitive"}}),e&&n.push({description:{contains:e,mode:"insensitive"}}),t&&n.push({contact:{contains:t,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.postGraduateProgram.count({where:i})}};function er(){return new zn(G)}function Fg(){return{createPostGraduateProgramController:new Hn(er(),q())}}function Ug(){return{findPostGraduateProgramsController:new hi(er())}}function qg(){return{findPostGraduateProgramByIdController:new yi(er())}}function Bg(){return{updatePostGraduateProgramController:new Ri(er(),q())}}function Og(){return{deletePostGraduateProgramController:new fi(er(),q())}}var xt=Lb(),{authMiddleware:Sr}=V();xt.post("/",(o,e,r)=>{Sr.isAdmin(o,e,r)},L.single("image"),async(o,e)=>{let{createPostGraduateProgramController:r}=Fg();await r.handle(o,e)});xt.get("/",(o,e,r)=>{Sr.isAdmin(o,e,r)},async(o,e)=>{let{findPostGraduateProgramsController:r}=Ug();await r.handle(o,e)});xt.get("/:id",(o,e,r)=>{Sr.isAdmin(o,e,r)},async(o,e)=>{let{findPostGraduateProgramByIdController:r}=qg();await r.handle(o,e)});xt.put("/:id",(o,e,r)=>{Sr.isAdmin(o,e,r)},L.single("image"),async(o,e)=>{let{updatePostGraduateProgramController:r}=Bg();await r.handle(o,e)});xt.delete("/:id",(o,e,r)=>{Sr.isAdmin(o,e,r)},async(o,e)=>{let{deletePostGraduateProgramController:r}=Og();await r.handle(o,e)});import{Router as _b}from"express";var Zn=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.regiment.create({data:e})}async update(e){await this.prisma.regiment.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.regiment.delete({where:{id:e}})}async find({pagination:{offset:e,limit:r},filter:{title:t,status:i,orderBy:n}}){let s={},a=[];return i&&(s.status=i),t&&a.push({title:{contains:t,mode:"insensitive"}}),a.length>0&&(s.OR=a),await this.prisma.regiment.findMany({where:s,orderBy:n?{updatedAt:n}:{updatedAt:"desc"},skip:e,take:r})}async findById(e){return await this.prisma.regiment.findFirst({where:{id:e}})}async findByStatus(e){return await this.prisma.regiment.findMany({where:{status:e}})}async count({filter:{title:e,status:r}}){let t={},i=[];return r&&(t.status=r),e&&i.push({title:{contains:e,mode:"insensitive"}}),i.length>0&&(t.OR=i),await this.prisma.regiment.count({where:t})}};function Pt(){return new Zn(G)}function Ng(){return{createRegimentController:new Ii(Pt(),q())}}function kg(){return{findRegimentsController:new vi(Pt())}}function Gg(){return{findRegimentByIdController:new bi(Pt())}}function Lg(){return{findRegimentByStatusController:new Si(Pt())}}function _g(){return{updateRegimentController:new Ei(Pt(),q())}}function Wg(){return{deleteRegimentController:new Ci(Pt(),q())}}var mt=_b(),{authMiddleware:Ic}=V();mt.post("/",(o,e,r)=>{Ic.authenticated(o,e,r)},L.single("document"),async(o,e)=>{let{createRegimentController:r}=Ng();await r.handle(o,e)});mt.get("/",async(o,e)=>{let{findRegimentsController:r}=kg();await r.handle(o,e)});mt.get("/:id",async(o,e)=>{let{findRegimentByIdController:r}=Gg();await r.handle(o,e)});mt.get("/status/:status",async(o,e)=>{let{findRegimentByStatusController:r}=Lg();await r.handle(o,e)});mt.put("/:id",(o,e,r)=>{Ic.authenticated(o,e,r)},L.single("document"),async(o,e)=>{let{updateRegimentController:r}=_g();await r.handle(o,e)});mt.delete("/:id",(o,e,r)=>{Ic.authenticated(o,e,r)},async(o,e)=>{let{deleteRegimentController:r}=Wg();await r.handle(o,e)});import{Router as Vb}from"express";import{extendZodWithOpenApi as Wb}from"@asteasolutions/zod-to-openapi";import Cc from"zod";Wb(Cc);var Hb=Cc.object({id:Cc.string().uuid("ID inv\xE1lido")}),Vn=class{constructor(e){this.regionalCongressGalleryRepository=e}async handle(e,r){try{let{id:t}=Hb.parse(e.params),i=await this.regionalCongressGalleryRepository.findById(t);if(!i)throw new p("Item de galeria n\xE3o encontrado");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var Kn=class{constructor(e){this.prisma=e}async create(e){await this.prisma.regionalCongress.create({data:e})}async update(e){await this.prisma.regionalCongress.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.regionalCongress.delete({where:{id:e}})}async find({pagination:{offset:e,limit:r},filter:{title:t,edition:i,location:n,orderBy:s}}){let a={},c=[];return i&&c.push({edition:{equals:i}}),t&&c.push({title:{contains:t,mode:"insensitive"}}),n&&c.push({location:{contains:n,mode:"insensitive"}}),c.length>0&&(a.OR=c),await this.prisma.regionalCongress.findMany({where:a,include:{regionalCongressPartners:!0,regionalCongressGalleryItems:!0},orderBy:s?{startDate:s}:{startDate:"desc"},skip:e,take:r})}async findById(e){return await this.prisma.regionalCongress.findFirst({where:{id:e},include:{regionalCongressPartners:!0,regionalCongressGalleryItems:!0}})}async findByEdition(e){return await this.prisma.regionalCongress.findMany({where:{edition:e},include:{regionalCongressPartners:!0,regionalCongressGalleryItems:!0}})}async count({filter:{title:e,edition:r,location:t}}){let i={},n=[];return r&&n.push({edition:{equals:r}}),e&&n.push({title:{contains:e,mode:"insensitive"}}),t&&n.push({location:{contains:t,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.regionalCongress.count({where:i})}};function Se(){return new Kn(G)}var Jn=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.regionalCongressGalleryItem.create({data:e})}async update(e){await this.prisma.regionalCongressGalleryItem.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.regionalCongressGalleryItem.delete({where:{id:e}})}async findByCongressId({pagination:e,filter:r}){return await this.prisma.regionalCongressGalleryItem.findMany({where:{congressId:r.congressId,...r.caption&&{caption:{contains:r.caption,mode:"insensitive"}}},skip:e.offset,take:e.limit})}async findById(e){return await this.prisma.regionalCongressGalleryItem.findFirst({where:{id:e}})}async count({filter:e}){return await this.prisma.regionalCongressGalleryItem.count({where:{congressId:e.congressId,...e.caption&&{caption:{contains:e.caption,mode:"insensitive"}}}})}};function tr(){return new Jn(G)}function Hg(){return{createRegionalCongressGalleryController:new ji(tr(),Se(),q())}}function zg(){return{findRegionalCongressGalleriesByCongressIdController:new Mi(tr())}}function Zg(){return{findRegionalCongressGalleryByIdController:new Vn(tr())}}function Vg(){return{updateRegionalCongressGalleryController:new Ai(tr(),q())}}function Kg(){return{deleteRegionalCongressGalleryController:new xi(tr())}}import{extendZodWithOpenApi as zb}from"@asteasolutions/zod-to-openapi";import bc from"zod";zb(bc);var Zb=bc.object({id:bc.string().uuid("ID inv\xE1lido")}),Yn=class{constructor(e){this.regionalCongressPartnerRepository=e}async handle(e,r){try{let{id:t}=Zb.parse(e.params),i=await this.regionalCongressPartnerRepository.findById(t);if(!i)throw new p("Parceiro n\xE3o encontrado");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var Xn=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.regionalCongressPartner.create({data:e})}async update(e){await this.prisma.regionalCongressPartner.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.regionalCongressPartner.delete({where:{id:e}})}async findByCongressId(e){return await this.prisma.regionalCongressPartner.findMany({where:{congressId:e.filter.congressId,name:e.filter.name?{contains:e.filter.name,mode:"insensitive"}:void 0},skip:e.pagination?.offset,take:e.pagination?.limit})}async findById(e){return await this.prisma.regionalCongressPartner.findFirst({where:{id:e}})}async count(e){return await this.prisma.regionalCongressPartner.count({where:{congressId:e.filter.congressId,name:e.filter.name?{contains:e.filter.name,mode:"insensitive"}:void 0}})}};function rr(){return new Xn(G)}function Jg(){return{createRegionalCongressPartnerController:new Ti(rr(),Se(),q())}}function Yg(){return{findRegionalCongressPartnersByCongressIdController:new Ui(rr())}}function Xg(){return{findRegionalCongressPartnerByIdController:new Yn(rr())}}function $g(){return{updateRegionalCongressPartnerController:new qi(rr(),q())}}function Qg(){return{deleteRegionalCongressPartnerController:new Di(rr())}}function ef(){return{createRegionalCongressController:new Bi(Se())}}function tf(){return{findRegionalCongressesController:new Li(Se())}}function rf(){return{findRegionalCongressByIdController:new ki(Se())}}function of(){return{findRegionalCongressByEditionController:new Ni(Se())}}function nf(){return{updateRegionalCongressController:new _i(Se())}}function sf(){return{deleteRegionalCongressController:new Oi(Se())}}var re=Vb(),{authMiddleware:Le}=V();re.post("/",(o,e,r)=>{Le.authenticated(o,e,r)},async(o,e)=>{let{createRegionalCongressController:r}=ef();await r.handle(o,e)});re.get("/",async(o,e)=>{let{findRegionalCongressesController:r}=tf();await r.handle(o,e)});re.get("/:id",async(o,e)=>{let{findRegionalCongressByIdController:r}=rf();await r.handle(o,e)});re.get("/edition/:edition",async(o,e)=>{let{findRegionalCongressByEditionController:r}=of();await r.handle(o,e)});re.put("/:id",(o,e,r)=>{Le.authenticated(o,e,r)},async(o,e)=>{let{updateRegionalCongressController:r}=nf();await r.handle(o,e)});re.delete("/:id",(o,e,r)=>{Le.authenticated(o,e,r)},async(o,e)=>{let{deleteRegionalCongressController:r}=sf();await r.handle(o,e)});re.post("/:congressId/gallery",(o,e,r)=>{Le.authenticated(o,e,r)},L.single("image"),async(o,e)=>{let{createRegionalCongressGalleryController:r}=Hg();await r.handle(o,e)});re.get("/:congressId/gallery",async(o,e)=>{let{findRegionalCongressGalleriesByCongressIdController:r}=zg();await r.handle(o,e)});re.get("/gallery/:id",async(o,e)=>{let{findRegionalCongressGalleryByIdController:r}=Zg();await r.handle(o,e)});re.put("/gallery/:id",(o,e,r)=>{Le.authenticated(o,e,r)},L.single("image"),async(o,e)=>{let{updateRegionalCongressGalleryController:r}=Vg();await r.handle(o,e)});re.delete("/gallery/:id",(o,e,r)=>{Le.authenticated(o,e,r)},async(o,e)=>{let{deleteRegionalCongressGalleryController:r}=Kg();await r.handle(o,e)});re.post("/:congressId/partner",(o,e,r)=>{Le.authenticated(o,e,r)},L.single("logo"),async(o,e)=>{let{createRegionalCongressPartnerController:r}=Jg();await r.handle(o,e)});re.get("/:congressId/partner",async(o,e)=>{let{findRegionalCongressPartnersByCongressIdController:r}=Yg();await r.handle(o,e)});re.get("/partner/:id",async(o,e)=>{let{findRegionalCongressPartnerByIdController:r}=Xg();await r.handle(o,e)});re.put("/partner/:id",(o,e,r)=>{Le.authenticated(o,e,r)},L.single("logo"),async(o,e)=>{let{updateRegionalCongressPartnerController:r}=$g();await r.handle(o,e)});re.delete("/partner/:id",(o,e,r)=>{Le.authenticated(o,e,r)},async(o,e)=>{let{deleteRegionalCongressPartnerController:r}=Qg();await r.handle(o,e)});import{Router as $b}from"express";import{extendZodWithOpenApi as Kb}from"@asteasolutions/zod-to-openapi";import ae from"zod";var Jb=1,Yb=9;Kb(ae);var Xb=ae.object({page:ae.coerce.number().min(1).default(Jb),limit:ae.coerce.number().min(1).default(Yb),userId:ae.string().optional(),registrationNumber:ae.string().optional(),name:ae.string().optional(),emailAddress:ae.string().optional(),mainEtps:ae.string().optional(),formations:ae.string().optional(),occupations:ae.string().optional(),institutions:ae.string().optional(),biography:ae.string().optional(),orderBy:ae.enum(["asc","desc"]).default("desc")}),$n=class{constructor(e){this.researcherRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=Xb.parse(e.query),s=i*t-i,[a,c]=await Promise.all([this.researcherRepository.find({pagination:{offset:s,limit:i},filter:{userName:n.name,...n}}),this.researcherRepository.count({filter:{userName:n.name,...n}})]),u=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:u,offset:s,limit:i,researchers:a})}catch(t){if(t instanceof Error)throw new m(t.message)}}};var Qn=class{constructor(e){this.prisma=e}async create(e){await this.prisma.researcher.create({data:e})}async update(e){await this.prisma.researcher.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.researcher.delete({where:{id:e}})}async find({pagination:e,filter:{biography:r,degrees:t,formations:i,institutions:n,mainEtps:s,occupations:a,orderBy:c,registrationNumber:u,seniority:b,userId:T,userName:Z}}){let X={},ie=[];return Z&&ie.push({user:{name:{contains:Z,mode:"insensitive"}}}),u&&ie.push({registrationNumber:{contains:u,mode:"insensitive"}}),s&&ie.push({mainEtps:{contains:s,mode:"insensitive"}}),i&&ie.push({formations:{contains:i,mode:"insensitive"}}),a&&ie.push({occupations:{contains:a,mode:"insensitive"}}),n&&ie.push({institutions:{contains:n,mode:"insensitive"}}),r&&ie.push({biography:{contains:r,mode:"insensitive"}}),ie.length>0&&(X.OR=ie),t&&t.length>0&&(X.degrees={hasSome:t}),b&&(X.seniority=b),T&&(X.userId={equals:T}),await this.prisma.researcher.findMany({where:X,omit:{userId:!0},include:{user:{omit:{passwordHash:!0}}},orderBy:{updatedAt:c},...e&&{skip:e.offset,take:e.limit}})}async findById(e){return await this.prisma.researcher.findFirst({where:{id:e},include:{user:{omit:{passwordHash:!0}}}})}async findByUserId(e){return await this.prisma.researcher.findFirst({where:{userId:e},include:{user:{omit:{passwordHash:!0}}}})}async findByRegistrationNumber(e){return await this.prisma.researcher.findFirst({where:{registrationNumber:e},include:{user:{omit:{passwordHash:!0}}}})}async count({filter:{biography:e,degrees:r,formations:t,institutions:i,mainEtps:n,occupations:s,registrationNumber:a,seniority:c,userId:u,userName:b}}){let T={},Z=[];return b&&Z.push({user:{name:{contains:b,mode:"insensitive"}}}),a&&Z.push({registrationNumber:{contains:a,mode:"insensitive"}}),Z.length>0&&(T.OR=Z),n&&(T.mainEtps={contains:n,mode:"insensitive"}),t&&(T.formations={contains:t,mode:"insensitive"}),r&&r.length>0&&(T.degrees={hasSome:r}),s&&(T.occupations={contains:s,mode:"insensitive"}),c&&(T.seniority=c),i&&(T.institutions={contains:i,mode:"insensitive"}),e&&(T.biography={contains:e,mode:"insensitive"}),u&&(T.userId={equals:u}),await this.prisma.researcher.count({where:T})}};function Mt(){return new Qn(G)}function af(){return{createResearcherController:new Wi(Mt())}}function mf(){return{findResearchersController:new $n(Mt())}}function cf(){return{findResearcherByIdController:new zi(Mt())}}function pf(){return{findResearcherByUserIdController:new Vi(Mt())}}function df(){return{updateResearcherController:new Ki(Mt())}}function lf(){return{deleteResearcherController:new Hi(Mt())}}var ct=$b(),{authMiddleware:wc}=V();ct.post("/",(o,e,r)=>{wc.authenticated(o,e,r)},async(o,e)=>{let{createResearcherController:r}=af();await r.handle(o,e)});ct.get("/",async(o,e)=>{let{findResearchersController:r}=mf();await r.handle(o,e)});ct.get("/:id",async(o,e)=>{let{findResearcherByIdController:r}=cf();await r.handle(o,e)});ct.get("/user/:userId",async(o,e)=>{let{findResearcherByUserIdController:r}=pf();await r.handle(o,e)});ct.put("/:id",(o,e,r)=>{wc.authenticated(o,e,r)},async(o,e)=>{let{updateResearcherController:r}=df();await r.handle(o,e)});ct.delete("/:id",(o,e,r)=>{wc.authenticated(o,e,r)},async(o,e)=>{let{deleteResearcherController:r}=lf();await r.handle(o,e)});import{Router as iw}from"express";import{extendZodWithOpenApi as Qb}from"@asteasolutions/zod-to-openapi";import _e from"zod";var ew=5,uf=1024,tw=uf*uf,rw=ew*tw;Qb(_e);var ow=_e.object({name:_e.string().min(1,"Nome \xE9 obrigat\xF3rio."),issn:_e.string().min(1,"ISSN \xE9 obrigat\xF3rio."),description:_e.string().min(1,"Descri\xE7\xE3o \xE9 obrigat\xF3ria."),journalUrl:_e.url("URL da revista deve ser v\xE1lida."),directors:_e.string().optional(),editorialBoard:_e.string().optional(),logo:_e.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=rw,"O logo deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.").optional()}),es=class{constructor(e,r){this.scientificJournalRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{name:t,issn:i,description:n,journalUrl:s,directors:a,editorialBoard:c,logo:u}=ow.parse({...e.body,logo:e.file}),b=await this.scientificJournalRepository.create({name:t,issn:i,description:n,journalUrl:s,directors:a,editorialBoard:c});if(u){let T=await this.firebaseStorageService.uploadFile({file:u,folder:M.SCIENTIFIC_JOURNAL,id:b.id});await this.scientificJournalRepository.update({id:b.id,logoUrl:T})}return r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var ts=class{constructor(e){this.prisma=e}async create({name:e,issn:r,description:t,logoUrl:i,journalUrl:n,directors:s,editorialBoard:a}){return await this.prisma.scientificJournal.create({data:{name:e,issn:r,description:t,logoUrl:i,journalUrl:n,directors:s,editorialBoard:a}})}async find({pagination:{offset:e,limit:r},filter:{name:t,description:i,issn:n,directors:s,editorialBoard:a,orderBy:c}}){let u={},b=[];return t&&b.push({name:{contains:t,mode:"insensitive"}}),i&&b.push({description:{contains:i,mode:"insensitive"}}),n&&b.push({issn:{contains:n,mode:"insensitive"}}),s&&b.push({directors:{contains:s,mode:"insensitive"}}),a&&b.push({editorialBoard:{contains:a,mode:"insensitive"}}),b.length>0&&(u.OR=b),await this.prisma.scientificJournal.findMany({where:u,orderBy:{updatedAt:c},skip:e,take:r})}async findById(e){return await this.prisma.scientificJournal.findFirst({where:{id:e}})}async update({id:e,name:r,issn:t,description:i,logoUrl:n,journalUrl:s,directors:a,editorialBoard:c}){await this.prisma.scientificJournal.update({where:{id:e},data:{name:r,issn:t,description:i,logoUrl:n,journalUrl:s,directors:a,editorialBoard:c}})}async deleteById(e){await this.prisma.scientificJournal.delete({where:{id:e}})}async count({filter:{name:e,description:r,issn:t,directors:i,editorialBoard:n}}){let s={},a=[];return e&&a.push({name:{contains:e,mode:"insensitive"}}),r&&a.push({description:{contains:r,mode:"insensitive"}}),t&&a.push({issn:{contains:t,mode:"insensitive"}}),i&&a.push({directors:{contains:i,mode:"insensitive"}}),n&&a.push({editorialBoard:{contains:n,mode:"insensitive"}}),a.length>0&&(s.OR=a),await this.prisma.scientificJournal.count({where:s})}};function or(){return new ts(G)}function gf(){return{createScientificJournalController:new es(or(),q())}}function ff(){return{findScientificJournalsController:new Xi(or())}}function yf(){return{findScientificJournalByIdController:new Yi(or())}}function hf(){return{updateScientificJournalController:new $i(or(),q())}}function Rf(){return{deleteScientificJournalController:new Ji(or(),q())}}var At=iw(),{authMiddleware:vr}=V();At.post("/",(o,e,r)=>{vr.isAdmin(o,e,r)},L.single("logo"),async(o,e)=>{let{createScientificJournalController:r}=gf();await r.handle(o,e)});At.get("/",(o,e,r)=>{vr.isAdmin(o,e,r)},async(o,e)=>{let{findScientificJournalsController:r}=ff();await r.handle(o,e)});At.get("/:id",(o,e,r)=>{vr.isAdmin(o,e,r)},async(o,e)=>{let{findScientificJournalByIdController:r}=yf();await r.handle(o,e)});At.put("/:id",(o,e,r)=>{vr.isAdmin(o,e,r)},L.single("logo"),async(o,e)=>{let{updateScientificJournalController:r}=hf();await r.handle(o,e)});At.delete("/:id",(o,e,r)=>{vr.isAdmin(o,e,r)},async(o,e)=>{let{deleteScientificJournalController:r}=Rf();await r.handle(o,e)});import{Router as aw}from"express";import{extendZodWithOpenApi as nw}from"@asteasolutions/zod-to-openapi";import rs from"zod";nw(rs);var sw=rs.object({role:rs.string().optional(),orderBy:rs.enum(["asc","desc"]).optional()}),os=class{constructor(e){this.sdhcTeamMemberRepository=e}async handle(e,r){try{let t=sw.parse(e.query),i=await this.sdhcTeamMemberRepository.find({filter:t});r.status(200).json({members:i})}catch(t){if(t instanceof Error)throw new m(t.message)}}};var is=class{constructor(e){this.prisma=e}async create(e){await this.prisma.sDHCTeamMember.create({data:{...e,order:e.order??0}})}async update(e){let{id:r,...t}=e;await this.prisma.sDHCTeamMember.update({where:{id:r},data:t})}async deleteById(e){await this.prisma.sDHCTeamMember.delete({where:{id:e}})}async find({filter:{role:e,orderBy:r}}){let t={};return e&&(t.role={contains:e,mode:"insensitive"}),await this.prisma.sDHCTeamMember.findMany({where:t,include:{user:{omit:{passwordHash:!0}}},orderBy:r?[{order:"asc"},{updatedAt:r}]:[{order:"asc"},{updatedAt:"desc"}]})}async findById(e){return await this.prisma.sDHCTeamMember.findFirst({where:{id:e},include:{user:{omit:{passwordHash:!0}}}})}async count({filter:{role:e}}){let r={};return e&&(r.role={contains:e,mode:"insensitive"}),await this.prisma.sDHCTeamMember.count({where:r})}};function ir(){return new is(G)}function If(){return{createSDHCTeamMemberController:new Qi(ir())}}function Cf(){return{findSDHCTeamMembersController:new os(ir())}}function bf(){return{findSDHCTeamMemberByIdController:new tn(ir())}}function wf(){return{updateSDHCTeamMemberController:new on(ir())}}function Sf(){return{deleteSDHCTeamMemberController:new en(ir())}}var Tt=aw(),{authMiddleware:Sc}=V();Tt.post("/",(o,e,r)=>{Sc.authenticated(o,e,r)},async(o,e)=>{let{createSDHCTeamMemberController:r}=If();await r.handle(o,e)});Tt.get("/",async(o,e)=>{let{findSDHCTeamMembersController:r}=Cf();await r.handle(o,e)});Tt.get("/:id",async(o,e)=>{let{findSDHCTeamMemberByIdController:r}=bf();await r.handle(o,e)});Tt.put("/:id",(o,e,r)=>{Sc.authenticated(o,e,r)},async(o,e)=>{let{updateSDHCTeamMemberController:r}=wf();await r.handle(o,e)});Tt.delete("/:id",(o,e,r)=>{Sc.authenticated(o,e,r)},async(o,e)=>{let{deleteSDHCTeamMemberController:r}=Sf();await r.handle(o,e)});import{Router as mw}from"express";var ns=class{constructor(e){this.userRepository=e}async handle(e,r){try{let t=await this.userRepository.find();r.status(200).json(t)}catch(t){if(t instanceof Error)throw new m(t.message)}}};function vf(){return{updateUserController:new an(ce(),q())}}function Ef(){return{deleteUserController:new nn(ce())}}function jf(){return{findUsersController:new ns(ce())}}function xf(){return{findUserController:new sn(ce())}}var nr=mw(),{authMiddleware:Pf}=V();nr.get("/:id",async(o,e)=>{let{findUserController:r}=xf();await r.handle(o,e)});nr.put("/",(o,e,r)=>{Pf.authenticated(o,e,r)},L.single("avatarImage"),async(o,e)=>{let{updateUserController:r}=vf();await r.handle(o,e)});nr.delete("/:id",(o,e,r)=>{Pf.authenticated(o,e,r)},async(o,e)=>{let{deleteUserController:r}=Ef();await r.handle(o,e)});nr.get("/",async(o,e)=>{let{findUsersController:r}=jf();await r.handle(o,e)});import{Router as gw}from"express";import{extendZodWithOpenApi as cw}from"@asteasolutions/zod-to-openapi";import Ae from"zod";var pw=5,Mf=1024,dw=Mf*Mf,lw=pw*dw;cw(Ae);var uw=Ae.object({title:Ae.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),description:Ae.string().optional(),scheduledAt:Ae.coerce.date(),webinarLink:Ae.url().optional(),guestIds:Ae.transform(o=>typeof o=="string"?o.split(","):o).pipe(Ae.array(Ae.uuid())),thumbnail:Ae.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=lw,"A thumbnail deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.")}),ss=class{constructor(e,r){this.webinarRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{title:t,description:i,scheduledAt:n,webinarLink:s,guestIds:a,thumbnail:c}=uw.parse({...e.body,thumbnail:e.file}),u=await this.webinarRepository.create({title:t,description:i,scheduledAt:n,webinarLink:s||void 0,guestIds:a}),b=await this.firebaseStorageService.uploadFile({file:c,folder:M.WEBINAR,id:u.id});return await this.webinarRepository.update({id:u.id,thumbnailUrl:b}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var as=class{constructor(e){this.prisma=e}async create({title:e,description:r,scheduledAt:t,webinarLink:i,thumbnailUrl:n,guestIds:s}){return await this.prisma.webinar.create({data:{title:e,description:r,scheduledAt:t,webinarLink:i,thumbnailUrl:n,guests:s?{connect:s.map(a=>({id:a}))}:void 0}})}async find({pagination:{offset:e,limit:r},filter:{description:t,orderBy:i,title:n}}){let s={},a=[];return n&&a.push({title:{contains:n,mode:"insensitive"}}),t&&a.push({description:{contains:t,mode:"insensitive"}}),a.length>0&&(s.OR=a),await this.prisma.webinar.findMany({where:s,include:{guests:{omit:{passwordHash:!0}}},orderBy:{updatedAt:i},skip:e,take:r})}async findById(e){return await this.prisma.webinar.findFirst({where:{id:e},include:{guests:{omit:{passwordHash:!0}}}})}async update({id:e,title:r,description:t,scheduledAt:i,webinarLink:n,thumbnailUrl:s,guestIds:a}){await this.prisma.webinar.update({where:{id:e},data:{title:r,description:t,scheduledAt:i,webinarLink:n,thumbnailUrl:s,guests:a?{connect:a.map(c=>({id:c}))}:void 0}})}async deleteById(e){await this.prisma.webinar.delete({where:{id:e}})}async count({filter:{description:e,title:r}}){let t={},i=[];return r&&i.push({title:{contains:r,mode:"insensitive"}}),e&&i.push({description:{contains:e,mode:"insensitive"}}),i.length>0&&(t.OR=i),await this.prisma.webinar.count({where:t})}};function sr(){return new as(G)}function Af(){return{createWebinarController:new ss(sr(),q())}}function Tf(){return{findWebinarsController:new pn(sr())}}function Df(){return{findWebinarByIdController:new cn(sr())}}function Ff(){return{updateWebinarController:new dn(sr(),q())}}function Uf(){return{deleteWebinarController:new mn(sr(),q())}}var Dt=gw(),{authMiddleware:Er}=V();Dt.post("/",(o,e,r)=>{Er.isAdmin(o,e,r)},L.single("thumbnail"),async(o,e)=>{let{createWebinarController:r}=Af();await r.handle(o,e)});Dt.get("/",(o,e,r)=>{Er.isAdmin(o,e,r)},async(o,e)=>{let{findWebinarsController:r}=Tf();await r.handle(o,e)});Dt.get("/:id",(o,e,r)=>{Er.isAdmin(o,e,r)},async(o,e)=>{let{findWebinarByIdController:r}=Df();await r.handle(o,e)});Dt.put("/:id",(o,e,r)=>{Er.isAdmin(o,e,r)},L.single("thumbnail"),async(o,e)=>{let{updateWebinarController:r}=Ff();await r.handle(o,e)});Dt.delete("/:id",(o,e,r)=>{Er.isAdmin(o,e,r)},async(o,e)=>{let{deleteWebinarController:r}=Uf();await r.handle(o,e)});var J=vc(),hw={methods:["GET","POST","PUT","DELETE"],origin:["http://localhost:3000","https://rede-ct.vercel.app"],credentials:!0};J.use(yw(hw));J.use(vc.json());J.use(vc.urlencoded({extended:!1}));J.use("/docs",fw({content:Jl,theme:"kepler"}));J.use("/",pc);J.use("/auth",Be);J.use("/user",nr);J.use("/news",at);J.use("/certification",Rt);J.use("/pendency",jt);J.use("/researcher",ct);J.use("/in-memoriam",st);J.use("/etp",Ct);J.use("/partner",Et);J.use("/management-team",vt);J.use("/sdhc-team-member",Tt);J.use("/legitimator-committee-member",St);J.use("/regiment",mt);J.use("/meeting",he);J.use("/international-scientific-congress",te);J.use("/regional-congress",re);J.use("/webinars",Dt);J.use("/courses",It);J.use("/post-graduate-programs",xt);J.use("/event",bt);J.use("/scientific-journals",At);J.use((o,e,r,t)=>{let{errorHandler:i}=Ec();i.handle(o,e,r,t)});var Iw=Rw.createServer(J),qf=4e3;Iw.listen(qf,()=>{console.log(`\u{1F680} Aplica\xE7\xE3o rodando na porta ${qf}.`)});

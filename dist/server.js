import xE from"node:http";import{apiReference as vE}from"@scalar/express-api-reference";import EE from"cors";import Qp from"express";import oR from"zod";var de=class extends Error{};var ne=class extends Error{};var a=class extends Error{};var p=class extends Error{};var Ie=class extends Error{};import{ZodError as rR}from"zod";var to=class extends rR{};var ro=class{handle(e,r,t,i){return e instanceof to?t.status(400).json({message:"Validation error",error:oR.treeifyError(e)}):e instanceof de?t.status(400).json({message:e.message}):e instanceof p?t.status(404).json({message:e.message}):e instanceof Ie?t.status(401).json({message:e.message}):e instanceof ne?t.status(409).json({message:e.message}):e instanceof a?t.status(500).json({message:e.message}):t.status(500).json({message:"Internal server error"})}};function ed(){return{errorHandler:new ro}}import{OpenAPIRegistry as xw,OpenApiGeneratorV3 as Mw}from"@asteasolutions/zod-to-openapi";import{$Enums as td}from"@prisma/client";import I from"zod";import{extendZodWithOpenApi as iR}from"@asteasolutions/zod-to-openapi";import St from"zod";var nR=1,sR=6;iR(St);var da=St.object({page:St.coerce.number().min(1).default(nR),limit:St.coerce.number().min(1).default(sR),title:St.string().optional(),description:St.string().optional(),orderBy:St.enum(["asc","desc"]).default("desc")}),oo=class{constructor(e){this.certificationRepository=e}async handle(e,r){try{let{title:t,description:i,limit:n,orderBy:s,page:m}=da.parse(e.query),c=m*n-n,d=e.user.id,[h,j]=await Promise.all([this.certificationRepository.findByUserId({userId:d,pagination:{offset:c,limit:n},filter:{title:t,description:i,orderBy:s}}),this.certificationRepository.count({filter:{title:t,description:i,userId:d}})]),q=Math.max(Math.ceil(j/n),1);return r.status(200).json({page:m,totalPages:q,offset:c,limit:n,totalCertifications:j,certifications:h})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as aR}from"@asteasolutions/zod-to-openapi";import wt from"zod";var mR=1,cR=7;aR(wt);var la=wt.object({page:wt.coerce.number().min(1).default(mR),limit:wt.coerce.number().min(1).default(cR),title:wt.string().optional(),content:wt.string().optional(),orderBy:wt.enum(["asc","desc"]).default("desc")}),io=class{constructor(e){this.newsRepository=e}async handle(e,r){try{let{page:t,limit:i,content:n,orderBy:s,title:m}=la.parse(e.query),c=i*t-i,d=e.user.id,[h,j]=await Promise.all([this.newsRepository.findByAuthorId({authorId:d,pagination:{offset:c,limit:i},filter:{orderBy:s,title:m,content:n}}),this.newsRepository.count({filter:{authorId:d,content:n,title:m}})]),q=Math.ceil(j/i);r.status(200).json({page:t,totalPages:q,offset:c,limit:i,news:h})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as pR}from"@asteasolutions/zod-to-openapi";import{PendencyStatus as dR}from"@prisma/client";import Qe from"zod";var lR=1,uR=6;pR(Qe);var ua=Qe.object({page:Qe.coerce.number().min(1).default(lR),limit:Qe.coerce.number().min(1).default(uR),title:Qe.string().optional(),description:Qe.string().optional(),status:Qe.enum(dR).default("PENDING"),orderBy:Qe.enum(["asc","desc"]).default("desc")}),no=class{constructor(e){this.pendencyRepository=e}async handle(e,r){try{let{limit:t,page:i,...n}=ua.parse(e.query),s=i*t-t,m=e.user.id,[c,d]=await Promise.all([this.pendencyRepository.findByUserId({userId:m,pagination:{offset:s,limit:t},filter:n}),this.pendencyRepository.count({filter:{...n,userId:m}})]),h=Math.max(Math.ceil(d/t),1);return r.status(200).json({page:i,totalPages:h,offset:s,limit:t,pendencies:c})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as gR}from"@asteasolutions/zod-to-openapi";import so from"zod";gR(so);var ga=so.object({password:so.string(),email:so.email()}),ao=class{constructor(e,r,t){this.userRepository=e;this.bcrypt=r;this.jwtService=t}async handle(e,r){try{let{email:t,password:i}=ga.parse(e.body),n=await this.userRepository.findByEmail(t);if(!n)return r.status(401).json({message:"Usu\xE1rio n\xE3o existe."});if(!await this.bcrypt.compare({password:i,hashedPassword:n.passwordHash}))throw new Ie("Senha inv\xE1lida.");let{id:m,role:c}=n,d=this.jwtService.sign({id:m,role:c,email:t});return r.status(200).json({token:d})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as fR}from"@asteasolutions/zod-to-openapi";import Jt from"zod";var mo=8;fR(Jt);var fa=Jt.object({name:Jt.string("Nome \xE9 obrigat\xF3rio.").min(1,"Nome \xE9 obrigat\xF3rio."),emailAddress:Jt.email("E-mail inv\xE1lido.").min(1,"E-mail \xE9 obrigat\xF3rio."),password:Jt.string("A senha \xE9 obrigat\xF3ria.").min(mo,`A senha deve ter pelo menos ${mo} caracteres.`),confirmPassword:Jt.string("A senha \xE9 obrigat\xF3ria.").min(mo,`A senha deve ter pelo menos ${mo} caracteres.`)}).refine(o=>o.password===o.confirmPassword,{message:"As senhas n\xE3o coincidem.",path:["confirmPassword"]}),co=class{constructor(e,r){this.userRepository=e;this.bcrypt=r}async handle(e,r){try{let{emailAddress:t,name:i,password:n}=fa.parse(e.body);if(await this.userRepository.findByEmail(t))throw new ne("Usu\xE1rio j\xE1 existe.");let m=await this.bcrypt.hash(n);return await this.userRepository.create({name:i,emailAddress:t,passwordHash:m}),r.status(201).json()}catch(t){if(t instanceof Error)throw new a(t.message)}}};var rd={method:"post",path:"/auth/sign-up",tags:["Authentication"],summary:"Create a new user",request:{body:{content:{"application/json":{schema:fa}}}},responses:{201:{description:"User created successfully",summary:"User Registration Successful",content:{"application/json":{schema:I.object({message:I.string()})}}},400:{description:"Invalid input data provided",summary:"Validation Error",content:{"application/json":{schema:I.object({errors:I.record(I.string(),I.string())})}}},409:{description:"User already exists with this email",summary:"User Already Exists",content:{"application/json":{schema:I.object({message:I.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:I.object({message:I.string()})}}}}},od={method:"post",path:"/auth/sign-in",tags:["Authentication"],summary:"Sign in",request:{body:{content:{"application/json":{schema:ga}}}},responses:{200:{description:"Authentication successful, JWT token returned",summary:"Login Successful",content:{"application/json":{schema:I.object({token:I.string()})}}},400:{description:"Invalid credentials or input data",summary:"Validation Error",content:{"application/json":{schema:I.object({errors:I.record(I.string(),I.string())})}}},401:{description:"Invalid email or password",summary:"Authentication Failed",content:{"application/json":{schema:I.object({message:I.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:I.object({message:I.string()})}}}}},id={method:"get",path:"/auth/user",tags:["Authentication"],summary:"Search for authenticated user",security:[{bearerAuth:[]}],responses:{200:{description:"Authenticated user information retrieved successfully",summary:"User Information Retrieved",content:{"application/json":{schema:I.object({name:I.string(),id:I.string(),avatarUrl:I.string().nullable(),createdAt:I.date(),updatedAt:I.date(),emailAddress:I.string(),orcid:I.string().nullable(),phone:I.string().nullable(),lattesUrl:I.string().nullable(),role:I.enum(td.UserRole)}).nullable()}}},400:{description:"Invalid request parameters",summary:"Validation Error",content:{"application/json":{schema:I.object({errors:I.record(I.string(),I.string())})}}},404:{description:"User not found or not authenticated",summary:"User Not Found",content:{"application/json":{schema:I.object({message:I.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:I.object({message:I.string()})}}}}},nd={method:"get",path:"/auth/user/news",tags:["Authentication"],summary:"List authenticated user news",security:[{bearerAuth:[]}],request:{query:la},responses:{200:{description:"Paginated list of authenticated user news retrieved successfully",summary:"User News Retrieved",content:{"application/json":{schema:I.object({page:I.number(),totalPages:I.number(),offset:I.number(),limit:I.number(),news:I.object({content:I.string(),id:I.string(),title:I.string(),createdAt:I.date(),updatedAt:I.date(),imageUrl:I.string().nullable()})})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:I.object({errors:I.record(I.string(),I.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:I.object({message:I.string()})}}}}},sd={method:"get",path:"/auth/admin",tags:["Authentication"],summary:"Verify admin access",security:[{bearerAuth:[]}],responses:{200:{description:"Admin access verified successfully",summary:"Admin Access Granted",content:{"application/json":{schema:I.object({success:I.boolean()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:I.object({message:I.string()})}}}}},ad={method:"get",path:"/auth/certifications",tags:["Authentication"],summary:"List all authenticated user's certifications",security:[{bearerAuth:[]}],request:{query:da},responses:{200:{description:"Paginated list of authenticated user certifications retrieved successfully",summary:"User Certifications Retrieved",content:{"application/json":{schema:I.object({page:I.number(),totalPages:I.number(),offset:I.number(),limit:I.number(),certifications:I.object({description:I.string(),id:I.string(),title:I.string(),certificationUrl:I.string(),createdAt:I.date(),updatedAt:I.date(),userId:I.string()})})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:I.object({errors:I.record(I.string(),I.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:I.object({message:I.string()})}}}}},md={method:"get",path:"/auth/pendencies",tags:["Authentication"],summary:"List all authenticated user's pendencies",security:[{bearerAuth:[]}],request:{query:ua},responses:{200:{description:"Paginated list of authenticated user pendencies retrieved successfully",summary:"User Pendencies Retrieved",content:{"application/json":{schema:I.object({page:I.number(),totalPages:I.number(),offset:I.number(),limit:I.number(),pendencies:I.object({id:I.string(),title:I.string(),description:I.string(),status:I.enum(td.PendencyStatus),createdAt:I.date(),updatedAt:I.date(),userId:I.string()})})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:I.object({errors:I.record(I.string(),I.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:I.object({message:I.string()})}}}}};import w from"zod";import{extendZodWithOpenApi as yR}from"@asteasolutions/zod-to-openapi";import ya from"zod";yR(ya);var ha=ya.object({id:ya.uuid()}),po=class{constructor(e,r){this.bookVolumeRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=ha.parse({id:e.params.id}),i=await this.bookVolumeRepository.findById(t);if(!i)throw new p("O volume de livro n\xE3o existe.");return i.authorImageUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.authorImageUrl}),i.coverImageUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.coverImageUrl}),i.catalogSheetUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.catalogSheetUrl}),await this.bookVolumeRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as hR}from"@asteasolutions/zod-to-openapi";import Ra from"zod";hR(Ra);var Ia=Ra.object({id:Ra.uuid()}),lo=class{constructor(e){this.bookVolumeRepository=e}async handle(e,r){try{let{id:t}=Ia.parse({id:e.params.id}),i=await this.bookVolumeRepository.findById(t);if(!i)throw new p("Volume de livro n\xE3o encontrado.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as RR}from"@asteasolutions/zod-to-openapi";import et from"zod";var IR=1,bR=6;RR(et);var ba=et.object({page:et.coerce.number().min(1).default(IR),limit:et.coerce.number().min(1).default(bR),title:et.string().optional(),author:et.string().optional(),description:et.string().optional(),orderBy:et.enum(["asc","desc"]).default("desc")}),uo=class{constructor(e){this.bookVolumeRepository=e}async handle(e,r){try{let{limit:t,page:i,...n}=ba.parse(e.query),s=i*t-t,[m,c]=await Promise.all([this.bookVolumeRepository.find({pagination:{offset:s,limit:t},filter:n}),this.bookVolumeRepository.count({filter:n})]),d=Math.max(Math.ceil(c/t),1);return r.status(200).json({page:i,totalPages:d,offset:s,limit:t,bookVolumes:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as CR}from"@asteasolutions/zod-to-openapi";import be from"zod";var M={NEWS:"images/news",USER:"images/user",IN_MEMORIAM:"images/in-memoriam",PARTNER:"images/partners",CERTIFICATION:"documents/certifications",PENDENCY:"documents/pendencies",REGIMENT:"documents/regiments",MEETING_MINUTE:"documents/meeting-minutes",INTERNATIONAL_SCIENTIFIC_CONGRESS_GALLERY:"images/international-scientific-congress-gallery",GALLERY:"images/regional-congress-gallery",REGIONAL_CONGRESS_GALLERY:"images/regional-congress-gallery",WEBINAR:"images/webinars",COURSE:"images/courses",POST_GRADUATE_PROGRAM:"images/post-graduate-programs",EVENT:"images/events",SCIENTIFIC_JOURNAL:"images/scientific-journals",BOOK_VOLUME_AUTHOR_IMAGE:"images/book-volumes/authors",BOOK_VOLUME_COVER:"images/book-volumes/covers",BOOK_VOLUME_CATALOG_SHEET:"documents/book-volumes/catalog-sheets"};var go=5,cd=1024,SR=cd*cd,Ca=go*SR;CR(be);var Sa=be.object({id:be.uuid(),volumeNumber:be.coerce.number().int().positive().optional(),year:be.coerce.number().int().positive().optional(),title:be.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio.").optional(),author:be.string().min(1,"Autor \xE9 obrigat\xF3rio.").optional(),accessUrl:be.string().url("URL de acesso deve ser v\xE1lida").optional(),description:be.string().optional(),authorImage:be.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=Ca,`A imagem do autor deve ter no m\xE1ximo ${go}MB.`).optional(),coverImage:be.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=Ca,`A imagem da capa deve ter no m\xE1ximo ${go}MB.`).optional(),catalogSheet:be.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=Ca,`A ficha catalogr\xE1fica deve ter no m\xE1ximo ${go}MB.`).optional()}),fo=class{constructor(e,r){this.bookVolumeRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,volumeNumber:i,year:n,title:s,author:m,accessUrl:c,description:d,authorImage:h,coverImage:j,catalogSheet:q}=Sa.parse({id:e.params.id,...e.body,authorImage:e.files?.authorImage?.[0],coverImage:e.files?.coverImage?.[0],catalogSheet:e.files?.catalogSheet?.[0]}),$=await this.bookVolumeRepository.findById(t);if(!$)throw new p("O volume de livro n\xE3o existe.");let ee=$.authorImageUrl,ge=$.coverImageUrl,Fe=$.catalogSheetUrl;return h&&(ee=await this.firebaseStorageService.uploadFile({file:h,id:t,folder:M.BOOK_VOLUME_AUTHOR_IMAGE})),j&&(ge=await this.firebaseStorageService.uploadFile({file:j,id:t,folder:M.BOOK_VOLUME_COVER})),q&&(Fe=await this.firebaseStorageService.uploadFile({file:q,id:t,folder:M.BOOK_VOLUME_CATALOG_SHEET})),await this.bookVolumeRepository.update({id:t,volumeNumber:i,year:n,title:s,author:m,accessUrl:c,description:d,authorImageUrl:ee,coverImageUrl:ge,catalogSheetUrl:Fe}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var pd={method:"post",path:"/book-volumes",tags:["Book Volumes"],summary:"Create book volume",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:w.object({volumeNumber:w.number().int().positive().openapi({description:"N\xFAmero do volume"}),year:w.number().int().positive().openapi({description:"Ano de publica\xE7\xE3o"}),title:w.string().min(1).openapi({description:"T\xEDtulo do livro"}),author:w.string().min(1).openapi({description:"Nome do autor"}),accessUrl:w.string().url().optional().openapi({description:"URL de acesso ao livro"}),description:w.string().optional().openapi({description:"Descri\xE7\xE3o do livro"}),authorImage:w.string().optional().openapi({description:"Imagem do autor (m\xE1ximo 5MB)",type:"string",format:"binary"}),coverImage:w.string().optional().openapi({description:"Imagem da capa (m\xE1ximo 5MB)",type:"string",format:"binary"}),catalogSheet:w.string().optional().openapi({description:"Ficha catalogr\xE1fica (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{201:{description:"Book volume created successfully",summary:"Volume Created"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:w.object({errors:w.record(w.string(),w.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:w.object({message:w.string()})}}}}},dd={method:"get",path:"/book-volumes",tags:["Book Volumes"],summary:"List book volumes",security:[{bearerAuth:[]}],request:{query:ba},responses:{200:{description:"Paginated list of book volumes retrieved successfully",summary:"Volumes Retrieved",content:{"application/json":{schema:w.object({page:w.number(),totalPages:w.number(),offset:w.number(),limit:w.number(),bookVolumes:w.array(w.object({id:w.string(),volumeNumber:w.number(),year:w.number(),title:w.string(),author:w.string(),accessUrl:w.string().nullable(),authorImageUrl:w.string().nullable(),coverImageUrl:w.string().nullable(),catalogSheetUrl:w.string().nullable(),description:w.string().nullable(),createdAt:w.date(),updatedAt:w.date()}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:w.object({errors:w.record(w.string(),w.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:w.object({message:w.string()})}}}}},ld={method:"get",path:"/book-volumes/{id}",tags:["Book Volumes"],summary:"Find book volume by ID",security:[{bearerAuth:[]}],request:{params:Ia},responses:{200:{description:"Book volume details retrieved successfully",summary:"Volume Retrieved",content:{"application/json":{schema:w.object({id:w.string(),volumeNumber:w.number(),year:w.number(),title:w.string(),author:w.string(),accessUrl:w.string().nullable(),authorImageUrl:w.string().nullable(),coverImageUrl:w.string().nullable(),catalogSheetUrl:w.string().nullable(),description:w.string().nullable(),createdAt:w.date(),updatedAt:w.date()}).nullable()}}},400:{description:"Invalid volume ID format",summary:"Validation Error",content:{"application/json":{schema:w.object({errors:w.record(w.string(),w.string())})}}},404:{description:"Book volume not found with the provided ID",summary:"Volume Not Found",content:{"application/json":{schema:w.object({message:w.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:w.object({message:w.string()})}}}}},ud={method:"put",path:"/book-volumes/{id}",tags:["Book Volumes"],summary:"Update book volume",security:[{bearerAuth:[]}],request:{params:Sa.pick({id:!0}),body:{content:{"multipart/form-data":{schema:w.object({volumeNumber:w.number().int().positive().optional().openapi({description:"N\xFAmero do volume"}),year:w.number().int().positive().optional().openapi({description:"Ano de publica\xE7\xE3o"}),title:w.string().min(1).optional().openapi({description:"T\xEDtulo do livro"}),author:w.string().min(1).optional().openapi({description:"Nome do autor"}),accessUrl:w.string().url().optional().openapi({description:"URL de acesso ao livro"}),description:w.string().optional().openapi({description:"Descri\xE7\xE3o do livro"}),authorImage:w.string().optional().openapi({description:"Imagem do autor (m\xE1ximo 5MB)",type:"string",format:"binary"}),coverImage:w.string().optional().openapi({description:"Imagem da capa (m\xE1ximo 5MB)",type:"string",format:"binary"}),catalogSheet:w.string().optional().openapi({description:"Ficha catalogr\xE1fica (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{200:{description:"Book volume updated successfully",summary:"Volume Updated"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:w.object({errors:w.record(w.string(),w.string())})}}},404:{description:"Book volume not found with the provided ID",summary:"Volume Not Found",content:{"application/json":{schema:w.object({message:w.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:w.object({message:w.string()})}}}}},gd={method:"delete",path:"/book-volumes/{id}",tags:["Book Volumes"],summary:"Delete book volume",security:[{bearerAuth:[]}],request:{params:ha},responses:{200:{description:"Book volume deleted successfully",summary:"Volume Deleted"},400:{description:"Invalid volume ID format",summary:"Validation Error",content:{"application/json":{schema:w.object({errors:w.record(w.string(),w.string())})}}},404:{description:"Book volume not found with the provided ID",summary:"Volume Not Found",content:{"application/json":{schema:w.object({message:w.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:w.object({message:w.string()})}}}}};import{$Enums as TR}from"@prisma/client";import P from"zod";import{extendZodWithOpenApi as wR}from"@asteasolutions/zod-to-openapi";import wa from"zod";wR(wa);var va=wa.object({id:wa.string()}),yo=class{constructor(e,r){this.certificationRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=va.parse({id:e.params.certification_id}),i=await this.certificationRepository.findById(t);if(!i)throw new p("A certifica\xE7\xE3o n\xE3o existe.");return await Promise.all([this.certificationRepository.deleteById(i.id),this.firebaseStorageService.deleteFile({fileUrl:i.certificationUrl})]),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as vR}from"@asteasolutions/zod-to-openapi";import Ea from"zod";vR(Ea);var ja=Ea.object({certificationId:Ea.uuid()}),ho=class{constructor(e){this.certificationRepository=e}async handle(e,r){try{let{certificationId:t}=ja.parse({certificationId:e.params.certification_id}),i=await this.certificationRepository.findById(t);if(!i)throw new p("Certificado n\xE3o encontrado.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as ER}from"@asteasolutions/zod-to-openapi";import tt from"zod";var jR=1,xR=6;ER(tt);var xa=tt.object({page:tt.coerce.number().min(1).default(jR),limit:tt.coerce.number().min(1).default(xR),title:tt.string().optional(),description:tt.string().optional(),userId:tt.uuid().optional(),orderBy:tt.enum(["asc","desc"]).default("desc")}),Ro=class{constructor(e){this.certificationRepository=e}async handle(e,r){try{let{limit:t,page:i,...n}=xa.parse(e.query),s=i*t-t,[m,c]=await Promise.all([this.certificationRepository.find({pagination:{offset:s,limit:t},filter:n}),this.certificationRepository.count({filter:n})]),d=Math.max(Math.ceil(c/t),1);return r.status(200).json({page:i,totalPages:d,offset:s,limit:t,certifications:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as MR}from"@asteasolutions/zod-to-openapi";import Yt from"zod";MR(Yt);var bo=Yt.object({userId:Yt.uuid(),title:Yt.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),description:Yt.string().min(1,"Descri\xE7\xE3o \xE9 obrigat\xF3ria."),certification:Yt.any().refine(o=>o&&typeof o=="object"&&o.size>0,"Arquivo do certificado \xE9 obrigat\xF3rio")}),Io=class{constructor(e,r,t){this.userRepository=e;this.certificationRepository=r;this.firebaseStorageService=t}async handle(e,r){try{let{userId:t,title:i,description:n,certification:s}=bo.parse({...e.body,userId:e.params.user_id,certification:e.file});if(!await this.userRepository.findById(t))throw new de("O usu\xE1rio n\xE3o existe.");let c=await this.firebaseStorageService.uploadFile({file:s,id:t,folder:M.CERTIFICATION});return await this.certificationRepository.register({userId:t,title:i,description:n,certificationUrl:c}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as PR}from"@asteasolutions/zod-to-openapi";import Xt from"zod";PR(Xt);var So=Xt.object({id:Xt.uuid(),title:Xt.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),description:Xt.string().min(1,"Descri\xE7\xE3o \xE9 obrigat\xF3ria."),certification:Xt.any().refine(o=>o==null||typeof o=="object"&&typeof o.size=="number"&&(o.size===0||o.size>0),"Arquivo do certificado \xE9 inv\xE1lido").optional()}),Co=class{constructor(e,r){this.certificationRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{certification:t,id:i,...n}=So.parse({...e.body,id:e.params.certification_id,certification:e.file}),s=await this.certificationRepository.findById(i);if(!s)throw new de("A certifica\xE7\xE3o n\xE3o existe");let m=s.certificationUrl;return t&&t.size>0&&(m=await this.firebaseStorageService.updateFile({file:t,id:s.userId,folder:M.CERTIFICATION,fileUrl:s.certificationUrl})),await this.certificationRepository.update({...n,id:i,certificationUrl:m}),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var fd={method:"post",path:"/certifications/{user_id}",tags:["Certifications"],summary:"Register certification for user",security:[{bearerAuth:[]}],request:{params:bo.pick({userId:!0}).transform(()=>({user_id:""})),body:{content:{"multipart/form-data":{schema:bo.omit({userId:!0})}}}},responses:{201:{description:"Certification registered successfully for the user",summary:"Certification Registered",content:{"application/json":{schema:P.object({message:P.string()})}}},400:{description:"Invalid input data or file format",summary:"Validation Error",content:{"application/json":{schema:P.object({errors:P.record(P.string(),P.string())})}}},404:{description:"User not found with the provided ID",summary:"User Not Found",content:{"application/json":{schema:P.object({message:P.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:P.object({message:P.string()})}}}}},yd={method:"get",path:"/certifications",tags:["Certifications"],summary:"List certifications",security:[{bearerAuth:[]}],request:{query:xa},responses:{200:{description:"Paginated list of certifications with user information retrieved successfully",summary:"Certifications Retrieved",content:{"application/json":{schema:P.object({page:P.number(),totalPages:P.number(),offset:P.number(),limit:P.number(),certifications:P.array(P.object({description:P.string(),userId:P.string(),title:P.string(),id:P.string(),createdAt:P.date(),updatedAt:P.date(),certificationUrl:P.url(),user:P.object({id:P.uuid(),name:P.string(),createdAt:P.date(),updatedAt:P.date(),avatarUrl:P.string().nullable(),emailAddress:P.email(),orcid:P.string().nullable(),phone:P.string().nullable(),lattesUrl:P.url().nullable(),role:P.enum(TR.UserRole)})}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:P.object({errors:P.record(P.string(),P.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:P.object({message:P.string()})}}}}},hd={method:"get",path:"/certifications/{certification_id}",tags:["Certifications"],summary:"Find certification by ID",security:[{bearerAuth:[]}],request:{params:ja},responses:{200:{description:"Certification details retrieved successfully",summary:"Certification Retrieved",content:{"application/json":{schema:P.object({description:P.string(),userId:P.string(),title:P.string(),id:P.string(),createdAt:P.date(),updatedAt:P.date(),certificationUrl:P.url()}).nullable()}}},400:{description:"Invalid certification ID format",summary:"Validation Error",content:{"application/json":{schema:P.object({errors:P.record(P.string(),P.string())})}}},404:{description:"Certification not found with the provided ID",summary:"Certification Not Found",content:{"application/json":{schema:P.object({message:P.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:P.object({message:P.string()})}}}}},Rd={method:"put",path:"/certifications/{certification_id}",tags:["Certifications"],summary:"Update certification",security:[{bearerAuth:[]}],request:{params:So.pick({id:!0}).transform(()=>({certification_id:""})),body:{content:{"multipart/form-data":{schema:So.omit({id:!0})}}}},responses:{204:{description:"Certification updated successfully",summary:"Certification Updated"},400:{description:"Invalid input data or file format",summary:"Validation Error",content:{"application/json":{schema:P.object({errors:P.record(P.string(),P.string())})}}},404:{description:"Certification not found with the provided ID",summary:"Certification Not Found",content:{"application/json":{schema:P.object({message:P.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:P.object({message:P.string()})}}}}},Id={method:"delete",path:"/certifications/{certification_id}",tags:["Certifications"],summary:"Delete certification",security:[{bearerAuth:[]}],request:{params:va},responses:{204:{description:"Certification deleted successfully",summary:"Certification Deleted"},400:{description:"Invalid certification ID format",summary:"Validation Error",content:{"application/json":{schema:P.object({errors:P.record(P.string(),P.string())})}}},404:{description:"Certification not found with the provided ID",summary:"Certification Not Found",content:{"application/json":{schema:P.object({message:P.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:P.object({message:P.string()})}}}}};import R from"zod";import{extendZodWithOpenApi as AR}from"@asteasolutions/zod-to-openapi";import Ma from"zod";AR(Ma);var Pa=Ma.object({id:Ma.uuid()}),wo=class{constructor(e,r){this.courseRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=Pa.parse({id:e.params.id}),i=await this.courseRepository.findById(t);if(!i)throw new p("O curso n\xE3o existe.");return i.imageUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.imageUrl}),await this.courseRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as DR}from"@asteasolutions/zod-to-openapi";import Ta from"zod";DR(Ta);var Aa=Ta.object({id:Ta.uuid()}),vo=class{constructor(e){this.courseRepository=e}async handle(e,r){try{let{id:t}=Aa.parse({id:e.params.id}),i=await this.courseRepository.findById(t);if(!i)throw new p("Curso n\xE3o encontrado.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as FR}from"@asteasolutions/zod-to-openapi";import rt from"zod";var BR=1,UR=6;FR(rt);var Da=rt.object({page:rt.coerce.number().min(1).default(BR),limit:rt.coerce.number().min(1).default(UR),title:rt.string().optional(),description:rt.string().optional(),coordinator:rt.string().optional(),orderBy:rt.enum(["asc","desc"]).default("desc")}),Eo=class{constructor(e){this.courseRepository=e}async handle(e,r){try{let{limit:t,page:i,...n}=Da.parse(e.query),s=i*t-t,[m,c]=await Promise.all([this.courseRepository.find({pagination:{offset:s,limit:t},filter:n}),this.courseRepository.count({filter:n})]),d=Math.max(Math.ceil(c/t),1);return r.status(200).json({page:i,totalPages:d,offset:s,limit:t,courses:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as qR}from"@asteasolutions/zod-to-openapi";import le from"zod";var Cd=5,bd=1024,kR=bd*bd,OR=Cd*kR;qR(le);var Fa=le.object({id:le.uuid(),title:le.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio.").optional(),coordinatorId:le.string().uuid("Coordenador \xE9 obrigat\xF3rio.").optional(),email:le.string().email("E-mail deve ser v\xE1lido.").optional(),location:le.string().min(1,"Localiza\xE7\xE3o \xE9 obrigat\xF3ria.").optional(),scheduledAt:le.coerce.date().optional(),registrationLink:le.url("URL de inscri\xE7\xE3o deve ser v\xE1lida").optional(),description:le.string().optional(),instructorIds:le.transform(o=>typeof o=="string"?o.split(","):o).pipe(le.array(le.uuid())).optional(),image:le.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=OR,`A imagem deve ter no m\xE1ximo ${Cd}MB.`).optional()}),jo=class{constructor(e,r){this.courseRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,image:i,title:n,coordinatorId:s,email:m,location:c,scheduledAt:d,registrationLink:h,description:j,instructorIds:q}=Fa.parse({id:e.params.id,...e.body,image:e.file}),$=await this.courseRepository.findById(t);if(!$)throw new p("O curso n\xE3o existe.");let ee=$.imageUrl;if(i&&(ee=await this.firebaseStorageService.uploadFile({file:i,id:t,folder:M.COURSE})),!ee)throw new a("URL da imagem \xE9 obrigat\xF3rio");return await this.courseRepository.update({id:t,title:n,coordinatorId:s,email:m,location:c,scheduledAt:d,registrationLink:h,description:j,imageUrl:ee,instructorIds:q}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Sd={method:"post",path:"/courses",tags:["Courses"],summary:"Create course",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:R.object({title:R.string().min(1).openapi({description:"T\xEDtulo do curso"}),coordinator:R.string().min(1).openapi({description:"Nome do coordenador"}),email:R.string().email().openapi({description:"E-mail de contato"}),location:R.string().min(1).openapi({description:"Localiza\xE7\xE3o do curso"}),scheduledAt:R.string().openapi({description:"Data e hora agendada (ISO 8601)",example:"2024-01-01T10:00:00Z"}),registrationLink:R.string().url().optional().openapi({description:"Link de inscri\xE7\xE3o"}),description:R.string().optional().openapi({description:"Descri\xE7\xE3o do curso"}),instructorIds:R.string().openapi({description:"IDs dos instrutores separados por v\xEDrgula",example:"uuid1,uuid2,uuid3"}),image:R.string().optional().openapi({description:"Imagem do curso (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{201:{description:"Course created successfully",summary:"Course Created"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:R.object({errors:R.record(R.string(),R.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:R.object({message:R.string()})}}}}},wd={method:"get",path:"/courses",tags:["Courses"],summary:"List courses",security:[{bearerAuth:[]}],request:{query:Da},responses:{200:{description:"Paginated list of courses with instructor information retrieved successfully",summary:"Courses Retrieved",content:{"application/json":{schema:R.object({page:R.number(),totalPages:R.number(),offset:R.number(),limit:R.number(),courses:R.array(R.object({id:R.string(),title:R.string(),imageUrl:R.string().nullable(),coordinator:R.string(),email:R.string(),scheduledAt:R.date(),location:R.string(),registrationLink:R.string().nullable(),description:R.string().nullable(),createdAt:R.date(),updatedAt:R.date(),instructors:R.array(R.object({id:R.uuid(),name:R.string(),emailAddress:R.email(),avatarUrl:R.string().nullable(),createdAt:R.date(),updatedAt:R.date()}))}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:R.object({errors:R.record(R.string(),R.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:R.object({message:R.string()})}}}}},vd={method:"get",path:"/courses/{id}",tags:["Courses"],summary:"Find course by ID",security:[{bearerAuth:[]}],request:{params:Aa},responses:{200:{description:"Course details retrieved successfully",summary:"Course Retrieved",content:{"application/json":{schema:R.object({id:R.string(),title:R.string(),imageUrl:R.string().nullable(),coordinator:R.string(),email:R.string(),scheduledAt:R.date(),location:R.string(),registrationLink:R.string().nullable(),description:R.string().nullable(),createdAt:R.date(),updatedAt:R.date(),instructors:R.array(R.object({id:R.uuid(),name:R.string(),emailAddress:R.email(),avatarUrl:R.string().nullable(),createdAt:R.date(),updatedAt:R.date()}))}).nullable()}}},400:{description:"Invalid course ID format",summary:"Validation Error",content:{"application/json":{schema:R.object({errors:R.record(R.string(),R.string())})}}},404:{description:"Course not found with the provided ID",summary:"Course Not Found",content:{"application/json":{schema:R.object({message:R.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:R.object({message:R.string()})}}}}},Ed={method:"put",path:"/courses/{id}",tags:["Courses"],summary:"Update course",security:[{bearerAuth:[]}],request:{params:Fa.pick({id:!0}),body:{content:{"multipart/form-data":{schema:R.object({title:R.string().min(1).optional().openapi({description:"T\xEDtulo do curso"}),coordinator:R.string().min(1).optional().openapi({description:"Nome do coordenador"}),email:R.string().email().optional().openapi({description:"E-mail de contato"}),location:R.string().min(1).optional().openapi({description:"Localiza\xE7\xE3o do curso"}),scheduledAt:R.string().optional().openapi({description:"Data e hora agendada (ISO 8601)",example:"2024-01-01T10:00:00Z"}),registrationLink:R.string().url().optional().openapi({description:"Link de inscri\xE7\xE3o"}),description:R.string().optional().openapi({description:"Descri\xE7\xE3o do curso"}),instructorIds:R.string().optional().openapi({description:"IDs dos instrutores separados por v\xEDrgula",example:"uuid1,uuid2,uuid3"}),image:R.string().optional().openapi({description:"Imagem do curso (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{200:{description:"Course updated successfully",summary:"Course Updated"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:R.object({errors:R.record(R.string(),R.string())})}}},404:{description:"Course not found with the provided ID",summary:"Course Not Found",content:{"application/json":{schema:R.object({message:R.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:R.object({message:R.string()})}}}}},jd={method:"delete",path:"/courses/{id}",tags:["Courses"],summary:"Delete course",security:[{bearerAuth:[]}],request:{params:Pa},responses:{200:{description:"Course deleted successfully",summary:"Course Deleted"},400:{description:"Invalid course ID format",summary:"Validation Error",content:{"application/json":{schema:R.object({errors:R.record(R.string(),R.string())})}}},404:{description:"Course not found with the provided ID",summary:"Course Not Found",content:{"application/json":{schema:R.object({message:R.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:R.object({message:R.string()})}}}}};import{$Enums as Na}from"@prisma/client";import C from"zod";import{extendZodWithOpenApi as NR}from"@asteasolutions/zod-to-openapi";import je from"zod";NR(je);var Ba=je.object({code:je.string(),title:je.string(),description:je.string().optional(),notes:je.string().optional(),leaderId:je.uuid(),deputyLeaderId:je.uuid(),secretaryId:je.uuid(),memberIds:je.array(je.uuid())}),xo=class{constructor(e){this.etpRepository=e}async handle(e,r){try{let{code:t,title:i,description:n,notes:s,leaderId:m,deputyLeaderId:c,secretaryId:d,memberIds:h}=Ba.parse(e.body);if(await this.etpRepository.findByCode(t))throw new ne("J\xE1 existe um ETP cadastrado com este c\xF3digo.");return await this.etpRepository.create({code:t,title:i,description:n,notes:s,leaderId:m,deputyLeaderId:c,secretaryId:d,memberIds:h}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as GR}from"@asteasolutions/zod-to-openapi";import Ua from"zod";GR(Ua);var qa=Ua.object({id:Ua.uuid()}),Mo=class{constructor(e){this.etpRepository=e}async handle(e,r){try{let{id:t}=qa.parse({id:e.params.id});if(!await this.etpRepository.findById(t))throw new p("O ETP n\xE3o existe.");return await this.etpRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as LR}from"@asteasolutions/zod-to-openapi";import ka from"zod";LR(ka);var To=ka.object({id:ka.uuid()}),Po=class{constructor(e){this.etpRepository=e}async handle(e,r){try{let{id:t}=To.parse({id:e.params.id}),i=await this.etpRepository.findById(t);if(!i)throw new p("O ETP n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as WR}from"@asteasolutions/zod-to-openapi";import Ce from"zod";WR(Ce);var Oa=Ce.object({id:Ce.uuid(),code:Ce.string().optional(),title:Ce.string().optional(),description:Ce.string().optional(),notes:Ce.string().optional(),leaderId:Ce.uuid().optional(),deputyLeaderId:Ce.uuid().optional(),secretaryId:Ce.uuid().optional(),memberIds:Ce.array(Ce.uuid()).optional()}),Ao=class{constructor(e){this.etpRepository=e}async handle(e,r){try{let{id:t,code:i,title:n,description:s,notes:m,leaderId:c,deputyLeaderId:d,secretaryId:h,memberIds:j}=Oa.parse({id:e.params.id,...e.body});if(!await this.etpRepository.findById(t))throw new p("O ETP n\xE3o existe.");if(i){let $=await this.etpRepository.findByCode(i);if($&&$.id!==t)throw new ne("J\xE1 existe um ETP com este c\xF3digo.")}return await this.etpRepository.update({id:t,code:i,title:n,description:s,notes:m,leaderId:c,deputyLeaderId:d,secretaryId:h,memberIds:j}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var _R=1,zR=9,Do=C.object({id:C.uuid(),registrationNumber:C.string(),mainEtps:C.string().nullable(),formations:C.string().nullable(),degrees:C.array(C.enum(Na.Degree)),occupations:C.string(),seniority:C.enum(Na.Seniority),institutions:C.string(),biography:C.string().nullable(),createdAt:C.date(),updatedAt:C.date(),user:C.object({id:C.uuid(),name:C.string(),emailAddress:C.string(),avatarUrl:C.string().nullable(),orcid:C.string().nullable(),phone:C.string().nullable(),lattesUrl:C.string().nullable(),role:C.enum(Na.UserRole)})}),xd=C.object({id:C.uuid(),code:C.string(),title:C.string(),description:C.string().nullable(),notes:C.string().nullable(),createdAt:C.date(),updatedAt:C.date(),leader:C.object({id:C.uuid(),researcher:Do}).nullable(),deputyLeader:C.object({id:C.uuid(),researcher:Do}).nullable(),secretary:C.object({id:C.uuid(),researcher:Do}).nullable(),members:C.array(Do)}),Md={method:"post",path:"/etp",tags:["ETPs"],summary:"Create a new ETP with single leader, deputy leader, secretary and multiple members",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:Ba}}}},responses:{201:{description:"ETP created successfully",summary:"ETP Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:C.object({errors:C.record(C.string(),C.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:C.object({message:C.string()})}}},409:{description:"ETP with this code already exists",summary:"Conflict",content:{"application/json":{schema:C.object({message:C.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:C.object({message:C.string()})}}}}},Pd={method:"get",path:"/etp",tags:["ETPs"],summary:"List all ETPs with pagination and filters",request:{query:C.object({page:C.coerce.number().min(1).default(_R).optional(),limit:C.coerce.number().min(1).default(zR).optional(),code:C.string().optional(),title:C.string().optional(),description:C.string().optional(),notes:C.string().optional(),orderBy:C.enum(["asc","desc"]).optional()})},responses:{200:{description:"List of ETPs retrieved successfully with pagination",summary:"ETPs Retrieved",content:{"application/json":{schema:C.object({page:C.number(),totalPages:C.number(),offset:C.number(),limit:C.number(),etps:C.array(xd)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:C.object({message:C.string()})}}}}},Td={method:"get",path:"/etp/{id}",tags:["ETPs"],summary:"Find ETP by ID",request:{params:To},responses:{200:{description:"ETP details retrieved successfully",summary:"ETP Retrieved",content:{"application/json":{schema:xd}}},400:{description:"Invalid ETP ID format",summary:"Validation Error",content:{"application/json":{schema:C.object({errors:C.record(C.string(),C.string())})}}},404:{description:"ETP not found with the provided ID",summary:"ETP Not Found",content:{"application/json":{schema:C.object({message:C.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:C.object({message:C.string()})}}}}},Ad={method:"put",path:"/etp/{id}",tags:["ETPs"],summary:"Update ETP and manage user relationships (single leader, deputy leader, secretary, multiple members)",security:[{bearerAuth:[]}],request:{params:To,body:{content:{"application/json":{schema:Oa.omit({id:!0})}}}},responses:{200:{description:"ETP updated successfully",summary:"ETP Updated"},400:{description:"Invalid input data or ETP ID format",summary:"Validation Error",content:{"application/json":{schema:C.object({errors:C.record(C.string(),C.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:C.object({message:C.string()})}}},404:{description:"ETP not found with the provided ID",summary:"ETP Not Found",content:{"application/json":{schema:C.object({message:C.string()})}}},409:{description:"ETP with this code already exists",summary:"Conflict",content:{"application/json":{schema:C.object({message:C.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:C.object({message:C.string()})}}}}},Dd={method:"delete",path:"/etp/{id}",tags:["ETPs"],summary:"Delete ETP",security:[{bearerAuth:[]}],request:{params:qa},responses:{200:{description:"ETP deleted successfully",summary:"ETP Deleted"},400:{description:"Invalid ETP ID format",summary:"Validation Error",content:{"application/json":{schema:C.object({errors:C.record(C.string(),C.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:C.object({message:C.string()})}}},404:{description:"ETP not found with the provided ID",summary:"ETP Not Found",content:{"application/json":{schema:C.object({message:C.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:C.object({message:C.string()})}}}}};import{EventFormat as mI,EventStatus as cI}from"@prisma/client";import k from"zod";import{extendZodWithOpenApi as HR}from"@asteasolutions/zod-to-openapi";import{EventFormat as Fo,EventStatus as Ga}from"@prisma/client";import Se from"zod";var VR=5,Fd=1024,ZR=Fd*Fd,KR=VR*ZR;HR(Se);var La=Se.object({title:Se.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio"),description:Se.string().optional(),startDate:Se.coerce.date(),endDate:Se.coerce.date(),location:Se.string().optional(),format:Se.enum(Fo).default(Fo.ONLINE),eventLink:Se.string().url("Link do evento deve ser uma URL v\xE1lida").optional().or(Se.literal("")),status:Se.enum(Ga).default(Ga.PENDING),image:Se.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=KR,"A imagem deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.")}).refine(o=>o.format===Fo.ONLINE?!!o.eventLink:o.format===Fo.IN_PERSON?!!o.location:!0,{message:"Eventos online devem ter link e eventos presenciais devem ter localiza\xE7\xE3o",path:["format"]}),Bo=class{constructor(e,r){this.eventRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{title:t,description:i,startDate:n,endDate:s,location:m,format:c,eventLink:d,status:h,image:j}=La.parse({...e.body,image:e.file}),q=await this.eventRepository.create({title:t,description:i,startDate:n,endDate:s,location:m||void 0,format:c,eventLink:d||void 0,status:h??Ga.PENDING}),$=await this.firebaseStorageService.uploadFile({file:j,folder:M.EVENT,id:q.id});return await this.eventRepository.update({id:q.id,imageUrl:$}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as JR}from"@asteasolutions/zod-to-openapi";import Wa from"zod";JR(Wa);var _a=Wa.object({id:Wa.uuid()}),Uo=class{constructor(e){this.eventRepository=e}async handle(e,r){try{let{id:t}=_a.parse({id:e.params.id});if(!await this.eventRepository.findById(t))throw new p("O evento n\xE3o existe.");return await this.eventRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as YR}from"@asteasolutions/zod-to-openapi";import za from"zod";YR(za);var ko=za.object({id:za.uuid()}),qo=class{constructor(e){this.eventRepository=e}async handle(e,r){try{let{id:t}=ko.parse({id:e.params.id}),i=await this.eventRepository.findById(t);if(!i)throw new p("O evento n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as XR}from"@asteasolutions/zod-to-openapi";import{EventFormat as $R,EventStatus as QR}from"@prisma/client";import ot from"zod";var eI=1,tI=10;XR(ot);var Ha=ot.object({page:ot.coerce.number().min(1).default(eI),limit:ot.coerce.number().min(1).default(tI),title:ot.string().optional(),status:ot.nativeEnum(QR).optional(),format:ot.nativeEnum($R).optional(),orderBy:ot.enum(["asc","desc"]).optional()}),Oo=class{constructor(e){this.eventRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=Ha.parse(e.query),s=i*t-i,[m,c]=await Promise.all([this.eventRepository.find({pagination:{offset:s,limit:i},filter:n}),this.eventRepository.count({filter:n})]),d=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:d,offset:s,limit:i,events:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as rI}from"@asteasolutions/zod-to-openapi";import{EventFormat as oI,EventStatus as iI}from"@prisma/client";import fe from"zod";var nI=5,Bd=1024,sI=Bd*Bd,aI=nI*sI;rI(fe);var Va=fe.object({id:fe.uuid(),title:fe.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio").optional(),description:fe.string().optional(),startDate:fe.coerce.date().optional(),endDate:fe.coerce.date().optional(),location:fe.string().optional(),format:fe.nativeEnum(oI).optional(),eventLink:fe.string().url("Link do evento deve ser uma URL v\xE1lida").optional().or(fe.literal("")),status:fe.nativeEnum(iI).optional(),image:fe.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=aI,"A imagem deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.").optional()}),No=class{constructor(e,r){this.eventRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,title:i,description:n,startDate:s,endDate:m,location:c,format:d,eventLink:h,status:j,image:q}=Va.parse({id:e.params.id,...e.body,image:e.file});if(!await this.eventRepository.findById(t))throw new p("O evento n\xE3o existe.");let ee;return q&&(ee=await this.firebaseStorageService.uploadFile({file:q,folder:M.EVENT,id:t})),await this.eventRepository.update({id:t,title:i,description:n,startDate:s,endDate:m,location:c||void 0,format:d,eventLink:h||void 0,status:j,imageUrl:ee}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Ud=k.object({id:k.uuid(),title:k.string(),description:k.string().nullable(),imageUrl:k.string().nullable(),startDate:k.date(),endDate:k.date(),location:k.string().nullable(),status:k.nativeEnum(cI),format:k.nativeEnum(mI),eventLink:k.string().nullable(),createdAt:k.date(),updatedAt:k.date()}),qd={method:"post",path:"/event",tags:["Events"],summary:"Create a new event",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:La}}}},responses:{201:{description:"Event created successfully",summary:"Event Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:k.object({errors:k.record(k.string(),k.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:k.object({message:k.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:k.object({message:k.string()})}}}}},kd={method:"get",path:"/event",tags:["Events"],summary:"List all events with pagination and filters",request:{query:Ha},responses:{200:{description:"List of events retrieved successfully with pagination",summary:"Events Retrieved",content:{"application/json":{schema:k.object({page:k.number(),totalPages:k.number(),offset:k.number(),limit:k.number(),events:k.array(Ud)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:k.object({errors:k.record(k.string(),k.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:k.object({message:k.string()})}}}}},Od={method:"get",path:"/event/{id}",tags:["Events"],summary:"Find event by ID",request:{params:ko},responses:{200:{description:"Event details retrieved successfully",summary:"Event Retrieved",content:{"application/json":{schema:Ud}}},400:{description:"Invalid event ID format",summary:"Validation Error",content:{"application/json":{schema:k.object({errors:k.record(k.string(),k.string())})}}},404:{description:"Event not found with the provided ID",summary:"Event Not Found",content:{"application/json":{schema:k.object({message:k.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:k.object({message:k.string()})}}}}},Nd={method:"put",path:"/event/{id}",tags:["Events"],summary:"Update event",security:[{bearerAuth:[]}],request:{params:ko,body:{content:{"multipart/form-data":{schema:Va.omit({id:!0})}}}},responses:{200:{description:"Event updated successfully",summary:"Event Updated"},400:{description:"Invalid input data or event ID format",summary:"Validation Error",content:{"application/json":{schema:k.object({errors:k.record(k.string(),k.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:k.object({message:k.string()})}}},404:{description:"Event not found with the provided ID",summary:"Event Not Found",content:{"application/json":{schema:k.object({message:k.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:k.object({message:k.string()})}}}}},Gd={method:"delete",path:"/event/{id}",tags:["Events"],summary:"Delete event",security:[{bearerAuth:[]}],request:{params:_a},responses:{200:{description:"Event deleted successfully",summary:"Event Deleted"},400:{description:"Invalid event ID format",summary:"Validation Error",content:{"application/json":{schema:k.object({errors:k.record(k.string(),k.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:k.object({message:k.string()})}}},404:{description:"Event not found with the provided ID",summary:"Event Not Found",content:{"application/json":{schema:k.object({message:k.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:k.object({message:k.string()})}}}}};import{InMemoriamRole as jI}from"@prisma/client";import A from"zod";import{extendZodWithOpenApi as pI}from"@asteasolutions/zod-to-openapi";import{InMemoriamRole as dI}from"@prisma/client";import it from"zod";var Wd=2,Ld=1024,lI=Ld*Ld,uI=Wd*lI;pI(it);var Za=it.object({name:it.string().min(1,"Nome \xE9 obrigat\xF3rio"),birthDate:it.coerce.date(),deathDate:it.coerce.date(),biography:it.string().optional(),photo:it.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=uI,`A imagem deve ter no m\xE1ximo ${Wd}MB.`).optional(),role:it.enum(dI)}).refine(o=>o.deathDate>o.birthDate,{message:"Data de falecimento deve ser posterior \xE0 data de nascimento",path:["deathDate"]}),Go=class{constructor(e,r){this.inMemoriamRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{name:t,birthDate:i,deathDate:n,biography:s,role:m,photo:c}=Za.parse({...e.body,photo:e.file}),d=await this.inMemoriamRepository.create({name:t,birthDate:i,deathDate:n,biography:s??void 0,role:m}),h;return c&&(h=await this.firebaseStorageService.uploadFile({file:c,id:d.id,folder:M.IN_MEMORIAM}),await this.inMemoriamRepository.update({id:d.id,photoUrl:h})),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as gI}from"@asteasolutions/zod-to-openapi";import Ka from"zod";gI(Ka);var Ja=Ka.object({id:Ka.uuid()}),Lo=class{constructor(e,r){this.inMemoriamRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=Ja.parse({id:e.params.id}),i=await this.inMemoriamRepository.findById(t);if(!i)throw new p("O in memoriam n\xE3o existe.");return i.photoUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.photoUrl}),await this.inMemoriamRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as fI}from"@asteasolutions/zod-to-openapi";import Ya from"zod";fI(Ya);var _o=Ya.object({id:Ya.uuid()}),Wo=class{constructor(e){this.inMemoriamRepository=e}async handle(e,r){try{let{id:t}=_o.parse({id:e.params.id}),i=await this.inMemoriamRepository.findById(t);if(!i)throw new p("O in memoriam n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as yI}from"@asteasolutions/zod-to-openapi";import{InMemoriamRole as hI}from"@prisma/client";import Xa from"zod";yI(Xa);var $a=Xa.object({role:Xa.enum(hI)}),zo=class{constructor(e){this.inMemoriamRepository=e}async handle(e,r){try{let{role:t}=$a.parse({role:e.params.role}),i=await this.inMemoriamRepository.findByRole(t);return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as RI}from"@asteasolutions/zod-to-openapi";import{InMemoriamRole as II}from"@prisma/client";import nt from"zod";var bI=1,CI=9;RI(nt);var Qa=nt.object({page:nt.coerce.number().min(1).default(bI),limit:nt.coerce.number().min(1).default(CI),name:nt.string().optional(),biography:nt.string().optional(),role:nt.enum(II).optional(),orderBy:nt.enum(["asc","desc"]).default("desc")}),Ho=class{constructor(e){this.inMemoriamRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=Qa.parse(e.query),s=i*t-i,[m,c]=await Promise.all([this.inMemoriamRepository.find({pagination:{offset:s,limit:i},filter:n}),this.inMemoriamRepository.count({filter:n})]),d=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:d,offset:s,limit:i,inMemoriam:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as SI}from"@asteasolutions/zod-to-openapi";import{InMemoriamRole as wI}from"@prisma/client";import Le from"zod";var zd=2,_d=1024,vI=_d*_d,EI=zd*vI;SI(Le);var em=Le.object({id:Le.uuid(),name:Le.string().min(1,"Nome \xE9 obrigat\xF3rio").optional(),birthDate:Le.coerce.date().optional(),deathDate:Le.coerce.date().optional(),biography:Le.string().optional(),photo:Le.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=EI,`A imagem deve ter no m\xE1ximo ${zd}MB.`).optional(),role:Le.enum(wI).optional()}).refine(o=>o.birthDate&&o.deathDate?o.deathDate>o.birthDate:!0,{message:"Data de falecimento deve ser posterior \xE0 data de nascimento",path:["deathDate"]}),Vo=class{constructor(e,r){this.inMemoriamRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,name:i,birthDate:n,deathDate:s,biography:m,photo:c,role:d}=em.parse({id:e.params.id,...e.body,photo:e.file}),h=await this.inMemoriamRepository.findById(t);if(!h)throw new p("O registro in memoriam n\xE3o existe.");let j=h.photoUrl;return c&&(j=await this.firebaseStorageService.uploadFile({file:c,id:t,folder:M.IN_MEMORIAM})),await this.inMemoriamRepository.update({id:t,name:i,birthDate:n,deathDate:s,biography:m,photoUrl:j??void 0,role:d}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var tm=A.object({id:A.uuid(),name:A.string(),birthDate:A.date(),deathDate:A.date(),biography:A.string().nullable(),photoUrl:A.string().nullable(),role:A.enum(jI),createdAt:A.date(),updatedAt:A.date()}),Hd={method:"post",path:"/in-memoriam",tags:["In Memoriam"],summary:"Create a new in memoriam record with optional photo upload",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:Za}}}},responses:{201:{description:"In memoriam record created successfully",summary:"In Memoriam Created"},400:{description:"Invalid input data, missing required fields, or invalid photo format/size",summary:"Validation Error",content:{"application/json":{schema:A.object({errors:A.record(A.string(),A.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:A.object({message:A.string()})}}},409:{description:"In memoriam record with this name already exists",summary:"Conflict",content:{"application/json":{schema:A.object({message:A.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:A.object({message:A.string()})}}}}},Vd={method:"get",path:"/in-memoriam",tags:["In Memoriam"],summary:"List all in memoriam records with pagination and filters",request:{query:Qa},responses:{200:{description:"List of in memoriam records retrieved successfully with pagination",summary:"In Memoriam Records Retrieved",content:{"application/json":{schema:A.object({page:A.number(),totalPages:A.number(),offset:A.number(),limit:A.number(),inMemoriam:A.array(tm)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:A.object({errors:A.record(A.string(),A.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:A.object({message:A.string()})}}}}},Zd={method:"get",path:"/in-memoriam/{id}",tags:["In Memoriam"],summary:"Find in memoriam record by ID",request:{params:_o},responses:{200:{description:"In memoriam record details retrieved successfully",summary:"In Memoriam Record Retrieved",content:{"application/json":{schema:tm}}},400:{description:"Invalid in memoriam record ID format",summary:"Validation Error",content:{"application/json":{schema:A.object({errors:A.record(A.string(),A.string())})}}},404:{description:"In memoriam record not found with the provided ID",summary:"In Memoriam Record Not Found",content:{"application/json":{schema:A.object({message:A.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:A.object({message:A.string()})}}}}},Kd={method:"put",path:"/in-memoriam/{id}",tags:["In Memoriam"],summary:"Update in memoriam record with optional photo upload",security:[{bearerAuth:[]}],request:{params:_o,body:{content:{"multipart/form-data":{schema:em.omit({id:!0})}}}},responses:{200:{description:"In memoriam record updated successfully",summary:"In Memoriam Record Updated"},400:{description:"Invalid input data, in memoriam record ID format, or invalid photo format/size",summary:"Validation Error",content:{"application/json":{schema:A.object({errors:A.record(A.string(),A.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:A.object({message:A.string()})}}},404:{description:"In memoriam record not found with the provided ID",summary:"In Memoriam Record Not Found",content:{"application/json":{schema:A.object({message:A.string()})}}},409:{description:"In memoriam record with this name already exists",summary:"Conflict",content:{"application/json":{schema:A.object({message:A.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:A.object({message:A.string()})}}}}},Jd={method:"delete",path:"/in-memoriam/{id}",tags:["In Memoriam"],summary:"Delete in memoriam record",security:[{bearerAuth:[]}],request:{params:Ja},responses:{200:{description:"In memoriam record deleted successfully",summary:"In Memoriam Record Deleted"},400:{description:"Invalid in memoriam record ID format",summary:"Validation Error",content:{"application/json":{schema:A.object({errors:A.record(A.string(),A.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:A.object({message:A.string()})}}},404:{description:"In memoriam record not found with the provided ID",summary:"In Memoriam Record Not Found",content:{"application/json":{schema:A.object({message:A.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:A.object({message:A.string()})}}}}},UP={method:"get",path:"/in-memoriam/role/{role}",tags:["In Memoriam"],summary:"Find in memoriam records by role",request:{params:$a},responses:{200:{description:"In memoriam records retrieved successfully by role",summary:"In Memoriam Records Retrieved by Role",content:{"application/json":{schema:A.array(tm)}}},400:{description:"Invalid role parameter provided",summary:"Validation Error",content:{"application/json":{schema:A.object({errors:A.record(A.string(),A.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:A.object({message:A.string()})}}}}};import K from"zod";import{extendZodWithOpenApi as xI}from"@asteasolutions/zod-to-openapi";import Dr from"zod";var Xd=2,Yd=1024,MI=Yd*Yd,PI=Xd*MI;xI(Dr);var rm=Dr.object({image:Dr.any().refine(o=>o==null||typeof o!="object"||typeof o.size!="number"?!1:o.size<=PI,`A imagem deve ter no m\xE1ximo ${Xd}MB.`),caption:Dr.string().optional(),congressId:Dr.uuid()}),Zo=class{constructor(e,r,t){this.internationalScientificCongressGalleryRepository=e;this.internationalScientificCongressRepository=r;this.firebaseStorageService=t}async handle(e,r){try{let{image:t,caption:i,congressId:n}=rm.parse({...e.body,...e.params,image:e.file});if(!await this.internationalScientificCongressRepository.findById(n))throw new p("O congresso n\xE3o existe.");let m=await this.internationalScientificCongressGalleryRepository.create({imageUrl:"",caption:i||void 0,congressId:n}),c=await this.firebaseStorageService.uploadFile({file:t,id:m.id,folder:M.INTERNATIONAL_SCIENTIFIC_CONGRESS_GALLERY});return await this.internationalScientificCongressGalleryRepository.update({id:m.id,imageUrl:c}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as TI}from"@asteasolutions/zod-to-openapi";import om from"zod";TI(om);var Jo=om.object({id:om.uuid()}),Ko=class{constructor(e){this.internationalScientificCongressGalleryRepository=e}async handle(e,r){try{let{id:t}=Jo.parse({id:e.params.id});if(!await this.internationalScientificCongressGalleryRepository.findById(t))throw new p("A imagem da galeria n\xE3o existe.");return await this.internationalScientificCongressGalleryRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as AI}from"@asteasolutions/zod-to-openapi";import $t from"zod";var DI=1,FI=9;AI($t);var im=$t.object({congressId:$t.uuid(),page:$t.coerce.number().min(1).default(DI),limit:$t.coerce.number().min(1).default(FI),caption:$t.string().optional()}),Yo=class{constructor(e){this.internationalScientificCongressGalleryRepository=e}async handle(e,r){try{let{congressId:t,page:i,limit:n,...s}=im.parse({congressId:e.params.congressId,...e.query}),m=n*i-n,[c,d]=await Promise.all([this.internationalScientificCongressGalleryRepository.findByCongressId({pagination:{offset:m,limit:n},filter:{congressId:t,...s}}),this.internationalScientificCongressGalleryRepository.count({filter:{congressId:t,caption:s.caption}})]),h=Math.max(Math.ceil(d/n),1);return r.status(200).json({page:i,totalPages:h,offset:m,limit:n,galleryImages:c})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as BI}from"@asteasolutions/zod-to-openapi";import Fr from"zod";var Qd=2,$d=1024,UI=$d*$d,qI=Qd*UI;BI(Fr);var nm=Fr.object({id:Fr.uuid(),image:Fr.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=qI,`A imagem deve ter no m\xE1ximo ${Qd}MB.`).optional(),caption:Fr.string().optional()}),Xo=class{constructor(e,r){this.internationalScientificCongressGalleryRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,image:i,caption:n}=nm.parse({id:e.params.id,...e.body,image:e.file}),s=await this.internationalScientificCongressGalleryRepository.findById(t);if(!s)throw new p("A imagem da galeria n\xE3o existe.");let m=s.imageUrl;return i&&(m=await this.firebaseStorageService.uploadFile({file:i,id:t,folder:M.INTERNATIONAL_SCIENTIFIC_CONGRESS_GALLERY})),await this.internationalScientificCongressGalleryRepository.update({id:t,imageUrl:m??void 0,caption:n||void 0}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var kI=K.object({id:K.uuid(),imageUrl:K.string(),caption:K.string().nullable(),congressId:K.uuid()}),el={method:"post",path:"/international-scientific-congress/{congressId}/gallery",tags:["International Scientific Congresses"],summary:"Create a new congress gallery image",security:[{bearerAuth:[]}],request:{params:K.object({congressId:K.uuid()}),body:{content:{"application/json":{schema:rm.omit({congressId:!0})}}}},responses:{201:{description:"Congress gallery image created successfully",summary:"Congress Gallery Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:K.object({errors:K.record(K.string(),K.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:K.object({message:K.string()})}}},404:{description:"Congress not found with the provided ID",summary:"Congress Not Found",content:{"application/json":{schema:K.object({message:K.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:K.object({message:K.string()})}}}}},tl={method:"get",path:"/international-scientific-congress/{congressId}/gallery",tags:["International Scientific Congresses"],summary:"Find congress gallery images by congress ID",request:{params:im},responses:{200:{description:"Congress gallery images retrieved successfully by congress ID",summary:"Congress Galleries Retrieved",content:{"application/json":{schema:K.array(kI)}}},400:{description:"Invalid congress ID parameter provided",summary:"Validation Error",content:{"application/json":{schema:K.object({errors:K.record(K.string(),K.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:K.object({message:K.string()})}}}}},rl={method:"put",path:"/international-scientific-congress/gallery/{id}",tags:["International Scientific Congresses"],summary:"Update congress gallery image",security:[{bearerAuth:[]}],request:{params:Jo,body:{content:{"application/json":{schema:nm.omit({id:!0})}}}},responses:{200:{description:"Congress gallery image updated successfully",summary:"Congress Gallery Updated"},400:{description:"Invalid input data or gallery ID format",summary:"Validation Error",content:{"application/json":{schema:K.object({errors:K.record(K.string(),K.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:K.object({message:K.string()})}}},404:{description:"Congress gallery image not found with the provided ID",summary:"Congress Gallery Not Found",content:{"application/json":{schema:K.object({message:K.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:K.object({message:K.string()})}}}}},ol={method:"delete",path:"/international-scientific-congress/gallery/{id}",tags:["International Scientific Congresses"],summary:"Delete congress gallery image",security:[{bearerAuth:[]}],request:{params:Jo},responses:{200:{description:"Congress gallery image deleted successfully",summary:"Congress Gallery Deleted"},400:{description:"Invalid gallery ID format",summary:"Validation Error",content:{"application/json":{schema:K.object({errors:K.record(K.string(),K.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:K.object({message:K.string()})}}},404:{description:"Congress gallery image not found with the provided ID",summary:"Congress Gallery Not Found",content:{"application/json":{schema:K.object({message:K.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:K.object({message:K.string()})}}}}};import J from"zod";import{extendZodWithOpenApi as OI}from"@asteasolutions/zod-to-openapi";import Br from"zod";var nl=2,il=1024,NI=il*il,GI=nl*NI;OI(Br);var sm=Br.object({name:Br.string().min(1,"Nome \xE9 obrigat\xF3rio"),logo:Br.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=GI,`A imagem deve ter no m\xE1ximo ${nl}MB.`).optional(),congressId:Br.uuid()}),$o=class{constructor(e,r,t){this.internationalScientificCongressPartnerRepository=e;this.internationalScientificCongressRepository=r;this.firebaseStorageService=t}async handle(e,r){try{let{name:t,logo:i,congressId:n}=sm.parse({...e.body,...e.params,logo:e.file});if(!await this.internationalScientificCongressRepository.findById(n))throw new p("O congresso n\xE3o existe.");let m=await this.internationalScientificCongressPartnerRepository.create({name:t,congressId:n}),c;return i&&(c=await this.firebaseStorageService.uploadFile({file:i,id:m.id,folder:M.PARTNER}),await this.internationalScientificCongressPartnerRepository.update({id:m.id,logoUrl:c})),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as LI}from"@asteasolutions/zod-to-openapi";import am from"zod";LI(am);var ei=am.object({id:am.uuid()}),Qo=class{constructor(e){this.internationalScientificCongressPartnerRepository=e}async handle(e,r){try{let{id:t}=ei.parse({id:e.params.id});if(!await this.internationalScientificCongressPartnerRepository.findById(t))throw new p("O parceiro n\xE3o existe.");return await this.internationalScientificCongressPartnerRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as WI}from"@asteasolutions/zod-to-openapi";import Qt from"zod";var _I=1,zI=9;WI(Qt);var mm=Qt.object({congressId:Qt.uuid(),page:Qt.coerce.number().min(1).optional(),limit:Qt.coerce.number().min(1).optional(),name:Qt.string().optional()}),ti=class{constructor(e){this.internationalScientificCongressPartnerRepository=e}async handle(e,r){try{let{congressId:t,page:i,limit:n,...s}=mm.parse({congressId:e.params.congressId,...e.query});if(i!==void 0&&n!==void 0){let c=i||_I,d=n||zI,h=d*c-d,[j,q]=await Promise.all([this.internationalScientificCongressPartnerRepository.findByCongressId({pagination:{offset:h,limit:d},filter:{congressId:t,...s}}),this.internationalScientificCongressPartnerRepository.count({filter:{congressId:t,name:s.name}})]),$=Math.max(Math.ceil(q/d),1);return r.status(200).json({page:c,totalPages:$,offset:h,limit:d,partners:j})}let m=await this.internationalScientificCongressPartnerRepository.findByCongressId({filter:{congressId:t,...s}});return r.status(200).json(m)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as HI}from"@asteasolutions/zod-to-openapi";import Ur from"zod";var al=2,sl=1024,VI=sl*sl,ZI=al*VI;HI(Ur);var cm=Ur.object({id:Ur.uuid(),name:Ur.string().min(1,"Nome \xE9 obrigat\xF3rio").optional(),logo:Ur.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=ZI,`A imagem deve ter no m\xE1ximo ${al}MB.`).optional()}),ri=class{constructor(e,r){this.internationalScientificCongressPartnerRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,name:i,logo:n}=cm.parse({id:e.params.id,...e.body,logo:e.file}),s=await this.internationalScientificCongressPartnerRepository.findById(t);if(!s)throw new p("O parceiro n\xE3o existe.");let m=s.logoUrl;return n&&(m=await this.firebaseStorageService.uploadFile({file:n,id:t,folder:M.PARTNER})),await this.internationalScientificCongressPartnerRepository.update({id:t,name:i,logoUrl:m??void 0}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var KI=J.object({id:J.uuid(),name:J.string(),logoUrl:J.string().nullable(),congressId:J.uuid()}),ml={method:"post",path:"/international-scientific-congress/{congressId}/partner",tags:["International Scientific Congresses"],summary:"Create a new congress partner",security:[{bearerAuth:[]}],request:{params:J.object({congressId:J.uuid()}),body:{content:{"application/json":{schema:sm.omit({congressId:!0})}}}},responses:{201:{description:"Congress partner created successfully",summary:"Congress Partner Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:J.object({errors:J.record(J.string(),J.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:J.object({message:J.string()})}}},404:{description:"Congress not found with the provided ID",summary:"Congress Not Found",content:{"application/json":{schema:J.object({message:J.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:J.object({message:J.string()})}}}}},cl={method:"get",path:"/international-scientific-congress/{congressId}/partner",tags:["International Scientific Congresses"],summary:"Find congress partners by congress ID",request:{params:mm},responses:{200:{description:"Congress partners retrieved successfully by congress ID",summary:"Congress Partners Retrieved",content:{"application/json":{schema:J.array(KI)}}},400:{description:"Invalid congress ID parameter provided",summary:"Validation Error",content:{"application/json":{schema:J.object({errors:J.record(J.string(),J.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:J.object({message:J.string()})}}}}},pl={method:"put",path:"/international-scientific-congress/partner/{id}",tags:["International Scientific Congresses"],summary:"Update congress partner",security:[{bearerAuth:[]}],request:{params:ei,body:{content:{"application/json":{schema:cm.omit({id:!0})}}}},responses:{200:{description:"Congress partner updated successfully",summary:"Congress Partner Updated"},400:{description:"Invalid input data or partner ID format",summary:"Validation Error",content:{"application/json":{schema:J.object({errors:J.record(J.string(),J.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:J.object({message:J.string()})}}},404:{description:"Congress partner not found with the provided ID",summary:"Congress Partner Not Found",content:{"application/json":{schema:J.object({message:J.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:J.object({message:J.string()})}}}}},dl={method:"delete",path:"/international-scientific-congress/partner/{id}",tags:["International Scientific Congresses"],summary:"Delete congress partner",security:[{bearerAuth:[]}],request:{params:ei},responses:{200:{description:"Congress partner deleted successfully",summary:"Congress Partner Deleted"},400:{description:"Invalid partner ID format",summary:"Validation Error",content:{"application/json":{schema:J.object({errors:J.record(J.string(),J.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:J.object({message:J.string()})}}},404:{description:"Congress partner not found with the provided ID",summary:"Congress Partner Not Found",content:{"application/json":{schema:J.object({message:J.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:J.object({message:J.string()})}}}}};import u from"zod";import{extendZodWithOpenApi as JI}from"@asteasolutions/zod-to-openapi";import ie from"zod";JI(ie);var pm=ie.object({title:ie.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio"),edition:ie.coerce.number().int().positive("Edi\xE7\xE3o deve ser um n\xFAmero positivo"),startDate:ie.coerce.date(),endDate:ie.coerce.date(),description:ie.string().optional(),location:ie.string().optional(),congressLink:ie.url("Link do congresso deve ser uma URL v\xE1lida").optional().or(ie.literal("")),noticeUrl:ie.url("URL do edital deve ser uma URL v\xE1lida").optional().or(ie.literal("")),scheduleUrl:ie.url("URL do cronograma deve ser uma URL v\xE1lida").optional().or(ie.literal("")),programUrl:ie.url("URL da programa\xE7\xE3o deve ser uma URL v\xE1lida").optional().or(ie.literal("")),adminReportUrl:ie.url("URL do relat\xF3rio administrativo deve ser uma URL v\xE1lida").optional().or(ie.literal("")),proceedingsUrl:ie.url("URL dos anais deve ser uma URL v\xE1lida").optional().or(ie.literal(""))}).refine(o=>o.endDate>=o.startDate,{message:"Data de t\xE9rmino deve ser posterior ou igual \xE0 data de in\xEDcio",path:["endDate"]}),oi=class{constructor(e){this.internationalScientificCongressRepository=e}async handle(e,r){try{let t=pm.parse(e.body);return await this.internationalScientificCongressRepository.create(t),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as YI}from"@asteasolutions/zod-to-openapi";import dm from"zod";YI(dm);var lm=dm.object({id:dm.uuid()}),ii=class{constructor(e){this.internationalScientificCongressRepository=e}async handle(e,r){try{let{id:t}=lm.parse({id:e.params.id});if(!await this.internationalScientificCongressRepository.findById(t))throw new p("O congresso n\xE3o existe.");return await this.internationalScientificCongressRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as XI}from"@asteasolutions/zod-to-openapi";import um from"zod";XI(um);var gm=um.object({edition:um.coerce.number().int().positive()}),ni=class{constructor(e){this.internationalScientificCongressRepository=e}async handle(e,r){try{let{edition:t}=gm.parse({edition:e.params.edition}),i=await this.internationalScientificCongressRepository.findByEdition(t);return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as $I}from"@asteasolutions/zod-to-openapi";import fm from"zod";$I(fm);var ai=fm.object({id:fm.uuid()}),si=class{constructor(e){this.internationalScientificCongressRepository=e}async handle(e,r){try{let{id:t}=ai.parse({id:e.params.id}),i=await this.internationalScientificCongressRepository.findById(t);if(!i)throw new p("O congresso n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as QI}from"@asteasolutions/zod-to-openapi";import st from"zod";var eb=1,tb=10;QI(st);var ym=st.object({page:st.coerce.number().min(1).default(eb),limit:st.coerce.number().min(1).default(tb),title:st.string().optional(),edition:st.coerce.number().int().positive().optional(),location:st.string().optional(),orderBy:st.enum(["asc","desc"]).optional()}),mi=class{constructor(e){this.internationalScientificCongressRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=ym.parse(e.query),s=i*t-i,[m,c]=await Promise.all([this.internationalScientificCongressRepository.find({pagination:{offset:s,limit:i},filter:n}),this.internationalScientificCongressRepository.count({filter:n})]),d=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:d,offset:s,limit:i,congresses:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as rb}from"@asteasolutions/zod-to-openapi";import oe from"zod";rb(oe);var hm=oe.object({id:oe.uuid(),title:oe.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio").optional(),edition:oe.coerce.number().int().positive("Edi\xE7\xE3o deve ser um n\xFAmero positivo").optional(),startDate:oe.coerce.date().optional(),endDate:oe.coerce.date().optional(),description:oe.string().optional(),location:oe.string().optional(),congressLink:oe.url("Link do congresso deve ser uma URL v\xE1lida").optional().or(oe.literal("")),noticeUrl:oe.url("URL do edital deve ser uma URL v\xE1lida").optional().or(oe.literal("")),scheduleUrl:oe.url("URL do cronograma deve ser uma URL v\xE1lida").optional().or(oe.literal("")),programUrl:oe.url("URL da programa\xE7\xE3o deve ser uma URL v\xE1lida").optional().or(oe.literal("")),adminReportUrl:oe.url("URL do relat\xF3rio administrativo deve ser uma URL v\xE1lida").optional().or(oe.literal("")),proceedingsUrl:oe.url("URL dos anais deve ser uma URL v\xE1lida").optional().or(oe.literal(""))}),ci=class{constructor(e){this.internationalScientificCongressRepository=e}async handle(e,r){try{let{id:t,...i}=hm.parse({id:e.params.id,...e.body});if(!await this.internationalScientificCongressRepository.findById(t))throw new p("O congresso n\xE3o existe.");return await this.internationalScientificCongressRepository.update({...i,id:t}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var ob=9,ib=u.object({image:u.any().openapi({type:"string",format:"binary"}),caption:u.string().optional()}),nb=u.object({image:u.any().openapi({type:"string",format:"binary"}).optional(),caption:u.string().optional()}),sb=u.object({id:u.uuid(),name:u.string(),logoUrl:u.string().nullable(),congressId:u.uuid()}),Rm=u.object({id:u.uuid(),imageUrl:u.string(),caption:u.string().nullable(),congressId:u.uuid()}),Im=u.object({id:u.uuid(),title:u.string(),edition:u.number(),startDate:u.date(),endDate:u.date(),description:u.string().nullable(),location:u.string().nullable(),congressLink:u.string().nullable(),noticeUrl:u.string().nullable(),scheduleUrl:u.string().nullable(),programUrl:u.string().nullable(),adminReportUrl:u.string().nullable(),proceedingsUrl:u.string().nullable(),partners:u.array(sb),galleries:u.array(Rm),createdAt:u.date(),updatedAt:u.date()}),ll={method:"post",path:"/international-scientific-congress",tags:["International Scientific Congresses"],summary:"Create a new international scientific congress",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:pm}}}},responses:{201:{description:"International scientific congress created successfully",summary:"International Scientific Congress Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:u.object({errors:u.record(u.string(),u.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:u.object({message:u.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:u.object({message:u.string()})}}}}},ul={method:"get",path:"/international-scientific-congress",tags:["International Scientific Congresses"],summary:"List all international scientific congresses with pagination and filters",request:{query:ym},responses:{200:{description:"List of international scientific congresses retrieved successfully with pagination",summary:"International Scientific Congresses Retrieved",content:{"application/json":{schema:u.object({page:u.number(),totalPages:u.number(),offset:u.number(),limit:u.number(),congresses:u.array(Im)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:u.object({errors:u.record(u.string(),u.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:u.object({message:u.string()})}}}}},gl={method:"get",path:"/international-scientific-congress/{id}",tags:["International Scientific Congresses"],summary:"Find international scientific congress by ID",request:{params:ai},responses:{200:{description:"International scientific congress details retrieved successfully",summary:"International Scientific Congress Retrieved",content:{"application/json":{schema:Im}}},400:{description:"Invalid international scientific congress ID format",summary:"Validation Error",content:{"application/json":{schema:u.object({errors:u.record(u.string(),u.string())})}}},404:{description:"International scientific congress not found with the provided ID",summary:"International Scientific Congress Not Found",content:{"application/json":{schema:u.object({message:u.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:u.object({message:u.string()})}}}}},fl={method:"get",path:"/international-scientific-congress/edition/{edition}",tags:["International Scientific Congresses"],summary:"Find international scientific congresses by edition",request:{params:gm},responses:{200:{description:"International scientific congresses retrieved successfully by edition",summary:"International Scientific Congresses Retrieved by Edition",content:{"application/json":{schema:u.array(Im)}}},400:{description:"Invalid edition parameter provided",summary:"Validation Error",content:{"application/json":{schema:u.object({errors:u.record(u.string(),u.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:u.object({message:u.string()})}}}}},yl={method:"put",path:"/international-scientific-congress/{id}",tags:["International Scientific Congresses"],summary:"Update international scientific congress",security:[{bearerAuth:[]}],request:{params:ai,body:{content:{"application/json":{schema:hm.omit({id:!0})}}}},responses:{200:{description:"International scientific congress updated successfully",summary:"International Scientific Congress Updated"},400:{description:"Invalid input data or international scientific congress ID format",summary:"Validation Error",content:{"application/json":{schema:u.object({errors:u.record(u.string(),u.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:u.object({message:u.string()})}}},404:{description:"International scientific congress not found with the provided ID",summary:"International Scientific Congress Not Found",content:{"application/json":{schema:u.object({message:u.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:u.object({message:u.string()})}}}}},hl={method:"delete",path:"/international-scientific-congress/{id}",tags:["International Scientific Congresses"],summary:"Delete international scientific congress",security:[{bearerAuth:[]}],request:{params:lm},responses:{200:{description:"International scientific congress deleted successfully",summary:"International Scientific Congress Deleted"},400:{description:"Invalid international scientific congress ID format",summary:"Validation Error",content:{"application/json":{schema:u.object({errors:u.record(u.string(),u.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:u.object({message:u.string()})}}},404:{description:"International scientific congress not found with the provided ID",summary:"International Scientific Congress Not Found",content:{"application/json":{schema:u.object({message:u.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:u.object({message:u.string()})}}}}},AA={method:"post",path:"/international-scientific-congress/{congressId}/gallery",tags:["International Scientific Congress Gallery"],summary:"Create a new gallery image for a congress",security:[{bearerAuth:[]}],request:{params:u.object({congressId:u.uuid()}),body:{content:{"multipart/form-data":{schema:ib}}}},responses:{201:{description:"Gallery image created successfully",summary:"Gallery Image Created"},400:{description:"Invalid input data, missing required fields, or invalid image format/size",summary:"Validation Error",content:{"application/json":{schema:u.object({errors:u.record(u.string(),u.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:u.object({message:u.string()})}}},404:{description:"Congress not found with the provided ID",summary:"Congress Not Found",content:{"application/json":{schema:u.object({message:u.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:u.object({message:u.string()})}}}}},DA={method:"get",path:"/international-scientific-congress/{congressId}/gallery",tags:["International Scientific Congress Gallery"],summary:"List all gallery images for a congress with pagination",request:{params:u.object({congressId:u.uuid()}),query:u.object({page:u.coerce.number().min(1).default(1),limit:u.coerce.number().min(1).default(ob),caption:u.string().optional()})},responses:{200:{description:"Gallery images retrieved successfully with pagination",summary:"Gallery Images Retrieved",content:{"application/json":{schema:u.object({page:u.number(),totalPages:u.number(),offset:u.number(),limit:u.number(),galleries:u.array(Rm)})}}},400:{description:"Invalid congress ID format or query parameters",summary:"Validation Error",content:{"application/json":{schema:u.object({errors:u.record(u.string(),u.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:u.object({message:u.string()})}}}}},FA={method:"get",path:"/international-scientific-congress/gallery/{id}",tags:["International Scientific Congress Gallery"],summary:"Find a gallery image by ID",request:{params:u.object({id:u.uuid()})},responses:{200:{description:"Gallery image retrieved successfully",summary:"Gallery Image Retrieved",content:{"application/json":{schema:Rm}}},400:{description:"Invalid gallery image ID format",summary:"Validation Error",content:{"application/json":{schema:u.object({errors:u.record(u.string(),u.string())})}}},404:{description:"Gallery image not found with the provided ID",summary:"Gallery Image Not Found",content:{"application/json":{schema:u.object({message:u.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:u.object({message:u.string()})}}}}},BA={method:"put",path:"/international-scientific-congress/gallery/{id}",tags:["International Scientific Congress Gallery"],summary:"Update a gallery image with optional image upload",security:[{bearerAuth:[]}],request:{params:u.object({id:u.uuid()}),body:{content:{"multipart/form-data":{schema:nb}}}},responses:{200:{description:"Gallery image updated successfully",summary:"Gallery Image Updated"},400:{description:"Invalid input data, gallery ID format, or invalid image format/size",summary:"Validation Error",content:{"application/json":{schema:u.object({errors:u.record(u.string(),u.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:u.object({message:u.string()})}}},404:{description:"Gallery image not found with the provided ID",summary:"Gallery Image Not Found",content:{"application/json":{schema:u.object({message:u.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:u.object({message:u.string()})}}}}},UA={method:"delete",path:"/international-scientific-congress/gallery/{id}",tags:["International Scientific Congress Gallery"],summary:"Delete a gallery image",security:[{bearerAuth:[]}],request:{params:u.object({id:u.uuid()})},responses:{200:{description:"Gallery image deleted successfully",summary:"Gallery Image Deleted"},400:{description:"Invalid gallery ID format",summary:"Validation Error",content:{"application/json":{schema:u.object({errors:u.record(u.string(),u.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:u.object({message:u.string()})}}},404:{description:"Gallery image not found with the provided ID",summary:"Gallery Image Not Found",content:{"application/json":{schema:u.object({message:u.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:u.object({message:u.string()})}}}}};import{$Enums as db}from"@prisma/client";import N from"zod";import{extendZodWithOpenApi as ab}from"@asteasolutions/zod-to-openapi";import er from"zod";ab(er);var bm=er.object({role:er.string().min(1),description:er.string().optional(),userId:er.uuid(),order:er.number().optional()}),pi=class{constructor(e){this.legitimatorCommitteeMemberRepository=e}async handle(e,r){try{let{role:t,description:i,userId:n,order:s}=bm.parse(e.body);return await this.legitimatorCommitteeMemberRepository.create({role:t,description:i,userId:n,order:s??0}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as mb}from"@asteasolutions/zod-to-openapi";import Cm from"zod";mb(Cm);var Sm=Cm.object({id:Cm.uuid()}),di=class{constructor(e){this.legitimatorCommitteeMemberRepository=e}async handle(e,r){try{let{id:t}=Sm.parse({id:e.params.id});if(!await this.legitimatorCommitteeMemberRepository.findById(t))throw new p("O membro do comit\xEA legitimador n\xE3o existe.");return await this.legitimatorCommitteeMemberRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as cb}from"@asteasolutions/zod-to-openapi";import wm from"zod";cb(wm);var ui=wm.object({id:wm.uuid()}),li=class{constructor(e){this.legitimatorCommitteeMemberRepository=e}async handle(e,r){try{let{id:t}=ui.parse({id:e.params.id}),i=await this.legitimatorCommitteeMemberRepository.findById(t);if(!i)throw new p("O membro do comit\xEA legitimador n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as pb}from"@asteasolutions/zod-to-openapi";import vt from"zod";pb(vt);var vm=vt.object({id:vt.uuid(),role:vt.string().min(1).optional(),description:vt.string().optional(),userId:vt.uuid().optional(),order:vt.number().optional()}),gi=class{constructor(e){this.legitimatorCommitteeMemberRepository=e}async handle(e,r){try{let{id:t,role:i,description:n,userId:s,order:m}=vm.parse({id:e.params.id,...e.body});if(!await this.legitimatorCommitteeMemberRepository.findById(t))throw new p("O membro do comit\xEA legitimador n\xE3o existe.");return await this.legitimatorCommitteeMemberRepository.update({id:t,role:i,description:n,userId:s,order:m}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var lb=N.object({id:N.uuid(),name:N.string(),emailAddress:N.string(),avatarUrl:N.string().nullable(),orcid:N.string().nullable(),phone:N.string().nullable(),lattesUrl:N.string().nullable(),role:N.enum(db.UserRole)}),Rl=N.object({id:N.uuid(),role:N.string(),description:N.string().nullable(),order:N.number(),createdAt:N.date(),updatedAt:N.date(),userId:N.uuid(),user:lb}),Il={method:"post",path:"/legitimator-committee-member",tags:["Legitimator Committee Members"],summary:"Create a new Legitimator Committee Member",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:bm}}}},responses:{201:{description:"Legitimator Committee Member created successfully",summary:"Legitimator Committee Member Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:N.object({errors:N.record(N.string(),N.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:N.object({message:N.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:N.object({message:N.string()})}}}}},bl={method:"get",path:"/legitimator-committee-member",tags:["Legitimator Committee Members"],summary:"List all Legitimator Committee Members with filters",request:{query:N.object({role:N.string().optional(),orderBy:N.enum(["asc","desc"]).optional()})},responses:{200:{description:"List of Legitimator Committee Members retrieved successfully",summary:"Legitimator Committee Members Retrieved",content:{"application/json":{schema:N.object({members:N.array(Rl)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:N.object({message:N.string()})}}}}},Cl={method:"get",path:"/legitimator-committee-member/{id}",tags:["Legitimator Committee Members"],summary:"Find Legitimator Committee Member by ID",request:{params:ui},responses:{200:{description:"Legitimator Committee Member details retrieved successfully",summary:"Legitimator Committee Member Retrieved",content:{"application/json":{schema:Rl}}},400:{description:"Invalid Legitimator Committee Member ID format",summary:"Validation Error",content:{"application/json":{schema:N.object({errors:N.record(N.string(),N.string())})}}},404:{description:"Legitimator Committee Member not found with the provided ID",summary:"Legitimator Committee Member Not Found",content:{"application/json":{schema:N.object({message:N.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:N.object({message:N.string()})}}}}},Sl={method:"put",path:"/legitimator-committee-member/{id}",tags:["Legitimator Committee Members"],summary:"Update Legitimator Committee Member",security:[{bearerAuth:[]}],request:{params:ui,body:{content:{"application/json":{schema:vm.omit({id:!0})}}}},responses:{200:{description:"Legitimator Committee Member updated successfully",summary:"Legitimator Committee Member Updated"},400:{description:"Invalid input data or Legitimator Committee Member ID format",summary:"Validation Error",content:{"application/json":{schema:N.object({errors:N.record(N.string(),N.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:N.object({message:N.string()})}}},404:{description:"Legitimator Committee Member not found with the provided ID",summary:"Legitimator Committee Member Not Found",content:{"application/json":{schema:N.object({message:N.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:N.object({message:N.string()})}}}}},wl={method:"delete",path:"/legitimator-committee-member/{id}",tags:["Legitimator Committee Members"],summary:"Delete Legitimator Committee Member",security:[{bearerAuth:[]}],request:{params:Sm},responses:{200:{description:"Legitimator Committee Member deleted successfully",summary:"Legitimator Committee Member Deleted"},400:{description:"Invalid Legitimator Committee Member ID format",summary:"Validation Error",content:{"application/json":{schema:N.object({errors:N.record(N.string(),N.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:N.object({message:N.string()})}}},404:{description:"Legitimator Committee Member not found with the provided ID",summary:"Legitimator Committee Member Not Found",content:{"application/json":{schema:N.object({message:N.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:N.object({message:N.string()})}}}}};import{$Enums as hb}from"@prisma/client";import T from"zod";import{extendZodWithOpenApi as ub}from"@asteasolutions/zod-to-openapi";import We from"zod";ub(We);var Em=We.object({name:We.string().min(1),description:We.string().optional(),members:We.array(We.object({userId:We.uuid(),role:We.string().min(1),order:We.number().optional()}))}),fi=class{constructor(e){this.managementTeamRepository=e}async handle(e,r){try{let{name:t,description:i,members:n}=Em.parse(e.body);if(await this.managementTeamRepository.findByName(t))throw new ne("J\xE1 existe um time de gest\xE3o cadastrado com este nome.");return await this.managementTeamRepository.create({name:t,description:i,members:n.map(m=>({userId:m.userId,role:m.role,order:m.order??0}))}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as gb}from"@asteasolutions/zod-to-openapi";import jm from"zod";gb(jm);var xm=jm.object({id:jm.uuid()}),yi=class{constructor(e){this.managementTeamRepository=e}async handle(e,r){try{let{id:t}=xm.parse({id:e.params.id});if(!await this.managementTeamRepository.findById(t))throw new p("O time de gest\xE3o n\xE3o existe.");return await this.managementTeamRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as fb}from"@asteasolutions/zod-to-openapi";import Mm from"zod";fb(Mm);var Ri=Mm.object({id:Mm.uuid()}),hi=class{constructor(e){this.managementTeamRepository=e}async handle(e,r){try{let{id:t}=Ri.parse({id:e.params.id}),i=await this.managementTeamRepository.findById(t);if(!i)throw new p("O time de gest\xE3o n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as yb}from"@asteasolutions/zod-to-openapi";import Be from"zod";yb(Be);var Pm=Be.object({id:Be.uuid(),name:Be.string().min(1).optional(),description:Be.string().optional(),members:Be.array(Be.object({userId:Be.uuid(),role:Be.string().min(1),order:Be.number().optional()})).optional()}),Ii=class{constructor(e){this.managementTeamRepository=e}async handle(e,r){try{let{id:t,name:i,description:n,members:s}=Pm.parse({id:e.params.id,...e.body}),m=await this.managementTeamRepository.findById(t);if(!m)throw new p("O time de gest\xE3o n\xE3o existe.");if(i&&i!==m.name){let c=await this.managementTeamRepository.findByName(i);if(c&&c.id!==t)throw new ne("J\xE1 existe um time de gest\xE3o com este nome.")}return await this.managementTeamRepository.update({id:t,name:i,description:n,members:s?s.map(c=>({userId:c.userId,role:c.role,order:c.order??0})):void 0}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Rb=T.object({id:T.uuid(),name:T.string(),emailAddress:T.string(),avatarUrl:T.string().nullable(),orcid:T.string().nullable(),phone:T.string().nullable(),lattesUrl:T.string().nullable(),role:T.enum(hb.UserRole)}),Ib=T.object({id:T.uuid(),role:T.string(),description:T.string().nullable(),order:T.number(),teamId:T.uuid(),userId:T.uuid(),createdAt:T.date(),updatedAt:T.date(),user:Rb}),vl=T.object({id:T.uuid(),name:T.string(),description:T.string().nullable(),createdAt:T.date(),updatedAt:T.date(),members:T.array(Ib)}),El={method:"post",path:"/management-team",tags:["Management Teams"],summary:"Create a new Management Team with multiple members",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:Em}}}},responses:{201:{description:"Management Team created successfully",summary:"Management Team Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:T.object({errors:T.record(T.string(),T.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:T.object({message:T.string()})}}},409:{description:"Management Team with this name already exists",summary:"Conflict",content:{"application/json":{schema:T.object({message:T.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:T.object({message:T.string()})}}}}},jl={method:"get",path:"/management-team",tags:["Management Teams"],summary:"List all Management Teams with filters",request:{query:T.object({name:T.string().optional(),description:T.string().optional(),orderBy:T.enum(["asc","desc"]).optional()})},responses:{200:{description:"List of Management Teams retrieved successfully",summary:"Management Teams Retrieved",content:{"application/json":{schema:T.object({teams:T.array(vl)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:T.object({message:T.string()})}}}}},xl={method:"get",path:"/management-team/{id}",tags:["Management Teams"],summary:"Find Management Team by ID",request:{params:Ri},responses:{200:{description:"Management Team details retrieved successfully",summary:"Management Team Retrieved",content:{"application/json":{schema:vl}}},400:{description:"Invalid Management Team ID format",summary:"Validation Error",content:{"application/json":{schema:T.object({errors:T.record(T.string(),T.string())})}}},404:{description:"Management Team not found with the provided ID",summary:"Management Team Not Found",content:{"application/json":{schema:T.object({message:T.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:T.object({message:T.string()})}}}}},Ml={method:"put",path:"/management-team/{id}",tags:["Management Teams"],summary:"Update Management Team and manage member relationships",security:[{bearerAuth:[]}],request:{params:Ri,body:{content:{"application/json":{schema:Pm.omit({id:!0})}}}},responses:{200:{description:"Management Team updated successfully",summary:"Management Team Updated"},400:{description:"Invalid input data or Management Team ID format",summary:"Validation Error",content:{"application/json":{schema:T.object({errors:T.record(T.string(),T.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:T.object({message:T.string()})}}},404:{description:"Management Team not found with the provided ID",summary:"Management Team Not Found",content:{"application/json":{schema:T.object({message:T.string()})}}},409:{description:"Management Team with this name already exists",summary:"Conflict",content:{"application/json":{schema:T.object({message:T.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:T.object({message:T.string()})}}}}},Pl={method:"delete",path:"/management-team/{id}",tags:["Management Teams"],summary:"Delete Management Team",security:[{bearerAuth:[]}],request:{params:xm},responses:{200:{description:"Management Team deleted successfully",summary:"Management Team Deleted"},400:{description:"Invalid Management Team ID format",summary:"Validation Error",content:{"application/json":{schema:T.object({errors:T.record(T.string(),T.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:T.object({message:T.string()})}}},404:{description:"Management Team not found with the provided ID",summary:"Management Team Not Found",content:{"application/json":{schema:T.object({message:T.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:T.object({message:T.string()})}}}}};import{MeetingFormat as xb,MeetingStatus as Mb}from"@prisma/client";import L from"zod";import{extendZodWithOpenApi as bb}from"@asteasolutions/zod-to-openapi";import tr from"zod";var Al=10,Tl=1024,Cb=Tl*Tl,Sb=Al*Cb;bb(tr);var Tm=tr.object({title:tr.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio"),publishedAt:tr.coerce.date(),meetingId:tr.uuid(),document:tr.any().refine(o=>o==null||typeof o!="object"||typeof o.size!="number"?!1:o.size<=Sb,`O documento deve ter no m\xE1ximo ${Al}MB.`)}),bi=class{constructor(e,r,t){this.meetingMinuteRepository=e;this.meetingRepository=r;this.firebaseStorageService=t}async handle(e,r){try{let{title:t,publishedAt:i,meetingId:n,document:s}=Tm.parse({...e.body,...e.params,document:e.file});if(!await this.meetingRepository.findById(n))throw new p("A reuni\xE3o n\xE3o existe.");if(await this.meetingMinuteRepository.findByMeetingId(n))throw new a("Esta reuni\xE3o j\xE1 possui uma ata.");let d=await this.meetingMinuteRepository.create({title:t,publishedAt:i,meetingId:n,documentUrl:""}),h=await this.firebaseStorageService.uploadFile({file:s,id:d.id,folder:M.MEETING_MINUTE});return await this.meetingMinuteRepository.update({id:d.id,documentUrl:h}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as wb}from"@asteasolutions/zod-to-openapi";import Am from"zod";wb(Am);var qr=Am.object({meetingId:Am.uuid()}),Ci=class{constructor(e){this.meetingMinuteRepository=e}async handle(e,r){try{let{meetingId:t}=qr.parse({meetingId:e.params.meetingId}),i=await this.meetingMinuteRepository.findByMeetingId(t);return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as vb}from"@asteasolutions/zod-to-openapi";import rr from"zod";var Fl=10,Dl=1024,Eb=Dl*Dl,jb=Fl*Eb;vb(rr);var Dm=rr.object({meetingId:rr.uuid(),title:rr.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio").optional(),publishedAt:rr.coerce.date().optional(),document:rr.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=jb,`O documento deve ter no m\xE1ximo ${Fl}MB.`).optional()}),Si=class{constructor(e,r){this.meetingMinuteRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{meetingId:t,title:i,publishedAt:n,document:s}=Dm.parse({meetingId:e.params.meetingId,...e.body,document:e.file}),m=await this.meetingMinuteRepository.findByMeetingId(t);if(!m)throw new p("A ata n\xE3o existe para esta reuni\xE3o.");let c=m.documentUrl;return s&&(m.documentUrl&&await this.firebaseStorageService.deleteFile({fileUrl:m.documentUrl}),c=await this.firebaseStorageService.uploadFile({file:s,id:m.id,folder:M.MEETING_MINUTE})),await this.meetingMinuteRepository.update({id:m.id,title:i,publishedAt:n,documentUrl:c??void 0}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Pb=L.object({id:L.uuid(),title:L.string(),scheduledAt:L.date(),format:L.enum(xb),agenda:L.string(),meetingLink:L.string().nullable(),location:L.string().nullable(),status:L.enum(Mb),createdAt:L.date(),updatedAt:L.date()}),Tb=L.object({id:L.uuid(),title:L.string(),publishedAt:L.date(),documentUrl:L.string(),meetingId:L.uuid(),meeting:Pb,createdAt:L.date(),updatedAt:L.date()}),Bl={method:"post",path:"/meeting/{meetingId}/minute",tags:["Meetings"],summary:"Create a new meeting minute with document upload",security:[{bearerAuth:[]}],request:{params:L.object({meetingId:L.uuid()}),body:{content:{"multipart/form-data":{schema:Tm.omit({meetingId:!0})}}}},responses:{201:{description:"Meeting minute created successfully",summary:"Meeting Minute Created"},400:{description:"Invalid input data, missing required fields, or invalid document format/size",summary:"Validation Error",content:{"application/json":{schema:L.object({errors:L.record(L.string(),L.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:L.object({message:L.string()})}}},404:{description:"Meeting not found with the provided ID",summary:"Meeting Not Found",content:{"application/json":{schema:L.object({message:L.string()})}}},409:{description:"Meeting already has a minute",summary:"Conflict",content:{"application/json":{schema:L.object({message:L.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:L.object({message:L.string()})}}}}},Ul={method:"get",path:"/meeting/{meetingId}/minute",tags:["Meetings"],summary:"Find meeting minute by meeting ID",request:{params:qr},responses:{200:{description:"Meeting minute retrieved successfully by meeting ID",summary:"Meeting Minute Retrieved by Meeting ID",content:{"application/json":{schema:Tb.nullable()}}},400:{description:"Invalid meeting ID parameter provided",summary:"Validation Error",content:{"application/json":{schema:L.object({errors:L.record(L.string(),L.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:L.object({message:L.string()})}}}}},ql={method:"put",path:"/meeting/{meetingId}/minute",tags:["Meetings"],summary:"Update meeting minute with optional document upload",security:[{bearerAuth:[]}],request:{params:qr,body:{content:{"multipart/form-data":{schema:Dm.omit({meetingId:!0})}}}},responses:{200:{description:"Meeting minute updated successfully",summary:"Meeting Minute Updated"},400:{description:"Invalid input data, meeting minute ID format, or invalid document format/size",summary:"Validation Error",content:{"application/json":{schema:L.object({errors:L.record(L.string(),L.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:L.object({message:L.string()})}}},404:{description:"Meeting minute not found with the provided ID",summary:"Meeting Minute Not Found",content:{"application/json":{schema:L.object({message:L.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:L.object({message:L.string()})}}}}},kl={method:"delete",path:"/meeting/{meetingId}/minute",tags:["Meetings"],summary:"Delete meeting minute",security:[{bearerAuth:[]}],request:{params:qr},responses:{200:{description:"Meeting minute deleted successfully",summary:"Meeting Minute Deleted"},400:{description:"Invalid meeting minute ID format",summary:"Validation Error",content:{"application/json":{schema:L.object({errors:L.record(L.string(),L.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:L.object({message:L.string()})}}},404:{description:"Meeting minute not found with the provided ID",summary:"Meeting Minute Not Found",content:{"application/json":{schema:L.object({message:L.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:L.object({message:L.string()})}}}}};import{MeetingFormat as zb,MeetingStatus as Hb}from"@prisma/client";import x from"zod";import{extendZodWithOpenApi as Ab}from"@asteasolutions/zod-to-openapi";import{MeetingFormat as wi,MeetingStatus as Fm}from"@prisma/client";import Ue from"zod";Ab(Ue);var Bm=Ue.object({title:Ue.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio"),scheduledAt:Ue.coerce.date(),format:Ue.enum(wi).default(wi.ONLINE),agenda:Ue.string().min(1,"Pauta \xE9 obrigat\xF3ria"),meetingLink:Ue.string().url("Link da reuni\xE3o deve ser uma URL v\xE1lida").optional().or(Ue.literal("")),location:Ue.string().optional(),status:Ue.enum(Fm).default(Fm.PENDING)}).refine(o=>o.format===wi.ONLINE?!!o.meetingLink:o.format===wi.IN_PERSON?!!o.location:!0,{message:"Reuni\xF5es online devem ter link e reuni\xF5es presenciais devem ter localiza\xE7\xE3o",path:["format"]}),vi=class{constructor(e){this.meetingRepository=e}async handle(e,r){try{let{title:t,scheduledAt:i,format:n,agenda:s,meetingLink:m,location:c,status:d}=Bm.parse(e.body);return await this.meetingRepository.create({title:t,scheduledAt:i,format:n,agenda:s,meetingLink:m||void 0,location:c||void 0,status:d??Fm.PENDING}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Db}from"@asteasolutions/zod-to-openapi";import Um from"zod";Db(Um);var qm=Um.object({id:Um.uuid()}),Ei=class{constructor(e){this.meetingRepository=e}async handle(e,r){try{let{id:t}=qm.parse({id:e.params.id});if(!await this.meetingRepository.findById(t))throw new p("A reuni\xE3o n\xE3o existe.");return await this.meetingRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Fb}from"@asteasolutions/zod-to-openapi";import km from"zod";Fb(km);var xi=km.object({id:km.uuid()}),ji=class{constructor(e){this.meetingRepository=e}async handle(e,r){try{let{id:t}=xi.parse({id:e.params.id}),i=await this.meetingRepository.findById(t);if(!i)throw new p("A reuni\xE3o n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Bb}from"@asteasolutions/zod-to-openapi";import{MeetingStatus as Ub}from"@prisma/client";import Om from"zod";Bb(Om);var Nm=Om.object({status:Om.enum(Ub)}),Mi=class{constructor(e){this.meetingRepository=e}async handle(e,r){try{let{status:t}=Nm.parse({status:e.params.status}),i=await this.meetingRepository.findByStatus(t);return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as qb}from"@asteasolutions/zod-to-openapi";import{MeetingFormat as kb,MeetingStatus as Ob}from"@prisma/client";import at from"zod";var Nb=1,Gb=10;qb(at);var Gm=at.object({page:at.coerce.number().min(1).default(Nb),limit:at.coerce.number().min(1).default(Gb),title:at.string().optional(),format:at.enum(kb).optional(),status:at.enum(Ob).optional(),orderBy:at.enum(["asc","desc"]).optional()}),Pi=class{constructor(e){this.meetingRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=Gm.parse(e.query),s=i*t-i,[m,c]=await Promise.all([this.meetingRepository.find({pagination:{offset:s,limit:i},filter:n}),this.meetingRepository.count({filter:n})]),d=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:d,offset:s,limit:i,meetings:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Lb}from"@asteasolutions/zod-to-openapi";import{MeetingFormat as Wb,MeetingStatus as _b}from"@prisma/client";import xe from"zod";Lb(xe);var Lm=xe.object({id:xe.uuid(),title:xe.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio").optional(),scheduledAt:xe.coerce.date().optional(),format:xe.enum(Wb).optional(),agenda:xe.string().min(1,"Pauta \xE9 obrigat\xF3ria").optional(),meetingLink:xe.string().url("Link da reuni\xE3o deve ser uma URL v\xE1lida").optional().or(xe.literal("")),location:xe.string().optional(),status:xe.enum(_b).optional()}),Ti=class{constructor(e){this.meetingRepository=e}async handle(e,r){try{let{id:t,title:i,scheduledAt:n,format:s,agenda:m,meetingLink:c,location:d,status:h}=Lm.parse({id:e.params.id,...e.body});if(!await this.meetingRepository.findById(t))throw new p("A reuni\xE3o n\xE3o existe.");return await this.meetingRepository.update({id:t,title:i,scheduledAt:n,format:s,agenda:m,meetingLink:c||void 0,location:d||void 0,status:h}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Vb=x.object({id:x.uuid(),title:x.string(),publishedAt:x.date(),documentUrl:x.string(),meetingId:x.uuid(),createdAt:x.date(),updatedAt:x.date()}),Wm=x.object({id:x.uuid(),title:x.string(),scheduledAt:x.date(),format:x.enum(zb),agenda:x.string(),meetingLink:x.string().nullable(),location:x.string().nullable(),status:x.enum(Hb),minutes:Vb.nullable(),createdAt:x.date(),updatedAt:x.date()}),Ol={method:"post",path:"/meeting",tags:["Meetings"],summary:"Create a new meeting",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:Bm}}}},responses:{201:{description:"Meeting created successfully",summary:"Meeting Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:x.object({errors:x.record(x.string(),x.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:x.object({message:x.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:x.object({message:x.string()})}}}}},Nl={method:"get",path:"/meeting",tags:["Meetings"],summary:"List all meetings with pagination and filters",request:{query:Gm},responses:{200:{description:"List of meetings retrieved successfully with pagination",summary:"Meetings Retrieved",content:{"application/json":{schema:x.object({page:x.number(),totalPages:x.number(),offset:x.number(),limit:x.number(),meetings:x.array(Wm)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:x.object({errors:x.record(x.string(),x.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:x.object({message:x.string()})}}}}},Gl={method:"get",path:"/meeting/{id}",tags:["Meetings"],summary:"Find meeting by ID",request:{params:xi},responses:{200:{description:"Meeting details retrieved successfully",summary:"Meeting Retrieved",content:{"application/json":{schema:Wm}}},400:{description:"Invalid meeting ID format",summary:"Validation Error",content:{"application/json":{schema:x.object({errors:x.record(x.string(),x.string())})}}},404:{description:"Meeting not found with the provided ID",summary:"Meeting Not Found",content:{"application/json":{schema:x.object({message:x.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:x.object({message:x.string()})}}}}},Ll={method:"get",path:"/meeting/status/{status}",tags:["Meetings"],summary:"Find meetings by status",request:{params:Nm},responses:{200:{description:"Meetings retrieved successfully by status",summary:"Meetings Retrieved by Status",content:{"application/json":{schema:x.array(Wm)}}},400:{description:"Invalid status parameter provided",summary:"Validation Error",content:{"application/json":{schema:x.object({errors:x.record(x.string(),x.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:x.object({message:x.string()})}}}}},Wl={method:"put",path:"/meeting/{id}",tags:["Meetings"],summary:"Update meeting",security:[{bearerAuth:[]}],request:{params:xi,body:{content:{"application/json":{schema:Lm.omit({id:!0})}}}},responses:{200:{description:"Meeting updated successfully",summary:"Meeting Updated"},400:{description:"Invalid input data or meeting ID format",summary:"Validation Error",content:{"application/json":{schema:x.object({errors:x.record(x.string(),x.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:x.object({message:x.string()})}}},404:{description:"Meeting not found with the provided ID",summary:"Meeting Not Found",content:{"application/json":{schema:x.object({message:x.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:x.object({message:x.string()})}}}}},_l={method:"delete",path:"/meeting/{id}",tags:["Meetings"],summary:"Delete meeting",security:[{bearerAuth:[]}],request:{params:qm},responses:{200:{description:"Meeting deleted successfully",summary:"Meeting Deleted"},400:{description:"Invalid meeting ID format",summary:"Validation Error",content:{"application/json":{schema:x.object({errors:x.record(x.string(),x.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:x.object({message:x.string()})}}},404:{description:"Meeting not found with the provided ID",summary:"Meeting Not Found",content:{"application/json":{schema:x.object({message:x.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:x.object({message:x.string()})}}}}};import D from"zod";import{extendZodWithOpenApi as Zb}from"@asteasolutions/zod-to-openapi";import kr from"zod";var Kb=5,zl=1024,Jb=zl*zl,Yb=Kb*Jb;Zb(kr);var _m=kr.object({title:kr.string().min(1),content:kr.string().min(1),image:kr.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=Yb,{message:"A imagem deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB."})}),Ai=class{constructor(e,r){this.newsRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{title:t,content:i,image:n}=_m.parse({...e.body,image:e.file}),s=e.user.id,m=await this.firebaseStorageService.uploadFile({file:n,folder:M.NEWS,id:s});await this.newsRepository.create({title:t,content:i,authorId:s,imageUrl:m}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Xb}from"@asteasolutions/zod-to-openapi";import mt from"zod";var $b=1,Qb=7;Xb(mt);var Fi=mt.object({page:mt.coerce.number().min(1).default($b),limit:mt.coerce.number().min(1).default(Qb),authorId:mt.string(),title:mt.string().optional(),content:mt.string().optional(),orderBy:mt.enum(["asc","desc"]).default("desc")}),Di=class{constructor(e){this.newsRepository=e}async handle(e,r){try{let{page:t,limit:i,authorId:n,...s}=Fi.parse(e.query),m=i*t-i,[c,d]=await Promise.all([this.newsRepository.findByAuthorId({authorId:n,pagination:{offset:m,limit:i},filter:s}),this.newsRepository.count({filter:{authorId:n,...s}})]),h=Math.max(Math.ceil(d/i),1);r.status(200).json({page:t,totalPages:h,offset:m,limit:i,news:c})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as eC}from"@asteasolutions/zod-to-openapi";import zm from"zod";eC(zm);var Hm=zm.object({id:zm.string()}),Bi=class{constructor(e){this.newsRepository=e}async handle(e,r){try{let{id:t}=Hm.parse(e.params),i=await this.newsRepository.findById(t);if(!i)throw new p("Not\xEDcia n\xE3o encontrada.");r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as tC}from"@asteasolutions/zod-to-openapi";import ct from"zod";var rC=1,oC=9;tC(ct);var Vm=ct.object({page:ct.coerce.number().min(1).default(rC),limit:ct.coerce.number().min(1).default(oC),title:ct.string().optional(),content:ct.string().optional(),authorId:ct.string().optional(),orderBy:ct.enum(["asc","desc"]).default("desc")}),Ui=class{constructor(e){this.newsRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=Vm.parse(e.query),s=i*t-i,[m,c]=await Promise.all([this.newsRepository.find({pagination:{offset:s,limit:i},filter:n}),this.newsRepository.count({filter:n})]),d=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:d,offset:s,limit:i,news:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Hl={method:"post",path:"/news",tags:["News"],summary:"Create news",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:_m}}}},responses:{201:{description:"News article created successfully",summary:"News Created",content:{"application/json":{schema:D.object({message:D.string()})}}},400:{description:"Invalid input data or file format",summary:"Validation Error",content:{"application/json":{schema:D.object({errors:D.record(D.string(),D.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:D.object({message:D.string()})}}}}},Vl={method:"get",path:"/news",tags:["News"],summary:"List news",request:{query:Vm},responses:{200:{description:"Paginated list of news articles retrieved successfully",summary:"News Retrieved",content:{"application/json":{schema:D.object({page:D.number(),totalPages:D.number(),offset:D.number(),limit:D.number(),news:D.array(D.object({title:D.string(),content:D.string(),id:D.string(),createdAt:D.date(),updatedAt:D.date(),imageUrl:D.string().nullable()}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:D.object({errors:D.record(D.string(),D.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:D.object({message:D.string()})}}}}},Zl={method:"get",path:"/news/{id}",tags:["News"],summary:"Find news by ID",request:{params:Hm},responses:{200:{description:"News article details retrieved successfully",summary:"News Retrieved",content:{"application/json":{schema:D.object({page:D.number(),totalPages:D.number(),offset:D.number(),limit:D.number(),news:D.object({title:D.string(),content:D.string(),id:D.string(),createdAt:D.date(),updatedAt:D.date(),imageUrl:D.string().nullable()})})}}},400:{description:"Invalid news ID format",summary:"Validation Error",content:{"application/json":{schema:D.object({errors:D.record(D.string(),D.string())})}}},404:{description:"News article not found with the provided ID",summary:"News Not Found",content:{"application/json":{schema:D.object({message:D.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:D.object({message:D.string()})}}}}},Kl={method:"get",path:"/news/author/{author_id}",tags:["News"],summary:"List news by author",request:{params:Fi.pick({authorId:!0}).transform(()=>({author_id:""})),query:Fi.omit({authorId:!0})},responses:{200:{description:"Paginated list of news articles by author retrieved successfully",summary:"Author News Retrieved",content:{"application/json":{schema:D.object({page:D.number(),totalPages:D.number(),offset:D.number(),limit:D.number(),news:D.array(D.object({title:D.string(),content:D.string(),id:D.string(),createdAt:D.date(),updatedAt:D.date(),imageUrl:D.string().nullable()}))})}}},400:{description:"Invalid author ID or query parameters",summary:"Validation Error",content:{"application/json":{schema:D.object({errors:D.record(D.string(),D.string())})}}},404:{description:"Author not found with the provided ID",summary:"Author Not Found",content:{"application/json":{schema:D.object({message:D.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:D.object({message:D.string()})}}}}};import U from"zod";import{extendZodWithOpenApi as iC}from"@asteasolutions/zod-to-openapi";import qe from"zod";var Yl=2,Jl=1024,nC=Jl*Jl,sC=Yl*nC;iC(qe);var Zm=qe.object({name:qe.string().min(1,"Nome \xE9 obrigat\xF3rio"),logo:qe.any().refine(o=>o==null||typeof o!="object"||typeof o.size!="number"?!1:o.size<=sC,`A imagem deve ter no m\xE1ximo ${Yl}MB.`),websiteUrl:qe.url("URL do site deve ser v\xE1lida").optional(),description:qe.string().optional(),category:qe.string().optional(),since:qe.coerce.date(),isActive:qe.preprocess(o=>o==="true",qe.boolean().optional())}),qi=class{constructor(e,r){this.partnerRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{name:t,logo:i,websiteUrl:n,description:s,category:m,since:c,isActive:d}=Zm.parse({...e.body,logo:e.file}),h=await this.partnerRepository.create({name:t,websiteUrl:n,description:s,category:m,since:c,isActive:d}),j=await this.firebaseStorageService.uploadFile({file:i,id:h.id,folder:M.PARTNER});return await this.partnerRepository.update({id:h.id,logoUrl:j}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as aC}from"@asteasolutions/zod-to-openapi";import Km from"zod";aC(Km);var Jm=Km.object({id:Km.uuid()}),ki=class{constructor(e,r){this.partnerRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=Jm.parse({id:e.params.id}),i=await this.partnerRepository.findById(t);if(!i)throw new p("O parceiro n\xE3o existe.");return i.logoUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.logoUrl}),await this.partnerRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as mC}from"@asteasolutions/zod-to-openapi";import Ym from"zod";mC(Ym);var Ni=Ym.object({id:Ym.uuid()}),Oi=class{constructor(e){this.partnerRepository=e}async handle(e,r){try{let{id:t}=Ni.parse({id:e.params.id}),i=await this.partnerRepository.findById(t);if(!i)throw new p("O parceiro n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as cC}from"@asteasolutions/zod-to-openapi";import _e from"zod";var pC=1,dC=9;cC(_e);var Xm=_e.object({page:_e.coerce.number().min(1).default(pC),limit:_e.coerce.number().min(1).default(dC),name:_e.string().optional(),description:_e.string().optional(),category:_e.string().optional(),isActive:_e.coerce.boolean().optional(),orderBy:_e.enum(["asc","desc"]).optional()}),Gi=class{constructor(e){this.partnerRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=Xm.parse(e.query),s=i*t-i,[m,c]=await Promise.all([this.partnerRepository.find({pagination:{offset:s,limit:i},filter:n}),this.partnerRepository.count({filter:n})]),d=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:d,offset:s,limit:i,partners:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as lC}from"@asteasolutions/zod-to-openapi";import Me from"zod";var $l=2,Xl=1024,uC=Xl*Xl,gC=$l*uC;lC(Me);var $m=Me.object({id:Me.uuid(),name:Me.string().min(1,"Nome \xE9 obrigat\xF3rio").optional(),logo:Me.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=gC,`A imagem deve ter no m\xE1ximo ${$l}MB.`).optional(),websiteUrl:Me.url("URL do site deve ser v\xE1lida").optional(),description:Me.string().optional(),category:Me.string().optional(),since:Me.coerce.date().optional(),isActive:Me.preprocess(o=>o==="true",Me.boolean().optional())}),Li=class{constructor(e,r){this.partnerRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,name:i,logo:n,websiteUrl:s,description:m,category:c,since:d,isActive:h}=$m.parse({id:e.params.id,...e.body,logo:e.file}),j=await this.partnerRepository.findById(t);if(!j)throw new p("O parceiro n\xE3o existe.");let q=j.logoUrl;if(n&&(q=await this.firebaseStorageService.uploadFile({file:n,id:t,folder:"images/partners"})),!q)throw new a("Logo URL \xE9 obrigat\xF3rio");return await this.partnerRepository.update({id:t,name:i,logoUrl:q,websiteUrl:s,description:m,category:c,since:d,isActive:h}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Ql=U.object({id:U.uuid(),name:U.string(),logoUrl:U.string(),description:U.string().nullable(),category:U.string().nullable(),since:U.date(),isActive:U.boolean(),createdAt:U.date(),updatedAt:U.date()}),eu={method:"post",path:"/partner",tags:["Partners"],summary:"Create a new partner with logo upload",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:Zm}}}},responses:{201:{description:"Partner created successfully",summary:"Partner Created"},400:{description:"Invalid input data, missing required fields, or invalid logo format/size",summary:"Validation Error",content:{"application/json":{schema:U.object({errors:U.record(U.string(),U.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:U.object({message:U.string()})}}},409:{description:"Partner with this name already exists",summary:"Conflict",content:{"application/json":{schema:U.object({message:U.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:U.object({message:U.string()})}}}}},tu={method:"get",path:"/partner",tags:["Partners"],summary:"List all partners with pagination and filters",request:{query:Xm},responses:{200:{description:"List of partners retrieved successfully with pagination",summary:"Partners Retrieved",content:{"application/json":{schema:U.object({page:U.number(),totalPages:U.number(),offset:U.number(),limit:U.number(),partners:U.array(Ql)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:U.object({errors:U.record(U.string(),U.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:U.object({message:U.string()})}}}}},ru={method:"get",path:"/partner/{id}",tags:["Partners"],summary:"Find partner by ID",request:{params:Ni},responses:{200:{description:"Partner details retrieved successfully",summary:"Partner Retrieved",content:{"application/json":{schema:Ql}}},400:{description:"Invalid partner ID format",summary:"Validation Error",content:{"application/json":{schema:U.object({errors:U.record(U.string(),U.string())})}}},404:{description:"Partner not found with the provided ID",summary:"Partner Not Found",content:{"application/json":{schema:U.object({message:U.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:U.object({message:U.string()})}}}}},ou={method:"put",path:"/partner/{id}",tags:["Partners"],summary:"Update partner with optional logo upload",security:[{bearerAuth:[]}],request:{params:Ni,body:{content:{"multipart/form-data":{schema:$m.omit({id:!0})}}}},responses:{200:{description:"Partner updated successfully",summary:"Partner Updated"},400:{description:"Invalid input data, partner ID format, or invalid logo format/size",summary:"Validation Error",content:{"application/json":{schema:U.object({errors:U.record(U.string(),U.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:U.object({message:U.string()})}}},404:{description:"Partner not found with the provided ID",summary:"Partner Not Found",content:{"application/json":{schema:U.object({message:U.string()})}}},409:{description:"Partner with this name already exists",summary:"Conflict",content:{"application/json":{schema:U.object({message:U.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:U.object({message:U.string()})}}}}},iu={method:"delete",path:"/partner/{id}",tags:["Partners"],summary:"Delete partner",security:[{bearerAuth:[]}],request:{params:Jm},responses:{200:{description:"Partner deleted successfully",summary:"Partner Deleted"},400:{description:"Invalid partner ID format",summary:"Validation Error",content:{"application/json":{schema:U.object({errors:U.record(U.string(),U.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:U.object({message:U.string()})}}},404:{description:"Partner not found with the provided ID",summary:"Partner Not Found",content:{"application/json":{schema:U.object({message:U.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:U.object({message:U.string()})}}}}};import{$Enums as nu}from"@prisma/client";import O from"zod";import{extendZodWithOpenApi as fC}from"@asteasolutions/zod-to-openapi";import{PendencyStatus as yC}from"@prisma/client";import pt from"zod";fC(pt);var _i=pt.object({userId:pt.uuid(),title:pt.string().min(1),description:pt.string().optional(),status:pt.enum(yC).default("PENDING"),dueDate:pt.coerce.date().optional(),document:pt.any().refine(o=>o&&typeof o=="object"&&o.size>0,"Arquivo do documento \xE9 obrigat\xF3rio")}),Wi=class{constructor(e,r,t){this.userRepository=e;this.pendencyRepository=r;this.firebaseStorageService=t}async handle(e,r){try{let{userId:t,title:i,description:n,status:s,dueDate:m,document:c}=_i.parse({...e.body,userId:e.params.user_id,document:e.file});if(!await this.userRepository.findById(t))throw new de("O usu\xE1rio n\xE3o existe.");let h=await this.firebaseStorageService.uploadFile({file:c,id:t,folder:M.PENDENCY});return await this.pendencyRepository.create({userId:t,title:i,description:n,status:s,dueDate:m,documentUrl:h}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as hC}from"@asteasolutions/zod-to-openapi";import Qm from"zod";hC(Qm);var ec=Qm.object({id:Qm.uuid()}),zi=class{constructor(e,r){this.pendencyRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=ec.parse({id:e.params.pendency_id}),i=await this.pendencyRepository.findById(t);if(!i)throw new p("A pend\xEAncia n\xE3o existe.");return await Promise.all([this.pendencyRepository.deleteById(i.id),this.firebaseStorageService.deleteFile({fileUrl:i.documentUrl})]),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as RC}from"@asteasolutions/zod-to-openapi";import{PendencyStatus as IC}from"@prisma/client";import ze from"zod";var bC=1,CC=6;RC(ze);var tc=ze.object({page:ze.coerce.number().min(1).default(bC),limit:ze.coerce.number().min(1).default(CC),title:ze.string().optional(),description:ze.string().optional(),status:ze.enum(IC).default("PENDING"),userId:ze.uuid().optional(),orderBy:ze.enum(["asc","desc"]).default("desc")}),Hi=class{constructor(e){this.pendencyRepository=e}async handle(e,r){try{let{description:t,limit:i,orderBy:n,page:s,title:m,status:c,userId:d}=tc.parse(e.query),h=s*i-i,[j,q]=await Promise.all([this.pendencyRepository.find({pagination:{offset:h,limit:i},filter:{title:m,description:t,status:c,orderBy:n,userId:d}}),this.pendencyRepository.count({filter:{title:m,description:t,status:c,userId:d}})]),$=Math.max(Math.ceil(q/i),1);return r.status(200).json({page:s,totalPages:$,offset:h,limit:i,pendencies:j})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as SC}from"@asteasolutions/zod-to-openapi";import rc from"zod";SC(rc);var oc=rc.object({pendencyId:rc.uuid()}),Vi=class{constructor(e){this.pendencyRepository=e}async handle(e,r){try{let{pendencyId:t}=oc.parse({pendencyId:e.params.pendency_id}),i=await this.pendencyRepository.findById(t);if(!i)throw new p("Pend\xEAncia n\xE3o encontrada.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as wC}from"@asteasolutions/zod-to-openapi";import{PendencyStatus as vC}from"@prisma/client";import dt from"zod";wC(dt);var Ki=dt.object({id:dt.uuid(),title:dt.string().min(1),description:dt.string().optional(),status:dt.enum(vC),dueDate:dt.coerce.date().optional(),document:dt.any().refine(o=>o==null||typeof o=="object"&&typeof o.size=="number"&&(o.size===0||o.size>0),"Arquivo do documento \xE9 inv\xE1lido").optional()}),Zi=class{constructor(e,r){this.pendencyRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{document:t,id:i,...n}=Ki.parse({...e.body,id:e.params.pendency_id,document:e.file}),s=await this.pendencyRepository.findById(i);if(!s)throw new de("A pend\xEAncia n\xE3o existe");let m=s.documentUrl;return t&&t.size>0&&(m=await this.firebaseStorageService.updateFile({file:t,id:s.userId,folder:M.PENDENCY,fileUrl:s.documentUrl})),await this.pendencyRepository.update({...n,id:i,documentUrl:m}),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var su={method:"post",path:"/pendency/{user_id}",tags:["Pendencies"],summary:"Create pendency for user",security:[{bearerAuth:[]}],request:{params:_i.pick({userId:!0}).transform(()=>({user_id:""})),body:{content:{"multipart/form-data":{schema:_i.omit({userId:!0})}}}},responses:{201:{description:"Pendency created successfully for the user",summary:"Pendency Created",content:{"application/json":{schema:O.object({})}}},400:{description:"Invalid input data or file format",summary:"Validation Error",content:{"application/json":{schema:O.object({errors:O.record(O.string(),O.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:O.object({message:O.string()})}}}}},au={method:"get",path:"/pendency",tags:["Pendencies"],summary:"List pendencies",security:[{bearerAuth:[]}],request:{query:tc},responses:{200:{description:"Paginated list of pendencies retrieved successfully",summary:"Pendencies Retrieved",content:{"application/json":{schema:O.object({page:O.number(),totalPages:O.number(),offset:O.number(),limit:O.number(),pendencies:O.array(O.object({id:O.string(),title:O.string(),description:O.string().nullable(),status:O.enum(nu.PendencyStatus),dueDate:O.date().nullable(),documentUrl:O.string(),userId:O.string(),createdAt:O.date(),updatedAt:O.date()}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:O.object({errors:O.record(O.string(),O.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:O.object({message:O.string()})}}}}},mu={method:"get",path:"/pendency/{pendency_id}",tags:["Pendencies"],summary:"Find pendency by ID",security:[{bearerAuth:[]}],request:{params:oc},responses:{200:{description:"Pendency details retrieved successfully",summary:"Pendency Retrieved",content:{"application/json":{schema:O.object({id:O.string(),title:O.string(),description:O.string().nullable(),status:O.enum(nu.PendencyStatus),dueDate:O.date().nullable(),documentUrl:O.string(),userId:O.string(),createdAt:O.date(),updatedAt:O.date()}).nullable()}}},400:{description:"Invalid pendency ID format",summary:"Validation Error",content:{"application/json":{schema:O.object({errors:O.record(O.string(),O.string())})}}},404:{description:"Pendency not found with the provided ID",summary:"Pendency Not Found",content:{"application/json":{schema:O.object({message:O.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:O.object({message:O.string()})}}}}},cu={method:"put",path:"/pendency/{pendency_id}",tags:["Pendencies"],summary:"Update pendency",security:[{bearerAuth:[]}],request:{params:Ki.pick({id:!0}).transform(()=>({pendency_id:""})),body:{content:{"multipart/form-data":{schema:Ki.omit({id:!0})}}}},responses:{204:{description:"Pendency updated successfully",summary:"Pendency Updated"},400:{description:"Invalid input data or pendency does not exist",summary:"Validation Error",content:{"application/json":{schema:O.object({errors:O.record(O.string(),O.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:O.object({message:O.string()})}}}}},pu={method:"delete",path:"/pendency/{pendency_id}",tags:["Pendencies"],summary:"Delete pendency",security:[{bearerAuth:[]}],request:{params:ec},responses:{204:{description:"Pendency deleted successfully",summary:"Pendency Deleted"},400:{description:"Invalid pendency ID format",summary:"Validation Error",content:{"application/json":{schema:O.object({errors:O.record(O.string(),O.string())})}}},404:{description:"Pendency not found with the provided ID",summary:"Pendency Not Found",content:{"application/json":{schema:O.object({message:O.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:O.object({message:O.string()})}}}}};import v from"zod";import{extendZodWithOpenApi as EC}from"@asteasolutions/zod-to-openapi";import ic from"zod";EC(ic);var nc=ic.object({id:ic.uuid()}),Ji=class{constructor(e,r){this.postGraduateProgramRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=nc.parse({id:e.params.id}),i=await this.postGraduateProgramRepository.findById(t);if(!i)throw new p("O programa de p\xF3s-gradua\xE7\xE3o n\xE3o existe.");return i.imageUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.imageUrl}),await this.postGraduateProgramRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as jC}from"@asteasolutions/zod-to-openapi";import sc from"zod";jC(sc);var ac=sc.object({id:sc.uuid()}),Yi=class{constructor(e){this.postGraduateProgramRepository=e}async handle(e,r){try{let{id:t}=ac.parse({id:e.params.id}),i=await this.postGraduateProgramRepository.findById(t);if(!i)throw new p("Programa de p\xF3s-gradua\xE7\xE3o n\xE3o encontrado.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as xC}from"@asteasolutions/zod-to-openapi";import lt from"zod";var MC=1,PC=6;xC(lt);var mc=lt.object({page:lt.coerce.number().min(1).default(MC),limit:lt.coerce.number().min(1).default(PC),title:lt.string().optional(),description:lt.string().optional(),contact:lt.string().optional(),orderBy:lt.enum(["asc","desc"]).default("desc")}),Xi=class{constructor(e){this.postGraduateProgramRepository=e}async handle(e,r){try{let{limit:t,page:i,...n}=mc.parse(e.query),s=i*t-t,[m,c]=await Promise.all([this.postGraduateProgramRepository.find({pagination:{offset:s,limit:t},filter:n}),this.postGraduateProgramRepository.count({filter:n})]),d=Math.max(Math.ceil(c/t),1);return r.status(200).json({page:i,totalPages:d,offset:s,limit:t,postGraduatePrograms:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as TC}from"@asteasolutions/zod-to-openapi";import ke from"zod";var lu=5,du=1024,AC=du*du,DC=lu*AC;TC(ke);var cc=ke.object({id:ke.uuid(),title:ke.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio.").optional(),description:ke.string().optional(),startDate:ke.coerce.date().optional(),endDate:ke.coerce.date().optional(),contact:ke.string().min(1,"Contato \xE9 obrigat\xF3rio.").optional(),registrationLink:ke.url("URL de inscri\xE7\xE3o deve ser v\xE1lida").optional(),image:ke.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=DC,`A imagem deve ter no m\xE1ximo ${lu}MB.`).optional()}),$i=class{constructor(e,r){this.postGraduateProgramRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,image:i,title:n,description:s,startDate:m,endDate:c,contact:d,registrationLink:h}=cc.parse({id:e.params.id,...e.body,image:e.file}),j=await this.postGraduateProgramRepository.findById(t);if(!j)throw new p("O programa de p\xF3s-gradua\xE7\xE3o n\xE3o existe.");let q=j.imageUrl;if(i&&(q=await this.firebaseStorageService.uploadFile({file:i,id:t,folder:M.POST_GRADUATE_PROGRAM})),!q)throw new a("URL da imagem \xE9 obrigat\xF3rio");return await this.postGraduateProgramRepository.update({id:t,title:n,description:s,startDate:m,endDate:c,contact:d,registrationLink:h,imageUrl:q}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var uu={method:"post",path:"/post-graduate-programs",tags:["Post Graduate Programs"],summary:"Create post-graduate program",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:v.object({title:v.string().min(1).openapi({description:"T\xEDtulo do programa"}),description:v.string().optional().openapi({description:"Descri\xE7\xE3o do programa"}),startDate:v.string().openapi({description:"Data de in\xEDcio (ISO 8601)",example:"2024-01-01T10:00:00Z"}),endDate:v.string().openapi({description:"Data de t\xE9rmino (ISO 8601)",example:"2024-12-31T10:00:00Z"}),contact:v.string().min(1).openapi({description:"Informa\xE7\xF5es de contato"}),registrationLink:v.string().url().optional().openapi({description:"Link de inscri\xE7\xE3o"}),image:v.string().optional().openapi({description:"Imagem do programa (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{201:{description:"Post-graduate program created successfully",summary:"Program Created"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:v.object({errors:v.record(v.string(),v.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:v.object({message:v.string()})}}}}},gu={method:"get",path:"/post-graduate-programs",tags:["Post Graduate Programs"],summary:"List post-graduate programs",security:[{bearerAuth:[]}],request:{query:mc},responses:{200:{description:"Paginated list of post-graduate programs retrieved successfully",summary:"Programs Retrieved",content:{"application/json":{schema:v.object({page:v.number(),totalPages:v.number(),offset:v.number(),limit:v.number(),postGraduatePrograms:v.array(v.object({id:v.string(),title:v.string(),imageUrl:v.string().nullable(),description:v.string().nullable(),startDate:v.date(),endDate:v.date(),contact:v.string(),registrationLink:v.string().nullable(),createdAt:v.date(),updatedAt:v.date()}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:v.object({errors:v.record(v.string(),v.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:v.object({message:v.string()})}}}}},fu={method:"get",path:"/post-graduate-programs/{id}",tags:["Post Graduate Programs"],summary:"Find post-graduate program by ID",security:[{bearerAuth:[]}],request:{params:ac},responses:{200:{description:"Post-graduate program details retrieved successfully",summary:"Program Retrieved",content:{"application/json":{schema:v.object({id:v.string(),title:v.string(),imageUrl:v.string().nullable(),description:v.string().nullable(),startDate:v.date(),endDate:v.date(),contact:v.string(),registrationLink:v.string().nullable(),createdAt:v.date(),updatedAt:v.date()}).nullable()}}},400:{description:"Invalid program ID format",summary:"Validation Error",content:{"application/json":{schema:v.object({errors:v.record(v.string(),v.string())})}}},404:{description:"Post-graduate program not found with the provided ID",summary:"Program Not Found",content:{"application/json":{schema:v.object({message:v.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:v.object({message:v.string()})}}}}},yu={method:"put",path:"/post-graduate-programs/{id}",tags:["Post Graduate Programs"],summary:"Update post-graduate program",security:[{bearerAuth:[]}],request:{params:cc.pick({id:!0}),body:{content:{"multipart/form-data":{schema:v.object({title:v.string().min(1).optional().openapi({description:"T\xEDtulo do programa"}),description:v.string().optional().openapi({description:"Descri\xE7\xE3o do programa"}),startDate:v.string().optional().openapi({description:"Data de in\xEDcio (ISO 8601)",example:"2024-01-01T10:00:00Z"}),endDate:v.string().optional().openapi({description:"Data de t\xE9rmino (ISO 8601)",example:"2024-12-31T10:00:00Z"}),contact:v.string().min(1).optional().openapi({description:"Informa\xE7\xF5es de contato"}),registrationLink:v.string().url().optional().openapi({description:"Link de inscri\xE7\xE3o"}),image:v.string().optional().openapi({description:"Imagem do programa (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{200:{description:"Post-graduate program updated successfully",summary:"Program Updated"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:v.object({errors:v.record(v.string(),v.string())})}}},404:{description:"Post-graduate program not found with the provided ID",summary:"Program Not Found",content:{"application/json":{schema:v.object({message:v.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:v.object({message:v.string()})}}}}},hu={method:"delete",path:"/post-graduate-programs/{id}",tags:["Post Graduate Programs"],summary:"Delete post-graduate program",security:[{bearerAuth:[]}],request:{params:nc},responses:{200:{description:"Post-graduate program deleted successfully",summary:"Program Deleted"},400:{description:"Invalid program ID format",summary:"Validation Error",content:{"application/json":{schema:v.object({errors:v.record(v.string(),v.string())})}}},404:{description:"Post-graduate program not found with the provided ID",summary:"Program Not Found",content:{"application/json":{schema:v.object({message:v.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:v.object({message:v.string()})}}}}};import{$Enums as kC}from"@prisma/client";import W from"zod";import{extendZodWithOpenApi as FC}from"@asteasolutions/zod-to-openapi";import Or from"zod";FC(Or);var pc=Or.object({role:Or.string().min(1),description:Or.string().optional(),userId:Or.uuid()}),Qi=class{constructor(e){this.referenceCenterTeamMemberRepository=e}async handle(e,r){try{let{role:t,description:i,userId:n}=pc.parse(e.body);return await this.referenceCenterTeamMemberRepository.create({role:t,description:i,userId:n}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as BC}from"@asteasolutions/zod-to-openapi";import dc from"zod";BC(dc);var lc=dc.object({id:dc.uuid()}),en=class{constructor(e){this.referenceCenterTeamMemberRepository=e}async handle(e,r){try{let{id:t}=lc.parse({id:e.params.id});if(!await this.referenceCenterTeamMemberRepository.findById(t))throw new p("O membro do centro de refer\xEAncia n\xE3o existe.");return await this.referenceCenterTeamMemberRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as UC}from"@asteasolutions/zod-to-openapi";import uc from"zod";UC(uc);var rn=uc.object({id:uc.uuid()}),tn=class{constructor(e){this.referenceCenterTeamMemberRepository=e}async handle(e,r){try{let{id:t}=rn.parse({id:e.params.id}),i=await this.referenceCenterTeamMemberRepository.findById(t);if(!i)throw new p("O membro do centro de refer\xEAncia n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as qC}from"@asteasolutions/zod-to-openapi";import or from"zod";qC(or);var gc=or.object({id:or.uuid(),role:or.string().min(1).optional(),description:or.string().optional(),userId:or.uuid().optional()}),on=class{constructor(e){this.referenceCenterTeamMemberRepository=e}async handle(e,r){try{let{id:t,role:i,description:n,userId:s}=gc.parse({id:e.params.id,...e.body});if(!await this.referenceCenterTeamMemberRepository.findById(t))throw new p("O membro do centro de refer\xEAncia n\xE3o existe.");return await this.referenceCenterTeamMemberRepository.update({id:t,role:i,description:n,userId:s}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var OC=W.object({id:W.uuid(),name:W.string(),emailAddress:W.string(),avatarUrl:W.string().nullable(),orcid:W.string().nullable(),phone:W.string().nullable(),lattesUrl:W.string().nullable(),role:W.enum(kC.UserRole)}),Ru=W.object({id:W.uuid(),role:W.string(),description:W.string().nullable(),createdAt:W.date(),updatedAt:W.date(),userId:W.uuid(),user:OC}),Iu={method:"post",path:"/reference-center-team-member",tags:["Reference Center Team Members"],summary:"Create a new Reference Center Team Member",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:pc}}}},responses:{201:{description:"Reference Center Team Member created successfully",summary:"Reference Center Team Member Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:W.object({errors:W.record(W.string(),W.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:W.object({message:W.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:W.object({message:W.string()})}}}}},bu={method:"get",path:"/reference-center-team-member",tags:["Reference Center Team Members"],summary:"List all Reference Center Team Members with filters",request:{query:W.object({role:W.string().optional(),orderBy:W.enum(["asc","desc"]).optional()})},responses:{200:{description:"List of Reference Center Team Members retrieved successfully",summary:"Reference Center Team Members Retrieved",content:{"application/json":{schema:W.object({members:W.array(Ru)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:W.object({message:W.string()})}}}}},Cu={method:"get",path:"/reference-center-team-member/{id}",tags:["Reference Center Team Members"],summary:"Find Reference Center Team Member by ID",request:{params:rn},responses:{200:{description:"Reference Center Team Member details retrieved successfully",summary:"Reference Center Team Member Retrieved",content:{"application/json":{schema:Ru}}},400:{description:"Invalid Reference Center Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:W.object({errors:W.record(W.string(),W.string())})}}},404:{description:"Reference Center Team Member not found with the provided ID",summary:"Reference Center Team Member Not Found",content:{"application/json":{schema:W.object({message:W.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:W.object({message:W.string()})}}}}},Su={method:"put",path:"/reference-center-team-member/{id}",tags:["Reference Center Team Members"],summary:"Update Reference Center Team Member",security:[{bearerAuth:[]}],request:{params:rn,body:{content:{"application/json":{schema:gc.omit({id:!0})}}}},responses:{200:{description:"Reference Center Team Member updated successfully",summary:"Reference Center Team Member Updated"},400:{description:"Invalid input data or Reference Center Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:W.object({errors:W.record(W.string(),W.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:W.object({message:W.string()})}}},404:{description:"Reference Center Team Member not found with the provided ID",summary:"Reference Center Team Member Not Found",content:{"application/json":{schema:W.object({message:W.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:W.object({message:W.string()})}}}}},wu={method:"delete",path:"/reference-center-team-member/{id}",tags:["Reference Center Team Members"],summary:"Delete Reference Center Team Member",security:[{bearerAuth:[]}],request:{params:lc},responses:{200:{description:"Reference Center Team Member deleted successfully",summary:"Reference Center Team Member Deleted"},400:{description:"Invalid Reference Center Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:W.object({errors:W.record(W.string(),W.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:W.object({message:W.string()})}}},404:{description:"Reference Center Team Member not found with the provided ID",summary:"Reference Center Team Member Not Found",content:{"application/json":{schema:W.object({message:W.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:W.object({message:W.string()})}}}}};import{RegimentStatus as eS}from"@prisma/client";import B from"zod";import{extendZodWithOpenApi as NC}from"@asteasolutions/zod-to-openapi";import{RegimentStatus as Eu}from"@prisma/client";import Et from"zod";var ju=10,vu=1024,GC=vu*vu,LC=ju*GC;NC(Et);var fc=Et.object({title:Et.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio"),version:Et.string().min(1,"Vers\xE3o \xE9 obrigat\xF3ria"),publishedAt:Et.coerce.date(),document:Et.any().refine(o=>o==null||typeof o!="object"||typeof o.size!="number"?!1:o.size<=LC,`O documento deve ter no m\xE1ximo ${ju}MB.`),status:Et.enum(Eu).optional()}),nn=class{constructor(e,r){this.regimentRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{title:t,version:i,publishedAt:n,document:s,status:m}=fc.parse({...e.body,document:e.file}),c=await this.regimentRepository.create({title:t,version:i,publishedAt:n,documentUrl:"",status:m??Eu.IN_FORCE}),d=await this.firebaseStorageService.uploadFile({file:s,id:c.id,folder:M.REGIMENT});return await this.regimentRepository.update({id:c.id,documentUrl:d}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as WC}from"@asteasolutions/zod-to-openapi";import yc from"zod";WC(yc);var hc=yc.object({id:yc.uuid()}),sn=class{constructor(e,r){this.regimentRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=hc.parse({id:e.params.id}),i=await this.regimentRepository.findById(t);if(!i)throw new p("O regimento n\xE3o existe.");return i.documentUrl&&await this.firebaseStorageService.deleteFile({fileUrl:i.documentUrl}),await this.regimentRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as _C}from"@asteasolutions/zod-to-openapi";import Rc from"zod";_C(Rc);var mn=Rc.object({id:Rc.uuid()}),an=class{constructor(e){this.regimentRepository=e}async handle(e,r){try{let{id:t}=mn.parse({id:e.params.id}),i=await this.regimentRepository.findById(t);if(!i)throw new p("O regimento n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as zC}from"@asteasolutions/zod-to-openapi";import{RegimentStatus as HC}from"@prisma/client";import Ic from"zod";zC(Ic);var bc=Ic.object({status:Ic.enum(HC)}),cn=class{constructor(e){this.regimentRepository=e}async handle(e,r){try{let{status:t}=bc.parse({status:e.params.status}),i=await this.regimentRepository.findByStatus(t);return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as VC}from"@asteasolutions/zod-to-openapi";import{RegimentStatus as ZC}from"@prisma/client";import jt from"zod";var KC=1,JC=10;VC(jt);var Cc=jt.object({page:jt.coerce.number().min(1).default(KC),limit:jt.coerce.number().min(1).default(JC),title:jt.string().optional(),status:jt.enum(ZC).optional(),orderBy:jt.enum(["asc","desc"]).optional()}),pn=class{constructor(e){this.regimentRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=Cc.parse(e.query),s=i*t-i,[m,c]=await Promise.all([this.regimentRepository.find({pagination:{offset:s,limit:i},filter:n}),this.regimentRepository.count({filter:n})]),d=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:d,offset:s,limit:i,regiments:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as YC}from"@asteasolutions/zod-to-openapi";import{RegimentStatus as XC}from"@prisma/client";import ut from"zod";var Mu=10,xu=1024,$C=xu*xu,QC=Mu*$C;YC(ut);var Sc=ut.object({id:ut.uuid(),title:ut.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio").optional(),version:ut.string().min(1,"Vers\xE3o \xE9 obrigat\xF3ria").optional(),publishedAt:ut.coerce.date().optional(),document:ut.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=QC,`O documento deve ter no m\xE1ximo ${Mu}MB.`).optional(),status:ut.enum(XC).optional()}),dn=class{constructor(e,r){this.regimentRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,title:i,version:n,publishedAt:s,document:m,status:c}=Sc.parse({id:e.params.id,...e.body,document:e.file}),d=await this.regimentRepository.findById(t);if(!d)throw new p("O regimento n\xE3o existe.");let h=d.documentUrl;return m&&(d.documentUrl&&await this.firebaseStorageService.deleteFile({fileUrl:d.documentUrl}),h=await this.firebaseStorageService.uploadFile({file:m,id:t,folder:M.REGIMENT})),await this.regimentRepository.update({id:t,title:i,version:n,publishedAt:s,documentUrl:h??void 0,status:c}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var wc=B.object({id:B.uuid(),title:B.string(),version:B.string(),publishedAt:B.date(),documentUrl:B.string(),status:B.enum(eS),createdAt:B.date(),updatedAt:B.date()}),Pu={method:"post",path:"/regiment",tags:["Regiments"],summary:"Create a new regiment with document upload",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:fc}}}},responses:{201:{description:"Regiment created successfully",summary:"Regiment Created"},400:{description:"Invalid input data, missing required fields, or invalid document format/size",summary:"Validation Error",content:{"application/json":{schema:B.object({errors:B.record(B.string(),B.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:B.object({message:B.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:B.object({message:B.string()})}}}}},Tu={method:"get",path:"/regiment",tags:["Regiments"],summary:"List all regiments with pagination and filters",request:{query:Cc},responses:{200:{description:"List of regiments retrieved successfully with pagination",summary:"Regiments Retrieved",content:{"application/json":{schema:B.object({page:B.number(),totalPages:B.number(),offset:B.number(),limit:B.number(),regiments:B.array(wc)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:B.object({errors:B.record(B.string(),B.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:B.object({message:B.string()})}}}}},Au={method:"get",path:"/regiment/{id}",tags:["Regiments"],summary:"Find regiment by ID",request:{params:mn},responses:{200:{description:"Regiment details retrieved successfully",summary:"Regiment Retrieved",content:{"application/json":{schema:wc}}},400:{description:"Invalid regiment ID format",summary:"Validation Error",content:{"application/json":{schema:B.object({errors:B.record(B.string(),B.string())})}}},404:{description:"Regiment not found with the provided ID",summary:"Regiment Not Found",content:{"application/json":{schema:B.object({message:B.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:B.object({message:B.string()})}}}}},Du={method:"get",path:"/regiment/status/{status}",tags:["Regiments"],summary:"Find regiments by status",request:{params:bc},responses:{200:{description:"Regiments retrieved successfully by status",summary:"Regiments Retrieved by Status",content:{"application/json":{schema:B.array(wc)}}},400:{description:"Invalid status parameter provided",summary:"Validation Error",content:{"application/json":{schema:B.object({errors:B.record(B.string(),B.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:B.object({message:B.string()})}}}}},Fu={method:"put",path:"/regiment/{id}",tags:["Regiments"],summary:"Update regiment with optional document upload",security:[{bearerAuth:[]}],request:{params:mn,body:{content:{"multipart/form-data":{schema:Sc.omit({id:!0})}}}},responses:{200:{description:"Regiment updated successfully",summary:"Regiment Updated"},400:{description:"Invalid input data, regiment ID format, or invalid document format/size",summary:"Validation Error",content:{"application/json":{schema:B.object({errors:B.record(B.string(),B.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:B.object({message:B.string()})}}},404:{description:"Regiment not found with the provided ID",summary:"Regiment Not Found",content:{"application/json":{schema:B.object({message:B.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:B.object({message:B.string()})}}}}},Bu={method:"delete",path:"/regiment/{id}",tags:["Regiments"],summary:"Delete regiment",security:[{bearerAuth:[]}],request:{params:hc},responses:{200:{description:"Regiment deleted successfully",summary:"Regiment Deleted"},400:{description:"Invalid regiment ID format",summary:"Validation Error",content:{"application/json":{schema:B.object({errors:B.record(B.string(),B.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:B.object({message:B.string()})}}},404:{description:"Regiment not found with the provided ID",summary:"Regiment Not Found",content:{"application/json":{schema:B.object({message:B.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:B.object({message:B.string()})}}}}};import Y from"zod";import{extendZodWithOpenApi as tS}from"@asteasolutions/zod-to-openapi";import Nr from"zod";var qu=5,Uu=1024,rS=Uu*Uu,oS=qu*rS;tS(Nr);var vc=Nr.object({caption:Nr.string().optional(),image:Nr.any().refine(o=>o==null||typeof o!="object"||typeof o.size!="number"?!1:o.size<=oS,`A imagem deve ter no m\xE1ximo ${qu}MB.`),congressId:Nr.uuid()}),ln=class{constructor(e,r,t){this.regionalCongressGalleryRepository=e;this.regionalCongressRepository=r;this.firebaseStorageService=t}async handle(e,r){try{let{caption:t,image:i,congressId:n}=vc.parse({...e.body,...e.params,image:e.file});if(!await this.regionalCongressRepository.findById(n))throw new p("O congresso n\xE3o existe.");let m=await this.regionalCongressGalleryRepository.create({caption:t,congressId:n,imageUrl:""}),c=await this.firebaseStorageService.uploadFile({file:i,id:m.id,folder:M.GALLERY});return await this.regionalCongressGalleryRepository.update({id:m.id,imageUrl:c}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as iS}from"@asteasolutions/zod-to-openapi";import Ec from"zod";iS(Ec);var gn=Ec.object({id:Ec.uuid("ID inv\xE1lido")}),un=class{constructor(e){this.regionalCongressGalleryRepository=e}async handle(e,r){try{let{id:t}=gn.parse(e.params);if(!await this.regionalCongressGalleryRepository.findById(t))throw new p("Item de galeria n\xE3o encontrado");return await this.regionalCongressGalleryRepository.deleteById(t),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as nS}from"@asteasolutions/zod-to-openapi";import ir from"zod";nS(ir);var jc=ir.object({congressId:ir.uuid("ID do congresso inv\xE1lido"),page:ir.coerce.number().int().positive().default(1),limit:ir.coerce.number().int().positive().default(10),caption:ir.string().optional()}),fn=class{constructor(e){this.regionalCongressGalleryRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=jc.parse({...e.params,...e.query}),s=(t-1)*i,m=await this.regionalCongressGalleryRepository.findByCongressId({pagination:{offset:s,limit:i},filter:n});if(!m)throw new p("Itens de galeria n\xE3o encontrados");let c=await this.regionalCongressGalleryRepository.count({filter:n});return r.status(200).json({data:m,pagination:{page:t,limit:i,total:c,totalPages:Math.ceil(c/i)}})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as sS}from"@asteasolutions/zod-to-openapi";import Gr from"zod";var Ou=5,ku=1024,aS=ku*ku,mS=Ou*aS;sS(Gr);var xc=Gr.object({id:Gr.string().uuid("ID inv\xE1lido"),caption:Gr.string().optional(),image:Gr.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=mS,`A imagem deve ter no m\xE1ximo ${Ou}MB.`).optional()}),yn=class{constructor(e,r){this.regionalCongressGalleryRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,caption:i,image:n}=xc.parse({...e.params,...e.body,image:e.file});if(!await this.regionalCongressGalleryRepository.findById(t))throw new p("Item de galeria n\xE3o encontrado");let m;return n&&(m=await this.firebaseStorageService.uploadFile({file:n,id:t,folder:M.GALLERY})),await this.regionalCongressGalleryRepository.update({id:t,caption:i,...m&&{imageUrl:m}}),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var cS=Y.object({id:Y.uuid(),imageUrl:Y.string(),caption:Y.string().nullable(),congressId:Y.uuid()}),Nu={method:"post",path:"/regional-congress/{congressId}/gallery",tags:["Regional Congresses"],summary:"Create a new congress gallery image",security:[{bearerAuth:[]}],request:{params:Y.object({congressId:Y.uuid()}),body:{content:{"application/json":{schema:vc.omit({congressId:!0})}}}},responses:{201:{description:"Congress gallery image created successfully",summary:"Congress Gallery Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:Y.object({errors:Y.record(Y.string(),Y.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:Y.object({message:Y.string()})}}},404:{description:"Congress not found with the provided ID",summary:"Congress Not Found",content:{"application/json":{schema:Y.object({message:Y.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Y.object({message:Y.string()})}}}}},Gu={method:"get",path:"/regional-congress/{congressId}/gallery",tags:["Regional Congresses"],summary:"Find congress gallery images by congress ID",request:{params:jc},responses:{200:{description:"Congress gallery images retrieved successfully by congress ID",summary:"Congress Galleries Retrieved",content:{"application/json":{schema:Y.array(cS)}}},400:{description:"Invalid congress ID parameter provided",summary:"Validation Error",content:{"application/json":{schema:Y.object({errors:Y.record(Y.string(),Y.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Y.object({message:Y.string()})}}}}},Lu={method:"put",path:"/regional-congress/gallery/{id}",tags:["Regional Congresses"],summary:"Update congress gallery image",security:[{bearerAuth:[]}],request:{params:gn,body:{content:{"application/json":{schema:xc.omit({id:!0})}}}},responses:{200:{description:"Congress gallery image updated successfully",summary:"Congress Gallery Updated"},400:{description:"Invalid input data or gallery ID format",summary:"Validation Error",content:{"application/json":{schema:Y.object({errors:Y.record(Y.string(),Y.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:Y.object({message:Y.string()})}}},404:{description:"Congress gallery image not found with the provided ID",summary:"Congress Gallery Not Found",content:{"application/json":{schema:Y.object({message:Y.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Y.object({message:Y.string()})}}}}},Wu={method:"delete",path:"/regional-congress/gallery/{id}",tags:["Regional Congresses"],summary:"Delete congress gallery image",security:[{bearerAuth:[]}],request:{params:gn},responses:{200:{description:"Congress gallery image deleted successfully",summary:"Congress Gallery Deleted"},400:{description:"Invalid gallery ID format",summary:"Validation Error",content:{"application/json":{schema:Y.object({errors:Y.record(Y.string(),Y.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:Y.object({message:Y.string()})}}},404:{description:"Congress gallery image not found with the provided ID",summary:"Congress Gallery Not Found",content:{"application/json":{schema:Y.object({message:Y.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Y.object({message:Y.string()})}}}}};import X from"zod";import{extendZodWithOpenApi as pS}from"@asteasolutions/zod-to-openapi";import Lr from"zod";var zu=2,_u=1024,dS=_u*_u,lS=zu*dS;pS(Lr);var Mc=Lr.object({name:Lr.string().min(1,"Nome \xE9 obrigat\xF3rio"),logo:Lr.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=lS,`A imagem deve ter no m\xE1ximo ${zu}MB.`).optional(),congressId:Lr.uuid()}),hn=class{constructor(e,r,t){this.regionalCongressPartnerRepository=e;this.regionalCongressRepository=r;this.firebaseStorageService=t}async handle(e,r){try{let{name:t,logo:i,congressId:n}=Mc.parse({...e.body,...e.params,logo:e.file});if(!await this.regionalCongressRepository.findById(n))throw new p("O congresso n\xE3o existe.");let m=await this.regionalCongressPartnerRepository.create({name:t,congressId:n}),c;return i&&(c=await this.firebaseStorageService.uploadFile({file:i,id:m.id,folder:M.PARTNER}),await this.regionalCongressPartnerRepository.update({id:m.id,logoUrl:c})),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as uS}from"@asteasolutions/zod-to-openapi";import Pc from"zod";uS(Pc);var In=Pc.object({id:Pc.string().uuid("ID inv\xE1lido")}),Rn=class{constructor(e){this.regionalCongressPartnerRepository=e}async handle(e,r){try{let{id:t}=In.parse(e.params);if(!await this.regionalCongressPartnerRepository.findById(t))throw new p("Parceiro n\xE3o encontrado");return await this.regionalCongressPartnerRepository.deleteById(t),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as gS}from"@asteasolutions/zod-to-openapi";import nr from"zod";gS(nr);var Tc=nr.object({congressId:nr.uuid("ID do congresso inv\xE1lido"),page:nr.coerce.number().int().positive().optional(),limit:nr.coerce.number().int().positive().optional(),name:nr.string().optional()}),bn=class{constructor(e){this.regionalCongressPartnerRepository=e}async handle(e,r){try{let{congressId:t,page:i,limit:n,name:s}=Tc.parse({...e.params,...e.query}),m=i!==void 0&&n!==void 0,c=m?{offset:(i-1)*n,limit:n}:void 0,d=await this.regionalCongressPartnerRepository.findByCongressId({pagination:c,filter:{congressId:t,name:s}});if(!d)throw new p("Parceiros n\xE3o encontrados");if(!m)return r.status(200).json(d);let h=await this.regionalCongressPartnerRepository.count({filter:{congressId:t,name:s}});return r.status(200).json({data:d,pagination:{page:i,limit:n,total:h,totalPages:Math.ceil(h/n)}})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as fS}from"@asteasolutions/zod-to-openapi";import Wr from"zod";var Vu=2,Hu=1024,yS=Hu*Hu,hS=Vu*yS;fS(Wr);var Ac=Wr.object({id:Wr.string().uuid("ID inv\xE1lido"),name:Wr.string().min(1,"Nome \xE9 obrigat\xF3rio").optional(),logo:Wr.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=hS,`A imagem deve ter no m\xE1ximo ${Vu}MB.`).optional()}),Cn=class{constructor(e,r){this.regionalCongressPartnerRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,name:i,logo:n}=Ac.parse({...e.params,...e.body,logo:e.file});if(!await this.regionalCongressPartnerRepository.findById(t))throw new p("Parceiro n\xE3o encontrado");let m;return n&&(m=await this.firebaseStorageService.uploadFile({file:n,id:t,folder:M.PARTNER})),await this.regionalCongressPartnerRepository.update({id:t,name:i,...m&&{logoUrl:m}}),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var RS=X.object({id:X.uuid(),name:X.string(),logoUrl:X.string().nullable(),congressId:X.uuid()}),Zu={method:"post",path:"/regional-congress/{congressId}/partner",tags:["Regional Congresses"],summary:"Create a new congress partner",security:[{bearerAuth:[]}],request:{params:X.object({congressId:X.uuid()}),body:{content:{"application/json":{schema:Mc.omit({congressId:!0})}}}},responses:{201:{description:"Congress partner created successfully",summary:"Congress Partner Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:X.object({errors:X.record(X.string(),X.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:X.object({message:X.string()})}}},404:{description:"Congress not found with the provided ID",summary:"Congress Not Found",content:{"application/json":{schema:X.object({message:X.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:X.object({message:X.string()})}}}}},Ku={method:"get",path:"/regional-congress/{congressId}/partner",tags:["Regional Congresses"],summary:"Find congress partners by congress ID",request:{params:Tc},responses:{200:{description:"Congress partners retrieved successfully by congress ID",summary:"Congress Partners Retrieved",content:{"application/json":{schema:X.array(RS)}}},400:{description:"Invalid congress ID parameter provided",summary:"Validation Error",content:{"application/json":{schema:X.object({errors:X.record(X.string(),X.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:X.object({message:X.string()})}}}}},Ju={method:"put",path:"/regional-congress/partner/{id}",tags:["Regional Congresses"],summary:"Update congress partner",security:[{bearerAuth:[]}],request:{params:In,body:{content:{"application/json":{schema:Ac.omit({id:!0})}}}},responses:{200:{description:"Congress partner updated successfully",summary:"Congress Partner Updated"},400:{description:"Invalid input data or partner ID format",summary:"Validation Error",content:{"application/json":{schema:X.object({errors:X.record(X.string(),X.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:X.object({message:X.string()})}}},404:{description:"Congress partner not found with the provided ID",summary:"Congress Partner Not Found",content:{"application/json":{schema:X.object({message:X.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:X.object({message:X.string()})}}}}},Yu={method:"delete",path:"/regional-congress/partner/{id}",tags:["Regional Congresses"],summary:"Delete congress partner",security:[{bearerAuth:[]}],request:{params:In},responses:{200:{description:"Congress partner deleted successfully",summary:"Congress Partner Deleted"},400:{description:"Invalid partner ID format",summary:"Validation Error",content:{"application/json":{schema:X.object({errors:X.record(X.string(),X.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:X.object({message:X.string()})}}},404:{description:"Congress partner not found with the provided ID",summary:"Congress Partner Not Found",content:{"application/json":{schema:X.object({message:X.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:X.object({message:X.string()})}}}}};import g from"zod";import{extendZodWithOpenApi as IS}from"@asteasolutions/zod-to-openapi";import re from"zod";IS(re);var Dc=re.object({title:re.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio"),edition:re.coerce.number().int().positive("Edi\xE7\xE3o deve ser um n\xFAmero positivo"),startDate:re.coerce.date(),endDate:re.coerce.date(),description:re.string().optional(),location:re.string().optional(),congressLink:re.union([re.url("Link do congresso deve ser uma URL v\xE1lida"),re.literal("")]),noticeUrl:re.union([re.url("URL do edital deve ser uma URL v\xE1lida"),re.literal("")]),scheduleUrl:re.union([re.url("URL do cronograma deve ser uma URL v\xE1lida"),re.literal("")]),programUrl:re.union([re.url("URL da programa\xE7\xE3o deve ser uma URL v\xE1lida"),re.literal("")]),adminReportUrl:re.union([re.url("URL do relat\xF3rio administrativo deve ser uma URL v\xE1lida"),re.literal("")]),proceedingsUrl:re.union([re.url("URL dos anais deve ser uma URL v\xE1lida"),re.literal("")])}).refine(o=>o.endDate>=o.startDate,{message:"Data de t\xE9rmino deve ser posterior ou igual \xE0 data de in\xEDcio",path:["endDate"]}),Sn=class{constructor(e){this.regionalCongressRepository=e}async handle(e,r){try{let t=Dc.parse(e.body);return await this.regionalCongressRepository.create(t),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as bS}from"@asteasolutions/zod-to-openapi";import Fc from"zod";bS(Fc);var Bc=Fc.object({id:Fc.string().uuid("ID inv\xE1lido")}),wn=class{constructor(e){this.regionalCongressRepository=e}async handle(e,r){try{let{id:t}=Bc.parse(e.params);if(!await this.regionalCongressRepository.findById(t))throw new p("Congresso regional n\xE3o encontrado");return await this.regionalCongressRepository.deleteById(t),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as CS}from"@asteasolutions/zod-to-openapi";import Uc from"zod";CS(Uc);var qc=Uc.object({edition:Uc.coerce.number().int().positive("Edi\xE7\xE3o deve ser um n\xFAmero positivo")}),vn=class{constructor(e){this.regionalCongressRepository=e}async handle(e,r){try{let{edition:t}=qc.parse(e.params),i=await this.regionalCongressRepository.findByEdition(t);if(!i||i.length===0)throw new p("Congresso regional n\xE3o encontrado");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as SS}from"@asteasolutions/zod-to-openapi";import kc from"zod";SS(kc);var jn=kc.object({id:kc.string().uuid("ID inv\xE1lido")}),En=class{constructor(e){this.regionalCongressRepository=e}async handle(e,r){try{let{id:t}=jn.parse(e.params),i=await this.regionalCongressRepository.findById(t);if(!i)throw new p("Congresso regional n\xE3o encontrado");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as wS}from"@asteasolutions/zod-to-openapi";import gt from"zod";wS(gt);var Oc=gt.object({page:gt.coerce.number().int().positive().default(1),limit:gt.coerce.number().int().positive().default(10),title:gt.string().optional(),edition:gt.coerce.number().int().positive().optional(),location:gt.string().optional(),orderBy:gt.enum(["asc","desc"]).optional().default("desc")}),xn=class{constructor(e){this.regionalCongressRepository=e}async handle(e,r){try{let{page:t,limit:i,orderBy:n,...s}=Oc.parse(e.query),m=(t-1)*i,c=await this.regionalCongressRepository.find({pagination:{offset:m,limit:i},filter:{...s,orderBy:n}});if(!c)throw new p("Congressos regionais n\xE3o encontrados");let d=await this.regionalCongressRepository.count({filter:s});return r.status(200).json({data:c,pagination:{page:t,limit:i,total:d,totalPages:Math.ceil(d/i)}})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as vS}from"@asteasolutions/zod-to-openapi";import te from"zod";vS(te);var Nc=te.object({id:te.string().uuid("ID inv\xE1lido"),title:te.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio").optional(),edition:te.coerce.number().int().positive("Edi\xE7\xE3o deve ser um n\xFAmero positivo").optional(),startDate:te.coerce.date().optional(),endDate:te.coerce.date().optional(),description:te.string().optional(),location:te.string().optional(),congressLink:te.union([te.url("Link do congresso deve ser uma URL v\xE1lida"),te.literal("")]),noticeUrl:te.union([te.url("URL do edital deve ser uma URL v\xE1lida"),te.literal("")]),scheduleUrl:te.union([te.url("URL do cronograma deve ser uma URL v\xE1lida"),te.literal("")]),programUrl:te.union([te.url("URL da programa\xE7\xE3o deve ser uma URL v\xE1lida"),te.literal("")]),adminReportUrl:te.union([te.url("URL do relat\xF3rio administrativo deve ser uma URL v\xE1lida"),te.literal("")]),proceedingsUrl:te.union([te.url("URL dos anais deve ser uma URL v\xE1lida"),te.literal("")])}).refine(o=>o.startDate&&o.endDate?o.endDate>=o.startDate:!0,{message:"Data de t\xE9rmino deve ser posterior ou igual \xE0 data de in\xEDcio",path:["endDate"]}),Mn=class{constructor(e){this.regionalCongressRepository=e}async handle(e,r){try{let{id:t}=te.object({id:te.string().uuid()}).parse(e.params);if(!await this.regionalCongressRepository.findById(t))throw new p("Congresso regional n\xE3o encontrado");let n=Nc.parse({id:t,...e.body});return await this.regionalCongressRepository.update(n),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var ES=9,jS=g.object({image:g.any().openapi({type:"string",format:"binary"}),caption:g.string().optional()}),xS=g.object({image:g.any().openapi({type:"string",format:"binary"}).optional(),caption:g.string().optional()}),MS=g.object({id:g.uuid(),name:g.string(),logoUrl:g.string().nullable(),congressId:g.uuid()}),Gc=g.object({id:g.uuid(),imageUrl:g.string(),caption:g.string().nullable(),congressId:g.uuid()}),Lc=g.object({id:g.uuid(),title:g.string(),edition:g.number(),startDate:g.date(),endDate:g.date(),description:g.string().nullable(),location:g.string().nullable(),congressLink:g.string().nullable(),noticeUrl:g.string().nullable(),scheduleUrl:g.string().nullable(),programUrl:g.string().nullable(),adminReportUrl:g.string().nullable(),proceedingsUrl:g.string().nullable(),partners:g.array(MS),galleries:g.array(Gc),createdAt:g.date(),updatedAt:g.date()}),Xu={method:"post",path:"/regional-congress",tags:["Regional Congresses"],summary:"Create a new regional congress",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:Dc}}}},responses:{201:{description:"Regional congress created successfully",summary:"Regional Congress Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:g.object({message:g.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}},$u={method:"get",path:"/regional-congress",tags:["Regional Congresses"],summary:"List all regional congresses with pagination and filters",request:{query:Oc},responses:{200:{description:"List of regional congresses retrieved successfully with pagination",summary:"Regional Congresses Retrieved",content:{"application/json":{schema:g.object({page:g.number(),totalPages:g.number(),offset:g.number(),limit:g.number(),congresses:g.array(Lc)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}},Qu={method:"get",path:"/regional-congress/{id}",tags:["Regional Congresses"],summary:"Find regional congress by ID",request:{params:jn},responses:{200:{description:"Regional congress details retrieved successfully",summary:"Regional Congress Retrieved",content:{"application/json":{schema:Lc}}},400:{description:"Invalid regional congress ID format",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},404:{description:"Regional congress not found with the provided ID",summary:"Regional Congress Not Found",content:{"application/json":{schema:g.object({message:g.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}},eg={method:"get",path:"/regional-congress/edition/{edition}",tags:["Regional Congresses"],summary:"Find regional congresses by edition",request:{params:qc},responses:{200:{description:"Regional congresses retrieved successfully by edition",summary:"Regional Congresses Retrieved by Edition",content:{"application/json":{schema:g.array(Lc)}}},400:{description:"Invalid edition parameter provided",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}},tg={method:"put",path:"/regional-congress/{id}",tags:["Regional Congresses"],summary:"Update regional congress",security:[{bearerAuth:[]}],request:{params:jn,body:{content:{"application/json":{schema:Nc.omit({id:!0})}}}},responses:{200:{description:"Regional congress updated successfully",summary:"Regional Congress Updated"},400:{description:"Invalid input data or regional congress ID format",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:g.object({message:g.string()})}}},404:{description:"Regional congress not found with the provided ID",summary:"Regional Congress Not Found",content:{"application/json":{schema:g.object({message:g.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}},rg={method:"delete",path:"/regional-congress/{id}",tags:["Regional Congresses"],summary:"Delete regional congress",security:[{bearerAuth:[]}],request:{params:Bc},responses:{200:{description:"Regional congress deleted successfully",summary:"Regional Congress Deleted"},400:{description:"Invalid regional congress ID format",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:g.object({message:g.string()})}}},404:{description:"Regional congress not found with the provided ID",summary:"Regional Congress Not Found",content:{"application/json":{schema:g.object({message:g.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}},iG={method:"post",path:"/regional-congress/{congressId}/gallery",tags:["Regional Congress Gallery"],summary:"Create a new gallery image for a congress",security:[{bearerAuth:[]}],request:{params:g.object({congressId:g.uuid()}),body:{content:{"multipart/form-data":{schema:jS}}}},responses:{201:{description:"Gallery image created successfully",summary:"Gallery Image Created"},400:{description:"Invalid input data, missing required fields, or invalid image format/size",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:g.object({message:g.string()})}}},404:{description:"Congress not found with the provided ID",summary:"Congress Not Found",content:{"application/json":{schema:g.object({message:g.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}},nG={method:"get",path:"/regional-congress/{congressId}/gallery",tags:["Regional Congress Gallery"],summary:"List all gallery images for a congress with pagination",request:{params:g.object({congressId:g.uuid()}),query:g.object({page:g.coerce.number().min(1).default(1),limit:g.coerce.number().min(1).default(ES),caption:g.string().optional()})},responses:{200:{description:"Gallery images retrieved successfully with pagination",summary:"Gallery Images Retrieved",content:{"application/json":{schema:g.object({page:g.number(),totalPages:g.number(),offset:g.number(),limit:g.number(),galleries:g.array(Gc)})}}},400:{description:"Invalid congress ID format or query parameters",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}},sG={method:"get",path:"/regional-congress/gallery/{id}",tags:["Regional Congress Gallery"],summary:"Find a gallery image by ID",request:{params:g.object({id:g.uuid()})},responses:{200:{description:"Gallery image retrieved successfully",summary:"Gallery Image Retrieved",content:{"application/json":{schema:Gc}}},400:{description:"Invalid gallery image ID format",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},404:{description:"Gallery image not found with the provided ID",summary:"Gallery Image Not Found",content:{"application/json":{schema:g.object({message:g.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}},aG={method:"put",path:"/regional-congress/gallery/{id}",tags:["Regional Congress Gallery"],summary:"Update a gallery image with optional image upload",security:[{bearerAuth:[]}],request:{params:g.object({id:g.uuid()}),body:{content:{"multipart/form-data":{schema:xS}}}},responses:{200:{description:"Gallery image updated successfully",summary:"Gallery Image Updated"},400:{description:"Invalid input data, gallery ID format, or invalid image format/size",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:g.object({message:g.string()})}}},404:{description:"Gallery image not found with the provided ID",summary:"Gallery Image Not Found",content:{"application/json":{schema:g.object({message:g.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}},mG={method:"delete",path:"/regional-congress/gallery/{id}",tags:["Regional Congress Gallery"],summary:"Delete a gallery image",security:[{bearerAuth:[]}],request:{params:g.object({id:g.uuid()})},responses:{200:{description:"Gallery image deleted successfully",summary:"Gallery Image Deleted"},400:{description:"Invalid gallery ID format",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:g.object({message:g.string()})}}},404:{description:"Gallery image not found with the provided ID",summary:"Gallery Image Not Found",content:{"application/json":{schema:g.object({message:g.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}};import{$Enums as Jc}from"@prisma/client";import b from"zod";import{extendZodWithOpenApi as PS}from"@asteasolutions/zod-to-openapi";import{Degree as TS,Seniority as AS}from"@prisma/client";import we from"zod";PS(we);var Wc=we.object({registrationNumber:we.string(),mainEtps:we.string().optional(),formations:we.string().optional(),degrees:we.array(we.enum(TS)),occupations:we.string(),seniority:we.enum(AS),institutions:we.string(),biography:we.string().optional(),userId:we.string()}),Pn=class{constructor(e){this.researcherRepository=e}async handle(e,r){try{let{registrationNumber:t,mainEtps:i,formations:n,degrees:s,occupations:m,seniority:c,institutions:d,biography:h,userId:j}=Wc.parse(e.body);if(await this.researcherRepository.findByRegistrationNumber(t))throw new ne("J\xE1 existe um pesquisador cadastrado com este n\xFAmero de registro.");if(await this.researcherRepository.findByUserId(j))throw new ne("Usu\xE1rio j\xE1 possui um perfil de pesquisador.");return await this.researcherRepository.create({registrationNumber:t,mainEtps:i,formations:n,degrees:s,occupations:m,seniority:c,institutions:d,biography:h,userId:j}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as DS}from"@asteasolutions/zod-to-openapi";import _c from"zod";DS(_c);var zc=_c.object({id:_c.uuid()}),Tn=class{constructor(e){this.researcherRepository=e}async handle(e,r){try{let{id:t}=zc.parse({id:e.params.id});if(!await this.researcherRepository.findById(t))throw new p("O pesquisador n\xE3o existe.");return await this.researcherRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as FS}from"@asteasolutions/zod-to-openapi";import Hc from"zod";FS(Hc);var Dn=Hc.object({id:Hc.uuid()}),An=class{constructor(e){this.researcherRepository=e}async handle(e,r){try{let{id:t}=Dn.parse({id:e.params.id}),i=await this.researcherRepository.findById(t);if(!i)throw new p("O pesquisador n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as BS}from"@asteasolutions/zod-to-openapi";import Vc from"zod";BS(Vc);var Zc=Vc.object({userId:Vc.uuid()}),Fn=class{constructor(e){this.researcherRepository=e}async handle(e,r){try{let{userId:t}=Zc.parse({userId:e.params.userId}),i=await this.researcherRepository.findByUserId(t);if(!i)throw new p("O pesquisador n\xE3o existe para este usu\xE1rio.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as US}from"@asteasolutions/zod-to-openapi";import{Degree as qS,Seniority as kS}from"@prisma/client";import ve from"zod";US(ve);var Kc=ve.object({id:ve.uuid(),registrationNumber:ve.string().optional(),mainEtps:ve.string().optional(),formations:ve.string().optional(),degrees:ve.array(ve.enum(qS)).optional(),occupations:ve.string().optional(),seniority:ve.enum(kS).optional(),institutions:ve.string().optional(),biography:ve.string().optional()}),Bn=class{constructor(e){this.researcherRepository=e}async handle(e,r){try{let{id:t,registrationNumber:i,mainEtps:n,formations:s,degrees:m,occupations:c,seniority:d,institutions:h,biography:j}=Kc.parse({id:e.params.id,...e.body}),q=await this.researcherRepository.findById(t);if(!q)throw new p("O pesquisador n\xE3o existe.");if(i&&i!==q.registrationNumber){let $=await this.researcherRepository.findByRegistrationNumber(i);if($&&$.id!==t)throw new ne("J\xE1 existe um pesquisador com este n\xFAmero de registro.")}return await this.researcherRepository.update({id:t,registrationNumber:i,mainEtps:n,formations:s,degrees:m,occupations:c,seniority:d,institutions:h,biography:j}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var OS=1,NS=9,Yc=b.object({id:b.uuid(),registrationNumber:b.string(),mainEtps:b.string().nullable(),formations:b.string().nullable(),degrees:b.array(b.enum(Jc.Degree)),occupations:b.string(),seniority:b.enum(Jc.Seniority),institutions:b.string(),biography:b.string().nullable(),createdAt:b.date(),updatedAt:b.date(),userId:b.uuid(),user:b.object({id:b.uuid(),name:b.string(),emailAddress:b.string(),avatarUrl:b.string().nullable(),orcid:b.string().nullable(),phone:b.string().nullable(),lattesUrl:b.string().nullable(),role:b.enum(Jc.UserRole)})}),og={method:"post",path:"/researcher",tags:["Researchers"],summary:"Create a new researcher profile",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:Wc}}}},responses:{201:{description:"Researcher profile created successfully",summary:"Researcher Created",content:{"application/json":{schema:b.object({message:b.string()})}}},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:b.object({errors:b.record(b.string(),b.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:b.object({message:b.string()})}}},409:{description:"Researcher with this registration number already exists or user already has a researcher profile",summary:"Conflict",content:{"application/json":{schema:b.object({message:b.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:b.object({message:b.string()})}}}}},ig={method:"get",path:"/researcher",tags:["Researchers"],summary:"List all researchers with pagination and filters",request:{query:b.object({page:b.coerce.number().min(1).default(OS).optional(),limit:b.coerce.number().min(1).default(NS).optional(),userId:b.string().optional(),registrationNumber:b.string().optional(),name:b.string().optional(),emailAddress:b.string().optional(),mainEtps:b.string().optional(),formations:b.string().optional(),occupations:b.string().optional(),institutions:b.string().optional(),biography:b.string().optional(),orderBy:b.enum(["asc","desc"]).optional()})},responses:{200:{description:"List of researchers retrieved successfully with pagination",summary:"Researchers Retrieved",content:{"application/json":{schema:b.object({page:b.number(),totalPages:b.number(),offset:b.number(),limit:b.number(),researchers:b.array(Yc)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:b.object({message:b.string()})}}}}},ng={method:"get",path:"/researcher/{id}",tags:["Researchers"],summary:"Find researcher by ID",request:{params:Dn},responses:{200:{description:"Researcher details retrieved successfully",summary:"Researcher Retrieved",content:{"application/json":{schema:Yc}}},400:{description:"Invalid researcher ID format",summary:"Validation Error",content:{"application/json":{schema:b.object({errors:b.record(b.string(),b.string())})}}},404:{description:"Researcher not found with the provided ID",summary:"Researcher Not Found",content:{"application/json":{schema:b.object({message:b.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:b.object({message:b.string()})}}}}},sg={method:"get",path:"/researcher/user/{userId}",tags:["Researchers"],summary:"Find researcher by user ID",request:{params:Zc},responses:{200:{description:"Researcher details retrieved successfully",summary:"Researcher Retrieved",content:{"application/json":{schema:Yc}}},400:{description:"Invalid user ID format",summary:"Validation Error",content:{"application/json":{schema:b.object({errors:b.record(b.string(),b.string())})}}},404:{description:"Researcher not found for this user",summary:"Researcher Not Found",content:{"application/json":{schema:b.object({message:b.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:b.object({message:b.string()})}}}}},ag={method:"put",path:"/researcher/{id}",tags:["Researchers"],summary:"Update researcher profile",security:[{bearerAuth:[]}],request:{params:Dn,body:{content:{"application/json":{schema:Kc.omit({id:!0})}}}},responses:{200:{description:"Researcher profile updated successfully",summary:"Researcher Updated",content:{"application/json":{schema:b.object({message:b.string()})}}},400:{description:"Invalid input data or researcher ID format",summary:"Validation Error",content:{"application/json":{schema:b.object({errors:b.record(b.string(),b.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:b.object({message:b.string()})}}},404:{description:"Researcher not found with the provided ID",summary:"Researcher Not Found",content:{"application/json":{schema:b.object({message:b.string()})}}},409:{description:"Researcher with this registration number already exists",summary:"Conflict",content:{"application/json":{schema:b.object({message:b.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:b.object({message:b.string()})}}}}},mg={method:"delete",path:"/researcher/{id}",tags:["Researchers"],summary:"Delete researcher profile",security:[{bearerAuth:[]}],request:{params:zc},responses:{200:{description:"Researcher profile deleted successfully",summary:"Researcher Deleted"},400:{description:"Invalid researcher ID format",summary:"Validation Error",content:{"application/json":{schema:b.object({errors:b.record(b.string(),b.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:b.object({message:b.string()})}}},404:{description:"Researcher not found with the provided ID",summary:"Researcher Not Found",content:{"application/json":{schema:b.object({message:b.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:b.object({message:b.string()})}}}}};import y from"zod";import{extendZodWithOpenApi as GS}from"@asteasolutions/zod-to-openapi";import Xc from"zod";GS(Xc);var $c=Xc.object({id:Xc.uuid()}),Un=class{constructor(e){this.scientificArticlesRepository=e}async handle(e,r){try{let{id:t}=$c.parse({id:e.params.id});if(!await this.scientificArticlesRepository.findById(t))throw new p("O artigo cient\xEDfico n\xE3o existe.");return await this.scientificArticlesRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as LS}from"@asteasolutions/zod-to-openapi";import Qc from"zod";LS(Qc);var ep=Qc.object({id:Qc.uuid()}),qn=class{constructor(e){this.scientificArticlesRepository=e}async handle(e,r){try{let{id:t}=ep.parse({id:e.params.id}),i=await this.scientificArticlesRepository.findById(t);if(!i)throw new p("Artigo cient\xEDfico n\xE3o encontrado.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as WS}from"@asteasolutions/zod-to-openapi";import ft from"zod";var _S=1,zS=6;WS(ft);var tp=ft.object({page:ft.coerce.number().min(1).default(_S),limit:ft.coerce.number().min(1).default(zS),title:ft.string().optional(),author:ft.string().optional(),journal:ft.string().optional(),orderBy:ft.enum(["asc","desc"]).default("desc")}),kn=class{constructor(e){this.scientificArticlesRepository=e}async handle(e,r){try{let{limit:t,page:i,...n}=tp.parse(e.query),s=i*t-t,[m,c]=await Promise.all([this.scientificArticlesRepository.find({pagination:{offset:s,limit:t},filter:n}),this.scientificArticlesRepository.count({filter:n})]),d=Math.max(Math.ceil(c/t),1);return r.status(200).json({page:i,totalPages:d,offset:s,limit:t,scientificArticles:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as HS}from"@asteasolutions/zod-to-openapi";import se from"zod";HS(se);var rp=se.object({id:se.uuid(),title:se.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio.").optional(),author:se.string().min(1,"Autor \xE9 obrigat\xF3rio.").optional(),journal:se.string().optional(),volume:se.string().optional(),edition:se.string().optional(),pageStart:se.coerce.number().optional(),pageEnd:se.coerce.number().optional(),startDate:se.coerce.date().optional(),endDate:se.coerce.date().optional(),city:se.string().optional(),state:se.string().optional(),country:se.string().optional(),publisher:se.string().optional(),description:se.string().optional(),year:se.coerce.number().optional(),accessUrl:se.url("URL de acesso deve ser v\xE1lida").optional()}),On=class{constructor(e){this.scientificArticlesRepository=e}async handle(e,r){try{let{id:t,title:i,author:n,journal:s,volume:m,edition:c,pageStart:d,pageEnd:h,startDate:j,endDate:q,city:$,state:ee,country:ge,publisher:Fe,description:Ar,year:pa,accessUrl:tR}=rp.parse({id:e.params.id,...e.body});if(!await this.scientificArticlesRepository.findById(t))throw new p("O artigo cient\xEDfico n\xE3o existe.");return await this.scientificArticlesRepository.update({id:t,title:i,author:n,journal:s,volume:m,edition:c,pageStart:d,pageEnd:h,startDate:j,endDate:q,city:$,state:ee,country:ge,publisher:Fe,description:Ar,year:pa,accessUrl:tR}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var cg={method:"post",path:"/scientific-articles",tags:["Scientific Articles"],summary:"Create scientific article",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:y.object({title:y.string().min(1).openapi({description:"T\xEDtulo do artigo"}),author:y.string().min(1).openapi({description:"Autor do artigo"}),journal:y.string().optional().openapi({description:"Nome do peri\xF3dico/revista"}),volume:y.string().optional().openapi({description:"Volume"}),edition:y.string().optional().openapi({description:"N\xFAmero/Edi\xE7\xE3o"}),pageStart:y.number().optional().openapi({description:"P\xE1gina inicial"}),pageEnd:y.number().optional().openapi({description:"P\xE1gina final"}),startDate:y.string().openapi({description:"Data de in\xEDcio (ISO 8601)",example:"2024-01-01T10:00:00Z"}),endDate:y.string().openapi({description:"Data de t\xE9rmino (ISO 8601)",example:"2024-12-31T10:00:00Z"}),city:y.string().optional().openapi({description:"Cidade"}),state:y.string().optional().openapi({description:"Estado"}),country:y.string().optional().openapi({description:"Pa\xEDs"}),publisher:y.string().optional().openapi({description:"Editora/Institui\xE7\xE3o"}),description:y.string().optional().openapi({description:"Descri\xE7\xE3o do artigo"}),year:y.number().optional().openapi({description:"Ano"}),accessUrl:y.string().url().optional().openapi({description:"URL de acesso"})})}}}},responses:{201:{description:"Scientific article created successfully",summary:"Article Created"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:y.object({errors:y.record(y.string(),y.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:y.object({message:y.string()})}}}}},pg={method:"get",path:"/scientific-articles",tags:["Scientific Articles"],summary:"List scientific articles",security:[{bearerAuth:[]}],request:{query:tp},responses:{200:{description:"Paginated list of scientific articles retrieved successfully",summary:"Articles Retrieved",content:{"application/json":{schema:y.object({page:y.number(),totalPages:y.number(),offset:y.number(),limit:y.number(),scientificArticles:y.array(y.object({id:y.string(),title:y.string(),author:y.string(),journal:y.string().nullable(),volume:y.string().nullable(),edition:y.string().nullable(),pageStart:y.number().nullable(),pageEnd:y.number().nullable(),startDate:y.date(),endDate:y.date(),city:y.string().nullable(),state:y.string().nullable(),country:y.string().nullable(),publisher:y.string().nullable(),description:y.string().nullable(),year:y.number().nullable(),accessUrl:y.string().nullable(),createdAt:y.date(),updatedAt:y.date()}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:y.object({errors:y.record(y.string(),y.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:y.object({message:y.string()})}}}}},dg={method:"get",path:"/scientific-articles/{id}",tags:["Scientific Articles"],summary:"Find scientific article by ID",security:[{bearerAuth:[]}],request:{params:ep},responses:{200:{description:"Scientific article details retrieved successfully",summary:"Article Retrieved",content:{"application/json":{schema:y.object({id:y.string(),title:y.string(),author:y.string(),journal:y.string().nullable(),volume:y.string().nullable(),edition:y.string().nullable(),pageStart:y.number().nullable(),pageEnd:y.number().nullable(),startDate:y.date(),endDate:y.date(),city:y.string().nullable(),state:y.string().nullable(),country:y.string().nullable(),publisher:y.string().nullable(),description:y.string().nullable(),year:y.number().nullable(),accessUrl:y.string().nullable(),createdAt:y.date(),updatedAt:y.date()}).nullable()}}},400:{description:"Invalid article ID format",summary:"Validation Error",content:{"application/json":{schema:y.object({errors:y.record(y.string(),y.string())})}}},404:{description:"Scientific article not found with the provided ID",summary:"Article Not Found",content:{"application/json":{schema:y.object({message:y.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:y.object({message:y.string()})}}}}},lg={method:"put",path:"/scientific-articles/{id}",tags:["Scientific Articles"],summary:"Update scientific article",security:[{bearerAuth:[]}],request:{params:rp.pick({id:!0}),body:{content:{"application/json":{schema:y.object({title:y.string().min(1).optional().openapi({description:"T\xEDtulo do artigo"}),author:y.string().min(1).optional().openapi({description:"Autor do artigo"}),journal:y.string().optional().openapi({description:"Nome do peri\xF3dico/revista"}),volume:y.string().optional().openapi({description:"Volume"}),edition:y.string().optional().openapi({description:"N\xFAmero/Edi\xE7\xE3o"}),pageStart:y.number().optional().openapi({description:"P\xE1gina inicial"}),pageEnd:y.number().optional().openapi({description:"P\xE1gina final"}),startDate:y.string().optional().openapi({description:"Data de in\xEDcio (ISO 8601)",example:"2024-01-01T10:00:00Z"}),endDate:y.string().optional().openapi({description:"Data de t\xE9rmino (ISO 8601)",example:"2024-12-31T10:00:00Z"}),city:y.string().optional().openapi({description:"Cidade"}),state:y.string().optional().openapi({description:"Estado"}),country:y.string().optional().openapi({description:"Pa\xEDs"}),publisher:y.string().optional().openapi({description:"Editora/Institui\xE7\xE3o"}),description:y.string().optional().openapi({description:"Descri\xE7\xE3o do artigo"}),year:y.number().optional().openapi({description:"Ano"}),accessUrl:y.string().url().optional().openapi({description:"URL de acesso"})})}}}},responses:{200:{description:"Scientific article updated successfully",summary:"Article Updated"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:y.object({errors:y.record(y.string(),y.string())})}}},404:{description:"Scientific article not found with the provided ID",summary:"Article Not Found",content:{"application/json":{schema:y.object({message:y.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:y.object({message:y.string()})}}}}},ug={method:"delete",path:"/scientific-articles/{id}",tags:["Scientific Articles"],summary:"Delete scientific article",security:[{bearerAuth:[]}],request:{params:$c},responses:{200:{description:"Scientific article deleted successfully",summary:"Article Deleted"},400:{description:"Invalid article ID format",summary:"Validation Error",content:{"application/json":{schema:y.object({errors:y.record(y.string(),y.string())})}}},404:{description:"Scientific article not found with the provided ID",summary:"Article Not Found",content:{"application/json":{schema:y.object({message:y.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:y.object({message:y.string()})}}}}};import E from"zod";import{extendZodWithOpenApi as VS}from"@asteasolutions/zod-to-openapi";import op from"zod";VS(op);var ip=op.object({id:op.uuid()}),Nn=class{constructor(e,r){this.scientificJournalRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=ip.parse({id:e.params.id}),i=await this.scientificJournalRepository.findById(t);if(!i)throw new p("A revista cient\xEDfica n\xE3o existe.");return i.logoUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.logoUrl}),await this.scientificJournalRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as ZS}from"@asteasolutions/zod-to-openapi";import np from"zod";ZS(np);var sp=np.object({id:np.uuid()}),Gn=class{constructor(e){this.scientificJournalRepository=e}async handle(e,r){try{let{id:t}=sp.parse({id:e.params.id}),i=await this.scientificJournalRepository.findById(t);if(!i)throw new p("Revista cient\xEDfica n\xE3o encontrada.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as KS}from"@asteasolutions/zod-to-openapi";import Oe from"zod";var JS=1,YS=6;KS(Oe);var ap=Oe.object({page:Oe.coerce.number().min(1).default(JS),limit:Oe.coerce.number().min(1).default(YS),name:Oe.string().optional(),description:Oe.string().optional(),issn:Oe.string().optional(),directors:Oe.string().optional(),editorialBoard:Oe.string().optional(),orderBy:Oe.enum(["asc","desc"]).default("desc")}),Ln=class{constructor(e){this.scientificJournalRepository=e}async handle(e,r){try{let{limit:t,page:i,...n}=ap.parse(e.query),s=i*t-t,[m,c]=await Promise.all([this.scientificJournalRepository.find({pagination:{offset:s,limit:t},filter:n}),this.scientificJournalRepository.count({filter:n})]),d=Math.max(Math.ceil(c/t),1);return r.status(200).json({page:i,totalPages:d,offset:s,limit:t,scientificJournals:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as XS}from"@asteasolutions/zod-to-openapi";import Ne from"zod";var fg=5,gg=1024,$S=gg*gg,QS=fg*$S;XS(Ne);var mp=Ne.object({id:Ne.uuid(),name:Ne.string().min(1,"Nome \xE9 obrigat\xF3rio.").optional(),issn:Ne.string().min(1,"ISSN \xE9 obrigat\xF3rio.").optional(),description:Ne.string().min(1,"Descri\xE7\xE3o \xE9 obrigat\xF3ria.").optional(),journalUrl:Ne.url("URL da revista deve ser v\xE1lida.").optional(),directors:Ne.string().optional(),editorialBoard:Ne.string().optional(),logo:Ne.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=QS,`O logo deve ter no m\xE1ximo ${fg}MB.`).optional()}),Wn=class{constructor(e,r){this.scientificJournalRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,logo:i,name:n,issn:s,description:m,journalUrl:c,directors:d,editorialBoard:h}=mp.parse({id:e.params.id,...e.body,logo:e.file}),j=await this.scientificJournalRepository.findById(t);if(!j)throw new p("A revista cient\xEDfica n\xE3o existe.");let q=j.logoUrl;return i&&(q=await this.firebaseStorageService.uploadFile({file:i,id:t,folder:M.SCIENTIFIC_JOURNAL})),await this.scientificJournalRepository.update({id:t,name:n,issn:s,description:m,journalUrl:c,directors:d,editorialBoard:h,logoUrl:q}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var yg={method:"post",path:"/scientific-journals",tags:["Scientific Journals"],summary:"Create scientific journal",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:E.object({name:E.string().min(1).openapi({description:"Nome da revista cient\xEDfica"}),issn:E.string().min(1).openapi({description:"ISSN da revista"}),description:E.string().min(1).openapi({description:"Descri\xE7\xE3o da revista"}),journalUrl:E.string().url().openapi({description:"URL da revista"}),directors:E.string().optional().openapi({description:"Diretores da revista"}),editorialBoard:E.string().optional().openapi({description:"Conselho editorial"}),logo:E.string().optional().openapi({description:"Logo da revista (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{201:{description:"Scientific journal created successfully",summary:"Journal Created"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:E.object({errors:E.record(E.string(),E.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:E.object({message:E.string()})}}}}},hg={method:"get",path:"/scientific-journals",tags:["Scientific Journals"],summary:"List scientific journals",security:[{bearerAuth:[]}],request:{query:ap},responses:{200:{description:"Paginated list of scientific journals retrieved successfully",summary:"Journals Retrieved",content:{"application/json":{schema:E.object({page:E.number(),totalPages:E.number(),offset:E.number(),limit:E.number(),scientificJournals:E.array(E.object({id:E.string(),name:E.string(),issn:E.string(),description:E.string(),logoUrl:E.string().nullable(),journalUrl:E.string(),directors:E.string().nullable(),editorialBoard:E.string().nullable(),createdAt:E.date(),updatedAt:E.date()}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:E.object({errors:E.record(E.string(),E.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:E.object({message:E.string()})}}}}},Rg={method:"get",path:"/scientific-journals/{id}",tags:["Scientific Journals"],summary:"Find scientific journal by ID",security:[{bearerAuth:[]}],request:{params:sp},responses:{200:{description:"Scientific journal details retrieved successfully",summary:"Journal Retrieved",content:{"application/json":{schema:E.object({id:E.string(),name:E.string(),issn:E.string(),description:E.string(),logoUrl:E.string().nullable(),journalUrl:E.string(),directors:E.string().nullable(),editorialBoard:E.string().nullable(),createdAt:E.date(),updatedAt:E.date()}).nullable()}}},400:{description:"Invalid journal ID format",summary:"Validation Error",content:{"application/json":{schema:E.object({errors:E.record(E.string(),E.string())})}}},404:{description:"Scientific journal not found with the provided ID",summary:"Journal Not Found",content:{"application/json":{schema:E.object({message:E.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:E.object({message:E.string()})}}}}},Ig={method:"put",path:"/scientific-journals/{id}",tags:["Scientific Journals"],summary:"Update scientific journal",security:[{bearerAuth:[]}],request:{params:mp.pick({id:!0}),body:{content:{"multipart/form-data":{schema:E.object({name:E.string().min(1).optional().openapi({description:"Nome da revista cient\xEDfica"}),issn:E.string().min(1).optional().openapi({description:"ISSN da revista"}),description:E.string().min(1).optional().openapi({description:"Descri\xE7\xE3o da revista"}),journalUrl:E.string().url().optional().openapi({description:"URL da revista"}),directors:E.string().optional().openapi({description:"Diretores da revista"}),editorialBoard:E.string().optional().openapi({description:"Conselho editorial"}),logo:E.string().optional().openapi({description:"Logo da revista (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{200:{description:"Scientific journal updated successfully",summary:"Journal Updated"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:E.object({errors:E.record(E.string(),E.string())})}}},404:{description:"Scientific journal not found with the provided ID",summary:"Journal Not Found",content:{"application/json":{schema:E.object({message:E.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:E.object({message:E.string()})}}}}},bg={method:"delete",path:"/scientific-journals/{id}",tags:["Scientific Journals"],summary:"Delete scientific journal",security:[{bearerAuth:[]}],request:{params:ip},responses:{200:{description:"Scientific journal deleted successfully",summary:"Journal Deleted"},400:{description:"Invalid journal ID format",summary:"Validation Error",content:{"application/json":{schema:E.object({errors:E.record(E.string(),E.string())})}}},404:{description:"Scientific journal not found with the provided ID",summary:"Journal Not Found",content:{"application/json":{schema:E.object({message:E.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:E.object({message:E.string()})}}}}};import{$Enums as iw}from"@prisma/client";import G from"zod";import{extendZodWithOpenApi as ew}from"@asteasolutions/zod-to-openapi";import sr from"zod";ew(sr);var cp=sr.object({role:sr.string().min(1),description:sr.string().optional(),userId:sr.uuid(),order:sr.number().optional()}),_n=class{constructor(e){this.sdhcTeamMemberRepository=e}async handle(e,r){try{let{role:t,description:i,userId:n,order:s}=cp.parse(e.body);return await this.sdhcTeamMemberRepository.create({role:t,description:i,userId:n,order:s??0}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as tw}from"@asteasolutions/zod-to-openapi";import pp from"zod";tw(pp);var dp=pp.object({id:pp.uuid()}),zn=class{constructor(e){this.sdhcTeamMemberRepository=e}async handle(e,r){try{let{id:t}=dp.parse({id:e.params.id});if(!await this.sdhcTeamMemberRepository.findById(t))throw new p("O membro da equipe SDHC n\xE3o existe.");return await this.sdhcTeamMemberRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as rw}from"@asteasolutions/zod-to-openapi";import lp from"zod";rw(lp);var Vn=lp.object({id:lp.uuid()}),Hn=class{constructor(e){this.sdhcTeamMemberRepository=e}async handle(e,r){try{let{id:t}=Vn.parse({id:e.params.id}),i=await this.sdhcTeamMemberRepository.findById(t);if(!i)throw new p("O membro da equipe SDHC n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as ow}from"@asteasolutions/zod-to-openapi";import xt from"zod";ow(xt);var up=xt.object({id:xt.uuid(),role:xt.string().min(1).optional(),description:xt.string().optional(),userId:xt.uuid().optional(),order:xt.number().optional()}),Zn=class{constructor(e){this.sdhcTeamMemberRepository=e}async handle(e,r){try{let{id:t,role:i,description:n,userId:s,order:m}=up.parse({id:e.params.id,...e.body});if(!await this.sdhcTeamMemberRepository.findById(t))throw new p("O membro da equipe SDHC n\xE3o existe.");return await this.sdhcTeamMemberRepository.update({id:t,role:i,description:n,userId:s,order:m}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var nw=G.object({id:G.uuid(),name:G.string(),emailAddress:G.string(),avatarUrl:G.string().nullable(),orcid:G.string().nullable(),phone:G.string().nullable(),lattesUrl:G.string().nullable(),role:G.enum(iw.UserRole)}),Cg=G.object({id:G.uuid(),role:G.string(),description:G.string().nullable(),order:G.number(),createdAt:G.date(),updatedAt:G.date(),userId:G.uuid(),user:nw}),Sg={method:"post",path:"/sdhc-team-member",tags:["SDHC Team Members"],summary:"Create a new SDHC Team Member",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:cp}}}},responses:{201:{description:"SDHC Team Member created successfully",summary:"SDHC Team Member Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:G.object({errors:G.record(G.string(),G.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:G.object({message:G.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:G.object({message:G.string()})}}}}},wg={method:"get",path:"/sdhc-team-member",tags:["SDHC Team Members"],summary:"List all SDHC Team Members with filters",request:{query:G.object({role:G.string().optional(),orderBy:G.enum(["asc","desc"]).optional()})},responses:{200:{description:"List of SDHC Team Members retrieved successfully",summary:"SDHC Team Members Retrieved",content:{"application/json":{schema:G.object({members:G.array(Cg)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:G.object({message:G.string()})}}}}},vg={method:"get",path:"/sdhc-team-member/{id}",tags:["SDHC Team Members"],summary:"Find SDHC Team Member by ID",request:{params:Vn},responses:{200:{description:"SDHC Team Member details retrieved successfully",summary:"SDHC Team Member Retrieved",content:{"application/json":{schema:Cg}}},400:{description:"Invalid SDHC Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:G.object({errors:G.record(G.string(),G.string())})}}},404:{description:"SDHC Team Member not found with the provided ID",summary:"SDHC Team Member Not Found",content:{"application/json":{schema:G.object({message:G.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:G.object({message:G.string()})}}}}},Eg={method:"put",path:"/sdhc-team-member/{id}",tags:["SDHC Team Members"],summary:"Update SDHC Team Member",security:[{bearerAuth:[]}],request:{params:Vn,body:{content:{"application/json":{schema:up.omit({id:!0})}}}},responses:{200:{description:"SDHC Team Member updated successfully",summary:"SDHC Team Member Updated"},400:{description:"Invalid input data or SDHC Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:G.object({errors:G.record(G.string(),G.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:G.object({message:G.string()})}}},404:{description:"SDHC Team Member not found with the provided ID",summary:"SDHC Team Member Not Found",content:{"application/json":{schema:G.object({message:G.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:G.object({message:G.string()})}}}}},jg={method:"delete",path:"/sdhc-team-member/{id}",tags:["SDHC Team Members"],summary:"Delete SDHC Team Member",security:[{bearerAuth:[]}],request:{params:dp},responses:{200:{description:"SDHC Team Member deleted successfully",summary:"SDHC Team Member Deleted"},400:{description:"Invalid SDHC Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:G.object({errors:G.record(G.string(),G.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:G.object({message:G.string()})}}},404:{description:"SDHC Team Member not found with the provided ID",summary:"SDHC Team Member Not Found",content:{"application/json":{schema:G.object({message:G.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:G.object({message:G.string()})}}}}};import{$Enums as Pg}from"@prisma/client";import H from"zod";import{extendZodWithOpenApi as sw}from"@asteasolutions/zod-to-openapi";import gp from"zod";sw(gp);var fp=gp.object({id:gp.string()}),Kn=class{constructor(e){this.userRepository=e}async handle(e,r){try{let{id:t}=fp.parse({id:e.params.id}),i=await this.userRepository.findById(t);if(!i)throw new p("O usu\xE1rio n\xE3o existe.");let n=e.user.id;if(i.id!==n)throw new Ie("Voc\xEA n\xE3o tem permiss\xE3o para deletar o usu\xE1rio");return await this.userRepository.deleteById(i.id),r.sendStatus(204)}catch(t){if(console.log(t),t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as aw}from"@asteasolutions/zod-to-openapi";import{z as yp}from"zod";aw(yp);var hp=yp.object({id:yp.string().min(1,"id do usu\xE1rio n\xE3o fornecido.")}),Jn=class{constructor(e){this.userRepository=e}async handle(e,r){try{let{id:t}=hp.parse(e.params),i=await this.userRepository.findById(t);if(!i)throw new p("Usu\xE1rio n\xE3o encontrado");r.status(200).json(i)}catch(t){if(console.log(t),t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as mw}from"@asteasolutions/zod-to-openapi";import Mt from"zod";var Mg=2,xg=1024,cw=xg*xg,pw=Mg*cw,dw=/^\d{4}-\d{4}-\d{4}-\d{4}$/,lw=/^\(?\d{2}\)?[\s-]?\d{4,5}-?\d{4}$/;mw(Mt);var Rp=Mt.object({name:Mt.string().optional(),lattesUrl:Mt.string().optional(),orcid:Mt.string().optional().transform(o=>o===void 0?void 0:o.trim()).refine(o=>o===void 0||o===""||dw.test(o),{message:"ORCID inv\xE1lido. Deve estar no formato 0000-0000-0000-0000"}),phone:Mt.string().optional().refine(o=>o===void 0||o===""||lw.test(o),{message:"Telefone inv\xE1lido. Deve estar no formato (99) 99999-9999"}),avatarImage:Mt.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=pw,`A imagem deve ter no m\xE1ximo ${Mg}MB.`).optional()}),Yn=class{constructor(e,r){this.userRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{avatarImage:t,...i}=Rp.parse({...e.body,avatarImage:e.file}),n=e.user.id,s=await this.userRepository.findById(n);if(!s)throw new de("O usu\xE1rio n\xE3o existe");let m=s.avatarUrl;return t&&(s.avatarUrl?m=await this.firebaseStorageService.updateFile({file:t,id:n,folder:M.USER,fileUrl:s.avatarUrl}):m=await this.firebaseStorageService.uploadFile({file:t,id:n,folder:M.USER})),await this.userRepository.update({...i,id:n,avatarUrl:m||void 0}),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Tg={method:"get",path:"/users/{id}",tags:["Users"],summary:"Find user by ID",request:{params:hp},responses:{200:{description:"User details retrieved successfully",summary:"User Retrieved",content:{"application/json":{schema:H.object({id:H.string(),name:H.string(),createdAt:H.date(),updatedAt:H.date(),role:H.enum(Pg.UserRole),lattesUrl:H.string().nullable(),orcid:H.string().nullable(),phone:H.string().nullable(),avatarUrl:H.url().nullable(),emailAddress:H.email()})}}},400:{description:"Invalid user ID format",summary:"Validation Error",content:{"application/json":{schema:H.object({errors:H.record(H.string(),H.string())})}}},404:{description:"User not found with the provided ID",summary:"User Not Found",content:{"application/json":{schema:H.object({message:H.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:H.object({message:H.string()})}}}}},Ag={method:"put",path:"/users",tags:["Users"],summary:"Update authenticated user",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:Rp}}}},responses:{200:{description:"User profile updated successfully",summary:"User Updated",content:{"application/json":{schema:H.object({message:H.string()})}}},400:{description:"Invalid input data or file format",summary:"Validation Error",content:{"application/json":{schema:H.object({errors:H.record(H.string(),H.string())})}}},401:{description:"User not authenticated or unauthorized",summary:"Authentication Required",content:{"application/json":{schema:H.object({message:H.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:H.object({message:H.string()})}}}}},Dg={method:"delete",path:"/users",tags:["Users"],summary:"Delete authenticated user",security:[{bearerAuth:[]}],request:{params:fp},responses:{200:{description:"User account deleted successfully",summary:"User Deleted",content:{"application/json":{schema:H.object({message:H.string()})}}},400:{description:"Invalid request parameters",summary:"Validation Error",content:{"application/json":{schema:H.object({errors:H.record(H.string(),H.string())})}}},401:{description:"User not authenticated or unauthorized",summary:"Authentication Required",content:{"application/json":{schema:H.object({message:H.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:H.object({message:H.string()})}}}}},Fg={method:"get",path:"/users",tags:["Users"],summary:"List users",responses:{200:{description:"Complete list of users retrieved successfully",summary:"Users Retrieved",content:{"application/json":{schema:H.array(H.object({id:H.string(),name:H.string(),createdAt:H.date(),updatedAt:H.date(),role:H.enum(Pg.UserRole),lattesUrl:H.url().nullable(),orcid:H.string().nullable(),phone:H.string().nullable(),avatarUrl:H.string().nullable(),emailAddress:H.email()}))}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:H.object({message:H.string()})}}}}};import S from"zod";import{extendZodWithOpenApi as uw}from"@asteasolutions/zod-to-openapi";import Ip from"zod";uw(Ip);var bp=Ip.object({id:Ip.uuid()}),Xn=class{constructor(e,r){this.webinarRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=bp.parse({id:e.params.id}),i=await this.webinarRepository.findById(t);if(!i)throw new p("O webinar n\xE3o existe.");return i.thumbnailUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.thumbnailUrl}),await this.webinarRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as gw}from"@asteasolutions/zod-to-openapi";import Cp from"zod";gw(Cp);var Sp=Cp.object({id:Cp.uuid()}),$n=class{constructor(e){this.webinarRepository=e}async handle(e,r){try{let{id:t}=Sp.parse({id:e.params.id}),i=await this.webinarRepository.findById(t);if(!i)throw new p("Webinar n\xE3o encontrado.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as fw}from"@asteasolutions/zod-to-openapi";import Pt from"zod";var yw=1,hw=6;fw(Pt);var wp=Pt.object({page:Pt.coerce.number().min(1).default(yw),limit:Pt.coerce.number().min(1).default(hw),title:Pt.string().optional(),description:Pt.string().optional(),orderBy:Pt.enum(["asc","desc"]).default("desc")}),Qn=class{constructor(e){this.webinarRepository=e}async handle(e,r){try{let{limit:t,page:i,...n}=wp.parse(e.query),s=i*t-t,[m,c]=await Promise.all([this.webinarRepository.find({pagination:{offset:s,limit:t},filter:n}),this.webinarRepository.count({filter:n})]),d=Math.max(Math.ceil(c/t),1);return r.status(200).json({page:i,totalPages:d,offset:s,limit:t,webinars:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Rw}from"@asteasolutions/zod-to-openapi";import Pe from"zod";var Ug=5,Bg=1024,Iw=Bg*Bg,bw=Ug*Iw;Rw(Pe);var vp=Pe.object({id:Pe.uuid(),title:Pe.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio.").optional(),description:Pe.string().optional(),scheduledAt:Pe.coerce.date().optional(),webinarLink:Pe.url("URL do webinar deve ser v\xE1lida").optional(),guestIds:Pe.transform(o=>typeof o=="string"?o.split(","):o).pipe(Pe.array(Pe.uuid())).optional(),thumbnail:Pe.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=bw,`A thumbnail deve ter no m\xE1ximo ${Ug}MB.`).optional()}),es=class{constructor(e,r){this.webinarRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,thumbnail:i,title:n,description:s,scheduledAt:m,webinarLink:c,guestIds:d}=vp.parse({id:e.params.id,...e.body,thumbnail:e.file}),h=await this.webinarRepository.findById(t);if(!h)throw new p("O webinar n\xE3o existe.");let j=h.thumbnailUrl;if(i&&(j=await this.firebaseStorageService.uploadFile({file:i,id:t,folder:M.WEBINAR})),!j)throw new a("Thumbnail URL \xE9 obrigat\xF3rio");return await this.webinarRepository.update({id:t,title:n,description:s,scheduledAt:m,webinarLink:c,thumbnailUrl:j,guestIds:d}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var qg={method:"post",path:"/webinars",tags:["Webinars"],summary:"Create webinar",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:S.object({title:S.string().min(1).openapi({description:"T\xEDtulo do webinar"}),description:S.string().optional().openapi({description:"Descri\xE7\xE3o do webinar"}),scheduledAt:S.string().openapi({description:"Data e hora agendada (ISO 8601)",example:"2024-01-01T10:00:00Z"}),webinarLink:S.string().url().optional().openapi({description:"Link do webinar"}),guestIds:S.string().openapi({description:"IDs dos convidados separados por v\xEDrgula",example:"uuid1,uuid2,uuid3"}),thumbnail:S.string().optional().openapi({description:"Imagem de thumbnail (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{201:{description:"Webinar created successfully",summary:"Webinar Created"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:S.object({errors:S.record(S.string(),S.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:S.object({message:S.string()})}}}}},kg={method:"get",path:"/webinars",tags:["Webinars"],summary:"List webinars",security:[{bearerAuth:[]}],request:{query:wp},responses:{200:{description:"Paginated list of webinars with guest information retrieved successfully",summary:"Webinars Retrieved",content:{"application/json":{schema:S.object({page:S.number(),totalPages:S.number(),offset:S.number(),limit:S.number(),webinars:S.array(S.object({id:S.string(),title:S.string(),description:S.string().nullable(),scheduledAt:S.date(),webinarLink:S.string().nullable(),thumbnailUrl:S.string().nullable(),createdAt:S.date(),updatedAt:S.date(),guests:S.array(S.object({id:S.uuid(),name:S.string(),emailAddress:S.email(),avatarUrl:S.string().nullable(),createdAt:S.date(),updatedAt:S.date()}))}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:S.object({errors:S.record(S.string(),S.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:S.object({message:S.string()})}}}}},Og={method:"get",path:"/webinars/{id}",tags:["Webinars"],summary:"Find webinar by ID",security:[{bearerAuth:[]}],request:{params:Sp},responses:{200:{description:"Webinar details retrieved successfully",summary:"Webinar Retrieved",content:{"application/json":{schema:S.object({id:S.string(),title:S.string(),description:S.string().nullable(),scheduledAt:S.date(),webinarLink:S.string().nullable(),thumbnailUrl:S.string().nullable(),createdAt:S.date(),updatedAt:S.date(),guests:S.array(S.object({id:S.uuid(),name:S.string(),emailAddress:S.email(),avatarUrl:S.string().nullable(),createdAt:S.date(),updatedAt:S.date()}))}).nullable()}}},400:{description:"Invalid webinar ID format",summary:"Validation Error",content:{"application/json":{schema:S.object({errors:S.record(S.string(),S.string())})}}},404:{description:"Webinar not found with the provided ID",summary:"Webinar Not Found",content:{"application/json":{schema:S.object({message:S.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:S.object({message:S.string()})}}}}},Ng={method:"put",path:"/webinars/{id}",tags:["Webinars"],summary:"Update webinar",security:[{bearerAuth:[]}],request:{params:vp.pick({id:!0}),body:{content:{"multipart/form-data":{schema:S.object({title:S.string().min(1).optional().openapi({description:"T\xEDtulo do webinar"}),description:S.string().optional().openapi({description:"Descri\xE7\xE3o do webinar"}),scheduledAt:S.string().optional().openapi({description:"Data e hora agendada (ISO 8601)",example:"2024-01-01T10:00:00Z"}),webinarLink:S.string().url().optional().openapi({description:"Link do webinar"}),guestIds:S.string().optional().openapi({description:"IDs dos convidados separados por v\xEDrgula",example:"uuid1,uuid2,uuid3"}),thumbnail:S.string().optional().openapi({description:"Imagem de thumbnail (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{200:{description:"Webinar updated successfully",summary:"Webinar Updated"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:S.object({errors:S.record(S.string(),S.string())})}}},404:{description:"Webinar not found with the provided ID",summary:"Webinar Not Found",content:{"application/json":{schema:S.object({message:S.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:S.object({message:S.string()})}}}}},Gg={method:"delete",path:"/webinars/{id}",tags:["Webinars"],summary:"Delete webinar",security:[{bearerAuth:[]}],request:{params:bp},responses:{200:{description:"Webinar deleted successfully",summary:"Webinar Deleted"},400:{description:"Invalid webinar ID format",summary:"Validation Error",content:{"application/json":{schema:S.object({errors:S.record(S.string(),S.string())})}}},404:{description:"Webinar not found with the provided ID",summary:"Webinar Not Found",content:{"application/json":{schema:S.object({message:S.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:S.object({message:S.string()})}}}}};import{$Enums as Ew}from"@prisma/client";import _ from"zod";import{extendZodWithOpenApi as Cw}from"@asteasolutions/zod-to-openapi";import _r from"zod";Cw(_r);var Ep=_r.object({role:_r.string().min(1),description:_r.string().optional(),userId:_r.uuid()}),ts=class{constructor(e){this.workGroupTeamMemberRepository=e}async handle(e,r){try{let{role:t,description:i,userId:n}=Ep.parse(e.body);return await this.workGroupTeamMemberRepository.create({role:t,description:i,userId:n}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Sw}from"@asteasolutions/zod-to-openapi";import jp from"zod";Sw(jp);var xp=jp.object({id:jp.uuid()}),rs=class{constructor(e){this.workGroupTeamMemberRepository=e}async handle(e,r){try{let{id:t}=xp.parse({id:e.params.id});if(!await this.workGroupTeamMemberRepository.findById(t))throw new p("O membro do grupo de trabalho n\xE3o existe.");return await this.workGroupTeamMemberRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as ww}from"@asteasolutions/zod-to-openapi";import Mp from"zod";ww(Mp);var is=Mp.object({id:Mp.uuid()}),os=class{constructor(e){this.workGroupTeamMemberRepository=e}async handle(e,r){try{let{id:t}=is.parse({id:e.params.id}),i=await this.workGroupTeamMemberRepository.findById(t);if(!i)throw new p("O membro do grupo de trabalho n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as vw}from"@asteasolutions/zod-to-openapi";import ar from"zod";vw(ar);var Pp=ar.object({id:ar.uuid(),role:ar.string().min(1).optional(),description:ar.string().optional(),userId:ar.uuid().optional()}),ns=class{constructor(e){this.workGroupTeamMemberRepository=e}async handle(e,r){try{let{id:t,role:i,description:n,userId:s}=Pp.parse({id:e.params.id,...e.body});if(!await this.workGroupTeamMemberRepository.findById(t))throw new p("O membro do grupo de trabalho n\xE3o existe.");return await this.workGroupTeamMemberRepository.update({id:t,role:i,description:n,userId:s}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var jw=_.object({id:_.uuid(),name:_.string(),emailAddress:_.string(),avatarUrl:_.string().nullable(),orcid:_.string().nullable(),phone:_.string().nullable(),lattesUrl:_.string().nullable(),role:_.enum(Ew.UserRole)}),Lg=_.object({id:_.uuid(),role:_.string(),description:_.string().nullable(),createdAt:_.date(),updatedAt:_.date(),userId:_.uuid(),user:jw}),Wg={method:"post",path:"/work-group-team-member",tags:["Work Group Team Members"],summary:"Create a new Work Group Team Member",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:Ep}}}},responses:{201:{description:"Work Group Team Member created successfully",summary:"Work Group Team Member Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:_.object({errors:_.record(_.string(),_.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:_.object({message:_.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:_.object({message:_.string()})}}}}},_g={method:"get",path:"/work-group-team-member",tags:["Work Group Team Members"],summary:"List all Work Group Team Members with filters",request:{query:_.object({role:_.string().optional(),orderBy:_.enum(["asc","desc"]).optional()})},responses:{200:{description:"List of Work Group Team Members retrieved successfully",summary:"Work Group Team Members Retrieved",content:{"application/json":{schema:_.object({members:_.array(Lg)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:_.object({message:_.string()})}}}}},zg={method:"get",path:"/work-group-team-member/{id}",tags:["Work Group Team Members"],summary:"Find Work Group Team Member by ID",request:{params:is},responses:{200:{description:"Work Group Team Member details retrieved successfully",summary:"Work Group Team Member Retrieved",content:{"application/json":{schema:Lg}}},400:{description:"Invalid Work Group Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:_.object({errors:_.record(_.string(),_.string())})}}},404:{description:"Work Group Team Member not found with the provided ID",summary:"Work Group Team Member Not Found",content:{"application/json":{schema:_.object({message:_.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:_.object({message:_.string()})}}}}},Hg={method:"put",path:"/work-group-team-member/{id}",tags:["Work Group Team Members"],summary:"Update Work Group Team Member",security:[{bearerAuth:[]}],request:{params:is,body:{content:{"application/json":{schema:Pp.omit({id:!0})}}}},responses:{200:{description:"Work Group Team Member updated successfully",summary:"Work Group Team Member Updated"},400:{description:"Invalid input data or Work Group Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:_.object({errors:_.record(_.string(),_.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:_.object({message:_.string()})}}},404:{description:"Work Group Team Member not found with the provided ID",summary:"Work Group Team Member Not Found",content:{"application/json":{schema:_.object({message:_.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:_.object({message:_.string()})}}}}},Vg={method:"delete",path:"/work-group-team-member/{id}",tags:["Work Group Team Members"],summary:"Delete Work Group Team Member",security:[{bearerAuth:[]}],request:{params:xp},responses:{200:{description:"Work Group Team Member deleted successfully",summary:"Work Group Team Member Deleted"},400:{description:"Invalid Work Group Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:_.object({errors:_.record(_.string(),_.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:_.object({message:_.string()})}}},404:{description:"Work Group Team Member not found with the provided ID",summary:"Work Group Team Member Not Found",content:{"application/json":{schema:_.object({message:_.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:_.object({message:_.string()})}}}}};var f=new xw;f.registerComponent("securitySchemes","bearerAuth",{type:"http",scheme:"bearer",bearerFormat:"JWT"});f.registerPath(rd);f.registerPath(od);f.registerPath(id);f.registerPath(nd);f.registerPath(ad);f.registerPath(md);f.registerPath(sd);f.registerPath(Tg);f.registerPath(Ag);f.registerPath(Dg);f.registerPath(Fg);f.registerPath(Hl);f.registerPath(Vl);f.registerPath(Zl);f.registerPath(Kl);f.registerPath(fd);f.registerPath(yd);f.registerPath(hd);f.registerPath(Rd);f.registerPath(Id);f.registerPath(su);f.registerPath(au);f.registerPath(mu);f.registerPath(cu);f.registerPath(pu);f.registerPath(Hd);f.registerPath(Vd);f.registerPath(Zd);f.registerPath(Kd);f.registerPath(Jd);f.registerPath(og);f.registerPath(ig);f.registerPath(ng);f.registerPath(sg);f.registerPath(ag);f.registerPath(mg);f.registerPath(Md);f.registerPath(Pd);f.registerPath(Td);f.registerPath(Ad);f.registerPath(Dd);f.registerPath(eu);f.registerPath(tu);f.registerPath(ru);f.registerPath(ou);f.registerPath(iu);f.registerPath(El);f.registerPath(jl);f.registerPath(xl);f.registerPath(Ml);f.registerPath(Pl);f.registerPath(Sg);f.registerPath(wg);f.registerPath(vg);f.registerPath(Eg);f.registerPath(jg);f.registerPath(Il);f.registerPath(bl);f.registerPath(Cl);f.registerPath(Sl);f.registerPath(wl);f.registerPath(Pu);f.registerPath(Tu);f.registerPath(Au);f.registerPath(Du);f.registerPath(Fu);f.registerPath(Bu);f.registerPath(Ol);f.registerPath(Nl);f.registerPath(Gl);f.registerPath(Ll);f.registerPath(Wl);f.registerPath(_l);f.registerPath(Bl);f.registerPath(Ul);f.registerPath(ql);f.registerPath(kl);f.registerPath(ll);f.registerPath(ul);f.registerPath(gl);f.registerPath(fl);f.registerPath(yl);f.registerPath(hl);f.registerPath(ml);f.registerPath(cl);f.registerPath(pl);f.registerPath(dl);f.registerPath(el);f.registerPath(tl);f.registerPath(rl);f.registerPath(ol);f.registerPath(Xu);f.registerPath($u);f.registerPath(Qu);f.registerPath(eg);f.registerPath(tg);f.registerPath(rg);f.registerPath(Zu);f.registerPath(Ku);f.registerPath(Ju);f.registerPath(Yu);f.registerPath(Nu);f.registerPath(Gu);f.registerPath(Lu);f.registerPath(Wu);f.registerPath(qg);f.registerPath(kg);f.registerPath(Og);f.registerPath(Ng);f.registerPath(Gg);f.registerPath(Sd);f.registerPath(wd);f.registerPath(vd);f.registerPath(Ed);f.registerPath(jd);f.registerPath(uu);f.registerPath(gu);f.registerPath(fu);f.registerPath(yu);f.registerPath(hu);f.registerPath(qd);f.registerPath(kd);f.registerPath(Od);f.registerPath(Nd);f.registerPath(Gd);f.registerPath(yg);f.registerPath(hg);f.registerPath(Rg);f.registerPath(Ig);f.registerPath(bg);f.registerPath(cg);f.registerPath(pg);f.registerPath(dg);f.registerPath(lg);f.registerPath(ug);f.registerPath(pd);f.registerPath(dd);f.registerPath(ld);f.registerPath(ud);f.registerPath(gd);f.registerPath(Wg);f.registerPath(_g);f.registerPath(zg);f.registerPath(Hg);f.registerPath(Vg);f.registerPath(Iu);f.registerPath(bu);f.registerPath(Cu);f.registerPath(Su);f.registerPath(wu);var Pw=new Mw(f.definitions),Zg=Pw.generateDocument({openapi:"3.0.0",info:{title:"API da Rede CT",version:"1.0.0",description:"API com valida\xE7\xE3o Zod"}});import{Router as qw}from"express";import{extendZodWithOpenApi as Tw}from"@asteasolutions/zod-to-openapi";import Tp from"zod";Tw(Tp);var Aw=Tp.object({authenticatedUserId:Tp.uuid()}),ss=class{constructor(e){this.userRepository=e}async handle(e,r){try{let{authenticatedUserId:t}=Aw.parse({authenticatedUserId:e.user.id}),i=await this.userRepository.findById(t);if(!i)throw new p("Usu\xE1rio n\xE3o encontrado.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{PrismaClient as Dw}from"@prisma/client";var z=new Dw({log:["warn","error"]});var as=class{constructor(e){this.prisma=e}async register({userId:e,title:r,description:t,certificationUrl:i}){await this.prisma.certification.create({data:{title:r,description:t,certificationUrl:i,user:{connect:{id:e}}}})}async find({pagination:{offset:e,limit:r},filter:{description:t,orderBy:i,title:n,userId:s}}){let m={},c=[];return s&&(m.userId=s),n&&c.push({title:{contains:n,mode:"insensitive"}}),t&&c.push({description:{contains:t,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.certification.findMany({where:m,include:{user:{omit:{passwordHash:!0}}},orderBy:{updatedAt:i},skip:e,take:r})}async findById(e){return await this.prisma.certification.findFirst({where:{id:e}})}async findByUserId({pagination:{limit:e,offset:r},filter:{description:t,orderBy:i,title:n},userId:s}){let m={userId:s},c=[];return n&&c.push({title:{contains:n,mode:"insensitive"}}),t&&c.push({description:{contains:t,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.certification.findMany({where:m,include:{user:{omit:{passwordHash:!0}}},skip:r,take:e,orderBy:i?{updatedAt:i}:{updatedAt:"desc"}})}async update({id:e,...r}){await this.prisma.certification.update({where:{id:e},data:r})}async deleteById(e){await this.prisma.certification.delete({where:{id:e}})}async count({filter:{description:e,title:r,userId:t}}){let i={},n=[];return t&&(i.userId=t),r&&n.push({title:{contains:r,mode:"insensitive"}}),e&&n.push({description:{contains:e,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.certification.count({where:i})}};function yt(){return new as(z)}var ms=class{constructor(e){this.prisma=e}async create(e){await this.prisma.news.create({data:e})}async find({pagination:{offset:e,limit:r},filter:{authorId:t,content:i,title:n,orderBy:s}}){let m={};t&&(m.authorId={contains:t,mode:"insensitive"});let c=[];return n&&c.push({title:{contains:n,mode:"insensitive"}}),i&&c.push({content:{contains:i,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.news.findMany({where:m,omit:{authorId:!0},include:{author:!0},orderBy:{updatedAt:s},skip:e,take:r})}async findById(e){return await this.prisma.news.findUnique({where:{id:e},omit:{authorId:!0},include:{author:!0}})}async findByAuthorId({authorId:e,pagination:{offset:r,limit:t},filter:{orderBy:i="desc",content:n,title:s}}){let m={authorId:e},c=[];return s&&c.push({title:{contains:s,mode:"insensitive"}}),n&&c.push({content:{contains:n,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.news.findMany({omit:{authorId:!0},where:m,orderBy:{updatedAt:i},skip:r,take:t})}async update(e){await this.prisma.news.update({where:{id:e.id},data:{title:e.title,content:e.content,imageUrl:e.imageUrl}})}async delete(e){await this.prisma.news.delete({where:{id:e}})}async count({filter:{authorId:e,content:r,title:t}}){let i={};e&&(i.authorId={contains:e,mode:"insensitive"});let n=[];return t&&n.push({title:{contains:t,mode:"insensitive"}}),r&&n.push({content:{contains:r,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.news.count({where:i})}};function He(){return new ms(z)}var cs=class{constructor(e){this.prisma=e}async create(e){await this.prisma.pendency.create({data:e})}async find({filter:{description:e,orderBy:r,title:t,status:i,userId:n},pagination:{limit:s,offset:m}}){let c={userId:n,AND:{status:{equals:i}}};e&&(c.description={contains:e,mode:"insensitive"});let d=[];return t&&d.push({title:{contains:t,mode:"insensitive"}}),d.length>0&&(c.OR=d),await this.prisma.pendency.findMany({where:c,orderBy:{updatedAt:r},include:{user:{omit:{passwordHash:!0}}},skip:m,take:s})}async findById(e){return await this.prisma.pendency.findFirst({where:{id:e},include:{user:{omit:{passwordHash:!0}}}})}async findByUserId({filter:{description:e,orderBy:r,title:t,status:i},pagination:{limit:n,offset:s},userId:m}){let c={userId:m,AND:{status:{equals:i}}},d=[];return e&&d.push({description:{contains:e,mode:"insensitive"}}),t&&d.push({title:{contains:t,mode:"insensitive"}}),d.length>0&&(c.OR=d),await this.prisma.pendency.findMany({where:c,orderBy:{updatedAt:r},include:{user:{omit:{passwordHash:!0}}},skip:s,take:n})}async update({id:e,...r}){await this.prisma.pendency.update({where:{id:e},data:r})}async deleteById(e){await this.prisma.pendency.delete({where:{id:e}})}async count({filter:{description:e,title:r,status:t,userId:i}}){let n={userId:i},s=[];return e&&s.push({description:{contains:e,mode:"insensitive"}}),r&&s.push({title:{contains:r,mode:"insensitive"}}),t&&s.push({status:{equals:t}}),s.length>0&&(n.OR=s),await this.prisma.pendency.count({where:n})}};function ht(){return new cs(z)}var ps=class{constructor(e){this.prisma=e}async create(e){await this.prisma.user.create({data:e})}async update(e){await this.prisma.user.update({where:{id:e.id},data:{lattesUrl:e.lattesUrl??null,orcid:e.orcid??null,phone:e.phone??null,avatarUrl:e.avatarUrl??null}})}async deleteById(e){await this.prisma.user.delete({where:{id:e}})}async find(){return await this.prisma.user.findMany({omit:{passwordHash:!0}})}async findByEmail(e){return await this.prisma.user.findFirst({where:{emailAddress:e}})}async findById(e){return await this.prisma.user.findFirst({where:{id:e},omit:{passwordHash:!0}})}};function ye(){return new ps(z)}import{compare as Fw,hash as Bw}from"bcryptjs";var ds=class{constructor(e,r){this.hashFn=e;this.compareFn=r}async hash(e){return await this.hashFn(e,6)}async compare({password:e,hashedPassword:r}){return await this.compareFn(e,r)}};function Ap(){return new ds(Bw,Fw)}import Kg from"jsonwebtoken";import he from"zod";var Uw=he.object({JWT_SECRET:he.string(),FIREBASE_BUCKET:he.string(),FIREBASE_CLIENT_EMAIL:he.string(),FIREBASE_PRIVATE_KEY:he.string(),FIREBASE_PROJECT_ID:he.string(),FIREBASE_TYPE:he.string(),FIREBASE_PRIVATE_KEY_ID:he.string(),FIREBASE_CLIENT_ID:he.string(),FIREBASE_AUTH_URI:he.string(),FIREBASE_TOKEN_URI:he.string(),FIREBASE_AUTH_PROVIDER_X509_CERT_URL:he.string(),FIREBASE_CLIENT_X509_CERT_URL:he.string()}),pe=Uw.parse(process.env);var ls=class{constructor(e,r){this.signFn=e;this.verifyFn=r}sign(e){try{return this.signFn(e,pe.JWT_SECRET,{expiresIn:"3d",subject:e.id})}catch{return null}}verify(e){try{return this.verifyFn(e,pe.JWT_SECRET)}catch{return null}}};function us(){return new ls(Kg.sign,Kg.verify)}function Jg(){return{signUpController:new co(ye(),Ap())}}function Yg(){return{signInController:new ao(ye(),Ap(),us())}}function Xg(){return{findAuthenticatedUserController:new ss(ye())}}function $g(){return{findAuthenticatedUserController:new io(He())}}function Qg(){return{findAuthenticatedUserCertificationsController:new oo(yt())}}function ef(){return{findAuthenticatedUserPendenciesController:new no(ht())}}var gs=class{constructor(e){this.jwtService=e}authenticated(e,r,t){let i=e.headers.authorization;if(!i?.startsWith("Bearer "))return r.status(401).json({message:"Token inv\xE1lido.",invalid:!0});let n=i.split(" ")[1];if(!n)return r.status(401).json({message:"Token n\xE3o fornecido."});try{let s=this.jwtService.verify(n);if(!s)return r.status(401).json({message:"Token inv\xE1lido.",invalid:!0});e.user=s,t()}catch(s){if(console.log(s),s instanceof Error)return r.status(401).json({message:s.message})}}isAdmin(e,r,t){let i=e.headers.authorization;if(!i?.startsWith("Bearer "))return r.status(401).json({message:"Token inv\xE1lido.",invalid:!0});let n=i.split(" ")[1];if(!n)return r.status(401).json({message:"Token n\xE3o fornecido."});try{let s=this.jwtService.verify(n);if(!s)return r.status(401).json({message:"Token inv\xE1lido.",invalid:!0});if(s.role!=="ADMIN")return r.status(401).json({message:"\xC9 necess\xE1rio ter permiss\xF5es de administrador."});e.user=s,t()}catch(s){if(console.log(s),s instanceof Error)return r.status(401).json({message:s.message})}}};function Z(){return{authMiddleware:new gs(us())}}var Ve=qw(),{authMiddleware:zr}=Z();Ve.post("/sign-up",async(o,e)=>{let{signUpController:r}=Jg();await r.handle(o,e)});Ve.post("/sign-in",async(o,e)=>{let{signInController:r}=Yg();await r.handle(o,e)});Ve.get("/user",(o,e,r)=>{zr.authenticated(o,e,r)},async(o,e)=>{let{findAuthenticatedUserController:r}=Xg();await r.handle(o,e)});Ve.get("/user/news",(o,e,r)=>{zr.authenticated(o,e,r)},async(o,e)=>{let{findAuthenticatedUserController:r}=$g();await r.handle(o,e)});Ve.get("/admin",(o,e,r)=>{zr.isAdmin(o,e,r)},(o,e)=>{try{e.status(200).json({success:!0})}catch(r){r instanceof Error&&e.status(500).json({message:r.message})}});Ve.get("/certifications",(o,e,r)=>{zr.authenticated(o,e,r)},async(o,e)=>{let{findAuthenticatedUserCertificationsController:r}=Qg();await r.handle(o,e)});Ve.get("/pendencies",(o,e,r)=>{zr.authenticated(o,e,r)},async(o,e)=>{let{findAuthenticatedUserPendenciesController:r}=ef();await r.handle(o,e)});import{Router as Vw}from"express";import{extendZodWithOpenApi as kw}from"@asteasolutions/zod-to-openapi";import Te from"zod";var Ow=5,tf=1024,Nw=tf*tf,Dp=Ow*Nw;kw(Te);var Gw=Te.object({volumeNumber:Te.coerce.number().int().positive("N\xFAmero do volume \xE9 obrigat\xF3rio."),year:Te.coerce.number().int().positive("Ano \xE9 obrigat\xF3rio."),title:Te.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),author:Te.string().min(1,"Autor \xE9 obrigat\xF3rio."),accessUrl:Te.url().optional(),description:Te.string().optional(),authorImage:Te.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=Dp,"A imagem do autor deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB."),coverImage:Te.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=Dp,"A imagem da capa deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB."),catalogSheet:Te.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&typeof o.size=="number"&&o.size<=Dp,"A ficha catalogr\xE1fica deve ter no m\xE1ximo 5MB.")}),fs=class{constructor(e,r){this.bookVolumeRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{volumeNumber:t,year:i,title:n,author:s,accessUrl:m,description:c,authorImage:d,coverImage:h,catalogSheet:j}=Gw.parse({...e.body,authorImage:e.files?.authorImage?.[0],coverImage:e.files?.coverImage?.[0],catalogSheet:e.files?.catalogSheet?.[0]}),q=await this.bookVolumeRepository.create({volumeNumber:t,year:i,title:n,author:s,accessUrl:m,description:c}),$=q.authorImageUrl,ee=q.coverImageUrl,ge=q.catalogSheetUrl;return $=await this.firebaseStorageService.uploadFile({file:d,folder:M.BOOK_VOLUME_AUTHOR_IMAGE,id:q.id}),ee=await this.firebaseStorageService.uploadFile({file:h,folder:M.BOOK_VOLUME_COVER,id:q.id}),ge=await this.firebaseStorageService.uploadFile({file:j,folder:M.BOOK_VOLUME_CATALOG_SHEET,id:q.id}),await this.bookVolumeRepository.update({id:q.id,authorImageUrl:$,coverImageUrl:ee,catalogSheetUrl:ge}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var ys=class{constructor(e){this.prisma=e}async create({volumeNumber:e,year:r,title:t,author:i,accessUrl:n,authorImageUrl:s,coverImageUrl:m,catalogSheetUrl:c,description:d}){return await this.prisma.bookVolume.create({data:{volumeNumber:e,year:r,title:t,author:i,accessUrl:n,authorImageUrl:s,coverImageUrl:m,catalogSheetUrl:c,description:d}})}async find({pagination:{offset:e,limit:r},filter:{title:t,author:i,description:n,orderBy:s}}){let m={},c=[];return t&&c.push({title:{contains:t,mode:"insensitive"}}),i&&c.push({author:{contains:i,mode:"insensitive"}}),n&&c.push({description:{contains:n,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.bookVolume.findMany({where:m,orderBy:{updatedAt:s},skip:e,take:r})}async findById(e){return await this.prisma.bookVolume.findFirst({where:{id:e}})}async update({id:e,volumeNumber:r,year:t,title:i,author:n,accessUrl:s,authorImageUrl:m,coverImageUrl:c,catalogSheetUrl:d,description:h}){await this.prisma.bookVolume.update({where:{id:e},data:{volumeNumber:r,year:t,title:i,author:n,accessUrl:s,authorImageUrl:m,coverImageUrl:c,catalogSheetUrl:d,description:h}})}async deleteById(e){await this.prisma.bookVolume.delete({where:{id:e}})}async count({filter:{title:e,author:r,description:t}}){let i={},n=[];return e&&n.push({title:{contains:e,mode:"insensitive"}}),r&&n.push({author:{contains:r,mode:"insensitive"}}),t&&n.push({description:{contains:t,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.bookVolume.count({where:i})}};function mr(){return new ys(z)}import{getStorage as Ww}from"firebase-admin/storage";import{config as Lw}from"dotenv";import rf from"firebase-admin";Lw();var Fp=rf.initializeApp({credential:rf.credential.cert({clientEmail:pe.FIREBASE_CLIENT_EMAIL,privateKey:pe.FIREBASE_PRIVATE_KEY,projectId:pe.FIREBASE_PROJECT_ID,type:pe.FIREBASE_TYPE,privateKeyId:pe.FIREBASE_PRIVATE_KEY_ID,clientId:pe.FIREBASE_CLIENT_ID,authUri:pe.FIREBASE_AUTH_URI,tokenUri:pe.FIREBASE_TOKEN_URI,authProviderX509CertUrl:pe.FIREBASE_AUTH_PROVIDER_X509_CERT_URL,clientX509CertUrl:pe.FIREBASE_CLIENT_X509_CERT_URL}),storageBucket:pe.FIREBASE_BUCKET});Fp.name?console.log("\u{1F525} Firebase conectado com sucesso!"):console.error("\u274C Erro ao se conectar ao Firebase.");var _w=Ww(Fp),of=_w.bucket(pe.FIREBASE_BUCKET);import{randomUUID as zw}from"node:crypto";var Hw=/https:\/\/storage\.googleapis\.com\/[^/]+\/(.+)$/,hs=class{constructor(e){this.bucket=e}async uploadFile({file:e,folder:r,id:t}){let i=`${zw()}-${e?.originalname}`,n=this.bucket.file(`${r}/${t}/${i}`);return await new Promise((s,m)=>{let c=n.createWriteStream({metadata:{contentType:e?.mimetype}});c.on("error",d=>{m(d)}),c.on("finish",async()=>{try{await n.makePublic();let d=`https://storage.googleapis.com/${this.bucket.name}/${n.name}`;s(d)}catch(d){m(d)}}),c.end(e.buffer)})}async updateFile({file:e,id:r,fileUrl:t,folder:i}){try{let n=this.getPath(t);if(!n)throw new Error("Arquivo n\xE3o encontrado.");let[s,m]=await Promise.all([this.bucket.file(n).delete(),this.uploadFile({file:e,id:r,folder:i})]);return m}catch{throw new Error("Erro ao atualizar o arquivo.")}}async deleteFile({fileUrl:e}){let r=this.getPath(e);if(!r)throw new Error("Arquivo n\xE3o encontrado.");try{await this.bucket.file(r).delete()}catch{throw new Error("Erro ao deletar o arquivo.")}}getPath(e){let r=e.match(Hw);return r?r[1]:null}};function F(){return new hs(of)}function nf(){return{createBookVolumeController:new fs(mr(),F())}}function sf(){return{findBookVolumesController:new uo(mr())}}function af(){return{findBookVolumeByIdController:new lo(mr())}}function mf(){return{updateBookVolumeController:new fo(mr(),F())}}function cf(){return{deleteBookVolumeController:new po(mr(),F())}}import pf from"multer";var V=pf({storage:pf.memoryStorage()});var Tt=Vw(),{authMiddleware:Hr}=Z();Tt.post("/",(o,e,r)=>{Hr.isAdmin(o,e,r)},V.fields([{name:"authorImage",maxCount:1},{name:"coverImage",maxCount:1},{name:"catalogSheet",maxCount:1}]),async(o,e)=>{let{createBookVolumeController:r}=nf();await r.handle(o,e)});Tt.get("/",(o,e,r)=>{Hr.isAdmin(o,e,r)},async(o,e)=>{let{findBookVolumesController:r}=sf();await r.handle(o,e)});Tt.get("/:id",(o,e,r)=>{Hr.isAdmin(o,e,r)},async(o,e)=>{let{findBookVolumeByIdController:r}=af();await r.handle(o,e)});Tt.put("/:id",(o,e,r)=>{Hr.isAdmin(o,e,r)},V.fields([{name:"authorImage",maxCount:1},{name:"coverImage",maxCount:1},{name:"catalogSheet",maxCount:1}]),async(o,e)=>{let{updateBookVolumeController:r}=mf();await r.handle(o,e)});Tt.delete("/:id",(o,e,r)=>{Hr.isAdmin(o,e,r)},async(o,e)=>{let{deleteBookVolumeController:r}=cf();await r.handle(o,e)});import{Router as Zw}from"express";function df(){return{registerCertificationController:new Io(ye(),yt(),F())}}function lf(){return{findCertificationsController:new Ro(yt())}}function uf(){return{findCertificationByIdController:new ho(yt())}}function gf(){return{updateCertificationController:new Co(yt(),F())}}function ff(){return{deleteCertificationController:new yo(yt(),F())}}var At=Zw(),{authMiddleware:Vr}=Z();At.post("/:user_id",(o,e,r)=>{Vr.isAdmin(o,e,r)},V.single("certification"),async(o,e)=>{let{registerCertificationController:r}=df();await r.handle(o,e)});At.get("/",(o,e,r)=>{Vr.isAdmin(o,e,r)},async(o,e)=>{let{findCertificationsController:r}=lf();await r.handle(o,e)});At.get("/:certification_id",(o,e,r)=>{Vr.isAdmin(o,e,r)},async(o,e)=>{let{findCertificationByIdController:r}=uf();await r.handle(o,e)});At.put("/:certification_id",(o,e,r)=>{Vr.isAdmin(o,e,r)},V.single("certification"),async(o,e)=>{let{updateCertificationController:r}=gf();await r.handle(o,e)});At.delete("/:certification_id",(o,e,r)=>{Vr.isAdmin(o,e,r)},async(o,e)=>{let{deleteCertificationController:r}=ff();await r.handle(o,e)});import{Router as Qw}from"express";import{extendZodWithOpenApi as Kw}from"@asteasolutions/zod-to-openapi";import Re from"zod";var Jw=5,yf=1024,Yw=yf*yf,Xw=Jw*Yw;Kw(Re);var $w=Re.object({title:Re.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),coordinatorId:Re.string().uuid("Coordenador \xE9 obrigat\xF3rio."),email:Re.email("E-mail deve ser v\xE1lido."),location:Re.string().min(1,"Localiza\xE7\xE3o \xE9 obrigat\xF3ria."),scheduledAt:Re.coerce.date(),registrationLink:Re.url().optional(),description:Re.string().optional(),instructorIds:Re.transform(o=>typeof o=="string"?o.split(","):o).pipe(Re.array(Re.uuid())),image:Re.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=Xw,"A imagem deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.")}),Rs=class{constructor(e,r){this.courseRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{title:t,coordinatorId:i,email:n,location:s,scheduledAt:m,registrationLink:c,description:d,instructorIds:h,image:j}=$w.parse({...e.body,image:e.file}),q=await this.courseRepository.create({title:t,coordinatorId:i,email:n,location:s,scheduledAt:m,registrationLink:c||void 0,description:d,instructorIds:h}),$=await this.firebaseStorageService.uploadFile({file:j,folder:M.COURSE,id:q.id});return await this.courseRepository.update({id:q.id,imageUrl:$}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Is=class{constructor(e){this.prisma=e}async create({title:e,imageUrl:r,coordinatorId:t,email:i,instructorIds:n,scheduledAt:s,location:m,registrationLink:c,description:d}){return await this.prisma.course.create({data:{title:e,imageUrl:r,coordinatorId:t,email:i,scheduledAt:s,location:m,registrationLink:c,description:d,instructors:{connect:n?.map(h=>({id:h}))}}})}async find({pagination:{offset:e,limit:r},filter:{description:t,orderBy:i,title:n,coordinator:s}}){let m={},c=[];return n&&c.push({title:{contains:n,mode:"insensitive"}}),t&&c.push({description:{contains:t,mode:"insensitive"}}),s&&c.push({coordinator:{name:{contains:s,mode:"insensitive"}}}),c.length>0&&(m.OR=c),await this.prisma.course.findMany({where:m,include:{coordinator:{omit:{passwordHash:!0}},instructors:{omit:{passwordHash:!0}}},orderBy:{updatedAt:i},skip:e,take:r})}async findById(e){return await this.prisma.course.findFirst({where:{id:e},include:{coordinator:{omit:{passwordHash:!0}},instructors:{omit:{passwordHash:!0}}}})}async update({id:e,title:r,imageUrl:t,coordinatorId:i,email:n,instructorIds:s,scheduledAt:m,location:c,registrationLink:d,description:h}){s!==void 0&&await this.prisma.course.update({where:{id:e},data:{instructors:{set:[]}}}),await this.prisma.course.update({where:{id:e},data:{title:r,imageUrl:t,coordinatorId:i,email:n,scheduledAt:m,location:c,registrationLink:d,description:h,...s?.length>0&&{instructors:{connect:s.map(j=>({id:j}))}}}})}async deleteById(e){await this.prisma.course.delete({where:{id:e}})}async count({filter:{description:e,title:r,coordinator:t}}){let i={},n=[];return r&&n.push({title:{contains:r,mode:"insensitive"}}),e&&n.push({description:{contains:e,mode:"insensitive"}}),t&&n.push({coordinator:{name:{contains:t,mode:"insensitive"}}}),n.length>0&&(i.OR=n),await this.prisma.course.count({where:i})}};function cr(){return new Is(z)}function hf(){return{createCourseController:new Rs(cr(),F())}}function Rf(){return{findCoursesController:new Eo(cr())}}function If(){return{findCourseByIdController:new vo(cr())}}function bf(){return{updateCourseController:new jo(cr(),F())}}function Cf(){return{deleteCourseController:new wo(cr(),F())}}var Dt=Qw(),{authMiddleware:Zr}=Z();Dt.post("/",(o,e,r)=>{Zr.isAdmin(o,e,r)},V.single("image"),async(o,e)=>{let{createCourseController:r}=hf();await r.handle(o,e)});Dt.get("/",(o,e,r)=>{Zr.isAdmin(o,e,r)},async(o,e)=>{let{findCoursesController:r}=Rf();await r.handle(o,e)});Dt.get("/:id",(o,e,r)=>{Zr.isAdmin(o,e,r)},async(o,e)=>{let{findCourseByIdController:r}=If();await r.handle(o,e)});Dt.put("/:id",(o,e,r)=>{Zr.isAdmin(o,e,r)},V.single("image"),async(o,e)=>{let{updateCourseController:r}=bf();await r.handle(o,e)});Dt.delete("/:id",(o,e,r)=>{Zr.isAdmin(o,e,r)},async(o,e)=>{let{deleteCourseController:r}=Cf();await r.handle(o,e)});import{Router as iv}from"express";import{extendZodWithOpenApi as ev}from"@asteasolutions/zod-to-openapi";import Ze from"zod";var tv=1,rv=9;ev(Ze);var ov=Ze.object({page:Ze.coerce.number().min(1).default(tv),limit:Ze.coerce.number().min(1).default(rv),code:Ze.string().optional(),title:Ze.string().optional(),description:Ze.string().optional(),notes:Ze.string().optional(),orderBy:Ze.enum(["asc","desc"]).default("desc")}),bs=class{constructor(e){this.etpRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=ov.parse(e.query),s=i*t-i,[m,c]=await Promise.all([this.etpRepository.find({pagination:{offset:s,limit:i},filter:n}),this.etpRepository.count({filter:n})]),d=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:d,offset:s,limit:i,etps:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Cs=class{constructor(e){this.prisma=e}async create(e){let{leaderId:r,deputyLeaderId:t,secretaryId:i,memberIds:n,...s}=e;await this.prisma.$transaction(async m=>{let c=await m.eTP.create({data:s});await m.eTPLeader.create({data:{etpId:c.id,researcherId:r}}),await m.eTPDeputy.create({data:{etpId:c.id,researcherId:t}}),await m.eTPSecretary.create({data:{etpId:c.id,researcherId:i}}),await m.eTP.update({where:{id:c.id},data:{members:{connect:n.map(d=>({id:d}))}}})})}async update(e){let{leaderId:r,deputyLeaderId:t,secretaryId:i,memberIds:n,...s}=e;await this.prisma.$transaction(async m=>{await m.eTP.update({where:{id:e.id},data:s}),await this.updateLeader(m,e.id,r),await this.updateDeputyLeader(m,e.id,t),await this.updateSecretary(m,e.id,i),await this.updateMembers(m,e.id,n)})}async updateLeader(e,r,t){t!==void 0&&(await e.eTPLeader.deleteMany({where:{etpId:r}}),t&&await e.eTPLeader.create({data:{etpId:r,researcherId:t}}))}async updateDeputyLeader(e,r,t){t!==void 0&&(await e.eTPDeputy.deleteMany({where:{etpId:r}}),t&&await e.eTPDeputy.create({data:{etpId:r,researcherId:t}}))}async updateSecretary(e,r,t){t!==void 0&&(await e.eTPSecretary.deleteMany({where:{etpId:r}}),t&&await e.eTPSecretary.create({data:{etpId:r,researcherId:t}}))}async updateMembers(e,r,t){t!==void 0&&await e.eTP.update({where:{id:r},data:{members:{set:t.map(i=>({id:i}))}}})}async deleteById(e){await this.prisma.eTP.delete({where:{id:e}})}async find({pagination:{offset:e,limit:r},filter:{code:t,title:i,description:n,notes:s,orderBy:m}}){let c={},d=[];return t&&d.push({code:{contains:t,mode:"insensitive"}}),i&&d.push({title:{contains:i,mode:"insensitive"}}),n&&d.push({description:{contains:n,mode:"insensitive"}}),s&&d.push({notes:{contains:s,mode:"insensitive"}}),d.length>0&&(c.OR=d),await this.prisma.eTP.findMany({where:c,include:{leader:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},deputyLeader:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},secretary:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},members:{include:{user:{omit:{passwordHash:!0}}}}},orderBy:{updatedAt:m},skip:e,take:r})}async findById(e){return await this.prisma.eTP.findFirst({where:{id:e},include:{leader:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},deputyLeader:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},secretary:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},members:{include:{user:{omit:{passwordHash:!0}}}}}})}async findByCode(e){return await this.prisma.eTP.findFirst({where:{code:e},include:{leader:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},deputyLeader:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},secretary:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},members:{include:{user:{omit:{passwordHash:!0}}}}}})}async count({filter:{code:e,title:r,description:t,notes:i}}){let n={},s=[];return e&&s.push({code:{contains:e,mode:"insensitive"}}),r&&s.push({title:{contains:r,mode:"insensitive"}}),t&&s.push({description:{contains:t,mode:"insensitive"}}),i&&s.push({notes:{contains:i,mode:"insensitive"}}),s.length>0&&(n.OR=s),await this.prisma.eTP.count({where:n})}};function pr(){return new Cs(z)}function Sf(){return{createETPController:new xo(pr())}}function wf(){return{findETPsController:new bs(pr())}}function vf(){return{findETPByIdController:new Po(pr())}}function Ef(){return{updateETPController:new Ao(pr())}}function jf(){return{deleteETPController:new Mo(pr())}}var Ft=iv(),{authMiddleware:Bp}=Z();Ft.post("/",(o,e,r)=>{Bp.authenticated(o,e,r)},async(o,e)=>{let{createETPController:r}=Sf();await r.handle(o,e)});Ft.get("/",async(o,e)=>{let{findETPsController:r}=wf();await r.handle(o,e)});Ft.get("/:id",async(o,e)=>{let{findETPByIdController:r}=vf();await r.handle(o,e)});Ft.put("/:id",(o,e,r)=>{Bp.authenticated(o,e,r)},async(o,e)=>{let{updateETPController:r}=Ef();await r.handle(o,e)});Ft.delete("/:id",(o,e,r)=>{Bp.authenticated(o,e,r)},async(o,e)=>{let{deleteETPController:r}=jf();await r.handle(o,e)});import{Router as nv}from"express";var Ss=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.event.create({data:e})}async update(e){await this.prisma.event.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.event.delete({where:{id:e}})}async find({pagination:{offset:e,limit:r},filter:{title:t,status:i,format:n,orderBy:s}}){let m={},c=[];return i&&(m.status=i),n&&(m.format=n),t&&c.push({title:{contains:t,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.event.findMany({where:m,orderBy:s?{startDate:s}:{startDate:"desc"},skip:e,take:r})}async findById(e){return await this.prisma.event.findFirst({where:{id:e}})}async count({filter:{title:e,status:r,format:t}}){let i={},n=[];return r&&(i.status=r),t&&(i.format=t),e&&n.push({title:{contains:e,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.event.count({where:i})}};function dr(){return new Ss(z)}function xf(){return{createEventController:new Bo(dr(),F())}}function Mf(){return{findEventsController:new Oo(dr())}}function Pf(){return{findEventByIdController:new qo(dr())}}function Tf(){return{updateEventController:new No(dr(),F())}}function Af(){return{deleteEventController:new Uo(dr())}}var Bt=nv(),{authMiddleware:Up}=Z();Bt.post("/",(o,e,r)=>{Up.authenticated(o,e,r)},V.single("image"),async(o,e)=>{let{createEventController:r}=xf();await r.handle(o,e)});Bt.get("/",async(o,e)=>{let{findEventsController:r}=Mf();await r.handle(o,e)});Bt.get("/:id",async(o,e)=>{let{findEventByIdController:r}=Pf();await r.handle(o,e)});Bt.put("/:id",(o,e,r)=>{Up.authenticated(o,e,r)},V.single("image"),async(o,e)=>{let{updateEventController:r}=Tf();await r.handle(o,e)});Bt.delete("/:id",(o,e,r)=>{Up.authenticated(o,e,r)},async(o,e)=>{let{deleteEventController:r}=Af();await r.handle(o,e)});import{Router as sv}from"express";var ws=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.inMemoriam.create({data:e})}async update(e){await this.prisma.inMemoriam.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.inMemoriam.delete({where:{id:e}})}async find({pagination:{offset:e,limit:r},filter:{name:t,biography:i,role:n,orderBy:s}}){let m={},c=[];return n&&(m.role=n),t&&c.push({name:{contains:t,mode:"insensitive"}}),i&&c.push({biography:{contains:i,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.inMemoriam.findMany({where:m,orderBy:{updatedAt:s},skip:e,take:r})}async findById(e){return await this.prisma.inMemoriam.findFirst({where:{id:e}})}async findByRole(e){return await this.prisma.inMemoriam.findMany({where:{role:e}})}async count({filter:{name:e,biography:r,role:t}}){let i={},n=[];return t&&(i.role=t),e&&n.push({name:{contains:e,mode:"insensitive"}}),r&&n.push({biography:{contains:r,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.inMemoriam.count({where:i})}};function Ut(){return new ws(z)}function Df(){return{createInMemoriamController:new Go(Ut(),F())}}function Ff(){return{findInMemoriamsController:new Ho(Ut())}}function Bf(){return{findInMemoriamByIdController:new Wo(Ut())}}function Uf(){return{findInMemoriamByRoleController:new zo(Ut())}}function qf(){return{updateInMemoriamController:new Vo(Ut(),F())}}function kf(){return{deleteInMemoriamController:new Lo(Ut(),F())}}var Rt=sv(),{authMiddleware:qp}=Z();Rt.post("/",(o,e,r)=>{qp.authenticated(o,e,r)},V.single("photo"),async(o,e)=>{let{createInMemoriamController:r}=Df();await r.handle(o,e)});Rt.get("/",async(o,e)=>{let{findInMemoriamsController:r}=Ff();await r.handle(o,e)});Rt.get("/:id",async(o,e)=>{let{findInMemoriamByIdController:r}=Bf();await r.handle(o,e)});Rt.get("/role/:role",async(o,e)=>{let{findInMemoriamByRoleController:r}=Uf();await r.handle(o,e)});Rt.put("/:id",(o,e,r)=>{qp.authenticated(o,e,r)},V.single("photo"),async(o,e)=>{let{updateInMemoriamController:r}=qf();await r.handle(o,e)});Rt.delete("/:id",(o,e,r)=>{qp.authenticated(o,e,r)},async(o,e)=>{let{deleteInMemoriamController:r}=kf();await r.handle(o,e)});import{Router as av}from"express";var kp=av();kp.get("/",(o,e)=>{e.status(200).json({message:"Rede CT"})});import{Router as lv}from"express";var vs=class{constructor(e){this.prisma=e}async create(e){await this.prisma.internationalScientificCongress.create({data:e})}async update(e){await this.prisma.internationalScientificCongress.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.internationalScientificCongress.delete({where:{id:e}})}async find({pagination:{offset:e,limit:r},filter:{title:t,edition:i,location:n,orderBy:s}}){let m={},c=[];return i&&c.push({edition:{equals:i}}),t&&c.push({title:{contains:t,mode:"insensitive"}}),n&&c.push({location:{contains:n,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.internationalScientificCongress.findMany({where:m,include:{partners:!0,galleries:!0},orderBy:s?{startDate:s}:{startDate:"desc"},skip:e,take:r})}async findById(e){return await this.prisma.internationalScientificCongress.findFirst({where:{id:e},include:{partners:!0,galleries:!0}})}async findByEdition(e){return await this.prisma.internationalScientificCongress.findMany({where:{edition:e},include:{partners:!0,galleries:!0}})}async count({filter:{title:e,edition:r,location:t}}){let i={},n=[];return r&&n.push({edition:{equals:r}}),e&&n.push({title:{contains:e,mode:"insensitive"}}),t&&n.push({location:{contains:t,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.internationalScientificCongress.count({where:i})}};function Ae(){return new vs(z)}function Of(){return{createInternationalScientificCongressController:new oi(Ae())}}function Nf(){return{findInternationalScientificCongressesController:new mi(Ae())}}function Gf(){return{findInternationalScientificCongressByIdController:new si(Ae())}}function Lf(){return{findInternationalScientificCongressByEditionController:new ni(Ae())}}function Wf(){return{updateInternationalScientificCongressController:new ci(Ae())}}function _f(){return{deleteInternationalScientificCongressController:new ii(Ae())}}import{extendZodWithOpenApi as mv}from"@asteasolutions/zod-to-openapi";import Op from"zod";mv(Op);var cv=Op.object({id:Op.uuid()}),Es=class{constructor(e){this.internationalScientificCongressGalleryRepository=e}async handle(e,r){try{let{id:t}=cv.parse({id:e.params.id}),i=await this.internationalScientificCongressGalleryRepository.findById(t);if(!i)throw new p("A imagem da galeria n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var js=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.internationalScientificCongressGalleryItem.create({data:e})}async update(e){await this.prisma.internationalScientificCongressGalleryItem.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.internationalScientificCongressGalleryItem.delete({where:{id:e}})}async findByCongressId(e){let{pagination:r,filter:t}=e;return await this.prisma.internationalScientificCongressGalleryItem.findMany({where:{congressId:t.congressId,...t.caption&&{caption:{contains:t.caption,mode:"insensitive"}}},skip:r.offset,take:r.limit})}async findById(e){return await this.prisma.internationalScientificCongressGalleryItem.findFirst({where:{id:e}})}async count(e){let{filter:r}=e;return await this.prisma.internationalScientificCongressGalleryItem.count({where:{congressId:r.congressId,...r.caption&&{caption:{contains:r.caption,mode:"insensitive"}}}})}};function lr(){return new js(z)}function zf(){return{createInternationalScientificCongressGalleryController:new Zo(lr(),Ae(),F())}}function Hf(){return{findInternationalScientificCongressGalleriesByCongressIdController:new Yo(lr())}}function Vf(){return{findInternationalScientificCongressGalleryByIdController:new Es(lr())}}function Zf(){return{updateInternationalScientificCongressGalleryController:new Xo(lr(),F())}}function Kf(){return{deleteInternationalScientificCongressGalleryController:new Ko(lr())}}import{extendZodWithOpenApi as pv}from"@asteasolutions/zod-to-openapi";import Np from"zod";pv(Np);var dv=Np.object({id:Np.uuid()}),xs=class{constructor(e){this.internationalScientificCongressPartnerRepository=e}async handle(e,r){try{let{id:t}=dv.parse({id:e.params.id}),i=await this.internationalScientificCongressPartnerRepository.findById(t);if(!i)throw new p("O parceiro n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Ms=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.internationalScientificCongressPartner.create({data:e})}async update(e){await this.prisma.internationalScientificCongressPartner.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.internationalScientificCongressPartner.delete({where:{id:e}})}async findByCongressId(e){return await this.prisma.internationalScientificCongressPartner.findMany({where:{congressId:e.filter.congressId,name:e.filter.name?{contains:e.filter.name,mode:"insensitive"}:void 0},skip:e.pagination?.offset,take:e.pagination?.limit})}async findById(e){return await this.prisma.internationalScientificCongressPartner.findFirst({where:{id:e}})}async count(e){return await this.prisma.internationalScientificCongressPartner.count({where:{congressId:e.filter.congressId,name:e.filter.name?{contains:e.filter.name,mode:"insensitive"}:void 0}})}};function ur(){return new Ms(z)}function Jf(){return{createInternationalScientificCongressPartnerController:new $o(ur(),Ae(),F())}}function Yf(){return{findInternationalScientificCongressPartnersByCongressIdController:new ti(ur())}}function Xf(){return{findInternationalScientificCongressPartnerByIdController:new xs(ur())}}function $f(){return{updateInternationalScientificCongressPartnerController:new ri(ur(),F())}}function Qf(){return{deleteInternationalScientificCongressPartnerController:new Qo(ur())}}var ae=lv(),{authMiddleware:Ke}=Z();ae.post("/",(o,e,r)=>{Ke.authenticated(o,e,r)},async(o,e)=>{let{createInternationalScientificCongressController:r}=Of();await r.handle(o,e)});ae.get("/",async(o,e)=>{let{findInternationalScientificCongressesController:r}=Nf();await r.handle(o,e)});ae.get("/:id",async(o,e)=>{let{findInternationalScientificCongressByIdController:r}=Gf();await r.handle(o,e)});ae.get("/edition/:edition",async(o,e)=>{let{findInternationalScientificCongressByEditionController:r}=Lf();await r.handle(o,e)});ae.put("/:id",(o,e,r)=>{Ke.authenticated(o,e,r)},async(o,e)=>{let{updateInternationalScientificCongressController:r}=Wf();await r.handle(o,e)});ae.delete("/:id",(o,e,r)=>{Ke.authenticated(o,e,r)},async(o,e)=>{let{deleteInternationalScientificCongressController:r}=_f();await r.handle(o,e)});ae.post("/:congressId/gallery",(o,e,r)=>{Ke.authenticated(o,e,r)},V.single("image"),async(o,e)=>{let{createInternationalScientificCongressGalleryController:r}=zf();await r.handle(o,e)});ae.get("/:congressId/gallery",async(o,e)=>{let{findInternationalScientificCongressGalleriesByCongressIdController:r}=Hf();await r.handle(o,e)});ae.get("/gallery/:id",async(o,e)=>{let{findInternationalScientificCongressGalleryByIdController:r}=Vf();await r.handle(o,e)});ae.put("/gallery/:id",(o,e,r)=>{Ke.authenticated(o,e,r)},V.single("image"),async(o,e)=>{let{updateInternationalScientificCongressGalleryController:r}=Zf();await r.handle(o,e)});ae.delete("/gallery/:id",(o,e,r)=>{Ke.authenticated(o,e,r)},async(o,e)=>{let{deleteInternationalScientificCongressGalleryController:r}=Kf();await r.handle(o,e)});ae.post("/:congressId/partner",(o,e,r)=>{Ke.authenticated(o,e,r)},V.single("logo"),async(o,e)=>{let{createInternationalScientificCongressPartnerController:r}=Jf();await r.handle(o,e)});ae.get("/:congressId/partner",async(o,e)=>{let{findInternationalScientificCongressPartnersByCongressIdController:r}=Yf();await r.handle(o,e)});ae.get("/partner/:id",async(o,e)=>{let{findInternationalScientificCongressPartnerByIdController:r}=Xf();await r.handle(o,e)});ae.put("/partner/:id",(o,e,r)=>{Ke.authenticated(o,e,r)},V.single("logo"),async(o,e)=>{let{updateInternationalScientificCongressPartnerController:r}=$f();await r.handle(o,e)});ae.delete("/partner/:id",(o,e,r)=>{Ke.authenticated(o,e,r)},async(o,e)=>{let{deleteInternationalScientificCongressPartnerController:r}=Qf();await r.handle(o,e)});import{Router as fv}from"express";import{extendZodWithOpenApi as uv}from"@asteasolutions/zod-to-openapi";import Ps from"zod";uv(Ps);var gv=Ps.object({role:Ps.string().optional(),orderBy:Ps.enum(["asc","desc"]).optional()}),Ts=class{constructor(e){this.legitimatorCommitteeMemberRepository=e}async handle(e,r){try{let t=gv.parse(e.query),i=await this.legitimatorCommitteeMemberRepository.find({filter:t});r.status(200).json({members:i})}catch(t){if(t instanceof Error)throw new a(t.message)}}};var As=class{constructor(e){this.prisma=e}async create(e){await this.prisma.legitimatorCommitteeMember.create({data:{...e,order:e.order??0}})}async update(e){let{id:r,...t}=e;await this.prisma.legitimatorCommitteeMember.update({where:{id:r},data:t})}async deleteById(e){await this.prisma.legitimatorCommitteeMember.delete({where:{id:e}})}async find({filter:{role:e,orderBy:r}}){let t={};return e&&(t.role={contains:e,mode:"insensitive"}),await this.prisma.legitimatorCommitteeMember.findMany({where:t,include:{user:{omit:{passwordHash:!0}}},orderBy:r?[{order:"asc"},{updatedAt:r}]:[{order:"asc"},{updatedAt:"desc"}]})}async findById(e){return await this.prisma.legitimatorCommitteeMember.findFirst({where:{id:e},include:{user:{omit:{passwordHash:!0}}}})}async count({filter:{role:e}}){let r={};return e&&(r.role={contains:e,mode:"insensitive"}),await this.prisma.legitimatorCommitteeMember.count({where:r})}};function gr(){return new As(z)}function ey(){return{createLegitimatorCommitteeMemberController:new pi(gr())}}function ty(){return{findLegitimatorCommitteeMembersController:new Ts(gr())}}function ry(){return{findLegitimatorCommitteeMemberByIdController:new li(gr())}}function oy(){return{updateLegitimatorCommitteeMemberController:new gi(gr())}}function iy(){return{deleteLegitimatorCommitteeMemberController:new di(gr())}}var qt=fv(),{authMiddleware:Gp}=Z();qt.post("/",(o,e,r)=>{Gp.authenticated(o,e,r)},async(o,e)=>{let{createLegitimatorCommitteeMemberController:r}=ey();await r.handle(o,e)});qt.get("/",async(o,e)=>{let{findLegitimatorCommitteeMembersController:r}=ty();await r.handle(o,e)});qt.get("/:id",async(o,e)=>{let{findLegitimatorCommitteeMemberByIdController:r}=ry();await r.handle(o,e)});qt.put("/:id",(o,e,r)=>{Gp.authenticated(o,e,r)},async(o,e)=>{let{updateLegitimatorCommitteeMemberController:r}=oy();await r.handle(o,e)});qt.delete("/:id",(o,e,r)=>{Gp.authenticated(o,e,r)},async(o,e)=>{let{deleteLegitimatorCommitteeMemberController:r}=iy();await r.handle(o,e)});import{Router as Rv}from"express";import{extendZodWithOpenApi as yv}from"@asteasolutions/zod-to-openapi";import Kr from"zod";yv(Kr);var hv=Kr.object({name:Kr.string().optional(),description:Kr.string().optional(),orderBy:Kr.enum(["asc","desc"]).default("desc")}),Ds=class{constructor(e){this.managementTeamRepository=e}async handle(e,r){try{let t=hv.parse(e.query),i=await this.managementTeamRepository.find({filter:t});r.status(200).json({teams:i})}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Fs=class{constructor(e){this.prisma=e}async create(e){let{members:r,...t}=e;await this.prisma.$transaction(async i=>{let n=await i.managementTeam.create({data:t});return await i.managementTeamMember.createMany({data:r.map(({userId:s,role:m,order:c})=>({teamId:n.id,userId:s,role:m,order:c??0}))}),n})}async update(e){let{members:r,...t}=e;await this.prisma.$transaction(async i=>{let n=await i.managementTeam.update({where:{id:e.id},data:t});return r!==void 0&&(await i.managementTeamMember.deleteMany({where:{teamId:e.id}}),r.length>0&&await i.managementTeamMember.createMany({data:r.map(({userId:s,role:m,order:c})=>({teamId:e.id,userId:s,role:m,order:c??0}))})),n})}async deleteById(e){await this.prisma.managementTeam.delete({where:{id:e}})}async find({filter:{name:e,description:r,orderBy:t}}){let i={},n=[];return e&&n.push({name:{contains:e,mode:"insensitive"}}),r&&n.push({description:{contains:r,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.managementTeam.findMany({where:i,include:{members:{include:{user:{omit:{passwordHash:!0}}},orderBy:{order:"asc"}}},orderBy:{updatedAt:t}})}async findById(e){return await this.prisma.managementTeam.findFirst({where:{id:e},include:{members:{include:{user:{omit:{passwordHash:!0}}},orderBy:{order:"asc"}}}})}async findByName(e){return await this.prisma.managementTeam.findFirst({where:{name:e},include:{members:{include:{user:{omit:{passwordHash:!0}}},orderBy:{order:"asc"}}}})}async count({filter:{name:e,description:r}}){let t={},i=[];return e&&i.push({name:{contains:e,mode:"insensitive"}}),r&&i.push({description:{contains:r,mode:"insensitive"}}),i.length>0&&(t.OR=i),await this.prisma.managementTeam.count({where:t})}};function fr(){return new Fs(z)}function ny(){return{createManagementTeamController:new fi(fr())}}function sy(){return{findManagementTeamsController:new Ds(fr())}}function ay(){return{findManagementTeamByIdController:new hi(fr())}}function my(){return{updateManagementTeamController:new Ii(fr())}}function cy(){return{deleteManagementTeamController:new yi(fr())}}var kt=Rv(),{authMiddleware:Lp}=Z();kt.post("/",(o,e,r)=>{Lp.authenticated(o,e,r)},async(o,e)=>{let{createManagementTeamController:r}=ny();await r.handle(o,e)});kt.get("/",async(o,e)=>{let{findManagementTeamsController:r}=sy();await r.handle(o,e)});kt.get("/:id",async(o,e)=>{let{findManagementTeamByIdController:r}=ay();await r.handle(o,e)});kt.put("/:id",(o,e,r)=>{Lp.authenticated(o,e,r)},async(o,e)=>{let{updateManagementTeamController:r}=my();await r.handle(o,e)});kt.delete("/:id",(o,e,r)=>{Lp.authenticated(o,e,r)},async(o,e)=>{let{deleteManagementTeamController:r}=cy();await r.handle(o,e)});import{Router as Cv}from"express";var Bs=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.meeting.create({data:e})}async update(e){await this.prisma.meeting.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.meeting.delete({where:{id:e}})}async find({pagination:{offset:e,limit:r},filter:{title:t,format:i,status:n,orderBy:s}}){let m={},c=[];return i&&(m.format=i),n&&(m.status=n),t&&c.push({title:{contains:t,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.meeting.findMany({where:m,include:{minutes:!0},orderBy:s?{scheduledAt:s}:{scheduledAt:"desc"},skip:e,take:r})}async findById(e){return await this.prisma.meeting.findFirst({where:{id:e},include:{minutes:!0}})}async findByStatus(e){return await this.prisma.meeting.findMany({where:{status:e},include:{minutes:!0}})}async count({filter:{title:e,format:r,status:t}}){let i={},n=[];return r&&(i.format=r),t&&(i.status=t),e&&n.push({title:{contains:e,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.meeting.count({where:i})}};function Je(){return new Bs(z)}function py(){return{createMeetingController:new vi(Je())}}function dy(){return{findMeetingsController:new Pi(Je())}}function ly(){return{findMeetingByIdController:new ji(Je())}}function uy(){return{findMeetingByStatusController:new Mi(Je())}}function gy(){return{updateMeetingController:new Ti(Je())}}function fy(){return{deleteMeetingController:new Ei(Je())}}import{extendZodWithOpenApi as Iv}from"@asteasolutions/zod-to-openapi";import Wp from"zod";Iv(Wp);var bv=Wp.object({meetingId:Wp.uuid()}),Us=class{constructor(e,r){this.meetingMinuteRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{meetingId:t}=bv.parse({meetingId:e.params.meetingId}),i=await this.meetingMinuteRepository.findByMeetingId(t);if(!i)throw new p("A ata n\xE3o existe para esta reuni\xE3o.");return i.documentUrl&&await this.firebaseStorageService.deleteFile({fileUrl:i.documentUrl}),await this.meetingMinuteRepository.deleteByMeetingId(i.id),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var qs=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.meetingMinute.create({data:e,include:{meeting:!0}})}async update(e){await this.prisma.meetingMinute.update({where:{id:e.id},data:e})}async deleteByMeetingId(e){await this.prisma.meetingMinute.delete({where:{id:e}})}async findByMeetingId(e){return await this.prisma.meetingMinute.findFirst({where:{meetingId:e},include:{meeting:!0}})}};function Jr(){return new qs(z)}function yy(){return{createMeetingMinuteController:new bi(Jr(),Je(),F())}}function hy(){return{findMeetingMinuteByMeetingIdController:new Ci(Jr())}}function Ry(){return{updateMeetingMinuteByMeetingIdController:new Si(Jr(),F())}}function Iy(){return{deleteMeetingMinuteByMeetingIdController:new Us(Jr(),F())}}var Ee=Cv(),{authMiddleware:yr}=Z();Ee.post("/",(o,e,r)=>{yr.authenticated(o,e,r)},async(o,e)=>{let{createMeetingController:r}=py();await r.handle(o,e)});Ee.get("/",async(o,e)=>{let{findMeetingsController:r}=dy();await r.handle(o,e)});Ee.get("/:id",async(o,e)=>{let{findMeetingByIdController:r}=ly();await r.handle(o,e)});Ee.get("/status/:status",async(o,e)=>{let{findMeetingByStatusController:r}=uy();await r.handle(o,e)});Ee.put("/:id",(o,e,r)=>{yr.authenticated(o,e,r)},async(o,e)=>{let{updateMeetingController:r}=gy();await r.handle(o,e)});Ee.delete("/:id",(o,e,r)=>{yr.authenticated(o,e,r)},async(o,e)=>{let{deleteMeetingController:r}=fy();await r.handle(o,e)});Ee.post("/:meetingId/minute",(o,e,r)=>{yr.authenticated(o,e,r)},V.single("document"),async(o,e)=>{let{createMeetingMinuteController:r}=yy();await r.handle(o,e)});Ee.get("/:meetingId/minute",async(o,e)=>{let{findMeetingMinuteByMeetingIdController:r}=hy();await r.handle(o,e)});Ee.put("/:meetingId/minute",(o,e,r)=>{yr.authenticated(o,e,r)},V.single("document"),async(o,e)=>{let{updateMeetingMinuteByMeetingIdController:r}=Ry();await r.handle(o,e)});Ee.delete("/:meetingId/minute",(o,e,r)=>{yr.authenticated(o,e,r)},async(o,e)=>{let{deleteMeetingMinuteByMeetingIdController:r}=Iy();await r.handle(o,e)});import{Router as Pv}from"express";import{extendZodWithOpenApi as Sv}from"@asteasolutions/zod-to-openapi";import _p from"zod";Sv(_p);var wv=_p.object({id:_p.string()}),ks=class{constructor(e,r){this.newsRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=wv.parse(e.params),i=e.user.id,n=await this.newsRepository.findById(t);if(!n)throw new p("Not\xEDcia n\xE3o encontrada.");if(n.author.id!==i)throw new Ie("Sem permiss\xE3o.");await Promise.all([this.newsRepository.delete(t),this.firebaseStorageService.deleteFile({fileUrl:n.imageUrl})]),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as vv}from"@asteasolutions/zod-to-openapi";import hr from"zod";var Ev=5,by=1024,jv=by*by,xv=Ev*jv;vv(hr);var Mv=hr.object({id:hr.string(),title:hr.string().min(1),content:hr.string().min(1),image:hr.any().optional().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=xv,"A imagem deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.")}),Os=class{constructor(e,r){this.newsRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,title:i,content:n,image:s}=Mv.parse({id:e.params.id,image:e.file,...e.body}),m=await this.newsRepository.findById(t);if(!m)throw new p("Not\xEDcia n\xE3o encontrada.");let c=e.user.id;if(m.author.id!==c)throw new Ie("Sem permiss\xE3o.");let d=m.imageUrl||"";s&&m.imageUrl&&(d=await this.firebaseStorageService.updateFile({file:s,folder:M.NEWS,id:t,fileUrl:m.imageUrl}));let h=await this.newsRepository.update({id:t,title:i,content:n,imageUrl:d});r.status(200).json(h)}catch(t){if(t instanceof Error)throw new a(t.message)}}};function Cy(){return{createNewsController:new Ai(He(),F())}}function Sy(){return{findAllNewsController:new Ui(He())}}function wy(){return{findNewsByIdController:new Bi(He())}}function vy(){return{findNewsByAuthorIdController:new Di(He())}}function Ey(){return{updateNewsController:new Os(He(),F())}}function jy(){return{deleteNewsController:new ks(He(),F())}}var It=Pv(),{authMiddleware:zp}=Z();It.post("/",(o,e,r)=>{zp.authenticated(o,e,r)},V.single("image"),async(o,e)=>{let{createNewsController:r}=Cy();await r.handle(o,e)});It.get("/",async(o,e)=>{let{findAllNewsController:r}=Sy();await r.handle(o,e)});It.get("/:id",async(o,e)=>{let{findNewsByIdController:r}=wy();await r.handle(o,e)});It.get("/author/:authorId",async(o,e)=>{let{findNewsByAuthorIdController:r}=vy();await r.handle(o,e)});It.put("/:id",(o,e,r)=>{zp.authenticated(o,e,r)},V.single("image"),async(o,e)=>{let{updateNewsController:r}=Ey();await r.handle(o,e)});It.delete("/:id",(o,e,r)=>{zp.authenticated(o,e,r)},async(o,e)=>{let{deleteNewsController:r}=jy();await r.handle(o,e)});import{Router as Tv}from"express";var Ns=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.partner.create({data:e})}async update(e){await this.prisma.partner.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.partner.delete({where:{id:e}})}async find({pagination:e,filter:{name:r,description:t,category:i,isActive:n,orderBy:s}}){let m={},c=[];return n!==void 0&&(m.isActive=n),r&&c.push({name:{contains:r,mode:"insensitive"}}),t&&c.push({description:{contains:t,mode:"insensitive"}}),i&&c.push({category:{contains:i,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.partner.findMany({where:m,orderBy:s?{updatedAt:s}:{updatedAt:"desc"},...e&&{skip:e.offset,take:e.limit}})}async findById(e){return await this.prisma.partner.findFirst({where:{id:e}})}async count({filter:{name:e,description:r,category:t,isActive:i}}){let n={},s=[];return i!==void 0&&(n.isActive=i),e&&s.push({name:{contains:e,mode:"insensitive"}}),r&&s.push({description:{contains:r,mode:"insensitive"}}),t&&s.push({category:{contains:t,mode:"insensitive"}}),s.length>0&&(n.OR=s),await this.prisma.partner.count({where:n})}};function Rr(){return new Ns(z)}function xy(){return{createPartnerController:new qi(Rr(),F())}}function My(){return{findPartnersController:new Gi(Rr())}}function Py(){return{findPartnerByIdController:new Oi(Rr())}}function Ty(){return{updatePartnerController:new Li(Rr(),F())}}function Ay(){return{deletePartnerController:new ki(Rr(),F())}}var Ot=Tv(),{authMiddleware:Hp}=Z();Ot.post("/",(o,e,r)=>{Hp.authenticated(o,e,r)},V.single("logo"),async(o,e)=>{let{createPartnerController:r}=xy();await r.handle(o,e)});Ot.get("/",async(o,e)=>{let{findPartnersController:r}=My();await r.handle(o,e)});Ot.get("/:id",async(o,e)=>{let{findPartnerByIdController:r}=Py();await r.handle(o,e)});Ot.put("/:id",(o,e,r)=>{Hp.authenticated(o,e,r)},V.single("logo"),async(o,e)=>{let{updatePartnerController:r}=Ty();await r.handle(o,e)});Ot.delete("/:id",(o,e,r)=>{Hp.authenticated(o,e,r)},async(o,e)=>{let{deletePartnerController:r}=Ay();await r.handle(o,e)});import{Router as Av}from"express";function Dy(){return{createPendencyController:new Wi(ye(),ht(),F())}}function Fy(){return{findPendenciesController:new Hi(ht())}}function By(){return{findPendencyByIdController:new Vi(ht())}}function Uy(){return{updatePendencyController:new Zi(ht(),F())}}function qy(){return{deletePendencyController:new zi(ht(),F())}}var Nt=Av(),{authMiddleware:Yr}=Z();Nt.post("/:user_id",(o,e,r)=>{Yr.isAdmin(o,e,r)},V.single("document"),async(o,e)=>{let{createPendencyController:r}=Dy();await r.handle(o,e)});Nt.get("/",(o,e,r)=>{Yr.isAdmin(o,e,r)},async(o,e)=>{let{findPendenciesController:r}=Fy();await r.handle(o,e)});Nt.get("/:pendency_id",(o,e,r)=>{Yr.isAdmin(o,e,r)},async(o,e)=>{let{findPendencyByIdController:r}=By();await r.handle(o,e)});Nt.put("/:pendency_id",(o,e,r)=>{Yr.isAdmin(o,e,r)},V.single("document"),async(o,e)=>{let{updatePendencyController:r}=Uy();await r.handle(o,e)});Nt.delete("/:pendency_id",(o,e,r)=>{Yr.isAdmin(o,e,r)},async(o,e)=>{let{deletePendencyController:r}=qy();await r.handle(o,e)});import{Router as kv}from"express";import{extendZodWithOpenApi as Dv}from"@asteasolutions/zod-to-openapi";import Ye from"zod";var Fv=5,ky=1024,Bv=ky*ky,Uv=Fv*Bv;Dv(Ye);var qv=Ye.object({title:Ye.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),description:Ye.string().optional(),startDate:Ye.coerce.date(),endDate:Ye.coerce.date(),contact:Ye.string().min(1,"Contato \xE9 obrigat\xF3rio."),registrationLink:Ye.url().optional(),image:Ye.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=Uv,"A imagem deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.")}),Gs=class{constructor(e,r){this.postGraduateProgramRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{title:t,description:i,startDate:n,endDate:s,contact:m,registrationLink:c,image:d}=qv.parse({...e.body,image:e.file}),h=await this.postGraduateProgramRepository.create({title:t,description:i,startDate:n,endDate:s,contact:m,registrationLink:c||void 0}),j=await this.firebaseStorageService.uploadFile({file:d,folder:M.POST_GRADUATE_PROGRAM,id:h.id});return await this.postGraduateProgramRepository.update({id:h.id,imageUrl:j}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Ls=class{constructor(e){this.prisma=e}async create({title:e,imageUrl:r,description:t,startDate:i,endDate:n,contact:s,registrationLink:m}){return await this.prisma.postGraduateProgram.create({data:{title:e,imageUrl:r,description:t,startDate:i,endDate:n,contact:s,registrationLink:m}})}async find({pagination:{offset:e,limit:r},filter:{description:t,orderBy:i,title:n,contact:s}}){let m={},c=[];return n&&c.push({title:{contains:n,mode:"insensitive"}}),t&&c.push({description:{contains:t,mode:"insensitive"}}),s&&c.push({contact:{contains:s,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.postGraduateProgram.findMany({where:m,orderBy:{updatedAt:i},skip:e,take:r})}async findById(e){return await this.prisma.postGraduateProgram.findFirst({where:{id:e}})}async update({id:e,title:r,imageUrl:t,description:i,startDate:n,endDate:s,contact:m,registrationLink:c}){await this.prisma.postGraduateProgram.update({where:{id:e},data:{title:r,imageUrl:t,description:i,startDate:n,endDate:s,contact:m,registrationLink:c}})}async deleteById(e){await this.prisma.postGraduateProgram.delete({where:{id:e}})}async count({filter:{description:e,title:r,contact:t}}){let i={},n=[];return r&&n.push({title:{contains:r,mode:"insensitive"}}),e&&n.push({description:{contains:e,mode:"insensitive"}}),t&&n.push({contact:{contains:t,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.postGraduateProgram.count({where:i})}};function Ir(){return new Ls(z)}function Oy(){return{createPostGraduateProgramController:new Gs(Ir(),F())}}function Ny(){return{findPostGraduateProgramsController:new Xi(Ir())}}function Gy(){return{findPostGraduateProgramByIdController:new Yi(Ir())}}function Ly(){return{updatePostGraduateProgramController:new $i(Ir(),F())}}function Wy(){return{deletePostGraduateProgramController:new Ji(Ir(),F())}}var Gt=kv(),{authMiddleware:Xr}=Z();Gt.post("/",(o,e,r)=>{Xr.isAdmin(o,e,r)},V.single("image"),async(o,e)=>{let{createPostGraduateProgramController:r}=Oy();await r.handle(o,e)});Gt.get("/",(o,e,r)=>{Xr.isAdmin(o,e,r)},async(o,e)=>{let{findPostGraduateProgramsController:r}=Ny();await r.handle(o,e)});Gt.get("/:id",(o,e,r)=>{Xr.isAdmin(o,e,r)},async(o,e)=>{let{findPostGraduateProgramByIdController:r}=Gy();await r.handle(o,e)});Gt.put("/:id",(o,e,r)=>{Xr.isAdmin(o,e,r)},V.single("image"),async(o,e)=>{let{updatePostGraduateProgramController:r}=Ly();await r.handle(o,e)});Gt.delete("/:id",(o,e,r)=>{Xr.isAdmin(o,e,r)},async(o,e)=>{let{deletePostGraduateProgramController:r}=Wy();await r.handle(o,e)});import{Router as Wv}from"express";import{extendZodWithOpenApi as Ov}from"@asteasolutions/zod-to-openapi";import br from"zod";var Nv=1,Gv=7;Ov(br);var Lv=br.object({page:br.coerce.number().min(1).default(Nv),limit:br.coerce.number().min(1).default(Gv),role:br.string().optional(),orderBy:br.enum(["asc","desc"]).optional()}),Ws=class{constructor(e){this.referenceCenterTeamMemberRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=Lv.parse(e.query),s=i*t-i,[m,c]=await Promise.all([this.referenceCenterTeamMemberRepository.find({pagination:{offset:s,limit:i},filter:n}),this.referenceCenterTeamMemberRepository.count({filter:n})]),d=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:d,offset:s,limit:i,members:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};var _s=class{constructor(e){this.prisma=e}async create(e){await this.prisma.referenceCenterTeamMember.create({data:{...e}})}async update(e){let{id:r,...t}=e;await this.prisma.referenceCenterTeamMember.update({where:{id:r},data:t})}async deleteById(e){await this.prisma.referenceCenterTeamMember.delete({where:{id:e}})}async find({pagination:e,filter:{role:r,orderBy:t}}){let i={};return r&&(i.role={contains:r,mode:"insensitive"}),await this.prisma.referenceCenterTeamMember.findMany({where:i,include:{user:{omit:{passwordHash:!0}}},orderBy:{updatedAt:t??"desc"},...e&&{skip:e.offset,take:e.limit}})}async findById(e){return await this.prisma.referenceCenterTeamMember.findFirst({where:{id:e},include:{user:{omit:{passwordHash:!0}}}})}async count({filter:{role:e}}){let r={};return e&&(r.role={contains:e,mode:"insensitive"}),await this.prisma.referenceCenterTeamMember.count({where:r})}};function Cr(){return new _s(z)}function _y(){return{createReferenceCenterTeamMemberController:new Qi(Cr())}}function zy(){return{findReferenceCenterTeamMembersController:new Ws(Cr())}}function Hy(){return{findReferenceCenterTeamMemberByIdController:new tn(Cr())}}function Vy(){return{updateReferenceCenterTeamMemberController:new on(Cr())}}function Zy(){return{deleteReferenceCenterTeamMemberController:new en(Cr())}}var Lt=Wv(),{authMiddleware:Vp}=Z();Lt.post("/",(o,e,r)=>{Vp.authenticated(o,e,r)},async(o,e)=>{let{createReferenceCenterTeamMemberController:r}=_y();await r.handle(o,e)});Lt.get("/",async(o,e)=>{let{findReferenceCenterTeamMembersController:r}=zy();await r.handle(o,e)});Lt.get("/:id",async(o,e)=>{let{findReferenceCenterTeamMemberByIdController:r}=Hy();await r.handle(o,e)});Lt.put("/:id",(o,e,r)=>{Vp.authenticated(o,e,r)},async(o,e)=>{let{updateReferenceCenterTeamMemberController:r}=Vy();await r.handle(o,e)});Lt.delete("/:id",(o,e,r)=>{Vp.authenticated(o,e,r)},async(o,e)=>{let{deleteReferenceCenterTeamMemberController:r}=Zy();await r.handle(o,e)});import{Router as _v}from"express";var zs=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.regiment.create({data:e})}async update(e){await this.prisma.regiment.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.regiment.delete({where:{id:e}})}async find({pagination:{offset:e,limit:r},filter:{title:t,status:i,orderBy:n}}){let s={},m=[];return i&&(s.status=i),t&&m.push({title:{contains:t,mode:"insensitive"}}),m.length>0&&(s.OR=m),await this.prisma.regiment.findMany({where:s,orderBy:n?{updatedAt:n}:{updatedAt:"desc"},skip:e,take:r})}async findById(e){return await this.prisma.regiment.findFirst({where:{id:e}})}async findByStatus(e){return await this.prisma.regiment.findMany({where:{status:e}})}async count({filter:{title:e,status:r}}){let t={},i=[];return r&&(t.status=r),e&&i.push({title:{contains:e,mode:"insensitive"}}),i.length>0&&(t.OR=i),await this.prisma.regiment.count({where:t})}};function Wt(){return new zs(z)}function Ky(){return{createRegimentController:new nn(Wt(),F())}}function Jy(){return{findRegimentsController:new pn(Wt())}}function Yy(){return{findRegimentByIdController:new an(Wt())}}function Xy(){return{findRegimentByStatusController:new cn(Wt())}}function $y(){return{updateRegimentController:new dn(Wt(),F())}}function Qy(){return{deleteRegimentController:new sn(Wt(),F())}}var bt=_v(),{authMiddleware:Zp}=Z();bt.post("/",(o,e,r)=>{Zp.authenticated(o,e,r)},V.single("document"),async(o,e)=>{let{createRegimentController:r}=Ky();await r.handle(o,e)});bt.get("/",async(o,e)=>{let{findRegimentsController:r}=Jy();await r.handle(o,e)});bt.get("/:id",async(o,e)=>{let{findRegimentByIdController:r}=Yy();await r.handle(o,e)});bt.get("/status/:status",async(o,e)=>{let{findRegimentByStatusController:r}=Xy();await r.handle(o,e)});bt.put("/:id",(o,e,r)=>{Zp.authenticated(o,e,r)},V.single("document"),async(o,e)=>{let{updateRegimentController:r}=$y();await r.handle(o,e)});bt.delete("/:id",(o,e,r)=>{Zp.authenticated(o,e,r)},async(o,e)=>{let{deleteRegimentController:r}=Qy();await r.handle(o,e)});import{Router as Kv}from"express";import{extendZodWithOpenApi as zv}from"@asteasolutions/zod-to-openapi";import Kp from"zod";zv(Kp);var Hv=Kp.object({id:Kp.string().uuid("ID inv\xE1lido")}),Hs=class{constructor(e){this.regionalCongressGalleryRepository=e}async handle(e,r){try{let{id:t}=Hv.parse(e.params),i=await this.regionalCongressGalleryRepository.findById(t);if(!i)throw new p("Item de galeria n\xE3o encontrado");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Vs=class{constructor(e){this.prisma=e}async create(e){await this.prisma.regionalCongress.create({data:e})}async update(e){await this.prisma.regionalCongress.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.regionalCongress.delete({where:{id:e}})}async find({pagination:{offset:e,limit:r},filter:{title:t,edition:i,location:n,orderBy:s}}){let m={},c=[];return i&&c.push({edition:{equals:i}}),t&&c.push({title:{contains:t,mode:"insensitive"}}),n&&c.push({location:{contains:n,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.regionalCongress.findMany({where:m,include:{regionalCongressPartners:!0,regionalCongressGalleryItems:!0},orderBy:s?{startDate:s}:{startDate:"desc"},skip:e,take:r})}async findById(e){return await this.prisma.regionalCongress.findFirst({where:{id:e},include:{regionalCongressPartners:!0,regionalCongressGalleryItems:!0}})}async findByEdition(e){return await this.prisma.regionalCongress.findMany({where:{edition:e},include:{regionalCongressPartners:!0,regionalCongressGalleryItems:!0}})}async count({filter:{title:e,edition:r,location:t}}){let i={},n=[];return r&&n.push({edition:{equals:r}}),e&&n.push({title:{contains:e,mode:"insensitive"}}),t&&n.push({location:{contains:t,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.regionalCongress.count({where:i})}};function De(){return new Vs(z)}var Zs=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.regionalCongressGalleryItem.create({data:e})}async update(e){await this.prisma.regionalCongressGalleryItem.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.regionalCongressGalleryItem.delete({where:{id:e}})}async findByCongressId({pagination:e,filter:r}){return await this.prisma.regionalCongressGalleryItem.findMany({where:{congressId:r.congressId,...r.caption&&{caption:{contains:r.caption,mode:"insensitive"}}},skip:e.offset,take:e.limit})}async findById(e){return await this.prisma.regionalCongressGalleryItem.findFirst({where:{id:e}})}async count({filter:e}){return await this.prisma.regionalCongressGalleryItem.count({where:{congressId:e.congressId,...e.caption&&{caption:{contains:e.caption,mode:"insensitive"}}}})}};function Sr(){return new Zs(z)}function eh(){return{createRegionalCongressGalleryController:new ln(Sr(),De(),F())}}function th(){return{findRegionalCongressGalleriesByCongressIdController:new fn(Sr())}}function rh(){return{findRegionalCongressGalleryByIdController:new Hs(Sr())}}function oh(){return{updateRegionalCongressGalleryController:new yn(Sr(),F())}}function ih(){return{deleteRegionalCongressGalleryController:new un(Sr())}}import{extendZodWithOpenApi as Vv}from"@asteasolutions/zod-to-openapi";import Jp from"zod";Vv(Jp);var Zv=Jp.object({id:Jp.string().uuid("ID inv\xE1lido")}),Ks=class{constructor(e){this.regionalCongressPartnerRepository=e}async handle(e,r){try{let{id:t}=Zv.parse(e.params),i=await this.regionalCongressPartnerRepository.findById(t);if(!i)throw new p("Parceiro n\xE3o encontrado");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Js=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.regionalCongressPartner.create({data:e})}async update(e){await this.prisma.regionalCongressPartner.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.regionalCongressPartner.delete({where:{id:e}})}async findByCongressId(e){return await this.prisma.regionalCongressPartner.findMany({where:{congressId:e.filter.congressId,name:e.filter.name?{contains:e.filter.name,mode:"insensitive"}:void 0},skip:e.pagination?.offset,take:e.pagination?.limit})}async findById(e){return await this.prisma.regionalCongressPartner.findFirst({where:{id:e}})}async count(e){return await this.prisma.regionalCongressPartner.count({where:{congressId:e.filter.congressId,name:e.filter.name?{contains:e.filter.name,mode:"insensitive"}:void 0}})}};function wr(){return new Js(z)}function nh(){return{createRegionalCongressPartnerController:new hn(wr(),De(),F())}}function sh(){return{findRegionalCongressPartnersByCongressIdController:new bn(wr())}}function ah(){return{findRegionalCongressPartnerByIdController:new Ks(wr())}}function mh(){return{updateRegionalCongressPartnerController:new Cn(wr(),F())}}function ch(){return{deleteRegionalCongressPartnerController:new Rn(wr())}}function ph(){return{createRegionalCongressController:new Sn(De())}}function dh(){return{findRegionalCongressesController:new xn(De())}}function lh(){return{findRegionalCongressByIdController:new En(De())}}function uh(){return{findRegionalCongressByEditionController:new vn(De())}}function gh(){return{updateRegionalCongressController:new Mn(De())}}function fh(){return{deleteRegionalCongressController:new wn(De())}}var me=Kv(),{authMiddleware:Xe}=Z();me.post("/",(o,e,r)=>{Xe.authenticated(o,e,r)},async(o,e)=>{let{createRegionalCongressController:r}=ph();await r.handle(o,e)});me.get("/",async(o,e)=>{let{findRegionalCongressesController:r}=dh();await r.handle(o,e)});me.get("/:id",async(o,e)=>{let{findRegionalCongressByIdController:r}=lh();await r.handle(o,e)});me.get("/edition/:edition",async(o,e)=>{let{findRegionalCongressByEditionController:r}=uh();await r.handle(o,e)});me.put("/:id",(o,e,r)=>{Xe.authenticated(o,e,r)},async(o,e)=>{let{updateRegionalCongressController:r}=gh();await r.handle(o,e)});me.delete("/:id",(o,e,r)=>{Xe.authenticated(o,e,r)},async(o,e)=>{let{deleteRegionalCongressController:r}=fh();await r.handle(o,e)});me.post("/:congressId/gallery",(o,e,r)=>{Xe.authenticated(o,e,r)},V.single("image"),async(o,e)=>{let{createRegionalCongressGalleryController:r}=eh();await r.handle(o,e)});me.get("/:congressId/gallery",async(o,e)=>{let{findRegionalCongressGalleriesByCongressIdController:r}=th();await r.handle(o,e)});me.get("/gallery/:id",async(o,e)=>{let{findRegionalCongressGalleryByIdController:r}=rh();await r.handle(o,e)});me.put("/gallery/:id",(o,e,r)=>{Xe.authenticated(o,e,r)},V.single("image"),async(o,e)=>{let{updateRegionalCongressGalleryController:r}=oh();await r.handle(o,e)});me.delete("/gallery/:id",(o,e,r)=>{Xe.authenticated(o,e,r)},async(o,e)=>{let{deleteRegionalCongressGalleryController:r}=ih();await r.handle(o,e)});me.post("/:congressId/partner",(o,e,r)=>{Xe.authenticated(o,e,r)},V.single("logo"),async(o,e)=>{let{createRegionalCongressPartnerController:r}=nh();await r.handle(o,e)});me.get("/:congressId/partner",async(o,e)=>{let{findRegionalCongressPartnersByCongressIdController:r}=sh();await r.handle(o,e)});me.get("/partner/:id",async(o,e)=>{let{findRegionalCongressPartnerByIdController:r}=ah();await r.handle(o,e)});me.put("/partner/:id",(o,e,r)=>{Xe.authenticated(o,e,r)},V.single("logo"),async(o,e)=>{let{updateRegionalCongressPartnerController:r}=mh();await r.handle(o,e)});me.delete("/partner/:id",(o,e,r)=>{Xe.authenticated(o,e,r)},async(o,e)=>{let{deleteRegionalCongressPartnerController:r}=ch();await r.handle(o,e)});import{Router as Qv}from"express";import{extendZodWithOpenApi as Jv}from"@asteasolutions/zod-to-openapi";import ue from"zod";var Yv=1,Xv=9;Jv(ue);var $v=ue.object({page:ue.coerce.number().min(1).default(Yv),limit:ue.coerce.number().min(1).default(Xv),userId:ue.string().optional(),registrationNumber:ue.string().optional(),name:ue.string().optional(),emailAddress:ue.string().optional(),mainEtps:ue.string().optional(),formations:ue.string().optional(),occupations:ue.string().optional(),institutions:ue.string().optional(),biography:ue.string().optional(),orderBy:ue.enum(["asc","desc"]).default("desc")}),Ys=class{constructor(e){this.researcherRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=$v.parse(e.query),s=i*t-i,[m,c]=await Promise.all([this.researcherRepository.find({pagination:{offset:s,limit:i},filter:{userName:n.name,...n}}),this.researcherRepository.count({filter:{userName:n.name,...n}})]),d=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:d,offset:s,limit:i,researchers:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Xs=class{constructor(e){this.prisma=e}async create(e){await this.prisma.researcher.create({data:e})}async update(e){await this.prisma.researcher.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.researcher.delete({where:{id:e}})}async find({pagination:e,filter:{biography:r,degrees:t,formations:i,institutions:n,mainEtps:s,occupations:m,orderBy:c,registrationNumber:d,seniority:h,userId:j,userName:q}}){let $={},ee=[];return q&&ee.push({user:{name:{contains:q,mode:"insensitive"}}}),d&&ee.push({registrationNumber:{contains:d,mode:"insensitive"}}),s&&ee.push({mainEtps:{contains:s,mode:"insensitive"}}),i&&ee.push({formations:{contains:i,mode:"insensitive"}}),m&&ee.push({occupations:{contains:m,mode:"insensitive"}}),n&&ee.push({institutions:{contains:n,mode:"insensitive"}}),r&&ee.push({biography:{contains:r,mode:"insensitive"}}),ee.length>0&&($.OR=ee),t&&t.length>0&&($.degrees={hasSome:t}),h&&($.seniority=h),j&&($.userId={equals:j}),await this.prisma.researcher.findMany({where:$,omit:{userId:!0},include:{user:{omit:{passwordHash:!0}}},orderBy:{updatedAt:c},...e&&{skip:e.offset,take:e.limit}})}async findById(e){return await this.prisma.researcher.findFirst({where:{id:e},include:{user:{omit:{passwordHash:!0}}}})}async findByUserId(e){return await this.prisma.researcher.findFirst({where:{userId:e},include:{user:{omit:{passwordHash:!0}}}})}async findByRegistrationNumber(e){return await this.prisma.researcher.findFirst({where:{registrationNumber:e},include:{user:{omit:{passwordHash:!0}}}})}async count({filter:{biography:e,degrees:r,formations:t,institutions:i,mainEtps:n,occupations:s,registrationNumber:m,seniority:c,userId:d,userName:h}}){let j={},q=[];return h&&q.push({user:{name:{contains:h,mode:"insensitive"}}}),m&&q.push({registrationNumber:{contains:m,mode:"insensitive"}}),q.length>0&&(j.OR=q),n&&(j.mainEtps={contains:n,mode:"insensitive"}),t&&(j.formations={contains:t,mode:"insensitive"}),r&&r.length>0&&(j.degrees={hasSome:r}),s&&(j.occupations={contains:s,mode:"insensitive"}),c&&(j.seniority=c),i&&(j.institutions={contains:i,mode:"insensitive"}),e&&(j.biography={contains:e,mode:"insensitive"}),d&&(j.userId={equals:d}),await this.prisma.researcher.count({where:j})}};function _t(){return new Xs(z)}function yh(){return{createResearcherController:new Pn(_t())}}function hh(){return{findResearchersController:new Ys(_t())}}function Rh(){return{findResearcherByIdController:new An(_t())}}function Ih(){return{findResearcherByUserIdController:new Fn(_t())}}function bh(){return{updateResearcherController:new Bn(_t())}}function Ch(){return{deleteResearcherController:new Tn(_t())}}var Ct=Qv(),{authMiddleware:Yp}=Z();Ct.post("/",(o,e,r)=>{Yp.authenticated(o,e,r)},async(o,e)=>{let{createResearcherController:r}=yh();await r.handle(o,e)});Ct.get("/",async(o,e)=>{let{findResearchersController:r}=hh();await r.handle(o,e)});Ct.get("/:id",async(o,e)=>{let{findResearcherByIdController:r}=Rh();await r.handle(o,e)});Ct.get("/user/:userId",async(o,e)=>{let{findResearcherByUserIdController:r}=Ih();await r.handle(o,e)});Ct.put("/:id",(o,e,r)=>{Yp.authenticated(o,e,r)},async(o,e)=>{let{updateResearcherController:r}=bh();await r.handle(o,e)});Ct.delete("/:id",(o,e,r)=>{Yp.authenticated(o,e,r)},async(o,e)=>{let{deleteResearcherController:r}=Ch();await r.handle(o,e)});import{Router as rE}from"express";import{extendZodWithOpenApi as eE}from"@asteasolutions/zod-to-openapi";import ce from"zod";eE(ce);var tE=ce.object({title:ce.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),author:ce.string().min(1,"Autor \xE9 obrigat\xF3rio."),journal:ce.string().optional(),volume:ce.string().optional(),edition:ce.string().optional(),pageStart:ce.coerce.number().optional(),pageEnd:ce.coerce.number().optional(),startDate:ce.coerce.date(),endDate:ce.coerce.date(),city:ce.string().optional(),state:ce.string().optional(),country:ce.string().optional(),publisher:ce.string().optional(),description:ce.string().optional(),year:ce.coerce.number().optional(),accessUrl:ce.url().optional()}),$s=class{constructor(e){this.scientificArticlesRepository=e}async handle(e,r){try{let{title:t,author:i,journal:n,volume:s,edition:m,pageStart:c,pageEnd:d,startDate:h,endDate:j,city:q,state:$,country:ee,publisher:ge,description:Fe,year:Ar,accessUrl:pa}=tE.parse(e.body);return await this.scientificArticlesRepository.create({title:t,author:i,journal:n,volume:s,edition:m,pageStart:c,pageEnd:d,startDate:h,endDate:j,city:q,state:$,country:ee,publisher:ge,description:Fe,year:Ar,accessUrl:pa}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Qs=class{constructor(e){this.prisma=e}async create({title:e,author:r,journal:t,volume:i,edition:n,pageStart:s,pageEnd:m,startDate:c,endDate:d,city:h,state:j,country:q,publisher:$,description:ee,year:ge,accessUrl:Fe}){return await this.prisma.scientificArticle.create({data:{title:e,author:r,journal:t,volume:i,edition:n,pageStart:s,pageEnd:m,startDate:c,endDate:d,city:h,state:j,country:q,publisher:$,description:ee,year:ge,accessUrl:Fe}})}async find({pagination:{offset:e,limit:r},filter:{title:t,author:i,journal:n,orderBy:s}}){let m={},c=[];return t&&c.push({title:{contains:t,mode:"insensitive"}}),i&&c.push({author:{contains:i,mode:"insensitive"}}),n&&c.push({journal:{contains:n,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.scientificArticle.findMany({where:m,orderBy:{updatedAt:s},skip:e,take:r})}async findById(e){return await this.prisma.scientificArticle.findFirst({where:{id:e}})}async update({id:e,title:r,author:t,journal:i,volume:n,edition:s,pageStart:m,pageEnd:c,startDate:d,endDate:h,city:j,state:q,country:$,publisher:ee,description:ge,year:Fe,accessUrl:Ar}){await this.prisma.scientificArticle.update({where:{id:e},data:{title:r,author:t,journal:i,volume:n,edition:s,pageStart:m,pageEnd:c,startDate:d,endDate:h,city:j,state:q,country:$,publisher:ee,description:ge,year:Fe,accessUrl:Ar}})}async deleteById(e){await this.prisma.scientificArticle.delete({where:{id:e}})}async count({filter:{title:e,author:r,journal:t}}){let i={},n=[];return e&&n.push({title:{contains:e,mode:"insensitive"}}),r&&n.push({author:{contains:r,mode:"insensitive"}}),t&&n.push({journal:{contains:t,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.scientificArticle.count({where:i})}};function vr(){return new Qs(z)}function Sh(){return{createScientificArticleController:new $s(vr())}}function wh(){return{findScientificArticlesController:new kn(vr())}}function vh(){return{findScientificArticleByIdController:new qn(vr())}}function Eh(){return{updateScientificArticleController:new On(vr())}}function jh(){return{deleteScientificArticleController:new Un(vr())}}var zt=rE(),{authMiddleware:$r}=Z();zt.post("/",(o,e,r)=>{$r.isAdmin(o,e,r)},async(o,e)=>{let{createScientificArticleController:r}=Sh();await r.handle(o,e)});zt.get("/",(o,e,r)=>{$r.isAdmin(o,e,r)},async(o,e)=>{let{findScientificArticlesController:r}=wh();await r.handle(o,e)});zt.get("/:id",(o,e,r)=>{$r.isAdmin(o,e,r)},async(o,e)=>{let{findScientificArticleByIdController:r}=vh();await r.handle(o,e)});zt.put("/:id",(o,e,r)=>{$r.isAdmin(o,e,r)},async(o,e)=>{let{updateScientificArticleController:r}=Eh();await r.handle(o,e)});zt.delete("/:id",(o,e,r)=>{$r.isAdmin(o,e,r)},async(o,e)=>{let{deleteScientificArticleController:r}=jh();await r.handle(o,e)});import{Router as mE}from"express";import{extendZodWithOpenApi as oE}from"@asteasolutions/zod-to-openapi";import $e from"zod";var iE=5,xh=1024,nE=xh*xh,sE=iE*nE;oE($e);var aE=$e.object({name:$e.string().min(1,"Nome \xE9 obrigat\xF3rio."),issn:$e.string().min(1,"ISSN \xE9 obrigat\xF3rio."),description:$e.string().min(1,"Descri\xE7\xE3o \xE9 obrigat\xF3ria."),journalUrl:$e.url("URL da revista deve ser v\xE1lida."),directors:$e.string().optional(),editorialBoard:$e.string().optional(),logo:$e.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=sE,"O logo deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.").optional()}),ea=class{constructor(e,r){this.scientificJournalRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{name:t,issn:i,description:n,journalUrl:s,directors:m,editorialBoard:c,logo:d}=aE.parse({...e.body,logo:e.file}),h=await this.scientificJournalRepository.create({name:t,issn:i,description:n,journalUrl:s,directors:m,editorialBoard:c});if(d){let j=await this.firebaseStorageService.uploadFile({file:d,folder:M.SCIENTIFIC_JOURNAL,id:h.id});await this.scientificJournalRepository.update({id:h.id,logoUrl:j})}return r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var ta=class{constructor(e){this.prisma=e}async create({name:e,issn:r,description:t,logoUrl:i,journalUrl:n,directors:s,editorialBoard:m}){return await this.prisma.scientificJournal.create({data:{name:e,issn:r,description:t,logoUrl:i,journalUrl:n,directors:s,editorialBoard:m}})}async find({pagination:{offset:e,limit:r},filter:{name:t,description:i,issn:n,directors:s,editorialBoard:m,orderBy:c}}){let d={},h=[];return t&&h.push({name:{contains:t,mode:"insensitive"}}),i&&h.push({description:{contains:i,mode:"insensitive"}}),n&&h.push({issn:{contains:n,mode:"insensitive"}}),s&&h.push({directors:{contains:s,mode:"insensitive"}}),m&&h.push({editorialBoard:{contains:m,mode:"insensitive"}}),h.length>0&&(d.OR=h),await this.prisma.scientificJournal.findMany({where:d,orderBy:{updatedAt:c},skip:e,take:r})}async findById(e){return await this.prisma.scientificJournal.findFirst({where:{id:e}})}async update({id:e,name:r,issn:t,description:i,logoUrl:n,journalUrl:s,directors:m,editorialBoard:c}){await this.prisma.scientificJournal.update({where:{id:e},data:{name:r,issn:t,description:i,logoUrl:n,journalUrl:s,directors:m,editorialBoard:c}})}async deleteById(e){await this.prisma.scientificJournal.delete({where:{id:e}})}async count({filter:{name:e,description:r,issn:t,directors:i,editorialBoard:n}}){let s={},m=[];return e&&m.push({name:{contains:e,mode:"insensitive"}}),r&&m.push({description:{contains:r,mode:"insensitive"}}),t&&m.push({issn:{contains:t,mode:"insensitive"}}),i&&m.push({directors:{contains:i,mode:"insensitive"}}),n&&m.push({editorialBoard:{contains:n,mode:"insensitive"}}),m.length>0&&(s.OR=m),await this.prisma.scientificJournal.count({where:s})}};function Er(){return new ta(z)}function Mh(){return{createScientificJournalController:new ea(Er(),F())}}function Ph(){return{findScientificJournalsController:new Ln(Er())}}function Th(){return{findScientificJournalByIdController:new Gn(Er())}}function Ah(){return{updateScientificJournalController:new Wn(Er(),F())}}function Dh(){return{deleteScientificJournalController:new Nn(Er(),F())}}var Ht=mE(),{authMiddleware:Qr}=Z();Ht.post("/",(o,e,r)=>{Qr.isAdmin(o,e,r)},V.single("logo"),async(o,e)=>{let{createScientificJournalController:r}=Mh();await r.handle(o,e)});Ht.get("/",(o,e,r)=>{Qr.isAdmin(o,e,r)},async(o,e)=>{let{findScientificJournalsController:r}=Ph();await r.handle(o,e)});Ht.get("/:id",(o,e,r)=>{Qr.isAdmin(o,e,r)},async(o,e)=>{let{findScientificJournalByIdController:r}=Th();await r.handle(o,e)});Ht.put("/:id",(o,e,r)=>{Qr.isAdmin(o,e,r)},V.single("logo"),async(o,e)=>{let{updateScientificJournalController:r}=Ah();await r.handle(o,e)});Ht.delete("/:id",(o,e,r)=>{Qr.isAdmin(o,e,r)},async(o,e)=>{let{deleteScientificJournalController:r}=Dh();await r.handle(o,e)});import{Router as dE}from"express";import{extendZodWithOpenApi as cE}from"@asteasolutions/zod-to-openapi";import ra from"zod";cE(ra);var pE=ra.object({role:ra.string().optional(),orderBy:ra.enum(["asc","desc"]).optional()}),oa=class{constructor(e){this.sdhcTeamMemberRepository=e}async handle(e,r){try{let t=pE.parse(e.query),i=await this.sdhcTeamMemberRepository.find({filter:t});r.status(200).json({members:i})}catch(t){if(t instanceof Error)throw new a(t.message)}}};var ia=class{constructor(e){this.prisma=e}async create(e){await this.prisma.sDHCTeamMember.create({data:{...e,order:e.order??0}})}async update(e){let{id:r,...t}=e;await this.prisma.sDHCTeamMember.update({where:{id:r},data:t})}async deleteById(e){await this.prisma.sDHCTeamMember.delete({where:{id:e}})}async find({filter:{role:e,orderBy:r}}){let t={};return e&&(t.role={contains:e,mode:"insensitive"}),await this.prisma.sDHCTeamMember.findMany({where:t,include:{user:{omit:{passwordHash:!0}}},orderBy:r?[{order:"asc"},{updatedAt:r}]:[{order:"asc"},{updatedAt:"desc"}]})}async findById(e){return await this.prisma.sDHCTeamMember.findFirst({where:{id:e},include:{user:{omit:{passwordHash:!0}}}})}async count({filter:{role:e}}){let r={};return e&&(r.role={contains:e,mode:"insensitive"}),await this.prisma.sDHCTeamMember.count({where:r})}};function jr(){return new ia(z)}function Fh(){return{createSDHCTeamMemberController:new _n(jr())}}function Bh(){return{findSDHCTeamMembersController:new oa(jr())}}function Uh(){return{findSDHCTeamMemberByIdController:new Hn(jr())}}function qh(){return{updateSDHCTeamMemberController:new Zn(jr())}}function kh(){return{deleteSDHCTeamMemberController:new zn(jr())}}var Vt=dE(),{authMiddleware:Xp}=Z();Vt.post("/",(o,e,r)=>{Xp.authenticated(o,e,r)},async(o,e)=>{let{createSDHCTeamMemberController:r}=Fh();await r.handle(o,e)});Vt.get("/",async(o,e)=>{let{findSDHCTeamMembersController:r}=Bh();await r.handle(o,e)});Vt.get("/:id",async(o,e)=>{let{findSDHCTeamMemberByIdController:r}=Uh();await r.handle(o,e)});Vt.put("/:id",(o,e,r)=>{Xp.authenticated(o,e,r)},async(o,e)=>{let{updateSDHCTeamMemberController:r}=qh();await r.handle(o,e)});Vt.delete("/:id",(o,e,r)=>{Xp.authenticated(o,e,r)},async(o,e)=>{let{deleteSDHCTeamMemberController:r}=kh();await r.handle(o,e)});import{Router as lE}from"express";var na=class{constructor(e){this.userRepository=e}async handle(e,r){try{let t=await this.userRepository.find();r.status(200).json(t)}catch(t){if(t instanceof Error)throw new a(t.message)}}};function Oh(){return{updateUserController:new Yn(ye(),F())}}function Nh(){return{deleteUserController:new Kn(ye())}}function Gh(){return{findUsersController:new na(ye())}}function Lh(){return{findUserController:new Jn(ye())}}var xr=lE(),{authMiddleware:Wh}=Z();xr.get("/:id",async(o,e)=>{let{findUserController:r}=Lh();await r.handle(o,e)});xr.put("/",(o,e,r)=>{Wh.authenticated(o,e,r)},V.single("avatarImage"),async(o,e)=>{let{updateUserController:r}=Oh();await r.handle(o,e)});xr.delete("/:id",(o,e,r)=>{Wh.authenticated(o,e,r)},async(o,e)=>{let{deleteUserController:r}=Nh();await r.handle(o,e)});xr.get("/",async(o,e)=>{let{findUsersController:r}=Gh();await r.handle(o,e)});import{Router as RE}from"express";import{extendZodWithOpenApi as uE}from"@asteasolutions/zod-to-openapi";import Ge from"zod";var gE=5,_h=1024,fE=_h*_h,yE=gE*fE;uE(Ge);var hE=Ge.object({title:Ge.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),description:Ge.string().optional(),scheduledAt:Ge.coerce.date(),webinarLink:Ge.url().optional(),guestIds:Ge.transform(o=>typeof o=="string"?o.split(","):o).pipe(Ge.array(Ge.uuid())),thumbnail:Ge.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=yE,"A thumbnail deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.")}),sa=class{constructor(e,r){this.webinarRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{title:t,description:i,scheduledAt:n,webinarLink:s,guestIds:m,thumbnail:c}=hE.parse({...e.body,thumbnail:e.file}),d=await this.webinarRepository.create({title:t,description:i,scheduledAt:n,webinarLink:s||void 0,guestIds:m}),h=await this.firebaseStorageService.uploadFile({file:c,folder:M.WEBINAR,id:d.id});return await this.webinarRepository.update({id:d.id,thumbnailUrl:h}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var aa=class{constructor(e){this.prisma=e}async create({title:e,description:r,scheduledAt:t,webinarLink:i,thumbnailUrl:n,guestIds:s}){return await this.prisma.webinar.create({data:{title:e,description:r,scheduledAt:t,webinarLink:i,thumbnailUrl:n,guests:s?{connect:s.map(m=>({id:m}))}:void 0}})}async find({pagination:{offset:e,limit:r},filter:{description:t,orderBy:i,title:n}}){let s={},m=[];return n&&m.push({title:{contains:n,mode:"insensitive"}}),t&&m.push({description:{contains:t,mode:"insensitive"}}),m.length>0&&(s.OR=m),await this.prisma.webinar.findMany({where:s,include:{guests:{omit:{passwordHash:!0}}},orderBy:{updatedAt:i},skip:e,take:r})}async findById(e){return await this.prisma.webinar.findFirst({where:{id:e},include:{guests:{omit:{passwordHash:!0}}}})}async update({id:e,title:r,description:t,scheduledAt:i,webinarLink:n,thumbnailUrl:s,guestIds:m}){await this.prisma.webinar.update({where:{id:e},data:{title:r,description:t,scheduledAt:i,webinarLink:n,thumbnailUrl:s,guests:m?{connect:m.map(c=>({id:c}))}:void 0}})}async deleteById(e){await this.prisma.webinar.delete({where:{id:e}})}async count({filter:{description:e,title:r}}){let t={},i=[];return r&&i.push({title:{contains:r,mode:"insensitive"}}),e&&i.push({description:{contains:e,mode:"insensitive"}}),i.length>0&&(t.OR=i),await this.prisma.webinar.count({where:t})}};function Mr(){return new aa(z)}function zh(){return{createWebinarController:new sa(Mr(),F())}}function Hh(){return{findWebinarsController:new Qn(Mr())}}function Vh(){return{findWebinarByIdController:new $n(Mr())}}function Zh(){return{updateWebinarController:new es(Mr(),F())}}function Kh(){return{deleteWebinarController:new Xn(Mr(),F())}}var Zt=RE(),{authMiddleware:eo}=Z();Zt.post("/",(o,e,r)=>{eo.isAdmin(o,e,r)},V.single("thumbnail"),async(o,e)=>{let{createWebinarController:r}=zh();await r.handle(o,e)});Zt.get("/",(o,e,r)=>{eo.isAdmin(o,e,r)},async(o,e)=>{let{findWebinarsController:r}=Hh();await r.handle(o,e)});Zt.get("/:id",(o,e,r)=>{eo.isAdmin(o,e,r)},async(o,e)=>{let{findWebinarByIdController:r}=Vh();await r.handle(o,e)});Zt.put("/:id",(o,e,r)=>{eo.isAdmin(o,e,r)},V.single("thumbnail"),async(o,e)=>{let{updateWebinarController:r}=Zh();await r.handle(o,e)});Zt.delete("/:id",(o,e,r)=>{eo.isAdmin(o,e,r)},async(o,e)=>{let{deleteWebinarController:r}=Kh();await r.handle(o,e)});import{Router as wE}from"express";import{extendZodWithOpenApi as IE}from"@asteasolutions/zod-to-openapi";import Pr from"zod";var bE=1,CE=7;IE(Pr);var SE=Pr.object({page:Pr.coerce.number().min(1).default(bE),limit:Pr.coerce.number().min(1).default(CE),role:Pr.string().optional(),orderBy:Pr.enum(["asc","desc"]).optional()}),ma=class{constructor(e){this.workGroupTeamMemberRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=SE.parse(e.query),s=i*t-i,[m,c]=await Promise.all([this.workGroupTeamMemberRepository.find({pagination:{offset:s,limit:i},filter:n}),this.workGroupTeamMemberRepository.count({filter:n})]),d=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:d,offset:s,limit:i,members:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};var ca=class{constructor(e){this.prisma=e}async create(e){await this.prisma.workGroupTeamMember.create({data:{...e}})}async update(e){let{id:r,...t}=e;await this.prisma.workGroupTeamMember.update({where:{id:r},data:t})}async deleteById(e){await this.prisma.workGroupTeamMember.delete({where:{id:e}})}async find({pagination:e,filter:{role:r,orderBy:t}}){let i={};return r&&(i.role={contains:r,mode:"insensitive"}),await this.prisma.workGroupTeamMember.findMany({where:i,include:{user:{omit:{passwordHash:!0}}},orderBy:{updatedAt:t??"desc"},...e&&{skip:e.offset,take:e.limit}})}async findById(e){return await this.prisma.workGroupTeamMember.findFirst({where:{id:e},include:{user:{omit:{passwordHash:!0}}}})}async count({filter:{role:e}}){let r={};return e&&(r.role={contains:e,mode:"insensitive"}),await this.prisma.workGroupTeamMember.count({where:r})}};function Tr(){return new ca(z)}function Jh(){return{createWorkGroupTeamMemberController:new ts(Tr())}}function Yh(){return{findWorkGroupTeamMembersController:new ma(Tr())}}function Xh(){return{findWorkGroupTeamMemberByIdController:new os(Tr())}}function $h(){return{updateWorkGroupTeamMemberController:new ns(Tr())}}function Qh(){return{deleteWorkGroupTeamMemberController:new rs(Tr())}}var Kt=wE(),{authMiddleware:$p}=Z();Kt.post("/",(o,e,r)=>{$p.authenticated(o,e,r)},async(o,e)=>{let{createWorkGroupTeamMemberController:r}=Jh();await r.handle(o,e)});Kt.get("/",async(o,e)=>{let{findWorkGroupTeamMembersController:r}=Yh();await r.handle(o,e)});Kt.get("/:id",async(o,e)=>{let{findWorkGroupTeamMemberByIdController:r}=Xh();await r.handle(o,e)});Kt.put("/:id",(o,e,r)=>{$p.authenticated(o,e,r)},async(o,e)=>{let{updateWorkGroupTeamMemberController:r}=$h();await r.handle(o,e)});Kt.delete("/:id",(o,e,r)=>{$p.authenticated(o,e,r)},async(o,e)=>{let{deleteWorkGroupTeamMemberController:r}=Qh();await r.handle(o,e)});var Q=Qp(),jE={methods:["GET","POST","PUT","DELETE"],origin:["http://localhost:3000","https://rede-ct.vercel.app"],credentials:!0};Q.use(EE(jE));Q.use(Qp.json());Q.use(Qp.urlencoded({extended:!1}));Q.use("/docs",vE({content:Zg,theme:"kepler"}));Q.use("/",kp);Q.use("/auth",Ve);Q.use("/user",xr);Q.use("/news",It);Q.use("/certification",At);Q.use("/pendency",Nt);Q.use("/researcher",Ct);Q.use("/in-memoriam",Rt);Q.use("/etp",Ft);Q.use("/partner",Ot);Q.use("/management-team",kt);Q.use("/sdhc-team-member",Vt);Q.use("/legitimator-committee-member",qt);Q.use("/regiment",bt);Q.use("/meeting",Ee);Q.use("/international-scientific-congress",ae);Q.use("/regional-congress",me);Q.use("/webinars",Zt);Q.use("/courses",Dt);Q.use("/post-graduate-programs",Gt);Q.use("/event",Bt);Q.use("/scientific-journals",Ht);Q.use("/book-volumes",Tt);Q.use("/scientific-articles",zt);Q.use("/work-group-team-member",Kt);Q.use("/reference-center-team-member",Lt);Q.use((o,e,r,t)=>{let{errorHandler:i}=ed();i.handle(o,e,r,t)});var ME=xE.createServer(Q),eR=4e3;ME.listen(eR,()=>{console.log(`\u{1F680} Aplica\xE7\xE3o rodando na porta ${eR}.`)});

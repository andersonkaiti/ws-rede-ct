import WM from"http";import{apiReference as GM}from"@scalar/express-api-reference";import LM from"cors";import Ul from"express";import qb from"zod";var Pe=class extends Error{};var le=class extends Error{};var a=class extends Error{};var c=class extends Error{};var ve=class extends Error{};import{ZodError as Bb}from"zod";var Ui=class extends Bb{};var ji=class{handle(e,t,r,o){return e instanceof Ui?r.status(400).json({message:"Validation error",error:qb.treeifyError(e)}):e instanceof Pe?r.status(400).json({message:e.message}):e instanceof c?r.status(404).json({message:e.message}):e instanceof ve?r.status(401).json({message:e.message}):e instanceof le?r.status(409).json({message:e.message}):e instanceof a?r.status(500).json({message:e.message}):r.status(500).json({message:"Internal server error"})}};function jl(){return{errorHandler:new ji}}import{OpenAPIRegistry as EE,OpenApiGeneratorV3 as wE}from"@asteasolutions/zod-to-openapi";import b from"zod";var de={ADMIN:"ADMIN",USER:"USER"},si={PENDING:"PENDING",PAID:"PAID"},Fi={SENIOR:"SENIOR",RESEARCHER:"RESEARCHER",JUNIOR:"JUNIOR",HONOR:"HONOR"},Di={DOCTOR:"DOCTOR",MASTER:"MASTER",BACHELOR:"BACHELOR",TECHNICAL:"TECHNICAL",POSTGRADUATE:"POSTGRADUATE"},Fl={RESEARCHER:"RESEARCHER",LEADER:"LEADER"},Dl={DRAFT:"DRAFT",IN_FORCE:"IN_FORCE",REVOKED:"REVOKED"},ki={ONLINE:"ONLINE",IN_PERSON:"IN_PERSON"},Oi={PENDING:"PENDING",CANCELLED:"CANCELLED",FINISHED:"FINISHED"},yt={ONLINE:"ONLINE",IN_PERSON:"IN_PERSON"},ft={PENDING:"PENDING",CANCELLED:"CANCELLED",FINISHED:"FINISHED"};import{extendZodWithOpenApi as Gb}from"@asteasolutions/zod-to-openapi";import qr from"zod";var Lb=1,_b=6;Gb(qr);var Rm=qr.object({page:qr.coerce.number().min(1).default(Lb),limit:qr.coerce.number().min(1).default(_b),title:qr.string().optional(),description:qr.string().optional(),orderBy:qr.enum(["asc","desc"]).default("desc")}),Bi=class{constructor(e){this.certificationRepository=e}async handle(e,t){try{let{title:r,description:o,limit:s,orderBy:n,page:m}=Rm.parse(e.query),p=m*s-s,d=e.user.id,[f,T]=await Promise.all([this.certificationRepository.findByUserId({userId:d,pagination:{offset:p,limit:s},filter:{title:r,description:o,orderBy:n}}),this.certificationRepository.count({filter:{title:r,description:o,userId:d}})]),v=Math.max(Math.ceil(T/s),1);return t.status(200).json({page:m,totalPages:v,offset:p,limit:s,totalCertifications:T,certifications:f})}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as Wb}from"@asteasolutions/zod-to-openapi";import Nr from"zod";var Hb=1,$b=7;Wb(Nr);var Pm=Nr.object({page:Nr.coerce.number().min(1).default(Hb),limit:Nr.coerce.number().min(1).default($b),title:Nr.string().optional(),content:Nr.string().optional(),orderBy:Nr.enum(["asc","desc"]).default("desc")}),qi=class{constructor(e){this.newsRepository=e}async handle(e,t){try{let{page:r,limit:o,content:s,orderBy:n,title:m}=Pm.parse(e.query),p=o*r-o,d=e.user.id,[f,T]=await Promise.all([this.newsRepository.findByAuthorId({authorId:d,pagination:{offset:p,limit:o},filter:{orderBy:n,title:m,content:s}}),this.newsRepository.count({filter:{authorId:d,content:s,title:m}})]),v=Math.ceil(T/o);t.status(200).json({page:r,totalPages:v,offset:p,limit:o,news:f})}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as Vb}from"@asteasolutions/zod-to-openapi";import{PendencyStatus as zb}from"@prisma/client";import yr from"zod";var Zb=1,Kb=6;Vb(yr);var bm=yr.object({page:yr.coerce.number().min(1).default(Zb),limit:yr.coerce.number().min(1).default(Kb),title:yr.string().optional(),description:yr.string().optional(),status:yr.enum(zb).default("PENDING"),orderBy:yr.enum(["asc","desc"]).default("desc")}),Ni=class{constructor(e){this.pendencyRepository=e}async handle(e,t){try{let{limit:r,page:o,...s}=bm.parse(e.query),n=o*r-r,m=e.user.id,[p,d]=await Promise.all([this.pendencyRepository.findByUserId({userId:m,pagination:{offset:n,limit:r},filter:s}),this.pendencyRepository.count({filter:{...s,userId:m}})]),f=Math.max(Math.ceil(d/r),1);return t.status(200).json({page:o,totalPages:f,offset:n,limit:r,pendencies:p})}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as Jb}from"@asteasolutions/zod-to-openapi";import Gi from"zod";Jb(Gi);var Im=Gi.object({password:Gi.string(),email:Gi.email()}),Li=class{constructor(e,t,r){this.userRepository=e;this.bcrypt=t;this.jwtService=r}async handle(e,t){try{let{email:r,password:o}=Im.parse(e.body),s=await this.userRepository.findByEmail(r);if(!s)return t.status(401).json({message:"Usu\xE1rio n\xE3o existe."});if(!await this.bcrypt.compare({password:o,hashedPassword:s.passwordHash}))throw new ve("Senha inv\xE1lida.");let{id:m,role:p}=s,d=this.jwtService.sign({id:m,role:p,email:r});return t.status(200).json({token:d})}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as Yb}from"@asteasolutions/zod-to-openapi";import ht from"zod";var _i=8;Yb(ht);var Cm=ht.object({name:ht.string("Nome \xE9 obrigat\xF3rio.").min(1,"Nome \xE9 obrigat\xF3rio."),emailAddress:ht.email("E-mail inv\xE1lido.").min(1,"E-mail \xE9 obrigat\xF3rio."),password:ht.string("A senha \xE9 obrigat\xF3ria.").min(_i,`A senha deve ter pelo menos ${_i} caracteres.`),confirmPassword:ht.string("A senha \xE9 obrigat\xF3ria.").min(_i,`A senha deve ter pelo menos ${_i} caracteres.`)}).refine(i=>i.password===i.confirmPassword,{message:"As senhas n\xE3o coincidem.",path:["confirmPassword"]}),Wi=class{constructor(e,t){this.userRepository=e;this.bcrypt=t}async handle(e,t){try{let{emailAddress:r,name:o,password:s}=Cm.parse(e.body);if(await this.userRepository.findByEmail(r))throw new le("Usu\xE1rio j\xE1 existe.");let m=await this.bcrypt.hash(s);return await this.userRepository.create({name:o,emailAddress:r,passwordHash:m}),t.status(201).json()}catch(r){if(r instanceof Error)throw new a(r.message)}}};var kl={method:"post",path:"/auth/sign-up",tags:["Authentication"],summary:"Create a new user",request:{body:{content:{"application/json":{schema:Cm}}}},responses:{201:{description:"User created successfully",summary:"User Registration Successful",content:{"application/json":{schema:b.object({message:b.string()})}}},400:{description:"Invalid input data provided",summary:"Validation Error",content:{"application/json":{schema:b.object({errors:b.record(b.string(),b.string())})}}},409:{description:"User already exists with this email",summary:"User Already Exists",content:{"application/json":{schema:b.object({message:b.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:b.object({message:b.string()})}}}}},Ol={method:"post",path:"/auth/sign-in",tags:["Authentication"],summary:"Sign in",request:{body:{content:{"application/json":{schema:Im}}}},responses:{200:{description:"Authentication successful, JWT token returned",summary:"Login Successful",content:{"application/json":{schema:b.object({token:b.string()})}}},400:{description:"Invalid credentials or input data",summary:"Validation Error",content:{"application/json":{schema:b.object({errors:b.record(b.string(),b.string())})}}},401:{description:"Invalid email or password",summary:"Authentication Failed",content:{"application/json":{schema:b.object({message:b.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:b.object({message:b.string()})}}}}},Bl={method:"get",path:"/auth/user",tags:["Authentication"],summary:"Search for authenticated user",security:[{bearerAuth:[]}],responses:{200:{description:"Authenticated user information retrieved successfully",summary:"User Information Retrieved",content:{"application/json":{schema:b.object({name:b.string(),id:b.string(),avatarUrl:b.string().nullable(),createdAt:b.date(),updatedAt:b.date(),emailAddress:b.string(),orcid:b.string().nullable(),phone:b.string().nullable(),lattesUrl:b.string().nullable(),role:b.nativeEnum(de)}).nullable()}}},400:{description:"Invalid request parameters",summary:"Validation Error",content:{"application/json":{schema:b.object({errors:b.record(b.string(),b.string())})}}},404:{description:"User not found or not authenticated",summary:"User Not Found",content:{"application/json":{schema:b.object({message:b.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:b.object({message:b.string()})}}}}},ql={method:"get",path:"/auth/user/news",tags:["Authentication"],summary:"List authenticated user news",security:[{bearerAuth:[]}],request:{query:Pm},responses:{200:{description:"Paginated list of authenticated user news retrieved successfully",summary:"User News Retrieved",content:{"application/json":{schema:b.object({page:b.number(),totalPages:b.number(),offset:b.number(),limit:b.number(),news:b.object({content:b.string(),id:b.string(),title:b.string(),createdAt:b.date(),updatedAt:b.date(),imageUrl:b.string().nullable()})})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:b.object({errors:b.record(b.string(),b.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:b.object({message:b.string()})}}}}},Nl={method:"get",path:"/auth/admin",tags:["Authentication"],summary:"Verify admin access",security:[{bearerAuth:[]}],responses:{200:{description:"Admin access verified successfully",summary:"Admin Access Granted",content:{"application/json":{schema:b.object({success:b.boolean()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:b.object({message:b.string()})}}}}},Gl={method:"get",path:"/auth/certifications",tags:["Authentication"],summary:"List all authenticated user's certifications",security:[{bearerAuth:[]}],request:{query:Rm},responses:{200:{description:"Paginated list of authenticated user certifications retrieved successfully",summary:"User Certifications Retrieved",content:{"application/json":{schema:b.object({page:b.number(),totalPages:b.number(),offset:b.number(),limit:b.number(),certifications:b.object({description:b.string(),id:b.string(),title:b.string(),certificationUrl:b.string(),createdAt:b.date(),updatedAt:b.date(),userId:b.string()})})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:b.object({errors:b.record(b.string(),b.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:b.object({message:b.string()})}}}}},Ll={method:"get",path:"/auth/pendencies",tags:["Authentication"],summary:"List all authenticated user's pendencies",security:[{bearerAuth:[]}],request:{query:bm},responses:{200:{description:"Paginated list of authenticated user pendencies retrieved successfully",summary:"User Pendencies Retrieved",content:{"application/json":{schema:b.object({page:b.number(),totalPages:b.number(),offset:b.number(),limit:b.number(),pendencies:b.object({id:b.string(),title:b.string(),description:b.string(),status:b.nativeEnum(si),createdAt:b.date(),updatedAt:b.date(),userId:b.string()})})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:b.object({errors:b.record(b.string(),b.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:b.object({message:b.string()})}}}}};import A from"zod";import{extendZodWithOpenApi as Xb}from"@asteasolutions/zod-to-openapi";import Tm from"zod";Xb(Tm);var Sm=Tm.object({id:Tm.uuid()}),Hi=class{constructor(e,t){this.bookVolumeRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{id:r}=Sm.parse({id:e.params.id}),o=await this.bookVolumeRepository.findById(r);if(!o)throw new c("O volume de livro n\xE3o existe.");return o.authorImageUrl&&this.firebaseStorageService.deleteFile({fileUrl:o.authorImageUrl}),o.coverImageUrl&&this.firebaseStorageService.deleteFile({fileUrl:o.coverImageUrl}),o.catalogSheetUrl&&this.firebaseStorageService.deleteFile({fileUrl:o.catalogSheetUrl}),await this.bookVolumeRepository.deleteById(r),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as Qb}from"@asteasolutions/zod-to-openapi";import Am from"zod";Qb(Am);var Em=Am.object({id:Am.uuid()}),$i=class{constructor(e){this.bookVolumeRepository=e}async handle(e,t){try{let{id:r}=Em.parse({id:e.params.id}),o=await this.bookVolumeRepository.findById(r);if(!o)throw new c("Volume de livro n\xE3o encontrado.");return t.status(200).json(o)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as eI}from"@asteasolutions/zod-to-openapi";import fr from"zod";var rI=1,tI=6;eI(fr);var wm=fr.object({page:fr.coerce.number().min(1).default(rI),limit:fr.coerce.number().min(1).default(tI),title:fr.string().optional(),author:fr.string().optional(),description:fr.string().optional(),orderBy:fr.enum(["asc","desc"]).default("desc")}),Vi=class{constructor(e){this.bookVolumeRepository=e}async handle(e,t){try{let{limit:r,page:o,...s}=wm.parse(e.query),n=o*r-r,[m,p]=await Promise.all([this.bookVolumeRepository.find({pagination:{offset:n,limit:r},filter:s}),this.bookVolumeRepository.count({filter:s})]),d=Math.max(Math.ceil(p/r),1);return t.status(200).json({page:o,totalPages:d,offset:n,limit:r,bookVolumes:m})}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as iI}from"@asteasolutions/zod-to-openapi";import Ue from"zod";var E={NEWS:"images/news",USER:"images/user",IN_MEMORIAM:"images/in-memoriam",PARTNER:"images/partners",CERTIFICATION:"documents/certifications",PENDENCY:"documents/pendencies",REGIMENT:"documents/regiments",MEETING_MINUTE:"documents/meeting-minutes",INTERNATIONAL_SCIENTIFIC_CONGRESS_GALLERY:"images/international-scientific-congress-gallery",GALLERY:"images/regional-congress-gallery",REGIONAL_CONGRESS_GALLERY:"images/regional-congress-gallery",WEBINAR:"images/webinars",COURSE:"images/courses",POST_GRADUATE_PROGRAM:"images/post-graduate-programs",EVENT:"images/events",SCIENTIFIC_JOURNAL:"images/scientific-journals",BOOK_VOLUME_AUTHOR_IMAGE:"images/book-volumes/authors",BOOK_VOLUME_COVER:"images/book-volumes/covers",BOOK_VOLUME_CATALOG_SHEET:"documents/book-volumes/catalog-sheets",RESEARCH_GROUP_LOGO:"images/research-groups",MUSEUM:"images/museums",REDECT_HIGHLIGHT:"images/redect-highlights"};var zi=5,_l=1024,oI=_l*_l,Mm=zi*oI;iI(Ue);var xm=Ue.object({id:Ue.uuid(),volumeNumber:Ue.coerce.number().int().positive().optional(),year:Ue.coerce.number().int().positive().optional(),title:Ue.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio.").optional(),author:Ue.string().min(1,"Autor \xE9 obrigat\xF3rio.").optional(),accessUrl:Ue.string().url("URL de acesso deve ser v\xE1lida").optional(),description:Ue.string().optional(),authorImage:Ue.any().refine(i=>i==null?!0:typeof i!="object"||typeof i.size!="number"?!1:i.size<=Mm,`A imagem do autor deve ter no m\xE1ximo ${zi}MB.`).optional(),coverImage:Ue.any().refine(i=>i==null?!0:typeof i!="object"||typeof i.size!="number"?!1:i.size<=Mm,`A imagem da capa deve ter no m\xE1ximo ${zi}MB.`).optional(),catalogSheet:Ue.any().refine(i=>i==null?!0:typeof i!="object"||typeof i.size!="number"?!1:i.size<=Mm,`A ficha catalogr\xE1fica deve ter no m\xE1ximo ${zi}MB.`).optional()}),Zi=class{constructor(e,t){this.bookVolumeRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{id:r,volumeNumber:o,year:s,title:n,author:m,accessUrl:p,description:d,authorImage:f,coverImage:T,catalogSheet:v}=xm.parse({id:e.params.id,...e.body,authorImage:e.files?.authorImage?.[0],coverImage:e.files?.coverImage?.[0],catalogSheet:e.files?.catalogSheet?.[0]}),X=await this.bookVolumeRepository.findById(r);if(!X)throw new c("O volume de livro n\xE3o existe.");let ie=X.authorImageUrl,ce=X.coverImageUrl,Re=X.catalogSheetUrl;return f&&(ie=await this.firebaseStorageService.uploadFile({file:f,id:r,folder:E.BOOK_VOLUME_AUTHOR_IMAGE})),T&&(ce=await this.firebaseStorageService.uploadFile({file:T,id:r,folder:E.BOOK_VOLUME_COVER})),v&&(Re=await this.firebaseStorageService.uploadFile({file:v,id:r,folder:E.BOOK_VOLUME_CATALOG_SHEET})),await this.bookVolumeRepository.update({id:r,volumeNumber:o,year:s,title:n,author:m,accessUrl:p,description:d,authorImageUrl:ie,coverImageUrl:ce,catalogSheetUrl:Re}),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var Wl={method:"post",path:"/book-volumes",tags:["Book Volumes"],summary:"Create book volume",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:A.object({volumeNumber:A.number().int().positive().openapi({description:"N\xFAmero do volume"}),year:A.number().int().positive().openapi({description:"Ano de publica\xE7\xE3o"}),title:A.string().min(1).openapi({description:"T\xEDtulo do livro"}),author:A.string().min(1).openapi({description:"Nome do autor"}),accessUrl:A.string().url().optional().openapi({description:"URL de acesso ao livro"}),description:A.string().optional().openapi({description:"Descri\xE7\xE3o do livro"}),authorImage:A.string().optional().openapi({description:"Imagem do autor (m\xE1ximo 5MB)",type:"string",format:"binary"}),coverImage:A.string().optional().openapi({description:"Imagem da capa (m\xE1ximo 5MB)",type:"string",format:"binary"}),catalogSheet:A.string().optional().openapi({description:"Ficha catalogr\xE1fica (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{201:{description:"Book volume created successfully",summary:"Volume Created"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:A.object({errors:A.record(A.string(),A.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:A.object({message:A.string()})}}}}},Hl={method:"get",path:"/book-volumes",tags:["Book Volumes"],summary:"List book volumes",security:[{bearerAuth:[]}],request:{query:wm},responses:{200:{description:"Paginated list of book volumes retrieved successfully",summary:"Volumes Retrieved",content:{"application/json":{schema:A.object({page:A.number(),totalPages:A.number(),offset:A.number(),limit:A.number(),bookVolumes:A.array(A.object({id:A.string(),volumeNumber:A.number(),year:A.number(),title:A.string(),author:A.string(),accessUrl:A.string().nullable(),authorImageUrl:A.string().nullable(),coverImageUrl:A.string().nullable(),catalogSheetUrl:A.string().nullable(),description:A.string().nullable(),createdAt:A.date(),updatedAt:A.date()}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:A.object({errors:A.record(A.string(),A.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:A.object({message:A.string()})}}}}},$l={method:"get",path:"/book-volumes/{id}",tags:["Book Volumes"],summary:"Find book volume by ID",security:[{bearerAuth:[]}],request:{params:Em},responses:{200:{description:"Book volume details retrieved successfully",summary:"Volume Retrieved",content:{"application/json":{schema:A.object({id:A.string(),volumeNumber:A.number(),year:A.number(),title:A.string(),author:A.string(),accessUrl:A.string().nullable(),authorImageUrl:A.string().nullable(),coverImageUrl:A.string().nullable(),catalogSheetUrl:A.string().nullable(),description:A.string().nullable(),createdAt:A.date(),updatedAt:A.date()}).nullable()}}},400:{description:"Invalid volume ID format",summary:"Validation Error",content:{"application/json":{schema:A.object({errors:A.record(A.string(),A.string())})}}},404:{description:"Book volume not found with the provided ID",summary:"Volume Not Found",content:{"application/json":{schema:A.object({message:A.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:A.object({message:A.string()})}}}}},Vl={method:"put",path:"/book-volumes/{id}",tags:["Book Volumes"],summary:"Update book volume",security:[{bearerAuth:[]}],request:{params:xm.pick({id:!0}),body:{content:{"multipart/form-data":{schema:A.object({volumeNumber:A.number().int().positive().optional().openapi({description:"N\xFAmero do volume"}),year:A.number().int().positive().optional().openapi({description:"Ano de publica\xE7\xE3o"}),title:A.string().min(1).optional().openapi({description:"T\xEDtulo do livro"}),author:A.string().min(1).optional().openapi({description:"Nome do autor"}),accessUrl:A.string().url().optional().openapi({description:"URL de acesso ao livro"}),description:A.string().optional().openapi({description:"Descri\xE7\xE3o do livro"}),authorImage:A.string().optional().openapi({description:"Imagem do autor (m\xE1ximo 5MB)",type:"string",format:"binary"}),coverImage:A.string().optional().openapi({description:"Imagem da capa (m\xE1ximo 5MB)",type:"string",format:"binary"}),catalogSheet:A.string().optional().openapi({description:"Ficha catalogr\xE1fica (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{200:{description:"Book volume updated successfully",summary:"Volume Updated"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:A.object({errors:A.record(A.string(),A.string())})}}},404:{description:"Book volume not found with the provided ID",summary:"Volume Not Found",content:{"application/json":{schema:A.object({message:A.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:A.object({message:A.string()})}}}}},zl={method:"delete",path:"/book-volumes/{id}",tags:["Book Volumes"],summary:"Delete book volume",security:[{bearerAuth:[]}],request:{params:Sm},responses:{200:{description:"Book volume deleted successfully",summary:"Volume Deleted"},400:{description:"Invalid volume ID format",summary:"Validation Error",content:{"application/json":{schema:A.object({errors:A.record(A.string(),A.string())})}}},404:{description:"Book volume not found with the provided ID",summary:"Volume Not Found",content:{"application/json":{schema:A.object({message:A.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:A.object({message:A.string()})}}}}};import j from"zod";import{extendZodWithOpenApi as sI}from"@asteasolutions/zod-to-openapi";import vm from"zod";sI(vm);var Um=vm.object({id:vm.string()}),Ki=class{constructor(e,t){this.certificationRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{id:r}=Um.parse({id:e.params.certification_id}),o=await this.certificationRepository.findById(r);if(!o)throw new c("A certifica\xE7\xE3o n\xE3o existe.");return await Promise.all([this.certificationRepository.deleteById(o.id),this.firebaseStorageService.deleteFile({fileUrl:o.certificationUrl})]),t.sendStatus(204)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as nI}from"@asteasolutions/zod-to-openapi";import jm from"zod";nI(jm);var Fm=jm.object({certificationId:jm.uuid()}),Ji=class{constructor(e){this.certificationRepository=e}async handle(e,t){try{let{certificationId:r}=Fm.parse({certificationId:e.params.certification_id}),o=await this.certificationRepository.findById(r);if(!o)throw new c("Certificado n\xE3o encontrado.");return t.status(200).json(o)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as aI}from"@asteasolutions/zod-to-openapi";import hr from"zod";var mI=1,pI=6;aI(hr);var Dm=hr.object({page:hr.coerce.number().min(1).default(mI),limit:hr.coerce.number().min(1).default(pI),title:hr.string().optional(),description:hr.string().optional(),userId:hr.uuid().optional(),orderBy:hr.enum(["asc","desc"]).default("desc")}),Yi=class{constructor(e){this.certificationRepository=e}async handle(e,t){try{let{limit:r,page:o,...s}=Dm.parse(e.query),n=o*r-r,[m,p]=await Promise.all([this.certificationRepository.find({pagination:{offset:n,limit:r},filter:s}),this.certificationRepository.count({filter:s})]),d=Math.max(Math.ceil(p/r),1);return t.status(200).json({page:o,totalPages:d,offset:n,limit:r,certifications:m})}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as cI}from"@asteasolutions/zod-to-openapi";import Rt from"zod";cI(Rt);var Qi=Rt.object({userId:Rt.uuid(),title:Rt.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),description:Rt.string().min(1,"Descri\xE7\xE3o \xE9 obrigat\xF3ria."),certification:Rt.any().refine(i=>i&&typeof i=="object"&&i.size>0,"Arquivo do certificado \xE9 obrigat\xF3rio")}),Xi=class{constructor(e,t,r){this.userRepository=e;this.certificationRepository=t;this.firebaseStorageService=r}async handle(e,t){try{let{userId:r,title:o,description:s,certification:n}=Qi.parse({...e.body,userId:e.params.user_id,certification:e.file});if(!await this.userRepository.findById(r))throw new Pe("O usu\xE1rio n\xE3o existe.");let p=await this.firebaseStorageService.uploadFile({file:n,id:r,folder:E.CERTIFICATION});return await this.certificationRepository.register({userId:r,title:o,description:s,certificationUrl:p}),t.sendStatus(201)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as dI}from"@asteasolutions/zod-to-openapi";import Pt from"zod";dI(Pt);var ro=Pt.object({id:Pt.uuid(),title:Pt.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),description:Pt.string().min(1,"Descri\xE7\xE3o \xE9 obrigat\xF3ria."),certification:Pt.any().refine(i=>i==null||typeof i=="object"&&typeof i.size=="number"&&(i.size===0||i.size>0),"Arquivo do certificado \xE9 inv\xE1lido").optional()}),eo=class{constructor(e,t){this.certificationRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{certification:r,id:o,...s}=ro.parse({...e.body,id:e.params.certification_id,certification:e.file}),n=await this.certificationRepository.findById(o);if(!n)throw new Pe("A certifica\xE7\xE3o n\xE3o existe");let m=n.certificationUrl;return r&&r.size>0&&(m=await this.firebaseStorageService.updateFile({file:r,id:n.userId,folder:E.CERTIFICATION,fileUrl:n.certificationUrl})),await this.certificationRepository.update({...s,id:o,certificationUrl:m}),t.sendStatus(204)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var Zl={method:"post",path:"/certifications/{user_id}",tags:["Certifications"],summary:"Register certification for user",security:[{bearerAuth:[]}],request:{params:Qi.pick({userId:!0}).transform(()=>({user_id:""})),body:{content:{"multipart/form-data":{schema:Qi.omit({userId:!0})}}}},responses:{201:{description:"Certification registered successfully for the user",summary:"Certification Registered",content:{"application/json":{schema:j.object({message:j.string()})}}},400:{description:"Invalid input data or file format",summary:"Validation Error",content:{"application/json":{schema:j.object({errors:j.record(j.string(),j.string())})}}},404:{description:"User not found with the provided ID",summary:"User Not Found",content:{"application/json":{schema:j.object({message:j.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:j.object({message:j.string()})}}}}},Kl={method:"get",path:"/certifications",tags:["Certifications"],summary:"List certifications",security:[{bearerAuth:[]}],request:{query:Dm},responses:{200:{description:"Paginated list of certifications with user information retrieved successfully",summary:"Certifications Retrieved",content:{"application/json":{schema:j.object({page:j.number(),totalPages:j.number(),offset:j.number(),limit:j.number(),certifications:j.array(j.object({description:j.string(),userId:j.string(),title:j.string(),id:j.string(),createdAt:j.date(),updatedAt:j.date(),certificationUrl:j.url(),user:j.object({id:j.uuid(),name:j.string(),createdAt:j.date(),updatedAt:j.date(),avatarUrl:j.string().nullable(),emailAddress:j.email(),orcid:j.string().nullable(),phone:j.string().nullable(),lattesUrl:j.url().nullable(),role:j.nativeEnum(de)})}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:j.object({errors:j.record(j.string(),j.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:j.object({message:j.string()})}}}}},Jl={method:"get",path:"/certifications/{certification_id}",tags:["Certifications"],summary:"Find certification by ID",security:[{bearerAuth:[]}],request:{params:Fm},responses:{200:{description:"Certification details retrieved successfully",summary:"Certification Retrieved",content:{"application/json":{schema:j.object({description:j.string(),userId:j.string(),title:j.string(),id:j.string(),createdAt:j.date(),updatedAt:j.date(),certificationUrl:j.url()}).nullable()}}},400:{description:"Invalid certification ID format",summary:"Validation Error",content:{"application/json":{schema:j.object({errors:j.record(j.string(),j.string())})}}},404:{description:"Certification not found with the provided ID",summary:"Certification Not Found",content:{"application/json":{schema:j.object({message:j.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:j.object({message:j.string()})}}}}},Yl={method:"put",path:"/certifications/{certification_id}",tags:["Certifications"],summary:"Update certification",security:[{bearerAuth:[]}],request:{params:ro.pick({id:!0}).transform(()=>({certification_id:""})),body:{content:{"multipart/form-data":{schema:ro.omit({id:!0})}}}},responses:{204:{description:"Certification updated successfully",summary:"Certification Updated"},400:{description:"Invalid input data or file format",summary:"Validation Error",content:{"application/json":{schema:j.object({errors:j.record(j.string(),j.string())})}}},404:{description:"Certification not found with the provided ID",summary:"Certification Not Found",content:{"application/json":{schema:j.object({message:j.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:j.object({message:j.string()})}}}}},Xl={method:"delete",path:"/certifications/{certification_id}",tags:["Certifications"],summary:"Delete certification",security:[{bearerAuth:[]}],request:{params:Um},responses:{204:{description:"Certification deleted successfully",summary:"Certification Deleted"},400:{description:"Invalid certification ID format",summary:"Validation Error",content:{"application/json":{schema:j.object({errors:j.record(j.string(),j.string())})}}},404:{description:"Certification not found with the provided ID",summary:"Certification Not Found",content:{"application/json":{schema:j.object({message:j.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:j.object({message:j.string()})}}}}};import P from"zod";import{extendZodWithOpenApi as lI}from"@asteasolutions/zod-to-openapi";import km from"zod";lI(km);var Om=km.object({id:km.uuid()}),to=class{constructor(e,t){this.courseRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{id:r}=Om.parse({id:e.params.id}),o=await this.courseRepository.findById(r);if(!o)throw new c("O curso n\xE3o existe.");return o.imageUrl&&this.firebaseStorageService.deleteFile({fileUrl:o.imageUrl}),await this.courseRepository.deleteById(r),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as uI}from"@asteasolutions/zod-to-openapi";import Bm from"zod";uI(Bm);var qm=Bm.object({id:Bm.uuid()}),io=class{constructor(e){this.courseRepository=e}async handle(e,t){try{let{id:r}=qm.parse({id:e.params.id}),o=await this.courseRepository.findById(r);if(!o)throw new c("Curso n\xE3o encontrado.");return t.status(200).json(o)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as gI}from"@asteasolutions/zod-to-openapi";import Rr from"zod";var yI=1,fI=6;gI(Rr);var Nm=Rr.object({page:Rr.coerce.number().min(1).default(yI),limit:Rr.coerce.number().min(1).default(fI),title:Rr.string().optional(),description:Rr.string().optional(),coordinator:Rr.string().optional(),orderBy:Rr.enum(["asc","desc"]).default("desc")}),oo=class{constructor(e){this.courseRepository=e}async handle(e,t){try{let{limit:r,page:o,...s}=Nm.parse(e.query),n=o*r-r,[m,p]=await Promise.all([this.courseRepository.find({pagination:{offset:n,limit:r},filter:s}),this.courseRepository.count({filter:s})]),d=Math.max(Math.ceil(p/r),1);return t.status(200).json({page:o,totalPages:d,offset:n,limit:r,courses:m})}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as hI}from"@asteasolutions/zod-to-openapi";import be from"zod";var eu=5,Ql=1024,RI=Ql*Ql,PI=eu*RI;hI(be);var Gm=be.object({id:be.uuid(),title:be.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio.").optional(),coordinatorId:be.string().uuid("Coordenador \xE9 obrigat\xF3rio.").optional(),email:be.string().email("E-mail deve ser v\xE1lido.").optional(),location:be.string().min(1,"Localiza\xE7\xE3o \xE9 obrigat\xF3ria.").optional(),scheduledAt:be.coerce.date().optional(),registrationLink:be.url("URL de inscri\xE7\xE3o deve ser v\xE1lida").optional(),description:be.string().optional(),instructorIds:be.transform(i=>typeof i=="string"?i.split(","):i).pipe(be.array(be.uuid())).optional(),image:be.any().refine(i=>i==null?!0:typeof i!="object"||typeof i.size!="number"?!1:i.size<=PI,`A imagem deve ter no m\xE1ximo ${eu}MB.`).optional()}),so=class{constructor(e,t){this.courseRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{id:r,image:o,title:s,coordinatorId:n,email:m,location:p,scheduledAt:d,registrationLink:f,description:T,instructorIds:v}=Gm.parse({id:e.params.id,...e.body,image:e.file}),X=await this.courseRepository.findById(r);if(!X)throw new c("O curso n\xE3o existe.");let ie=X.imageUrl;if(o&&(ie=await this.firebaseStorageService.uploadFile({file:o,id:r,folder:E.COURSE})),!ie)throw new a("URL da imagem \xE9 obrigat\xF3rio");return await this.courseRepository.update({id:r,title:s,coordinatorId:n,email:m,location:p,scheduledAt:d,registrationLink:f,description:T,imageUrl:ie,instructorIds:v}),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var ru={method:"post",path:"/courses",tags:["Courses"],summary:"Create course",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:P.object({title:P.string().min(1).openapi({description:"T\xEDtulo do curso"}),coordinator:P.string().min(1).openapi({description:"Nome do coordenador"}),email:P.string().email().openapi({description:"E-mail de contato"}),location:P.string().min(1).openapi({description:"Localiza\xE7\xE3o do curso"}),scheduledAt:P.string().openapi({description:"Data e hora agendada (ISO 8601)",example:"2024-01-01T10:00:00Z"}),registrationLink:P.string().url().optional().openapi({description:"Link de inscri\xE7\xE3o"}),description:P.string().optional().openapi({description:"Descri\xE7\xE3o do curso"}),instructorIds:P.string().openapi({description:"IDs dos instrutores separados por v\xEDrgula",example:"uuid1,uuid2,uuid3"}),image:P.string().optional().openapi({description:"Imagem do curso (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{201:{description:"Course created successfully",summary:"Course Created"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:P.object({errors:P.record(P.string(),P.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:P.object({message:P.string()})}}}}},tu={method:"get",path:"/courses",tags:["Courses"],summary:"List courses",security:[{bearerAuth:[]}],request:{query:Nm},responses:{200:{description:"Paginated list of courses with instructor information retrieved successfully",summary:"Courses Retrieved",content:{"application/json":{schema:P.object({page:P.number(),totalPages:P.number(),offset:P.number(),limit:P.number(),courses:P.array(P.object({id:P.string(),title:P.string(),imageUrl:P.string().nullable(),coordinator:P.string(),email:P.string(),scheduledAt:P.date(),location:P.string(),registrationLink:P.string().nullable(),description:P.string().nullable(),createdAt:P.date(),updatedAt:P.date(),instructors:P.array(P.object({id:P.uuid(),name:P.string(),emailAddress:P.email(),avatarUrl:P.string().nullable(),createdAt:P.date(),updatedAt:P.date()}))}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:P.object({errors:P.record(P.string(),P.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:P.object({message:P.string()})}}}}},iu={method:"get",path:"/courses/{id}",tags:["Courses"],summary:"Find course by ID",security:[{bearerAuth:[]}],request:{params:qm},responses:{200:{description:"Course details retrieved successfully",summary:"Course Retrieved",content:{"application/json":{schema:P.object({id:P.string(),title:P.string(),imageUrl:P.string().nullable(),coordinator:P.string(),email:P.string(),scheduledAt:P.date(),location:P.string(),registrationLink:P.string().nullable(),description:P.string().nullable(),createdAt:P.date(),updatedAt:P.date(),instructors:P.array(P.object({id:P.uuid(),name:P.string(),emailAddress:P.email(),avatarUrl:P.string().nullable(),createdAt:P.date(),updatedAt:P.date()}))}).nullable()}}},400:{description:"Invalid course ID format",summary:"Validation Error",content:{"application/json":{schema:P.object({errors:P.record(P.string(),P.string())})}}},404:{description:"Course not found with the provided ID",summary:"Course Not Found",content:{"application/json":{schema:P.object({message:P.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:P.object({message:P.string()})}}}}},ou={method:"put",path:"/courses/{id}",tags:["Courses"],summary:"Update course",security:[{bearerAuth:[]}],request:{params:Gm.pick({id:!0}),body:{content:{"multipart/form-data":{schema:P.object({title:P.string().min(1).optional().openapi({description:"T\xEDtulo do curso"}),coordinator:P.string().min(1).optional().openapi({description:"Nome do coordenador"}),email:P.string().email().optional().openapi({description:"E-mail de contato"}),location:P.string().min(1).optional().openapi({description:"Localiza\xE7\xE3o do curso"}),scheduledAt:P.string().optional().openapi({description:"Data e hora agendada (ISO 8601)",example:"2024-01-01T10:00:00Z"}),registrationLink:P.string().url().optional().openapi({description:"Link de inscri\xE7\xE3o"}),description:P.string().optional().openapi({description:"Descri\xE7\xE3o do curso"}),instructorIds:P.string().optional().openapi({description:"IDs dos instrutores separados por v\xEDrgula",example:"uuid1,uuid2,uuid3"}),image:P.string().optional().openapi({description:"Imagem do curso (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{200:{description:"Course updated successfully",summary:"Course Updated"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:P.object({errors:P.record(P.string(),P.string())})}}},404:{description:"Course not found with the provided ID",summary:"Course Not Found",content:{"application/json":{schema:P.object({message:P.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:P.object({message:P.string()})}}}}},su={method:"delete",path:"/courses/{id}",tags:["Courses"],summary:"Delete course",security:[{bearerAuth:[]}],request:{params:Om},responses:{200:{description:"Course deleted successfully",summary:"Course Deleted"},400:{description:"Invalid course ID format",summary:"Validation Error",content:{"application/json":{schema:P.object({errors:P.record(P.string(),P.string())})}}},404:{description:"Course not found with the provided ID",summary:"Course Not Found",content:{"application/json":{schema:P.object({message:P.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:P.object({message:P.string()})}}}}};import C from"zod";import{extendZodWithOpenApi as bI}from"@asteasolutions/zod-to-openapi";import qe from"zod";bI(qe);var Lm=qe.object({code:qe.string(),title:qe.string(),description:qe.string().optional(),notes:qe.string().optional(),leaderId:qe.uuid(),deputyLeaderId:qe.uuid(),secretaryId:qe.uuid(),memberIds:qe.array(qe.uuid())}),no=class{constructor(e){this.etpRepository=e}async handle(e,t){try{let{code:r,title:o,description:s,notes:n,leaderId:m,deputyLeaderId:p,secretaryId:d,memberIds:f}=Lm.parse(e.body);if(await this.etpRepository.findByCode(r))throw new le("J\xE1 existe um ETP cadastrado com este c\xF3digo.");return await this.etpRepository.create({code:r,title:o,description:s,notes:n,leaderId:m,deputyLeaderId:p,secretaryId:d,memberIds:f}),t.sendStatus(201)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as II}from"@asteasolutions/zod-to-openapi";import _m from"zod";II(_m);var Wm=_m.object({id:_m.uuid()}),ao=class{constructor(e){this.etpRepository=e}async handle(e,t){try{let{id:r}=Wm.parse({id:e.params.id});if(!await this.etpRepository.findById(r))throw new c("O ETP n\xE3o existe.");return await this.etpRepository.deleteById(r),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as CI}from"@asteasolutions/zod-to-openapi";import Hm from"zod";CI(Hm);var po=Hm.object({id:Hm.uuid()}),mo=class{constructor(e){this.etpRepository=e}async handle(e,t){try{let{id:r}=po.parse({id:e.params.id}),o=await this.etpRepository.findById(r);if(!o)throw new c("O ETP n\xE3o existe.");return t.status(200).json(o)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as TI}from"@asteasolutions/zod-to-openapi";import je from"zod";TI(je);var $m=je.object({id:je.uuid(),code:je.string().optional(),title:je.string().optional(),description:je.string().optional(),notes:je.string().optional(),leaderId:je.uuid().optional(),deputyLeaderId:je.uuid().optional(),secretaryId:je.uuid().optional(),memberIds:je.array(je.uuid()).optional()}),co=class{constructor(e){this.etpRepository=e}async handle(e,t){try{let{id:r,code:o,title:s,description:n,notes:m,leaderId:p,deputyLeaderId:d,secretaryId:f,memberIds:T}=$m.parse({id:e.params.id,...e.body});if(!await this.etpRepository.findById(r))throw new c("O ETP n\xE3o existe.");if(o){let X=await this.etpRepository.findByCode(o);if(X&&X.id!==r)throw new le("J\xE1 existe um ETP com este c\xF3digo.")}return await this.etpRepository.update({id:r,code:o,title:s,description:n,notes:m,leaderId:p,deputyLeaderId:d,secretaryId:f,memberIds:T}),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var SI=1,AI=9,lo=C.object({id:C.uuid(),registrationNumber:C.string(),mainEtps:C.string().nullable(),formations:C.string().nullable(),degrees:C.array(C.nativeEnum(Di)),occupations:C.string(),seniority:C.nativeEnum(Fi),institutions:C.string(),biography:C.string().nullable(),createdAt:C.date(),updatedAt:C.date(),user:C.object({id:C.uuid(),name:C.string(),emailAddress:C.string(),avatarUrl:C.string().nullable(),orcid:C.string().nullable(),phone:C.string().nullable(),lattesUrl:C.string().nullable(),role:C.nativeEnum(de)})}),nu=C.object({id:C.uuid(),code:C.string(),title:C.string(),description:C.string().nullable(),notes:C.string().nullable(),createdAt:C.date(),updatedAt:C.date(),leader:C.object({id:C.uuid(),researcher:lo}).nullable(),deputyLeader:C.object({id:C.uuid(),researcher:lo}).nullable(),secretary:C.object({id:C.uuid(),researcher:lo}).nullable(),members:C.array(lo)}),au={method:"post",path:"/etp",tags:["ETPs"],summary:"Create a new ETP with single leader, deputy leader, secretary and multiple members",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:Lm}}}},responses:{201:{description:"ETP created successfully",summary:"ETP Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:C.object({errors:C.record(C.string(),C.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:C.object({message:C.string()})}}},409:{description:"ETP with this code already exists",summary:"Conflict",content:{"application/json":{schema:C.object({message:C.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:C.object({message:C.string()})}}}}},mu={method:"get",path:"/etp",tags:["ETPs"],summary:"List all ETPs with pagination and filters",request:{query:C.object({page:C.coerce.number().min(1).default(SI).optional(),limit:C.coerce.number().min(1).default(AI).optional(),code:C.string().optional(),title:C.string().optional(),description:C.string().optional(),notes:C.string().optional(),orderBy:C.enum(["asc","desc"]).optional()})},responses:{200:{description:"List of ETPs retrieved successfully with pagination",summary:"ETPs Retrieved",content:{"application/json":{schema:C.object({page:C.number(),totalPages:C.number(),offset:C.number(),limit:C.number(),etps:C.array(nu)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:C.object({message:C.string()})}}}}},pu={method:"get",path:"/etp/{id}",tags:["ETPs"],summary:"Find ETP by ID",request:{params:po},responses:{200:{description:"ETP details retrieved successfully",summary:"ETP Retrieved",content:{"application/json":{schema:nu}}},400:{description:"Invalid ETP ID format",summary:"Validation Error",content:{"application/json":{schema:C.object({errors:C.record(C.string(),C.string())})}}},404:{description:"ETP not found with the provided ID",summary:"ETP Not Found",content:{"application/json":{schema:C.object({message:C.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:C.object({message:C.string()})}}}}},cu={method:"put",path:"/etp/{id}",tags:["ETPs"],summary:"Update ETP and manage user relationships (single leader, deputy leader, secretary, multiple members)",security:[{bearerAuth:[]}],request:{params:po,body:{content:{"application/json":{schema:$m.omit({id:!0})}}}},responses:{200:{description:"ETP updated successfully",summary:"ETP Updated"},400:{description:"Invalid input data or ETP ID format",summary:"Validation Error",content:{"application/json":{schema:C.object({errors:C.record(C.string(),C.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:C.object({message:C.string()})}}},404:{description:"ETP not found with the provided ID",summary:"ETP Not Found",content:{"application/json":{schema:C.object({message:C.string()})}}},409:{description:"ETP with this code already exists",summary:"Conflict",content:{"application/json":{schema:C.object({message:C.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:C.object({message:C.string()})}}}}},du={method:"delete",path:"/etp/{id}",tags:["ETPs"],summary:"Delete ETP",security:[{bearerAuth:[]}],request:{params:Wm},responses:{200:{description:"ETP deleted successfully",summary:"ETP Deleted"},400:{description:"Invalid ETP ID format",summary:"Validation Error",content:{"application/json":{schema:C.object({errors:C.record(C.string(),C.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:C.object({message:C.string()})}}},404:{description:"ETP not found with the provided ID",summary:"ETP Not Found",content:{"application/json":{schema:C.object({message:C.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:C.object({message:C.string()})}}}}};import G from"zod";import{extendZodWithOpenApi as EI}from"@asteasolutions/zod-to-openapi";import{EventFormat as uo,EventStatus as Vm}from"@prisma/client";import Se from"zod";var wI=5,lu=1024,MI=lu*lu,xI=wI*MI;EI(Se);var zm=Se.object({title:Se.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio"),description:Se.string().optional(),startDate:Se.coerce.date(),endDate:Se.coerce.date(),location:Se.string().optional(),format:Se.enum(uo).default(uo.ONLINE),eventLink:Se.union([Se.url("Link do evento deve ser uma URL v\xE1lida"),Se.literal("")]),status:Se.enum(Vm).default(Vm.PENDING),image:Se.any().refine(i=>!i||typeof i=="object"&&typeof i.mimetype=="string"&&i.mimetype.startsWith("image/")&&typeof i.size=="number"&&i.size<=xI,"A imagem deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.")}).refine(i=>i.format===uo.ONLINE?!!i.eventLink:i.format===uo.IN_PERSON?!!i.location:!0,{message:"Eventos online devem ter link e eventos presenciais devem ter localiza\xE7\xE3o",path:["format"]}),go=class{constructor(e,t){this.eventRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{title:r,description:o,startDate:s,endDate:n,location:m,format:p,eventLink:d,status:f,image:T}=zm.parse({...e.body,image:e.file}),v=await this.eventRepository.create({title:r,description:o,startDate:s,endDate:n,location:m||void 0,format:p,eventLink:d||void 0,status:f??Vm.PENDING}),X=await this.firebaseStorageService.uploadFile({file:T,folder:E.EVENT,id:v.id});return await this.eventRepository.update({id:v.id,imageUrl:X}),t.sendStatus(201)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as vI}from"@asteasolutions/zod-to-openapi";import Zm from"zod";vI(Zm);var Km=Zm.object({id:Zm.uuid()}),yo=class{constructor(e){this.eventRepository=e}async handle(e,t){try{let{id:r}=Km.parse({id:e.params.id});if(!await this.eventRepository.findById(r))throw new c("O evento n\xE3o existe.");return await this.eventRepository.deleteById(r),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as UI}from"@asteasolutions/zod-to-openapi";import Jm from"zod";UI(Jm);var ho=Jm.object({id:Jm.uuid()}),fo=class{constructor(e){this.eventRepository=e}async handle(e,t){try{let{id:r}=ho.parse({id:e.params.id}),o=await this.eventRepository.findById(r);if(!o)throw new c("O evento n\xE3o existe.");return t.status(200).json(o)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as jI}from"@asteasolutions/zod-to-openapi";import Pr from"zod";var FI=1,DI=10;jI(Pr);var Ym=Pr.object({page:Pr.coerce.number().min(1).default(FI),limit:Pr.coerce.number().min(1).default(DI),title:Pr.string().optional(),status:Pr.enum(ft).optional(),format:Pr.enum(yt).optional(),orderBy:Pr.enum(["asc","desc"]).optional()}),Ro=class{constructor(e){this.eventRepository=e}async handle(e,t){try{let{page:r,limit:o,...s}=Ym.parse(e.query),n=o*r-o,[m,p]=await Promise.all([this.eventRepository.find({pagination:{offset:n,limit:o},filter:s}),this.eventRepository.count({filter:s})]),d=Math.max(Math.ceil(p/o),1);t.status(200).json({page:r,totalPages:d,offset:n,limit:o,events:m})}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as kI}from"@asteasolutions/zod-to-openapi";import Ie from"zod";var OI=5,uu=1024,BI=uu*uu,qI=OI*BI;kI(Ie);var Xm=Ie.object({id:Ie.uuid(),title:Ie.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio").optional(),description:Ie.string().optional(),startDate:Ie.coerce.date().optional(),endDate:Ie.coerce.date().optional(),location:Ie.string().optional(),format:Ie.enum(yt).optional(),eventLink:Ie.union([Ie.url("Link do evento deve ser uma URL v\xE1lida"),Ie.literal("")]),status:Ie.enum(ft).optional(),image:Ie.any().refine(i=>!i||typeof i=="object"&&typeof i.mimetype=="string"&&i.mimetype.startsWith("image/")&&typeof i.size=="number"&&i.size<=qI,"A imagem deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.").optional()}),Po=class{constructor(e,t){this.eventRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{id:r,title:o,description:s,startDate:n,endDate:m,location:p,format:d,eventLink:f,status:T,image:v}=Xm.parse({id:e.params.id,...e.body,image:e.file});if(!await this.eventRepository.findById(r))throw new c("O evento n\xE3o existe.");let ie;return v&&(ie=await this.firebaseStorageService.uploadFile({file:v,folder:E.EVENT,id:r})),await this.eventRepository.update({id:r,title:o,description:s,startDate:n,endDate:m,location:p||void 0,format:d,eventLink:f||void 0,status:T,imageUrl:ie}),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var gu=G.object({id:G.uuid(),title:G.string(),description:G.string().nullable(),imageUrl:G.string().nullable(),startDate:G.date(),endDate:G.date(),location:G.string().nullable(),status:G.enum(ft),format:G.enum(yt),eventLink:G.string().nullable(),createdAt:G.date(),updatedAt:G.date()}),yu={method:"post",path:"/event",tags:["Events"],summary:"Create a new event",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:zm}}}},responses:{201:{description:"Event created successfully",summary:"Event Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:G.object({errors:G.record(G.string(),G.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:G.object({message:G.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:G.object({message:G.string()})}}}}},fu={method:"get",path:"/event",tags:["Events"],summary:"List all events with pagination and filters",request:{query:Ym},responses:{200:{description:"List of events retrieved successfully with pagination",summary:"Events Retrieved",content:{"application/json":{schema:G.object({page:G.number(),totalPages:G.number(),offset:G.number(),limit:G.number(),events:G.array(gu)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:G.object({errors:G.record(G.string(),G.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:G.object({message:G.string()})}}}}},hu={method:"get",path:"/event/{id}",tags:["Events"],summary:"Find event by ID",request:{params:ho},responses:{200:{description:"Event details retrieved successfully",summary:"Event Retrieved",content:{"application/json":{schema:gu}}},400:{description:"Invalid event ID format",summary:"Validation Error",content:{"application/json":{schema:G.object({errors:G.record(G.string(),G.string())})}}},404:{description:"Event not found with the provided ID",summary:"Event Not Found",content:{"application/json":{schema:G.object({message:G.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:G.object({message:G.string()})}}}}},Ru={method:"put",path:"/event/{id}",tags:["Events"],summary:"Update event",security:[{bearerAuth:[]}],request:{params:ho,body:{content:{"multipart/form-data":{schema:Xm.omit({id:!0})}}}},responses:{200:{description:"Event updated successfully",summary:"Event Updated"},400:{description:"Invalid input data or event ID format",summary:"Validation Error",content:{"application/json":{schema:G.object({errors:G.record(G.string(),G.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:G.object({message:G.string()})}}},404:{description:"Event not found with the provided ID",summary:"Event Not Found",content:{"application/json":{schema:G.object({message:G.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:G.object({message:G.string()})}}}}},Pu={method:"delete",path:"/event/{id}",tags:["Events"],summary:"Delete event",security:[{bearerAuth:[]}],request:{params:Km},responses:{200:{description:"Event deleted successfully",summary:"Event Deleted"},400:{description:"Invalid event ID format",summary:"Validation Error",content:{"application/json":{schema:G.object({errors:G.record(G.string(),G.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:G.object({message:G.string()})}}},404:{description:"Event not found with the provided ID",summary:"Event Not Found",content:{"application/json":{schema:G.object({message:G.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:G.object({message:G.string()})}}}}};import D from"zod";import{extendZodWithOpenApi as NI}from"@asteasolutions/zod-to-openapi";import{InMemoriamRole as GI}from"@prisma/client";import br from"zod";var Iu=2,bu=1024,LI=bu*bu,_I=Iu*LI;NI(br);var Qm=br.object({name:br.string().min(1,"Nome \xE9 obrigat\xF3rio"),birthDate:br.coerce.date(),deathDate:br.coerce.date(),biography:br.string().optional(),photo:br.any().refine(i=>i==null?!0:typeof i!="object"||typeof i.size!="number"?!1:i.size<=_I,`A imagem deve ter no m\xE1ximo ${Iu}MB.`).optional(),role:br.enum(GI)}).refine(i=>i.deathDate>i.birthDate,{message:"Data de falecimento deve ser posterior \xE0 data de nascimento",path:["deathDate"]}),bo=class{constructor(e,t){this.inMemoriamRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{name:r,birthDate:o,deathDate:s,biography:n,role:m,photo:p}=Qm.parse({...e.body,photo:e.file}),d=await this.inMemoriamRepository.create({name:r,birthDate:o,deathDate:s,biography:n??void 0,role:m}),f;return p&&(f=await this.firebaseStorageService.uploadFile({file:p,id:d.id,folder:E.IN_MEMORIAM}),await this.inMemoriamRepository.update({id:d.id,photoUrl:f})),t.sendStatus(201)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as WI}from"@asteasolutions/zod-to-openapi";import ep from"zod";WI(ep);var rp=ep.object({id:ep.uuid()}),Io=class{constructor(e,t){this.inMemoriamRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{id:r}=rp.parse({id:e.params.id}),o=await this.inMemoriamRepository.findById(r);if(!o)throw new c("O in memoriam n\xE3o existe.");return o.photoUrl&&this.firebaseStorageService.deleteFile({fileUrl:o.photoUrl}),await this.inMemoriamRepository.deleteById(r),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as HI}from"@asteasolutions/zod-to-openapi";import tp from"zod";HI(tp);var To=tp.object({id:tp.uuid()}),Co=class{constructor(e){this.inMemoriamRepository=e}async handle(e,t){try{let{id:r}=To.parse({id:e.params.id}),o=await this.inMemoriamRepository.findById(r);if(!o)throw new c("O in memoriam n\xE3o existe.");return t.status(200).json(o)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as $I}from"@asteasolutions/zod-to-openapi";import{InMemoriamRole as VI}from"@prisma/client";import ip from"zod";$I(ip);var op=ip.object({role:ip.enum(VI)}),So=class{constructor(e){this.inMemoriamRepository=e}async handle(e,t){try{let{role:r}=op.parse({role:e.params.role}),o=await this.inMemoriamRepository.findByRole(r);return t.status(200).json(o)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as zI}from"@asteasolutions/zod-to-openapi";import{InMemoriamRole as ZI}from"@prisma/client";import Ir from"zod";var KI=1,JI=9;zI(Ir);var sp=Ir.object({page:Ir.coerce.number().min(1).default(KI),limit:Ir.coerce.number().min(1).default(JI),name:Ir.string().optional(),biography:Ir.string().optional(),role:Ir.enum(ZI).optional(),orderBy:Ir.enum(["asc","desc"]).default("desc")}),Ao=class{constructor(e){this.inMemoriamRepository=e}async handle(e,t){try{let{page:r,limit:o,...s}=sp.parse(e.query),n=o*r-o,[m,p]=await Promise.all([this.inMemoriamRepository.find({pagination:{offset:n,limit:o},filter:s}),this.inMemoriamRepository.count({filter:s})]),d=Math.max(Math.ceil(p/o),1);t.status(200).json({page:r,totalPages:d,offset:n,limit:o,inMemoriam:m})}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as YI}from"@asteasolutions/zod-to-openapi";import{InMemoriamRole as XI}from"@prisma/client";import Qe from"zod";var Tu=2,Cu=1024,QI=Cu*Cu,eC=Tu*QI;YI(Qe);var np=Qe.object({id:Qe.uuid(),name:Qe.string().min(1,"Nome \xE9 obrigat\xF3rio").optional(),birthDate:Qe.coerce.date().optional(),deathDate:Qe.coerce.date().optional(),biography:Qe.string().optional(),photo:Qe.any().refine(i=>i==null?!0:typeof i!="object"||typeof i.size!="number"?!1:i.size<=eC,`A imagem deve ter no m\xE1ximo ${Tu}MB.`).optional(),role:Qe.enum(XI).optional()}).refine(i=>i.birthDate&&i.deathDate?i.deathDate>i.birthDate:!0,{message:"Data de falecimento deve ser posterior \xE0 data de nascimento",path:["deathDate"]}),Eo=class{constructor(e,t){this.inMemoriamRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{id:r,name:o,birthDate:s,deathDate:n,biography:m,photo:p,role:d}=np.parse({id:e.params.id,...e.body,photo:e.file}),f=await this.inMemoriamRepository.findById(r);if(!f)throw new c("O registro in memoriam n\xE3o existe.");let T=f.photoUrl;return p&&(T=await this.firebaseStorageService.uploadFile({file:p,id:r,folder:E.IN_MEMORIAM})),await this.inMemoriamRepository.update({id:r,name:o,birthDate:s,deathDate:n,biography:m,photoUrl:T??void 0,role:d}),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var ap=D.object({id:D.uuid(),name:D.string(),birthDate:D.date(),deathDate:D.date(),biography:D.string().nullable(),photoUrl:D.string().nullable(),role:D.nativeEnum(Fl),createdAt:D.date(),updatedAt:D.date()}),Su={method:"post",path:"/in-memoriam",tags:["In Memoriam"],summary:"Create a new in memoriam record with optional photo upload",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:Qm}}}},responses:{201:{description:"In memoriam record created successfully",summary:"In Memoriam Created"},400:{description:"Invalid input data, missing required fields, or invalid photo format/size",summary:"Validation Error",content:{"application/json":{schema:D.object({errors:D.record(D.string(),D.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:D.object({message:D.string()})}}},409:{description:"In memoriam record with this name already exists",summary:"Conflict",content:{"application/json":{schema:D.object({message:D.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:D.object({message:D.string()})}}}}},Au={method:"get",path:"/in-memoriam",tags:["In Memoriam"],summary:"List all in memoriam records with pagination and filters",request:{query:sp},responses:{200:{description:"List of in memoriam records retrieved successfully with pagination",summary:"In Memoriam Records Retrieved",content:{"application/json":{schema:D.object({page:D.number(),totalPages:D.number(),offset:D.number(),limit:D.number(),inMemoriam:D.array(ap)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:D.object({errors:D.record(D.string(),D.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:D.object({message:D.string()})}}}}},Eu={method:"get",path:"/in-memoriam/{id}",tags:["In Memoriam"],summary:"Find in memoriam record by ID",request:{params:To},responses:{200:{description:"In memoriam record details retrieved successfully",summary:"In Memoriam Record Retrieved",content:{"application/json":{schema:ap}}},400:{description:"Invalid in memoriam record ID format",summary:"Validation Error",content:{"application/json":{schema:D.object({errors:D.record(D.string(),D.string())})}}},404:{description:"In memoriam record not found with the provided ID",summary:"In Memoriam Record Not Found",content:{"application/json":{schema:D.object({message:D.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:D.object({message:D.string()})}}}}},wu={method:"put",path:"/in-memoriam/{id}",tags:["In Memoriam"],summary:"Update in memoriam record with optional photo upload",security:[{bearerAuth:[]}],request:{params:To,body:{content:{"multipart/form-data":{schema:np.omit({id:!0})}}}},responses:{200:{description:"In memoriam record updated successfully",summary:"In Memoriam Record Updated"},400:{description:"Invalid input data, in memoriam record ID format, or invalid photo format/size",summary:"Validation Error",content:{"application/json":{schema:D.object({errors:D.record(D.string(),D.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:D.object({message:D.string()})}}},404:{description:"In memoriam record not found with the provided ID",summary:"In Memoriam Record Not Found",content:{"application/json":{schema:D.object({message:D.string()})}}},409:{description:"In memoriam record with this name already exists",summary:"Conflict",content:{"application/json":{schema:D.object({message:D.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:D.object({message:D.string()})}}}}},Mu={method:"delete",path:"/in-memoriam/{id}",tags:["In Memoriam"],summary:"Delete in memoriam record",security:[{bearerAuth:[]}],request:{params:rp},responses:{200:{description:"In memoriam record deleted successfully",summary:"In Memoriam Record Deleted"},400:{description:"Invalid in memoriam record ID format",summary:"Validation Error",content:{"application/json":{schema:D.object({errors:D.record(D.string(),D.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:D.object({message:D.string()})}}},404:{description:"In memoriam record not found with the provided ID",summary:"In Memoriam Record Not Found",content:{"application/json":{schema:D.object({message:D.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:D.object({message:D.string()})}}}}},YF={method:"get",path:"/in-memoriam/role/{role}",tags:["In Memoriam"],summary:"Find in memoriam records by role",request:{params:op},responses:{200:{description:"In memoriam records retrieved successfully by role",summary:"In Memoriam Records Retrieved by Role",content:{"application/json":{schema:D.array(ap)}}},400:{description:"Invalid role parameter provided",summary:"Validation Error",content:{"application/json":{schema:D.object({errors:D.record(D.string(),D.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:D.object({message:D.string()})}}}}};import Q from"zod";import{extendZodWithOpenApi as rC}from"@asteasolutions/zod-to-openapi";import ni from"zod";var vu=2,xu=1024,tC=xu*xu,iC=vu*tC;rC(ni);var mp=ni.object({image:ni.any().refine(i=>i==null||typeof i!="object"||typeof i.size!="number"?!1:i.size<=iC,`A imagem deve ter no m\xE1ximo ${vu}MB.`),caption:ni.string().optional(),congressId:ni.uuid()}),wo=class{constructor(e,t,r){this.internationalScientificCongressGalleryRepository=e;this.internationalScientificCongressRepository=t;this.firebaseStorageService=r}async handle(e,t){try{let{image:r,caption:o,congressId:s}=mp.parse({...e.body,...e.params,image:e.file});if(!await this.internationalScientificCongressRepository.findById(s))throw new c("O congresso n\xE3o existe.");let m=await this.internationalScientificCongressGalleryRepository.create({imageUrl:"",caption:o||void 0,congressId:s}),p=await this.firebaseStorageService.uploadFile({file:r,id:m.id,folder:E.INTERNATIONAL_SCIENTIFIC_CONGRESS_GALLERY});return await this.internationalScientificCongressGalleryRepository.update({id:m.id,imageUrl:p}),t.sendStatus(201)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as oC}from"@asteasolutions/zod-to-openapi";import pp from"zod";oC(pp);var xo=pp.object({id:pp.uuid()}),Mo=class{constructor(e){this.internationalScientificCongressGalleryRepository=e}async handle(e,t){try{let{id:r}=xo.parse({id:e.params.id});if(!await this.internationalScientificCongressGalleryRepository.findById(r))throw new c("A imagem da galeria n\xE3o existe.");return await this.internationalScientificCongressGalleryRepository.deleteById(r),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as sC}from"@asteasolutions/zod-to-openapi";import bt from"zod";var nC=1,aC=9;sC(bt);var cp=bt.object({congressId:bt.uuid(),page:bt.coerce.number().min(1).default(nC),limit:bt.coerce.number().min(1).default(aC),caption:bt.string().optional()}),vo=class{constructor(e){this.internationalScientificCongressGalleryRepository=e}async handle(e,t){try{let{congressId:r,page:o,limit:s,...n}=cp.parse({congressId:e.params.congressId,...e.query}),m=s*o-s,[p,d]=await Promise.all([this.internationalScientificCongressGalleryRepository.findByCongressId({pagination:{offset:m,limit:s},filter:{congressId:r,...n}}),this.internationalScientificCongressGalleryRepository.count({filter:{congressId:r,caption:n.caption}})]),f=Math.max(Math.ceil(d/s),1);return t.status(200).json({page:o,totalPages:f,offset:m,limit:s,galleryImages:p})}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as mC}from"@asteasolutions/zod-to-openapi";import ai from"zod";var ju=2,Uu=1024,pC=Uu*Uu,cC=ju*pC;mC(ai);var dp=ai.object({id:ai.uuid(),image:ai.any().refine(i=>i==null?!0:typeof i!="object"||typeof i.size!="number"?!1:i.size<=cC,`A imagem deve ter no m\xE1ximo ${ju}MB.`).optional(),caption:ai.string().optional()}),Uo=class{constructor(e,t){this.internationalScientificCongressGalleryRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{id:r,image:o,caption:s}=dp.parse({id:e.params.id,...e.body,image:e.file}),n=await this.internationalScientificCongressGalleryRepository.findById(r);if(!n)throw new c("A imagem da galeria n\xE3o existe.");let m=n.imageUrl;return o&&(m=await this.firebaseStorageService.uploadFile({file:o,id:r,folder:E.INTERNATIONAL_SCIENTIFIC_CONGRESS_GALLERY})),await this.internationalScientificCongressGalleryRepository.update({id:r,imageUrl:m??void 0,caption:s||void 0}),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var dC=Q.object({id:Q.uuid(),imageUrl:Q.string(),caption:Q.string().nullable(),congressId:Q.uuid()}),Fu={method:"post",path:"/international-scientific-congress/{congressId}/gallery",tags:["International Scientific Congresses"],summary:"Create a new congress gallery image",security:[{bearerAuth:[]}],request:{params:Q.object({congressId:Q.uuid()}),body:{content:{"application/json":{schema:mp.omit({congressId:!0})}}}},responses:{201:{description:"Congress gallery image created successfully",summary:"Congress Gallery Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:Q.object({errors:Q.record(Q.string(),Q.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:Q.object({message:Q.string()})}}},404:{description:"Congress not found with the provided ID",summary:"Congress Not Found",content:{"application/json":{schema:Q.object({message:Q.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Q.object({message:Q.string()})}}}}},Du={method:"get",path:"/international-scientific-congress/{congressId}/gallery",tags:["International Scientific Congresses"],summary:"Find congress gallery images by congress ID",request:{params:cp},responses:{200:{description:"Congress gallery images retrieved successfully by congress ID",summary:"Congress Galleries Retrieved",content:{"application/json":{schema:Q.array(dC)}}},400:{description:"Invalid congress ID parameter provided",summary:"Validation Error",content:{"application/json":{schema:Q.object({errors:Q.record(Q.string(),Q.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Q.object({message:Q.string()})}}}}},ku={method:"put",path:"/international-scientific-congress/gallery/{id}",tags:["International Scientific Congresses"],summary:"Update congress gallery image",security:[{bearerAuth:[]}],request:{params:xo,body:{content:{"application/json":{schema:dp.omit({id:!0})}}}},responses:{200:{description:"Congress gallery image updated successfully",summary:"Congress Gallery Updated"},400:{description:"Invalid input data or gallery ID format",summary:"Validation Error",content:{"application/json":{schema:Q.object({errors:Q.record(Q.string(),Q.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:Q.object({message:Q.string()})}}},404:{description:"Congress gallery image not found with the provided ID",summary:"Congress Gallery Not Found",content:{"application/json":{schema:Q.object({message:Q.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Q.object({message:Q.string()})}}}}},Ou={method:"delete",path:"/international-scientific-congress/gallery/{id}",tags:["International Scientific Congresses"],summary:"Delete congress gallery image",security:[{bearerAuth:[]}],request:{params:xo},responses:{200:{description:"Congress gallery image deleted successfully",summary:"Congress Gallery Deleted"},400:{description:"Invalid gallery ID format",summary:"Validation Error",content:{"application/json":{schema:Q.object({errors:Q.record(Q.string(),Q.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:Q.object({message:Q.string()})}}},404:{description:"Congress gallery image not found with the provided ID",summary:"Congress Gallery Not Found",content:{"application/json":{schema:Q.object({message:Q.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Q.object({message:Q.string()})}}}}};import ee from"zod";import{extendZodWithOpenApi as lC}from"@asteasolutions/zod-to-openapi";import mi from"zod";var qu=2,Bu=1024,uC=Bu*Bu,gC=qu*uC;lC(mi);var lp=mi.object({name:mi.string().min(1,"Nome \xE9 obrigat\xF3rio"),logo:mi.any().refine(i=>i==null?!0:typeof i!="object"||typeof i.size!="number"?!1:i.size<=gC,`A imagem deve ter no m\xE1ximo ${qu}MB.`).optional(),congressId:mi.uuid()}),jo=class{constructor(e,t,r){this.internationalScientificCongressPartnerRepository=e;this.internationalScientificCongressRepository=t;this.firebaseStorageService=r}async handle(e,t){try{let{name:r,logo:o,congressId:s}=lp.parse({...e.body,...e.params,logo:e.file});if(!await this.internationalScientificCongressRepository.findById(s))throw new c("O congresso n\xE3o existe.");let m=await this.internationalScientificCongressPartnerRepository.create({name:r,congressId:s}),p;return o&&(p=await this.firebaseStorageService.uploadFile({file:o,id:m.id,folder:E.PARTNER}),await this.internationalScientificCongressPartnerRepository.update({id:m.id,logoUrl:p})),t.sendStatus(201)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as yC}from"@asteasolutions/zod-to-openapi";import up from"zod";yC(up);var Do=up.object({id:up.uuid()}),Fo=class{constructor(e){this.internationalScientificCongressPartnerRepository=e}async handle(e,t){try{let{id:r}=Do.parse({id:e.params.id});if(!await this.internationalScientificCongressPartnerRepository.findById(r))throw new c("O parceiro n\xE3o existe.");return await this.internationalScientificCongressPartnerRepository.deleteById(r),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as fC}from"@asteasolutions/zod-to-openapi";import It from"zod";var hC=1,RC=9;fC(It);var gp=It.object({congressId:It.uuid(),page:It.coerce.number().min(1).optional(),limit:It.coerce.number().min(1).optional(),name:It.string().optional()}),ko=class{constructor(e){this.internationalScientificCongressPartnerRepository=e}async handle(e,t){try{let{congressId:r,page:o,limit:s,...n}=gp.parse({congressId:e.params.congressId,...e.query});if(o!==void 0&&s!==void 0){let p=o||hC,d=s||RC,f=d*p-d,[T,v]=await Promise.all([this.internationalScientificCongressPartnerRepository.findByCongressId({pagination:{offset:f,limit:d},filter:{congressId:r,...n}}),this.internationalScientificCongressPartnerRepository.count({filter:{congressId:r,name:n.name}})]),X=Math.max(Math.ceil(v/d),1);return t.status(200).json({page:p,totalPages:X,offset:f,limit:d,partners:T})}let m=await this.internationalScientificCongressPartnerRepository.findByCongressId({filter:{congressId:r,...n}});return t.status(200).json(m)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as PC}from"@asteasolutions/zod-to-openapi";import pi from"zod";var Gu=2,Nu=1024,bC=Nu*Nu,IC=Gu*bC;PC(pi);var yp=pi.object({id:pi.uuid(),name:pi.string().min(1,"Nome \xE9 obrigat\xF3rio").optional(),logo:pi.any().refine(i=>i==null?!0:typeof i!="object"||typeof i.size!="number"?!1:i.size<=IC,`A imagem deve ter no m\xE1ximo ${Gu}MB.`).optional()}),Oo=class{constructor(e,t){this.internationalScientificCongressPartnerRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{id:r,name:o,logo:s}=yp.parse({id:e.params.id,...e.body,logo:e.file}),n=await this.internationalScientificCongressPartnerRepository.findById(r);if(!n)throw new c("O parceiro n\xE3o existe.");let m=n.logoUrl;return s&&(m=await this.firebaseStorageService.uploadFile({file:s,id:r,folder:E.PARTNER})),await this.internationalScientificCongressPartnerRepository.update({id:r,name:o,logoUrl:m??void 0}),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var CC=ee.object({id:ee.uuid(),name:ee.string(),logoUrl:ee.string().nullable(),congressId:ee.uuid()}),Lu={method:"post",path:"/international-scientific-congress/{congressId}/partner",tags:["International Scientific Congresses"],summary:"Create a new congress partner",security:[{bearerAuth:[]}],request:{params:ee.object({congressId:ee.uuid()}),body:{content:{"application/json":{schema:lp.omit({congressId:!0})}}}},responses:{201:{description:"Congress partner created successfully",summary:"Congress Partner Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:ee.object({errors:ee.record(ee.string(),ee.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:ee.object({message:ee.string()})}}},404:{description:"Congress not found with the provided ID",summary:"Congress Not Found",content:{"application/json":{schema:ee.object({message:ee.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:ee.object({message:ee.string()})}}}}},_u={method:"get",path:"/international-scientific-congress/{congressId}/partner",tags:["International Scientific Congresses"],summary:"Find congress partners by congress ID",request:{params:gp},responses:{200:{description:"Congress partners retrieved successfully by congress ID",summary:"Congress Partners Retrieved",content:{"application/json":{schema:ee.array(CC)}}},400:{description:"Invalid congress ID parameter provided",summary:"Validation Error",content:{"application/json":{schema:ee.object({errors:ee.record(ee.string(),ee.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:ee.object({message:ee.string()})}}}}},Wu={method:"put",path:"/international-scientific-congress/partner/{id}",tags:["International Scientific Congresses"],summary:"Update congress partner",security:[{bearerAuth:[]}],request:{params:Do,body:{content:{"application/json":{schema:yp.omit({id:!0})}}}},responses:{200:{description:"Congress partner updated successfully",summary:"Congress Partner Updated"},400:{description:"Invalid input data or partner ID format",summary:"Validation Error",content:{"application/json":{schema:ee.object({errors:ee.record(ee.string(),ee.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:ee.object({message:ee.string()})}}},404:{description:"Congress partner not found with the provided ID",summary:"Congress Partner Not Found",content:{"application/json":{schema:ee.object({message:ee.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:ee.object({message:ee.string()})}}}}},Hu={method:"delete",path:"/international-scientific-congress/partner/{id}",tags:["International Scientific Congresses"],summary:"Delete congress partner",security:[{bearerAuth:[]}],request:{params:Do},responses:{200:{description:"Congress partner deleted successfully",summary:"Congress Partner Deleted"},400:{description:"Invalid partner ID format",summary:"Validation Error",content:{"application/json":{schema:ee.object({errors:ee.record(ee.string(),ee.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:ee.object({message:ee.string()})}}},404:{description:"Congress partner not found with the provided ID",summary:"Congress Partner Not Found",content:{"application/json":{schema:ee.object({message:ee.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:ee.object({message:ee.string()})}}}}};import g from"zod";import{extendZodWithOpenApi as TC}from"@asteasolutions/zod-to-openapi";import ae from"zod";TC(ae);var fp=ae.object({title:ae.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio"),edition:ae.coerce.number().int().positive("Edi\xE7\xE3o deve ser um n\xFAmero positivo"),startDate:ae.coerce.date(),endDate:ae.coerce.date(),description:ae.string().optional(),location:ae.string().optional(),congressLink:ae.union([ae.url("Link do congresso deve ser uma URL v\xE1lida"),ae.literal("")]),noticeUrl:ae.union([ae.url("URL do edital deve ser uma URL v\xE1lida"),ae.literal("")]),scheduleUrl:ae.union([ae.url("URL do cronograma deve ser uma URL v\xE1lida"),ae.literal("")]),programUrl:ae.union([ae.url("URL da programa\xE7\xE3o deve ser uma URL v\xE1lida"),ae.literal("")]),adminReportUrl:ae.union([ae.url("URL do relat\xF3rio administrativo deve ser uma URL v\xE1lida"),ae.literal("")]),proceedingsUrl:ae.union([ae.url("URL dos anais deve ser uma URL v\xE1lida"),ae.literal("")])}).refine(i=>i.endDate>=i.startDate,{message:"Data de t\xE9rmino deve ser posterior ou igual \xE0 data de in\xEDcio",path:["endDate"]}),Bo=class{constructor(e){this.internationalScientificCongressRepository=e}async handle(e,t){try{let r=fp.parse(e.body);return await this.internationalScientificCongressRepository.create(r),t.sendStatus(201)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as SC}from"@asteasolutions/zod-to-openapi";import hp from"zod";SC(hp);var Rp=hp.object({id:hp.uuid()}),qo=class{constructor(e){this.internationalScientificCongressRepository=e}async handle(e,t){try{let{id:r}=Rp.parse({id:e.params.id});if(!await this.internationalScientificCongressRepository.findById(r))throw new c("O congresso n\xE3o existe.");return await this.internationalScientificCongressRepository.deleteById(r),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as AC}from"@asteasolutions/zod-to-openapi";import Pp from"zod";AC(Pp);var bp=Pp.object({edition:Pp.coerce.number().int().positive()}),No=class{constructor(e){this.internationalScientificCongressRepository=e}async handle(e,t){try{let{edition:r}=bp.parse({edition:e.params.edition}),o=await this.internationalScientificCongressRepository.findByEdition(r);return t.status(200).json(o)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as EC}from"@asteasolutions/zod-to-openapi";import Ip from"zod";EC(Ip);var Lo=Ip.object({id:Ip.uuid()}),Go=class{constructor(e){this.internationalScientificCongressRepository=e}async handle(e,t){try{let{id:r}=Lo.parse({id:e.params.id}),o=await this.internationalScientificCongressRepository.findById(r);if(!o)throw new c("O congresso n\xE3o existe.");return t.status(200).json(o)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as wC}from"@asteasolutions/zod-to-openapi";import Cr from"zod";var MC=1,xC=10;wC(Cr);var Cp=Cr.object({page:Cr.coerce.number().min(1).default(MC),limit:Cr.coerce.number().min(1).default(xC),title:Cr.string().optional(),edition:Cr.coerce.number().int().positive().optional(),location:Cr.string().optional(),orderBy:Cr.enum(["asc","desc"]).optional()}),_o=class{constructor(e){this.internationalScientificCongressRepository=e}async handle(e,t){try{let{page:r,limit:o,...s}=Cp.parse(e.query),n=o*r-o,[m,p]=await Promise.all([this.internationalScientificCongressRepository.find({pagination:{offset:n,limit:o},filter:s}),this.internationalScientificCongressRepository.count({filter:s})]),d=Math.max(Math.ceil(p/o),1);t.status(200).json({page:r,totalPages:d,offset:n,limit:o,congresses:m})}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as vC}from"@asteasolutions/zod-to-openapi";import ne from"zod";vC(ne);var Tp=ne.object({id:ne.uuid(),title:ne.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio").optional(),edition:ne.coerce.number().int().positive("Edi\xE7\xE3o deve ser um n\xFAmero positivo").optional(),startDate:ne.coerce.date().optional(),endDate:ne.coerce.date().optional(),description:ne.string().optional(),location:ne.string().optional(),congressLink:ne.union([ne.url("Link do congresso deve ser uma URL v\xE1lida"),ne.literal("")]),noticeUrl:ne.union([ne.url("URL do edital deve ser uma URL v\xE1lida"),ne.literal("")]),scheduleUrl:ne.union([ne.url("URL do cronograma deve ser uma URL v\xE1lida"),ne.literal("")]),programUrl:ne.union([ne.url("URL da programa\xE7\xE3o deve ser uma URL v\xE1lida"),ne.literal("")]),adminReportUrl:ne.union([ne.url("URL do relat\xF3rio administrativo deve ser uma URL v\xE1lida"),ne.literal("")]),proceedingsUrl:ne.union([ne.url("URL dos anais deve ser uma URL v\xE1lida"),ne.literal("")])}),Wo=class{constructor(e){this.internationalScientificCongressRepository=e}async handle(e,t){try{let{id:r,...o}=Tp.parse({id:e.params.id,...e.body});if(!await this.internationalScientificCongressRepository.findById(r))throw new c("O congresso n\xE3o existe.");return await this.internationalScientificCongressRepository.update({...o,id:r}),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var UC=9,jC=g.object({image:g.any().openapi({type:"string",format:"binary"}),caption:g.string().optional()}),FC=g.object({image:g.any().openapi({type:"string",format:"binary"}).optional(),caption:g.string().optional()}),DC=g.object({id:g.uuid(),name:g.string(),logoUrl:g.string().nullable(),congressId:g.uuid()}),Sp=g.object({id:g.uuid(),imageUrl:g.string(),caption:g.string().nullable(),congressId:g.uuid()}),Ap=g.object({id:g.uuid(),title:g.string(),edition:g.number(),startDate:g.date(),endDate:g.date(),description:g.string().nullable(),location:g.string().nullable(),congressLink:g.string().nullable(),noticeUrl:g.string().nullable(),scheduleUrl:g.string().nullable(),programUrl:g.string().nullable(),adminReportUrl:g.string().nullable(),proceedingsUrl:g.string().nullable(),partners:g.array(DC),galleries:g.array(Sp),createdAt:g.date(),updatedAt:g.date()}),$u={method:"post",path:"/international-scientific-congress",tags:["International Scientific Congresses"],summary:"Create a new international scientific congress",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:fp}}}},responses:{201:{description:"International scientific congress created successfully",summary:"International Scientific Congress Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:g.object({message:g.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}},Vu={method:"get",path:"/international-scientific-congress",tags:["International Scientific Congresses"],summary:"List all international scientific congresses with pagination and filters",request:{query:Cp},responses:{200:{description:"List of international scientific congresses retrieved successfully with pagination",summary:"International Scientific Congresses Retrieved",content:{"application/json":{schema:g.object({page:g.number(),totalPages:g.number(),offset:g.number(),limit:g.number(),congresses:g.array(Ap)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}},zu={method:"get",path:"/international-scientific-congress/{id}",tags:["International Scientific Congresses"],summary:"Find international scientific congress by ID",request:{params:Lo},responses:{200:{description:"International scientific congress details retrieved successfully",summary:"International Scientific Congress Retrieved",content:{"application/json":{schema:Ap}}},400:{description:"Invalid international scientific congress ID format",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},404:{description:"International scientific congress not found with the provided ID",summary:"International Scientific Congress Not Found",content:{"application/json":{schema:g.object({message:g.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}},Zu={method:"get",path:"/international-scientific-congress/edition/{edition}",tags:["International Scientific Congresses"],summary:"Find international scientific congresses by edition",request:{params:bp},responses:{200:{description:"International scientific congresses retrieved successfully by edition",summary:"International Scientific Congresses Retrieved by Edition",content:{"application/json":{schema:g.array(Ap)}}},400:{description:"Invalid edition parameter provided",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}},Ku={method:"put",path:"/international-scientific-congress/{id}",tags:["International Scientific Congresses"],summary:"Update international scientific congress",security:[{bearerAuth:[]}],request:{params:Lo,body:{content:{"application/json":{schema:Tp.omit({id:!0})}}}},responses:{200:{description:"International scientific congress updated successfully",summary:"International Scientific Congress Updated"},400:{description:"Invalid input data or international scientific congress ID format",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:g.object({message:g.string()})}}},404:{description:"International scientific congress not found with the provided ID",summary:"International Scientific Congress Not Found",content:{"application/json":{schema:g.object({message:g.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}},Ju={method:"delete",path:"/international-scientific-congress/{id}",tags:["International Scientific Congresses"],summary:"Delete international scientific congress",security:[{bearerAuth:[]}],request:{params:Rp},responses:{200:{description:"International scientific congress deleted successfully",summary:"International Scientific Congress Deleted"},400:{description:"Invalid international scientific congress ID format",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:g.object({message:g.string()})}}},404:{description:"International scientific congress not found with the provided ID",summary:"International Scientific Congress Not Found",content:{"application/json":{schema:g.object({message:g.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}},zk={method:"post",path:"/international-scientific-congress/{congressId}/gallery",tags:["International Scientific Congress Gallery"],summary:"Create a new gallery image for a congress",security:[{bearerAuth:[]}],request:{params:g.object({congressId:g.uuid()}),body:{content:{"multipart/form-data":{schema:jC}}}},responses:{201:{description:"Gallery image created successfully",summary:"Gallery Image Created"},400:{description:"Invalid input data, missing required fields, or invalid image format/size",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:g.object({message:g.string()})}}},404:{description:"Congress not found with the provided ID",summary:"Congress Not Found",content:{"application/json":{schema:g.object({message:g.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}},Zk={method:"get",path:"/international-scientific-congress/{congressId}/gallery",tags:["International Scientific Congress Gallery"],summary:"List all gallery images for a congress with pagination",request:{params:g.object({congressId:g.uuid()}),query:g.object({page:g.coerce.number().min(1).default(1),limit:g.coerce.number().min(1).default(UC),caption:g.string().optional()})},responses:{200:{description:"Gallery images retrieved successfully with pagination",summary:"Gallery Images Retrieved",content:{"application/json":{schema:g.object({page:g.number(),totalPages:g.number(),offset:g.number(),limit:g.number(),galleries:g.array(Sp)})}}},400:{description:"Invalid congress ID format or query parameters",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}},Kk={method:"get",path:"/international-scientific-congress/gallery/{id}",tags:["International Scientific Congress Gallery"],summary:"Find a gallery image by ID",request:{params:g.object({id:g.uuid()})},responses:{200:{description:"Gallery image retrieved successfully",summary:"Gallery Image Retrieved",content:{"application/json":{schema:Sp}}},400:{description:"Invalid gallery image ID format",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},404:{description:"Gallery image not found with the provided ID",summary:"Gallery Image Not Found",content:{"application/json":{schema:g.object({message:g.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}},Jk={method:"put",path:"/international-scientific-congress/gallery/{id}",tags:["International Scientific Congress Gallery"],summary:"Update a gallery image with optional image upload",security:[{bearerAuth:[]}],request:{params:g.object({id:g.uuid()}),body:{content:{"multipart/form-data":{schema:FC}}}},responses:{200:{description:"Gallery image updated successfully",summary:"Gallery Image Updated"},400:{description:"Invalid input data, gallery ID format, or invalid image format/size",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:g.object({message:g.string()})}}},404:{description:"Gallery image not found with the provided ID",summary:"Gallery Image Not Found",content:{"application/json":{schema:g.object({message:g.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}},Yk={method:"delete",path:"/international-scientific-congress/gallery/{id}",tags:["International Scientific Congress Gallery"],summary:"Delete a gallery image",security:[{bearerAuth:[]}],request:{params:g.object({id:g.uuid()})},responses:{200:{description:"Gallery image deleted successfully",summary:"Gallery Image Deleted"},400:{description:"Invalid gallery ID format",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:g.object({message:g.string()})}}},404:{description:"Gallery image not found with the provided ID",summary:"Gallery Image Not Found",content:{"application/json":{schema:g.object({message:g.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}};import J from"zod";import{extendZodWithOpenApi as kC}from"@asteasolutions/zod-to-openapi";import ci from"zod";kC(ci);var Ep=ci.object({title:ci.string().min(1),link:ci.url(),country:ci.string().min(1)}),Ho=class{constructor(e){this.lawRepository=e}async handle(e,t){try{let{title:r,link:o,country:s}=Ep.parse(e.body);return await this.lawRepository.create({title:r,link:o,country:s}),t.sendStatus(201)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as OC}from"@asteasolutions/zod-to-openapi";import wp from"zod";OC(wp);var Mp=wp.object({id:wp.uuid()}),$o=class{constructor(e){this.lawRepository=e}async handle(e,t){try{let{id:r}=Mp.parse({id:e.params.id});if(!await this.lawRepository.findById(r))throw new c("A lei n\xE3o existe.");return await this.lawRepository.deleteById(r),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as BC}from"@asteasolutions/zod-to-openapi";import xp from"zod";BC(xp);var zo=xp.object({id:xp.uuid()}),Vo=class{constructor(e){this.lawRepository=e}async handle(e,t){try{let{id:r}=zo.parse({id:e.params.id}),o=await this.lawRepository.findById(r);if(!o)throw new c("A lei n\xE3o existe.");return t.status(200).json(o)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as qC}from"@asteasolutions/zod-to-openapi";import Ct from"zod";qC(Ct);var vp=Ct.object({id:Ct.uuid(),title:Ct.string().min(1).optional(),link:Ct.url().optional(),country:Ct.string().min(1).optional()}),Zo=class{constructor(e){this.lawRepository=e}async handle(e,t){try{let{id:r,title:o,link:s,country:n}=vp.parse({id:e.params.id,...e.body});if(!await this.lawRepository.findById(r))throw new c("A lei n\xE3o existe.");return await this.lawRepository.update({id:r,title:o,link:s,country:n}),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var Yu=J.object({id:J.uuid(),title:J.string(),link:J.string(),country:J.string(),createdAt:J.date(),updatedAt:J.date()}),Xu={method:"post",path:"/law",tags:["Laws"],summary:"Create a new Law",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:Ep}}}},responses:{201:{description:"Law created successfully",summary:"Law Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:J.object({errors:J.record(J.string(),J.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:J.object({message:J.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:J.object({message:J.string()})}}}}},Qu={method:"get",path:"/law",tags:["Laws"],summary:"List all Laws with filters",request:{query:J.object({page:J.coerce.number().optional(),limit:J.coerce.number().optional(),title:J.string().optional(),country:J.string().optional(),orderBy:J.enum(["asc","desc"]).optional()})},responses:{200:{description:"List of Laws retrieved successfully",summary:"Laws Retrieved",content:{"application/json":{schema:J.object({page:J.number(),totalPages:J.number(),offset:J.number(),limit:J.number(),laws:J.array(Yu)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:J.object({message:J.string()})}}}}},eg={method:"get",path:"/law/{id}",tags:["Laws"],summary:"Find Law by ID",request:{params:zo},responses:{200:{description:"Law details retrieved successfully",summary:"Law Retrieved",content:{"application/json":{schema:Yu}}},400:{description:"Invalid Law ID format",summary:"Validation Error",content:{"application/json":{schema:J.object({errors:J.record(J.string(),J.string())})}}},404:{description:"Law not found with the provided ID",summary:"Law Not Found",content:{"application/json":{schema:J.object({message:J.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:J.object({message:J.string()})}}}}},rg={method:"put",path:"/law/{id}",tags:["Laws"],summary:"Update Law",security:[{bearerAuth:[]}],request:{params:zo,body:{content:{"application/json":{schema:vp.omit({id:!0})}}}},responses:{200:{description:"Law updated successfully",summary:"Law Updated"},400:{description:"Invalid input data or Law ID format",summary:"Validation Error",content:{"application/json":{schema:J.object({errors:J.record(J.string(),J.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:J.object({message:J.string()})}}},404:{description:"Law not found with the provided ID",summary:"Law Not Found",content:{"application/json":{schema:J.object({message:J.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:J.object({message:J.string()})}}}}},tg={method:"delete",path:"/law/{id}",tags:["Laws"],summary:"Delete Law",security:[{bearerAuth:[]}],request:{params:Mp},responses:{200:{description:"Law deleted successfully",summary:"Law Deleted"},400:{description:"Invalid Law ID format",summary:"Validation Error",content:{"application/json":{schema:J.object({errors:J.record(J.string(),J.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:J.object({message:J.string()})}}},404:{description:"Law not found with the provided ID",summary:"Law Not Found",content:{"application/json":{schema:J.object({message:J.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:J.object({message:J.string()})}}}}};import _ from"zod";import{extendZodWithOpenApi as NC}from"@asteasolutions/zod-to-openapi";import Tt from"zod";NC(Tt);var Up=Tt.object({role:Tt.string().min(1),description:Tt.string().optional(),userId:Tt.uuid(),order:Tt.number().optional()}),Ko=class{constructor(e){this.legitimatorCommitteeMemberRepository=e}async handle(e,t){try{let{role:r,description:o,userId:s,order:n}=Up.parse(e.body);return await this.legitimatorCommitteeMemberRepository.create({role:r,description:o,userId:s,order:n??0}),t.sendStatus(201)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as GC}from"@asteasolutions/zod-to-openapi";import jp from"zod";GC(jp);var Fp=jp.object({id:jp.uuid()}),Jo=class{constructor(e){this.legitimatorCommitteeMemberRepository=e}async handle(e,t){try{let{id:r}=Fp.parse({id:e.params.id});if(!await this.legitimatorCommitteeMemberRepository.findById(r))throw new c("O membro do comit\xEA legitimador n\xE3o existe.");return await this.legitimatorCommitteeMemberRepository.deleteById(r),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as LC}from"@asteasolutions/zod-to-openapi";import Dp from"zod";LC(Dp);var Xo=Dp.object({id:Dp.uuid()}),Yo=class{constructor(e){this.legitimatorCommitteeMemberRepository=e}async handle(e,t){try{let{id:r}=Xo.parse({id:e.params.id}),o=await this.legitimatorCommitteeMemberRepository.findById(r);if(!o)throw new c("O membro do comit\xEA legitimador n\xE3o existe.");return t.status(200).json(o)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as _C}from"@asteasolutions/zod-to-openapi";import Gr from"zod";_C(Gr);var kp=Gr.object({id:Gr.uuid(),role:Gr.string().min(1).optional(),description:Gr.string().optional(),userId:Gr.uuid().optional(),order:Gr.number().optional()}),Qo=class{constructor(e){this.legitimatorCommitteeMemberRepository=e}async handle(e,t){try{let{id:r,role:o,description:s,userId:n,order:m}=kp.parse({id:e.params.id,...e.body});if(!await this.legitimatorCommitteeMemberRepository.findById(r))throw new c("O membro do comit\xEA legitimador n\xE3o existe.");return await this.legitimatorCommitteeMemberRepository.update({id:r,role:o,description:s,userId:n,order:m}),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var WC=_.object({id:_.uuid(),name:_.string(),emailAddress:_.string(),avatarUrl:_.string().nullable(),orcid:_.string().nullable(),phone:_.string().nullable(),lattesUrl:_.string().nullable(),role:_.nativeEnum(de)}),ig=_.object({id:_.uuid(),role:_.string(),description:_.string().nullable(),order:_.number(),createdAt:_.date(),updatedAt:_.date(),userId:_.uuid(),user:WC}),og={method:"post",path:"/legitimator-committee-member",tags:["Legitimator Committee Members"],summary:"Create a new Legitimator Committee Member",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:Up}}}},responses:{201:{description:"Legitimator Committee Member created successfully",summary:"Legitimator Committee Member Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:_.object({errors:_.record(_.string(),_.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:_.object({message:_.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:_.object({message:_.string()})}}}}},sg={method:"get",path:"/legitimator-committee-member",tags:["Legitimator Committee Members"],summary:"List all Legitimator Committee Members with filters",request:{query:_.object({role:_.string().optional(),orderBy:_.enum(["asc","desc"]).optional()})},responses:{200:{description:"List of Legitimator Committee Members retrieved successfully",summary:"Legitimator Committee Members Retrieved",content:{"application/json":{schema:_.object({members:_.array(ig)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:_.object({message:_.string()})}}}}},ng={method:"get",path:"/legitimator-committee-member/{id}",tags:["Legitimator Committee Members"],summary:"Find Legitimator Committee Member by ID",request:{params:Xo},responses:{200:{description:"Legitimator Committee Member details retrieved successfully",summary:"Legitimator Committee Member Retrieved",content:{"application/json":{schema:ig}}},400:{description:"Invalid Legitimator Committee Member ID format",summary:"Validation Error",content:{"application/json":{schema:_.object({errors:_.record(_.string(),_.string())})}}},404:{description:"Legitimator Committee Member not found with the provided ID",summary:"Legitimator Committee Member Not Found",content:{"application/json":{schema:_.object({message:_.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:_.object({message:_.string()})}}}}},ag={method:"put",path:"/legitimator-committee-member/{id}",tags:["Legitimator Committee Members"],summary:"Update Legitimator Committee Member",security:[{bearerAuth:[]}],request:{params:Xo,body:{content:{"application/json":{schema:kp.omit({id:!0})}}}},responses:{200:{description:"Legitimator Committee Member updated successfully",summary:"Legitimator Committee Member Updated"},400:{description:"Invalid input data or Legitimator Committee Member ID format",summary:"Validation Error",content:{"application/json":{schema:_.object({errors:_.record(_.string(),_.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:_.object({message:_.string()})}}},404:{description:"Legitimator Committee Member not found with the provided ID",summary:"Legitimator Committee Member Not Found",content:{"application/json":{schema:_.object({message:_.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:_.object({message:_.string()})}}}}},mg={method:"delete",path:"/legitimator-committee-member/{id}",tags:["Legitimator Committee Members"],summary:"Delete Legitimator Committee Member",security:[{bearerAuth:[]}],request:{params:Fp},responses:{200:{description:"Legitimator Committee Member deleted successfully",summary:"Legitimator Committee Member Deleted"},400:{description:"Invalid Legitimator Committee Member ID format",summary:"Validation Error",content:{"application/json":{schema:_.object({errors:_.record(_.string(),_.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:_.object({message:_.string()})}}},404:{description:"Legitimator Committee Member not found with the provided ID",summary:"Legitimator Committee Member Not Found",content:{"application/json":{schema:_.object({message:_.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:_.object({message:_.string()})}}}}};import F from"zod";import{extendZodWithOpenApi as HC}from"@asteasolutions/zod-to-openapi";import er from"zod";HC(er);var Op=er.object({name:er.string().min(1),description:er.string().optional(),members:er.array(er.object({userId:er.uuid(),role:er.string().min(1),order:er.number().optional()}))}),es=class{constructor(e){this.managementTeamRepository=e}async handle(e,t){try{let{name:r,description:o,members:s}=Op.parse(e.body);if(await this.managementTeamRepository.findByName(r))throw new le("J\xE1 existe um time de gest\xE3o cadastrado com este nome.");return await this.managementTeamRepository.create({name:r,description:o,members:s.map(m=>({userId:m.userId,role:m.role,order:m.order??0}))}),t.sendStatus(201)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as $C}from"@asteasolutions/zod-to-openapi";import Bp from"zod";$C(Bp);var qp=Bp.object({id:Bp.uuid()}),rs=class{constructor(e){this.managementTeamRepository=e}async handle(e,t){try{let{id:r}=qp.parse({id:e.params.id});if(!await this.managementTeamRepository.findById(r))throw new c("O time de gest\xE3o n\xE3o existe.");return await this.managementTeamRepository.deleteById(r),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as VC}from"@asteasolutions/zod-to-openapi";import Np from"zod";VC(Np);var is=Np.object({id:Np.uuid()}),ts=class{constructor(e){this.managementTeamRepository=e}async handle(e,t){try{let{id:r}=is.parse({id:e.params.id}),o=await this.managementTeamRepository.findById(r);if(!o)throw new c("O time de gest\xE3o n\xE3o existe.");return t.status(200).json(o)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as zC}from"@asteasolutions/zod-to-openapi";import Ve from"zod";zC(Ve);var Gp=Ve.object({id:Ve.uuid(),name:Ve.string().min(1).optional(),description:Ve.string().optional(),members:Ve.array(Ve.object({userId:Ve.uuid(),role:Ve.string().min(1),order:Ve.number().optional()})).optional()}),os=class{constructor(e){this.managementTeamRepository=e}async handle(e,t){try{let{id:r,name:o,description:s,members:n}=Gp.parse({id:e.params.id,...e.body}),m=await this.managementTeamRepository.findById(r);if(!m)throw new c("O time de gest\xE3o n\xE3o existe.");if(o&&o!==m.name){let p=await this.managementTeamRepository.findByName(o);if(p&&p.id!==r)throw new le("J\xE1 existe um time de gest\xE3o com este nome.")}return await this.managementTeamRepository.update({id:r,name:o,description:s,members:n?n.map(p=>({userId:p.userId,role:p.role,order:p.order??0})):void 0}),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var ZC=F.object({id:F.uuid(),name:F.string(),emailAddress:F.string(),avatarUrl:F.string().nullable(),orcid:F.string().nullable(),phone:F.string().nullable(),lattesUrl:F.string().nullable(),role:F.nativeEnum(de)}),KC=F.object({id:F.uuid(),role:F.string(),description:F.string().nullable(),order:F.number(),teamId:F.uuid(),userId:F.uuid(),createdAt:F.date(),updatedAt:F.date(),user:ZC}),pg=F.object({id:F.uuid(),name:F.string(),description:F.string().nullable(),createdAt:F.date(),updatedAt:F.date(),members:F.array(KC)}),cg={method:"post",path:"/management-team",tags:["Management Teams"],summary:"Create a new Management Team with multiple members",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:Op}}}},responses:{201:{description:"Management Team created successfully",summary:"Management Team Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:F.object({errors:F.record(F.string(),F.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:F.object({message:F.string()})}}},409:{description:"Management Team with this name already exists",summary:"Conflict",content:{"application/json":{schema:F.object({message:F.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:F.object({message:F.string()})}}}}},dg={method:"get",path:"/management-team",tags:["Management Teams"],summary:"List all Management Teams with filters",request:{query:F.object({name:F.string().optional(),description:F.string().optional(),orderBy:F.enum(["asc","desc"]).optional()})},responses:{200:{description:"List of Management Teams retrieved successfully",summary:"Management Teams Retrieved",content:{"application/json":{schema:F.object({teams:F.array(pg)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:F.object({message:F.string()})}}}}},lg={method:"get",path:"/management-team/{id}",tags:["Management Teams"],summary:"Find Management Team by ID",request:{params:is},responses:{200:{description:"Management Team details retrieved successfully",summary:"Management Team Retrieved",content:{"application/json":{schema:pg}}},400:{description:"Invalid Management Team ID format",summary:"Validation Error",content:{"application/json":{schema:F.object({errors:F.record(F.string(),F.string())})}}},404:{description:"Management Team not found with the provided ID",summary:"Management Team Not Found",content:{"application/json":{schema:F.object({message:F.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:F.object({message:F.string()})}}}}},ug={method:"put",path:"/management-team/{id}",tags:["Management Teams"],summary:"Update Management Team and manage member relationships",security:[{bearerAuth:[]}],request:{params:is,body:{content:{"application/json":{schema:Gp.omit({id:!0})}}}},responses:{200:{description:"Management Team updated successfully",summary:"Management Team Updated"},400:{description:"Invalid input data or Management Team ID format",summary:"Validation Error",content:{"application/json":{schema:F.object({errors:F.record(F.string(),F.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:F.object({message:F.string()})}}},404:{description:"Management Team not found with the provided ID",summary:"Management Team Not Found",content:{"application/json":{schema:F.object({message:F.string()})}}},409:{description:"Management Team with this name already exists",summary:"Conflict",content:{"application/json":{schema:F.object({message:F.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:F.object({message:F.string()})}}}}},gg={method:"delete",path:"/management-team/{id}",tags:["Management Teams"],summary:"Delete Management Team",security:[{bearerAuth:[]}],request:{params:qp},responses:{200:{description:"Management Team deleted successfully",summary:"Management Team Deleted"},400:{description:"Invalid Management Team ID format",summary:"Validation Error",content:{"application/json":{schema:F.object({errors:F.record(F.string(),F.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:F.object({message:F.string()})}}},404:{description:"Management Team not found with the provided ID",summary:"Management Team Not Found",content:{"application/json":{schema:F.object({message:F.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:F.object({message:F.string()})}}}}};import $ from"zod";import{extendZodWithOpenApi as JC}from"@asteasolutions/zod-to-openapi";import St from"zod";var fg=10,yg=1024,YC=yg*yg,XC=fg*YC;JC(St);var Lp=St.object({title:St.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio"),publishedAt:St.coerce.date(),meetingId:St.uuid(),document:St.any().refine(i=>i==null||typeof i!="object"||typeof i.size!="number"?!1:i.size<=XC,`O documento deve ter no m\xE1ximo ${fg}MB.`)}),ss=class{constructor(e,t,r){this.meetingMinuteRepository=e;this.meetingRepository=t;this.firebaseStorageService=r}async handle(e,t){try{let{title:r,publishedAt:o,meetingId:s,document:n}=Lp.parse({...e.body,...e.params,document:e.file});if(!await this.meetingRepository.findById(s))throw new c("A reuni\xE3o n\xE3o existe.");if(await this.meetingMinuteRepository.findByMeetingId(s))throw new a("Esta reuni\xE3o j\xE1 possui uma ata.");let d=await this.meetingMinuteRepository.create({title:r,publishedAt:o,meetingId:s,documentUrl:""}),f=await this.firebaseStorageService.uploadFile({file:n,id:d.id,folder:E.MEETING_MINUTE});return await this.meetingMinuteRepository.update({id:d.id,documentUrl:f}),t.sendStatus(201)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as QC}from"@asteasolutions/zod-to-openapi";import _p from"zod";QC(_p);var di=_p.object({meetingId:_p.uuid()}),ns=class{constructor(e){this.meetingMinuteRepository=e}async handle(e,t){try{let{meetingId:r}=di.parse({meetingId:e.params.meetingId}),o=await this.meetingMinuteRepository.findByMeetingId(r);return t.status(200).json(o)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as eT}from"@asteasolutions/zod-to-openapi";import At from"zod";var Rg=10,hg=1024,rT=hg*hg,tT=Rg*rT;eT(At);var Wp=At.object({meetingId:At.uuid(),title:At.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio").optional(),publishedAt:At.coerce.date().optional(),document:At.any().refine(i=>i==null?!0:typeof i!="object"||typeof i.size!="number"?!1:i.size<=tT,`O documento deve ter no m\xE1ximo ${Rg}MB.`).optional()}),as=class{constructor(e,t){this.meetingMinuteRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{meetingId:r,title:o,publishedAt:s,document:n}=Wp.parse({meetingId:e.params.meetingId,...e.body,document:e.file}),m=await this.meetingMinuteRepository.findByMeetingId(r);if(!m)throw new c("A ata n\xE3o existe para esta reuni\xE3o.");let p=m.documentUrl;return n&&(m.documentUrl&&await this.firebaseStorageService.deleteFile({fileUrl:m.documentUrl}),p=await this.firebaseStorageService.uploadFile({file:n,id:m.id,folder:E.MEETING_MINUTE})),await this.meetingMinuteRepository.update({id:m.id,title:o,publishedAt:s,documentUrl:p??void 0}),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var iT=$.object({id:$.uuid(),title:$.string(),scheduledAt:$.date(),format:$.enum(ki),agenda:$.string(),meetingLink:$.string().nullable(),location:$.string().nullable(),status:$.enum(Oi),createdAt:$.date(),updatedAt:$.date()}),oT=$.object({id:$.uuid(),title:$.string(),publishedAt:$.date(),documentUrl:$.string(),meetingId:$.uuid(),meeting:iT,createdAt:$.date(),updatedAt:$.date()}),Pg={method:"post",path:"/meeting/{meetingId}/minute",tags:["Meetings"],summary:"Create a new meeting minute with document upload",security:[{bearerAuth:[]}],request:{params:$.object({meetingId:$.uuid()}),body:{content:{"multipart/form-data":{schema:Lp.omit({meetingId:!0})}}}},responses:{201:{description:"Meeting minute created successfully",summary:"Meeting Minute Created"},400:{description:"Invalid input data, missing required fields, or invalid document format/size",summary:"Validation Error",content:{"application/json":{schema:$.object({errors:$.record($.string(),$.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:$.object({message:$.string()})}}},404:{description:"Meeting not found with the provided ID",summary:"Meeting Not Found",content:{"application/json":{schema:$.object({message:$.string()})}}},409:{description:"Meeting already has a minute",summary:"Conflict",content:{"application/json":{schema:$.object({message:$.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:$.object({message:$.string()})}}}}},bg={method:"get",path:"/meeting/{meetingId}/minute",tags:["Meetings"],summary:"Find meeting minute by meeting ID",request:{params:di},responses:{200:{description:"Meeting minute retrieved successfully by meeting ID",summary:"Meeting Minute Retrieved by Meeting ID",content:{"application/json":{schema:oT.nullable()}}},400:{description:"Invalid meeting ID parameter provided",summary:"Validation Error",content:{"application/json":{schema:$.object({errors:$.record($.string(),$.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:$.object({message:$.string()})}}}}},Ig={method:"put",path:"/meeting/{meetingId}/minute",tags:["Meetings"],summary:"Update meeting minute with optional document upload",security:[{bearerAuth:[]}],request:{params:di,body:{content:{"multipart/form-data":{schema:Wp.omit({meetingId:!0})}}}},responses:{200:{description:"Meeting minute updated successfully",summary:"Meeting Minute Updated"},400:{description:"Invalid input data, meeting minute ID format, or invalid document format/size",summary:"Validation Error",content:{"application/json":{schema:$.object({errors:$.record($.string(),$.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:$.object({message:$.string()})}}},404:{description:"Meeting minute not found with the provided ID",summary:"Meeting Minute Not Found",content:{"application/json":{schema:$.object({message:$.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:$.object({message:$.string()})}}}}},Cg={method:"delete",path:"/meeting/{meetingId}/minute",tags:["Meetings"],summary:"Delete meeting minute",security:[{bearerAuth:[]}],request:{params:di},responses:{200:{description:"Meeting minute deleted successfully",summary:"Meeting Minute Deleted"},400:{description:"Invalid meeting minute ID format",summary:"Validation Error",content:{"application/json":{schema:$.object({errors:$.record($.string(),$.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:$.object({message:$.string()})}}},404:{description:"Meeting minute not found with the provided ID",summary:"Meeting Minute Not Found",content:{"application/json":{schema:$.object({message:$.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:$.object({message:$.string()})}}}}};import U from"zod";import{extendZodWithOpenApi as sT}from"@asteasolutions/zod-to-openapi";import{MeetingFormat as ms,MeetingStatus as Hp}from"@prisma/client";import Ne from"zod";sT(Ne);var $p=Ne.object({title:Ne.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio"),scheduledAt:Ne.coerce.date(),format:Ne.enum(ms).default(ms.ONLINE),agenda:Ne.string().min(1,"Pauta \xE9 obrigat\xF3ria"),meetingLink:Ne.union([Ne.url("Link da reuni\xE3o deve ser uma URL v\xE1lida"),Ne.literal("")]),location:Ne.string().optional(),status:Ne.enum(Hp).default(Hp.PENDING)}).refine(i=>i.format===ms.ONLINE?!!i.meetingLink:i.format===ms.IN_PERSON?!!i.location:!0,{message:"Reuni\xF5es online devem ter link e reuni\xF5es presenciais devem ter localiza\xE7\xE3o",path:["format"]}),ps=class{constructor(e){this.meetingRepository=e}async handle(e,t){try{let{title:r,scheduledAt:o,format:s,agenda:n,meetingLink:m,location:p,status:d}=$p.parse(e.body);return await this.meetingRepository.create({title:r,scheduledAt:o,format:s,agenda:n,meetingLink:m||void 0,location:p||void 0,status:d??Hp.PENDING}),t.sendStatus(201)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as nT}from"@asteasolutions/zod-to-openapi";import Vp from"zod";nT(Vp);var zp=Vp.object({id:Vp.uuid()}),cs=class{constructor(e){this.meetingRepository=e}async handle(e,t){try{let{id:r}=zp.parse({id:e.params.id});if(!await this.meetingRepository.findById(r))throw new c("A reuni\xE3o n\xE3o existe.");return await this.meetingRepository.deleteById(r),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as aT}from"@asteasolutions/zod-to-openapi";import Zp from"zod";aT(Zp);var ls=Zp.object({id:Zp.uuid()}),ds=class{constructor(e){this.meetingRepository=e}async handle(e,t){try{let{id:r}=ls.parse({id:e.params.id}),o=await this.meetingRepository.findById(r);if(!o)throw new c("A reuni\xE3o n\xE3o existe.");return t.status(200).json(o)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as mT}from"@asteasolutions/zod-to-openapi";import{MeetingStatus as pT}from"@prisma/client";import Kp from"zod";mT(Kp);var Jp=Kp.object({status:Kp.enum(pT)}),us=class{constructor(e){this.meetingRepository=e}async handle(e,t){try{let{status:r}=Jp.parse({status:e.params.status}),o=await this.meetingRepository.findByStatus(r);return t.status(200).json(o)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as cT}from"@asteasolutions/zod-to-openapi";import{MeetingFormat as dT,MeetingStatus as lT}from"@prisma/client";import Tr from"zod";var uT=1,gT=10;cT(Tr);var Yp=Tr.object({page:Tr.coerce.number().min(1).default(uT),limit:Tr.coerce.number().min(1).default(gT),title:Tr.string().optional(),format:Tr.enum(dT).optional(),status:Tr.enum(lT).optional(),orderBy:Tr.enum(["asc","desc"]).optional()}),gs=class{constructor(e){this.meetingRepository=e}async handle(e,t){try{let{page:r,limit:o,...s}=Yp.parse(e.query),n=o*r-o,[m,p]=await Promise.all([this.meetingRepository.find({pagination:{offset:n,limit:o},filter:s}),this.meetingRepository.count({filter:s})]),d=Math.max(Math.ceil(p/o),1);t.status(200).json({page:r,totalPages:d,offset:n,limit:o,meetings:m})}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as yT}from"@asteasolutions/zod-to-openapi";import{MeetingFormat as fT,MeetingStatus as hT}from"@prisma/client";import Fe from"zod";yT(Fe);var Xp=Fe.object({id:Fe.uuid(),title:Fe.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio").optional(),scheduledAt:Fe.coerce.date().optional(),format:Fe.enum(fT).optional(),agenda:Fe.string().min(1,"Pauta \xE9 obrigat\xF3ria").optional(),meetingLink:Fe.union([Fe.url("Link da reuni\xE3o deve ser uma URL v\xE1lida"),Fe.literal("")]),location:Fe.string().optional(),status:Fe.enum(hT).optional()}),ys=class{constructor(e){this.meetingRepository=e}async handle(e,t){try{let{id:r,title:o,scheduledAt:s,format:n,agenda:m,meetingLink:p,location:d,status:f}=Xp.parse({id:e.params.id,...e.body});if(!await this.meetingRepository.findById(r))throw new c("A reuni\xE3o n\xE3o existe.");return await this.meetingRepository.update({id:r,title:o,scheduledAt:s,format:n,agenda:m,meetingLink:p||void 0,location:d||void 0,status:f}),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var RT=U.object({id:U.uuid(),title:U.string(),publishedAt:U.date(),documentUrl:U.string(),meetingId:U.uuid(),createdAt:U.date(),updatedAt:U.date()}),Qp=U.object({id:U.uuid(),title:U.string(),scheduledAt:U.date(),format:U.enum(ki),agenda:U.string(),meetingLink:U.string().nullable(),location:U.string().nullable(),status:U.enum(Oi),minutes:RT.nullable(),createdAt:U.date(),updatedAt:U.date()}),Tg={method:"post",path:"/meeting",tags:["Meetings"],summary:"Create a new meeting",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:$p}}}},responses:{201:{description:"Meeting created successfully",summary:"Meeting Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:U.object({errors:U.record(U.string(),U.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:U.object({message:U.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:U.object({message:U.string()})}}}}},Sg={method:"get",path:"/meeting",tags:["Meetings"],summary:"List all meetings with pagination and filters",request:{query:Yp},responses:{200:{description:"List of meetings retrieved successfully with pagination",summary:"Meetings Retrieved",content:{"application/json":{schema:U.object({page:U.number(),totalPages:U.number(),offset:U.number(),limit:U.number(),meetings:U.array(Qp)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:U.object({errors:U.record(U.string(),U.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:U.object({message:U.string()})}}}}},Ag={method:"get",path:"/meeting/{id}",tags:["Meetings"],summary:"Find meeting by ID",request:{params:ls},responses:{200:{description:"Meeting details retrieved successfully",summary:"Meeting Retrieved",content:{"application/json":{schema:Qp}}},400:{description:"Invalid meeting ID format",summary:"Validation Error",content:{"application/json":{schema:U.object({errors:U.record(U.string(),U.string())})}}},404:{description:"Meeting not found with the provided ID",summary:"Meeting Not Found",content:{"application/json":{schema:U.object({message:U.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:U.object({message:U.string()})}}}}},Eg={method:"get",path:"/meeting/status/{status}",tags:["Meetings"],summary:"Find meetings by status",request:{params:Jp},responses:{200:{description:"Meetings retrieved successfully by status",summary:"Meetings Retrieved by Status",content:{"application/json":{schema:U.array(Qp)}}},400:{description:"Invalid status parameter provided",summary:"Validation Error",content:{"application/json":{schema:U.object({errors:U.record(U.string(),U.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:U.object({message:U.string()})}}}}},wg={method:"put",path:"/meeting/{id}",tags:["Meetings"],summary:"Update meeting",security:[{bearerAuth:[]}],request:{params:ls,body:{content:{"application/json":{schema:Xp.omit({id:!0})}}}},responses:{200:{description:"Meeting updated successfully",summary:"Meeting Updated"},400:{description:"Invalid input data or meeting ID format",summary:"Validation Error",content:{"application/json":{schema:U.object({errors:U.record(U.string(),U.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:U.object({message:U.string()})}}},404:{description:"Meeting not found with the provided ID",summary:"Meeting Not Found",content:{"application/json":{schema:U.object({message:U.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:U.object({message:U.string()})}}}}},Mg={method:"delete",path:"/meeting/{id}",tags:["Meetings"],summary:"Delete meeting",security:[{bearerAuth:[]}],request:{params:zp},responses:{200:{description:"Meeting deleted successfully",summary:"Meeting Deleted"},400:{description:"Invalid meeting ID format",summary:"Validation Error",content:{"application/json":{schema:U.object({errors:U.record(U.string(),U.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:U.object({message:U.string()})}}},404:{description:"Meeting not found with the provided ID",summary:"Meeting Not Found",content:{"application/json":{schema:U.object({message:U.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:U.object({message:U.string()})}}}}};import O from"zod";import{extendZodWithOpenApi as PT}from"@asteasolutions/zod-to-openapi";import Ae from"zod";var vg=2,xg=1024,bT=xg*xg,IT=vg*bT;PT(Ae);var ec=Ae.object({name:Ae.string().min(1,"Nome \xE9 obrigat\xF3rio"),logo:Ae.any().refine(i=>i==null||typeof i!="object"||typeof i.size!="number"?!1:i.size<=IT,`A imagem deve ter no m\xE1ximo ${vg}MB.`),city:Ae.string().optional(),state:Ae.string().optional(),country:Ae.string().optional(),description:Ae.string().optional(),website:Ae.url("URL do site deve ser v\xE1lida").optional(),email:Ae.email("Email deve ser v\xE1lido").optional(),phone:Ae.string().optional(),address:Ae.string().optional(),functioning:Ae.string().optional()}),fs=class{constructor(e,t){this.museumRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{name:r,logo:o,city:s,state:n,country:m,description:p,website:d,email:f,phone:T,address:v,functioning:X}=ec.parse({...e.body,logo:e.file}),ie=await this.museumRepository.create({name:r,city:s,state:n,country:m,description:p,website:d,email:f,phone:T,address:v,functioning:X}),ce=await this.firebaseStorageService.uploadFile({file:o,id:ie.id,folder:E.MUSEUM});return await this.museumRepository.update({id:ie.id,logoUrl:ce}),t.sendStatus(201)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as CT}from"@asteasolutions/zod-to-openapi";import rc from"zod";CT(rc);var tc=rc.object({id:rc.uuid()}),hs=class{constructor(e,t){this.museumRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{id:r}=tc.parse({id:e.params.id}),o=await this.museumRepository.findById(r);if(!o)throw new c("O museu n\xE3o existe.");return o.logoUrl&&this.firebaseStorageService.deleteFile({fileUrl:o.logoUrl}),await this.museumRepository.deleteById(r),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as TT}from"@asteasolutions/zod-to-openapi";import ic from"zod";TT(ic);var Ps=ic.object({id:ic.uuid()}),Rs=class{constructor(e){this.museumRepository=e}async handle(e,t){try{let{id:r}=Ps.parse({id:e.params.id}),o=await this.museumRepository.findById(r);if(!o)throw new c("O museu n\xE3o existe.");return t.status(200).json(o)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as ST}from"@asteasolutions/zod-to-openapi";import rr from"zod";var AT=1,ET=9;ST(rr);var oc=rr.object({page:rr.coerce.number().min(1).default(AT),limit:rr.coerce.number().min(1).default(ET),name:rr.string().optional(),city:rr.string().optional(),state:rr.string().optional(),country:rr.string().optional(),orderBy:rr.enum(["asc","desc"]).optional()}),bs=class{constructor(e){this.museumRepository=e}async handle(e,t){try{let{page:r,limit:o,...s}=oc.parse(e.query),n=o*r-o,[m,p]=await Promise.all([this.museumRepository.find({pagination:{offset:n,limit:o},filter:s}),this.museumRepository.count({filter:s})]),d=Math.max(Math.ceil(p/o),1);t.status(200).json({page:r,totalPages:d,offset:n,limit:o,museums:m})}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as wT}from"@asteasolutions/zod-to-openapi";import Ce from"zod";var jg=2,Ug=1024,MT=Ug*Ug,xT=jg*MT;wT(Ce);var sc=Ce.object({id:Ce.uuid(),name:Ce.string().min(1,"Nome \xE9 obrigat\xF3rio").optional(),logo:Ce.any().refine(i=>i==null?!0:typeof i!="object"||typeof i.size!="number"?!1:i.size<=xT,`A imagem deve ter no m\xE1ximo ${jg}MB.`).optional(),city:Ce.string().optional(),state:Ce.string().optional(),country:Ce.string().optional(),description:Ce.string().optional(),website:Ce.url("URL do site deve ser v\xE1lida").optional(),email:Ce.string().email("Email deve ser v\xE1lido").optional(),phone:Ce.string().optional(),address:Ce.string().optional(),functioning:Ce.string().optional()}),Is=class{constructor(e,t){this.museumRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{id:r,name:o,logo:s,city:n,state:m,country:p,description:d,website:f,email:T,phone:v,address:X,functioning:ie}=sc.parse({id:e.params.id,...e.body,logo:e.file}),ce=await this.museumRepository.findById(r);if(!ce)throw new c("O museu n\xE3o existe.");let Re=ce.logoUrl;if(s&&(Re=await this.firebaseStorageService.uploadFile({file:s,id:r,folder:"images/museums"})),!Re)throw new a("Logo URL \xE9 obrigat\xF3rio");return await this.museumRepository.update({id:r,name:o,logoUrl:Re,city:n,state:m,country:p,description:d,website:f,email:T,phone:v,address:X,functioning:ie}),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var Fg=O.object({id:O.uuid(),logoUrl:O.string().nullable(),name:O.string(),city:O.string().nullable(),state:O.string().nullable(),country:O.string().nullable(),description:O.string().nullable(),website:O.string().nullable(),email:O.string().nullable(),phone:O.string().nullable(),address:O.string().nullable(),functioning:O.string().nullable(),createdAt:O.date(),updatedAt:O.date()}),Dg={method:"post",path:"/museum",tags:["Museums"],summary:"Create a new museum with logo upload",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:ec}}}},responses:{201:{description:"Museum created successfully",summary:"Museum Created"},400:{description:"Invalid input data, missing required fields, or invalid logo format/size",summary:"Validation Error",content:{"application/json":{schema:O.object({errors:O.record(O.string(),O.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:O.object({message:O.string()})}}},409:{description:"Museum with this name already exists",summary:"Conflict",content:{"application/json":{schema:O.object({message:O.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:O.object({message:O.string()})}}}}},kg={method:"get",path:"/museum",tags:["Museums"],summary:"List all museums with pagination and filters",request:{query:oc},responses:{200:{description:"List of museums retrieved successfully with pagination",summary:"Museums Retrieved",content:{"application/json":{schema:O.object({page:O.number(),totalPages:O.number(),offset:O.number(),limit:O.number(),museums:O.array(Fg)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:O.object({errors:O.record(O.string(),O.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:O.object({message:O.string()})}}}}},Og={method:"get",path:"/museum/{id}",tags:["Museums"],summary:"Find museum by ID",request:{params:Ps},responses:{200:{description:"Museum details retrieved successfully",summary:"Museum Retrieved",content:{"application/json":{schema:Fg}}},400:{description:"Invalid museum ID format",summary:"Validation Error",content:{"application/json":{schema:O.object({errors:O.record(O.string(),O.string())})}}},404:{description:"Museum not found with the provided ID",summary:"Museum Not Found",content:{"application/json":{schema:O.object({message:O.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:O.object({message:O.string()})}}}}},Bg={method:"put",path:"/museum/{id}",tags:["Museums"],summary:"Update museum with optional logo upload",security:[{bearerAuth:[]}],request:{params:Ps,body:{content:{"multipart/form-data":{schema:sc.omit({id:!0})}}}},responses:{200:{description:"Museum updated successfully",summary:"Museum Updated"},400:{description:"Invalid input data, museum ID format, or invalid logo format/size",summary:"Validation Error",content:{"application/json":{schema:O.object({errors:O.record(O.string(),O.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:O.object({message:O.string()})}}},404:{description:"Museum not found with the provided ID",summary:"Museum Not Found",content:{"application/json":{schema:O.object({message:O.string()})}}},409:{description:"Museum with this name already exists",summary:"Conflict",content:{"application/json":{schema:O.object({message:O.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:O.object({message:O.string()})}}}}},qg={method:"delete",path:"/museum/{id}",tags:["Museums"],summary:"Delete museum",security:[{bearerAuth:[]}],request:{params:tc},responses:{200:{description:"Museum deleted successfully",summary:"Museum Deleted"},400:{description:"Invalid museum ID format",summary:"Validation Error",content:{"application/json":{schema:O.object({errors:O.record(O.string(),O.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:O.object({message:O.string()})}}},404:{description:"Museum not found with the provided ID",summary:"Museum Not Found",content:{"application/json":{schema:O.object({message:O.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:O.object({message:O.string()})}}}}};import k from"zod";import{extendZodWithOpenApi as vT}from"@asteasolutions/zod-to-openapi";import li from"zod";var UT=5,Ng=1024,jT=Ng*Ng,FT=UT*jT;vT(li);var nc=li.object({title:li.string().min(1),content:li.string().min(1),image:li.any().refine(i=>!i||typeof i=="object"&&typeof i.mimetype=="string"&&i.mimetype.startsWith("image/")&&typeof i.size=="number"&&i.size<=FT,{message:"A imagem deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB."})}),Cs=class{constructor(e,t){this.newsRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{title:r,content:o,image:s}=nc.parse({...e.body,image:e.file}),n=e.user.id,m=await this.firebaseStorageService.uploadFile({file:s,folder:E.NEWS,id:n});await this.newsRepository.create({title:r,content:o,authorId:n,imageUrl:m}),t.sendStatus(201)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as DT}from"@asteasolutions/zod-to-openapi";import Sr from"zod";var kT=1,OT=7;DT(Sr);var Ss=Sr.object({page:Sr.coerce.number().min(1).default(kT),limit:Sr.coerce.number().min(1).default(OT),authorId:Sr.string(),title:Sr.string().optional(),content:Sr.string().optional(),orderBy:Sr.enum(["asc","desc"]).default("desc")}),Ts=class{constructor(e){this.newsRepository=e}async handle(e,t){try{let{page:r,limit:o,authorId:s,...n}=Ss.parse(e.query),m=o*r-o,[p,d]=await Promise.all([this.newsRepository.findByAuthorId({authorId:s,pagination:{offset:m,limit:o},filter:n}),this.newsRepository.count({filter:{authorId:s,...n}})]),f=Math.max(Math.ceil(d/o),1);t.status(200).json({page:r,totalPages:f,offset:m,limit:o,news:p})}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as BT}from"@asteasolutions/zod-to-openapi";import ac from"zod";BT(ac);var mc=ac.object({id:ac.string()}),As=class{constructor(e){this.newsRepository=e}async handle(e,t){try{let{id:r}=mc.parse(e.params),o=await this.newsRepository.findById(r);if(!o)throw new c("Not\xEDcia n\xE3o encontrada.");t.status(200).json(o)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as qT}from"@asteasolutions/zod-to-openapi";import Ar from"zod";var NT=1,GT=9;qT(Ar);var pc=Ar.object({page:Ar.coerce.number().min(1).default(NT),limit:Ar.coerce.number().min(1).default(GT),title:Ar.string().optional(),content:Ar.string().optional(),authorId:Ar.string().optional(),orderBy:Ar.enum(["asc","desc"]).default("desc")}),Es=class{constructor(e){this.newsRepository=e}async handle(e,t){try{let{page:r,limit:o,...s}=pc.parse(e.query),n=o*r-o,[m,p]=await Promise.all([this.newsRepository.find({pagination:{offset:n,limit:o},filter:s}),this.newsRepository.count({filter:s})]),d=Math.max(Math.ceil(p/o),1);t.status(200).json({page:r,totalPages:d,offset:n,limit:o,news:m})}catch(r){if(r instanceof Error)throw new a(r.message)}}};var Gg={method:"post",path:"/news",tags:["News"],summary:"Create news",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:nc}}}},responses:{201:{description:"News article created successfully",summary:"News Created",content:{"application/json":{schema:k.object({message:k.string()})}}},400:{description:"Invalid input data or file format",summary:"Validation Error",content:{"application/json":{schema:k.object({errors:k.record(k.string(),k.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:k.object({message:k.string()})}}}}},Lg={method:"get",path:"/news",tags:["News"],summary:"List news",request:{query:pc},responses:{200:{description:"Paginated list of news articles retrieved successfully",summary:"News Retrieved",content:{"application/json":{schema:k.object({page:k.number(),totalPages:k.number(),offset:k.number(),limit:k.number(),news:k.array(k.object({title:k.string(),content:k.string(),id:k.string(),createdAt:k.date(),updatedAt:k.date(),imageUrl:k.string().nullable()}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:k.object({errors:k.record(k.string(),k.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:k.object({message:k.string()})}}}}},_g={method:"get",path:"/news/{id}",tags:["News"],summary:"Find news by ID",request:{params:mc},responses:{200:{description:"News article details retrieved successfully",summary:"News Retrieved",content:{"application/json":{schema:k.object({page:k.number(),totalPages:k.number(),offset:k.number(),limit:k.number(),news:k.object({title:k.string(),content:k.string(),id:k.string(),createdAt:k.date(),updatedAt:k.date(),imageUrl:k.string().nullable()})})}}},400:{description:"Invalid news ID format",summary:"Validation Error",content:{"application/json":{schema:k.object({errors:k.record(k.string(),k.string())})}}},404:{description:"News article not found with the provided ID",summary:"News Not Found",content:{"application/json":{schema:k.object({message:k.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:k.object({message:k.string()})}}}}},Wg={method:"get",path:"/news/author/{author_id}",tags:["News"],summary:"List news by author",request:{params:Ss.pick({authorId:!0}).transform(()=>({author_id:""})),query:Ss.omit({authorId:!0})},responses:{200:{description:"Paginated list of news articles by author retrieved successfully",summary:"Author News Retrieved",content:{"application/json":{schema:k.object({page:k.number(),totalPages:k.number(),offset:k.number(),limit:k.number(),news:k.array(k.object({title:k.string(),content:k.string(),id:k.string(),createdAt:k.date(),updatedAt:k.date(),imageUrl:k.string().nullable()}))})}}},400:{description:"Invalid author ID or query parameters",summary:"Validation Error",content:{"application/json":{schema:k.object({errors:k.record(k.string(),k.string())})}}},404:{description:"Author not found with the provided ID",summary:"Author Not Found",content:{"application/json":{schema:k.object({message:k.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:k.object({message:k.string()})}}}}};import N from"zod";import{extendZodWithOpenApi as LT}from"@asteasolutions/zod-to-openapi";import ze from"zod";var $g=2,Hg=1024,_T=Hg*Hg,WT=$g*_T;LT(ze);var cc=ze.object({name:ze.string().min(1,"Nome \xE9 obrigat\xF3rio"),logo:ze.any().refine(i=>i==null||typeof i!="object"||typeof i.size!="number"?!1:i.size<=WT,`A imagem deve ter no m\xE1ximo ${$g}MB.`),websiteUrl:ze.url("URL do site deve ser v\xE1lida").optional(),description:ze.string().optional(),category:ze.string().optional(),since:ze.coerce.date(),isActive:ze.preprocess(i=>i==="true",ze.boolean().optional())}),ws=class{constructor(e,t){this.partnerRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{name:r,logo:o,websiteUrl:s,description:n,category:m,since:p,isActive:d}=cc.parse({...e.body,logo:e.file}),f=await this.partnerRepository.create({name:r,websiteUrl:s,description:n,category:m,since:p,isActive:d}),T=await this.firebaseStorageService.uploadFile({file:o,id:f.id,folder:E.PARTNER});return await this.partnerRepository.update({id:f.id,logoUrl:T}),t.sendStatus(201)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as HT}from"@asteasolutions/zod-to-openapi";import dc from"zod";HT(dc);var lc=dc.object({id:dc.uuid()}),Ms=class{constructor(e,t){this.partnerRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{id:r}=lc.parse({id:e.params.id}),o=await this.partnerRepository.findById(r);if(!o)throw new c("O parceiro n\xE3o existe.");return o.logoUrl&&this.firebaseStorageService.deleteFile({fileUrl:o.logoUrl}),await this.partnerRepository.deleteById(r),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as $T}from"@asteasolutions/zod-to-openapi";import uc from"zod";$T(uc);var vs=uc.object({id:uc.uuid()}),xs=class{constructor(e){this.partnerRepository=e}async handle(e,t){try{let{id:r}=vs.parse({id:e.params.id}),o=await this.partnerRepository.findById(r);if(!o)throw new c("O parceiro n\xE3o existe.");return t.status(200).json(o)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as VT}from"@asteasolutions/zod-to-openapi";import tr from"zod";var zT=1,ZT=9;VT(tr);var gc=tr.object({page:tr.coerce.number().min(1).default(zT),limit:tr.coerce.number().min(1).default(ZT),name:tr.string().optional(),description:tr.string().optional(),category:tr.string().optional(),isActive:tr.coerce.boolean().optional(),orderBy:tr.enum(["asc","desc"]).optional()}),Us=class{constructor(e){this.partnerRepository=e}async handle(e,t){try{let{page:r,limit:o,...s}=gc.parse(e.query),n=o*r-o,[m,p]=await Promise.all([this.partnerRepository.find({pagination:{offset:n,limit:o},filter:s}),this.partnerRepository.count({filter:s})]),d=Math.max(Math.ceil(p/o),1);t.status(200).json({page:r,totalPages:d,offset:n,limit:o,partners:m})}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as KT}from"@asteasolutions/zod-to-openapi";import Ge from"zod";var zg=2,Vg=1024,JT=Vg*Vg,YT=zg*JT;KT(Ge);var yc=Ge.object({id:Ge.uuid(),name:Ge.string().min(1,"Nome \xE9 obrigat\xF3rio").optional(),logo:Ge.any().refine(i=>i==null?!0:typeof i!="object"||typeof i.size!="number"?!1:i.size<=YT,`A imagem deve ter no m\xE1ximo ${zg}MB.`).optional(),websiteUrl:Ge.url("URL do site deve ser v\xE1lida").optional(),description:Ge.string().optional(),category:Ge.string().optional(),since:Ge.coerce.date().optional(),isActive:Ge.preprocess(i=>i==="true",Ge.boolean().optional())}),js=class{constructor(e,t){this.partnerRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{id:r,name:o,logo:s,websiteUrl:n,description:m,category:p,since:d,isActive:f}=yc.parse({id:e.params.id,...e.body,logo:e.file}),T=await this.partnerRepository.findById(r);if(!T)throw new c("O parceiro n\xE3o existe.");let v=T.logoUrl;if(s&&(v=await this.firebaseStorageService.uploadFile({file:s,id:r,folder:"images/partners"})),!v)throw new a("Logo URL \xE9 obrigat\xF3rio");return await this.partnerRepository.update({id:r,name:o,logoUrl:v,websiteUrl:n,description:m,category:p,since:d,isActive:f}),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var Zg=N.object({id:N.uuid(),name:N.string(),logoUrl:N.string(),description:N.string().nullable(),category:N.string().nullable(),since:N.date(),isActive:N.boolean(),createdAt:N.date(),updatedAt:N.date()}),Kg={method:"post",path:"/partner",tags:["Partners"],summary:"Create a new partner with logo upload",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:cc}}}},responses:{201:{description:"Partner created successfully",summary:"Partner Created"},400:{description:"Invalid input data, missing required fields, or invalid logo format/size",summary:"Validation Error",content:{"application/json":{schema:N.object({errors:N.record(N.string(),N.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:N.object({message:N.string()})}}},409:{description:"Partner with this name already exists",summary:"Conflict",content:{"application/json":{schema:N.object({message:N.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:N.object({message:N.string()})}}}}},Jg={method:"get",path:"/partner",tags:["Partners"],summary:"List all partners with pagination and filters",request:{query:gc},responses:{200:{description:"List of partners retrieved successfully with pagination",summary:"Partners Retrieved",content:{"application/json":{schema:N.object({page:N.number(),totalPages:N.number(),offset:N.number(),limit:N.number(),partners:N.array(Zg)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:N.object({errors:N.record(N.string(),N.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:N.object({message:N.string()})}}}}},Yg={method:"get",path:"/partner/{id}",tags:["Partners"],summary:"Find partner by ID",request:{params:vs},responses:{200:{description:"Partner details retrieved successfully",summary:"Partner Retrieved",content:{"application/json":{schema:Zg}}},400:{description:"Invalid partner ID format",summary:"Validation Error",content:{"application/json":{schema:N.object({errors:N.record(N.string(),N.string())})}}},404:{description:"Partner not found with the provided ID",summary:"Partner Not Found",content:{"application/json":{schema:N.object({message:N.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:N.object({message:N.string()})}}}}},Xg={method:"put",path:"/partner/{id}",tags:["Partners"],summary:"Update partner with optional logo upload",security:[{bearerAuth:[]}],request:{params:vs,body:{content:{"multipart/form-data":{schema:yc.omit({id:!0})}}}},responses:{200:{description:"Partner updated successfully",summary:"Partner Updated"},400:{description:"Invalid input data, partner ID format, or invalid logo format/size",summary:"Validation Error",content:{"application/json":{schema:N.object({errors:N.record(N.string(),N.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:N.object({message:N.string()})}}},404:{description:"Partner not found with the provided ID",summary:"Partner Not Found",content:{"application/json":{schema:N.object({message:N.string()})}}},409:{description:"Partner with this name already exists",summary:"Conflict",content:{"application/json":{schema:N.object({message:N.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:N.object({message:N.string()})}}}}},Qg={method:"delete",path:"/partner/{id}",tags:["Partners"],summary:"Delete partner",security:[{bearerAuth:[]}],request:{params:lc},responses:{200:{description:"Partner deleted successfully",summary:"Partner Deleted"},400:{description:"Invalid partner ID format",summary:"Validation Error",content:{"application/json":{schema:N.object({errors:N.record(N.string(),N.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:N.object({message:N.string()})}}},404:{description:"Partner not found with the provided ID",summary:"Partner Not Found",content:{"application/json":{schema:N.object({message:N.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:N.object({message:N.string()})}}}}};import L from"zod";import{extendZodWithOpenApi as XT}from"@asteasolutions/zod-to-openapi";import{PendencyStatus as QT}from"@prisma/client";import Er from"zod";XT(Er);var Ds=Er.object({userId:Er.uuid(),title:Er.string().min(1),description:Er.string().optional(),status:Er.enum(QT).default("PENDING"),dueDate:Er.coerce.date().optional(),document:Er.any().refine(i=>i&&typeof i=="object"&&i.size>0,"Arquivo do documento \xE9 obrigat\xF3rio")}),Fs=class{constructor(e,t,r){this.userRepository=e;this.pendencyRepository=t;this.firebaseStorageService=r}async handle(e,t){try{let{userId:r,title:o,description:s,status:n,dueDate:m,document:p}=Ds.parse({...e.body,userId:e.params.user_id,document:e.file});if(!await this.userRepository.findById(r))throw new Pe("O usu\xE1rio n\xE3o existe.");let f=await this.firebaseStorageService.uploadFile({file:p,id:r,folder:E.PENDENCY});return await this.pendencyRepository.create({userId:r,title:o,description:s,status:n,dueDate:m,documentUrl:f}),t.sendStatus(201)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as eS}from"@asteasolutions/zod-to-openapi";import fc from"zod";eS(fc);var hc=fc.object({id:fc.uuid()}),ks=class{constructor(e,t){this.pendencyRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{id:r}=hc.parse({id:e.params.pendency_id}),o=await this.pendencyRepository.findById(r);if(!o)throw new c("A pend\xEAncia n\xE3o existe.");return await Promise.all([this.pendencyRepository.deleteById(o.id),this.firebaseStorageService.deleteFile({fileUrl:o.documentUrl})]),t.sendStatus(204)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as rS}from"@asteasolutions/zod-to-openapi";import{PendencyStatus as tS}from"@prisma/client";import ir from"zod";var iS=1,oS=6;rS(ir);var Rc=ir.object({page:ir.coerce.number().min(1).default(iS),limit:ir.coerce.number().min(1).default(oS),title:ir.string().optional(),description:ir.string().optional(),status:ir.enum(tS).default("PENDING"),userId:ir.uuid().optional(),orderBy:ir.enum(["asc","desc"]).default("desc")}),Os=class{constructor(e){this.pendencyRepository=e}async handle(e,t){try{let{description:r,limit:o,orderBy:s,page:n,title:m,status:p,userId:d}=Rc.parse(e.query),f=n*o-o,[T,v]=await Promise.all([this.pendencyRepository.find({pagination:{offset:f,limit:o},filter:{title:m,description:r,status:p,orderBy:s,userId:d}}),this.pendencyRepository.count({filter:{title:m,description:r,status:p,userId:d}})]),X=Math.max(Math.ceil(v/o),1);return t.status(200).json({page:n,totalPages:X,offset:f,limit:o,pendencies:T})}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as sS}from"@asteasolutions/zod-to-openapi";import Pc from"zod";sS(Pc);var bc=Pc.object({pendencyId:Pc.uuid()}),Bs=class{constructor(e){this.pendencyRepository=e}async handle(e,t){try{let{pendencyId:r}=bc.parse({pendencyId:e.params.pendency_id}),o=await this.pendencyRepository.findById(r);if(!o)throw new c("Pend\xEAncia n\xE3o encontrada.");return t.status(200).json(o)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as nS}from"@asteasolutions/zod-to-openapi";import{PendencyStatus as aS}from"@prisma/client";import wr from"zod";nS(wr);var Ns=wr.object({id:wr.uuid(),title:wr.string().min(1),description:wr.string().optional(),status:wr.enum(aS),dueDate:wr.coerce.date().optional(),document:wr.any().refine(i=>i==null||typeof i=="object"&&typeof i.size=="number"&&(i.size===0||i.size>0),"Arquivo do documento \xE9 inv\xE1lido").optional()}),qs=class{constructor(e,t){this.pendencyRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{document:r,id:o,...s}=Ns.parse({...e.body,id:e.params.pendency_id,document:e.file}),n=await this.pendencyRepository.findById(o);if(!n)throw new Pe("A pend\xEAncia n\xE3o existe");let m=n.documentUrl;return r&&r.size>0&&(m=await this.firebaseStorageService.updateFile({file:r,id:n.userId,folder:E.PENDENCY,fileUrl:n.documentUrl})),await this.pendencyRepository.update({...s,id:o,documentUrl:m}),t.sendStatus(204)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var ey={method:"post",path:"/pendency/{user_id}",tags:["Pendencies"],summary:"Create pendency for user",security:[{bearerAuth:[]}],request:{params:Ds.pick({userId:!0}).transform(()=>({user_id:""})),body:{content:{"multipart/form-data":{schema:Ds.omit({userId:!0})}}}},responses:{201:{description:"Pendency created successfully for the user",summary:"Pendency Created",content:{"application/json":{schema:L.object({})}}},400:{description:"Invalid input data or file format",summary:"Validation Error",content:{"application/json":{schema:L.object({errors:L.record(L.string(),L.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:L.object({message:L.string()})}}}}},ry={method:"get",path:"/pendency",tags:["Pendencies"],summary:"List pendencies",security:[{bearerAuth:[]}],request:{query:Rc},responses:{200:{description:"Paginated list of pendencies retrieved successfully",summary:"Pendencies Retrieved",content:{"application/json":{schema:L.object({page:L.number(),totalPages:L.number(),offset:L.number(),limit:L.number(),pendencies:L.array(L.object({id:L.string(),title:L.string(),description:L.string().nullable(),status:L.nativeEnum(si),dueDate:L.date().nullable(),documentUrl:L.string(),userId:L.string(),createdAt:L.date(),updatedAt:L.date()}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:L.object({errors:L.record(L.string(),L.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:L.object({message:L.string()})}}}}},ty={method:"get",path:"/pendency/{pendency_id}",tags:["Pendencies"],summary:"Find pendency by ID",security:[{bearerAuth:[]}],request:{params:bc},responses:{200:{description:"Pendency details retrieved successfully",summary:"Pendency Retrieved",content:{"application/json":{schema:L.object({id:L.string(),title:L.string(),description:L.string().nullable(),status:L.nativeEnum(si),dueDate:L.date().nullable(),documentUrl:L.string(),userId:L.string(),createdAt:L.date(),updatedAt:L.date()}).nullable()}}},400:{description:"Invalid pendency ID format",summary:"Validation Error",content:{"application/json":{schema:L.object({errors:L.record(L.string(),L.string())})}}},404:{description:"Pendency not found with the provided ID",summary:"Pendency Not Found",content:{"application/json":{schema:L.object({message:L.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:L.object({message:L.string()})}}}}},iy={method:"put",path:"/pendency/{pendency_id}",tags:["Pendencies"],summary:"Update pendency",security:[{bearerAuth:[]}],request:{params:Ns.pick({id:!0}).transform(()=>({pendency_id:""})),body:{content:{"multipart/form-data":{schema:Ns.omit({id:!0})}}}},responses:{204:{description:"Pendency updated successfully",summary:"Pendency Updated"},400:{description:"Invalid input data or pendency does not exist",summary:"Validation Error",content:{"application/json":{schema:L.object({errors:L.record(L.string(),L.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:L.object({message:L.string()})}}}}},oy={method:"delete",path:"/pendency/{pendency_id}",tags:["Pendencies"],summary:"Delete pendency",security:[{bearerAuth:[]}],request:{params:hc},responses:{204:{description:"Pendency deleted successfully",summary:"Pendency Deleted"},400:{description:"Invalid pendency ID format",summary:"Validation Error",content:{"application/json":{schema:L.object({errors:L.record(L.string(),L.string())})}}},404:{description:"Pendency not found with the provided ID",summary:"Pendency Not Found",content:{"application/json":{schema:L.object({message:L.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:L.object({message:L.string()})}}}}};import w from"zod";import{extendZodWithOpenApi as mS}from"@asteasolutions/zod-to-openapi";import Ic from"zod";mS(Ic);var Cc=Ic.object({id:Ic.uuid()}),Gs=class{constructor(e,t){this.postGraduateProgramRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{id:r}=Cc.parse({id:e.params.id}),o=await this.postGraduateProgramRepository.findById(r);if(!o)throw new c("O programa de p\xF3s-gradua\xE7\xE3o n\xE3o existe.");return o.imageUrl&&this.firebaseStorageService.deleteFile({fileUrl:o.imageUrl}),await this.postGraduateProgramRepository.deleteById(r),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as pS}from"@asteasolutions/zod-to-openapi";import Tc from"zod";pS(Tc);var Sc=Tc.object({id:Tc.uuid()}),Ls=class{constructor(e){this.postGraduateProgramRepository=e}async handle(e,t){try{let{id:r}=Sc.parse({id:e.params.id}),o=await this.postGraduateProgramRepository.findById(r);if(!o)throw new c("Programa de p\xF3s-gradua\xE7\xE3o n\xE3o encontrado.");return t.status(200).json(o)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as cS}from"@asteasolutions/zod-to-openapi";import Mr from"zod";var dS=1,lS=6;cS(Mr);var Ac=Mr.object({page:Mr.coerce.number().min(1).default(dS),limit:Mr.coerce.number().min(1).default(lS),title:Mr.string().optional(),description:Mr.string().optional(),contact:Mr.string().optional(),orderBy:Mr.enum(["asc","desc"]).default("desc")}),_s=class{constructor(e){this.postGraduateProgramRepository=e}async handle(e,t){try{let{limit:r,page:o,...s}=Ac.parse(e.query),n=o*r-r,[m,p]=await Promise.all([this.postGraduateProgramRepository.find({pagination:{offset:n,limit:r},filter:s}),this.postGraduateProgramRepository.count({filter:s})]),d=Math.max(Math.ceil(p/r),1);return t.status(200).json({page:o,totalPages:d,offset:n,limit:r,postGraduatePrograms:m})}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as uS}from"@asteasolutions/zod-to-openapi";import Ze from"zod";var ny=5,sy=1024,gS=sy*sy,yS=ny*gS;uS(Ze);var Ec=Ze.object({id:Ze.uuid(),title:Ze.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio.").optional(),description:Ze.string().optional(),startDate:Ze.coerce.date().optional(),endDate:Ze.coerce.date().optional(),contact:Ze.string().min(1,"Contato \xE9 obrigat\xF3rio.").optional(),registrationLink:Ze.url("URL de inscri\xE7\xE3o deve ser v\xE1lida").optional(),image:Ze.any().refine(i=>i==null?!0:typeof i!="object"||typeof i.size!="number"?!1:i.size<=yS,`A imagem deve ter no m\xE1ximo ${ny}MB.`).optional()}),Ws=class{constructor(e,t){this.postGraduateProgramRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{id:r,image:o,title:s,description:n,startDate:m,endDate:p,contact:d,registrationLink:f}=Ec.parse({id:e.params.id,...e.body,image:e.file}),T=await this.postGraduateProgramRepository.findById(r);if(!T)throw new c("O programa de p\xF3s-gradua\xE7\xE3o n\xE3o existe.");let v=T.imageUrl;if(o&&(v=await this.firebaseStorageService.uploadFile({file:o,id:r,folder:E.POST_GRADUATE_PROGRAM})),!v)throw new a("URL da imagem \xE9 obrigat\xF3rio");return await this.postGraduateProgramRepository.update({id:r,title:s,description:n,startDate:m,endDate:p,contact:d,registrationLink:f,imageUrl:v}),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var ay={method:"post",path:"/post-graduate-programs",tags:["Post Graduate Programs"],summary:"Create post-graduate program",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:w.object({title:w.string().min(1).openapi({description:"T\xEDtulo do programa"}),description:w.string().optional().openapi({description:"Descri\xE7\xE3o do programa"}),startDate:w.string().openapi({description:"Data de in\xEDcio (ISO 8601)",example:"2024-01-01T10:00:00Z"}),endDate:w.string().openapi({description:"Data de t\xE9rmino (ISO 8601)",example:"2024-12-31T10:00:00Z"}),contact:w.string().min(1).openapi({description:"Informa\xE7\xF5es de contato"}),registrationLink:w.string().url().optional().openapi({description:"Link de inscri\xE7\xE3o"}),image:w.string().optional().openapi({description:"Imagem do programa (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{201:{description:"Post-graduate program created successfully",summary:"Program Created"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:w.object({errors:w.record(w.string(),w.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:w.object({message:w.string()})}}}}},my={method:"get",path:"/post-graduate-programs",tags:["Post Graduate Programs"],summary:"List post-graduate programs",security:[{bearerAuth:[]}],request:{query:Ac},responses:{200:{description:"Paginated list of post-graduate programs retrieved successfully",summary:"Programs Retrieved",content:{"application/json":{schema:w.object({page:w.number(),totalPages:w.number(),offset:w.number(),limit:w.number(),postGraduatePrograms:w.array(w.object({id:w.string(),title:w.string(),imageUrl:w.string().nullable(),description:w.string().nullable(),startDate:w.date(),endDate:w.date(),contact:w.string(),registrationLink:w.string().nullable(),createdAt:w.date(),updatedAt:w.date()}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:w.object({errors:w.record(w.string(),w.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:w.object({message:w.string()})}}}}},py={method:"get",path:"/post-graduate-programs/{id}",tags:["Post Graduate Programs"],summary:"Find post-graduate program by ID",security:[{bearerAuth:[]}],request:{params:Sc},responses:{200:{description:"Post-graduate program details retrieved successfully",summary:"Program Retrieved",content:{"application/json":{schema:w.object({id:w.string(),title:w.string(),imageUrl:w.string().nullable(),description:w.string().nullable(),startDate:w.date(),endDate:w.date(),contact:w.string(),registrationLink:w.string().nullable(),createdAt:w.date(),updatedAt:w.date()}).nullable()}}},400:{description:"Invalid program ID format",summary:"Validation Error",content:{"application/json":{schema:w.object({errors:w.record(w.string(),w.string())})}}},404:{description:"Post-graduate program not found with the provided ID",summary:"Program Not Found",content:{"application/json":{schema:w.object({message:w.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:w.object({message:w.string()})}}}}},cy={method:"put",path:"/post-graduate-programs/{id}",tags:["Post Graduate Programs"],summary:"Update post-graduate program",security:[{bearerAuth:[]}],request:{params:Ec.pick({id:!0}),body:{content:{"multipart/form-data":{schema:w.object({title:w.string().min(1).optional().openapi({description:"T\xEDtulo do programa"}),description:w.string().optional().openapi({description:"Descri\xE7\xE3o do programa"}),startDate:w.string().optional().openapi({description:"Data de in\xEDcio (ISO 8601)",example:"2024-01-01T10:00:00Z"}),endDate:w.string().optional().openapi({description:"Data de t\xE9rmino (ISO 8601)",example:"2024-12-31T10:00:00Z"}),contact:w.string().min(1).optional().openapi({description:"Informa\xE7\xF5es de contato"}),registrationLink:w.string().url().optional().openapi({description:"Link de inscri\xE7\xE3o"}),image:w.string().optional().openapi({description:"Imagem do programa (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{200:{description:"Post-graduate program updated successfully",summary:"Program Updated"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:w.object({errors:w.record(w.string(),w.string())})}}},404:{description:"Post-graduate program not found with the provided ID",summary:"Program Not Found",content:{"application/json":{schema:w.object({message:w.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:w.object({message:w.string()})}}}}},dy={method:"delete",path:"/post-graduate-programs/{id}",tags:["Post Graduate Programs"],summary:"Delete post-graduate program",security:[{bearerAuth:[]}],request:{params:Cc},responses:{200:{description:"Post-graduate program deleted successfully",summary:"Program Deleted"},400:{description:"Invalid program ID format",summary:"Validation Error",content:{"application/json":{schema:w.object({errors:w.record(w.string(),w.string())})}}},404:{description:"Post-graduate program not found with the provided ID",summary:"Program Not Found",content:{"application/json":{schema:w.object({message:w.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:w.object({message:w.string()})}}}}};import V from"zod";import{extendZodWithOpenApi as fS}from"@asteasolutions/zod-to-openapi";import{RedeCTHighlightType as hS}from"@prisma/client";import or from"zod";var uy=2,ly=1024,RS=ly*ly,PS=uy*RS;fS(or);var wc=or.object({type:or.enum(hS),name:or.string().min(1,"Nome \xE9 obrigat\xF3rio"),image:or.any().refine(i=>i==null||typeof i!="object"||typeof i.size!="number"?!1:i.size<=PS,`A imagem deve ter no m\xE1ximo ${uy}MB.`),description:or.string().optional(),honorableMention:or.string().optional(),honoredAt:or.coerce.date(),meritUrl:or.url("URL do m\xE9rito deve ser v\xE1lida").optional()}),Hs=class{constructor(e,t){this.redectHighlightRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{type:r,name:o,image:s,description:n,honorableMention:m,honoredAt:p,meritUrl:d}=wc.parse({...e.body,image:e.file}),f=await this.redectHighlightRepository.create({type:r,name:o,description:n,honorableMention:m,honoredAt:p,meritUrl:d}),T=await this.firebaseStorageService.uploadFile({file:s,id:f.id,folder:E.REDECT_HIGHLIGHT});return await this.redectHighlightRepository.update({id:f.id,imageUrl:T}),t.sendStatus(201)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as bS}from"@asteasolutions/zod-to-openapi";import Mc from"zod";bS(Mc);var xc=Mc.object({id:Mc.uuid()}),$s=class{constructor(e,t){this.redectHighlightRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{id:r}=xc.parse(e.params),o=await this.redectHighlightRepository.findById(r);if(!o)throw new c("O destaque n\xE3o existe.");return o.imageUrl&&await this.firebaseStorageService.deleteFile({fileUrl:o.imageUrl}),await this.redectHighlightRepository.deleteById(r),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as IS}from"@asteasolutions/zod-to-openapi";import vc from"zod";IS(vc);var zs=vc.object({id:vc.uuid()}),Vs=class{constructor(e){this.redectHighlightRepository=e}async handle(e,t){try{let{id:r}=zs.parse(e.params),o=await this.redectHighlightRepository.findById(r);if(!o)throw new c("Destaque n\xE3o encontrado.");return t.status(200).json(o)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as CS}from"@asteasolutions/zod-to-openapi";import sr from"zod";var TS=1,SS=9;CS(sr);var Uc=sr.object({page:sr.coerce.number().min(1).default(TS),limit:sr.coerce.number().min(1).default(SS),name:sr.string().optional(),type:sr.enum(["PERSON","INSTITUTION"]).optional(),description:sr.string().optional(),honorableMention:sr.string().optional(),orderBy:sr.enum(["asc","desc"]).optional()}),Zs=class{constructor(e){this.redectHighlightRepository=e}async handle(e,t){try{let{page:r,limit:o,...s}=Uc.parse(e.query),n=o*r-o,[m,p]=await Promise.all([this.redectHighlightRepository.find({pagination:{offset:n,limit:o},filter:s}),this.redectHighlightRepository.count({filter:s})]),d=Math.max(Math.ceil(p/o),1);t.status(200).json({page:r,totalPages:d,offset:n,limit:o,highlights:m})}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as AS}from"@asteasolutions/zod-to-openapi";import Ke from"zod";var yy=2,gy=1024,ES=gy*gy,wS=yy*ES;AS(Ke);var jc=Ke.object({id:Ke.uuid(),type:Ke.enum(["PERSON","INSTITUTION"]).optional(),name:Ke.string().min(1,"Nome \xE9 obrigat\xF3rio").optional(),image:Ke.any().refine(i=>i==null?!0:typeof i!="object"||typeof i.size!="number"?!1:i.size<=wS,`A imagem deve ter no m\xE1ximo ${yy}MB.`).optional(),description:Ke.string().optional(),honorableMention:Ke.string().optional(),honoredAt:Ke.coerce.date().optional(),meritUrl:Ke.url("URL do m\xE9rito deve ser v\xE1lida").optional()}),Ks=class{constructor(e,t){this.redectHighlightRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{id:r,type:o,name:s,image:n,description:m,honorableMention:p,honoredAt:d,meritUrl:f}=jc.parse({id:e.params.id,...e.body,image:e.file}),T=await this.redectHighlightRepository.findById(r);if(!T)throw new c("O destaque n\xE3o existe.");let v=T.imageUrl;if(n&&(v=await this.firebaseStorageService.uploadFile({file:n,id:r,folder:"images/redect-highlights"})),!v)throw new a("URL da imagem \xE9 obrigat\xF3ria");return await this.redectHighlightRepository.update({id:r,type:o,name:s,imageUrl:v,description:m,honorableMention:p,honoredAt:d,meritUrl:f}),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var fy=V.object({id:V.uuid(),type:V.enum(["PERSON","INSTITUTION"]),name:V.string(),description:V.string().nullable(),honorableMention:V.string().nullable(),imageUrl:V.string().nullable(),honoredAt:V.date(),meritUrl:V.string().nullable(),createdAt:V.date(),updatedAt:V.date()}),hy={method:"post",path:"/redect-highlight",tags:["RedeCT Highlights"],summary:"Create a new RedeCT highlight with image upload",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:wc}}}},responses:{201:{description:"RedeCT highlight created successfully",summary:"Highlight Created"},400:{description:"Invalid input data, missing required fields, or invalid image format/size",summary:"Validation Error",content:{"application/json":{schema:V.object({errors:V.record(V.string(),V.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:V.object({message:V.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:V.object({message:V.string()})}}}}},Ry={method:"get",path:"/redect-highlight",tags:["RedeCT Highlights"],summary:"List all RedeCT highlights with pagination and filters",request:{query:Uc},responses:{200:{description:"List of RedeCT highlights retrieved successfully with pagination",summary:"Highlights Retrieved",content:{"application/json":{schema:V.object({page:V.number(),totalPages:V.number(),offset:V.number(),limit:V.number(),highlights:V.array(fy)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:V.object({errors:V.record(V.string(),V.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:V.object({message:V.string()})}}}}},Py={method:"get",path:"/redect-highlight/{id}",tags:["RedeCT Highlights"],summary:"Find RedeCT highlight by ID",request:{params:zs},responses:{200:{description:"RedeCT highlight details retrieved successfully",summary:"Highlight Retrieved",content:{"application/json":{schema:fy}}},400:{description:"Invalid highlight ID format",summary:"Validation Error",content:{"application/json":{schema:V.object({errors:V.record(V.string(),V.string())})}}},404:{description:"RedeCT highlight not found with the provided ID",summary:"Highlight Not Found",content:{"application/json":{schema:V.object({message:V.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:V.object({message:V.string()})}}}}},by={method:"put",path:"/redect-highlight/{id}",tags:["RedeCT Highlights"],summary:"Update RedeCT highlight with optional image upload",security:[{bearerAuth:[]}],request:{params:zs,body:{content:{"multipart/form-data":{schema:jc.omit({id:!0})}}}},responses:{200:{description:"RedeCT highlight updated successfully",summary:"Highlight Updated"},400:{description:"Invalid input data, highlight ID format, or invalid image format/size",summary:"Validation Error",content:{"application/json":{schema:V.object({errors:V.record(V.string(),V.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:V.object({message:V.string()})}}},404:{description:"RedeCT highlight not found with the provided ID",summary:"Highlight Not Found",content:{"application/json":{schema:V.object({message:V.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:V.object({message:V.string()})}}}}},Iy={method:"delete",path:"/redect-highlight/{id}",tags:["RedeCT Highlights"],summary:"Delete RedeCT highlight",security:[{bearerAuth:[]}],request:{params:xc},responses:{200:{description:"RedeCT highlight deleted successfully",summary:"Highlight Deleted"},400:{description:"Invalid highlight ID format",summary:"Validation Error",content:{"application/json":{schema:V.object({errors:V.record(V.string(),V.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:V.object({message:V.string()})}}},404:{description:"RedeCT highlight not found with the provided ID",summary:"Highlight Not Found",content:{"application/json":{schema:V.object({message:V.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:V.object({message:V.string()})}}}}};import z from"zod";import{extendZodWithOpenApi as MS}from"@asteasolutions/zod-to-openapi";import ui from"zod";MS(ui);var Fc=ui.object({role:ui.string().min(1),description:ui.string().optional(),userId:ui.uuid()}),Js=class{constructor(e){this.referenceCenterTeamMemberRepository=e}async handle(e,t){try{let{role:r,description:o,userId:s}=Fc.parse(e.body);return await this.referenceCenterTeamMemberRepository.create({role:r,description:o,userId:s}),t.sendStatus(201)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as xS}from"@asteasolutions/zod-to-openapi";import Dc from"zod";xS(Dc);var kc=Dc.object({id:Dc.uuid()}),Ys=class{constructor(e){this.referenceCenterTeamMemberRepository=e}async handle(e,t){try{let{id:r}=kc.parse({id:e.params.id});if(!await this.referenceCenterTeamMemberRepository.findById(r))throw new c("O membro do centro de refer\xEAncia n\xE3o existe.");return await this.referenceCenterTeamMemberRepository.deleteById(r),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as vS}from"@asteasolutions/zod-to-openapi";import Oc from"zod";vS(Oc);var Qs=Oc.object({id:Oc.uuid()}),Xs=class{constructor(e){this.referenceCenterTeamMemberRepository=e}async handle(e,t){try{let{id:r}=Qs.parse({id:e.params.id}),o=await this.referenceCenterTeamMemberRepository.findById(r);if(!o)throw new c("O membro do centro de refer\xEAncia n\xE3o existe.");return t.status(200).json(o)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as US}from"@asteasolutions/zod-to-openapi";import Et from"zod";US(Et);var Bc=Et.object({id:Et.uuid(),role:Et.string().min(1).optional(),description:Et.string().optional(),userId:Et.uuid().optional()}),en=class{constructor(e){this.referenceCenterTeamMemberRepository=e}async handle(e,t){try{let{id:r,role:o,description:s,userId:n}=Bc.parse({id:e.params.id,...e.body});if(!await this.referenceCenterTeamMemberRepository.findById(r))throw new c("O membro do centro de refer\xEAncia n\xE3o existe.");return await this.referenceCenterTeamMemberRepository.update({id:r,role:o,description:s,userId:n}),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var jS=z.object({id:z.uuid(),name:z.string(),emailAddress:z.string(),avatarUrl:z.string().nullable(),orcid:z.string().nullable(),phone:z.string().nullable(),lattesUrl:z.string().nullable(),role:z.nativeEnum(de)}),Cy=z.object({id:z.uuid(),role:z.string(),description:z.string().nullable(),createdAt:z.date(),updatedAt:z.date(),userId:z.uuid(),user:jS}),Ty={method:"post",path:"/reference-center-team-member",tags:["Reference Center Team Members"],summary:"Create a new Reference Center Team Member",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:Fc}}}},responses:{201:{description:"Reference Center Team Member created successfully",summary:"Reference Center Team Member Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:z.object({errors:z.record(z.string(),z.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:z.object({message:z.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:z.object({message:z.string()})}}}}},Sy={method:"get",path:"/reference-center-team-member",tags:["Reference Center Team Members"],summary:"List all Reference Center Team Members with filters",request:{query:z.object({role:z.string().optional(),orderBy:z.enum(["asc","desc"]).optional()})},responses:{200:{description:"List of Reference Center Team Members retrieved successfully",summary:"Reference Center Team Members Retrieved",content:{"application/json":{schema:z.object({members:z.array(Cy)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:z.object({message:z.string()})}}}}},Ay={method:"get",path:"/reference-center-team-member/{id}",tags:["Reference Center Team Members"],summary:"Find Reference Center Team Member by ID",request:{params:Qs},responses:{200:{description:"Reference Center Team Member details retrieved successfully",summary:"Reference Center Team Member Retrieved",content:{"application/json":{schema:Cy}}},400:{description:"Invalid Reference Center Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:z.object({errors:z.record(z.string(),z.string())})}}},404:{description:"Reference Center Team Member not found with the provided ID",summary:"Reference Center Team Member Not Found",content:{"application/json":{schema:z.object({message:z.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:z.object({message:z.string()})}}}}},Ey={method:"put",path:"/reference-center-team-member/{id}",tags:["Reference Center Team Members"],summary:"Update Reference Center Team Member",security:[{bearerAuth:[]}],request:{params:Qs,body:{content:{"application/json":{schema:Bc.omit({id:!0})}}}},responses:{200:{description:"Reference Center Team Member updated successfully",summary:"Reference Center Team Member Updated"},400:{description:"Invalid input data or Reference Center Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:z.object({errors:z.record(z.string(),z.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:z.object({message:z.string()})}}},404:{description:"Reference Center Team Member not found with the provided ID",summary:"Reference Center Team Member Not Found",content:{"application/json":{schema:z.object({message:z.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:z.object({message:z.string()})}}}}},wy={method:"delete",path:"/reference-center-team-member/{id}",tags:["Reference Center Team Members"],summary:"Delete Reference Center Team Member",security:[{bearerAuth:[]}],request:{params:kc},responses:{200:{description:"Reference Center Team Member deleted successfully",summary:"Reference Center Team Member Deleted"},400:{description:"Invalid Reference Center Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:z.object({errors:z.record(z.string(),z.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:z.object({message:z.string()})}}},404:{description:"Reference Center Team Member not found with the provided ID",summary:"Reference Center Team Member Not Found",content:{"application/json":{schema:z.object({message:z.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:z.object({message:z.string()})}}}}};import q from"zod";import{extendZodWithOpenApi as FS}from"@asteasolutions/zod-to-openapi";import{RegimentStatus as xy}from"@prisma/client";import Lr from"zod";var vy=10,My=1024,DS=My*My,kS=vy*DS;FS(Lr);var qc=Lr.object({title:Lr.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio"),version:Lr.string().min(1,"Vers\xE3o \xE9 obrigat\xF3ria"),publishedAt:Lr.coerce.date(),document:Lr.any().refine(i=>i==null||typeof i!="object"||typeof i.size!="number"?!1:i.size<=kS,`O documento deve ter no m\xE1ximo ${vy}MB.`),status:Lr.enum(xy).optional()}),rn=class{constructor(e,t){this.regimentRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{title:r,version:o,publishedAt:s,document:n,status:m}=qc.parse({...e.body,document:e.file}),p=await this.regimentRepository.create({title:r,version:o,publishedAt:s,documentUrl:"",status:m??xy.IN_FORCE}),d=await this.firebaseStorageService.uploadFile({file:n,id:p.id,folder:E.REGIMENT});return await this.regimentRepository.update({id:p.id,documentUrl:d}),t.sendStatus(201)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as OS}from"@asteasolutions/zod-to-openapi";import Nc from"zod";OS(Nc);var Gc=Nc.object({id:Nc.uuid()}),tn=class{constructor(e,t){this.regimentRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{id:r}=Gc.parse({id:e.params.id}),o=await this.regimentRepository.findById(r);if(!o)throw new c("O regimento n\xE3o existe.");return o.documentUrl&&await this.firebaseStorageService.deleteFile({fileUrl:o.documentUrl}),await this.regimentRepository.deleteById(r),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as BS}from"@asteasolutions/zod-to-openapi";import Lc from"zod";BS(Lc);var sn=Lc.object({id:Lc.uuid()}),on=class{constructor(e){this.regimentRepository=e}async handle(e,t){try{let{id:r}=sn.parse({id:e.params.id}),o=await this.regimentRepository.findById(r);if(!o)throw new c("O regimento n\xE3o existe.");return t.status(200).json(o)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as qS}from"@asteasolutions/zod-to-openapi";import{RegimentStatus as NS}from"@prisma/client";import _c from"zod";qS(_c);var Wc=_c.object({status:_c.enum(NS)}),nn=class{constructor(e){this.regimentRepository=e}async handle(e,t){try{let{status:r}=Wc.parse({status:e.params.status}),o=await this.regimentRepository.findByStatus(r);return t.status(200).json(o)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as GS}from"@asteasolutions/zod-to-openapi";import{RegimentStatus as LS}from"@prisma/client";import _r from"zod";var _S=1,WS=10;GS(_r);var Hc=_r.object({page:_r.coerce.number().min(1).default(_S),limit:_r.coerce.number().min(1).default(WS),title:_r.string().optional(),status:_r.enum(LS).optional(),orderBy:_r.enum(["asc","desc"]).optional()}),an=class{constructor(e){this.regimentRepository=e}async handle(e,t){try{let{page:r,limit:o,...s}=Hc.parse(e.query),n=o*r-o,[m,p]=await Promise.all([this.regimentRepository.find({pagination:{offset:n,limit:o},filter:s}),this.regimentRepository.count({filter:s})]),d=Math.max(Math.ceil(p/o),1);t.status(200).json({page:r,totalPages:d,offset:n,limit:o,regiments:m})}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as HS}from"@asteasolutions/zod-to-openapi";import{RegimentStatus as $S}from"@prisma/client";import xr from"zod";var jy=10,Uy=1024,VS=Uy*Uy,zS=jy*VS;HS(xr);var $c=xr.object({id:xr.uuid(),title:xr.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio").optional(),version:xr.string().min(1,"Vers\xE3o \xE9 obrigat\xF3ria").optional(),publishedAt:xr.coerce.date().optional(),document:xr.any().refine(i=>i==null?!0:typeof i!="object"||typeof i.size!="number"?!1:i.size<=zS,`O documento deve ter no m\xE1ximo ${jy}MB.`).optional(),status:xr.enum($S).optional()}),mn=class{constructor(e,t){this.regimentRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{id:r,title:o,version:s,publishedAt:n,document:m,status:p}=$c.parse({id:e.params.id,...e.body,document:e.file}),d=await this.regimentRepository.findById(r);if(!d)throw new c("O regimento n\xE3o existe.");let f=d.documentUrl;return m&&(d.documentUrl&&await this.firebaseStorageService.deleteFile({fileUrl:d.documentUrl}),f=await this.firebaseStorageService.uploadFile({file:m,id:r,folder:E.REGIMENT})),await this.regimentRepository.update({id:r,title:o,version:s,publishedAt:n,documentUrl:f??void 0,status:p}),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var Vc=q.object({id:q.uuid(),title:q.string(),version:q.string(),publishedAt:q.date(),documentUrl:q.string(),status:q.nativeEnum(Dl),createdAt:q.date(),updatedAt:q.date()}),Fy={method:"post",path:"/regiment",tags:["Regiments"],summary:"Create a new regiment with document upload",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:qc}}}},responses:{201:{description:"Regiment created successfully",summary:"Regiment Created"},400:{description:"Invalid input data, missing required fields, or invalid document format/size",summary:"Validation Error",content:{"application/json":{schema:q.object({errors:q.record(q.string(),q.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:q.object({message:q.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:q.object({message:q.string()})}}}}},Dy={method:"get",path:"/regiment",tags:["Regiments"],summary:"List all regiments with pagination and filters",request:{query:Hc},responses:{200:{description:"List of regiments retrieved successfully with pagination",summary:"Regiments Retrieved",content:{"application/json":{schema:q.object({page:q.number(),totalPages:q.number(),offset:q.number(),limit:q.number(),regiments:q.array(Vc)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:q.object({errors:q.record(q.string(),q.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:q.object({message:q.string()})}}}}},ky={method:"get",path:"/regiment/{id}",tags:["Regiments"],summary:"Find regiment by ID",request:{params:sn},responses:{200:{description:"Regiment details retrieved successfully",summary:"Regiment Retrieved",content:{"application/json":{schema:Vc}}},400:{description:"Invalid regiment ID format",summary:"Validation Error",content:{"application/json":{schema:q.object({errors:q.record(q.string(),q.string())})}}},404:{description:"Regiment not found with the provided ID",summary:"Regiment Not Found",content:{"application/json":{schema:q.object({message:q.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:q.object({message:q.string()})}}}}},Oy={method:"get",path:"/regiment/status/{status}",tags:["Regiments"],summary:"Find regiments by status",request:{params:Wc},responses:{200:{description:"Regiments retrieved successfully by status",summary:"Regiments Retrieved by Status",content:{"application/json":{schema:q.array(Vc)}}},400:{description:"Invalid status parameter provided",summary:"Validation Error",content:{"application/json":{schema:q.object({errors:q.record(q.string(),q.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:q.object({message:q.string()})}}}}},By={method:"put",path:"/regiment/{id}",tags:["Regiments"],summary:"Update regiment with optional document upload",security:[{bearerAuth:[]}],request:{params:sn,body:{content:{"multipart/form-data":{schema:$c.omit({id:!0})}}}},responses:{200:{description:"Regiment updated successfully",summary:"Regiment Updated"},400:{description:"Invalid input data, regiment ID format, or invalid document format/size",summary:"Validation Error",content:{"application/json":{schema:q.object({errors:q.record(q.string(),q.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:q.object({message:q.string()})}}},404:{description:"Regiment not found with the provided ID",summary:"Regiment Not Found",content:{"application/json":{schema:q.object({message:q.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:q.object({message:q.string()})}}}}},qy={method:"delete",path:"/regiment/{id}",tags:["Regiments"],summary:"Delete regiment",security:[{bearerAuth:[]}],request:{params:Gc},responses:{200:{description:"Regiment deleted successfully",summary:"Regiment Deleted"},400:{description:"Invalid regiment ID format",summary:"Validation Error",content:{"application/json":{schema:q.object({errors:q.record(q.string(),q.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:q.object({message:q.string()})}}},404:{description:"Regiment not found with the provided ID",summary:"Regiment Not Found",content:{"application/json":{schema:q.object({message:q.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:q.object({message:q.string()})}}}}};import re from"zod";import{extendZodWithOpenApi as ZS}from"@asteasolutions/zod-to-openapi";import gi from"zod";var Gy=5,Ny=1024,KS=Ny*Ny,JS=Gy*KS;ZS(gi);var zc=gi.object({caption:gi.string().optional(),image:gi.any().refine(i=>i==null||typeof i!="object"||typeof i.size!="number"?!1:i.size<=JS,`A imagem deve ter no m\xE1ximo ${Gy}MB.`),congressId:gi.uuid()}),pn=class{constructor(e,t,r){this.regionalCongressGalleryRepository=e;this.regionalCongressRepository=t;this.firebaseStorageService=r}async handle(e,t){try{let{caption:r,image:o,congressId:s}=zc.parse({...e.body,...e.params,image:e.file});if(!await this.regionalCongressRepository.findById(s))throw new c("O congresso n\xE3o existe.");let m=await this.regionalCongressGalleryRepository.create({caption:r,congressId:s,imageUrl:""}),p=await this.firebaseStorageService.uploadFile({file:o,id:m.id,folder:E.GALLERY});return await this.regionalCongressGalleryRepository.update({id:m.id,imageUrl:p}),t.sendStatus(201)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as YS}from"@asteasolutions/zod-to-openapi";import Zc from"zod";YS(Zc);var dn=Zc.object({id:Zc.uuid("ID inv\xE1lido")}),cn=class{constructor(e){this.regionalCongressGalleryRepository=e}async handle(e,t){try{let{id:r}=dn.parse(e.params);if(!await this.regionalCongressGalleryRepository.findById(r))throw new c("Item de galeria n\xE3o encontrado");return await this.regionalCongressGalleryRepository.deleteById(r),t.sendStatus(204)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as XS}from"@asteasolutions/zod-to-openapi";import wt from"zod";XS(wt);var Kc=wt.object({congressId:wt.uuid("ID do congresso inv\xE1lido"),page:wt.coerce.number().int().positive().default(1),limit:wt.coerce.number().int().positive().default(10),caption:wt.string().optional()}),ln=class{constructor(e){this.regionalCongressGalleryRepository=e}async handle(e,t){try{let{page:r,limit:o,...s}=Kc.parse({...e.params,...e.query}),n=(r-1)*o,m=await this.regionalCongressGalleryRepository.findByCongressId({pagination:{offset:n,limit:o},filter:s});if(!m)throw new c("Itens de galeria n\xE3o encontrados");let p=await this.regionalCongressGalleryRepository.count({filter:s});return t.status(200).json({data:m,pagination:{page:r,limit:o,total:p,totalPages:Math.ceil(p/o)}})}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as QS}from"@asteasolutions/zod-to-openapi";import yi from"zod";var _y=5,Ly=1024,eA=Ly*Ly,rA=_y*eA;QS(yi);var Jc=yi.object({id:yi.string().uuid("ID inv\xE1lido"),caption:yi.string().optional(),image:yi.any().refine(i=>i==null?!0:typeof i!="object"||typeof i.size!="number"?!1:i.size<=rA,`A imagem deve ter no m\xE1ximo ${_y}MB.`).optional()}),un=class{constructor(e,t){this.regionalCongressGalleryRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{id:r,caption:o,image:s}=Jc.parse({...e.params,...e.body,image:e.file});if(!await this.regionalCongressGalleryRepository.findById(r))throw new c("Item de galeria n\xE3o encontrado");let m;return s&&(m=await this.firebaseStorageService.uploadFile({file:s,id:r,folder:E.GALLERY})),await this.regionalCongressGalleryRepository.update({id:r,caption:o,...m&&{imageUrl:m}}),t.sendStatus(204)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var tA=re.object({id:re.uuid(),imageUrl:re.string(),caption:re.string().nullable(),congressId:re.uuid()}),Wy={method:"post",path:"/regional-congress/{congressId}/gallery",tags:["Regional Congresses"],summary:"Create a new congress gallery image",security:[{bearerAuth:[]}],request:{params:re.object({congressId:re.uuid()}),body:{content:{"application/json":{schema:zc.omit({congressId:!0})}}}},responses:{201:{description:"Congress gallery image created successfully",summary:"Congress Gallery Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:re.object({errors:re.record(re.string(),re.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:re.object({message:re.string()})}}},404:{description:"Congress not found with the provided ID",summary:"Congress Not Found",content:{"application/json":{schema:re.object({message:re.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:re.object({message:re.string()})}}}}},Hy={method:"get",path:"/regional-congress/{congressId}/gallery",tags:["Regional Congresses"],summary:"Find congress gallery images by congress ID",request:{params:Kc},responses:{200:{description:"Congress gallery images retrieved successfully by congress ID",summary:"Congress Galleries Retrieved",content:{"application/json":{schema:re.array(tA)}}},400:{description:"Invalid congress ID parameter provided",summary:"Validation Error",content:{"application/json":{schema:re.object({errors:re.record(re.string(),re.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:re.object({message:re.string()})}}}}},$y={method:"put",path:"/regional-congress/gallery/{id}",tags:["Regional Congresses"],summary:"Update congress gallery image",security:[{bearerAuth:[]}],request:{params:dn,body:{content:{"application/json":{schema:Jc.omit({id:!0})}}}},responses:{200:{description:"Congress gallery image updated successfully",summary:"Congress Gallery Updated"},400:{description:"Invalid input data or gallery ID format",summary:"Validation Error",content:{"application/json":{schema:re.object({errors:re.record(re.string(),re.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:re.object({message:re.string()})}}},404:{description:"Congress gallery image not found with the provided ID",summary:"Congress Gallery Not Found",content:{"application/json":{schema:re.object({message:re.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:re.object({message:re.string()})}}}}},Vy={method:"delete",path:"/regional-congress/gallery/{id}",tags:["Regional Congresses"],summary:"Delete congress gallery image",security:[{bearerAuth:[]}],request:{params:dn},responses:{200:{description:"Congress gallery image deleted successfully",summary:"Congress Gallery Deleted"},400:{description:"Invalid gallery ID format",summary:"Validation Error",content:{"application/json":{schema:re.object({errors:re.record(re.string(),re.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:re.object({message:re.string()})}}},404:{description:"Congress gallery image not found with the provided ID",summary:"Congress Gallery Not Found",content:{"application/json":{schema:re.object({message:re.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:re.object({message:re.string()})}}}}};import te from"zod";import{extendZodWithOpenApi as iA}from"@asteasolutions/zod-to-openapi";import fi from"zod";var Zy=2,zy=1024,oA=zy*zy,sA=Zy*oA;iA(fi);var Yc=fi.object({name:fi.string().min(1,"Nome \xE9 obrigat\xF3rio"),logo:fi.any().refine(i=>i==null?!0:typeof i!="object"||typeof i.size!="number"?!1:i.size<=sA,`A imagem deve ter no m\xE1ximo ${Zy}MB.`).optional(),congressId:fi.uuid()}),gn=class{constructor(e,t,r){this.regionalCongressPartnerRepository=e;this.regionalCongressRepository=t;this.firebaseStorageService=r}async handle(e,t){try{let{name:r,logo:o,congressId:s}=Yc.parse({...e.body,...e.params,logo:e.file});if(!await this.regionalCongressRepository.findById(s))throw new c("O congresso n\xE3o existe.");let m=await this.regionalCongressPartnerRepository.create({name:r,congressId:s}),p;return o&&(p=await this.firebaseStorageService.uploadFile({file:o,id:m.id,folder:E.PARTNER}),await this.regionalCongressPartnerRepository.update({id:m.id,logoUrl:p})),t.sendStatus(201)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as nA}from"@asteasolutions/zod-to-openapi";import Xc from"zod";nA(Xc);var fn=Xc.object({id:Xc.string().uuid("ID inv\xE1lido")}),yn=class{constructor(e){this.regionalCongressPartnerRepository=e}async handle(e,t){try{let{id:r}=fn.parse(e.params);if(!await this.regionalCongressPartnerRepository.findById(r))throw new c("Parceiro n\xE3o encontrado");return await this.regionalCongressPartnerRepository.deleteById(r),t.sendStatus(204)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as aA}from"@asteasolutions/zod-to-openapi";import Mt from"zod";aA(Mt);var Qc=Mt.object({congressId:Mt.uuid("ID do congresso inv\xE1lido"),page:Mt.coerce.number().int().positive().optional(),limit:Mt.coerce.number().int().positive().optional(),name:Mt.string().optional()}),hn=class{constructor(e){this.regionalCongressPartnerRepository=e}async handle(e,t){try{let{congressId:r,page:o,limit:s,name:n}=Qc.parse({...e.params,...e.query}),m=o!==void 0&&s!==void 0,p=m?{offset:(o-1)*s,limit:s}:void 0,d=await this.regionalCongressPartnerRepository.findByCongressId({pagination:p,filter:{congressId:r,name:n}});if(!d)throw new c("Parceiros n\xE3o encontrados");if(!m)return t.status(200).json(d);let f=await this.regionalCongressPartnerRepository.count({filter:{congressId:r,name:n}});return t.status(200).json({data:d,pagination:{page:o,limit:s,total:f,totalPages:Math.ceil(f/s)}})}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as mA}from"@asteasolutions/zod-to-openapi";import hi from"zod";var Jy=2,Ky=1024,pA=Ky*Ky,cA=Jy*pA;mA(hi);var ed=hi.object({id:hi.string().uuid("ID inv\xE1lido"),name:hi.string().min(1,"Nome \xE9 obrigat\xF3rio").optional(),logo:hi.any().refine(i=>i==null?!0:typeof i!="object"||typeof i.size!="number"?!1:i.size<=cA,`A imagem deve ter no m\xE1ximo ${Jy}MB.`).optional()}),Rn=class{constructor(e,t){this.regionalCongressPartnerRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{id:r,name:o,logo:s}=ed.parse({...e.params,...e.body,logo:e.file});if(!await this.regionalCongressPartnerRepository.findById(r))throw new c("Parceiro n\xE3o encontrado");let m;return s&&(m=await this.firebaseStorageService.uploadFile({file:s,id:r,folder:E.PARTNER})),await this.regionalCongressPartnerRepository.update({id:r,name:o,...m&&{logoUrl:m}}),t.sendStatus(204)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var dA=te.object({id:te.uuid(),name:te.string(),logoUrl:te.string().nullable(),congressId:te.uuid()}),Yy={method:"post",path:"/regional-congress/{congressId}/partner",tags:["Regional Congresses"],summary:"Create a new congress partner",security:[{bearerAuth:[]}],request:{params:te.object({congressId:te.uuid()}),body:{content:{"application/json":{schema:Yc.omit({congressId:!0})}}}},responses:{201:{description:"Congress partner created successfully",summary:"Congress Partner Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:te.object({errors:te.record(te.string(),te.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:te.object({message:te.string()})}}},404:{description:"Congress not found with the provided ID",summary:"Congress Not Found",content:{"application/json":{schema:te.object({message:te.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:te.object({message:te.string()})}}}}},Xy={method:"get",path:"/regional-congress/{congressId}/partner",tags:["Regional Congresses"],summary:"Find congress partners by congress ID",request:{params:Qc},responses:{200:{description:"Congress partners retrieved successfully by congress ID",summary:"Congress Partners Retrieved",content:{"application/json":{schema:te.array(dA)}}},400:{description:"Invalid congress ID parameter provided",summary:"Validation Error",content:{"application/json":{schema:te.object({errors:te.record(te.string(),te.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:te.object({message:te.string()})}}}}},Qy={method:"put",path:"/regional-congress/partner/{id}",tags:["Regional Congresses"],summary:"Update congress partner",security:[{bearerAuth:[]}],request:{params:fn,body:{content:{"application/json":{schema:ed.omit({id:!0})}}}},responses:{200:{description:"Congress partner updated successfully",summary:"Congress Partner Updated"},400:{description:"Invalid input data or partner ID format",summary:"Validation Error",content:{"application/json":{schema:te.object({errors:te.record(te.string(),te.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:te.object({message:te.string()})}}},404:{description:"Congress partner not found with the provided ID",summary:"Congress Partner Not Found",content:{"application/json":{schema:te.object({message:te.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:te.object({message:te.string()})}}}}},ef={method:"delete",path:"/regional-congress/partner/{id}",tags:["Regional Congresses"],summary:"Delete congress partner",security:[{bearerAuth:[]}],request:{params:fn},responses:{200:{description:"Congress partner deleted successfully",summary:"Congress Partner Deleted"},400:{description:"Invalid partner ID format",summary:"Validation Error",content:{"application/json":{schema:te.object({errors:te.record(te.string(),te.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:te.object({message:te.string()})}}},404:{description:"Congress partner not found with the provided ID",summary:"Congress Partner Not Found",content:{"application/json":{schema:te.object({message:te.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:te.object({message:te.string()})}}}}};import y from"zod";import{extendZodWithOpenApi as lA}from"@asteasolutions/zod-to-openapi";import me from"zod";lA(me);var rd=me.object({title:me.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio"),edition:me.coerce.number().int().positive("Edi\xE7\xE3o deve ser um n\xFAmero positivo"),startDate:me.coerce.date(),endDate:me.coerce.date(),description:me.string().optional(),location:me.string().optional(),congressLink:me.union([me.url("Link do congresso deve ser uma URL v\xE1lida"),me.literal("")]),noticeUrl:me.union([me.url("URL do edital deve ser uma URL v\xE1lida"),me.literal("")]),scheduleUrl:me.union([me.url("URL do cronograma deve ser uma URL v\xE1lida"),me.literal("")]),programUrl:me.union([me.url("URL da programa\xE7\xE3o deve ser uma URL v\xE1lida"),me.literal("")]),adminReportUrl:me.union([me.url("URL do relat\xF3rio administrativo deve ser uma URL v\xE1lida"),me.literal("")]),proceedingsUrl:me.union([me.url("URL dos anais deve ser uma URL v\xE1lida"),me.literal("")])}).refine(i=>i.endDate>=i.startDate,{message:"Data de t\xE9rmino deve ser posterior ou igual \xE0 data de in\xEDcio",path:["endDate"]}),Pn=class{constructor(e){this.regionalCongressRepository=e}async handle(e,t){try{let r=rd.parse(e.body);return await this.regionalCongressRepository.create(r),t.sendStatus(201)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as uA}from"@asteasolutions/zod-to-openapi";import td from"zod";uA(td);var id=td.object({id:td.string().uuid("ID inv\xE1lido")}),bn=class{constructor(e){this.regionalCongressRepository=e}async handle(e,t){try{let{id:r}=id.parse(e.params);if(!await this.regionalCongressRepository.findById(r))throw new c("Congresso regional n\xE3o encontrado");return await this.regionalCongressRepository.deleteById(r),t.sendStatus(204)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as gA}from"@asteasolutions/zod-to-openapi";import od from"zod";gA(od);var sd=od.object({edition:od.coerce.number().int().positive("Edi\xE7\xE3o deve ser um n\xFAmero positivo")}),In=class{constructor(e){this.regionalCongressRepository=e}async handle(e,t){try{let{edition:r}=sd.parse(e.params),o=await this.regionalCongressRepository.findByEdition(r);if(!o||o.length===0)throw new c("Congresso regional n\xE3o encontrado");return t.status(200).json(o)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as yA}from"@asteasolutions/zod-to-openapi";import nd from"zod";yA(nd);var Tn=nd.object({id:nd.string().uuid("ID inv\xE1lido")}),Cn=class{constructor(e){this.regionalCongressRepository=e}async handle(e,t){try{let{id:r}=Tn.parse(e.params),o=await this.regionalCongressRepository.findById(r);if(!o)throw new c("Congresso regional n\xE3o encontrado");return t.status(200).json(o)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as fA}from"@asteasolutions/zod-to-openapi";import vr from"zod";fA(vr);var ad=vr.object({page:vr.coerce.number().int().positive().default(1),limit:vr.coerce.number().int().positive().default(10),title:vr.string().optional(),edition:vr.coerce.number().int().positive().optional(),location:vr.string().optional(),orderBy:vr.enum(["asc","desc"]).optional().default("desc")}),Sn=class{constructor(e){this.regionalCongressRepository=e}async handle(e,t){try{let{page:r,limit:o,orderBy:s,...n}=ad.parse(e.query),m=(r-1)*o,p=await this.regionalCongressRepository.find({pagination:{offset:m,limit:o},filter:{...n,orderBy:s}});if(!p)throw new c("Congressos regionais n\xE3o encontrados");let d=await this.regionalCongressRepository.count({filter:n});return t.status(200).json({data:p,pagination:{page:r,limit:o,total:d,totalPages:Math.ceil(d/o)}})}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as hA}from"@asteasolutions/zod-to-openapi";import se from"zod";hA(se);var md=se.object({id:se.string().uuid("ID inv\xE1lido"),title:se.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio").optional(),edition:se.coerce.number().int().positive("Edi\xE7\xE3o deve ser um n\xFAmero positivo").optional(),startDate:se.coerce.date().optional(),endDate:se.coerce.date().optional(),description:se.string().optional(),location:se.string().optional(),congressLink:se.union([se.url("Link do congresso deve ser uma URL v\xE1lida"),se.literal("")]),noticeUrl:se.union([se.url("URL do edital deve ser uma URL v\xE1lida"),se.literal("")]),scheduleUrl:se.union([se.url("URL do cronograma deve ser uma URL v\xE1lida"),se.literal("")]),programUrl:se.union([se.url("URL da programa\xE7\xE3o deve ser uma URL v\xE1lida"),se.literal("")]),adminReportUrl:se.union([se.url("URL do relat\xF3rio administrativo deve ser uma URL v\xE1lida"),se.literal("")]),proceedingsUrl:se.union([se.url("URL dos anais deve ser uma URL v\xE1lida"),se.literal("")])}).refine(i=>i.startDate&&i.endDate?i.endDate>=i.startDate:!0,{message:"Data de t\xE9rmino deve ser posterior ou igual \xE0 data de in\xEDcio",path:["endDate"]}),An=class{constructor(e){this.regionalCongressRepository=e}async handle(e,t){try{let{id:r}=se.object({id:se.string().uuid()}).parse(e.params);if(!await this.regionalCongressRepository.findById(r))throw new c("Congresso regional n\xE3o encontrado");let s=md.parse({id:r,...e.body});return await this.regionalCongressRepository.update(s),t.sendStatus(204)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var RA=9,PA=y.object({image:y.any().openapi({type:"string",format:"binary"}),caption:y.string().optional()}),bA=y.object({image:y.any().openapi({type:"string",format:"binary"}).optional(),caption:y.string().optional()}),IA=y.object({id:y.uuid(),name:y.string(),logoUrl:y.string().nullable(),congressId:y.uuid()}),pd=y.object({id:y.uuid(),imageUrl:y.string(),caption:y.string().nullable(),congressId:y.uuid()}),cd=y.object({id:y.uuid(),title:y.string(),edition:y.number(),startDate:y.date(),endDate:y.date(),description:y.string().nullable(),location:y.string().nullable(),congressLink:y.string().nullable(),noticeUrl:y.string().nullable(),scheduleUrl:y.string().nullable(),programUrl:y.string().nullable(),adminReportUrl:y.string().nullable(),proceedingsUrl:y.string().nullable(),partners:y.array(IA),galleries:y.array(pd),createdAt:y.date(),updatedAt:y.date()}),rf={method:"post",path:"/regional-congress",tags:["Regional Congresses"],summary:"Create a new regional congress",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:rd}}}},responses:{201:{description:"Regional congress created successfully",summary:"Regional Congress Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:y.object({errors:y.record(y.string(),y.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:y.object({message:y.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:y.object({message:y.string()})}}}}},tf={method:"get",path:"/regional-congress",tags:["Regional Congresses"],summary:"List all regional congresses with pagination and filters",request:{query:ad},responses:{200:{description:"List of regional congresses retrieved successfully with pagination",summary:"Regional Congresses Retrieved",content:{"application/json":{schema:y.object({page:y.number(),totalPages:y.number(),offset:y.number(),limit:y.number(),congresses:y.array(cd)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:y.object({errors:y.record(y.string(),y.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:y.object({message:y.string()})}}}}},of={method:"get",path:"/regional-congress/{id}",tags:["Regional Congresses"],summary:"Find regional congress by ID",request:{params:Tn},responses:{200:{description:"Regional congress details retrieved successfully",summary:"Regional Congress Retrieved",content:{"application/json":{schema:cd}}},400:{description:"Invalid regional congress ID format",summary:"Validation Error",content:{"application/json":{schema:y.object({errors:y.record(y.string(),y.string())})}}},404:{description:"Regional congress not found with the provided ID",summary:"Regional Congress Not Found",content:{"application/json":{schema:y.object({message:y.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:y.object({message:y.string()})}}}}},sf={method:"get",path:"/regional-congress/edition/{edition}",tags:["Regional Congresses"],summary:"Find regional congresses by edition",request:{params:sd},responses:{200:{description:"Regional congresses retrieved successfully by edition",summary:"Regional Congresses Retrieved by Edition",content:{"application/json":{schema:y.array(cd)}}},400:{description:"Invalid edition parameter provided",summary:"Validation Error",content:{"application/json":{schema:y.object({errors:y.record(y.string(),y.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:y.object({message:y.string()})}}}}},nf={method:"put",path:"/regional-congress/{id}",tags:["Regional Congresses"],summary:"Update regional congress",security:[{bearerAuth:[]}],request:{params:Tn,body:{content:{"application/json":{schema:md.omit({id:!0})}}}},responses:{200:{description:"Regional congress updated successfully",summary:"Regional Congress Updated"},400:{description:"Invalid input data or regional congress ID format",summary:"Validation Error",content:{"application/json":{schema:y.object({errors:y.record(y.string(),y.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:y.object({message:y.string()})}}},404:{description:"Regional congress not found with the provided ID",summary:"Regional Congress Not Found",content:{"application/json":{schema:y.object({message:y.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:y.object({message:y.string()})}}}}},af={method:"delete",path:"/regional-congress/{id}",tags:["Regional Congresses"],summary:"Delete regional congress",security:[{bearerAuth:[]}],request:{params:id},responses:{200:{description:"Regional congress deleted successfully",summary:"Regional Congress Deleted"},400:{description:"Invalid regional congress ID format",summary:"Validation Error",content:{"application/json":{schema:y.object({errors:y.record(y.string(),y.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:y.object({message:y.string()})}}},404:{description:"Regional congress not found with the provided ID",summary:"Regional Congress Not Found",content:{"application/json":{schema:y.object({message:y.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:y.object({message:y.string()})}}}}},g$={method:"post",path:"/regional-congress/{congressId}/gallery",tags:["Regional Congress Gallery"],summary:"Create a new gallery image for a congress",security:[{bearerAuth:[]}],request:{params:y.object({congressId:y.uuid()}),body:{content:{"multipart/form-data":{schema:PA}}}},responses:{201:{description:"Gallery image created successfully",summary:"Gallery Image Created"},400:{description:"Invalid input data, missing required fields, or invalid image format/size",summary:"Validation Error",content:{"application/json":{schema:y.object({errors:y.record(y.string(),y.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:y.object({message:y.string()})}}},404:{description:"Congress not found with the provided ID",summary:"Congress Not Found",content:{"application/json":{schema:y.object({message:y.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:y.object({message:y.string()})}}}}},y$={method:"get",path:"/regional-congress/{congressId}/gallery",tags:["Regional Congress Gallery"],summary:"List all gallery images for a congress with pagination",request:{params:y.object({congressId:y.uuid()}),query:y.object({page:y.coerce.number().min(1).default(1),limit:y.coerce.number().min(1).default(RA),caption:y.string().optional()})},responses:{200:{description:"Gallery images retrieved successfully with pagination",summary:"Gallery Images Retrieved",content:{"application/json":{schema:y.object({page:y.number(),totalPages:y.number(),offset:y.number(),limit:y.number(),galleries:y.array(pd)})}}},400:{description:"Invalid congress ID format or query parameters",summary:"Validation Error",content:{"application/json":{schema:y.object({errors:y.record(y.string(),y.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:y.object({message:y.string()})}}}}},f$={method:"get",path:"/regional-congress/gallery/{id}",tags:["Regional Congress Gallery"],summary:"Find a gallery image by ID",request:{params:y.object({id:y.uuid()})},responses:{200:{description:"Gallery image retrieved successfully",summary:"Gallery Image Retrieved",content:{"application/json":{schema:pd}}},400:{description:"Invalid gallery image ID format",summary:"Validation Error",content:{"application/json":{schema:y.object({errors:y.record(y.string(),y.string())})}}},404:{description:"Gallery image not found with the provided ID",summary:"Gallery Image Not Found",content:{"application/json":{schema:y.object({message:y.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:y.object({message:y.string()})}}}}},h$={method:"put",path:"/regional-congress/gallery/{id}",tags:["Regional Congress Gallery"],summary:"Update a gallery image with optional image upload",security:[{bearerAuth:[]}],request:{params:y.object({id:y.uuid()}),body:{content:{"multipart/form-data":{schema:bA}}}},responses:{200:{description:"Gallery image updated successfully",summary:"Gallery Image Updated"},400:{description:"Invalid input data, gallery ID format, or invalid image format/size",summary:"Validation Error",content:{"application/json":{schema:y.object({errors:y.record(y.string(),y.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:y.object({message:y.string()})}}},404:{description:"Gallery image not found with the provided ID",summary:"Gallery Image Not Found",content:{"application/json":{schema:y.object({message:y.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:y.object({message:y.string()})}}}}},R$={method:"delete",path:"/regional-congress/gallery/{id}",tags:["Regional Congress Gallery"],summary:"Delete a gallery image",security:[{bearerAuth:[]}],request:{params:y.object({id:y.uuid()})},responses:{200:{description:"Gallery image deleted successfully",summary:"Gallery Image Deleted"},400:{description:"Invalid gallery ID format",summary:"Validation Error",content:{"application/json":{schema:y.object({errors:y.record(y.string(),y.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:y.object({message:y.string()})}}},404:{description:"Gallery image not found with the provided ID",summary:"Gallery Image Not Found",content:{"application/json":{schema:y.object({message:y.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:y.object({message:y.string()})}}}}};import h from"zod";import{extendZodWithOpenApi as CA}from"@asteasolutions/zod-to-openapi";import dd from"zod";CA(dd);var ld=dd.object({id:dd.uuid()}),En=class{constructor(e,t){this.researchGroupRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{id:r}=ld.parse({id:e.params.id}),o=await this.researchGroupRepository.findById(r);if(!o)throw new c("O grupo de pesquisa n\xE3o existe.");return o.logoUrl&&this.firebaseStorageService.deleteFile({fileUrl:o.logoUrl}),await this.researchGroupRepository.deleteById(r),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as TA}from"@asteasolutions/zod-to-openapi";import ud from"zod";TA(ud);var gd=ud.object({id:ud.uuid()}),wn=class{constructor(e){this.researchGroupRepository=e}async handle(e,t){try{let{id:r}=gd.parse({id:e.params.id}),o=await this.researchGroupRepository.findById(r);if(!o)throw new c("Grupo de pesquisa n\xE3o encontrado.");return t.status(200).json(o)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as SA}from"@asteasolutions/zod-to-openapi";import nr from"zod";var AA=1,EA=6;SA(nr);var yd=nr.object({page:nr.coerce.number().min(1).default(AA),limit:nr.coerce.number().min(1).default(EA),name:nr.string().optional(),acronym:nr.string().optional(),description:nr.string().optional(),leader:nr.string().optional(),orderBy:nr.enum(["asc","desc"]).default("desc")}),Mn=class{constructor(e){this.researchGroupRepository=e}async handle(e,t){try{let{limit:r,page:o,...s}=yd.parse(e.query),n=o*r-r,[m,p]=await Promise.all([this.researchGroupRepository.find({pagination:{offset:n,limit:r},filter:s}),this.researchGroupRepository.count({filter:s})]),d=Math.max(Math.ceil(p/r),1);return t.status(200).json({page:o,totalPages:d,offset:n,limit:r,researchGroups:m})}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as wA}from"@asteasolutions/zod-to-openapi";import Ee from"zod";var pf=5,mf=1024,MA=mf*mf,xA=pf*MA;wA(Ee);var fd=Ee.object({id:Ee.uuid(),name:Ee.string().min(1,"Nome \xE9 obrigat\xF3rio.").optional(),acronym:Ee.string().optional(),description:Ee.string().optional(),url:Ee.url("URL deve ser v\xE1lida.").optional(),foundedAt:Ee.coerce.date().optional(),scope:Ee.string().optional(),email:Ee.email("E-mail deve ser v\xE1lido.").optional(),leaderId:Ee.uuid("L\xEDder \xE9 obrigat\xF3rio.").optional(),deputyLeaderId:Ee.uuid("Vice-l\xEDder \xE9 obrigat\xF3rio.").optional(),logo:Ee.any().refine(i=>i==null?!0:typeof i!="object"||typeof i.size!="number"?!1:i.size<=xA,`O logo deve ter no m\xE1ximo ${pf}MB.`).optional()}),xn=class{constructor(e,t){this.researchGroupRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{id:r,logo:o,name:s,acronym:n,description:m,url:p,foundedAt:d,scope:f,email:T,leaderId:v,deputyLeaderId:X}=fd.parse({id:e.params.id,...e.body,logo:e.file}),ie=await this.researchGroupRepository.findById(r);if(!ie)throw new c("O grupo de pesquisa n\xE3o existe.");let ce=ie.logoUrl;return o&&(ce=await this.firebaseStorageService.uploadFile({file:o,id:r,folder:E.RESEARCH_GROUP_LOGO})),await this.researchGroupRepository.update({id:r,name:s,acronym:n,description:m,url:p,foundedAt:d,scope:f,email:T,leaderId:v,deputyLeaderId:X,logoUrl:ce}),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var cf={method:"post",path:"/research-groups",tags:["Research Groups"],summary:"Create research group",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:h.object({name:h.string().min(1).openapi({description:"Nome do grupo de pesquisa"}),acronym:h.string().optional().openapi({description:"Sigla do grupo"}),description:h.string().optional().openapi({description:"Descri\xE7\xE3o do grupo"}),url:h.string().url().optional().openapi({description:"URL do grupo"}),foundedAt:h.string().openapi({description:"Data de funda\xE7\xE3o (ISO 8601)",example:"2024-01-01T00:00:00Z"}),scope:h.string().optional().openapi({description:"Escopo do grupo"}),email:h.string().email().optional().openapi({description:"E-mail de contato"}),leaderId:h.string().uuid().openapi({description:"ID do l\xEDder (UUID)"}),deputyLeaderId:h.string().uuid().openapi({description:"ID do vice-l\xEDder (UUID)"}),logo:h.string().optional().openapi({description:"Logo do grupo (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{201:{description:"Research group created successfully",summary:"Research Group Created"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:h.object({errors:h.record(h.string(),h.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:h.object({message:h.string()})}}}}},df={method:"get",path:"/research-groups",tags:["Research Groups"],summary:"List research groups",security:[{bearerAuth:[]}],request:{query:yd},responses:{200:{description:"Paginated list of research groups with leader information retrieved successfully",summary:"Research Groups Retrieved",content:{"application/json":{schema:h.object({page:h.number(),totalPages:h.number(),offset:h.number(),limit:h.number(),researchGroups:h.array(h.object({id:h.string(),name:h.string(),acronym:h.string().nullable(),description:h.string().nullable(),url:h.string().nullable(),logoUrl:h.string().nullable(),foundedAt:h.date(),scope:h.string().nullable(),email:h.string().nullable(),leaderId:h.string(),deputyLeaderId:h.string(),createdAt:h.date(),updatedAt:h.date(),leader:h.object({id:h.uuid(),name:h.string(),emailAddress:h.email(),avatarUrl:h.string().nullable(),createdAt:h.date(),updatedAt:h.date()}),deputyLeader:h.object({id:h.uuid(),name:h.string(),emailAddress:h.email(),avatarUrl:h.string().nullable(),createdAt:h.date(),updatedAt:h.date()})}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:h.object({errors:h.record(h.string(),h.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:h.object({message:h.string()})}}}}},lf={method:"get",path:"/research-groups/{id}",tags:["Research Groups"],summary:"Find research group by ID",security:[{bearerAuth:[]}],request:{params:gd},responses:{200:{description:"Research group details retrieved successfully",summary:"Research Group Retrieved",content:{"application/json":{schema:h.object({id:h.string(),name:h.string(),acronym:h.string().nullable(),description:h.string().nullable(),url:h.string().nullable(),logoUrl:h.string().nullable(),foundedAt:h.date(),scope:h.string().nullable(),email:h.string().nullable(),leaderId:h.string(),deputyLeaderId:h.string(),createdAt:h.date(),updatedAt:h.date(),leader:h.object({id:h.uuid(),name:h.string(),emailAddress:h.email(),avatarUrl:h.string().nullable(),createdAt:h.date(),updatedAt:h.date()}),deputyLeader:h.object({id:h.uuid(),name:h.string(),emailAddress:h.email(),avatarUrl:h.string().nullable(),createdAt:h.date(),updatedAt:h.date()})}).nullable()}}},400:{description:"Invalid research group ID format",summary:"Validation Error",content:{"application/json":{schema:h.object({errors:h.record(h.string(),h.string())})}}},404:{description:"Research group not found with the provided ID",summary:"Research Group Not Found",content:{"application/json":{schema:h.object({message:h.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:h.object({message:h.string()})}}}}},uf={method:"put",path:"/research-groups/{id}",tags:["Research Groups"],summary:"Update research group",security:[{bearerAuth:[]}],request:{params:fd.pick({id:!0}),body:{content:{"multipart/form-data":{schema:h.object({name:h.string().min(1).optional().openapi({description:"Nome do grupo de pesquisa"}),acronym:h.string().optional().openapi({description:"Sigla do grupo"}),description:h.string().optional().openapi({description:"Descri\xE7\xE3o do grupo"}),url:h.string().url().optional().openapi({description:"URL do grupo"}),foundedAt:h.string().optional().openapi({description:"Data de funda\xE7\xE3o (ISO 8601)",example:"2024-01-01T00:00:00Z"}),scope:h.string().optional().openapi({description:"Escopo do grupo"}),email:h.string().email().optional().openapi({description:"E-mail de contato"}),leaderId:h.string().uuid().optional().openapi({description:"ID do l\xEDder (UUID)"}),deputyLeaderId:h.string().uuid().optional().openapi({description:"ID do vice-l\xEDder (UUID)"}),logo:h.string().optional().openapi({description:"Logo do grupo (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{200:{description:"Research group updated successfully",summary:"Research Group Updated"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:h.object({errors:h.record(h.string(),h.string())})}}},404:{description:"Research group not found with the provided ID",summary:"Research Group Not Found",content:{"application/json":{schema:h.object({message:h.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:h.object({message:h.string()})}}}}},gf={method:"delete",path:"/research-groups/{id}",tags:["Research Groups"],summary:"Delete research group",security:[{bearerAuth:[]}],request:{params:ld},responses:{200:{description:"Research group deleted successfully",summary:"Research Group Deleted"},400:{description:"Invalid research group ID format",summary:"Validation Error",content:{"application/json":{schema:h.object({errors:h.record(h.string(),h.string())})}}},404:{description:"Research group not found with the provided ID",summary:"Research Group Not Found",content:{"application/json":{schema:h.object({message:h.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:h.object({message:h.string()})}}}}};import I from"zod";import{extendZodWithOpenApi as vA}from"@asteasolutions/zod-to-openapi";import{Degree as UA,Seniority as jA}from"@prisma/client";import De from"zod";vA(De);var hd=De.object({registrationNumber:De.string(),mainEtps:De.string().optional(),formations:De.string().optional(),degrees:De.array(De.enum(UA)),occupations:De.string(),seniority:De.enum(jA),institutions:De.string(),biography:De.string().optional(),userId:De.string()}),vn=class{constructor(e){this.researcherRepository=e}async handle(e,t){try{let{registrationNumber:r,mainEtps:o,formations:s,degrees:n,occupations:m,seniority:p,institutions:d,biography:f,userId:T}=hd.parse(e.body);if(await this.researcherRepository.findByRegistrationNumber(r))throw new le("J\xE1 existe um pesquisador cadastrado com este n\xFAmero de registro.");if(await this.researcherRepository.findByUserId(T))throw new le("Usu\xE1rio j\xE1 possui um perfil de pesquisador.");return await this.researcherRepository.create({registrationNumber:r,mainEtps:o,formations:s,degrees:n,occupations:m,seniority:p,institutions:d,biography:f,userId:T}),t.sendStatus(201)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as FA}from"@asteasolutions/zod-to-openapi";import Rd from"zod";FA(Rd);var Pd=Rd.object({id:Rd.uuid()}),Un=class{constructor(e){this.researcherRepository=e}async handle(e,t){try{let{id:r}=Pd.parse({id:e.params.id});if(!await this.researcherRepository.findById(r))throw new c("O pesquisador n\xE3o existe.");return await this.researcherRepository.deleteById(r),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as DA}from"@asteasolutions/zod-to-openapi";import bd from"zod";DA(bd);var Fn=bd.object({id:bd.uuid()}),jn=class{constructor(e){this.researcherRepository=e}async handle(e,t){try{let{id:r}=Fn.parse({id:e.params.id}),o=await this.researcherRepository.findById(r);if(!o)throw new c("O pesquisador n\xE3o existe.");return t.status(200).json(o)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as kA}from"@asteasolutions/zod-to-openapi";import Id from"zod";kA(Id);var Cd=Id.object({userId:Id.uuid()}),Dn=class{constructor(e){this.researcherRepository=e}async handle(e,t){try{let{userId:r}=Cd.parse({userId:e.params.userId}),o=await this.researcherRepository.findByUserId(r);if(!o)throw new c("O pesquisador n\xE3o existe para este usu\xE1rio.");return t.status(200).json(o)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as OA}from"@asteasolutions/zod-to-openapi";import{Degree as BA,Seniority as qA}from"@prisma/client";import ke from"zod";OA(ke);var Td=ke.object({id:ke.uuid(),registrationNumber:ke.string().optional(),mainEtps:ke.string().optional(),formations:ke.string().optional(),degrees:ke.array(ke.enum(BA)).optional(),occupations:ke.string().optional(),seniority:ke.enum(qA).optional(),institutions:ke.string().optional(),biography:ke.string().optional()}),kn=class{constructor(e){this.researcherRepository=e}async handle(e,t){try{let{id:r,registrationNumber:o,mainEtps:s,formations:n,degrees:m,occupations:p,seniority:d,institutions:f,biography:T}=Td.parse({id:e.params.id,...e.body}),v=await this.researcherRepository.findById(r);if(!v)throw new c("O pesquisador n\xE3o existe.");if(o&&o!==v.registrationNumber){let X=await this.researcherRepository.findByRegistrationNumber(o);if(X&&X.id!==r)throw new le("J\xE1 existe um pesquisador com este n\xFAmero de registro.")}return await this.researcherRepository.update({id:r,registrationNumber:o,mainEtps:s,formations:n,degrees:m,occupations:p,seniority:d,institutions:f,biography:T}),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var NA=1,GA=9,Sd=I.object({id:I.uuid(),registrationNumber:I.string(),mainEtps:I.string().nullable(),formations:I.string().nullable(),degrees:I.array(I.nativeEnum(Di)),occupations:I.string(),seniority:I.nativeEnum(Fi),institutions:I.string(),biography:I.string().nullable(),createdAt:I.date(),updatedAt:I.date(),userId:I.uuid(),user:I.object({id:I.uuid(),name:I.string(),emailAddress:I.string(),avatarUrl:I.string().nullable(),orcid:I.string().nullable(),phone:I.string().nullable(),lattesUrl:I.string().nullable(),role:I.nativeEnum(de)})}),yf={method:"post",path:"/researcher",tags:["Researchers"],summary:"Create a new researcher profile",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:hd}}}},responses:{201:{description:"Researcher profile created successfully",summary:"Researcher Created",content:{"application/json":{schema:I.object({message:I.string()})}}},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:I.object({errors:I.record(I.string(),I.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:I.object({message:I.string()})}}},409:{description:"Researcher with this registration number already exists or user already has a researcher profile",summary:"Conflict",content:{"application/json":{schema:I.object({message:I.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:I.object({message:I.string()})}}}}},ff={method:"get",path:"/researcher",tags:["Researchers"],summary:"List all researchers with pagination and filters",request:{query:I.object({page:I.coerce.number().min(1).default(NA).optional(),limit:I.coerce.number().min(1).default(GA).optional(),userId:I.string().optional(),registrationNumber:I.string().optional(),name:I.string().optional(),emailAddress:I.string().optional(),mainEtps:I.string().optional(),formations:I.string().optional(),occupations:I.string().optional(),institutions:I.string().optional(),biography:I.string().optional(),orderBy:I.enum(["asc","desc"]).optional()})},responses:{200:{description:"List of researchers retrieved successfully with pagination",summary:"Researchers Retrieved",content:{"application/json":{schema:I.object({page:I.number(),totalPages:I.number(),offset:I.number(),limit:I.number(),researchers:I.array(Sd)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:I.object({message:I.string()})}}}}},hf={method:"get",path:"/researcher/{id}",tags:["Researchers"],summary:"Find researcher by ID",request:{params:Fn},responses:{200:{description:"Researcher details retrieved successfully",summary:"Researcher Retrieved",content:{"application/json":{schema:Sd}}},400:{description:"Invalid researcher ID format",summary:"Validation Error",content:{"application/json":{schema:I.object({errors:I.record(I.string(),I.string())})}}},404:{description:"Researcher not found with the provided ID",summary:"Researcher Not Found",content:{"application/json":{schema:I.object({message:I.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:I.object({message:I.string()})}}}}},Rf={method:"get",path:"/researcher/user/{userId}",tags:["Researchers"],summary:"Find researcher by user ID",request:{params:Cd},responses:{200:{description:"Researcher details retrieved successfully",summary:"Researcher Retrieved",content:{"application/json":{schema:Sd}}},400:{description:"Invalid user ID format",summary:"Validation Error",content:{"application/json":{schema:I.object({errors:I.record(I.string(),I.string())})}}},404:{description:"Researcher not found for this user",summary:"Researcher Not Found",content:{"application/json":{schema:I.object({message:I.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:I.object({message:I.string()})}}}}},Pf={method:"put",path:"/researcher/{id}",tags:["Researchers"],summary:"Update researcher profile",security:[{bearerAuth:[]}],request:{params:Fn,body:{content:{"application/json":{schema:Td.omit({id:!0})}}}},responses:{200:{description:"Researcher profile updated successfully",summary:"Researcher Updated",content:{"application/json":{schema:I.object({message:I.string()})}}},400:{description:"Invalid input data or researcher ID format",summary:"Validation Error",content:{"application/json":{schema:I.object({errors:I.record(I.string(),I.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:I.object({message:I.string()})}}},404:{description:"Researcher not found with the provided ID",summary:"Researcher Not Found",content:{"application/json":{schema:I.object({message:I.string()})}}},409:{description:"Researcher with this registration number already exists",summary:"Conflict",content:{"application/json":{schema:I.object({message:I.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:I.object({message:I.string()})}}}}},bf={method:"delete",path:"/researcher/{id}",tags:["Researchers"],summary:"Delete researcher profile",security:[{bearerAuth:[]}],request:{params:Pd},responses:{200:{description:"Researcher profile deleted successfully",summary:"Researcher Deleted"},400:{description:"Invalid researcher ID format",summary:"Validation Error",content:{"application/json":{schema:I.object({errors:I.record(I.string(),I.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:I.object({message:I.string()})}}},404:{description:"Researcher not found with the provided ID",summary:"Researcher Not Found",content:{"application/json":{schema:I.object({message:I.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:I.object({message:I.string()})}}}}};import R from"zod";import{extendZodWithOpenApi as LA}from"@asteasolutions/zod-to-openapi";import Ad from"zod";LA(Ad);var Ed=Ad.object({id:Ad.uuid()}),On=class{constructor(e){this.scientificArticlesRepository=e}async handle(e,t){try{let{id:r}=Ed.parse({id:e.params.id});if(!await this.scientificArticlesRepository.findById(r))throw new c("O artigo cient\xEDfico n\xE3o existe.");return await this.scientificArticlesRepository.deleteById(r),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as _A}from"@asteasolutions/zod-to-openapi";import wd from"zod";_A(wd);var Md=wd.object({id:wd.uuid()}),Bn=class{constructor(e){this.scientificArticlesRepository=e}async handle(e,t){try{let{id:r}=Md.parse({id:e.params.id}),o=await this.scientificArticlesRepository.findById(r);if(!o)throw new c("Artigo cient\xEDfico n\xE3o encontrado.");return t.status(200).json(o)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as WA}from"@asteasolutions/zod-to-openapi";import Ur from"zod";var HA=1,$A=6;WA(Ur);var xd=Ur.object({page:Ur.coerce.number().min(1).default(HA),limit:Ur.coerce.number().min(1).default($A),title:Ur.string().optional(),author:Ur.string().optional(),journal:Ur.string().optional(),orderBy:Ur.enum(["asc","desc"]).default("desc")}),qn=class{constructor(e){this.scientificArticlesRepository=e}async handle(e,t){try{let{limit:r,page:o,...s}=xd.parse(e.query),n=o*r-r,[m,p]=await Promise.all([this.scientificArticlesRepository.find({pagination:{offset:n,limit:r},filter:s}),this.scientificArticlesRepository.count({filter:s})]),d=Math.max(Math.ceil(p/r),1);return t.status(200).json({page:o,totalPages:d,offset:n,limit:r,scientificArticles:m})}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as VA}from"@asteasolutions/zod-to-openapi";import ue from"zod";VA(ue);var vd=ue.object({id:ue.uuid(),title:ue.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio.").optional(),author:ue.string().min(1,"Autor \xE9 obrigat\xF3rio.").optional(),journal:ue.string().optional(),volume:ue.string().optional(),edition:ue.string().optional(),pageStart:ue.coerce.number().optional(),pageEnd:ue.coerce.number().optional(),startDate:ue.coerce.date().optional(),endDate:ue.coerce.date().optional(),city:ue.string().optional(),state:ue.string().optional(),country:ue.string().optional(),publisher:ue.string().optional(),description:ue.string().optional(),year:ue.coerce.number().optional(),accessUrl:ue.url("URL de acesso deve ser v\xE1lida").optional()}),Nn=class{constructor(e){this.scientificArticlesRepository=e}async handle(e,t){try{let{id:r,title:o,author:s,journal:n,volume:m,edition:p,pageStart:d,pageEnd:f,startDate:T,endDate:v,city:X,state:ie,country:ce,publisher:Re,description:oi,year:hm,accessUrl:Ob}=vd.parse({id:e.params.id,...e.body});if(!await this.scientificArticlesRepository.findById(r))throw new c("O artigo cient\xEDfico n\xE3o existe.");return await this.scientificArticlesRepository.update({id:r,title:o,author:s,journal:n,volume:m,edition:p,pageStart:d,pageEnd:f,startDate:T,endDate:v,city:X,state:ie,country:ce,publisher:Re,description:oi,year:hm,accessUrl:Ob}),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var If={method:"post",path:"/scientific-articles",tags:["Scientific Articles"],summary:"Create scientific article",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:R.object({title:R.string().min(1).openapi({description:"T\xEDtulo do artigo"}),author:R.string().min(1).openapi({description:"Autor do artigo"}),journal:R.string().optional().openapi({description:"Nome do peri\xF3dico/revista"}),volume:R.string().optional().openapi({description:"Volume"}),edition:R.string().optional().openapi({description:"N\xFAmero/Edi\xE7\xE3o"}),pageStart:R.number().optional().openapi({description:"P\xE1gina inicial"}),pageEnd:R.number().optional().openapi({description:"P\xE1gina final"}),startDate:R.string().openapi({description:"Data de in\xEDcio (ISO 8601)",example:"2024-01-01T10:00:00Z"}),endDate:R.string().openapi({description:"Data de t\xE9rmino (ISO 8601)",example:"2024-12-31T10:00:00Z"}),city:R.string().optional().openapi({description:"Cidade"}),state:R.string().optional().openapi({description:"Estado"}),country:R.string().optional().openapi({description:"Pa\xEDs"}),publisher:R.string().optional().openapi({description:"Editora/Institui\xE7\xE3o"}),description:R.string().optional().openapi({description:"Descri\xE7\xE3o do artigo"}),year:R.number().optional().openapi({description:"Ano"}),accessUrl:R.string().url().optional().openapi({description:"URL de acesso"})})}}}},responses:{201:{description:"Scientific article created successfully",summary:"Article Created"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:R.object({errors:R.record(R.string(),R.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:R.object({message:R.string()})}}}}},Cf={method:"get",path:"/scientific-articles",tags:["Scientific Articles"],summary:"List scientific articles",security:[{bearerAuth:[]}],request:{query:xd},responses:{200:{description:"Paginated list of scientific articles retrieved successfully",summary:"Articles Retrieved",content:{"application/json":{schema:R.object({page:R.number(),totalPages:R.number(),offset:R.number(),limit:R.number(),scientificArticles:R.array(R.object({id:R.string(),title:R.string(),author:R.string(),journal:R.string().nullable(),volume:R.string().nullable(),edition:R.string().nullable(),pageStart:R.number().nullable(),pageEnd:R.number().nullable(),startDate:R.date(),endDate:R.date(),city:R.string().nullable(),state:R.string().nullable(),country:R.string().nullable(),publisher:R.string().nullable(),description:R.string().nullable(),year:R.number().nullable(),accessUrl:R.string().nullable(),createdAt:R.date(),updatedAt:R.date()}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:R.object({errors:R.record(R.string(),R.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:R.object({message:R.string()})}}}}},Tf={method:"get",path:"/scientific-articles/{id}",tags:["Scientific Articles"],summary:"Find scientific article by ID",security:[{bearerAuth:[]}],request:{params:Md},responses:{200:{description:"Scientific article details retrieved successfully",summary:"Article Retrieved",content:{"application/json":{schema:R.object({id:R.string(),title:R.string(),author:R.string(),journal:R.string().nullable(),volume:R.string().nullable(),edition:R.string().nullable(),pageStart:R.number().nullable(),pageEnd:R.number().nullable(),startDate:R.date(),endDate:R.date(),city:R.string().nullable(),state:R.string().nullable(),country:R.string().nullable(),publisher:R.string().nullable(),description:R.string().nullable(),year:R.number().nullable(),accessUrl:R.string().nullable(),createdAt:R.date(),updatedAt:R.date()}).nullable()}}},400:{description:"Invalid article ID format",summary:"Validation Error",content:{"application/json":{schema:R.object({errors:R.record(R.string(),R.string())})}}},404:{description:"Scientific article not found with the provided ID",summary:"Article Not Found",content:{"application/json":{schema:R.object({message:R.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:R.object({message:R.string()})}}}}},Sf={method:"put",path:"/scientific-articles/{id}",tags:["Scientific Articles"],summary:"Update scientific article",security:[{bearerAuth:[]}],request:{params:vd.pick({id:!0}),body:{content:{"application/json":{schema:R.object({title:R.string().min(1).optional().openapi({description:"T\xEDtulo do artigo"}),author:R.string().min(1).optional().openapi({description:"Autor do artigo"}),journal:R.string().optional().openapi({description:"Nome do peri\xF3dico/revista"}),volume:R.string().optional().openapi({description:"Volume"}),edition:R.string().optional().openapi({description:"N\xFAmero/Edi\xE7\xE3o"}),pageStart:R.number().optional().openapi({description:"P\xE1gina inicial"}),pageEnd:R.number().optional().openapi({description:"P\xE1gina final"}),startDate:R.string().optional().openapi({description:"Data de in\xEDcio (ISO 8601)",example:"2024-01-01T10:00:00Z"}),endDate:R.string().optional().openapi({description:"Data de t\xE9rmino (ISO 8601)",example:"2024-12-31T10:00:00Z"}),city:R.string().optional().openapi({description:"Cidade"}),state:R.string().optional().openapi({description:"Estado"}),country:R.string().optional().openapi({description:"Pa\xEDs"}),publisher:R.string().optional().openapi({description:"Editora/Institui\xE7\xE3o"}),description:R.string().optional().openapi({description:"Descri\xE7\xE3o do artigo"}),year:R.number().optional().openapi({description:"Ano"}),accessUrl:R.string().url().optional().openapi({description:"URL de acesso"})})}}}},responses:{200:{description:"Scientific article updated successfully",summary:"Article Updated"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:R.object({errors:R.record(R.string(),R.string())})}}},404:{description:"Scientific article not found with the provided ID",summary:"Article Not Found",content:{"application/json":{schema:R.object({message:R.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:R.object({message:R.string()})}}}}},Af={method:"delete",path:"/scientific-articles/{id}",tags:["Scientific Articles"],summary:"Delete scientific article",security:[{bearerAuth:[]}],request:{params:Ed},responses:{200:{description:"Scientific article deleted successfully",summary:"Article Deleted"},400:{description:"Invalid article ID format",summary:"Validation Error",content:{"application/json":{schema:R.object({errors:R.record(R.string(),R.string())})}}},404:{description:"Scientific article not found with the provided ID",summary:"Article Not Found",content:{"application/json":{schema:R.object({message:R.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:R.object({message:R.string()})}}}}};import M from"zod";import{extendZodWithOpenApi as zA}from"@asteasolutions/zod-to-openapi";import Ud from"zod";zA(Ud);var jd=Ud.object({id:Ud.uuid()}),Gn=class{constructor(e,t){this.scientificJournalRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{id:r}=jd.parse({id:e.params.id}),o=await this.scientificJournalRepository.findById(r);if(!o)throw new c("A revista cient\xEDfica n\xE3o existe.");return o.logoUrl&&this.firebaseStorageService.deleteFile({fileUrl:o.logoUrl}),await this.scientificJournalRepository.deleteById(r),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as ZA}from"@asteasolutions/zod-to-openapi";import Fd from"zod";ZA(Fd);var Dd=Fd.object({id:Fd.uuid()}),Ln=class{constructor(e){this.scientificJournalRepository=e}async handle(e,t){try{let{id:r}=Dd.parse({id:e.params.id}),o=await this.scientificJournalRepository.findById(r);if(!o)throw new c("Revista cient\xEDfica n\xE3o encontrada.");return t.status(200).json(o)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as KA}from"@asteasolutions/zod-to-openapi";import Je from"zod";var JA=1,YA=6;KA(Je);var kd=Je.object({page:Je.coerce.number().min(1).default(JA),limit:Je.coerce.number().min(1).default(YA),name:Je.string().optional(),description:Je.string().optional(),issn:Je.string().optional(),directors:Je.string().optional(),editorialBoard:Je.string().optional(),orderBy:Je.enum(["asc","desc"]).default("desc")}),_n=class{constructor(e){this.scientificJournalRepository=e}async handle(e,t){try{let{limit:r,page:o,...s}=kd.parse(e.query),n=o*r-r,[m,p]=await Promise.all([this.scientificJournalRepository.find({pagination:{offset:n,limit:r},filter:s}),this.scientificJournalRepository.count({filter:s})]),d=Math.max(Math.ceil(p/r),1);return t.status(200).json({page:o,totalPages:d,offset:n,limit:r,scientificJournals:m})}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as XA}from"@asteasolutions/zod-to-openapi";import Ye from"zod";var wf=5,Ef=1024,QA=Ef*Ef,eE=wf*QA;XA(Ye);var Od=Ye.object({id:Ye.uuid(),name:Ye.string().min(1,"Nome \xE9 obrigat\xF3rio.").optional(),issn:Ye.string().min(1,"ISSN \xE9 obrigat\xF3rio.").optional(),description:Ye.string().min(1,"Descri\xE7\xE3o \xE9 obrigat\xF3ria.").optional(),journalUrl:Ye.url("URL da revista deve ser v\xE1lida.").optional(),directors:Ye.string().optional(),editorialBoard:Ye.string().optional(),logo:Ye.any().refine(i=>i==null?!0:typeof i!="object"||typeof i.size!="number"?!1:i.size<=eE,`O logo deve ter no m\xE1ximo ${wf}MB.`).optional()}),Wn=class{constructor(e,t){this.scientificJournalRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{id:r,logo:o,name:s,issn:n,description:m,journalUrl:p,directors:d,editorialBoard:f}=Od.parse({id:e.params.id,...e.body,logo:e.file}),T=await this.scientificJournalRepository.findById(r);if(!T)throw new c("A revista cient\xEDfica n\xE3o existe.");let v=T.logoUrl;return o&&(v=await this.firebaseStorageService.uploadFile({file:o,id:r,folder:E.SCIENTIFIC_JOURNAL})),await this.scientificJournalRepository.update({id:r,name:s,issn:n,description:m,journalUrl:p,directors:d,editorialBoard:f,logoUrl:v}),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var Mf={method:"post",path:"/scientific-journals",tags:["Scientific Journals"],summary:"Create scientific journal",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:M.object({name:M.string().min(1).openapi({description:"Nome da revista cient\xEDfica"}),issn:M.string().min(1).openapi({description:"ISSN da revista"}),description:M.string().min(1).openapi({description:"Descri\xE7\xE3o da revista"}),journalUrl:M.string().url().openapi({description:"URL da revista"}),directors:M.string().optional().openapi({description:"Diretores da revista"}),editorialBoard:M.string().optional().openapi({description:"Conselho editorial"}),logo:M.string().optional().openapi({description:"Logo da revista (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{201:{description:"Scientific journal created successfully",summary:"Journal Created"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:M.object({errors:M.record(M.string(),M.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:M.object({message:M.string()})}}}}},xf={method:"get",path:"/scientific-journals",tags:["Scientific Journals"],summary:"List scientific journals",security:[{bearerAuth:[]}],request:{query:kd},responses:{200:{description:"Paginated list of scientific journals retrieved successfully",summary:"Journals Retrieved",content:{"application/json":{schema:M.object({page:M.number(),totalPages:M.number(),offset:M.number(),limit:M.number(),scientificJournals:M.array(M.object({id:M.string(),name:M.string(),issn:M.string(),description:M.string(),logoUrl:M.string().nullable(),journalUrl:M.string(),directors:M.string().nullable(),editorialBoard:M.string().nullable(),createdAt:M.date(),updatedAt:M.date()}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:M.object({errors:M.record(M.string(),M.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:M.object({message:M.string()})}}}}},vf={method:"get",path:"/scientific-journals/{id}",tags:["Scientific Journals"],summary:"Find scientific journal by ID",security:[{bearerAuth:[]}],request:{params:Dd},responses:{200:{description:"Scientific journal details retrieved successfully",summary:"Journal Retrieved",content:{"application/json":{schema:M.object({id:M.string(),name:M.string(),issn:M.string(),description:M.string(),logoUrl:M.string().nullable(),journalUrl:M.string(),directors:M.string().nullable(),editorialBoard:M.string().nullable(),createdAt:M.date(),updatedAt:M.date()}).nullable()}}},400:{description:"Invalid journal ID format",summary:"Validation Error",content:{"application/json":{schema:M.object({errors:M.record(M.string(),M.string())})}}},404:{description:"Scientific journal not found with the provided ID",summary:"Journal Not Found",content:{"application/json":{schema:M.object({message:M.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:M.object({message:M.string()})}}}}},Uf={method:"put",path:"/scientific-journals/{id}",tags:["Scientific Journals"],summary:"Update scientific journal",security:[{bearerAuth:[]}],request:{params:Od.pick({id:!0}),body:{content:{"multipart/form-data":{schema:M.object({name:M.string().min(1).optional().openapi({description:"Nome da revista cient\xEDfica"}),issn:M.string().min(1).optional().openapi({description:"ISSN da revista"}),description:M.string().min(1).optional().openapi({description:"Descri\xE7\xE3o da revista"}),journalUrl:M.string().url().optional().openapi({description:"URL da revista"}),directors:M.string().optional().openapi({description:"Diretores da revista"}),editorialBoard:M.string().optional().openapi({description:"Conselho editorial"}),logo:M.string().optional().openapi({description:"Logo da revista (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{200:{description:"Scientific journal updated successfully",summary:"Journal Updated"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:M.object({errors:M.record(M.string(),M.string())})}}},404:{description:"Scientific journal not found with the provided ID",summary:"Journal Not Found",content:{"application/json":{schema:M.object({message:M.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:M.object({message:M.string()})}}}}},jf={method:"delete",path:"/scientific-journals/{id}",tags:["Scientific Journals"],summary:"Delete scientific journal",security:[{bearerAuth:[]}],request:{params:jd},responses:{200:{description:"Scientific journal deleted successfully",summary:"Journal Deleted"},400:{description:"Invalid journal ID format",summary:"Validation Error",content:{"application/json":{schema:M.object({errors:M.record(M.string(),M.string())})}}},404:{description:"Scientific journal not found with the provided ID",summary:"Journal Not Found",content:{"application/json":{schema:M.object({message:M.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:M.object({message:M.string()})}}}}};import W from"zod";import{extendZodWithOpenApi as rE}from"@asteasolutions/zod-to-openapi";import xt from"zod";rE(xt);var Bd=xt.object({role:xt.string().min(1),description:xt.string().optional(),userId:xt.uuid(),order:xt.number().optional()}),Hn=class{constructor(e){this.sdhcTeamMemberRepository=e}async handle(e,t){try{let{role:r,description:o,userId:s,order:n}=Bd.parse(e.body);return await this.sdhcTeamMemberRepository.create({role:r,description:o,userId:s,order:n??0}),t.sendStatus(201)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as tE}from"@asteasolutions/zod-to-openapi";import qd from"zod";tE(qd);var Nd=qd.object({id:qd.uuid()}),$n=class{constructor(e){this.sdhcTeamMemberRepository=e}async handle(e,t){try{let{id:r}=Nd.parse({id:e.params.id});if(!await this.sdhcTeamMemberRepository.findById(r))throw new c("O membro da equipe SDHC n\xE3o existe.");return await this.sdhcTeamMemberRepository.deleteById(r),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as iE}from"@asteasolutions/zod-to-openapi";import Gd from"zod";iE(Gd);var zn=Gd.object({id:Gd.uuid()}),Vn=class{constructor(e){this.sdhcTeamMemberRepository=e}async handle(e,t){try{let{id:r}=zn.parse({id:e.params.id}),o=await this.sdhcTeamMemberRepository.findById(r);if(!o)throw new c("O membro da equipe SDHC n\xE3o existe.");return t.status(200).json(o)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as oE}from"@asteasolutions/zod-to-openapi";import Wr from"zod";oE(Wr);var Ld=Wr.object({id:Wr.uuid(),role:Wr.string().min(1).optional(),description:Wr.string().optional(),userId:Wr.uuid().optional(),order:Wr.number().optional()}),Zn=class{constructor(e){this.sdhcTeamMemberRepository=e}async handle(e,t){try{let{id:r,role:o,description:s,userId:n,order:m}=Ld.parse({id:e.params.id,...e.body});if(!await this.sdhcTeamMemberRepository.findById(r))throw new c("O membro da equipe SDHC n\xE3o existe.");return await this.sdhcTeamMemberRepository.update({id:r,role:o,description:s,userId:n,order:m}),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var sE=W.object({id:W.uuid(),name:W.string(),emailAddress:W.string(),avatarUrl:W.string().nullable(),orcid:W.string().nullable(),phone:W.string().nullable(),lattesUrl:W.string().nullable(),role:W.nativeEnum(de)}),Ff=W.object({id:W.uuid(),role:W.string(),description:W.string().nullable(),order:W.number(),createdAt:W.date(),updatedAt:W.date(),userId:W.uuid(),user:sE}),Df={method:"post",path:"/sdhc-team-member",tags:["SDHC Team Members"],summary:"Create a new SDHC Team Member",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:Bd}}}},responses:{201:{description:"SDHC Team Member created successfully",summary:"SDHC Team Member Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:W.object({errors:W.record(W.string(),W.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:W.object({message:W.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:W.object({message:W.string()})}}}}},kf={method:"get",path:"/sdhc-team-member",tags:["SDHC Team Members"],summary:"List all SDHC Team Members with filters",request:{query:W.object({role:W.string().optional(),orderBy:W.enum(["asc","desc"]).optional()})},responses:{200:{description:"List of SDHC Team Members retrieved successfully",summary:"SDHC Team Members Retrieved",content:{"application/json":{schema:W.object({members:W.array(Ff)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:W.object({message:W.string()})}}}}},Of={method:"get",path:"/sdhc-team-member/{id}",tags:["SDHC Team Members"],summary:"Find SDHC Team Member by ID",request:{params:zn},responses:{200:{description:"SDHC Team Member details retrieved successfully",summary:"SDHC Team Member Retrieved",content:{"application/json":{schema:Ff}}},400:{description:"Invalid SDHC Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:W.object({errors:W.record(W.string(),W.string())})}}},404:{description:"SDHC Team Member not found with the provided ID",summary:"SDHC Team Member Not Found",content:{"application/json":{schema:W.object({message:W.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:W.object({message:W.string()})}}}}},Bf={method:"put",path:"/sdhc-team-member/{id}",tags:["SDHC Team Members"],summary:"Update SDHC Team Member",security:[{bearerAuth:[]}],request:{params:zn,body:{content:{"application/json":{schema:Ld.omit({id:!0})}}}},responses:{200:{description:"SDHC Team Member updated successfully",summary:"SDHC Team Member Updated"},400:{description:"Invalid input data or SDHC Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:W.object({errors:W.record(W.string(),W.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:W.object({message:W.string()})}}},404:{description:"SDHC Team Member not found with the provided ID",summary:"SDHC Team Member Not Found",content:{"application/json":{schema:W.object({message:W.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:W.object({message:W.string()})}}}}},qf={method:"delete",path:"/sdhc-team-member/{id}",tags:["SDHC Team Members"],summary:"Delete SDHC Team Member",security:[{bearerAuth:[]}],request:{params:Nd},responses:{200:{description:"SDHC Team Member deleted successfully",summary:"SDHC Team Member Deleted"},400:{description:"Invalid SDHC Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:W.object({errors:W.record(W.string(),W.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:W.object({message:W.string()})}}},404:{description:"SDHC Team Member not found with the provided ID",summary:"SDHC Team Member Not Found",content:{"application/json":{schema:W.object({message:W.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:W.object({message:W.string()})}}}}};import Y from"zod";import{extendZodWithOpenApi as nE}from"@asteasolutions/zod-to-openapi";import _d from"zod";nE(_d);var Wd=_d.object({id:_d.string()}),Kn=class{constructor(e){this.userRepository=e}async handle(e,t){try{let{id:r}=Wd.parse({id:e.params.id}),o=await this.userRepository.findById(r);if(!o)throw new c("O usu\xE1rio n\xE3o existe.");let s=e.user.id;if(o.id!==s)throw new ve("Voc\xEA n\xE3o tem permiss\xE3o para deletar o usu\xE1rio");return await this.userRepository.deleteById(o.id),t.sendStatus(204)}catch(r){if(console.log(r),r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as aE}from"@asteasolutions/zod-to-openapi";import{z as Hd}from"zod";aE(Hd);var $d=Hd.object({id:Hd.string().min(1,"id do usu\xE1rio n\xE3o fornecido.")}),Jn=class{constructor(e){this.userRepository=e}async handle(e,t){try{let{id:r}=$d.parse(e.params),o=await this.userRepository.findById(r);if(!o)throw new c("Usu\xE1rio n\xE3o encontrado");t.status(200).json(o)}catch(r){if(console.log(r),r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as mE}from"@asteasolutions/zod-to-openapi";import Le from"zod";var Gf=2,Nf=1024,pE=Nf*Nf,cE=Gf*pE,dE=/^\d{4}-\d{4}-\d{4}-\d{4}$/,lE=/^\(?\d{2}\)?[\s-]?\d{4,5}-?\d{4}$/;mE(Le);var Vd=Le.object({name:Le.string().optional(),lattesUrl:Le.string().optional(),orcid:Le.union([Le.string().regex(dE,{message:"ORCID inv\xE1lido. Deve estar no formato 0000-0000-0000-0000"}),Le.literal("")]),phone:Le.union([Le.string().regex(lE,{message:"Telefone inv\xE1lido. Deve estar no formato (99) 99999-9999"}),Le.literal("")]),avatarImage:Le.any().refine(i=>i==null?!0:typeof i!="object"||typeof i.size!="number"?!1:i.size<=cE,`A imagem deve ter no m\xE1ximo ${Gf}MB.`).optional()}),Yn=class{constructor(e,t){this.userRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{avatarImage:r,...o}=Vd.parse({...e.body,avatarImage:e.file}),s=e.user.id,n=await this.userRepository.findById(s);if(!n)throw new Pe("O usu\xE1rio n\xE3o existe");let m=n.avatarUrl;return r&&(n.avatarUrl?m=await this.firebaseStorageService.updateFile({file:r,id:s,folder:E.USER,fileUrl:n.avatarUrl}):m=await this.firebaseStorageService.uploadFile({file:r,id:s,folder:E.USER})),await this.userRepository.update({...o,id:s,avatarUrl:m||void 0}),t.sendStatus(204)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var Lf={method:"get",path:"/users/{id}",tags:["Users"],summary:"Find user by ID",request:{params:$d},responses:{200:{description:"User details retrieved successfully",summary:"User Retrieved",content:{"application/json":{schema:Y.object({id:Y.string(),name:Y.string(),createdAt:Y.date(),updatedAt:Y.date(),role:Y.nativeEnum(de),lattesUrl:Y.string().nullable(),orcid:Y.string().nullable(),phone:Y.string().nullable(),avatarUrl:Y.url().nullable(),emailAddress:Y.email()})}}},400:{description:"Invalid user ID format",summary:"Validation Error",content:{"application/json":{schema:Y.object({errors:Y.record(Y.string(),Y.string())})}}},404:{description:"User not found with the provided ID",summary:"User Not Found",content:{"application/json":{schema:Y.object({message:Y.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Y.object({message:Y.string()})}}}}},_f={method:"put",path:"/users",tags:["Users"],summary:"Update authenticated user",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:Vd}}}},responses:{200:{description:"User profile updated successfully",summary:"User Updated",content:{"application/json":{schema:Y.object({message:Y.string()})}}},400:{description:"Invalid input data or file format",summary:"Validation Error",content:{"application/json":{schema:Y.object({errors:Y.record(Y.string(),Y.string())})}}},401:{description:"User not authenticated or unauthorized",summary:"Authentication Required",content:{"application/json":{schema:Y.object({message:Y.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Y.object({message:Y.string()})}}}}},Wf={method:"delete",path:"/users",tags:["Users"],summary:"Delete authenticated user",security:[{bearerAuth:[]}],request:{params:Wd},responses:{200:{description:"User account deleted successfully",summary:"User Deleted",content:{"application/json":{schema:Y.object({message:Y.string()})}}},400:{description:"Invalid request parameters",summary:"Validation Error",content:{"application/json":{schema:Y.object({errors:Y.record(Y.string(),Y.string())})}}},401:{description:"User not authenticated or unauthorized",summary:"Authentication Required",content:{"application/json":{schema:Y.object({message:Y.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Y.object({message:Y.string()})}}}}},Hf={method:"get",path:"/users",tags:["Users"],summary:"List users",responses:{200:{description:"Complete list of users retrieved successfully",summary:"Users Retrieved",content:{"application/json":{schema:Y.array(Y.object({id:Y.string(),name:Y.string(),createdAt:Y.date(),updatedAt:Y.date(),role:Y.nativeEnum(de),lattesUrl:Y.url().nullable(),orcid:Y.string().nullable(),phone:Y.string().nullable(),avatarUrl:Y.string().nullable(),emailAddress:Y.email()}))}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Y.object({message:Y.string()})}}}}};import S from"zod";import{extendZodWithOpenApi as uE}from"@asteasolutions/zod-to-openapi";import zd from"zod";uE(zd);var Zd=zd.object({id:zd.uuid()}),Xn=class{constructor(e,t){this.webinarRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{id:r}=Zd.parse({id:e.params.id}),o=await this.webinarRepository.findById(r);if(!o)throw new c("O webinar n\xE3o existe.");return o.thumbnailUrl&&this.firebaseStorageService.deleteFile({fileUrl:o.thumbnailUrl}),await this.webinarRepository.deleteById(r),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as gE}from"@asteasolutions/zod-to-openapi";import Kd from"zod";gE(Kd);var Jd=Kd.object({id:Kd.uuid()}),Qn=class{constructor(e){this.webinarRepository=e}async handle(e,t){try{let{id:r}=Jd.parse({id:e.params.id}),o=await this.webinarRepository.findById(r);if(!o)throw new c("Webinar n\xE3o encontrado.");return t.status(200).json(o)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as yE}from"@asteasolutions/zod-to-openapi";import Hr from"zod";var fE=1,hE=6;yE(Hr);var Yd=Hr.object({page:Hr.coerce.number().min(1).default(fE),limit:Hr.coerce.number().min(1).default(hE),title:Hr.string().optional(),description:Hr.string().optional(),orderBy:Hr.enum(["asc","desc"]).default("desc")}),ea=class{constructor(e){this.webinarRepository=e}async handle(e,t){try{let{limit:r,page:o,...s}=Yd.parse(e.query),n=o*r-r,[m,p]=await Promise.all([this.webinarRepository.find({pagination:{offset:n,limit:r},filter:s}),this.webinarRepository.count({filter:s})]),d=Math.max(Math.ceil(p/r),1);return t.status(200).json({page:o,totalPages:d,offset:n,limit:r,webinars:m})}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as RE}from"@asteasolutions/zod-to-openapi";import _e from"zod";var Vf=5,$f=1024,PE=$f*$f,bE=Vf*PE;RE(_e);var Xd=_e.object({id:_e.uuid(),title:_e.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio.").optional(),description:_e.string().optional(),scheduledAt:_e.coerce.date().optional(),webinarLink:_e.url("URL do webinar deve ser v\xE1lida").optional(),guestIds:_e.transform(i=>typeof i=="string"?i.split(","):i).pipe(_e.array(_e.uuid())).optional(),thumbnail:_e.any().refine(i=>i==null?!0:typeof i!="object"||typeof i.size!="number"?!1:i.size<=bE,`A thumbnail deve ter no m\xE1ximo ${Vf}MB.`).optional()}),ra=class{constructor(e,t){this.webinarRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{id:r,thumbnail:o,title:s,description:n,scheduledAt:m,webinarLink:p,guestIds:d}=Xd.parse({id:e.params.id,...e.body,thumbnail:e.file}),f=await this.webinarRepository.findById(r);if(!f)throw new c("O webinar n\xE3o existe.");let T=f.thumbnailUrl;if(o&&(T=await this.firebaseStorageService.uploadFile({file:o,id:r,folder:E.WEBINAR})),!T)throw new a("Thumbnail URL \xE9 obrigat\xF3rio");return await this.webinarRepository.update({id:r,title:s,description:n,scheduledAt:m,webinarLink:p,thumbnailUrl:T,guestIds:d}),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var zf={method:"post",path:"/webinars",tags:["Webinars"],summary:"Create webinar",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:S.object({title:S.string().min(1).openapi({description:"T\xEDtulo do webinar"}),description:S.string().optional().openapi({description:"Descri\xE7\xE3o do webinar"}),scheduledAt:S.string().openapi({description:"Data e hora agendada (ISO 8601)",example:"2024-01-01T10:00:00Z"}),webinarLink:S.string().url().optional().openapi({description:"Link do webinar"}),guestIds:S.string().openapi({description:"IDs dos convidados separados por v\xEDrgula",example:"uuid1,uuid2,uuid3"}),thumbnail:S.string().optional().openapi({description:"Imagem de thumbnail (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{201:{description:"Webinar created successfully",summary:"Webinar Created"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:S.object({errors:S.record(S.string(),S.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:S.object({message:S.string()})}}}}},Zf={method:"get",path:"/webinars",tags:["Webinars"],summary:"List webinars",security:[{bearerAuth:[]}],request:{query:Yd},responses:{200:{description:"Paginated list of webinars with guest information retrieved successfully",summary:"Webinars Retrieved",content:{"application/json":{schema:S.object({page:S.number(),totalPages:S.number(),offset:S.number(),limit:S.number(),webinars:S.array(S.object({id:S.string(),title:S.string(),description:S.string().nullable(),scheduledAt:S.date(),webinarLink:S.string().nullable(),thumbnailUrl:S.string().nullable(),createdAt:S.date(),updatedAt:S.date(),guests:S.array(S.object({id:S.uuid(),name:S.string(),emailAddress:S.email(),avatarUrl:S.string().nullable(),createdAt:S.date(),updatedAt:S.date()}))}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:S.object({errors:S.record(S.string(),S.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:S.object({message:S.string()})}}}}},Kf={method:"get",path:"/webinars/{id}",tags:["Webinars"],summary:"Find webinar by ID",security:[{bearerAuth:[]}],request:{params:Jd},responses:{200:{description:"Webinar details retrieved successfully",summary:"Webinar Retrieved",content:{"application/json":{schema:S.object({id:S.string(),title:S.string(),description:S.string().nullable(),scheduledAt:S.date(),webinarLink:S.string().nullable(),thumbnailUrl:S.string().nullable(),createdAt:S.date(),updatedAt:S.date(),guests:S.array(S.object({id:S.uuid(),name:S.string(),emailAddress:S.email(),avatarUrl:S.string().nullable(),createdAt:S.date(),updatedAt:S.date()}))}).nullable()}}},400:{description:"Invalid webinar ID format",summary:"Validation Error",content:{"application/json":{schema:S.object({errors:S.record(S.string(),S.string())})}}},404:{description:"Webinar not found with the provided ID",summary:"Webinar Not Found",content:{"application/json":{schema:S.object({message:S.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:S.object({message:S.string()})}}}}},Jf={method:"put",path:"/webinars/{id}",tags:["Webinars"],summary:"Update webinar",security:[{bearerAuth:[]}],request:{params:Xd.pick({id:!0}),body:{content:{"multipart/form-data":{schema:S.object({title:S.string().min(1).optional().openapi({description:"T\xEDtulo do webinar"}),description:S.string().optional().openapi({description:"Descri\xE7\xE3o do webinar"}),scheduledAt:S.string().optional().openapi({description:"Data e hora agendada (ISO 8601)",example:"2024-01-01T10:00:00Z"}),webinarLink:S.string().url().optional().openapi({description:"Link do webinar"}),guestIds:S.string().optional().openapi({description:"IDs dos convidados separados por v\xEDrgula",example:"uuid1,uuid2,uuid3"}),thumbnail:S.string().optional().openapi({description:"Imagem de thumbnail (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{200:{description:"Webinar updated successfully",summary:"Webinar Updated"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:S.object({errors:S.record(S.string(),S.string())})}}},404:{description:"Webinar not found with the provided ID",summary:"Webinar Not Found",content:{"application/json":{schema:S.object({message:S.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:S.object({message:S.string()})}}}}},Yf={method:"delete",path:"/webinars/{id}",tags:["Webinars"],summary:"Delete webinar",security:[{bearerAuth:[]}],request:{params:Zd},responses:{200:{description:"Webinar deleted successfully",summary:"Webinar Deleted"},400:{description:"Invalid webinar ID format",summary:"Validation Error",content:{"application/json":{schema:S.object({errors:S.record(S.string(),S.string())})}}},404:{description:"Webinar not found with the provided ID",summary:"Webinar Not Found",content:{"application/json":{schema:S.object({message:S.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:S.object({message:S.string()})}}}}};import Z from"zod";import{extendZodWithOpenApi as IE}from"@asteasolutions/zod-to-openapi";import Ri from"zod";IE(Ri);var Qd=Ri.object({role:Ri.string().min(1),description:Ri.string().optional(),userId:Ri.uuid()}),ta=class{constructor(e){this.workGroupTeamMemberRepository=e}async handle(e,t){try{let{role:r,description:o,userId:s}=Qd.parse(e.body);return await this.workGroupTeamMemberRepository.create({role:r,description:o,userId:s}),t.sendStatus(201)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as CE}from"@asteasolutions/zod-to-openapi";import el from"zod";CE(el);var rl=el.object({id:el.uuid()}),ia=class{constructor(e){this.workGroupTeamMemberRepository=e}async handle(e,t){try{let{id:r}=rl.parse({id:e.params.id});if(!await this.workGroupTeamMemberRepository.findById(r))throw new c("O membro do grupo de trabalho n\xE3o existe.");return await this.workGroupTeamMemberRepository.deleteById(r),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as TE}from"@asteasolutions/zod-to-openapi";import tl from"zod";TE(tl);var sa=tl.object({id:tl.uuid()}),oa=class{constructor(e){this.workGroupTeamMemberRepository=e}async handle(e,t){try{let{id:r}=sa.parse({id:e.params.id}),o=await this.workGroupTeamMemberRepository.findById(r);if(!o)throw new c("O membro do grupo de trabalho n\xE3o existe.");return t.status(200).json(o)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as SE}from"@asteasolutions/zod-to-openapi";import vt from"zod";SE(vt);var il=vt.object({id:vt.uuid(),role:vt.string().min(1).optional(),description:vt.string().optional(),userId:vt.uuid().optional()}),na=class{constructor(e){this.workGroupTeamMemberRepository=e}async handle(e,t){try{let{id:r,role:o,description:s,userId:n}=il.parse({id:e.params.id,...e.body});if(!await this.workGroupTeamMemberRepository.findById(r))throw new c("O membro do grupo de trabalho n\xE3o existe.");return await this.workGroupTeamMemberRepository.update({id:r,role:o,description:s,userId:n}),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var AE=Z.object({id:Z.uuid(),name:Z.string(),emailAddress:Z.string(),avatarUrl:Z.string().nullable(),orcid:Z.string().nullable(),phone:Z.string().nullable(),lattesUrl:Z.string().nullable(),role:Z.nativeEnum(de)}),Xf=Z.object({id:Z.uuid(),role:Z.string(),description:Z.string().nullable(),createdAt:Z.date(),updatedAt:Z.date(),userId:Z.uuid(),user:AE}),Qf={method:"post",path:"/work-group-team-member",tags:["Work Group Team Members"],summary:"Create a new Work Group Team Member",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:Qd}}}},responses:{201:{description:"Work Group Team Member created successfully",summary:"Work Group Team Member Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:Z.object({errors:Z.record(Z.string(),Z.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:Z.object({message:Z.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Z.object({message:Z.string()})}}}}},eh={method:"get",path:"/work-group-team-member",tags:["Work Group Team Members"],summary:"List all Work Group Team Members with filters",request:{query:Z.object({role:Z.string().optional(),orderBy:Z.enum(["asc","desc"]).optional()})},responses:{200:{description:"List of Work Group Team Members retrieved successfully",summary:"Work Group Team Members Retrieved",content:{"application/json":{schema:Z.object({members:Z.array(Xf)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Z.object({message:Z.string()})}}}}},rh={method:"get",path:"/work-group-team-member/{id}",tags:["Work Group Team Members"],summary:"Find Work Group Team Member by ID",request:{params:sa},responses:{200:{description:"Work Group Team Member details retrieved successfully",summary:"Work Group Team Member Retrieved",content:{"application/json":{schema:Xf}}},400:{description:"Invalid Work Group Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:Z.object({errors:Z.record(Z.string(),Z.string())})}}},404:{description:"Work Group Team Member not found with the provided ID",summary:"Work Group Team Member Not Found",content:{"application/json":{schema:Z.object({message:Z.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Z.object({message:Z.string()})}}}}},th={method:"put",path:"/work-group-team-member/{id}",tags:["Work Group Team Members"],summary:"Update Work Group Team Member",security:[{bearerAuth:[]}],request:{params:sa,body:{content:{"application/json":{schema:il.omit({id:!0})}}}},responses:{200:{description:"Work Group Team Member updated successfully",summary:"Work Group Team Member Updated"},400:{description:"Invalid input data or Work Group Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:Z.object({errors:Z.record(Z.string(),Z.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:Z.object({message:Z.string()})}}},404:{description:"Work Group Team Member not found with the provided ID",summary:"Work Group Team Member Not Found",content:{"application/json":{schema:Z.object({message:Z.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Z.object({message:Z.string()})}}}}},ih={method:"delete",path:"/work-group-team-member/{id}",tags:["Work Group Team Members"],summary:"Delete Work Group Team Member",security:[{bearerAuth:[]}],request:{params:rl},responses:{200:{description:"Work Group Team Member deleted successfully",summary:"Work Group Team Member Deleted"},400:{description:"Invalid Work Group Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:Z.object({errors:Z.record(Z.string(),Z.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:Z.object({message:Z.string()})}}},404:{description:"Work Group Team Member not found with the provided ID",summary:"Work Group Team Member Not Found",content:{"application/json":{schema:Z.object({message:Z.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Z.object({message:Z.string()})}}}}};var u=new EE;u.registerComponent("securitySchemes","bearerAuth",{type:"http",scheme:"bearer",bearerFormat:"JWT"});u.registerPath(kl);u.registerPath(Ol);u.registerPath(Bl);u.registerPath(ql);u.registerPath(Gl);u.registerPath(Ll);u.registerPath(Nl);u.registerPath(Lf);u.registerPath(_f);u.registerPath(Wf);u.registerPath(Hf);u.registerPath(Gg);u.registerPath(Lg);u.registerPath(_g);u.registerPath(Wg);u.registerPath(Zl);u.registerPath(Kl);u.registerPath(Jl);u.registerPath(Yl);u.registerPath(Xl);u.registerPath(ey);u.registerPath(ry);u.registerPath(ty);u.registerPath(iy);u.registerPath(oy);u.registerPath(Su);u.registerPath(Au);u.registerPath(Eu);u.registerPath(wu);u.registerPath(Mu);u.registerPath(yf);u.registerPath(ff);u.registerPath(hf);u.registerPath(Rf);u.registerPath(Pf);u.registerPath(bf);u.registerPath(au);u.registerPath(mu);u.registerPath(pu);u.registerPath(cu);u.registerPath(du);u.registerPath(Kg);u.registerPath(Jg);u.registerPath(Yg);u.registerPath(Xg);u.registerPath(Qg);u.registerPath(Dg);u.registerPath(kg);u.registerPath(Og);u.registerPath(Bg);u.registerPath(qg);u.registerPath(hy);u.registerPath(Ry);u.registerPath(Py);u.registerPath(by);u.registerPath(Iy);u.registerPath(cg);u.registerPath(dg);u.registerPath(lg);u.registerPath(ug);u.registerPath(gg);u.registerPath(Df);u.registerPath(kf);u.registerPath(Of);u.registerPath(Bf);u.registerPath(qf);u.registerPath(og);u.registerPath(sg);u.registerPath(ng);u.registerPath(ag);u.registerPath(mg);u.registerPath(Fy);u.registerPath(Dy);u.registerPath(ky);u.registerPath(Oy);u.registerPath(By);u.registerPath(qy);u.registerPath(Tg);u.registerPath(Sg);u.registerPath(Ag);u.registerPath(Eg);u.registerPath(wg);u.registerPath(Mg);u.registerPath(Pg);u.registerPath(bg);u.registerPath(Ig);u.registerPath(Cg);u.registerPath($u);u.registerPath(Vu);u.registerPath(zu);u.registerPath(Zu);u.registerPath(Ku);u.registerPath(Ju);u.registerPath(Lu);u.registerPath(_u);u.registerPath(Wu);u.registerPath(Hu);u.registerPath(Fu);u.registerPath(Du);u.registerPath(ku);u.registerPath(Ou);u.registerPath(rf);u.registerPath(tf);u.registerPath(of);u.registerPath(sf);u.registerPath(nf);u.registerPath(af);u.registerPath(Yy);u.registerPath(Xy);u.registerPath(Qy);u.registerPath(ef);u.registerPath(Wy);u.registerPath(Hy);u.registerPath($y);u.registerPath(Vy);u.registerPath(zf);u.registerPath(Zf);u.registerPath(Kf);u.registerPath(Jf);u.registerPath(Yf);u.registerPath(ru);u.registerPath(tu);u.registerPath(iu);u.registerPath(ou);u.registerPath(su);u.registerPath(ay);u.registerPath(my);u.registerPath(py);u.registerPath(cy);u.registerPath(dy);u.registerPath(yu);u.registerPath(fu);u.registerPath(hu);u.registerPath(Ru);u.registerPath(Pu);u.registerPath(Mf);u.registerPath(xf);u.registerPath(vf);u.registerPath(Uf);u.registerPath(jf);u.registerPath(If);u.registerPath(Cf);u.registerPath(Tf);u.registerPath(Sf);u.registerPath(Af);u.registerPath(Wl);u.registerPath(Hl);u.registerPath($l);u.registerPath(Vl);u.registerPath(zl);u.registerPath(Xu);u.registerPath(Qu);u.registerPath(eg);u.registerPath(rg);u.registerPath(tg);u.registerPath(Qf);u.registerPath(eh);u.registerPath(rh);u.registerPath(th);u.registerPath(ih);u.registerPath(Ty);u.registerPath(Sy);u.registerPath(Ay);u.registerPath(Ey);u.registerPath(wy);u.registerPath(cf);u.registerPath(df);u.registerPath(lf);u.registerPath(uf);u.registerPath(gf);var ME=new wE(u.definitions),oh=ME.generateDocument({openapi:"3.0.0",info:{title:"API da Rede CT",version:"1.0.0",description:"API com valida\xE7\xE3o Zod"}});import{Router as GE}from"express";import{extendZodWithOpenApi as xE}from"@asteasolutions/zod-to-openapi";import ol from"zod";xE(ol);var vE=ol.object({authenticatedUserId:ol.uuid()}),aa=class{constructor(e){this.userRepository=e}async handle(e,t){try{let{authenticatedUserId:r}=vE.parse({authenticatedUserId:e.user.id}),o=await this.userRepository.findById(r);if(!o)throw new c("Usu\xE1rio n\xE3o encontrado.");return t.status(200).json(o)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{PrismaPg as kE}from"@prisma/adapter-pg";import*as ah from"path";import{fileURLToPath as DE}from"url";import*as sh from"@prisma/client/runtime/client";var sl={previewFeatures:[],clientVersion:"7.1.0",engineVersion:"ab635e6b9d606fa5c8fb8b1a7f909c3c3c1c98ba",activeProvider:"postgresql",inlineSchema:`generator client {
  provider = "prisma-client"
  output   = "../config/database/generated"
}

datasource db {
  provider = "postgresql"
}

enum UserRole {
  ADMIN
  USER
}

model User {
  id           String   @id @default(uuid())
  name         String
  passwordHash String   @map("password_hash")
  avatarUrl    String?  @map("avatar_url")
  createdAt    DateTime @default(now()) @map("created_at")
  updatedAt    DateTime @updatedAt @map("updated_at")
  emailAddress String   @unique @map("email_address")
  orcid        String?  @map("orcid")
  phone        String?
  lattesUrl    String?  @map("lattes_url")
  role         UserRole @default(USER)

  news                       News[]
  ManagementTeamMember       ManagementTeamMember[]       @relation("ManagementTeamMember")
  SDHCTeamMember             SDHCTeamMember[]             @relation("SDHCTeamMember")
  LegitimatorCommitteeMember LegitimatorCommitteeMember[] @relation("LegitimatorCommitteeMember")
  certification              Certification[]
  pendencies                 Pendency[]
  Researcher                 Researcher[]
  webinars                   Webinar[]

  coursesCoordinated Course[] @relation("CoordinatedCourses")
  coursesInstructed  Course[] @relation("InstructedCourses")

  workGroupTeamMembers       WorkGroupTeamMember[]
  referenceCenterTeamMembers ReferenceCenterTeamMember[]
  researchGroupsLeader       ResearchGroup[]             @relation("LeaderRelation")
  researchGroupsDeputyLeader ResearchGroup[]             @relation("DeputyLeaderRelation")

  @@map("users")
}

model News {
  id        String   @id @default(uuid())
  title     String
  content   String
  imageUrl  String?  @map("image_url")
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  author    User     @relation(fields: [authorId], references: [id])
  authorId  String   @map("author_id")

  @@map("news")
}

model ManagementTeam {
  id          String                 @id @default(uuid())
  name        String
  description String?
  createdAt   DateTime               @default(now()) @map("created_at")
  updatedAt   DateTime               @updatedAt @map("updated_at")
  members     ManagementTeamMember[]

  @@map("management_teams")
}

model ManagementTeamMember {
  id          String         @id @default(uuid())
  role        String
  description String?
  order       Int            @default(0)
  createdAt   DateTime       @default(now()) @map("created_at")
  updatedAt   DateTime       @updatedAt @map("updated_at")
  teamId      String         @map("team_id")
  team        ManagementTeam @relation(fields: [teamId], references: [id], onDelete: Cascade)
  userId      String         @map("user_id")
  user        User           @relation("ManagementTeamMember", fields: [userId], references: [id], onDelete: Cascade)

  @@map("management_team_members")
}

model SDHCTeamMember {
  id          String   @id @default(uuid())
  role        String
  description String?
  order       Int      @default(0)
  createdAt   DateTime @default(now()) @map("created_at")
  updatedAt   DateTime @updatedAt @map("updated_at")
  userId      String   @map("user_id")
  user        User     @relation("SDHCTeamMember", fields: [userId], references: [id], onDelete: Cascade)

  @@map("sdhc_team_members")
}

model LegitimatorCommitteeMember {
  id          String   @id @default(uuid())
  role        String
  description String?
  order       Int      @default(0)
  createdAt   DateTime @default(now()) @map("created_at")
  updatedAt   DateTime @updatedAt @map("updated_at")
  userId      String   @map("user_id")
  user        User     @relation("LegitimatorCommitteeMember", fields: [userId], references: [id], onDelete: Cascade)

  @@map("legitimator_committee_members")
}

model Certification {
  id               String @id @default(uuid())
  title            String
  description      String
  certificationUrl String @map("certification_url")

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  user   User   @relation(fields: [userId], references: [id])
  userId String @map("user_id")

  @@map("certifications")
}

enum PendencyStatus {
  PENDING
  PAID
}

model Pendency {
  id          String         @id @default(uuid())
  title       String
  description String?
  status      PendencyStatus @default(PENDING)
  dueDate     DateTime?      @map("due_date")
  documentUrl String         @map("document_url")

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  user   User   @relation(fields: [userId], references: [id])
  userId String @map("user_id")

  @@map("pendencies")
}

enum Seniority {
  SENIOR
  RESEARCHER
  JUNIOR
  HONOR
}

enum Degree {
  DOCTOR
  MASTER
  BACHELOR
  TECHNICAL
  POSTGRADUATE
}

model Researcher {
  id                 String    @id @default(uuid())
  registrationNumber String    @map("registration_number")
  mainEtps           String?   @map("main_etps")
  formations         String?   @map("formations")
  degrees            Degree[]  @map("degrees")
  occupations        String    @map("occupations")
  seniority          Seniority @map("seniority")
  institutions       String    @map("institutions")
  biography          String?   @map("biography")
  createdAt          DateTime  @default(now()) @map("created_at")
  updatedAt          DateTime  @updatedAt @map("updated_at")

  user   User   @relation(fields: [userId], references: [id])
  userId String @map("user_id")

  etpLeader    ETPLeader[]
  etpDeputy    ETPDeputy[]
  etpSecretary ETPSecretary[]
  etpMembers   ETP[]          @relation("etp_members")

  @@map("researchers")
}

enum InMemoriamRole {
  RESEARCHER
  LEADER
}

model InMemoriam {
  id        String         @id @default(uuid())
  name      String
  birthDate DateTime       @map("birth_date")
  deathDate DateTime       @map("death_date")
  biography String?
  photoUrl  String?        @map("photo_url")
  role      InMemoriamRole

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@map("in_memoriam")
}

model ETPLeader {
  id           String     @id @default(uuid())
  etpId        String     @map("etp_id")
  etp          ETP        @relation(fields: [etpId], references: [id], onDelete: Cascade)
  researcherId String     @map("researcher_id")
  researcher   Researcher @relation(fields: [researcherId], references: [id], onDelete: Cascade)

  @@unique([etpId])
  @@map("etp_leader")
}

model ETPDeputy {
  id           String     @id @default(uuid())
  etpId        String     @map("etp_id")
  etp          ETP        @relation(fields: [etpId], references: [id], onDelete: Cascade)
  researcherId String     @map("researcher_id")
  researcher   Researcher @relation(fields: [researcherId], references: [id], onDelete: Cascade)

  @@unique([etpId])
  @@map("etp_deputy")
}

model ETPSecretary {
  id           String     @id @default(uuid())
  etpId        String     @map("etp_id")
  etp          ETP        @relation(fields: [etpId], references: [id], onDelete: Cascade)
  researcherId String     @map("researcher_id")
  researcher   Researcher @relation(fields: [researcherId], references: [id], onDelete: Cascade)

  @@unique([etpId])
  @@map("etp_secretary")
}

model ETP {
  id          String  @id @default(uuid())
  code        String  @unique
  title       String
  description String?
  notes       String?

  leader       ETPLeader?
  deputyLeader ETPDeputy?
  secretary    ETPSecretary?
  members      Researcher[]  @relation("etp_members")

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@index([code])
  @@map("etps")
}

model Partner {
  id          String   @id @default(uuid())
  name        String
  logoUrl     String?
  websiteUrl  String?
  description String?
  category    String?
  since       DateTime
  isActive    Boolean  @default(true)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@map("partners")
}

enum RegimentStatus {
  DRAFT
  IN_FORCE
  REVOKED
}

model Regiment {
  id          String         @id @default(uuid())
  title       String
  version     String
  publishedAt DateTime       @map("published_at")
  documentUrl String         @map("document_url")
  status      RegimentStatus @default(IN_FORCE)

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@map("regiments")
}

enum MeetingFormat {
  ONLINE
  IN_PERSON
}

enum MeetingStatus {
  PENDING
  CANCELLED
  FINISHED
}

model Meeting {
  id          String         @id @default(uuid())
  title       String
  scheduledAt DateTime       @map("scheduled_at")
  format      MeetingFormat  @default(ONLINE)
  agenda      String
  minutes     MeetingMinute?
  meetingLink String?        @map("meeting_link")
  location    String?        @map("location")
  status      MeetingStatus  @default(PENDING)

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@map("meetings")
}

model MeetingMinute {
  id          String   @id @default(uuid())
  title       String
  publishedAt DateTime @map("published_at")
  documentUrl String   @map("document_url")
  meetingId   String   @unique @map("meeting_id")
  meeting     Meeting  @relation(fields: [meetingId], references: [id], onDelete: Cascade)

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@map("meeting_minutes")
}

model InternationalScientificCongress {
  id             String   @id @default(uuid())
  title          String
  edition        Int      @unique
  startDate      DateTime @map("start_date")
  endDate        DateTime @map("end_date")
  description    String?
  location       String?
  congressLink   String?  @map("congress_link")
  noticeUrl      String?  @map("general_notice_url")
  scheduleUrl    String?  @map("schedule_document_url")
  programUrl     String?  @map("program_document_url")
  adminReportUrl String?  @map("admin_report_document_url")
  proceedingsUrl String?  @map("proceedings_document_url")

  partners  InternationalScientificCongressPartner[]
  galleries InternationalScientificCongressGalleryItem[]

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@index([edition], name: "congress_edition")
  @@map("international_scientific_congresses")
}

model InternationalScientificCongressPartner {
  id      String  @id @default(uuid())
  name    String
  logoUrl String? @map("logo_url")

  congressId String                          @map("congress_id")
  congress   InternationalScientificCongress @relation(fields: [congressId], references: [id], onDelete: Cascade)

  @@index([congressId])
  @@map("international_scientific_congress_partners")
}

model InternationalScientificCongressGalleryItem {
  id       String  @id @default(uuid())
  imageUrl String  @map("image_url")
  caption  String?

  congressId String                          @map("congress_id")
  congress   InternationalScientificCongress @relation(fields: [congressId], references: [id], onDelete: Cascade)

  @@index([congressId])
  @@map("international_scientific_congress_galleries")
}

model RegionalCongress {
  id             String   @id @default(uuid())
  title          String
  edition        Int      @unique
  startDate      DateTime @map("start_date")
  endDate        DateTime @map("end_date")
  description    String?
  location       String?
  congressLink   String?  @map("congress_link")
  noticeUrl      String?  @map("notice_url")
  scheduleUrl    String?  @map("schedule_url")
  programUrl     String?  @map("program_url")
  adminReportUrl String?  @map("admin_report_url")
  proceedingsUrl String?  @map("proceedings_url")

  createdAt                    DateTime                      @default(now()) @map("created_at")
  updatedAt                    DateTime                      @updatedAt @map("updated_at")
  regionalCongressPartners     RegionalCongressPartner[]
  regionalCongressGalleryItems RegionalCongressGalleryItem[]

  @@index([edition], name: "regional_congress_edition")
  @@map("regional_congresses")
}

model RegionalCongressPartner {
  id      String  @id @default(uuid())
  name    String
  logoUrl String? @map("logo_url")

  congressId String           @map("congress_id")
  congress   RegionalCongress @relation(fields: [congressId], references: [id], onDelete: Cascade)

  @@index([congressId])
  @@map("regional_congress_partners")
}

model RegionalCongressGalleryItem {
  id       String  @id @default(uuid())
  imageUrl String  @map("image_url")
  caption  String?

  congressId String           @map("congress_id")
  congress   RegionalCongress @relation(fields: [congressId], references: [id], onDelete: Cascade)

  @@index([congressId])
  @@map("regional_congress_galleries")
}

model Webinar {
  id           String   @id @default(uuid())
  title        String
  description  String?
  scheduledAt  DateTime @map("scheduled_at")
  webinarLink  String?  @map("webinar_link")
  thumbnailUrl String?  @map("thumbnail_url")

  guests User[]

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@map("webinars")
}

model Course {
  id       String  @id @default(uuid())
  title    String
  imageUrl String? @map("image_url")

  coordinator   User   @relation("CoordinatedCourses", fields: [coordinatorId], references: [id])
  coordinatorId String

  instructors User[] @relation("InstructedCourses")

  email            String
  scheduledAt      DateTime @map("scheduled_at")
  location         String
  registrationLink String?  @map("registration_link")
  description      String?

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@index([id], name: "course_id")
  @@map("courses")
}

model PostGraduateProgram {
  id               String   @id @default(uuid())
  title            String
  imageUrl         String?  @map("image_url")
  description      String?
  startDate        DateTime @map("start_date")
  endDate          DateTime @map("end_date")
  contact          String
  registrationLink String?  @map("registration_link")

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@index([id], name: "post_graduate_program_id")
  @@map("post_graduate_programs")
}

enum EventFormat {
  ONLINE
  IN_PERSON
}

enum EventStatus {
  PENDING
  CANCELLED
  FINISHED
}

model Event {
  id          String      @id @default(uuid())
  title       String
  description String?
  imageUrl    String?     @map("image_url")
  startDate   DateTime    @map("start_date")
  endDate     DateTime    @map("end_date")
  location    String?
  status      EventStatus @default(PENDING)
  format      EventFormat @default(ONLINE)
  eventLink   String?     @map("event_link")

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@index([id], name: "event_id")
  @@map("events")
}

model ScientificJournal {
  id             String   @id @default(uuid())
  name           String
  issn           String
  description    String
  logoUrl        String?  @map("logo_url")
  journalUrl     String   @map("journal_url")
  directors      String?  @map("directors")
  editorialBoard String?  @map("editorial_board")
  createdAt      DateTime @default(now()) @map("created_at")
  updatedAt      DateTime @updatedAt @map("updated_at")

  @@index([id], name: "scientific_journal_id")
  @@map("scientific_journals")
}

model BookVolume {
  id              String   @id @default(uuid())
  volumeNumber    Int      @map("volume_number")
  year            Int
  title           String
  author          String
  accessUrl       String?  @map("access_url")
  authorImageUrl  String?  @map("author_image_url")
  coverImageUrl   String?  @map("cover_image_url")
  catalogSheetUrl String?  @map("catalog_sheet_url")
  description     String?
  createdAt       DateTime @default(now()) @map("created_at")
  updatedAt       DateTime @updatedAt @map("updated_at")

  @@index([id], name: "book_volume_id")
  @@map("book_volumes")
}

model ScientificArticle {
  id      String  @id @default(uuid())
  title   String
  author  String
  journal String?
  volume  String?
  edition String?

  pageStart Int? @map("page_start")
  pageEnd   Int? @map("page_end")

  startDate DateTime @map("start_date")
  endDate   DateTime @map("end_date")

  city        String?
  state       String?
  country     String?
  publisher   String?
  description String?
  year        Int?

  accessUrl String? @map("access_url")

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@index([id], name: "scientific_article_id")
  @@map("scientific_articles")
}

model WorkGroupTeamMember {
  id          String   @id @default(uuid())
  role        String
  description String?
  createdAt   DateTime @default(now()) @map("created_at")
  updatedAt   DateTime @updatedAt @map("updated_at")

  userId String @map("user_id")
  user   User   @relation(fields: [userId], references: [id])

  @@index([id], name: "work_group_team_member_id")
  @@map("work_group_team_members")
}

model ReferenceCenterTeamMember {
  id          String   @id @default(uuid())
  role        String
  description String?
  createdAt   DateTime @default(now()) @map("created_at")
  updatedAt   DateTime @updatedAt @map("updated_at")

  userId String @map("user_id")
  user   User   @relation(fields: [userId], references: [id])

  @@index([id], name: "reference_center_team_member_id")
  @@map("reference_center_team_members")
}

model Law {
  id        String   @id @default(uuid())
  title     String
  link      String
  country   String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@index([id], name: "law_id")
  @@map("laws")
}

model ResearchGroup {
  id          String   @id @default(uuid())
  name        String
  acronym     String?
  description String?
  url         String?
  logoUrl     String?  @map("logo_url")
  foundedAt   DateTime @map("founded_at")
  scope       String?
  email       String?

  leader   User   @relation("LeaderRelation", fields: [leaderId], references: [id])
  leaderId String

  deputyLeader   User   @relation("DeputyLeaderRelation", fields: [deputyLeaderId], references: [id])
  deputyLeaderId String

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@index([id], name: "research_group_id")
  @@map("research_groups")
}

model Museum {
  id String @id @default(uuid())

  logoUrl String? @map("logo_url")

  name    String
  city    String?
  state   String?
  country String?

  description String?
  website     String?
  email       String?
  phone       String?
  address     String?
  functioning String?

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@index([id], name: "museum_id")
  @@map("museums")
}

enum RedeCTHighlightType {
  PERSON
  INSTITUTION
}

model RedeCTHighlight {
  id               String              @id @default(uuid())
  type             RedeCTHighlightType
  name             String
  description      String?
  honorableMention String?             @map("honorable_mention")
  imageUrl         String?             @map("image_url")
  honoredAt        DateTime            @map("honored_at")
  meritUrl         String?             @map("merit_url")

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@index([id], name: "redect_highlight_id")
  @@map("redect_highlights")
}
`,runtimeDataModel:{models:{},enums:{},types:{}}};sl.runtimeDataModel=JSON.parse('{"models":{"User":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"name","kind":"scalar","type":"String"},{"name":"passwordHash","kind":"scalar","type":"String","dbName":"password_hash"},{"name":"avatarUrl","kind":"scalar","type":"String","dbName":"avatar_url"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"},{"name":"emailAddress","kind":"scalar","type":"String","dbName":"email_address"},{"name":"orcid","kind":"scalar","type":"String","dbName":"orcid"},{"name":"phone","kind":"scalar","type":"String"},{"name":"lattesUrl","kind":"scalar","type":"String","dbName":"lattes_url"},{"name":"role","kind":"enum","type":"UserRole"},{"name":"news","kind":"object","type":"News","relationName":"NewsToUser"},{"name":"ManagementTeamMember","kind":"object","type":"ManagementTeamMember","relationName":"ManagementTeamMember"},{"name":"SDHCTeamMember","kind":"object","type":"SDHCTeamMember","relationName":"SDHCTeamMember"},{"name":"LegitimatorCommitteeMember","kind":"object","type":"LegitimatorCommitteeMember","relationName":"LegitimatorCommitteeMember"},{"name":"certification","kind":"object","type":"Certification","relationName":"CertificationToUser"},{"name":"pendencies","kind":"object","type":"Pendency","relationName":"PendencyToUser"},{"name":"Researcher","kind":"object","type":"Researcher","relationName":"ResearcherToUser"},{"name":"webinars","kind":"object","type":"Webinar","relationName":"UserToWebinar"},{"name":"coursesCoordinated","kind":"object","type":"Course","relationName":"CoordinatedCourses"},{"name":"coursesInstructed","kind":"object","type":"Course","relationName":"InstructedCourses"},{"name":"workGroupTeamMembers","kind":"object","type":"WorkGroupTeamMember","relationName":"UserToWorkGroupTeamMember"},{"name":"referenceCenterTeamMembers","kind":"object","type":"ReferenceCenterTeamMember","relationName":"ReferenceCenterTeamMemberToUser"},{"name":"researchGroupsLeader","kind":"object","type":"ResearchGroup","relationName":"LeaderRelation"},{"name":"researchGroupsDeputyLeader","kind":"object","type":"ResearchGroup","relationName":"DeputyLeaderRelation"}],"dbName":"users"},"News":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"title","kind":"scalar","type":"String"},{"name":"content","kind":"scalar","type":"String"},{"name":"imageUrl","kind":"scalar","type":"String","dbName":"image_url"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"},{"name":"author","kind":"object","type":"User","relationName":"NewsToUser"},{"name":"authorId","kind":"scalar","type":"String","dbName":"author_id"}],"dbName":"news"},"ManagementTeam":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"name","kind":"scalar","type":"String"},{"name":"description","kind":"scalar","type":"String"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"},{"name":"members","kind":"object","type":"ManagementTeamMember","relationName":"ManagementTeamToManagementTeamMember"}],"dbName":"management_teams"},"ManagementTeamMember":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"role","kind":"scalar","type":"String"},{"name":"description","kind":"scalar","type":"String"},{"name":"order","kind":"scalar","type":"Int"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"},{"name":"teamId","kind":"scalar","type":"String","dbName":"team_id"},{"name":"team","kind":"object","type":"ManagementTeam","relationName":"ManagementTeamToManagementTeamMember"},{"name":"userId","kind":"scalar","type":"String","dbName":"user_id"},{"name":"user","kind":"object","type":"User","relationName":"ManagementTeamMember"}],"dbName":"management_team_members"},"SDHCTeamMember":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"role","kind":"scalar","type":"String"},{"name":"description","kind":"scalar","type":"String"},{"name":"order","kind":"scalar","type":"Int"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"},{"name":"userId","kind":"scalar","type":"String","dbName":"user_id"},{"name":"user","kind":"object","type":"User","relationName":"SDHCTeamMember"}],"dbName":"sdhc_team_members"},"LegitimatorCommitteeMember":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"role","kind":"scalar","type":"String"},{"name":"description","kind":"scalar","type":"String"},{"name":"order","kind":"scalar","type":"Int"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"},{"name":"userId","kind":"scalar","type":"String","dbName":"user_id"},{"name":"user","kind":"object","type":"User","relationName":"LegitimatorCommitteeMember"}],"dbName":"legitimator_committee_members"},"Certification":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"title","kind":"scalar","type":"String"},{"name":"description","kind":"scalar","type":"String"},{"name":"certificationUrl","kind":"scalar","type":"String","dbName":"certification_url"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"},{"name":"user","kind":"object","type":"User","relationName":"CertificationToUser"},{"name":"userId","kind":"scalar","type":"String","dbName":"user_id"}],"dbName":"certifications"},"Pendency":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"title","kind":"scalar","type":"String"},{"name":"description","kind":"scalar","type":"String"},{"name":"status","kind":"enum","type":"PendencyStatus"},{"name":"dueDate","kind":"scalar","type":"DateTime","dbName":"due_date"},{"name":"documentUrl","kind":"scalar","type":"String","dbName":"document_url"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"},{"name":"user","kind":"object","type":"User","relationName":"PendencyToUser"},{"name":"userId","kind":"scalar","type":"String","dbName":"user_id"}],"dbName":"pendencies"},"Researcher":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"registrationNumber","kind":"scalar","type":"String","dbName":"registration_number"},{"name":"mainEtps","kind":"scalar","type":"String","dbName":"main_etps"},{"name":"formations","kind":"scalar","type":"String","dbName":"formations"},{"name":"degrees","kind":"enum","type":"Degree","dbName":"degrees"},{"name":"occupations","kind":"scalar","type":"String","dbName":"occupations"},{"name":"seniority","kind":"enum","type":"Seniority","dbName":"seniority"},{"name":"institutions","kind":"scalar","type":"String","dbName":"institutions"},{"name":"biography","kind":"scalar","type":"String","dbName":"biography"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"},{"name":"user","kind":"object","type":"User","relationName":"ResearcherToUser"},{"name":"userId","kind":"scalar","type":"String","dbName":"user_id"},{"name":"etpLeader","kind":"object","type":"ETPLeader","relationName":"ETPLeaderToResearcher"},{"name":"etpDeputy","kind":"object","type":"ETPDeputy","relationName":"ETPDeputyToResearcher"},{"name":"etpSecretary","kind":"object","type":"ETPSecretary","relationName":"ETPSecretaryToResearcher"},{"name":"etpMembers","kind":"object","type":"ETP","relationName":"etp_members"}],"dbName":"researchers"},"InMemoriam":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"name","kind":"scalar","type":"String"},{"name":"birthDate","kind":"scalar","type":"DateTime","dbName":"birth_date"},{"name":"deathDate","kind":"scalar","type":"DateTime","dbName":"death_date"},{"name":"biography","kind":"scalar","type":"String"},{"name":"photoUrl","kind":"scalar","type":"String","dbName":"photo_url"},{"name":"role","kind":"enum","type":"InMemoriamRole"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"}],"dbName":"in_memoriam"},"ETPLeader":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"etpId","kind":"scalar","type":"String","dbName":"etp_id"},{"name":"etp","kind":"object","type":"ETP","relationName":"ETPToETPLeader"},{"name":"researcherId","kind":"scalar","type":"String","dbName":"researcher_id"},{"name":"researcher","kind":"object","type":"Researcher","relationName":"ETPLeaderToResearcher"}],"dbName":"etp_leader"},"ETPDeputy":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"etpId","kind":"scalar","type":"String","dbName":"etp_id"},{"name":"etp","kind":"object","type":"ETP","relationName":"ETPToETPDeputy"},{"name":"researcherId","kind":"scalar","type":"String","dbName":"researcher_id"},{"name":"researcher","kind":"object","type":"Researcher","relationName":"ETPDeputyToResearcher"}],"dbName":"etp_deputy"},"ETPSecretary":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"etpId","kind":"scalar","type":"String","dbName":"etp_id"},{"name":"etp","kind":"object","type":"ETP","relationName":"ETPToETPSecretary"},{"name":"researcherId","kind":"scalar","type":"String","dbName":"researcher_id"},{"name":"researcher","kind":"object","type":"Researcher","relationName":"ETPSecretaryToResearcher"}],"dbName":"etp_secretary"},"ETP":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"code","kind":"scalar","type":"String"},{"name":"title","kind":"scalar","type":"String"},{"name":"description","kind":"scalar","type":"String"},{"name":"notes","kind":"scalar","type":"String"},{"name":"leader","kind":"object","type":"ETPLeader","relationName":"ETPToETPLeader"},{"name":"deputyLeader","kind":"object","type":"ETPDeputy","relationName":"ETPToETPDeputy"},{"name":"secretary","kind":"object","type":"ETPSecretary","relationName":"ETPToETPSecretary"},{"name":"members","kind":"object","type":"Researcher","relationName":"etp_members"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"}],"dbName":"etps"},"Partner":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"name","kind":"scalar","type":"String"},{"name":"logoUrl","kind":"scalar","type":"String"},{"name":"websiteUrl","kind":"scalar","type":"String"},{"name":"description","kind":"scalar","type":"String"},{"name":"category","kind":"scalar","type":"String"},{"name":"since","kind":"scalar","type":"DateTime"},{"name":"isActive","kind":"scalar","type":"Boolean"},{"name":"createdAt","kind":"scalar","type":"DateTime"},{"name":"updatedAt","kind":"scalar","type":"DateTime"}],"dbName":"partners"},"Regiment":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"title","kind":"scalar","type":"String"},{"name":"version","kind":"scalar","type":"String"},{"name":"publishedAt","kind":"scalar","type":"DateTime","dbName":"published_at"},{"name":"documentUrl","kind":"scalar","type":"String","dbName":"document_url"},{"name":"status","kind":"enum","type":"RegimentStatus"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"}],"dbName":"regiments"},"Meeting":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"title","kind":"scalar","type":"String"},{"name":"scheduledAt","kind":"scalar","type":"DateTime","dbName":"scheduled_at"},{"name":"format","kind":"enum","type":"MeetingFormat"},{"name":"agenda","kind":"scalar","type":"String"},{"name":"minutes","kind":"object","type":"MeetingMinute","relationName":"MeetingToMeetingMinute"},{"name":"meetingLink","kind":"scalar","type":"String","dbName":"meeting_link"},{"name":"location","kind":"scalar","type":"String","dbName":"location"},{"name":"status","kind":"enum","type":"MeetingStatus"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"}],"dbName":"meetings"},"MeetingMinute":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"title","kind":"scalar","type":"String"},{"name":"publishedAt","kind":"scalar","type":"DateTime","dbName":"published_at"},{"name":"documentUrl","kind":"scalar","type":"String","dbName":"document_url"},{"name":"meetingId","kind":"scalar","type":"String","dbName":"meeting_id"},{"name":"meeting","kind":"object","type":"Meeting","relationName":"MeetingToMeetingMinute"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"}],"dbName":"meeting_minutes"},"InternationalScientificCongress":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"title","kind":"scalar","type":"String"},{"name":"edition","kind":"scalar","type":"Int"},{"name":"startDate","kind":"scalar","type":"DateTime","dbName":"start_date"},{"name":"endDate","kind":"scalar","type":"DateTime","dbName":"end_date"},{"name":"description","kind":"scalar","type":"String"},{"name":"location","kind":"scalar","type":"String"},{"name":"congressLink","kind":"scalar","type":"String","dbName":"congress_link"},{"name":"noticeUrl","kind":"scalar","type":"String","dbName":"general_notice_url"},{"name":"scheduleUrl","kind":"scalar","type":"String","dbName":"schedule_document_url"},{"name":"programUrl","kind":"scalar","type":"String","dbName":"program_document_url"},{"name":"adminReportUrl","kind":"scalar","type":"String","dbName":"admin_report_document_url"},{"name":"proceedingsUrl","kind":"scalar","type":"String","dbName":"proceedings_document_url"},{"name":"partners","kind":"object","type":"InternationalScientificCongressPartner","relationName":"InternationalScientificCongressToInternationalScientificCongressPartner"},{"name":"galleries","kind":"object","type":"InternationalScientificCongressGalleryItem","relationName":"InternationalScientificCongressToInternationalScientificCongressGalleryItem"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"}],"dbName":"international_scientific_congresses"},"InternationalScientificCongressPartner":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"name","kind":"scalar","type":"String"},{"name":"logoUrl","kind":"scalar","type":"String","dbName":"logo_url"},{"name":"congressId","kind":"scalar","type":"String","dbName":"congress_id"},{"name":"congress","kind":"object","type":"InternationalScientificCongress","relationName":"InternationalScientificCongressToInternationalScientificCongressPartner"}],"dbName":"international_scientific_congress_partners"},"InternationalScientificCongressGalleryItem":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"imageUrl","kind":"scalar","type":"String","dbName":"image_url"},{"name":"caption","kind":"scalar","type":"String"},{"name":"congressId","kind":"scalar","type":"String","dbName":"congress_id"},{"name":"congress","kind":"object","type":"InternationalScientificCongress","relationName":"InternationalScientificCongressToInternationalScientificCongressGalleryItem"}],"dbName":"international_scientific_congress_galleries"},"RegionalCongress":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"title","kind":"scalar","type":"String"},{"name":"edition","kind":"scalar","type":"Int"},{"name":"startDate","kind":"scalar","type":"DateTime","dbName":"start_date"},{"name":"endDate","kind":"scalar","type":"DateTime","dbName":"end_date"},{"name":"description","kind":"scalar","type":"String"},{"name":"location","kind":"scalar","type":"String"},{"name":"congressLink","kind":"scalar","type":"String","dbName":"congress_link"},{"name":"noticeUrl","kind":"scalar","type":"String","dbName":"notice_url"},{"name":"scheduleUrl","kind":"scalar","type":"String","dbName":"schedule_url"},{"name":"programUrl","kind":"scalar","type":"String","dbName":"program_url"},{"name":"adminReportUrl","kind":"scalar","type":"String","dbName":"admin_report_url"},{"name":"proceedingsUrl","kind":"scalar","type":"String","dbName":"proceedings_url"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"},{"name":"regionalCongressPartners","kind":"object","type":"RegionalCongressPartner","relationName":"RegionalCongressToRegionalCongressPartner"},{"name":"regionalCongressGalleryItems","kind":"object","type":"RegionalCongressGalleryItem","relationName":"RegionalCongressToRegionalCongressGalleryItem"}],"dbName":"regional_congresses"},"RegionalCongressPartner":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"name","kind":"scalar","type":"String"},{"name":"logoUrl","kind":"scalar","type":"String","dbName":"logo_url"},{"name":"congressId","kind":"scalar","type":"String","dbName":"congress_id"},{"name":"congress","kind":"object","type":"RegionalCongress","relationName":"RegionalCongressToRegionalCongressPartner"}],"dbName":"regional_congress_partners"},"RegionalCongressGalleryItem":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"imageUrl","kind":"scalar","type":"String","dbName":"image_url"},{"name":"caption","kind":"scalar","type":"String"},{"name":"congressId","kind":"scalar","type":"String","dbName":"congress_id"},{"name":"congress","kind":"object","type":"RegionalCongress","relationName":"RegionalCongressToRegionalCongressGalleryItem"}],"dbName":"regional_congress_galleries"},"Webinar":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"title","kind":"scalar","type":"String"},{"name":"description","kind":"scalar","type":"String"},{"name":"scheduledAt","kind":"scalar","type":"DateTime","dbName":"scheduled_at"},{"name":"webinarLink","kind":"scalar","type":"String","dbName":"webinar_link"},{"name":"thumbnailUrl","kind":"scalar","type":"String","dbName":"thumbnail_url"},{"name":"guests","kind":"object","type":"User","relationName":"UserToWebinar"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"}],"dbName":"webinars"},"Course":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"title","kind":"scalar","type":"String"},{"name":"imageUrl","kind":"scalar","type":"String","dbName":"image_url"},{"name":"coordinator","kind":"object","type":"User","relationName":"CoordinatedCourses"},{"name":"coordinatorId","kind":"scalar","type":"String"},{"name":"instructors","kind":"object","type":"User","relationName":"InstructedCourses"},{"name":"email","kind":"scalar","type":"String"},{"name":"scheduledAt","kind":"scalar","type":"DateTime","dbName":"scheduled_at"},{"name":"location","kind":"scalar","type":"String"},{"name":"registrationLink","kind":"scalar","type":"String","dbName":"registration_link"},{"name":"description","kind":"scalar","type":"String"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"}],"dbName":"courses"},"PostGraduateProgram":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"title","kind":"scalar","type":"String"},{"name":"imageUrl","kind":"scalar","type":"String","dbName":"image_url"},{"name":"description","kind":"scalar","type":"String"},{"name":"startDate","kind":"scalar","type":"DateTime","dbName":"start_date"},{"name":"endDate","kind":"scalar","type":"DateTime","dbName":"end_date"},{"name":"contact","kind":"scalar","type":"String"},{"name":"registrationLink","kind":"scalar","type":"String","dbName":"registration_link"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"}],"dbName":"post_graduate_programs"},"Event":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"title","kind":"scalar","type":"String"},{"name":"description","kind":"scalar","type":"String"},{"name":"imageUrl","kind":"scalar","type":"String","dbName":"image_url"},{"name":"startDate","kind":"scalar","type":"DateTime","dbName":"start_date"},{"name":"endDate","kind":"scalar","type":"DateTime","dbName":"end_date"},{"name":"location","kind":"scalar","type":"String"},{"name":"status","kind":"enum","type":"EventStatus"},{"name":"format","kind":"enum","type":"EventFormat"},{"name":"eventLink","kind":"scalar","type":"String","dbName":"event_link"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"}],"dbName":"events"},"ScientificJournal":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"name","kind":"scalar","type":"String"},{"name":"issn","kind":"scalar","type":"String"},{"name":"description","kind":"scalar","type":"String"},{"name":"logoUrl","kind":"scalar","type":"String","dbName":"logo_url"},{"name":"journalUrl","kind":"scalar","type":"String","dbName":"journal_url"},{"name":"directors","kind":"scalar","type":"String","dbName":"directors"},{"name":"editorialBoard","kind":"scalar","type":"String","dbName":"editorial_board"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"}],"dbName":"scientific_journals"},"BookVolume":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"volumeNumber","kind":"scalar","type":"Int","dbName":"volume_number"},{"name":"year","kind":"scalar","type":"Int"},{"name":"title","kind":"scalar","type":"String"},{"name":"author","kind":"scalar","type":"String"},{"name":"accessUrl","kind":"scalar","type":"String","dbName":"access_url"},{"name":"authorImageUrl","kind":"scalar","type":"String","dbName":"author_image_url"},{"name":"coverImageUrl","kind":"scalar","type":"String","dbName":"cover_image_url"},{"name":"catalogSheetUrl","kind":"scalar","type":"String","dbName":"catalog_sheet_url"},{"name":"description","kind":"scalar","type":"String"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"}],"dbName":"book_volumes"},"ScientificArticle":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"title","kind":"scalar","type":"String"},{"name":"author","kind":"scalar","type":"String"},{"name":"journal","kind":"scalar","type":"String"},{"name":"volume","kind":"scalar","type":"String"},{"name":"edition","kind":"scalar","type":"String"},{"name":"pageStart","kind":"scalar","type":"Int","dbName":"page_start"},{"name":"pageEnd","kind":"scalar","type":"Int","dbName":"page_end"},{"name":"startDate","kind":"scalar","type":"DateTime","dbName":"start_date"},{"name":"endDate","kind":"scalar","type":"DateTime","dbName":"end_date"},{"name":"city","kind":"scalar","type":"String"},{"name":"state","kind":"scalar","type":"String"},{"name":"country","kind":"scalar","type":"String"},{"name":"publisher","kind":"scalar","type":"String"},{"name":"description","kind":"scalar","type":"String"},{"name":"year","kind":"scalar","type":"Int"},{"name":"accessUrl","kind":"scalar","type":"String","dbName":"access_url"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"}],"dbName":"scientific_articles"},"WorkGroupTeamMember":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"role","kind":"scalar","type":"String"},{"name":"description","kind":"scalar","type":"String"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"},{"name":"userId","kind":"scalar","type":"String","dbName":"user_id"},{"name":"user","kind":"object","type":"User","relationName":"UserToWorkGroupTeamMember"}],"dbName":"work_group_team_members"},"ReferenceCenterTeamMember":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"role","kind":"scalar","type":"String"},{"name":"description","kind":"scalar","type":"String"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"},{"name":"userId","kind":"scalar","type":"String","dbName":"user_id"},{"name":"user","kind":"object","type":"User","relationName":"ReferenceCenterTeamMemberToUser"}],"dbName":"reference_center_team_members"},"Law":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"title","kind":"scalar","type":"String"},{"name":"link","kind":"scalar","type":"String"},{"name":"country","kind":"scalar","type":"String"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"}],"dbName":"laws"},"ResearchGroup":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"name","kind":"scalar","type":"String"},{"name":"acronym","kind":"scalar","type":"String"},{"name":"description","kind":"scalar","type":"String"},{"name":"url","kind":"scalar","type":"String"},{"name":"logoUrl","kind":"scalar","type":"String","dbName":"logo_url"},{"name":"foundedAt","kind":"scalar","type":"DateTime","dbName":"founded_at"},{"name":"scope","kind":"scalar","type":"String"},{"name":"email","kind":"scalar","type":"String"},{"name":"leader","kind":"object","type":"User","relationName":"LeaderRelation"},{"name":"leaderId","kind":"scalar","type":"String"},{"name":"deputyLeader","kind":"object","type":"User","relationName":"DeputyLeaderRelation"},{"name":"deputyLeaderId","kind":"scalar","type":"String"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"}],"dbName":"research_groups"},"Museum":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"logoUrl","kind":"scalar","type":"String","dbName":"logo_url"},{"name":"name","kind":"scalar","type":"String"},{"name":"city","kind":"scalar","type":"String"},{"name":"state","kind":"scalar","type":"String"},{"name":"country","kind":"scalar","type":"String"},{"name":"description","kind":"scalar","type":"String"},{"name":"website","kind":"scalar","type":"String"},{"name":"email","kind":"scalar","type":"String"},{"name":"phone","kind":"scalar","type":"String"},{"name":"address","kind":"scalar","type":"String"},{"name":"functioning","kind":"scalar","type":"String"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"}],"dbName":"museums"},"RedeCTHighlight":{"fields":[{"name":"id","kind":"scalar","type":"String"},{"name":"type","kind":"enum","type":"RedeCTHighlightType"},{"name":"name","kind":"scalar","type":"String"},{"name":"description","kind":"scalar","type":"String"},{"name":"honorableMention","kind":"scalar","type":"String","dbName":"honorable_mention"},{"name":"imageUrl","kind":"scalar","type":"String","dbName":"image_url"},{"name":"honoredAt","kind":"scalar","type":"DateTime","dbName":"honored_at"},{"name":"meritUrl","kind":"scalar","type":"String","dbName":"merit_url"},{"name":"createdAt","kind":"scalar","type":"DateTime","dbName":"created_at"},{"name":"updatedAt","kind":"scalar","type":"DateTime","dbName":"updated_at"}],"dbName":"redect_highlights"}},"enums":{},"types":{}}');async function UE(i){let{Buffer:e}=await import("buffer"),t=e.from(i,"base64");return new WebAssembly.Module(t)}sl.compilerWasm={getRuntime:async()=>await import("@prisma/client/runtime/query_compiler_bg.postgresql.mjs"),getQueryCompilerWasmModule:async()=>{let{wasm:i}=await import("@prisma/client/runtime/query_compiler_bg.postgresql.wasm-base64.mjs");return await UE(i)}};function nh(){return sh.getPrismaClient(sl)}import*as pe from"@prisma/client/runtime/client";var q2=pe.Extensions.getExtensionContext;var N2={DbNull:pe.NullTypes.DbNull,JsonNull:pe.NullTypes.JsonNull,AnyNull:pe.NullTypes.AnyNull};var G2=pe.makeStrictEnum({ReadUncommitted:"ReadUncommitted",ReadCommitted:"ReadCommitted",RepeatableRead:"RepeatableRead",Serializable:"Serializable"});var L2=pe.Extensions.defineExtension;globalThis.__dirname=ah.dirname(DE(import.meta.url));var mh=nh();var OE=new kE({connection:{url:"postgresql://localhost:5432/rede-ct"}}),B=new mh({log:["warn","error"],adapter:OE});var ma=class{constructor(e){this.prisma=e}async register({userId:e,title:t,description:r,certificationUrl:o}){await this.prisma.certification.create({data:{title:t,description:r,certificationUrl:o,user:{connect:{id:e}}}})}async find({pagination:{offset:e,limit:t},filter:{description:r,orderBy:o,title:s,userId:n}}){let m={},p=[];return n&&(m.userId=n),s&&p.push({title:{contains:s,mode:"insensitive"}}),r&&p.push({description:{contains:r,mode:"insensitive"}}),p.length>0&&(m.OR=p),await this.prisma.certification.findMany({where:m,include:{user:{omit:{passwordHash:!0}}},orderBy:{updatedAt:o},skip:e,take:t})}async findById(e){return await this.prisma.certification.findFirst({where:{id:e}})}async findByUserId({pagination:{limit:e,offset:t},filter:{description:r,orderBy:o,title:s},userId:n}){let m={userId:n},p=[];return s&&p.push({title:{contains:s,mode:"insensitive"}}),r&&p.push({description:{contains:r,mode:"insensitive"}}),p.length>0&&(m.OR=p),await this.prisma.certification.findMany({where:m,include:{user:{omit:{passwordHash:!0}}},skip:t,take:e,orderBy:o?{updatedAt:o}:{updatedAt:"desc"}})}async update({id:e,...t}){await this.prisma.certification.update({where:{id:e},data:t})}async deleteById(e){await this.prisma.certification.delete({where:{id:e}})}async count({filter:{description:e,title:t,userId:r}}){let o={},s=[];return r&&(o.userId=r),t&&s.push({title:{contains:t,mode:"insensitive"}}),e&&s.push({description:{contains:e,mode:"insensitive"}}),s.length>0&&(o.OR=s),await this.prisma.certification.count({where:o})}};function jr(){return new ma(B)}var pa=class{constructor(e){this.prisma=e}async create(e){await this.prisma.news.create({data:e})}async find({pagination:{offset:e,limit:t},filter:{authorId:r,content:o,title:s,orderBy:n}}){let m={};r&&(m.authorId={contains:r,mode:"insensitive"});let p=[];return s&&p.push({title:{contains:s,mode:"insensitive"}}),o&&p.push({content:{contains:o,mode:"insensitive"}}),p.length>0&&(m.OR=p),await this.prisma.news.findMany({where:m,omit:{authorId:!0},include:{author:!0},orderBy:{updatedAt:n},skip:e,take:t})}async findById(e){return await this.prisma.news.findUnique({where:{id:e},omit:{authorId:!0},include:{author:!0}})}async findByAuthorId({authorId:e,pagination:{offset:t,limit:r},filter:{orderBy:o="desc",content:s,title:n}}){let m={authorId:e},p=[];return n&&p.push({title:{contains:n,mode:"insensitive"}}),s&&p.push({content:{contains:s,mode:"insensitive"}}),p.length>0&&(m.OR=p),await this.prisma.news.findMany({omit:{authorId:!0},where:m,orderBy:{updatedAt:o},skip:t,take:r})}async update(e){await this.prisma.news.update({where:{id:e.id},data:{title:e.title,content:e.content,imageUrl:e.imageUrl}})}async delete(e){await this.prisma.news.delete({where:{id:e}})}async count({filter:{authorId:e,content:t,title:r}}){let o={};e&&(o.authorId={contains:e,mode:"insensitive"});let s=[];return r&&s.push({title:{contains:r,mode:"insensitive"}}),t&&s.push({content:{contains:t,mode:"insensitive"}}),s.length>0&&(o.OR=s),await this.prisma.news.count({where:o})}};function ar(){return new pa(B)}var ca=class{constructor(e){this.prisma=e}async create(e){await this.prisma.pendency.create({data:e})}async find({filter:{description:e,orderBy:t,title:r,status:o,userId:s},pagination:{limit:n,offset:m}}){let p={userId:s,AND:{status:{equals:o}}};e&&(p.description={contains:e,mode:"insensitive"});let d=[];return r&&d.push({title:{contains:r,mode:"insensitive"}}),d.length>0&&(p.OR=d),await this.prisma.pendency.findMany({where:p,orderBy:{updatedAt:t},include:{user:{omit:{passwordHash:!0}}},skip:m,take:n})}async findById(e){return await this.prisma.pendency.findFirst({where:{id:e},include:{user:{omit:{passwordHash:!0}}}})}async findByUserId({filter:{description:e,orderBy:t,title:r,status:o},pagination:{limit:s,offset:n},userId:m}){let p={userId:m,AND:{status:{equals:o}}},d=[];return e&&d.push({description:{contains:e,mode:"insensitive"}}),r&&d.push({title:{contains:r,mode:"insensitive"}}),d.length>0&&(p.OR=d),await this.prisma.pendency.findMany({where:p,orderBy:{updatedAt:t},include:{user:{omit:{passwordHash:!0}}},skip:n,take:s})}async update({id:e,...t}){await this.prisma.pendency.update({where:{id:e},data:t})}async deleteById(e){await this.prisma.pendency.delete({where:{id:e}})}async count({filter:{description:e,title:t,status:r,userId:o}}){let s={userId:o},n=[];return e&&n.push({description:{contains:e,mode:"insensitive"}}),t&&n.push({title:{contains:t,mode:"insensitive"}}),r&&n.push({status:{equals:r}}),n.length>0&&(s.OR=n),await this.prisma.pendency.count({where:s})}};function Fr(){return new ca(B)}var da=class{constructor(e){this.prisma=e}async create(e){await this.prisma.user.create({data:e})}async update(e){await this.prisma.user.update({where:{id:e.id},data:{lattesUrl:e.lattesUrl??null,orcid:e.orcid??null,phone:e.phone??null,avatarUrl:e.avatarUrl??null}})}async deleteById(e){await this.prisma.user.delete({where:{id:e}})}async find(){return await this.prisma.user.findMany({omit:{passwordHash:!0}})}async findByEmail(e){return await this.prisma.user.findFirst({where:{emailAddress:e}})}async findById(e){return await this.prisma.user.findFirst({where:{id:e},omit:{passwordHash:!0}})}};function we(){return new da(B)}import{compare as BE,hash as qE}from"bcryptjs";var la=class{constructor(e,t){this.hashFn=e;this.compareFn=t}async hash(e){return await this.hashFn(e,6)}async compare({password:e,hashedPassword:t}){return await this.compareFn(e,t)}};function nl(){return new la(qE,BE)}import ph from"jsonwebtoken";import Me from"zod";var NE=Me.object({JWT_SECRET:Me.string(),FIREBASE_BUCKET:Me.string(),FIREBASE_CLIENT_EMAIL:Me.string(),FIREBASE_PRIVATE_KEY:Me.string(),FIREBASE_PROJECT_ID:Me.string(),FIREBASE_TYPE:Me.string(),FIREBASE_PRIVATE_KEY_ID:Me.string(),FIREBASE_CLIENT_ID:Me.string(),FIREBASE_AUTH_URI:Me.string(),FIREBASE_TOKEN_URI:Me.string(),FIREBASE_AUTH_PROVIDER_X509_CERT_URL:Me.string(),FIREBASE_CLIENT_X509_CERT_URL:Me.string()}),he=NE.parse(process.env);var ua=class{constructor(e,t){this.signFn=e;this.verifyFn=t}sign(e){try{return this.signFn(e,he.JWT_SECRET,{expiresIn:"3d",subject:e.id})}catch{return null}}verify(e){try{return this.verifyFn(e,he.JWT_SECRET)}catch{return null}}};function ga(){return new ua(ph.sign,ph.verify)}function ch(){return{signUpController:new Wi(we(),nl())}}function dh(){return{signInController:new Li(we(),nl(),ga())}}function lh(){return{findAuthenticatedUserController:new aa(we())}}function uh(){return{findAuthenticatedUserController:new qi(ar())}}function gh(){return{findAuthenticatedUserCertificationsController:new Bi(jr())}}function yh(){return{findAuthenticatedUserPendenciesController:new Ni(Fr())}}var ya=class{constructor(e){this.jwtService=e}authenticated(e,t,r){let o=e.headers.authorization;if(!o?.startsWith("Bearer "))return t.status(401).json({message:"Token inv\xE1lido.",invalid:!0});let s=o.split(" ")[1];if(!s)return t.status(401).json({message:"Token n\xE3o fornecido."});try{let n=this.jwtService.verify(s);if(!n)return t.status(401).json({message:"Token inv\xE1lido.",invalid:!0});e.user=n,r()}catch(n){if(console.log(n),n instanceof Error)return t.status(401).json({message:n.message})}}isAdmin(e,t,r){let o=e.headers.authorization;if(!o?.startsWith("Bearer "))return t.status(401).json({message:"Token inv\xE1lido.",invalid:!0});let s=o.split(" ")[1];if(!s)return t.status(401).json({message:"Token n\xE3o fornecido."});try{let n=this.jwtService.verify(s);if(!n)return t.status(401).json({message:"Token inv\xE1lido.",invalid:!0});if(n.role!=="ADMIN")return t.status(401).json({message:"\xC9 necess\xE1rio ter permiss\xF5es de administrador."});e.user=n,r()}catch(n){if(console.log(n),n instanceof Error)return t.status(401).json({message:n.message})}}};function K(){return{authMiddleware:new ya(ga())}}var mr=GE(),{authMiddleware:Pi}=K();mr.post("/sign-up",async(i,e)=>{let{signUpController:t}=ch();await t.handle(i,e)});mr.post("/sign-in",async(i,e)=>{let{signInController:t}=dh();await t.handle(i,e)});mr.get("/user",(i,e,t)=>{Pi.authenticated(i,e,t)},async(i,e)=>{let{findAuthenticatedUserController:t}=lh();await t.handle(i,e)});mr.get("/user/news",(i,e,t)=>{Pi.authenticated(i,e,t)},async(i,e)=>{let{findAuthenticatedUserController:t}=uh();await t.handle(i,e)});mr.get("/admin",(i,e,t)=>{Pi.isAdmin(i,e,t)},(i,e)=>{try{e.status(200).json({success:!0})}catch(t){t instanceof Error&&e.status(500).json({message:t.message})}});mr.get("/certifications",(i,e,t)=>{Pi.authenticated(i,e,t)},async(i,e)=>{let{findAuthenticatedUserCertificationsController:t}=gh();await t.handle(i,e)});mr.get("/pendencies",(i,e,t)=>{Pi.authenticated(i,e,t)},async(i,e)=>{let{findAuthenticatedUserPendenciesController:t}=yh();await t.handle(i,e)});import{Router as KE}from"express";import{extendZodWithOpenApi as LE}from"@asteasolutions/zod-to-openapi";import We from"zod";var _E=5,fh=1024,WE=fh*fh,al=_E*WE;LE(We);var HE=We.object({volumeNumber:We.coerce.number().int().positive("N\xFAmero do volume \xE9 obrigat\xF3rio."),year:We.coerce.number().int().positive("Ano \xE9 obrigat\xF3rio."),title:We.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),author:We.string().min(1,"Autor \xE9 obrigat\xF3rio."),accessUrl:We.url().optional(),description:We.string().optional(),authorImage:We.any().refine(i=>!i||typeof i=="object"&&typeof i.mimetype=="string"&&i.mimetype.startsWith("image/")&&typeof i.size=="number"&&i.size<=al,"A imagem do autor deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB."),coverImage:We.any().refine(i=>!i||typeof i=="object"&&typeof i.mimetype=="string"&&i.mimetype.startsWith("image/")&&typeof i.size=="number"&&i.size<=al,"A imagem da capa deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB."),catalogSheet:We.any().refine(i=>!i||typeof i=="object"&&typeof i.mimetype=="string"&&typeof i.size=="number"&&i.size<=al,"A ficha catalogr\xE1fica deve ter no m\xE1ximo 5MB.")}),fa=class{constructor(e,t){this.bookVolumeRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{volumeNumber:r,year:o,title:s,author:n,accessUrl:m,description:p,authorImage:d,coverImage:f,catalogSheet:T}=HE.parse({...e.body,authorImage:e.files?.authorImage?.[0],coverImage:e.files?.coverImage?.[0],catalogSheet:e.files?.catalogSheet?.[0]}),v=await this.bookVolumeRepository.create({volumeNumber:r,year:o,title:s,author:n,accessUrl:m,description:p}),X=v.authorImageUrl,ie=v.coverImageUrl,ce=v.catalogSheetUrl;return X=await this.firebaseStorageService.uploadFile({file:d,folder:E.BOOK_VOLUME_AUTHOR_IMAGE,id:v.id}),ie=await this.firebaseStorageService.uploadFile({file:f,folder:E.BOOK_VOLUME_COVER,id:v.id}),ce=await this.firebaseStorageService.uploadFile({file:T,folder:E.BOOK_VOLUME_CATALOG_SHEET,id:v.id}),await this.bookVolumeRepository.update({id:v.id,authorImageUrl:X,coverImageUrl:ie,catalogSheetUrl:ce}),t.sendStatus(201)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var ha=class{constructor(e){this.prisma=e}async create({volumeNumber:e,year:t,title:r,author:o,accessUrl:s,authorImageUrl:n,coverImageUrl:m,catalogSheetUrl:p,description:d}){return await this.prisma.bookVolume.create({data:{volumeNumber:e,year:t,title:r,author:o,accessUrl:s,authorImageUrl:n,coverImageUrl:m,catalogSheetUrl:p,description:d}})}async find({pagination:{offset:e,limit:t},filter:{title:r,author:o,description:s,orderBy:n}}){let m={},p=[];return r&&p.push({title:{contains:r,mode:"insensitive"}}),o&&p.push({author:{contains:o,mode:"insensitive"}}),s&&p.push({description:{contains:s,mode:"insensitive"}}),p.length>0&&(m.OR=p),await this.prisma.bookVolume.findMany({where:m,orderBy:{updatedAt:n},skip:e,take:t})}async findById(e){return await this.prisma.bookVolume.findFirst({where:{id:e}})}async update({id:e,volumeNumber:t,year:r,title:o,author:s,accessUrl:n,authorImageUrl:m,coverImageUrl:p,catalogSheetUrl:d,description:f}){await this.prisma.bookVolume.update({where:{id:e},data:{volumeNumber:t,year:r,title:o,author:s,accessUrl:n,authorImageUrl:m,coverImageUrl:p,catalogSheetUrl:d,description:f}})}async deleteById(e){await this.prisma.bookVolume.delete({where:{id:e}})}async count({filter:{title:e,author:t,description:r}}){let o={},s=[];return e&&s.push({title:{contains:e,mode:"insensitive"}}),t&&s.push({author:{contains:t,mode:"insensitive"}}),r&&s.push({description:{contains:r,mode:"insensitive"}}),s.length>0&&(o.OR=s),await this.prisma.bookVolume.count({where:o})}};function Ut(){return new ha(B)}import{getStorage as $E}from"firebase-admin/storage";import hh from"firebase-admin";var ml=hh.initializeApp({credential:hh.credential.cert({clientEmail:he.FIREBASE_CLIENT_EMAIL,privateKey:he.FIREBASE_PRIVATE_KEY,projectId:he.FIREBASE_PROJECT_ID,type:he.FIREBASE_TYPE,privateKeyId:he.FIREBASE_PRIVATE_KEY_ID,clientId:he.FIREBASE_CLIENT_ID,authUri:he.FIREBASE_AUTH_URI,tokenUri:he.FIREBASE_TOKEN_URI,authProviderX509CertUrl:he.FIREBASE_AUTH_PROVIDER_X509_CERT_URL,clientX509CertUrl:he.FIREBASE_CLIENT_X509_CERT_URL}),storageBucket:he.FIREBASE_BUCKET});ml.name?console.log("\u{1F525} Firebase conectado com sucesso!"):console.error("\u274C Erro ao se conectar ao Firebase.");var VE=$E(ml),Rh=VE.bucket(he.FIREBASE_BUCKET);import{randomUUID as zE}from"crypto";var ZE=/https:\/\/storage\.googleapis\.com\/[^/]+\/(.+)$/,Ra=class{constructor(e){this.bucket=e}async uploadFile({file:e,folder:t,id:r}){let o=`${zE()}-${e?.originalname}`,s=this.bucket.file(`${t}/${r}/${o}`);return await new Promise((n,m)=>{let p=s.createWriteStream({metadata:{contentType:e?.mimetype}});p.on("error",d=>{m(d)}),p.on("finish",async()=>{try{await s.makePublic();let d=`https://storage.googleapis.com/${this.bucket.name}/${s.name}`;n(d)}catch(d){m(d)}}),p.end(e.buffer)})}async updateFile({file:e,id:t,fileUrl:r,folder:o}){try{let s=this.getPath(r);if(!s)throw new Error("Arquivo n\xE3o encontrado.");let[n,m]=await Promise.all([this.bucket.file(s).delete(),this.uploadFile({file:e,id:t,folder:o})]);return m}catch{throw new Error("Erro ao atualizar o arquivo.")}}async deleteFile({fileUrl:e}){let t=this.getPath(e);if(!t)throw new Error("Arquivo n\xE3o encontrado.");try{await this.bucket.file(t).delete()}catch{throw new Error("Erro ao deletar o arquivo.")}}getPath(e){let t=e.match(ZE);return t?t[1]:null}};function x(){return new Ra(Rh)}function Ph(){return{createBookVolumeController:new fa(Ut(),x())}}function bh(){return{findBookVolumesController:new Vi(Ut())}}function Ih(){return{findBookVolumeByIdController:new $i(Ut())}}function Ch(){return{updateBookVolumeController:new Zi(Ut(),x())}}function Th(){return{deleteBookVolumeController:new Hi(Ut(),x())}}import Sh from"multer";var H=Sh({storage:Sh.memoryStorage()});var $r=KE(),{authMiddleware:bi}=K();$r.post("/",(i,e,t)=>{bi.isAdmin(i,e,t)},H.fields([{name:"authorImage",maxCount:1},{name:"coverImage",maxCount:1},{name:"catalogSheet",maxCount:1}]),async(i,e)=>{let{createBookVolumeController:t}=Ph();await t.handle(i,e)});$r.get("/",(i,e,t)=>{bi.isAdmin(i,e,t)},async(i,e)=>{let{findBookVolumesController:t}=bh();await t.handle(i,e)});$r.get("/:id",(i,e,t)=>{bi.isAdmin(i,e,t)},async(i,e)=>{let{findBookVolumeByIdController:t}=Ih();await t.handle(i,e)});$r.put("/:id",(i,e,t)=>{bi.isAdmin(i,e,t)},H.fields([{name:"authorImage",maxCount:1},{name:"coverImage",maxCount:1},{name:"catalogSheet",maxCount:1}]),async(i,e)=>{let{updateBookVolumeController:t}=Ch();await t.handle(i,e)});$r.delete("/:id",(i,e,t)=>{bi.isAdmin(i,e,t)},async(i,e)=>{let{deleteBookVolumeController:t}=Th();await t.handle(i,e)});import{Router as JE}from"express";function Ah(){return{registerCertificationController:new Xi(we(),jr(),x())}}function Eh(){return{findCertificationsController:new Yi(jr())}}function wh(){return{findCertificationByIdController:new Ji(jr())}}function Mh(){return{updateCertificationController:new eo(jr(),x())}}function xh(){return{deleteCertificationController:new Ki(jr(),x())}}var Vr=JE(),{authMiddleware:Ii}=K();Vr.post("/:user_id",(i,e,t)=>{Ii.isAdmin(i,e,t)},H.single("certification"),async(i,e)=>{let{registerCertificationController:t}=Ah();await t.handle(i,e)});Vr.get("/",(i,e,t)=>{Ii.isAdmin(i,e,t)},async(i,e)=>{let{findCertificationsController:t}=Eh();await t.handle(i,e)});Vr.get("/:certification_id",(i,e,t)=>{Ii.isAdmin(i,e,t)},async(i,e)=>{let{findCertificationByIdController:t}=wh();await t.handle(i,e)});Vr.put("/:certification_id",(i,e,t)=>{Ii.isAdmin(i,e,t)},H.single("certification"),async(i,e)=>{let{updateCertificationController:t}=Mh();await t.handle(i,e)});Vr.delete("/:certification_id",(i,e,t)=>{Ii.isAdmin(i,e,t)},async(i,e)=>{let{deleteCertificationController:t}=xh();await t.handle(i,e)});import{Router as tw}from"express";import{extendZodWithOpenApi as YE}from"@asteasolutions/zod-to-openapi";import xe from"zod";var XE=5,vh=1024,QE=vh*vh,ew=XE*QE;YE(xe);var rw=xe.object({title:xe.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),coordinatorId:xe.string().uuid("Coordenador \xE9 obrigat\xF3rio."),email:xe.email("E-mail deve ser v\xE1lido."),location:xe.string().min(1,"Localiza\xE7\xE3o \xE9 obrigat\xF3ria."),scheduledAt:xe.coerce.date(),registrationLink:xe.url().optional(),description:xe.string().optional(),instructorIds:xe.transform(i=>typeof i=="string"?i.split(","):i).pipe(xe.array(xe.uuid())),image:xe.any().refine(i=>!i||typeof i=="object"&&typeof i.mimetype=="string"&&i.mimetype.startsWith("image/")&&typeof i.size=="number"&&i.size<=ew,"A imagem deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.")}),Pa=class{constructor(e,t){this.courseRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{title:r,coordinatorId:o,email:s,location:n,scheduledAt:m,registrationLink:p,description:d,instructorIds:f,image:T}=rw.parse({...e.body,image:e.file}),v=await this.courseRepository.create({title:r,coordinatorId:o,email:s,location:n,scheduledAt:m,registrationLink:p||void 0,description:d,instructorIds:f}),X=await this.firebaseStorageService.uploadFile({file:T,folder:E.COURSE,id:v.id});return await this.courseRepository.update({id:v.id,imageUrl:X}),t.sendStatus(201)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var ba=class{constructor(e){this.prisma=e}async create({title:e,imageUrl:t,coordinatorId:r,email:o,instructorIds:s,scheduledAt:n,location:m,registrationLink:p,description:d}){return await this.prisma.course.create({data:{title:e,imageUrl:t,coordinatorId:r,email:o,scheduledAt:n,location:m,registrationLink:p,description:d,instructors:{connect:s?.map(f=>({id:f}))}}})}async find({pagination:{offset:e,limit:t},filter:{description:r,orderBy:o,title:s,coordinator:n}}){let m={},p=[];return s&&p.push({title:{contains:s,mode:"insensitive"}}),r&&p.push({description:{contains:r,mode:"insensitive"}}),n&&p.push({coordinator:{name:{contains:n,mode:"insensitive"}}}),p.length>0&&(m.OR=p),await this.prisma.course.findMany({where:m,include:{coordinator:{omit:{passwordHash:!0}},instructors:{omit:{passwordHash:!0}}},orderBy:{updatedAt:o},skip:e,take:t})}async findById(e){return await this.prisma.course.findFirst({where:{id:e},include:{coordinator:{omit:{passwordHash:!0}},instructors:{omit:{passwordHash:!0}}}})}async update({id:e,title:t,imageUrl:r,coordinatorId:o,email:s,instructorIds:n,scheduledAt:m,location:p,registrationLink:d,description:f}){n!==void 0&&await this.prisma.course.update({where:{id:e},data:{instructors:{set:[]}}}),await this.prisma.course.update({where:{id:e},data:{title:t,imageUrl:r,coordinatorId:o,email:s,scheduledAt:m,location:p,registrationLink:d,description:f,...n?.length>0&&{instructors:{connect:n.map(T=>({id:T}))}}}})}async deleteById(e){await this.prisma.course.delete({where:{id:e}})}async count({filter:{description:e,title:t,coordinator:r}}){let o={},s=[];return t&&s.push({title:{contains:t,mode:"insensitive"}}),e&&s.push({description:{contains:e,mode:"insensitive"}}),r&&s.push({coordinator:{name:{contains:r,mode:"insensitive"}}}),s.length>0&&(o.OR=s),await this.prisma.course.count({where:o})}};function jt(){return new ba(B)}function Uh(){return{createCourseController:new Pa(jt(),x())}}function jh(){return{findCoursesController:new oo(jt())}}function Fh(){return{findCourseByIdController:new io(jt())}}function Dh(){return{updateCourseController:new so(jt(),x())}}function kh(){return{deleteCourseController:new to(jt(),x())}}var zr=tw(),{authMiddleware:Ci}=K();zr.post("/",(i,e,t)=>{Ci.isAdmin(i,e,t)},H.single("image"),async(i,e)=>{let{createCourseController:t}=Uh();await t.handle(i,e)});zr.get("/",(i,e,t)=>{Ci.isAdmin(i,e,t)},async(i,e)=>{let{findCoursesController:t}=jh();await t.handle(i,e)});zr.get("/:id",(i,e,t)=>{Ci.isAdmin(i,e,t)},async(i,e)=>{let{findCourseByIdController:t}=Fh();await t.handle(i,e)});zr.put("/:id",(i,e,t)=>{Ci.isAdmin(i,e,t)},H.single("image"),async(i,e)=>{let{updateCourseController:t}=Dh();await t.handle(i,e)});zr.delete("/:id",(i,e,t)=>{Ci.isAdmin(i,e,t)},async(i,e)=>{let{deleteCourseController:t}=kh();await t.handle(i,e)});import{Router as aw}from"express";import{extendZodWithOpenApi as iw}from"@asteasolutions/zod-to-openapi";import pr from"zod";var ow=1,sw=9;iw(pr);var nw=pr.object({page:pr.coerce.number().min(1).default(ow),limit:pr.coerce.number().min(1).default(sw),code:pr.string().optional(),title:pr.string().optional(),description:pr.string().optional(),notes:pr.string().optional(),orderBy:pr.enum(["asc","desc"]).default("desc")}),Ia=class{constructor(e){this.etpRepository=e}async handle(e,t){try{let{page:r,limit:o,...s}=nw.parse(e.query),n=o*r-o,[m,p]=await Promise.all([this.etpRepository.find({pagination:{offset:n,limit:o},filter:s}),this.etpRepository.count({filter:s})]),d=Math.max(Math.ceil(p/o),1);t.status(200).json({page:r,totalPages:d,offset:n,limit:o,etps:m})}catch(r){if(r instanceof Error)throw new a(r.message)}}};var Ca=class{constructor(e){this.prisma=e}async create(e){let{leaderId:t,deputyLeaderId:r,secretaryId:o,memberIds:s,...n}=e;await this.prisma.$transaction(async m=>{let p=await m.eTP.create({data:n});await m.eTPLeader.create({data:{etpId:p.id,researcherId:t}}),await m.eTPDeputy.create({data:{etpId:p.id,researcherId:r}}),await m.eTPSecretary.create({data:{etpId:p.id,researcherId:o}}),await m.eTP.update({where:{id:p.id},data:{members:{connect:s.map(d=>({id:d}))}}})})}async update(e){let{leaderId:t,deputyLeaderId:r,secretaryId:o,memberIds:s,...n}=e;await this.prisma.$transaction(async m=>{await m.eTP.update({where:{id:e.id},data:n}),await this.updateLeader(m,e.id,t),await this.updateDeputyLeader(m,e.id,r),await this.updateSecretary(m,e.id,o),await this.updateMembers(m,e.id,s)})}async updateLeader(e,t,r){r!==void 0&&(await e.eTPLeader.deleteMany({where:{etpId:t}}),r&&await e.eTPLeader.create({data:{etpId:t,researcherId:r}}))}async updateDeputyLeader(e,t,r){r!==void 0&&(await e.eTPDeputy.deleteMany({where:{etpId:t}}),r&&await e.eTPDeputy.create({data:{etpId:t,researcherId:r}}))}async updateSecretary(e,t,r){r!==void 0&&(await e.eTPSecretary.deleteMany({where:{etpId:t}}),r&&await e.eTPSecretary.create({data:{etpId:t,researcherId:r}}))}async updateMembers(e,t,r){r!==void 0&&await e.eTP.update({where:{id:t},data:{members:{set:r.map(o=>({id:o}))}}})}async deleteById(e){await this.prisma.eTP.delete({where:{id:e}})}async find({pagination:{offset:e,limit:t},filter:{code:r,title:o,description:s,notes:n,orderBy:m}}){let p={},d=[];return r&&d.push({code:{contains:r,mode:"insensitive"}}),o&&d.push({title:{contains:o,mode:"insensitive"}}),s&&d.push({description:{contains:s,mode:"insensitive"}}),n&&d.push({notes:{contains:n,mode:"insensitive"}}),d.length>0&&(p.OR=d),await this.prisma.eTP.findMany({where:p,include:{leader:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},deputyLeader:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},secretary:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},members:{include:{user:{omit:{passwordHash:!0}}}}},orderBy:{updatedAt:m},skip:e,take:t})}async findById(e){return await this.prisma.eTP.findFirst({where:{id:e},include:{leader:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},deputyLeader:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},secretary:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},members:{include:{user:{omit:{passwordHash:!0}}}}}})}async findByCode(e){return await this.prisma.eTP.findFirst({where:{code:e},include:{leader:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},deputyLeader:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},secretary:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},members:{include:{user:{omit:{passwordHash:!0}}}}}})}async count({filter:{code:e,title:t,description:r,notes:o}}){let s={},n=[];return e&&n.push({code:{contains:e,mode:"insensitive"}}),t&&n.push({title:{contains:t,mode:"insensitive"}}),r&&n.push({description:{contains:r,mode:"insensitive"}}),o&&n.push({notes:{contains:o,mode:"insensitive"}}),n.length>0&&(s.OR=n),await this.prisma.eTP.count({where:s})}};function Ft(){return new Ca(B)}function Oh(){return{createETPController:new no(Ft())}}function Bh(){return{findETPsController:new Ia(Ft())}}function qh(){return{findETPByIdController:new mo(Ft())}}function Nh(){return{updateETPController:new co(Ft())}}function Gh(){return{deleteETPController:new ao(Ft())}}var Zr=aw(),{authMiddleware:pl}=K();Zr.post("/",(i,e,t)=>{pl.authenticated(i,e,t)},async(i,e)=>{let{createETPController:t}=Oh();await t.handle(i,e)});Zr.get("/",async(i,e)=>{let{findETPsController:t}=Bh();await t.handle(i,e)});Zr.get("/:id",async(i,e)=>{let{findETPByIdController:t}=qh();await t.handle(i,e)});Zr.put("/:id",(i,e,t)=>{pl.authenticated(i,e,t)},async(i,e)=>{let{updateETPController:t}=Nh();await t.handle(i,e)});Zr.delete("/:id",(i,e,t)=>{pl.authenticated(i,e,t)},async(i,e)=>{let{deleteETPController:t}=Gh();await t.handle(i,e)});import{Router as mw}from"express";var Ta=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.event.create({data:e})}async update(e){await this.prisma.event.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.event.delete({where:{id:e}})}async find({pagination:{offset:e,limit:t},filter:{title:r,status:o,format:s,orderBy:n}}){let m={},p=[];return o&&(m.status=o),s&&(m.format=s),r&&p.push({title:{contains:r,mode:"insensitive"}}),p.length>0&&(m.OR=p),await this.prisma.event.findMany({where:m,orderBy:n?{startDate:n}:{startDate:"desc"},skip:e,take:t})}async findById(e){return await this.prisma.event.findFirst({where:{id:e}})}async count({filter:{title:e,status:t,format:r}}){let o={},s=[];return t&&(o.status=t),r&&(o.format=r),e&&s.push({title:{contains:e,mode:"insensitive"}}),s.length>0&&(o.OR=s),await this.prisma.event.count({where:o})}};function Dt(){return new Ta(B)}function Lh(){return{createEventController:new go(Dt(),x())}}function _h(){return{findEventsController:new Ro(Dt())}}function Wh(){return{findEventByIdController:new fo(Dt())}}function Hh(){return{updateEventController:new Po(Dt(),x())}}function $h(){return{deleteEventController:new yo(Dt())}}var Kr=mw(),{authMiddleware:cl}=K();Kr.post("/",(i,e,t)=>{cl.authenticated(i,e,t)},H.single("image"),async(i,e)=>{let{createEventController:t}=Lh();await t.handle(i,e)});Kr.get("/",async(i,e)=>{let{findEventsController:t}=_h();await t.handle(i,e)});Kr.get("/:id",async(i,e)=>{let{findEventByIdController:t}=Wh();await t.handle(i,e)});Kr.put("/:id",(i,e,t)=>{cl.authenticated(i,e,t)},H.single("image"),async(i,e)=>{let{updateEventController:t}=Hh();await t.handle(i,e)});Kr.delete("/:id",(i,e,t)=>{cl.authenticated(i,e,t)},async(i,e)=>{let{deleteEventController:t}=$h();await t.handle(i,e)});import{Router as pw}from"express";var Sa=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.inMemoriam.create({data:e})}async update(e){await this.prisma.inMemoriam.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.inMemoriam.delete({where:{id:e}})}async find({pagination:{offset:e,limit:t},filter:{name:r,biography:o,role:s,orderBy:n}}){let m={},p=[];return s&&(m.role=s),r&&p.push({name:{contains:r,mode:"insensitive"}}),o&&p.push({biography:{contains:o,mode:"insensitive"}}),p.length>0&&(m.OR=p),await this.prisma.inMemoriam.findMany({where:m,orderBy:{updatedAt:n},skip:e,take:t})}async findById(e){return await this.prisma.inMemoriam.findFirst({where:{id:e}})}async findByRole(e){return await this.prisma.inMemoriam.findMany({where:{role:e}})}async count({filter:{name:e,biography:t,role:r}}){let o={},s=[];return r&&(o.role=r),e&&s.push({name:{contains:e,mode:"insensitive"}}),t&&s.push({biography:{contains:t,mode:"insensitive"}}),s.length>0&&(o.OR=s),await this.prisma.inMemoriam.count({where:o})}};function Jr(){return new Sa(B)}function Vh(){return{createInMemoriamController:new bo(Jr(),x())}}function zh(){return{findInMemoriamsController:new Ao(Jr())}}function Zh(){return{findInMemoriamByIdController:new Co(Jr())}}function Kh(){return{findInMemoriamByRoleController:new So(Jr())}}function Jh(){return{updateInMemoriamController:new Eo(Jr(),x())}}function Yh(){return{deleteInMemoriamController:new Io(Jr(),x())}}var Dr=pw(),{authMiddleware:dl}=K();Dr.post("/",(i,e,t)=>{dl.authenticated(i,e,t)},H.single("photo"),async(i,e)=>{let{createInMemoriamController:t}=Vh();await t.handle(i,e)});Dr.get("/",async(i,e)=>{let{findInMemoriamsController:t}=zh();await t.handle(i,e)});Dr.get("/:id",async(i,e)=>{let{findInMemoriamByIdController:t}=Zh();await t.handle(i,e)});Dr.get("/role/:role",async(i,e)=>{let{findInMemoriamByRoleController:t}=Kh();await t.handle(i,e)});Dr.put("/:id",(i,e,t)=>{dl.authenticated(i,e,t)},H.single("photo"),async(i,e)=>{let{updateInMemoriamController:t}=Jh();await t.handle(i,e)});Dr.delete("/:id",(i,e,t)=>{dl.authenticated(i,e,t)},async(i,e)=>{let{deleteInMemoriamController:t}=Yh();await t.handle(i,e)});import{Router as cw}from"express";var ll=cw();ll.get("/",(i,e)=>{e.status(200).json({message:"Rede CT"})});import{Router as yw}from"express";var Aa=class{constructor(e){this.prisma=e}async create(e){await this.prisma.internationalScientificCongress.create({data:e})}async update(e){await this.prisma.internationalScientificCongress.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.internationalScientificCongress.delete({where:{id:e}})}async find({pagination:{offset:e,limit:t},filter:{title:r,edition:o,location:s,orderBy:n}}){let m={},p=[];return o&&p.push({edition:{equals:o}}),r&&p.push({title:{contains:r,mode:"insensitive"}}),s&&p.push({location:{contains:s,mode:"insensitive"}}),p.length>0&&(m.OR=p),await this.prisma.internationalScientificCongress.findMany({where:m,include:{partners:!0,galleries:!0},orderBy:n?{startDate:n}:{startDate:"desc"},skip:e,take:t})}async findById(e){return await this.prisma.internationalScientificCongress.findFirst({where:{id:e},include:{partners:!0,galleries:!0}})}async findByEdition(e){return await this.prisma.internationalScientificCongress.findMany({where:{edition:e},include:{partners:!0,galleries:!0}})}async count({filter:{title:e,edition:t,location:r}}){let o={},s=[];return t&&s.push({edition:{equals:t}}),e&&s.push({title:{contains:e,mode:"insensitive"}}),r&&s.push({location:{contains:r,mode:"insensitive"}}),s.length>0&&(o.OR=s),await this.prisma.internationalScientificCongress.count({where:o})}};function He(){return new Aa(B)}function Xh(){return{createInternationalScientificCongressController:new Bo(He())}}function Qh(){return{findInternationalScientificCongressesController:new _o(He())}}function eR(){return{findInternationalScientificCongressByIdController:new Go(He())}}function rR(){return{findInternationalScientificCongressByEditionController:new No(He())}}function tR(){return{updateInternationalScientificCongressController:new Wo(He())}}function iR(){return{deleteInternationalScientificCongressController:new qo(He())}}import{extendZodWithOpenApi as dw}from"@asteasolutions/zod-to-openapi";import ul from"zod";dw(ul);var lw=ul.object({id:ul.uuid()}),Ea=class{constructor(e){this.internationalScientificCongressGalleryRepository=e}async handle(e,t){try{let{id:r}=lw.parse({id:e.params.id}),o=await this.internationalScientificCongressGalleryRepository.findById(r);if(!o)throw new c("A imagem da galeria n\xE3o existe.");return t.status(200).json(o)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var wa=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.internationalScientificCongressGalleryItem.create({data:e})}async update(e){await this.prisma.internationalScientificCongressGalleryItem.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.internationalScientificCongressGalleryItem.delete({where:{id:e}})}async findByCongressId(e){let{pagination:t,filter:r}=e;return await this.prisma.internationalScientificCongressGalleryItem.findMany({where:{congressId:r.congressId,...r.caption&&{caption:{contains:r.caption,mode:"insensitive"}}},skip:t.offset,take:t.limit})}async findById(e){return await this.prisma.internationalScientificCongressGalleryItem.findFirst({where:{id:e}})}async count(e){let{filter:t}=e;return await this.prisma.internationalScientificCongressGalleryItem.count({where:{congressId:t.congressId,...t.caption&&{caption:{contains:t.caption,mode:"insensitive"}}}})}};function kt(){return new wa(B)}function oR(){return{createInternationalScientificCongressGalleryController:new wo(kt(),He(),x())}}function sR(){return{findInternationalScientificCongressGalleriesByCongressIdController:new vo(kt())}}function nR(){return{findInternationalScientificCongressGalleryByIdController:new Ea(kt())}}function aR(){return{updateInternationalScientificCongressGalleryController:new Uo(kt(),x())}}function mR(){return{deleteInternationalScientificCongressGalleryController:new Mo(kt())}}import{extendZodWithOpenApi as uw}from"@asteasolutions/zod-to-openapi";import gl from"zod";uw(gl);var gw=gl.object({id:gl.uuid()}),Ma=class{constructor(e){this.internationalScientificCongressPartnerRepository=e}async handle(e,t){try{let{id:r}=gw.parse({id:e.params.id}),o=await this.internationalScientificCongressPartnerRepository.findById(r);if(!o)throw new c("O parceiro n\xE3o existe.");return t.status(200).json(o)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var xa=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.internationalScientificCongressPartner.create({data:e})}async update(e){await this.prisma.internationalScientificCongressPartner.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.internationalScientificCongressPartner.delete({where:{id:e}})}async findByCongressId(e){return await this.prisma.internationalScientificCongressPartner.findMany({where:{congressId:e.filter.congressId,name:e.filter.name?{contains:e.filter.name,mode:"insensitive"}:void 0},skip:e.pagination?.offset,take:e.pagination?.limit})}async findById(e){return await this.prisma.internationalScientificCongressPartner.findFirst({where:{id:e}})}async count(e){return await this.prisma.internationalScientificCongressPartner.count({where:{congressId:e.filter.congressId,name:e.filter.name?{contains:e.filter.name,mode:"insensitive"}:void 0}})}};function Ot(){return new xa(B)}function pR(){return{createInternationalScientificCongressPartnerController:new jo(Ot(),He(),x())}}function cR(){return{findInternationalScientificCongressPartnersByCongressIdController:new ko(Ot())}}function dR(){return{findInternationalScientificCongressPartnerByIdController:new Ma(Ot())}}function lR(){return{updateInternationalScientificCongressPartnerController:new Oo(Ot(),x())}}function uR(){return{deleteInternationalScientificCongressPartnerController:new Fo(Ot())}}var ge=yw(),{authMiddleware:cr}=K();ge.post("/",(i,e,t)=>{cr.authenticated(i,e,t)},async(i,e)=>{let{createInternationalScientificCongressController:t}=Xh();await t.handle(i,e)});ge.get("/",async(i,e)=>{let{findInternationalScientificCongressesController:t}=Qh();await t.handle(i,e)});ge.get("/:id",async(i,e)=>{let{findInternationalScientificCongressByIdController:t}=eR();await t.handle(i,e)});ge.get("/edition/:edition",async(i,e)=>{let{findInternationalScientificCongressByEditionController:t}=rR();await t.handle(i,e)});ge.put("/:id",(i,e,t)=>{cr.authenticated(i,e,t)},async(i,e)=>{let{updateInternationalScientificCongressController:t}=tR();await t.handle(i,e)});ge.delete("/:id",(i,e,t)=>{cr.authenticated(i,e,t)},async(i,e)=>{let{deleteInternationalScientificCongressController:t}=iR();await t.handle(i,e)});ge.post("/:congressId/gallery",(i,e,t)=>{cr.authenticated(i,e,t)},H.single("image"),async(i,e)=>{let{createInternationalScientificCongressGalleryController:t}=oR();await t.handle(i,e)});ge.get("/:congressId/gallery",async(i,e)=>{let{findInternationalScientificCongressGalleriesByCongressIdController:t}=sR();await t.handle(i,e)});ge.get("/gallery/:id",async(i,e)=>{let{findInternationalScientificCongressGalleryByIdController:t}=nR();await t.handle(i,e)});ge.put("/gallery/:id",(i,e,t)=>{cr.authenticated(i,e,t)},H.single("image"),async(i,e)=>{let{updateInternationalScientificCongressGalleryController:t}=aR();await t.handle(i,e)});ge.delete("/gallery/:id",(i,e,t)=>{cr.authenticated(i,e,t)},async(i,e)=>{let{deleteInternationalScientificCongressGalleryController:t}=mR();await t.handle(i,e)});ge.post("/:congressId/partner",(i,e,t)=>{cr.authenticated(i,e,t)},H.single("logo"),async(i,e)=>{let{createInternationalScientificCongressPartnerController:t}=pR();await t.handle(i,e)});ge.get("/:congressId/partner",async(i,e)=>{let{findInternationalScientificCongressPartnersByCongressIdController:t}=cR();await t.handle(i,e)});ge.get("/partner/:id",async(i,e)=>{let{findInternationalScientificCongressPartnerByIdController:t}=dR();await t.handle(i,e)});ge.put("/partner/:id",(i,e,t)=>{cr.authenticated(i,e,t)},H.single("logo"),async(i,e)=>{let{updateInternationalScientificCongressPartnerController:t}=lR();await t.handle(i,e)});ge.delete("/partner/:id",(i,e,t)=>{cr.authenticated(i,e,t)},async(i,e)=>{let{deleteInternationalScientificCongressPartnerController:t}=uR();await t.handle(i,e)});import{Router as bw}from"express";import{extendZodWithOpenApi as fw}from"@asteasolutions/zod-to-openapi";import Yr from"zod";var hw=1,Rw=10;fw(Yr);var Pw=Yr.object({page:Yr.coerce.number().min(1).default(hw),limit:Yr.coerce.number().min(1).default(Rw),title:Yr.string().optional(),country:Yr.string().optional(),orderBy:Yr.enum(["asc","desc"]).optional()}),va=class{constructor(e){this.lawRepository=e}async handle(e,t){try{let{page:r,limit:o,...s}=Pw.parse(e.query),n=o*r-o,[m,p]=await Promise.all([this.lawRepository.find({pagination:{offset:n,limit:o},filter:s}),this.lawRepository.count({filter:s})]),d=Math.max(Math.ceil(p/o),1);t.status(200).json({page:r,totalPages:d,offset:n,limit:o,laws:m})}catch(r){if(r instanceof Error)throw new a(r.message)}}};var Ua=class{constructor(e){this.prisma=e}async create(e){await this.prisma.law.create({data:{...e}})}async update(e){let{id:t,...r}=e;await this.prisma.law.update({where:{id:t},data:r})}async deleteById(e){await this.prisma.law.delete({where:{id:e}})}async find({pagination:e,filter:{title:t,country:r,orderBy:o}}){let s={};return t&&(s.title={contains:t,mode:"insensitive"}),r&&(s.country={contains:r,mode:"insensitive"}),await this.prisma.law.findMany({where:s,orderBy:{updatedAt:o??"desc"},...e&&{skip:e.offset,take:e.limit}})}async findById(e){return await this.prisma.law.findFirst({where:{id:e}})}async count({filter:{title:e,country:t}}){let r={};return e&&(r.title={contains:e,mode:"insensitive"}),t&&(r.country={contains:t,mode:"insensitive"}),await this.prisma.law.count({where:r})}};function Bt(){return new Ua(B)}function gR(){return{createLawController:new Ho(Bt())}}function yR(){return{findLawsController:new va(Bt())}}function fR(){return{findLawByIdController:new Vo(Bt())}}function hR(){return{updateLawController:new Zo(Bt())}}function RR(){return{deleteLawController:new $o(Bt())}}var Xr=bw(),{authMiddleware:yl}=K();Xr.post("/",(i,e,t)=>{yl.authenticated(i,e,t)},async(i,e)=>{let{createLawController:t}=gR();await t.handle(i,e)});Xr.get("/",async(i,e)=>{let{findLawsController:t}=yR();await t.handle(i,e)});Xr.get("/:id",async(i,e)=>{let{findLawByIdController:t}=fR();await t.handle(i,e)});Xr.put("/:id",(i,e,t)=>{yl.authenticated(i,e,t)},async(i,e)=>{let{updateLawController:t}=hR();await t.handle(i,e)});Xr.delete("/:id",(i,e,t)=>{yl.authenticated(i,e,t)},async(i,e)=>{let{deleteLawController:t}=RR();await t.handle(i,e)});import{Router as Tw}from"express";import{extendZodWithOpenApi as Iw}from"@asteasolutions/zod-to-openapi";import ja from"zod";Iw(ja);var Cw=ja.object({role:ja.string().optional(),orderBy:ja.enum(["asc","desc"]).optional()}),Fa=class{constructor(e){this.legitimatorCommitteeMemberRepository=e}async handle(e,t){try{let r=Cw.parse(e.query),o=await this.legitimatorCommitteeMemberRepository.find({filter:r});t.status(200).json({members:o})}catch(r){if(r instanceof Error)throw new a(r.message)}}};var Da=class{constructor(e){this.prisma=e}async create(e){await this.prisma.legitimatorCommitteeMember.create({data:{...e,order:e.order??0}})}async update(e){let{id:t,...r}=e;await this.prisma.legitimatorCommitteeMember.update({where:{id:t},data:r})}async deleteById(e){await this.prisma.legitimatorCommitteeMember.delete({where:{id:e}})}async find({filter:{role:e,orderBy:t}}){let r={};return e&&(r.role={contains:e,mode:"insensitive"}),await this.prisma.legitimatorCommitteeMember.findMany({where:r,include:{user:{omit:{passwordHash:!0}}},orderBy:t?[{order:"asc"},{updatedAt:t}]:[{order:"asc"},{updatedAt:"desc"}]})}async findById(e){return await this.prisma.legitimatorCommitteeMember.findFirst({where:{id:e},include:{user:{omit:{passwordHash:!0}}}})}async count({filter:{role:e}}){let t={};return e&&(t.role={contains:e,mode:"insensitive"}),await this.prisma.legitimatorCommitteeMember.count({where:t})}};function qt(){return new Da(B)}function PR(){return{createLegitimatorCommitteeMemberController:new Ko(qt())}}function bR(){return{findLegitimatorCommitteeMembersController:new Fa(qt())}}function IR(){return{findLegitimatorCommitteeMemberByIdController:new Yo(qt())}}function CR(){return{updateLegitimatorCommitteeMemberController:new Qo(qt())}}function TR(){return{deleteLegitimatorCommitteeMemberController:new Jo(qt())}}var Qr=Tw(),{authMiddleware:fl}=K();Qr.post("/",(i,e,t)=>{fl.authenticated(i,e,t)},async(i,e)=>{let{createLegitimatorCommitteeMemberController:t}=PR();await t.handle(i,e)});Qr.get("/",async(i,e)=>{let{findLegitimatorCommitteeMembersController:t}=bR();await t.handle(i,e)});Qr.get("/:id",async(i,e)=>{let{findLegitimatorCommitteeMemberByIdController:t}=IR();await t.handle(i,e)});Qr.put("/:id",(i,e,t)=>{fl.authenticated(i,e,t)},async(i,e)=>{let{updateLegitimatorCommitteeMemberController:t}=CR();await t.handle(i,e)});Qr.delete("/:id",(i,e,t)=>{fl.authenticated(i,e,t)},async(i,e)=>{let{deleteLegitimatorCommitteeMemberController:t}=TR();await t.handle(i,e)});import{Router as Ew}from"express";import{extendZodWithOpenApi as Sw}from"@asteasolutions/zod-to-openapi";import Ti from"zod";Sw(Ti);var Aw=Ti.object({name:Ti.string().optional(),description:Ti.string().optional(),orderBy:Ti.enum(["asc","desc"]).default("desc")}),ka=class{constructor(e){this.managementTeamRepository=e}async handle(e,t){try{let r=Aw.parse(e.query),o=await this.managementTeamRepository.find({filter:r});t.status(200).json({teams:o})}catch(r){if(r instanceof Error)throw new a(r.message)}}};var Oa=class{constructor(e){this.prisma=e}async create(e){let{members:t,...r}=e;await this.prisma.$transaction(async o=>{let s=await o.managementTeam.create({data:r});return await o.managementTeamMember.createMany({data:t.map(({userId:n,role:m,order:p})=>({teamId:s.id,userId:n,role:m,order:p??0}))}),s})}async update(e){let{members:t,...r}=e;await this.prisma.$transaction(async o=>{let s=await o.managementTeam.update({where:{id:e.id},data:r});return t!==void 0&&(await o.managementTeamMember.deleteMany({where:{teamId:e.id}}),t.length>0&&await o.managementTeamMember.createMany({data:t.map(({userId:n,role:m,order:p})=>({teamId:e.id,userId:n,role:m,order:p??0}))})),s})}async deleteById(e){await this.prisma.managementTeam.delete({where:{id:e}})}async find({filter:{name:e,description:t,orderBy:r}}){let o={},s=[];return e&&s.push({name:{contains:e,mode:"insensitive"}}),t&&s.push({description:{contains:t,mode:"insensitive"}}),s.length>0&&(o.OR=s),await this.prisma.managementTeam.findMany({where:o,include:{members:{include:{user:{omit:{passwordHash:!0}}},orderBy:{order:"asc"}}},orderBy:{updatedAt:r}})}async findById(e){return await this.prisma.managementTeam.findFirst({where:{id:e},include:{members:{include:{user:{omit:{passwordHash:!0}}},orderBy:{order:"asc"}}}})}async findByName(e){return await this.prisma.managementTeam.findFirst({where:{name:e},include:{members:{include:{user:{omit:{passwordHash:!0}}},orderBy:{order:"asc"}}}})}async count({filter:{name:e,description:t}}){let r={},o=[];return e&&o.push({name:{contains:e,mode:"insensitive"}}),t&&o.push({description:{contains:t,mode:"insensitive"}}),o.length>0&&(r.OR=o),await this.prisma.managementTeam.count({where:r})}};function Nt(){return new Oa(B)}function SR(){return{createManagementTeamController:new es(Nt())}}function AR(){return{findManagementTeamsController:new ka(Nt())}}function ER(){return{findManagementTeamByIdController:new ts(Nt())}}function wR(){return{updateManagementTeamController:new os(Nt())}}function MR(){return{deleteManagementTeamController:new rs(Nt())}}var et=Ew(),{authMiddleware:hl}=K();et.post("/",(i,e,t)=>{hl.authenticated(i,e,t)},async(i,e)=>{let{createManagementTeamController:t}=SR();await t.handle(i,e)});et.get("/",async(i,e)=>{let{findManagementTeamsController:t}=AR();await t.handle(i,e)});et.get("/:id",async(i,e)=>{let{findManagementTeamByIdController:t}=ER();await t.handle(i,e)});et.put("/:id",(i,e,t)=>{hl.authenticated(i,e,t)},async(i,e)=>{let{updateManagementTeamController:t}=wR();await t.handle(i,e)});et.delete("/:id",(i,e,t)=>{hl.authenticated(i,e,t)},async(i,e)=>{let{deleteManagementTeamController:t}=MR();await t.handle(i,e)});import{Router as xw}from"express";var Ba=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.meeting.create({data:e})}async update(e){await this.prisma.meeting.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.meeting.delete({where:{id:e}})}async find({pagination:{offset:e,limit:t},filter:{title:r,format:o,status:s,orderBy:n}}){let m={},p=[];return o&&(m.format=o),s&&(m.status=s),r&&p.push({title:{contains:r,mode:"insensitive"}}),p.length>0&&(m.OR=p),await this.prisma.meeting.findMany({where:m,include:{minutes:!0},orderBy:n?{scheduledAt:n}:{scheduledAt:"desc"},skip:e,take:t})}async findById(e){return await this.prisma.meeting.findFirst({where:{id:e},include:{minutes:!0}})}async findByStatus(e){return await this.prisma.meeting.findMany({where:{status:e},include:{minutes:!0}})}async count({filter:{title:e,format:t,status:r}}){let o={},s=[];return t&&(o.format=t),r&&(o.status=r),e&&s.push({title:{contains:e,mode:"insensitive"}}),s.length>0&&(o.OR=s),await this.prisma.meeting.count({where:o})}};function dr(){return new Ba(B)}function xR(){return{createMeetingController:new ps(dr())}}function vR(){return{findMeetingsController:new gs(dr())}}function UR(){return{findMeetingByIdController:new ds(dr())}}function jR(){return{findMeetingByStatusController:new us(dr())}}function FR(){return{updateMeetingController:new ys(dr())}}function DR(){return{deleteMeetingController:new cs(dr())}}import{extendZodWithOpenApi as ww}from"@asteasolutions/zod-to-openapi";import Rl from"zod";ww(Rl);var Mw=Rl.object({meetingId:Rl.uuid()}),qa=class{constructor(e,t){this.meetingMinuteRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{meetingId:r}=Mw.parse({meetingId:e.params.meetingId}),o=await this.meetingMinuteRepository.findByMeetingId(r);if(!o)throw new c("A ata n\xE3o existe para esta reuni\xE3o.");return o.documentUrl&&await this.firebaseStorageService.deleteFile({fileUrl:o.documentUrl}),await this.meetingMinuteRepository.deleteByMeetingId(o.id),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var Na=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.meetingMinute.create({data:e,include:{meeting:!0}})}async update(e){await this.prisma.meetingMinute.update({where:{id:e.id},data:e})}async deleteByMeetingId(e){await this.prisma.meetingMinute.delete({where:{id:e}})}async findByMeetingId(e){return await this.prisma.meetingMinute.findFirst({where:{meetingId:e},include:{meeting:!0}})}};function Si(){return new Na(B)}function kR(){return{createMeetingMinuteController:new ss(Si(),dr(),x())}}function OR(){return{findMeetingMinuteByMeetingIdController:new ns(Si())}}function BR(){return{updateMeetingMinuteByMeetingIdController:new as(Si(),x())}}function qR(){return{deleteMeetingMinuteByMeetingIdController:new qa(Si(),x())}}var Oe=xw(),{authMiddleware:Gt}=K();Oe.post("/",(i,e,t)=>{Gt.authenticated(i,e,t)},async(i,e)=>{let{createMeetingController:t}=xR();await t.handle(i,e)});Oe.get("/",async(i,e)=>{let{findMeetingsController:t}=vR();await t.handle(i,e)});Oe.get("/:id",async(i,e)=>{let{findMeetingByIdController:t}=UR();await t.handle(i,e)});Oe.get("/status/:status",async(i,e)=>{let{findMeetingByStatusController:t}=jR();await t.handle(i,e)});Oe.put("/:id",(i,e,t)=>{Gt.authenticated(i,e,t)},async(i,e)=>{let{updateMeetingController:t}=FR();await t.handle(i,e)});Oe.delete("/:id",(i,e,t)=>{Gt.authenticated(i,e,t)},async(i,e)=>{let{deleteMeetingController:t}=DR();await t.handle(i,e)});Oe.post("/:meetingId/minute",(i,e,t)=>{Gt.authenticated(i,e,t)},H.single("document"),async(i,e)=>{let{createMeetingMinuteController:t}=kR();await t.handle(i,e)});Oe.get("/:meetingId/minute",async(i,e)=>{let{findMeetingMinuteByMeetingIdController:t}=OR();await t.handle(i,e)});Oe.put("/:meetingId/minute",(i,e,t)=>{Gt.authenticated(i,e,t)},H.single("document"),async(i,e)=>{let{updateMeetingMinuteByMeetingIdController:t}=BR();await t.handle(i,e)});Oe.delete("/:meetingId/minute",(i,e,t)=>{Gt.authenticated(i,e,t)},async(i,e)=>{let{deleteMeetingMinuteByMeetingIdController:t}=qR();await t.handle(i,e)});import{Router as vw}from"express";var Ga=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.museum.create({data:e})}async update(e){await this.prisma.museum.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.museum.delete({where:{id:e}})}async find({pagination:e,filter:{name:t,city:r,state:o,country:s,orderBy:n}}){let m={},p=[];return t&&p.push({name:{contains:t,mode:"insensitive"}}),r&&p.push({city:{contains:r,mode:"insensitive"}}),o&&p.push({state:{contains:o,mode:"insensitive"}}),s&&p.push({country:{contains:s,mode:"insensitive"}}),p.length>0&&(m.OR=p),await this.prisma.museum.findMany({where:m,orderBy:n?{updatedAt:n}:{updatedAt:"desc"},...e&&{skip:e.offset,take:e.limit}})}async findById(e){return await this.prisma.museum.findFirst({where:{id:e}})}async count({filter:{name:e,city:t,state:r,country:o}}){let s={},n=[];return e&&n.push({name:{contains:e,mode:"insensitive"}}),t&&n.push({city:{contains:t,mode:"insensitive"}}),r&&n.push({state:{contains:r,mode:"insensitive"}}),o&&n.push({country:{contains:o,mode:"insensitive"}}),n.length>0&&(s.OR=n),await this.prisma.museum.count({where:s})}};function Lt(){return new Ga(B)}function NR(){return{createMuseumController:new fs(Lt(),x())}}function GR(){return{findMuseumsController:new bs(Lt())}}function LR(){return{findMuseumByIdController:new Rs(Lt())}}function _R(){return{updateMuseumController:new Is(Lt(),x())}}function WR(){return{deleteMuseumController:new hs(Lt(),x())}}var rt=vw(),{authMiddleware:Pl}=K();rt.post("/",(i,e,t)=>{Pl.authenticated(i,e,t)},H.single("logo"),async(i,e)=>{let{createMuseumController:t}=NR();await t.handle(i,e)});rt.get("/",async(i,e)=>{let{findMuseumsController:t}=GR();await t.handle(i,e)});rt.get("/:id",async(i,e)=>{let{findMuseumByIdController:t}=LR();await t.handle(i,e)});rt.put("/:id",(i,e,t)=>{Pl.authenticated(i,e,t)},H.single("logo"),async(i,e)=>{let{updateMuseumController:t}=_R();await t.handle(i,e)});rt.delete("/:id",(i,e,t)=>{Pl.authenticated(i,e,t)},async(i,e)=>{let{deleteMuseumController:t}=WR();await t.handle(i,e)});import{Router as qw}from"express";import{extendZodWithOpenApi as Uw}from"@asteasolutions/zod-to-openapi";import bl from"zod";Uw(bl);var jw=bl.object({id:bl.string()}),La=class{constructor(e,t){this.newsRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{id:r}=jw.parse(e.params),o=e.user.id,s=await this.newsRepository.findById(r);if(!s)throw new c("Not\xEDcia n\xE3o encontrada.");if(s.author.id!==o)throw new ve("Sem permiss\xE3o.");await Promise.all([this.newsRepository.delete(r),this.firebaseStorageService.deleteFile({fileUrl:s.imageUrl})]),t.sendStatus(200)}catch(r){if(r instanceof Error)throw new a(r.message)}}};import{extendZodWithOpenApi as Fw}from"@asteasolutions/zod-to-openapi";import _t from"zod";var Dw=5,HR=1024,kw=HR*HR,Ow=Dw*kw;Fw(_t);var Bw=_t.object({id:_t.string(),title:_t.string().min(1),content:_t.string().min(1),image:_t.any().optional().refine(i=>!i||typeof i=="object"&&typeof i.mimetype=="string"&&i.mimetype.startsWith("image/")&&typeof i.size=="number"&&i.size<=Ow,"A imagem deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.")}),_a=class{constructor(e,t){this.newsRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{id:r,title:o,content:s,image:n}=Bw.parse({id:e.params.id,image:e.file,...e.body}),m=await this.newsRepository.findById(r);if(!m)throw new c("Not\xEDcia n\xE3o encontrada.");let p=e.user.id;if(m.author.id!==p)throw new ve("Sem permiss\xE3o.");let d=m.imageUrl||"";n&&m.imageUrl&&(d=await this.firebaseStorageService.updateFile({file:n,folder:E.NEWS,id:r,fileUrl:m.imageUrl}));let f=await this.newsRepository.update({id:r,title:o,content:s,imageUrl:d});t.status(200).json(f)}catch(r){if(r instanceof Error)throw new a(r.message)}}};function $R(){return{createNewsController:new Cs(ar(),x())}}function VR(){return{findAllNewsController:new Es(ar())}}function zR(){return{findNewsByIdController:new As(ar())}}function ZR(){return{findNewsByAuthorIdController:new Ts(ar())}}function KR(){return{updateNewsController:new _a(ar(),x())}}function JR(){return{deleteNewsController:new La(ar(),x())}}var kr=qw(),{authMiddleware:Il}=K();kr.post("/",(i,e,t)=>{Il.authenticated(i,e,t)},H.single("image"),async(i,e)=>{let{createNewsController:t}=$R();await t.handle(i,e)});kr.get("/",async(i,e)=>{let{findAllNewsController:t}=VR();await t.handle(i,e)});kr.get("/:id",async(i,e)=>{let{findNewsByIdController:t}=zR();await t.handle(i,e)});kr.get("/author/:authorId",async(i,e)=>{let{findNewsByAuthorIdController:t}=ZR();await t.handle(i,e)});kr.put("/:id",(i,e,t)=>{Il.authenticated(i,e,t)},H.single("image"),async(i,e)=>{let{updateNewsController:t}=KR();await t.handle(i,e)});kr.delete("/:id",(i,e,t)=>{Il.authenticated(i,e,t)},async(i,e)=>{let{deleteNewsController:t}=JR();await t.handle(i,e)});import{Router as Nw}from"express";var Wa=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.partner.create({data:e})}async update(e){await this.prisma.partner.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.partner.delete({where:{id:e}})}async find({pagination:e,filter:{name:t,description:r,category:o,isActive:s,orderBy:n}}){let m={},p=[];return s!==void 0&&(m.isActive=s),t&&p.push({name:{contains:t,mode:"insensitive"}}),r&&p.push({description:{contains:r,mode:"insensitive"}}),o&&p.push({category:{contains:o,mode:"insensitive"}}),p.length>0&&(m.OR=p),await this.prisma.partner.findMany({where:m,orderBy:n?{updatedAt:n}:{updatedAt:"desc"},...e&&{skip:e.offset,take:e.limit}})}async findById(e){return await this.prisma.partner.findFirst({where:{id:e}})}async count({filter:{name:e,description:t,category:r,isActive:o}}){let s={},n=[];return o!==void 0&&(s.isActive=o),e&&n.push({name:{contains:e,mode:"insensitive"}}),t&&n.push({description:{contains:t,mode:"insensitive"}}),r&&n.push({category:{contains:r,mode:"insensitive"}}),n.length>0&&(s.OR=n),await this.prisma.partner.count({where:s})}};function Wt(){return new Wa(B)}function YR(){return{createPartnerController:new ws(Wt(),x())}}function XR(){return{findPartnersController:new Us(Wt())}}function QR(){return{findPartnerByIdController:new xs(Wt())}}function eP(){return{updatePartnerController:new js(Wt(),x())}}function rP(){return{deletePartnerController:new Ms(Wt(),x())}}var tt=Nw(),{authMiddleware:Cl}=K();tt.post("/",(i,e,t)=>{Cl.authenticated(i,e,t)},H.single("logo"),async(i,e)=>{let{createPartnerController:t}=YR();await t.handle(i,e)});tt.get("/",async(i,e)=>{let{findPartnersController:t}=XR();await t.handle(i,e)});tt.get("/:id",async(i,e)=>{let{findPartnerByIdController:t}=QR();await t.handle(i,e)});tt.put("/:id",(i,e,t)=>{Cl.authenticated(i,e,t)},H.single("logo"),async(i,e)=>{let{updatePartnerController:t}=eP();await t.handle(i,e)});tt.delete("/:id",(i,e,t)=>{Cl.authenticated(i,e,t)},async(i,e)=>{let{deletePartnerController:t}=rP();await t.handle(i,e)});import{Router as Gw}from"express";function tP(){return{createPendencyController:new Fs(we(),Fr(),x())}}function iP(){return{findPendenciesController:new Os(Fr())}}function oP(){return{findPendencyByIdController:new Bs(Fr())}}function sP(){return{updatePendencyController:new qs(Fr(),x())}}function nP(){return{deletePendencyController:new ks(Fr(),x())}}var it=Gw(),{authMiddleware:Ai}=K();it.post("/:user_id",(i,e,t)=>{Ai.isAdmin(i,e,t)},H.single("document"),async(i,e)=>{let{createPendencyController:t}=tP();await t.handle(i,e)});it.get("/",(i,e,t)=>{Ai.isAdmin(i,e,t)},async(i,e)=>{let{findPendenciesController:t}=iP();await t.handle(i,e)});it.get("/:pendency_id",(i,e,t)=>{Ai.isAdmin(i,e,t)},async(i,e)=>{let{findPendencyByIdController:t}=oP();await t.handle(i,e)});it.put("/:pendency_id",(i,e,t)=>{Ai.isAdmin(i,e,t)},H.single("document"),async(i,e)=>{let{updatePendencyController:t}=sP();await t.handle(i,e)});it.delete("/:pendency_id",(i,e,t)=>{Ai.isAdmin(i,e,t)},async(i,e)=>{let{deletePendencyController:t}=nP();await t.handle(i,e)});import{Router as Vw}from"express";import{extendZodWithOpenApi as Lw}from"@asteasolutions/zod-to-openapi";import lr from"zod";var _w=5,aP=1024,Ww=aP*aP,Hw=_w*Ww;Lw(lr);var $w=lr.object({title:lr.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),description:lr.string().optional(),startDate:lr.coerce.date(),endDate:lr.coerce.date(),contact:lr.string().min(1,"Contato \xE9 obrigat\xF3rio."),registrationLink:lr.url().optional(),image:lr.any().refine(i=>!i||typeof i=="object"&&typeof i.mimetype=="string"&&i.mimetype.startsWith("image/")&&typeof i.size=="number"&&i.size<=Hw,"A imagem deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.")}),Ha=class{constructor(e,t){this.postGraduateProgramRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{title:r,description:o,startDate:s,endDate:n,contact:m,registrationLink:p,image:d}=$w.parse({...e.body,image:e.file}),f=await this.postGraduateProgramRepository.create({title:r,description:o,startDate:s,endDate:n,contact:m,registrationLink:p||void 0}),T=await this.firebaseStorageService.uploadFile({file:d,folder:E.POST_GRADUATE_PROGRAM,id:f.id});return await this.postGraduateProgramRepository.update({id:f.id,imageUrl:T}),t.sendStatus(201)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var $a=class{constructor(e){this.prisma=e}async create({title:e,imageUrl:t,description:r,startDate:o,endDate:s,contact:n,registrationLink:m}){return await this.prisma.postGraduateProgram.create({data:{title:e,imageUrl:t,description:r,startDate:o,endDate:s,contact:n,registrationLink:m}})}async find({pagination:{offset:e,limit:t},filter:{description:r,orderBy:o,title:s,contact:n}}){let m={},p=[];return s&&p.push({title:{contains:s,mode:"insensitive"}}),r&&p.push({description:{contains:r,mode:"insensitive"}}),n&&p.push({contact:{contains:n,mode:"insensitive"}}),p.length>0&&(m.OR=p),await this.prisma.postGraduateProgram.findMany({where:m,orderBy:{updatedAt:o},skip:e,take:t})}async findById(e){return await this.prisma.postGraduateProgram.findFirst({where:{id:e}})}async update({id:e,title:t,imageUrl:r,description:o,startDate:s,endDate:n,contact:m,registrationLink:p}){await this.prisma.postGraduateProgram.update({where:{id:e},data:{title:t,imageUrl:r,description:o,startDate:s,endDate:n,contact:m,registrationLink:p}})}async deleteById(e){await this.prisma.postGraduateProgram.delete({where:{id:e}})}async count({filter:{description:e,title:t,contact:r}}){let o={},s=[];return t&&s.push({title:{contains:t,mode:"insensitive"}}),e&&s.push({description:{contains:e,mode:"insensitive"}}),r&&s.push({contact:{contains:r,mode:"insensitive"}}),s.length>0&&(o.OR=s),await this.prisma.postGraduateProgram.count({where:o})}};function Ht(){return new $a(B)}function mP(){return{createPostGraduateProgramController:new Ha(Ht(),x())}}function pP(){return{findPostGraduateProgramsController:new _s(Ht())}}function cP(){return{findPostGraduateProgramByIdController:new Ls(Ht())}}function dP(){return{updatePostGraduateProgramController:new Ws(Ht(),x())}}function lP(){return{deletePostGraduateProgramController:new Gs(Ht(),x())}}var ot=Vw(),{authMiddleware:Ei}=K();ot.post("/",(i,e,t)=>{Ei.isAdmin(i,e,t)},H.single("image"),async(i,e)=>{let{createPostGraduateProgramController:t}=mP();await t.handle(i,e)});ot.get("/",(i,e,t)=>{Ei.isAdmin(i,e,t)},async(i,e)=>{let{findPostGraduateProgramsController:t}=pP();await t.handle(i,e)});ot.get("/:id",(i,e,t)=>{Ei.isAdmin(i,e,t)},async(i,e)=>{let{findPostGraduateProgramByIdController:t}=cP();await t.handle(i,e)});ot.put("/:id",(i,e,t)=>{Ei.isAdmin(i,e,t)},H.single("image"),async(i,e)=>{let{updatePostGraduateProgramController:t}=dP();await t.handle(i,e)});ot.delete("/:id",(i,e,t)=>{Ei.isAdmin(i,e,t)},async(i,e)=>{let{deletePostGraduateProgramController:t}=lP();await t.handle(i,e)});import{Router as zw}from"express";var Va=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.redeCTHighlight.create({data:e})}async update(e){await this.prisma.redeCTHighlight.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.redeCTHighlight.delete({where:{id:e}})}async find({pagination:e,filter:{name:t,type:r,description:o,honorableMention:s,orderBy:n}}){let m={},p=[];return r&&(m.type=r),t&&p.push({name:{contains:t,mode:"insensitive"}}),o&&p.push({description:{contains:o,mode:"insensitive"}}),s&&p.push({honorableMention:{contains:s,mode:"insensitive"}}),p.length>0&&(m.OR=p),await this.prisma.redeCTHighlight.findMany({where:m,orderBy:n?{updatedAt:n}:{updatedAt:"desc"},...e&&{skip:e.offset,take:e.limit}})}async findById(e){return await this.prisma.redeCTHighlight.findFirst({where:{id:e}})}async count({filter:{name:e,type:t,description:r,honorableMention:o}}){let s={},n=[];return t&&(s.type=t),e&&n.push({name:{contains:e,mode:"insensitive"}}),r&&n.push({description:{contains:r,mode:"insensitive"}}),o&&n.push({honorableMention:{contains:o,mode:"insensitive"}}),n.length>0&&(s.OR=n),await this.prisma.redeCTHighlight.count({where:s})}};function $t(){return new Va(B)}function uP(){return{createRedeCTHighlightController:new Hs($t(),x())}}function gP(){return{findRedeCTHighlightsController:new Zs($t())}}function yP(){return{findRedeCTHighlightByIdController:new Vs($t())}}function fP(){return{updateRedeCTHighlightController:new Ks($t(),x())}}function hP(){return{deleteRedeCTHighlightController:new $s($t(),x())}}var st=zw(),{authMiddleware:Tl}=K();st.post("/",(i,e,t)=>{Tl.authenticated(i,e,t)},H.single("image"),async(i,e)=>{let{createRedeCTHighlightController:t}=uP();await t.handle(i,e)});st.get("/",async(i,e)=>{let{findRedeCTHighlightsController:t}=gP();await t.handle(i,e)});st.get("/:id",async(i,e)=>{let{findRedeCTHighlightByIdController:t}=yP();await t.handle(i,e)});st.put("/:id",(i,e,t)=>{Tl.authenticated(i,e,t)},H.single("image"),async(i,e)=>{let{updateRedeCTHighlightController:t}=fP();await t.handle(i,e)});st.delete("/:id",(i,e,t)=>{Tl.authenticated(i,e,t)},async(i,e)=>{let{deleteRedeCTHighlightController:t}=hP();await t.handle(i,e)});import{Router as Xw}from"express";import{extendZodWithOpenApi as Zw}from"@asteasolutions/zod-to-openapi";import Vt from"zod";var Kw=1,Jw=7;Zw(Vt);var Yw=Vt.object({page:Vt.coerce.number().min(1).default(Kw),limit:Vt.coerce.number().min(1).default(Jw),role:Vt.string().optional(),orderBy:Vt.enum(["asc","desc"]).optional()}),za=class{constructor(e){this.referenceCenterTeamMemberRepository=e}async handle(e,t){try{let{page:r,limit:o,...s}=Yw.parse(e.query),n=o*r-o,[m,p]=await Promise.all([this.referenceCenterTeamMemberRepository.find({pagination:{offset:n,limit:o},filter:s}),this.referenceCenterTeamMemberRepository.count({filter:s})]),d=Math.max(Math.ceil(p/o),1);t.status(200).json({page:r,totalPages:d,offset:n,limit:o,members:m})}catch(r){if(r instanceof Error)throw new a(r.message)}}};var Za=class{constructor(e){this.prisma=e}async create(e){await this.prisma.referenceCenterTeamMember.create({data:{...e}})}async update(e){let{id:t,...r}=e;await this.prisma.referenceCenterTeamMember.update({where:{id:t},data:r})}async deleteById(e){await this.prisma.referenceCenterTeamMember.delete({where:{id:e}})}async find({pagination:e,filter:{role:t,orderBy:r}}){let o={};return t&&(o.role={contains:t,mode:"insensitive"}),await this.prisma.referenceCenterTeamMember.findMany({where:o,include:{user:{omit:{passwordHash:!0}}},orderBy:{updatedAt:r??"desc"},...e&&{skip:e.offset,take:e.limit}})}async findById(e){return await this.prisma.referenceCenterTeamMember.findFirst({where:{id:e},include:{user:{omit:{passwordHash:!0}}}})}async count({filter:{role:e}}){let t={};return e&&(t.role={contains:e,mode:"insensitive"}),await this.prisma.referenceCenterTeamMember.count({where:t})}};function zt(){return new Za(B)}function RP(){return{createReferenceCenterTeamMemberController:new Js(zt())}}function PP(){return{findReferenceCenterTeamMembersController:new za(zt())}}function bP(){return{findReferenceCenterTeamMemberByIdController:new Xs(zt())}}function IP(){return{updateReferenceCenterTeamMemberController:new en(zt())}}function CP(){return{deleteReferenceCenterTeamMemberController:new Ys(zt())}}var nt=Xw(),{authMiddleware:Sl}=K();nt.post("/",(i,e,t)=>{Sl.authenticated(i,e,t)},async(i,e)=>{let{createReferenceCenterTeamMemberController:t}=RP();await t.handle(i,e)});nt.get("/",async(i,e)=>{let{findReferenceCenterTeamMembersController:t}=PP();await t.handle(i,e)});nt.get("/:id",async(i,e)=>{let{findReferenceCenterTeamMemberByIdController:t}=bP();await t.handle(i,e)});nt.put("/:id",(i,e,t)=>{Sl.authenticated(i,e,t)},async(i,e)=>{let{updateReferenceCenterTeamMemberController:t}=IP();await t.handle(i,e)});nt.delete("/:id",(i,e,t)=>{Sl.authenticated(i,e,t)},async(i,e)=>{let{deleteReferenceCenterTeamMemberController:t}=CP();await t.handle(i,e)});import{Router as Qw}from"express";var Ka=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.regiment.create({data:e})}async update(e){await this.prisma.regiment.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.regiment.delete({where:{id:e}})}async find({pagination:{offset:e,limit:t},filter:{title:r,status:o,orderBy:s}}){let n={},m=[];return o&&(n.status=o),r&&m.push({title:{contains:r,mode:"insensitive"}}),m.length>0&&(n.OR=m),await this.prisma.regiment.findMany({where:n,orderBy:s?{updatedAt:s}:{updatedAt:"desc"},skip:e,take:t})}async findById(e){return await this.prisma.regiment.findFirst({where:{id:e}})}async findByStatus(e){return await this.prisma.regiment.findMany({where:{status:e}})}async count({filter:{title:e,status:t}}){let r={},o=[];return t&&(r.status=t),e&&o.push({title:{contains:e,mode:"insensitive"}}),o.length>0&&(r.OR=o),await this.prisma.regiment.count({where:r})}};function at(){return new Ka(B)}function TP(){return{createRegimentController:new rn(at(),x())}}function SP(){return{findRegimentsController:new an(at())}}function AP(){return{findRegimentByIdController:new on(at())}}function EP(){return{findRegimentByStatusController:new nn(at())}}function wP(){return{updateRegimentController:new mn(at(),x())}}function MP(){return{deleteRegimentController:new tn(at(),x())}}var Or=Qw(),{authMiddleware:Al}=K();Or.post("/",(i,e,t)=>{Al.authenticated(i,e,t)},H.single("document"),async(i,e)=>{let{createRegimentController:t}=TP();await t.handle(i,e)});Or.get("/",async(i,e)=>{let{findRegimentsController:t}=SP();await t.handle(i,e)});Or.get("/:id",async(i,e)=>{let{findRegimentByIdController:t}=AP();await t.handle(i,e)});Or.get("/status/:status",async(i,e)=>{let{findRegimentByStatusController:t}=EP();await t.handle(i,e)});Or.put("/:id",(i,e,t)=>{Al.authenticated(i,e,t)},H.single("document"),async(i,e)=>{let{updateRegimentController:t}=wP();await t.handle(i,e)});Or.delete("/:id",(i,e,t)=>{Al.authenticated(i,e,t)},async(i,e)=>{let{deleteRegimentController:t}=MP();await t.handle(i,e)});import{Router as oM}from"express";import{extendZodWithOpenApi as eM}from"@asteasolutions/zod-to-openapi";import El from"zod";eM(El);var rM=El.object({id:El.string().uuid("ID inv\xE1lido")}),Ja=class{constructor(e){this.regionalCongressGalleryRepository=e}async handle(e,t){try{let{id:r}=rM.parse(e.params),o=await this.regionalCongressGalleryRepository.findById(r);if(!o)throw new c("Item de galeria n\xE3o encontrado");return t.status(200).json(o)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var Ya=class{constructor(e){this.prisma=e}async create(e){await this.prisma.regionalCongress.create({data:e})}async update(e){await this.prisma.regionalCongress.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.regionalCongress.delete({where:{id:e}})}async find({pagination:{offset:e,limit:t},filter:{title:r,edition:o,location:s,orderBy:n}}){let m={},p=[];return o&&p.push({edition:{equals:o}}),r&&p.push({title:{contains:r,mode:"insensitive"}}),s&&p.push({location:{contains:s,mode:"insensitive"}}),p.length>0&&(m.OR=p),await this.prisma.regionalCongress.findMany({where:m,include:{regionalCongressPartners:!0,regionalCongressGalleryItems:!0},orderBy:n?{startDate:n}:{startDate:"desc"},skip:e,take:t})}async findById(e){return await this.prisma.regionalCongress.findFirst({where:{id:e},include:{regionalCongressPartners:!0,regionalCongressGalleryItems:!0}})}async findByEdition(e){return await this.prisma.regionalCongress.findMany({where:{edition:e},include:{regionalCongressPartners:!0,regionalCongressGalleryItems:!0}})}async count({filter:{title:e,edition:t,location:r}}){let o={},s=[];return t&&s.push({edition:{equals:t}}),e&&s.push({title:{contains:e,mode:"insensitive"}}),r&&s.push({location:{contains:r,mode:"insensitive"}}),s.length>0&&(o.OR=s),await this.prisma.regionalCongress.count({where:o})}};function $e(){return new Ya(B)}var Xa=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.regionalCongressGalleryItem.create({data:e})}async update(e){await this.prisma.regionalCongressGalleryItem.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.regionalCongressGalleryItem.delete({where:{id:e}})}async findByCongressId({pagination:e,filter:t}){return await this.prisma.regionalCongressGalleryItem.findMany({where:{congressId:t.congressId,...t.caption&&{caption:{contains:t.caption,mode:"insensitive"}}},skip:e.offset,take:e.limit})}async findById(e){return await this.prisma.regionalCongressGalleryItem.findFirst({where:{id:e}})}async count({filter:e}){return await this.prisma.regionalCongressGalleryItem.count({where:{congressId:e.congressId,...e.caption&&{caption:{contains:e.caption,mode:"insensitive"}}}})}};function Zt(){return new Xa(B)}function xP(){return{createRegionalCongressGalleryController:new pn(Zt(),$e(),x())}}function vP(){return{findRegionalCongressGalleriesByCongressIdController:new ln(Zt())}}function UP(){return{findRegionalCongressGalleryByIdController:new Ja(Zt())}}function jP(){return{updateRegionalCongressGalleryController:new un(Zt(),x())}}function FP(){return{deleteRegionalCongressGalleryController:new cn(Zt())}}import{extendZodWithOpenApi as tM}from"@asteasolutions/zod-to-openapi";import wl from"zod";tM(wl);var iM=wl.object({id:wl.string().uuid("ID inv\xE1lido")}),Qa=class{constructor(e){this.regionalCongressPartnerRepository=e}async handle(e,t){try{let{id:r}=iM.parse(e.params),o=await this.regionalCongressPartnerRepository.findById(r);if(!o)throw new c("Parceiro n\xE3o encontrado");return t.status(200).json(o)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var em=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.regionalCongressPartner.create({data:e})}async update(e){await this.prisma.regionalCongressPartner.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.regionalCongressPartner.delete({where:{id:e}})}async findByCongressId(e){return await this.prisma.regionalCongressPartner.findMany({where:{congressId:e.filter.congressId,name:e.filter.name?{contains:e.filter.name,mode:"insensitive"}:void 0},skip:e.pagination?.offset,take:e.pagination?.limit})}async findById(e){return await this.prisma.regionalCongressPartner.findFirst({where:{id:e}})}async count(e){return await this.prisma.regionalCongressPartner.count({where:{congressId:e.filter.congressId,name:e.filter.name?{contains:e.filter.name,mode:"insensitive"}:void 0}})}};function Kt(){return new em(B)}function DP(){return{createRegionalCongressPartnerController:new gn(Kt(),$e(),x())}}function kP(){return{findRegionalCongressPartnersByCongressIdController:new hn(Kt())}}function OP(){return{findRegionalCongressPartnerByIdController:new Qa(Kt())}}function BP(){return{updateRegionalCongressPartnerController:new Rn(Kt(),x())}}function qP(){return{deleteRegionalCongressPartnerController:new yn(Kt())}}function NP(){return{createRegionalCongressController:new Pn($e())}}function GP(){return{findRegionalCongressesController:new Sn($e())}}function LP(){return{findRegionalCongressByIdController:new Cn($e())}}function _P(){return{findRegionalCongressByEditionController:new In($e())}}function WP(){return{updateRegionalCongressController:new An($e())}}function HP(){return{deleteRegionalCongressController:new bn($e())}}var ye=oM(),{authMiddleware:ur}=K();ye.post("/",(i,e,t)=>{ur.authenticated(i,e,t)},async(i,e)=>{let{createRegionalCongressController:t}=NP();await t.handle(i,e)});ye.get("/",async(i,e)=>{let{findRegionalCongressesController:t}=GP();await t.handle(i,e)});ye.get("/:id",async(i,e)=>{let{findRegionalCongressByIdController:t}=LP();await t.handle(i,e)});ye.get("/edition/:edition",async(i,e)=>{let{findRegionalCongressByEditionController:t}=_P();await t.handle(i,e)});ye.put("/:id",(i,e,t)=>{ur.authenticated(i,e,t)},async(i,e)=>{let{updateRegionalCongressController:t}=WP();await t.handle(i,e)});ye.delete("/:id",(i,e,t)=>{ur.authenticated(i,e,t)},async(i,e)=>{let{deleteRegionalCongressController:t}=HP();await t.handle(i,e)});ye.post("/:congressId/gallery",(i,e,t)=>{ur.authenticated(i,e,t)},H.single("image"),async(i,e)=>{let{createRegionalCongressGalleryController:t}=xP();await t.handle(i,e)});ye.get("/:congressId/gallery",async(i,e)=>{let{findRegionalCongressGalleriesByCongressIdController:t}=vP();await t.handle(i,e)});ye.get("/gallery/:id",async(i,e)=>{let{findRegionalCongressGalleryByIdController:t}=UP();await t.handle(i,e)});ye.put("/gallery/:id",(i,e,t)=>{ur.authenticated(i,e,t)},H.single("image"),async(i,e)=>{let{updateRegionalCongressGalleryController:t}=jP();await t.handle(i,e)});ye.delete("/gallery/:id",(i,e,t)=>{ur.authenticated(i,e,t)},async(i,e)=>{let{deleteRegionalCongressGalleryController:t}=FP();await t.handle(i,e)});ye.post("/:congressId/partner",(i,e,t)=>{ur.authenticated(i,e,t)},H.single("logo"),async(i,e)=>{let{createRegionalCongressPartnerController:t}=DP();await t.handle(i,e)});ye.get("/:congressId/partner",async(i,e)=>{let{findRegionalCongressPartnersByCongressIdController:t}=kP();await t.handle(i,e)});ye.get("/partner/:id",async(i,e)=>{let{findRegionalCongressPartnerByIdController:t}=OP();await t.handle(i,e)});ye.put("/partner/:id",(i,e,t)=>{ur.authenticated(i,e,t)},H.single("logo"),async(i,e)=>{let{updateRegionalCongressPartnerController:t}=BP();await t.handle(i,e)});ye.delete("/partner/:id",(i,e,t)=>{ur.authenticated(i,e,t)},async(i,e)=>{let{deleteRegionalCongressPartnerController:t}=qP();await t.handle(i,e)});import{Router as cM}from"express";import{extendZodWithOpenApi as sM}from"@asteasolutions/zod-to-openapi";import Be from"zod";var nM=5,$P=1024,aM=$P*$P,mM=nM*aM;sM(Be);var pM=Be.object({name:Be.string().min(1,"Nome \xE9 obrigat\xF3rio."),acronym:Be.string().optional(),description:Be.string().optional(),url:Be.url("URL deve ser v\xE1lida.").optional(),foundedAt:Be.coerce.date(),scope:Be.string().optional(),email:Be.email("E-mail deve ser v\xE1lido.").optional(),leaderId:Be.uuid("L\xEDder \xE9 obrigat\xF3rio."),deputyLeaderId:Be.uuid("Vice-l\xEDder \xE9 obrigat\xF3rio."),logo:Be.any().refine(i=>!i||typeof i=="object"&&typeof i.mimetype=="string"&&i.mimetype.startsWith("image/")&&typeof i.size=="number"&&i.size<=mM,"O logo deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.").optional()}),rm=class{constructor(e,t){this.researchGroupRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{name:r,acronym:o,description:s,url:n,foundedAt:m,scope:p,email:d,leaderId:f,deputyLeaderId:T,logo:v}=pM.parse({...e.body,logo:e.file}),X=await this.researchGroupRepository.create({name:r,acronym:o,description:s,url:n,foundedAt:m,scope:p,email:d,leaderId:f,deputyLeaderId:T});if(v){let ie=await this.firebaseStorageService.uploadFile({file:v,folder:E.RESEARCH_GROUP_LOGO,id:X.id});await this.researchGroupRepository.update({id:X.id,logoUrl:ie})}return t.sendStatus(201)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var tm=class{constructor(e){this.prisma=e}async create({name:e,acronym:t,description:r,url:o,logoUrl:s,foundedAt:n,scope:m,email:p,leaderId:d,deputyLeaderId:f}){return await this.prisma.researchGroup.create({data:{name:e,acronym:t,description:r,url:o,logoUrl:s,foundedAt:n,scope:m,email:p,leaderId:d,deputyLeaderId:f}})}async find({pagination:{offset:e,limit:t},filter:{name:r,acronym:o,description:s,leader:n,orderBy:m}}){let p={},d=[];return r&&d.push({name:{contains:r,mode:"insensitive"}}),o&&d.push({acronym:{contains:o,mode:"insensitive"}}),s&&d.push({description:{contains:s,mode:"insensitive"}}),n&&d.push({leader:{name:{contains:n,mode:"insensitive"}}}),d.length>0&&(p.OR=d),await this.prisma.researchGroup.findMany({where:p,include:{leader:{omit:{passwordHash:!0}},deputyLeader:{omit:{passwordHash:!0}}},orderBy:{updatedAt:m},skip:e,take:t})}async findById(e){return await this.prisma.researchGroup.findFirst({where:{id:e},include:{leader:{omit:{passwordHash:!0}},deputyLeader:{omit:{passwordHash:!0}}}})}async update({id:e,name:t,acronym:r,description:o,url:s,logoUrl:n,foundedAt:m,scope:p,email:d,leaderId:f,deputyLeaderId:T}){await this.prisma.researchGroup.update({where:{id:e},data:{name:t,acronym:r,description:o,url:s,logoUrl:n,foundedAt:m,scope:p,email:d,leaderId:f,deputyLeaderId:T}})}async deleteById(e){await this.prisma.researchGroup.delete({where:{id:e}})}async count({filter:{name:e,acronym:t,description:r,leader:o}}){let s={},n=[];return e&&n.push({name:{contains:e,mode:"insensitive"}}),t&&n.push({acronym:{contains:t,mode:"insensitive"}}),r&&n.push({description:{contains:r,mode:"insensitive"}}),o&&n.push({leader:{name:{contains:o,mode:"insensitive"}}}),n.length>0&&(s.OR=n),await this.prisma.researchGroup.count({where:s})}};function Jt(){return new tm(B)}function VP(){return{createResearchGroupController:new rm(Jt(),x())}}function zP(){return{findResearchGroupsController:new Mn(Jt())}}function ZP(){return{findResearchGroupByIdController:new wn(Jt())}}function KP(){return{updateResearchGroupController:new xn(Jt(),x())}}function JP(){return{deleteResearchGroupController:new En(Jt(),x())}}var mt=cM(),{authMiddleware:wi}=K();mt.post("/",(i,e,t)=>{wi.isAdmin(i,e,t)},H.single("logo"),async(i,e)=>{let{createResearchGroupController:t}=VP();await t.handle(i,e)});mt.get("/",(i,e,t)=>{wi.isAdmin(i,e,t)},async(i,e)=>{let{findResearchGroupsController:t}=zP();await t.handle(i,e)});mt.get("/:id",(i,e,t)=>{wi.isAdmin(i,e,t)},async(i,e)=>{let{findResearchGroupByIdController:t}=ZP();await t.handle(i,e)});mt.put("/:id",(i,e,t)=>{wi.isAdmin(i,e,t)},H.single("logo"),async(i,e)=>{let{updateResearchGroupController:t}=KP();await t.handle(i,e)});mt.delete("/:id",(i,e,t)=>{wi.isAdmin(i,e,t)},async(i,e)=>{let{deleteResearchGroupController:t}=JP();await t.handle(i,e)});import{Router as yM}from"express";import{extendZodWithOpenApi as dM}from"@asteasolutions/zod-to-openapi";import Te from"zod";var lM=1,uM=9;dM(Te);var gM=Te.object({page:Te.coerce.number().min(1).default(lM),limit:Te.coerce.number().min(1).default(uM),userId:Te.string().optional(),registrationNumber:Te.string().optional(),name:Te.string().optional(),emailAddress:Te.string().optional(),mainEtps:Te.string().optional(),formations:Te.string().optional(),occupations:Te.string().optional(),institutions:Te.string().optional(),biography:Te.string().optional(),orderBy:Te.enum(["asc","desc"]).default("desc")}),im=class{constructor(e){this.researcherRepository=e}async handle(e,t){try{let{page:r,limit:o,...s}=gM.parse(e.query),n=o*r-o,[m,p]=await Promise.all([this.researcherRepository.find({pagination:{offset:n,limit:o},filter:{userName:s.name,...s}}),this.researcherRepository.count({filter:{userName:s.name,...s}})]),d=Math.max(Math.ceil(p/o),1);t.status(200).json({page:r,totalPages:d,offset:n,limit:o,researchers:m})}catch(r){if(r instanceof Error)throw new a(r.message)}}};var om=class{constructor(e){this.prisma=e}async create(e){await this.prisma.researcher.create({data:e})}async update(e){await this.prisma.researcher.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.researcher.delete({where:{id:e}})}async find({pagination:e,filter:{biography:t,degrees:r,formations:o,institutions:s,mainEtps:n,occupations:m,orderBy:p,registrationNumber:d,seniority:f,userId:T,userName:v}}){let X={},ie=[];return v&&ie.push({user:{name:{contains:v,mode:"insensitive"}}}),d&&ie.push({registrationNumber:{contains:d,mode:"insensitive"}}),n&&ie.push({mainEtps:{contains:n,mode:"insensitive"}}),o&&ie.push({formations:{contains:o,mode:"insensitive"}}),m&&ie.push({occupations:{contains:m,mode:"insensitive"}}),s&&ie.push({institutions:{contains:s,mode:"insensitive"}}),t&&ie.push({biography:{contains:t,mode:"insensitive"}}),ie.length>0&&(X.OR=ie),r&&r.length>0&&(X.degrees={hasSome:r}),f&&(X.seniority=f),T&&(X.userId={equals:T}),await this.prisma.researcher.findMany({where:X,omit:{userId:!0},include:{user:{omit:{passwordHash:!0}}},orderBy:{updatedAt:p},...e&&{skip:e.offset,take:e.limit}})}async findById(e){return await this.prisma.researcher.findFirst({where:{id:e},include:{user:{omit:{passwordHash:!0}}}})}async findByUserId(e){return await this.prisma.researcher.findFirst({where:{userId:e},include:{user:{omit:{passwordHash:!0}}}})}async findByRegistrationNumber(e){return await this.prisma.researcher.findFirst({where:{registrationNumber:e},include:{user:{omit:{passwordHash:!0}}}})}async count({filter:{biography:e,degrees:t,formations:r,institutions:o,mainEtps:s,occupations:n,registrationNumber:m,seniority:p,userId:d,userName:f}}){let T={},v=[];return f&&v.push({user:{name:{contains:f,mode:"insensitive"}}}),m&&v.push({registrationNumber:{contains:m,mode:"insensitive"}}),v.length>0&&(T.OR=v),s&&(T.mainEtps={contains:s,mode:"insensitive"}),r&&(T.formations={contains:r,mode:"insensitive"}),t&&t.length>0&&(T.degrees={hasSome:t}),n&&(T.occupations={contains:n,mode:"insensitive"}),p&&(T.seniority=p),o&&(T.institutions={contains:o,mode:"insensitive"}),e&&(T.biography={contains:e,mode:"insensitive"}),d&&(T.userId={equals:d}),await this.prisma.researcher.count({where:T})}};function pt(){return new om(B)}function YP(){return{createResearcherController:new vn(pt())}}function XP(){return{findResearchersController:new im(pt())}}function QP(){return{findResearcherByIdController:new jn(pt())}}function eb(){return{findResearcherByUserIdController:new Dn(pt())}}function rb(){return{updateResearcherController:new kn(pt())}}function tb(){return{deleteResearcherController:new Un(pt())}}var Br=yM(),{authMiddleware:Ml}=K();Br.post("/",(i,e,t)=>{Ml.authenticated(i,e,t)},async(i,e)=>{let{createResearcherController:t}=YP();await t.handle(i,e)});Br.get("/",async(i,e)=>{let{findResearchersController:t}=XP();await t.handle(i,e)});Br.get("/:id",async(i,e)=>{let{findResearcherByIdController:t}=QP();await t.handle(i,e)});Br.get("/user/:userId",async(i,e)=>{let{findResearcherByUserIdController:t}=eb();await t.handle(i,e)});Br.put("/:id",(i,e,t)=>{Ml.authenticated(i,e,t)},async(i,e)=>{let{updateResearcherController:t}=rb();await t.handle(i,e)});Br.delete("/:id",(i,e,t)=>{Ml.authenticated(i,e,t)},async(i,e)=>{let{deleteResearcherController:t}=tb();await t.handle(i,e)});import{Router as RM}from"express";import{extendZodWithOpenApi as fM}from"@asteasolutions/zod-to-openapi";import fe from"zod";fM(fe);var hM=fe.object({title:fe.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),author:fe.string().min(1,"Autor \xE9 obrigat\xF3rio."),journal:fe.string().optional(),volume:fe.string().optional(),edition:fe.string().optional(),pageStart:fe.coerce.number().optional(),pageEnd:fe.coerce.number().optional(),startDate:fe.coerce.date(),endDate:fe.coerce.date(),city:fe.string().optional(),state:fe.string().optional(),country:fe.string().optional(),publisher:fe.string().optional(),description:fe.string().optional(),year:fe.coerce.number().optional(),accessUrl:fe.url().optional()}),sm=class{constructor(e){this.scientificArticlesRepository=e}async handle(e,t){try{let{title:r,author:o,journal:s,volume:n,edition:m,pageStart:p,pageEnd:d,startDate:f,endDate:T,city:v,state:X,country:ie,publisher:ce,description:Re,year:oi,accessUrl:hm}=hM.parse(e.body);return await this.scientificArticlesRepository.create({title:r,author:o,journal:s,volume:n,edition:m,pageStart:p,pageEnd:d,startDate:f,endDate:T,city:v,state:X,country:ie,publisher:ce,description:Re,year:oi,accessUrl:hm}),t.sendStatus(201)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var nm=class{constructor(e){this.prisma=e}async create({title:e,author:t,journal:r,volume:o,edition:s,pageStart:n,pageEnd:m,startDate:p,endDate:d,city:f,state:T,country:v,publisher:X,description:ie,year:ce,accessUrl:Re}){return await this.prisma.scientificArticle.create({data:{title:e,author:t,journal:r,volume:o,edition:s,pageStart:n,pageEnd:m,startDate:p,endDate:d,city:f,state:T,country:v,publisher:X,description:ie,year:ce,accessUrl:Re}})}async find({pagination:{offset:e,limit:t},filter:{title:r,author:o,journal:s,orderBy:n}}){let m={},p=[];return r&&p.push({title:{contains:r,mode:"insensitive"}}),o&&p.push({author:{contains:o,mode:"insensitive"}}),s&&p.push({journal:{contains:s,mode:"insensitive"}}),p.length>0&&(m.OR=p),await this.prisma.scientificArticle.findMany({where:m,orderBy:{updatedAt:n},skip:e,take:t})}async findById(e){return await this.prisma.scientificArticle.findFirst({where:{id:e}})}async update({id:e,title:t,author:r,journal:o,volume:s,edition:n,pageStart:m,pageEnd:p,startDate:d,endDate:f,city:T,state:v,country:X,publisher:ie,description:ce,year:Re,accessUrl:oi}){await this.prisma.scientificArticle.update({where:{id:e},data:{title:t,author:r,journal:o,volume:s,edition:n,pageStart:m,pageEnd:p,startDate:d,endDate:f,city:T,state:v,country:X,publisher:ie,description:ce,year:Re,accessUrl:oi}})}async deleteById(e){await this.prisma.scientificArticle.delete({where:{id:e}})}async count({filter:{title:e,author:t,journal:r}}){let o={},s=[];return e&&s.push({title:{contains:e,mode:"insensitive"}}),t&&s.push({author:{contains:t,mode:"insensitive"}}),r&&s.push({journal:{contains:r,mode:"insensitive"}}),s.length>0&&(o.OR=s),await this.prisma.scientificArticle.count({where:o})}};function Yt(){return new nm(B)}function ib(){return{createScientificArticleController:new sm(Yt())}}function ob(){return{findScientificArticlesController:new qn(Yt())}}function sb(){return{findScientificArticleByIdController:new Bn(Yt())}}function nb(){return{updateScientificArticleController:new Nn(Yt())}}function ab(){return{deleteScientificArticleController:new On(Yt())}}var ct=RM(),{authMiddleware:Mi}=K();ct.post("/",(i,e,t)=>{Mi.isAdmin(i,e,t)},async(i,e)=>{let{createScientificArticleController:t}=ib();await t.handle(i,e)});ct.get("/",(i,e,t)=>{Mi.isAdmin(i,e,t)},async(i,e)=>{let{findScientificArticlesController:t}=ob();await t.handle(i,e)});ct.get("/:id",(i,e,t)=>{Mi.isAdmin(i,e,t)},async(i,e)=>{let{findScientificArticleByIdController:t}=sb();await t.handle(i,e)});ct.put("/:id",(i,e,t)=>{Mi.isAdmin(i,e,t)},async(i,e)=>{let{updateScientificArticleController:t}=nb();await t.handle(i,e)});ct.delete("/:id",(i,e,t)=>{Mi.isAdmin(i,e,t)},async(i,e)=>{let{deleteScientificArticleController:t}=ab();await t.handle(i,e)});import{Router as SM}from"express";import{extendZodWithOpenApi as PM}from"@asteasolutions/zod-to-openapi";import gr from"zod";var bM=5,mb=1024,IM=mb*mb,CM=bM*IM;PM(gr);var TM=gr.object({name:gr.string().min(1,"Nome \xE9 obrigat\xF3rio."),issn:gr.string().min(1,"ISSN \xE9 obrigat\xF3rio."),description:gr.string().min(1,"Descri\xE7\xE3o \xE9 obrigat\xF3ria."),journalUrl:gr.url("URL da revista deve ser v\xE1lida."),directors:gr.string().optional(),editorialBoard:gr.string().optional(),logo:gr.any().refine(i=>!i||typeof i=="object"&&typeof i.mimetype=="string"&&i.mimetype.startsWith("image/")&&typeof i.size=="number"&&i.size<=CM,"O logo deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.").optional()}),am=class{constructor(e,t){this.scientificJournalRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{name:r,issn:o,description:s,journalUrl:n,directors:m,editorialBoard:p,logo:d}=TM.parse({...e.body,logo:e.file}),f=await this.scientificJournalRepository.create({name:r,issn:o,description:s,journalUrl:n,directors:m,editorialBoard:p});if(d){let T=await this.firebaseStorageService.uploadFile({file:d,folder:E.SCIENTIFIC_JOURNAL,id:f.id});await this.scientificJournalRepository.update({id:f.id,logoUrl:T})}return t.sendStatus(201)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var mm=class{constructor(e){this.prisma=e}async create({name:e,issn:t,description:r,logoUrl:o,journalUrl:s,directors:n,editorialBoard:m}){return await this.prisma.scientificJournal.create({data:{name:e,issn:t,description:r,logoUrl:o,journalUrl:s,directors:n,editorialBoard:m}})}async find({pagination:{offset:e,limit:t},filter:{name:r,description:o,issn:s,directors:n,editorialBoard:m,orderBy:p}}){let d={},f=[];return r&&f.push({name:{contains:r,mode:"insensitive"}}),o&&f.push({description:{contains:o,mode:"insensitive"}}),s&&f.push({issn:{contains:s,mode:"insensitive"}}),n&&f.push({directors:{contains:n,mode:"insensitive"}}),m&&f.push({editorialBoard:{contains:m,mode:"insensitive"}}),f.length>0&&(d.OR=f),await this.prisma.scientificJournal.findMany({where:d,orderBy:{updatedAt:p},skip:e,take:t})}async findById(e){return await this.prisma.scientificJournal.findFirst({where:{id:e}})}async update({id:e,name:t,issn:r,description:o,logoUrl:s,journalUrl:n,directors:m,editorialBoard:p}){await this.prisma.scientificJournal.update({where:{id:e},data:{name:t,issn:r,description:o,logoUrl:s,journalUrl:n,directors:m,editorialBoard:p}})}async deleteById(e){await this.prisma.scientificJournal.delete({where:{id:e}})}async count({filter:{name:e,description:t,issn:r,directors:o,editorialBoard:s}}){let n={},m=[];return e&&m.push({name:{contains:e,mode:"insensitive"}}),t&&m.push({description:{contains:t,mode:"insensitive"}}),r&&m.push({issn:{contains:r,mode:"insensitive"}}),o&&m.push({directors:{contains:o,mode:"insensitive"}}),s&&m.push({editorialBoard:{contains:s,mode:"insensitive"}}),m.length>0&&(n.OR=m),await this.prisma.scientificJournal.count({where:n})}};function Xt(){return new mm(B)}function pb(){return{createScientificJournalController:new am(Xt(),x())}}function cb(){return{findScientificJournalsController:new _n(Xt())}}function db(){return{findScientificJournalByIdController:new Ln(Xt())}}function lb(){return{updateScientificJournalController:new Wn(Xt(),x())}}function ub(){return{deleteScientificJournalController:new Gn(Xt(),x())}}var dt=SM(),{authMiddleware:xi}=K();dt.post("/",(i,e,t)=>{xi.isAdmin(i,e,t)},H.single("logo"),async(i,e)=>{let{createScientificJournalController:t}=pb();await t.handle(i,e)});dt.get("/",(i,e,t)=>{xi.isAdmin(i,e,t)},async(i,e)=>{let{findScientificJournalsController:t}=cb();await t.handle(i,e)});dt.get("/:id",(i,e,t)=>{xi.isAdmin(i,e,t)},async(i,e)=>{let{findScientificJournalByIdController:t}=db();await t.handle(i,e)});dt.put("/:id",(i,e,t)=>{xi.isAdmin(i,e,t)},H.single("logo"),async(i,e)=>{let{updateScientificJournalController:t}=lb();await t.handle(i,e)});dt.delete("/:id",(i,e,t)=>{xi.isAdmin(i,e,t)},async(i,e)=>{let{deleteScientificJournalController:t}=ub();await t.handle(i,e)});import{Router as wM}from"express";import{extendZodWithOpenApi as AM}from"@asteasolutions/zod-to-openapi";import pm from"zod";AM(pm);var EM=pm.object({role:pm.string().optional(),orderBy:pm.enum(["asc","desc"]).optional()}),cm=class{constructor(e){this.sdhcTeamMemberRepository=e}async handle(e,t){try{let r=EM.parse(e.query),o=await this.sdhcTeamMemberRepository.find({filter:r});t.status(200).json({members:o})}catch(r){if(r instanceof Error)throw new a(r.message)}}};var dm=class{constructor(e){this.prisma=e}async create(e){await this.prisma.sDHCTeamMember.create({data:{...e,order:e.order??0}})}async update(e){let{id:t,...r}=e;await this.prisma.sDHCTeamMember.update({where:{id:t},data:r})}async deleteById(e){await this.prisma.sDHCTeamMember.delete({where:{id:e}})}async find({filter:{role:e,orderBy:t}}){let r={};return e&&(r.role={contains:e,mode:"insensitive"}),await this.prisma.sDHCTeamMember.findMany({where:r,include:{user:{omit:{passwordHash:!0}}},orderBy:t?[{order:"asc"},{updatedAt:t}]:[{order:"asc"},{updatedAt:"desc"}]})}async findById(e){return await this.prisma.sDHCTeamMember.findFirst({where:{id:e},include:{user:{omit:{passwordHash:!0}}}})}async count({filter:{role:e}}){let t={};return e&&(t.role={contains:e,mode:"insensitive"}),await this.prisma.sDHCTeamMember.count({where:t})}};function Qt(){return new dm(B)}function gb(){return{createSDHCTeamMemberController:new Hn(Qt())}}function yb(){return{findSDHCTeamMembersController:new cm(Qt())}}function fb(){return{findSDHCTeamMemberByIdController:new Vn(Qt())}}function hb(){return{updateSDHCTeamMemberController:new Zn(Qt())}}function Rb(){return{deleteSDHCTeamMemberController:new $n(Qt())}}var lt=wM(),{authMiddleware:xl}=K();lt.post("/",(i,e,t)=>{xl.authenticated(i,e,t)},async(i,e)=>{let{createSDHCTeamMemberController:t}=gb();await t.handle(i,e)});lt.get("/",async(i,e)=>{let{findSDHCTeamMembersController:t}=yb();await t.handle(i,e)});lt.get("/:id",async(i,e)=>{let{findSDHCTeamMemberByIdController:t}=fb();await t.handle(i,e)});lt.put("/:id",(i,e,t)=>{xl.authenticated(i,e,t)},async(i,e)=>{let{updateSDHCTeamMemberController:t}=hb();await t.handle(i,e)});lt.delete("/:id",(i,e,t)=>{xl.authenticated(i,e,t)},async(i,e)=>{let{deleteSDHCTeamMemberController:t}=Rb();await t.handle(i,e)});import{Router as MM}from"express";var lm=class{constructor(e){this.userRepository=e}async handle(e,t){try{let r=await this.userRepository.find();t.status(200).json(r)}catch(r){if(r instanceof Error)throw new a(r.message)}}};function Pb(){return{updateUserController:new Yn(we(),x())}}function bb(){return{deleteUserController:new Kn(we())}}function Ib(){return{findUsersController:new lm(we())}}function Cb(){return{findUserController:new Jn(we())}}var ei=MM(),{authMiddleware:Tb}=K();ei.get("/:id",async(i,e)=>{let{findUserController:t}=Cb();await t.handle(i,e)});ei.put("/",(i,e,t)=>{Tb.authenticated(i,e,t)},H.single("avatarImage"),async(i,e)=>{let{updateUserController:t}=Pb();await t.handle(i,e)});ei.delete("/:id",(i,e,t)=>{Tb.authenticated(i,e,t)},async(i,e)=>{let{deleteUserController:t}=bb();await t.handle(i,e)});ei.get("/",async(i,e)=>{let{findUsersController:t}=Ib();await t.handle(i,e)});import{Router as DM}from"express";import{extendZodWithOpenApi as xM}from"@asteasolutions/zod-to-openapi";import Xe from"zod";var vM=5,Sb=1024,UM=Sb*Sb,jM=vM*UM;xM(Xe);var FM=Xe.object({title:Xe.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),description:Xe.string().optional(),scheduledAt:Xe.coerce.date(),webinarLink:Xe.url().optional(),guestIds:Xe.transform(i=>typeof i=="string"?i.split(","):i).pipe(Xe.array(Xe.uuid())),thumbnail:Xe.any().refine(i=>!i||typeof i=="object"&&typeof i.mimetype=="string"&&i.mimetype.startsWith("image/")&&typeof i.size=="number"&&i.size<=jM,"A thumbnail deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.")}),um=class{constructor(e,t){this.webinarRepository=e;this.firebaseStorageService=t}async handle(e,t){try{let{title:r,description:o,scheduledAt:s,webinarLink:n,guestIds:m,thumbnail:p}=FM.parse({...e.body,thumbnail:e.file}),d=await this.webinarRepository.create({title:r,description:o,scheduledAt:s,webinarLink:n||void 0,guestIds:m}),f=await this.firebaseStorageService.uploadFile({file:p,folder:E.WEBINAR,id:d.id});return await this.webinarRepository.update({id:d.id,thumbnailUrl:f}),t.sendStatus(201)}catch(r){if(r instanceof Error)throw new a(r.message)}}};var gm=class{constructor(e){this.prisma=e}async create({title:e,description:t,scheduledAt:r,webinarLink:o,thumbnailUrl:s,guestIds:n}){return await this.prisma.webinar.create({data:{title:e,description:t,scheduledAt:r,webinarLink:o,thumbnailUrl:s,guests:n?{connect:n.map(m=>({id:m}))}:void 0}})}async find({pagination:{offset:e,limit:t},filter:{description:r,orderBy:o,title:s}}){let n={},m=[];return s&&m.push({title:{contains:s,mode:"insensitive"}}),r&&m.push({description:{contains:r,mode:"insensitive"}}),m.length>0&&(n.OR=m),await this.prisma.webinar.findMany({where:n,include:{guests:{omit:{passwordHash:!0}}},orderBy:{updatedAt:o},skip:e,take:t})}async findById(e){return await this.prisma.webinar.findFirst({where:{id:e},include:{guests:{omit:{passwordHash:!0}}}})}async update({id:e,title:t,description:r,scheduledAt:o,webinarLink:s,thumbnailUrl:n,guestIds:m}){await this.prisma.webinar.update({where:{id:e},data:{title:t,description:r,scheduledAt:o,webinarLink:s,thumbnailUrl:n,guests:m?{connect:m.map(p=>({id:p}))}:void 0}})}async deleteById(e){await this.prisma.webinar.delete({where:{id:e}})}async count({filter:{description:e,title:t}}){let r={},o=[];return t&&o.push({title:{contains:t,mode:"insensitive"}}),e&&o.push({description:{contains:e,mode:"insensitive"}}),o.length>0&&(r.OR=o),await this.prisma.webinar.count({where:r})}};function ri(){return new gm(B)}function Ab(){return{createWebinarController:new um(ri(),x())}}function Eb(){return{findWebinarsController:new ea(ri())}}function wb(){return{findWebinarByIdController:new Qn(ri())}}function Mb(){return{updateWebinarController:new ra(ri(),x())}}function xb(){return{deleteWebinarController:new Xn(ri(),x())}}var ut=DM(),{authMiddleware:vi}=K();ut.post("/",(i,e,t)=>{vi.isAdmin(i,e,t)},H.single("thumbnail"),async(i,e)=>{let{createWebinarController:t}=Ab();await t.handle(i,e)});ut.get("/",(i,e,t)=>{vi.isAdmin(i,e,t)},async(i,e)=>{let{findWebinarsController:t}=Eb();await t.handle(i,e)});ut.get("/:id",(i,e,t)=>{vi.isAdmin(i,e,t)},async(i,e)=>{let{findWebinarByIdController:t}=wb();await t.handle(i,e)});ut.put("/:id",(i,e,t)=>{vi.isAdmin(i,e,t)},H.single("thumbnail"),async(i,e)=>{let{updateWebinarController:t}=Mb();await t.handle(i,e)});ut.delete("/:id",(i,e,t)=>{vi.isAdmin(i,e,t)},async(i,e)=>{let{deleteWebinarController:t}=xb();await t.handle(i,e)});import{Router as NM}from"express";import{extendZodWithOpenApi as kM}from"@asteasolutions/zod-to-openapi";import ti from"zod";var OM=1,BM=7;kM(ti);var qM=ti.object({page:ti.coerce.number().min(1).default(OM),limit:ti.coerce.number().min(1).default(BM),role:ti.string().optional(),orderBy:ti.enum(["asc","desc"]).optional()}),ym=class{constructor(e){this.workGroupTeamMemberRepository=e}async handle(e,t){try{let{page:r,limit:o,...s}=qM.parse(e.query),n=o*r-o,[m,p]=await Promise.all([this.workGroupTeamMemberRepository.find({pagination:{offset:n,limit:o},filter:s}),this.workGroupTeamMemberRepository.count({filter:s})]),d=Math.max(Math.ceil(p/o),1);t.status(200).json({page:r,totalPages:d,offset:n,limit:o,members:m})}catch(r){if(r instanceof Error)throw new a(r.message)}}};var fm=class{constructor(e){this.prisma=e}async create(e){await this.prisma.workGroupTeamMember.create({data:{...e}})}async update(e){let{id:t,...r}=e;await this.prisma.workGroupTeamMember.update({where:{id:t},data:r})}async deleteById(e){await this.prisma.workGroupTeamMember.delete({where:{id:e}})}async find({pagination:e,filter:{role:t,orderBy:r}}){let o={};return t&&(o.role={contains:t,mode:"insensitive"}),await this.prisma.workGroupTeamMember.findMany({where:o,include:{user:{omit:{passwordHash:!0}}},orderBy:{updatedAt:r??"desc"},...e&&{skip:e.offset,take:e.limit}})}async findById(e){return await this.prisma.workGroupTeamMember.findFirst({where:{id:e},include:{user:{omit:{passwordHash:!0}}}})}async count({filter:{role:e}}){let t={};return e&&(t.role={contains:e,mode:"insensitive"}),await this.prisma.workGroupTeamMember.count({where:t})}};function ii(){return new fm(B)}function vb(){return{createWorkGroupTeamMemberController:new ta(ii())}}function Ub(){return{findWorkGroupTeamMembersController:new ym(ii())}}function jb(){return{findWorkGroupTeamMemberByIdController:new oa(ii())}}function Fb(){return{updateWorkGroupTeamMemberController:new na(ii())}}function Db(){return{deleteWorkGroupTeamMemberController:new ia(ii())}}var gt=NM(),{authMiddleware:vl}=K();gt.post("/",(i,e,t)=>{vl.authenticated(i,e,t)},async(i,e)=>{let{createWorkGroupTeamMemberController:t}=vb();await t.handle(i,e)});gt.get("/",async(i,e)=>{let{findWorkGroupTeamMembersController:t}=Ub();await t.handle(i,e)});gt.get("/:id",async(i,e)=>{let{findWorkGroupTeamMemberByIdController:t}=jb();await t.handle(i,e)});gt.put("/:id",(i,e,t)=>{vl.authenticated(i,e,t)},async(i,e)=>{let{updateWorkGroupTeamMemberController:t}=Fb();await t.handle(i,e)});gt.delete("/:id",(i,e,t)=>{vl.authenticated(i,e,t)},async(i,e)=>{let{deleteWorkGroupTeamMemberController:t}=Db();await t.handle(i,e)});var oe=Ul(),_M={methods:["GET","POST","PUT","DELETE"],origin:["http://localhost:3000","https://rede-ct.vercel.app"],credentials:!0};oe.use(LM(_M));oe.use(Ul.json());oe.use(Ul.urlencoded({extended:!1}));oe.use("/docs",GM({content:oh,theme:"kepler"}));oe.use("/",ll);oe.use("/auth",mr);oe.use("/user",ei);oe.use("/news",kr);oe.use("/certification",Vr);oe.use("/pendency",it);oe.use("/researcher",Br);oe.use("/in-memoriam",Dr);oe.use("/etp",Zr);oe.use("/partner",tt);oe.use("/management-team",et);oe.use("/sdhc-team-member",lt);oe.use("/legitimator-committee-member",Qr);oe.use("/regiment",Or);oe.use("/meeting",Oe);oe.use("/international-scientific-congress",ge);oe.use("/regional-congress",ye);oe.use("/webinars",ut);oe.use("/courses",zr);oe.use("/post-graduate-programs",ot);oe.use("/event",Kr);oe.use("/scientific-journals",dt);oe.use("/book-volumes",$r);oe.use("/scientific-articles",ct);oe.use("/work-group-team-member",gt);oe.use("/reference-center-team-member",nt);oe.use("/law",Xr);oe.use("/research-groups",mt);oe.use("/museum",rt);oe.use("/redect-highlight",st);oe.use((i,e,t,r)=>{let{errorHandler:o}=jl();o.handle(i,e,t,r)});var HM=WM.createServer(oe),kb=4e3;HM.listen(kb,()=>{console.log(`\u{1F680} Aplica\xE7\xE3o rodando na porta ${kb}.`)});

import jb from"node:http";import{apiReference as Sb}from"@scalar/express-api-reference";import vb from"cors";import nc from"express";import iy from"zod";var ie=class extends Error{};var Q=class extends Error{};var a=class extends Error{};var p=class extends Error{};var de=class extends Error{};import{ZodError as oy}from"zod";var Ir=class extends oy{};var Cr=class{handle(e,r,t,i){return e instanceof Ir?t.status(400).json({message:"Validation error",error:iy.treeifyError(e)}):e instanceof ie?t.status(400).json({message:e.message}):e instanceof p?t.status(404).json({message:e.message}):e instanceof de?t.status(401).json({message:e.message}):e instanceof Q?t.status(409).json({message:e.message}):e instanceof a?t.status(500).json({message:e.message}):t.status(500).json({message:"Internal server error"})}};function sc(){return{errorHandler:new Cr}}import{OpenAPIRegistry as XI,OpenApiGeneratorV3 as $I}from"@asteasolutions/zod-to-openapi";import{$Enums as ac}from"@prisma/client";import h from"zod";import{extendZodWithOpenApi as ny}from"@asteasolutions/zod-to-openapi";import st from"zod";var sy=1,ay=6;ny(st);var Yn=st.object({page:st.coerce.number().min(1).default(sy),limit:st.coerce.number().min(1).default(ay),title:st.string().optional(),description:st.string().optional(),orderBy:st.enum(["asc","desc"]).default("desc")}),br=class{constructor(e){this.certificationRepository=e}async handle(e,r){try{let{title:t,description:i,limit:n,orderBy:s,page:m}=Yn.parse(e.query),c=m*n-n,u=e.user.id,[w,B]=await Promise.all([this.certificationRepository.findByUserId({userId:u,pagination:{offset:c,limit:n},filter:{title:t,description:i,orderBy:s}}),this.certificationRepository.count({filter:{title:t,description:i,userId:u}})]),Z=Math.max(Math.ceil(B/n),1);return r.status(200).json({page:m,totalPages:Z,offset:c,limit:n,totalCertifications:B,certifications:w})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as my}from"@asteasolutions/zod-to-openapi";import at from"zod";var cy=1,py=7;my(at);var Xn=at.object({page:at.coerce.number().min(1).default(cy),limit:at.coerce.number().min(1).default(py),title:at.string().optional(),content:at.string().optional(),orderBy:at.enum(["asc","desc"]).default("desc")}),wr=class{constructor(e){this.newsRepository=e}async handle(e,r){try{let{page:t,limit:i,content:n,orderBy:s,title:m}=Xn.parse(e.query),c=i*t-i,u=e.user.id,[w,B]=await Promise.all([this.newsRepository.findByAuthorId({authorId:u,pagination:{offset:c,limit:i},filter:{orderBy:s,title:m,content:n}}),this.newsRepository.count({filter:{authorId:u,content:n,title:m}})]),Z=Math.ceil(B/i);r.status(200).json({page:t,totalPages:Z,offset:c,limit:i,news:w})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as dy}from"@asteasolutions/zod-to-openapi";import{PendencyStatus as ly}from"@prisma/client";import ke from"zod";var uy=1,gy=6;dy(ke);var $n=ke.object({page:ke.coerce.number().min(1).default(uy),limit:ke.coerce.number().min(1).default(gy),title:ke.string().optional(),description:ke.string().optional(),status:ke.enum(ly).default("PENDING"),orderBy:ke.enum(["asc","desc"]).default("desc")}),Sr=class{constructor(e){this.pendencyRepository=e}async handle(e,r){try{let{limit:t,page:i,...n}=$n.parse(e.query),s=i*t-t,m=e.user.id,[c,u]=await Promise.all([this.pendencyRepository.findByUserId({userId:m,pagination:{offset:s,limit:t},filter:n}),this.pendencyRepository.count({filter:{...n,userId:m}})]),w=Math.max(Math.ceil(u/t),1);return r.status(200).json({page:i,totalPages:w,offset:s,limit:t,pendencies:c})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as yy}from"@asteasolutions/zod-to-openapi";import vr from"zod";yy(vr);var Jn=vr.object({password:vr.string(),email:vr.email()}),Er=class{constructor(e,r,t){this.userRepository=e;this.bcrypt=r;this.jwtService=t}async handle(e,r){try{let{email:t,password:i}=Jn.parse(e.body),n=await this.userRepository.findByEmail(t);if(!n)return r.status(401).json({message:"Usu\xE1rio n\xE3o existe."});if(!await this.bcrypt.compare({password:i,hashedPassword:n.passwordHash}))throw new de("Senha inv\xE1lida.");let{id:m,role:c}=n,u=this.jwtService.sign({id:m,role:c,email:t});return r.status(200).json({token:u})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as fy}from"@asteasolutions/zod-to-openapi";import Pt from"zod";var jr=8;fy(Pt);var Qn=Pt.object({name:Pt.string("Nome \xE9 obrigat\xF3rio.").min(1,"Nome \xE9 obrigat\xF3rio."),emailAddress:Pt.email("E-mail inv\xE1lido.").min(1,"E-mail \xE9 obrigat\xF3rio."),password:Pt.string("A senha \xE9 obrigat\xF3ria.").min(jr,`A senha deve ter pelo menos ${jr} caracteres.`),confirmPassword:Pt.string("A senha \xE9 obrigat\xF3ria.").min(jr,`A senha deve ter pelo menos ${jr} caracteres.`)}).refine(o=>o.password===o.confirmPassword,{message:"As senhas n\xE3o coincidem.",path:["confirmPassword"]}),xr=class{constructor(e,r){this.userRepository=e;this.bcrypt=r}async handle(e,r){try{let{emailAddress:t,name:i,password:n}=Qn.parse(e.body);if(await this.userRepository.findByEmail(t))throw new Q("Usu\xE1rio j\xE1 existe.");let m=await this.bcrypt.hash(n);return await this.userRepository.create({name:i,emailAddress:t,passwordHash:m}),r.status(201).json()}catch(t){if(t instanceof Error)throw new a(t.message)}}};var mc={method:"post",path:"/auth/sign-up",tags:["Authentication"],summary:"Create a new user",request:{body:{content:{"application/json":{schema:Qn}}}},responses:{201:{description:"User created successfully",summary:"User Registration Successful",content:{"application/json":{schema:h.object({message:h.string()})}}},400:{description:"Invalid input data provided",summary:"Validation Error",content:{"application/json":{schema:h.object({errors:h.record(h.string(),h.string())})}}},409:{description:"User already exists with this email",summary:"User Already Exists",content:{"application/json":{schema:h.object({message:h.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:h.object({message:h.string()})}}}}},cc={method:"post",path:"/auth/sign-in",tags:["Authentication"],summary:"Sign in",request:{body:{content:{"application/json":{schema:Jn}}}},responses:{200:{description:"Authentication successful, JWT token returned",summary:"Login Successful",content:{"application/json":{schema:h.object({token:h.string()})}}},400:{description:"Invalid credentials or input data",summary:"Validation Error",content:{"application/json":{schema:h.object({errors:h.record(h.string(),h.string())})}}},401:{description:"Invalid email or password",summary:"Authentication Failed",content:{"application/json":{schema:h.object({message:h.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:h.object({message:h.string()})}}}}},pc={method:"get",path:"/auth/user",tags:["Authentication"],summary:"Search for authenticated user",security:[{bearerAuth:[]}],responses:{200:{description:"Authenticated user information retrieved successfully",summary:"User Information Retrieved",content:{"application/json":{schema:h.object({name:h.string(),id:h.string(),avatarUrl:h.string().nullable(),createdAt:h.date(),updatedAt:h.date(),emailAddress:h.string(),orcid:h.string().nullable(),phone:h.string().nullable(),lattesUrl:h.string().nullable(),role:h.enum(ac.UserRole)}).nullable()}}},400:{description:"Invalid request parameters",summary:"Validation Error",content:{"application/json":{schema:h.object({errors:h.record(h.string(),h.string())})}}},404:{description:"User not found or not authenticated",summary:"User Not Found",content:{"application/json":{schema:h.object({message:h.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:h.object({message:h.string()})}}}}},dc={method:"get",path:"/auth/user/news",tags:["Authentication"],summary:"List authenticated user news",security:[{bearerAuth:[]}],request:{query:Xn},responses:{200:{description:"Paginated list of authenticated user news retrieved successfully",summary:"User News Retrieved",content:{"application/json":{schema:h.object({page:h.number(),totalPages:h.number(),offset:h.number(),limit:h.number(),news:h.object({content:h.string(),id:h.string(),title:h.string(),createdAt:h.date(),updatedAt:h.date(),imageUrl:h.string().nullable()})})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:h.object({errors:h.record(h.string(),h.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:h.object({message:h.string()})}}}}},lc={method:"get",path:"/auth/admin",tags:["Authentication"],summary:"Verify admin access",security:[{bearerAuth:[]}],responses:{200:{description:"Admin access verified successfully",summary:"Admin Access Granted",content:{"application/json":{schema:h.object({success:h.boolean()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:h.object({message:h.string()})}}}}},uc={method:"get",path:"/auth/certifications",tags:["Authentication"],summary:"List all authenticated user's certifications",security:[{bearerAuth:[]}],request:{query:Yn},responses:{200:{description:"Paginated list of authenticated user certifications retrieved successfully",summary:"User Certifications Retrieved",content:{"application/json":{schema:h.object({page:h.number(),totalPages:h.number(),offset:h.number(),limit:h.number(),certifications:h.object({description:h.string(),id:h.string(),title:h.string(),certificationUrl:h.string(),createdAt:h.date(),updatedAt:h.date(),userId:h.string()})})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:h.object({errors:h.record(h.string(),h.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:h.object({message:h.string()})}}}}},gc={method:"get",path:"/auth/pendencies",tags:["Authentication"],summary:"List all authenticated user's pendencies",security:[{bearerAuth:[]}],request:{query:$n},responses:{200:{description:"Paginated list of authenticated user pendencies retrieved successfully",summary:"User Pendencies Retrieved",content:{"application/json":{schema:h.object({page:h.number(),totalPages:h.number(),offset:h.number(),limit:h.number(),pendencies:h.object({id:h.string(),title:h.string(),description:h.string(),status:h.enum(ac.PendencyStatus),createdAt:h.date(),updatedAt:h.date(),userId:h.string()})})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:h.object({errors:h.record(h.string(),h.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:h.object({message:h.string()})}}}}};import{$Enums as vy}from"@prisma/client";import v from"zod";import{extendZodWithOpenApi as hy}from"@asteasolutions/zod-to-openapi";import es from"zod";hy(es);var ts=es.object({id:es.string()}),Pr=class{constructor(e,r){this.certificationRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=ts.parse({id:e.params.certification_id}),i=await this.certificationRepository.findById(t);if(!i)throw new p("A certifica\xE7\xE3o n\xE3o existe.");return await Promise.all([this.certificationRepository.deleteById(i.id),this.firebaseStorageService.deleteFile({fileUrl:i.certificationUrl})]),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Ry}from"@asteasolutions/zod-to-openapi";import rs from"zod";Ry(rs);var os=rs.object({certificationId:rs.uuid()}),Mr=class{constructor(e){this.certificationRepository=e}async handle(e,r){try{let{certificationId:t}=os.parse({certificationId:e.params.certification_id}),i=await this.certificationRepository.findById(t);if(!i)throw new p("Certificado n\xE3o encontrado.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Iy}from"@asteasolutions/zod-to-openapi";import Ge from"zod";var Cy=1,by=6;Iy(Ge);var is=Ge.object({page:Ge.coerce.number().min(1).default(Cy),limit:Ge.coerce.number().min(1).default(by),title:Ge.string().optional(),description:Ge.string().optional(),userId:Ge.uuid().optional(),orderBy:Ge.enum(["asc","desc"]).default("desc")}),Tr=class{constructor(e){this.certificationRepository=e}async handle(e,r){try{let{limit:t,page:i,...n}=is.parse(e.query),s=i*t-t,[m,c]=await Promise.all([this.certificationRepository.find({pagination:{offset:s,limit:t},filter:n}),this.certificationRepository.count({filter:n})]),u=Math.max(Math.ceil(c/t),1);return r.status(200).json({page:i,totalPages:u,offset:s,limit:t,certifications:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as wy}from"@asteasolutions/zod-to-openapi";import Mt from"zod";var T={NEWS:"images/news",USER:"images/user",IN_MEMORIAM:"images/in-memoriam",PARTNER:"images/partners",CERTIFICATION:"documents/certifications",PENDENCY:"documents/pendencies",REGIMENT:"documents/regiments",MEETING_MINUTE:"documents/meeting-minutes",INTERNATIONAL_SCIENTIFIC_CONGRESS_GALLERY:"images/international-scientific-congress-gallery",GALLERY:"images/regional-congress-gallery",REGIONAL_CONGRESS_GALLERY:"images/regional-congress-gallery",WEBINAR:"images/webinars",COURSE:"images/courses",POST_GRADUATE_PROGRAM:"images/post-graduate-programs",EVENT:"images/events"};wy(Mt);var Dr=Mt.object({userId:Mt.uuid(),title:Mt.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),description:Mt.string().min(1,"Descri\xE7\xE3o \xE9 obrigat\xF3ria."),certification:Mt.any().refine(o=>o&&typeof o=="object"&&o.size>0,"Arquivo do certificado \xE9 obrigat\xF3rio")}),Ar=class{constructor(e,r,t){this.userRepository=e;this.certificationRepository=r;this.firebaseStorageService=t}async handle(e,r){try{let{userId:t,title:i,description:n,certification:s}=Dr.parse({...e.body,userId:e.params.user_id,certification:e.file});if(!await this.userRepository.findById(t))throw new ie("O usu\xE1rio n\xE3o existe.");let c=await this.firebaseStorageService.uploadFile({file:s,id:t,folder:T.CERTIFICATION});return await this.certificationRepository.register({userId:t,title:i,description:n,certificationUrl:c}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Sy}from"@asteasolutions/zod-to-openapi";import Tt from"zod";Sy(Tt);var Ur=Tt.object({id:Tt.uuid(),title:Tt.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),description:Tt.string().min(1,"Descri\xE7\xE3o \xE9 obrigat\xF3ria."),certification:Tt.any().refine(o=>o==null||typeof o=="object"&&typeof o.size=="number"&&(o.size===0||o.size>0),"Arquivo do certificado \xE9 inv\xE1lido").optional()}),Fr=class{constructor(e,r){this.certificationRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{certification:t,id:i,...n}=Ur.parse({...e.body,id:e.params.certification_id,certification:e.file}),s=await this.certificationRepository.findById(i);if(!s)throw new ie("A certifica\xE7\xE3o n\xE3o existe");let m=s.certificationUrl;return t&&t.size>0&&(m=await this.firebaseStorageService.updateFile({file:t,id:s.userId,folder:T.CERTIFICATION,fileUrl:s.certificationUrl})),await this.certificationRepository.update({...n,id:i,certificationUrl:m}),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var yc={method:"post",path:"/certifications/{user_id}",tags:["Certifications"],summary:"Register certification for user",security:[{bearerAuth:[]}],request:{params:Dr.pick({userId:!0}).transform(()=>({user_id:""})),body:{content:{"multipart/form-data":{schema:Dr.omit({userId:!0})}}}},responses:{201:{description:"Certification registered successfully for the user",summary:"Certification Registered",content:{"application/json":{schema:v.object({message:v.string()})}}},400:{description:"Invalid input data or file format",summary:"Validation Error",content:{"application/json":{schema:v.object({errors:v.record(v.string(),v.string())})}}},404:{description:"User not found with the provided ID",summary:"User Not Found",content:{"application/json":{schema:v.object({message:v.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:v.object({message:v.string()})}}}}},fc={method:"get",path:"/certifications",tags:["Certifications"],summary:"List certifications",security:[{bearerAuth:[]}],request:{query:is},responses:{200:{description:"Paginated list of certifications with user information retrieved successfully",summary:"Certifications Retrieved",content:{"application/json":{schema:v.object({page:v.number(),totalPages:v.number(),offset:v.number(),limit:v.number(),certifications:v.array(v.object({description:v.string(),userId:v.string(),title:v.string(),id:v.string(),createdAt:v.date(),updatedAt:v.date(),certificationUrl:v.url(),user:v.object({id:v.uuid(),name:v.string(),createdAt:v.date(),updatedAt:v.date(),avatarUrl:v.string().nullable(),emailAddress:v.email(),orcid:v.string().nullable(),phone:v.string().nullable(),lattesUrl:v.url().nullable(),role:v.enum(vy.UserRole)})}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:v.object({errors:v.record(v.string(),v.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:v.object({message:v.string()})}}}}},hc={method:"get",path:"/certifications/{certification_id}",tags:["Certifications"],summary:"Find certification by ID",security:[{bearerAuth:[]}],request:{params:os},responses:{200:{description:"Certification details retrieved successfully",summary:"Certification Retrieved",content:{"application/json":{schema:v.object({description:v.string(),userId:v.string(),title:v.string(),id:v.string(),createdAt:v.date(),updatedAt:v.date(),certificationUrl:v.url()}).nullable()}}},400:{description:"Invalid certification ID format",summary:"Validation Error",content:{"application/json":{schema:v.object({errors:v.record(v.string(),v.string())})}}},404:{description:"Certification not found with the provided ID",summary:"Certification Not Found",content:{"application/json":{schema:v.object({message:v.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:v.object({message:v.string()})}}}}},Rc={method:"put",path:"/certifications/{certification_id}",tags:["Certifications"],summary:"Update certification",security:[{bearerAuth:[]}],request:{params:Ur.pick({id:!0}).transform(()=>({certification_id:""})),body:{content:{"multipart/form-data":{schema:Ur.omit({id:!0})}}}},responses:{204:{description:"Certification updated successfully",summary:"Certification Updated"},400:{description:"Invalid input data or file format",summary:"Validation Error",content:{"application/json":{schema:v.object({errors:v.record(v.string(),v.string())})}}},404:{description:"Certification not found with the provided ID",summary:"Certification Not Found",content:{"application/json":{schema:v.object({message:v.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:v.object({message:v.string()})}}}}},Ic={method:"delete",path:"/certifications/{certification_id}",tags:["Certifications"],summary:"Delete certification",security:[{bearerAuth:[]}],request:{params:ts},responses:{204:{description:"Certification deleted successfully",summary:"Certification Deleted"},400:{description:"Invalid certification ID format",summary:"Validation Error",content:{"application/json":{schema:v.object({errors:v.record(v.string(),v.string())})}}},404:{description:"Certification not found with the provided ID",summary:"Certification Not Found",content:{"application/json":{schema:v.object({message:v.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:v.object({message:v.string()})}}}}};import f from"zod";import{extendZodWithOpenApi as Ey}from"@asteasolutions/zod-to-openapi";import ns from"zod";Ey(ns);var ss=ns.object({id:ns.uuid()}),qr=class{constructor(e,r){this.courseRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=ss.parse({id:e.params.id}),i=await this.courseRepository.findById(t);if(!i)throw new p("O curso n\xE3o existe.");return i.imageUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.imageUrl}),await this.courseRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as jy}from"@asteasolutions/zod-to-openapi";import as from"zod";jy(as);var ms=as.object({id:as.uuid()}),Br=class{constructor(e){this.courseRepository=e}async handle(e,r){try{let{id:t}=ms.parse({id:e.params.id}),i=await this.courseRepository.findById(t);if(!i)throw new p("Curso n\xE3o encontrado.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as xy}from"@asteasolutions/zod-to-openapi";import Le from"zod";var Py=1,My=6;xy(Le);var cs=Le.object({page:Le.coerce.number().min(1).default(Py),limit:Le.coerce.number().min(1).default(My),title:Le.string().optional(),description:Le.string().optional(),coordinator:Le.string().optional(),orderBy:Le.enum(["asc","desc"]).default("desc")}),Or=class{constructor(e){this.courseRepository=e}async handle(e,r){try{let{limit:t,page:i,...n}=cs.parse(e.query),s=i*t-t,[m,c]=await Promise.all([this.courseRepository.find({pagination:{offset:s,limit:t},filter:n}),this.courseRepository.count({filter:n})]),u=Math.max(Math.ceil(c/t),1);return r.status(200).json({page:i,totalPages:u,offset:s,limit:t,courses:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Ty}from"@asteasolutions/zod-to-openapi";import ne from"zod";var bc=5,Cc=1024,Ay=Cc*Cc,Dy=bc*Ay;Ty(ne);var ps=ne.object({id:ne.uuid(),title:ne.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio.").optional(),coordinatorId:ne.string().uuid("Coordenador \xE9 obrigat\xF3rio.").optional(),email:ne.string().email("E-mail deve ser v\xE1lido.").optional(),location:ne.string().min(1,"Localiza\xE7\xE3o \xE9 obrigat\xF3ria.").optional(),scheduledAt:ne.coerce.date().optional(),registrationLink:ne.url("URL de inscri\xE7\xE3o deve ser v\xE1lida").optional(),description:ne.string().optional(),instructorIds:ne.transform(o=>typeof o=="string"?o.split(","):o).pipe(ne.array(ne.uuid())).optional(),image:ne.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=Dy,`A imagem deve ter no m\xE1ximo ${bc}MB.`).optional()}),Nr=class{constructor(e,r){this.courseRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,image:i,title:n,coordinatorId:s,email:m,location:c,scheduledAt:u,registrationLink:w,description:B,instructorIds:Z}=ps.parse({id:e.params.id,...e.body,image:e.file}),X=await this.courseRepository.findById(t);if(!X)throw new p("O curso n\xE3o existe.");let oe=X.imageUrl;if(i&&(oe=await this.firebaseStorageService.uploadFile({file:i,id:t,folder:T.COURSE})),!oe)throw new a("URL da imagem \xE9 obrigat\xF3rio");return await this.courseRepository.update({id:t,title:n,coordinatorId:s,email:m,location:c,scheduledAt:u,registrationLink:w,description:B,imageUrl:oe,instructorIds:Z}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var wc={method:"post",path:"/courses",tags:["Courses"],summary:"Create course",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:f.object({title:f.string().min(1).openapi({description:"T\xEDtulo do curso"}),coordinator:f.string().min(1).openapi({description:"Nome do coordenador"}),email:f.string().email().openapi({description:"E-mail de contato"}),location:f.string().min(1).openapi({description:"Localiza\xE7\xE3o do curso"}),scheduledAt:f.string().openapi({description:"Data e hora agendada (ISO 8601)",example:"2024-01-01T10:00:00Z"}),registrationLink:f.string().url().optional().openapi({description:"Link de inscri\xE7\xE3o"}),description:f.string().optional().openapi({description:"Descri\xE7\xE3o do curso"}),instructorIds:f.string().openapi({description:"IDs dos instrutores separados por v\xEDrgula",example:"uuid1,uuid2,uuid3"}),image:f.string().optional().openapi({description:"Imagem do curso (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{201:{description:"Course created successfully",summary:"Course Created"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:f.object({errors:f.record(f.string(),f.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:f.object({message:f.string()})}}}}},Sc={method:"get",path:"/courses",tags:["Courses"],summary:"List courses",security:[{bearerAuth:[]}],request:{query:cs},responses:{200:{description:"Paginated list of courses with instructor information retrieved successfully",summary:"Courses Retrieved",content:{"application/json":{schema:f.object({page:f.number(),totalPages:f.number(),offset:f.number(),limit:f.number(),courses:f.array(f.object({id:f.string(),title:f.string(),imageUrl:f.string().nullable(),coordinator:f.string(),email:f.string(),scheduledAt:f.date(),location:f.string(),registrationLink:f.string().nullable(),description:f.string().nullable(),createdAt:f.date(),updatedAt:f.date(),instructors:f.array(f.object({id:f.uuid(),name:f.string(),emailAddress:f.email(),avatarUrl:f.string().nullable(),createdAt:f.date(),updatedAt:f.date()}))}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:f.object({errors:f.record(f.string(),f.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:f.object({message:f.string()})}}}}},vc={method:"get",path:"/courses/{id}",tags:["Courses"],summary:"Find course by ID",security:[{bearerAuth:[]}],request:{params:ms},responses:{200:{description:"Course details retrieved successfully",summary:"Course Retrieved",content:{"application/json":{schema:f.object({id:f.string(),title:f.string(),imageUrl:f.string().nullable(),coordinator:f.string(),email:f.string(),scheduledAt:f.date(),location:f.string(),registrationLink:f.string().nullable(),description:f.string().nullable(),createdAt:f.date(),updatedAt:f.date(),instructors:f.array(f.object({id:f.uuid(),name:f.string(),emailAddress:f.email(),avatarUrl:f.string().nullable(),createdAt:f.date(),updatedAt:f.date()}))}).nullable()}}},400:{description:"Invalid course ID format",summary:"Validation Error",content:{"application/json":{schema:f.object({errors:f.record(f.string(),f.string())})}}},404:{description:"Course not found with the provided ID",summary:"Course Not Found",content:{"application/json":{schema:f.object({message:f.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:f.object({message:f.string()})}}}}},Ec={method:"put",path:"/courses/{id}",tags:["Courses"],summary:"Update course",security:[{bearerAuth:[]}],request:{params:ps.pick({id:!0}),body:{content:{"multipart/form-data":{schema:f.object({title:f.string().min(1).optional().openapi({description:"T\xEDtulo do curso"}),coordinator:f.string().min(1).optional().openapi({description:"Nome do coordenador"}),email:f.string().email().optional().openapi({description:"E-mail de contato"}),location:f.string().min(1).optional().openapi({description:"Localiza\xE7\xE3o do curso"}),scheduledAt:f.string().optional().openapi({description:"Data e hora agendada (ISO 8601)",example:"2024-01-01T10:00:00Z"}),registrationLink:f.string().url().optional().openapi({description:"Link de inscri\xE7\xE3o"}),description:f.string().optional().openapi({description:"Descri\xE7\xE3o do curso"}),instructorIds:f.string().optional().openapi({description:"IDs dos instrutores separados por v\xEDrgula",example:"uuid1,uuid2,uuid3"}),image:f.string().optional().openapi({description:"Imagem do curso (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{200:{description:"Course updated successfully",summary:"Course Updated"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:f.object({errors:f.record(f.string(),f.string())})}}},404:{description:"Course not found with the provided ID",summary:"Course Not Found",content:{"application/json":{schema:f.object({message:f.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:f.object({message:f.string()})}}}}},jc={method:"delete",path:"/courses/{id}",tags:["Courses"],summary:"Delete course",security:[{bearerAuth:[]}],request:{params:ss},responses:{200:{description:"Course deleted successfully",summary:"Course Deleted"},400:{description:"Invalid course ID format",summary:"Validation Error",content:{"application/json":{schema:f.object({errors:f.record(f.string(),f.string())})}}},404:{description:"Course not found with the provided ID",summary:"Course Not Found",content:{"application/json":{schema:f.object({message:f.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:f.object({message:f.string()})}}}}};import{$Enums as fs}from"@prisma/client";import I from"zod";import{extendZodWithOpenApi as Fy}from"@asteasolutions/zod-to-openapi";import he from"zod";Fy(he);var ds=he.object({code:he.string(),title:he.string(),description:he.string().optional(),notes:he.string().optional(),leaderId:he.uuid(),deputyLeaderId:he.uuid(),secretaryId:he.uuid(),memberIds:he.array(he.uuid())}),kr=class{constructor(e){this.etpRepository=e}async handle(e,r){try{let{code:t,title:i,description:n,notes:s,leaderId:m,deputyLeaderId:c,secretaryId:u,memberIds:w}=ds.parse(e.body);if(await this.etpRepository.findByCode(t))throw new Q("J\xE1 existe um ETP cadastrado com este c\xF3digo.");return await this.etpRepository.create({code:t,title:i,description:n,notes:s,leaderId:m,deputyLeaderId:c,secretaryId:u,memberIds:w}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Uy}from"@asteasolutions/zod-to-openapi";import ls from"zod";Uy(ls);var us=ls.object({id:ls.uuid()}),Gr=class{constructor(e){this.etpRepository=e}async handle(e,r){try{let{id:t}=us.parse({id:e.params.id});if(!await this.etpRepository.findById(t))throw new p("O ETP n\xE3o existe.");return await this.etpRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as qy}from"@asteasolutions/zod-to-openapi";import gs from"zod";qy(gs);var _r=gs.object({id:gs.uuid()}),Lr=class{constructor(e){this.etpRepository=e}async handle(e,r){try{let{id:t}=_r.parse({id:e.params.id}),i=await this.etpRepository.findById(t);if(!i)throw new p("O ETP n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as By}from"@asteasolutions/zod-to-openapi";import le from"zod";By(le);var ys=le.object({id:le.uuid(),code:le.string().optional(),title:le.string().optional(),description:le.string().optional(),notes:le.string().optional(),leaderId:le.uuid().optional(),deputyLeaderId:le.uuid().optional(),secretaryId:le.uuid().optional(),memberIds:le.array(le.uuid()).optional()}),Wr=class{constructor(e){this.etpRepository=e}async handle(e,r){try{let{id:t,code:i,title:n,description:s,notes:m,leaderId:c,deputyLeaderId:u,secretaryId:w,memberIds:B}=ys.parse({id:e.params.id,...e.body});if(!await this.etpRepository.findById(t))throw new p("O ETP n\xE3o existe.");if(i){let X=await this.etpRepository.findByCode(i);if(X&&X.id!==t)throw new Q("J\xE1 existe um ETP com este c\xF3digo.")}return await this.etpRepository.update({id:t,code:i,title:n,description:s,notes:m,leaderId:c,deputyLeaderId:u,secretaryId:w,memberIds:B}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Oy=1,Ny=9,Hr=I.object({id:I.uuid(),registrationNumber:I.string(),mainEtps:I.string().nullable(),formations:I.string().nullable(),degrees:I.array(I.enum(fs.Degree)),occupations:I.string(),seniority:I.enum(fs.Seniority),institutions:I.string(),biography:I.string().nullable(),createdAt:I.date(),updatedAt:I.date(),user:I.object({id:I.uuid(),name:I.string(),emailAddress:I.string(),avatarUrl:I.string().nullable(),orcid:I.string().nullable(),phone:I.string().nullable(),lattesUrl:I.string().nullable(),role:I.enum(fs.UserRole)})}),xc=I.object({id:I.uuid(),code:I.string(),title:I.string(),description:I.string().nullable(),notes:I.string().nullable(),createdAt:I.date(),updatedAt:I.date(),leader:I.object({id:I.uuid(),researcher:Hr}).nullable(),deputyLeader:I.object({id:I.uuid(),researcher:Hr}).nullable(),secretary:I.object({id:I.uuid(),researcher:Hr}).nullable(),members:I.array(Hr)}),Pc={method:"post",path:"/etp",tags:["ETPs"],summary:"Create a new ETP with single leader, deputy leader, secretary and multiple members",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:ds}}}},responses:{201:{description:"ETP created successfully",summary:"ETP Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:I.object({errors:I.record(I.string(),I.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:I.object({message:I.string()})}}},409:{description:"ETP with this code already exists",summary:"Conflict",content:{"application/json":{schema:I.object({message:I.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:I.object({message:I.string()})}}}}},Mc={method:"get",path:"/etp",tags:["ETPs"],summary:"List all ETPs with pagination and filters",request:{query:I.object({page:I.coerce.number().min(1).default(Oy).optional(),limit:I.coerce.number().min(1).default(Ny).optional(),code:I.string().optional(),title:I.string().optional(),description:I.string().optional(),notes:I.string().optional(),orderBy:I.enum(["asc","desc"]).optional()})},responses:{200:{description:"List of ETPs retrieved successfully with pagination",summary:"ETPs Retrieved",content:{"application/json":{schema:I.object({page:I.number(),totalPages:I.number(),offset:I.number(),limit:I.number(),etps:I.array(xc)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:I.object({message:I.string()})}}}}},Tc={method:"get",path:"/etp/{id}",tags:["ETPs"],summary:"Find ETP by ID",request:{params:_r},responses:{200:{description:"ETP details retrieved successfully",summary:"ETP Retrieved",content:{"application/json":{schema:xc}}},400:{description:"Invalid ETP ID format",summary:"Validation Error",content:{"application/json":{schema:I.object({errors:I.record(I.string(),I.string())})}}},404:{description:"ETP not found with the provided ID",summary:"ETP Not Found",content:{"application/json":{schema:I.object({message:I.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:I.object({message:I.string()})}}}}},Ac={method:"put",path:"/etp/{id}",tags:["ETPs"],summary:"Update ETP and manage user relationships (single leader, deputy leader, secretary, multiple members)",security:[{bearerAuth:[]}],request:{params:_r,body:{content:{"application/json":{schema:ys.omit({id:!0})}}}},responses:{200:{description:"ETP updated successfully",summary:"ETP Updated"},400:{description:"Invalid input data or ETP ID format",summary:"Validation Error",content:{"application/json":{schema:I.object({errors:I.record(I.string(),I.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:I.object({message:I.string()})}}},404:{description:"ETP not found with the provided ID",summary:"ETP Not Found",content:{"application/json":{schema:I.object({message:I.string()})}}},409:{description:"ETP with this code already exists",summary:"Conflict",content:{"application/json":{schema:I.object({message:I.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:I.object({message:I.string()})}}}}},Dc={method:"delete",path:"/etp/{id}",tags:["ETPs"],summary:"Delete ETP",security:[{bearerAuth:[]}],request:{params:us},responses:{200:{description:"ETP deleted successfully",summary:"ETP Deleted"},400:{description:"Invalid ETP ID format",summary:"Validation Error",content:{"application/json":{schema:I.object({errors:I.record(I.string(),I.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:I.object({message:I.string()})}}},404:{description:"ETP not found with the provided ID",summary:"ETP Not Found",content:{"application/json":{schema:I.object({message:I.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:I.object({message:I.string()})}}}}};import{EventFormat as rf,EventStatus as of}from"@prisma/client";import A from"zod";import{extendZodWithOpenApi as ky}from"@asteasolutions/zod-to-openapi";import{EventFormat as zr,EventStatus as hs}from"@prisma/client";import ue from"zod";var Gy=5,Fc=1024,Ly=Fc*Fc,_y=Gy*Ly;ky(ue);var Rs=ue.object({title:ue.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio"),description:ue.string().optional(),startDate:ue.coerce.date(),endDate:ue.coerce.date(),location:ue.string().optional(),format:ue.enum(zr).default(zr.ONLINE),eventLink:ue.string().url("Link do evento deve ser uma URL v\xE1lida").optional().or(ue.literal("")),status:ue.enum(hs).default(hs.PENDING),image:ue.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=_y,"A imagem deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.")}).refine(o=>o.format===zr.ONLINE?!!o.eventLink:o.format===zr.IN_PERSON?!!o.location:!0,{message:"Eventos online devem ter link e eventos presenciais devem ter localiza\xE7\xE3o",path:["format"]}),Zr=class{constructor(e,r){this.eventRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{title:t,description:i,startDate:n,endDate:s,location:m,format:c,eventLink:u,status:w,image:B}=Rs.parse({...e.body,image:e.file}),Z=await this.eventRepository.create({title:t,description:i,startDate:n,endDate:s,location:m||void 0,format:c,eventLink:u||void 0,status:w??hs.PENDING}),X=await this.firebaseStorageService.uploadFile({file:B,folder:T.EVENT,id:Z.id});return await this.eventRepository.update({id:Z.id,imageUrl:X}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Wy}from"@asteasolutions/zod-to-openapi";import Is from"zod";Wy(Is);var Cs=Is.object({id:Is.uuid()}),Vr=class{constructor(e){this.eventRepository=e}async handle(e,r){try{let{id:t}=Cs.parse({id:e.params.id});if(!await this.eventRepository.findById(t))throw new p("O evento n\xE3o existe.");return await this.eventRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Hy}from"@asteasolutions/zod-to-openapi";import bs from"zod";Hy(bs);var Yr=bs.object({id:bs.uuid()}),Kr=class{constructor(e){this.eventRepository=e}async handle(e,r){try{let{id:t}=Yr.parse({id:e.params.id}),i=await this.eventRepository.findById(t);if(!i)throw new p("O evento n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as zy}from"@asteasolutions/zod-to-openapi";import{EventFormat as Zy,EventStatus as Vy}from"@prisma/client";import _e from"zod";var Ky=1,Yy=10;zy(_e);var ws=_e.object({page:_e.coerce.number().min(1).default(Ky),limit:_e.coerce.number().min(1).default(Yy),title:_e.string().optional(),status:_e.nativeEnum(Vy).optional(),format:_e.nativeEnum(Zy).optional(),orderBy:_e.enum(["asc","desc"]).optional()}),Xr=class{constructor(e){this.eventRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=ws.parse(e.query),s=i*t-i,[m,c]=await Promise.all([this.eventRepository.find({pagination:{offset:s,limit:i},filter:n}),this.eventRepository.count({filter:n})]),u=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:u,offset:s,limit:i,events:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Xy}from"@asteasolutions/zod-to-openapi";import{EventFormat as $y,EventStatus as Jy}from"@prisma/client";import ae from"zod";var Qy=5,Uc=1024,ef=Uc*Uc,tf=Qy*ef;Xy(ae);var Ss=ae.object({id:ae.uuid(),title:ae.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio").optional(),description:ae.string().optional(),startDate:ae.coerce.date().optional(),endDate:ae.coerce.date().optional(),location:ae.string().optional(),format:ae.nativeEnum($y).optional(),eventLink:ae.string().url("Link do evento deve ser uma URL v\xE1lida").optional().or(ae.literal("")),status:ae.nativeEnum(Jy).optional(),image:ae.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=tf,"A imagem deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.").optional()}),$r=class{constructor(e,r){this.eventRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,title:i,description:n,startDate:s,endDate:m,location:c,format:u,eventLink:w,status:B,image:Z}=Ss.parse({id:e.params.id,...e.body,image:e.file});if(!await this.eventRepository.findById(t))throw new p("O evento n\xE3o existe.");let oe;return Z&&(oe=await this.firebaseStorageService.uploadFile({file:Z,folder:T.EVENT,id:t})),await this.eventRepository.update({id:t,title:i,description:n,startDate:s,endDate:m,location:c||void 0,format:u,eventLink:w||void 0,status:B,imageUrl:oe}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var qc=A.object({id:A.uuid(),title:A.string(),description:A.string().nullable(),imageUrl:A.string().nullable(),startDate:A.date(),endDate:A.date(),location:A.string().nullable(),status:A.nativeEnum(of),format:A.nativeEnum(rf),eventLink:A.string().nullable(),createdAt:A.date(),updatedAt:A.date()}),Bc={method:"post",path:"/event",tags:["Events"],summary:"Create a new event",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:Rs}}}},responses:{201:{description:"Event created successfully",summary:"Event Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:A.object({errors:A.record(A.string(),A.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:A.object({message:A.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:A.object({message:A.string()})}}}}},Oc={method:"get",path:"/event",tags:["Events"],summary:"List all events with pagination and filters",request:{query:ws},responses:{200:{description:"List of events retrieved successfully with pagination",summary:"Events Retrieved",content:{"application/json":{schema:A.object({page:A.number(),totalPages:A.number(),offset:A.number(),limit:A.number(),events:A.array(qc)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:A.object({errors:A.record(A.string(),A.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:A.object({message:A.string()})}}}}},Nc={method:"get",path:"/event/{id}",tags:["Events"],summary:"Find event by ID",request:{params:Yr},responses:{200:{description:"Event details retrieved successfully",summary:"Event Retrieved",content:{"application/json":{schema:qc}}},400:{description:"Invalid event ID format",summary:"Validation Error",content:{"application/json":{schema:A.object({errors:A.record(A.string(),A.string())})}}},404:{description:"Event not found with the provided ID",summary:"Event Not Found",content:{"application/json":{schema:A.object({message:A.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:A.object({message:A.string()})}}}}},kc={method:"put",path:"/event/{id}",tags:["Events"],summary:"Update event",security:[{bearerAuth:[]}],request:{params:Yr,body:{content:{"multipart/form-data":{schema:Ss.omit({id:!0})}}}},responses:{200:{description:"Event updated successfully",summary:"Event Updated"},400:{description:"Invalid input data or event ID format",summary:"Validation Error",content:{"application/json":{schema:A.object({errors:A.record(A.string(),A.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:A.object({message:A.string()})}}},404:{description:"Event not found with the provided ID",summary:"Event Not Found",content:{"application/json":{schema:A.object({message:A.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:A.object({message:A.string()})}}}}},Gc={method:"delete",path:"/event/{id}",tags:["Events"],summary:"Delete event",security:[{bearerAuth:[]}],request:{params:Cs},responses:{200:{description:"Event deleted successfully",summary:"Event Deleted"},400:{description:"Invalid event ID format",summary:"Validation Error",content:{"application/json":{schema:A.object({errors:A.record(A.string(),A.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:A.object({message:A.string()})}}},404:{description:"Event not found with the provided ID",summary:"Event Not Found",content:{"application/json":{schema:A.object({message:A.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:A.object({message:A.string()})}}}}};import{InMemoriamRole as bf}from"@prisma/client";import j from"zod";import{extendZodWithOpenApi as nf}from"@asteasolutions/zod-to-openapi";import{InMemoriamRole as sf}from"@prisma/client";import We from"zod";var _c=2,Lc=1024,af=Lc*Lc,mf=_c*af;nf(We);var vs=We.object({name:We.string().min(1,"Nome \xE9 obrigat\xF3rio"),birthDate:We.coerce.date(),deathDate:We.coerce.date(),biography:We.string().optional(),photo:We.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=mf,`A imagem deve ter no m\xE1ximo ${_c}MB.`).optional(),role:We.enum(sf)}).refine(o=>o.deathDate>o.birthDate,{message:"Data de falecimento deve ser posterior \xE0 data de nascimento",path:["deathDate"]}),Jr=class{constructor(e,r){this.inMemoriamRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{name:t,birthDate:i,deathDate:n,biography:s,role:m,photo:c}=vs.parse({...e.body,photo:e.file}),u=await this.inMemoriamRepository.create({name:t,birthDate:i,deathDate:n,biography:s??void 0,role:m}),w;return c&&(w=await this.firebaseStorageService.uploadFile({file:c,id:u.id,folder:T.IN_MEMORIAM}),await this.inMemoriamRepository.update({id:u.id,photoUrl:w})),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as cf}from"@asteasolutions/zod-to-openapi";import Es from"zod";cf(Es);var js=Es.object({id:Es.uuid()}),Qr=class{constructor(e,r){this.inMemoriamRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=js.parse({id:e.params.id}),i=await this.inMemoriamRepository.findById(t);if(!i)throw new p("O in memoriam n\xE3o existe.");return i.photoUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.photoUrl}),await this.inMemoriamRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as pf}from"@asteasolutions/zod-to-openapi";import xs from"zod";pf(xs);var to=xs.object({id:xs.uuid()}),eo=class{constructor(e){this.inMemoriamRepository=e}async handle(e,r){try{let{id:t}=to.parse({id:e.params.id}),i=await this.inMemoriamRepository.findById(t);if(!i)throw new p("O in memoriam n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as df}from"@asteasolutions/zod-to-openapi";import{InMemoriamRole as lf}from"@prisma/client";import Ps from"zod";df(Ps);var Ms=Ps.object({role:Ps.enum(lf)}),ro=class{constructor(e){this.inMemoriamRepository=e}async handle(e,r){try{let{role:t}=Ms.parse({role:e.params.role}),i=await this.inMemoriamRepository.findByRole(t);return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as uf}from"@asteasolutions/zod-to-openapi";import{InMemoriamRole as gf}from"@prisma/client";import He from"zod";var yf=1,ff=9;uf(He);var Ts=He.object({page:He.coerce.number().min(1).default(yf),limit:He.coerce.number().min(1).default(ff),name:He.string().optional(),biography:He.string().optional(),role:He.enum(gf).optional(),orderBy:He.enum(["asc","desc"]).default("desc")}),oo=class{constructor(e){this.inMemoriamRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=Ts.parse(e.query),s=i*t-i,[m,c]=await Promise.all([this.inMemoriamRepository.find({pagination:{offset:s,limit:i},filter:n}),this.inMemoriamRepository.count({filter:n})]),u=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:u,offset:s,limit:i,inMemoriam:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as hf}from"@asteasolutions/zod-to-openapi";import{InMemoriamRole as Rf}from"@prisma/client";import Pe from"zod";var Hc=2,Wc=1024,If=Wc*Wc,Cf=Hc*If;hf(Pe);var As=Pe.object({id:Pe.uuid(),name:Pe.string().min(1,"Nome \xE9 obrigat\xF3rio").optional(),birthDate:Pe.coerce.date().optional(),deathDate:Pe.coerce.date().optional(),biography:Pe.string().optional(),photo:Pe.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=Cf,`A imagem deve ter no m\xE1ximo ${Hc}MB.`).optional(),role:Pe.enum(Rf).optional()}).refine(o=>o.birthDate&&o.deathDate?o.deathDate>o.birthDate:!0,{message:"Data de falecimento deve ser posterior \xE0 data de nascimento",path:["deathDate"]}),io=class{constructor(e,r){this.inMemoriamRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,name:i,birthDate:n,deathDate:s,biography:m,photo:c,role:u}=As.parse({id:e.params.id,...e.body,photo:e.file}),w=await this.inMemoriamRepository.findById(t);if(!w)throw new p("O registro in memoriam n\xE3o existe.");let B=w.photoUrl;return c&&(B=await this.firebaseStorageService.uploadFile({file:c,id:t,folder:T.IN_MEMORIAM})),await this.inMemoriamRepository.update({id:t,name:i,birthDate:n,deathDate:s,biography:m,photoUrl:B??void 0,role:u}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Ds=j.object({id:j.uuid(),name:j.string(),birthDate:j.date(),deathDate:j.date(),biography:j.string().nullable(),photoUrl:j.string().nullable(),role:j.enum(bf),createdAt:j.date(),updatedAt:j.date()}),zc={method:"post",path:"/in-memoriam",tags:["In Memoriam"],summary:"Create a new in memoriam record with optional photo upload",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:vs}}}},responses:{201:{description:"In memoriam record created successfully",summary:"In Memoriam Created"},400:{description:"Invalid input data, missing required fields, or invalid photo format/size",summary:"Validation Error",content:{"application/json":{schema:j.object({errors:j.record(j.string(),j.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:j.object({message:j.string()})}}},409:{description:"In memoriam record with this name already exists",summary:"Conflict",content:{"application/json":{schema:j.object({message:j.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:j.object({message:j.string()})}}}}},Zc={method:"get",path:"/in-memoriam",tags:["In Memoriam"],summary:"List all in memoriam records with pagination and filters",request:{query:Ts},responses:{200:{description:"List of in memoriam records retrieved successfully with pagination",summary:"In Memoriam Records Retrieved",content:{"application/json":{schema:j.object({page:j.number(),totalPages:j.number(),offset:j.number(),limit:j.number(),inMemoriam:j.array(Ds)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:j.object({errors:j.record(j.string(),j.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:j.object({message:j.string()})}}}}},Vc={method:"get",path:"/in-memoriam/{id}",tags:["In Memoriam"],summary:"Find in memoriam record by ID",request:{params:to},responses:{200:{description:"In memoriam record details retrieved successfully",summary:"In Memoriam Record Retrieved",content:{"application/json":{schema:Ds}}},400:{description:"Invalid in memoriam record ID format",summary:"Validation Error",content:{"application/json":{schema:j.object({errors:j.record(j.string(),j.string())})}}},404:{description:"In memoriam record not found with the provided ID",summary:"In Memoriam Record Not Found",content:{"application/json":{schema:j.object({message:j.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:j.object({message:j.string()})}}}}},Kc={method:"put",path:"/in-memoriam/{id}",tags:["In Memoriam"],summary:"Update in memoriam record with optional photo upload",security:[{bearerAuth:[]}],request:{params:to,body:{content:{"multipart/form-data":{schema:As.omit({id:!0})}}}},responses:{200:{description:"In memoriam record updated successfully",summary:"In Memoriam Record Updated"},400:{description:"Invalid input data, in memoriam record ID format, or invalid photo format/size",summary:"Validation Error",content:{"application/json":{schema:j.object({errors:j.record(j.string(),j.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:j.object({message:j.string()})}}},404:{description:"In memoriam record not found with the provided ID",summary:"In Memoriam Record Not Found",content:{"application/json":{schema:j.object({message:j.string()})}}},409:{description:"In memoriam record with this name already exists",summary:"Conflict",content:{"application/json":{schema:j.object({message:j.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:j.object({message:j.string()})}}}}},Yc={method:"delete",path:"/in-memoriam/{id}",tags:["In Memoriam"],summary:"Delete in memoriam record",security:[{bearerAuth:[]}],request:{params:js},responses:{200:{description:"In memoriam record deleted successfully",summary:"In Memoriam Record Deleted"},400:{description:"Invalid in memoriam record ID format",summary:"Validation Error",content:{"application/json":{schema:j.object({errors:j.record(j.string(),j.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:j.object({message:j.string()})}}},404:{description:"In memoriam record not found with the provided ID",summary:"In Memoriam Record Not Found",content:{"application/json":{schema:j.object({message:j.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:j.object({message:j.string()})}}}}},oj={method:"get",path:"/in-memoriam/role/{role}",tags:["In Memoriam"],summary:"Find in memoriam records by role",request:{params:Ms},responses:{200:{description:"In memoriam records retrieved successfully by role",summary:"In Memoriam Records Retrieved by Role",content:{"application/json":{schema:j.array(Ds)}}},400:{description:"Invalid role parameter provided",summary:"Validation Error",content:{"application/json":{schema:j.object({errors:j.record(j.string(),j.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:j.object({message:j.string()})}}}}};import L from"zod";import{extendZodWithOpenApi as wf}from"@asteasolutions/zod-to-openapi";import tr from"zod";var $c=2,Xc=1024,Sf=Xc*Xc,vf=$c*Sf;wf(tr);var Fs=tr.object({image:tr.any().refine(o=>o==null||typeof o!="object"||typeof o.size!="number"?!1:o.size<=vf,`A imagem deve ter no m\xE1ximo ${$c}MB.`),caption:tr.string().optional(),congressId:tr.uuid()}),no=class{constructor(e,r,t){this.internationalScientificCongressGalleryRepository=e;this.internationalScientificCongressRepository=r;this.firebaseStorageService=t}async handle(e,r){try{let{image:t,caption:i,congressId:n}=Fs.parse({...e.body,...e.params,image:e.file});if(!await this.internationalScientificCongressRepository.findById(n))throw new p("O congresso n\xE3o existe.");let m=await this.internationalScientificCongressGalleryRepository.create({imageUrl:"",caption:i||void 0,congressId:n}),c=await this.firebaseStorageService.uploadFile({file:t,id:m.id,folder:T.INTERNATIONAL_SCIENTIFIC_CONGRESS_GALLERY});return await this.internationalScientificCongressGalleryRepository.update({id:m.id,imageUrl:c}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Ef}from"@asteasolutions/zod-to-openapi";import Us from"zod";Ef(Us);var ao=Us.object({id:Us.uuid()}),so=class{constructor(e){this.internationalScientificCongressGalleryRepository=e}async handle(e,r){try{let{id:t}=ao.parse({id:e.params.id});if(!await this.internationalScientificCongressGalleryRepository.findById(t))throw new p("A imagem da galeria n\xE3o existe.");return await this.internationalScientificCongressGalleryRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as jf}from"@asteasolutions/zod-to-openapi";import At from"zod";var xf=1,Pf=9;jf(At);var qs=At.object({congressId:At.uuid(),page:At.coerce.number().min(1).default(xf),limit:At.coerce.number().min(1).default(Pf),caption:At.string().optional()}),mo=class{constructor(e){this.internationalScientificCongressGalleryRepository=e}async handle(e,r){try{let{congressId:t,page:i,limit:n,...s}=qs.parse({congressId:e.params.congressId,...e.query}),m=n*i-n,[c,u]=await Promise.all([this.internationalScientificCongressGalleryRepository.findByCongressId({pagination:{offset:m,limit:n},filter:{congressId:t,...s}}),this.internationalScientificCongressGalleryRepository.count({filter:{congressId:t,caption:s.caption}})]),w=Math.max(Math.ceil(u/n),1);return r.status(200).json({page:i,totalPages:w,offset:m,limit:n,galleryImages:c})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Mf}from"@asteasolutions/zod-to-openapi";import rr from"zod";var Qc=2,Jc=1024,Tf=Jc*Jc,Af=Qc*Tf;Mf(rr);var Bs=rr.object({id:rr.uuid(),image:rr.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=Af,`A imagem deve ter no m\xE1ximo ${Qc}MB.`).optional(),caption:rr.string().optional()}),co=class{constructor(e,r){this.internationalScientificCongressGalleryRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,image:i,caption:n}=Bs.parse({id:e.params.id,...e.body,image:e.file}),s=await this.internationalScientificCongressGalleryRepository.findById(t);if(!s)throw new p("A imagem da galeria n\xE3o existe.");let m=s.imageUrl;return i&&(m=await this.firebaseStorageService.uploadFile({file:i,id:t,folder:T.INTERNATIONAL_SCIENTIFIC_CONGRESS_GALLERY})),await this.internationalScientificCongressGalleryRepository.update({id:t,imageUrl:m??void 0,caption:n||void 0}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Df=L.object({id:L.uuid(),imageUrl:L.string(),caption:L.string().nullable(),congressId:L.uuid()}),ep={method:"post",path:"/international-scientific-congress/{congressId}/gallery",tags:["International Scientific Congresses"],summary:"Create a new congress gallery image",security:[{bearerAuth:[]}],request:{params:L.object({congressId:L.uuid()}),body:{content:{"application/json":{schema:Fs.omit({congressId:!0})}}}},responses:{201:{description:"Congress gallery image created successfully",summary:"Congress Gallery Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:L.object({errors:L.record(L.string(),L.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:L.object({message:L.string()})}}},404:{description:"Congress not found with the provided ID",summary:"Congress Not Found",content:{"application/json":{schema:L.object({message:L.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:L.object({message:L.string()})}}}}},tp={method:"get",path:"/international-scientific-congress/{congressId}/gallery",tags:["International Scientific Congresses"],summary:"Find congress gallery images by congress ID",request:{params:qs},responses:{200:{description:"Congress gallery images retrieved successfully by congress ID",summary:"Congress Galleries Retrieved",content:{"application/json":{schema:L.array(Df)}}},400:{description:"Invalid congress ID parameter provided",summary:"Validation Error",content:{"application/json":{schema:L.object({errors:L.record(L.string(),L.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:L.object({message:L.string()})}}}}},rp={method:"put",path:"/international-scientific-congress/gallery/{id}",tags:["International Scientific Congresses"],summary:"Update congress gallery image",security:[{bearerAuth:[]}],request:{params:ao,body:{content:{"application/json":{schema:Bs.omit({id:!0})}}}},responses:{200:{description:"Congress gallery image updated successfully",summary:"Congress Gallery Updated"},400:{description:"Invalid input data or gallery ID format",summary:"Validation Error",content:{"application/json":{schema:L.object({errors:L.record(L.string(),L.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:L.object({message:L.string()})}}},404:{description:"Congress gallery image not found with the provided ID",summary:"Congress Gallery Not Found",content:{"application/json":{schema:L.object({message:L.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:L.object({message:L.string()})}}}}},op={method:"delete",path:"/international-scientific-congress/gallery/{id}",tags:["International Scientific Congresses"],summary:"Delete congress gallery image",security:[{bearerAuth:[]}],request:{params:ao},responses:{200:{description:"Congress gallery image deleted successfully",summary:"Congress Gallery Deleted"},400:{description:"Invalid gallery ID format",summary:"Validation Error",content:{"application/json":{schema:L.object({errors:L.record(L.string(),L.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:L.object({message:L.string()})}}},404:{description:"Congress gallery image not found with the provided ID",summary:"Congress Gallery Not Found",content:{"application/json":{schema:L.object({message:L.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:L.object({message:L.string()})}}}}};import _ from"zod";import{extendZodWithOpenApi as Ff}from"@asteasolutions/zod-to-openapi";import or from"zod";var np=2,ip=1024,Uf=ip*ip,qf=np*Uf;Ff(or);var Os=or.object({name:or.string().min(1,"Nome \xE9 obrigat\xF3rio"),logo:or.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=qf,`A imagem deve ter no m\xE1ximo ${np}MB.`).optional(),congressId:or.uuid()}),po=class{constructor(e,r,t){this.internationalScientificCongressPartnerRepository=e;this.internationalScientificCongressRepository=r;this.firebaseStorageService=t}async handle(e,r){try{let{name:t,logo:i,congressId:n}=Os.parse({...e.body,...e.params,logo:e.file});if(!await this.internationalScientificCongressRepository.findById(n))throw new p("O congresso n\xE3o existe.");let m=await this.internationalScientificCongressPartnerRepository.create({name:t,congressId:n}),c;return i&&(c=await this.firebaseStorageService.uploadFile({file:i,id:m.id,folder:T.PARTNER}),await this.internationalScientificCongressPartnerRepository.update({id:m.id,logoUrl:c})),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Bf}from"@asteasolutions/zod-to-openapi";import Ns from"zod";Bf(Ns);var uo=Ns.object({id:Ns.uuid()}),lo=class{constructor(e){this.internationalScientificCongressPartnerRepository=e}async handle(e,r){try{let{id:t}=uo.parse({id:e.params.id});if(!await this.internationalScientificCongressPartnerRepository.findById(t))throw new p("O parceiro n\xE3o existe.");return await this.internationalScientificCongressPartnerRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Of}from"@asteasolutions/zod-to-openapi";import Dt from"zod";var Nf=1,kf=9;Of(Dt);var ks=Dt.object({congressId:Dt.uuid(),page:Dt.coerce.number().min(1).optional(),limit:Dt.coerce.number().min(1).optional(),name:Dt.string().optional()}),go=class{constructor(e){this.internationalScientificCongressPartnerRepository=e}async handle(e,r){try{let{congressId:t,page:i,limit:n,...s}=ks.parse({congressId:e.params.congressId,...e.query});if(i!==void 0&&n!==void 0){let c=i||Nf,u=n||kf,w=u*c-u,[B,Z]=await Promise.all([this.internationalScientificCongressPartnerRepository.findByCongressId({pagination:{offset:w,limit:u},filter:{congressId:t,...s}}),this.internationalScientificCongressPartnerRepository.count({filter:{congressId:t,name:s.name}})]),X=Math.max(Math.ceil(Z/u),1);return r.status(200).json({page:c,totalPages:X,offset:w,limit:u,partners:B})}let m=await this.internationalScientificCongressPartnerRepository.findByCongressId({filter:{congressId:t,...s}});return r.status(200).json(m)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Gf}from"@asteasolutions/zod-to-openapi";import ir from"zod";var ap=2,sp=1024,Lf=sp*sp,_f=ap*Lf;Gf(ir);var Gs=ir.object({id:ir.uuid(),name:ir.string().min(1,"Nome \xE9 obrigat\xF3rio").optional(),logo:ir.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=_f,`A imagem deve ter no m\xE1ximo ${ap}MB.`).optional()}),yo=class{constructor(e,r){this.internationalScientificCongressPartnerRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,name:i,logo:n}=Gs.parse({id:e.params.id,...e.body,logo:e.file}),s=await this.internationalScientificCongressPartnerRepository.findById(t);if(!s)throw new p("O parceiro n\xE3o existe.");let m=s.logoUrl;return n&&(m=await this.firebaseStorageService.uploadFile({file:n,id:t,folder:T.PARTNER})),await this.internationalScientificCongressPartnerRepository.update({id:t,name:i,logoUrl:m??void 0}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Wf=_.object({id:_.uuid(),name:_.string(),logoUrl:_.string().nullable(),congressId:_.uuid()}),mp={method:"post",path:"/international-scientific-congress/{congressId}/partner",tags:["International Scientific Congresses"],summary:"Create a new congress partner",security:[{bearerAuth:[]}],request:{params:_.object({congressId:_.uuid()}),body:{content:{"application/json":{schema:Os.omit({congressId:!0})}}}},responses:{201:{description:"Congress partner created successfully",summary:"Congress Partner Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:_.object({errors:_.record(_.string(),_.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:_.object({message:_.string()})}}},404:{description:"Congress not found with the provided ID",summary:"Congress Not Found",content:{"application/json":{schema:_.object({message:_.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:_.object({message:_.string()})}}}}},cp={method:"get",path:"/international-scientific-congress/{congressId}/partner",tags:["International Scientific Congresses"],summary:"Find congress partners by congress ID",request:{params:ks},responses:{200:{description:"Congress partners retrieved successfully by congress ID",summary:"Congress Partners Retrieved",content:{"application/json":{schema:_.array(Wf)}}},400:{description:"Invalid congress ID parameter provided",summary:"Validation Error",content:{"application/json":{schema:_.object({errors:_.record(_.string(),_.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:_.object({message:_.string()})}}}}},pp={method:"put",path:"/international-scientific-congress/partner/{id}",tags:["International Scientific Congresses"],summary:"Update congress partner",security:[{bearerAuth:[]}],request:{params:uo,body:{content:{"application/json":{schema:Gs.omit({id:!0})}}}},responses:{200:{description:"Congress partner updated successfully",summary:"Congress Partner Updated"},400:{description:"Invalid input data or partner ID format",summary:"Validation Error",content:{"application/json":{schema:_.object({errors:_.record(_.string(),_.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:_.object({message:_.string()})}}},404:{description:"Congress partner not found with the provided ID",summary:"Congress Partner Not Found",content:{"application/json":{schema:_.object({message:_.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:_.object({message:_.string()})}}}}},dp={method:"delete",path:"/international-scientific-congress/partner/{id}",tags:["International Scientific Congresses"],summary:"Delete congress partner",security:[{bearerAuth:[]}],request:{params:uo},responses:{200:{description:"Congress partner deleted successfully",summary:"Congress Partner Deleted"},400:{description:"Invalid partner ID format",summary:"Validation Error",content:{"application/json":{schema:_.object({errors:_.record(_.string(),_.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:_.object({message:_.string()})}}},404:{description:"Congress partner not found with the provided ID",summary:"Congress Partner Not Found",content:{"application/json":{schema:_.object({message:_.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:_.object({message:_.string()})}}}}};import d from"zod";import{extendZodWithOpenApi as Hf}from"@asteasolutions/zod-to-openapi";import J from"zod";Hf(J);var Ls=J.object({title:J.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio"),edition:J.coerce.number().int().positive("Edi\xE7\xE3o deve ser um n\xFAmero positivo"),startDate:J.coerce.date(),endDate:J.coerce.date(),description:J.string().optional(),location:J.string().optional(),congressLink:J.url("Link do congresso deve ser uma URL v\xE1lida").optional().or(J.literal("")),noticeUrl:J.url("URL do edital deve ser uma URL v\xE1lida").optional().or(J.literal("")),scheduleUrl:J.url("URL do cronograma deve ser uma URL v\xE1lida").optional().or(J.literal("")),programUrl:J.url("URL da programa\xE7\xE3o deve ser uma URL v\xE1lida").optional().or(J.literal("")),adminReportUrl:J.url("URL do relat\xF3rio administrativo deve ser uma URL v\xE1lida").optional().or(J.literal("")),proceedingsUrl:J.url("URL dos anais deve ser uma URL v\xE1lida").optional().or(J.literal(""))}).refine(o=>o.endDate>=o.startDate,{message:"Data de t\xE9rmino deve ser posterior ou igual \xE0 data de in\xEDcio",path:["endDate"]}),fo=class{constructor(e){this.internationalScientificCongressRepository=e}async handle(e,r){try{let t=Ls.parse(e.body);return await this.internationalScientificCongressRepository.create(t),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as zf}from"@asteasolutions/zod-to-openapi";import _s from"zod";zf(_s);var Ws=_s.object({id:_s.uuid()}),ho=class{constructor(e){this.internationalScientificCongressRepository=e}async handle(e,r){try{let{id:t}=Ws.parse({id:e.params.id});if(!await this.internationalScientificCongressRepository.findById(t))throw new p("O congresso n\xE3o existe.");return await this.internationalScientificCongressRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Zf}from"@asteasolutions/zod-to-openapi";import Hs from"zod";Zf(Hs);var zs=Hs.object({edition:Hs.coerce.number().int().positive()}),Ro=class{constructor(e){this.internationalScientificCongressRepository=e}async handle(e,r){try{let{edition:t}=zs.parse({edition:e.params.edition}),i=await this.internationalScientificCongressRepository.findByEdition(t);return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Vf}from"@asteasolutions/zod-to-openapi";import Zs from"zod";Vf(Zs);var Co=Zs.object({id:Zs.uuid()}),Io=class{constructor(e){this.internationalScientificCongressRepository=e}async handle(e,r){try{let{id:t}=Co.parse({id:e.params.id}),i=await this.internationalScientificCongressRepository.findById(t);if(!i)throw new p("O congresso n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Kf}from"@asteasolutions/zod-to-openapi";import ze from"zod";var Yf=1,Xf=10;Kf(ze);var Vs=ze.object({page:ze.coerce.number().min(1).default(Yf),limit:ze.coerce.number().min(1).default(Xf),title:ze.string().optional(),edition:ze.coerce.number().int().positive().optional(),location:ze.string().optional(),orderBy:ze.enum(["asc","desc"]).optional()}),bo=class{constructor(e){this.internationalScientificCongressRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=Vs.parse(e.query),s=i*t-i,[m,c]=await Promise.all([this.internationalScientificCongressRepository.find({pagination:{offset:s,limit:i},filter:n}),this.internationalScientificCongressRepository.count({filter:n})]),u=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:u,offset:s,limit:i,congresses:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as $f}from"@asteasolutions/zod-to-openapi";import $ from"zod";$f($);var Ks=$.object({id:$.uuid(),title:$.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio").optional(),edition:$.coerce.number().int().positive("Edi\xE7\xE3o deve ser um n\xFAmero positivo").optional(),startDate:$.coerce.date().optional(),endDate:$.coerce.date().optional(),description:$.string().optional(),location:$.string().optional(),congressLink:$.url("Link do congresso deve ser uma URL v\xE1lida").optional().or($.literal("")),noticeUrl:$.url("URL do edital deve ser uma URL v\xE1lida").optional().or($.literal("")),scheduleUrl:$.url("URL do cronograma deve ser uma URL v\xE1lida").optional().or($.literal("")),programUrl:$.url("URL da programa\xE7\xE3o deve ser uma URL v\xE1lida").optional().or($.literal("")),adminReportUrl:$.url("URL do relat\xF3rio administrativo deve ser uma URL v\xE1lida").optional().or($.literal("")),proceedingsUrl:$.url("URL dos anais deve ser uma URL v\xE1lida").optional().or($.literal(""))}),wo=class{constructor(e){this.internationalScientificCongressRepository=e}async handle(e,r){try{let{id:t,...i}=Ks.parse({id:e.params.id,...e.body});if(!await this.internationalScientificCongressRepository.findById(t))throw new p("O congresso n\xE3o existe.");return await this.internationalScientificCongressRepository.update({...i,id:t}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Jf=9,Qf=d.object({image:d.any().openapi({type:"string",format:"binary"}),caption:d.string().optional()}),eh=d.object({image:d.any().openapi({type:"string",format:"binary"}).optional(),caption:d.string().optional()}),th=d.object({id:d.uuid(),name:d.string(),logoUrl:d.string().nullable(),congressId:d.uuid()}),Ys=d.object({id:d.uuid(),imageUrl:d.string(),caption:d.string().nullable(),congressId:d.uuid()}),Xs=d.object({id:d.uuid(),title:d.string(),edition:d.number(),startDate:d.date(),endDate:d.date(),description:d.string().nullable(),location:d.string().nullable(),congressLink:d.string().nullable(),noticeUrl:d.string().nullable(),scheduleUrl:d.string().nullable(),programUrl:d.string().nullable(),adminReportUrl:d.string().nullable(),proceedingsUrl:d.string().nullable(),partners:d.array(th),galleries:d.array(Ys),createdAt:d.date(),updatedAt:d.date()}),lp={method:"post",path:"/international-scientific-congress",tags:["International Scientific Congresses"],summary:"Create a new international scientific congress",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:Ls}}}},responses:{201:{description:"International scientific congress created successfully",summary:"International Scientific Congress Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:d.object({errors:d.record(d.string(),d.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:d.object({message:d.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:d.object({message:d.string()})}}}}},up={method:"get",path:"/international-scientific-congress",tags:["International Scientific Congresses"],summary:"List all international scientific congresses with pagination and filters",request:{query:Vs},responses:{200:{description:"List of international scientific congresses retrieved successfully with pagination",summary:"International Scientific Congresses Retrieved",content:{"application/json":{schema:d.object({page:d.number(),totalPages:d.number(),offset:d.number(),limit:d.number(),congresses:d.array(Xs)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:d.object({errors:d.record(d.string(),d.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:d.object({message:d.string()})}}}}},gp={method:"get",path:"/international-scientific-congress/{id}",tags:["International Scientific Congresses"],summary:"Find international scientific congress by ID",request:{params:Co},responses:{200:{description:"International scientific congress details retrieved successfully",summary:"International Scientific Congress Retrieved",content:{"application/json":{schema:Xs}}},400:{description:"Invalid international scientific congress ID format",summary:"Validation Error",content:{"application/json":{schema:d.object({errors:d.record(d.string(),d.string())})}}},404:{description:"International scientific congress not found with the provided ID",summary:"International Scientific Congress Not Found",content:{"application/json":{schema:d.object({message:d.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:d.object({message:d.string()})}}}}},yp={method:"get",path:"/international-scientific-congress/edition/{edition}",tags:["International Scientific Congresses"],summary:"Find international scientific congresses by edition",request:{params:zs},responses:{200:{description:"International scientific congresses retrieved successfully by edition",summary:"International Scientific Congresses Retrieved by Edition",content:{"application/json":{schema:d.array(Xs)}}},400:{description:"Invalid edition parameter provided",summary:"Validation Error",content:{"application/json":{schema:d.object({errors:d.record(d.string(),d.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:d.object({message:d.string()})}}}}},fp={method:"put",path:"/international-scientific-congress/{id}",tags:["International Scientific Congresses"],summary:"Update international scientific congress",security:[{bearerAuth:[]}],request:{params:Co,body:{content:{"application/json":{schema:Ks.omit({id:!0})}}}},responses:{200:{description:"International scientific congress updated successfully",summary:"International Scientific Congress Updated"},400:{description:"Invalid input data or international scientific congress ID format",summary:"Validation Error",content:{"application/json":{schema:d.object({errors:d.record(d.string(),d.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:d.object({message:d.string()})}}},404:{description:"International scientific congress not found with the provided ID",summary:"International Scientific Congress Not Found",content:{"application/json":{schema:d.object({message:d.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:d.object({message:d.string()})}}}}},hp={method:"delete",path:"/international-scientific-congress/{id}",tags:["International Scientific Congresses"],summary:"Delete international scientific congress",security:[{bearerAuth:[]}],request:{params:Ws},responses:{200:{description:"International scientific congress deleted successfully",summary:"International Scientific Congress Deleted"},400:{description:"Invalid international scientific congress ID format",summary:"Validation Error",content:{"application/json":{schema:d.object({errors:d.record(d.string(),d.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:d.object({message:d.string()})}}},404:{description:"International scientific congress not found with the provided ID",summary:"International Scientific Congress Not Found",content:{"application/json":{schema:d.object({message:d.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:d.object({message:d.string()})}}}}},Qx={method:"post",path:"/international-scientific-congress/{congressId}/gallery",tags:["International Scientific Congress Gallery"],summary:"Create a new gallery image for a congress",security:[{bearerAuth:[]}],request:{params:d.object({congressId:d.uuid()}),body:{content:{"multipart/form-data":{schema:Qf}}}},responses:{201:{description:"Gallery image created successfully",summary:"Gallery Image Created"},400:{description:"Invalid input data, missing required fields, or invalid image format/size",summary:"Validation Error",content:{"application/json":{schema:d.object({errors:d.record(d.string(),d.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:d.object({message:d.string()})}}},404:{description:"Congress not found with the provided ID",summary:"Congress Not Found",content:{"application/json":{schema:d.object({message:d.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:d.object({message:d.string()})}}}}},eP={method:"get",path:"/international-scientific-congress/{congressId}/gallery",tags:["International Scientific Congress Gallery"],summary:"List all gallery images for a congress with pagination",request:{params:d.object({congressId:d.uuid()}),query:d.object({page:d.coerce.number().min(1).default(1),limit:d.coerce.number().min(1).default(Jf),caption:d.string().optional()})},responses:{200:{description:"Gallery images retrieved successfully with pagination",summary:"Gallery Images Retrieved",content:{"application/json":{schema:d.object({page:d.number(),totalPages:d.number(),offset:d.number(),limit:d.number(),galleries:d.array(Ys)})}}},400:{description:"Invalid congress ID format or query parameters",summary:"Validation Error",content:{"application/json":{schema:d.object({errors:d.record(d.string(),d.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:d.object({message:d.string()})}}}}},tP={method:"get",path:"/international-scientific-congress/gallery/{id}",tags:["International Scientific Congress Gallery"],summary:"Find a gallery image by ID",request:{params:d.object({id:d.uuid()})},responses:{200:{description:"Gallery image retrieved successfully",summary:"Gallery Image Retrieved",content:{"application/json":{schema:Ys}}},400:{description:"Invalid gallery image ID format",summary:"Validation Error",content:{"application/json":{schema:d.object({errors:d.record(d.string(),d.string())})}}},404:{description:"Gallery image not found with the provided ID",summary:"Gallery Image Not Found",content:{"application/json":{schema:d.object({message:d.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:d.object({message:d.string()})}}}}},rP={method:"put",path:"/international-scientific-congress/gallery/{id}",tags:["International Scientific Congress Gallery"],summary:"Update a gallery image with optional image upload",security:[{bearerAuth:[]}],request:{params:d.object({id:d.uuid()}),body:{content:{"multipart/form-data":{schema:eh}}}},responses:{200:{description:"Gallery image updated successfully",summary:"Gallery Image Updated"},400:{description:"Invalid input data, gallery ID format, or invalid image format/size",summary:"Validation Error",content:{"application/json":{schema:d.object({errors:d.record(d.string(),d.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:d.object({message:d.string()})}}},404:{description:"Gallery image not found with the provided ID",summary:"Gallery Image Not Found",content:{"application/json":{schema:d.object({message:d.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:d.object({message:d.string()})}}}}},oP={method:"delete",path:"/international-scientific-congress/gallery/{id}",tags:["International Scientific Congress Gallery"],summary:"Delete a gallery image",security:[{bearerAuth:[]}],request:{params:d.object({id:d.uuid()})},responses:{200:{description:"Gallery image deleted successfully",summary:"Gallery Image Deleted"},400:{description:"Invalid gallery ID format",summary:"Validation Error",content:{"application/json":{schema:d.object({errors:d.record(d.string(),d.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:d.object({message:d.string()})}}},404:{description:"Gallery image not found with the provided ID",summary:"Gallery Image Not Found",content:{"application/json":{schema:d.object({message:d.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:d.object({message:d.string()})}}}}};import{$Enums as sh}from"@prisma/client";import F from"zod";import{extendZodWithOpenApi as rh}from"@asteasolutions/zod-to-openapi";import Ft from"zod";rh(Ft);var $s=Ft.object({role:Ft.string().min(1),description:Ft.string().optional(),userId:Ft.uuid(),order:Ft.number().optional()}),So=class{constructor(e){this.legitimatorCommitteeMemberRepository=e}async handle(e,r){try{let{role:t,description:i,userId:n,order:s}=$s.parse(e.body);return await this.legitimatorCommitteeMemberRepository.create({role:t,description:i,userId:n,order:s??0}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as oh}from"@asteasolutions/zod-to-openapi";import Js from"zod";oh(Js);var Qs=Js.object({id:Js.uuid()}),vo=class{constructor(e){this.legitimatorCommitteeMemberRepository=e}async handle(e,r){try{let{id:t}=Qs.parse({id:e.params.id});if(!await this.legitimatorCommitteeMemberRepository.findById(t))throw new p("O membro do comit\xEA legitimador n\xE3o existe.");return await this.legitimatorCommitteeMemberRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as ih}from"@asteasolutions/zod-to-openapi";import ea from"zod";ih(ea);var jo=ea.object({id:ea.uuid()}),Eo=class{constructor(e){this.legitimatorCommitteeMemberRepository=e}async handle(e,r){try{let{id:t}=jo.parse({id:e.params.id}),i=await this.legitimatorCommitteeMemberRepository.findById(t);if(!i)throw new p("O membro do comit\xEA legitimador n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as nh}from"@asteasolutions/zod-to-openapi";import mt from"zod";nh(mt);var ta=mt.object({id:mt.uuid(),role:mt.string().min(1).optional(),description:mt.string().optional(),userId:mt.uuid().optional(),order:mt.number().optional()}),xo=class{constructor(e){this.legitimatorCommitteeMemberRepository=e}async handle(e,r){try{let{id:t,role:i,description:n,userId:s,order:m}=ta.parse({id:e.params.id,...e.body});if(!await this.legitimatorCommitteeMemberRepository.findById(t))throw new p("O membro do comit\xEA legitimador n\xE3o existe.");return await this.legitimatorCommitteeMemberRepository.update({id:t,role:i,description:n,userId:s,order:m}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var ah=F.object({id:F.uuid(),name:F.string(),emailAddress:F.string(),avatarUrl:F.string().nullable(),orcid:F.string().nullable(),phone:F.string().nullable(),lattesUrl:F.string().nullable(),role:F.enum(sh.UserRole)}),Rp=F.object({id:F.uuid(),role:F.string(),description:F.string().nullable(),order:F.number(),createdAt:F.date(),updatedAt:F.date(),userId:F.uuid(),user:ah}),Ip={method:"post",path:"/legitimator-committee-member",tags:["Legitimator Committee Members"],summary:"Create a new Legitimator Committee Member",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:$s}}}},responses:{201:{description:"Legitimator Committee Member created successfully",summary:"Legitimator Committee Member Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:F.object({errors:F.record(F.string(),F.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:F.object({message:F.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:F.object({message:F.string()})}}}}},Cp={method:"get",path:"/legitimator-committee-member",tags:["Legitimator Committee Members"],summary:"List all Legitimator Committee Members with filters",request:{query:F.object({role:F.string().optional(),orderBy:F.enum(["asc","desc"]).optional()})},responses:{200:{description:"List of Legitimator Committee Members retrieved successfully",summary:"Legitimator Committee Members Retrieved",content:{"application/json":{schema:F.object({members:F.array(Rp)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:F.object({message:F.string()})}}}}},bp={method:"get",path:"/legitimator-committee-member/{id}",tags:["Legitimator Committee Members"],summary:"Find Legitimator Committee Member by ID",request:{params:jo},responses:{200:{description:"Legitimator Committee Member details retrieved successfully",summary:"Legitimator Committee Member Retrieved",content:{"application/json":{schema:Rp}}},400:{description:"Invalid Legitimator Committee Member ID format",summary:"Validation Error",content:{"application/json":{schema:F.object({errors:F.record(F.string(),F.string())})}}},404:{description:"Legitimator Committee Member not found with the provided ID",summary:"Legitimator Committee Member Not Found",content:{"application/json":{schema:F.object({message:F.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:F.object({message:F.string()})}}}}},wp={method:"put",path:"/legitimator-committee-member/{id}",tags:["Legitimator Committee Members"],summary:"Update Legitimator Committee Member",security:[{bearerAuth:[]}],request:{params:jo,body:{content:{"application/json":{schema:ta.omit({id:!0})}}}},responses:{200:{description:"Legitimator Committee Member updated successfully",summary:"Legitimator Committee Member Updated"},400:{description:"Invalid input data or Legitimator Committee Member ID format",summary:"Validation Error",content:{"application/json":{schema:F.object({errors:F.record(F.string(),F.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:F.object({message:F.string()})}}},404:{description:"Legitimator Committee Member not found with the provided ID",summary:"Legitimator Committee Member Not Found",content:{"application/json":{schema:F.object({message:F.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:F.object({message:F.string()})}}}}},Sp={method:"delete",path:"/legitimator-committee-member/{id}",tags:["Legitimator Committee Members"],summary:"Delete Legitimator Committee Member",security:[{bearerAuth:[]}],request:{params:Qs},responses:{200:{description:"Legitimator Committee Member deleted successfully",summary:"Legitimator Committee Member Deleted"},400:{description:"Invalid Legitimator Committee Member ID format",summary:"Validation Error",content:{"application/json":{schema:F.object({errors:F.record(F.string(),F.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:F.object({message:F.string()})}}},404:{description:"Legitimator Committee Member not found with the provided ID",summary:"Legitimator Committee Member Not Found",content:{"application/json":{schema:F.object({message:F.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:F.object({message:F.string()})}}}}};import{$Enums as lh}from"@prisma/client";import E from"zod";import{extendZodWithOpenApi as mh}from"@asteasolutions/zod-to-openapi";import Me from"zod";mh(Me);var ra=Me.object({name:Me.string().min(1),description:Me.string().optional(),members:Me.array(Me.object({userId:Me.uuid(),role:Me.string().min(1),order:Me.number().optional()}))}),Po=class{constructor(e){this.managementTeamRepository=e}async handle(e,r){try{let{name:t,description:i,members:n}=ra.parse(e.body);if(await this.managementTeamRepository.findByName(t))throw new Q("J\xE1 existe um time de gest\xE3o cadastrado com este nome.");return await this.managementTeamRepository.create({name:t,description:i,members:n.map(m=>({userId:m.userId,role:m.role,order:m.order??0}))}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as ch}from"@asteasolutions/zod-to-openapi";import oa from"zod";ch(oa);var ia=oa.object({id:oa.uuid()}),Mo=class{constructor(e){this.managementTeamRepository=e}async handle(e,r){try{let{id:t}=ia.parse({id:e.params.id});if(!await this.managementTeamRepository.findById(t))throw new p("O time de gest\xE3o n\xE3o existe.");return await this.managementTeamRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as ph}from"@asteasolutions/zod-to-openapi";import na from"zod";ph(na);var Ao=na.object({id:na.uuid()}),To=class{constructor(e){this.managementTeamRepository=e}async handle(e,r){try{let{id:t}=Ao.parse({id:e.params.id}),i=await this.managementTeamRepository.findById(t);if(!i)throw new p("O time de gest\xE3o n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as dh}from"@asteasolutions/zod-to-openapi";import Se from"zod";dh(Se);var sa=Se.object({id:Se.uuid(),name:Se.string().min(1).optional(),description:Se.string().optional(),members:Se.array(Se.object({userId:Se.uuid(),role:Se.string().min(1),order:Se.number().optional()})).optional()}),Do=class{constructor(e){this.managementTeamRepository=e}async handle(e,r){try{let{id:t,name:i,description:n,members:s}=sa.parse({id:e.params.id,...e.body}),m=await this.managementTeamRepository.findById(t);if(!m)throw new p("O time de gest\xE3o n\xE3o existe.");if(i&&i!==m.name){let c=await this.managementTeamRepository.findByName(i);if(c&&c.id!==t)throw new Q("J\xE1 existe um time de gest\xE3o com este nome.")}return await this.managementTeamRepository.update({id:t,name:i,description:n,members:s?s.map(c=>({userId:c.userId,role:c.role,order:c.order??0})):void 0}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var uh=E.object({id:E.uuid(),name:E.string(),emailAddress:E.string(),avatarUrl:E.string().nullable(),orcid:E.string().nullable(),phone:E.string().nullable(),lattesUrl:E.string().nullable(),role:E.enum(lh.UserRole)}),gh=E.object({id:E.uuid(),role:E.string(),description:E.string().nullable(),order:E.number(),teamId:E.uuid(),userId:E.uuid(),createdAt:E.date(),updatedAt:E.date(),user:uh}),vp=E.object({id:E.uuid(),name:E.string(),description:E.string().nullable(),createdAt:E.date(),updatedAt:E.date(),members:E.array(gh)}),Ep={method:"post",path:"/management-team",tags:["Management Teams"],summary:"Create a new Management Team with multiple members",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:ra}}}},responses:{201:{description:"Management Team created successfully",summary:"Management Team Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:E.object({errors:E.record(E.string(),E.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:E.object({message:E.string()})}}},409:{description:"Management Team with this name already exists",summary:"Conflict",content:{"application/json":{schema:E.object({message:E.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:E.object({message:E.string()})}}}}},jp={method:"get",path:"/management-team",tags:["Management Teams"],summary:"List all Management Teams with filters",request:{query:E.object({name:E.string().optional(),description:E.string().optional(),orderBy:E.enum(["asc","desc"]).optional()})},responses:{200:{description:"List of Management Teams retrieved successfully",summary:"Management Teams Retrieved",content:{"application/json":{schema:E.object({teams:E.array(vp)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:E.object({message:E.string()})}}}}},xp={method:"get",path:"/management-team/{id}",tags:["Management Teams"],summary:"Find Management Team by ID",request:{params:Ao},responses:{200:{description:"Management Team details retrieved successfully",summary:"Management Team Retrieved",content:{"application/json":{schema:vp}}},400:{description:"Invalid Management Team ID format",summary:"Validation Error",content:{"application/json":{schema:E.object({errors:E.record(E.string(),E.string())})}}},404:{description:"Management Team not found with the provided ID",summary:"Management Team Not Found",content:{"application/json":{schema:E.object({message:E.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:E.object({message:E.string()})}}}}},Pp={method:"put",path:"/management-team/{id}",tags:["Management Teams"],summary:"Update Management Team and manage member relationships",security:[{bearerAuth:[]}],request:{params:Ao,body:{content:{"application/json":{schema:sa.omit({id:!0})}}}},responses:{200:{description:"Management Team updated successfully",summary:"Management Team Updated"},400:{description:"Invalid input data or Management Team ID format",summary:"Validation Error",content:{"application/json":{schema:E.object({errors:E.record(E.string(),E.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:E.object({message:E.string()})}}},404:{description:"Management Team not found with the provided ID",summary:"Management Team Not Found",content:{"application/json":{schema:E.object({message:E.string()})}}},409:{description:"Management Team with this name already exists",summary:"Conflict",content:{"application/json":{schema:E.object({message:E.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:E.object({message:E.string()})}}}}},Mp={method:"delete",path:"/management-team/{id}",tags:["Management Teams"],summary:"Delete Management Team",security:[{bearerAuth:[]}],request:{params:ia},responses:{200:{description:"Management Team deleted successfully",summary:"Management Team Deleted"},400:{description:"Invalid Management Team ID format",summary:"Validation Error",content:{"application/json":{schema:E.object({errors:E.record(E.string(),E.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:E.object({message:E.string()})}}},404:{description:"Management Team not found with the provided ID",summary:"Management Team Not Found",content:{"application/json":{schema:E.object({message:E.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:E.object({message:E.string()})}}}}};import{MeetingFormat as wh,MeetingStatus as Sh}from"@prisma/client";import q from"zod";import{extendZodWithOpenApi as yh}from"@asteasolutions/zod-to-openapi";import Ut from"zod";var Ap=10,Tp=1024,fh=Tp*Tp,hh=Ap*fh;yh(Ut);var aa=Ut.object({title:Ut.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio"),publishedAt:Ut.coerce.date(),meetingId:Ut.uuid(),document:Ut.any().refine(o=>o==null||typeof o!="object"||typeof o.size!="number"?!1:o.size<=hh,`O documento deve ter no m\xE1ximo ${Ap}MB.`)}),Fo=class{constructor(e,r,t){this.meetingMinuteRepository=e;this.meetingRepository=r;this.firebaseStorageService=t}async handle(e,r){try{let{title:t,publishedAt:i,meetingId:n,document:s}=aa.parse({...e.body,...e.params,document:e.file});if(!await this.meetingRepository.findById(n))throw new p("A reuni\xE3o n\xE3o existe.");if(await this.meetingMinuteRepository.findByMeetingId(n))throw new a("Esta reuni\xE3o j\xE1 possui uma ata.");let u=await this.meetingMinuteRepository.create({title:t,publishedAt:i,meetingId:n,documentUrl:""}),w=await this.firebaseStorageService.uploadFile({file:s,id:u.id,folder:T.MEETING_MINUTE});return await this.meetingMinuteRepository.update({id:u.id,documentUrl:w}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Rh}from"@asteasolutions/zod-to-openapi";import ma from"zod";Rh(ma);var nr=ma.object({meetingId:ma.uuid()}),Uo=class{constructor(e){this.meetingMinuteRepository=e}async handle(e,r){try{let{meetingId:t}=nr.parse({meetingId:e.params.meetingId}),i=await this.meetingMinuteRepository.findByMeetingId(t);return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Ih}from"@asteasolutions/zod-to-openapi";import qt from"zod";var Fp=10,Dp=1024,Ch=Dp*Dp,bh=Fp*Ch;Ih(qt);var ca=qt.object({meetingId:qt.uuid(),title:qt.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio").optional(),publishedAt:qt.coerce.date().optional(),document:qt.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=bh,`O documento deve ter no m\xE1ximo ${Fp}MB.`).optional()}),qo=class{constructor(e,r){this.meetingMinuteRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{meetingId:t,title:i,publishedAt:n,document:s}=ca.parse({meetingId:e.params.meetingId,...e.body,document:e.file}),m=await this.meetingMinuteRepository.findByMeetingId(t);if(!m)throw new p("A ata n\xE3o existe para esta reuni\xE3o.");let c=m.documentUrl;return s&&(m.documentUrl&&await this.firebaseStorageService.deleteFile({fileUrl:m.documentUrl}),c=await this.firebaseStorageService.uploadFile({file:s,id:m.id,folder:T.MEETING_MINUTE})),await this.meetingMinuteRepository.update({id:m.id,title:i,publishedAt:n,documentUrl:c??void 0}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var vh=q.object({id:q.uuid(),title:q.string(),scheduledAt:q.date(),format:q.enum(wh),agenda:q.string(),meetingLink:q.string().nullable(),location:q.string().nullable(),status:q.enum(Sh),createdAt:q.date(),updatedAt:q.date()}),Eh=q.object({id:q.uuid(),title:q.string(),publishedAt:q.date(),documentUrl:q.string(),meetingId:q.uuid(),meeting:vh,createdAt:q.date(),updatedAt:q.date()}),Up={method:"post",path:"/meeting/{meetingId}/minute",tags:["Meetings"],summary:"Create a new meeting minute with document upload",security:[{bearerAuth:[]}],request:{params:q.object({meetingId:q.uuid()}),body:{content:{"multipart/form-data":{schema:aa.omit({meetingId:!0})}}}},responses:{201:{description:"Meeting minute created successfully",summary:"Meeting Minute Created"},400:{description:"Invalid input data, missing required fields, or invalid document format/size",summary:"Validation Error",content:{"application/json":{schema:q.object({errors:q.record(q.string(),q.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:q.object({message:q.string()})}}},404:{description:"Meeting not found with the provided ID",summary:"Meeting Not Found",content:{"application/json":{schema:q.object({message:q.string()})}}},409:{description:"Meeting already has a minute",summary:"Conflict",content:{"application/json":{schema:q.object({message:q.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:q.object({message:q.string()})}}}}},qp={method:"get",path:"/meeting/{meetingId}/minute",tags:["Meetings"],summary:"Find meeting minute by meeting ID",request:{params:nr},responses:{200:{description:"Meeting minute retrieved successfully by meeting ID",summary:"Meeting Minute Retrieved by Meeting ID",content:{"application/json":{schema:Eh.nullable()}}},400:{description:"Invalid meeting ID parameter provided",summary:"Validation Error",content:{"application/json":{schema:q.object({errors:q.record(q.string(),q.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:q.object({message:q.string()})}}}}},Bp={method:"put",path:"/meeting/{meetingId}/minute",tags:["Meetings"],summary:"Update meeting minute with optional document upload",security:[{bearerAuth:[]}],request:{params:nr,body:{content:{"multipart/form-data":{schema:ca.omit({meetingId:!0})}}}},responses:{200:{description:"Meeting minute updated successfully",summary:"Meeting Minute Updated"},400:{description:"Invalid input data, meeting minute ID format, or invalid document format/size",summary:"Validation Error",content:{"application/json":{schema:q.object({errors:q.record(q.string(),q.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:q.object({message:q.string()})}}},404:{description:"Meeting minute not found with the provided ID",summary:"Meeting Minute Not Found",content:{"application/json":{schema:q.object({message:q.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:q.object({message:q.string()})}}}}},Op={method:"delete",path:"/meeting/{meetingId}/minute",tags:["Meetings"],summary:"Delete meeting minute",security:[{bearerAuth:[]}],request:{params:nr},responses:{200:{description:"Meeting minute deleted successfully",summary:"Meeting Minute Deleted"},400:{description:"Invalid meeting minute ID format",summary:"Validation Error",content:{"application/json":{schema:q.object({errors:q.record(q.string(),q.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:q.object({message:q.string()})}}},404:{description:"Meeting minute not found with the provided ID",summary:"Meeting Minute Not Found",content:{"application/json":{schema:q.object({message:q.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:q.object({message:q.string()})}}}}};import{MeetingFormat as kh,MeetingStatus as Gh}from"@prisma/client";import S from"zod";import{extendZodWithOpenApi as jh}from"@asteasolutions/zod-to-openapi";import{MeetingFormat as Bo,MeetingStatus as pa}from"@prisma/client";import ve from"zod";jh(ve);var da=ve.object({title:ve.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio"),scheduledAt:ve.coerce.date(),format:ve.enum(Bo).default(Bo.ONLINE),agenda:ve.string().min(1,"Pauta \xE9 obrigat\xF3ria"),meetingLink:ve.string().url("Link da reuni\xE3o deve ser uma URL v\xE1lida").optional().or(ve.literal("")),location:ve.string().optional(),status:ve.enum(pa).default(pa.PENDING)}).refine(o=>o.format===Bo.ONLINE?!!o.meetingLink:o.format===Bo.IN_PERSON?!!o.location:!0,{message:"Reuni\xF5es online devem ter link e reuni\xF5es presenciais devem ter localiza\xE7\xE3o",path:["format"]}),Oo=class{constructor(e){this.meetingRepository=e}async handle(e,r){try{let{title:t,scheduledAt:i,format:n,agenda:s,meetingLink:m,location:c,status:u}=da.parse(e.body);return await this.meetingRepository.create({title:t,scheduledAt:i,format:n,agenda:s,meetingLink:m||void 0,location:c||void 0,status:u??pa.PENDING}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as xh}from"@asteasolutions/zod-to-openapi";import la from"zod";xh(la);var ua=la.object({id:la.uuid()}),No=class{constructor(e){this.meetingRepository=e}async handle(e,r){try{let{id:t}=ua.parse({id:e.params.id});if(!await this.meetingRepository.findById(t))throw new p("A reuni\xE3o n\xE3o existe.");return await this.meetingRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Ph}from"@asteasolutions/zod-to-openapi";import ga from"zod";Ph(ga);var Go=ga.object({id:ga.uuid()}),ko=class{constructor(e){this.meetingRepository=e}async handle(e,r){try{let{id:t}=Go.parse({id:e.params.id}),i=await this.meetingRepository.findById(t);if(!i)throw new p("A reuni\xE3o n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Mh}from"@asteasolutions/zod-to-openapi";import{MeetingStatus as Th}from"@prisma/client";import ya from"zod";Mh(ya);var fa=ya.object({status:ya.enum(Th)}),Lo=class{constructor(e){this.meetingRepository=e}async handle(e,r){try{let{status:t}=fa.parse({status:e.params.status}),i=await this.meetingRepository.findByStatus(t);return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Ah}from"@asteasolutions/zod-to-openapi";import{MeetingFormat as Dh,MeetingStatus as Fh}from"@prisma/client";import Ze from"zod";var Uh=1,qh=10;Ah(Ze);var ha=Ze.object({page:Ze.coerce.number().min(1).default(Uh),limit:Ze.coerce.number().min(1).default(qh),title:Ze.string().optional(),format:Ze.enum(Dh).optional(),status:Ze.enum(Fh).optional(),orderBy:Ze.enum(["asc","desc"]).optional()}),_o=class{constructor(e){this.meetingRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=ha.parse(e.query),s=i*t-i,[m,c]=await Promise.all([this.meetingRepository.find({pagination:{offset:s,limit:i},filter:n}),this.meetingRepository.count({filter:n})]),u=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:u,offset:s,limit:i,meetings:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Bh}from"@asteasolutions/zod-to-openapi";import{MeetingFormat as Oh,MeetingStatus as Nh}from"@prisma/client";import Re from"zod";Bh(Re);var Ra=Re.object({id:Re.uuid(),title:Re.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio").optional(),scheduledAt:Re.coerce.date().optional(),format:Re.enum(Oh).optional(),agenda:Re.string().min(1,"Pauta \xE9 obrigat\xF3ria").optional(),meetingLink:Re.string().url("Link da reuni\xE3o deve ser uma URL v\xE1lida").optional().or(Re.literal("")),location:Re.string().optional(),status:Re.enum(Nh).optional()}),Wo=class{constructor(e){this.meetingRepository=e}async handle(e,r){try{let{id:t,title:i,scheduledAt:n,format:s,agenda:m,meetingLink:c,location:u,status:w}=Ra.parse({id:e.params.id,...e.body});if(!await this.meetingRepository.findById(t))throw new p("A reuni\xE3o n\xE3o existe.");return await this.meetingRepository.update({id:t,title:i,scheduledAt:n,format:s,agenda:m,meetingLink:c||void 0,location:u||void 0,status:w}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Lh=S.object({id:S.uuid(),title:S.string(),publishedAt:S.date(),documentUrl:S.string(),meetingId:S.uuid(),createdAt:S.date(),updatedAt:S.date()}),Ia=S.object({id:S.uuid(),title:S.string(),scheduledAt:S.date(),format:S.enum(kh),agenda:S.string(),meetingLink:S.string().nullable(),location:S.string().nullable(),status:S.enum(Gh),minutes:Lh.nullable(),createdAt:S.date(),updatedAt:S.date()}),Np={method:"post",path:"/meeting",tags:["Meetings"],summary:"Create a new meeting",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:da}}}},responses:{201:{description:"Meeting created successfully",summary:"Meeting Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:S.object({errors:S.record(S.string(),S.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:S.object({message:S.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:S.object({message:S.string()})}}}}},kp={method:"get",path:"/meeting",tags:["Meetings"],summary:"List all meetings with pagination and filters",request:{query:ha},responses:{200:{description:"List of meetings retrieved successfully with pagination",summary:"Meetings Retrieved",content:{"application/json":{schema:S.object({page:S.number(),totalPages:S.number(),offset:S.number(),limit:S.number(),meetings:S.array(Ia)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:S.object({errors:S.record(S.string(),S.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:S.object({message:S.string()})}}}}},Gp={method:"get",path:"/meeting/{id}",tags:["Meetings"],summary:"Find meeting by ID",request:{params:Go},responses:{200:{description:"Meeting details retrieved successfully",summary:"Meeting Retrieved",content:{"application/json":{schema:Ia}}},400:{description:"Invalid meeting ID format",summary:"Validation Error",content:{"application/json":{schema:S.object({errors:S.record(S.string(),S.string())})}}},404:{description:"Meeting not found with the provided ID",summary:"Meeting Not Found",content:{"application/json":{schema:S.object({message:S.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:S.object({message:S.string()})}}}}},Lp={method:"get",path:"/meeting/status/{status}",tags:["Meetings"],summary:"Find meetings by status",request:{params:fa},responses:{200:{description:"Meetings retrieved successfully by status",summary:"Meetings Retrieved by Status",content:{"application/json":{schema:S.array(Ia)}}},400:{description:"Invalid status parameter provided",summary:"Validation Error",content:{"application/json":{schema:S.object({errors:S.record(S.string(),S.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:S.object({message:S.string()})}}}}},_p={method:"put",path:"/meeting/{id}",tags:["Meetings"],summary:"Update meeting",security:[{bearerAuth:[]}],request:{params:Go,body:{content:{"application/json":{schema:Ra.omit({id:!0})}}}},responses:{200:{description:"Meeting updated successfully",summary:"Meeting Updated"},400:{description:"Invalid input data or meeting ID format",summary:"Validation Error",content:{"application/json":{schema:S.object({errors:S.record(S.string(),S.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:S.object({message:S.string()})}}},404:{description:"Meeting not found with the provided ID",summary:"Meeting Not Found",content:{"application/json":{schema:S.object({message:S.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:S.object({message:S.string()})}}}}},Wp={method:"delete",path:"/meeting/{id}",tags:["Meetings"],summary:"Delete meeting",security:[{bearerAuth:[]}],request:{params:ua},responses:{200:{description:"Meeting deleted successfully",summary:"Meeting Deleted"},400:{description:"Invalid meeting ID format",summary:"Validation Error",content:{"application/json":{schema:S.object({errors:S.record(S.string(),S.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:S.object({message:S.string()})}}},404:{description:"Meeting not found with the provided ID",summary:"Meeting Not Found",content:{"application/json":{schema:S.object({message:S.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:S.object({message:S.string()})}}}}};import x from"zod";import{extendZodWithOpenApi as _h}from"@asteasolutions/zod-to-openapi";import sr from"zod";var Wh=5,Hp=1024,Hh=Hp*Hp,zh=Wh*Hh;_h(sr);var Ca=sr.object({title:sr.string().min(1),content:sr.string().min(1),image:sr.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=zh,{message:"A imagem deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB."})}),Ho=class{constructor(e,r){this.newsRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{title:t,content:i,image:n}=Ca.parse({...e.body,image:e.file}),s=e.user.id,m=await this.firebaseStorageService.uploadFile({file:n,folder:T.NEWS,id:s});await this.newsRepository.create({title:t,content:i,authorId:s,imageUrl:m}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Zh}from"@asteasolutions/zod-to-openapi";import Ve from"zod";var Vh=1,Kh=7;Zh(Ve);var Zo=Ve.object({page:Ve.coerce.number().min(1).default(Vh),limit:Ve.coerce.number().min(1).default(Kh),authorId:Ve.string(),title:Ve.string().optional(),content:Ve.string().optional(),orderBy:Ve.enum(["asc","desc"]).default("desc")}),zo=class{constructor(e){this.newsRepository=e}async handle(e,r){try{let{page:t,limit:i,authorId:n,...s}=Zo.parse(e.query),m=i*t-i,[c,u]=await Promise.all([this.newsRepository.findByAuthorId({authorId:n,pagination:{offset:m,limit:i},filter:s}),this.newsRepository.count({filter:{authorId:n,...s}})]),w=Math.max(Math.ceil(u/i),1);r.status(200).json({page:t,totalPages:w,offset:m,limit:i,news:c})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Yh}from"@asteasolutions/zod-to-openapi";import ba from"zod";Yh(ba);var wa=ba.object({id:ba.string()}),Vo=class{constructor(e){this.newsRepository=e}async handle(e,r){try{let{id:t}=wa.parse(e.params),i=await this.newsRepository.findById(t);if(!i)throw new p("Not\xEDcia n\xE3o encontrada.");r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Xh}from"@asteasolutions/zod-to-openapi";import Ke from"zod";var $h=1,Jh=9;Xh(Ke);var Sa=Ke.object({page:Ke.coerce.number().min(1).default($h),limit:Ke.coerce.number().min(1).default(Jh),title:Ke.string().optional(),content:Ke.string().optional(),authorId:Ke.string().optional(),orderBy:Ke.enum(["asc","desc"]).default("desc")}),Ko=class{constructor(e){this.newsRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=Sa.parse(e.query),s=i*t-i,[m,c]=await Promise.all([this.newsRepository.find({pagination:{offset:s,limit:i},filter:n}),this.newsRepository.count({filter:n})]),u=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:u,offset:s,limit:i,news:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};var zp={method:"post",path:"/news",tags:["News"],summary:"Create news",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:Ca}}}},responses:{201:{description:"News article created successfully",summary:"News Created",content:{"application/json":{schema:x.object({message:x.string()})}}},400:{description:"Invalid input data or file format",summary:"Validation Error",content:{"application/json":{schema:x.object({errors:x.record(x.string(),x.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:x.object({message:x.string()})}}}}},Zp={method:"get",path:"/news",tags:["News"],summary:"List news",request:{query:Sa},responses:{200:{description:"Paginated list of news articles retrieved successfully",summary:"News Retrieved",content:{"application/json":{schema:x.object({page:x.number(),totalPages:x.number(),offset:x.number(),limit:x.number(),news:x.array(x.object({title:x.string(),content:x.string(),id:x.string(),createdAt:x.date(),updatedAt:x.date(),imageUrl:x.string().nullable()}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:x.object({errors:x.record(x.string(),x.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:x.object({message:x.string()})}}}}},Vp={method:"get",path:"/news/{id}",tags:["News"],summary:"Find news by ID",request:{params:wa},responses:{200:{description:"News article details retrieved successfully",summary:"News Retrieved",content:{"application/json":{schema:x.object({page:x.number(),totalPages:x.number(),offset:x.number(),limit:x.number(),news:x.object({title:x.string(),content:x.string(),id:x.string(),createdAt:x.date(),updatedAt:x.date(),imageUrl:x.string().nullable()})})}}},400:{description:"Invalid news ID format",summary:"Validation Error",content:{"application/json":{schema:x.object({errors:x.record(x.string(),x.string())})}}},404:{description:"News article not found with the provided ID",summary:"News Not Found",content:{"application/json":{schema:x.object({message:x.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:x.object({message:x.string()})}}}}},Kp={method:"get",path:"/news/author/{author_id}",tags:["News"],summary:"List news by author",request:{params:Zo.pick({authorId:!0}).transform(()=>({author_id:""})),query:Zo.omit({authorId:!0})},responses:{200:{description:"Paginated list of news articles by author retrieved successfully",summary:"Author News Retrieved",content:{"application/json":{schema:x.object({page:x.number(),totalPages:x.number(),offset:x.number(),limit:x.number(),news:x.array(x.object({title:x.string(),content:x.string(),id:x.string(),createdAt:x.date(),updatedAt:x.date(),imageUrl:x.string().nullable()}))})}}},400:{description:"Invalid author ID or query parameters",summary:"Validation Error",content:{"application/json":{schema:x.object({errors:x.record(x.string(),x.string())})}}},404:{description:"Author not found with the provided ID",summary:"Author Not Found",content:{"application/json":{schema:x.object({message:x.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:x.object({message:x.string()})}}}}};import M from"zod";import{extendZodWithOpenApi as Qh}from"@asteasolutions/zod-to-openapi";import Ee from"zod";var Xp=2,Yp=1024,eR=Yp*Yp,tR=Xp*eR;Qh(Ee);var va=Ee.object({name:Ee.string().min(1,"Nome \xE9 obrigat\xF3rio"),logo:Ee.any().refine(o=>o==null||typeof o!="object"||typeof o.size!="number"?!1:o.size<=tR,`A imagem deve ter no m\xE1ximo ${Xp}MB.`),websiteUrl:Ee.url("URL do site deve ser v\xE1lida").optional(),description:Ee.string().optional(),category:Ee.string().optional(),since:Ee.coerce.date(),isActive:Ee.preprocess(o=>o==="true",Ee.boolean().optional())}),Yo=class{constructor(e,r){this.partnerRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{name:t,logo:i,websiteUrl:n,description:s,category:m,since:c,isActive:u}=va.parse({...e.body,logo:e.file}),w=await this.partnerRepository.create({name:t,websiteUrl:n,description:s,category:m,since:c,isActive:u}),B=await this.firebaseStorageService.uploadFile({file:i,id:w.id,folder:T.PARTNER});return await this.partnerRepository.update({id:w.id,logoUrl:B}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as rR}from"@asteasolutions/zod-to-openapi";import Ea from"zod";rR(Ea);var ja=Ea.object({id:Ea.uuid()}),Xo=class{constructor(e,r){this.partnerRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=ja.parse({id:e.params.id}),i=await this.partnerRepository.findById(t);if(!i)throw new p("O parceiro n\xE3o existe.");return i.logoUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.logoUrl}),await this.partnerRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as oR}from"@asteasolutions/zod-to-openapi";import xa from"zod";oR(xa);var Jo=xa.object({id:xa.uuid()}),$o=class{constructor(e){this.partnerRepository=e}async handle(e,r){try{let{id:t}=Jo.parse({id:e.params.id}),i=await this.partnerRepository.findById(t);if(!i)throw new p("O parceiro n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as iR}from"@asteasolutions/zod-to-openapi";import Te from"zod";var nR=1,sR=9;iR(Te);var Pa=Te.object({page:Te.coerce.number().min(1).default(nR),limit:Te.coerce.number().min(1).default(sR),name:Te.string().optional(),description:Te.string().optional(),category:Te.string().optional(),isActive:Te.coerce.boolean().optional(),orderBy:Te.enum(["asc","desc"]).optional()}),Qo=class{constructor(e){this.partnerRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=Pa.parse(e.query),s=i*t-i,[m,c]=await Promise.all([this.partnerRepository.find({pagination:{offset:s,limit:i},filter:n}),this.partnerRepository.count({filter:n})]),u=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:u,offset:s,limit:i,partners:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as aR}from"@asteasolutions/zod-to-openapi";import Ie from"zod";var Jp=2,$p=1024,mR=$p*$p,cR=Jp*mR;aR(Ie);var Ma=Ie.object({id:Ie.uuid(),name:Ie.string().min(1,"Nome \xE9 obrigat\xF3rio").optional(),logo:Ie.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=cR,`A imagem deve ter no m\xE1ximo ${Jp}MB.`).optional(),websiteUrl:Ie.url("URL do site deve ser v\xE1lida").optional(),description:Ie.string().optional(),category:Ie.string().optional(),since:Ie.coerce.date().optional(),isActive:Ie.preprocess(o=>o==="true",Ie.boolean().optional())}),ei=class{constructor(e,r){this.partnerRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,name:i,logo:n,websiteUrl:s,description:m,category:c,since:u,isActive:w}=Ma.parse({id:e.params.id,...e.body,logo:e.file}),B=await this.partnerRepository.findById(t);if(!B)throw new p("O parceiro n\xE3o existe.");let Z=B.logoUrl;if(n&&(Z=await this.firebaseStorageService.uploadFile({file:n,id:t,folder:"images/partners"})),!Z)throw new a("Logo URL \xE9 obrigat\xF3rio");return await this.partnerRepository.update({id:t,name:i,logoUrl:Z,websiteUrl:s,description:m,category:c,since:u,isActive:w}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Qp=M.object({id:M.uuid(),name:M.string(),logoUrl:M.string(),description:M.string().nullable(),category:M.string().nullable(),since:M.date(),isActive:M.boolean(),createdAt:M.date(),updatedAt:M.date()}),ed={method:"post",path:"/partner",tags:["Partners"],summary:"Create a new partner with logo upload",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:va}}}},responses:{201:{description:"Partner created successfully",summary:"Partner Created"},400:{description:"Invalid input data, missing required fields, or invalid logo format/size",summary:"Validation Error",content:{"application/json":{schema:M.object({errors:M.record(M.string(),M.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:M.object({message:M.string()})}}},409:{description:"Partner with this name already exists",summary:"Conflict",content:{"application/json":{schema:M.object({message:M.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:M.object({message:M.string()})}}}}},td={method:"get",path:"/partner",tags:["Partners"],summary:"List all partners with pagination and filters",request:{query:Pa},responses:{200:{description:"List of partners retrieved successfully with pagination",summary:"Partners Retrieved",content:{"application/json":{schema:M.object({page:M.number(),totalPages:M.number(),offset:M.number(),limit:M.number(),partners:M.array(Qp)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:M.object({errors:M.record(M.string(),M.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:M.object({message:M.string()})}}}}},rd={method:"get",path:"/partner/{id}",tags:["Partners"],summary:"Find partner by ID",request:{params:Jo},responses:{200:{description:"Partner details retrieved successfully",summary:"Partner Retrieved",content:{"application/json":{schema:Qp}}},400:{description:"Invalid partner ID format",summary:"Validation Error",content:{"application/json":{schema:M.object({errors:M.record(M.string(),M.string())})}}},404:{description:"Partner not found with the provided ID",summary:"Partner Not Found",content:{"application/json":{schema:M.object({message:M.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:M.object({message:M.string()})}}}}},od={method:"put",path:"/partner/{id}",tags:["Partners"],summary:"Update partner with optional logo upload",security:[{bearerAuth:[]}],request:{params:Jo,body:{content:{"multipart/form-data":{schema:Ma.omit({id:!0})}}}},responses:{200:{description:"Partner updated successfully",summary:"Partner Updated"},400:{description:"Invalid input data, partner ID format, or invalid logo format/size",summary:"Validation Error",content:{"application/json":{schema:M.object({errors:M.record(M.string(),M.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:M.object({message:M.string()})}}},404:{description:"Partner not found with the provided ID",summary:"Partner Not Found",content:{"application/json":{schema:M.object({message:M.string()})}}},409:{description:"Partner with this name already exists",summary:"Conflict",content:{"application/json":{schema:M.object({message:M.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:M.object({message:M.string()})}}}}},id={method:"delete",path:"/partner/{id}",tags:["Partners"],summary:"Delete partner",security:[{bearerAuth:[]}],request:{params:ja},responses:{200:{description:"Partner deleted successfully",summary:"Partner Deleted"},400:{description:"Invalid partner ID format",summary:"Validation Error",content:{"application/json":{schema:M.object({errors:M.record(M.string(),M.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:M.object({message:M.string()})}}},404:{description:"Partner not found with the provided ID",summary:"Partner Not Found",content:{"application/json":{schema:M.object({message:M.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:M.object({message:M.string()})}}}}};import{$Enums as nd}from"@prisma/client";import D from"zod";import{extendZodWithOpenApi as pR}from"@asteasolutions/zod-to-openapi";import{PendencyStatus as dR}from"@prisma/client";import Ye from"zod";pR(Ye);var ri=Ye.object({userId:Ye.uuid(),title:Ye.string().min(1),description:Ye.string().optional(),status:Ye.enum(dR).default("PENDING"),dueDate:Ye.coerce.date().optional(),document:Ye.any().refine(o=>o&&typeof o=="object"&&o.size>0,"Arquivo do documento \xE9 obrigat\xF3rio")}),ti=class{constructor(e,r,t){this.userRepository=e;this.pendencyRepository=r;this.firebaseStorageService=t}async handle(e,r){try{let{userId:t,title:i,description:n,status:s,dueDate:m,document:c}=ri.parse({...e.body,userId:e.params.user_id,document:e.file});if(!await this.userRepository.findById(t))throw new ie("O usu\xE1rio n\xE3o existe.");let w=await this.firebaseStorageService.uploadFile({file:c,id:t,folder:T.PENDENCY});return await this.pendencyRepository.create({userId:t,title:i,description:n,status:s,dueDate:m,documentUrl:w}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as lR}from"@asteasolutions/zod-to-openapi";import Ta from"zod";lR(Ta);var Aa=Ta.object({id:Ta.uuid()}),oi=class{constructor(e,r){this.pendencyRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=Aa.parse({id:e.params.pendency_id}),i=await this.pendencyRepository.findById(t);if(!i)throw new p("A pend\xEAncia n\xE3o existe.");return await Promise.all([this.pendencyRepository.deleteById(i.id),this.firebaseStorageService.deleteFile({fileUrl:i.documentUrl})]),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as uR}from"@asteasolutions/zod-to-openapi";import{PendencyStatus as gR}from"@prisma/client";import Ae from"zod";var yR=1,fR=6;uR(Ae);var Da=Ae.object({page:Ae.coerce.number().min(1).default(yR),limit:Ae.coerce.number().min(1).default(fR),title:Ae.string().optional(),description:Ae.string().optional(),status:Ae.enum(gR).default("PENDING"),userId:Ae.uuid().optional(),orderBy:Ae.enum(["asc","desc"]).default("desc")}),ii=class{constructor(e){this.pendencyRepository=e}async handle(e,r){try{let{description:t,limit:i,orderBy:n,page:s,title:m,status:c,userId:u}=Da.parse(e.query),w=s*i-i,[B,Z]=await Promise.all([this.pendencyRepository.find({pagination:{offset:w,limit:i},filter:{title:m,description:t,status:c,orderBy:n,userId:u}}),this.pendencyRepository.count({filter:{title:m,description:t,status:c,userId:u}})]),X=Math.max(Math.ceil(Z/i),1);return r.status(200).json({page:s,totalPages:X,offset:w,limit:i,pendencies:B})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as hR}from"@asteasolutions/zod-to-openapi";import Fa from"zod";hR(Fa);var Ua=Fa.object({pendencyId:Fa.uuid()}),ni=class{constructor(e){this.pendencyRepository=e}async handle(e,r){try{let{pendencyId:t}=Ua.parse({pendencyId:e.params.pendency_id}),i=await this.pendencyRepository.findById(t);if(!i)throw new p("Pend\xEAncia n\xE3o encontrada.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as RR}from"@asteasolutions/zod-to-openapi";import{PendencyStatus as IR}from"@prisma/client";import Xe from"zod";RR(Xe);var ai=Xe.object({id:Xe.uuid(),title:Xe.string().min(1),description:Xe.string().optional(),status:Xe.enum(IR),dueDate:Xe.coerce.date().optional(),document:Xe.any().refine(o=>o==null||typeof o=="object"&&typeof o.size=="number"&&(o.size===0||o.size>0),"Arquivo do documento \xE9 inv\xE1lido").optional()}),si=class{constructor(e,r){this.pendencyRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{document:t,id:i,...n}=ai.parse({...e.body,id:e.params.pendency_id,document:e.file}),s=await this.pendencyRepository.findById(i);if(!s)throw new ie("A pend\xEAncia n\xE3o existe");let m=s.documentUrl;return t&&t.size>0&&(m=await this.firebaseStorageService.updateFile({file:t,id:s.userId,folder:T.PENDENCY,fileUrl:s.documentUrl})),await this.pendencyRepository.update({...n,id:i,documentUrl:m}),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var sd={method:"post",path:"/pendency/{user_id}",tags:["Pendencies"],summary:"Create pendency for user",security:[{bearerAuth:[]}],request:{params:ri.pick({userId:!0}).transform(()=>({user_id:""})),body:{content:{"multipart/form-data":{schema:ri.omit({userId:!0})}}}},responses:{201:{description:"Pendency created successfully for the user",summary:"Pendency Created",content:{"application/json":{schema:D.object({})}}},400:{description:"Invalid input data or file format",summary:"Validation Error",content:{"application/json":{schema:D.object({errors:D.record(D.string(),D.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:D.object({message:D.string()})}}}}},ad={method:"get",path:"/pendency",tags:["Pendencies"],summary:"List pendencies",security:[{bearerAuth:[]}],request:{query:Da},responses:{200:{description:"Paginated list of pendencies retrieved successfully",summary:"Pendencies Retrieved",content:{"application/json":{schema:D.object({page:D.number(),totalPages:D.number(),offset:D.number(),limit:D.number(),pendencies:D.array(D.object({id:D.string(),title:D.string(),description:D.string().nullable(),status:D.enum(nd.PendencyStatus),dueDate:D.date().nullable(),documentUrl:D.string(),userId:D.string(),createdAt:D.date(),updatedAt:D.date()}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:D.object({errors:D.record(D.string(),D.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:D.object({message:D.string()})}}}}},md={method:"get",path:"/pendency/{pendency_id}",tags:["Pendencies"],summary:"Find pendency by ID",security:[{bearerAuth:[]}],request:{params:Ua},responses:{200:{description:"Pendency details retrieved successfully",summary:"Pendency Retrieved",content:{"application/json":{schema:D.object({id:D.string(),title:D.string(),description:D.string().nullable(),status:D.enum(nd.PendencyStatus),dueDate:D.date().nullable(),documentUrl:D.string(),userId:D.string(),createdAt:D.date(),updatedAt:D.date()}).nullable()}}},400:{description:"Invalid pendency ID format",summary:"Validation Error",content:{"application/json":{schema:D.object({errors:D.record(D.string(),D.string())})}}},404:{description:"Pendency not found with the provided ID",summary:"Pendency Not Found",content:{"application/json":{schema:D.object({message:D.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:D.object({message:D.string()})}}}}},cd={method:"put",path:"/pendency/{pendency_id}",tags:["Pendencies"],summary:"Update pendency",security:[{bearerAuth:[]}],request:{params:ai.pick({id:!0}).transform(()=>({pendency_id:""})),body:{content:{"multipart/form-data":{schema:ai.omit({id:!0})}}}},responses:{204:{description:"Pendency updated successfully",summary:"Pendency Updated"},400:{description:"Invalid input data or pendency does not exist",summary:"Validation Error",content:{"application/json":{schema:D.object({errors:D.record(D.string(),D.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:D.object({message:D.string()})}}}}},pd={method:"delete",path:"/pendency/{pendency_id}",tags:["Pendencies"],summary:"Delete pendency",security:[{bearerAuth:[]}],request:{params:Aa},responses:{204:{description:"Pendency deleted successfully",summary:"Pendency Deleted"},400:{description:"Invalid pendency ID format",summary:"Validation Error",content:{"application/json":{schema:D.object({errors:D.record(D.string(),D.string())})}}},404:{description:"Pendency not found with the provided ID",summary:"Pendency Not Found",content:{"application/json":{schema:D.object({message:D.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:D.object({message:D.string()})}}}}};import b from"zod";import{extendZodWithOpenApi as CR}from"@asteasolutions/zod-to-openapi";import qa from"zod";CR(qa);var Ba=qa.object({id:qa.uuid()}),mi=class{constructor(e,r){this.postGraduateProgramRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=Ba.parse({id:e.params.id}),i=await this.postGraduateProgramRepository.findById(t);if(!i)throw new p("O programa de p\xF3s-gradua\xE7\xE3o n\xE3o existe.");return i.imageUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.imageUrl}),await this.postGraduateProgramRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as bR}from"@asteasolutions/zod-to-openapi";import Oa from"zod";bR(Oa);var Na=Oa.object({id:Oa.uuid()}),ci=class{constructor(e){this.postGraduateProgramRepository=e}async handle(e,r){try{let{id:t}=Na.parse({id:e.params.id}),i=await this.postGraduateProgramRepository.findById(t);if(!i)throw new p("Programa de p\xF3s-gradua\xE7\xE3o n\xE3o encontrado.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as wR}from"@asteasolutions/zod-to-openapi";import $e from"zod";var SR=1,vR=6;wR($e);var ka=$e.object({page:$e.coerce.number().min(1).default(SR),limit:$e.coerce.number().min(1).default(vR),title:$e.string().optional(),description:$e.string().optional(),contact:$e.string().optional(),orderBy:$e.enum(["asc","desc"]).default("desc")}),pi=class{constructor(e){this.postGraduateProgramRepository=e}async handle(e,r){try{let{limit:t,page:i,...n}=ka.parse(e.query),s=i*t-t,[m,c]=await Promise.all([this.postGraduateProgramRepository.find({pagination:{offset:s,limit:t},filter:n}),this.postGraduateProgramRepository.count({filter:n})]),u=Math.max(Math.ceil(c/t),1);return r.status(200).json({page:i,totalPages:u,offset:s,limit:t,postGraduatePrograms:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as ER}from"@asteasolutions/zod-to-openapi";import je from"zod";var ld=5,dd=1024,jR=dd*dd,xR=ld*jR;ER(je);var Ga=je.object({id:je.uuid(),title:je.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio.").optional(),description:je.string().optional(),startDate:je.coerce.date().optional(),endDate:je.coerce.date().optional(),contact:je.string().min(1,"Contato \xE9 obrigat\xF3rio.").optional(),registrationLink:je.url("URL de inscri\xE7\xE3o deve ser v\xE1lida").optional(),image:je.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=xR,`A imagem deve ter no m\xE1ximo ${ld}MB.`).optional()}),di=class{constructor(e,r){this.postGraduateProgramRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,image:i,title:n,description:s,startDate:m,endDate:c,contact:u,registrationLink:w}=Ga.parse({id:e.params.id,...e.body,image:e.file}),B=await this.postGraduateProgramRepository.findById(t);if(!B)throw new p("O programa de p\xF3s-gradua\xE7\xE3o n\xE3o existe.");let Z=B.imageUrl;if(i&&(Z=await this.firebaseStorageService.uploadFile({file:i,id:t,folder:T.POST_GRADUATE_PROGRAM})),!Z)throw new a("URL da imagem \xE9 obrigat\xF3rio");return await this.postGraduateProgramRepository.update({id:t,title:n,description:s,startDate:m,endDate:c,contact:u,registrationLink:w,imageUrl:Z}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var ud={method:"post",path:"/post-graduate-programs",tags:["Post Graduate Programs"],summary:"Create post-graduate program",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:b.object({title:b.string().min(1).openapi({description:"T\xEDtulo do programa"}),description:b.string().optional().openapi({description:"Descri\xE7\xE3o do programa"}),startDate:b.string().openapi({description:"Data de in\xEDcio (ISO 8601)",example:"2024-01-01T10:00:00Z"}),endDate:b.string().openapi({description:"Data de t\xE9rmino (ISO 8601)",example:"2024-12-31T10:00:00Z"}),contact:b.string().min(1).openapi({description:"Informa\xE7\xF5es de contato"}),registrationLink:b.string().url().optional().openapi({description:"Link de inscri\xE7\xE3o"}),image:b.string().optional().openapi({description:"Imagem do programa (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{201:{description:"Post-graduate program created successfully",summary:"Program Created"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:b.object({errors:b.record(b.string(),b.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:b.object({message:b.string()})}}}}},gd={method:"get",path:"/post-graduate-programs",tags:["Post Graduate Programs"],summary:"List post-graduate programs",security:[{bearerAuth:[]}],request:{query:ka},responses:{200:{description:"Paginated list of post-graduate programs retrieved successfully",summary:"Programs Retrieved",content:{"application/json":{schema:b.object({page:b.number(),totalPages:b.number(),offset:b.number(),limit:b.number(),postGraduatePrograms:b.array(b.object({id:b.string(),title:b.string(),imageUrl:b.string().nullable(),description:b.string().nullable(),startDate:b.date(),endDate:b.date(),contact:b.string(),registrationLink:b.string().nullable(),createdAt:b.date(),updatedAt:b.date()}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:b.object({errors:b.record(b.string(),b.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:b.object({message:b.string()})}}}}},yd={method:"get",path:"/post-graduate-programs/{id}",tags:["Post Graduate Programs"],summary:"Find post-graduate program by ID",security:[{bearerAuth:[]}],request:{params:Na},responses:{200:{description:"Post-graduate program details retrieved successfully",summary:"Program Retrieved",content:{"application/json":{schema:b.object({id:b.string(),title:b.string(),imageUrl:b.string().nullable(),description:b.string().nullable(),startDate:b.date(),endDate:b.date(),contact:b.string(),registrationLink:b.string().nullable(),createdAt:b.date(),updatedAt:b.date()}).nullable()}}},400:{description:"Invalid program ID format",summary:"Validation Error",content:{"application/json":{schema:b.object({errors:b.record(b.string(),b.string())})}}},404:{description:"Post-graduate program not found with the provided ID",summary:"Program Not Found",content:{"application/json":{schema:b.object({message:b.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:b.object({message:b.string()})}}}}},fd={method:"put",path:"/post-graduate-programs/{id}",tags:["Post Graduate Programs"],summary:"Update post-graduate program",security:[{bearerAuth:[]}],request:{params:Ga.pick({id:!0}),body:{content:{"multipart/form-data":{schema:b.object({title:b.string().min(1).optional().openapi({description:"T\xEDtulo do programa"}),description:b.string().optional().openapi({description:"Descri\xE7\xE3o do programa"}),startDate:b.string().optional().openapi({description:"Data de in\xEDcio (ISO 8601)",example:"2024-01-01T10:00:00Z"}),endDate:b.string().optional().openapi({description:"Data de t\xE9rmino (ISO 8601)",example:"2024-12-31T10:00:00Z"}),contact:b.string().min(1).optional().openapi({description:"Informa\xE7\xF5es de contato"}),registrationLink:b.string().url().optional().openapi({description:"Link de inscri\xE7\xE3o"}),image:b.string().optional().openapi({description:"Imagem do programa (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{200:{description:"Post-graduate program updated successfully",summary:"Program Updated"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:b.object({errors:b.record(b.string(),b.string())})}}},404:{description:"Post-graduate program not found with the provided ID",summary:"Program Not Found",content:{"application/json":{schema:b.object({message:b.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:b.object({message:b.string()})}}}}},hd={method:"delete",path:"/post-graduate-programs/{id}",tags:["Post Graduate Programs"],summary:"Delete post-graduate program",security:[{bearerAuth:[]}],request:{params:Ba},responses:{200:{description:"Post-graduate program deleted successfully",summary:"Program Deleted"},400:{description:"Invalid program ID format",summary:"Validation Error",content:{"application/json":{schema:b.object({errors:b.record(b.string(),b.string())})}}},404:{description:"Post-graduate program not found with the provided ID",summary:"Program Not Found",content:{"application/json":{schema:b.object({message:b.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:b.object({message:b.string()})}}}}};import{RegimentStatus as WR}from"@prisma/client";import P from"zod";import{extendZodWithOpenApi as PR}from"@asteasolutions/zod-to-openapi";import{RegimentStatus as Id}from"@prisma/client";import ct from"zod";var Cd=10,Rd=1024,MR=Rd*Rd,TR=Cd*MR;PR(ct);var La=ct.object({title:ct.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio"),version:ct.string().min(1,"Vers\xE3o \xE9 obrigat\xF3ria"),publishedAt:ct.coerce.date(),document:ct.any().refine(o=>o==null||typeof o!="object"||typeof o.size!="number"?!1:o.size<=TR,`O documento deve ter no m\xE1ximo ${Cd}MB.`),status:ct.enum(Id).optional()}),li=class{constructor(e,r){this.regimentRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{title:t,version:i,publishedAt:n,document:s,status:m}=La.parse({...e.body,document:e.file}),c=await this.regimentRepository.create({title:t,version:i,publishedAt:n,documentUrl:"",status:m??Id.IN_FORCE}),u=await this.firebaseStorageService.uploadFile({file:s,id:c.id,folder:T.REGIMENT});return await this.regimentRepository.update({id:c.id,documentUrl:u}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as AR}from"@asteasolutions/zod-to-openapi";import _a from"zod";AR(_a);var Wa=_a.object({id:_a.uuid()}),ui=class{constructor(e,r){this.regimentRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=Wa.parse({id:e.params.id}),i=await this.regimentRepository.findById(t);if(!i)throw new p("O regimento n\xE3o existe.");return i.documentUrl&&await this.firebaseStorageService.deleteFile({fileUrl:i.documentUrl}),await this.regimentRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as DR}from"@asteasolutions/zod-to-openapi";import Ha from"zod";DR(Ha);var yi=Ha.object({id:Ha.uuid()}),gi=class{constructor(e){this.regimentRepository=e}async handle(e,r){try{let{id:t}=yi.parse({id:e.params.id}),i=await this.regimentRepository.findById(t);if(!i)throw new p("O regimento n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as FR}from"@asteasolutions/zod-to-openapi";import{RegimentStatus as UR}from"@prisma/client";import za from"zod";FR(za);var Za=za.object({status:za.enum(UR)}),fi=class{constructor(e){this.regimentRepository=e}async handle(e,r){try{let{status:t}=Za.parse({status:e.params.status}),i=await this.regimentRepository.findByStatus(t);return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as qR}from"@asteasolutions/zod-to-openapi";import{RegimentStatus as BR}from"@prisma/client";import pt from"zod";var OR=1,NR=10;qR(pt);var Va=pt.object({page:pt.coerce.number().min(1).default(OR),limit:pt.coerce.number().min(1).default(NR),title:pt.string().optional(),status:pt.enum(BR).optional(),orderBy:pt.enum(["asc","desc"]).optional()}),hi=class{constructor(e){this.regimentRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=Va.parse(e.query),s=i*t-i,[m,c]=await Promise.all([this.regimentRepository.find({pagination:{offset:s,limit:i},filter:n}),this.regimentRepository.count({filter:n})]),u=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:u,offset:s,limit:i,regiments:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as kR}from"@asteasolutions/zod-to-openapi";import{RegimentStatus as GR}from"@prisma/client";import Je from"zod";var wd=10,bd=1024,LR=bd*bd,_R=wd*LR;kR(Je);var Ka=Je.object({id:Je.uuid(),title:Je.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio").optional(),version:Je.string().min(1,"Vers\xE3o \xE9 obrigat\xF3ria").optional(),publishedAt:Je.coerce.date().optional(),document:Je.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=_R,`O documento deve ter no m\xE1ximo ${wd}MB.`).optional(),status:Je.enum(GR).optional()}),Ri=class{constructor(e,r){this.regimentRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,title:i,version:n,publishedAt:s,document:m,status:c}=Ka.parse({id:e.params.id,...e.body,document:e.file}),u=await this.regimentRepository.findById(t);if(!u)throw new p("O regimento n\xE3o existe.");let w=u.documentUrl;return m&&(u.documentUrl&&await this.firebaseStorageService.deleteFile({fileUrl:u.documentUrl}),w=await this.firebaseStorageService.uploadFile({file:m,id:t,folder:T.REGIMENT})),await this.regimentRepository.update({id:t,title:i,version:n,publishedAt:s,documentUrl:w??void 0,status:c}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Ya=P.object({id:P.uuid(),title:P.string(),version:P.string(),publishedAt:P.date(),documentUrl:P.string(),status:P.enum(WR),createdAt:P.date(),updatedAt:P.date()}),Sd={method:"post",path:"/regiment",tags:["Regiments"],summary:"Create a new regiment with document upload",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:La}}}},responses:{201:{description:"Regiment created successfully",summary:"Regiment Created"},400:{description:"Invalid input data, missing required fields, or invalid document format/size",summary:"Validation Error",content:{"application/json":{schema:P.object({errors:P.record(P.string(),P.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:P.object({message:P.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:P.object({message:P.string()})}}}}},vd={method:"get",path:"/regiment",tags:["Regiments"],summary:"List all regiments with pagination and filters",request:{query:Va},responses:{200:{description:"List of regiments retrieved successfully with pagination",summary:"Regiments Retrieved",content:{"application/json":{schema:P.object({page:P.number(),totalPages:P.number(),offset:P.number(),limit:P.number(),regiments:P.array(Ya)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:P.object({errors:P.record(P.string(),P.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:P.object({message:P.string()})}}}}},Ed={method:"get",path:"/regiment/{id}",tags:["Regiments"],summary:"Find regiment by ID",request:{params:yi},responses:{200:{description:"Regiment details retrieved successfully",summary:"Regiment Retrieved",content:{"application/json":{schema:Ya}}},400:{description:"Invalid regiment ID format",summary:"Validation Error",content:{"application/json":{schema:P.object({errors:P.record(P.string(),P.string())})}}},404:{description:"Regiment not found with the provided ID",summary:"Regiment Not Found",content:{"application/json":{schema:P.object({message:P.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:P.object({message:P.string()})}}}}},jd={method:"get",path:"/regiment/status/{status}",tags:["Regiments"],summary:"Find regiments by status",request:{params:Za},responses:{200:{description:"Regiments retrieved successfully by status",summary:"Regiments Retrieved by Status",content:{"application/json":{schema:P.array(Ya)}}},400:{description:"Invalid status parameter provided",summary:"Validation Error",content:{"application/json":{schema:P.object({errors:P.record(P.string(),P.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:P.object({message:P.string()})}}}}},xd={method:"put",path:"/regiment/{id}",tags:["Regiments"],summary:"Update regiment with optional document upload",security:[{bearerAuth:[]}],request:{params:yi,body:{content:{"multipart/form-data":{schema:Ka.omit({id:!0})}}}},responses:{200:{description:"Regiment updated successfully",summary:"Regiment Updated"},400:{description:"Invalid input data, regiment ID format, or invalid document format/size",summary:"Validation Error",content:{"application/json":{schema:P.object({errors:P.record(P.string(),P.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:P.object({message:P.string()})}}},404:{description:"Regiment not found with the provided ID",summary:"Regiment Not Found",content:{"application/json":{schema:P.object({message:P.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:P.object({message:P.string()})}}}}},Pd={method:"delete",path:"/regiment/{id}",tags:["Regiments"],summary:"Delete regiment",security:[{bearerAuth:[]}],request:{params:Wa},responses:{200:{description:"Regiment deleted successfully",summary:"Regiment Deleted"},400:{description:"Invalid regiment ID format",summary:"Validation Error",content:{"application/json":{schema:P.object({errors:P.record(P.string(),P.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:P.object({message:P.string()})}}},404:{description:"Regiment not found with the provided ID",summary:"Regiment Not Found",content:{"application/json":{schema:P.object({message:P.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:P.object({message:P.string()})}}}}};import W from"zod";import{extendZodWithOpenApi as HR}from"@asteasolutions/zod-to-openapi";import ar from"zod";var Td=5,Md=1024,zR=Md*Md,ZR=Td*zR;HR(ar);var Xa=ar.object({caption:ar.string().optional(),image:ar.any().refine(o=>o==null||typeof o!="object"||typeof o.size!="number"?!1:o.size<=ZR,`A imagem deve ter no m\xE1ximo ${Td}MB.`),congressId:ar.uuid()}),Ii=class{constructor(e,r,t){this.regionalCongressGalleryRepository=e;this.regionalCongressRepository=r;this.firebaseStorageService=t}async handle(e,r){try{let{caption:t,image:i,congressId:n}=Xa.parse({...e.body,...e.params,image:e.file});if(!await this.regionalCongressRepository.findById(n))throw new p("O congresso n\xE3o existe.");let m=await this.regionalCongressGalleryRepository.create({caption:t,congressId:n,imageUrl:""}),c=await this.firebaseStorageService.uploadFile({file:i,id:m.id,folder:T.GALLERY});return await this.regionalCongressGalleryRepository.update({id:m.id,imageUrl:c}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as VR}from"@asteasolutions/zod-to-openapi";import $a from"zod";VR($a);var bi=$a.object({id:$a.uuid("ID inv\xE1lido")}),Ci=class{constructor(e){this.regionalCongressGalleryRepository=e}async handle(e,r){try{let{id:t}=bi.parse(e.params);if(!await this.regionalCongressGalleryRepository.findById(t))throw new p("Item de galeria n\xE3o encontrado");return await this.regionalCongressGalleryRepository.deleteById(t),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as KR}from"@asteasolutions/zod-to-openapi";import Bt from"zod";KR(Bt);var Ja=Bt.object({congressId:Bt.uuid("ID do congresso inv\xE1lido"),page:Bt.coerce.number().int().positive().default(1),limit:Bt.coerce.number().int().positive().default(10),caption:Bt.string().optional()}),wi=class{constructor(e){this.regionalCongressGalleryRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=Ja.parse({...e.params,...e.query}),s=(t-1)*i,m=await this.regionalCongressGalleryRepository.findByCongressId({pagination:{offset:s,limit:i},filter:n});if(!m)throw new p("Itens de galeria n\xE3o encontrados");let c=await this.regionalCongressGalleryRepository.count({filter:n});return r.status(200).json({data:m,pagination:{page:t,limit:i,total:c,totalPages:Math.ceil(c/i)}})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as YR}from"@asteasolutions/zod-to-openapi";import mr from"zod";var Dd=5,Ad=1024,XR=Ad*Ad,$R=Dd*XR;YR(mr);var Qa=mr.object({id:mr.string().uuid("ID inv\xE1lido"),caption:mr.string().optional(),image:mr.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=$R,`A imagem deve ter no m\xE1ximo ${Dd}MB.`).optional()}),Si=class{constructor(e,r){this.regionalCongressGalleryRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,caption:i,image:n}=Qa.parse({...e.params,...e.body,image:e.file});if(!await this.regionalCongressGalleryRepository.findById(t))throw new p("Item de galeria n\xE3o encontrado");let m;return n&&(m=await this.firebaseStorageService.uploadFile({file:n,id:t,folder:T.GALLERY})),await this.regionalCongressGalleryRepository.update({id:t,caption:i,...m&&{imageUrl:m}}),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var JR=W.object({id:W.uuid(),imageUrl:W.string(),caption:W.string().nullable(),congressId:W.uuid()}),Fd={method:"post",path:"/regional-congress/{congressId}/gallery",tags:["Regional Congresses"],summary:"Create a new congress gallery image",security:[{bearerAuth:[]}],request:{params:W.object({congressId:W.uuid()}),body:{content:{"application/json":{schema:Xa.omit({congressId:!0})}}}},responses:{201:{description:"Congress gallery image created successfully",summary:"Congress Gallery Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:W.object({errors:W.record(W.string(),W.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:W.object({message:W.string()})}}},404:{description:"Congress not found with the provided ID",summary:"Congress Not Found",content:{"application/json":{schema:W.object({message:W.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:W.object({message:W.string()})}}}}},Ud={method:"get",path:"/regional-congress/{congressId}/gallery",tags:["Regional Congresses"],summary:"Find congress gallery images by congress ID",request:{params:Ja},responses:{200:{description:"Congress gallery images retrieved successfully by congress ID",summary:"Congress Galleries Retrieved",content:{"application/json":{schema:W.array(JR)}}},400:{description:"Invalid congress ID parameter provided",summary:"Validation Error",content:{"application/json":{schema:W.object({errors:W.record(W.string(),W.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:W.object({message:W.string()})}}}}},qd={method:"put",path:"/regional-congress/gallery/{id}",tags:["Regional Congresses"],summary:"Update congress gallery image",security:[{bearerAuth:[]}],request:{params:bi,body:{content:{"application/json":{schema:Qa.omit({id:!0})}}}},responses:{200:{description:"Congress gallery image updated successfully",summary:"Congress Gallery Updated"},400:{description:"Invalid input data or gallery ID format",summary:"Validation Error",content:{"application/json":{schema:W.object({errors:W.record(W.string(),W.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:W.object({message:W.string()})}}},404:{description:"Congress gallery image not found with the provided ID",summary:"Congress Gallery Not Found",content:{"application/json":{schema:W.object({message:W.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:W.object({message:W.string()})}}}}},Bd={method:"delete",path:"/regional-congress/gallery/{id}",tags:["Regional Congresses"],summary:"Delete congress gallery image",security:[{bearerAuth:[]}],request:{params:bi},responses:{200:{description:"Congress gallery image deleted successfully",summary:"Congress Gallery Deleted"},400:{description:"Invalid gallery ID format",summary:"Validation Error",content:{"application/json":{schema:W.object({errors:W.record(W.string(),W.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:W.object({message:W.string()})}}},404:{description:"Congress gallery image not found with the provided ID",summary:"Congress Gallery Not Found",content:{"application/json":{schema:W.object({message:W.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:W.object({message:W.string()})}}}}};import H from"zod";import{extendZodWithOpenApi as QR}from"@asteasolutions/zod-to-openapi";import cr from"zod";var Nd=2,Od=1024,eI=Od*Od,tI=Nd*eI;QR(cr);var em=cr.object({name:cr.string().min(1,"Nome \xE9 obrigat\xF3rio"),logo:cr.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=tI,`A imagem deve ter no m\xE1ximo ${Nd}MB.`).optional(),congressId:cr.uuid()}),vi=class{constructor(e,r,t){this.regionalCongressPartnerRepository=e;this.regionalCongressRepository=r;this.firebaseStorageService=t}async handle(e,r){try{let{name:t,logo:i,congressId:n}=em.parse({...e.body,...e.params,logo:e.file});if(!await this.regionalCongressRepository.findById(n))throw new p("O congresso n\xE3o existe.");let m=await this.regionalCongressPartnerRepository.create({name:t,congressId:n}),c;return i&&(c=await this.firebaseStorageService.uploadFile({file:i,id:m.id,folder:T.PARTNER}),await this.regionalCongressPartnerRepository.update({id:m.id,logoUrl:c})),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as rI}from"@asteasolutions/zod-to-openapi";import tm from"zod";rI(tm);var ji=tm.object({id:tm.string().uuid("ID inv\xE1lido")}),Ei=class{constructor(e){this.regionalCongressPartnerRepository=e}async handle(e,r){try{let{id:t}=ji.parse(e.params);if(!await this.regionalCongressPartnerRepository.findById(t))throw new p("Parceiro n\xE3o encontrado");return await this.regionalCongressPartnerRepository.deleteById(t),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as oI}from"@asteasolutions/zod-to-openapi";import Ot from"zod";oI(Ot);var rm=Ot.object({congressId:Ot.uuid("ID do congresso inv\xE1lido"),page:Ot.coerce.number().int().positive().optional(),limit:Ot.coerce.number().int().positive().optional(),name:Ot.string().optional()}),xi=class{constructor(e){this.regionalCongressPartnerRepository=e}async handle(e,r){try{let{congressId:t,page:i,limit:n,name:s}=rm.parse({...e.params,...e.query}),m=i!==void 0&&n!==void 0,c=m?{offset:(i-1)*n,limit:n}:void 0,u=await this.regionalCongressPartnerRepository.findByCongressId({pagination:c,filter:{congressId:t,name:s}});if(!u)throw new p("Parceiros n\xE3o encontrados");if(!m)return r.status(200).json(u);let w=await this.regionalCongressPartnerRepository.count({filter:{congressId:t,name:s}});return r.status(200).json({data:u,pagination:{page:i,limit:n,total:w,totalPages:Math.ceil(w/n)}})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as iI}from"@asteasolutions/zod-to-openapi";import pr from"zod";var Gd=2,kd=1024,nI=kd*kd,sI=Gd*nI;iI(pr);var om=pr.object({id:pr.string().uuid("ID inv\xE1lido"),name:pr.string().min(1,"Nome \xE9 obrigat\xF3rio").optional(),logo:pr.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=sI,`A imagem deve ter no m\xE1ximo ${Gd}MB.`).optional()}),Pi=class{constructor(e,r){this.regionalCongressPartnerRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,name:i,logo:n}=om.parse({...e.params,...e.body,logo:e.file});if(!await this.regionalCongressPartnerRepository.findById(t))throw new p("Parceiro n\xE3o encontrado");let m;return n&&(m=await this.firebaseStorageService.uploadFile({file:n,id:t,folder:T.PARTNER})),await this.regionalCongressPartnerRepository.update({id:t,name:i,...m&&{logoUrl:m}}),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var aI=H.object({id:H.uuid(),name:H.string(),logoUrl:H.string().nullable(),congressId:H.uuid()}),Ld={method:"post",path:"/regional-congress/{congressId}/partner",tags:["Regional Congresses"],summary:"Create a new congress partner",security:[{bearerAuth:[]}],request:{params:H.object({congressId:H.uuid()}),body:{content:{"application/json":{schema:em.omit({congressId:!0})}}}},responses:{201:{description:"Congress partner created successfully",summary:"Congress Partner Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:H.object({errors:H.record(H.string(),H.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:H.object({message:H.string()})}}},404:{description:"Congress not found with the provided ID",summary:"Congress Not Found",content:{"application/json":{schema:H.object({message:H.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:H.object({message:H.string()})}}}}},_d={method:"get",path:"/regional-congress/{congressId}/partner",tags:["Regional Congresses"],summary:"Find congress partners by congress ID",request:{params:rm},responses:{200:{description:"Congress partners retrieved successfully by congress ID",summary:"Congress Partners Retrieved",content:{"application/json":{schema:H.array(aI)}}},400:{description:"Invalid congress ID parameter provided",summary:"Validation Error",content:{"application/json":{schema:H.object({errors:H.record(H.string(),H.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:H.object({message:H.string()})}}}}},Wd={method:"put",path:"/regional-congress/partner/{id}",tags:["Regional Congresses"],summary:"Update congress partner",security:[{bearerAuth:[]}],request:{params:ji,body:{content:{"application/json":{schema:om.omit({id:!0})}}}},responses:{200:{description:"Congress partner updated successfully",summary:"Congress Partner Updated"},400:{description:"Invalid input data or partner ID format",summary:"Validation Error",content:{"application/json":{schema:H.object({errors:H.record(H.string(),H.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:H.object({message:H.string()})}}},404:{description:"Congress partner not found with the provided ID",summary:"Congress Partner Not Found",content:{"application/json":{schema:H.object({message:H.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:H.object({message:H.string()})}}}}},Hd={method:"delete",path:"/regional-congress/partner/{id}",tags:["Regional Congresses"],summary:"Delete congress partner",security:[{bearerAuth:[]}],request:{params:ji},responses:{200:{description:"Congress partner deleted successfully",summary:"Congress Partner Deleted"},400:{description:"Invalid partner ID format",summary:"Validation Error",content:{"application/json":{schema:H.object({errors:H.record(H.string(),H.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:H.object({message:H.string()})}}},404:{description:"Congress partner not found with the provided ID",summary:"Congress Partner Not Found",content:{"application/json":{schema:H.object({message:H.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:H.object({message:H.string()})}}}}};import l from"zod";import{extendZodWithOpenApi as mI}from"@asteasolutions/zod-to-openapi";import Y from"zod";mI(Y);var im=Y.object({title:Y.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio"),edition:Y.coerce.number().int().positive("Edi\xE7\xE3o deve ser um n\xFAmero positivo"),startDate:Y.coerce.date(),endDate:Y.coerce.date(),description:Y.string().optional(),location:Y.string().optional(),congressLink:Y.union([Y.url("Link do congresso deve ser uma URL v\xE1lida"),Y.literal("")]),noticeUrl:Y.union([Y.url("URL do edital deve ser uma URL v\xE1lida"),Y.literal("")]),scheduleUrl:Y.union([Y.url("URL do cronograma deve ser uma URL v\xE1lida"),Y.literal("")]),programUrl:Y.union([Y.url("URL da programa\xE7\xE3o deve ser uma URL v\xE1lida"),Y.literal("")]),adminReportUrl:Y.union([Y.url("URL do relat\xF3rio administrativo deve ser uma URL v\xE1lida"),Y.literal("")]),proceedingsUrl:Y.union([Y.url("URL dos anais deve ser uma URL v\xE1lida"),Y.literal("")])}).refine(o=>o.endDate>=o.startDate,{message:"Data de t\xE9rmino deve ser posterior ou igual \xE0 data de in\xEDcio",path:["endDate"]}),Mi=class{constructor(e){this.regionalCongressRepository=e}async handle(e,r){try{let t=im.parse(e.body);return await this.regionalCongressRepository.create(t),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as cI}from"@asteasolutions/zod-to-openapi";import nm from"zod";cI(nm);var sm=nm.object({id:nm.string().uuid("ID inv\xE1lido")}),Ti=class{constructor(e){this.regionalCongressRepository=e}async handle(e,r){try{let{id:t}=sm.parse(e.params);if(!await this.regionalCongressRepository.findById(t))throw new p("Congresso regional n\xE3o encontrado");return await this.regionalCongressRepository.deleteById(t),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as pI}from"@asteasolutions/zod-to-openapi";import am from"zod";pI(am);var mm=am.object({edition:am.coerce.number().int().positive("Edi\xE7\xE3o deve ser um n\xFAmero positivo")}),Ai=class{constructor(e){this.regionalCongressRepository=e}async handle(e,r){try{let{edition:t}=mm.parse(e.params),i=await this.regionalCongressRepository.findByEdition(t);if(!i||i.length===0)throw new p("Congresso regional n\xE3o encontrado");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as dI}from"@asteasolutions/zod-to-openapi";import cm from"zod";dI(cm);var Fi=cm.object({id:cm.string().uuid("ID inv\xE1lido")}),Di=class{constructor(e){this.regionalCongressRepository=e}async handle(e,r){try{let{id:t}=Fi.parse(e.params),i=await this.regionalCongressRepository.findById(t);if(!i)throw new p("Congresso regional n\xE3o encontrado");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as lI}from"@asteasolutions/zod-to-openapi";import Qe from"zod";lI(Qe);var pm=Qe.object({page:Qe.coerce.number().int().positive().default(1),limit:Qe.coerce.number().int().positive().default(10),title:Qe.string().optional(),edition:Qe.coerce.number().int().positive().optional(),location:Qe.string().optional(),orderBy:Qe.enum(["asc","desc"]).optional().default("desc")}),Ui=class{constructor(e){this.regionalCongressRepository=e}async handle(e,r){try{let{page:t,limit:i,orderBy:n,...s}=pm.parse(e.query),m=(t-1)*i,c=await this.regionalCongressRepository.find({pagination:{offset:m,limit:i},filter:{...s,orderBy:n}});if(!c)throw new p("Congressos regionais n\xE3o encontrados");let u=await this.regionalCongressRepository.count({filter:s});return r.status(200).json({data:c,pagination:{page:t,limit:i,total:u,totalPages:Math.ceil(u/i)}})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as uI}from"@asteasolutions/zod-to-openapi";import V from"zod";uI(V);var dm=V.object({id:V.string().uuid("ID inv\xE1lido"),title:V.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio").optional(),edition:V.coerce.number().int().positive("Edi\xE7\xE3o deve ser um n\xFAmero positivo").optional(),startDate:V.coerce.date().optional(),endDate:V.coerce.date().optional(),description:V.string().optional(),location:V.string().optional(),congressLink:V.union([V.url("Link do congresso deve ser uma URL v\xE1lida"),V.literal("")]),noticeUrl:V.union([V.url("URL do edital deve ser uma URL v\xE1lida"),V.literal("")]),scheduleUrl:V.union([V.url("URL do cronograma deve ser uma URL v\xE1lida"),V.literal("")]),programUrl:V.union([V.url("URL da programa\xE7\xE3o deve ser uma URL v\xE1lida"),V.literal("")]),adminReportUrl:V.union([V.url("URL do relat\xF3rio administrativo deve ser uma URL v\xE1lida"),V.literal("")]),proceedingsUrl:V.union([V.url("URL dos anais deve ser uma URL v\xE1lida"),V.literal("")])}).refine(o=>o.startDate&&o.endDate?o.endDate>=o.startDate:!0,{message:"Data de t\xE9rmino deve ser posterior ou igual \xE0 data de in\xEDcio",path:["endDate"]}),qi=class{constructor(e){this.regionalCongressRepository=e}async handle(e,r){try{let{id:t}=V.object({id:V.string().uuid()}).parse(e.params);if(!await this.regionalCongressRepository.findById(t))throw new p("Congresso regional n\xE3o encontrado");let n=dm.parse({id:t,...e.body});return await this.regionalCongressRepository.update(n),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var gI=9,yI=l.object({image:l.any().openapi({type:"string",format:"binary"}),caption:l.string().optional()}),fI=l.object({image:l.any().openapi({type:"string",format:"binary"}).optional(),caption:l.string().optional()}),hI=l.object({id:l.uuid(),name:l.string(),logoUrl:l.string().nullable(),congressId:l.uuid()}),lm=l.object({id:l.uuid(),imageUrl:l.string(),caption:l.string().nullable(),congressId:l.uuid()}),um=l.object({id:l.uuid(),title:l.string(),edition:l.number(),startDate:l.date(),endDate:l.date(),description:l.string().nullable(),location:l.string().nullable(),congressLink:l.string().nullable(),noticeUrl:l.string().nullable(),scheduleUrl:l.string().nullable(),programUrl:l.string().nullable(),adminReportUrl:l.string().nullable(),proceedingsUrl:l.string().nullable(),partners:l.array(hI),galleries:l.array(lm),createdAt:l.date(),updatedAt:l.date()}),zd={method:"post",path:"/regional-congress",tags:["Regional Congresses"],summary:"Create a new regional congress",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:im}}}},responses:{201:{description:"Regional congress created successfully",summary:"Regional Congress Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:l.object({errors:l.record(l.string(),l.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:l.object({message:l.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:l.object({message:l.string()})}}}}},Zd={method:"get",path:"/regional-congress",tags:["Regional Congresses"],summary:"List all regional congresses with pagination and filters",request:{query:pm},responses:{200:{description:"List of regional congresses retrieved successfully with pagination",summary:"Regional Congresses Retrieved",content:{"application/json":{schema:l.object({page:l.number(),totalPages:l.number(),offset:l.number(),limit:l.number(),congresses:l.array(um)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:l.object({errors:l.record(l.string(),l.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:l.object({message:l.string()})}}}}},Vd={method:"get",path:"/regional-congress/{id}",tags:["Regional Congresses"],summary:"Find regional congress by ID",request:{params:Fi},responses:{200:{description:"Regional congress details retrieved successfully",summary:"Regional Congress Retrieved",content:{"application/json":{schema:um}}},400:{description:"Invalid regional congress ID format",summary:"Validation Error",content:{"application/json":{schema:l.object({errors:l.record(l.string(),l.string())})}}},404:{description:"Regional congress not found with the provided ID",summary:"Regional Congress Not Found",content:{"application/json":{schema:l.object({message:l.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:l.object({message:l.string()})}}}}},Kd={method:"get",path:"/regional-congress/edition/{edition}",tags:["Regional Congresses"],summary:"Find regional congresses by edition",request:{params:mm},responses:{200:{description:"Regional congresses retrieved successfully by edition",summary:"Regional Congresses Retrieved by Edition",content:{"application/json":{schema:l.array(um)}}},400:{description:"Invalid edition parameter provided",summary:"Validation Error",content:{"application/json":{schema:l.object({errors:l.record(l.string(),l.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:l.object({message:l.string()})}}}}},Yd={method:"put",path:"/regional-congress/{id}",tags:["Regional Congresses"],summary:"Update regional congress",security:[{bearerAuth:[]}],request:{params:Fi,body:{content:{"application/json":{schema:dm.omit({id:!0})}}}},responses:{200:{description:"Regional congress updated successfully",summary:"Regional Congress Updated"},400:{description:"Invalid input data or regional congress ID format",summary:"Validation Error",content:{"application/json":{schema:l.object({errors:l.record(l.string(),l.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:l.object({message:l.string()})}}},404:{description:"Regional congress not found with the provided ID",summary:"Regional Congress Not Found",content:{"application/json":{schema:l.object({message:l.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:l.object({message:l.string()})}}}}},Xd={method:"delete",path:"/regional-congress/{id}",tags:["Regional Congresses"],summary:"Delete regional congress",security:[{bearerAuth:[]}],request:{params:sm},responses:{200:{description:"Regional congress deleted successfully",summary:"Regional Congress Deleted"},400:{description:"Invalid regional congress ID format",summary:"Validation Error",content:{"application/json":{schema:l.object({errors:l.record(l.string(),l.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:l.object({message:l.string()})}}},404:{description:"Regional congress not found with the provided ID",summary:"Regional Congress Not Found",content:{"application/json":{schema:l.object({message:l.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:l.object({message:l.string()})}}}}},XU={method:"post",path:"/regional-congress/{congressId}/gallery",tags:["Regional Congress Gallery"],summary:"Create a new gallery image for a congress",security:[{bearerAuth:[]}],request:{params:l.object({congressId:l.uuid()}),body:{content:{"multipart/form-data":{schema:yI}}}},responses:{201:{description:"Gallery image created successfully",summary:"Gallery Image Created"},400:{description:"Invalid input data, missing required fields, or invalid image format/size",summary:"Validation Error",content:{"application/json":{schema:l.object({errors:l.record(l.string(),l.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:l.object({message:l.string()})}}},404:{description:"Congress not found with the provided ID",summary:"Congress Not Found",content:{"application/json":{schema:l.object({message:l.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:l.object({message:l.string()})}}}}},$U={method:"get",path:"/regional-congress/{congressId}/gallery",tags:["Regional Congress Gallery"],summary:"List all gallery images for a congress with pagination",request:{params:l.object({congressId:l.uuid()}),query:l.object({page:l.coerce.number().min(1).default(1),limit:l.coerce.number().min(1).default(gI),caption:l.string().optional()})},responses:{200:{description:"Gallery images retrieved successfully with pagination",summary:"Gallery Images Retrieved",content:{"application/json":{schema:l.object({page:l.number(),totalPages:l.number(),offset:l.number(),limit:l.number(),galleries:l.array(lm)})}}},400:{description:"Invalid congress ID format or query parameters",summary:"Validation Error",content:{"application/json":{schema:l.object({errors:l.record(l.string(),l.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:l.object({message:l.string()})}}}}},JU={method:"get",path:"/regional-congress/gallery/{id}",tags:["Regional Congress Gallery"],summary:"Find a gallery image by ID",request:{params:l.object({id:l.uuid()})},responses:{200:{description:"Gallery image retrieved successfully",summary:"Gallery Image Retrieved",content:{"application/json":{schema:lm}}},400:{description:"Invalid gallery image ID format",summary:"Validation Error",content:{"application/json":{schema:l.object({errors:l.record(l.string(),l.string())})}}},404:{description:"Gallery image not found with the provided ID",summary:"Gallery Image Not Found",content:{"application/json":{schema:l.object({message:l.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:l.object({message:l.string()})}}}}},QU={method:"put",path:"/regional-congress/gallery/{id}",tags:["Regional Congress Gallery"],summary:"Update a gallery image with optional image upload",security:[{bearerAuth:[]}],request:{params:l.object({id:l.uuid()}),body:{content:{"multipart/form-data":{schema:fI}}}},responses:{200:{description:"Gallery image updated successfully",summary:"Gallery Image Updated"},400:{description:"Invalid input data, gallery ID format, or invalid image format/size",summary:"Validation Error",content:{"application/json":{schema:l.object({errors:l.record(l.string(),l.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:l.object({message:l.string()})}}},404:{description:"Gallery image not found with the provided ID",summary:"Gallery Image Not Found",content:{"application/json":{schema:l.object({message:l.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:l.object({message:l.string()})}}}}},eq={method:"delete",path:"/regional-congress/gallery/{id}",tags:["Regional Congress Gallery"],summary:"Delete a gallery image",security:[{bearerAuth:[]}],request:{params:l.object({id:l.uuid()})},responses:{200:{description:"Gallery image deleted successfully",summary:"Gallery Image Deleted"},400:{description:"Invalid gallery ID format",summary:"Validation Error",content:{"application/json":{schema:l.object({errors:l.record(l.string(),l.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:l.object({message:l.string()})}}},404:{description:"Gallery image not found with the provided ID",summary:"Gallery Image Not Found",content:{"application/json":{schema:l.object({message:l.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:l.object({message:l.string()})}}}}};import{$Enums as bm}from"@prisma/client";import R from"zod";import{extendZodWithOpenApi as RI}from"@asteasolutions/zod-to-openapi";import{Degree as II,Seniority as CI}from"@prisma/client";import ge from"zod";RI(ge);var gm=ge.object({registrationNumber:ge.string(),mainEtps:ge.string().optional(),formations:ge.string().optional(),degrees:ge.array(ge.enum(II)),occupations:ge.string(),seniority:ge.enum(CI),institutions:ge.string(),biography:ge.string().optional(),userId:ge.string()}),Bi=class{constructor(e){this.researcherRepository=e}async handle(e,r){try{let{registrationNumber:t,mainEtps:i,formations:n,degrees:s,occupations:m,seniority:c,institutions:u,biography:w,userId:B}=gm.parse(e.body);if(await this.researcherRepository.findByRegistrationNumber(t))throw new Q("J\xE1 existe um pesquisador cadastrado com este n\xFAmero de registro.");if(await this.researcherRepository.findByUserId(B))throw new Q("Usu\xE1rio j\xE1 possui um perfil de pesquisador.");return await this.researcherRepository.create({registrationNumber:t,mainEtps:i,formations:n,degrees:s,occupations:m,seniority:c,institutions:u,biography:w,userId:B}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as bI}from"@asteasolutions/zod-to-openapi";import ym from"zod";bI(ym);var fm=ym.object({id:ym.uuid()}),Oi=class{constructor(e){this.researcherRepository=e}async handle(e,r){try{let{id:t}=fm.parse({id:e.params.id});if(!await this.researcherRepository.findById(t))throw new p("O pesquisador n\xE3o existe.");return await this.researcherRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as wI}from"@asteasolutions/zod-to-openapi";import hm from"zod";wI(hm);var ki=hm.object({id:hm.uuid()}),Ni=class{constructor(e){this.researcherRepository=e}async handle(e,r){try{let{id:t}=ki.parse({id:e.params.id}),i=await this.researcherRepository.findById(t);if(!i)throw new p("O pesquisador n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as SI}from"@asteasolutions/zod-to-openapi";import Rm from"zod";SI(Rm);var Im=Rm.object({userId:Rm.uuid()}),Gi=class{constructor(e){this.researcherRepository=e}async handle(e,r){try{let{userId:t}=Im.parse({userId:e.params.userId}),i=await this.researcherRepository.findByUserId(t);if(!i)throw new p("O pesquisador n\xE3o existe para este usu\xE1rio.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as vI}from"@asteasolutions/zod-to-openapi";import{Degree as EI,Seniority as jI}from"@prisma/client";import ye from"zod";vI(ye);var Cm=ye.object({id:ye.uuid(),registrationNumber:ye.string().optional(),mainEtps:ye.string().optional(),formations:ye.string().optional(),degrees:ye.array(ye.enum(EI)).optional(),occupations:ye.string().optional(),seniority:ye.enum(jI).optional(),institutions:ye.string().optional(),biography:ye.string().optional()}),Li=class{constructor(e){this.researcherRepository=e}async handle(e,r){try{let{id:t,registrationNumber:i,mainEtps:n,formations:s,degrees:m,occupations:c,seniority:u,institutions:w,biography:B}=Cm.parse({id:e.params.id,...e.body}),Z=await this.researcherRepository.findById(t);if(!Z)throw new p("O pesquisador n\xE3o existe.");if(i&&i!==Z.registrationNumber){let X=await this.researcherRepository.findByRegistrationNumber(i);if(X&&X.id!==t)throw new Q("J\xE1 existe um pesquisador com este n\xFAmero de registro.")}return await this.researcherRepository.update({id:t,registrationNumber:i,mainEtps:n,formations:s,degrees:m,occupations:c,seniority:u,institutions:w,biography:B}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var xI=1,PI=9,wm=R.object({id:R.uuid(),registrationNumber:R.string(),mainEtps:R.string().nullable(),formations:R.string().nullable(),degrees:R.array(R.enum(bm.Degree)),occupations:R.string(),seniority:R.enum(bm.Seniority),institutions:R.string(),biography:R.string().nullable(),createdAt:R.date(),updatedAt:R.date(),userId:R.uuid(),user:R.object({id:R.uuid(),name:R.string(),emailAddress:R.string(),avatarUrl:R.string().nullable(),orcid:R.string().nullable(),phone:R.string().nullable(),lattesUrl:R.string().nullable(),role:R.enum(bm.UserRole)})}),$d={method:"post",path:"/researcher",tags:["Researchers"],summary:"Create a new researcher profile",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:gm}}}},responses:{201:{description:"Researcher profile created successfully",summary:"Researcher Created",content:{"application/json":{schema:R.object({message:R.string()})}}},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:R.object({errors:R.record(R.string(),R.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:R.object({message:R.string()})}}},409:{description:"Researcher with this registration number already exists or user already has a researcher profile",summary:"Conflict",content:{"application/json":{schema:R.object({message:R.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:R.object({message:R.string()})}}}}},Jd={method:"get",path:"/researcher",tags:["Researchers"],summary:"List all researchers with pagination and filters",request:{query:R.object({page:R.coerce.number().min(1).default(xI).optional(),limit:R.coerce.number().min(1).default(PI).optional(),userId:R.string().optional(),registrationNumber:R.string().optional(),name:R.string().optional(),emailAddress:R.string().optional(),mainEtps:R.string().optional(),formations:R.string().optional(),occupations:R.string().optional(),institutions:R.string().optional(),biography:R.string().optional(),orderBy:R.enum(["asc","desc"]).optional()})},responses:{200:{description:"List of researchers retrieved successfully with pagination",summary:"Researchers Retrieved",content:{"application/json":{schema:R.object({page:R.number(),totalPages:R.number(),offset:R.number(),limit:R.number(),researchers:R.array(wm)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:R.object({message:R.string()})}}}}},Qd={method:"get",path:"/researcher/{id}",tags:["Researchers"],summary:"Find researcher by ID",request:{params:ki},responses:{200:{description:"Researcher details retrieved successfully",summary:"Researcher Retrieved",content:{"application/json":{schema:wm}}},400:{description:"Invalid researcher ID format",summary:"Validation Error",content:{"application/json":{schema:R.object({errors:R.record(R.string(),R.string())})}}},404:{description:"Researcher not found with the provided ID",summary:"Researcher Not Found",content:{"application/json":{schema:R.object({message:R.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:R.object({message:R.string()})}}}}},el={method:"get",path:"/researcher/user/{userId}",tags:["Researchers"],summary:"Find researcher by user ID",request:{params:Im},responses:{200:{description:"Researcher details retrieved successfully",summary:"Researcher Retrieved",content:{"application/json":{schema:wm}}},400:{description:"Invalid user ID format",summary:"Validation Error",content:{"application/json":{schema:R.object({errors:R.record(R.string(),R.string())})}}},404:{description:"Researcher not found for this user",summary:"Researcher Not Found",content:{"application/json":{schema:R.object({message:R.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:R.object({message:R.string()})}}}}},tl={method:"put",path:"/researcher/{id}",tags:["Researchers"],summary:"Update researcher profile",security:[{bearerAuth:[]}],request:{params:ki,body:{content:{"application/json":{schema:Cm.omit({id:!0})}}}},responses:{200:{description:"Researcher profile updated successfully",summary:"Researcher Updated",content:{"application/json":{schema:R.object({message:R.string()})}}},400:{description:"Invalid input data or researcher ID format",summary:"Validation Error",content:{"application/json":{schema:R.object({errors:R.record(R.string(),R.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:R.object({message:R.string()})}}},404:{description:"Researcher not found with the provided ID",summary:"Researcher Not Found",content:{"application/json":{schema:R.object({message:R.string()})}}},409:{description:"Researcher with this registration number already exists",summary:"Conflict",content:{"application/json":{schema:R.object({message:R.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:R.object({message:R.string()})}}}}},rl={method:"delete",path:"/researcher/{id}",tags:["Researchers"],summary:"Delete researcher profile",security:[{bearerAuth:[]}],request:{params:fm},responses:{200:{description:"Researcher profile deleted successfully",summary:"Researcher Deleted"},400:{description:"Invalid researcher ID format",summary:"Validation Error",content:{"application/json":{schema:R.object({errors:R.record(R.string(),R.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:R.object({message:R.string()})}}},404:{description:"Researcher not found with the provided ID",summary:"Researcher Not Found",content:{"application/json":{schema:R.object({message:R.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:R.object({message:R.string()})}}}}};import{$Enums as FI}from"@prisma/client";import U from"zod";import{extendZodWithOpenApi as MI}from"@asteasolutions/zod-to-openapi";import Nt from"zod";MI(Nt);var Sm=Nt.object({role:Nt.string().min(1),description:Nt.string().optional(),userId:Nt.uuid(),order:Nt.number().optional()}),_i=class{constructor(e){this.sdhcTeamMemberRepository=e}async handle(e,r){try{let{role:t,description:i,userId:n,order:s}=Sm.parse(e.body);return await this.sdhcTeamMemberRepository.create({role:t,description:i,userId:n,order:s??0}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as TI}from"@asteasolutions/zod-to-openapi";import vm from"zod";TI(vm);var Em=vm.object({id:vm.uuid()}),Wi=class{constructor(e){this.sdhcTeamMemberRepository=e}async handle(e,r){try{let{id:t}=Em.parse({id:e.params.id});if(!await this.sdhcTeamMemberRepository.findById(t))throw new p("O membro da equipe SDHC n\xE3o existe.");return await this.sdhcTeamMemberRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as AI}from"@asteasolutions/zod-to-openapi";import jm from"zod";AI(jm);var zi=jm.object({id:jm.uuid()}),Hi=class{constructor(e){this.sdhcTeamMemberRepository=e}async handle(e,r){try{let{id:t}=zi.parse({id:e.params.id}),i=await this.sdhcTeamMemberRepository.findById(t);if(!i)throw new p("O membro da equipe SDHC n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as DI}from"@asteasolutions/zod-to-openapi";import dt from"zod";DI(dt);var xm=dt.object({id:dt.uuid(),role:dt.string().min(1).optional(),description:dt.string().optional(),userId:dt.uuid().optional(),order:dt.number().optional()}),Zi=class{constructor(e){this.sdhcTeamMemberRepository=e}async handle(e,r){try{let{id:t,role:i,description:n,userId:s,order:m}=xm.parse({id:e.params.id,...e.body});if(!await this.sdhcTeamMemberRepository.findById(t))throw new p("O membro da equipe SDHC n\xE3o existe.");return await this.sdhcTeamMemberRepository.update({id:t,role:i,description:n,userId:s,order:m}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var UI=U.object({id:U.uuid(),name:U.string(),emailAddress:U.string(),avatarUrl:U.string().nullable(),orcid:U.string().nullable(),phone:U.string().nullable(),lattesUrl:U.string().nullable(),role:U.enum(FI.UserRole)}),ol=U.object({id:U.uuid(),role:U.string(),description:U.string().nullable(),order:U.number(),createdAt:U.date(),updatedAt:U.date(),userId:U.uuid(),user:UI}),il={method:"post",path:"/sdhc-team-member",tags:["SDHC Team Members"],summary:"Create a new SDHC Team Member",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:Sm}}}},responses:{201:{description:"SDHC Team Member created successfully",summary:"SDHC Team Member Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:U.object({errors:U.record(U.string(),U.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:U.object({message:U.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:U.object({message:U.string()})}}}}},nl={method:"get",path:"/sdhc-team-member",tags:["SDHC Team Members"],summary:"List all SDHC Team Members with filters",request:{query:U.object({role:U.string().optional(),orderBy:U.enum(["asc","desc"]).optional()})},responses:{200:{description:"List of SDHC Team Members retrieved successfully",summary:"SDHC Team Members Retrieved",content:{"application/json":{schema:U.object({members:U.array(ol)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:U.object({message:U.string()})}}}}},sl={method:"get",path:"/sdhc-team-member/{id}",tags:["SDHC Team Members"],summary:"Find SDHC Team Member by ID",request:{params:zi},responses:{200:{description:"SDHC Team Member details retrieved successfully",summary:"SDHC Team Member Retrieved",content:{"application/json":{schema:ol}}},400:{description:"Invalid SDHC Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:U.object({errors:U.record(U.string(),U.string())})}}},404:{description:"SDHC Team Member not found with the provided ID",summary:"SDHC Team Member Not Found",content:{"application/json":{schema:U.object({message:U.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:U.object({message:U.string()})}}}}},al={method:"put",path:"/sdhc-team-member/{id}",tags:["SDHC Team Members"],summary:"Update SDHC Team Member",security:[{bearerAuth:[]}],request:{params:zi,body:{content:{"application/json":{schema:xm.omit({id:!0})}}}},responses:{200:{description:"SDHC Team Member updated successfully",summary:"SDHC Team Member Updated"},400:{description:"Invalid input data or SDHC Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:U.object({errors:U.record(U.string(),U.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:U.object({message:U.string()})}}},404:{description:"SDHC Team Member not found with the provided ID",summary:"SDHC Team Member Not Found",content:{"application/json":{schema:U.object({message:U.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:U.object({message:U.string()})}}}}},ml={method:"delete",path:"/sdhc-team-member/{id}",tags:["SDHC Team Members"],summary:"Delete SDHC Team Member",security:[{bearerAuth:[]}],request:{params:Em},responses:{200:{description:"SDHC Team Member deleted successfully",summary:"SDHC Team Member Deleted"},400:{description:"Invalid SDHC Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:U.object({errors:U.record(U.string(),U.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:U.object({message:U.string()})}}},404:{description:"SDHC Team Member not found with the provided ID",summary:"SDHC Team Member Not Found",content:{"application/json":{schema:U.object({message:U.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:U.object({message:U.string()})}}}}};import{$Enums as dl}from"@prisma/client";import N from"zod";import{extendZodWithOpenApi as qI}from"@asteasolutions/zod-to-openapi";import Pm from"zod";qI(Pm);var Mm=Pm.object({id:Pm.string()}),Vi=class{constructor(e){this.userRepository=e}async handle(e,r){try{let{id:t}=Mm.parse({id:e.params.id}),i=await this.userRepository.findById(t);if(!i)throw new p("O usu\xE1rio n\xE3o existe.");let n=e.user.id;if(i.id!==n)throw new de("Voc\xEA n\xE3o tem permiss\xE3o para deletar o usu\xE1rio");return await this.userRepository.deleteById(i.id),r.sendStatus(204)}catch(t){if(console.log(t),t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as BI}from"@asteasolutions/zod-to-openapi";import{z as Tm}from"zod";BI(Tm);var Am=Tm.object({id:Tm.string().min(1,"id do usu\xE1rio n\xE3o fornecido.")}),Ki=class{constructor(e){this.userRepository=e}async handle(e,r){try{let{id:t}=Am.parse(e.params),i=await this.userRepository.findById(t);if(!i)throw new p("Usu\xE1rio n\xE3o encontrado");r.status(200).json(i)}catch(t){if(console.log(t),t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as OI}from"@asteasolutions/zod-to-openapi";import lt from"zod";var pl=2,cl=1024,NI=cl*cl,kI=pl*NI,GI=/^\d{4}-\d{4}-\d{4}-\d{4}$/,LI=/^\(?\d{2}\)?[\s-]?\d{4,5}-?\d{4}$/;OI(lt);var Dm=lt.object({name:lt.string().optional(),lattesUrl:lt.string().optional(),orcid:lt.string().optional().transform(o=>o===void 0?void 0:o.trim()).refine(o=>o===void 0||o===""||GI.test(o),{message:"ORCID inv\xE1lido. Deve estar no formato 0000-0000-0000-0000"}),phone:lt.string().optional().refine(o=>o===void 0||o===""||LI.test(o),{message:"Telefone inv\xE1lido. Deve estar no formato (99) 99999-9999"}),avatarImage:lt.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=kI,`A imagem deve ter no m\xE1ximo ${pl}MB.`).optional()}),Yi=class{constructor(e,r){this.userRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{avatarImage:t,...i}=Dm.parse({...e.body,avatarImage:e.file}),n=e.user.id,s=await this.userRepository.findById(n);if(!s)throw new ie("O usu\xE1rio n\xE3o existe");let m=s.avatarUrl;return t&&(s.avatarUrl?m=await this.firebaseStorageService.updateFile({file:t,id:n,folder:T.USER,fileUrl:s.avatarUrl}):m=await this.firebaseStorageService.uploadFile({file:t,id:n,folder:T.USER})),await this.userRepository.update({...i,id:n,avatarUrl:m||void 0}),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var ll={method:"get",path:"/users/{id}",tags:["Users"],summary:"Find user by ID",request:{params:Am},responses:{200:{description:"User details retrieved successfully",summary:"User Retrieved",content:{"application/json":{schema:N.object({id:N.string(),name:N.string(),createdAt:N.date(),updatedAt:N.date(),role:N.enum(dl.UserRole),lattesUrl:N.string().nullable(),orcid:N.string().nullable(),phone:N.string().nullable(),avatarUrl:N.url().nullable(),emailAddress:N.email()})}}},400:{description:"Invalid user ID format",summary:"Validation Error",content:{"application/json":{schema:N.object({errors:N.record(N.string(),N.string())})}}},404:{description:"User not found with the provided ID",summary:"User Not Found",content:{"application/json":{schema:N.object({message:N.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:N.object({message:N.string()})}}}}},ul={method:"put",path:"/users",tags:["Users"],summary:"Update authenticated user",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:Dm}}}},responses:{200:{description:"User profile updated successfully",summary:"User Updated",content:{"application/json":{schema:N.object({message:N.string()})}}},400:{description:"Invalid input data or file format",summary:"Validation Error",content:{"application/json":{schema:N.object({errors:N.record(N.string(),N.string())})}}},401:{description:"User not authenticated or unauthorized",summary:"Authentication Required",content:{"application/json":{schema:N.object({message:N.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:N.object({message:N.string()})}}}}},gl={method:"delete",path:"/users",tags:["Users"],summary:"Delete authenticated user",security:[{bearerAuth:[]}],request:{params:Mm},responses:{200:{description:"User account deleted successfully",summary:"User Deleted",content:{"application/json":{schema:N.object({message:N.string()})}}},400:{description:"Invalid request parameters",summary:"Validation Error",content:{"application/json":{schema:N.object({errors:N.record(N.string(),N.string())})}}},401:{description:"User not authenticated or unauthorized",summary:"Authentication Required",content:{"application/json":{schema:N.object({message:N.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:N.object({message:N.string()})}}}}},yl={method:"get",path:"/users",tags:["Users"],summary:"List users",responses:{200:{description:"Complete list of users retrieved successfully",summary:"Users Retrieved",content:{"application/json":{schema:N.array(N.object({id:N.string(),name:N.string(),createdAt:N.date(),updatedAt:N.date(),role:N.enum(dl.UserRole),lattesUrl:N.url().nullable(),orcid:N.string().nullable(),phone:N.string().nullable(),avatarUrl:N.string().nullable(),emailAddress:N.email()}))}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:N.object({message:N.string()})}}}}};import C from"zod";import{extendZodWithOpenApi as _I}from"@asteasolutions/zod-to-openapi";import Fm from"zod";_I(Fm);var Um=Fm.object({id:Fm.uuid()}),Xi=class{constructor(e,r){this.webinarRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=Um.parse({id:e.params.id}),i=await this.webinarRepository.findById(t);if(!i)throw new p("O webinar n\xE3o existe.");return i.thumbnailUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.thumbnailUrl}),await this.webinarRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as WI}from"@asteasolutions/zod-to-openapi";import qm from"zod";WI(qm);var Bm=qm.object({id:qm.uuid()}),$i=class{constructor(e){this.webinarRepository=e}async handle(e,r){try{let{id:t}=Bm.parse({id:e.params.id}),i=await this.webinarRepository.findById(t);if(!i)throw new p("Webinar n\xE3o encontrado.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as HI}from"@asteasolutions/zod-to-openapi";import ut from"zod";var zI=1,ZI=6;HI(ut);var Om=ut.object({page:ut.coerce.number().min(1).default(zI),limit:ut.coerce.number().min(1).default(ZI),title:ut.string().optional(),description:ut.string().optional(),orderBy:ut.enum(["asc","desc"]).default("desc")}),Ji=class{constructor(e){this.webinarRepository=e}async handle(e,r){try{let{limit:t,page:i,...n}=Om.parse(e.query),s=i*t-t,[m,c]=await Promise.all([this.webinarRepository.find({pagination:{offset:s,limit:t},filter:n}),this.webinarRepository.count({filter:n})]),u=Math.max(Math.ceil(c/t),1);return r.status(200).json({page:i,totalPages:u,offset:s,limit:t,webinars:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as VI}from"@asteasolutions/zod-to-openapi";import Ce from"zod";var hl=5,fl=1024,KI=fl*fl,YI=hl*KI;VI(Ce);var Nm=Ce.object({id:Ce.uuid(),title:Ce.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio.").optional(),description:Ce.string().optional(),scheduledAt:Ce.coerce.date().optional(),webinarLink:Ce.url("URL do webinar deve ser v\xE1lida").optional(),guestIds:Ce.transform(o=>typeof o=="string"?o.split(","):o).pipe(Ce.array(Ce.uuid())).optional(),thumbnail:Ce.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=YI,`A thumbnail deve ter no m\xE1ximo ${hl}MB.`).optional()}),Qi=class{constructor(e,r){this.webinarRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,thumbnail:i,title:n,description:s,scheduledAt:m,webinarLink:c,guestIds:u}=Nm.parse({id:e.params.id,...e.body,thumbnail:e.file}),w=await this.webinarRepository.findById(t);if(!w)throw new p("O webinar n\xE3o existe.");let B=w.thumbnailUrl;if(i&&(B=await this.firebaseStorageService.uploadFile({file:i,id:t,folder:T.WEBINAR})),!B)throw new a("Thumbnail URL \xE9 obrigat\xF3rio");return await this.webinarRepository.update({id:t,title:n,description:s,scheduledAt:m,webinarLink:c,thumbnailUrl:B,guestIds:u}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Rl={method:"post",path:"/webinars",tags:["Webinars"],summary:"Create webinar",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:C.object({title:C.string().min(1).openapi({description:"T\xEDtulo do webinar"}),description:C.string().optional().openapi({description:"Descri\xE7\xE3o do webinar"}),scheduledAt:C.string().openapi({description:"Data e hora agendada (ISO 8601)",example:"2024-01-01T10:00:00Z"}),webinarLink:C.string().url().optional().openapi({description:"Link do webinar"}),guestIds:C.string().openapi({description:"IDs dos convidados separados por v\xEDrgula",example:"uuid1,uuid2,uuid3"}),thumbnail:C.string().optional().openapi({description:"Imagem de thumbnail (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{201:{description:"Webinar created successfully",summary:"Webinar Created"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:C.object({errors:C.record(C.string(),C.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:C.object({message:C.string()})}}}}},Il={method:"get",path:"/webinars",tags:["Webinars"],summary:"List webinars",security:[{bearerAuth:[]}],request:{query:Om},responses:{200:{description:"Paginated list of webinars with guest information retrieved successfully",summary:"Webinars Retrieved",content:{"application/json":{schema:C.object({page:C.number(),totalPages:C.number(),offset:C.number(),limit:C.number(),webinars:C.array(C.object({id:C.string(),title:C.string(),description:C.string().nullable(),scheduledAt:C.date(),webinarLink:C.string().nullable(),thumbnailUrl:C.string().nullable(),createdAt:C.date(),updatedAt:C.date(),guests:C.array(C.object({id:C.uuid(),name:C.string(),emailAddress:C.email(),avatarUrl:C.string().nullable(),createdAt:C.date(),updatedAt:C.date()}))}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:C.object({errors:C.record(C.string(),C.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:C.object({message:C.string()})}}}}},Cl={method:"get",path:"/webinars/{id}",tags:["Webinars"],summary:"Find webinar by ID",security:[{bearerAuth:[]}],request:{params:Bm},responses:{200:{description:"Webinar details retrieved successfully",summary:"Webinar Retrieved",content:{"application/json":{schema:C.object({id:C.string(),title:C.string(),description:C.string().nullable(),scheduledAt:C.date(),webinarLink:C.string().nullable(),thumbnailUrl:C.string().nullable(),createdAt:C.date(),updatedAt:C.date(),guests:C.array(C.object({id:C.uuid(),name:C.string(),emailAddress:C.email(),avatarUrl:C.string().nullable(),createdAt:C.date(),updatedAt:C.date()}))}).nullable()}}},400:{description:"Invalid webinar ID format",summary:"Validation Error",content:{"application/json":{schema:C.object({errors:C.record(C.string(),C.string())})}}},404:{description:"Webinar not found with the provided ID",summary:"Webinar Not Found",content:{"application/json":{schema:C.object({message:C.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:C.object({message:C.string()})}}}}},bl={method:"put",path:"/webinars/{id}",tags:["Webinars"],summary:"Update webinar",security:[{bearerAuth:[]}],request:{params:Nm.pick({id:!0}),body:{content:{"multipart/form-data":{schema:C.object({title:C.string().min(1).optional().openapi({description:"T\xEDtulo do webinar"}),description:C.string().optional().openapi({description:"Descri\xE7\xE3o do webinar"}),scheduledAt:C.string().optional().openapi({description:"Data e hora agendada (ISO 8601)",example:"2024-01-01T10:00:00Z"}),webinarLink:C.string().url().optional().openapi({description:"Link do webinar"}),guestIds:C.string().optional().openapi({description:"IDs dos convidados separados por v\xEDrgula",example:"uuid1,uuid2,uuid3"}),thumbnail:C.string().optional().openapi({description:"Imagem de thumbnail (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{200:{description:"Webinar updated successfully",summary:"Webinar Updated"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:C.object({errors:C.record(C.string(),C.string())})}}},404:{description:"Webinar not found with the provided ID",summary:"Webinar Not Found",content:{"application/json":{schema:C.object({message:C.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:C.object({message:C.string()})}}}}},wl={method:"delete",path:"/webinars/{id}",tags:["Webinars"],summary:"Delete webinar",security:[{bearerAuth:[]}],request:{params:Um},responses:{200:{description:"Webinar deleted successfully",summary:"Webinar Deleted"},400:{description:"Invalid webinar ID format",summary:"Validation Error",content:{"application/json":{schema:C.object({errors:C.record(C.string(),C.string())})}}},404:{description:"Webinar not found with the provided ID",summary:"Webinar Not Found",content:{"application/json":{schema:C.object({message:C.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:C.object({message:C.string()})}}}}};var y=new XI;y.registerComponent("securitySchemes","bearerAuth",{type:"http",scheme:"bearer",bearerFormat:"JWT"});y.registerPath(mc);y.registerPath(cc);y.registerPath(pc);y.registerPath(dc);y.registerPath(uc);y.registerPath(gc);y.registerPath(lc);y.registerPath(ll);y.registerPath(ul);y.registerPath(gl);y.registerPath(yl);y.registerPath(zp);y.registerPath(Zp);y.registerPath(Vp);y.registerPath(Kp);y.registerPath(yc);y.registerPath(fc);y.registerPath(hc);y.registerPath(Rc);y.registerPath(Ic);y.registerPath(sd);y.registerPath(ad);y.registerPath(md);y.registerPath(cd);y.registerPath(pd);y.registerPath(zc);y.registerPath(Zc);y.registerPath(Vc);y.registerPath(Kc);y.registerPath(Yc);y.registerPath($d);y.registerPath(Jd);y.registerPath(Qd);y.registerPath(el);y.registerPath(tl);y.registerPath(rl);y.registerPath(Pc);y.registerPath(Mc);y.registerPath(Tc);y.registerPath(Ac);y.registerPath(Dc);y.registerPath(ed);y.registerPath(td);y.registerPath(rd);y.registerPath(od);y.registerPath(id);y.registerPath(Ep);y.registerPath(jp);y.registerPath(xp);y.registerPath(Pp);y.registerPath(Mp);y.registerPath(il);y.registerPath(nl);y.registerPath(sl);y.registerPath(al);y.registerPath(ml);y.registerPath(Ip);y.registerPath(Cp);y.registerPath(bp);y.registerPath(wp);y.registerPath(Sp);y.registerPath(Sd);y.registerPath(vd);y.registerPath(Ed);y.registerPath(jd);y.registerPath(xd);y.registerPath(Pd);y.registerPath(Np);y.registerPath(kp);y.registerPath(Gp);y.registerPath(Lp);y.registerPath(_p);y.registerPath(Wp);y.registerPath(Up);y.registerPath(qp);y.registerPath(Bp);y.registerPath(Op);y.registerPath(lp);y.registerPath(up);y.registerPath(gp);y.registerPath(yp);y.registerPath(fp);y.registerPath(hp);y.registerPath(mp);y.registerPath(cp);y.registerPath(pp);y.registerPath(dp);y.registerPath(ep);y.registerPath(tp);y.registerPath(rp);y.registerPath(op);y.registerPath(zd);y.registerPath(Zd);y.registerPath(Vd);y.registerPath(Kd);y.registerPath(Yd);y.registerPath(Xd);y.registerPath(Ld);y.registerPath(_d);y.registerPath(Wd);y.registerPath(Hd);y.registerPath(Fd);y.registerPath(Ud);y.registerPath(qd);y.registerPath(Bd);y.registerPath(Rl);y.registerPath(Il);y.registerPath(Cl);y.registerPath(bl);y.registerPath(wl);y.registerPath(wc);y.registerPath(Sc);y.registerPath(vc);y.registerPath(Ec);y.registerPath(jc);y.registerPath(ud);y.registerPath(gd);y.registerPath(yd);y.registerPath(fd);y.registerPath(hd);y.registerPath(Bc);y.registerPath(Oc);y.registerPath(Nc);y.registerPath(kc);y.registerPath(Gc);var JI=new $I(y.definitions),Sl=JI.generateDocument({openapi:"3.0.0",info:{title:"API da Rede CT",version:"1.0.0",description:"API com valida\xE7\xE3o Zod"}});import{Router as nC}from"express";import{extendZodWithOpenApi as QI}from"@asteasolutions/zod-to-openapi";import km from"zod";QI(km);var eC=km.object({authenticatedUserId:km.uuid()}),en=class{constructor(e){this.userRepository=e}async handle(e,r){try{let{authenticatedUserId:t}=eC.parse({authenticatedUserId:e.user.id}),i=await this.userRepository.findById(t);if(!i)throw new p("Usu\xE1rio n\xE3o encontrado.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{PrismaClient as tC}from"@prisma/client";var k=new tC({log:["warn","error"]});var tn=class{constructor(e){this.prisma=e}async register({userId:e,title:r,description:t,certificationUrl:i}){await this.prisma.certification.create({data:{title:r,description:t,certificationUrl:i,user:{connect:{id:e}}}})}async find({pagination:{offset:e,limit:r},filter:{description:t,orderBy:i,title:n,userId:s}}){let m={},c=[];return s&&(m.userId=s),n&&c.push({title:{contains:n,mode:"insensitive"}}),t&&c.push({description:{contains:t,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.certification.findMany({where:m,include:{user:{omit:{passwordHash:!0}}},orderBy:{updatedAt:i},skip:e,take:r})}async findById(e){return await this.prisma.certification.findFirst({where:{id:e}})}async findByUserId({pagination:{limit:e,offset:r},filter:{description:t,orderBy:i,title:n},userId:s}){let m={userId:s},c=[];return n&&c.push({title:{contains:n,mode:"insensitive"}}),t&&c.push({description:{contains:t,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.certification.findMany({where:m,include:{user:{omit:{passwordHash:!0}}},skip:r,take:e,orderBy:i?{updatedAt:i}:{updatedAt:"desc"}})}async update({id:e,...r}){await this.prisma.certification.update({where:{id:e},data:r})}async deleteById(e){await this.prisma.certification.delete({where:{id:e}})}async count({filter:{description:e,title:r,userId:t}}){let i={},n=[];return t&&(i.userId=t),r&&n.push({title:{contains:r,mode:"insensitive"}}),e&&n.push({description:{contains:e,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.certification.count({where:i})}};function et(){return new tn(k)}var rn=class{constructor(e){this.prisma=e}async create(e){await this.prisma.news.create({data:e})}async find({pagination:{offset:e,limit:r},filter:{authorId:t,content:i,title:n,orderBy:s}}){let m={};t&&(m.authorId={contains:t,mode:"insensitive"});let c=[];return n&&c.push({title:{contains:n,mode:"insensitive"}}),i&&c.push({content:{contains:i,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.news.findMany({where:m,omit:{authorId:!0},include:{author:!0},orderBy:{updatedAt:s},skip:e,take:r})}async findById(e){return await this.prisma.news.findUnique({where:{id:e},omit:{authorId:!0},include:{author:!0}})}async findByAuthorId({authorId:e,pagination:{offset:r,limit:t},filter:{orderBy:i="desc",content:n,title:s}}){let m={authorId:e},c=[];return s&&c.push({title:{contains:s,mode:"insensitive"}}),n&&c.push({content:{contains:n,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.news.findMany({omit:{authorId:!0},where:m,orderBy:{updatedAt:i},skip:r,take:t})}async update(e){await this.prisma.news.update({where:{id:e.id},data:{title:e.title,content:e.content,imageUrl:e.imageUrl}})}async delete(e){await this.prisma.news.delete({where:{id:e}})}async count({filter:{authorId:e,content:r,title:t}}){let i={};e&&(i.authorId={contains:e,mode:"insensitive"});let n=[];return t&&n.push({title:{contains:t,mode:"insensitive"}}),r&&n.push({content:{contains:r,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.news.count({where:i})}};function De(){return new rn(k)}var on=class{constructor(e){this.prisma=e}async create(e){await this.prisma.pendency.create({data:e})}async find({filter:{description:e,orderBy:r,title:t,status:i,userId:n},pagination:{limit:s,offset:m}}){let c={userId:n,AND:{status:{equals:i}}};e&&(c.description={contains:e,mode:"insensitive"});let u=[];return t&&u.push({title:{contains:t,mode:"insensitive"}}),u.length>0&&(c.OR=u),await this.prisma.pendency.findMany({where:c,orderBy:{updatedAt:r},include:{user:{omit:{passwordHash:!0}}},skip:m,take:s})}async findById(e){return await this.prisma.pendency.findFirst({where:{id:e},include:{user:{omit:{passwordHash:!0}}}})}async findByUserId({filter:{description:e,orderBy:r,title:t,status:i},pagination:{limit:n,offset:s},userId:m}){let c={userId:m,AND:{status:{equals:i}}},u=[];return e&&u.push({description:{contains:e,mode:"insensitive"}}),t&&u.push({title:{contains:t,mode:"insensitive"}}),u.length>0&&(c.OR=u),await this.prisma.pendency.findMany({where:c,orderBy:{updatedAt:r},include:{user:{omit:{passwordHash:!0}}},skip:s,take:n})}async update({id:e,...r}){await this.prisma.pendency.update({where:{id:e},data:r})}async deleteById(e){await this.prisma.pendency.delete({where:{id:e}})}async count({filter:{description:e,title:r,status:t,userId:i}}){let n={userId:i},s=[];return e&&s.push({description:{contains:e,mode:"insensitive"}}),r&&s.push({title:{contains:r,mode:"insensitive"}}),t&&s.push({status:{equals:t}}),s.length>0&&(n.OR=s),await this.prisma.pendency.count({where:n})}};function tt(){return new on(k)}var nn=class{constructor(e){this.prisma=e}async create(e){await this.prisma.user.create({data:e})}async update(e){await this.prisma.user.update({where:{id:e.id},data:{lattesUrl:e.lattesUrl??null,orcid:e.orcid??null,phone:e.phone??null,avatarUrl:e.avatarUrl??null}})}async deleteById(e){await this.prisma.user.delete({where:{id:e}})}async find(){return await this.prisma.user.findMany({omit:{passwordHash:!0}})}async findByEmail(e){return await this.prisma.user.findFirst({where:{emailAddress:e}})}async findById(e){return await this.prisma.user.findFirst({where:{id:e},omit:{passwordHash:!0}})}};function me(){return new nn(k)}import{compare as rC,hash as oC}from"bcryptjs";var sn=class{constructor(e,r){this.hashFn=e;this.compareFn=r}async hash(e){return await this.hashFn(e,6)}async compare({password:e,hashedPassword:r}){return await this.compareFn(e,r)}};function Gm(){return new sn(oC,rC)}import vl from"jsonwebtoken";import ce from"zod";var iC=ce.object({JWT_SECRET:ce.string(),FIREBASE_BUCKET:ce.string(),FIREBASE_CLIENT_EMAIL:ce.string(),FIREBASE_PRIVATE_KEY:ce.string(),FIREBASE_PROJECT_ID:ce.string(),FIREBASE_TYPE:ce.string(),FIREBASE_PRIVATE_KEY_ID:ce.string(),FIREBASE_CLIENT_ID:ce.string(),FIREBASE_AUTH_URI:ce.string(),FIREBASE_TOKEN_URI:ce.string(),FIREBASE_AUTH_PROVIDER_X509_CERT_URL:ce.string(),FIREBASE_CLIENT_X509_CERT_URL:ce.string()}),re=iC.parse(process.env);var an=class{constructor(e,r){this.signFn=e;this.verifyFn=r}sign(e){try{return this.signFn(e,re.JWT_SECRET,{expiresIn:"3d",subject:e.id})}catch{return null}}verify(e){try{return this.verifyFn(e,re.JWT_SECRET)}catch{return null}}};function mn(){return new an(vl.sign,vl.verify)}function El(){return{signUpController:new xr(me(),Gm())}}function jl(){return{signInController:new Er(me(),Gm(),mn())}}function xl(){return{findAuthenticatedUserController:new en(me())}}function Pl(){return{findAuthenticatedUserController:new wr(De())}}function Ml(){return{findAuthenticatedUserCertificationsController:new br(et())}}function Tl(){return{findAuthenticatedUserPendenciesController:new Sr(tt())}}var cn=class{constructor(e){this.jwtService=e}authenticated(e,r,t){let i=e.headers.authorization;if(!i?.startsWith("Bearer "))return r.status(401).json({message:"Token inv\xE1lido.",invalid:!0});let n=i.split(" ")[1];if(!n)return r.status(401).json({message:"Token n\xE3o fornecido."});try{let s=this.jwtService.verify(n);if(!s)return r.status(401).json({message:"Token inv\xE1lido.",invalid:!0});e.user=s,t()}catch(s){if(console.log(s),s instanceof Error)return r.status(401).json({message:s.message})}}isAdmin(e,r,t){let i=e.headers.authorization;if(!i?.startsWith("Bearer "))return r.status(401).json({message:"Token inv\xE1lido.",invalid:!0});let n=i.split(" ")[1];if(!n)return r.status(401).json({message:"Token n\xE3o fornecido."});try{let s=this.jwtService.verify(n);if(!s)return r.status(401).json({message:"Token inv\xE1lido.",invalid:!0});if(s.role!=="ADMIN")return r.status(401).json({message:"\xC9 necess\xE1rio ter permiss\xF5es de administrador."});e.user=s,t()}catch(s){if(console.log(s),s instanceof Error)return r.status(401).json({message:s.message})}}};function z(){return{authMiddleware:new cn(mn())}}var Fe=nC(),{authMiddleware:dr}=z();Fe.post("/sign-up",async(o,e)=>{let{signUpController:r}=El();await r.handle(o,e)});Fe.post("/sign-in",async(o,e)=>{let{signInController:r}=jl();await r.handle(o,e)});Fe.get("/user",(o,e,r)=>{dr.authenticated(o,e,r)},async(o,e)=>{let{findAuthenticatedUserController:r}=xl();await r.handle(o,e)});Fe.get("/user/news",(o,e,r)=>{dr.authenticated(o,e,r)},async(o,e)=>{let{findAuthenticatedUserController:r}=Pl();await r.handle(o,e)});Fe.get("/admin",(o,e,r)=>{dr.isAdmin(o,e,r)},(o,e)=>{try{e.status(200).json({success:!0})}catch(r){r instanceof Error&&e.status(500).json({message:r.message})}});Fe.get("/certifications",(o,e,r)=>{dr.authenticated(o,e,r)},async(o,e)=>{let{findAuthenticatedUserCertificationsController:r}=Ml();await r.handle(o,e)});Fe.get("/pendencies",(o,e,r)=>{dr.authenticated(o,e,r)},async(o,e)=>{let{findAuthenticatedUserPendenciesController:r}=Tl();await r.handle(o,e)});import{Router as dC}from"express";import{getStorage as aC}from"firebase-admin/storage";import{config as sC}from"dotenv";import Al from"firebase-admin";sC();var Lm=Al.initializeApp({credential:Al.credential.cert({clientEmail:re.FIREBASE_CLIENT_EMAIL,privateKey:re.FIREBASE_PRIVATE_KEY,projectId:re.FIREBASE_PROJECT_ID,type:re.FIREBASE_TYPE,privateKeyId:re.FIREBASE_PRIVATE_KEY_ID,clientId:re.FIREBASE_CLIENT_ID,authUri:re.FIREBASE_AUTH_URI,tokenUri:re.FIREBASE_TOKEN_URI,authProviderX509CertUrl:re.FIREBASE_AUTH_PROVIDER_X509_CERT_URL,clientX509CertUrl:re.FIREBASE_CLIENT_X509_CERT_URL}),storageBucket:re.FIREBASE_BUCKET});Lm.name?console.log("\u{1F525} Firebase conectado com sucesso!"):console.error("\u274C Erro ao se conectar ao Firebase.");var mC=aC(Lm),Dl=mC.bucket(re.FIREBASE_BUCKET);import{randomUUID as cC}from"node:crypto";var pC=/https:\/\/storage\.googleapis\.com\/[^/]+\/(.+)$/,pn=class{constructor(e){this.bucket=e}async uploadFile({file:e,folder:r,id:t}){let i=`${cC()}-${e?.originalname}`,n=this.bucket.file(`${r}/${t}/${i}`);return await new Promise((s,m)=>{let c=n.createWriteStream({metadata:{contentType:e?.mimetype}});c.on("error",u=>{m(u)}),c.on("finish",async()=>{try{await n.makePublic();let u=`https://storage.googleapis.com/${this.bucket.name}/${n.name}`;s(u)}catch(u){m(u)}}),c.end(e.buffer)})}async updateFile({file:e,id:r,fileUrl:t,folder:i}){try{let n=this.getPath(t);if(!n)throw new Error("Arquivo n\xE3o encontrado.");let[s,m]=await Promise.all([this.bucket.file(n).delete(),this.uploadFile({file:e,id:r,folder:i})]);return m}catch{throw new Error("Erro ao atualizar o arquivo.")}}async deleteFile({fileUrl:e}){let r=this.getPath(e);if(!r)throw new Error("Arquivo n\xE3o encontrado.");try{await this.bucket.file(r).delete()}catch{throw new Error("Erro ao deletar o arquivo.")}}getPath(e){let r=e.match(pC);return r?r[1]:null}};function O(){return new pn(Dl)}function Fl(){return{registerCertificationController:new Ar(me(),et(),O())}}function Ul(){return{findCertificationsController:new Tr(et())}}function ql(){return{findCertificationByIdController:new Mr(et())}}function Bl(){return{updateCertificationController:new Fr(et(),O())}}function Ol(){return{deleteCertificationController:new Pr(et(),O())}}import Nl from"multer";var G=Nl({storage:Nl.memoryStorage()});var gt=dC(),{authMiddleware:lr}=z();gt.post("/:user_id",(o,e,r)=>{lr.isAdmin(o,e,r)},G.single("certification"),async(o,e)=>{let{registerCertificationController:r}=Fl();await r.handle(o,e)});gt.get("/",(o,e,r)=>{lr.isAdmin(o,e,r)},async(o,e)=>{let{findCertificationsController:r}=Ul();await r.handle(o,e)});gt.get("/:certification_id",(o,e,r)=>{lr.isAdmin(o,e,r)},async(o,e)=>{let{findCertificationByIdController:r}=ql();await r.handle(o,e)});gt.put("/:certification_id",(o,e,r)=>{lr.isAdmin(o,e,r)},G.single("certification"),async(o,e)=>{let{updateCertificationController:r}=Bl();await r.handle(o,e)});gt.delete("/:certification_id",(o,e,r)=>{lr.isAdmin(o,e,r)},async(o,e)=>{let{deleteCertificationController:r}=Ol();await r.handle(o,e)});import{Router as hC}from"express";import{extendZodWithOpenApi as lC}from"@asteasolutions/zod-to-openapi";import pe from"zod";var uC=5,kl=1024,gC=kl*kl,yC=uC*gC;lC(pe);var fC=pe.object({title:pe.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),coordinatorId:pe.string().uuid("Coordenador \xE9 obrigat\xF3rio."),email:pe.email("E-mail deve ser v\xE1lido."),location:pe.string().min(1,"Localiza\xE7\xE3o \xE9 obrigat\xF3ria."),scheduledAt:pe.coerce.date(),registrationLink:pe.url().optional(),description:pe.string().optional(),instructorIds:pe.transform(o=>typeof o=="string"?o.split(","):o).pipe(pe.array(pe.uuid())),image:pe.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=yC,"A imagem deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.")}),dn=class{constructor(e,r){this.courseRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{title:t,coordinatorId:i,email:n,location:s,scheduledAt:m,registrationLink:c,description:u,instructorIds:w,image:B}=fC.parse({...e.body,image:e.file}),Z=await this.courseRepository.create({title:t,coordinatorId:i,email:n,location:s,scheduledAt:m,registrationLink:c||void 0,description:u,instructorIds:w}),X=await this.firebaseStorageService.uploadFile({file:B,folder:T.COURSE,id:Z.id});return await this.courseRepository.update({id:Z.id,imageUrl:X}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var ln=class{constructor(e){this.prisma=e}async create({title:e,imageUrl:r,coordinatorId:t,email:i,instructorIds:n,scheduledAt:s,location:m,registrationLink:c,description:u}){return await this.prisma.course.create({data:{title:e,imageUrl:r,coordinatorId:t,email:i,scheduledAt:s,location:m,registrationLink:c,description:u,instructors:{connect:n?.map(w=>({id:w}))}}})}async find({pagination:{offset:e,limit:r},filter:{description:t,orderBy:i,title:n,coordinator:s}}){let m={},c=[];return n&&c.push({title:{contains:n,mode:"insensitive"}}),t&&c.push({description:{contains:t,mode:"insensitive"}}),s&&c.push({coordinator:{name:{contains:s,mode:"insensitive"}}}),c.length>0&&(m.OR=c),await this.prisma.course.findMany({where:m,include:{coordinator:{omit:{passwordHash:!0}},instructors:{omit:{passwordHash:!0}}},orderBy:{updatedAt:i},skip:e,take:r})}async findById(e){return await this.prisma.course.findFirst({where:{id:e},include:{coordinator:{omit:{passwordHash:!0}},instructors:{omit:{passwordHash:!0}}}})}async update({id:e,title:r,imageUrl:t,coordinatorId:i,email:n,instructorIds:s,scheduledAt:m,location:c,registrationLink:u,description:w}){s!==void 0&&await this.prisma.course.update({where:{id:e},data:{instructors:{set:[]}}}),await this.prisma.course.update({where:{id:e},data:{title:r,imageUrl:t,coordinatorId:i,email:n,scheduledAt:m,location:c,registrationLink:u,description:w,...s?.length>0&&{instructors:{connect:s.map(B=>({id:B}))}}}})}async deleteById(e){await this.prisma.course.delete({where:{id:e}})}async count({filter:{description:e,title:r,coordinator:t}}){let i={},n=[];return r&&n.push({title:{contains:r,mode:"insensitive"}}),e&&n.push({description:{contains:e,mode:"insensitive"}}),t&&n.push({coordinator:{name:{contains:t,mode:"insensitive"}}}),n.length>0&&(i.OR=n),await this.prisma.course.count({where:i})}};function kt(){return new ln(k)}function Gl(){return{createCourseController:new dn(kt(),O())}}function Ll(){return{findCoursesController:new Or(kt())}}function _l(){return{findCourseByIdController:new Br(kt())}}function Wl(){return{updateCourseController:new Nr(kt(),O())}}function Hl(){return{deleteCourseController:new qr(kt(),O())}}var yt=hC(),{authMiddleware:ur}=z();yt.post("/",(o,e,r)=>{ur.isAdmin(o,e,r)},G.single("image"),async(o,e)=>{let{createCourseController:r}=Gl();await r.handle(o,e)});yt.get("/",(o,e,r)=>{ur.isAdmin(o,e,r)},async(o,e)=>{let{findCoursesController:r}=Ll();await r.handle(o,e)});yt.get("/:id",(o,e,r)=>{ur.isAdmin(o,e,r)},async(o,e)=>{let{findCourseByIdController:r}=_l();await r.handle(o,e)});yt.put("/:id",(o,e,r)=>{ur.isAdmin(o,e,r)},G.single("image"),async(o,e)=>{let{updateCourseController:r}=Wl();await r.handle(o,e)});yt.delete("/:id",(o,e,r)=>{ur.isAdmin(o,e,r)},async(o,e)=>{let{deleteCourseController:r}=Hl();await r.handle(o,e)});import{Router as wC}from"express";import{extendZodWithOpenApi as RC}from"@asteasolutions/zod-to-openapi";import Ue from"zod";var IC=1,CC=9;RC(Ue);var bC=Ue.object({page:Ue.coerce.number().min(1).default(IC),limit:Ue.coerce.number().min(1).default(CC),code:Ue.string().optional(),title:Ue.string().optional(),description:Ue.string().optional(),notes:Ue.string().optional(),orderBy:Ue.enum(["asc","desc"]).default("desc")}),un=class{constructor(e){this.etpRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=bC.parse(e.query),s=i*t-i,[m,c]=await Promise.all([this.etpRepository.find({pagination:{offset:s,limit:i},filter:n}),this.etpRepository.count({filter:n})]),u=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:u,offset:s,limit:i,etps:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};var gn=class{constructor(e){this.prisma=e}async create(e){let{leaderId:r,deputyLeaderId:t,secretaryId:i,memberIds:n,...s}=e;await this.prisma.$transaction(async m=>{let c=await m.eTP.create({data:s});await m.eTPLeader.create({data:{etpId:c.id,researcherId:r}}),await m.eTPDeputy.create({data:{etpId:c.id,researcherId:t}}),await m.eTPSecretary.create({data:{etpId:c.id,researcherId:i}}),await m.eTP.update({where:{id:c.id},data:{members:{connect:n.map(u=>({id:u}))}}})})}async update(e){let{leaderId:r,deputyLeaderId:t,secretaryId:i,memberIds:n,...s}=e;await this.prisma.$transaction(async m=>{await m.eTP.update({where:{id:e.id},data:s}),await this.updateLeader(m,e.id,r),await this.updateDeputyLeader(m,e.id,t),await this.updateSecretary(m,e.id,i),await this.updateMembers(m,e.id,n)})}async updateLeader(e,r,t){t!==void 0&&(await e.eTPLeader.deleteMany({where:{etpId:r}}),t&&await e.eTPLeader.create({data:{etpId:r,researcherId:t}}))}async updateDeputyLeader(e,r,t){t!==void 0&&(await e.eTPDeputy.deleteMany({where:{etpId:r}}),t&&await e.eTPDeputy.create({data:{etpId:r,researcherId:t}}))}async updateSecretary(e,r,t){t!==void 0&&(await e.eTPSecretary.deleteMany({where:{etpId:r}}),t&&await e.eTPSecretary.create({data:{etpId:r,researcherId:t}}))}async updateMembers(e,r,t){t!==void 0&&await e.eTP.update({where:{id:r},data:{members:{set:t.map(i=>({id:i}))}}})}async deleteById(e){await this.prisma.eTP.delete({where:{id:e}})}async find({pagination:{offset:e,limit:r},filter:{code:t,title:i,description:n,notes:s,orderBy:m}}){let c={},u=[];return t&&u.push({code:{contains:t,mode:"insensitive"}}),i&&u.push({title:{contains:i,mode:"insensitive"}}),n&&u.push({description:{contains:n,mode:"insensitive"}}),s&&u.push({notes:{contains:s,mode:"insensitive"}}),u.length>0&&(c.OR=u),await this.prisma.eTP.findMany({where:c,include:{leader:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},deputyLeader:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},secretary:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},members:{include:{user:{omit:{passwordHash:!0}}}}},orderBy:{updatedAt:m},skip:e,take:r})}async findById(e){return await this.prisma.eTP.findFirst({where:{id:e},include:{leader:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},deputyLeader:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},secretary:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},members:{include:{user:{omit:{passwordHash:!0}}}}}})}async findByCode(e){return await this.prisma.eTP.findFirst({where:{code:e},include:{leader:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},deputyLeader:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},secretary:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},members:{include:{user:{omit:{passwordHash:!0}}}}}})}async count({filter:{code:e,title:r,description:t,notes:i}}){let n={},s=[];return e&&s.push({code:{contains:e,mode:"insensitive"}}),r&&s.push({title:{contains:r,mode:"insensitive"}}),t&&s.push({description:{contains:t,mode:"insensitive"}}),i&&s.push({notes:{contains:i,mode:"insensitive"}}),s.length>0&&(n.OR=s),await this.prisma.eTP.count({where:n})}};function Gt(){return new gn(k)}function zl(){return{createETPController:new kr(Gt())}}function Zl(){return{findETPsController:new un(Gt())}}function Vl(){return{findETPByIdController:new Lr(Gt())}}function Kl(){return{updateETPController:new Wr(Gt())}}function Yl(){return{deleteETPController:new Gr(Gt())}}var ft=wC(),{authMiddleware:_m}=z();ft.post("/",(o,e,r)=>{_m.authenticated(o,e,r)},async(o,e)=>{let{createETPController:r}=zl();await r.handle(o,e)});ft.get("/",async(o,e)=>{let{findETPsController:r}=Zl();await r.handle(o,e)});ft.get("/:id",async(o,e)=>{let{findETPByIdController:r}=Vl();await r.handle(o,e)});ft.put("/:id",(o,e,r)=>{_m.authenticated(o,e,r)},async(o,e)=>{let{updateETPController:r}=Kl();await r.handle(o,e)});ft.delete("/:id",(o,e,r)=>{_m.authenticated(o,e,r)},async(o,e)=>{let{deleteETPController:r}=Yl();await r.handle(o,e)});import{Router as SC}from"express";var yn=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.event.create({data:e})}async update(e){await this.prisma.event.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.event.delete({where:{id:e}})}async find({pagination:{offset:e,limit:r},filter:{title:t,status:i,format:n,orderBy:s}}){let m={},c=[];return i&&(m.status=i),n&&(m.format=n),t&&c.push({title:{contains:t,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.event.findMany({where:m,orderBy:s?{startDate:s}:{startDate:"desc"},skip:e,take:r})}async findById(e){return await this.prisma.event.findFirst({where:{id:e}})}async count({filter:{title:e,status:r,format:t}}){let i={},n=[];return r&&(i.status=r),t&&(i.format=t),e&&n.push({title:{contains:e,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.event.count({where:i})}};function Lt(){return new yn(k)}function Xl(){return{createEventController:new Zr(Lt(),O())}}function $l(){return{findEventsController:new Xr(Lt())}}function Jl(){return{findEventByIdController:new Kr(Lt())}}function Ql(){return{updateEventController:new $r(Lt(),O())}}function eu(){return{deleteEventController:new Vr(Lt())}}var ht=SC(),{authMiddleware:Wm}=z();ht.post("/",(o,e,r)=>{Wm.authenticated(o,e,r)},G.single("image"),async(o,e)=>{let{createEventController:r}=Xl();await r.handle(o,e)});ht.get("/",async(o,e)=>{let{findEventsController:r}=$l();await r.handle(o,e)});ht.get("/:id",async(o,e)=>{let{findEventByIdController:r}=Jl();await r.handle(o,e)});ht.put("/:id",(o,e,r)=>{Wm.authenticated(o,e,r)},G.single("image"),async(o,e)=>{let{updateEventController:r}=Ql();await r.handle(o,e)});ht.delete("/:id",(o,e,r)=>{Wm.authenticated(o,e,r)},async(o,e)=>{let{deleteEventController:r}=eu();await r.handle(o,e)});import{Router as vC}from"express";var fn=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.inMemoriam.create({data:e})}async update(e){await this.prisma.inMemoriam.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.inMemoriam.delete({where:{id:e}})}async find({pagination:{offset:e,limit:r},filter:{name:t,biography:i,role:n,orderBy:s}}){let m={},c=[];return n&&(m.role=n),t&&c.push({name:{contains:t,mode:"insensitive"}}),i&&c.push({biography:{contains:i,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.inMemoriam.findMany({where:m,orderBy:{updatedAt:s},skip:e,take:r})}async findById(e){return await this.prisma.inMemoriam.findFirst({where:{id:e}})}async findByRole(e){return await this.prisma.inMemoriam.findMany({where:{role:e}})}async count({filter:{name:e,biography:r,role:t}}){let i={},n=[];return t&&(i.role=t),e&&n.push({name:{contains:e,mode:"insensitive"}}),r&&n.push({biography:{contains:r,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.inMemoriam.count({where:i})}};function Rt(){return new fn(k)}function tu(){return{createInMemoriamController:new Jr(Rt(),O())}}function ru(){return{findInMemoriamsController:new oo(Rt())}}function ou(){return{findInMemoriamByIdController:new eo(Rt())}}function iu(){return{findInMemoriamByRoleController:new ro(Rt())}}function nu(){return{updateInMemoriamController:new io(Rt(),O())}}function su(){return{deleteInMemoriamController:new Qr(Rt(),O())}}var rt=vC(),{authMiddleware:Hm}=z();rt.post("/",(o,e,r)=>{Hm.authenticated(o,e,r)},G.single("photo"),async(o,e)=>{let{createInMemoriamController:r}=tu();await r.handle(o,e)});rt.get("/",async(o,e)=>{let{findInMemoriamsController:r}=ru();await r.handle(o,e)});rt.get("/:id",async(o,e)=>{let{findInMemoriamByIdController:r}=ou();await r.handle(o,e)});rt.get("/role/:role",async(o,e)=>{let{findInMemoriamByRoleController:r}=iu();await r.handle(o,e)});rt.put("/:id",(o,e,r)=>{Hm.authenticated(o,e,r)},G.single("photo"),async(o,e)=>{let{updateInMemoriamController:r}=nu();await r.handle(o,e)});rt.delete("/:id",(o,e,r)=>{Hm.authenticated(o,e,r)},async(o,e)=>{let{deleteInMemoriamController:r}=su();await r.handle(o,e)});import{Router as EC}from"express";var zm=EC();zm.get("/",(o,e)=>{e.status(200).json({message:"Rede CT"})});import{Router as TC}from"express";var hn=class{constructor(e){this.prisma=e}async create(e){await this.prisma.internationalScientificCongress.create({data:e})}async update(e){await this.prisma.internationalScientificCongress.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.internationalScientificCongress.delete({where:{id:e}})}async find({pagination:{offset:e,limit:r},filter:{title:t,edition:i,location:n,orderBy:s}}){let m={},c=[];return i&&c.push({edition:{equals:i}}),t&&c.push({title:{contains:t,mode:"insensitive"}}),n&&c.push({location:{contains:n,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.internationalScientificCongress.findMany({where:m,include:{partners:!0,galleries:!0},orderBy:s?{startDate:s}:{startDate:"desc"},skip:e,take:r})}async findById(e){return await this.prisma.internationalScientificCongress.findFirst({where:{id:e},include:{partners:!0,galleries:!0}})}async findByEdition(e){return await this.prisma.internationalScientificCongress.findMany({where:{edition:e},include:{partners:!0,galleries:!0}})}async count({filter:{title:e,edition:r,location:t}}){let i={},n=[];return r&&n.push({edition:{equals:r}}),e&&n.push({title:{contains:e,mode:"insensitive"}}),t&&n.push({location:{contains:t,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.internationalScientificCongress.count({where:i})}};function be(){return new hn(k)}function au(){return{createInternationalScientificCongressController:new fo(be())}}function mu(){return{findInternationalScientificCongressesController:new bo(be())}}function cu(){return{findInternationalScientificCongressByIdController:new Io(be())}}function pu(){return{findInternationalScientificCongressByEditionController:new Ro(be())}}function du(){return{updateInternationalScientificCongressController:new wo(be())}}function lu(){return{deleteInternationalScientificCongressController:new ho(be())}}import{extendZodWithOpenApi as jC}from"@asteasolutions/zod-to-openapi";import Zm from"zod";jC(Zm);var xC=Zm.object({id:Zm.uuid()}),Rn=class{constructor(e){this.internationalScientificCongressGalleryRepository=e}async handle(e,r){try{let{id:t}=xC.parse({id:e.params.id}),i=await this.internationalScientificCongressGalleryRepository.findById(t);if(!i)throw new p("A imagem da galeria n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var In=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.internationalScientificCongressGalleryItem.create({data:e})}async update(e){await this.prisma.internationalScientificCongressGalleryItem.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.internationalScientificCongressGalleryItem.delete({where:{id:e}})}async findByCongressId(e){let{pagination:r,filter:t}=e;return await this.prisma.internationalScientificCongressGalleryItem.findMany({where:{congressId:t.congressId,...t.caption&&{caption:{contains:t.caption,mode:"insensitive"}}},skip:r.offset,take:r.limit})}async findById(e){return await this.prisma.internationalScientificCongressGalleryItem.findFirst({where:{id:e}})}async count(e){let{filter:r}=e;return await this.prisma.internationalScientificCongressGalleryItem.count({where:{congressId:r.congressId,...r.caption&&{caption:{contains:r.caption,mode:"insensitive"}}}})}};function _t(){return new In(k)}function uu(){return{createInternationalScientificCongressGalleryController:new no(_t(),be(),O())}}function gu(){return{findInternationalScientificCongressGalleriesByCongressIdController:new mo(_t())}}function yu(){return{findInternationalScientificCongressGalleryByIdController:new Rn(_t())}}function fu(){return{updateInternationalScientificCongressGalleryController:new co(_t(),O())}}function hu(){return{deleteInternationalScientificCongressGalleryController:new so(_t())}}import{extendZodWithOpenApi as PC}from"@asteasolutions/zod-to-openapi";import Vm from"zod";PC(Vm);var MC=Vm.object({id:Vm.uuid()}),Cn=class{constructor(e){this.internationalScientificCongressPartnerRepository=e}async handle(e,r){try{let{id:t}=MC.parse({id:e.params.id}),i=await this.internationalScientificCongressPartnerRepository.findById(t);if(!i)throw new p("O parceiro n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var bn=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.internationalScientificCongressPartner.create({data:e})}async update(e){await this.prisma.internationalScientificCongressPartner.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.internationalScientificCongressPartner.delete({where:{id:e}})}async findByCongressId(e){return await this.prisma.internationalScientificCongressPartner.findMany({where:{congressId:e.filter.congressId,name:e.filter.name?{contains:e.filter.name,mode:"insensitive"}:void 0},skip:e.pagination?.offset,take:e.pagination?.limit})}async findById(e){return await this.prisma.internationalScientificCongressPartner.findFirst({where:{id:e}})}async count(e){return await this.prisma.internationalScientificCongressPartner.count({where:{congressId:e.filter.congressId,name:e.filter.name?{contains:e.filter.name,mode:"insensitive"}:void 0}})}};function Wt(){return new bn(k)}function Ru(){return{createInternationalScientificCongressPartnerController:new po(Wt(),be(),O())}}function Iu(){return{findInternationalScientificCongressPartnersByCongressIdController:new go(Wt())}}function Cu(){return{findInternationalScientificCongressPartnerByIdController:new Cn(Wt())}}function bu(){return{updateInternationalScientificCongressPartnerController:new yo(Wt(),O())}}function wu(){return{deleteInternationalScientificCongressPartnerController:new lo(Wt())}}var ee=TC(),{authMiddleware:qe}=z();ee.post("/",(o,e,r)=>{qe.authenticated(o,e,r)},async(o,e)=>{let{createInternationalScientificCongressController:r}=au();await r.handle(o,e)});ee.get("/",async(o,e)=>{let{findInternationalScientificCongressesController:r}=mu();await r.handle(o,e)});ee.get("/:id",async(o,e)=>{let{findInternationalScientificCongressByIdController:r}=cu();await r.handle(o,e)});ee.get("/edition/:edition",async(o,e)=>{let{findInternationalScientificCongressByEditionController:r}=pu();await r.handle(o,e)});ee.put("/:id",(o,e,r)=>{qe.authenticated(o,e,r)},async(o,e)=>{let{updateInternationalScientificCongressController:r}=du();await r.handle(o,e)});ee.delete("/:id",(o,e,r)=>{qe.authenticated(o,e,r)},async(o,e)=>{let{deleteInternationalScientificCongressController:r}=lu();await r.handle(o,e)});ee.post("/:congressId/gallery",(o,e,r)=>{qe.authenticated(o,e,r)},G.single("image"),async(o,e)=>{let{createInternationalScientificCongressGalleryController:r}=uu();await r.handle(o,e)});ee.get("/:congressId/gallery",async(o,e)=>{let{findInternationalScientificCongressGalleriesByCongressIdController:r}=gu();await r.handle(o,e)});ee.get("/gallery/:id",async(o,e)=>{let{findInternationalScientificCongressGalleryByIdController:r}=yu();await r.handle(o,e)});ee.put("/gallery/:id",(o,e,r)=>{qe.authenticated(o,e,r)},G.single("image"),async(o,e)=>{let{updateInternationalScientificCongressGalleryController:r}=fu();await r.handle(o,e)});ee.delete("/gallery/:id",(o,e,r)=>{qe.authenticated(o,e,r)},async(o,e)=>{let{deleteInternationalScientificCongressGalleryController:r}=hu();await r.handle(o,e)});ee.post("/:congressId/partner",(o,e,r)=>{qe.authenticated(o,e,r)},G.single("logo"),async(o,e)=>{let{createInternationalScientificCongressPartnerController:r}=Ru();await r.handle(o,e)});ee.get("/:congressId/partner",async(o,e)=>{let{findInternationalScientificCongressPartnersByCongressIdController:r}=Iu();await r.handle(o,e)});ee.get("/partner/:id",async(o,e)=>{let{findInternationalScientificCongressPartnerByIdController:r}=Cu();await r.handle(o,e)});ee.put("/partner/:id",(o,e,r)=>{qe.authenticated(o,e,r)},G.single("logo"),async(o,e)=>{let{updateInternationalScientificCongressPartnerController:r}=bu();await r.handle(o,e)});ee.delete("/partner/:id",(o,e,r)=>{qe.authenticated(o,e,r)},async(o,e)=>{let{deleteInternationalScientificCongressPartnerController:r}=wu();await r.handle(o,e)});import{Router as FC}from"express";import{extendZodWithOpenApi as AC}from"@asteasolutions/zod-to-openapi";import wn from"zod";AC(wn);var DC=wn.object({role:wn.string().optional(),orderBy:wn.enum(["asc","desc"]).optional()}),Sn=class{constructor(e){this.legitimatorCommitteeMemberRepository=e}async handle(e,r){try{let t=DC.parse(e.query),i=await this.legitimatorCommitteeMemberRepository.find({filter:t});r.status(200).json({members:i})}catch(t){if(t instanceof Error)throw new a(t.message)}}};var vn=class{constructor(e){this.prisma=e}async create(e){await this.prisma.legitimatorCommitteeMember.create({data:{...e,order:e.order??0}})}async update(e){let{id:r,...t}=e;await this.prisma.legitimatorCommitteeMember.update({where:{id:r},data:t})}async deleteById(e){await this.prisma.legitimatorCommitteeMember.delete({where:{id:e}})}async find({filter:{role:e,orderBy:r}}){let t={};return e&&(t.role={contains:e,mode:"insensitive"}),await this.prisma.legitimatorCommitteeMember.findMany({where:t,include:{user:{omit:{passwordHash:!0}}},orderBy:r?[{order:"asc"},{updatedAt:r}]:[{order:"asc"},{updatedAt:"desc"}]})}async findById(e){return await this.prisma.legitimatorCommitteeMember.findFirst({where:{id:e},include:{user:{omit:{passwordHash:!0}}}})}async count({filter:{role:e}}){let r={};return e&&(r.role={contains:e,mode:"insensitive"}),await this.prisma.legitimatorCommitteeMember.count({where:r})}};function Ht(){return new vn(k)}function Su(){return{createLegitimatorCommitteeMemberController:new So(Ht())}}function vu(){return{findLegitimatorCommitteeMembersController:new Sn(Ht())}}function Eu(){return{findLegitimatorCommitteeMemberByIdController:new Eo(Ht())}}function ju(){return{updateLegitimatorCommitteeMemberController:new xo(Ht())}}function xu(){return{deleteLegitimatorCommitteeMemberController:new vo(Ht())}}var It=FC(),{authMiddleware:Km}=z();It.post("/",(o,e,r)=>{Km.authenticated(o,e,r)},async(o,e)=>{let{createLegitimatorCommitteeMemberController:r}=Su();await r.handle(o,e)});It.get("/",async(o,e)=>{let{findLegitimatorCommitteeMembersController:r}=vu();await r.handle(o,e)});It.get("/:id",async(o,e)=>{let{findLegitimatorCommitteeMemberByIdController:r}=Eu();await r.handle(o,e)});It.put("/:id",(o,e,r)=>{Km.authenticated(o,e,r)},async(o,e)=>{let{updateLegitimatorCommitteeMemberController:r}=ju();await r.handle(o,e)});It.delete("/:id",(o,e,r)=>{Km.authenticated(o,e,r)},async(o,e)=>{let{deleteLegitimatorCommitteeMemberController:r}=xu();await r.handle(o,e)});import{Router as BC}from"express";import{extendZodWithOpenApi as UC}from"@asteasolutions/zod-to-openapi";import gr from"zod";UC(gr);var qC=gr.object({name:gr.string().optional(),description:gr.string().optional(),orderBy:gr.enum(["asc","desc"]).default("desc")}),En=class{constructor(e){this.managementTeamRepository=e}async handle(e,r){try{let t=qC.parse(e.query),i=await this.managementTeamRepository.find({filter:t});r.status(200).json({teams:i})}catch(t){if(t instanceof Error)throw new a(t.message)}}};var jn=class{constructor(e){this.prisma=e}async create(e){let{members:r,...t}=e;await this.prisma.$transaction(async i=>{let n=await i.managementTeam.create({data:t});return await i.managementTeamMember.createMany({data:r.map(({userId:s,role:m,order:c})=>({teamId:n.id,userId:s,role:m,order:c??0}))}),n})}async update(e){let{members:r,...t}=e;await this.prisma.$transaction(async i=>{let n=await i.managementTeam.update({where:{id:e.id},data:t});return r!==void 0&&(await i.managementTeamMember.deleteMany({where:{teamId:e.id}}),r.length>0&&await i.managementTeamMember.createMany({data:r.map(({userId:s,role:m,order:c})=>({teamId:e.id,userId:s,role:m,order:c??0}))})),n})}async deleteById(e){await this.prisma.managementTeam.delete({where:{id:e}})}async find({filter:{name:e,description:r,orderBy:t}}){let i={},n=[];return e&&n.push({name:{contains:e,mode:"insensitive"}}),r&&n.push({description:{contains:r,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.managementTeam.findMany({where:i,include:{members:{include:{user:{omit:{passwordHash:!0}}},orderBy:{order:"asc"}}},orderBy:{updatedAt:t}})}async findById(e){return await this.prisma.managementTeam.findFirst({where:{id:e},include:{members:{include:{user:{omit:{passwordHash:!0}}},orderBy:{order:"asc"}}}})}async findByName(e){return await this.prisma.managementTeam.findFirst({where:{name:e},include:{members:{include:{user:{omit:{passwordHash:!0}}},orderBy:{order:"asc"}}}})}async count({filter:{name:e,description:r}}){let t={},i=[];return e&&i.push({name:{contains:e,mode:"insensitive"}}),r&&i.push({description:{contains:r,mode:"insensitive"}}),i.length>0&&(t.OR=i),await this.prisma.managementTeam.count({where:t})}};function zt(){return new jn(k)}function Pu(){return{createManagementTeamController:new Po(zt())}}function Mu(){return{findManagementTeamsController:new En(zt())}}function Tu(){return{findManagementTeamByIdController:new To(zt())}}function Au(){return{updateManagementTeamController:new Do(zt())}}function Du(){return{deleteManagementTeamController:new Mo(zt())}}var Ct=BC(),{authMiddleware:Ym}=z();Ct.post("/",(o,e,r)=>{Ym.authenticated(o,e,r)},async(o,e)=>{let{createManagementTeamController:r}=Pu();await r.handle(o,e)});Ct.get("/",async(o,e)=>{let{findManagementTeamsController:r}=Mu();await r.handle(o,e)});Ct.get("/:id",async(o,e)=>{let{findManagementTeamByIdController:r}=Tu();await r.handle(o,e)});Ct.put("/:id",(o,e,r)=>{Ym.authenticated(o,e,r)},async(o,e)=>{let{updateManagementTeamController:r}=Au();await r.handle(o,e)});Ct.delete("/:id",(o,e,r)=>{Ym.authenticated(o,e,r)},async(o,e)=>{let{deleteManagementTeamController:r}=Du();await r.handle(o,e)});import{Router as kC}from"express";var xn=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.meeting.create({data:e})}async update(e){await this.prisma.meeting.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.meeting.delete({where:{id:e}})}async find({pagination:{offset:e,limit:r},filter:{title:t,format:i,status:n,orderBy:s}}){let m={},c=[];return i&&(m.format=i),n&&(m.status=n),t&&c.push({title:{contains:t,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.meeting.findMany({where:m,include:{minutes:!0},orderBy:s?{scheduledAt:s}:{scheduledAt:"desc"},skip:e,take:r})}async findById(e){return await this.prisma.meeting.findFirst({where:{id:e},include:{minutes:!0}})}async findByStatus(e){return await this.prisma.meeting.findMany({where:{status:e},include:{minutes:!0}})}async count({filter:{title:e,format:r,status:t}}){let i={},n=[];return r&&(i.format=r),t&&(i.status=t),e&&n.push({title:{contains:e,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.meeting.count({where:i})}};function Be(){return new xn(k)}function Fu(){return{createMeetingController:new Oo(Be())}}function Uu(){return{findMeetingsController:new _o(Be())}}function qu(){return{findMeetingByIdController:new ko(Be())}}function Bu(){return{findMeetingByStatusController:new Lo(Be())}}function Ou(){return{updateMeetingController:new Wo(Be())}}function Nu(){return{deleteMeetingController:new No(Be())}}import{extendZodWithOpenApi as OC}from"@asteasolutions/zod-to-openapi";import Xm from"zod";OC(Xm);var NC=Xm.object({meetingId:Xm.uuid()}),Pn=class{constructor(e,r){this.meetingMinuteRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{meetingId:t}=NC.parse({meetingId:e.params.meetingId}),i=await this.meetingMinuteRepository.findByMeetingId(t);if(!i)throw new p("A ata n\xE3o existe para esta reuni\xE3o.");return i.documentUrl&&await this.firebaseStorageService.deleteFile({fileUrl:i.documentUrl}),await this.meetingMinuteRepository.deleteByMeetingId(i.id),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Mn=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.meetingMinute.create({data:e,include:{meeting:!0}})}async update(e){await this.prisma.meetingMinute.update({where:{id:e.id},data:e})}async deleteByMeetingId(e){await this.prisma.meetingMinute.delete({where:{id:e}})}async findByMeetingId(e){return await this.prisma.meetingMinute.findFirst({where:{meetingId:e},include:{meeting:!0}})}};function yr(){return new Mn(k)}function ku(){return{createMeetingMinuteController:new Fo(yr(),Be(),O())}}function Gu(){return{findMeetingMinuteByMeetingIdController:new Uo(yr())}}function Lu(){return{updateMeetingMinuteByMeetingIdController:new qo(yr(),O())}}function _u(){return{deleteMeetingMinuteByMeetingIdController:new Pn(yr(),O())}}var fe=kC(),{authMiddleware:Zt}=z();fe.post("/",(o,e,r)=>{Zt.authenticated(o,e,r)},async(o,e)=>{let{createMeetingController:r}=Fu();await r.handle(o,e)});fe.get("/",async(o,e)=>{let{findMeetingsController:r}=Uu();await r.handle(o,e)});fe.get("/:id",async(o,e)=>{let{findMeetingByIdController:r}=qu();await r.handle(o,e)});fe.get("/status/:status",async(o,e)=>{let{findMeetingByStatusController:r}=Bu();await r.handle(o,e)});fe.put("/:id",(o,e,r)=>{Zt.authenticated(o,e,r)},async(o,e)=>{let{updateMeetingController:r}=Ou();await r.handle(o,e)});fe.delete("/:id",(o,e,r)=>{Zt.authenticated(o,e,r)},async(o,e)=>{let{deleteMeetingController:r}=Nu();await r.handle(o,e)});fe.post("/:meetingId/minute",(o,e,r)=>{Zt.authenticated(o,e,r)},G.single("document"),async(o,e)=>{let{createMeetingMinuteController:r}=ku();await r.handle(o,e)});fe.get("/:meetingId/minute",async(o,e)=>{let{findMeetingMinuteByMeetingIdController:r}=Gu();await r.handle(o,e)});fe.put("/:meetingId/minute",(o,e,r)=>{Zt.authenticated(o,e,r)},G.single("document"),async(o,e)=>{let{updateMeetingMinuteByMeetingIdController:r}=Lu();await r.handle(o,e)});fe.delete("/:meetingId/minute",(o,e,r)=>{Zt.authenticated(o,e,r)},async(o,e)=>{let{deleteMeetingMinuteByMeetingIdController:r}=_u();await r.handle(o,e)});import{Router as VC}from"express";import{extendZodWithOpenApi as GC}from"@asteasolutions/zod-to-openapi";import $m from"zod";GC($m);var LC=$m.object({id:$m.string()}),Tn=class{constructor(e,r){this.newsRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=LC.parse(e.params),i=e.user.id,n=await this.newsRepository.findById(t);if(!n)throw new p("Not\xEDcia n\xE3o encontrada.");if(n.author.id!==i)throw new de("Sem permiss\xE3o.");await Promise.all([this.newsRepository.delete(t),this.firebaseStorageService.deleteFile({fileUrl:n.imageUrl})]),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as _C}from"@asteasolutions/zod-to-openapi";import Vt from"zod";var WC=5,Wu=1024,HC=Wu*Wu,zC=WC*HC;_C(Vt);var ZC=Vt.object({id:Vt.string(),title:Vt.string().min(1),content:Vt.string().min(1),image:Vt.any().optional().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=zC,"A imagem deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.")}),An=class{constructor(e,r){this.newsRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,title:i,content:n,image:s}=ZC.parse({id:e.params.id,image:e.file,...e.body}),m=await this.newsRepository.findById(t);if(!m)throw new p("Not\xEDcia n\xE3o encontrada.");let c=e.user.id;if(m.author.id!==c)throw new de("Sem permiss\xE3o.");let u=m.imageUrl||"";s&&m.imageUrl&&(u=await this.firebaseStorageService.updateFile({file:s,folder:T.NEWS,id:t,fileUrl:m.imageUrl}));let w=await this.newsRepository.update({id:t,title:i,content:n,imageUrl:u});r.status(200).json(w)}catch(t){if(t instanceof Error)throw new a(t.message)}}};function Hu(){return{createNewsController:new Ho(De(),O())}}function zu(){return{findAllNewsController:new Ko(De())}}function Zu(){return{findNewsByIdController:new Vo(De())}}function Vu(){return{findNewsByAuthorIdController:new zo(De())}}function Ku(){return{updateNewsController:new An(De(),O())}}function Yu(){return{deleteNewsController:new Tn(De(),O())}}var ot=VC(),{authMiddleware:Jm}=z();ot.post("/",(o,e,r)=>{Jm.authenticated(o,e,r)},G.single("image"),async(o,e)=>{let{createNewsController:r}=Hu();await r.handle(o,e)});ot.get("/",async(o,e)=>{let{findAllNewsController:r}=zu();await r.handle(o,e)});ot.get("/:id",async(o,e)=>{let{findNewsByIdController:r}=Zu();await r.handle(o,e)});ot.get("/author/:authorId",async(o,e)=>{let{findNewsByAuthorIdController:r}=Vu();await r.handle(o,e)});ot.put("/:id",(o,e,r)=>{Jm.authenticated(o,e,r)},G.single("image"),async(o,e)=>{let{updateNewsController:r}=Ku();await r.handle(o,e)});ot.delete("/:id",(o,e,r)=>{Jm.authenticated(o,e,r)},async(o,e)=>{let{deleteNewsController:r}=Yu();await r.handle(o,e)});import{Router as KC}from"express";var Dn=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.partner.create({data:e})}async update(e){await this.prisma.partner.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.partner.delete({where:{id:e}})}async find({pagination:e,filter:{name:r,description:t,category:i,isActive:n,orderBy:s}}){let m={},c=[];return n!==void 0&&(m.isActive=n),r&&c.push({name:{contains:r,mode:"insensitive"}}),t&&c.push({description:{contains:t,mode:"insensitive"}}),i&&c.push({category:{contains:i,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.partner.findMany({where:m,orderBy:s?{updatedAt:s}:{updatedAt:"desc"},...e&&{skip:e.offset,take:e.limit}})}async findById(e){return await this.prisma.partner.findFirst({where:{id:e}})}async count({filter:{name:e,description:r,category:t,isActive:i}}){let n={},s=[];return i!==void 0&&(n.isActive=i),e&&s.push({name:{contains:e,mode:"insensitive"}}),r&&s.push({description:{contains:r,mode:"insensitive"}}),t&&s.push({category:{contains:t,mode:"insensitive"}}),s.length>0&&(n.OR=s),await this.prisma.partner.count({where:n})}};function Kt(){return new Dn(k)}function Xu(){return{createPartnerController:new Yo(Kt(),O())}}function $u(){return{findPartnersController:new Qo(Kt())}}function Ju(){return{findPartnerByIdController:new $o(Kt())}}function Qu(){return{updatePartnerController:new ei(Kt(),O())}}function eg(){return{deletePartnerController:new Xo(Kt(),O())}}var bt=KC(),{authMiddleware:Qm}=z();bt.post("/",(o,e,r)=>{Qm.authenticated(o,e,r)},G.single("logo"),async(o,e)=>{let{createPartnerController:r}=Xu();await r.handle(o,e)});bt.get("/",async(o,e)=>{let{findPartnersController:r}=$u();await r.handle(o,e)});bt.get("/:id",async(o,e)=>{let{findPartnerByIdController:r}=Ju();await r.handle(o,e)});bt.put("/:id",(o,e,r)=>{Qm.authenticated(o,e,r)},G.single("logo"),async(o,e)=>{let{updatePartnerController:r}=Qu();await r.handle(o,e)});bt.delete("/:id",(o,e,r)=>{Qm.authenticated(o,e,r)},async(o,e)=>{let{deletePartnerController:r}=eg();await r.handle(o,e)});import{Router as YC}from"express";function tg(){return{createPendencyController:new ti(me(),tt(),O())}}function rg(){return{findPendenciesController:new ii(tt())}}function og(){return{findPendencyByIdController:new ni(tt())}}function ig(){return{updatePendencyController:new si(tt(),O())}}function ng(){return{deletePendencyController:new oi(tt(),O())}}var wt=YC(),{authMiddleware:fr}=z();wt.post("/:user_id",(o,e,r)=>{fr.isAdmin(o,e,r)},G.single("document"),async(o,e)=>{let{createPendencyController:r}=tg();await r.handle(o,e)});wt.get("/",(o,e,r)=>{fr.isAdmin(o,e,r)},async(o,e)=>{let{findPendenciesController:r}=rg();await r.handle(o,e)});wt.get("/:pendency_id",(o,e,r)=>{fr.isAdmin(o,e,r)},async(o,e)=>{let{findPendencyByIdController:r}=og();await r.handle(o,e)});wt.put("/:pendency_id",(o,e,r)=>{fr.isAdmin(o,e,r)},G.single("document"),async(o,e)=>{let{updatePendencyController:r}=ig();await r.handle(o,e)});wt.delete("/:pendency_id",(o,e,r)=>{fr.isAdmin(o,e,r)},async(o,e)=>{let{deletePendencyController:r}=ng();await r.handle(o,e)});import{Router as tb}from"express";import{extendZodWithOpenApi as XC}from"@asteasolutions/zod-to-openapi";import Oe from"zod";var $C=5,sg=1024,JC=sg*sg,QC=$C*JC;XC(Oe);var eb=Oe.object({title:Oe.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),description:Oe.string().optional(),startDate:Oe.coerce.date(),endDate:Oe.coerce.date(),contact:Oe.string().min(1,"Contato \xE9 obrigat\xF3rio."),registrationLink:Oe.url().optional(),image:Oe.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=QC,"A imagem deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.")}),Fn=class{constructor(e,r){this.postGraduateProgramRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{title:t,description:i,startDate:n,endDate:s,contact:m,registrationLink:c,image:u}=eb.parse({...e.body,image:e.file}),w=await this.postGraduateProgramRepository.create({title:t,description:i,startDate:n,endDate:s,contact:m,registrationLink:c||void 0}),B=await this.firebaseStorageService.uploadFile({file:u,folder:T.POST_GRADUATE_PROGRAM,id:w.id});return await this.postGraduateProgramRepository.update({id:w.id,imageUrl:B}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Un=class{constructor(e){this.prisma=e}async create({title:e,imageUrl:r,description:t,startDate:i,endDate:n,contact:s,registrationLink:m}){return await this.prisma.postGraduateProgram.create({data:{title:e,imageUrl:r,description:t,startDate:i,endDate:n,contact:s,registrationLink:m}})}async find({pagination:{offset:e,limit:r},filter:{description:t,orderBy:i,title:n,contact:s}}){let m={},c=[];return n&&c.push({title:{contains:n,mode:"insensitive"}}),t&&c.push({description:{contains:t,mode:"insensitive"}}),s&&c.push({contact:{contains:s,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.postGraduateProgram.findMany({where:m,orderBy:{updatedAt:i},skip:e,take:r})}async findById(e){return await this.prisma.postGraduateProgram.findFirst({where:{id:e}})}async update({id:e,title:r,imageUrl:t,description:i,startDate:n,endDate:s,contact:m,registrationLink:c}){await this.prisma.postGraduateProgram.update({where:{id:e},data:{title:r,imageUrl:t,description:i,startDate:n,endDate:s,contact:m,registrationLink:c}})}async deleteById(e){await this.prisma.postGraduateProgram.delete({where:{id:e}})}async count({filter:{description:e,title:r,contact:t}}){let i={},n=[];return r&&n.push({title:{contains:r,mode:"insensitive"}}),e&&n.push({description:{contains:e,mode:"insensitive"}}),t&&n.push({contact:{contains:t,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.postGraduateProgram.count({where:i})}};function Yt(){return new Un(k)}function ag(){return{createPostGraduateProgramController:new Fn(Yt(),O())}}function mg(){return{findPostGraduateProgramsController:new pi(Yt())}}function cg(){return{findPostGraduateProgramByIdController:new ci(Yt())}}function pg(){return{updatePostGraduateProgramController:new di(Yt(),O())}}function dg(){return{deletePostGraduateProgramController:new mi(Yt(),O())}}var St=tb(),{authMiddleware:hr}=z();St.post("/",(o,e,r)=>{hr.isAdmin(o,e,r)},G.single("image"),async(o,e)=>{let{createPostGraduateProgramController:r}=ag();await r.handle(o,e)});St.get("/",(o,e,r)=>{hr.isAdmin(o,e,r)},async(o,e)=>{let{findPostGraduateProgramsController:r}=mg();await r.handle(o,e)});St.get("/:id",(o,e,r)=>{hr.isAdmin(o,e,r)},async(o,e)=>{let{findPostGraduateProgramByIdController:r}=cg();await r.handle(o,e)});St.put("/:id",(o,e,r)=>{hr.isAdmin(o,e,r)},G.single("image"),async(o,e)=>{let{updatePostGraduateProgramController:r}=pg();await r.handle(o,e)});St.delete("/:id",(o,e,r)=>{hr.isAdmin(o,e,r)},async(o,e)=>{let{deletePostGraduateProgramController:r}=dg();await r.handle(o,e)});import{Router as rb}from"express";var qn=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.regiment.create({data:e})}async update(e){await this.prisma.regiment.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.regiment.delete({where:{id:e}})}async find({pagination:{offset:e,limit:r},filter:{title:t,status:i,orderBy:n}}){let s={},m=[];return i&&(s.status=i),t&&m.push({title:{contains:t,mode:"insensitive"}}),m.length>0&&(s.OR=m),await this.prisma.regiment.findMany({where:s,orderBy:n?{updatedAt:n}:{updatedAt:"desc"},skip:e,take:r})}async findById(e){return await this.prisma.regiment.findFirst({where:{id:e}})}async findByStatus(e){return await this.prisma.regiment.findMany({where:{status:e}})}async count({filter:{title:e,status:r}}){let t={},i=[];return r&&(t.status=r),e&&i.push({title:{contains:e,mode:"insensitive"}}),i.length>0&&(t.OR=i),await this.prisma.regiment.count({where:t})}};function vt(){return new qn(k)}function lg(){return{createRegimentController:new li(vt(),O())}}function ug(){return{findRegimentsController:new hi(vt())}}function gg(){return{findRegimentByIdController:new gi(vt())}}function yg(){return{findRegimentByStatusController:new fi(vt())}}function fg(){return{updateRegimentController:new Ri(vt(),O())}}function hg(){return{deleteRegimentController:new ui(vt(),O())}}var it=rb(),{authMiddleware:ec}=z();it.post("/",(o,e,r)=>{ec.authenticated(o,e,r)},G.single("document"),async(o,e)=>{let{createRegimentController:r}=lg();await r.handle(o,e)});it.get("/",async(o,e)=>{let{findRegimentsController:r}=ug();await r.handle(o,e)});it.get("/:id",async(o,e)=>{let{findRegimentByIdController:r}=gg();await r.handle(o,e)});it.get("/status/:status",async(o,e)=>{let{findRegimentByStatusController:r}=yg();await r.handle(o,e)});it.put("/:id",(o,e,r)=>{ec.authenticated(o,e,r)},G.single("document"),async(o,e)=>{let{updateRegimentController:r}=fg();await r.handle(o,e)});it.delete("/:id",(o,e,r)=>{ec.authenticated(o,e,r)},async(o,e)=>{let{deleteRegimentController:r}=hg();await r.handle(o,e)});import{Router as ab}from"express";import{extendZodWithOpenApi as ob}from"@asteasolutions/zod-to-openapi";import tc from"zod";ob(tc);var ib=tc.object({id:tc.string().uuid("ID inv\xE1lido")}),Bn=class{constructor(e){this.regionalCongressGalleryRepository=e}async handle(e,r){try{let{id:t}=ib.parse(e.params),i=await this.regionalCongressGalleryRepository.findById(t);if(!i)throw new p("Item de galeria n\xE3o encontrado");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var On=class{constructor(e){this.prisma=e}async create(e){await this.prisma.regionalCongress.create({data:e})}async update(e){await this.prisma.regionalCongress.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.regionalCongress.delete({where:{id:e}})}async find({pagination:{offset:e,limit:r},filter:{title:t,edition:i,location:n,orderBy:s}}){let m={},c=[];return i&&c.push({edition:{equals:i}}),t&&c.push({title:{contains:t,mode:"insensitive"}}),n&&c.push({location:{contains:n,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.regionalCongress.findMany({where:m,include:{regionalCongressPartners:!0,regionalCongressGalleryItems:!0},orderBy:s?{startDate:s}:{startDate:"desc"},skip:e,take:r})}async findById(e){return await this.prisma.regionalCongress.findFirst({where:{id:e},include:{regionalCongressPartners:!0,regionalCongressGalleryItems:!0}})}async findByEdition(e){return await this.prisma.regionalCongress.findMany({where:{edition:e},include:{regionalCongressPartners:!0,regionalCongressGalleryItems:!0}})}async count({filter:{title:e,edition:r,location:t}}){let i={},n=[];return r&&n.push({edition:{equals:r}}),e&&n.push({title:{contains:e,mode:"insensitive"}}),t&&n.push({location:{contains:t,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.regionalCongress.count({where:i})}};function we(){return new On(k)}var Nn=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.regionalCongressGalleryItem.create({data:e})}async update(e){await this.prisma.regionalCongressGalleryItem.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.regionalCongressGalleryItem.delete({where:{id:e}})}async findByCongressId({pagination:e,filter:r}){return await this.prisma.regionalCongressGalleryItem.findMany({where:{congressId:r.congressId,...r.caption&&{caption:{contains:r.caption,mode:"insensitive"}}},skip:e.offset,take:e.limit})}async findById(e){return await this.prisma.regionalCongressGalleryItem.findFirst({where:{id:e}})}async count({filter:e}){return await this.prisma.regionalCongressGalleryItem.count({where:{congressId:e.congressId,...e.caption&&{caption:{contains:e.caption,mode:"insensitive"}}}})}};function Xt(){return new Nn(k)}function Rg(){return{createRegionalCongressGalleryController:new Ii(Xt(),we(),O())}}function Ig(){return{findRegionalCongressGalleriesByCongressIdController:new wi(Xt())}}function Cg(){return{findRegionalCongressGalleryByIdController:new Bn(Xt())}}function bg(){return{updateRegionalCongressGalleryController:new Si(Xt(),O())}}function wg(){return{deleteRegionalCongressGalleryController:new Ci(Xt())}}import{extendZodWithOpenApi as nb}from"@asteasolutions/zod-to-openapi";import rc from"zod";nb(rc);var sb=rc.object({id:rc.string().uuid("ID inv\xE1lido")}),kn=class{constructor(e){this.regionalCongressPartnerRepository=e}async handle(e,r){try{let{id:t}=sb.parse(e.params),i=await this.regionalCongressPartnerRepository.findById(t);if(!i)throw new p("Parceiro n\xE3o encontrado");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Gn=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.regionalCongressPartner.create({data:e})}async update(e){await this.prisma.regionalCongressPartner.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.regionalCongressPartner.delete({where:{id:e}})}async findByCongressId(e){return await this.prisma.regionalCongressPartner.findMany({where:{congressId:e.filter.congressId,name:e.filter.name?{contains:e.filter.name,mode:"insensitive"}:void 0},skip:e.pagination?.offset,take:e.pagination?.limit})}async findById(e){return await this.prisma.regionalCongressPartner.findFirst({where:{id:e}})}async count(e){return await this.prisma.regionalCongressPartner.count({where:{congressId:e.filter.congressId,name:e.filter.name?{contains:e.filter.name,mode:"insensitive"}:void 0}})}};function $t(){return new Gn(k)}function Sg(){return{createRegionalCongressPartnerController:new vi($t(),we(),O())}}function vg(){return{findRegionalCongressPartnersByCongressIdController:new xi($t())}}function Eg(){return{findRegionalCongressPartnerByIdController:new kn($t())}}function jg(){return{updateRegionalCongressPartnerController:new Pi($t(),O())}}function xg(){return{deleteRegionalCongressPartnerController:new Ei($t())}}function Pg(){return{createRegionalCongressController:new Mi(we())}}function Mg(){return{findRegionalCongressesController:new Ui(we())}}function Tg(){return{findRegionalCongressByIdController:new Di(we())}}function Ag(){return{findRegionalCongressByEditionController:new Ai(we())}}function Dg(){return{updateRegionalCongressController:new qi(we())}}function Fg(){return{deleteRegionalCongressController:new Ti(we())}}var te=ab(),{authMiddleware:Ne}=z();te.post("/",(o,e,r)=>{Ne.authenticated(o,e,r)},async(o,e)=>{let{createRegionalCongressController:r}=Pg();await r.handle(o,e)});te.get("/",async(o,e)=>{let{findRegionalCongressesController:r}=Mg();await r.handle(o,e)});te.get("/:id",async(o,e)=>{let{findRegionalCongressByIdController:r}=Tg();await r.handle(o,e)});te.get("/edition/:edition",async(o,e)=>{let{findRegionalCongressByEditionController:r}=Ag();await r.handle(o,e)});te.put("/:id",(o,e,r)=>{Ne.authenticated(o,e,r)},async(o,e)=>{let{updateRegionalCongressController:r}=Dg();await r.handle(o,e)});te.delete("/:id",(o,e,r)=>{Ne.authenticated(o,e,r)},async(o,e)=>{let{deleteRegionalCongressController:r}=Fg();await r.handle(o,e)});te.post("/:congressId/gallery",(o,e,r)=>{Ne.authenticated(o,e,r)},G.single("image"),async(o,e)=>{let{createRegionalCongressGalleryController:r}=Rg();await r.handle(o,e)});te.get("/:congressId/gallery",async(o,e)=>{let{findRegionalCongressGalleriesByCongressIdController:r}=Ig();await r.handle(o,e)});te.get("/gallery/:id",async(o,e)=>{let{findRegionalCongressGalleryByIdController:r}=Cg();await r.handle(o,e)});te.put("/gallery/:id",(o,e,r)=>{Ne.authenticated(o,e,r)},G.single("image"),async(o,e)=>{let{updateRegionalCongressGalleryController:r}=bg();await r.handle(o,e)});te.delete("/gallery/:id",(o,e,r)=>{Ne.authenticated(o,e,r)},async(o,e)=>{let{deleteRegionalCongressGalleryController:r}=wg();await r.handle(o,e)});te.post("/:congressId/partner",(o,e,r)=>{Ne.authenticated(o,e,r)},G.single("logo"),async(o,e)=>{let{createRegionalCongressPartnerController:r}=Sg();await r.handle(o,e)});te.get("/:congressId/partner",async(o,e)=>{let{findRegionalCongressPartnersByCongressIdController:r}=vg();await r.handle(o,e)});te.get("/partner/:id",async(o,e)=>{let{findRegionalCongressPartnerByIdController:r}=Eg();await r.handle(o,e)});te.put("/partner/:id",(o,e,r)=>{Ne.authenticated(o,e,r)},G.single("logo"),async(o,e)=>{let{updateRegionalCongressPartnerController:r}=jg();await r.handle(o,e)});te.delete("/partner/:id",(o,e,r)=>{Ne.authenticated(o,e,r)},async(o,e)=>{let{deleteRegionalCongressPartnerController:r}=xg();await r.handle(o,e)});import{Router as lb}from"express";import{extendZodWithOpenApi as mb}from"@asteasolutions/zod-to-openapi";import se from"zod";var cb=1,pb=9;mb(se);var db=se.object({page:se.coerce.number().min(1).default(cb),limit:se.coerce.number().min(1).default(pb),userId:se.string().optional(),registrationNumber:se.string().optional(),name:se.string().optional(),emailAddress:se.string().optional(),mainEtps:se.string().optional(),formations:se.string().optional(),occupations:se.string().optional(),institutions:se.string().optional(),biography:se.string().optional(),orderBy:se.enum(["asc","desc"]).default("desc")}),Ln=class{constructor(e){this.researcherRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=db.parse(e.query),s=i*t-i,[m,c]=await Promise.all([this.researcherRepository.find({pagination:{offset:s,limit:i},filter:{userName:n.name,...n}}),this.researcherRepository.count({filter:{userName:n.name,...n}})]),u=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:u,offset:s,limit:i,researchers:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};var _n=class{constructor(e){this.prisma=e}async create(e){await this.prisma.researcher.create({data:e})}async update(e){await this.prisma.researcher.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.researcher.delete({where:{id:e}})}async find({pagination:e,filter:{biography:r,degrees:t,formations:i,institutions:n,mainEtps:s,occupations:m,orderBy:c,registrationNumber:u,seniority:w,userId:B,userName:Z}}){let X={},oe=[];return Z&&oe.push({user:{name:{contains:Z,mode:"insensitive"}}}),u&&oe.push({registrationNumber:{contains:u,mode:"insensitive"}}),s&&oe.push({mainEtps:{contains:s,mode:"insensitive"}}),i&&oe.push({formations:{contains:i,mode:"insensitive"}}),m&&oe.push({occupations:{contains:m,mode:"insensitive"}}),n&&oe.push({institutions:{contains:n,mode:"insensitive"}}),r&&oe.push({biography:{contains:r,mode:"insensitive"}}),oe.length>0&&(X.OR=oe),t&&t.length>0&&(X.degrees={hasSome:t}),w&&(X.seniority=w),B&&(X.userId={equals:B}),await this.prisma.researcher.findMany({where:X,omit:{userId:!0},include:{user:{omit:{passwordHash:!0}}},orderBy:{updatedAt:c},...e&&{skip:e.offset,take:e.limit}})}async findById(e){return await this.prisma.researcher.findFirst({where:{id:e},include:{user:{omit:{passwordHash:!0}}}})}async findByUserId(e){return await this.prisma.researcher.findFirst({where:{userId:e},include:{user:{omit:{passwordHash:!0}}}})}async findByRegistrationNumber(e){return await this.prisma.researcher.findFirst({where:{registrationNumber:e},include:{user:{omit:{passwordHash:!0}}}})}async count({filter:{biography:e,degrees:r,formations:t,institutions:i,mainEtps:n,occupations:s,registrationNumber:m,seniority:c,userId:u,userName:w}}){let B={},Z=[];return w&&Z.push({user:{name:{contains:w,mode:"insensitive"}}}),m&&Z.push({registrationNumber:{contains:m,mode:"insensitive"}}),Z.length>0&&(B.OR=Z),n&&(B.mainEtps={contains:n,mode:"insensitive"}),t&&(B.formations={contains:t,mode:"insensitive"}),r&&r.length>0&&(B.degrees={hasSome:r}),s&&(B.occupations={contains:s,mode:"insensitive"}),c&&(B.seniority=c),i&&(B.institutions={contains:i,mode:"insensitive"}),e&&(B.biography={contains:e,mode:"insensitive"}),u&&(B.userId={equals:u}),await this.prisma.researcher.count({where:B})}};function Et(){return new _n(k)}function Ug(){return{createResearcherController:new Bi(Et())}}function qg(){return{findResearchersController:new Ln(Et())}}function Bg(){return{findResearcherByIdController:new Ni(Et())}}function Og(){return{findResearcherByUserIdController:new Gi(Et())}}function Ng(){return{updateResearcherController:new Li(Et())}}function kg(){return{deleteResearcherController:new Oi(Et())}}var nt=lb(),{authMiddleware:oc}=z();nt.post("/",(o,e,r)=>{oc.authenticated(o,e,r)},async(o,e)=>{let{createResearcherController:r}=Ug();await r.handle(o,e)});nt.get("/",async(o,e)=>{let{findResearchersController:r}=qg();await r.handle(o,e)});nt.get("/:id",async(o,e)=>{let{findResearcherByIdController:r}=Bg();await r.handle(o,e)});nt.get("/user/:userId",async(o,e)=>{let{findResearcherByUserIdController:r}=Og();await r.handle(o,e)});nt.put("/:id",(o,e,r)=>{oc.authenticated(o,e,r)},async(o,e)=>{let{updateResearcherController:r}=Ng();await r.handle(o,e)});nt.delete("/:id",(o,e,r)=>{oc.authenticated(o,e,r)},async(o,e)=>{let{deleteResearcherController:r}=kg();await r.handle(o,e)});import{Router as yb}from"express";import{extendZodWithOpenApi as ub}from"@asteasolutions/zod-to-openapi";import Wn from"zod";ub(Wn);var gb=Wn.object({role:Wn.string().optional(),orderBy:Wn.enum(["asc","desc"]).optional()}),Hn=class{constructor(e){this.sdhcTeamMemberRepository=e}async handle(e,r){try{let t=gb.parse(e.query),i=await this.sdhcTeamMemberRepository.find({filter:t});r.status(200).json({members:i})}catch(t){if(t instanceof Error)throw new a(t.message)}}};var zn=class{constructor(e){this.prisma=e}async create(e){await this.prisma.sDHCTeamMember.create({data:{...e,order:e.order??0}})}async update(e){let{id:r,...t}=e;await this.prisma.sDHCTeamMember.update({where:{id:r},data:t})}async deleteById(e){await this.prisma.sDHCTeamMember.delete({where:{id:e}})}async find({filter:{role:e,orderBy:r}}){let t={};return e&&(t.role={contains:e,mode:"insensitive"}),await this.prisma.sDHCTeamMember.findMany({where:t,include:{user:{omit:{passwordHash:!0}}},orderBy:r?[{order:"asc"},{updatedAt:r}]:[{order:"asc"},{updatedAt:"desc"}]})}async findById(e){return await this.prisma.sDHCTeamMember.findFirst({where:{id:e},include:{user:{omit:{passwordHash:!0}}}})}async count({filter:{role:e}}){let r={};return e&&(r.role={contains:e,mode:"insensitive"}),await this.prisma.sDHCTeamMember.count({where:r})}};function Jt(){return new zn(k)}function Gg(){return{createSDHCTeamMemberController:new _i(Jt())}}function Lg(){return{findSDHCTeamMembersController:new Hn(Jt())}}function _g(){return{findSDHCTeamMemberByIdController:new Hi(Jt())}}function Wg(){return{updateSDHCTeamMemberController:new Zi(Jt())}}function Hg(){return{deleteSDHCTeamMemberController:new Wi(Jt())}}var jt=yb(),{authMiddleware:ic}=z();jt.post("/",(o,e,r)=>{ic.authenticated(o,e,r)},async(o,e)=>{let{createSDHCTeamMemberController:r}=Gg();await r.handle(o,e)});jt.get("/",async(o,e)=>{let{findSDHCTeamMembersController:r}=Lg();await r.handle(o,e)});jt.get("/:id",async(o,e)=>{let{findSDHCTeamMemberByIdController:r}=_g();await r.handle(o,e)});jt.put("/:id",(o,e,r)=>{ic.authenticated(o,e,r)},async(o,e)=>{let{updateSDHCTeamMemberController:r}=Wg();await r.handle(o,e)});jt.delete("/:id",(o,e,r)=>{ic.authenticated(o,e,r)},async(o,e)=>{let{deleteSDHCTeamMemberController:r}=Hg();await r.handle(o,e)});import{Router as fb}from"express";var Zn=class{constructor(e){this.userRepository=e}async handle(e,r){try{let t=await this.userRepository.find();r.status(200).json(t)}catch(t){if(t instanceof Error)throw new a(t.message)}}};function zg(){return{updateUserController:new Yi(me(),O())}}function Zg(){return{deleteUserController:new Vi(me())}}function Vg(){return{findUsersController:new Zn(me())}}function Kg(){return{findUserController:new Ki(me())}}var Qt=fb(),{authMiddleware:Yg}=z();Qt.get("/:id",async(o,e)=>{let{findUserController:r}=Kg();await r.handle(o,e)});Qt.put("/",(o,e,r)=>{Yg.authenticated(o,e,r)},G.single("avatarImage"),async(o,e)=>{let{updateUserController:r}=zg();await r.handle(o,e)});Qt.delete("/:id",(o,e,r)=>{Yg.authenticated(o,e,r)},async(o,e)=>{let{deleteUserController:r}=Zg();await r.handle(o,e)});Qt.get("/",async(o,e)=>{let{findUsersController:r}=Vg();await r.handle(o,e)});import{Router as wb}from"express";import{extendZodWithOpenApi as hb}from"@asteasolutions/zod-to-openapi";import xe from"zod";var Rb=5,Xg=1024,Ib=Xg*Xg,Cb=Rb*Ib;hb(xe);var bb=xe.object({title:xe.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),description:xe.string().optional(),scheduledAt:xe.coerce.date(),webinarLink:xe.url().optional(),guestIds:xe.transform(o=>typeof o=="string"?o.split(","):o).pipe(xe.array(xe.uuid())),thumbnail:xe.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=Cb,"A thumbnail deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.")}),Vn=class{constructor(e,r){this.webinarRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{title:t,description:i,scheduledAt:n,webinarLink:s,guestIds:m,thumbnail:c}=bb.parse({...e.body,thumbnail:e.file}),u=await this.webinarRepository.create({title:t,description:i,scheduledAt:n,webinarLink:s||void 0,guestIds:m}),w=await this.firebaseStorageService.uploadFile({file:c,folder:T.WEBINAR,id:u.id});return await this.webinarRepository.update({id:u.id,thumbnailUrl:w}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Kn=class{constructor(e){this.prisma=e}async create({title:e,description:r,scheduledAt:t,webinarLink:i,thumbnailUrl:n,guestIds:s}){return await this.prisma.webinar.create({data:{title:e,description:r,scheduledAt:t,webinarLink:i,thumbnailUrl:n,guests:s?{connect:s.map(m=>({id:m}))}:void 0}})}async find({pagination:{offset:e,limit:r},filter:{description:t,orderBy:i,title:n}}){let s={},m=[];return n&&m.push({title:{contains:n,mode:"insensitive"}}),t&&m.push({description:{contains:t,mode:"insensitive"}}),m.length>0&&(s.OR=m),await this.prisma.webinar.findMany({where:s,include:{guests:{omit:{passwordHash:!0}}},orderBy:{updatedAt:i},skip:e,take:r})}async findById(e){return await this.prisma.webinar.findFirst({where:{id:e},include:{guests:{omit:{passwordHash:!0}}}})}async update({id:e,title:r,description:t,scheduledAt:i,webinarLink:n,thumbnailUrl:s,guestIds:m}){await this.prisma.webinar.update({where:{id:e},data:{title:r,description:t,scheduledAt:i,webinarLink:n,thumbnailUrl:s,guests:m?{connect:m.map(c=>({id:c}))}:void 0}})}async deleteById(e){await this.prisma.webinar.delete({where:{id:e}})}async count({filter:{description:e,title:r}}){let t={},i=[];return r&&i.push({title:{contains:r,mode:"insensitive"}}),e&&i.push({description:{contains:e,mode:"insensitive"}}),i.length>0&&(t.OR=i),await this.prisma.webinar.count({where:t})}};function er(){return new Kn(k)}function $g(){return{createWebinarController:new Vn(er(),O())}}function Jg(){return{findWebinarsController:new Ji(er())}}function Qg(){return{findWebinarByIdController:new $i(er())}}function ey(){return{updateWebinarController:new Qi(er(),O())}}function ty(){return{deleteWebinarController:new Xi(er(),O())}}var xt=wb(),{authMiddleware:Rr}=z();xt.post("/",(o,e,r)=>{Rr.isAdmin(o,e,r)},G.single("thumbnail"),async(o,e)=>{let{createWebinarController:r}=$g();await r.handle(o,e)});xt.get("/",(o,e,r)=>{Rr.isAdmin(o,e,r)},async(o,e)=>{let{findWebinarsController:r}=Jg();await r.handle(o,e)});xt.get("/:id",(o,e,r)=>{Rr.isAdmin(o,e,r)},async(o,e)=>{let{findWebinarByIdController:r}=Qg();await r.handle(o,e)});xt.put("/:id",(o,e,r)=>{Rr.isAdmin(o,e,r)},G.single("thumbnail"),async(o,e)=>{let{updateWebinarController:r}=ey();await r.handle(o,e)});xt.delete("/:id",(o,e,r)=>{Rr.isAdmin(o,e,r)},async(o,e)=>{let{deleteWebinarController:r}=ty();await r.handle(o,e)});var K=nc(),Eb={methods:["GET","POST","PUT","DELETE"],origin:["http://localhost:3000","https://rede-ct.vercel.app"],credentials:!0};K.use(vb(Eb));K.use(nc.json());K.use(nc.urlencoded({extended:!1}));K.use("/docs",Sb({content:Sl,theme:"kepler"}));K.use("/",zm);K.use("/auth",Fe);K.use("/user",Qt);K.use("/news",ot);K.use("/certification",gt);K.use("/pendency",wt);K.use("/researcher",nt);K.use("/in-memoriam",rt);K.use("/etp",ft);K.use("/partner",bt);K.use("/management-team",Ct);K.use("/sdhc-team-member",jt);K.use("/legitimator-committee-member",It);K.use("/regiment",it);K.use("/meeting",fe);K.use("/international-scientific-congress",ee);K.use("/regional-congress",te);K.use("/webinars",xt);K.use("/courses",yt);K.use("/post-graduate-programs",St);K.use("/event",ht);K.use((o,e,r,t)=>{let{errorHandler:i}=sc();i.handle(o,e,r,t)});var xb=jb.createServer(K),ry=4e3;xb.listen(ry,()=>{console.log(`\u{1F680} Aplica\xE7\xE3o rodando na porta ${ry}.`)});

import Qw from"node:http";import{apiReference as Yw}from"@scalar/express-api-reference";import Xw from"cors";import fp from"express";import Xy from"zod";var ce=class extends Error{};var oe=class extends Error{};var m=class extends Error{};var p=class extends Error{};var he=class extends Error{};import{ZodError as Yy}from"zod";var Wr=class extends Yy{};var zr=class{handle(e,r,t,i){return e instanceof Wr?t.status(400).json({message:"Validation error",error:Xy.treeifyError(e)}):e instanceof ce?t.status(400).json({message:e.message}):e instanceof p?t.status(404).json({message:e.message}):e instanceof he?t.status(401).json({message:e.message}):e instanceof oe?t.status(409).json({message:e.message}):e instanceof m?t.status(500).json({message:e.message}):t.status(500).json({message:"Internal server error"})}};function yp(){return{errorHandler:new zr}}import{OpenAPIRegistry as cS,OpenApiGeneratorV3 as pS}from"@asteasolutions/zod-to-openapi";import{$Enums as hp}from"@prisma/client";import I from"zod";import{extendZodWithOpenApi as $y}from"@asteasolutions/zod-to-openapi";import bt from"zod";var Qy=1,eh=6;$y(bt);var Ns=bt.object({page:bt.coerce.number().min(1).default(Qy),limit:bt.coerce.number().min(1).default(eh),title:bt.string().optional(),description:bt.string().optional(),orderBy:bt.enum(["asc","desc"]).default("desc")}),Hr=class{constructor(e){this.certificationRepository=e}async handle(e,r){try{let{title:t,description:i,limit:n,orderBy:s,page:a}=Ns.parse(e.query),c=a*n-n,d=e.user.id,[h,j]=await Promise.all([this.certificationRepository.findByUserId({userId:d,pagination:{offset:c,limit:n},filter:{title:t,description:i,orderBy:s}}),this.certificationRepository.count({filter:{title:t,description:i,userId:d}})]),q=Math.max(Math.ceil(j/n),1);return r.status(200).json({page:a,totalPages:q,offset:c,limit:n,totalCertifications:j,certifications:h})}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as th}from"@asteasolutions/zod-to-openapi";import Ct from"zod";var rh=1,oh=7;th(Ct);var Gs=Ct.object({page:Ct.coerce.number().min(1).default(rh),limit:Ct.coerce.number().min(1).default(oh),title:Ct.string().optional(),content:Ct.string().optional(),orderBy:Ct.enum(["asc","desc"]).default("desc")}),Vr=class{constructor(e){this.newsRepository=e}async handle(e,r){try{let{page:t,limit:i,content:n,orderBy:s,title:a}=Gs.parse(e.query),c=i*t-i,d=e.user.id,[h,j]=await Promise.all([this.newsRepository.findByAuthorId({authorId:d,pagination:{offset:c,limit:i},filter:{orderBy:s,title:a,content:n}}),this.newsRepository.count({filter:{authorId:d,content:n,title:a}})]),q=Math.ceil(j/i);r.status(200).json({page:t,totalPages:q,offset:c,limit:i,news:h})}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as ih}from"@asteasolutions/zod-to-openapi";import{PendencyStatus as nh}from"@prisma/client";import Xe from"zod";var sh=1,ah=6;ih(Xe);var Ls=Xe.object({page:Xe.coerce.number().min(1).default(sh),limit:Xe.coerce.number().min(1).default(ah),title:Xe.string().optional(),description:Xe.string().optional(),status:Xe.enum(nh).default("PENDING"),orderBy:Xe.enum(["asc","desc"]).default("desc")}),Zr=class{constructor(e){this.pendencyRepository=e}async handle(e,r){try{let{limit:t,page:i,...n}=Ls.parse(e.query),s=i*t-t,a=e.user.id,[c,d]=await Promise.all([this.pendencyRepository.findByUserId({userId:a,pagination:{offset:s,limit:t},filter:n}),this.pendencyRepository.count({filter:{...n,userId:a}})]),h=Math.max(Math.ceil(d/t),1);return r.status(200).json({page:i,totalPages:h,offset:s,limit:t,pendencies:c})}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as mh}from"@asteasolutions/zod-to-openapi";import Kr from"zod";mh(Kr);var _s=Kr.object({password:Kr.string(),email:Kr.email()}),Jr=class{constructor(e,r,t){this.userRepository=e;this.bcrypt=r;this.jwtService=t}async handle(e,r){try{let{email:t,password:i}=_s.parse(e.body),n=await this.userRepository.findByEmail(t);if(!n)return r.status(401).json({message:"Usu\xE1rio n\xE3o existe."});if(!await this.bcrypt.compare({password:i,hashedPassword:n.passwordHash}))throw new he("Senha inv\xE1lida.");let{id:a,role:c}=n,d=this.jwtService.sign({id:a,role:c,email:t});return r.status(200).json({token:d})}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as ch}from"@asteasolutions/zod-to-openapi";import Ht from"zod";var Yr=8;ch(Ht);var Ws=Ht.object({name:Ht.string("Nome \xE9 obrigat\xF3rio.").min(1,"Nome \xE9 obrigat\xF3rio."),emailAddress:Ht.email("E-mail inv\xE1lido.").min(1,"E-mail \xE9 obrigat\xF3rio."),password:Ht.string("A senha \xE9 obrigat\xF3ria.").min(Yr,`A senha deve ter pelo menos ${Yr} caracteres.`),confirmPassword:Ht.string("A senha \xE9 obrigat\xF3ria.").min(Yr,`A senha deve ter pelo menos ${Yr} caracteres.`)}).refine(o=>o.password===o.confirmPassword,{message:"As senhas n\xE3o coincidem.",path:["confirmPassword"]}),Xr=class{constructor(e,r){this.userRepository=e;this.bcrypt=r}async handle(e,r){try{let{emailAddress:t,name:i,password:n}=Ws.parse(e.body);if(await this.userRepository.findByEmail(t))throw new oe("Usu\xE1rio j\xE1 existe.");let a=await this.bcrypt.hash(n);return await this.userRepository.create({name:i,emailAddress:t,passwordHash:a}),r.status(201).json()}catch(t){if(t instanceof Error)throw new m(t.message)}}};var Rp={method:"post",path:"/auth/sign-up",tags:["Authentication"],summary:"Create a new user",request:{body:{content:{"application/json":{schema:Ws}}}},responses:{201:{description:"User created successfully",summary:"User Registration Successful",content:{"application/json":{schema:I.object({message:I.string()})}}},400:{description:"Invalid input data provided",summary:"Validation Error",content:{"application/json":{schema:I.object({errors:I.record(I.string(),I.string())})}}},409:{description:"User already exists with this email",summary:"User Already Exists",content:{"application/json":{schema:I.object({message:I.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:I.object({message:I.string()})}}}}},Ip={method:"post",path:"/auth/sign-in",tags:["Authentication"],summary:"Sign in",request:{body:{content:{"application/json":{schema:_s}}}},responses:{200:{description:"Authentication successful, JWT token returned",summary:"Login Successful",content:{"application/json":{schema:I.object({token:I.string()})}}},400:{description:"Invalid credentials or input data",summary:"Validation Error",content:{"application/json":{schema:I.object({errors:I.record(I.string(),I.string())})}}},401:{description:"Invalid email or password",summary:"Authentication Failed",content:{"application/json":{schema:I.object({message:I.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:I.object({message:I.string()})}}}}},bp={method:"get",path:"/auth/user",tags:["Authentication"],summary:"Search for authenticated user",security:[{bearerAuth:[]}],responses:{200:{description:"Authenticated user information retrieved successfully",summary:"User Information Retrieved",content:{"application/json":{schema:I.object({name:I.string(),id:I.string(),avatarUrl:I.string().nullable(),createdAt:I.date(),updatedAt:I.date(),emailAddress:I.string(),orcid:I.string().nullable(),phone:I.string().nullable(),lattesUrl:I.string().nullable(),role:I.enum(hp.UserRole)}).nullable()}}},400:{description:"Invalid request parameters",summary:"Validation Error",content:{"application/json":{schema:I.object({errors:I.record(I.string(),I.string())})}}},404:{description:"User not found or not authenticated",summary:"User Not Found",content:{"application/json":{schema:I.object({message:I.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:I.object({message:I.string()})}}}}},Cp={method:"get",path:"/auth/user/news",tags:["Authentication"],summary:"List authenticated user news",security:[{bearerAuth:[]}],request:{query:Gs},responses:{200:{description:"Paginated list of authenticated user news retrieved successfully",summary:"User News Retrieved",content:{"application/json":{schema:I.object({page:I.number(),totalPages:I.number(),offset:I.number(),limit:I.number(),news:I.object({content:I.string(),id:I.string(),title:I.string(),createdAt:I.date(),updatedAt:I.date(),imageUrl:I.string().nullable()})})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:I.object({errors:I.record(I.string(),I.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:I.object({message:I.string()})}}}}},Sp={method:"get",path:"/auth/admin",tags:["Authentication"],summary:"Verify admin access",security:[{bearerAuth:[]}],responses:{200:{description:"Admin access verified successfully",summary:"Admin Access Granted",content:{"application/json":{schema:I.object({success:I.boolean()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:I.object({message:I.string()})}}}}},wp={method:"get",path:"/auth/certifications",tags:["Authentication"],summary:"List all authenticated user's certifications",security:[{bearerAuth:[]}],request:{query:Ns},responses:{200:{description:"Paginated list of authenticated user certifications retrieved successfully",summary:"User Certifications Retrieved",content:{"application/json":{schema:I.object({page:I.number(),totalPages:I.number(),offset:I.number(),limit:I.number(),certifications:I.object({description:I.string(),id:I.string(),title:I.string(),certificationUrl:I.string(),createdAt:I.date(),updatedAt:I.date(),userId:I.string()})})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:I.object({errors:I.record(I.string(),I.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:I.object({message:I.string()})}}}}},vp={method:"get",path:"/auth/pendencies",tags:["Authentication"],summary:"List all authenticated user's pendencies",security:[{bearerAuth:[]}],request:{query:Ls},responses:{200:{description:"Paginated list of authenticated user pendencies retrieved successfully",summary:"User Pendencies Retrieved",content:{"application/json":{schema:I.object({page:I.number(),totalPages:I.number(),offset:I.number(),limit:I.number(),pendencies:I.object({id:I.string(),title:I.string(),description:I.string(),status:I.enum(hp.PendencyStatus),createdAt:I.date(),updatedAt:I.date(),userId:I.string()})})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:I.object({errors:I.record(I.string(),I.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:I.object({message:I.string()})}}}}};import w from"zod";import{extendZodWithOpenApi as ph}from"@asteasolutions/zod-to-openapi";import zs from"zod";ph(zs);var Hs=zs.object({id:zs.uuid()}),$r=class{constructor(e,r){this.bookVolumeRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=Hs.parse({id:e.params.id}),i=await this.bookVolumeRepository.findById(t);if(!i)throw new p("O volume de livro n\xE3o existe.");return i.authorImageUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.authorImageUrl}),i.coverImageUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.coverImageUrl}),i.catalogSheetUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.catalogSheetUrl}),await this.bookVolumeRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as dh}from"@asteasolutions/zod-to-openapi";import Vs from"zod";dh(Vs);var Zs=Vs.object({id:Vs.uuid()}),Qr=class{constructor(e){this.bookVolumeRepository=e}async handle(e,r){try{let{id:t}=Zs.parse({id:e.params.id}),i=await this.bookVolumeRepository.findById(t);if(!i)throw new p("Volume de livro n\xE3o encontrado.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as lh}from"@asteasolutions/zod-to-openapi";import $e from"zod";var uh=1,gh=6;lh($e);var Ks=$e.object({page:$e.coerce.number().min(1).default(uh),limit:$e.coerce.number().min(1).default(gh),title:$e.string().optional(),author:$e.string().optional(),description:$e.string().optional(),orderBy:$e.enum(["asc","desc"]).default("desc")}),eo=class{constructor(e){this.bookVolumeRepository=e}async handle(e,r){try{let{limit:t,page:i,...n}=Ks.parse(e.query),s=i*t-t,[a,c]=await Promise.all([this.bookVolumeRepository.find({pagination:{offset:s,limit:t},filter:n}),this.bookVolumeRepository.count({filter:n})]),d=Math.max(Math.ceil(c/t),1);return r.status(200).json({page:i,totalPages:d,offset:s,limit:t,bookVolumes:a})}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as fh}from"@asteasolutions/zod-to-openapi";import Re from"zod";var P={NEWS:"images/news",USER:"images/user",IN_MEMORIAM:"images/in-memoriam",PARTNER:"images/partners",CERTIFICATION:"documents/certifications",PENDENCY:"documents/pendencies",REGIMENT:"documents/regiments",MEETING_MINUTE:"documents/meeting-minutes",INTERNATIONAL_SCIENTIFIC_CONGRESS_GALLERY:"images/international-scientific-congress-gallery",GALLERY:"images/regional-congress-gallery",REGIONAL_CONGRESS_GALLERY:"images/regional-congress-gallery",WEBINAR:"images/webinars",COURSE:"images/courses",POST_GRADUATE_PROGRAM:"images/post-graduate-programs",EVENT:"images/events",SCIENTIFIC_JOURNAL:"images/scientific-journals",BOOK_VOLUME_AUTHOR_IMAGE:"images/book-volumes/authors",BOOK_VOLUME_COVER:"images/book-volumes/covers",BOOK_VOLUME_CATALOG_SHEET:"documents/book-volumes/catalog-sheets"};var to=5,Ep=1024,yh=Ep*Ep,Js=to*yh;fh(Re);var Ys=Re.object({id:Re.uuid(),volumeNumber:Re.coerce.number().int().positive().optional(),year:Re.coerce.number().int().positive().optional(),title:Re.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio.").optional(),author:Re.string().min(1,"Autor \xE9 obrigat\xF3rio.").optional(),accessUrl:Re.string().url("URL de acesso deve ser v\xE1lida").optional(),description:Re.string().optional(),authorImage:Re.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=Js,`A imagem do autor deve ter no m\xE1ximo ${to}MB.`).optional(),coverImage:Re.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=Js,`A imagem da capa deve ter no m\xE1ximo ${to}MB.`).optional(),catalogSheet:Re.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=Js,`A ficha catalogr\xE1fica deve ter no m\xE1ximo ${to}MB.`).optional()}),ro=class{constructor(e,r){this.bookVolumeRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,volumeNumber:i,year:n,title:s,author:a,accessUrl:c,description:d,authorImage:h,coverImage:j,catalogSheet:q}=Ys.parse({id:e.params.id,...e.body,authorImage:e.files?.authorImage?.[0],coverImage:e.files?.coverImage?.[0],catalogSheet:e.files?.catalogSheet?.[0]}),Y=await this.bookVolumeRepository.findById(t);if(!Y)throw new p("O volume de livro n\xE3o existe.");let $=Y.authorImageUrl,le=Y.coverImageUrl,Te=Y.catalogSheetUrl;return h&&($=await this.firebaseStorageService.uploadFile({file:h,id:t,folder:P.BOOK_VOLUME_AUTHOR_IMAGE})),j&&(le=await this.firebaseStorageService.uploadFile({file:j,id:t,folder:P.BOOK_VOLUME_COVER})),q&&(Te=await this.firebaseStorageService.uploadFile({file:q,id:t,folder:P.BOOK_VOLUME_CATALOG_SHEET})),await this.bookVolumeRepository.update({id:t,volumeNumber:i,year:n,title:s,author:a,accessUrl:c,description:d,authorImageUrl:$,coverImageUrl:le,catalogSheetUrl:Te}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var jp={method:"post",path:"/book-volumes",tags:["Book Volumes"],summary:"Create book volume",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:w.object({volumeNumber:w.number().int().positive().openapi({description:"N\xFAmero do volume"}),year:w.number().int().positive().openapi({description:"Ano de publica\xE7\xE3o"}),title:w.string().min(1).openapi({description:"T\xEDtulo do livro"}),author:w.string().min(1).openapi({description:"Nome do autor"}),accessUrl:w.string().url().optional().openapi({description:"URL de acesso ao livro"}),description:w.string().optional().openapi({description:"Descri\xE7\xE3o do livro"}),authorImage:w.string().optional().openapi({description:"Imagem do autor (m\xE1ximo 5MB)",type:"string",format:"binary"}),coverImage:w.string().optional().openapi({description:"Imagem da capa (m\xE1ximo 5MB)",type:"string",format:"binary"}),catalogSheet:w.string().optional().openapi({description:"Ficha catalogr\xE1fica (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{201:{description:"Book volume created successfully",summary:"Volume Created"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:w.object({errors:w.record(w.string(),w.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:w.object({message:w.string()})}}}}},xp={method:"get",path:"/book-volumes",tags:["Book Volumes"],summary:"List book volumes",security:[{bearerAuth:[]}],request:{query:Ks},responses:{200:{description:"Paginated list of book volumes retrieved successfully",summary:"Volumes Retrieved",content:{"application/json":{schema:w.object({page:w.number(),totalPages:w.number(),offset:w.number(),limit:w.number(),bookVolumes:w.array(w.object({id:w.string(),volumeNumber:w.number(),year:w.number(),title:w.string(),author:w.string(),accessUrl:w.string().nullable(),authorImageUrl:w.string().nullable(),coverImageUrl:w.string().nullable(),catalogSheetUrl:w.string().nullable(),description:w.string().nullable(),createdAt:w.date(),updatedAt:w.date()}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:w.object({errors:w.record(w.string(),w.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:w.object({message:w.string()})}}}}},Pp={method:"get",path:"/book-volumes/{id}",tags:["Book Volumes"],summary:"Find book volume by ID",security:[{bearerAuth:[]}],request:{params:Zs},responses:{200:{description:"Book volume details retrieved successfully",summary:"Volume Retrieved",content:{"application/json":{schema:w.object({id:w.string(),volumeNumber:w.number(),year:w.number(),title:w.string(),author:w.string(),accessUrl:w.string().nullable(),authorImageUrl:w.string().nullable(),coverImageUrl:w.string().nullable(),catalogSheetUrl:w.string().nullable(),description:w.string().nullable(),createdAt:w.date(),updatedAt:w.date()}).nullable()}}},400:{description:"Invalid volume ID format",summary:"Validation Error",content:{"application/json":{schema:w.object({errors:w.record(w.string(),w.string())})}}},404:{description:"Book volume not found with the provided ID",summary:"Volume Not Found",content:{"application/json":{schema:w.object({message:w.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:w.object({message:w.string()})}}}}},Ap={method:"put",path:"/book-volumes/{id}",tags:["Book Volumes"],summary:"Update book volume",security:[{bearerAuth:[]}],request:{params:Ys.pick({id:!0}),body:{content:{"multipart/form-data":{schema:w.object({volumeNumber:w.number().int().positive().optional().openapi({description:"N\xFAmero do volume"}),year:w.number().int().positive().optional().openapi({description:"Ano de publica\xE7\xE3o"}),title:w.string().min(1).optional().openapi({description:"T\xEDtulo do livro"}),author:w.string().min(1).optional().openapi({description:"Nome do autor"}),accessUrl:w.string().url().optional().openapi({description:"URL de acesso ao livro"}),description:w.string().optional().openapi({description:"Descri\xE7\xE3o do livro"}),authorImage:w.string().optional().openapi({description:"Imagem do autor (m\xE1ximo 5MB)",type:"string",format:"binary"}),coverImage:w.string().optional().openapi({description:"Imagem da capa (m\xE1ximo 5MB)",type:"string",format:"binary"}),catalogSheet:w.string().optional().openapi({description:"Ficha catalogr\xE1fica (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{200:{description:"Book volume updated successfully",summary:"Volume Updated"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:w.object({errors:w.record(w.string(),w.string())})}}},404:{description:"Book volume not found with the provided ID",summary:"Volume Not Found",content:{"application/json":{schema:w.object({message:w.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:w.object({message:w.string()})}}}}},Mp={method:"delete",path:"/book-volumes/{id}",tags:["Book Volumes"],summary:"Delete book volume",security:[{bearerAuth:[]}],request:{params:Hs},responses:{200:{description:"Book volume deleted successfully",summary:"Volume Deleted"},400:{description:"Invalid volume ID format",summary:"Validation Error",content:{"application/json":{schema:w.object({errors:w.record(w.string(),w.string())})}}},404:{description:"Book volume not found with the provided ID",summary:"Volume Not Found",content:{"application/json":{schema:w.object({message:w.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:w.object({message:w.string()})}}}}};import{$Enums as vh}from"@prisma/client";import A from"zod";import{extendZodWithOpenApi as hh}from"@asteasolutions/zod-to-openapi";import Xs from"zod";hh(Xs);var $s=Xs.object({id:Xs.string()}),oo=class{constructor(e,r){this.certificationRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=$s.parse({id:e.params.certification_id}),i=await this.certificationRepository.findById(t);if(!i)throw new p("A certifica\xE7\xE3o n\xE3o existe.");return await Promise.all([this.certificationRepository.deleteById(i.id),this.firebaseStorageService.deleteFile({fileUrl:i.certificationUrl})]),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as Rh}from"@asteasolutions/zod-to-openapi";import Qs from"zod";Rh(Qs);var ea=Qs.object({certificationId:Qs.uuid()}),io=class{constructor(e){this.certificationRepository=e}async handle(e,r){try{let{certificationId:t}=ea.parse({certificationId:e.params.certification_id}),i=await this.certificationRepository.findById(t);if(!i)throw new p("Certificado n\xE3o encontrado.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as Ih}from"@asteasolutions/zod-to-openapi";import Qe from"zod";var bh=1,Ch=6;Ih(Qe);var ta=Qe.object({page:Qe.coerce.number().min(1).default(bh),limit:Qe.coerce.number().min(1).default(Ch),title:Qe.string().optional(),description:Qe.string().optional(),userId:Qe.uuid().optional(),orderBy:Qe.enum(["asc","desc"]).default("desc")}),no=class{constructor(e){this.certificationRepository=e}async handle(e,r){try{let{limit:t,page:i,...n}=ta.parse(e.query),s=i*t-t,[a,c]=await Promise.all([this.certificationRepository.find({pagination:{offset:s,limit:t},filter:n}),this.certificationRepository.count({filter:n})]),d=Math.max(Math.ceil(c/t),1);return r.status(200).json({page:i,totalPages:d,offset:s,limit:t,certifications:a})}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as Sh}from"@asteasolutions/zod-to-openapi";import Vt from"zod";Sh(Vt);var ao=Vt.object({userId:Vt.uuid(),title:Vt.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),description:Vt.string().min(1,"Descri\xE7\xE3o \xE9 obrigat\xF3ria."),certification:Vt.any().refine(o=>o&&typeof o=="object"&&o.size>0,"Arquivo do certificado \xE9 obrigat\xF3rio")}),so=class{constructor(e,r,t){this.userRepository=e;this.certificationRepository=r;this.firebaseStorageService=t}async handle(e,r){try{let{userId:t,title:i,description:n,certification:s}=ao.parse({...e.body,userId:e.params.user_id,certification:e.file});if(!await this.userRepository.findById(t))throw new ce("O usu\xE1rio n\xE3o existe.");let c=await this.firebaseStorageService.uploadFile({file:s,id:t,folder:P.CERTIFICATION});return await this.certificationRepository.register({userId:t,title:i,description:n,certificationUrl:c}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as wh}from"@asteasolutions/zod-to-openapi";import Zt from"zod";wh(Zt);var co=Zt.object({id:Zt.uuid(),title:Zt.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),description:Zt.string().min(1,"Descri\xE7\xE3o \xE9 obrigat\xF3ria."),certification:Zt.any().refine(o=>o==null||typeof o=="object"&&typeof o.size=="number"&&(o.size===0||o.size>0),"Arquivo do certificado \xE9 inv\xE1lido").optional()}),mo=class{constructor(e,r){this.certificationRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{certification:t,id:i,...n}=co.parse({...e.body,id:e.params.certification_id,certification:e.file}),s=await this.certificationRepository.findById(i);if(!s)throw new ce("A certifica\xE7\xE3o n\xE3o existe");let a=s.certificationUrl;return t&&t.size>0&&(a=await this.firebaseStorageService.updateFile({file:t,id:s.userId,folder:P.CERTIFICATION,fileUrl:s.certificationUrl})),await this.certificationRepository.update({...n,id:i,certificationUrl:a}),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var Tp={method:"post",path:"/certifications/{user_id}",tags:["Certifications"],summary:"Register certification for user",security:[{bearerAuth:[]}],request:{params:ao.pick({userId:!0}).transform(()=>({user_id:""})),body:{content:{"multipart/form-data":{schema:ao.omit({userId:!0})}}}},responses:{201:{description:"Certification registered successfully for the user",summary:"Certification Registered",content:{"application/json":{schema:A.object({message:A.string()})}}},400:{description:"Invalid input data or file format",summary:"Validation Error",content:{"application/json":{schema:A.object({errors:A.record(A.string(),A.string())})}}},404:{description:"User not found with the provided ID",summary:"User Not Found",content:{"application/json":{schema:A.object({message:A.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:A.object({message:A.string()})}}}}},Dp={method:"get",path:"/certifications",tags:["Certifications"],summary:"List certifications",security:[{bearerAuth:[]}],request:{query:ta},responses:{200:{description:"Paginated list of certifications with user information retrieved successfully",summary:"Certifications Retrieved",content:{"application/json":{schema:A.object({page:A.number(),totalPages:A.number(),offset:A.number(),limit:A.number(),certifications:A.array(A.object({description:A.string(),userId:A.string(),title:A.string(),id:A.string(),createdAt:A.date(),updatedAt:A.date(),certificationUrl:A.url(),user:A.object({id:A.uuid(),name:A.string(),createdAt:A.date(),updatedAt:A.date(),avatarUrl:A.string().nullable(),emailAddress:A.email(),orcid:A.string().nullable(),phone:A.string().nullable(),lattesUrl:A.url().nullable(),role:A.enum(vh.UserRole)})}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:A.object({errors:A.record(A.string(),A.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:A.object({message:A.string()})}}}}},Fp={method:"get",path:"/certifications/{certification_id}",tags:["Certifications"],summary:"Find certification by ID",security:[{bearerAuth:[]}],request:{params:ea},responses:{200:{description:"Certification details retrieved successfully",summary:"Certification Retrieved",content:{"application/json":{schema:A.object({description:A.string(),userId:A.string(),title:A.string(),id:A.string(),createdAt:A.date(),updatedAt:A.date(),certificationUrl:A.url()}).nullable()}}},400:{description:"Invalid certification ID format",summary:"Validation Error",content:{"application/json":{schema:A.object({errors:A.record(A.string(),A.string())})}}},404:{description:"Certification not found with the provided ID",summary:"Certification Not Found",content:{"application/json":{schema:A.object({message:A.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:A.object({message:A.string()})}}}}},Bp={method:"put",path:"/certifications/{certification_id}",tags:["Certifications"],summary:"Update certification",security:[{bearerAuth:[]}],request:{params:co.pick({id:!0}).transform(()=>({certification_id:""})),body:{content:{"multipart/form-data":{schema:co.omit({id:!0})}}}},responses:{204:{description:"Certification updated successfully",summary:"Certification Updated"},400:{description:"Invalid input data or file format",summary:"Validation Error",content:{"application/json":{schema:A.object({errors:A.record(A.string(),A.string())})}}},404:{description:"Certification not found with the provided ID",summary:"Certification Not Found",content:{"application/json":{schema:A.object({message:A.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:A.object({message:A.string()})}}}}},Up={method:"delete",path:"/certifications/{certification_id}",tags:["Certifications"],summary:"Delete certification",security:[{bearerAuth:[]}],request:{params:$s},responses:{204:{description:"Certification deleted successfully",summary:"Certification Deleted"},400:{description:"Invalid certification ID format",summary:"Validation Error",content:{"application/json":{schema:A.object({errors:A.record(A.string(),A.string())})}}},404:{description:"Certification not found with the provided ID",summary:"Certification Not Found",content:{"application/json":{schema:A.object({message:A.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:A.object({message:A.string()})}}}}};import R from"zod";import{extendZodWithOpenApi as Eh}from"@asteasolutions/zod-to-openapi";import ra from"zod";Eh(ra);var oa=ra.object({id:ra.uuid()}),po=class{constructor(e,r){this.courseRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=oa.parse({id:e.params.id}),i=await this.courseRepository.findById(t);if(!i)throw new p("O curso n\xE3o existe.");return i.imageUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.imageUrl}),await this.courseRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as jh}from"@asteasolutions/zod-to-openapi";import ia from"zod";jh(ia);var na=ia.object({id:ia.uuid()}),lo=class{constructor(e){this.courseRepository=e}async handle(e,r){try{let{id:t}=na.parse({id:e.params.id}),i=await this.courseRepository.findById(t);if(!i)throw new p("Curso n\xE3o encontrado.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as xh}from"@asteasolutions/zod-to-openapi";import et from"zod";var Ph=1,Ah=6;xh(et);var sa=et.object({page:et.coerce.number().min(1).default(Ph),limit:et.coerce.number().min(1).default(Ah),title:et.string().optional(),description:et.string().optional(),coordinator:et.string().optional(),orderBy:et.enum(["asc","desc"]).default("desc")}),uo=class{constructor(e){this.courseRepository=e}async handle(e,r){try{let{limit:t,page:i,...n}=sa.parse(e.query),s=i*t-t,[a,c]=await Promise.all([this.courseRepository.find({pagination:{offset:s,limit:t},filter:n}),this.courseRepository.count({filter:n})]),d=Math.max(Math.ceil(c/t),1);return r.status(200).json({page:i,totalPages:d,offset:s,limit:t,courses:a})}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as Mh}from"@asteasolutions/zod-to-openapi";import pe from"zod";var Op=5,qp=1024,Th=qp*qp,Dh=Op*Th;Mh(pe);var aa=pe.object({id:pe.uuid(),title:pe.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio.").optional(),coordinatorId:pe.string().uuid("Coordenador \xE9 obrigat\xF3rio.").optional(),email:pe.string().email("E-mail deve ser v\xE1lido.").optional(),location:pe.string().min(1,"Localiza\xE7\xE3o \xE9 obrigat\xF3ria.").optional(),scheduledAt:pe.coerce.date().optional(),registrationLink:pe.url("URL de inscri\xE7\xE3o deve ser v\xE1lida").optional(),description:pe.string().optional(),instructorIds:pe.transform(o=>typeof o=="string"?o.split(","):o).pipe(pe.array(pe.uuid())).optional(),image:pe.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=Dh,`A imagem deve ter no m\xE1ximo ${Op}MB.`).optional()}),go=class{constructor(e,r){this.courseRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,image:i,title:n,coordinatorId:s,email:a,location:c,scheduledAt:d,registrationLink:h,description:j,instructorIds:q}=aa.parse({id:e.params.id,...e.body,image:e.file}),Y=await this.courseRepository.findById(t);if(!Y)throw new p("O curso n\xE3o existe.");let $=Y.imageUrl;if(i&&($=await this.firebaseStorageService.uploadFile({file:i,id:t,folder:P.COURSE})),!$)throw new m("URL da imagem \xE9 obrigat\xF3rio");return await this.courseRepository.update({id:t,title:n,coordinatorId:s,email:a,location:c,scheduledAt:d,registrationLink:h,description:j,imageUrl:$,instructorIds:q}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var kp={method:"post",path:"/courses",tags:["Courses"],summary:"Create course",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:R.object({title:R.string().min(1).openapi({description:"T\xEDtulo do curso"}),coordinator:R.string().min(1).openapi({description:"Nome do coordenador"}),email:R.string().email().openapi({description:"E-mail de contato"}),location:R.string().min(1).openapi({description:"Localiza\xE7\xE3o do curso"}),scheduledAt:R.string().openapi({description:"Data e hora agendada (ISO 8601)",example:"2024-01-01T10:00:00Z"}),registrationLink:R.string().url().optional().openapi({description:"Link de inscri\xE7\xE3o"}),description:R.string().optional().openapi({description:"Descri\xE7\xE3o do curso"}),instructorIds:R.string().openapi({description:"IDs dos instrutores separados por v\xEDrgula",example:"uuid1,uuid2,uuid3"}),image:R.string().optional().openapi({description:"Imagem do curso (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{201:{description:"Course created successfully",summary:"Course Created"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:R.object({errors:R.record(R.string(),R.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:R.object({message:R.string()})}}}}},Np={method:"get",path:"/courses",tags:["Courses"],summary:"List courses",security:[{bearerAuth:[]}],request:{query:sa},responses:{200:{description:"Paginated list of courses with instructor information retrieved successfully",summary:"Courses Retrieved",content:{"application/json":{schema:R.object({page:R.number(),totalPages:R.number(),offset:R.number(),limit:R.number(),courses:R.array(R.object({id:R.string(),title:R.string(),imageUrl:R.string().nullable(),coordinator:R.string(),email:R.string(),scheduledAt:R.date(),location:R.string(),registrationLink:R.string().nullable(),description:R.string().nullable(),createdAt:R.date(),updatedAt:R.date(),instructors:R.array(R.object({id:R.uuid(),name:R.string(),emailAddress:R.email(),avatarUrl:R.string().nullable(),createdAt:R.date(),updatedAt:R.date()}))}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:R.object({errors:R.record(R.string(),R.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:R.object({message:R.string()})}}}}},Gp={method:"get",path:"/courses/{id}",tags:["Courses"],summary:"Find course by ID",security:[{bearerAuth:[]}],request:{params:na},responses:{200:{description:"Course details retrieved successfully",summary:"Course Retrieved",content:{"application/json":{schema:R.object({id:R.string(),title:R.string(),imageUrl:R.string().nullable(),coordinator:R.string(),email:R.string(),scheduledAt:R.date(),location:R.string(),registrationLink:R.string().nullable(),description:R.string().nullable(),createdAt:R.date(),updatedAt:R.date(),instructors:R.array(R.object({id:R.uuid(),name:R.string(),emailAddress:R.email(),avatarUrl:R.string().nullable(),createdAt:R.date(),updatedAt:R.date()}))}).nullable()}}},400:{description:"Invalid course ID format",summary:"Validation Error",content:{"application/json":{schema:R.object({errors:R.record(R.string(),R.string())})}}},404:{description:"Course not found with the provided ID",summary:"Course Not Found",content:{"application/json":{schema:R.object({message:R.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:R.object({message:R.string()})}}}}},Lp={method:"put",path:"/courses/{id}",tags:["Courses"],summary:"Update course",security:[{bearerAuth:[]}],request:{params:aa.pick({id:!0}),body:{content:{"multipart/form-data":{schema:R.object({title:R.string().min(1).optional().openapi({description:"T\xEDtulo do curso"}),coordinator:R.string().min(1).optional().openapi({description:"Nome do coordenador"}),email:R.string().email().optional().openapi({description:"E-mail de contato"}),location:R.string().min(1).optional().openapi({description:"Localiza\xE7\xE3o do curso"}),scheduledAt:R.string().optional().openapi({description:"Data e hora agendada (ISO 8601)",example:"2024-01-01T10:00:00Z"}),registrationLink:R.string().url().optional().openapi({description:"Link de inscri\xE7\xE3o"}),description:R.string().optional().openapi({description:"Descri\xE7\xE3o do curso"}),instructorIds:R.string().optional().openapi({description:"IDs dos instrutores separados por v\xEDrgula",example:"uuid1,uuid2,uuid3"}),image:R.string().optional().openapi({description:"Imagem do curso (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{200:{description:"Course updated successfully",summary:"Course Updated"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:R.object({errors:R.record(R.string(),R.string())})}}},404:{description:"Course not found with the provided ID",summary:"Course Not Found",content:{"application/json":{schema:R.object({message:R.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:R.object({message:R.string()})}}}}},_p={method:"delete",path:"/courses/{id}",tags:["Courses"],summary:"Delete course",security:[{bearerAuth:[]}],request:{params:oa},responses:{200:{description:"Course deleted successfully",summary:"Course Deleted"},400:{description:"Invalid course ID format",summary:"Validation Error",content:{"application/json":{schema:R.object({errors:R.record(R.string(),R.string())})}}},404:{description:"Course not found with the provided ID",summary:"Course Not Found",content:{"application/json":{schema:R.object({message:R.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:R.object({message:R.string()})}}}}};import{$Enums as ua}from"@prisma/client";import C from"zod";import{extendZodWithOpenApi as Fh}from"@asteasolutions/zod-to-openapi";import ve from"zod";Fh(ve);var ma=ve.object({code:ve.string(),title:ve.string(),description:ve.string().optional(),notes:ve.string().optional(),leaderId:ve.uuid(),deputyLeaderId:ve.uuid(),secretaryId:ve.uuid(),memberIds:ve.array(ve.uuid())}),fo=class{constructor(e){this.etpRepository=e}async handle(e,r){try{let{code:t,title:i,description:n,notes:s,leaderId:a,deputyLeaderId:c,secretaryId:d,memberIds:h}=ma.parse(e.body);if(await this.etpRepository.findByCode(t))throw new oe("J\xE1 existe um ETP cadastrado com este c\xF3digo.");return await this.etpRepository.create({code:t,title:i,description:n,notes:s,leaderId:a,deputyLeaderId:c,secretaryId:d,memberIds:h}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as Bh}from"@asteasolutions/zod-to-openapi";import ca from"zod";Bh(ca);var pa=ca.object({id:ca.uuid()}),yo=class{constructor(e){this.etpRepository=e}async handle(e,r){try{let{id:t}=pa.parse({id:e.params.id});if(!await this.etpRepository.findById(t))throw new p("O ETP n\xE3o existe.");return await this.etpRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as Uh}from"@asteasolutions/zod-to-openapi";import da from"zod";Uh(da);var Ro=da.object({id:da.uuid()}),ho=class{constructor(e){this.etpRepository=e}async handle(e,r){try{let{id:t}=Ro.parse({id:e.params.id}),i=await this.etpRepository.findById(t);if(!i)throw new p("O ETP n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as qh}from"@asteasolutions/zod-to-openapi";import Ie from"zod";qh(Ie);var la=Ie.object({id:Ie.uuid(),code:Ie.string().optional(),title:Ie.string().optional(),description:Ie.string().optional(),notes:Ie.string().optional(),leaderId:Ie.uuid().optional(),deputyLeaderId:Ie.uuid().optional(),secretaryId:Ie.uuid().optional(),memberIds:Ie.array(Ie.uuid()).optional()}),Io=class{constructor(e){this.etpRepository=e}async handle(e,r){try{let{id:t,code:i,title:n,description:s,notes:a,leaderId:c,deputyLeaderId:d,secretaryId:h,memberIds:j}=la.parse({id:e.params.id,...e.body});if(!await this.etpRepository.findById(t))throw new p("O ETP n\xE3o existe.");if(i){let Y=await this.etpRepository.findByCode(i);if(Y&&Y.id!==t)throw new oe("J\xE1 existe um ETP com este c\xF3digo.")}return await this.etpRepository.update({id:t,code:i,title:n,description:s,notes:a,leaderId:c,deputyLeaderId:d,secretaryId:h,memberIds:j}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var Oh=1,kh=9,bo=C.object({id:C.uuid(),registrationNumber:C.string(),mainEtps:C.string().nullable(),formations:C.string().nullable(),degrees:C.array(C.enum(ua.Degree)),occupations:C.string(),seniority:C.enum(ua.Seniority),institutions:C.string(),biography:C.string().nullable(),createdAt:C.date(),updatedAt:C.date(),user:C.object({id:C.uuid(),name:C.string(),emailAddress:C.string(),avatarUrl:C.string().nullable(),orcid:C.string().nullable(),phone:C.string().nullable(),lattesUrl:C.string().nullable(),role:C.enum(ua.UserRole)})}),Wp=C.object({id:C.uuid(),code:C.string(),title:C.string(),description:C.string().nullable(),notes:C.string().nullable(),createdAt:C.date(),updatedAt:C.date(),leader:C.object({id:C.uuid(),researcher:bo}).nullable(),deputyLeader:C.object({id:C.uuid(),researcher:bo}).nullable(),secretary:C.object({id:C.uuid(),researcher:bo}).nullable(),members:C.array(bo)}),zp={method:"post",path:"/etp",tags:["ETPs"],summary:"Create a new ETP with single leader, deputy leader, secretary and multiple members",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:ma}}}},responses:{201:{description:"ETP created successfully",summary:"ETP Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:C.object({errors:C.record(C.string(),C.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:C.object({message:C.string()})}}},409:{description:"ETP with this code already exists",summary:"Conflict",content:{"application/json":{schema:C.object({message:C.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:C.object({message:C.string()})}}}}},Hp={method:"get",path:"/etp",tags:["ETPs"],summary:"List all ETPs with pagination and filters",request:{query:C.object({page:C.coerce.number().min(1).default(Oh).optional(),limit:C.coerce.number().min(1).default(kh).optional(),code:C.string().optional(),title:C.string().optional(),description:C.string().optional(),notes:C.string().optional(),orderBy:C.enum(["asc","desc"]).optional()})},responses:{200:{description:"List of ETPs retrieved successfully with pagination",summary:"ETPs Retrieved",content:{"application/json":{schema:C.object({page:C.number(),totalPages:C.number(),offset:C.number(),limit:C.number(),etps:C.array(Wp)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:C.object({message:C.string()})}}}}},Vp={method:"get",path:"/etp/{id}",tags:["ETPs"],summary:"Find ETP by ID",request:{params:Ro},responses:{200:{description:"ETP details retrieved successfully",summary:"ETP Retrieved",content:{"application/json":{schema:Wp}}},400:{description:"Invalid ETP ID format",summary:"Validation Error",content:{"application/json":{schema:C.object({errors:C.record(C.string(),C.string())})}}},404:{description:"ETP not found with the provided ID",summary:"ETP Not Found",content:{"application/json":{schema:C.object({message:C.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:C.object({message:C.string()})}}}}},Zp={method:"put",path:"/etp/{id}",tags:["ETPs"],summary:"Update ETP and manage user relationships (single leader, deputy leader, secretary, multiple members)",security:[{bearerAuth:[]}],request:{params:Ro,body:{content:{"application/json":{schema:la.omit({id:!0})}}}},responses:{200:{description:"ETP updated successfully",summary:"ETP Updated"},400:{description:"Invalid input data or ETP ID format",summary:"Validation Error",content:{"application/json":{schema:C.object({errors:C.record(C.string(),C.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:C.object({message:C.string()})}}},404:{description:"ETP not found with the provided ID",summary:"ETP Not Found",content:{"application/json":{schema:C.object({message:C.string()})}}},409:{description:"ETP with this code already exists",summary:"Conflict",content:{"application/json":{schema:C.object({message:C.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:C.object({message:C.string()})}}}}},Kp={method:"delete",path:"/etp/{id}",tags:["ETPs"],summary:"Delete ETP",security:[{bearerAuth:[]}],request:{params:pa},responses:{200:{description:"ETP deleted successfully",summary:"ETP Deleted"},400:{description:"Invalid ETP ID format",summary:"Validation Error",content:{"application/json":{schema:C.object({errors:C.record(C.string(),C.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:C.object({message:C.string()})}}},404:{description:"ETP not found with the provided ID",summary:"ETP Not Found",content:{"application/json":{schema:C.object({message:C.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:C.object({message:C.string()})}}}}};import{EventFormat as rR,EventStatus as oR}from"@prisma/client";import O from"zod";import{extendZodWithOpenApi as Nh}from"@asteasolutions/zod-to-openapi";import{EventFormat as Co,EventStatus as ga}from"@prisma/client";import be from"zod";var Gh=5,Jp=1024,Lh=Jp*Jp,_h=Gh*Lh;Nh(be);var fa=be.object({title:be.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio"),description:be.string().optional(),startDate:be.coerce.date(),endDate:be.coerce.date(),location:be.string().optional(),format:be.enum(Co).default(Co.ONLINE),eventLink:be.string().url("Link do evento deve ser uma URL v\xE1lida").optional().or(be.literal("")),status:be.enum(ga).default(ga.PENDING),image:be.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=_h,"A imagem deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.")}).refine(o=>o.format===Co.ONLINE?!!o.eventLink:o.format===Co.IN_PERSON?!!o.location:!0,{message:"Eventos online devem ter link e eventos presenciais devem ter localiza\xE7\xE3o",path:["format"]}),So=class{constructor(e,r){this.eventRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{title:t,description:i,startDate:n,endDate:s,location:a,format:c,eventLink:d,status:h,image:j}=fa.parse({...e.body,image:e.file}),q=await this.eventRepository.create({title:t,description:i,startDate:n,endDate:s,location:a||void 0,format:c,eventLink:d||void 0,status:h??ga.PENDING}),Y=await this.firebaseStorageService.uploadFile({file:j,folder:P.EVENT,id:q.id});return await this.eventRepository.update({id:q.id,imageUrl:Y}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as Wh}from"@asteasolutions/zod-to-openapi";import ya from"zod";Wh(ya);var ha=ya.object({id:ya.uuid()}),wo=class{constructor(e){this.eventRepository=e}async handle(e,r){try{let{id:t}=ha.parse({id:e.params.id});if(!await this.eventRepository.findById(t))throw new p("O evento n\xE3o existe.");return await this.eventRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as zh}from"@asteasolutions/zod-to-openapi";import Ra from"zod";zh(Ra);var Eo=Ra.object({id:Ra.uuid()}),vo=class{constructor(e){this.eventRepository=e}async handle(e,r){try{let{id:t}=Eo.parse({id:e.params.id}),i=await this.eventRepository.findById(t);if(!i)throw new p("O evento n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as Hh}from"@asteasolutions/zod-to-openapi";import{EventFormat as Vh,EventStatus as Zh}from"@prisma/client";import tt from"zod";var Kh=1,Jh=10;Hh(tt);var Ia=tt.object({page:tt.coerce.number().min(1).default(Kh),limit:tt.coerce.number().min(1).default(Jh),title:tt.string().optional(),status:tt.nativeEnum(Zh).optional(),format:tt.nativeEnum(Vh).optional(),orderBy:tt.enum(["asc","desc"]).optional()}),jo=class{constructor(e){this.eventRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=Ia.parse(e.query),s=i*t-i,[a,c]=await Promise.all([this.eventRepository.find({pagination:{offset:s,limit:i},filter:n}),this.eventRepository.count({filter:n})]),d=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:d,offset:s,limit:i,events:a})}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as Yh}from"@asteasolutions/zod-to-openapi";import{EventFormat as Xh,EventStatus as $h}from"@prisma/client";import ue from"zod";var Qh=5,Yp=1024,eR=Yp*Yp,tR=Qh*eR;Yh(ue);var ba=ue.object({id:ue.uuid(),title:ue.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio").optional(),description:ue.string().optional(),startDate:ue.coerce.date().optional(),endDate:ue.coerce.date().optional(),location:ue.string().optional(),format:ue.nativeEnum(Xh).optional(),eventLink:ue.string().url("Link do evento deve ser uma URL v\xE1lida").optional().or(ue.literal("")),status:ue.nativeEnum($h).optional(),image:ue.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=tR,"A imagem deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.").optional()}),xo=class{constructor(e,r){this.eventRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,title:i,description:n,startDate:s,endDate:a,location:c,format:d,eventLink:h,status:j,image:q}=ba.parse({id:e.params.id,...e.body,image:e.file});if(!await this.eventRepository.findById(t))throw new p("O evento n\xE3o existe.");let $;return q&&($=await this.firebaseStorageService.uploadFile({file:q,folder:P.EVENT,id:t})),await this.eventRepository.update({id:t,title:i,description:n,startDate:s,endDate:a,location:c||void 0,format:d,eventLink:h||void 0,status:j,imageUrl:$}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var Xp=O.object({id:O.uuid(),title:O.string(),description:O.string().nullable(),imageUrl:O.string().nullable(),startDate:O.date(),endDate:O.date(),location:O.string().nullable(),status:O.nativeEnum(oR),format:O.nativeEnum(rR),eventLink:O.string().nullable(),createdAt:O.date(),updatedAt:O.date()}),$p={method:"post",path:"/event",tags:["Events"],summary:"Create a new event",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:fa}}}},responses:{201:{description:"Event created successfully",summary:"Event Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:O.object({errors:O.record(O.string(),O.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:O.object({message:O.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:O.object({message:O.string()})}}}}},Qp={method:"get",path:"/event",tags:["Events"],summary:"List all events with pagination and filters",request:{query:Ia},responses:{200:{description:"List of events retrieved successfully with pagination",summary:"Events Retrieved",content:{"application/json":{schema:O.object({page:O.number(),totalPages:O.number(),offset:O.number(),limit:O.number(),events:O.array(Xp)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:O.object({errors:O.record(O.string(),O.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:O.object({message:O.string()})}}}}},ed={method:"get",path:"/event/{id}",tags:["Events"],summary:"Find event by ID",request:{params:Eo},responses:{200:{description:"Event details retrieved successfully",summary:"Event Retrieved",content:{"application/json":{schema:Xp}}},400:{description:"Invalid event ID format",summary:"Validation Error",content:{"application/json":{schema:O.object({errors:O.record(O.string(),O.string())})}}},404:{description:"Event not found with the provided ID",summary:"Event Not Found",content:{"application/json":{schema:O.object({message:O.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:O.object({message:O.string()})}}}}},td={method:"put",path:"/event/{id}",tags:["Events"],summary:"Update event",security:[{bearerAuth:[]}],request:{params:Eo,body:{content:{"multipart/form-data":{schema:ba.omit({id:!0})}}}},responses:{200:{description:"Event updated successfully",summary:"Event Updated"},400:{description:"Invalid input data or event ID format",summary:"Validation Error",content:{"application/json":{schema:O.object({errors:O.record(O.string(),O.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:O.object({message:O.string()})}}},404:{description:"Event not found with the provided ID",summary:"Event Not Found",content:{"application/json":{schema:O.object({message:O.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:O.object({message:O.string()})}}}}},rd={method:"delete",path:"/event/{id}",tags:["Events"],summary:"Delete event",security:[{bearerAuth:[]}],request:{params:ha},responses:{200:{description:"Event deleted successfully",summary:"Event Deleted"},400:{description:"Invalid event ID format",summary:"Validation Error",content:{"application/json":{schema:O.object({errors:O.record(O.string(),O.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:O.object({message:O.string()})}}},404:{description:"Event not found with the provided ID",summary:"Event Not Found",content:{"application/json":{schema:O.object({message:O.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:O.object({message:O.string()})}}}}};import{InMemoriamRole as bR}from"@prisma/client";import T from"zod";import{extendZodWithOpenApi as iR}from"@asteasolutions/zod-to-openapi";import{InMemoriamRole as nR}from"@prisma/client";import rt from"zod";var id=2,od=1024,sR=od*od,aR=id*sR;iR(rt);var Ca=rt.object({name:rt.string().min(1,"Nome \xE9 obrigat\xF3rio"),birthDate:rt.coerce.date(),deathDate:rt.coerce.date(),biography:rt.string().optional(),photo:rt.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=aR,`A imagem deve ter no m\xE1ximo ${id}MB.`).optional(),role:rt.enum(nR)}).refine(o=>o.deathDate>o.birthDate,{message:"Data de falecimento deve ser posterior \xE0 data de nascimento",path:["deathDate"]}),Po=class{constructor(e,r){this.inMemoriamRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{name:t,birthDate:i,deathDate:n,biography:s,role:a,photo:c}=Ca.parse({...e.body,photo:e.file}),d=await this.inMemoriamRepository.create({name:t,birthDate:i,deathDate:n,biography:s??void 0,role:a}),h;return c&&(h=await this.firebaseStorageService.uploadFile({file:c,id:d.id,folder:P.IN_MEMORIAM}),await this.inMemoriamRepository.update({id:d.id,photoUrl:h})),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as mR}from"@asteasolutions/zod-to-openapi";import Sa from"zod";mR(Sa);var wa=Sa.object({id:Sa.uuid()}),Ao=class{constructor(e,r){this.inMemoriamRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=wa.parse({id:e.params.id}),i=await this.inMemoriamRepository.findById(t);if(!i)throw new p("O in memoriam n\xE3o existe.");return i.photoUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.photoUrl}),await this.inMemoriamRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as cR}from"@asteasolutions/zod-to-openapi";import va from"zod";cR(va);var To=va.object({id:va.uuid()}),Mo=class{constructor(e){this.inMemoriamRepository=e}async handle(e,r){try{let{id:t}=To.parse({id:e.params.id}),i=await this.inMemoriamRepository.findById(t);if(!i)throw new p("O in memoriam n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as pR}from"@asteasolutions/zod-to-openapi";import{InMemoriamRole as dR}from"@prisma/client";import Ea from"zod";pR(Ea);var ja=Ea.object({role:Ea.enum(dR)}),Do=class{constructor(e){this.inMemoriamRepository=e}async handle(e,r){try{let{role:t}=ja.parse({role:e.params.role}),i=await this.inMemoriamRepository.findByRole(t);return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as lR}from"@asteasolutions/zod-to-openapi";import{InMemoriamRole as uR}from"@prisma/client";import ot from"zod";var gR=1,fR=9;lR(ot);var xa=ot.object({page:ot.coerce.number().min(1).default(gR),limit:ot.coerce.number().min(1).default(fR),name:ot.string().optional(),biography:ot.string().optional(),role:ot.enum(uR).optional(),orderBy:ot.enum(["asc","desc"]).default("desc")}),Fo=class{constructor(e){this.inMemoriamRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=xa.parse(e.query),s=i*t-i,[a,c]=await Promise.all([this.inMemoriamRepository.find({pagination:{offset:s,limit:i},filter:n}),this.inMemoriamRepository.count({filter:n})]),d=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:d,offset:s,limit:i,inMemoriam:a})}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as yR}from"@asteasolutions/zod-to-openapi";import{InMemoriamRole as hR}from"@prisma/client";import Ne from"zod";var sd=2,nd=1024,RR=nd*nd,IR=sd*RR;yR(Ne);var Pa=Ne.object({id:Ne.uuid(),name:Ne.string().min(1,"Nome \xE9 obrigat\xF3rio").optional(),birthDate:Ne.coerce.date().optional(),deathDate:Ne.coerce.date().optional(),biography:Ne.string().optional(),photo:Ne.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=IR,`A imagem deve ter no m\xE1ximo ${sd}MB.`).optional(),role:Ne.enum(hR).optional()}).refine(o=>o.birthDate&&o.deathDate?o.deathDate>o.birthDate:!0,{message:"Data de falecimento deve ser posterior \xE0 data de nascimento",path:["deathDate"]}),Bo=class{constructor(e,r){this.inMemoriamRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,name:i,birthDate:n,deathDate:s,biography:a,photo:c,role:d}=Pa.parse({id:e.params.id,...e.body,photo:e.file}),h=await this.inMemoriamRepository.findById(t);if(!h)throw new p("O registro in memoriam n\xE3o existe.");let j=h.photoUrl;return c&&(j=await this.firebaseStorageService.uploadFile({file:c,id:t,folder:P.IN_MEMORIAM})),await this.inMemoriamRepository.update({id:t,name:i,birthDate:n,deathDate:s,biography:a,photoUrl:j??void 0,role:d}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var Aa=T.object({id:T.uuid(),name:T.string(),birthDate:T.date(),deathDate:T.date(),biography:T.string().nullable(),photoUrl:T.string().nullable(),role:T.enum(bR),createdAt:T.date(),updatedAt:T.date()}),ad={method:"post",path:"/in-memoriam",tags:["In Memoriam"],summary:"Create a new in memoriam record with optional photo upload",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:Ca}}}},responses:{201:{description:"In memoriam record created successfully",summary:"In Memoriam Created"},400:{description:"Invalid input data, missing required fields, or invalid photo format/size",summary:"Validation Error",content:{"application/json":{schema:T.object({errors:T.record(T.string(),T.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:T.object({message:T.string()})}}},409:{description:"In memoriam record with this name already exists",summary:"Conflict",content:{"application/json":{schema:T.object({message:T.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:T.object({message:T.string()})}}}}},md={method:"get",path:"/in-memoriam",tags:["In Memoriam"],summary:"List all in memoriam records with pagination and filters",request:{query:xa},responses:{200:{description:"List of in memoriam records retrieved successfully with pagination",summary:"In Memoriam Records Retrieved",content:{"application/json":{schema:T.object({page:T.number(),totalPages:T.number(),offset:T.number(),limit:T.number(),inMemoriam:T.array(Aa)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:T.object({errors:T.record(T.string(),T.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:T.object({message:T.string()})}}}}},cd={method:"get",path:"/in-memoriam/{id}",tags:["In Memoriam"],summary:"Find in memoriam record by ID",request:{params:To},responses:{200:{description:"In memoriam record details retrieved successfully",summary:"In Memoriam Record Retrieved",content:{"application/json":{schema:Aa}}},400:{description:"Invalid in memoriam record ID format",summary:"Validation Error",content:{"application/json":{schema:T.object({errors:T.record(T.string(),T.string())})}}},404:{description:"In memoriam record not found with the provided ID",summary:"In Memoriam Record Not Found",content:{"application/json":{schema:T.object({message:T.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:T.object({message:T.string()})}}}}},pd={method:"put",path:"/in-memoriam/{id}",tags:["In Memoriam"],summary:"Update in memoriam record with optional photo upload",security:[{bearerAuth:[]}],request:{params:To,body:{content:{"multipart/form-data":{schema:Pa.omit({id:!0})}}}},responses:{200:{description:"In memoriam record updated successfully",summary:"In Memoriam Record Updated"},400:{description:"Invalid input data, in memoriam record ID format, or invalid photo format/size",summary:"Validation Error",content:{"application/json":{schema:T.object({errors:T.record(T.string(),T.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:T.object({message:T.string()})}}},404:{description:"In memoriam record not found with the provided ID",summary:"In Memoriam Record Not Found",content:{"application/json":{schema:T.object({message:T.string()})}}},409:{description:"In memoriam record with this name already exists",summary:"Conflict",content:{"application/json":{schema:T.object({message:T.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:T.object({message:T.string()})}}}}},dd={method:"delete",path:"/in-memoriam/{id}",tags:["In Memoriam"],summary:"Delete in memoriam record",security:[{bearerAuth:[]}],request:{params:wa},responses:{200:{description:"In memoriam record deleted successfully",summary:"In Memoriam Record Deleted"},400:{description:"Invalid in memoriam record ID format",summary:"Validation Error",content:{"application/json":{schema:T.object({errors:T.record(T.string(),T.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:T.object({message:T.string()})}}},404:{description:"In memoriam record not found with the provided ID",summary:"In Memoriam Record Not Found",content:{"application/json":{schema:T.object({message:T.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:T.object({message:T.string()})}}}}},aP={method:"get",path:"/in-memoriam/role/{role}",tags:["In Memoriam"],summary:"Find in memoriam records by role",request:{params:ja},responses:{200:{description:"In memoriam records retrieved successfully by role",summary:"In Memoriam Records Retrieved by Role",content:{"application/json":{schema:T.array(Aa)}}},400:{description:"Invalid role parameter provided",summary:"Validation Error",content:{"application/json":{schema:T.object({errors:T.record(T.string(),T.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:T.object({message:T.string()})}}}}};import V from"zod";import{extendZodWithOpenApi as CR}from"@asteasolutions/zod-to-openapi";import Sr from"zod";var ud=2,ld=1024,SR=ld*ld,wR=ud*SR;CR(Sr);var Ma=Sr.object({image:Sr.any().refine(o=>o==null||typeof o!="object"||typeof o.size!="number"?!1:o.size<=wR,`A imagem deve ter no m\xE1ximo ${ud}MB.`),caption:Sr.string().optional(),congressId:Sr.uuid()}),Uo=class{constructor(e,r,t){this.internationalScientificCongressGalleryRepository=e;this.internationalScientificCongressRepository=r;this.firebaseStorageService=t}async handle(e,r){try{let{image:t,caption:i,congressId:n}=Ma.parse({...e.body,...e.params,image:e.file});if(!await this.internationalScientificCongressRepository.findById(n))throw new p("O congresso n\xE3o existe.");let a=await this.internationalScientificCongressGalleryRepository.create({imageUrl:"",caption:i||void 0,congressId:n}),c=await this.firebaseStorageService.uploadFile({file:t,id:a.id,folder:P.INTERNATIONAL_SCIENTIFIC_CONGRESS_GALLERY});return await this.internationalScientificCongressGalleryRepository.update({id:a.id,imageUrl:c}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as vR}from"@asteasolutions/zod-to-openapi";import Ta from"zod";vR(Ta);var Oo=Ta.object({id:Ta.uuid()}),qo=class{constructor(e){this.internationalScientificCongressGalleryRepository=e}async handle(e,r){try{let{id:t}=Oo.parse({id:e.params.id});if(!await this.internationalScientificCongressGalleryRepository.findById(t))throw new p("A imagem da galeria n\xE3o existe.");return await this.internationalScientificCongressGalleryRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as ER}from"@asteasolutions/zod-to-openapi";import Kt from"zod";var jR=1,xR=9;ER(Kt);var Da=Kt.object({congressId:Kt.uuid(),page:Kt.coerce.number().min(1).default(jR),limit:Kt.coerce.number().min(1).default(xR),caption:Kt.string().optional()}),ko=class{constructor(e){this.internationalScientificCongressGalleryRepository=e}async handle(e,r){try{let{congressId:t,page:i,limit:n,...s}=Da.parse({congressId:e.params.congressId,...e.query}),a=n*i-n,[c,d]=await Promise.all([this.internationalScientificCongressGalleryRepository.findByCongressId({pagination:{offset:a,limit:n},filter:{congressId:t,...s}}),this.internationalScientificCongressGalleryRepository.count({filter:{congressId:t,caption:s.caption}})]),h=Math.max(Math.ceil(d/n),1);return r.status(200).json({page:i,totalPages:h,offset:a,limit:n,galleryImages:c})}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as PR}from"@asteasolutions/zod-to-openapi";import wr from"zod";var fd=2,gd=1024,AR=gd*gd,MR=fd*AR;PR(wr);var Fa=wr.object({id:wr.uuid(),image:wr.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=MR,`A imagem deve ter no m\xE1ximo ${fd}MB.`).optional(),caption:wr.string().optional()}),No=class{constructor(e,r){this.internationalScientificCongressGalleryRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,image:i,caption:n}=Fa.parse({id:e.params.id,...e.body,image:e.file}),s=await this.internationalScientificCongressGalleryRepository.findById(t);if(!s)throw new p("A imagem da galeria n\xE3o existe.");let a=s.imageUrl;return i&&(a=await this.firebaseStorageService.uploadFile({file:i,id:t,folder:P.INTERNATIONAL_SCIENTIFIC_CONGRESS_GALLERY})),await this.internationalScientificCongressGalleryRepository.update({id:t,imageUrl:a??void 0,caption:n||void 0}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var TR=V.object({id:V.uuid(),imageUrl:V.string(),caption:V.string().nullable(),congressId:V.uuid()}),yd={method:"post",path:"/international-scientific-congress/{congressId}/gallery",tags:["International Scientific Congresses"],summary:"Create a new congress gallery image",security:[{bearerAuth:[]}],request:{params:V.object({congressId:V.uuid()}),body:{content:{"application/json":{schema:Ma.omit({congressId:!0})}}}},responses:{201:{description:"Congress gallery image created successfully",summary:"Congress Gallery Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:V.object({errors:V.record(V.string(),V.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:V.object({message:V.string()})}}},404:{description:"Congress not found with the provided ID",summary:"Congress Not Found",content:{"application/json":{schema:V.object({message:V.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:V.object({message:V.string()})}}}}},hd={method:"get",path:"/international-scientific-congress/{congressId}/gallery",tags:["International Scientific Congresses"],summary:"Find congress gallery images by congress ID",request:{params:Da},responses:{200:{description:"Congress gallery images retrieved successfully by congress ID",summary:"Congress Galleries Retrieved",content:{"application/json":{schema:V.array(TR)}}},400:{description:"Invalid congress ID parameter provided",summary:"Validation Error",content:{"application/json":{schema:V.object({errors:V.record(V.string(),V.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:V.object({message:V.string()})}}}}},Rd={method:"put",path:"/international-scientific-congress/gallery/{id}",tags:["International Scientific Congresses"],summary:"Update congress gallery image",security:[{bearerAuth:[]}],request:{params:Oo,body:{content:{"application/json":{schema:Fa.omit({id:!0})}}}},responses:{200:{description:"Congress gallery image updated successfully",summary:"Congress Gallery Updated"},400:{description:"Invalid input data or gallery ID format",summary:"Validation Error",content:{"application/json":{schema:V.object({errors:V.record(V.string(),V.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:V.object({message:V.string()})}}},404:{description:"Congress gallery image not found with the provided ID",summary:"Congress Gallery Not Found",content:{"application/json":{schema:V.object({message:V.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:V.object({message:V.string()})}}}}},Id={method:"delete",path:"/international-scientific-congress/gallery/{id}",tags:["International Scientific Congresses"],summary:"Delete congress gallery image",security:[{bearerAuth:[]}],request:{params:Oo},responses:{200:{description:"Congress gallery image deleted successfully",summary:"Congress Gallery Deleted"},400:{description:"Invalid gallery ID format",summary:"Validation Error",content:{"application/json":{schema:V.object({errors:V.record(V.string(),V.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:V.object({message:V.string()})}}},404:{description:"Congress gallery image not found with the provided ID",summary:"Congress Gallery Not Found",content:{"application/json":{schema:V.object({message:V.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:V.object({message:V.string()})}}}}};import Z from"zod";import{extendZodWithOpenApi as DR}from"@asteasolutions/zod-to-openapi";import vr from"zod";var Cd=2,bd=1024,FR=bd*bd,BR=Cd*FR;DR(vr);var Ba=vr.object({name:vr.string().min(1,"Nome \xE9 obrigat\xF3rio"),logo:vr.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=BR,`A imagem deve ter no m\xE1ximo ${Cd}MB.`).optional(),congressId:vr.uuid()}),Go=class{constructor(e,r,t){this.internationalScientificCongressPartnerRepository=e;this.internationalScientificCongressRepository=r;this.firebaseStorageService=t}async handle(e,r){try{let{name:t,logo:i,congressId:n}=Ba.parse({...e.body,...e.params,logo:e.file});if(!await this.internationalScientificCongressRepository.findById(n))throw new p("O congresso n\xE3o existe.");let a=await this.internationalScientificCongressPartnerRepository.create({name:t,congressId:n}),c;return i&&(c=await this.firebaseStorageService.uploadFile({file:i,id:a.id,folder:P.PARTNER}),await this.internationalScientificCongressPartnerRepository.update({id:a.id,logoUrl:c})),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as UR}from"@asteasolutions/zod-to-openapi";import Ua from"zod";UR(Ua);var _o=Ua.object({id:Ua.uuid()}),Lo=class{constructor(e){this.internationalScientificCongressPartnerRepository=e}async handle(e,r){try{let{id:t}=_o.parse({id:e.params.id});if(!await this.internationalScientificCongressPartnerRepository.findById(t))throw new p("O parceiro n\xE3o existe.");return await this.internationalScientificCongressPartnerRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as qR}from"@asteasolutions/zod-to-openapi";import Jt from"zod";var OR=1,kR=9;qR(Jt);var qa=Jt.object({congressId:Jt.uuid(),page:Jt.coerce.number().min(1).optional(),limit:Jt.coerce.number().min(1).optional(),name:Jt.string().optional()}),Wo=class{constructor(e){this.internationalScientificCongressPartnerRepository=e}async handle(e,r){try{let{congressId:t,page:i,limit:n,...s}=qa.parse({congressId:e.params.congressId,...e.query});if(i!==void 0&&n!==void 0){let c=i||OR,d=n||kR,h=d*c-d,[j,q]=await Promise.all([this.internationalScientificCongressPartnerRepository.findByCongressId({pagination:{offset:h,limit:d},filter:{congressId:t,...s}}),this.internationalScientificCongressPartnerRepository.count({filter:{congressId:t,name:s.name}})]),Y=Math.max(Math.ceil(q/d),1);return r.status(200).json({page:c,totalPages:Y,offset:h,limit:d,partners:j})}let a=await this.internationalScientificCongressPartnerRepository.findByCongressId({filter:{congressId:t,...s}});return r.status(200).json(a)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as NR}from"@asteasolutions/zod-to-openapi";import Er from"zod";var wd=2,Sd=1024,GR=Sd*Sd,LR=wd*GR;NR(Er);var Oa=Er.object({id:Er.uuid(),name:Er.string().min(1,"Nome \xE9 obrigat\xF3rio").optional(),logo:Er.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=LR,`A imagem deve ter no m\xE1ximo ${wd}MB.`).optional()}),zo=class{constructor(e,r){this.internationalScientificCongressPartnerRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,name:i,logo:n}=Oa.parse({id:e.params.id,...e.body,logo:e.file}),s=await this.internationalScientificCongressPartnerRepository.findById(t);if(!s)throw new p("O parceiro n\xE3o existe.");let a=s.logoUrl;return n&&(a=await this.firebaseStorageService.uploadFile({file:n,id:t,folder:P.PARTNER})),await this.internationalScientificCongressPartnerRepository.update({id:t,name:i,logoUrl:a??void 0}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var _R=Z.object({id:Z.uuid(),name:Z.string(),logoUrl:Z.string().nullable(),congressId:Z.uuid()}),vd={method:"post",path:"/international-scientific-congress/{congressId}/partner",tags:["International Scientific Congresses"],summary:"Create a new congress partner",security:[{bearerAuth:[]}],request:{params:Z.object({congressId:Z.uuid()}),body:{content:{"application/json":{schema:Ba.omit({congressId:!0})}}}},responses:{201:{description:"Congress partner created successfully",summary:"Congress Partner Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:Z.object({errors:Z.record(Z.string(),Z.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:Z.object({message:Z.string()})}}},404:{description:"Congress not found with the provided ID",summary:"Congress Not Found",content:{"application/json":{schema:Z.object({message:Z.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Z.object({message:Z.string()})}}}}},Ed={method:"get",path:"/international-scientific-congress/{congressId}/partner",tags:["International Scientific Congresses"],summary:"Find congress partners by congress ID",request:{params:qa},responses:{200:{description:"Congress partners retrieved successfully by congress ID",summary:"Congress Partners Retrieved",content:{"application/json":{schema:Z.array(_R)}}},400:{description:"Invalid congress ID parameter provided",summary:"Validation Error",content:{"application/json":{schema:Z.object({errors:Z.record(Z.string(),Z.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Z.object({message:Z.string()})}}}}},jd={method:"put",path:"/international-scientific-congress/partner/{id}",tags:["International Scientific Congresses"],summary:"Update congress partner",security:[{bearerAuth:[]}],request:{params:_o,body:{content:{"application/json":{schema:Oa.omit({id:!0})}}}},responses:{200:{description:"Congress partner updated successfully",summary:"Congress Partner Updated"},400:{description:"Invalid input data or partner ID format",summary:"Validation Error",content:{"application/json":{schema:Z.object({errors:Z.record(Z.string(),Z.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:Z.object({message:Z.string()})}}},404:{description:"Congress partner not found with the provided ID",summary:"Congress Partner Not Found",content:{"application/json":{schema:Z.object({message:Z.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Z.object({message:Z.string()})}}}}},xd={method:"delete",path:"/international-scientific-congress/partner/{id}",tags:["International Scientific Congresses"],summary:"Delete congress partner",security:[{bearerAuth:[]}],request:{params:_o},responses:{200:{description:"Congress partner deleted successfully",summary:"Congress Partner Deleted"},400:{description:"Invalid partner ID format",summary:"Validation Error",content:{"application/json":{schema:Z.object({errors:Z.record(Z.string(),Z.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:Z.object({message:Z.string()})}}},404:{description:"Congress partner not found with the provided ID",summary:"Congress Partner Not Found",content:{"application/json":{schema:Z.object({message:Z.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Z.object({message:Z.string()})}}}}};import l from"zod";import{extendZodWithOpenApi as WR}from"@asteasolutions/zod-to-openapi";import re from"zod";WR(re);var ka=re.object({title:re.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio"),edition:re.coerce.number().int().positive("Edi\xE7\xE3o deve ser um n\xFAmero positivo"),startDate:re.coerce.date(),endDate:re.coerce.date(),description:re.string().optional(),location:re.string().optional(),congressLink:re.url("Link do congresso deve ser uma URL v\xE1lida").optional().or(re.literal("")),noticeUrl:re.url("URL do edital deve ser uma URL v\xE1lida").optional().or(re.literal("")),scheduleUrl:re.url("URL do cronograma deve ser uma URL v\xE1lida").optional().or(re.literal("")),programUrl:re.url("URL da programa\xE7\xE3o deve ser uma URL v\xE1lida").optional().or(re.literal("")),adminReportUrl:re.url("URL do relat\xF3rio administrativo deve ser uma URL v\xE1lida").optional().or(re.literal("")),proceedingsUrl:re.url("URL dos anais deve ser uma URL v\xE1lida").optional().or(re.literal(""))}).refine(o=>o.endDate>=o.startDate,{message:"Data de t\xE9rmino deve ser posterior ou igual \xE0 data de in\xEDcio",path:["endDate"]}),Ho=class{constructor(e){this.internationalScientificCongressRepository=e}async handle(e,r){try{let t=ka.parse(e.body);return await this.internationalScientificCongressRepository.create(t),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as zR}from"@asteasolutions/zod-to-openapi";import Na from"zod";zR(Na);var Ga=Na.object({id:Na.uuid()}),Vo=class{constructor(e){this.internationalScientificCongressRepository=e}async handle(e,r){try{let{id:t}=Ga.parse({id:e.params.id});if(!await this.internationalScientificCongressRepository.findById(t))throw new p("O congresso n\xE3o existe.");return await this.internationalScientificCongressRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as HR}from"@asteasolutions/zod-to-openapi";import La from"zod";HR(La);var _a=La.object({edition:La.coerce.number().int().positive()}),Zo=class{constructor(e){this.internationalScientificCongressRepository=e}async handle(e,r){try{let{edition:t}=_a.parse({edition:e.params.edition}),i=await this.internationalScientificCongressRepository.findByEdition(t);return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as VR}from"@asteasolutions/zod-to-openapi";import Wa from"zod";VR(Wa);var Jo=Wa.object({id:Wa.uuid()}),Ko=class{constructor(e){this.internationalScientificCongressRepository=e}async handle(e,r){try{let{id:t}=Jo.parse({id:e.params.id}),i=await this.internationalScientificCongressRepository.findById(t);if(!i)throw new p("O congresso n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as ZR}from"@asteasolutions/zod-to-openapi";import it from"zod";var KR=1,JR=10;ZR(it);var za=it.object({page:it.coerce.number().min(1).default(KR),limit:it.coerce.number().min(1).default(JR),title:it.string().optional(),edition:it.coerce.number().int().positive().optional(),location:it.string().optional(),orderBy:it.enum(["asc","desc"]).optional()}),Yo=class{constructor(e){this.internationalScientificCongressRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=za.parse(e.query),s=i*t-i,[a,c]=await Promise.all([this.internationalScientificCongressRepository.find({pagination:{offset:s,limit:i},filter:n}),this.internationalScientificCongressRepository.count({filter:n})]),d=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:d,offset:s,limit:i,congresses:a})}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as YR}from"@asteasolutions/zod-to-openapi";import te from"zod";YR(te);var Ha=te.object({id:te.uuid(),title:te.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio").optional(),edition:te.coerce.number().int().positive("Edi\xE7\xE3o deve ser um n\xFAmero positivo").optional(),startDate:te.coerce.date().optional(),endDate:te.coerce.date().optional(),description:te.string().optional(),location:te.string().optional(),congressLink:te.url("Link do congresso deve ser uma URL v\xE1lida").optional().or(te.literal("")),noticeUrl:te.url("URL do edital deve ser uma URL v\xE1lida").optional().or(te.literal("")),scheduleUrl:te.url("URL do cronograma deve ser uma URL v\xE1lida").optional().or(te.literal("")),programUrl:te.url("URL da programa\xE7\xE3o deve ser uma URL v\xE1lida").optional().or(te.literal("")),adminReportUrl:te.url("URL do relat\xF3rio administrativo deve ser uma URL v\xE1lida").optional().or(te.literal("")),proceedingsUrl:te.url("URL dos anais deve ser uma URL v\xE1lida").optional().or(te.literal(""))}),Xo=class{constructor(e){this.internationalScientificCongressRepository=e}async handle(e,r){try{let{id:t,...i}=Ha.parse({id:e.params.id,...e.body});if(!await this.internationalScientificCongressRepository.findById(t))throw new p("O congresso n\xE3o existe.");return await this.internationalScientificCongressRepository.update({...i,id:t}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var XR=9,$R=l.object({image:l.any().openapi({type:"string",format:"binary"}),caption:l.string().optional()}),QR=l.object({image:l.any().openapi({type:"string",format:"binary"}).optional(),caption:l.string().optional()}),eI=l.object({id:l.uuid(),name:l.string(),logoUrl:l.string().nullable(),congressId:l.uuid()}),Va=l.object({id:l.uuid(),imageUrl:l.string(),caption:l.string().nullable(),congressId:l.uuid()}),Za=l.object({id:l.uuid(),title:l.string(),edition:l.number(),startDate:l.date(),endDate:l.date(),description:l.string().nullable(),location:l.string().nullable(),congressLink:l.string().nullable(),noticeUrl:l.string().nullable(),scheduleUrl:l.string().nullable(),programUrl:l.string().nullable(),adminReportUrl:l.string().nullable(),proceedingsUrl:l.string().nullable(),partners:l.array(eI),galleries:l.array(Va),createdAt:l.date(),updatedAt:l.date()}),Pd={method:"post",path:"/international-scientific-congress",tags:["International Scientific Congresses"],summary:"Create a new international scientific congress",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:ka}}}},responses:{201:{description:"International scientific congress created successfully",summary:"International Scientific Congress Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:l.object({errors:l.record(l.string(),l.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:l.object({message:l.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:l.object({message:l.string()})}}}}},Ad={method:"get",path:"/international-scientific-congress",tags:["International Scientific Congresses"],summary:"List all international scientific congresses with pagination and filters",request:{query:za},responses:{200:{description:"List of international scientific congresses retrieved successfully with pagination",summary:"International Scientific Congresses Retrieved",content:{"application/json":{schema:l.object({page:l.number(),totalPages:l.number(),offset:l.number(),limit:l.number(),congresses:l.array(Za)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:l.object({errors:l.record(l.string(),l.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:l.object({message:l.string()})}}}}},Md={method:"get",path:"/international-scientific-congress/{id}",tags:["International Scientific Congresses"],summary:"Find international scientific congress by ID",request:{params:Jo},responses:{200:{description:"International scientific congress details retrieved successfully",summary:"International Scientific Congress Retrieved",content:{"application/json":{schema:Za}}},400:{description:"Invalid international scientific congress ID format",summary:"Validation Error",content:{"application/json":{schema:l.object({errors:l.record(l.string(),l.string())})}}},404:{description:"International scientific congress not found with the provided ID",summary:"International Scientific Congress Not Found",content:{"application/json":{schema:l.object({message:l.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:l.object({message:l.string()})}}}}},Td={method:"get",path:"/international-scientific-congress/edition/{edition}",tags:["International Scientific Congresses"],summary:"Find international scientific congresses by edition",request:{params:_a},responses:{200:{description:"International scientific congresses retrieved successfully by edition",summary:"International Scientific Congresses Retrieved by Edition",content:{"application/json":{schema:l.array(Za)}}},400:{description:"Invalid edition parameter provided",summary:"Validation Error",content:{"application/json":{schema:l.object({errors:l.record(l.string(),l.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:l.object({message:l.string()})}}}}},Dd={method:"put",path:"/international-scientific-congress/{id}",tags:["International Scientific Congresses"],summary:"Update international scientific congress",security:[{bearerAuth:[]}],request:{params:Jo,body:{content:{"application/json":{schema:Ha.omit({id:!0})}}}},responses:{200:{description:"International scientific congress updated successfully",summary:"International Scientific Congress Updated"},400:{description:"Invalid input data or international scientific congress ID format",summary:"Validation Error",content:{"application/json":{schema:l.object({errors:l.record(l.string(),l.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:l.object({message:l.string()})}}},404:{description:"International scientific congress not found with the provided ID",summary:"International Scientific Congress Not Found",content:{"application/json":{schema:l.object({message:l.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:l.object({message:l.string()})}}}}},Fd={method:"delete",path:"/international-scientific-congress/{id}",tags:["International Scientific Congresses"],summary:"Delete international scientific congress",security:[{bearerAuth:[]}],request:{params:Ga},responses:{200:{description:"International scientific congress deleted successfully",summary:"International Scientific Congress Deleted"},400:{description:"Invalid international scientific congress ID format",summary:"Validation Error",content:{"application/json":{schema:l.object({errors:l.record(l.string(),l.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:l.object({message:l.string()})}}},404:{description:"International scientific congress not found with the provided ID",summary:"International Scientific Congress Not Found",content:{"application/json":{schema:l.object({message:l.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:l.object({message:l.string()})}}}}},oM={method:"post",path:"/international-scientific-congress/{congressId}/gallery",tags:["International Scientific Congress Gallery"],summary:"Create a new gallery image for a congress",security:[{bearerAuth:[]}],request:{params:l.object({congressId:l.uuid()}),body:{content:{"multipart/form-data":{schema:$R}}}},responses:{201:{description:"Gallery image created successfully",summary:"Gallery Image Created"},400:{description:"Invalid input data, missing required fields, or invalid image format/size",summary:"Validation Error",content:{"application/json":{schema:l.object({errors:l.record(l.string(),l.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:l.object({message:l.string()})}}},404:{description:"Congress not found with the provided ID",summary:"Congress Not Found",content:{"application/json":{schema:l.object({message:l.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:l.object({message:l.string()})}}}}},iM={method:"get",path:"/international-scientific-congress/{congressId}/gallery",tags:["International Scientific Congress Gallery"],summary:"List all gallery images for a congress with pagination",request:{params:l.object({congressId:l.uuid()}),query:l.object({page:l.coerce.number().min(1).default(1),limit:l.coerce.number().min(1).default(XR),caption:l.string().optional()})},responses:{200:{description:"Gallery images retrieved successfully with pagination",summary:"Gallery Images Retrieved",content:{"application/json":{schema:l.object({page:l.number(),totalPages:l.number(),offset:l.number(),limit:l.number(),galleries:l.array(Va)})}}},400:{description:"Invalid congress ID format or query parameters",summary:"Validation Error",content:{"application/json":{schema:l.object({errors:l.record(l.string(),l.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:l.object({message:l.string()})}}}}},nM={method:"get",path:"/international-scientific-congress/gallery/{id}",tags:["International Scientific Congress Gallery"],summary:"Find a gallery image by ID",request:{params:l.object({id:l.uuid()})},responses:{200:{description:"Gallery image retrieved successfully",summary:"Gallery Image Retrieved",content:{"application/json":{schema:Va}}},400:{description:"Invalid gallery image ID format",summary:"Validation Error",content:{"application/json":{schema:l.object({errors:l.record(l.string(),l.string())})}}},404:{description:"Gallery image not found with the provided ID",summary:"Gallery Image Not Found",content:{"application/json":{schema:l.object({message:l.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:l.object({message:l.string()})}}}}},sM={method:"put",path:"/international-scientific-congress/gallery/{id}",tags:["International Scientific Congress Gallery"],summary:"Update a gallery image with optional image upload",security:[{bearerAuth:[]}],request:{params:l.object({id:l.uuid()}),body:{content:{"multipart/form-data":{schema:QR}}}},responses:{200:{description:"Gallery image updated successfully",summary:"Gallery Image Updated"},400:{description:"Invalid input data, gallery ID format, or invalid image format/size",summary:"Validation Error",content:{"application/json":{schema:l.object({errors:l.record(l.string(),l.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:l.object({message:l.string()})}}},404:{description:"Gallery image not found with the provided ID",summary:"Gallery Image Not Found",content:{"application/json":{schema:l.object({message:l.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:l.object({message:l.string()})}}}}},aM={method:"delete",path:"/international-scientific-congress/gallery/{id}",tags:["International Scientific Congress Gallery"],summary:"Delete a gallery image",security:[{bearerAuth:[]}],request:{params:l.object({id:l.uuid()})},responses:{200:{description:"Gallery image deleted successfully",summary:"Gallery Image Deleted"},400:{description:"Invalid gallery ID format",summary:"Validation Error",content:{"application/json":{schema:l.object({errors:l.record(l.string(),l.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:l.object({message:l.string()})}}},404:{description:"Gallery image not found with the provided ID",summary:"Gallery Image Not Found",content:{"application/json":{schema:l.object({message:l.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:l.object({message:l.string()})}}}}};import{$Enums as nI}from"@prisma/client";import N from"zod";import{extendZodWithOpenApi as tI}from"@asteasolutions/zod-to-openapi";import Yt from"zod";tI(Yt);var Ka=Yt.object({role:Yt.string().min(1),description:Yt.string().optional(),userId:Yt.uuid(),order:Yt.number().optional()}),$o=class{constructor(e){this.legitimatorCommitteeMemberRepository=e}async handle(e,r){try{let{role:t,description:i,userId:n,order:s}=Ka.parse(e.body);return await this.legitimatorCommitteeMemberRepository.create({role:t,description:i,userId:n,order:s??0}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as rI}from"@asteasolutions/zod-to-openapi";import Ja from"zod";rI(Ja);var Ya=Ja.object({id:Ja.uuid()}),Qo=class{constructor(e){this.legitimatorCommitteeMemberRepository=e}async handle(e,r){try{let{id:t}=Ya.parse({id:e.params.id});if(!await this.legitimatorCommitteeMemberRepository.findById(t))throw new p("O membro do comit\xEA legitimador n\xE3o existe.");return await this.legitimatorCommitteeMemberRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as oI}from"@asteasolutions/zod-to-openapi";import Xa from"zod";oI(Xa);var ti=Xa.object({id:Xa.uuid()}),ei=class{constructor(e){this.legitimatorCommitteeMemberRepository=e}async handle(e,r){try{let{id:t}=ti.parse({id:e.params.id}),i=await this.legitimatorCommitteeMemberRepository.findById(t);if(!i)throw new p("O membro do comit\xEA legitimador n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as iI}from"@asteasolutions/zod-to-openapi";import St from"zod";iI(St);var $a=St.object({id:St.uuid(),role:St.string().min(1).optional(),description:St.string().optional(),userId:St.uuid().optional(),order:St.number().optional()}),ri=class{constructor(e){this.legitimatorCommitteeMemberRepository=e}async handle(e,r){try{let{id:t,role:i,description:n,userId:s,order:a}=$a.parse({id:e.params.id,...e.body});if(!await this.legitimatorCommitteeMemberRepository.findById(t))throw new p("O membro do comit\xEA legitimador n\xE3o existe.");return await this.legitimatorCommitteeMemberRepository.update({id:t,role:i,description:n,userId:s,order:a}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var sI=N.object({id:N.uuid(),name:N.string(),emailAddress:N.string(),avatarUrl:N.string().nullable(),orcid:N.string().nullable(),phone:N.string().nullable(),lattesUrl:N.string().nullable(),role:N.enum(nI.UserRole)}),Bd=N.object({id:N.uuid(),role:N.string(),description:N.string().nullable(),order:N.number(),createdAt:N.date(),updatedAt:N.date(),userId:N.uuid(),user:sI}),Ud={method:"post",path:"/legitimator-committee-member",tags:["Legitimator Committee Members"],summary:"Create a new Legitimator Committee Member",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:Ka}}}},responses:{201:{description:"Legitimator Committee Member created successfully",summary:"Legitimator Committee Member Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:N.object({errors:N.record(N.string(),N.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:N.object({message:N.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:N.object({message:N.string()})}}}}},qd={method:"get",path:"/legitimator-committee-member",tags:["Legitimator Committee Members"],summary:"List all Legitimator Committee Members with filters",request:{query:N.object({role:N.string().optional(),orderBy:N.enum(["asc","desc"]).optional()})},responses:{200:{description:"List of Legitimator Committee Members retrieved successfully",summary:"Legitimator Committee Members Retrieved",content:{"application/json":{schema:N.object({members:N.array(Bd)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:N.object({message:N.string()})}}}}},Od={method:"get",path:"/legitimator-committee-member/{id}",tags:["Legitimator Committee Members"],summary:"Find Legitimator Committee Member by ID",request:{params:ti},responses:{200:{description:"Legitimator Committee Member details retrieved successfully",summary:"Legitimator Committee Member Retrieved",content:{"application/json":{schema:Bd}}},400:{description:"Invalid Legitimator Committee Member ID format",summary:"Validation Error",content:{"application/json":{schema:N.object({errors:N.record(N.string(),N.string())})}}},404:{description:"Legitimator Committee Member not found with the provided ID",summary:"Legitimator Committee Member Not Found",content:{"application/json":{schema:N.object({message:N.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:N.object({message:N.string()})}}}}},kd={method:"put",path:"/legitimator-committee-member/{id}",tags:["Legitimator Committee Members"],summary:"Update Legitimator Committee Member",security:[{bearerAuth:[]}],request:{params:ti,body:{content:{"application/json":{schema:$a.omit({id:!0})}}}},responses:{200:{description:"Legitimator Committee Member updated successfully",summary:"Legitimator Committee Member Updated"},400:{description:"Invalid input data or Legitimator Committee Member ID format",summary:"Validation Error",content:{"application/json":{schema:N.object({errors:N.record(N.string(),N.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:N.object({message:N.string()})}}},404:{description:"Legitimator Committee Member not found with the provided ID",summary:"Legitimator Committee Member Not Found",content:{"application/json":{schema:N.object({message:N.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:N.object({message:N.string()})}}}}},Nd={method:"delete",path:"/legitimator-committee-member/{id}",tags:["Legitimator Committee Members"],summary:"Delete Legitimator Committee Member",security:[{bearerAuth:[]}],request:{params:Ya},responses:{200:{description:"Legitimator Committee Member deleted successfully",summary:"Legitimator Committee Member Deleted"},400:{description:"Invalid Legitimator Committee Member ID format",summary:"Validation Error",content:{"application/json":{schema:N.object({errors:N.record(N.string(),N.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:N.object({message:N.string()})}}},404:{description:"Legitimator Committee Member not found with the provided ID",summary:"Legitimator Committee Member Not Found",content:{"application/json":{schema:N.object({message:N.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:N.object({message:N.string()})}}}}};import{$Enums as dI}from"@prisma/client";import M from"zod";import{extendZodWithOpenApi as aI}from"@asteasolutions/zod-to-openapi";import Ge from"zod";aI(Ge);var Qa=Ge.object({name:Ge.string().min(1),description:Ge.string().optional(),members:Ge.array(Ge.object({userId:Ge.uuid(),role:Ge.string().min(1),order:Ge.number().optional()}))}),oi=class{constructor(e){this.managementTeamRepository=e}async handle(e,r){try{let{name:t,description:i,members:n}=Qa.parse(e.body);if(await this.managementTeamRepository.findByName(t))throw new oe("J\xE1 existe um time de gest\xE3o cadastrado com este nome.");return await this.managementTeamRepository.create({name:t,description:i,members:n.map(a=>({userId:a.userId,role:a.role,order:a.order??0}))}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as mI}from"@asteasolutions/zod-to-openapi";import em from"zod";mI(em);var tm=em.object({id:em.uuid()}),ii=class{constructor(e){this.managementTeamRepository=e}async handle(e,r){try{let{id:t}=tm.parse({id:e.params.id});if(!await this.managementTeamRepository.findById(t))throw new p("O time de gest\xE3o n\xE3o existe.");return await this.managementTeamRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as cI}from"@asteasolutions/zod-to-openapi";import rm from"zod";cI(rm);var si=rm.object({id:rm.uuid()}),ni=class{constructor(e){this.managementTeamRepository=e}async handle(e,r){try{let{id:t}=si.parse({id:e.params.id}),i=await this.managementTeamRepository.findById(t);if(!i)throw new p("O time de gest\xE3o n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as pI}from"@asteasolutions/zod-to-openapi";import De from"zod";pI(De);var om=De.object({id:De.uuid(),name:De.string().min(1).optional(),description:De.string().optional(),members:De.array(De.object({userId:De.uuid(),role:De.string().min(1),order:De.number().optional()})).optional()}),ai=class{constructor(e){this.managementTeamRepository=e}async handle(e,r){try{let{id:t,name:i,description:n,members:s}=om.parse({id:e.params.id,...e.body}),a=await this.managementTeamRepository.findById(t);if(!a)throw new p("O time de gest\xE3o n\xE3o existe.");if(i&&i!==a.name){let c=await this.managementTeamRepository.findByName(i);if(c&&c.id!==t)throw new oe("J\xE1 existe um time de gest\xE3o com este nome.")}return await this.managementTeamRepository.update({id:t,name:i,description:n,members:s?s.map(c=>({userId:c.userId,role:c.role,order:c.order??0})):void 0}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var lI=M.object({id:M.uuid(),name:M.string(),emailAddress:M.string(),avatarUrl:M.string().nullable(),orcid:M.string().nullable(),phone:M.string().nullable(),lattesUrl:M.string().nullable(),role:M.enum(dI.UserRole)}),uI=M.object({id:M.uuid(),role:M.string(),description:M.string().nullable(),order:M.number(),teamId:M.uuid(),userId:M.uuid(),createdAt:M.date(),updatedAt:M.date(),user:lI}),Gd=M.object({id:M.uuid(),name:M.string(),description:M.string().nullable(),createdAt:M.date(),updatedAt:M.date(),members:M.array(uI)}),Ld={method:"post",path:"/management-team",tags:["Management Teams"],summary:"Create a new Management Team with multiple members",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:Qa}}}},responses:{201:{description:"Management Team created successfully",summary:"Management Team Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:M.object({errors:M.record(M.string(),M.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:M.object({message:M.string()})}}},409:{description:"Management Team with this name already exists",summary:"Conflict",content:{"application/json":{schema:M.object({message:M.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:M.object({message:M.string()})}}}}},_d={method:"get",path:"/management-team",tags:["Management Teams"],summary:"List all Management Teams with filters",request:{query:M.object({name:M.string().optional(),description:M.string().optional(),orderBy:M.enum(["asc","desc"]).optional()})},responses:{200:{description:"List of Management Teams retrieved successfully",summary:"Management Teams Retrieved",content:{"application/json":{schema:M.object({teams:M.array(Gd)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:M.object({message:M.string()})}}}}},Wd={method:"get",path:"/management-team/{id}",tags:["Management Teams"],summary:"Find Management Team by ID",request:{params:si},responses:{200:{description:"Management Team details retrieved successfully",summary:"Management Team Retrieved",content:{"application/json":{schema:Gd}}},400:{description:"Invalid Management Team ID format",summary:"Validation Error",content:{"application/json":{schema:M.object({errors:M.record(M.string(),M.string())})}}},404:{description:"Management Team not found with the provided ID",summary:"Management Team Not Found",content:{"application/json":{schema:M.object({message:M.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:M.object({message:M.string()})}}}}},zd={method:"put",path:"/management-team/{id}",tags:["Management Teams"],summary:"Update Management Team and manage member relationships",security:[{bearerAuth:[]}],request:{params:si,body:{content:{"application/json":{schema:om.omit({id:!0})}}}},responses:{200:{description:"Management Team updated successfully",summary:"Management Team Updated"},400:{description:"Invalid input data or Management Team ID format",summary:"Validation Error",content:{"application/json":{schema:M.object({errors:M.record(M.string(),M.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:M.object({message:M.string()})}}},404:{description:"Management Team not found with the provided ID",summary:"Management Team Not Found",content:{"application/json":{schema:M.object({message:M.string()})}}},409:{description:"Management Team with this name already exists",summary:"Conflict",content:{"application/json":{schema:M.object({message:M.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:M.object({message:M.string()})}}}}},Hd={method:"delete",path:"/management-team/{id}",tags:["Management Teams"],summary:"Delete Management Team",security:[{bearerAuth:[]}],request:{params:tm},responses:{200:{description:"Management Team deleted successfully",summary:"Management Team Deleted"},400:{description:"Invalid Management Team ID format",summary:"Validation Error",content:{"application/json":{schema:M.object({errors:M.record(M.string(),M.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:M.object({message:M.string()})}}},404:{description:"Management Team not found with the provided ID",summary:"Management Team Not Found",content:{"application/json":{schema:M.object({message:M.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:M.object({message:M.string()})}}}}};import{MeetingFormat as CI,MeetingStatus as SI}from"@prisma/client";import L from"zod";import{extendZodWithOpenApi as gI}from"@asteasolutions/zod-to-openapi";import Xt from"zod";var Zd=10,Vd=1024,fI=Vd*Vd,yI=Zd*fI;gI(Xt);var im=Xt.object({title:Xt.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio"),publishedAt:Xt.coerce.date(),meetingId:Xt.uuid(),document:Xt.any().refine(o=>o==null||typeof o!="object"||typeof o.size!="number"?!1:o.size<=yI,`O documento deve ter no m\xE1ximo ${Zd}MB.`)}),mi=class{constructor(e,r,t){this.meetingMinuteRepository=e;this.meetingRepository=r;this.firebaseStorageService=t}async handle(e,r){try{let{title:t,publishedAt:i,meetingId:n,document:s}=im.parse({...e.body,...e.params,document:e.file});if(!await this.meetingRepository.findById(n))throw new p("A reuni\xE3o n\xE3o existe.");if(await this.meetingMinuteRepository.findByMeetingId(n))throw new m("Esta reuni\xE3o j\xE1 possui uma ata.");let d=await this.meetingMinuteRepository.create({title:t,publishedAt:i,meetingId:n,documentUrl:""}),h=await this.firebaseStorageService.uploadFile({file:s,id:d.id,folder:P.MEETING_MINUTE});return await this.meetingMinuteRepository.update({id:d.id,documentUrl:h}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as hI}from"@asteasolutions/zod-to-openapi";import nm from"zod";hI(nm);var jr=nm.object({meetingId:nm.uuid()}),ci=class{constructor(e){this.meetingMinuteRepository=e}async handle(e,r){try{let{meetingId:t}=jr.parse({meetingId:e.params.meetingId}),i=await this.meetingMinuteRepository.findByMeetingId(t);return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as RI}from"@asteasolutions/zod-to-openapi";import $t from"zod";var Jd=10,Kd=1024,II=Kd*Kd,bI=Jd*II;RI($t);var sm=$t.object({meetingId:$t.uuid(),title:$t.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio").optional(),publishedAt:$t.coerce.date().optional(),document:$t.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=bI,`O documento deve ter no m\xE1ximo ${Jd}MB.`).optional()}),pi=class{constructor(e,r){this.meetingMinuteRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{meetingId:t,title:i,publishedAt:n,document:s}=sm.parse({meetingId:e.params.meetingId,...e.body,document:e.file}),a=await this.meetingMinuteRepository.findByMeetingId(t);if(!a)throw new p("A ata n\xE3o existe para esta reuni\xE3o.");let c=a.documentUrl;return s&&(a.documentUrl&&await this.firebaseStorageService.deleteFile({fileUrl:a.documentUrl}),c=await this.firebaseStorageService.uploadFile({file:s,id:a.id,folder:P.MEETING_MINUTE})),await this.meetingMinuteRepository.update({id:a.id,title:i,publishedAt:n,documentUrl:c??void 0}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var wI=L.object({id:L.uuid(),title:L.string(),scheduledAt:L.date(),format:L.enum(CI),agenda:L.string(),meetingLink:L.string().nullable(),location:L.string().nullable(),status:L.enum(SI),createdAt:L.date(),updatedAt:L.date()}),vI=L.object({id:L.uuid(),title:L.string(),publishedAt:L.date(),documentUrl:L.string(),meetingId:L.uuid(),meeting:wI,createdAt:L.date(),updatedAt:L.date()}),Yd={method:"post",path:"/meeting/{meetingId}/minute",tags:["Meetings"],summary:"Create a new meeting minute with document upload",security:[{bearerAuth:[]}],request:{params:L.object({meetingId:L.uuid()}),body:{content:{"multipart/form-data":{schema:im.omit({meetingId:!0})}}}},responses:{201:{description:"Meeting minute created successfully",summary:"Meeting Minute Created"},400:{description:"Invalid input data, missing required fields, or invalid document format/size",summary:"Validation Error",content:{"application/json":{schema:L.object({errors:L.record(L.string(),L.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:L.object({message:L.string()})}}},404:{description:"Meeting not found with the provided ID",summary:"Meeting Not Found",content:{"application/json":{schema:L.object({message:L.string()})}}},409:{description:"Meeting already has a minute",summary:"Conflict",content:{"application/json":{schema:L.object({message:L.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:L.object({message:L.string()})}}}}},Xd={method:"get",path:"/meeting/{meetingId}/minute",tags:["Meetings"],summary:"Find meeting minute by meeting ID",request:{params:jr},responses:{200:{description:"Meeting minute retrieved successfully by meeting ID",summary:"Meeting Minute Retrieved by Meeting ID",content:{"application/json":{schema:vI.nullable()}}},400:{description:"Invalid meeting ID parameter provided",summary:"Validation Error",content:{"application/json":{schema:L.object({errors:L.record(L.string(),L.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:L.object({message:L.string()})}}}}},$d={method:"put",path:"/meeting/{meetingId}/minute",tags:["Meetings"],summary:"Update meeting minute with optional document upload",security:[{bearerAuth:[]}],request:{params:jr,body:{content:{"multipart/form-data":{schema:sm.omit({meetingId:!0})}}}},responses:{200:{description:"Meeting minute updated successfully",summary:"Meeting Minute Updated"},400:{description:"Invalid input data, meeting minute ID format, or invalid document format/size",summary:"Validation Error",content:{"application/json":{schema:L.object({errors:L.record(L.string(),L.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:L.object({message:L.string()})}}},404:{description:"Meeting minute not found with the provided ID",summary:"Meeting Minute Not Found",content:{"application/json":{schema:L.object({message:L.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:L.object({message:L.string()})}}}}},Qd={method:"delete",path:"/meeting/{meetingId}/minute",tags:["Meetings"],summary:"Delete meeting minute",security:[{bearerAuth:[]}],request:{params:jr},responses:{200:{description:"Meeting minute deleted successfully",summary:"Meeting Minute Deleted"},400:{description:"Invalid meeting minute ID format",summary:"Validation Error",content:{"application/json":{schema:L.object({errors:L.record(L.string(),L.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:L.object({message:L.string()})}}},404:{description:"Meeting minute not found with the provided ID",summary:"Meeting Minute Not Found",content:{"application/json":{schema:L.object({message:L.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:L.object({message:L.string()})}}}}};import{MeetingFormat as kI,MeetingStatus as NI}from"@prisma/client";import x from"zod";import{extendZodWithOpenApi as EI}from"@asteasolutions/zod-to-openapi";import{MeetingFormat as di,MeetingStatus as am}from"@prisma/client";import Fe from"zod";EI(Fe);var mm=Fe.object({title:Fe.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio"),scheduledAt:Fe.coerce.date(),format:Fe.enum(di).default(di.ONLINE),agenda:Fe.string().min(1,"Pauta \xE9 obrigat\xF3ria"),meetingLink:Fe.string().url("Link da reuni\xE3o deve ser uma URL v\xE1lida").optional().or(Fe.literal("")),location:Fe.string().optional(),status:Fe.enum(am).default(am.PENDING)}).refine(o=>o.format===di.ONLINE?!!o.meetingLink:o.format===di.IN_PERSON?!!o.location:!0,{message:"Reuni\xF5es online devem ter link e reuni\xF5es presenciais devem ter localiza\xE7\xE3o",path:["format"]}),li=class{constructor(e){this.meetingRepository=e}async handle(e,r){try{let{title:t,scheduledAt:i,format:n,agenda:s,meetingLink:a,location:c,status:d}=mm.parse(e.body);return await this.meetingRepository.create({title:t,scheduledAt:i,format:n,agenda:s,meetingLink:a||void 0,location:c||void 0,status:d??am.PENDING}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as jI}from"@asteasolutions/zod-to-openapi";import cm from"zod";jI(cm);var pm=cm.object({id:cm.uuid()}),ui=class{constructor(e){this.meetingRepository=e}async handle(e,r){try{let{id:t}=pm.parse({id:e.params.id});if(!await this.meetingRepository.findById(t))throw new p("A reuni\xE3o n\xE3o existe.");return await this.meetingRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as xI}from"@asteasolutions/zod-to-openapi";import dm from"zod";xI(dm);var fi=dm.object({id:dm.uuid()}),gi=class{constructor(e){this.meetingRepository=e}async handle(e,r){try{let{id:t}=fi.parse({id:e.params.id}),i=await this.meetingRepository.findById(t);if(!i)throw new p("A reuni\xE3o n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as PI}from"@asteasolutions/zod-to-openapi";import{MeetingStatus as AI}from"@prisma/client";import lm from"zod";PI(lm);var um=lm.object({status:lm.enum(AI)}),yi=class{constructor(e){this.meetingRepository=e}async handle(e,r){try{let{status:t}=um.parse({status:e.params.status}),i=await this.meetingRepository.findByStatus(t);return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as MI}from"@asteasolutions/zod-to-openapi";import{MeetingFormat as TI,MeetingStatus as DI}from"@prisma/client";import nt from"zod";var FI=1,BI=10;MI(nt);var gm=nt.object({page:nt.coerce.number().min(1).default(FI),limit:nt.coerce.number().min(1).default(BI),title:nt.string().optional(),format:nt.enum(TI).optional(),status:nt.enum(DI).optional(),orderBy:nt.enum(["asc","desc"]).optional()}),hi=class{constructor(e){this.meetingRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=gm.parse(e.query),s=i*t-i,[a,c]=await Promise.all([this.meetingRepository.find({pagination:{offset:s,limit:i},filter:n}),this.meetingRepository.count({filter:n})]),d=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:d,offset:s,limit:i,meetings:a})}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as UI}from"@asteasolutions/zod-to-openapi";import{MeetingFormat as qI,MeetingStatus as OI}from"@prisma/client";import Ee from"zod";UI(Ee);var fm=Ee.object({id:Ee.uuid(),title:Ee.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio").optional(),scheduledAt:Ee.coerce.date().optional(),format:Ee.enum(qI).optional(),agenda:Ee.string().min(1,"Pauta \xE9 obrigat\xF3ria").optional(),meetingLink:Ee.string().url("Link da reuni\xE3o deve ser uma URL v\xE1lida").optional().or(Ee.literal("")),location:Ee.string().optional(),status:Ee.enum(OI).optional()}),Ri=class{constructor(e){this.meetingRepository=e}async handle(e,r){try{let{id:t,title:i,scheduledAt:n,format:s,agenda:a,meetingLink:c,location:d,status:h}=fm.parse({id:e.params.id,...e.body});if(!await this.meetingRepository.findById(t))throw new p("A reuni\xE3o n\xE3o existe.");return await this.meetingRepository.update({id:t,title:i,scheduledAt:n,format:s,agenda:a,meetingLink:c||void 0,location:d||void 0,status:h}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var GI=x.object({id:x.uuid(),title:x.string(),publishedAt:x.date(),documentUrl:x.string(),meetingId:x.uuid(),createdAt:x.date(),updatedAt:x.date()}),ym=x.object({id:x.uuid(),title:x.string(),scheduledAt:x.date(),format:x.enum(kI),agenda:x.string(),meetingLink:x.string().nullable(),location:x.string().nullable(),status:x.enum(NI),minutes:GI.nullable(),createdAt:x.date(),updatedAt:x.date()}),el={method:"post",path:"/meeting",tags:["Meetings"],summary:"Create a new meeting",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:mm}}}},responses:{201:{description:"Meeting created successfully",summary:"Meeting Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:x.object({errors:x.record(x.string(),x.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:x.object({message:x.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:x.object({message:x.string()})}}}}},tl={method:"get",path:"/meeting",tags:["Meetings"],summary:"List all meetings with pagination and filters",request:{query:gm},responses:{200:{description:"List of meetings retrieved successfully with pagination",summary:"Meetings Retrieved",content:{"application/json":{schema:x.object({page:x.number(),totalPages:x.number(),offset:x.number(),limit:x.number(),meetings:x.array(ym)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:x.object({errors:x.record(x.string(),x.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:x.object({message:x.string()})}}}}},rl={method:"get",path:"/meeting/{id}",tags:["Meetings"],summary:"Find meeting by ID",request:{params:fi},responses:{200:{description:"Meeting details retrieved successfully",summary:"Meeting Retrieved",content:{"application/json":{schema:ym}}},400:{description:"Invalid meeting ID format",summary:"Validation Error",content:{"application/json":{schema:x.object({errors:x.record(x.string(),x.string())})}}},404:{description:"Meeting not found with the provided ID",summary:"Meeting Not Found",content:{"application/json":{schema:x.object({message:x.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:x.object({message:x.string()})}}}}},ol={method:"get",path:"/meeting/status/{status}",tags:["Meetings"],summary:"Find meetings by status",request:{params:um},responses:{200:{description:"Meetings retrieved successfully by status",summary:"Meetings Retrieved by Status",content:{"application/json":{schema:x.array(ym)}}},400:{description:"Invalid status parameter provided",summary:"Validation Error",content:{"application/json":{schema:x.object({errors:x.record(x.string(),x.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:x.object({message:x.string()})}}}}},il={method:"put",path:"/meeting/{id}",tags:["Meetings"],summary:"Update meeting",security:[{bearerAuth:[]}],request:{params:fi,body:{content:{"application/json":{schema:fm.omit({id:!0})}}}},responses:{200:{description:"Meeting updated successfully",summary:"Meeting Updated"},400:{description:"Invalid input data or meeting ID format",summary:"Validation Error",content:{"application/json":{schema:x.object({errors:x.record(x.string(),x.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:x.object({message:x.string()})}}},404:{description:"Meeting not found with the provided ID",summary:"Meeting Not Found",content:{"application/json":{schema:x.object({message:x.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:x.object({message:x.string()})}}}}},nl={method:"delete",path:"/meeting/{id}",tags:["Meetings"],summary:"Delete meeting",security:[{bearerAuth:[]}],request:{params:pm},responses:{200:{description:"Meeting deleted successfully",summary:"Meeting Deleted"},400:{description:"Invalid meeting ID format",summary:"Validation Error",content:{"application/json":{schema:x.object({errors:x.record(x.string(),x.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:x.object({message:x.string()})}}},404:{description:"Meeting not found with the provided ID",summary:"Meeting Not Found",content:{"application/json":{schema:x.object({message:x.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:x.object({message:x.string()})}}}}};import D from"zod";import{extendZodWithOpenApi as LI}from"@asteasolutions/zod-to-openapi";import xr from"zod";var _I=5,sl=1024,WI=sl*sl,zI=_I*WI;LI(xr);var hm=xr.object({title:xr.string().min(1),content:xr.string().min(1),image:xr.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=zI,{message:"A imagem deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB."})}),Ii=class{constructor(e,r){this.newsRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{title:t,content:i,image:n}=hm.parse({...e.body,image:e.file}),s=e.user.id,a=await this.firebaseStorageService.uploadFile({file:n,folder:P.NEWS,id:s});await this.newsRepository.create({title:t,content:i,authorId:s,imageUrl:a}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as HI}from"@asteasolutions/zod-to-openapi";import st from"zod";var VI=1,ZI=7;HI(st);var Ci=st.object({page:st.coerce.number().min(1).default(VI),limit:st.coerce.number().min(1).default(ZI),authorId:st.string(),title:st.string().optional(),content:st.string().optional(),orderBy:st.enum(["asc","desc"]).default("desc")}),bi=class{constructor(e){this.newsRepository=e}async handle(e,r){try{let{page:t,limit:i,authorId:n,...s}=Ci.parse(e.query),a=i*t-i,[c,d]=await Promise.all([this.newsRepository.findByAuthorId({authorId:n,pagination:{offset:a,limit:i},filter:s}),this.newsRepository.count({filter:{authorId:n,...s}})]),h=Math.max(Math.ceil(d/i),1);r.status(200).json({page:t,totalPages:h,offset:a,limit:i,news:c})}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as KI}from"@asteasolutions/zod-to-openapi";import Rm from"zod";KI(Rm);var Im=Rm.object({id:Rm.string()}),Si=class{constructor(e){this.newsRepository=e}async handle(e,r){try{let{id:t}=Im.parse(e.params),i=await this.newsRepository.findById(t);if(!i)throw new p("Not\xEDcia n\xE3o encontrada.");r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as JI}from"@asteasolutions/zod-to-openapi";import at from"zod";var YI=1,XI=9;JI(at);var bm=at.object({page:at.coerce.number().min(1).default(YI),limit:at.coerce.number().min(1).default(XI),title:at.string().optional(),content:at.string().optional(),authorId:at.string().optional(),orderBy:at.enum(["asc","desc"]).default("desc")}),wi=class{constructor(e){this.newsRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=bm.parse(e.query),s=i*t-i,[a,c]=await Promise.all([this.newsRepository.find({pagination:{offset:s,limit:i},filter:n}),this.newsRepository.count({filter:n})]),d=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:d,offset:s,limit:i,news:a})}catch(t){if(t instanceof Error)throw new m(t.message)}}};var al={method:"post",path:"/news",tags:["News"],summary:"Create news",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:hm}}}},responses:{201:{description:"News article created successfully",summary:"News Created",content:{"application/json":{schema:D.object({message:D.string()})}}},400:{description:"Invalid input data or file format",summary:"Validation Error",content:{"application/json":{schema:D.object({errors:D.record(D.string(),D.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:D.object({message:D.string()})}}}}},ml={method:"get",path:"/news",tags:["News"],summary:"List news",request:{query:bm},responses:{200:{description:"Paginated list of news articles retrieved successfully",summary:"News Retrieved",content:{"application/json":{schema:D.object({page:D.number(),totalPages:D.number(),offset:D.number(),limit:D.number(),news:D.array(D.object({title:D.string(),content:D.string(),id:D.string(),createdAt:D.date(),updatedAt:D.date(),imageUrl:D.string().nullable()}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:D.object({errors:D.record(D.string(),D.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:D.object({message:D.string()})}}}}},cl={method:"get",path:"/news/{id}",tags:["News"],summary:"Find news by ID",request:{params:Im},responses:{200:{description:"News article details retrieved successfully",summary:"News Retrieved",content:{"application/json":{schema:D.object({page:D.number(),totalPages:D.number(),offset:D.number(),limit:D.number(),news:D.object({title:D.string(),content:D.string(),id:D.string(),createdAt:D.date(),updatedAt:D.date(),imageUrl:D.string().nullable()})})}}},400:{description:"Invalid news ID format",summary:"Validation Error",content:{"application/json":{schema:D.object({errors:D.record(D.string(),D.string())})}}},404:{description:"News article not found with the provided ID",summary:"News Not Found",content:{"application/json":{schema:D.object({message:D.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:D.object({message:D.string()})}}}}},pl={method:"get",path:"/news/author/{author_id}",tags:["News"],summary:"List news by author",request:{params:Ci.pick({authorId:!0}).transform(()=>({author_id:""})),query:Ci.omit({authorId:!0})},responses:{200:{description:"Paginated list of news articles by author retrieved successfully",summary:"Author News Retrieved",content:{"application/json":{schema:D.object({page:D.number(),totalPages:D.number(),offset:D.number(),limit:D.number(),news:D.array(D.object({title:D.string(),content:D.string(),id:D.string(),createdAt:D.date(),updatedAt:D.date(),imageUrl:D.string().nullable()}))})}}},400:{description:"Invalid author ID or query parameters",summary:"Validation Error",content:{"application/json":{schema:D.object({errors:D.record(D.string(),D.string())})}}},404:{description:"Author not found with the provided ID",summary:"Author Not Found",content:{"application/json":{schema:D.object({message:D.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:D.object({message:D.string()})}}}}};import U from"zod";import{extendZodWithOpenApi as $I}from"@asteasolutions/zod-to-openapi";import Be from"zod";var ll=2,dl=1024,QI=dl*dl,eb=ll*QI;$I(Be);var Cm=Be.object({name:Be.string().min(1,"Nome \xE9 obrigat\xF3rio"),logo:Be.any().refine(o=>o==null||typeof o!="object"||typeof o.size!="number"?!1:o.size<=eb,`A imagem deve ter no m\xE1ximo ${ll}MB.`),websiteUrl:Be.url("URL do site deve ser v\xE1lida").optional(),description:Be.string().optional(),category:Be.string().optional(),since:Be.coerce.date(),isActive:Be.preprocess(o=>o==="true",Be.boolean().optional())}),vi=class{constructor(e,r){this.partnerRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{name:t,logo:i,websiteUrl:n,description:s,category:a,since:c,isActive:d}=Cm.parse({...e.body,logo:e.file}),h=await this.partnerRepository.create({name:t,websiteUrl:n,description:s,category:a,since:c,isActive:d}),j=await this.firebaseStorageService.uploadFile({file:i,id:h.id,folder:P.PARTNER});return await this.partnerRepository.update({id:h.id,logoUrl:j}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as tb}from"@asteasolutions/zod-to-openapi";import Sm from"zod";tb(Sm);var wm=Sm.object({id:Sm.uuid()}),Ei=class{constructor(e,r){this.partnerRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=wm.parse({id:e.params.id}),i=await this.partnerRepository.findById(t);if(!i)throw new p("O parceiro n\xE3o existe.");return i.logoUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.logoUrl}),await this.partnerRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as rb}from"@asteasolutions/zod-to-openapi";import vm from"zod";rb(vm);var xi=vm.object({id:vm.uuid()}),ji=class{constructor(e){this.partnerRepository=e}async handle(e,r){try{let{id:t}=xi.parse({id:e.params.id}),i=await this.partnerRepository.findById(t);if(!i)throw new p("O parceiro n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as ob}from"@asteasolutions/zod-to-openapi";import Le from"zod";var ib=1,nb=9;ob(Le);var Em=Le.object({page:Le.coerce.number().min(1).default(ib),limit:Le.coerce.number().min(1).default(nb),name:Le.string().optional(),description:Le.string().optional(),category:Le.string().optional(),isActive:Le.coerce.boolean().optional(),orderBy:Le.enum(["asc","desc"]).optional()}),Pi=class{constructor(e){this.partnerRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=Em.parse(e.query),s=i*t-i,[a,c]=await Promise.all([this.partnerRepository.find({pagination:{offset:s,limit:i},filter:n}),this.partnerRepository.count({filter:n})]),d=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:d,offset:s,limit:i,partners:a})}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as sb}from"@asteasolutions/zod-to-openapi";import je from"zod";var gl=2,ul=1024,ab=ul*ul,mb=gl*ab;sb(je);var jm=je.object({id:je.uuid(),name:je.string().min(1,"Nome \xE9 obrigat\xF3rio").optional(),logo:je.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=mb,`A imagem deve ter no m\xE1ximo ${gl}MB.`).optional(),websiteUrl:je.url("URL do site deve ser v\xE1lida").optional(),description:je.string().optional(),category:je.string().optional(),since:je.coerce.date().optional(),isActive:je.preprocess(o=>o==="true",je.boolean().optional())}),Ai=class{constructor(e,r){this.partnerRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,name:i,logo:n,websiteUrl:s,description:a,category:c,since:d,isActive:h}=jm.parse({id:e.params.id,...e.body,logo:e.file}),j=await this.partnerRepository.findById(t);if(!j)throw new p("O parceiro n\xE3o existe.");let q=j.logoUrl;if(n&&(q=await this.firebaseStorageService.uploadFile({file:n,id:t,folder:"images/partners"})),!q)throw new m("Logo URL \xE9 obrigat\xF3rio");return await this.partnerRepository.update({id:t,name:i,logoUrl:q,websiteUrl:s,description:a,category:c,since:d,isActive:h}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var fl=U.object({id:U.uuid(),name:U.string(),logoUrl:U.string(),description:U.string().nullable(),category:U.string().nullable(),since:U.date(),isActive:U.boolean(),createdAt:U.date(),updatedAt:U.date()}),yl={method:"post",path:"/partner",tags:["Partners"],summary:"Create a new partner with logo upload",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:Cm}}}},responses:{201:{description:"Partner created successfully",summary:"Partner Created"},400:{description:"Invalid input data, missing required fields, or invalid logo format/size",summary:"Validation Error",content:{"application/json":{schema:U.object({errors:U.record(U.string(),U.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:U.object({message:U.string()})}}},409:{description:"Partner with this name already exists",summary:"Conflict",content:{"application/json":{schema:U.object({message:U.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:U.object({message:U.string()})}}}}},hl={method:"get",path:"/partner",tags:["Partners"],summary:"List all partners with pagination and filters",request:{query:Em},responses:{200:{description:"List of partners retrieved successfully with pagination",summary:"Partners Retrieved",content:{"application/json":{schema:U.object({page:U.number(),totalPages:U.number(),offset:U.number(),limit:U.number(),partners:U.array(fl)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:U.object({errors:U.record(U.string(),U.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:U.object({message:U.string()})}}}}},Rl={method:"get",path:"/partner/{id}",tags:["Partners"],summary:"Find partner by ID",request:{params:xi},responses:{200:{description:"Partner details retrieved successfully",summary:"Partner Retrieved",content:{"application/json":{schema:fl}}},400:{description:"Invalid partner ID format",summary:"Validation Error",content:{"application/json":{schema:U.object({errors:U.record(U.string(),U.string())})}}},404:{description:"Partner not found with the provided ID",summary:"Partner Not Found",content:{"application/json":{schema:U.object({message:U.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:U.object({message:U.string()})}}}}},Il={method:"put",path:"/partner/{id}",tags:["Partners"],summary:"Update partner with optional logo upload",security:[{bearerAuth:[]}],request:{params:xi,body:{content:{"multipart/form-data":{schema:jm.omit({id:!0})}}}},responses:{200:{description:"Partner updated successfully",summary:"Partner Updated"},400:{description:"Invalid input data, partner ID format, or invalid logo format/size",summary:"Validation Error",content:{"application/json":{schema:U.object({errors:U.record(U.string(),U.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:U.object({message:U.string()})}}},404:{description:"Partner not found with the provided ID",summary:"Partner Not Found",content:{"application/json":{schema:U.object({message:U.string()})}}},409:{description:"Partner with this name already exists",summary:"Conflict",content:{"application/json":{schema:U.object({message:U.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:U.object({message:U.string()})}}}}},bl={method:"delete",path:"/partner/{id}",tags:["Partners"],summary:"Delete partner",security:[{bearerAuth:[]}],request:{params:wm},responses:{200:{description:"Partner deleted successfully",summary:"Partner Deleted"},400:{description:"Invalid partner ID format",summary:"Validation Error",content:{"application/json":{schema:U.object({errors:U.record(U.string(),U.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:U.object({message:U.string()})}}},404:{description:"Partner not found with the provided ID",summary:"Partner Not Found",content:{"application/json":{schema:U.object({message:U.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:U.object({message:U.string()})}}}}};import{$Enums as Cl}from"@prisma/client";import k from"zod";import{extendZodWithOpenApi as cb}from"@asteasolutions/zod-to-openapi";import{PendencyStatus as pb}from"@prisma/client";import mt from"zod";cb(mt);var Ti=mt.object({userId:mt.uuid(),title:mt.string().min(1),description:mt.string().optional(),status:mt.enum(pb).default("PENDING"),dueDate:mt.coerce.date().optional(),document:mt.any().refine(o=>o&&typeof o=="object"&&o.size>0,"Arquivo do documento \xE9 obrigat\xF3rio")}),Mi=class{constructor(e,r,t){this.userRepository=e;this.pendencyRepository=r;this.firebaseStorageService=t}async handle(e,r){try{let{userId:t,title:i,description:n,status:s,dueDate:a,document:c}=Ti.parse({...e.body,userId:e.params.user_id,document:e.file});if(!await this.userRepository.findById(t))throw new ce("O usu\xE1rio n\xE3o existe.");let h=await this.firebaseStorageService.uploadFile({file:c,id:t,folder:P.PENDENCY});return await this.pendencyRepository.create({userId:t,title:i,description:n,status:s,dueDate:a,documentUrl:h}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as db}from"@asteasolutions/zod-to-openapi";import xm from"zod";db(xm);var Pm=xm.object({id:xm.uuid()}),Di=class{constructor(e,r){this.pendencyRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=Pm.parse({id:e.params.pendency_id}),i=await this.pendencyRepository.findById(t);if(!i)throw new p("A pend\xEAncia n\xE3o existe.");return await Promise.all([this.pendencyRepository.deleteById(i.id),this.firebaseStorageService.deleteFile({fileUrl:i.documentUrl})]),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as lb}from"@asteasolutions/zod-to-openapi";import{PendencyStatus as ub}from"@prisma/client";import _e from"zod";var gb=1,fb=6;lb(_e);var Am=_e.object({page:_e.coerce.number().min(1).default(gb),limit:_e.coerce.number().min(1).default(fb),title:_e.string().optional(),description:_e.string().optional(),status:_e.enum(ub).default("PENDING"),userId:_e.uuid().optional(),orderBy:_e.enum(["asc","desc"]).default("desc")}),Fi=class{constructor(e){this.pendencyRepository=e}async handle(e,r){try{let{description:t,limit:i,orderBy:n,page:s,title:a,status:c,userId:d}=Am.parse(e.query),h=s*i-i,[j,q]=await Promise.all([this.pendencyRepository.find({pagination:{offset:h,limit:i},filter:{title:a,description:t,status:c,orderBy:n,userId:d}}),this.pendencyRepository.count({filter:{title:a,description:t,status:c,userId:d}})]),Y=Math.max(Math.ceil(q/i),1);return r.status(200).json({page:s,totalPages:Y,offset:h,limit:i,pendencies:j})}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as yb}from"@asteasolutions/zod-to-openapi";import Mm from"zod";yb(Mm);var Tm=Mm.object({pendencyId:Mm.uuid()}),Bi=class{constructor(e){this.pendencyRepository=e}async handle(e,r){try{let{pendencyId:t}=Tm.parse({pendencyId:e.params.pendency_id}),i=await this.pendencyRepository.findById(t);if(!i)throw new p("Pend\xEAncia n\xE3o encontrada.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as hb}from"@asteasolutions/zod-to-openapi";import{PendencyStatus as Rb}from"@prisma/client";import ct from"zod";hb(ct);var qi=ct.object({id:ct.uuid(),title:ct.string().min(1),description:ct.string().optional(),status:ct.enum(Rb),dueDate:ct.coerce.date().optional(),document:ct.any().refine(o=>o==null||typeof o=="object"&&typeof o.size=="number"&&(o.size===0||o.size>0),"Arquivo do documento \xE9 inv\xE1lido").optional()}),Ui=class{constructor(e,r){this.pendencyRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{document:t,id:i,...n}=qi.parse({...e.body,id:e.params.pendency_id,document:e.file}),s=await this.pendencyRepository.findById(i);if(!s)throw new ce("A pend\xEAncia n\xE3o existe");let a=s.documentUrl;return t&&t.size>0&&(a=await this.firebaseStorageService.updateFile({file:t,id:s.userId,folder:P.PENDENCY,fileUrl:s.documentUrl})),await this.pendencyRepository.update({...n,id:i,documentUrl:a}),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var Sl={method:"post",path:"/pendency/{user_id}",tags:["Pendencies"],summary:"Create pendency for user",security:[{bearerAuth:[]}],request:{params:Ti.pick({userId:!0}).transform(()=>({user_id:""})),body:{content:{"multipart/form-data":{schema:Ti.omit({userId:!0})}}}},responses:{201:{description:"Pendency created successfully for the user",summary:"Pendency Created",content:{"application/json":{schema:k.object({})}}},400:{description:"Invalid input data or file format",summary:"Validation Error",content:{"application/json":{schema:k.object({errors:k.record(k.string(),k.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:k.object({message:k.string()})}}}}},wl={method:"get",path:"/pendency",tags:["Pendencies"],summary:"List pendencies",security:[{bearerAuth:[]}],request:{query:Am},responses:{200:{description:"Paginated list of pendencies retrieved successfully",summary:"Pendencies Retrieved",content:{"application/json":{schema:k.object({page:k.number(),totalPages:k.number(),offset:k.number(),limit:k.number(),pendencies:k.array(k.object({id:k.string(),title:k.string(),description:k.string().nullable(),status:k.enum(Cl.PendencyStatus),dueDate:k.date().nullable(),documentUrl:k.string(),userId:k.string(),createdAt:k.date(),updatedAt:k.date()}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:k.object({errors:k.record(k.string(),k.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:k.object({message:k.string()})}}}}},vl={method:"get",path:"/pendency/{pendency_id}",tags:["Pendencies"],summary:"Find pendency by ID",security:[{bearerAuth:[]}],request:{params:Tm},responses:{200:{description:"Pendency details retrieved successfully",summary:"Pendency Retrieved",content:{"application/json":{schema:k.object({id:k.string(),title:k.string(),description:k.string().nullable(),status:k.enum(Cl.PendencyStatus),dueDate:k.date().nullable(),documentUrl:k.string(),userId:k.string(),createdAt:k.date(),updatedAt:k.date()}).nullable()}}},400:{description:"Invalid pendency ID format",summary:"Validation Error",content:{"application/json":{schema:k.object({errors:k.record(k.string(),k.string())})}}},404:{description:"Pendency not found with the provided ID",summary:"Pendency Not Found",content:{"application/json":{schema:k.object({message:k.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:k.object({message:k.string()})}}}}},El={method:"put",path:"/pendency/{pendency_id}",tags:["Pendencies"],summary:"Update pendency",security:[{bearerAuth:[]}],request:{params:qi.pick({id:!0}).transform(()=>({pendency_id:""})),body:{content:{"multipart/form-data":{schema:qi.omit({id:!0})}}}},responses:{204:{description:"Pendency updated successfully",summary:"Pendency Updated"},400:{description:"Invalid input data or pendency does not exist",summary:"Validation Error",content:{"application/json":{schema:k.object({errors:k.record(k.string(),k.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:k.object({message:k.string()})}}}}},jl={method:"delete",path:"/pendency/{pendency_id}",tags:["Pendencies"],summary:"Delete pendency",security:[{bearerAuth:[]}],request:{params:Pm},responses:{204:{description:"Pendency deleted successfully",summary:"Pendency Deleted"},400:{description:"Invalid pendency ID format",summary:"Validation Error",content:{"application/json":{schema:k.object({errors:k.record(k.string(),k.string())})}}},404:{description:"Pendency not found with the provided ID",summary:"Pendency Not Found",content:{"application/json":{schema:k.object({message:k.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:k.object({message:k.string()})}}}}};import v from"zod";import{extendZodWithOpenApi as Ib}from"@asteasolutions/zod-to-openapi";import Dm from"zod";Ib(Dm);var Fm=Dm.object({id:Dm.uuid()}),Oi=class{constructor(e,r){this.postGraduateProgramRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=Fm.parse({id:e.params.id}),i=await this.postGraduateProgramRepository.findById(t);if(!i)throw new p("O programa de p\xF3s-gradua\xE7\xE3o n\xE3o existe.");return i.imageUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.imageUrl}),await this.postGraduateProgramRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as bb}from"@asteasolutions/zod-to-openapi";import Bm from"zod";bb(Bm);var Um=Bm.object({id:Bm.uuid()}),ki=class{constructor(e){this.postGraduateProgramRepository=e}async handle(e,r){try{let{id:t}=Um.parse({id:e.params.id}),i=await this.postGraduateProgramRepository.findById(t);if(!i)throw new p("Programa de p\xF3s-gradua\xE7\xE3o n\xE3o encontrado.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as Cb}from"@asteasolutions/zod-to-openapi";import pt from"zod";var Sb=1,wb=6;Cb(pt);var qm=pt.object({page:pt.coerce.number().min(1).default(Sb),limit:pt.coerce.number().min(1).default(wb),title:pt.string().optional(),description:pt.string().optional(),contact:pt.string().optional(),orderBy:pt.enum(["asc","desc"]).default("desc")}),Ni=class{constructor(e){this.postGraduateProgramRepository=e}async handle(e,r){try{let{limit:t,page:i,...n}=qm.parse(e.query),s=i*t-t,[a,c]=await Promise.all([this.postGraduateProgramRepository.find({pagination:{offset:s,limit:t},filter:n}),this.postGraduateProgramRepository.count({filter:n})]),d=Math.max(Math.ceil(c/t),1);return r.status(200).json({page:i,totalPages:d,offset:s,limit:t,postGraduatePrograms:a})}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as vb}from"@asteasolutions/zod-to-openapi";import Ue from"zod";var Pl=5,xl=1024,Eb=xl*xl,jb=Pl*Eb;vb(Ue);var Om=Ue.object({id:Ue.uuid(),title:Ue.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio.").optional(),description:Ue.string().optional(),startDate:Ue.coerce.date().optional(),endDate:Ue.coerce.date().optional(),contact:Ue.string().min(1,"Contato \xE9 obrigat\xF3rio.").optional(),registrationLink:Ue.url("URL de inscri\xE7\xE3o deve ser v\xE1lida").optional(),image:Ue.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=jb,`A imagem deve ter no m\xE1ximo ${Pl}MB.`).optional()}),Gi=class{constructor(e,r){this.postGraduateProgramRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,image:i,title:n,description:s,startDate:a,endDate:c,contact:d,registrationLink:h}=Om.parse({id:e.params.id,...e.body,image:e.file}),j=await this.postGraduateProgramRepository.findById(t);if(!j)throw new p("O programa de p\xF3s-gradua\xE7\xE3o n\xE3o existe.");let q=j.imageUrl;if(i&&(q=await this.firebaseStorageService.uploadFile({file:i,id:t,folder:P.POST_GRADUATE_PROGRAM})),!q)throw new m("URL da imagem \xE9 obrigat\xF3rio");return await this.postGraduateProgramRepository.update({id:t,title:n,description:s,startDate:a,endDate:c,contact:d,registrationLink:h,imageUrl:q}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var Al={method:"post",path:"/post-graduate-programs",tags:["Post Graduate Programs"],summary:"Create post-graduate program",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:v.object({title:v.string().min(1).openapi({description:"T\xEDtulo do programa"}),description:v.string().optional().openapi({description:"Descri\xE7\xE3o do programa"}),startDate:v.string().openapi({description:"Data de in\xEDcio (ISO 8601)",example:"2024-01-01T10:00:00Z"}),endDate:v.string().openapi({description:"Data de t\xE9rmino (ISO 8601)",example:"2024-12-31T10:00:00Z"}),contact:v.string().min(1).openapi({description:"Informa\xE7\xF5es de contato"}),registrationLink:v.string().url().optional().openapi({description:"Link de inscri\xE7\xE3o"}),image:v.string().optional().openapi({description:"Imagem do programa (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{201:{description:"Post-graduate program created successfully",summary:"Program Created"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:v.object({errors:v.record(v.string(),v.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:v.object({message:v.string()})}}}}},Ml={method:"get",path:"/post-graduate-programs",tags:["Post Graduate Programs"],summary:"List post-graduate programs",security:[{bearerAuth:[]}],request:{query:qm},responses:{200:{description:"Paginated list of post-graduate programs retrieved successfully",summary:"Programs Retrieved",content:{"application/json":{schema:v.object({page:v.number(),totalPages:v.number(),offset:v.number(),limit:v.number(),postGraduatePrograms:v.array(v.object({id:v.string(),title:v.string(),imageUrl:v.string().nullable(),description:v.string().nullable(),startDate:v.date(),endDate:v.date(),contact:v.string(),registrationLink:v.string().nullable(),createdAt:v.date(),updatedAt:v.date()}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:v.object({errors:v.record(v.string(),v.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:v.object({message:v.string()})}}}}},Tl={method:"get",path:"/post-graduate-programs/{id}",tags:["Post Graduate Programs"],summary:"Find post-graduate program by ID",security:[{bearerAuth:[]}],request:{params:Um},responses:{200:{description:"Post-graduate program details retrieved successfully",summary:"Program Retrieved",content:{"application/json":{schema:v.object({id:v.string(),title:v.string(),imageUrl:v.string().nullable(),description:v.string().nullable(),startDate:v.date(),endDate:v.date(),contact:v.string(),registrationLink:v.string().nullable(),createdAt:v.date(),updatedAt:v.date()}).nullable()}}},400:{description:"Invalid program ID format",summary:"Validation Error",content:{"application/json":{schema:v.object({errors:v.record(v.string(),v.string())})}}},404:{description:"Post-graduate program not found with the provided ID",summary:"Program Not Found",content:{"application/json":{schema:v.object({message:v.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:v.object({message:v.string()})}}}}},Dl={method:"put",path:"/post-graduate-programs/{id}",tags:["Post Graduate Programs"],summary:"Update post-graduate program",security:[{bearerAuth:[]}],request:{params:Om.pick({id:!0}),body:{content:{"multipart/form-data":{schema:v.object({title:v.string().min(1).optional().openapi({description:"T\xEDtulo do programa"}),description:v.string().optional().openapi({description:"Descri\xE7\xE3o do programa"}),startDate:v.string().optional().openapi({description:"Data de in\xEDcio (ISO 8601)",example:"2024-01-01T10:00:00Z"}),endDate:v.string().optional().openapi({description:"Data de t\xE9rmino (ISO 8601)",example:"2024-12-31T10:00:00Z"}),contact:v.string().min(1).optional().openapi({description:"Informa\xE7\xF5es de contato"}),registrationLink:v.string().url().optional().openapi({description:"Link de inscri\xE7\xE3o"}),image:v.string().optional().openapi({description:"Imagem do programa (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{200:{description:"Post-graduate program updated successfully",summary:"Program Updated"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:v.object({errors:v.record(v.string(),v.string())})}}},404:{description:"Post-graduate program not found with the provided ID",summary:"Program Not Found",content:{"application/json":{schema:v.object({message:v.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:v.object({message:v.string()})}}}}},Fl={method:"delete",path:"/post-graduate-programs/{id}",tags:["Post Graduate Programs"],summary:"Delete post-graduate program",security:[{bearerAuth:[]}],request:{params:Fm},responses:{200:{description:"Post-graduate program deleted successfully",summary:"Program Deleted"},400:{description:"Invalid program ID format",summary:"Validation Error",content:{"application/json":{schema:v.object({errors:v.record(v.string(),v.string())})}}},404:{description:"Post-graduate program not found with the provided ID",summary:"Program Not Found",content:{"application/json":{schema:v.object({message:v.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:v.object({message:v.string()})}}}}};import{RegimentStatus as _b}from"@prisma/client";import B from"zod";import{extendZodWithOpenApi as xb}from"@asteasolutions/zod-to-openapi";import{RegimentStatus as Ul}from"@prisma/client";import wt from"zod";var ql=10,Bl=1024,Pb=Bl*Bl,Ab=ql*Pb;xb(wt);var km=wt.object({title:wt.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio"),version:wt.string().min(1,"Vers\xE3o \xE9 obrigat\xF3ria"),publishedAt:wt.coerce.date(),document:wt.any().refine(o=>o==null||typeof o!="object"||typeof o.size!="number"?!1:o.size<=Ab,`O documento deve ter no m\xE1ximo ${ql}MB.`),status:wt.enum(Ul).optional()}),Li=class{constructor(e,r){this.regimentRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{title:t,version:i,publishedAt:n,document:s,status:a}=km.parse({...e.body,document:e.file}),c=await this.regimentRepository.create({title:t,version:i,publishedAt:n,documentUrl:"",status:a??Ul.IN_FORCE}),d=await this.firebaseStorageService.uploadFile({file:s,id:c.id,folder:P.REGIMENT});return await this.regimentRepository.update({id:c.id,documentUrl:d}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as Mb}from"@asteasolutions/zod-to-openapi";import Nm from"zod";Mb(Nm);var Gm=Nm.object({id:Nm.uuid()}),_i=class{constructor(e,r){this.regimentRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=Gm.parse({id:e.params.id}),i=await this.regimentRepository.findById(t);if(!i)throw new p("O regimento n\xE3o existe.");return i.documentUrl&&await this.firebaseStorageService.deleteFile({fileUrl:i.documentUrl}),await this.regimentRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as Tb}from"@asteasolutions/zod-to-openapi";import Lm from"zod";Tb(Lm);var zi=Lm.object({id:Lm.uuid()}),Wi=class{constructor(e){this.regimentRepository=e}async handle(e,r){try{let{id:t}=zi.parse({id:e.params.id}),i=await this.regimentRepository.findById(t);if(!i)throw new p("O regimento n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as Db}from"@asteasolutions/zod-to-openapi";import{RegimentStatus as Fb}from"@prisma/client";import _m from"zod";Db(_m);var Wm=_m.object({status:_m.enum(Fb)}),Hi=class{constructor(e){this.regimentRepository=e}async handle(e,r){try{let{status:t}=Wm.parse({status:e.params.status}),i=await this.regimentRepository.findByStatus(t);return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as Bb}from"@asteasolutions/zod-to-openapi";import{RegimentStatus as Ub}from"@prisma/client";import vt from"zod";var qb=1,Ob=10;Bb(vt);var zm=vt.object({page:vt.coerce.number().min(1).default(qb),limit:vt.coerce.number().min(1).default(Ob),title:vt.string().optional(),status:vt.enum(Ub).optional(),orderBy:vt.enum(["asc","desc"]).optional()}),Vi=class{constructor(e){this.regimentRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=zm.parse(e.query),s=i*t-i,[a,c]=await Promise.all([this.regimentRepository.find({pagination:{offset:s,limit:i},filter:n}),this.regimentRepository.count({filter:n})]),d=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:d,offset:s,limit:i,regiments:a})}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as kb}from"@asteasolutions/zod-to-openapi";import{RegimentStatus as Nb}from"@prisma/client";import dt from"zod";var kl=10,Ol=1024,Gb=Ol*Ol,Lb=kl*Gb;kb(dt);var Hm=dt.object({id:dt.uuid(),title:dt.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio").optional(),version:dt.string().min(1,"Vers\xE3o \xE9 obrigat\xF3ria").optional(),publishedAt:dt.coerce.date().optional(),document:dt.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=Lb,`O documento deve ter no m\xE1ximo ${kl}MB.`).optional(),status:dt.enum(Nb).optional()}),Zi=class{constructor(e,r){this.regimentRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,title:i,version:n,publishedAt:s,document:a,status:c}=Hm.parse({id:e.params.id,...e.body,document:e.file}),d=await this.regimentRepository.findById(t);if(!d)throw new p("O regimento n\xE3o existe.");let h=d.documentUrl;return a&&(d.documentUrl&&await this.firebaseStorageService.deleteFile({fileUrl:d.documentUrl}),h=await this.firebaseStorageService.uploadFile({file:a,id:t,folder:P.REGIMENT})),await this.regimentRepository.update({id:t,title:i,version:n,publishedAt:s,documentUrl:h??void 0,status:c}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var Vm=B.object({id:B.uuid(),title:B.string(),version:B.string(),publishedAt:B.date(),documentUrl:B.string(),status:B.enum(_b),createdAt:B.date(),updatedAt:B.date()}),Nl={method:"post",path:"/regiment",tags:["Regiments"],summary:"Create a new regiment with document upload",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:km}}}},responses:{201:{description:"Regiment created successfully",summary:"Regiment Created"},400:{description:"Invalid input data, missing required fields, or invalid document format/size",summary:"Validation Error",content:{"application/json":{schema:B.object({errors:B.record(B.string(),B.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:B.object({message:B.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:B.object({message:B.string()})}}}}},Gl={method:"get",path:"/regiment",tags:["Regiments"],summary:"List all regiments with pagination and filters",request:{query:zm},responses:{200:{description:"List of regiments retrieved successfully with pagination",summary:"Regiments Retrieved",content:{"application/json":{schema:B.object({page:B.number(),totalPages:B.number(),offset:B.number(),limit:B.number(),regiments:B.array(Vm)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:B.object({errors:B.record(B.string(),B.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:B.object({message:B.string()})}}}}},Ll={method:"get",path:"/regiment/{id}",tags:["Regiments"],summary:"Find regiment by ID",request:{params:zi},responses:{200:{description:"Regiment details retrieved successfully",summary:"Regiment Retrieved",content:{"application/json":{schema:Vm}}},400:{description:"Invalid regiment ID format",summary:"Validation Error",content:{"application/json":{schema:B.object({errors:B.record(B.string(),B.string())})}}},404:{description:"Regiment not found with the provided ID",summary:"Regiment Not Found",content:{"application/json":{schema:B.object({message:B.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:B.object({message:B.string()})}}}}},_l={method:"get",path:"/regiment/status/{status}",tags:["Regiments"],summary:"Find regiments by status",request:{params:Wm},responses:{200:{description:"Regiments retrieved successfully by status",summary:"Regiments Retrieved by Status",content:{"application/json":{schema:B.array(Vm)}}},400:{description:"Invalid status parameter provided",summary:"Validation Error",content:{"application/json":{schema:B.object({errors:B.record(B.string(),B.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:B.object({message:B.string()})}}}}},Wl={method:"put",path:"/regiment/{id}",tags:["Regiments"],summary:"Update regiment with optional document upload",security:[{bearerAuth:[]}],request:{params:zi,body:{content:{"multipart/form-data":{schema:Hm.omit({id:!0})}}}},responses:{200:{description:"Regiment updated successfully",summary:"Regiment Updated"},400:{description:"Invalid input data, regiment ID format, or invalid document format/size",summary:"Validation Error",content:{"application/json":{schema:B.object({errors:B.record(B.string(),B.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:B.object({message:B.string()})}}},404:{description:"Regiment not found with the provided ID",summary:"Regiment Not Found",content:{"application/json":{schema:B.object({message:B.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:B.object({message:B.string()})}}}}},zl={method:"delete",path:"/regiment/{id}",tags:["Regiments"],summary:"Delete regiment",security:[{bearerAuth:[]}],request:{params:Gm},responses:{200:{description:"Regiment deleted successfully",summary:"Regiment Deleted"},400:{description:"Invalid regiment ID format",summary:"Validation Error",content:{"application/json":{schema:B.object({errors:B.record(B.string(),B.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:B.object({message:B.string()})}}},404:{description:"Regiment not found with the provided ID",summary:"Regiment Not Found",content:{"application/json":{schema:B.object({message:B.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:B.object({message:B.string()})}}}}};import K from"zod";import{extendZodWithOpenApi as Wb}from"@asteasolutions/zod-to-openapi";import Pr from"zod";var Vl=5,Hl=1024,zb=Hl*Hl,Hb=Vl*zb;Wb(Pr);var Zm=Pr.object({caption:Pr.string().optional(),image:Pr.any().refine(o=>o==null||typeof o!="object"||typeof o.size!="number"?!1:o.size<=Hb,`A imagem deve ter no m\xE1ximo ${Vl}MB.`),congressId:Pr.uuid()}),Ki=class{constructor(e,r,t){this.regionalCongressGalleryRepository=e;this.regionalCongressRepository=r;this.firebaseStorageService=t}async handle(e,r){try{let{caption:t,image:i,congressId:n}=Zm.parse({...e.body,...e.params,image:e.file});if(!await this.regionalCongressRepository.findById(n))throw new p("O congresso n\xE3o existe.");let a=await this.regionalCongressGalleryRepository.create({caption:t,congressId:n,imageUrl:""}),c=await this.firebaseStorageService.uploadFile({file:i,id:a.id,folder:P.GALLERY});return await this.regionalCongressGalleryRepository.update({id:a.id,imageUrl:c}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as Vb}from"@asteasolutions/zod-to-openapi";import Km from"zod";Vb(Km);var Yi=Km.object({id:Km.uuid("ID inv\xE1lido")}),Ji=class{constructor(e){this.regionalCongressGalleryRepository=e}async handle(e,r){try{let{id:t}=Yi.parse(e.params);if(!await this.regionalCongressGalleryRepository.findById(t))throw new p("Item de galeria n\xE3o encontrado");return await this.regionalCongressGalleryRepository.deleteById(t),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as Zb}from"@asteasolutions/zod-to-openapi";import Qt from"zod";Zb(Qt);var Jm=Qt.object({congressId:Qt.uuid("ID do congresso inv\xE1lido"),page:Qt.coerce.number().int().positive().default(1),limit:Qt.coerce.number().int().positive().default(10),caption:Qt.string().optional()}),Xi=class{constructor(e){this.regionalCongressGalleryRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=Jm.parse({...e.params,...e.query}),s=(t-1)*i,a=await this.regionalCongressGalleryRepository.findByCongressId({pagination:{offset:s,limit:i},filter:n});if(!a)throw new p("Itens de galeria n\xE3o encontrados");let c=await this.regionalCongressGalleryRepository.count({filter:n});return r.status(200).json({data:a,pagination:{page:t,limit:i,total:c,totalPages:Math.ceil(c/i)}})}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as Kb}from"@asteasolutions/zod-to-openapi";import Ar from"zod";var Kl=5,Zl=1024,Jb=Zl*Zl,Yb=Kl*Jb;Kb(Ar);var Ym=Ar.object({id:Ar.string().uuid("ID inv\xE1lido"),caption:Ar.string().optional(),image:Ar.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=Yb,`A imagem deve ter no m\xE1ximo ${Kl}MB.`).optional()}),$i=class{constructor(e,r){this.regionalCongressGalleryRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,caption:i,image:n}=Ym.parse({...e.params,...e.body,image:e.file});if(!await this.regionalCongressGalleryRepository.findById(t))throw new p("Item de galeria n\xE3o encontrado");let a;return n&&(a=await this.firebaseStorageService.uploadFile({file:n,id:t,folder:P.GALLERY})),await this.regionalCongressGalleryRepository.update({id:t,caption:i,...a&&{imageUrl:a}}),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var Xb=K.object({id:K.uuid(),imageUrl:K.string(),caption:K.string().nullable(),congressId:K.uuid()}),Jl={method:"post",path:"/regional-congress/{congressId}/gallery",tags:["Regional Congresses"],summary:"Create a new congress gallery image",security:[{bearerAuth:[]}],request:{params:K.object({congressId:K.uuid()}),body:{content:{"application/json":{schema:Zm.omit({congressId:!0})}}}},responses:{201:{description:"Congress gallery image created successfully",summary:"Congress Gallery Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:K.object({errors:K.record(K.string(),K.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:K.object({message:K.string()})}}},404:{description:"Congress not found with the provided ID",summary:"Congress Not Found",content:{"application/json":{schema:K.object({message:K.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:K.object({message:K.string()})}}}}},Yl={method:"get",path:"/regional-congress/{congressId}/gallery",tags:["Regional Congresses"],summary:"Find congress gallery images by congress ID",request:{params:Jm},responses:{200:{description:"Congress gallery images retrieved successfully by congress ID",summary:"Congress Galleries Retrieved",content:{"application/json":{schema:K.array(Xb)}}},400:{description:"Invalid congress ID parameter provided",summary:"Validation Error",content:{"application/json":{schema:K.object({errors:K.record(K.string(),K.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:K.object({message:K.string()})}}}}},Xl={method:"put",path:"/regional-congress/gallery/{id}",tags:["Regional Congresses"],summary:"Update congress gallery image",security:[{bearerAuth:[]}],request:{params:Yi,body:{content:{"application/json":{schema:Ym.omit({id:!0})}}}},responses:{200:{description:"Congress gallery image updated successfully",summary:"Congress Gallery Updated"},400:{description:"Invalid input data or gallery ID format",summary:"Validation Error",content:{"application/json":{schema:K.object({errors:K.record(K.string(),K.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:K.object({message:K.string()})}}},404:{description:"Congress gallery image not found with the provided ID",summary:"Congress Gallery Not Found",content:{"application/json":{schema:K.object({message:K.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:K.object({message:K.string()})}}}}},$l={method:"delete",path:"/regional-congress/gallery/{id}",tags:["Regional Congresses"],summary:"Delete congress gallery image",security:[{bearerAuth:[]}],request:{params:Yi},responses:{200:{description:"Congress gallery image deleted successfully",summary:"Congress Gallery Deleted"},400:{description:"Invalid gallery ID format",summary:"Validation Error",content:{"application/json":{schema:K.object({errors:K.record(K.string(),K.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:K.object({message:K.string()})}}},404:{description:"Congress gallery image not found with the provided ID",summary:"Congress Gallery Not Found",content:{"application/json":{schema:K.object({message:K.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:K.object({message:K.string()})}}}}};import J from"zod";import{extendZodWithOpenApi as $b}from"@asteasolutions/zod-to-openapi";import Mr from"zod";var eu=2,Ql=1024,Qb=Ql*Ql,eC=eu*Qb;$b(Mr);var Xm=Mr.object({name:Mr.string().min(1,"Nome \xE9 obrigat\xF3rio"),logo:Mr.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=eC,`A imagem deve ter no m\xE1ximo ${eu}MB.`).optional(),congressId:Mr.uuid()}),Qi=class{constructor(e,r,t){this.regionalCongressPartnerRepository=e;this.regionalCongressRepository=r;this.firebaseStorageService=t}async handle(e,r){try{let{name:t,logo:i,congressId:n}=Xm.parse({...e.body,...e.params,logo:e.file});if(!await this.regionalCongressRepository.findById(n))throw new p("O congresso n\xE3o existe.");let a=await this.regionalCongressPartnerRepository.create({name:t,congressId:n}),c;return i&&(c=await this.firebaseStorageService.uploadFile({file:i,id:a.id,folder:P.PARTNER}),await this.regionalCongressPartnerRepository.update({id:a.id,logoUrl:c})),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as tC}from"@asteasolutions/zod-to-openapi";import $m from"zod";tC($m);var tn=$m.object({id:$m.string().uuid("ID inv\xE1lido")}),en=class{constructor(e){this.regionalCongressPartnerRepository=e}async handle(e,r){try{let{id:t}=tn.parse(e.params);if(!await this.regionalCongressPartnerRepository.findById(t))throw new p("Parceiro n\xE3o encontrado");return await this.regionalCongressPartnerRepository.deleteById(t),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as rC}from"@asteasolutions/zod-to-openapi";import er from"zod";rC(er);var Qm=er.object({congressId:er.uuid("ID do congresso inv\xE1lido"),page:er.coerce.number().int().positive().optional(),limit:er.coerce.number().int().positive().optional(),name:er.string().optional()}),rn=class{constructor(e){this.regionalCongressPartnerRepository=e}async handle(e,r){try{let{congressId:t,page:i,limit:n,name:s}=Qm.parse({...e.params,...e.query}),a=i!==void 0&&n!==void 0,c=a?{offset:(i-1)*n,limit:n}:void 0,d=await this.regionalCongressPartnerRepository.findByCongressId({pagination:c,filter:{congressId:t,name:s}});if(!d)throw new p("Parceiros n\xE3o encontrados");if(!a)return r.status(200).json(d);let h=await this.regionalCongressPartnerRepository.count({filter:{congressId:t,name:s}});return r.status(200).json({data:d,pagination:{page:i,limit:n,total:h,totalPages:Math.ceil(h/n)}})}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as oC}from"@asteasolutions/zod-to-openapi";import Tr from"zod";var ru=2,tu=1024,iC=tu*tu,nC=ru*iC;oC(Tr);var ec=Tr.object({id:Tr.string().uuid("ID inv\xE1lido"),name:Tr.string().min(1,"Nome \xE9 obrigat\xF3rio").optional(),logo:Tr.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=nC,`A imagem deve ter no m\xE1ximo ${ru}MB.`).optional()}),on=class{constructor(e,r){this.regionalCongressPartnerRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,name:i,logo:n}=ec.parse({...e.params,...e.body,logo:e.file});if(!await this.regionalCongressPartnerRepository.findById(t))throw new p("Parceiro n\xE3o encontrado");let a;return n&&(a=await this.firebaseStorageService.uploadFile({file:n,id:t,folder:P.PARTNER})),await this.regionalCongressPartnerRepository.update({id:t,name:i,...a&&{logoUrl:a}}),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var sC=J.object({id:J.uuid(),name:J.string(),logoUrl:J.string().nullable(),congressId:J.uuid()}),ou={method:"post",path:"/regional-congress/{congressId}/partner",tags:["Regional Congresses"],summary:"Create a new congress partner",security:[{bearerAuth:[]}],request:{params:J.object({congressId:J.uuid()}),body:{content:{"application/json":{schema:Xm.omit({congressId:!0})}}}},responses:{201:{description:"Congress partner created successfully",summary:"Congress Partner Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:J.object({errors:J.record(J.string(),J.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:J.object({message:J.string()})}}},404:{description:"Congress not found with the provided ID",summary:"Congress Not Found",content:{"application/json":{schema:J.object({message:J.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:J.object({message:J.string()})}}}}},iu={method:"get",path:"/regional-congress/{congressId}/partner",tags:["Regional Congresses"],summary:"Find congress partners by congress ID",request:{params:Qm},responses:{200:{description:"Congress partners retrieved successfully by congress ID",summary:"Congress Partners Retrieved",content:{"application/json":{schema:J.array(sC)}}},400:{description:"Invalid congress ID parameter provided",summary:"Validation Error",content:{"application/json":{schema:J.object({errors:J.record(J.string(),J.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:J.object({message:J.string()})}}}}},nu={method:"put",path:"/regional-congress/partner/{id}",tags:["Regional Congresses"],summary:"Update congress partner",security:[{bearerAuth:[]}],request:{params:tn,body:{content:{"application/json":{schema:ec.omit({id:!0})}}}},responses:{200:{description:"Congress partner updated successfully",summary:"Congress Partner Updated"},400:{description:"Invalid input data or partner ID format",summary:"Validation Error",content:{"application/json":{schema:J.object({errors:J.record(J.string(),J.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:J.object({message:J.string()})}}},404:{description:"Congress partner not found with the provided ID",summary:"Congress Partner Not Found",content:{"application/json":{schema:J.object({message:J.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:J.object({message:J.string()})}}}}},su={method:"delete",path:"/regional-congress/partner/{id}",tags:["Regional Congresses"],summary:"Delete congress partner",security:[{bearerAuth:[]}],request:{params:tn},responses:{200:{description:"Congress partner deleted successfully",summary:"Congress Partner Deleted"},400:{description:"Invalid partner ID format",summary:"Validation Error",content:{"application/json":{schema:J.object({errors:J.record(J.string(),J.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:J.object({message:J.string()})}}},404:{description:"Congress partner not found with the provided ID",summary:"Congress Partner Not Found",content:{"application/json":{schema:J.object({message:J.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:J.object({message:J.string()})}}}}};import u from"zod";import{extendZodWithOpenApi as aC}from"@asteasolutions/zod-to-openapi";import ee from"zod";aC(ee);var tc=ee.object({title:ee.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio"),edition:ee.coerce.number().int().positive("Edi\xE7\xE3o deve ser um n\xFAmero positivo"),startDate:ee.coerce.date(),endDate:ee.coerce.date(),description:ee.string().optional(),location:ee.string().optional(),congressLink:ee.union([ee.url("Link do congresso deve ser uma URL v\xE1lida"),ee.literal("")]),noticeUrl:ee.union([ee.url("URL do edital deve ser uma URL v\xE1lida"),ee.literal("")]),scheduleUrl:ee.union([ee.url("URL do cronograma deve ser uma URL v\xE1lida"),ee.literal("")]),programUrl:ee.union([ee.url("URL da programa\xE7\xE3o deve ser uma URL v\xE1lida"),ee.literal("")]),adminReportUrl:ee.union([ee.url("URL do relat\xF3rio administrativo deve ser uma URL v\xE1lida"),ee.literal("")]),proceedingsUrl:ee.union([ee.url("URL dos anais deve ser uma URL v\xE1lida"),ee.literal("")])}).refine(o=>o.endDate>=o.startDate,{message:"Data de t\xE9rmino deve ser posterior ou igual \xE0 data de in\xEDcio",path:["endDate"]}),nn=class{constructor(e){this.regionalCongressRepository=e}async handle(e,r){try{let t=tc.parse(e.body);return await this.regionalCongressRepository.create(t),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as mC}from"@asteasolutions/zod-to-openapi";import rc from"zod";mC(rc);var oc=rc.object({id:rc.string().uuid("ID inv\xE1lido")}),sn=class{constructor(e){this.regionalCongressRepository=e}async handle(e,r){try{let{id:t}=oc.parse(e.params);if(!await this.regionalCongressRepository.findById(t))throw new p("Congresso regional n\xE3o encontrado");return await this.regionalCongressRepository.deleteById(t),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as cC}from"@asteasolutions/zod-to-openapi";import ic from"zod";cC(ic);var nc=ic.object({edition:ic.coerce.number().int().positive("Edi\xE7\xE3o deve ser um n\xFAmero positivo")}),an=class{constructor(e){this.regionalCongressRepository=e}async handle(e,r){try{let{edition:t}=nc.parse(e.params),i=await this.regionalCongressRepository.findByEdition(t);if(!i||i.length===0)throw new p("Congresso regional n\xE3o encontrado");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as pC}from"@asteasolutions/zod-to-openapi";import sc from"zod";pC(sc);var cn=sc.object({id:sc.string().uuid("ID inv\xE1lido")}),mn=class{constructor(e){this.regionalCongressRepository=e}async handle(e,r){try{let{id:t}=cn.parse(e.params),i=await this.regionalCongressRepository.findById(t);if(!i)throw new p("Congresso regional n\xE3o encontrado");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as dC}from"@asteasolutions/zod-to-openapi";import lt from"zod";dC(lt);var ac=lt.object({page:lt.coerce.number().int().positive().default(1),limit:lt.coerce.number().int().positive().default(10),title:lt.string().optional(),edition:lt.coerce.number().int().positive().optional(),location:lt.string().optional(),orderBy:lt.enum(["asc","desc"]).optional().default("desc")}),pn=class{constructor(e){this.regionalCongressRepository=e}async handle(e,r){try{let{page:t,limit:i,orderBy:n,...s}=ac.parse(e.query),a=(t-1)*i,c=await this.regionalCongressRepository.find({pagination:{offset:a,limit:i},filter:{...s,orderBy:n}});if(!c)throw new p("Congressos regionais n\xE3o encontrados");let d=await this.regionalCongressRepository.count({filter:s});return r.status(200).json({data:c,pagination:{page:t,limit:i,total:d,totalPages:Math.ceil(d/i)}})}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as lC}from"@asteasolutions/zod-to-openapi";import Q from"zod";lC(Q);var mc=Q.object({id:Q.string().uuid("ID inv\xE1lido"),title:Q.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio").optional(),edition:Q.coerce.number().int().positive("Edi\xE7\xE3o deve ser um n\xFAmero positivo").optional(),startDate:Q.coerce.date().optional(),endDate:Q.coerce.date().optional(),description:Q.string().optional(),location:Q.string().optional(),congressLink:Q.union([Q.url("Link do congresso deve ser uma URL v\xE1lida"),Q.literal("")]),noticeUrl:Q.union([Q.url("URL do edital deve ser uma URL v\xE1lida"),Q.literal("")]),scheduleUrl:Q.union([Q.url("URL do cronograma deve ser uma URL v\xE1lida"),Q.literal("")]),programUrl:Q.union([Q.url("URL da programa\xE7\xE3o deve ser uma URL v\xE1lida"),Q.literal("")]),adminReportUrl:Q.union([Q.url("URL do relat\xF3rio administrativo deve ser uma URL v\xE1lida"),Q.literal("")]),proceedingsUrl:Q.union([Q.url("URL dos anais deve ser uma URL v\xE1lida"),Q.literal("")])}).refine(o=>o.startDate&&o.endDate?o.endDate>=o.startDate:!0,{message:"Data de t\xE9rmino deve ser posterior ou igual \xE0 data de in\xEDcio",path:["endDate"]}),dn=class{constructor(e){this.regionalCongressRepository=e}async handle(e,r){try{let{id:t}=Q.object({id:Q.string().uuid()}).parse(e.params);if(!await this.regionalCongressRepository.findById(t))throw new p("Congresso regional n\xE3o encontrado");let n=mc.parse({id:t,...e.body});return await this.regionalCongressRepository.update(n),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var uC=9,gC=u.object({image:u.any().openapi({type:"string",format:"binary"}),caption:u.string().optional()}),fC=u.object({image:u.any().openapi({type:"string",format:"binary"}).optional(),caption:u.string().optional()}),yC=u.object({id:u.uuid(),name:u.string(),logoUrl:u.string().nullable(),congressId:u.uuid()}),cc=u.object({id:u.uuid(),imageUrl:u.string(),caption:u.string().nullable(),congressId:u.uuid()}),pc=u.object({id:u.uuid(),title:u.string(),edition:u.number(),startDate:u.date(),endDate:u.date(),description:u.string().nullable(),location:u.string().nullable(),congressLink:u.string().nullable(),noticeUrl:u.string().nullable(),scheduleUrl:u.string().nullable(),programUrl:u.string().nullable(),adminReportUrl:u.string().nullable(),proceedingsUrl:u.string().nullable(),partners:u.array(yC),galleries:u.array(cc),createdAt:u.date(),updatedAt:u.date()}),au={method:"post",path:"/regional-congress",tags:["Regional Congresses"],summary:"Create a new regional congress",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:tc}}}},responses:{201:{description:"Regional congress created successfully",summary:"Regional Congress Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:u.object({errors:u.record(u.string(),u.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:u.object({message:u.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:u.object({message:u.string()})}}}}},mu={method:"get",path:"/regional-congress",tags:["Regional Congresses"],summary:"List all regional congresses with pagination and filters",request:{query:ac},responses:{200:{description:"List of regional congresses retrieved successfully with pagination",summary:"Regional Congresses Retrieved",content:{"application/json":{schema:u.object({page:u.number(),totalPages:u.number(),offset:u.number(),limit:u.number(),congresses:u.array(pc)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:u.object({errors:u.record(u.string(),u.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:u.object({message:u.string()})}}}}},cu={method:"get",path:"/regional-congress/{id}",tags:["Regional Congresses"],summary:"Find regional congress by ID",request:{params:cn},responses:{200:{description:"Regional congress details retrieved successfully",summary:"Regional Congress Retrieved",content:{"application/json":{schema:pc}}},400:{description:"Invalid regional congress ID format",summary:"Validation Error",content:{"application/json":{schema:u.object({errors:u.record(u.string(),u.string())})}}},404:{description:"Regional congress not found with the provided ID",summary:"Regional Congress Not Found",content:{"application/json":{schema:u.object({message:u.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:u.object({message:u.string()})}}}}},pu={method:"get",path:"/regional-congress/edition/{edition}",tags:["Regional Congresses"],summary:"Find regional congresses by edition",request:{params:nc},responses:{200:{description:"Regional congresses retrieved successfully by edition",summary:"Regional Congresses Retrieved by Edition",content:{"application/json":{schema:u.array(pc)}}},400:{description:"Invalid edition parameter provided",summary:"Validation Error",content:{"application/json":{schema:u.object({errors:u.record(u.string(),u.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:u.object({message:u.string()})}}}}},du={method:"put",path:"/regional-congress/{id}",tags:["Regional Congresses"],summary:"Update regional congress",security:[{bearerAuth:[]}],request:{params:cn,body:{content:{"application/json":{schema:mc.omit({id:!0})}}}},responses:{200:{description:"Regional congress updated successfully",summary:"Regional Congress Updated"},400:{description:"Invalid input data or regional congress ID format",summary:"Validation Error",content:{"application/json":{schema:u.object({errors:u.record(u.string(),u.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:u.object({message:u.string()})}}},404:{description:"Regional congress not found with the provided ID",summary:"Regional Congress Not Found",content:{"application/json":{schema:u.object({message:u.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:u.object({message:u.string()})}}}}},lu={method:"delete",path:"/regional-congress/{id}",tags:["Regional Congresses"],summary:"Delete regional congress",security:[{bearerAuth:[]}],request:{params:oc},responses:{200:{description:"Regional congress deleted successfully",summary:"Regional Congress Deleted"},400:{description:"Invalid regional congress ID format",summary:"Validation Error",content:{"application/json":{schema:u.object({errors:u.record(u.string(),u.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:u.object({message:u.string()})}}},404:{description:"Regional congress not found with the provided ID",summary:"Regional Congress Not Found",content:{"application/json":{schema:u.object({message:u.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:u.object({message:u.string()})}}}}},ek={method:"post",path:"/regional-congress/{congressId}/gallery",tags:["Regional Congress Gallery"],summary:"Create a new gallery image for a congress",security:[{bearerAuth:[]}],request:{params:u.object({congressId:u.uuid()}),body:{content:{"multipart/form-data":{schema:gC}}}},responses:{201:{description:"Gallery image created successfully",summary:"Gallery Image Created"},400:{description:"Invalid input data, missing required fields, or invalid image format/size",summary:"Validation Error",content:{"application/json":{schema:u.object({errors:u.record(u.string(),u.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:u.object({message:u.string()})}}},404:{description:"Congress not found with the provided ID",summary:"Congress Not Found",content:{"application/json":{schema:u.object({message:u.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:u.object({message:u.string()})}}}}},tk={method:"get",path:"/regional-congress/{congressId}/gallery",tags:["Regional Congress Gallery"],summary:"List all gallery images for a congress with pagination",request:{params:u.object({congressId:u.uuid()}),query:u.object({page:u.coerce.number().min(1).default(1),limit:u.coerce.number().min(1).default(uC),caption:u.string().optional()})},responses:{200:{description:"Gallery images retrieved successfully with pagination",summary:"Gallery Images Retrieved",content:{"application/json":{schema:u.object({page:u.number(),totalPages:u.number(),offset:u.number(),limit:u.number(),galleries:u.array(cc)})}}},400:{description:"Invalid congress ID format or query parameters",summary:"Validation Error",content:{"application/json":{schema:u.object({errors:u.record(u.string(),u.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:u.object({message:u.string()})}}}}},rk={method:"get",path:"/regional-congress/gallery/{id}",tags:["Regional Congress Gallery"],summary:"Find a gallery image by ID",request:{params:u.object({id:u.uuid()})},responses:{200:{description:"Gallery image retrieved successfully",summary:"Gallery Image Retrieved",content:{"application/json":{schema:cc}}},400:{description:"Invalid gallery image ID format",summary:"Validation Error",content:{"application/json":{schema:u.object({errors:u.record(u.string(),u.string())})}}},404:{description:"Gallery image not found with the provided ID",summary:"Gallery Image Not Found",content:{"application/json":{schema:u.object({message:u.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:u.object({message:u.string()})}}}}},ok={method:"put",path:"/regional-congress/gallery/{id}",tags:["Regional Congress Gallery"],summary:"Update a gallery image with optional image upload",security:[{bearerAuth:[]}],request:{params:u.object({id:u.uuid()}),body:{content:{"multipart/form-data":{schema:fC}}}},responses:{200:{description:"Gallery image updated successfully",summary:"Gallery Image Updated"},400:{description:"Invalid input data, gallery ID format, or invalid image format/size",summary:"Validation Error",content:{"application/json":{schema:u.object({errors:u.record(u.string(),u.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:u.object({message:u.string()})}}},404:{description:"Gallery image not found with the provided ID",summary:"Gallery Image Not Found",content:{"application/json":{schema:u.object({message:u.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:u.object({message:u.string()})}}}}},ik={method:"delete",path:"/regional-congress/gallery/{id}",tags:["Regional Congress Gallery"],summary:"Delete a gallery image",security:[{bearerAuth:[]}],request:{params:u.object({id:u.uuid()})},responses:{200:{description:"Gallery image deleted successfully",summary:"Gallery Image Deleted"},400:{description:"Invalid gallery ID format",summary:"Validation Error",content:{"application/json":{schema:u.object({errors:u.record(u.string(),u.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:u.object({message:u.string()})}}},404:{description:"Gallery image not found with the provided ID",summary:"Gallery Image Not Found",content:{"application/json":{schema:u.object({message:u.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:u.object({message:u.string()})}}}}};import{$Enums as Rc}from"@prisma/client";import b from"zod";import{extendZodWithOpenApi as hC}from"@asteasolutions/zod-to-openapi";import{Degree as RC,Seniority as IC}from"@prisma/client";import Ce from"zod";hC(Ce);var dc=Ce.object({registrationNumber:Ce.string(),mainEtps:Ce.string().optional(),formations:Ce.string().optional(),degrees:Ce.array(Ce.enum(RC)),occupations:Ce.string(),seniority:Ce.enum(IC),institutions:Ce.string(),biography:Ce.string().optional(),userId:Ce.string()}),ln=class{constructor(e){this.researcherRepository=e}async handle(e,r){try{let{registrationNumber:t,mainEtps:i,formations:n,degrees:s,occupations:a,seniority:c,institutions:d,biography:h,userId:j}=dc.parse(e.body);if(await this.researcherRepository.findByRegistrationNumber(t))throw new oe("J\xE1 existe um pesquisador cadastrado com este n\xFAmero de registro.");if(await this.researcherRepository.findByUserId(j))throw new oe("Usu\xE1rio j\xE1 possui um perfil de pesquisador.");return await this.researcherRepository.create({registrationNumber:t,mainEtps:i,formations:n,degrees:s,occupations:a,seniority:c,institutions:d,biography:h,userId:j}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as bC}from"@asteasolutions/zod-to-openapi";import lc from"zod";bC(lc);var uc=lc.object({id:lc.uuid()}),un=class{constructor(e){this.researcherRepository=e}async handle(e,r){try{let{id:t}=uc.parse({id:e.params.id});if(!await this.researcherRepository.findById(t))throw new p("O pesquisador n\xE3o existe.");return await this.researcherRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as CC}from"@asteasolutions/zod-to-openapi";import gc from"zod";CC(gc);var fn=gc.object({id:gc.uuid()}),gn=class{constructor(e){this.researcherRepository=e}async handle(e,r){try{let{id:t}=fn.parse({id:e.params.id}),i=await this.researcherRepository.findById(t);if(!i)throw new p("O pesquisador n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as SC}from"@asteasolutions/zod-to-openapi";import fc from"zod";SC(fc);var yc=fc.object({userId:fc.uuid()}),yn=class{constructor(e){this.researcherRepository=e}async handle(e,r){try{let{userId:t}=yc.parse({userId:e.params.userId}),i=await this.researcherRepository.findByUserId(t);if(!i)throw new p("O pesquisador n\xE3o existe para este usu\xE1rio.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as wC}from"@asteasolutions/zod-to-openapi";import{Degree as vC,Seniority as EC}from"@prisma/client";import Se from"zod";wC(Se);var hc=Se.object({id:Se.uuid(),registrationNumber:Se.string().optional(),mainEtps:Se.string().optional(),formations:Se.string().optional(),degrees:Se.array(Se.enum(vC)).optional(),occupations:Se.string().optional(),seniority:Se.enum(EC).optional(),institutions:Se.string().optional(),biography:Se.string().optional()}),hn=class{constructor(e){this.researcherRepository=e}async handle(e,r){try{let{id:t,registrationNumber:i,mainEtps:n,formations:s,degrees:a,occupations:c,seniority:d,institutions:h,biography:j}=hc.parse({id:e.params.id,...e.body}),q=await this.researcherRepository.findById(t);if(!q)throw new p("O pesquisador n\xE3o existe.");if(i&&i!==q.registrationNumber){let Y=await this.researcherRepository.findByRegistrationNumber(i);if(Y&&Y.id!==t)throw new oe("J\xE1 existe um pesquisador com este n\xFAmero de registro.")}return await this.researcherRepository.update({id:t,registrationNumber:i,mainEtps:n,formations:s,degrees:a,occupations:c,seniority:d,institutions:h,biography:j}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var jC=1,xC=9,Ic=b.object({id:b.uuid(),registrationNumber:b.string(),mainEtps:b.string().nullable(),formations:b.string().nullable(),degrees:b.array(b.enum(Rc.Degree)),occupations:b.string(),seniority:b.enum(Rc.Seniority),institutions:b.string(),biography:b.string().nullable(),createdAt:b.date(),updatedAt:b.date(),userId:b.uuid(),user:b.object({id:b.uuid(),name:b.string(),emailAddress:b.string(),avatarUrl:b.string().nullable(),orcid:b.string().nullable(),phone:b.string().nullable(),lattesUrl:b.string().nullable(),role:b.enum(Rc.UserRole)})}),uu={method:"post",path:"/researcher",tags:["Researchers"],summary:"Create a new researcher profile",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:dc}}}},responses:{201:{description:"Researcher profile created successfully",summary:"Researcher Created",content:{"application/json":{schema:b.object({message:b.string()})}}},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:b.object({errors:b.record(b.string(),b.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:b.object({message:b.string()})}}},409:{description:"Researcher with this registration number already exists or user already has a researcher profile",summary:"Conflict",content:{"application/json":{schema:b.object({message:b.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:b.object({message:b.string()})}}}}},gu={method:"get",path:"/researcher",tags:["Researchers"],summary:"List all researchers with pagination and filters",request:{query:b.object({page:b.coerce.number().min(1).default(jC).optional(),limit:b.coerce.number().min(1).default(xC).optional(),userId:b.string().optional(),registrationNumber:b.string().optional(),name:b.string().optional(),emailAddress:b.string().optional(),mainEtps:b.string().optional(),formations:b.string().optional(),occupations:b.string().optional(),institutions:b.string().optional(),biography:b.string().optional(),orderBy:b.enum(["asc","desc"]).optional()})},responses:{200:{description:"List of researchers retrieved successfully with pagination",summary:"Researchers Retrieved",content:{"application/json":{schema:b.object({page:b.number(),totalPages:b.number(),offset:b.number(),limit:b.number(),researchers:b.array(Ic)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:b.object({message:b.string()})}}}}},fu={method:"get",path:"/researcher/{id}",tags:["Researchers"],summary:"Find researcher by ID",request:{params:fn},responses:{200:{description:"Researcher details retrieved successfully",summary:"Researcher Retrieved",content:{"application/json":{schema:Ic}}},400:{description:"Invalid researcher ID format",summary:"Validation Error",content:{"application/json":{schema:b.object({errors:b.record(b.string(),b.string())})}}},404:{description:"Researcher not found with the provided ID",summary:"Researcher Not Found",content:{"application/json":{schema:b.object({message:b.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:b.object({message:b.string()})}}}}},yu={method:"get",path:"/researcher/user/{userId}",tags:["Researchers"],summary:"Find researcher by user ID",request:{params:yc},responses:{200:{description:"Researcher details retrieved successfully",summary:"Researcher Retrieved",content:{"application/json":{schema:Ic}}},400:{description:"Invalid user ID format",summary:"Validation Error",content:{"application/json":{schema:b.object({errors:b.record(b.string(),b.string())})}}},404:{description:"Researcher not found for this user",summary:"Researcher Not Found",content:{"application/json":{schema:b.object({message:b.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:b.object({message:b.string()})}}}}},hu={method:"put",path:"/researcher/{id}",tags:["Researchers"],summary:"Update researcher profile",security:[{bearerAuth:[]}],request:{params:fn,body:{content:{"application/json":{schema:hc.omit({id:!0})}}}},responses:{200:{description:"Researcher profile updated successfully",summary:"Researcher Updated",content:{"application/json":{schema:b.object({message:b.string()})}}},400:{description:"Invalid input data or researcher ID format",summary:"Validation Error",content:{"application/json":{schema:b.object({errors:b.record(b.string(),b.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:b.object({message:b.string()})}}},404:{description:"Researcher not found with the provided ID",summary:"Researcher Not Found",content:{"application/json":{schema:b.object({message:b.string()})}}},409:{description:"Researcher with this registration number already exists",summary:"Conflict",content:{"application/json":{schema:b.object({message:b.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:b.object({message:b.string()})}}}}},Ru={method:"delete",path:"/researcher/{id}",tags:["Researchers"],summary:"Delete researcher profile",security:[{bearerAuth:[]}],request:{params:uc},responses:{200:{description:"Researcher profile deleted successfully",summary:"Researcher Deleted"},400:{description:"Invalid researcher ID format",summary:"Validation Error",content:{"application/json":{schema:b.object({errors:b.record(b.string(),b.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:b.object({message:b.string()})}}},404:{description:"Researcher not found with the provided ID",summary:"Researcher Not Found",content:{"application/json":{schema:b.object({message:b.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:b.object({message:b.string()})}}}}};import y from"zod";import{extendZodWithOpenApi as PC}from"@asteasolutions/zod-to-openapi";import bc from"zod";PC(bc);var Cc=bc.object({id:bc.uuid()}),Rn=class{constructor(e){this.scientificArticlesRepository=e}async handle(e,r){try{let{id:t}=Cc.parse({id:e.params.id});if(!await this.scientificArticlesRepository.findById(t))throw new p("O artigo cient\xEDfico n\xE3o existe.");return await this.scientificArticlesRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as AC}from"@asteasolutions/zod-to-openapi";import Sc from"zod";AC(Sc);var wc=Sc.object({id:Sc.uuid()}),In=class{constructor(e){this.scientificArticlesRepository=e}async handle(e,r){try{let{id:t}=wc.parse({id:e.params.id}),i=await this.scientificArticlesRepository.findById(t);if(!i)throw new p("Artigo cient\xEDfico n\xE3o encontrado.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as MC}from"@asteasolutions/zod-to-openapi";import ut from"zod";var TC=1,DC=6;MC(ut);var vc=ut.object({page:ut.coerce.number().min(1).default(TC),limit:ut.coerce.number().min(1).default(DC),title:ut.string().optional(),author:ut.string().optional(),journal:ut.string().optional(),orderBy:ut.enum(["asc","desc"]).default("desc")}),bn=class{constructor(e){this.scientificArticlesRepository=e}async handle(e,r){try{let{limit:t,page:i,...n}=vc.parse(e.query),s=i*t-t,[a,c]=await Promise.all([this.scientificArticlesRepository.find({pagination:{offset:s,limit:t},filter:n}),this.scientificArticlesRepository.count({filter:n})]),d=Math.max(Math.ceil(c/t),1);return r.status(200).json({page:i,totalPages:d,offset:s,limit:t,scientificArticles:a})}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as FC}from"@asteasolutions/zod-to-openapi";import ie from"zod";FC(ie);var Ec=ie.object({id:ie.uuid(),title:ie.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio.").optional(),author:ie.string().min(1,"Autor \xE9 obrigat\xF3rio.").optional(),journal:ie.string().optional(),volume:ie.string().optional(),edition:ie.string().optional(),pageStart:ie.coerce.number().optional(),pageEnd:ie.coerce.number().optional(),startDate:ie.coerce.date().optional(),endDate:ie.coerce.date().optional(),city:ie.string().optional(),state:ie.string().optional(),country:ie.string().optional(),publisher:ie.string().optional(),description:ie.string().optional(),year:ie.coerce.number().optional(),accessUrl:ie.url("URL de acesso deve ser v\xE1lida").optional()}),Cn=class{constructor(e){this.scientificArticlesRepository=e}async handle(e,r){try{let{id:t,title:i,author:n,journal:s,volume:a,edition:c,pageStart:d,pageEnd:h,startDate:j,endDate:q,city:Y,state:$,country:le,publisher:Te,description:Cr,year:ks,accessUrl:Jy}=Ec.parse({id:e.params.id,...e.body});if(!await this.scientificArticlesRepository.findById(t))throw new p("O artigo cient\xEDfico n\xE3o existe.");return await this.scientificArticlesRepository.update({id:t,title:i,author:n,journal:s,volume:a,edition:c,pageStart:d,pageEnd:h,startDate:j,endDate:q,city:Y,state:$,country:le,publisher:Te,description:Cr,year:ks,accessUrl:Jy}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var Iu={method:"post",path:"/scientific-articles",tags:["Scientific Articles"],summary:"Create scientific article",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:y.object({title:y.string().min(1).openapi({description:"T\xEDtulo do artigo"}),author:y.string().min(1).openapi({description:"Autor do artigo"}),journal:y.string().optional().openapi({description:"Nome do peri\xF3dico/revista"}),volume:y.string().optional().openapi({description:"Volume"}),edition:y.string().optional().openapi({description:"N\xFAmero/Edi\xE7\xE3o"}),pageStart:y.number().optional().openapi({description:"P\xE1gina inicial"}),pageEnd:y.number().optional().openapi({description:"P\xE1gina final"}),startDate:y.string().openapi({description:"Data de in\xEDcio (ISO 8601)",example:"2024-01-01T10:00:00Z"}),endDate:y.string().openapi({description:"Data de t\xE9rmino (ISO 8601)",example:"2024-12-31T10:00:00Z"}),city:y.string().optional().openapi({description:"Cidade"}),state:y.string().optional().openapi({description:"Estado"}),country:y.string().optional().openapi({description:"Pa\xEDs"}),publisher:y.string().optional().openapi({description:"Editora/Institui\xE7\xE3o"}),description:y.string().optional().openapi({description:"Descri\xE7\xE3o do artigo"}),year:y.number().optional().openapi({description:"Ano"}),accessUrl:y.string().url().optional().openapi({description:"URL de acesso"})})}}}},responses:{201:{description:"Scientific article created successfully",summary:"Article Created"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:y.object({errors:y.record(y.string(),y.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:y.object({message:y.string()})}}}}},bu={method:"get",path:"/scientific-articles",tags:["Scientific Articles"],summary:"List scientific articles",security:[{bearerAuth:[]}],request:{query:vc},responses:{200:{description:"Paginated list of scientific articles retrieved successfully",summary:"Articles Retrieved",content:{"application/json":{schema:y.object({page:y.number(),totalPages:y.number(),offset:y.number(),limit:y.number(),scientificArticles:y.array(y.object({id:y.string(),title:y.string(),author:y.string(),journal:y.string().nullable(),volume:y.string().nullable(),edition:y.string().nullable(),pageStart:y.number().nullable(),pageEnd:y.number().nullable(),startDate:y.date(),endDate:y.date(),city:y.string().nullable(),state:y.string().nullable(),country:y.string().nullable(),publisher:y.string().nullable(),description:y.string().nullable(),year:y.number().nullable(),accessUrl:y.string().nullable(),createdAt:y.date(),updatedAt:y.date()}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:y.object({errors:y.record(y.string(),y.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:y.object({message:y.string()})}}}}},Cu={method:"get",path:"/scientific-articles/{id}",tags:["Scientific Articles"],summary:"Find scientific article by ID",security:[{bearerAuth:[]}],request:{params:wc},responses:{200:{description:"Scientific article details retrieved successfully",summary:"Article Retrieved",content:{"application/json":{schema:y.object({id:y.string(),title:y.string(),author:y.string(),journal:y.string().nullable(),volume:y.string().nullable(),edition:y.string().nullable(),pageStart:y.number().nullable(),pageEnd:y.number().nullable(),startDate:y.date(),endDate:y.date(),city:y.string().nullable(),state:y.string().nullable(),country:y.string().nullable(),publisher:y.string().nullable(),description:y.string().nullable(),year:y.number().nullable(),accessUrl:y.string().nullable(),createdAt:y.date(),updatedAt:y.date()}).nullable()}}},400:{description:"Invalid article ID format",summary:"Validation Error",content:{"application/json":{schema:y.object({errors:y.record(y.string(),y.string())})}}},404:{description:"Scientific article not found with the provided ID",summary:"Article Not Found",content:{"application/json":{schema:y.object({message:y.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:y.object({message:y.string()})}}}}},Su={method:"put",path:"/scientific-articles/{id}",tags:["Scientific Articles"],summary:"Update scientific article",security:[{bearerAuth:[]}],request:{params:Ec.pick({id:!0}),body:{content:{"application/json":{schema:y.object({title:y.string().min(1).optional().openapi({description:"T\xEDtulo do artigo"}),author:y.string().min(1).optional().openapi({description:"Autor do artigo"}),journal:y.string().optional().openapi({description:"Nome do peri\xF3dico/revista"}),volume:y.string().optional().openapi({description:"Volume"}),edition:y.string().optional().openapi({description:"N\xFAmero/Edi\xE7\xE3o"}),pageStart:y.number().optional().openapi({description:"P\xE1gina inicial"}),pageEnd:y.number().optional().openapi({description:"P\xE1gina final"}),startDate:y.string().optional().openapi({description:"Data de in\xEDcio (ISO 8601)",example:"2024-01-01T10:00:00Z"}),endDate:y.string().optional().openapi({description:"Data de t\xE9rmino (ISO 8601)",example:"2024-12-31T10:00:00Z"}),city:y.string().optional().openapi({description:"Cidade"}),state:y.string().optional().openapi({description:"Estado"}),country:y.string().optional().openapi({description:"Pa\xEDs"}),publisher:y.string().optional().openapi({description:"Editora/Institui\xE7\xE3o"}),description:y.string().optional().openapi({description:"Descri\xE7\xE3o do artigo"}),year:y.number().optional().openapi({description:"Ano"}),accessUrl:y.string().url().optional().openapi({description:"URL de acesso"})})}}}},responses:{200:{description:"Scientific article updated successfully",summary:"Article Updated"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:y.object({errors:y.record(y.string(),y.string())})}}},404:{description:"Scientific article not found with the provided ID",summary:"Article Not Found",content:{"application/json":{schema:y.object({message:y.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:y.object({message:y.string()})}}}}},wu={method:"delete",path:"/scientific-articles/{id}",tags:["Scientific Articles"],summary:"Delete scientific article",security:[{bearerAuth:[]}],request:{params:Cc},responses:{200:{description:"Scientific article deleted successfully",summary:"Article Deleted"},400:{description:"Invalid article ID format",summary:"Validation Error",content:{"application/json":{schema:y.object({errors:y.record(y.string(),y.string())})}}},404:{description:"Scientific article not found with the provided ID",summary:"Article Not Found",content:{"application/json":{schema:y.object({message:y.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:y.object({message:y.string()})}}}}};import E from"zod";import{extendZodWithOpenApi as BC}from"@asteasolutions/zod-to-openapi";import jc from"zod";BC(jc);var xc=jc.object({id:jc.uuid()}),Sn=class{constructor(e,r){this.scientificJournalRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=xc.parse({id:e.params.id}),i=await this.scientificJournalRepository.findById(t);if(!i)throw new p("A revista cient\xEDfica n\xE3o existe.");return i.logoUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.logoUrl}),await this.scientificJournalRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as UC}from"@asteasolutions/zod-to-openapi";import Pc from"zod";UC(Pc);var Ac=Pc.object({id:Pc.uuid()}),wn=class{constructor(e){this.scientificJournalRepository=e}async handle(e,r){try{let{id:t}=Ac.parse({id:e.params.id}),i=await this.scientificJournalRepository.findById(t);if(!i)throw new p("Revista cient\xEDfica n\xE3o encontrada.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as qC}from"@asteasolutions/zod-to-openapi";import qe from"zod";var OC=1,kC=6;qC(qe);var Mc=qe.object({page:qe.coerce.number().min(1).default(OC),limit:qe.coerce.number().min(1).default(kC),name:qe.string().optional(),description:qe.string().optional(),issn:qe.string().optional(),directors:qe.string().optional(),editorialBoard:qe.string().optional(),orderBy:qe.enum(["asc","desc"]).default("desc")}),vn=class{constructor(e){this.scientificJournalRepository=e}async handle(e,r){try{let{limit:t,page:i,...n}=Mc.parse(e.query),s=i*t-t,[a,c]=await Promise.all([this.scientificJournalRepository.find({pagination:{offset:s,limit:t},filter:n}),this.scientificJournalRepository.count({filter:n})]),d=Math.max(Math.ceil(c/t),1);return r.status(200).json({page:i,totalPages:d,offset:s,limit:t,scientificJournals:a})}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as NC}from"@asteasolutions/zod-to-openapi";import Oe from"zod";var Eu=5,vu=1024,GC=vu*vu,LC=Eu*GC;NC(Oe);var Tc=Oe.object({id:Oe.uuid(),name:Oe.string().min(1,"Nome \xE9 obrigat\xF3rio.").optional(),issn:Oe.string().min(1,"ISSN \xE9 obrigat\xF3rio.").optional(),description:Oe.string().min(1,"Descri\xE7\xE3o \xE9 obrigat\xF3ria.").optional(),journalUrl:Oe.url("URL da revista deve ser v\xE1lida.").optional(),directors:Oe.string().optional(),editorialBoard:Oe.string().optional(),logo:Oe.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=LC,`O logo deve ter no m\xE1ximo ${Eu}MB.`).optional()}),En=class{constructor(e,r){this.scientificJournalRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,logo:i,name:n,issn:s,description:a,journalUrl:c,directors:d,editorialBoard:h}=Tc.parse({id:e.params.id,...e.body,logo:e.file}),j=await this.scientificJournalRepository.findById(t);if(!j)throw new p("A revista cient\xEDfica n\xE3o existe.");let q=j.logoUrl;return i&&(q=await this.firebaseStorageService.uploadFile({file:i,id:t,folder:P.SCIENTIFIC_JOURNAL})),await this.scientificJournalRepository.update({id:t,name:n,issn:s,description:a,journalUrl:c,directors:d,editorialBoard:h,logoUrl:q}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var ju={method:"post",path:"/scientific-journals",tags:["Scientific Journals"],summary:"Create scientific journal",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:E.object({name:E.string().min(1).openapi({description:"Nome da revista cient\xEDfica"}),issn:E.string().min(1).openapi({description:"ISSN da revista"}),description:E.string().min(1).openapi({description:"Descri\xE7\xE3o da revista"}),journalUrl:E.string().url().openapi({description:"URL da revista"}),directors:E.string().optional().openapi({description:"Diretores da revista"}),editorialBoard:E.string().optional().openapi({description:"Conselho editorial"}),logo:E.string().optional().openapi({description:"Logo da revista (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{201:{description:"Scientific journal created successfully",summary:"Journal Created"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:E.object({errors:E.record(E.string(),E.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:E.object({message:E.string()})}}}}},xu={method:"get",path:"/scientific-journals",tags:["Scientific Journals"],summary:"List scientific journals",security:[{bearerAuth:[]}],request:{query:Mc},responses:{200:{description:"Paginated list of scientific journals retrieved successfully",summary:"Journals Retrieved",content:{"application/json":{schema:E.object({page:E.number(),totalPages:E.number(),offset:E.number(),limit:E.number(),scientificJournals:E.array(E.object({id:E.string(),name:E.string(),issn:E.string(),description:E.string(),logoUrl:E.string().nullable(),journalUrl:E.string(),directors:E.string().nullable(),editorialBoard:E.string().nullable(),createdAt:E.date(),updatedAt:E.date()}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:E.object({errors:E.record(E.string(),E.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:E.object({message:E.string()})}}}}},Pu={method:"get",path:"/scientific-journals/{id}",tags:["Scientific Journals"],summary:"Find scientific journal by ID",security:[{bearerAuth:[]}],request:{params:Ac},responses:{200:{description:"Scientific journal details retrieved successfully",summary:"Journal Retrieved",content:{"application/json":{schema:E.object({id:E.string(),name:E.string(),issn:E.string(),description:E.string(),logoUrl:E.string().nullable(),journalUrl:E.string(),directors:E.string().nullable(),editorialBoard:E.string().nullable(),createdAt:E.date(),updatedAt:E.date()}).nullable()}}},400:{description:"Invalid journal ID format",summary:"Validation Error",content:{"application/json":{schema:E.object({errors:E.record(E.string(),E.string())})}}},404:{description:"Scientific journal not found with the provided ID",summary:"Journal Not Found",content:{"application/json":{schema:E.object({message:E.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:E.object({message:E.string()})}}}}},Au={method:"put",path:"/scientific-journals/{id}",tags:["Scientific Journals"],summary:"Update scientific journal",security:[{bearerAuth:[]}],request:{params:Tc.pick({id:!0}),body:{content:{"multipart/form-data":{schema:E.object({name:E.string().min(1).optional().openapi({description:"Nome da revista cient\xEDfica"}),issn:E.string().min(1).optional().openapi({description:"ISSN da revista"}),description:E.string().min(1).optional().openapi({description:"Descri\xE7\xE3o da revista"}),journalUrl:E.string().url().optional().openapi({description:"URL da revista"}),directors:E.string().optional().openapi({description:"Diretores da revista"}),editorialBoard:E.string().optional().openapi({description:"Conselho editorial"}),logo:E.string().optional().openapi({description:"Logo da revista (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{200:{description:"Scientific journal updated successfully",summary:"Journal Updated"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:E.object({errors:E.record(E.string(),E.string())})}}},404:{description:"Scientific journal not found with the provided ID",summary:"Journal Not Found",content:{"application/json":{schema:E.object({message:E.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:E.object({message:E.string()})}}}}},Mu={method:"delete",path:"/scientific-journals/{id}",tags:["Scientific Journals"],summary:"Delete scientific journal",security:[{bearerAuth:[]}],request:{params:xc},responses:{200:{description:"Scientific journal deleted successfully",summary:"Journal Deleted"},400:{description:"Invalid journal ID format",summary:"Validation Error",content:{"application/json":{schema:E.object({errors:E.record(E.string(),E.string())})}}},404:{description:"Scientific journal not found with the provided ID",summary:"Journal Not Found",content:{"application/json":{schema:E.object({message:E.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:E.object({message:E.string()})}}}}};import{$Enums as VC}from"@prisma/client";import G from"zod";import{extendZodWithOpenApi as _C}from"@asteasolutions/zod-to-openapi";import tr from"zod";_C(tr);var Dc=tr.object({role:tr.string().min(1),description:tr.string().optional(),userId:tr.uuid(),order:tr.number().optional()}),jn=class{constructor(e){this.sdhcTeamMemberRepository=e}async handle(e,r){try{let{role:t,description:i,userId:n,order:s}=Dc.parse(e.body);return await this.sdhcTeamMemberRepository.create({role:t,description:i,userId:n,order:s??0}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as WC}from"@asteasolutions/zod-to-openapi";import Fc from"zod";WC(Fc);var Bc=Fc.object({id:Fc.uuid()}),xn=class{constructor(e){this.sdhcTeamMemberRepository=e}async handle(e,r){try{let{id:t}=Bc.parse({id:e.params.id});if(!await this.sdhcTeamMemberRepository.findById(t))throw new p("O membro da equipe SDHC n\xE3o existe.");return await this.sdhcTeamMemberRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as zC}from"@asteasolutions/zod-to-openapi";import Uc from"zod";zC(Uc);var An=Uc.object({id:Uc.uuid()}),Pn=class{constructor(e){this.sdhcTeamMemberRepository=e}async handle(e,r){try{let{id:t}=An.parse({id:e.params.id}),i=await this.sdhcTeamMemberRepository.findById(t);if(!i)throw new p("O membro da equipe SDHC n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as HC}from"@asteasolutions/zod-to-openapi";import Et from"zod";HC(Et);var qc=Et.object({id:Et.uuid(),role:Et.string().min(1).optional(),description:Et.string().optional(),userId:Et.uuid().optional(),order:Et.number().optional()}),Mn=class{constructor(e){this.sdhcTeamMemberRepository=e}async handle(e,r){try{let{id:t,role:i,description:n,userId:s,order:a}=qc.parse({id:e.params.id,...e.body});if(!await this.sdhcTeamMemberRepository.findById(t))throw new p("O membro da equipe SDHC n\xE3o existe.");return await this.sdhcTeamMemberRepository.update({id:t,role:i,description:n,userId:s,order:a}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var ZC=G.object({id:G.uuid(),name:G.string(),emailAddress:G.string(),avatarUrl:G.string().nullable(),orcid:G.string().nullable(),phone:G.string().nullable(),lattesUrl:G.string().nullable(),role:G.enum(VC.UserRole)}),Tu=G.object({id:G.uuid(),role:G.string(),description:G.string().nullable(),order:G.number(),createdAt:G.date(),updatedAt:G.date(),userId:G.uuid(),user:ZC}),Du={method:"post",path:"/sdhc-team-member",tags:["SDHC Team Members"],summary:"Create a new SDHC Team Member",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:Dc}}}},responses:{201:{description:"SDHC Team Member created successfully",summary:"SDHC Team Member Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:G.object({errors:G.record(G.string(),G.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:G.object({message:G.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:G.object({message:G.string()})}}}}},Fu={method:"get",path:"/sdhc-team-member",tags:["SDHC Team Members"],summary:"List all SDHC Team Members with filters",request:{query:G.object({role:G.string().optional(),orderBy:G.enum(["asc","desc"]).optional()})},responses:{200:{description:"List of SDHC Team Members retrieved successfully",summary:"SDHC Team Members Retrieved",content:{"application/json":{schema:G.object({members:G.array(Tu)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:G.object({message:G.string()})}}}}},Bu={method:"get",path:"/sdhc-team-member/{id}",tags:["SDHC Team Members"],summary:"Find SDHC Team Member by ID",request:{params:An},responses:{200:{description:"SDHC Team Member details retrieved successfully",summary:"SDHC Team Member Retrieved",content:{"application/json":{schema:Tu}}},400:{description:"Invalid SDHC Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:G.object({errors:G.record(G.string(),G.string())})}}},404:{description:"SDHC Team Member not found with the provided ID",summary:"SDHC Team Member Not Found",content:{"application/json":{schema:G.object({message:G.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:G.object({message:G.string()})}}}}},Uu={method:"put",path:"/sdhc-team-member/{id}",tags:["SDHC Team Members"],summary:"Update SDHC Team Member",security:[{bearerAuth:[]}],request:{params:An,body:{content:{"application/json":{schema:qc.omit({id:!0})}}}},responses:{200:{description:"SDHC Team Member updated successfully",summary:"SDHC Team Member Updated"},400:{description:"Invalid input data or SDHC Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:G.object({errors:G.record(G.string(),G.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:G.object({message:G.string()})}}},404:{description:"SDHC Team Member not found with the provided ID",summary:"SDHC Team Member Not Found",content:{"application/json":{schema:G.object({message:G.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:G.object({message:G.string()})}}}}},qu={method:"delete",path:"/sdhc-team-member/{id}",tags:["SDHC Team Members"],summary:"Delete SDHC Team Member",security:[{bearerAuth:[]}],request:{params:Bc},responses:{200:{description:"SDHC Team Member deleted successfully",summary:"SDHC Team Member Deleted"},400:{description:"Invalid SDHC Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:G.object({errors:G.record(G.string(),G.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:G.object({message:G.string()})}}},404:{description:"SDHC Team Member not found with the provided ID",summary:"SDHC Team Member Not Found",content:{"application/json":{schema:G.object({message:G.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:G.object({message:G.string()})}}}}};import{$Enums as Nu}from"@prisma/client";import W from"zod";import{extendZodWithOpenApi as KC}from"@asteasolutions/zod-to-openapi";import Oc from"zod";KC(Oc);var kc=Oc.object({id:Oc.string()}),Tn=class{constructor(e){this.userRepository=e}async handle(e,r){try{let{id:t}=kc.parse({id:e.params.id}),i=await this.userRepository.findById(t);if(!i)throw new p("O usu\xE1rio n\xE3o existe.");let n=e.user.id;if(i.id!==n)throw new he("Voc\xEA n\xE3o tem permiss\xE3o para deletar o usu\xE1rio");return await this.userRepository.deleteById(i.id),r.sendStatus(204)}catch(t){if(console.log(t),t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as JC}from"@asteasolutions/zod-to-openapi";import{z as Nc}from"zod";JC(Nc);var Gc=Nc.object({id:Nc.string().min(1,"id do usu\xE1rio n\xE3o fornecido.")}),Dn=class{constructor(e){this.userRepository=e}async handle(e,r){try{let{id:t}=Gc.parse(e.params),i=await this.userRepository.findById(t);if(!i)throw new p("Usu\xE1rio n\xE3o encontrado");r.status(200).json(i)}catch(t){if(console.log(t),t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as YC}from"@asteasolutions/zod-to-openapi";import jt from"zod";var ku=2,Ou=1024,XC=Ou*Ou,$C=ku*XC,QC=/^\d{4}-\d{4}-\d{4}-\d{4}$/,eS=/^\(?\d{2}\)?[\s-]?\d{4,5}-?\d{4}$/;YC(jt);var Lc=jt.object({name:jt.string().optional(),lattesUrl:jt.string().optional(),orcid:jt.string().optional().transform(o=>o===void 0?void 0:o.trim()).refine(o=>o===void 0||o===""||QC.test(o),{message:"ORCID inv\xE1lido. Deve estar no formato 0000-0000-0000-0000"}),phone:jt.string().optional().refine(o=>o===void 0||o===""||eS.test(o),{message:"Telefone inv\xE1lido. Deve estar no formato (99) 99999-9999"}),avatarImage:jt.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=$C,`A imagem deve ter no m\xE1ximo ${ku}MB.`).optional()}),Fn=class{constructor(e,r){this.userRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{avatarImage:t,...i}=Lc.parse({...e.body,avatarImage:e.file}),n=e.user.id,s=await this.userRepository.findById(n);if(!s)throw new ce("O usu\xE1rio n\xE3o existe");let a=s.avatarUrl;return t&&(s.avatarUrl?a=await this.firebaseStorageService.updateFile({file:t,id:n,folder:P.USER,fileUrl:s.avatarUrl}):a=await this.firebaseStorageService.uploadFile({file:t,id:n,folder:P.USER})),await this.userRepository.update({...i,id:n,avatarUrl:a||void 0}),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var Gu={method:"get",path:"/users/{id}",tags:["Users"],summary:"Find user by ID",request:{params:Gc},responses:{200:{description:"User details retrieved successfully",summary:"User Retrieved",content:{"application/json":{schema:W.object({id:W.string(),name:W.string(),createdAt:W.date(),updatedAt:W.date(),role:W.enum(Nu.UserRole),lattesUrl:W.string().nullable(),orcid:W.string().nullable(),phone:W.string().nullable(),avatarUrl:W.url().nullable(),emailAddress:W.email()})}}},400:{description:"Invalid user ID format",summary:"Validation Error",content:{"application/json":{schema:W.object({errors:W.record(W.string(),W.string())})}}},404:{description:"User not found with the provided ID",summary:"User Not Found",content:{"application/json":{schema:W.object({message:W.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:W.object({message:W.string()})}}}}},Lu={method:"put",path:"/users",tags:["Users"],summary:"Update authenticated user",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:Lc}}}},responses:{200:{description:"User profile updated successfully",summary:"User Updated",content:{"application/json":{schema:W.object({message:W.string()})}}},400:{description:"Invalid input data or file format",summary:"Validation Error",content:{"application/json":{schema:W.object({errors:W.record(W.string(),W.string())})}}},401:{description:"User not authenticated or unauthorized",summary:"Authentication Required",content:{"application/json":{schema:W.object({message:W.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:W.object({message:W.string()})}}}}},_u={method:"delete",path:"/users",tags:["Users"],summary:"Delete authenticated user",security:[{bearerAuth:[]}],request:{params:kc},responses:{200:{description:"User account deleted successfully",summary:"User Deleted",content:{"application/json":{schema:W.object({message:W.string()})}}},400:{description:"Invalid request parameters",summary:"Validation Error",content:{"application/json":{schema:W.object({errors:W.record(W.string(),W.string())})}}},401:{description:"User not authenticated or unauthorized",summary:"Authentication Required",content:{"application/json":{schema:W.object({message:W.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:W.object({message:W.string()})}}}}},Wu={method:"get",path:"/users",tags:["Users"],summary:"List users",responses:{200:{description:"Complete list of users retrieved successfully",summary:"Users Retrieved",content:{"application/json":{schema:W.array(W.object({id:W.string(),name:W.string(),createdAt:W.date(),updatedAt:W.date(),role:W.enum(Nu.UserRole),lattesUrl:W.url().nullable(),orcid:W.string().nullable(),phone:W.string().nullable(),avatarUrl:W.string().nullable(),emailAddress:W.email()}))}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:W.object({message:W.string()})}}}}};import S from"zod";import{extendZodWithOpenApi as tS}from"@asteasolutions/zod-to-openapi";import _c from"zod";tS(_c);var Wc=_c.object({id:_c.uuid()}),Bn=class{constructor(e,r){this.webinarRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=Wc.parse({id:e.params.id}),i=await this.webinarRepository.findById(t);if(!i)throw new p("O webinar n\xE3o existe.");return i.thumbnailUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.thumbnailUrl}),await this.webinarRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as rS}from"@asteasolutions/zod-to-openapi";import zc from"zod";rS(zc);var Hc=zc.object({id:zc.uuid()}),Un=class{constructor(e){this.webinarRepository=e}async handle(e,r){try{let{id:t}=Hc.parse({id:e.params.id}),i=await this.webinarRepository.findById(t);if(!i)throw new p("Webinar n\xE3o encontrado.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as oS}from"@asteasolutions/zod-to-openapi";import xt from"zod";var iS=1,nS=6;oS(xt);var Vc=xt.object({page:xt.coerce.number().min(1).default(iS),limit:xt.coerce.number().min(1).default(nS),title:xt.string().optional(),description:xt.string().optional(),orderBy:xt.enum(["asc","desc"]).default("desc")}),qn=class{constructor(e){this.webinarRepository=e}async handle(e,r){try{let{limit:t,page:i,...n}=Vc.parse(e.query),s=i*t-t,[a,c]=await Promise.all([this.webinarRepository.find({pagination:{offset:s,limit:t},filter:n}),this.webinarRepository.count({filter:n})]),d=Math.max(Math.ceil(c/t),1);return r.status(200).json({page:i,totalPages:d,offset:s,limit:t,webinars:a})}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as sS}from"@asteasolutions/zod-to-openapi";import xe from"zod";var Hu=5,zu=1024,aS=zu*zu,mS=Hu*aS;sS(xe);var Zc=xe.object({id:xe.uuid(),title:xe.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio.").optional(),description:xe.string().optional(),scheduledAt:xe.coerce.date().optional(),webinarLink:xe.url("URL do webinar deve ser v\xE1lida").optional(),guestIds:xe.transform(o=>typeof o=="string"?o.split(","):o).pipe(xe.array(xe.uuid())).optional(),thumbnail:xe.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=mS,`A thumbnail deve ter no m\xE1ximo ${Hu}MB.`).optional()}),On=class{constructor(e,r){this.webinarRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,thumbnail:i,title:n,description:s,scheduledAt:a,webinarLink:c,guestIds:d}=Zc.parse({id:e.params.id,...e.body,thumbnail:e.file}),h=await this.webinarRepository.findById(t);if(!h)throw new p("O webinar n\xE3o existe.");let j=h.thumbnailUrl;if(i&&(j=await this.firebaseStorageService.uploadFile({file:i,id:t,folder:P.WEBINAR})),!j)throw new m("Thumbnail URL \xE9 obrigat\xF3rio");return await this.webinarRepository.update({id:t,title:n,description:s,scheduledAt:a,webinarLink:c,thumbnailUrl:j,guestIds:d}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var Vu={method:"post",path:"/webinars",tags:["Webinars"],summary:"Create webinar",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:S.object({title:S.string().min(1).openapi({description:"T\xEDtulo do webinar"}),description:S.string().optional().openapi({description:"Descri\xE7\xE3o do webinar"}),scheduledAt:S.string().openapi({description:"Data e hora agendada (ISO 8601)",example:"2024-01-01T10:00:00Z"}),webinarLink:S.string().url().optional().openapi({description:"Link do webinar"}),guestIds:S.string().openapi({description:"IDs dos convidados separados por v\xEDrgula",example:"uuid1,uuid2,uuid3"}),thumbnail:S.string().optional().openapi({description:"Imagem de thumbnail (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{201:{description:"Webinar created successfully",summary:"Webinar Created"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:S.object({errors:S.record(S.string(),S.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:S.object({message:S.string()})}}}}},Zu={method:"get",path:"/webinars",tags:["Webinars"],summary:"List webinars",security:[{bearerAuth:[]}],request:{query:Vc},responses:{200:{description:"Paginated list of webinars with guest information retrieved successfully",summary:"Webinars Retrieved",content:{"application/json":{schema:S.object({page:S.number(),totalPages:S.number(),offset:S.number(),limit:S.number(),webinars:S.array(S.object({id:S.string(),title:S.string(),description:S.string().nullable(),scheduledAt:S.date(),webinarLink:S.string().nullable(),thumbnailUrl:S.string().nullable(),createdAt:S.date(),updatedAt:S.date(),guests:S.array(S.object({id:S.uuid(),name:S.string(),emailAddress:S.email(),avatarUrl:S.string().nullable(),createdAt:S.date(),updatedAt:S.date()}))}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:S.object({errors:S.record(S.string(),S.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:S.object({message:S.string()})}}}}},Ku={method:"get",path:"/webinars/{id}",tags:["Webinars"],summary:"Find webinar by ID",security:[{bearerAuth:[]}],request:{params:Hc},responses:{200:{description:"Webinar details retrieved successfully",summary:"Webinar Retrieved",content:{"application/json":{schema:S.object({id:S.string(),title:S.string(),description:S.string().nullable(),scheduledAt:S.date(),webinarLink:S.string().nullable(),thumbnailUrl:S.string().nullable(),createdAt:S.date(),updatedAt:S.date(),guests:S.array(S.object({id:S.uuid(),name:S.string(),emailAddress:S.email(),avatarUrl:S.string().nullable(),createdAt:S.date(),updatedAt:S.date()}))}).nullable()}}},400:{description:"Invalid webinar ID format",summary:"Validation Error",content:{"application/json":{schema:S.object({errors:S.record(S.string(),S.string())})}}},404:{description:"Webinar not found with the provided ID",summary:"Webinar Not Found",content:{"application/json":{schema:S.object({message:S.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:S.object({message:S.string()})}}}}},Ju={method:"put",path:"/webinars/{id}",tags:["Webinars"],summary:"Update webinar",security:[{bearerAuth:[]}],request:{params:Zc.pick({id:!0}),body:{content:{"multipart/form-data":{schema:S.object({title:S.string().min(1).optional().openapi({description:"T\xEDtulo do webinar"}),description:S.string().optional().openapi({description:"Descri\xE7\xE3o do webinar"}),scheduledAt:S.string().optional().openapi({description:"Data e hora agendada (ISO 8601)",example:"2024-01-01T10:00:00Z"}),webinarLink:S.string().url().optional().openapi({description:"Link do webinar"}),guestIds:S.string().optional().openapi({description:"IDs dos convidados separados por v\xEDrgula",example:"uuid1,uuid2,uuid3"}),thumbnail:S.string().optional().openapi({description:"Imagem de thumbnail (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{200:{description:"Webinar updated successfully",summary:"Webinar Updated"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:S.object({errors:S.record(S.string(),S.string())})}}},404:{description:"Webinar not found with the provided ID",summary:"Webinar Not Found",content:{"application/json":{schema:S.object({message:S.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:S.object({message:S.string()})}}}}},Yu={method:"delete",path:"/webinars/{id}",tags:["Webinars"],summary:"Delete webinar",security:[{bearerAuth:[]}],request:{params:Wc},responses:{200:{description:"Webinar deleted successfully",summary:"Webinar Deleted"},400:{description:"Invalid webinar ID format",summary:"Validation Error",content:{"application/json":{schema:S.object({errors:S.record(S.string(),S.string())})}}},404:{description:"Webinar not found with the provided ID",summary:"Webinar Not Found",content:{"application/json":{schema:S.object({message:S.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:S.object({message:S.string()})}}}}};var f=new cS;f.registerComponent("securitySchemes","bearerAuth",{type:"http",scheme:"bearer",bearerFormat:"JWT"});f.registerPath(Rp);f.registerPath(Ip);f.registerPath(bp);f.registerPath(Cp);f.registerPath(wp);f.registerPath(vp);f.registerPath(Sp);f.registerPath(Gu);f.registerPath(Lu);f.registerPath(_u);f.registerPath(Wu);f.registerPath(al);f.registerPath(ml);f.registerPath(cl);f.registerPath(pl);f.registerPath(Tp);f.registerPath(Dp);f.registerPath(Fp);f.registerPath(Bp);f.registerPath(Up);f.registerPath(Sl);f.registerPath(wl);f.registerPath(vl);f.registerPath(El);f.registerPath(jl);f.registerPath(ad);f.registerPath(md);f.registerPath(cd);f.registerPath(pd);f.registerPath(dd);f.registerPath(uu);f.registerPath(gu);f.registerPath(fu);f.registerPath(yu);f.registerPath(hu);f.registerPath(Ru);f.registerPath(zp);f.registerPath(Hp);f.registerPath(Vp);f.registerPath(Zp);f.registerPath(Kp);f.registerPath(yl);f.registerPath(hl);f.registerPath(Rl);f.registerPath(Il);f.registerPath(bl);f.registerPath(Ld);f.registerPath(_d);f.registerPath(Wd);f.registerPath(zd);f.registerPath(Hd);f.registerPath(Du);f.registerPath(Fu);f.registerPath(Bu);f.registerPath(Uu);f.registerPath(qu);f.registerPath(Ud);f.registerPath(qd);f.registerPath(Od);f.registerPath(kd);f.registerPath(Nd);f.registerPath(Nl);f.registerPath(Gl);f.registerPath(Ll);f.registerPath(_l);f.registerPath(Wl);f.registerPath(zl);f.registerPath(el);f.registerPath(tl);f.registerPath(rl);f.registerPath(ol);f.registerPath(il);f.registerPath(nl);f.registerPath(Yd);f.registerPath(Xd);f.registerPath($d);f.registerPath(Qd);f.registerPath(Pd);f.registerPath(Ad);f.registerPath(Md);f.registerPath(Td);f.registerPath(Dd);f.registerPath(Fd);f.registerPath(vd);f.registerPath(Ed);f.registerPath(jd);f.registerPath(xd);f.registerPath(yd);f.registerPath(hd);f.registerPath(Rd);f.registerPath(Id);f.registerPath(au);f.registerPath(mu);f.registerPath(cu);f.registerPath(pu);f.registerPath(du);f.registerPath(lu);f.registerPath(ou);f.registerPath(iu);f.registerPath(nu);f.registerPath(su);f.registerPath(Jl);f.registerPath(Yl);f.registerPath(Xl);f.registerPath($l);f.registerPath(Vu);f.registerPath(Zu);f.registerPath(Ku);f.registerPath(Ju);f.registerPath(Yu);f.registerPath(kp);f.registerPath(Np);f.registerPath(Gp);f.registerPath(Lp);f.registerPath(_p);f.registerPath(Al);f.registerPath(Ml);f.registerPath(Tl);f.registerPath(Dl);f.registerPath(Fl);f.registerPath($p);f.registerPath(Qp);f.registerPath(ed);f.registerPath(td);f.registerPath(rd);f.registerPath(ju);f.registerPath(xu);f.registerPath(Pu);f.registerPath(Au);f.registerPath(Mu);f.registerPath(Iu);f.registerPath(bu);f.registerPath(Cu);f.registerPath(Su);f.registerPath(wu);f.registerPath(jp);f.registerPath(xp);f.registerPath(Pp);f.registerPath(Ap);f.registerPath(Mp);var dS=new pS(f.definitions),Xu=dS.generateDocument({openapi:"3.0.0",info:{title:"API da Rede CT",version:"1.0.0",description:"API com valida\xE7\xE3o Zod"}});import{Router as RS}from"express";import{extendZodWithOpenApi as lS}from"@asteasolutions/zod-to-openapi";import Kc from"zod";lS(Kc);var uS=Kc.object({authenticatedUserId:Kc.uuid()}),kn=class{constructor(e){this.userRepository=e}async handle(e,r){try{let{authenticatedUserId:t}=uS.parse({authenticatedUserId:e.user.id}),i=await this.userRepository.findById(t);if(!i)throw new p("Usu\xE1rio n\xE3o encontrado.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{PrismaClient as gS}from"@prisma/client";var _=new gS({log:["warn","error"]});var Nn=class{constructor(e){this.prisma=e}async register({userId:e,title:r,description:t,certificationUrl:i}){await this.prisma.certification.create({data:{title:r,description:t,certificationUrl:i,user:{connect:{id:e}}}})}async find({pagination:{offset:e,limit:r},filter:{description:t,orderBy:i,title:n,userId:s}}){let a={},c=[];return s&&(a.userId=s),n&&c.push({title:{contains:n,mode:"insensitive"}}),t&&c.push({description:{contains:t,mode:"insensitive"}}),c.length>0&&(a.OR=c),await this.prisma.certification.findMany({where:a,include:{user:{omit:{passwordHash:!0}}},orderBy:{updatedAt:i},skip:e,take:r})}async findById(e){return await this.prisma.certification.findFirst({where:{id:e}})}async findByUserId({pagination:{limit:e,offset:r},filter:{description:t,orderBy:i,title:n},userId:s}){let a={userId:s},c=[];return n&&c.push({title:{contains:n,mode:"insensitive"}}),t&&c.push({description:{contains:t,mode:"insensitive"}}),c.length>0&&(a.OR=c),await this.prisma.certification.findMany({where:a,include:{user:{omit:{passwordHash:!0}}},skip:r,take:e,orderBy:i?{updatedAt:i}:{updatedAt:"desc"}})}async update({id:e,...r}){await this.prisma.certification.update({where:{id:e},data:r})}async deleteById(e){await this.prisma.certification.delete({where:{id:e}})}async count({filter:{description:e,title:r,userId:t}}){let i={},n=[];return t&&(i.userId=t),r&&n.push({title:{contains:r,mode:"insensitive"}}),e&&n.push({description:{contains:e,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.certification.count({where:i})}};function gt(){return new Nn(_)}var Gn=class{constructor(e){this.prisma=e}async create(e){await this.prisma.news.create({data:e})}async find({pagination:{offset:e,limit:r},filter:{authorId:t,content:i,title:n,orderBy:s}}){let a={};t&&(a.authorId={contains:t,mode:"insensitive"});let c=[];return n&&c.push({title:{contains:n,mode:"insensitive"}}),i&&c.push({content:{contains:i,mode:"insensitive"}}),c.length>0&&(a.OR=c),await this.prisma.news.findMany({where:a,omit:{authorId:!0},include:{author:!0},orderBy:{updatedAt:s},skip:e,take:r})}async findById(e){return await this.prisma.news.findUnique({where:{id:e},omit:{authorId:!0},include:{author:!0}})}async findByAuthorId({authorId:e,pagination:{offset:r,limit:t},filter:{orderBy:i="desc",content:n,title:s}}){let a={authorId:e},c=[];return s&&c.push({title:{contains:s,mode:"insensitive"}}),n&&c.push({content:{contains:n,mode:"insensitive"}}),c.length>0&&(a.OR=c),await this.prisma.news.findMany({omit:{authorId:!0},where:a,orderBy:{updatedAt:i},skip:r,take:t})}async update(e){await this.prisma.news.update({where:{id:e.id},data:{title:e.title,content:e.content,imageUrl:e.imageUrl}})}async delete(e){await this.prisma.news.delete({where:{id:e}})}async count({filter:{authorId:e,content:r,title:t}}){let i={};e&&(i.authorId={contains:e,mode:"insensitive"});let n=[];return t&&n.push({title:{contains:t,mode:"insensitive"}}),r&&n.push({content:{contains:r,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.news.count({where:i})}};function We(){return new Gn(_)}var Ln=class{constructor(e){this.prisma=e}async create(e){await this.prisma.pendency.create({data:e})}async find({filter:{description:e,orderBy:r,title:t,status:i,userId:n},pagination:{limit:s,offset:a}}){let c={userId:n,AND:{status:{equals:i}}};e&&(c.description={contains:e,mode:"insensitive"});let d=[];return t&&d.push({title:{contains:t,mode:"insensitive"}}),d.length>0&&(c.OR=d),await this.prisma.pendency.findMany({where:c,orderBy:{updatedAt:r},include:{user:{omit:{passwordHash:!0}}},skip:a,take:s})}async findById(e){return await this.prisma.pendency.findFirst({where:{id:e},include:{user:{omit:{passwordHash:!0}}}})}async findByUserId({filter:{description:e,orderBy:r,title:t,status:i},pagination:{limit:n,offset:s},userId:a}){let c={userId:a,AND:{status:{equals:i}}},d=[];return e&&d.push({description:{contains:e,mode:"insensitive"}}),t&&d.push({title:{contains:t,mode:"insensitive"}}),d.length>0&&(c.OR=d),await this.prisma.pendency.findMany({where:c,orderBy:{updatedAt:r},include:{user:{omit:{passwordHash:!0}}},skip:s,take:n})}async update({id:e,...r}){await this.prisma.pendency.update({where:{id:e},data:r})}async deleteById(e){await this.prisma.pendency.delete({where:{id:e}})}async count({filter:{description:e,title:r,status:t,userId:i}}){let n={userId:i},s=[];return e&&s.push({description:{contains:e,mode:"insensitive"}}),r&&s.push({title:{contains:r,mode:"insensitive"}}),t&&s.push({status:{equals:t}}),s.length>0&&(n.OR=s),await this.prisma.pendency.count({where:n})}};function ft(){return new Ln(_)}var _n=class{constructor(e){this.prisma=e}async create(e){await this.prisma.user.create({data:e})}async update(e){await this.prisma.user.update({where:{id:e.id},data:{lattesUrl:e.lattesUrl??null,orcid:e.orcid??null,phone:e.phone??null,avatarUrl:e.avatarUrl??null}})}async deleteById(e){await this.prisma.user.delete({where:{id:e}})}async find(){return await this.prisma.user.findMany({omit:{passwordHash:!0}})}async findByEmail(e){return await this.prisma.user.findFirst({where:{emailAddress:e}})}async findById(e){return await this.prisma.user.findFirst({where:{id:e},omit:{passwordHash:!0}})}};function ge(){return new _n(_)}import{compare as fS,hash as yS}from"bcryptjs";var Wn=class{constructor(e,r){this.hashFn=e;this.compareFn=r}async hash(e){return await this.hashFn(e,6)}async compare({password:e,hashedPassword:r}){return await this.compareFn(e,r)}};function Jc(){return new Wn(yS,fS)}import $u from"jsonwebtoken";import fe from"zod";var hS=fe.object({JWT_SECRET:fe.string(),FIREBASE_BUCKET:fe.string(),FIREBASE_CLIENT_EMAIL:fe.string(),FIREBASE_PRIVATE_KEY:fe.string(),FIREBASE_PROJECT_ID:fe.string(),FIREBASE_TYPE:fe.string(),FIREBASE_PRIVATE_KEY_ID:fe.string(),FIREBASE_CLIENT_ID:fe.string(),FIREBASE_AUTH_URI:fe.string(),FIREBASE_TOKEN_URI:fe.string(),FIREBASE_AUTH_PROVIDER_X509_CERT_URL:fe.string(),FIREBASE_CLIENT_X509_CERT_URL:fe.string()}),me=hS.parse(process.env);var zn=class{constructor(e,r){this.signFn=e;this.verifyFn=r}sign(e){try{return this.signFn(e,me.JWT_SECRET,{expiresIn:"3d",subject:e.id})}catch{return null}}verify(e){try{return this.verifyFn(e,me.JWT_SECRET)}catch{return null}}};function Hn(){return new zn($u.sign,$u.verify)}function Qu(){return{signUpController:new Xr(ge(),Jc())}}function eg(){return{signInController:new Jr(ge(),Jc(),Hn())}}function tg(){return{findAuthenticatedUserController:new kn(ge())}}function rg(){return{findAuthenticatedUserController:new Vr(We())}}function og(){return{findAuthenticatedUserCertificationsController:new Hr(gt())}}function ig(){return{findAuthenticatedUserPendenciesController:new Zr(ft())}}var Vn=class{constructor(e){this.jwtService=e}authenticated(e,r,t){let i=e.headers.authorization;if(!i?.startsWith("Bearer "))return r.status(401).json({message:"Token inv\xE1lido.",invalid:!0});let n=i.split(" ")[1];if(!n)return r.status(401).json({message:"Token n\xE3o fornecido."});try{let s=this.jwtService.verify(n);if(!s)return r.status(401).json({message:"Token inv\xE1lido.",invalid:!0});e.user=s,t()}catch(s){if(console.log(s),s instanceof Error)return r.status(401).json({message:s.message})}}isAdmin(e,r,t){let i=e.headers.authorization;if(!i?.startsWith("Bearer "))return r.status(401).json({message:"Token inv\xE1lido.",invalid:!0});let n=i.split(" ")[1];if(!n)return r.status(401).json({message:"Token n\xE3o fornecido."});try{let s=this.jwtService.verify(n);if(!s)return r.status(401).json({message:"Token inv\xE1lido.",invalid:!0});if(s.role!=="ADMIN")return r.status(401).json({message:"\xC9 necess\xE1rio ter permiss\xF5es de administrador."});e.user=s,t()}catch(s){if(console.log(s),s instanceof Error)return r.status(401).json({message:s.message})}}};function H(){return{authMiddleware:new Vn(Hn())}}var ze=RS(),{authMiddleware:Dr}=H();ze.post("/sign-up",async(o,e)=>{let{signUpController:r}=Qu();await r.handle(o,e)});ze.post("/sign-in",async(o,e)=>{let{signInController:r}=eg();await r.handle(o,e)});ze.get("/user",(o,e,r)=>{Dr.authenticated(o,e,r)},async(o,e)=>{let{findAuthenticatedUserController:r}=tg();await r.handle(o,e)});ze.get("/user/news",(o,e,r)=>{Dr.authenticated(o,e,r)},async(o,e)=>{let{findAuthenticatedUserController:r}=rg();await r.handle(o,e)});ze.get("/admin",(o,e,r)=>{Dr.isAdmin(o,e,r)},(o,e)=>{try{e.status(200).json({success:!0})}catch(r){r instanceof Error&&e.status(500).json({message:r.message})}});ze.get("/certifications",(o,e,r)=>{Dr.authenticated(o,e,r)},async(o,e)=>{let{findAuthenticatedUserCertificationsController:r}=og();await r.handle(o,e)});ze.get("/pendencies",(o,e,r)=>{Dr.authenticated(o,e,r)},async(o,e)=>{let{findAuthenticatedUserPendenciesController:r}=ig();await r.handle(o,e)});import{Router as PS}from"express";import{extendZodWithOpenApi as IS}from"@asteasolutions/zod-to-openapi";import Pe from"zod";var bS=5,ng=1024,CS=ng*ng,Yc=bS*CS;IS(Pe);var SS=Pe.object({volumeNumber:Pe.coerce.number().int().positive("N\xFAmero do volume \xE9 obrigat\xF3rio."),year:Pe.coerce.number().int().positive("Ano \xE9 obrigat\xF3rio."),title:Pe.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),author:Pe.string().min(1,"Autor \xE9 obrigat\xF3rio."),accessUrl:Pe.url().optional(),description:Pe.string().optional(),authorImage:Pe.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=Yc,"A imagem do autor deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB."),coverImage:Pe.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=Yc,"A imagem da capa deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB."),catalogSheet:Pe.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&typeof o.size=="number"&&o.size<=Yc,"A ficha catalogr\xE1fica deve ter no m\xE1ximo 5MB.")}),Zn=class{constructor(e,r){this.bookVolumeRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{volumeNumber:t,year:i,title:n,author:s,accessUrl:a,description:c,authorImage:d,coverImage:h,catalogSheet:j}=SS.parse({...e.body,authorImage:e.files?.authorImage?.[0],coverImage:e.files?.coverImage?.[0],catalogSheet:e.files?.catalogSheet?.[0]}),q=await this.bookVolumeRepository.create({volumeNumber:t,year:i,title:n,author:s,accessUrl:a,description:c}),Y=q.authorImageUrl,$=q.coverImageUrl,le=q.catalogSheetUrl;return Y=await this.firebaseStorageService.uploadFile({file:d,folder:P.BOOK_VOLUME_AUTHOR_IMAGE,id:q.id}),$=await this.firebaseStorageService.uploadFile({file:h,folder:P.BOOK_VOLUME_COVER,id:q.id}),le=await this.firebaseStorageService.uploadFile({file:j,folder:P.BOOK_VOLUME_CATALOG_SHEET,id:q.id}),await this.bookVolumeRepository.update({id:q.id,authorImageUrl:Y,coverImageUrl:$,catalogSheetUrl:le}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var Kn=class{constructor(e){this.prisma=e}async create({volumeNumber:e,year:r,title:t,author:i,accessUrl:n,authorImageUrl:s,coverImageUrl:a,catalogSheetUrl:c,description:d}){return await this.prisma.bookVolume.create({data:{volumeNumber:e,year:r,title:t,author:i,accessUrl:n,authorImageUrl:s,coverImageUrl:a,catalogSheetUrl:c,description:d}})}async find({pagination:{offset:e,limit:r},filter:{title:t,author:i,description:n,orderBy:s}}){let a={},c=[];return t&&c.push({title:{contains:t,mode:"insensitive"}}),i&&c.push({author:{contains:i,mode:"insensitive"}}),n&&c.push({description:{contains:n,mode:"insensitive"}}),c.length>0&&(a.OR=c),await this.prisma.bookVolume.findMany({where:a,orderBy:{updatedAt:s},skip:e,take:r})}async findById(e){return await this.prisma.bookVolume.findFirst({where:{id:e}})}async update({id:e,volumeNumber:r,year:t,title:i,author:n,accessUrl:s,authorImageUrl:a,coverImageUrl:c,catalogSheetUrl:d,description:h}){await this.prisma.bookVolume.update({where:{id:e},data:{volumeNumber:r,year:t,title:i,author:n,accessUrl:s,authorImageUrl:a,coverImageUrl:c,catalogSheetUrl:d,description:h}})}async deleteById(e){await this.prisma.bookVolume.delete({where:{id:e}})}async count({filter:{title:e,author:r,description:t}}){let i={},n=[];return e&&n.push({title:{contains:e,mode:"insensitive"}}),r&&n.push({author:{contains:r,mode:"insensitive"}}),t&&n.push({description:{contains:t,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.bookVolume.count({where:i})}};function rr(){return new Kn(_)}import{getStorage as vS}from"firebase-admin/storage";import{config as wS}from"dotenv";import sg from"firebase-admin";wS();var Xc=sg.initializeApp({credential:sg.credential.cert({clientEmail:me.FIREBASE_CLIENT_EMAIL,privateKey:me.FIREBASE_PRIVATE_KEY,projectId:me.FIREBASE_PROJECT_ID,type:me.FIREBASE_TYPE,privateKeyId:me.FIREBASE_PRIVATE_KEY_ID,clientId:me.FIREBASE_CLIENT_ID,authUri:me.FIREBASE_AUTH_URI,tokenUri:me.FIREBASE_TOKEN_URI,authProviderX509CertUrl:me.FIREBASE_AUTH_PROVIDER_X509_CERT_URL,clientX509CertUrl:me.FIREBASE_CLIENT_X509_CERT_URL}),storageBucket:me.FIREBASE_BUCKET});Xc.name?console.log("\u{1F525} Firebase conectado com sucesso!"):console.error("\u274C Erro ao se conectar ao Firebase.");var ES=vS(Xc),ag=ES.bucket(me.FIREBASE_BUCKET);import{randomUUID as jS}from"node:crypto";var xS=/https:\/\/storage\.googleapis\.com\/[^/]+\/(.+)$/,Jn=class{constructor(e){this.bucket=e}async uploadFile({file:e,folder:r,id:t}){let i=`${jS()}-${e?.originalname}`,n=this.bucket.file(`${r}/${t}/${i}`);return await new Promise((s,a)=>{let c=n.createWriteStream({metadata:{contentType:e?.mimetype}});c.on("error",d=>{a(d)}),c.on("finish",async()=>{try{await n.makePublic();let d=`https://storage.googleapis.com/${this.bucket.name}/${n.name}`;s(d)}catch(d){a(d)}}),c.end(e.buffer)})}async updateFile({file:e,id:r,fileUrl:t,folder:i}){try{let n=this.getPath(t);if(!n)throw new Error("Arquivo n\xE3o encontrado.");let[s,a]=await Promise.all([this.bucket.file(n).delete(),this.uploadFile({file:e,id:r,folder:i})]);return a}catch{throw new Error("Erro ao atualizar o arquivo.")}}async deleteFile({fileUrl:e}){let r=this.getPath(e);if(!r)throw new Error("Arquivo n\xE3o encontrado.");try{await this.bucket.file(r).delete()}catch{throw new Error("Erro ao deletar o arquivo.")}}getPath(e){let r=e.match(xS);return r?r[1]:null}};function F(){return new Jn(ag)}function mg(){return{createBookVolumeController:new Zn(rr(),F())}}function cg(){return{findBookVolumesController:new eo(rr())}}function pg(){return{findBookVolumeByIdController:new Qr(rr())}}function dg(){return{updateBookVolumeController:new ro(rr(),F())}}function lg(){return{deleteBookVolumeController:new $r(rr(),F())}}import ug from"multer";var z=ug({storage:ug.memoryStorage()});var Pt=PS(),{authMiddleware:Fr}=H();Pt.post("/",(o,e,r)=>{Fr.isAdmin(o,e,r)},z.fields([{name:"authorImage",maxCount:1},{name:"coverImage",maxCount:1},{name:"catalogSheet",maxCount:1}]),async(o,e)=>{let{createBookVolumeController:r}=mg();await r.handle(o,e)});Pt.get("/",(o,e,r)=>{Fr.isAdmin(o,e,r)},async(o,e)=>{let{findBookVolumesController:r}=cg();await r.handle(o,e)});Pt.get("/:id",(o,e,r)=>{Fr.isAdmin(o,e,r)},async(o,e)=>{let{findBookVolumeByIdController:r}=pg();await r.handle(o,e)});Pt.put("/:id",(o,e,r)=>{Fr.isAdmin(o,e,r)},z.fields([{name:"authorImage",maxCount:1},{name:"coverImage",maxCount:1},{name:"catalogSheet",maxCount:1}]),async(o,e)=>{let{updateBookVolumeController:r}=dg();await r.handle(o,e)});Pt.delete("/:id",(o,e,r)=>{Fr.isAdmin(o,e,r)},async(o,e)=>{let{deleteBookVolumeController:r}=lg();await r.handle(o,e)});import{Router as AS}from"express";function gg(){return{registerCertificationController:new so(ge(),gt(),F())}}function fg(){return{findCertificationsController:new no(gt())}}function yg(){return{findCertificationByIdController:new io(gt())}}function hg(){return{updateCertificationController:new mo(gt(),F())}}function Rg(){return{deleteCertificationController:new oo(gt(),F())}}var At=AS(),{authMiddleware:Br}=H();At.post("/:user_id",(o,e,r)=>{Br.isAdmin(o,e,r)},z.single("certification"),async(o,e)=>{let{registerCertificationController:r}=gg();await r.handle(o,e)});At.get("/",(o,e,r)=>{Br.isAdmin(o,e,r)},async(o,e)=>{let{findCertificationsController:r}=fg();await r.handle(o,e)});At.get("/:certification_id",(o,e,r)=>{Br.isAdmin(o,e,r)},async(o,e)=>{let{findCertificationByIdController:r}=yg();await r.handle(o,e)});At.put("/:certification_id",(o,e,r)=>{Br.isAdmin(o,e,r)},z.single("certification"),async(o,e)=>{let{updateCertificationController:r}=hg();await r.handle(o,e)});At.delete("/:certification_id",(o,e,r)=>{Br.isAdmin(o,e,r)},async(o,e)=>{let{deleteCertificationController:r}=Rg();await r.handle(o,e)});import{Router as US}from"express";import{extendZodWithOpenApi as MS}from"@asteasolutions/zod-to-openapi";import ye from"zod";var TS=5,Ig=1024,DS=Ig*Ig,FS=TS*DS;MS(ye);var BS=ye.object({title:ye.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),coordinatorId:ye.string().uuid("Coordenador \xE9 obrigat\xF3rio."),email:ye.email("E-mail deve ser v\xE1lido."),location:ye.string().min(1,"Localiza\xE7\xE3o \xE9 obrigat\xF3ria."),scheduledAt:ye.coerce.date(),registrationLink:ye.url().optional(),description:ye.string().optional(),instructorIds:ye.transform(o=>typeof o=="string"?o.split(","):o).pipe(ye.array(ye.uuid())),image:ye.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=FS,"A imagem deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.")}),Yn=class{constructor(e,r){this.courseRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{title:t,coordinatorId:i,email:n,location:s,scheduledAt:a,registrationLink:c,description:d,instructorIds:h,image:j}=BS.parse({...e.body,image:e.file}),q=await this.courseRepository.create({title:t,coordinatorId:i,email:n,location:s,scheduledAt:a,registrationLink:c||void 0,description:d,instructorIds:h}),Y=await this.firebaseStorageService.uploadFile({file:j,folder:P.COURSE,id:q.id});return await this.courseRepository.update({id:q.id,imageUrl:Y}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var Xn=class{constructor(e){this.prisma=e}async create({title:e,imageUrl:r,coordinatorId:t,email:i,instructorIds:n,scheduledAt:s,location:a,registrationLink:c,description:d}){return await this.prisma.course.create({data:{title:e,imageUrl:r,coordinatorId:t,email:i,scheduledAt:s,location:a,registrationLink:c,description:d,instructors:{connect:n?.map(h=>({id:h}))}}})}async find({pagination:{offset:e,limit:r},filter:{description:t,orderBy:i,title:n,coordinator:s}}){let a={},c=[];return n&&c.push({title:{contains:n,mode:"insensitive"}}),t&&c.push({description:{contains:t,mode:"insensitive"}}),s&&c.push({coordinator:{name:{contains:s,mode:"insensitive"}}}),c.length>0&&(a.OR=c),await this.prisma.course.findMany({where:a,include:{coordinator:{omit:{passwordHash:!0}},instructors:{omit:{passwordHash:!0}}},orderBy:{updatedAt:i},skip:e,take:r})}async findById(e){return await this.prisma.course.findFirst({where:{id:e},include:{coordinator:{omit:{passwordHash:!0}},instructors:{omit:{passwordHash:!0}}}})}async update({id:e,title:r,imageUrl:t,coordinatorId:i,email:n,instructorIds:s,scheduledAt:a,location:c,registrationLink:d,description:h}){s!==void 0&&await this.prisma.course.update({where:{id:e},data:{instructors:{set:[]}}}),await this.prisma.course.update({where:{id:e},data:{title:r,imageUrl:t,coordinatorId:i,email:n,scheduledAt:a,location:c,registrationLink:d,description:h,...s?.length>0&&{instructors:{connect:s.map(j=>({id:j}))}}}})}async deleteById(e){await this.prisma.course.delete({where:{id:e}})}async count({filter:{description:e,title:r,coordinator:t}}){let i={},n=[];return r&&n.push({title:{contains:r,mode:"insensitive"}}),e&&n.push({description:{contains:e,mode:"insensitive"}}),t&&n.push({coordinator:{name:{contains:t,mode:"insensitive"}}}),n.length>0&&(i.OR=n),await this.prisma.course.count({where:i})}};function or(){return new Xn(_)}function bg(){return{createCourseController:new Yn(or(),F())}}function Cg(){return{findCoursesController:new uo(or())}}function Sg(){return{findCourseByIdController:new lo(or())}}function wg(){return{updateCourseController:new go(or(),F())}}function vg(){return{deleteCourseController:new po(or(),F())}}var Mt=US(),{authMiddleware:Ur}=H();Mt.post("/",(o,e,r)=>{Ur.isAdmin(o,e,r)},z.single("image"),async(o,e)=>{let{createCourseController:r}=bg();await r.handle(o,e)});Mt.get("/",(o,e,r)=>{Ur.isAdmin(o,e,r)},async(o,e)=>{let{findCoursesController:r}=Cg();await r.handle(o,e)});Mt.get("/:id",(o,e,r)=>{Ur.isAdmin(o,e,r)},async(o,e)=>{let{findCourseByIdController:r}=Sg();await r.handle(o,e)});Mt.put("/:id",(o,e,r)=>{Ur.isAdmin(o,e,r)},z.single("image"),async(o,e)=>{let{updateCourseController:r}=wg();await r.handle(o,e)});Mt.delete("/:id",(o,e,r)=>{Ur.isAdmin(o,e,r)},async(o,e)=>{let{deleteCourseController:r}=vg();await r.handle(o,e)});import{Router as GS}from"express";import{extendZodWithOpenApi as qS}from"@asteasolutions/zod-to-openapi";import He from"zod";var OS=1,kS=9;qS(He);var NS=He.object({page:He.coerce.number().min(1).default(OS),limit:He.coerce.number().min(1).default(kS),code:He.string().optional(),title:He.string().optional(),description:He.string().optional(),notes:He.string().optional(),orderBy:He.enum(["asc","desc"]).default("desc")}),$n=class{constructor(e){this.etpRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=NS.parse(e.query),s=i*t-i,[a,c]=await Promise.all([this.etpRepository.find({pagination:{offset:s,limit:i},filter:n}),this.etpRepository.count({filter:n})]),d=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:d,offset:s,limit:i,etps:a})}catch(t){if(t instanceof Error)throw new m(t.message)}}};var Qn=class{constructor(e){this.prisma=e}async create(e){let{leaderId:r,deputyLeaderId:t,secretaryId:i,memberIds:n,...s}=e;await this.prisma.$transaction(async a=>{let c=await a.eTP.create({data:s});await a.eTPLeader.create({data:{etpId:c.id,researcherId:r}}),await a.eTPDeputy.create({data:{etpId:c.id,researcherId:t}}),await a.eTPSecretary.create({data:{etpId:c.id,researcherId:i}}),await a.eTP.update({where:{id:c.id},data:{members:{connect:n.map(d=>({id:d}))}}})})}async update(e){let{leaderId:r,deputyLeaderId:t,secretaryId:i,memberIds:n,...s}=e;await this.prisma.$transaction(async a=>{await a.eTP.update({where:{id:e.id},data:s}),await this.updateLeader(a,e.id,r),await this.updateDeputyLeader(a,e.id,t),await this.updateSecretary(a,e.id,i),await this.updateMembers(a,e.id,n)})}async updateLeader(e,r,t){t!==void 0&&(await e.eTPLeader.deleteMany({where:{etpId:r}}),t&&await e.eTPLeader.create({data:{etpId:r,researcherId:t}}))}async updateDeputyLeader(e,r,t){t!==void 0&&(await e.eTPDeputy.deleteMany({where:{etpId:r}}),t&&await e.eTPDeputy.create({data:{etpId:r,researcherId:t}}))}async updateSecretary(e,r,t){t!==void 0&&(await e.eTPSecretary.deleteMany({where:{etpId:r}}),t&&await e.eTPSecretary.create({data:{etpId:r,researcherId:t}}))}async updateMembers(e,r,t){t!==void 0&&await e.eTP.update({where:{id:r},data:{members:{set:t.map(i=>({id:i}))}}})}async deleteById(e){await this.prisma.eTP.delete({where:{id:e}})}async find({pagination:{offset:e,limit:r},filter:{code:t,title:i,description:n,notes:s,orderBy:a}}){let c={},d=[];return t&&d.push({code:{contains:t,mode:"insensitive"}}),i&&d.push({title:{contains:i,mode:"insensitive"}}),n&&d.push({description:{contains:n,mode:"insensitive"}}),s&&d.push({notes:{contains:s,mode:"insensitive"}}),d.length>0&&(c.OR=d),await this.prisma.eTP.findMany({where:c,include:{leader:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},deputyLeader:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},secretary:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},members:{include:{user:{omit:{passwordHash:!0}}}}},orderBy:{updatedAt:a},skip:e,take:r})}async findById(e){return await this.prisma.eTP.findFirst({where:{id:e},include:{leader:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},deputyLeader:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},secretary:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},members:{include:{user:{omit:{passwordHash:!0}}}}}})}async findByCode(e){return await this.prisma.eTP.findFirst({where:{code:e},include:{leader:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},deputyLeader:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},secretary:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},members:{include:{user:{omit:{passwordHash:!0}}}}}})}async count({filter:{code:e,title:r,description:t,notes:i}}){let n={},s=[];return e&&s.push({code:{contains:e,mode:"insensitive"}}),r&&s.push({title:{contains:r,mode:"insensitive"}}),t&&s.push({description:{contains:t,mode:"insensitive"}}),i&&s.push({notes:{contains:i,mode:"insensitive"}}),s.length>0&&(n.OR=s),await this.prisma.eTP.count({where:n})}};function ir(){return new Qn(_)}function Eg(){return{createETPController:new fo(ir())}}function jg(){return{findETPsController:new $n(ir())}}function xg(){return{findETPByIdController:new ho(ir())}}function Pg(){return{updateETPController:new Io(ir())}}function Ag(){return{deleteETPController:new yo(ir())}}var Tt=GS(),{authMiddleware:$c}=H();Tt.post("/",(o,e,r)=>{$c.authenticated(o,e,r)},async(o,e)=>{let{createETPController:r}=Eg();await r.handle(o,e)});Tt.get("/",async(o,e)=>{let{findETPsController:r}=jg();await r.handle(o,e)});Tt.get("/:id",async(o,e)=>{let{findETPByIdController:r}=xg();await r.handle(o,e)});Tt.put("/:id",(o,e,r)=>{$c.authenticated(o,e,r)},async(o,e)=>{let{updateETPController:r}=Pg();await r.handle(o,e)});Tt.delete("/:id",(o,e,r)=>{$c.authenticated(o,e,r)},async(o,e)=>{let{deleteETPController:r}=Ag();await r.handle(o,e)});import{Router as LS}from"express";var es=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.event.create({data:e})}async update(e){await this.prisma.event.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.event.delete({where:{id:e}})}async find({pagination:{offset:e,limit:r},filter:{title:t,status:i,format:n,orderBy:s}}){let a={},c=[];return i&&(a.status=i),n&&(a.format=n),t&&c.push({title:{contains:t,mode:"insensitive"}}),c.length>0&&(a.OR=c),await this.prisma.event.findMany({where:a,orderBy:s?{startDate:s}:{startDate:"desc"},skip:e,take:r})}async findById(e){return await this.prisma.event.findFirst({where:{id:e}})}async count({filter:{title:e,status:r,format:t}}){let i={},n=[];return r&&(i.status=r),t&&(i.format=t),e&&n.push({title:{contains:e,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.event.count({where:i})}};function nr(){return new es(_)}function Mg(){return{createEventController:new So(nr(),F())}}function Tg(){return{findEventsController:new jo(nr())}}function Dg(){return{findEventByIdController:new vo(nr())}}function Fg(){return{updateEventController:new xo(nr(),F())}}function Bg(){return{deleteEventController:new wo(nr())}}var Dt=LS(),{authMiddleware:Qc}=H();Dt.post("/",(o,e,r)=>{Qc.authenticated(o,e,r)},z.single("image"),async(o,e)=>{let{createEventController:r}=Mg();await r.handle(o,e)});Dt.get("/",async(o,e)=>{let{findEventsController:r}=Tg();await r.handle(o,e)});Dt.get("/:id",async(o,e)=>{let{findEventByIdController:r}=Dg();await r.handle(o,e)});Dt.put("/:id",(o,e,r)=>{Qc.authenticated(o,e,r)},z.single("image"),async(o,e)=>{let{updateEventController:r}=Fg();await r.handle(o,e)});Dt.delete("/:id",(o,e,r)=>{Qc.authenticated(o,e,r)},async(o,e)=>{let{deleteEventController:r}=Bg();await r.handle(o,e)});import{Router as _S}from"express";var ts=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.inMemoriam.create({data:e})}async update(e){await this.prisma.inMemoriam.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.inMemoriam.delete({where:{id:e}})}async find({pagination:{offset:e,limit:r},filter:{name:t,biography:i,role:n,orderBy:s}}){let a={},c=[];return n&&(a.role=n),t&&c.push({name:{contains:t,mode:"insensitive"}}),i&&c.push({biography:{contains:i,mode:"insensitive"}}),c.length>0&&(a.OR=c),await this.prisma.inMemoriam.findMany({where:a,orderBy:{updatedAt:s},skip:e,take:r})}async findById(e){return await this.prisma.inMemoriam.findFirst({where:{id:e}})}async findByRole(e){return await this.prisma.inMemoriam.findMany({where:{role:e}})}async count({filter:{name:e,biography:r,role:t}}){let i={},n=[];return t&&(i.role=t),e&&n.push({name:{contains:e,mode:"insensitive"}}),r&&n.push({biography:{contains:r,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.inMemoriam.count({where:i})}};function Ft(){return new ts(_)}function Ug(){return{createInMemoriamController:new Po(Ft(),F())}}function qg(){return{findInMemoriamsController:new Fo(Ft())}}function Og(){return{findInMemoriamByIdController:new Mo(Ft())}}function kg(){return{findInMemoriamByRoleController:new Do(Ft())}}function Ng(){return{updateInMemoriamController:new Bo(Ft(),F())}}function Gg(){return{deleteInMemoriamController:new Ao(Ft(),F())}}var yt=_S(),{authMiddleware:ep}=H();yt.post("/",(o,e,r)=>{ep.authenticated(o,e,r)},z.single("photo"),async(o,e)=>{let{createInMemoriamController:r}=Ug();await r.handle(o,e)});yt.get("/",async(o,e)=>{let{findInMemoriamsController:r}=qg();await r.handle(o,e)});yt.get("/:id",async(o,e)=>{let{findInMemoriamByIdController:r}=Og();await r.handle(o,e)});yt.get("/role/:role",async(o,e)=>{let{findInMemoriamByRoleController:r}=kg();await r.handle(o,e)});yt.put("/:id",(o,e,r)=>{ep.authenticated(o,e,r)},z.single("photo"),async(o,e)=>{let{updateInMemoriamController:r}=Ng();await r.handle(o,e)});yt.delete("/:id",(o,e,r)=>{ep.authenticated(o,e,r)},async(o,e)=>{let{deleteInMemoriamController:r}=Gg();await r.handle(o,e)});import{Router as WS}from"express";var tp=WS();tp.get("/",(o,e)=>{e.status(200).json({message:"Rede CT"})});import{Router as KS}from"express";var rs=class{constructor(e){this.prisma=e}async create(e){await this.prisma.internationalScientificCongress.create({data:e})}async update(e){await this.prisma.internationalScientificCongress.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.internationalScientificCongress.delete({where:{id:e}})}async find({pagination:{offset:e,limit:r},filter:{title:t,edition:i,location:n,orderBy:s}}){let a={},c=[];return i&&c.push({edition:{equals:i}}),t&&c.push({title:{contains:t,mode:"insensitive"}}),n&&c.push({location:{contains:n,mode:"insensitive"}}),c.length>0&&(a.OR=c),await this.prisma.internationalScientificCongress.findMany({where:a,include:{partners:!0,galleries:!0},orderBy:s?{startDate:s}:{startDate:"desc"},skip:e,take:r})}async findById(e){return await this.prisma.internationalScientificCongress.findFirst({where:{id:e},include:{partners:!0,galleries:!0}})}async findByEdition(e){return await this.prisma.internationalScientificCongress.findMany({where:{edition:e},include:{partners:!0,galleries:!0}})}async count({filter:{title:e,edition:r,location:t}}){let i={},n=[];return r&&n.push({edition:{equals:r}}),e&&n.push({title:{contains:e,mode:"insensitive"}}),t&&n.push({location:{contains:t,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.internationalScientificCongress.count({where:i})}};function Ae(){return new rs(_)}function Lg(){return{createInternationalScientificCongressController:new Ho(Ae())}}function _g(){return{findInternationalScientificCongressesController:new Yo(Ae())}}function Wg(){return{findInternationalScientificCongressByIdController:new Ko(Ae())}}function zg(){return{findInternationalScientificCongressByEditionController:new Zo(Ae())}}function Hg(){return{updateInternationalScientificCongressController:new Xo(Ae())}}function Vg(){return{deleteInternationalScientificCongressController:new Vo(Ae())}}import{extendZodWithOpenApi as zS}from"@asteasolutions/zod-to-openapi";import rp from"zod";zS(rp);var HS=rp.object({id:rp.uuid()}),os=class{constructor(e){this.internationalScientificCongressGalleryRepository=e}async handle(e,r){try{let{id:t}=HS.parse({id:e.params.id}),i=await this.internationalScientificCongressGalleryRepository.findById(t);if(!i)throw new p("A imagem da galeria n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var is=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.internationalScientificCongressGalleryItem.create({data:e})}async update(e){await this.prisma.internationalScientificCongressGalleryItem.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.internationalScientificCongressGalleryItem.delete({where:{id:e}})}async findByCongressId(e){let{pagination:r,filter:t}=e;return await this.prisma.internationalScientificCongressGalleryItem.findMany({where:{congressId:t.congressId,...t.caption&&{caption:{contains:t.caption,mode:"insensitive"}}},skip:r.offset,take:r.limit})}async findById(e){return await this.prisma.internationalScientificCongressGalleryItem.findFirst({where:{id:e}})}async count(e){let{filter:r}=e;return await this.prisma.internationalScientificCongressGalleryItem.count({where:{congressId:r.congressId,...r.caption&&{caption:{contains:r.caption,mode:"insensitive"}}}})}};function sr(){return new is(_)}function Zg(){return{createInternationalScientificCongressGalleryController:new Uo(sr(),Ae(),F())}}function Kg(){return{findInternationalScientificCongressGalleriesByCongressIdController:new ko(sr())}}function Jg(){return{findInternationalScientificCongressGalleryByIdController:new os(sr())}}function Yg(){return{updateInternationalScientificCongressGalleryController:new No(sr(),F())}}function Xg(){return{deleteInternationalScientificCongressGalleryController:new qo(sr())}}import{extendZodWithOpenApi as VS}from"@asteasolutions/zod-to-openapi";import op from"zod";VS(op);var ZS=op.object({id:op.uuid()}),ns=class{constructor(e){this.internationalScientificCongressPartnerRepository=e}async handle(e,r){try{let{id:t}=ZS.parse({id:e.params.id}),i=await this.internationalScientificCongressPartnerRepository.findById(t);if(!i)throw new p("O parceiro n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var ss=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.internationalScientificCongressPartner.create({data:e})}async update(e){await this.prisma.internationalScientificCongressPartner.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.internationalScientificCongressPartner.delete({where:{id:e}})}async findByCongressId(e){return await this.prisma.internationalScientificCongressPartner.findMany({where:{congressId:e.filter.congressId,name:e.filter.name?{contains:e.filter.name,mode:"insensitive"}:void 0},skip:e.pagination?.offset,take:e.pagination?.limit})}async findById(e){return await this.prisma.internationalScientificCongressPartner.findFirst({where:{id:e}})}async count(e){return await this.prisma.internationalScientificCongressPartner.count({where:{congressId:e.filter.congressId,name:e.filter.name?{contains:e.filter.name,mode:"insensitive"}:void 0}})}};function ar(){return new ss(_)}function $g(){return{createInternationalScientificCongressPartnerController:new Go(ar(),Ae(),F())}}function Qg(){return{findInternationalScientificCongressPartnersByCongressIdController:new Wo(ar())}}function ef(){return{findInternationalScientificCongressPartnerByIdController:new ns(ar())}}function tf(){return{updateInternationalScientificCongressPartnerController:new zo(ar(),F())}}function rf(){return{deleteInternationalScientificCongressPartnerController:new Lo(ar())}}var ne=KS(),{authMiddleware:Ve}=H();ne.post("/",(o,e,r)=>{Ve.authenticated(o,e,r)},async(o,e)=>{let{createInternationalScientificCongressController:r}=Lg();await r.handle(o,e)});ne.get("/",async(o,e)=>{let{findInternationalScientificCongressesController:r}=_g();await r.handle(o,e)});ne.get("/:id",async(o,e)=>{let{findInternationalScientificCongressByIdController:r}=Wg();await r.handle(o,e)});ne.get("/edition/:edition",async(o,e)=>{let{findInternationalScientificCongressByEditionController:r}=zg();await r.handle(o,e)});ne.put("/:id",(o,e,r)=>{Ve.authenticated(o,e,r)},async(o,e)=>{let{updateInternationalScientificCongressController:r}=Hg();await r.handle(o,e)});ne.delete("/:id",(o,e,r)=>{Ve.authenticated(o,e,r)},async(o,e)=>{let{deleteInternationalScientificCongressController:r}=Vg();await r.handle(o,e)});ne.post("/:congressId/gallery",(o,e,r)=>{Ve.authenticated(o,e,r)},z.single("image"),async(o,e)=>{let{createInternationalScientificCongressGalleryController:r}=Zg();await r.handle(o,e)});ne.get("/:congressId/gallery",async(o,e)=>{let{findInternationalScientificCongressGalleriesByCongressIdController:r}=Kg();await r.handle(o,e)});ne.get("/gallery/:id",async(o,e)=>{let{findInternationalScientificCongressGalleryByIdController:r}=Jg();await r.handle(o,e)});ne.put("/gallery/:id",(o,e,r)=>{Ve.authenticated(o,e,r)},z.single("image"),async(o,e)=>{let{updateInternationalScientificCongressGalleryController:r}=Yg();await r.handle(o,e)});ne.delete("/gallery/:id",(o,e,r)=>{Ve.authenticated(o,e,r)},async(o,e)=>{let{deleteInternationalScientificCongressGalleryController:r}=Xg();await r.handle(o,e)});ne.post("/:congressId/partner",(o,e,r)=>{Ve.authenticated(o,e,r)},z.single("logo"),async(o,e)=>{let{createInternationalScientificCongressPartnerController:r}=$g();await r.handle(o,e)});ne.get("/:congressId/partner",async(o,e)=>{let{findInternationalScientificCongressPartnersByCongressIdController:r}=Qg();await r.handle(o,e)});ne.get("/partner/:id",async(o,e)=>{let{findInternationalScientificCongressPartnerByIdController:r}=ef();await r.handle(o,e)});ne.put("/partner/:id",(o,e,r)=>{Ve.authenticated(o,e,r)},z.single("logo"),async(o,e)=>{let{updateInternationalScientificCongressPartnerController:r}=tf();await r.handle(o,e)});ne.delete("/partner/:id",(o,e,r)=>{Ve.authenticated(o,e,r)},async(o,e)=>{let{deleteInternationalScientificCongressPartnerController:r}=rf();await r.handle(o,e)});import{Router as XS}from"express";import{extendZodWithOpenApi as JS}from"@asteasolutions/zod-to-openapi";import as from"zod";JS(as);var YS=as.object({role:as.string().optional(),orderBy:as.enum(["asc","desc"]).optional()}),ms=class{constructor(e){this.legitimatorCommitteeMemberRepository=e}async handle(e,r){try{let t=YS.parse(e.query),i=await this.legitimatorCommitteeMemberRepository.find({filter:t});r.status(200).json({members:i})}catch(t){if(t instanceof Error)throw new m(t.message)}}};var cs=class{constructor(e){this.prisma=e}async create(e){await this.prisma.legitimatorCommitteeMember.create({data:{...e,order:e.order??0}})}async update(e){let{id:r,...t}=e;await this.prisma.legitimatorCommitteeMember.update({where:{id:r},data:t})}async deleteById(e){await this.prisma.legitimatorCommitteeMember.delete({where:{id:e}})}async find({filter:{role:e,orderBy:r}}){let t={};return e&&(t.role={contains:e,mode:"insensitive"}),await this.prisma.legitimatorCommitteeMember.findMany({where:t,include:{user:{omit:{passwordHash:!0}}},orderBy:r?[{order:"asc"},{updatedAt:r}]:[{order:"asc"},{updatedAt:"desc"}]})}async findById(e){return await this.prisma.legitimatorCommitteeMember.findFirst({where:{id:e},include:{user:{omit:{passwordHash:!0}}}})}async count({filter:{role:e}}){let r={};return e&&(r.role={contains:e,mode:"insensitive"}),await this.prisma.legitimatorCommitteeMember.count({where:r})}};function mr(){return new cs(_)}function of(){return{createLegitimatorCommitteeMemberController:new $o(mr())}}function nf(){return{findLegitimatorCommitteeMembersController:new ms(mr())}}function sf(){return{findLegitimatorCommitteeMemberByIdController:new ei(mr())}}function af(){return{updateLegitimatorCommitteeMemberController:new ri(mr())}}function mf(){return{deleteLegitimatorCommitteeMemberController:new Qo(mr())}}var Bt=XS(),{authMiddleware:ip}=H();Bt.post("/",(o,e,r)=>{ip.authenticated(o,e,r)},async(o,e)=>{let{createLegitimatorCommitteeMemberController:r}=of();await r.handle(o,e)});Bt.get("/",async(o,e)=>{let{findLegitimatorCommitteeMembersController:r}=nf();await r.handle(o,e)});Bt.get("/:id",async(o,e)=>{let{findLegitimatorCommitteeMemberByIdController:r}=sf();await r.handle(o,e)});Bt.put("/:id",(o,e,r)=>{ip.authenticated(o,e,r)},async(o,e)=>{let{updateLegitimatorCommitteeMemberController:r}=af();await r.handle(o,e)});Bt.delete("/:id",(o,e,r)=>{ip.authenticated(o,e,r)},async(o,e)=>{let{deleteLegitimatorCommitteeMemberController:r}=mf();await r.handle(o,e)});import{Router as ew}from"express";import{extendZodWithOpenApi as $S}from"@asteasolutions/zod-to-openapi";import qr from"zod";$S(qr);var QS=qr.object({name:qr.string().optional(),description:qr.string().optional(),orderBy:qr.enum(["asc","desc"]).default("desc")}),ps=class{constructor(e){this.managementTeamRepository=e}async handle(e,r){try{let t=QS.parse(e.query),i=await this.managementTeamRepository.find({filter:t});r.status(200).json({teams:i})}catch(t){if(t instanceof Error)throw new m(t.message)}}};var ds=class{constructor(e){this.prisma=e}async create(e){let{members:r,...t}=e;await this.prisma.$transaction(async i=>{let n=await i.managementTeam.create({data:t});return await i.managementTeamMember.createMany({data:r.map(({userId:s,role:a,order:c})=>({teamId:n.id,userId:s,role:a,order:c??0}))}),n})}async update(e){let{members:r,...t}=e;await this.prisma.$transaction(async i=>{let n=await i.managementTeam.update({where:{id:e.id},data:t});return r!==void 0&&(await i.managementTeamMember.deleteMany({where:{teamId:e.id}}),r.length>0&&await i.managementTeamMember.createMany({data:r.map(({userId:s,role:a,order:c})=>({teamId:e.id,userId:s,role:a,order:c??0}))})),n})}async deleteById(e){await this.prisma.managementTeam.delete({where:{id:e}})}async find({filter:{name:e,description:r,orderBy:t}}){let i={},n=[];return e&&n.push({name:{contains:e,mode:"insensitive"}}),r&&n.push({description:{contains:r,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.managementTeam.findMany({where:i,include:{members:{include:{user:{omit:{passwordHash:!0}}},orderBy:{order:"asc"}}},orderBy:{updatedAt:t}})}async findById(e){return await this.prisma.managementTeam.findFirst({where:{id:e},include:{members:{include:{user:{omit:{passwordHash:!0}}},orderBy:{order:"asc"}}}})}async findByName(e){return await this.prisma.managementTeam.findFirst({where:{name:e},include:{members:{include:{user:{omit:{passwordHash:!0}}},orderBy:{order:"asc"}}}})}async count({filter:{name:e,description:r}}){let t={},i=[];return e&&i.push({name:{contains:e,mode:"insensitive"}}),r&&i.push({description:{contains:r,mode:"insensitive"}}),i.length>0&&(t.OR=i),await this.prisma.managementTeam.count({where:t})}};function cr(){return new ds(_)}function cf(){return{createManagementTeamController:new oi(cr())}}function pf(){return{findManagementTeamsController:new ps(cr())}}function df(){return{findManagementTeamByIdController:new ni(cr())}}function lf(){return{updateManagementTeamController:new ai(cr())}}function uf(){return{deleteManagementTeamController:new ii(cr())}}var Ut=ew(),{authMiddleware:np}=H();Ut.post("/",(o,e,r)=>{np.authenticated(o,e,r)},async(o,e)=>{let{createManagementTeamController:r}=cf();await r.handle(o,e)});Ut.get("/",async(o,e)=>{let{findManagementTeamsController:r}=pf();await r.handle(o,e)});Ut.get("/:id",async(o,e)=>{let{findManagementTeamByIdController:r}=df();await r.handle(o,e)});Ut.put("/:id",(o,e,r)=>{np.authenticated(o,e,r)},async(o,e)=>{let{updateManagementTeamController:r}=lf();await r.handle(o,e)});Ut.delete("/:id",(o,e,r)=>{np.authenticated(o,e,r)},async(o,e)=>{let{deleteManagementTeamController:r}=uf();await r.handle(o,e)});import{Router as ow}from"express";var ls=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.meeting.create({data:e})}async update(e){await this.prisma.meeting.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.meeting.delete({where:{id:e}})}async find({pagination:{offset:e,limit:r},filter:{title:t,format:i,status:n,orderBy:s}}){let a={},c=[];return i&&(a.format=i),n&&(a.status=n),t&&c.push({title:{contains:t,mode:"insensitive"}}),c.length>0&&(a.OR=c),await this.prisma.meeting.findMany({where:a,include:{minutes:!0},orderBy:s?{scheduledAt:s}:{scheduledAt:"desc"},skip:e,take:r})}async findById(e){return await this.prisma.meeting.findFirst({where:{id:e},include:{minutes:!0}})}async findByStatus(e){return await this.prisma.meeting.findMany({where:{status:e},include:{minutes:!0}})}async count({filter:{title:e,format:r,status:t}}){let i={},n=[];return r&&(i.format=r),t&&(i.status=t),e&&n.push({title:{contains:e,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.meeting.count({where:i})}};function Ze(){return new ls(_)}function gf(){return{createMeetingController:new li(Ze())}}function ff(){return{findMeetingsController:new hi(Ze())}}function yf(){return{findMeetingByIdController:new gi(Ze())}}function hf(){return{findMeetingByStatusController:new yi(Ze())}}function Rf(){return{updateMeetingController:new Ri(Ze())}}function If(){return{deleteMeetingController:new ui(Ze())}}import{extendZodWithOpenApi as tw}from"@asteasolutions/zod-to-openapi";import sp from"zod";tw(sp);var rw=sp.object({meetingId:sp.uuid()}),us=class{constructor(e,r){this.meetingMinuteRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{meetingId:t}=rw.parse({meetingId:e.params.meetingId}),i=await this.meetingMinuteRepository.findByMeetingId(t);if(!i)throw new p("A ata n\xE3o existe para esta reuni\xE3o.");return i.documentUrl&&await this.firebaseStorageService.deleteFile({fileUrl:i.documentUrl}),await this.meetingMinuteRepository.deleteByMeetingId(i.id),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var gs=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.meetingMinute.create({data:e,include:{meeting:!0}})}async update(e){await this.prisma.meetingMinute.update({where:{id:e.id},data:e})}async deleteByMeetingId(e){await this.prisma.meetingMinute.delete({where:{id:e}})}async findByMeetingId(e){return await this.prisma.meetingMinute.findFirst({where:{meetingId:e},include:{meeting:!0}})}};function Or(){return new gs(_)}function bf(){return{createMeetingMinuteController:new mi(Or(),Ze(),F())}}function Cf(){return{findMeetingMinuteByMeetingIdController:new ci(Or())}}function Sf(){return{updateMeetingMinuteByMeetingIdController:new pi(Or(),F())}}function wf(){return{deleteMeetingMinuteByMeetingIdController:new us(Or(),F())}}var we=ow(),{authMiddleware:pr}=H();we.post("/",(o,e,r)=>{pr.authenticated(o,e,r)},async(o,e)=>{let{createMeetingController:r}=gf();await r.handle(o,e)});we.get("/",async(o,e)=>{let{findMeetingsController:r}=ff();await r.handle(o,e)});we.get("/:id",async(o,e)=>{let{findMeetingByIdController:r}=yf();await r.handle(o,e)});we.get("/status/:status",async(o,e)=>{let{findMeetingByStatusController:r}=hf();await r.handle(o,e)});we.put("/:id",(o,e,r)=>{pr.authenticated(o,e,r)},async(o,e)=>{let{updateMeetingController:r}=Rf();await r.handle(o,e)});we.delete("/:id",(o,e,r)=>{pr.authenticated(o,e,r)},async(o,e)=>{let{deleteMeetingController:r}=If();await r.handle(o,e)});we.post("/:meetingId/minute",(o,e,r)=>{pr.authenticated(o,e,r)},z.single("document"),async(o,e)=>{let{createMeetingMinuteController:r}=bf();await r.handle(o,e)});we.get("/:meetingId/minute",async(o,e)=>{let{findMeetingMinuteByMeetingIdController:r}=Cf();await r.handle(o,e)});we.put("/:meetingId/minute",(o,e,r)=>{pr.authenticated(o,e,r)},z.single("document"),async(o,e)=>{let{updateMeetingMinuteByMeetingIdController:r}=Sf();await r.handle(o,e)});we.delete("/:meetingId/minute",(o,e,r)=>{pr.authenticated(o,e,r)},async(o,e)=>{let{deleteMeetingMinuteByMeetingIdController:r}=wf();await r.handle(o,e)});import{Router as dw}from"express";import{extendZodWithOpenApi as iw}from"@asteasolutions/zod-to-openapi";import ap from"zod";iw(ap);var nw=ap.object({id:ap.string()}),fs=class{constructor(e,r){this.newsRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=nw.parse(e.params),i=e.user.id,n=await this.newsRepository.findById(t);if(!n)throw new p("Not\xEDcia n\xE3o encontrada.");if(n.author.id!==i)throw new he("Sem permiss\xE3o.");await Promise.all([this.newsRepository.delete(t),this.firebaseStorageService.deleteFile({fileUrl:n.imageUrl})]),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as sw}from"@asteasolutions/zod-to-openapi";import dr from"zod";var aw=5,vf=1024,mw=vf*vf,cw=aw*mw;sw(dr);var pw=dr.object({id:dr.string(),title:dr.string().min(1),content:dr.string().min(1),image:dr.any().optional().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=cw,"A imagem deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.")}),ys=class{constructor(e,r){this.newsRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,title:i,content:n,image:s}=pw.parse({id:e.params.id,image:e.file,...e.body}),a=await this.newsRepository.findById(t);if(!a)throw new p("Not\xEDcia n\xE3o encontrada.");let c=e.user.id;if(a.author.id!==c)throw new he("Sem permiss\xE3o.");let d=a.imageUrl||"";s&&a.imageUrl&&(d=await this.firebaseStorageService.updateFile({file:s,folder:P.NEWS,id:t,fileUrl:a.imageUrl}));let h=await this.newsRepository.update({id:t,title:i,content:n,imageUrl:d});r.status(200).json(h)}catch(t){if(t instanceof Error)throw new m(t.message)}}};function Ef(){return{createNewsController:new Ii(We(),F())}}function jf(){return{findAllNewsController:new wi(We())}}function xf(){return{findNewsByIdController:new Si(We())}}function Pf(){return{findNewsByAuthorIdController:new bi(We())}}function Af(){return{updateNewsController:new ys(We(),F())}}function Mf(){return{deleteNewsController:new fs(We(),F())}}var ht=dw(),{authMiddleware:mp}=H();ht.post("/",(o,e,r)=>{mp.authenticated(o,e,r)},z.single("image"),async(o,e)=>{let{createNewsController:r}=Ef();await r.handle(o,e)});ht.get("/",async(o,e)=>{let{findAllNewsController:r}=jf();await r.handle(o,e)});ht.get("/:id",async(o,e)=>{let{findNewsByIdController:r}=xf();await r.handle(o,e)});ht.get("/author/:authorId",async(o,e)=>{let{findNewsByAuthorIdController:r}=Pf();await r.handle(o,e)});ht.put("/:id",(o,e,r)=>{mp.authenticated(o,e,r)},z.single("image"),async(o,e)=>{let{updateNewsController:r}=Af();await r.handle(o,e)});ht.delete("/:id",(o,e,r)=>{mp.authenticated(o,e,r)},async(o,e)=>{let{deleteNewsController:r}=Mf();await r.handle(o,e)});import{Router as lw}from"express";var hs=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.partner.create({data:e})}async update(e){await this.prisma.partner.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.partner.delete({where:{id:e}})}async find({pagination:e,filter:{name:r,description:t,category:i,isActive:n,orderBy:s}}){let a={},c=[];return n!==void 0&&(a.isActive=n),r&&c.push({name:{contains:r,mode:"insensitive"}}),t&&c.push({description:{contains:t,mode:"insensitive"}}),i&&c.push({category:{contains:i,mode:"insensitive"}}),c.length>0&&(a.OR=c),await this.prisma.partner.findMany({where:a,orderBy:s?{updatedAt:s}:{updatedAt:"desc"},...e&&{skip:e.offset,take:e.limit}})}async findById(e){return await this.prisma.partner.findFirst({where:{id:e}})}async count({filter:{name:e,description:r,category:t,isActive:i}}){let n={},s=[];return i!==void 0&&(n.isActive=i),e&&s.push({name:{contains:e,mode:"insensitive"}}),r&&s.push({description:{contains:r,mode:"insensitive"}}),t&&s.push({category:{contains:t,mode:"insensitive"}}),s.length>0&&(n.OR=s),await this.prisma.partner.count({where:n})}};function lr(){return new hs(_)}function Tf(){return{createPartnerController:new vi(lr(),F())}}function Df(){return{findPartnersController:new Pi(lr())}}function Ff(){return{findPartnerByIdController:new ji(lr())}}function Bf(){return{updatePartnerController:new Ai(lr(),F())}}function Uf(){return{deletePartnerController:new Ei(lr(),F())}}var qt=lw(),{authMiddleware:cp}=H();qt.post("/",(o,e,r)=>{cp.authenticated(o,e,r)},z.single("logo"),async(o,e)=>{let{createPartnerController:r}=Tf();await r.handle(o,e)});qt.get("/",async(o,e)=>{let{findPartnersController:r}=Df();await r.handle(o,e)});qt.get("/:id",async(o,e)=>{let{findPartnerByIdController:r}=Ff();await r.handle(o,e)});qt.put("/:id",(o,e,r)=>{cp.authenticated(o,e,r)},z.single("logo"),async(o,e)=>{let{updatePartnerController:r}=Bf();await r.handle(o,e)});qt.delete("/:id",(o,e,r)=>{cp.authenticated(o,e,r)},async(o,e)=>{let{deletePartnerController:r}=Uf();await r.handle(o,e)});import{Router as uw}from"express";function qf(){return{createPendencyController:new Mi(ge(),ft(),F())}}function Of(){return{findPendenciesController:new Fi(ft())}}function kf(){return{findPendencyByIdController:new Bi(ft())}}function Nf(){return{updatePendencyController:new Ui(ft(),F())}}function Gf(){return{deletePendencyController:new Di(ft(),F())}}var Ot=uw(),{authMiddleware:kr}=H();Ot.post("/:user_id",(o,e,r)=>{kr.isAdmin(o,e,r)},z.single("document"),async(o,e)=>{let{createPendencyController:r}=qf();await r.handle(o,e)});Ot.get("/",(o,e,r)=>{kr.isAdmin(o,e,r)},async(o,e)=>{let{findPendenciesController:r}=Of();await r.handle(o,e)});Ot.get("/:pendency_id",(o,e,r)=>{kr.isAdmin(o,e,r)},async(o,e)=>{let{findPendencyByIdController:r}=kf();await r.handle(o,e)});Ot.put("/:pendency_id",(o,e,r)=>{kr.isAdmin(o,e,r)},z.single("document"),async(o,e)=>{let{updatePendencyController:r}=Nf();await r.handle(o,e)});Ot.delete("/:pendency_id",(o,e,r)=>{kr.isAdmin(o,e,r)},async(o,e)=>{let{deletePendencyController:r}=Gf();await r.handle(o,e)});import{Router as Iw}from"express";import{extendZodWithOpenApi as gw}from"@asteasolutions/zod-to-openapi";import Ke from"zod";var fw=5,Lf=1024,yw=Lf*Lf,hw=fw*yw;gw(Ke);var Rw=Ke.object({title:Ke.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),description:Ke.string().optional(),startDate:Ke.coerce.date(),endDate:Ke.coerce.date(),contact:Ke.string().min(1,"Contato \xE9 obrigat\xF3rio."),registrationLink:Ke.url().optional(),image:Ke.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=hw,"A imagem deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.")}),Rs=class{constructor(e,r){this.postGraduateProgramRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{title:t,description:i,startDate:n,endDate:s,contact:a,registrationLink:c,image:d}=Rw.parse({...e.body,image:e.file}),h=await this.postGraduateProgramRepository.create({title:t,description:i,startDate:n,endDate:s,contact:a,registrationLink:c||void 0}),j=await this.firebaseStorageService.uploadFile({file:d,folder:P.POST_GRADUATE_PROGRAM,id:h.id});return await this.postGraduateProgramRepository.update({id:h.id,imageUrl:j}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var Is=class{constructor(e){this.prisma=e}async create({title:e,imageUrl:r,description:t,startDate:i,endDate:n,contact:s,registrationLink:a}){return await this.prisma.postGraduateProgram.create({data:{title:e,imageUrl:r,description:t,startDate:i,endDate:n,contact:s,registrationLink:a}})}async find({pagination:{offset:e,limit:r},filter:{description:t,orderBy:i,title:n,contact:s}}){let a={},c=[];return n&&c.push({title:{contains:n,mode:"insensitive"}}),t&&c.push({description:{contains:t,mode:"insensitive"}}),s&&c.push({contact:{contains:s,mode:"insensitive"}}),c.length>0&&(a.OR=c),await this.prisma.postGraduateProgram.findMany({where:a,orderBy:{updatedAt:i},skip:e,take:r})}async findById(e){return await this.prisma.postGraduateProgram.findFirst({where:{id:e}})}async update({id:e,title:r,imageUrl:t,description:i,startDate:n,endDate:s,contact:a,registrationLink:c}){await this.prisma.postGraduateProgram.update({where:{id:e},data:{title:r,imageUrl:t,description:i,startDate:n,endDate:s,contact:a,registrationLink:c}})}async deleteById(e){await this.prisma.postGraduateProgram.delete({where:{id:e}})}async count({filter:{description:e,title:r,contact:t}}){let i={},n=[];return r&&n.push({title:{contains:r,mode:"insensitive"}}),e&&n.push({description:{contains:e,mode:"insensitive"}}),t&&n.push({contact:{contains:t,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.postGraduateProgram.count({where:i})}};function ur(){return new Is(_)}function _f(){return{createPostGraduateProgramController:new Rs(ur(),F())}}function Wf(){return{findPostGraduateProgramsController:new Ni(ur())}}function zf(){return{findPostGraduateProgramByIdController:new ki(ur())}}function Hf(){return{updatePostGraduateProgramController:new Gi(ur(),F())}}function Vf(){return{deletePostGraduateProgramController:new Oi(ur(),F())}}var kt=Iw(),{authMiddleware:Nr}=H();kt.post("/",(o,e,r)=>{Nr.isAdmin(o,e,r)},z.single("image"),async(o,e)=>{let{createPostGraduateProgramController:r}=_f();await r.handle(o,e)});kt.get("/",(o,e,r)=>{Nr.isAdmin(o,e,r)},async(o,e)=>{let{findPostGraduateProgramsController:r}=Wf();await r.handle(o,e)});kt.get("/:id",(o,e,r)=>{Nr.isAdmin(o,e,r)},async(o,e)=>{let{findPostGraduateProgramByIdController:r}=zf();await r.handle(o,e)});kt.put("/:id",(o,e,r)=>{Nr.isAdmin(o,e,r)},z.single("image"),async(o,e)=>{let{updatePostGraduateProgramController:r}=Hf();await r.handle(o,e)});kt.delete("/:id",(o,e,r)=>{Nr.isAdmin(o,e,r)},async(o,e)=>{let{deletePostGraduateProgramController:r}=Vf();await r.handle(o,e)});import{Router as bw}from"express";var bs=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.regiment.create({data:e})}async update(e){await this.prisma.regiment.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.regiment.delete({where:{id:e}})}async find({pagination:{offset:e,limit:r},filter:{title:t,status:i,orderBy:n}}){let s={},a=[];return i&&(s.status=i),t&&a.push({title:{contains:t,mode:"insensitive"}}),a.length>0&&(s.OR=a),await this.prisma.regiment.findMany({where:s,orderBy:n?{updatedAt:n}:{updatedAt:"desc"},skip:e,take:r})}async findById(e){return await this.prisma.regiment.findFirst({where:{id:e}})}async findByStatus(e){return await this.prisma.regiment.findMany({where:{status:e}})}async count({filter:{title:e,status:r}}){let t={},i=[];return r&&(t.status=r),e&&i.push({title:{contains:e,mode:"insensitive"}}),i.length>0&&(t.OR=i),await this.prisma.regiment.count({where:t})}};function Nt(){return new bs(_)}function Zf(){return{createRegimentController:new Li(Nt(),F())}}function Kf(){return{findRegimentsController:new Vi(Nt())}}function Jf(){return{findRegimentByIdController:new Wi(Nt())}}function Yf(){return{findRegimentByStatusController:new Hi(Nt())}}function Xf(){return{updateRegimentController:new Zi(Nt(),F())}}function $f(){return{deleteRegimentController:new _i(Nt(),F())}}var Rt=bw(),{authMiddleware:pp}=H();Rt.post("/",(o,e,r)=>{pp.authenticated(o,e,r)},z.single("document"),async(o,e)=>{let{createRegimentController:r}=Zf();await r.handle(o,e)});Rt.get("/",async(o,e)=>{let{findRegimentsController:r}=Kf();await r.handle(o,e)});Rt.get("/:id",async(o,e)=>{let{findRegimentByIdController:r}=Jf();await r.handle(o,e)});Rt.get("/status/:status",async(o,e)=>{let{findRegimentByStatusController:r}=Yf();await r.handle(o,e)});Rt.put("/:id",(o,e,r)=>{pp.authenticated(o,e,r)},z.single("document"),async(o,e)=>{let{updateRegimentController:r}=Xf();await r.handle(o,e)});Rt.delete("/:id",(o,e,r)=>{pp.authenticated(o,e,r)},async(o,e)=>{let{deleteRegimentController:r}=$f();await r.handle(o,e)});import{Router as Ew}from"express";import{extendZodWithOpenApi as Cw}from"@asteasolutions/zod-to-openapi";import dp from"zod";Cw(dp);var Sw=dp.object({id:dp.string().uuid("ID inv\xE1lido")}),Cs=class{constructor(e){this.regionalCongressGalleryRepository=e}async handle(e,r){try{let{id:t}=Sw.parse(e.params),i=await this.regionalCongressGalleryRepository.findById(t);if(!i)throw new p("Item de galeria n\xE3o encontrado");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var Ss=class{constructor(e){this.prisma=e}async create(e){await this.prisma.regionalCongress.create({data:e})}async update(e){await this.prisma.regionalCongress.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.regionalCongress.delete({where:{id:e}})}async find({pagination:{offset:e,limit:r},filter:{title:t,edition:i,location:n,orderBy:s}}){let a={},c=[];return i&&c.push({edition:{equals:i}}),t&&c.push({title:{contains:t,mode:"insensitive"}}),n&&c.push({location:{contains:n,mode:"insensitive"}}),c.length>0&&(a.OR=c),await this.prisma.regionalCongress.findMany({where:a,include:{regionalCongressPartners:!0,regionalCongressGalleryItems:!0},orderBy:s?{startDate:s}:{startDate:"desc"},skip:e,take:r})}async findById(e){return await this.prisma.regionalCongress.findFirst({where:{id:e},include:{regionalCongressPartners:!0,regionalCongressGalleryItems:!0}})}async findByEdition(e){return await this.prisma.regionalCongress.findMany({where:{edition:e},include:{regionalCongressPartners:!0,regionalCongressGalleryItems:!0}})}async count({filter:{title:e,edition:r,location:t}}){let i={},n=[];return r&&n.push({edition:{equals:r}}),e&&n.push({title:{contains:e,mode:"insensitive"}}),t&&n.push({location:{contains:t,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.regionalCongress.count({where:i})}};function Me(){return new Ss(_)}var ws=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.regionalCongressGalleryItem.create({data:e})}async update(e){await this.prisma.regionalCongressGalleryItem.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.regionalCongressGalleryItem.delete({where:{id:e}})}async findByCongressId({pagination:e,filter:r}){return await this.prisma.regionalCongressGalleryItem.findMany({where:{congressId:r.congressId,...r.caption&&{caption:{contains:r.caption,mode:"insensitive"}}},skip:e.offset,take:e.limit})}async findById(e){return await this.prisma.regionalCongressGalleryItem.findFirst({where:{id:e}})}async count({filter:e}){return await this.prisma.regionalCongressGalleryItem.count({where:{congressId:e.congressId,...e.caption&&{caption:{contains:e.caption,mode:"insensitive"}}}})}};function gr(){return new ws(_)}function Qf(){return{createRegionalCongressGalleryController:new Ki(gr(),Me(),F())}}function ey(){return{findRegionalCongressGalleriesByCongressIdController:new Xi(gr())}}function ty(){return{findRegionalCongressGalleryByIdController:new Cs(gr())}}function ry(){return{updateRegionalCongressGalleryController:new $i(gr(),F())}}function oy(){return{deleteRegionalCongressGalleryController:new Ji(gr())}}import{extendZodWithOpenApi as ww}from"@asteasolutions/zod-to-openapi";import lp from"zod";ww(lp);var vw=lp.object({id:lp.string().uuid("ID inv\xE1lido")}),vs=class{constructor(e){this.regionalCongressPartnerRepository=e}async handle(e,r){try{let{id:t}=vw.parse(e.params),i=await this.regionalCongressPartnerRepository.findById(t);if(!i)throw new p("Parceiro n\xE3o encontrado");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var Es=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.regionalCongressPartner.create({data:e})}async update(e){await this.prisma.regionalCongressPartner.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.regionalCongressPartner.delete({where:{id:e}})}async findByCongressId(e){return await this.prisma.regionalCongressPartner.findMany({where:{congressId:e.filter.congressId,name:e.filter.name?{contains:e.filter.name,mode:"insensitive"}:void 0},skip:e.pagination?.offset,take:e.pagination?.limit})}async findById(e){return await this.prisma.regionalCongressPartner.findFirst({where:{id:e}})}async count(e){return await this.prisma.regionalCongressPartner.count({where:{congressId:e.filter.congressId,name:e.filter.name?{contains:e.filter.name,mode:"insensitive"}:void 0}})}};function fr(){return new Es(_)}function iy(){return{createRegionalCongressPartnerController:new Qi(fr(),Me(),F())}}function ny(){return{findRegionalCongressPartnersByCongressIdController:new rn(fr())}}function sy(){return{findRegionalCongressPartnerByIdController:new vs(fr())}}function ay(){return{updateRegionalCongressPartnerController:new on(fr(),F())}}function my(){return{deleteRegionalCongressPartnerController:new en(fr())}}function cy(){return{createRegionalCongressController:new nn(Me())}}function py(){return{findRegionalCongressesController:new pn(Me())}}function dy(){return{findRegionalCongressByIdController:new mn(Me())}}function ly(){return{findRegionalCongressByEditionController:new an(Me())}}function uy(){return{updateRegionalCongressController:new dn(Me())}}function gy(){return{deleteRegionalCongressController:new sn(Me())}}var se=Ew(),{authMiddleware:Je}=H();se.post("/",(o,e,r)=>{Je.authenticated(o,e,r)},async(o,e)=>{let{createRegionalCongressController:r}=cy();await r.handle(o,e)});se.get("/",async(o,e)=>{let{findRegionalCongressesController:r}=py();await r.handle(o,e)});se.get("/:id",async(o,e)=>{let{findRegionalCongressByIdController:r}=dy();await r.handle(o,e)});se.get("/edition/:edition",async(o,e)=>{let{findRegionalCongressByEditionController:r}=ly();await r.handle(o,e)});se.put("/:id",(o,e,r)=>{Je.authenticated(o,e,r)},async(o,e)=>{let{updateRegionalCongressController:r}=uy();await r.handle(o,e)});se.delete("/:id",(o,e,r)=>{Je.authenticated(o,e,r)},async(o,e)=>{let{deleteRegionalCongressController:r}=gy();await r.handle(o,e)});se.post("/:congressId/gallery",(o,e,r)=>{Je.authenticated(o,e,r)},z.single("image"),async(o,e)=>{let{createRegionalCongressGalleryController:r}=Qf();await r.handle(o,e)});se.get("/:congressId/gallery",async(o,e)=>{let{findRegionalCongressGalleriesByCongressIdController:r}=ey();await r.handle(o,e)});se.get("/gallery/:id",async(o,e)=>{let{findRegionalCongressGalleryByIdController:r}=ty();await r.handle(o,e)});se.put("/gallery/:id",(o,e,r)=>{Je.authenticated(o,e,r)},z.single("image"),async(o,e)=>{let{updateRegionalCongressGalleryController:r}=ry();await r.handle(o,e)});se.delete("/gallery/:id",(o,e,r)=>{Je.authenticated(o,e,r)},async(o,e)=>{let{deleteRegionalCongressGalleryController:r}=oy();await r.handle(o,e)});se.post("/:congressId/partner",(o,e,r)=>{Je.authenticated(o,e,r)},z.single("logo"),async(o,e)=>{let{createRegionalCongressPartnerController:r}=iy();await r.handle(o,e)});se.get("/:congressId/partner",async(o,e)=>{let{findRegionalCongressPartnersByCongressIdController:r}=ny();await r.handle(o,e)});se.get("/partner/:id",async(o,e)=>{let{findRegionalCongressPartnerByIdController:r}=sy();await r.handle(o,e)});se.put("/partner/:id",(o,e,r)=>{Je.authenticated(o,e,r)},z.single("logo"),async(o,e)=>{let{updateRegionalCongressPartnerController:r}=ay();await r.handle(o,e)});se.delete("/partner/:id",(o,e,r)=>{Je.authenticated(o,e,r)},async(o,e)=>{let{deleteRegionalCongressPartnerController:r}=my();await r.handle(o,e)});import{Router as Mw}from"express";import{extendZodWithOpenApi as jw}from"@asteasolutions/zod-to-openapi";import de from"zod";var xw=1,Pw=9;jw(de);var Aw=de.object({page:de.coerce.number().min(1).default(xw),limit:de.coerce.number().min(1).default(Pw),userId:de.string().optional(),registrationNumber:de.string().optional(),name:de.string().optional(),emailAddress:de.string().optional(),mainEtps:de.string().optional(),formations:de.string().optional(),occupations:de.string().optional(),institutions:de.string().optional(),biography:de.string().optional(),orderBy:de.enum(["asc","desc"]).default("desc")}),js=class{constructor(e){this.researcherRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=Aw.parse(e.query),s=i*t-i,[a,c]=await Promise.all([this.researcherRepository.find({pagination:{offset:s,limit:i},filter:{userName:n.name,...n}}),this.researcherRepository.count({filter:{userName:n.name,...n}})]),d=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:d,offset:s,limit:i,researchers:a})}catch(t){if(t instanceof Error)throw new m(t.message)}}};var xs=class{constructor(e){this.prisma=e}async create(e){await this.prisma.researcher.create({data:e})}async update(e){await this.prisma.researcher.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.researcher.delete({where:{id:e}})}async find({pagination:e,filter:{biography:r,degrees:t,formations:i,institutions:n,mainEtps:s,occupations:a,orderBy:c,registrationNumber:d,seniority:h,userId:j,userName:q}}){let Y={},$=[];return q&&$.push({user:{name:{contains:q,mode:"insensitive"}}}),d&&$.push({registrationNumber:{contains:d,mode:"insensitive"}}),s&&$.push({mainEtps:{contains:s,mode:"insensitive"}}),i&&$.push({formations:{contains:i,mode:"insensitive"}}),a&&$.push({occupations:{contains:a,mode:"insensitive"}}),n&&$.push({institutions:{contains:n,mode:"insensitive"}}),r&&$.push({biography:{contains:r,mode:"insensitive"}}),$.length>0&&(Y.OR=$),t&&t.length>0&&(Y.degrees={hasSome:t}),h&&(Y.seniority=h),j&&(Y.userId={equals:j}),await this.prisma.researcher.findMany({where:Y,omit:{userId:!0},include:{user:{omit:{passwordHash:!0}}},orderBy:{updatedAt:c},...e&&{skip:e.offset,take:e.limit}})}async findById(e){return await this.prisma.researcher.findFirst({where:{id:e},include:{user:{omit:{passwordHash:!0}}}})}async findByUserId(e){return await this.prisma.researcher.findFirst({where:{userId:e},include:{user:{omit:{passwordHash:!0}}}})}async findByRegistrationNumber(e){return await this.prisma.researcher.findFirst({where:{registrationNumber:e},include:{user:{omit:{passwordHash:!0}}}})}async count({filter:{biography:e,degrees:r,formations:t,institutions:i,mainEtps:n,occupations:s,registrationNumber:a,seniority:c,userId:d,userName:h}}){let j={},q=[];return h&&q.push({user:{name:{contains:h,mode:"insensitive"}}}),a&&q.push({registrationNumber:{contains:a,mode:"insensitive"}}),q.length>0&&(j.OR=q),n&&(j.mainEtps={contains:n,mode:"insensitive"}),t&&(j.formations={contains:t,mode:"insensitive"}),r&&r.length>0&&(j.degrees={hasSome:r}),s&&(j.occupations={contains:s,mode:"insensitive"}),c&&(j.seniority=c),i&&(j.institutions={contains:i,mode:"insensitive"}),e&&(j.biography={contains:e,mode:"insensitive"}),d&&(j.userId={equals:d}),await this.prisma.researcher.count({where:j})}};function Gt(){return new xs(_)}function fy(){return{createResearcherController:new ln(Gt())}}function yy(){return{findResearchersController:new js(Gt())}}function hy(){return{findResearcherByIdController:new gn(Gt())}}function Ry(){return{findResearcherByUserIdController:new yn(Gt())}}function Iy(){return{updateResearcherController:new hn(Gt())}}function by(){return{deleteResearcherController:new un(Gt())}}var It=Mw(),{authMiddleware:up}=H();It.post("/",(o,e,r)=>{up.authenticated(o,e,r)},async(o,e)=>{let{createResearcherController:r}=fy();await r.handle(o,e)});It.get("/",async(o,e)=>{let{findResearchersController:r}=yy();await r.handle(o,e)});It.get("/:id",async(o,e)=>{let{findResearcherByIdController:r}=hy();await r.handle(o,e)});It.get("/user/:userId",async(o,e)=>{let{findResearcherByUserIdController:r}=Ry();await r.handle(o,e)});It.put("/:id",(o,e,r)=>{up.authenticated(o,e,r)},async(o,e)=>{let{updateResearcherController:r}=Iy();await r.handle(o,e)});It.delete("/:id",(o,e,r)=>{up.authenticated(o,e,r)},async(o,e)=>{let{deleteResearcherController:r}=by();await r.handle(o,e)});import{Router as Fw}from"express";import{extendZodWithOpenApi as Tw}from"@asteasolutions/zod-to-openapi";import ae from"zod";Tw(ae);var Dw=ae.object({title:ae.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),author:ae.string().min(1,"Autor \xE9 obrigat\xF3rio."),journal:ae.string().optional(),volume:ae.string().optional(),edition:ae.string().optional(),pageStart:ae.coerce.number().optional(),pageEnd:ae.coerce.number().optional(),startDate:ae.coerce.date(),endDate:ae.coerce.date(),city:ae.string().optional(),state:ae.string().optional(),country:ae.string().optional(),publisher:ae.string().optional(),description:ae.string().optional(),year:ae.coerce.number().optional(),accessUrl:ae.url().optional()}),Ps=class{constructor(e){this.scientificArticlesRepository=e}async handle(e,r){try{let{title:t,author:i,journal:n,volume:s,edition:a,pageStart:c,pageEnd:d,startDate:h,endDate:j,city:q,state:Y,country:$,publisher:le,description:Te,year:Cr,accessUrl:ks}=Dw.parse(e.body);return await this.scientificArticlesRepository.create({title:t,author:i,journal:n,volume:s,edition:a,pageStart:c,pageEnd:d,startDate:h,endDate:j,city:q,state:Y,country:$,publisher:le,description:Te,year:Cr,accessUrl:ks}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var As=class{constructor(e){this.prisma=e}async create({title:e,author:r,journal:t,volume:i,edition:n,pageStart:s,pageEnd:a,startDate:c,endDate:d,city:h,state:j,country:q,publisher:Y,description:$,year:le,accessUrl:Te}){return await this.prisma.scientificArticle.create({data:{title:e,author:r,journal:t,volume:i,edition:n,pageStart:s,pageEnd:a,startDate:c,endDate:d,city:h,state:j,country:q,publisher:Y,description:$,year:le,accessUrl:Te}})}async find({pagination:{offset:e,limit:r},filter:{title:t,author:i,journal:n,orderBy:s}}){let a={},c=[];return t&&c.push({title:{contains:t,mode:"insensitive"}}),i&&c.push({author:{contains:i,mode:"insensitive"}}),n&&c.push({journal:{contains:n,mode:"insensitive"}}),c.length>0&&(a.OR=c),await this.prisma.scientificArticle.findMany({where:a,orderBy:{updatedAt:s},skip:e,take:r})}async findById(e){return await this.prisma.scientificArticle.findFirst({where:{id:e}})}async update({id:e,title:r,author:t,journal:i,volume:n,edition:s,pageStart:a,pageEnd:c,startDate:d,endDate:h,city:j,state:q,country:Y,publisher:$,description:le,year:Te,accessUrl:Cr}){await this.prisma.scientificArticle.update({where:{id:e},data:{title:r,author:t,journal:i,volume:n,edition:s,pageStart:a,pageEnd:c,startDate:d,endDate:h,city:j,state:q,country:Y,publisher:$,description:le,year:Te,accessUrl:Cr}})}async deleteById(e){await this.prisma.scientificArticle.delete({where:{id:e}})}async count({filter:{title:e,author:r,journal:t}}){let i={},n=[];return e&&n.push({title:{contains:e,mode:"insensitive"}}),r&&n.push({author:{contains:r,mode:"insensitive"}}),t&&n.push({journal:{contains:t,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.scientificArticle.count({where:i})}};function yr(){return new As(_)}function Cy(){return{createScientificArticleController:new Ps(yr())}}function Sy(){return{findScientificArticlesController:new bn(yr())}}function wy(){return{findScientificArticleByIdController:new In(yr())}}function vy(){return{updateScientificArticleController:new Cn(yr())}}function Ey(){return{deleteScientificArticleController:new Rn(yr())}}var Lt=Fw(),{authMiddleware:Gr}=H();Lt.post("/",(o,e,r)=>{Gr.isAdmin(o,e,r)},async(o,e)=>{let{createScientificArticleController:r}=Cy();await r.handle(o,e)});Lt.get("/",(o,e,r)=>{Gr.isAdmin(o,e,r)},async(o,e)=>{let{findScientificArticlesController:r}=Sy();await r.handle(o,e)});Lt.get("/:id",(o,e,r)=>{Gr.isAdmin(o,e,r)},async(o,e)=>{let{findScientificArticleByIdController:r}=wy();await r.handle(o,e)});Lt.put("/:id",(o,e,r)=>{Gr.isAdmin(o,e,r)},async(o,e)=>{let{updateScientificArticleController:r}=vy();await r.handle(o,e)});Lt.delete("/:id",(o,e,r)=>{Gr.isAdmin(o,e,r)},async(o,e)=>{let{deleteScientificArticleController:r}=Ey();await r.handle(o,e)});import{Router as Nw}from"express";import{extendZodWithOpenApi as Bw}from"@asteasolutions/zod-to-openapi";import Ye from"zod";var Uw=5,jy=1024,qw=jy*jy,Ow=Uw*qw;Bw(Ye);var kw=Ye.object({name:Ye.string().min(1,"Nome \xE9 obrigat\xF3rio."),issn:Ye.string().min(1,"ISSN \xE9 obrigat\xF3rio."),description:Ye.string().min(1,"Descri\xE7\xE3o \xE9 obrigat\xF3ria."),journalUrl:Ye.url("URL da revista deve ser v\xE1lida."),directors:Ye.string().optional(),editorialBoard:Ye.string().optional(),logo:Ye.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=Ow,"O logo deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.").optional()}),Ms=class{constructor(e,r){this.scientificJournalRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{name:t,issn:i,description:n,journalUrl:s,directors:a,editorialBoard:c,logo:d}=kw.parse({...e.body,logo:e.file}),h=await this.scientificJournalRepository.create({name:t,issn:i,description:n,journalUrl:s,directors:a,editorialBoard:c});if(d){let j=await this.firebaseStorageService.uploadFile({file:d,folder:P.SCIENTIFIC_JOURNAL,id:h.id});await this.scientificJournalRepository.update({id:h.id,logoUrl:j})}return r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var Ts=class{constructor(e){this.prisma=e}async create({name:e,issn:r,description:t,logoUrl:i,journalUrl:n,directors:s,editorialBoard:a}){return await this.prisma.scientificJournal.create({data:{name:e,issn:r,description:t,logoUrl:i,journalUrl:n,directors:s,editorialBoard:a}})}async find({pagination:{offset:e,limit:r},filter:{name:t,description:i,issn:n,directors:s,editorialBoard:a,orderBy:c}}){let d={},h=[];return t&&h.push({name:{contains:t,mode:"insensitive"}}),i&&h.push({description:{contains:i,mode:"insensitive"}}),n&&h.push({issn:{contains:n,mode:"insensitive"}}),s&&h.push({directors:{contains:s,mode:"insensitive"}}),a&&h.push({editorialBoard:{contains:a,mode:"insensitive"}}),h.length>0&&(d.OR=h),await this.prisma.scientificJournal.findMany({where:d,orderBy:{updatedAt:c},skip:e,take:r})}async findById(e){return await this.prisma.scientificJournal.findFirst({where:{id:e}})}async update({id:e,name:r,issn:t,description:i,logoUrl:n,journalUrl:s,directors:a,editorialBoard:c}){await this.prisma.scientificJournal.update({where:{id:e},data:{name:r,issn:t,description:i,logoUrl:n,journalUrl:s,directors:a,editorialBoard:c}})}async deleteById(e){await this.prisma.scientificJournal.delete({where:{id:e}})}async count({filter:{name:e,description:r,issn:t,directors:i,editorialBoard:n}}){let s={},a=[];return e&&a.push({name:{contains:e,mode:"insensitive"}}),r&&a.push({description:{contains:r,mode:"insensitive"}}),t&&a.push({issn:{contains:t,mode:"insensitive"}}),i&&a.push({directors:{contains:i,mode:"insensitive"}}),n&&a.push({editorialBoard:{contains:n,mode:"insensitive"}}),a.length>0&&(s.OR=a),await this.prisma.scientificJournal.count({where:s})}};function hr(){return new Ts(_)}function xy(){return{createScientificJournalController:new Ms(hr(),F())}}function Py(){return{findScientificJournalsController:new vn(hr())}}function Ay(){return{findScientificJournalByIdController:new wn(hr())}}function My(){return{updateScientificJournalController:new En(hr(),F())}}function Ty(){return{deleteScientificJournalController:new Sn(hr(),F())}}var _t=Nw(),{authMiddleware:Lr}=H();_t.post("/",(o,e,r)=>{Lr.isAdmin(o,e,r)},z.single("logo"),async(o,e)=>{let{createScientificJournalController:r}=xy();await r.handle(o,e)});_t.get("/",(o,e,r)=>{Lr.isAdmin(o,e,r)},async(o,e)=>{let{findScientificJournalsController:r}=Py();await r.handle(o,e)});_t.get("/:id",(o,e,r)=>{Lr.isAdmin(o,e,r)},async(o,e)=>{let{findScientificJournalByIdController:r}=Ay();await r.handle(o,e)});_t.put("/:id",(o,e,r)=>{Lr.isAdmin(o,e,r)},z.single("logo"),async(o,e)=>{let{updateScientificJournalController:r}=My();await r.handle(o,e)});_t.delete("/:id",(o,e,r)=>{Lr.isAdmin(o,e,r)},async(o,e)=>{let{deleteScientificJournalController:r}=Ty();await r.handle(o,e)});import{Router as _w}from"express";import{extendZodWithOpenApi as Gw}from"@asteasolutions/zod-to-openapi";import Ds from"zod";Gw(Ds);var Lw=Ds.object({role:Ds.string().optional(),orderBy:Ds.enum(["asc","desc"]).optional()}),Fs=class{constructor(e){this.sdhcTeamMemberRepository=e}async handle(e,r){try{let t=Lw.parse(e.query),i=await this.sdhcTeamMemberRepository.find({filter:t});r.status(200).json({members:i})}catch(t){if(t instanceof Error)throw new m(t.message)}}};var Bs=class{constructor(e){this.prisma=e}async create(e){await this.prisma.sDHCTeamMember.create({data:{...e,order:e.order??0}})}async update(e){let{id:r,...t}=e;await this.prisma.sDHCTeamMember.update({where:{id:r},data:t})}async deleteById(e){await this.prisma.sDHCTeamMember.delete({where:{id:e}})}async find({filter:{role:e,orderBy:r}}){let t={};return e&&(t.role={contains:e,mode:"insensitive"}),await this.prisma.sDHCTeamMember.findMany({where:t,include:{user:{omit:{passwordHash:!0}}},orderBy:r?[{order:"asc"},{updatedAt:r}]:[{order:"asc"},{updatedAt:"desc"}]})}async findById(e){return await this.prisma.sDHCTeamMember.findFirst({where:{id:e},include:{user:{omit:{passwordHash:!0}}}})}async count({filter:{role:e}}){let r={};return e&&(r.role={contains:e,mode:"insensitive"}),await this.prisma.sDHCTeamMember.count({where:r})}};function Rr(){return new Bs(_)}function Dy(){return{createSDHCTeamMemberController:new jn(Rr())}}function Fy(){return{findSDHCTeamMembersController:new Fs(Rr())}}function By(){return{findSDHCTeamMemberByIdController:new Pn(Rr())}}function Uy(){return{updateSDHCTeamMemberController:new Mn(Rr())}}function qy(){return{deleteSDHCTeamMemberController:new xn(Rr())}}var Wt=_w(),{authMiddleware:gp}=H();Wt.post("/",(o,e,r)=>{gp.authenticated(o,e,r)},async(o,e)=>{let{createSDHCTeamMemberController:r}=Dy();await r.handle(o,e)});Wt.get("/",async(o,e)=>{let{findSDHCTeamMembersController:r}=Fy();await r.handle(o,e)});Wt.get("/:id",async(o,e)=>{let{findSDHCTeamMemberByIdController:r}=By();await r.handle(o,e)});Wt.put("/:id",(o,e,r)=>{gp.authenticated(o,e,r)},async(o,e)=>{let{updateSDHCTeamMemberController:r}=Uy();await r.handle(o,e)});Wt.delete("/:id",(o,e,r)=>{gp.authenticated(o,e,r)},async(o,e)=>{let{deleteSDHCTeamMemberController:r}=qy();await r.handle(o,e)});import{Router as Ww}from"express";var Us=class{constructor(e){this.userRepository=e}async handle(e,r){try{let t=await this.userRepository.find();r.status(200).json(t)}catch(t){if(t instanceof Error)throw new m(t.message)}}};function Oy(){return{updateUserController:new Fn(ge(),F())}}function ky(){return{deleteUserController:new Tn(ge())}}function Ny(){return{findUsersController:new Us(ge())}}function Gy(){return{findUserController:new Dn(ge())}}var Ir=Ww(),{authMiddleware:Ly}=H();Ir.get("/:id",async(o,e)=>{let{findUserController:r}=Gy();await r.handle(o,e)});Ir.put("/",(o,e,r)=>{Ly.authenticated(o,e,r)},z.single("avatarImage"),async(o,e)=>{let{updateUserController:r}=Oy();await r.handle(o,e)});Ir.delete("/:id",(o,e,r)=>{Ly.authenticated(o,e,r)},async(o,e)=>{let{deleteUserController:r}=ky();await r.handle(o,e)});Ir.get("/",async(o,e)=>{let{findUsersController:r}=Ny();await r.handle(o,e)});import{Router as Jw}from"express";import{extendZodWithOpenApi as zw}from"@asteasolutions/zod-to-openapi";import ke from"zod";var Hw=5,_y=1024,Vw=_y*_y,Zw=Hw*Vw;zw(ke);var Kw=ke.object({title:ke.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),description:ke.string().optional(),scheduledAt:ke.coerce.date(),webinarLink:ke.url().optional(),guestIds:ke.transform(o=>typeof o=="string"?o.split(","):o).pipe(ke.array(ke.uuid())),thumbnail:ke.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=Zw,"A thumbnail deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.")}),qs=class{constructor(e,r){this.webinarRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{title:t,description:i,scheduledAt:n,webinarLink:s,guestIds:a,thumbnail:c}=Kw.parse({...e.body,thumbnail:e.file}),d=await this.webinarRepository.create({title:t,description:i,scheduledAt:n,webinarLink:s||void 0,guestIds:a}),h=await this.firebaseStorageService.uploadFile({file:c,folder:P.WEBINAR,id:d.id});return await this.webinarRepository.update({id:d.id,thumbnailUrl:h}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var Os=class{constructor(e){this.prisma=e}async create({title:e,description:r,scheduledAt:t,webinarLink:i,thumbnailUrl:n,guestIds:s}){return await this.prisma.webinar.create({data:{title:e,description:r,scheduledAt:t,webinarLink:i,thumbnailUrl:n,guests:s?{connect:s.map(a=>({id:a}))}:void 0}})}async find({pagination:{offset:e,limit:r},filter:{description:t,orderBy:i,title:n}}){let s={},a=[];return n&&a.push({title:{contains:n,mode:"insensitive"}}),t&&a.push({description:{contains:t,mode:"insensitive"}}),a.length>0&&(s.OR=a),await this.prisma.webinar.findMany({where:s,include:{guests:{omit:{passwordHash:!0}}},orderBy:{updatedAt:i},skip:e,take:r})}async findById(e){return await this.prisma.webinar.findFirst({where:{id:e},include:{guests:{omit:{passwordHash:!0}}}})}async update({id:e,title:r,description:t,scheduledAt:i,webinarLink:n,thumbnailUrl:s,guestIds:a}){await this.prisma.webinar.update({where:{id:e},data:{title:r,description:t,scheduledAt:i,webinarLink:n,thumbnailUrl:s,guests:a?{connect:a.map(c=>({id:c}))}:void 0}})}async deleteById(e){await this.prisma.webinar.delete({where:{id:e}})}async count({filter:{description:e,title:r}}){let t={},i=[];return r&&i.push({title:{contains:r,mode:"insensitive"}}),e&&i.push({description:{contains:e,mode:"insensitive"}}),i.length>0&&(t.OR=i),await this.prisma.webinar.count({where:t})}};function br(){return new Os(_)}function Wy(){return{createWebinarController:new qs(br(),F())}}function zy(){return{findWebinarsController:new qn(br())}}function Hy(){return{findWebinarByIdController:new Un(br())}}function Vy(){return{updateWebinarController:new On(br(),F())}}function Zy(){return{deleteWebinarController:new Bn(br(),F())}}var zt=Jw(),{authMiddleware:_r}=H();zt.post("/",(o,e,r)=>{_r.isAdmin(o,e,r)},z.single("thumbnail"),async(o,e)=>{let{createWebinarController:r}=Wy();await r.handle(o,e)});zt.get("/",(o,e,r)=>{_r.isAdmin(o,e,r)},async(o,e)=>{let{findWebinarsController:r}=zy();await r.handle(o,e)});zt.get("/:id",(o,e,r)=>{_r.isAdmin(o,e,r)},async(o,e)=>{let{findWebinarByIdController:r}=Hy();await r.handle(o,e)});zt.put("/:id",(o,e,r)=>{_r.isAdmin(o,e,r)},z.single("thumbnail"),async(o,e)=>{let{updateWebinarController:r}=Vy();await r.handle(o,e)});zt.delete("/:id",(o,e,r)=>{_r.isAdmin(o,e,r)},async(o,e)=>{let{deleteWebinarController:r}=Zy();await r.handle(o,e)});var X=fp(),$w={methods:["GET","POST","PUT","DELETE"],origin:["http://localhost:3000","https://rede-ct.vercel.app"],credentials:!0};X.use(Xw($w));X.use(fp.json());X.use(fp.urlencoded({extended:!1}));X.use("/docs",Yw({content:Xu,theme:"kepler"}));X.use("/",tp);X.use("/auth",ze);X.use("/user",Ir);X.use("/news",ht);X.use("/certification",At);X.use("/pendency",Ot);X.use("/researcher",It);X.use("/in-memoriam",yt);X.use("/etp",Tt);X.use("/partner",qt);X.use("/management-team",Ut);X.use("/sdhc-team-member",Wt);X.use("/legitimator-committee-member",Bt);X.use("/regiment",Rt);X.use("/meeting",we);X.use("/international-scientific-congress",ne);X.use("/regional-congress",se);X.use("/webinars",zt);X.use("/courses",Mt);X.use("/post-graduate-programs",kt);X.use("/event",Dt);X.use("/scientific-journals",_t);X.use("/book-volumes",Pt);X.use("/scientific-articles",Lt);X.use((o,e,r,t)=>{let{errorHandler:i}=yp();i.handle(o,e,r,t)});var ev=Qw.createServer(X),Ky=4e3;ev.listen(Ky,()=>{console.log(`\u{1F680} Aplica\xE7\xE3o rodando na porta ${Ky}.`)});

import FI from"node:http";import{apiReference as TI}from"@scalar/express-api-reference";import AI from"cors";import Rm from"express";import zu from"zod";var te=class extends Error{};var $=class extends Error{};var a=class extends Error{};var l=class extends Error{};var me=class extends Error{};import{ZodError as Hu}from"zod";var sr=class extends Hu{};var ar=class{handle(e,r,t,i){return e instanceof sr?t.status(400).json({message:"Validation error",error:zu.treeifyError(e)}):e instanceof te?t.status(400).json({message:e.message}):e instanceof l?t.status(404).json({message:e.message}):e instanceof me?t.status(401).json({message:e.message}):e instanceof $?t.status(409).json({message:e.message}):e instanceof a?t.status(500).json({message:e.message}):t.status(500).json({message:"Internal server error"})}};function Im(){return{errorHandler:new ar}}import{OpenAPIRegistry as pR,OpenApiGeneratorV3 as dR}from"@asteasolutions/zod-to-openapi";import{$Enums as Cm}from"@prisma/client";import h from"zod";import{extendZodWithOpenApi as Zu}from"@asteasolutions/zod-to-openapi";import Je from"zod";var Vu=1,Ku=6;Zu(Je);var wn=Je.object({page:Je.coerce.number().min(1).default(Vu),limit:Je.coerce.number().min(1).default(Ku),title:Je.string().optional(),description:Je.string().optional(),orderBy:Je.enum(["asc","desc"]).default("desc")}),mr=class{constructor(e){this.certificationRepository=e}async handle(e,r){try{let{title:t,description:i,limit:n,orderBy:s,page:m}=wn.parse(e.query),c=m*n-n,u=e.user.id,[E,B]=await Promise.all([this.certificationRepository.findByUserId({userId:u,pagination:{offset:c,limit:n},filter:{title:t,description:i,orderBy:s}}),this.certificationRepository.count({filter:{title:t,description:i,userId:u}})]),H=Math.max(Math.ceil(B/n),1);return r.status(200).json({page:m,totalPages:H,offset:c,limit:n,totalCertifications:B,certifications:E})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Yu}from"@asteasolutions/zod-to-openapi";import Qe from"zod";var Xu=1,$u=7;Yu(Qe);var Sn=Qe.object({page:Qe.coerce.number().min(1).default(Xu),limit:Qe.coerce.number().min(1).default($u),title:Qe.string().optional(),content:Qe.string().optional(),orderBy:Qe.enum(["asc","desc"]).default("desc")}),cr=class{constructor(e){this.newsRepository=e}async handle(e,r){try{let{page:t,limit:i,content:n,orderBy:s,title:m}=Sn.parse(e.query),c=i*t-i,u=e.user.id,[E,B]=await Promise.all([this.newsRepository.findByAuthorId({authorId:u,pagination:{offset:c,limit:i},filter:{orderBy:s,title:m,content:n}}),this.newsRepository.count({filter:{authorId:u,content:n,title:m}})]),H=Math.ceil(B/i);r.status(200).json({page:t,totalPages:H,offset:c,limit:i,news:E})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Ju}from"@asteasolutions/zod-to-openapi";import{PendencyStatus as Qu}from"@prisma/client";import Fe from"zod";var eg=1,tg=6;Ju(Fe);var vn=Fe.object({page:Fe.coerce.number().min(1).default(eg),limit:Fe.coerce.number().min(1).default(tg),title:Fe.string().optional(),description:Fe.string().optional(),status:Fe.enum(Qu).default("PENDING"),orderBy:Fe.enum(["asc","desc"]).default("desc")}),pr=class{constructor(e){this.pendencyRepository=e}async handle(e,r){try{let{limit:t,page:i,...n}=vn.parse(e.query),s=i*t-t,m=e.user.id,[c,u]=await Promise.all([this.pendencyRepository.findByUserId({userId:m,pagination:{offset:s,limit:t},filter:n}),this.pendencyRepository.count({filter:{...n,userId:m}})]),E=Math.max(Math.ceil(u/t),1);return r.status(200).json({page:i,totalPages:E,offset:s,limit:t,pendencies:c})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as rg}from"@asteasolutions/zod-to-openapi";import dr from"zod";rg(dr);var jn=dr.object({password:dr.string(),email:dr.email()}),lr=class{constructor(e,r,t){this.userRepository=e;this.bcrypt=r;this.jwtService=t}async handle(e,r){try{let{email:t,password:i}=jn.parse(e.body),n=await this.userRepository.findByEmail(t);if(!n)return r.status(401).json({message:"Usu\xE1rio n\xE3o existe."});if(!await this.bcrypt.compare({password:i,hashedPassword:n.passwordHash}))throw new me("Senha inv\xE1lida.");let{id:m,role:c}=n,u=this.jwtService.sign({id:m,role:c,email:t});return r.status(200).json({token:u})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as og}from"@asteasolutions/zod-to-openapi";import Rt from"zod";var ur=8;og(Rt);var En=Rt.object({name:Rt.string("Nome \xE9 obrigat\xF3rio.").min(1,"Nome \xE9 obrigat\xF3rio."),emailAddress:Rt.email("E-mail inv\xE1lido.").min(1,"E-mail \xE9 obrigat\xF3rio."),password:Rt.string("A senha \xE9 obrigat\xF3ria.").min(ur,`A senha deve ter pelo menos ${ur} caracteres.`),confirmPassword:Rt.string("A senha \xE9 obrigat\xF3ria.").min(ur,`A senha deve ter pelo menos ${ur} caracteres.`)}).refine(o=>o.password===o.confirmPassword,{message:"As senhas n\xE3o coincidem.",path:["confirmPassword"]}),gr=class{constructor(e,r){this.userRepository=e;this.bcrypt=r}async handle(e,r){try{let{emailAddress:t,name:i,password:n}=En.parse(e.body);if(await this.userRepository.findByEmail(t))throw new $("Usu\xE1rio j\xE1 existe.");let m=await this.bcrypt.hash(n);return await this.userRepository.create({name:i,emailAddress:t,passwordHash:m}),r.status(201).json()}catch(t){if(t instanceof Error)throw new a(t.message)}}};var bm={method:"post",path:"/auth/sign-up",tags:["Authentication"],summary:"Create a new user",request:{body:{content:{"application/json":{schema:En}}}},responses:{201:{description:"User created successfully",summary:"User Registration Successful",content:{"application/json":{schema:h.object({message:h.string()})}}},400:{description:"Invalid input data provided",summary:"Validation Error",content:{"application/json":{schema:h.object({errors:h.record(h.string(),h.string())})}}},409:{description:"User already exists with this email",summary:"User Already Exists",content:{"application/json":{schema:h.object({message:h.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:h.object({message:h.string()})}}}}},wm={method:"post",path:"/auth/sign-in",tags:["Authentication"],summary:"Sign in",request:{body:{content:{"application/json":{schema:jn}}}},responses:{200:{description:"Authentication successful, JWT token returned",summary:"Login Successful",content:{"application/json":{schema:h.object({token:h.string()})}}},400:{description:"Invalid credentials or input data",summary:"Validation Error",content:{"application/json":{schema:h.object({errors:h.record(h.string(),h.string())})}}},401:{description:"Invalid email or password",summary:"Authentication Failed",content:{"application/json":{schema:h.object({message:h.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:h.object({message:h.string()})}}}}},Sm={method:"get",path:"/auth/user",tags:["Authentication"],summary:"Search for authenticated user",security:[{bearerAuth:[]}],responses:{200:{description:"Authenticated user information retrieved successfully",summary:"User Information Retrieved",content:{"application/json":{schema:h.object({name:h.string(),id:h.string(),avatarUrl:h.string().nullable(),createdAt:h.date(),updatedAt:h.date(),emailAddress:h.string(),orcid:h.string().nullable(),phone:h.string().nullable(),lattesUrl:h.string().nullable(),role:h.enum(Cm.UserRole)}).nullable()}}},400:{description:"Invalid request parameters",summary:"Validation Error",content:{"application/json":{schema:h.object({errors:h.record(h.string(),h.string())})}}},404:{description:"User not found or not authenticated",summary:"User Not Found",content:{"application/json":{schema:h.object({message:h.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:h.object({message:h.string()})}}}}},vm={method:"get",path:"/auth/user/news",tags:["Authentication"],summary:"List authenticated user news",security:[{bearerAuth:[]}],request:{query:Sn},responses:{200:{description:"Paginated list of authenticated user news retrieved successfully",summary:"User News Retrieved",content:{"application/json":{schema:h.object({page:h.number(),totalPages:h.number(),offset:h.number(),limit:h.number(),news:h.object({content:h.string(),id:h.string(),title:h.string(),createdAt:h.date(),updatedAt:h.date(),imageUrl:h.string().nullable()})})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:h.object({errors:h.record(h.string(),h.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:h.object({message:h.string()})}}}}},jm={method:"get",path:"/auth/admin",tags:["Authentication"],summary:"Verify admin access",security:[{bearerAuth:[]}],responses:{200:{description:"Admin access verified successfully",summary:"Admin Access Granted",content:{"application/json":{schema:h.object({success:h.boolean()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:h.object({message:h.string()})}}}}},Em={method:"get",path:"/auth/certifications",tags:["Authentication"],summary:"List all authenticated user's certifications",security:[{bearerAuth:[]}],request:{query:wn},responses:{200:{description:"Paginated list of authenticated user certifications retrieved successfully",summary:"User Certifications Retrieved",content:{"application/json":{schema:h.object({page:h.number(),totalPages:h.number(),offset:h.number(),limit:h.number(),certifications:h.object({description:h.string(),id:h.string(),title:h.string(),certificationUrl:h.string(),createdAt:h.date(),updatedAt:h.date(),userId:h.string()})})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:h.object({errors:h.record(h.string(),h.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:h.object({message:h.string()})}}}}},xm={method:"get",path:"/auth/pendencies",tags:["Authentication"],summary:"List all authenticated user's pendencies",security:[{bearerAuth:[]}],request:{query:vn},responses:{200:{description:"Paginated list of authenticated user pendencies retrieved successfully",summary:"User Pendencies Retrieved",content:{"application/json":{schema:h.object({page:h.number(),totalPages:h.number(),offset:h.number(),limit:h.number(),pendencies:h.object({id:h.string(),title:h.string(),description:h.string(),status:h.enum(Cm.PendencyStatus),createdAt:h.date(),updatedAt:h.date(),userId:h.string()})})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:h.object({errors:h.record(h.string(),h.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:h.object({message:h.string()})}}}}};import{$Enums as dg}from"@prisma/client";import w from"zod";import{extendZodWithOpenApi as ig}from"@asteasolutions/zod-to-openapi";import xn from"zod";ig(xn);var Mn=xn.object({id:xn.string()}),yr=class{constructor(e,r){this.certificationRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=Mn.parse({id:e.params.certification_id}),i=await this.certificationRepository.findById(t);if(!i)throw new l("A certifica\xE7\xE3o n\xE3o existe.");return await Promise.all([this.certificationRepository.deleteById(i.id),this.firebaseStorageService.deleteFile({fileUrl:i.certificationUrl})]),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as ng}from"@asteasolutions/zod-to-openapi";import Pn from"zod";ng(Pn);var Tn=Pn.object({certificationId:Pn.uuid()}),fr=class{constructor(e){this.certificationRepository=e}async handle(e,r){try{let{certificationId:t}=Tn.parse({certificationId:e.params.certification_id}),i=await this.certificationRepository.findById(t);if(!i)throw new l("Certificado n\xE3o encontrado.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as sg}from"@asteasolutions/zod-to-openapi";import Ue from"zod";var ag=1,mg=6;sg(Ue);var An=Ue.object({page:Ue.coerce.number().min(1).default(ag),limit:Ue.coerce.number().min(1).default(mg),title:Ue.string().optional(),description:Ue.string().optional(),userId:Ue.uuid().optional(),orderBy:Ue.enum(["asc","desc"]).default("desc")}),hr=class{constructor(e){this.certificationRepository=e}async handle(e,r){try{let{limit:t,page:i,...n}=An.parse(e.query),s=i*t-t,[m,c]=await Promise.all([this.certificationRepository.find({pagination:{offset:s,limit:t},filter:n}),this.certificationRepository.count({filter:n})]),u=Math.max(Math.ceil(c/t),1);return r.status(200).json({page:i,totalPages:u,offset:s,limit:t,certifications:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as cg}from"@asteasolutions/zod-to-openapi";import It from"zod";var F={NEWS:"images/news",USER:"images/user",IN_MEMORIAM:"images/in-memoriam",PARTNER:"images/partners",CERTIFICATION:"documents/certifications",PENDENCY:"documents/pendencies",REGIMENT:"documents/regiments",MEETING_MINUTE:"documents/meeting-minutes",INTERNATIONAL_SCIENTIFIC_CONGRESS_GALLERY:"images/international-scientific-congress-gallery",GALLERY:"images/regional-congress-gallery",REGIONAL_CONGRESS_GALLERY:"images/regional-congress-gallery",WEBINAR:"images/webinars",COURSE:"images/courses"};cg(It);var Ir=It.object({userId:It.uuid(),title:It.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),description:It.string().min(1,"Descri\xE7\xE3o \xE9 obrigat\xF3ria."),certification:It.any().refine(o=>o&&typeof o=="object"&&o.size>0,"Arquivo do certificado \xE9 obrigat\xF3rio")}),Rr=class{constructor(e,r,t){this.userRepository=e;this.certificationRepository=r;this.firebaseStorageService=t}async handle(e,r){try{let{userId:t,title:i,description:n,certification:s}=Ir.parse({...e.body,userId:e.params.user_id,certification:e.file});if(!await this.userRepository.findById(t))throw new te("O usu\xE1rio n\xE3o existe.");let c=await this.firebaseStorageService.uploadFile({file:s,id:t,folder:F.CERTIFICATION});return await this.certificationRepository.register({userId:t,title:i,description:n,certificationUrl:c}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as pg}from"@asteasolutions/zod-to-openapi";import Ct from"zod";pg(Ct);var br=Ct.object({id:Ct.uuid(),title:Ct.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),description:Ct.string().min(1,"Descri\xE7\xE3o \xE9 obrigat\xF3ria."),certification:Ct.any().refine(o=>o==null||typeof o=="object"&&typeof o.size=="number"&&(o.size===0||o.size>0),"Arquivo do certificado \xE9 inv\xE1lido").optional()}),Cr=class{constructor(e,r){this.certificationRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{certification:t,id:i,...n}=br.parse({...e.body,id:e.params.certification_id,certification:e.file}),s=await this.certificationRepository.findById(i);if(!s)throw new te("A certifica\xE7\xE3o n\xE3o existe");let m=s.certificationUrl;return t&&t.size>0&&(m=await this.firebaseStorageService.updateFile({file:t,id:s.userId,folder:F.CERTIFICATION,fileUrl:s.certificationUrl})),await this.certificationRepository.update({...n,id:i,certificationUrl:m}),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Mm={method:"post",path:"/certifications/{user_id}",tags:["Certifications"],summary:"Register certification for user",security:[{bearerAuth:[]}],request:{params:Ir.pick({userId:!0}).transform(()=>({user_id:""})),body:{content:{"multipart/form-data":{schema:Ir.omit({userId:!0})}}}},responses:{201:{description:"Certification registered successfully for the user",summary:"Certification Registered",content:{"application/json":{schema:w.object({message:w.string()})}}},400:{description:"Invalid input data or file format",summary:"Validation Error",content:{"application/json":{schema:w.object({errors:w.record(w.string(),w.string())})}}},404:{description:"User not found with the provided ID",summary:"User Not Found",content:{"application/json":{schema:w.object({message:w.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:w.object({message:w.string()})}}}}},Pm={method:"get",path:"/certifications",tags:["Certifications"],summary:"List certifications",security:[{bearerAuth:[]}],request:{query:An},responses:{200:{description:"Paginated list of certifications with user information retrieved successfully",summary:"Certifications Retrieved",content:{"application/json":{schema:w.object({page:w.number(),totalPages:w.number(),offset:w.number(),limit:w.number(),certifications:w.array(w.object({description:w.string(),userId:w.string(),title:w.string(),id:w.string(),createdAt:w.date(),updatedAt:w.date(),certificationUrl:w.url(),user:w.object({id:w.uuid(),name:w.string(),createdAt:w.date(),updatedAt:w.date(),avatarUrl:w.string().nullable(),emailAddress:w.email(),orcid:w.string().nullable(),phone:w.string().nullable(),lattesUrl:w.url().nullable(),role:w.enum(dg.UserRole)})}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:w.object({errors:w.record(w.string(),w.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:w.object({message:w.string()})}}}}},Tm={method:"get",path:"/certifications/{certification_id}",tags:["Certifications"],summary:"Find certification by ID",security:[{bearerAuth:[]}],request:{params:Tn},responses:{200:{description:"Certification details retrieved successfully",summary:"Certification Retrieved",content:{"application/json":{schema:w.object({description:w.string(),userId:w.string(),title:w.string(),id:w.string(),createdAt:w.date(),updatedAt:w.date(),certificationUrl:w.url()}).nullable()}}},400:{description:"Invalid certification ID format",summary:"Validation Error",content:{"application/json":{schema:w.object({errors:w.record(w.string(),w.string())})}}},404:{description:"Certification not found with the provided ID",summary:"Certification Not Found",content:{"application/json":{schema:w.object({message:w.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:w.object({message:w.string()})}}}}},Am={method:"put",path:"/certifications/{certification_id}",tags:["Certifications"],summary:"Update certification",security:[{bearerAuth:[]}],request:{params:br.pick({id:!0}).transform(()=>({certification_id:""})),body:{content:{"multipart/form-data":{schema:br.omit({id:!0})}}}},responses:{204:{description:"Certification updated successfully",summary:"Certification Updated"},400:{description:"Invalid input data or file format",summary:"Validation Error",content:{"application/json":{schema:w.object({errors:w.record(w.string(),w.string())})}}},404:{description:"Certification not found with the provided ID",summary:"Certification Not Found",content:{"application/json":{schema:w.object({message:w.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:w.object({message:w.string()})}}}}},Dm={method:"delete",path:"/certifications/{certification_id}",tags:["Certifications"],summary:"Delete certification",security:[{bearerAuth:[]}],request:{params:Mn},responses:{204:{description:"Certification deleted successfully",summary:"Certification Deleted"},400:{description:"Invalid certification ID format",summary:"Validation Error",content:{"application/json":{schema:w.object({errors:w.record(w.string(),w.string())})}}},404:{description:"Certification not found with the provided ID",summary:"Certification Not Found",content:{"application/json":{schema:w.object({message:w.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:w.object({message:w.string()})}}}}};import f from"zod";import{extendZodWithOpenApi as lg}from"@asteasolutions/zod-to-openapi";import Dn from"zod";lg(Dn);var Fn=Dn.object({id:Dn.uuid()}),wr=class{constructor(e,r){this.courseRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=Fn.parse({id:e.params.id}),i=await this.courseRepository.findById(t);if(!i)throw new l("O curso n\xE3o existe.");return i.imageUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.imageUrl}),await this.courseRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as ug}from"@asteasolutions/zod-to-openapi";import Un from"zod";ug(Un);var qn=Un.object({id:Un.uuid()}),Sr=class{constructor(e){this.courseRepository=e}async handle(e,r){try{let{id:t}=qn.parse({id:e.params.id}),i=await this.courseRepository.findById(t);if(!i)throw new l("Curso n\xE3o encontrado.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as gg}from"@asteasolutions/zod-to-openapi";import qe from"zod";var yg=1,fg=6;gg(qe);var Bn=qe.object({page:qe.coerce.number().min(1).default(yg),limit:qe.coerce.number().min(1).default(fg),title:qe.string().optional(),description:qe.string().optional(),coordinator:qe.string().optional(),orderBy:qe.enum(["asc","desc"]).default("desc")}),vr=class{constructor(e){this.courseRepository=e}async handle(e,r){try{let{limit:t,page:i,...n}=Bn.parse(e.query),s=i*t-t,[m,c]=await Promise.all([this.courseRepository.find({pagination:{offset:s,limit:t},filter:n}),this.courseRepository.count({filter:n})]),u=Math.max(Math.ceil(c/t),1);return r.status(200).json({page:i,totalPages:u,offset:s,limit:t,courses:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as hg}from"@asteasolutions/zod-to-openapi";import re from"zod";var Um=5,Fm=1024,Rg=Fm*Fm,Ig=Um*Rg;hg(re);var On=re.object({id:re.uuid(),title:re.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio.").optional(),coordinatorId:re.string().uuid("Coordenador \xE9 obrigat\xF3rio.").optional(),email:re.string().email("E-mail deve ser v\xE1lido.").optional(),location:re.string().min(1,"Localiza\xE7\xE3o \xE9 obrigat\xF3ria.").optional(),scheduledAt:re.coerce.date().optional(),registrationLink:re.url("URL de inscri\xE7\xE3o deve ser v\xE1lida").optional(),description:re.string().optional(),instructorIds:re.transform(o=>typeof o=="string"?o.split(","):o).pipe(re.array(re.uuid())).optional(),image:re.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=Ig,`A imagem deve ter no m\xE1ximo ${Um}MB.`).optional()}),jr=class{constructor(e,r){this.courseRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,image:i,title:n,coordinatorId:s,email:m,location:c,scheduledAt:u,registrationLink:E,description:B,instructorIds:H}=On.parse({id:e.params.id,...e.body,image:e.file}),K=await this.courseRepository.findById(t);if(!K)throw new l("O curso n\xE3o existe.");let ie=K.imageUrl;if(i&&(ie=await this.firebaseStorageService.uploadFile({file:i,id:t,folder:F.COURSE})),!ie)throw new a("URL da imagem \xE9 obrigat\xF3rio");return await this.courseRepository.update({id:t,title:n,coordinatorId:s,email:m,location:c,scheduledAt:u,registrationLink:E,description:B,imageUrl:ie,instructorIds:H}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var qm={method:"post",path:"/courses",tags:["Courses"],summary:"Create course",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:f.object({title:f.string().min(1).openapi({description:"T\xEDtulo do curso"}),coordinator:f.string().min(1).openapi({description:"Nome do coordenador"}),email:f.string().email().openapi({description:"E-mail de contato"}),location:f.string().min(1).openapi({description:"Localiza\xE7\xE3o do curso"}),scheduledAt:f.string().openapi({description:"Data e hora agendada (ISO 8601)",example:"2024-01-01T10:00:00Z"}),registrationLink:f.string().url().optional().openapi({description:"Link de inscri\xE7\xE3o"}),description:f.string().optional().openapi({description:"Descri\xE7\xE3o do curso"}),instructorIds:f.string().openapi({description:"IDs dos instrutores separados por v\xEDrgula",example:"uuid1,uuid2,uuid3"}),image:f.string().optional().openapi({description:"Imagem do curso (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{201:{description:"Course created successfully",summary:"Course Created"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:f.object({errors:f.record(f.string(),f.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:f.object({message:f.string()})}}}}},Bm={method:"get",path:"/courses",tags:["Courses"],summary:"List courses",security:[{bearerAuth:[]}],request:{query:Bn},responses:{200:{description:"Paginated list of courses with instructor information retrieved successfully",summary:"Courses Retrieved",content:{"application/json":{schema:f.object({page:f.number(),totalPages:f.number(),offset:f.number(),limit:f.number(),courses:f.array(f.object({id:f.string(),title:f.string(),imageUrl:f.string().nullable(),coordinator:f.string(),email:f.string(),scheduledAt:f.date(),location:f.string(),registrationLink:f.string().nullable(),description:f.string().nullable(),createdAt:f.date(),updatedAt:f.date(),instructors:f.array(f.object({id:f.uuid(),name:f.string(),emailAddress:f.email(),avatarUrl:f.string().nullable(),createdAt:f.date(),updatedAt:f.date()}))}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:f.object({errors:f.record(f.string(),f.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:f.object({message:f.string()})}}}}},Om={method:"get",path:"/courses/{id}",tags:["Courses"],summary:"Find course by ID",security:[{bearerAuth:[]}],request:{params:qn},responses:{200:{description:"Course details retrieved successfully",summary:"Course Retrieved",content:{"application/json":{schema:f.object({id:f.string(),title:f.string(),imageUrl:f.string().nullable(),coordinator:f.string(),email:f.string(),scheduledAt:f.date(),location:f.string(),registrationLink:f.string().nullable(),description:f.string().nullable(),createdAt:f.date(),updatedAt:f.date(),instructors:f.array(f.object({id:f.uuid(),name:f.string(),emailAddress:f.email(),avatarUrl:f.string().nullable(),createdAt:f.date(),updatedAt:f.date()}))}).nullable()}}},400:{description:"Invalid course ID format",summary:"Validation Error",content:{"application/json":{schema:f.object({errors:f.record(f.string(),f.string())})}}},404:{description:"Course not found with the provided ID",summary:"Course Not Found",content:{"application/json":{schema:f.object({message:f.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:f.object({message:f.string()})}}}}},Nm={method:"put",path:"/courses/{id}",tags:["Courses"],summary:"Update course",security:[{bearerAuth:[]}],request:{params:On.pick({id:!0}),body:{content:{"multipart/form-data":{schema:f.object({title:f.string().min(1).optional().openapi({description:"T\xEDtulo do curso"}),coordinator:f.string().min(1).optional().openapi({description:"Nome do coordenador"}),email:f.string().email().optional().openapi({description:"E-mail de contato"}),location:f.string().min(1).optional().openapi({description:"Localiza\xE7\xE3o do curso"}),scheduledAt:f.string().optional().openapi({description:"Data e hora agendada (ISO 8601)",example:"2024-01-01T10:00:00Z"}),registrationLink:f.string().url().optional().openapi({description:"Link de inscri\xE7\xE3o"}),description:f.string().optional().openapi({description:"Descri\xE7\xE3o do curso"}),instructorIds:f.string().optional().openapi({description:"IDs dos instrutores separados por v\xEDrgula",example:"uuid1,uuid2,uuid3"}),image:f.string().optional().openapi({description:"Imagem do curso (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{200:{description:"Course updated successfully",summary:"Course Updated"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:f.object({errors:f.record(f.string(),f.string())})}}},404:{description:"Course not found with the provided ID",summary:"Course Not Found",content:{"application/json":{schema:f.object({message:f.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:f.object({message:f.string()})}}}}},km={method:"delete",path:"/courses/{id}",tags:["Courses"],summary:"Delete course",security:[{bearerAuth:[]}],request:{params:Fn},responses:{200:{description:"Course deleted successfully",summary:"Course Deleted"},400:{description:"Invalid course ID format",summary:"Validation Error",content:{"application/json":{schema:f.object({errors:f.record(f.string(),f.string())})}}},404:{description:"Course not found with the provided ID",summary:"Course Not Found",content:{"application/json":{schema:f.object({message:f.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:f.object({message:f.string()})}}}}};import{$Enums as Wn}from"@prisma/client";import I from"zod";import{extendZodWithOpenApi as Cg}from"@asteasolutions/zod-to-openapi";import ue from"zod";Cg(ue);var Nn=ue.object({code:ue.string(),title:ue.string(),description:ue.string().optional(),notes:ue.string().optional(),leaderId:ue.uuid(),deputyLeaderId:ue.uuid(),secretaryId:ue.uuid(),memberIds:ue.array(ue.uuid())}),Er=class{constructor(e){this.etpRepository=e}async handle(e,r){try{let{code:t,title:i,description:n,notes:s,leaderId:m,deputyLeaderId:c,secretaryId:u,memberIds:E}=Nn.parse(e.body);if(await this.etpRepository.findByCode(t))throw new $("J\xE1 existe um ETP cadastrado com este c\xF3digo.");return await this.etpRepository.create({code:t,title:i,description:n,notes:s,leaderId:m,deputyLeaderId:c,secretaryId:u,memberIds:E}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as bg}from"@asteasolutions/zod-to-openapi";import kn from"zod";bg(kn);var Ln=kn.object({id:kn.uuid()}),xr=class{constructor(e){this.etpRepository=e}async handle(e,r){try{let{id:t}=Ln.parse({id:e.params.id});if(!await this.etpRepository.findById(t))throw new l("O ETP n\xE3o existe.");return await this.etpRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as wg}from"@asteasolutions/zod-to-openapi";import Gn from"zod";wg(Gn);var Pr=Gn.object({id:Gn.uuid()}),Mr=class{constructor(e){this.etpRepository=e}async handle(e,r){try{let{id:t}=Pr.parse({id:e.params.id}),i=await this.etpRepository.findById(t);if(!i)throw new l("O ETP n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Sg}from"@asteasolutions/zod-to-openapi";import ce from"zod";Sg(ce);var _n=ce.object({id:ce.uuid(),code:ce.string().optional(),title:ce.string().optional(),description:ce.string().optional(),notes:ce.string().optional(),leaderId:ce.uuid().optional(),deputyLeaderId:ce.uuid().optional(),secretaryId:ce.uuid().optional(),memberIds:ce.array(ce.uuid()).optional()}),Tr=class{constructor(e){this.etpRepository=e}async handle(e,r){try{let{id:t,code:i,title:n,description:s,notes:m,leaderId:c,deputyLeaderId:u,secretaryId:E,memberIds:B}=_n.parse({id:e.params.id,...e.body});if(!await this.etpRepository.findById(t))throw new l("O ETP n\xE3o existe.");if(i){let K=await this.etpRepository.findByCode(i);if(K&&K.id!==t)throw new $("J\xE1 existe um ETP com este c\xF3digo.")}return await this.etpRepository.update({id:t,code:i,title:n,description:s,notes:m,leaderId:c,deputyLeaderId:u,secretaryId:E,memberIds:B}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var vg=1,jg=9,Ar=I.object({id:I.uuid(),registrationNumber:I.string(),mainEtps:I.string().nullable(),formations:I.string().nullable(),degrees:I.array(I.enum(Wn.Degree)),occupations:I.string(),seniority:I.enum(Wn.Seniority),institutions:I.string(),biography:I.string().nullable(),createdAt:I.date(),updatedAt:I.date(),user:I.object({id:I.uuid(),name:I.string(),emailAddress:I.string(),avatarUrl:I.string().nullable(),orcid:I.string().nullable(),phone:I.string().nullable(),lattesUrl:I.string().nullable(),role:I.enum(Wn.UserRole)})}),Lm=I.object({id:I.uuid(),code:I.string(),title:I.string(),description:I.string().nullable(),notes:I.string().nullable(),createdAt:I.date(),updatedAt:I.date(),leader:I.object({id:I.uuid(),researcher:Ar}).nullable(),deputyLeader:I.object({id:I.uuid(),researcher:Ar}).nullable(),secretary:I.object({id:I.uuid(),researcher:Ar}).nullable(),members:I.array(Ar)}),Gm={method:"post",path:"/etp",tags:["ETPs"],summary:"Create a new ETP with single leader, deputy leader, secretary and multiple members",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:Nn}}}},responses:{201:{description:"ETP created successfully",summary:"ETP Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:I.object({errors:I.record(I.string(),I.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:I.object({message:I.string()})}}},409:{description:"ETP with this code already exists",summary:"Conflict",content:{"application/json":{schema:I.object({message:I.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:I.object({message:I.string()})}}}}},_m={method:"get",path:"/etp",tags:["ETPs"],summary:"List all ETPs with pagination and filters",request:{query:I.object({page:I.coerce.number().min(1).default(vg).optional(),limit:I.coerce.number().min(1).default(jg).optional(),code:I.string().optional(),title:I.string().optional(),description:I.string().optional(),notes:I.string().optional(),orderBy:I.enum(["asc","desc"]).optional()})},responses:{200:{description:"List of ETPs retrieved successfully with pagination",summary:"ETPs Retrieved",content:{"application/json":{schema:I.object({page:I.number(),totalPages:I.number(),offset:I.number(),limit:I.number(),etps:I.array(Lm)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:I.object({message:I.string()})}}}}},Wm={method:"get",path:"/etp/{id}",tags:["ETPs"],summary:"Find ETP by ID",request:{params:Pr},responses:{200:{description:"ETP details retrieved successfully",summary:"ETP Retrieved",content:{"application/json":{schema:Lm}}},400:{description:"Invalid ETP ID format",summary:"Validation Error",content:{"application/json":{schema:I.object({errors:I.record(I.string(),I.string())})}}},404:{description:"ETP not found with the provided ID",summary:"ETP Not Found",content:{"application/json":{schema:I.object({message:I.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:I.object({message:I.string()})}}}}},Hm={method:"put",path:"/etp/{id}",tags:["ETPs"],summary:"Update ETP and manage user relationships (single leader, deputy leader, secretary, multiple members)",security:[{bearerAuth:[]}],request:{params:Pr,body:{content:{"application/json":{schema:_n.omit({id:!0})}}}},responses:{200:{description:"ETP updated successfully",summary:"ETP Updated"},400:{description:"Invalid input data or ETP ID format",summary:"Validation Error",content:{"application/json":{schema:I.object({errors:I.record(I.string(),I.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:I.object({message:I.string()})}}},404:{description:"ETP not found with the provided ID",summary:"ETP Not Found",content:{"application/json":{schema:I.object({message:I.string()})}}},409:{description:"ETP with this code already exists",summary:"Conflict",content:{"application/json":{schema:I.object({message:I.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:I.object({message:I.string()})}}}}},zm={method:"delete",path:"/etp/{id}",tags:["ETPs"],summary:"Delete ETP",security:[{bearerAuth:[]}],request:{params:Ln},responses:{200:{description:"ETP deleted successfully",summary:"ETP Deleted"},400:{description:"Invalid ETP ID format",summary:"Validation Error",content:{"application/json":{schema:I.object({errors:I.record(I.string(),I.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:I.object({message:I.string()})}}},404:{description:"ETP not found with the provided ID",summary:"ETP Not Found",content:{"application/json":{schema:I.object({message:I.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:I.object({message:I.string()})}}}}};import{InMemoriamRole as _g}from"@prisma/client";import v from"zod";import{extendZodWithOpenApi as Eg}from"@asteasolutions/zod-to-openapi";import{InMemoriamRole as xg}from"@prisma/client";import Be from"zod";var Vm=2,Zm=1024,Mg=Zm*Zm,Pg=Vm*Mg;Eg(Be);var Hn=Be.object({name:Be.string().min(1,"Nome \xE9 obrigat\xF3rio"),birthDate:Be.coerce.date(),deathDate:Be.coerce.date(),biography:Be.string().optional(),photo:Be.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=Pg,`A imagem deve ter no m\xE1ximo ${Vm}MB.`).optional(),role:Be.enum(xg)}).refine(o=>o.deathDate>o.birthDate,{message:"Data de falecimento deve ser posterior \xE0 data de nascimento",path:["deathDate"]}),Dr=class{constructor(e,r){this.inMemoriamRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{name:t,birthDate:i,deathDate:n,biography:s,role:m,photo:c}=Hn.parse({...e.body,photo:e.file}),u=await this.inMemoriamRepository.create({name:t,birthDate:i,deathDate:n,biography:s??void 0,role:m}),E;return c&&(E=await this.firebaseStorageService.uploadFile({file:c,id:u.id,folder:F.IN_MEMORIAM}),await this.inMemoriamRepository.update({id:u.id,photoUrl:E})),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Tg}from"@asteasolutions/zod-to-openapi";import zn from"zod";Tg(zn);var Zn=zn.object({id:zn.uuid()}),Fr=class{constructor(e,r){this.inMemoriamRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=Zn.parse({id:e.params.id}),i=await this.inMemoriamRepository.findById(t);if(!i)throw new l("O in memoriam n\xE3o existe.");return i.photoUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.photoUrl}),await this.inMemoriamRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Ag}from"@asteasolutions/zod-to-openapi";import Vn from"zod";Ag(Vn);var qr=Vn.object({id:Vn.uuid()}),Ur=class{constructor(e){this.inMemoriamRepository=e}async handle(e,r){try{let{id:t}=qr.parse({id:e.params.id}),i=await this.inMemoriamRepository.findById(t);if(!i)throw new l("O in memoriam n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Dg}from"@asteasolutions/zod-to-openapi";import{InMemoriamRole as Fg}from"@prisma/client";import Kn from"zod";Dg(Kn);var Yn=Kn.object({role:Kn.enum(Fg)}),Br=class{constructor(e){this.inMemoriamRepository=e}async handle(e,r){try{let{role:t}=Yn.parse({role:e.params.role}),i=await this.inMemoriamRepository.findByRole(t);return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Ug}from"@asteasolutions/zod-to-openapi";import{InMemoriamRole as qg}from"@prisma/client";import Oe from"zod";var Bg=1,Og=9;Ug(Oe);var Xn=Oe.object({page:Oe.coerce.number().min(1).default(Bg),limit:Oe.coerce.number().min(1).default(Og),name:Oe.string().optional(),biography:Oe.string().optional(),role:Oe.enum(qg).optional(),orderBy:Oe.enum(["asc","desc"]).default("desc")}),Or=class{constructor(e){this.inMemoriamRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=Xn.parse(e.query),s=i*t-i,[m,c]=await Promise.all([this.inMemoriamRepository.find({pagination:{offset:s,limit:i},filter:n}),this.inMemoriamRepository.count({filter:n})]),u=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:u,offset:s,limit:i,inMemoriam:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Ng}from"@asteasolutions/zod-to-openapi";import{InMemoriamRole as kg}from"@prisma/client";import Se from"zod";var Ym=2,Km=1024,Lg=Km*Km,Gg=Ym*Lg;Ng(Se);var $n=Se.object({id:Se.uuid(),name:Se.string().min(1,"Nome \xE9 obrigat\xF3rio").optional(),birthDate:Se.coerce.date().optional(),deathDate:Se.coerce.date().optional(),biography:Se.string().optional(),photo:Se.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=Gg,`A imagem deve ter no m\xE1ximo ${Ym}MB.`).optional(),role:Se.enum(kg).optional()}).refine(o=>o.birthDate&&o.deathDate?o.deathDate>o.birthDate:!0,{message:"Data de falecimento deve ser posterior \xE0 data de nascimento",path:["deathDate"]}),Nr=class{constructor(e,r){this.inMemoriamRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,name:i,birthDate:n,deathDate:s,biography:m,photo:c,role:u}=$n.parse({id:e.params.id,...e.body,photo:e.file}),E=await this.inMemoriamRepository.findById(t);if(!E)throw new l("O registro in memoriam n\xE3o existe.");let B=E.photoUrl;return c&&(B=await this.firebaseStorageService.uploadFile({file:c,id:t,folder:F.IN_MEMORIAM})),await this.inMemoriamRepository.update({id:t,name:i,birthDate:n,deathDate:s,biography:m,photoUrl:B??void 0,role:u}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Jn=v.object({id:v.uuid(),name:v.string(),birthDate:v.date(),deathDate:v.date(),biography:v.string().nullable(),photoUrl:v.string().nullable(),role:v.enum(_g),createdAt:v.date(),updatedAt:v.date()}),Xm={method:"post",path:"/in-memoriam",tags:["In Memoriam"],summary:"Create a new in memoriam record with optional photo upload",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:Hn}}}},responses:{201:{description:"In memoriam record created successfully",summary:"In Memoriam Created"},400:{description:"Invalid input data, missing required fields, or invalid photo format/size",summary:"Validation Error",content:{"application/json":{schema:v.object({errors:v.record(v.string(),v.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:v.object({message:v.string()})}}},409:{description:"In memoriam record with this name already exists",summary:"Conflict",content:{"application/json":{schema:v.object({message:v.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:v.object({message:v.string()})}}}}},$m={method:"get",path:"/in-memoriam",tags:["In Memoriam"],summary:"List all in memoriam records with pagination and filters",request:{query:Xn},responses:{200:{description:"List of in memoriam records retrieved successfully with pagination",summary:"In Memoriam Records Retrieved",content:{"application/json":{schema:v.object({page:v.number(),totalPages:v.number(),offset:v.number(),limit:v.number(),inMemoriam:v.array(Jn)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:v.object({errors:v.record(v.string(),v.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:v.object({message:v.string()})}}}}},Jm={method:"get",path:"/in-memoriam/{id}",tags:["In Memoriam"],summary:"Find in memoriam record by ID",request:{params:qr},responses:{200:{description:"In memoriam record details retrieved successfully",summary:"In Memoriam Record Retrieved",content:{"application/json":{schema:Jn}}},400:{description:"Invalid in memoriam record ID format",summary:"Validation Error",content:{"application/json":{schema:v.object({errors:v.record(v.string(),v.string())})}}},404:{description:"In memoriam record not found with the provided ID",summary:"In Memoriam Record Not Found",content:{"application/json":{schema:v.object({message:v.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:v.object({message:v.string()})}}}}},Qm={method:"put",path:"/in-memoriam/{id}",tags:["In Memoriam"],summary:"Update in memoriam record with optional photo upload",security:[{bearerAuth:[]}],request:{params:qr,body:{content:{"multipart/form-data":{schema:$n.omit({id:!0})}}}},responses:{200:{description:"In memoriam record updated successfully",summary:"In Memoriam Record Updated"},400:{description:"Invalid input data, in memoriam record ID format, or invalid photo format/size",summary:"Validation Error",content:{"application/json":{schema:v.object({errors:v.record(v.string(),v.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:v.object({message:v.string()})}}},404:{description:"In memoriam record not found with the provided ID",summary:"In Memoriam Record Not Found",content:{"application/json":{schema:v.object({message:v.string()})}}},409:{description:"In memoriam record with this name already exists",summary:"Conflict",content:{"application/json":{schema:v.object({message:v.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:v.object({message:v.string()})}}}}},ec={method:"delete",path:"/in-memoriam/{id}",tags:["In Memoriam"],summary:"Delete in memoriam record",security:[{bearerAuth:[]}],request:{params:Zn},responses:{200:{description:"In memoriam record deleted successfully",summary:"In Memoriam Record Deleted"},400:{description:"Invalid in memoriam record ID format",summary:"Validation Error",content:{"application/json":{schema:v.object({errors:v.record(v.string(),v.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:v.object({message:v.string()})}}},404:{description:"In memoriam record not found with the provided ID",summary:"In Memoriam Record Not Found",content:{"application/json":{schema:v.object({message:v.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:v.object({message:v.string()})}}}}},SS={method:"get",path:"/in-memoriam/role/{role}",tags:["In Memoriam"],summary:"Find in memoriam records by role",request:{params:Yn},responses:{200:{description:"In memoriam records retrieved successfully by role",summary:"In Memoriam Records Retrieved by Role",content:{"application/json":{schema:v.array(Jn)}}},400:{description:"Invalid role parameter provided",summary:"Validation Error",content:{"application/json":{schema:v.object({errors:v.record(v.string(),v.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:v.object({message:v.string()})}}}}};import O from"zod";import{extendZodWithOpenApi as Wg}from"@asteasolutions/zod-to-openapi";import Wt from"zod";var rc=2,tc=1024,Hg=tc*tc,zg=rc*Hg;Wg(Wt);var Qn=Wt.object({image:Wt.any().refine(o=>o==null||typeof o!="object"||typeof o.size!="number"?!1:o.size<=zg,`A imagem deve ter no m\xE1ximo ${rc}MB.`),caption:Wt.string().optional(),congressId:Wt.uuid()}),kr=class{constructor(e,r,t){this.internationalScientificCongressGalleryRepository=e;this.internationalScientificCongressRepository=r;this.firebaseStorageService=t}async handle(e,r){try{let{image:t,caption:i,congressId:n}=Qn.parse({...e.body,...e.params,image:e.file});if(!await this.internationalScientificCongressRepository.findById(n))throw new l("O congresso n\xE3o existe.");let m=await this.internationalScientificCongressGalleryRepository.create({imageUrl:"",caption:i||void 0,congressId:n}),c=await this.firebaseStorageService.uploadFile({file:t,id:m.id,folder:F.INTERNATIONAL_SCIENTIFIC_CONGRESS_GALLERY});return await this.internationalScientificCongressGalleryRepository.update({id:m.id,imageUrl:c}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Zg}from"@asteasolutions/zod-to-openapi";import es from"zod";Zg(es);var Gr=es.object({id:es.uuid()}),Lr=class{constructor(e){this.internationalScientificCongressGalleryRepository=e}async handle(e,r){try{let{id:t}=Gr.parse({id:e.params.id});if(!await this.internationalScientificCongressGalleryRepository.findById(t))throw new l("A imagem da galeria n\xE3o existe.");return await this.internationalScientificCongressGalleryRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Vg}from"@asteasolutions/zod-to-openapi";import bt from"zod";var Kg=1,Yg=9;Vg(bt);var ts=bt.object({congressId:bt.uuid(),page:bt.coerce.number().min(1).default(Kg),limit:bt.coerce.number().min(1).default(Yg),caption:bt.string().optional()}),_r=class{constructor(e){this.internationalScientificCongressGalleryRepository=e}async handle(e,r){try{let{congressId:t,page:i,limit:n,...s}=ts.parse({congressId:e.params.congressId,...e.query}),m=n*i-n,[c,u]=await Promise.all([this.internationalScientificCongressGalleryRepository.findByCongressId({pagination:{offset:m,limit:n},filter:{congressId:t,...s}}),this.internationalScientificCongressGalleryRepository.count({filter:{congressId:t,caption:s.caption}})]),E=Math.max(Math.ceil(u/n),1);return r.status(200).json({page:i,totalPages:E,offset:m,limit:n,galleryImages:c})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Xg}from"@asteasolutions/zod-to-openapi";import Ht from"zod";var ic=2,oc=1024,$g=oc*oc,Jg=ic*$g;Xg(Ht);var rs=Ht.object({id:Ht.uuid(),image:Ht.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=Jg,`A imagem deve ter no m\xE1ximo ${ic}MB.`).optional(),caption:Ht.string().optional()}),Wr=class{constructor(e,r){this.internationalScientificCongressGalleryRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,image:i,caption:n}=rs.parse({id:e.params.id,...e.body,image:e.file}),s=await this.internationalScientificCongressGalleryRepository.findById(t);if(!s)throw new l("A imagem da galeria n\xE3o existe.");let m=s.imageUrl;return i&&(m=await this.firebaseStorageService.uploadFile({file:i,id:t,folder:F.INTERNATIONAL_SCIENTIFIC_CONGRESS_GALLERY})),await this.internationalScientificCongressGalleryRepository.update({id:t,imageUrl:m??void 0,caption:n||void 0}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Qg=O.object({id:O.uuid(),imageUrl:O.string(),caption:O.string().nullable(),congressId:O.uuid()}),nc={method:"post",path:"/international-scientific-congress/{congressId}/gallery",tags:["International Scientific Congresses"],summary:"Create a new congress gallery image",security:[{bearerAuth:[]}],request:{params:O.object({congressId:O.uuid()}),body:{content:{"application/json":{schema:Qn.omit({congressId:!0})}}}},responses:{201:{description:"Congress gallery image created successfully",summary:"Congress Gallery Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:O.object({errors:O.record(O.string(),O.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:O.object({message:O.string()})}}},404:{description:"Congress not found with the provided ID",summary:"Congress Not Found",content:{"application/json":{schema:O.object({message:O.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:O.object({message:O.string()})}}}}},sc={method:"get",path:"/international-scientific-congress/{congressId}/gallery",tags:["International Scientific Congresses"],summary:"Find congress gallery images by congress ID",request:{params:ts},responses:{200:{description:"Congress gallery images retrieved successfully by congress ID",summary:"Congress Galleries Retrieved",content:{"application/json":{schema:O.array(Qg)}}},400:{description:"Invalid congress ID parameter provided",summary:"Validation Error",content:{"application/json":{schema:O.object({errors:O.record(O.string(),O.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:O.object({message:O.string()})}}}}},ac={method:"put",path:"/international-scientific-congress/gallery/{id}",tags:["International Scientific Congresses"],summary:"Update congress gallery image",security:[{bearerAuth:[]}],request:{params:Gr,body:{content:{"application/json":{schema:rs.omit({id:!0})}}}},responses:{200:{description:"Congress gallery image updated successfully",summary:"Congress Gallery Updated"},400:{description:"Invalid input data or gallery ID format",summary:"Validation Error",content:{"application/json":{schema:O.object({errors:O.record(O.string(),O.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:O.object({message:O.string()})}}},404:{description:"Congress gallery image not found with the provided ID",summary:"Congress Gallery Not Found",content:{"application/json":{schema:O.object({message:O.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:O.object({message:O.string()})}}}}},mc={method:"delete",path:"/international-scientific-congress/gallery/{id}",tags:["International Scientific Congresses"],summary:"Delete congress gallery image",security:[{bearerAuth:[]}],request:{params:Gr},responses:{200:{description:"Congress gallery image deleted successfully",summary:"Congress Gallery Deleted"},400:{description:"Invalid gallery ID format",summary:"Validation Error",content:{"application/json":{schema:O.object({errors:O.record(O.string(),O.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:O.object({message:O.string()})}}},404:{description:"Congress gallery image not found with the provided ID",summary:"Congress Gallery Not Found",content:{"application/json":{schema:O.object({message:O.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:O.object({message:O.string()})}}}}};import N from"zod";import{extendZodWithOpenApi as ey}from"@asteasolutions/zod-to-openapi";import zt from"zod";var pc=2,cc=1024,ty=cc*cc,ry=pc*ty;ey(zt);var os=zt.object({name:zt.string().min(1,"Nome \xE9 obrigat\xF3rio"),logo:zt.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=ry,`A imagem deve ter no m\xE1ximo ${pc}MB.`).optional(),congressId:zt.uuid()}),Hr=class{constructor(e,r,t){this.internationalScientificCongressPartnerRepository=e;this.internationalScientificCongressRepository=r;this.firebaseStorageService=t}async handle(e,r){try{let{name:t,logo:i,congressId:n}=os.parse({...e.body,...e.params,logo:e.file});if(!await this.internationalScientificCongressRepository.findById(n))throw new l("O congresso n\xE3o existe.");let m=await this.internationalScientificCongressPartnerRepository.create({name:t,congressId:n}),c;return i&&(c=await this.firebaseStorageService.uploadFile({file:i,id:m.id,folder:F.PARTNER}),await this.internationalScientificCongressPartnerRepository.update({id:m.id,logoUrl:c})),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as oy}from"@asteasolutions/zod-to-openapi";import is from"zod";oy(is);var Zr=is.object({id:is.uuid()}),zr=class{constructor(e){this.internationalScientificCongressPartnerRepository=e}async handle(e,r){try{let{id:t}=Zr.parse({id:e.params.id});if(!await this.internationalScientificCongressPartnerRepository.findById(t))throw new l("O parceiro n\xE3o existe.");return await this.internationalScientificCongressPartnerRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as iy}from"@asteasolutions/zod-to-openapi";import wt from"zod";var ny=1,sy=9;iy(wt);var ns=wt.object({congressId:wt.uuid(),page:wt.coerce.number().min(1).optional(),limit:wt.coerce.number().min(1).optional(),name:wt.string().optional()}),Vr=class{constructor(e){this.internationalScientificCongressPartnerRepository=e}async handle(e,r){try{let{congressId:t,page:i,limit:n,...s}=ns.parse({congressId:e.params.congressId,...e.query});if(i!==void 0&&n!==void 0){let c=i||ny,u=n||sy,E=u*c-u,[B,H]=await Promise.all([this.internationalScientificCongressPartnerRepository.findByCongressId({pagination:{offset:E,limit:u},filter:{congressId:t,...s}}),this.internationalScientificCongressPartnerRepository.count({filter:{congressId:t,name:s.name}})]),K=Math.max(Math.ceil(H/u),1);return r.status(200).json({page:c,totalPages:K,offset:E,limit:u,partners:B})}let m=await this.internationalScientificCongressPartnerRepository.findByCongressId({filter:{congressId:t,...s}});return r.status(200).json(m)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as ay}from"@asteasolutions/zod-to-openapi";import Zt from"zod";var lc=2,dc=1024,my=dc*dc,cy=lc*my;ay(Zt);var ss=Zt.object({id:Zt.uuid(),name:Zt.string().min(1,"Nome \xE9 obrigat\xF3rio").optional(),logo:Zt.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=cy,`A imagem deve ter no m\xE1ximo ${lc}MB.`).optional()}),Kr=class{constructor(e,r){this.internationalScientificCongressPartnerRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,name:i,logo:n}=ss.parse({id:e.params.id,...e.body,logo:e.file}),s=await this.internationalScientificCongressPartnerRepository.findById(t);if(!s)throw new l("O parceiro n\xE3o existe.");let m=s.logoUrl;return n&&(m=await this.firebaseStorageService.uploadFile({file:n,id:t,folder:F.PARTNER})),await this.internationalScientificCongressPartnerRepository.update({id:t,name:i,logoUrl:m??void 0}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var py=N.object({id:N.uuid(),name:N.string(),logoUrl:N.string().nullable(),congressId:N.uuid()}),uc={method:"post",path:"/international-scientific-congress/{congressId}/partner",tags:["International Scientific Congresses"],summary:"Create a new congress partner",security:[{bearerAuth:[]}],request:{params:N.object({congressId:N.uuid()}),body:{content:{"application/json":{schema:os.omit({congressId:!0})}}}},responses:{201:{description:"Congress partner created successfully",summary:"Congress Partner Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:N.object({errors:N.record(N.string(),N.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:N.object({message:N.string()})}}},404:{description:"Congress not found with the provided ID",summary:"Congress Not Found",content:{"application/json":{schema:N.object({message:N.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:N.object({message:N.string()})}}}}},gc={method:"get",path:"/international-scientific-congress/{congressId}/partner",tags:["International Scientific Congresses"],summary:"Find congress partners by congress ID",request:{params:ns},responses:{200:{description:"Congress partners retrieved successfully by congress ID",summary:"Congress Partners Retrieved",content:{"application/json":{schema:N.array(py)}}},400:{description:"Invalid congress ID parameter provided",summary:"Validation Error",content:{"application/json":{schema:N.object({errors:N.record(N.string(),N.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:N.object({message:N.string()})}}}}},yc={method:"put",path:"/international-scientific-congress/partner/{id}",tags:["International Scientific Congresses"],summary:"Update congress partner",security:[{bearerAuth:[]}],request:{params:Zr,body:{content:{"application/json":{schema:ss.omit({id:!0})}}}},responses:{200:{description:"Congress partner updated successfully",summary:"Congress Partner Updated"},400:{description:"Invalid input data or partner ID format",summary:"Validation Error",content:{"application/json":{schema:N.object({errors:N.record(N.string(),N.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:N.object({message:N.string()})}}},404:{description:"Congress partner not found with the provided ID",summary:"Congress Partner Not Found",content:{"application/json":{schema:N.object({message:N.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:N.object({message:N.string()})}}}}},fc={method:"delete",path:"/international-scientific-congress/partner/{id}",tags:["International Scientific Congresses"],summary:"Delete congress partner",security:[{bearerAuth:[]}],request:{params:Zr},responses:{200:{description:"Congress partner deleted successfully",summary:"Congress Partner Deleted"},400:{description:"Invalid partner ID format",summary:"Validation Error",content:{"application/json":{schema:N.object({errors:N.record(N.string(),N.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:N.object({message:N.string()})}}},404:{description:"Congress partner not found with the provided ID",summary:"Congress Partner Not Found",content:{"application/json":{schema:N.object({message:N.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:N.object({message:N.string()})}}}}};import p from"zod";import{extendZodWithOpenApi as dy}from"@asteasolutions/zod-to-openapi";import X from"zod";dy(X);var as=X.object({title:X.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio"),edition:X.coerce.number().int().positive("Edi\xE7\xE3o deve ser um n\xFAmero positivo"),startDate:X.coerce.date(),endDate:X.coerce.date(),description:X.string().optional(),location:X.string().optional(),congressLink:X.url("Link do congresso deve ser uma URL v\xE1lida").optional().or(X.literal("")),noticeUrl:X.url("URL do edital deve ser uma URL v\xE1lida").optional().or(X.literal("")),scheduleUrl:X.url("URL do cronograma deve ser uma URL v\xE1lida").optional().or(X.literal("")),programUrl:X.url("URL da programa\xE7\xE3o deve ser uma URL v\xE1lida").optional().or(X.literal("")),adminReportUrl:X.url("URL do relat\xF3rio administrativo deve ser uma URL v\xE1lida").optional().or(X.literal("")),proceedingsUrl:X.url("URL dos anais deve ser uma URL v\xE1lida").optional().or(X.literal(""))}).refine(o=>o.endDate>=o.startDate,{message:"Data de t\xE9rmino deve ser posterior ou igual \xE0 data de in\xEDcio",path:["endDate"]}),Yr=class{constructor(e){this.internationalScientificCongressRepository=e}async handle(e,r){try{let t=as.parse(e.body);return await this.internationalScientificCongressRepository.create(t),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as ly}from"@asteasolutions/zod-to-openapi";import ms from"zod";ly(ms);var cs=ms.object({id:ms.uuid()}),Xr=class{constructor(e){this.internationalScientificCongressRepository=e}async handle(e,r){try{let{id:t}=cs.parse({id:e.params.id});if(!await this.internationalScientificCongressRepository.findById(t))throw new l("O congresso n\xE3o existe.");return await this.internationalScientificCongressRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as uy}from"@asteasolutions/zod-to-openapi";import ps from"zod";uy(ps);var ds=ps.object({edition:ps.coerce.number().int().positive()}),$r=class{constructor(e){this.internationalScientificCongressRepository=e}async handle(e,r){try{let{edition:t}=ds.parse({edition:e.params.edition}),i=await this.internationalScientificCongressRepository.findByEdition(t);return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as gy}from"@asteasolutions/zod-to-openapi";import ls from"zod";gy(ls);var Qr=ls.object({id:ls.uuid()}),Jr=class{constructor(e){this.internationalScientificCongressRepository=e}async handle(e,r){try{let{id:t}=Qr.parse({id:e.params.id}),i=await this.internationalScientificCongressRepository.findById(t);if(!i)throw new l("O congresso n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as yy}from"@asteasolutions/zod-to-openapi";import Ne from"zod";var fy=1,hy=10;yy(Ne);var us=Ne.object({page:Ne.coerce.number().min(1).default(fy),limit:Ne.coerce.number().min(1).default(hy),title:Ne.string().optional(),edition:Ne.coerce.number().int().positive().optional(),location:Ne.string().optional(),orderBy:Ne.enum(["asc","desc"]).optional()}),eo=class{constructor(e){this.internationalScientificCongressRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=us.parse(e.query),s=i*t-i,[m,c]=await Promise.all([this.internationalScientificCongressRepository.find({pagination:{offset:s,limit:i},filter:n}),this.internationalScientificCongressRepository.count({filter:n})]),u=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:u,offset:s,limit:i,congresses:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Ry}from"@asteasolutions/zod-to-openapi";import Y from"zod";Ry(Y);var gs=Y.object({id:Y.uuid(),title:Y.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio").optional(),edition:Y.coerce.number().int().positive("Edi\xE7\xE3o deve ser um n\xFAmero positivo").optional(),startDate:Y.coerce.date().optional(),endDate:Y.coerce.date().optional(),description:Y.string().optional(),location:Y.string().optional(),congressLink:Y.url("Link do congresso deve ser uma URL v\xE1lida").optional().or(Y.literal("")),noticeUrl:Y.url("URL do edital deve ser uma URL v\xE1lida").optional().or(Y.literal("")),scheduleUrl:Y.url("URL do cronograma deve ser uma URL v\xE1lida").optional().or(Y.literal("")),programUrl:Y.url("URL da programa\xE7\xE3o deve ser uma URL v\xE1lida").optional().or(Y.literal("")),adminReportUrl:Y.url("URL do relat\xF3rio administrativo deve ser uma URL v\xE1lida").optional().or(Y.literal("")),proceedingsUrl:Y.url("URL dos anais deve ser uma URL v\xE1lida").optional().or(Y.literal(""))}),to=class{constructor(e){this.internationalScientificCongressRepository=e}async handle(e,r){try{let{id:t,...i}=gs.parse({id:e.params.id,...e.body});if(!await this.internationalScientificCongressRepository.findById(t))throw new l("O congresso n\xE3o existe.");return await this.internationalScientificCongressRepository.update({...i,id:t}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Iy=9,Cy=p.object({image:p.any().openapi({type:"string",format:"binary"}),caption:p.string().optional()}),by=p.object({image:p.any().openapi({type:"string",format:"binary"}).optional(),caption:p.string().optional()}),wy=p.object({id:p.uuid(),name:p.string(),logoUrl:p.string().nullable(),congressId:p.uuid()}),ys=p.object({id:p.uuid(),imageUrl:p.string(),caption:p.string().nullable(),congressId:p.uuid()}),fs=p.object({id:p.uuid(),title:p.string(),edition:p.number(),startDate:p.date(),endDate:p.date(),description:p.string().nullable(),location:p.string().nullable(),congressLink:p.string().nullable(),noticeUrl:p.string().nullable(),scheduleUrl:p.string().nullable(),programUrl:p.string().nullable(),adminReportUrl:p.string().nullable(),proceedingsUrl:p.string().nullable(),partners:p.array(wy),galleries:p.array(ys),createdAt:p.date(),updatedAt:p.date()}),hc={method:"post",path:"/international-scientific-congress",tags:["International Scientific Congresses"],summary:"Create a new international scientific congress",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:as}}}},responses:{201:{description:"International scientific congress created successfully",summary:"International Scientific Congress Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:p.object({errors:p.record(p.string(),p.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:p.object({message:p.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:p.object({message:p.string()})}}}}},Rc={method:"get",path:"/international-scientific-congress",tags:["International Scientific Congresses"],summary:"List all international scientific congresses with pagination and filters",request:{query:us},responses:{200:{description:"List of international scientific congresses retrieved successfully with pagination",summary:"International Scientific Congresses Retrieved",content:{"application/json":{schema:p.object({page:p.number(),totalPages:p.number(),offset:p.number(),limit:p.number(),congresses:p.array(fs)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:p.object({errors:p.record(p.string(),p.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:p.object({message:p.string()})}}}}},Ic={method:"get",path:"/international-scientific-congress/{id}",tags:["International Scientific Congresses"],summary:"Find international scientific congress by ID",request:{params:Qr},responses:{200:{description:"International scientific congress details retrieved successfully",summary:"International Scientific Congress Retrieved",content:{"application/json":{schema:fs}}},400:{description:"Invalid international scientific congress ID format",summary:"Validation Error",content:{"application/json":{schema:p.object({errors:p.record(p.string(),p.string())})}}},404:{description:"International scientific congress not found with the provided ID",summary:"International Scientific Congress Not Found",content:{"application/json":{schema:p.object({message:p.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:p.object({message:p.string()})}}}}},Cc={method:"get",path:"/international-scientific-congress/edition/{edition}",tags:["International Scientific Congresses"],summary:"Find international scientific congresses by edition",request:{params:ds},responses:{200:{description:"International scientific congresses retrieved successfully by edition",summary:"International Scientific Congresses Retrieved by Edition",content:{"application/json":{schema:p.array(fs)}}},400:{description:"Invalid edition parameter provided",summary:"Validation Error",content:{"application/json":{schema:p.object({errors:p.record(p.string(),p.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:p.object({message:p.string()})}}}}},bc={method:"put",path:"/international-scientific-congress/{id}",tags:["International Scientific Congresses"],summary:"Update international scientific congress",security:[{bearerAuth:[]}],request:{params:Qr,body:{content:{"application/json":{schema:gs.omit({id:!0})}}}},responses:{200:{description:"International scientific congress updated successfully",summary:"International Scientific Congress Updated"},400:{description:"Invalid input data or international scientific congress ID format",summary:"Validation Error",content:{"application/json":{schema:p.object({errors:p.record(p.string(),p.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:p.object({message:p.string()})}}},404:{description:"International scientific congress not found with the provided ID",summary:"International Scientific Congress Not Found",content:{"application/json":{schema:p.object({message:p.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:p.object({message:p.string()})}}}}},wc={method:"delete",path:"/international-scientific-congress/{id}",tags:["International Scientific Congresses"],summary:"Delete international scientific congress",security:[{bearerAuth:[]}],request:{params:cs},responses:{200:{description:"International scientific congress deleted successfully",summary:"International Scientific Congress Deleted"},400:{description:"Invalid international scientific congress ID format",summary:"Validation Error",content:{"application/json":{schema:p.object({errors:p.record(p.string(),p.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:p.object({message:p.string()})}}},404:{description:"International scientific congress not found with the provided ID",summary:"International Scientific Congress Not Found",content:{"application/json":{schema:p.object({message:p.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:p.object({message:p.string()})}}}}},Ij={method:"post",path:"/international-scientific-congress/{congressId}/gallery",tags:["International Scientific Congress Gallery"],summary:"Create a new gallery image for a congress",security:[{bearerAuth:[]}],request:{params:p.object({congressId:p.uuid()}),body:{content:{"multipart/form-data":{schema:Cy}}}},responses:{201:{description:"Gallery image created successfully",summary:"Gallery Image Created"},400:{description:"Invalid input data, missing required fields, or invalid image format/size",summary:"Validation Error",content:{"application/json":{schema:p.object({errors:p.record(p.string(),p.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:p.object({message:p.string()})}}},404:{description:"Congress not found with the provided ID",summary:"Congress Not Found",content:{"application/json":{schema:p.object({message:p.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:p.object({message:p.string()})}}}}},Cj={method:"get",path:"/international-scientific-congress/{congressId}/gallery",tags:["International Scientific Congress Gallery"],summary:"List all gallery images for a congress with pagination",request:{params:p.object({congressId:p.uuid()}),query:p.object({page:p.coerce.number().min(1).default(1),limit:p.coerce.number().min(1).default(Iy),caption:p.string().optional()})},responses:{200:{description:"Gallery images retrieved successfully with pagination",summary:"Gallery Images Retrieved",content:{"application/json":{schema:p.object({page:p.number(),totalPages:p.number(),offset:p.number(),limit:p.number(),galleries:p.array(ys)})}}},400:{description:"Invalid congress ID format or query parameters",summary:"Validation Error",content:{"application/json":{schema:p.object({errors:p.record(p.string(),p.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:p.object({message:p.string()})}}}}},bj={method:"get",path:"/international-scientific-congress/gallery/{id}",tags:["International Scientific Congress Gallery"],summary:"Find a gallery image by ID",request:{params:p.object({id:p.uuid()})},responses:{200:{description:"Gallery image retrieved successfully",summary:"Gallery Image Retrieved",content:{"application/json":{schema:ys}}},400:{description:"Invalid gallery image ID format",summary:"Validation Error",content:{"application/json":{schema:p.object({errors:p.record(p.string(),p.string())})}}},404:{description:"Gallery image not found with the provided ID",summary:"Gallery Image Not Found",content:{"application/json":{schema:p.object({message:p.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:p.object({message:p.string()})}}}}},wj={method:"put",path:"/international-scientific-congress/gallery/{id}",tags:["International Scientific Congress Gallery"],summary:"Update a gallery image with optional image upload",security:[{bearerAuth:[]}],request:{params:p.object({id:p.uuid()}),body:{content:{"multipart/form-data":{schema:by}}}},responses:{200:{description:"Gallery image updated successfully",summary:"Gallery Image Updated"},400:{description:"Invalid input data, gallery ID format, or invalid image format/size",summary:"Validation Error",content:{"application/json":{schema:p.object({errors:p.record(p.string(),p.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:p.object({message:p.string()})}}},404:{description:"Gallery image not found with the provided ID",summary:"Gallery Image Not Found",content:{"application/json":{schema:p.object({message:p.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:p.object({message:p.string()})}}}}},Sj={method:"delete",path:"/international-scientific-congress/gallery/{id}",tags:["International Scientific Congress Gallery"],summary:"Delete a gallery image",security:[{bearerAuth:[]}],request:{params:p.object({id:p.uuid()})},responses:{200:{description:"Gallery image deleted successfully",summary:"Gallery Image Deleted"},400:{description:"Invalid gallery ID format",summary:"Validation Error",content:{"application/json":{schema:p.object({errors:p.record(p.string(),p.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:p.object({message:p.string()})}}},404:{description:"Gallery image not found with the provided ID",summary:"Gallery Image Not Found",content:{"application/json":{schema:p.object({message:p.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:p.object({message:p.string()})}}}}};import{$Enums as xy}from"@prisma/client";import T from"zod";import{extendZodWithOpenApi as Sy}from"@asteasolutions/zod-to-openapi";import St from"zod";Sy(St);var hs=St.object({role:St.string().min(1),description:St.string().optional(),userId:St.uuid(),order:St.number().optional()}),ro=class{constructor(e){this.legitimatorCommitteeMemberRepository=e}async handle(e,r){try{let{role:t,description:i,userId:n,order:s}=hs.parse(e.body);return await this.legitimatorCommitteeMemberRepository.create({role:t,description:i,userId:n,order:s??0}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as vy}from"@asteasolutions/zod-to-openapi";import Rs from"zod";vy(Rs);var Is=Rs.object({id:Rs.uuid()}),oo=class{constructor(e){this.legitimatorCommitteeMemberRepository=e}async handle(e,r){try{let{id:t}=Is.parse({id:e.params.id});if(!await this.legitimatorCommitteeMemberRepository.findById(t))throw new l("O membro do comit\xEA legitimador n\xE3o existe.");return await this.legitimatorCommitteeMemberRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as jy}from"@asteasolutions/zod-to-openapi";import Cs from"zod";jy(Cs);var no=Cs.object({id:Cs.uuid()}),io=class{constructor(e){this.legitimatorCommitteeMemberRepository=e}async handle(e,r){try{let{id:t}=no.parse({id:e.params.id}),i=await this.legitimatorCommitteeMemberRepository.findById(t);if(!i)throw new l("O membro do comit\xEA legitimador n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Ey}from"@asteasolutions/zod-to-openapi";import et from"zod";Ey(et);var bs=et.object({id:et.uuid(),role:et.string().min(1).optional(),description:et.string().optional(),userId:et.uuid().optional(),order:et.number().optional()}),so=class{constructor(e){this.legitimatorCommitteeMemberRepository=e}async handle(e,r){try{let{id:t,role:i,description:n,userId:s,order:m}=bs.parse({id:e.params.id,...e.body});if(!await this.legitimatorCommitteeMemberRepository.findById(t))throw new l("O membro do comit\xEA legitimador n\xE3o existe.");return await this.legitimatorCommitteeMemberRepository.update({id:t,role:i,description:n,userId:s,order:m}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var My=T.object({id:T.uuid(),name:T.string(),emailAddress:T.string(),avatarUrl:T.string().nullable(),orcid:T.string().nullable(),phone:T.string().nullable(),lattesUrl:T.string().nullable(),role:T.enum(xy.UserRole)}),Sc=T.object({id:T.uuid(),role:T.string(),description:T.string().nullable(),order:T.number(),createdAt:T.date(),updatedAt:T.date(),userId:T.uuid(),user:My}),vc={method:"post",path:"/legitimator-committee-member",tags:["Legitimator Committee Members"],summary:"Create a new Legitimator Committee Member",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:hs}}}},responses:{201:{description:"Legitimator Committee Member created successfully",summary:"Legitimator Committee Member Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:T.object({errors:T.record(T.string(),T.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:T.object({message:T.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:T.object({message:T.string()})}}}}},jc={method:"get",path:"/legitimator-committee-member",tags:["Legitimator Committee Members"],summary:"List all Legitimator Committee Members with filters",request:{query:T.object({role:T.string().optional(),orderBy:T.enum(["asc","desc"]).optional()})},responses:{200:{description:"List of Legitimator Committee Members retrieved successfully",summary:"Legitimator Committee Members Retrieved",content:{"application/json":{schema:T.object({members:T.array(Sc)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:T.object({message:T.string()})}}}}},Ec={method:"get",path:"/legitimator-committee-member/{id}",tags:["Legitimator Committee Members"],summary:"Find Legitimator Committee Member by ID",request:{params:no},responses:{200:{description:"Legitimator Committee Member details retrieved successfully",summary:"Legitimator Committee Member Retrieved",content:{"application/json":{schema:Sc}}},400:{description:"Invalid Legitimator Committee Member ID format",summary:"Validation Error",content:{"application/json":{schema:T.object({errors:T.record(T.string(),T.string())})}}},404:{description:"Legitimator Committee Member not found with the provided ID",summary:"Legitimator Committee Member Not Found",content:{"application/json":{schema:T.object({message:T.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:T.object({message:T.string()})}}}}},xc={method:"put",path:"/legitimator-committee-member/{id}",tags:["Legitimator Committee Members"],summary:"Update Legitimator Committee Member",security:[{bearerAuth:[]}],request:{params:no,body:{content:{"application/json":{schema:bs.omit({id:!0})}}}},responses:{200:{description:"Legitimator Committee Member updated successfully",summary:"Legitimator Committee Member Updated"},400:{description:"Invalid input data or Legitimator Committee Member ID format",summary:"Validation Error",content:{"application/json":{schema:T.object({errors:T.record(T.string(),T.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:T.object({message:T.string()})}}},404:{description:"Legitimator Committee Member not found with the provided ID",summary:"Legitimator Committee Member Not Found",content:{"application/json":{schema:T.object({message:T.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:T.object({message:T.string()})}}}}},Mc={method:"delete",path:"/legitimator-committee-member/{id}",tags:["Legitimator Committee Members"],summary:"Delete Legitimator Committee Member",security:[{bearerAuth:[]}],request:{params:Is},responses:{200:{description:"Legitimator Committee Member deleted successfully",summary:"Legitimator Committee Member Deleted"},400:{description:"Invalid Legitimator Committee Member ID format",summary:"Validation Error",content:{"application/json":{schema:T.object({errors:T.record(T.string(),T.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:T.object({message:T.string()})}}},404:{description:"Legitimator Committee Member not found with the provided ID",summary:"Legitimator Committee Member Not Found",content:{"application/json":{schema:T.object({message:T.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:T.object({message:T.string()})}}}}};import{$Enums as Fy}from"@prisma/client";import S from"zod";import{extendZodWithOpenApi as Py}from"@asteasolutions/zod-to-openapi";import ve from"zod";Py(ve);var ws=ve.object({name:ve.string().min(1),description:ve.string().optional(),members:ve.array(ve.object({userId:ve.uuid(),role:ve.string().min(1),order:ve.number().optional()}))}),ao=class{constructor(e){this.managementTeamRepository=e}async handle(e,r){try{let{name:t,description:i,members:n}=ws.parse(e.body);if(await this.managementTeamRepository.findByName(t))throw new $("J\xE1 existe um time de gest\xE3o cadastrado com este nome.");return await this.managementTeamRepository.create({name:t,description:i,members:n.map(m=>({userId:m.userId,role:m.role,order:m.order??0}))}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Ty}from"@asteasolutions/zod-to-openapi";import Ss from"zod";Ty(Ss);var vs=Ss.object({id:Ss.uuid()}),mo=class{constructor(e){this.managementTeamRepository=e}async handle(e,r){try{let{id:t}=vs.parse({id:e.params.id});if(!await this.managementTeamRepository.findById(t))throw new l("O time de gest\xE3o n\xE3o existe.");return await this.managementTeamRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Ay}from"@asteasolutions/zod-to-openapi";import js from"zod";Ay(js);var po=js.object({id:js.uuid()}),co=class{constructor(e){this.managementTeamRepository=e}async handle(e,r){try{let{id:t}=po.parse({id:e.params.id}),i=await this.managementTeamRepository.findById(t);if(!i)throw new l("O time de gest\xE3o n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Dy}from"@asteasolutions/zod-to-openapi";import Ie from"zod";Dy(Ie);var Es=Ie.object({id:Ie.uuid(),name:Ie.string().min(1).optional(),description:Ie.string().optional(),members:Ie.array(Ie.object({userId:Ie.uuid(),role:Ie.string().min(1),order:Ie.number().optional()})).optional()}),lo=class{constructor(e){this.managementTeamRepository=e}async handle(e,r){try{let{id:t,name:i,description:n,members:s}=Es.parse({id:e.params.id,...e.body}),m=await this.managementTeamRepository.findById(t);if(!m)throw new l("O time de gest\xE3o n\xE3o existe.");if(i&&i!==m.name){let c=await this.managementTeamRepository.findByName(i);if(c&&c.id!==t)throw new $("J\xE1 existe um time de gest\xE3o com este nome.")}return await this.managementTeamRepository.update({id:t,name:i,description:n,members:s?s.map(c=>({userId:c.userId,role:c.role,order:c.order??0})):void 0}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Uy=S.object({id:S.uuid(),name:S.string(),emailAddress:S.string(),avatarUrl:S.string().nullable(),orcid:S.string().nullable(),phone:S.string().nullable(),lattesUrl:S.string().nullable(),role:S.enum(Fy.UserRole)}),qy=S.object({id:S.uuid(),role:S.string(),description:S.string().nullable(),order:S.number(),teamId:S.uuid(),userId:S.uuid(),createdAt:S.date(),updatedAt:S.date(),user:Uy}),Pc=S.object({id:S.uuid(),name:S.string(),description:S.string().nullable(),createdAt:S.date(),updatedAt:S.date(),members:S.array(qy)}),Tc={method:"post",path:"/management-team",tags:["Management Teams"],summary:"Create a new Management Team with multiple members",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:ws}}}},responses:{201:{description:"Management Team created successfully",summary:"Management Team Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:S.object({errors:S.record(S.string(),S.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:S.object({message:S.string()})}}},409:{description:"Management Team with this name already exists",summary:"Conflict",content:{"application/json":{schema:S.object({message:S.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:S.object({message:S.string()})}}}}},Ac={method:"get",path:"/management-team",tags:["Management Teams"],summary:"List all Management Teams with filters",request:{query:S.object({name:S.string().optional(),description:S.string().optional(),orderBy:S.enum(["asc","desc"]).optional()})},responses:{200:{description:"List of Management Teams retrieved successfully",summary:"Management Teams Retrieved",content:{"application/json":{schema:S.object({teams:S.array(Pc)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:S.object({message:S.string()})}}}}},Dc={method:"get",path:"/management-team/{id}",tags:["Management Teams"],summary:"Find Management Team by ID",request:{params:po},responses:{200:{description:"Management Team details retrieved successfully",summary:"Management Team Retrieved",content:{"application/json":{schema:Pc}}},400:{description:"Invalid Management Team ID format",summary:"Validation Error",content:{"application/json":{schema:S.object({errors:S.record(S.string(),S.string())})}}},404:{description:"Management Team not found with the provided ID",summary:"Management Team Not Found",content:{"application/json":{schema:S.object({message:S.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:S.object({message:S.string()})}}}}},Fc={method:"put",path:"/management-team/{id}",tags:["Management Teams"],summary:"Update Management Team and manage member relationships",security:[{bearerAuth:[]}],request:{params:po,body:{content:{"application/json":{schema:Es.omit({id:!0})}}}},responses:{200:{description:"Management Team updated successfully",summary:"Management Team Updated"},400:{description:"Invalid input data or Management Team ID format",summary:"Validation Error",content:{"application/json":{schema:S.object({errors:S.record(S.string(),S.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:S.object({message:S.string()})}}},404:{description:"Management Team not found with the provided ID",summary:"Management Team Not Found",content:{"application/json":{schema:S.object({message:S.string()})}}},409:{description:"Management Team with this name already exists",summary:"Conflict",content:{"application/json":{schema:S.object({message:S.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:S.object({message:S.string()})}}}}},Uc={method:"delete",path:"/management-team/{id}",tags:["Management Teams"],summary:"Delete Management Team",security:[{bearerAuth:[]}],request:{params:vs},responses:{200:{description:"Management Team deleted successfully",summary:"Management Team Deleted"},400:{description:"Invalid Management Team ID format",summary:"Validation Error",content:{"application/json":{schema:S.object({errors:S.record(S.string(),S.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:S.object({message:S.string()})}}},404:{description:"Management Team not found with the provided ID",summary:"Management Team Not Found",content:{"application/json":{schema:S.object({message:S.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:S.object({message:S.string()})}}}}};import{MeetingFormat as Wy,MeetingStatus as Hy}from"@prisma/client";import D from"zod";import{extendZodWithOpenApi as By}from"@asteasolutions/zod-to-openapi";import vt from"zod";var Bc=10,qc=1024,Oy=qc*qc,Ny=Bc*Oy;By(vt);var xs=vt.object({title:vt.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio"),publishedAt:vt.coerce.date(),meetingId:vt.uuid(),document:vt.any().refine(o=>o==null||typeof o!="object"||typeof o.size!="number"?!1:o.size<=Ny,`O documento deve ter no m\xE1ximo ${Bc}MB.`)}),uo=class{constructor(e,r,t){this.meetingMinuteRepository=e;this.meetingRepository=r;this.firebaseStorageService=t}async handle(e,r){try{let{title:t,publishedAt:i,meetingId:n,document:s}=xs.parse({...e.body,...e.params,document:e.file});if(!await this.meetingRepository.findById(n))throw new l("A reuni\xE3o n\xE3o existe.");if(await this.meetingMinuteRepository.findByMeetingId(n))throw new a("Esta reuni\xE3o j\xE1 possui uma ata.");let u=await this.meetingMinuteRepository.create({title:t,publishedAt:i,meetingId:n,documentUrl:""}),E=await this.firebaseStorageService.uploadFile({file:s,id:u.id,folder:F.MEETING_MINUTE});return await this.meetingMinuteRepository.update({id:u.id,documentUrl:E}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as ky}from"@asteasolutions/zod-to-openapi";import Ms from"zod";ky(Ms);var Vt=Ms.object({meetingId:Ms.uuid()}),go=class{constructor(e){this.meetingMinuteRepository=e}async handle(e,r){try{let{meetingId:t}=Vt.parse({meetingId:e.params.meetingId}),i=await this.meetingMinuteRepository.findByMeetingId(t);return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Ly}from"@asteasolutions/zod-to-openapi";import jt from"zod";var Nc=10,Oc=1024,Gy=Oc*Oc,_y=Nc*Gy;Ly(jt);var Ps=jt.object({meetingId:jt.uuid(),title:jt.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio").optional(),publishedAt:jt.coerce.date().optional(),document:jt.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=_y,`O documento deve ter no m\xE1ximo ${Nc}MB.`).optional()}),yo=class{constructor(e,r){this.meetingMinuteRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{meetingId:t,title:i,publishedAt:n,document:s}=Ps.parse({meetingId:e.params.meetingId,...e.body,document:e.file}),m=await this.meetingMinuteRepository.findByMeetingId(t);if(!m)throw new l("A ata n\xE3o existe para esta reuni\xE3o.");let c=m.documentUrl;return s&&(m.documentUrl&&await this.firebaseStorageService.deleteFile({fileUrl:m.documentUrl}),c=await this.firebaseStorageService.uploadFile({file:s,id:m.id,folder:F.MEETING_MINUTE})),await this.meetingMinuteRepository.update({id:m.id,title:i,publishedAt:n,documentUrl:c??void 0}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var zy=D.object({id:D.uuid(),title:D.string(),scheduledAt:D.date(),format:D.enum(Wy),agenda:D.string(),meetingLink:D.string().nullable(),location:D.string().nullable(),status:D.enum(Hy),createdAt:D.date(),updatedAt:D.date()}),Zy=D.object({id:D.uuid(),title:D.string(),publishedAt:D.date(),documentUrl:D.string(),meetingId:D.uuid(),meeting:zy,createdAt:D.date(),updatedAt:D.date()}),kc={method:"post",path:"/meeting/{meetingId}/minute",tags:["Meetings"],summary:"Create a new meeting minute with document upload",security:[{bearerAuth:[]}],request:{params:D.object({meetingId:D.uuid()}),body:{content:{"multipart/form-data":{schema:xs.omit({meetingId:!0})}}}},responses:{201:{description:"Meeting minute created successfully",summary:"Meeting Minute Created"},400:{description:"Invalid input data, missing required fields, or invalid document format/size",summary:"Validation Error",content:{"application/json":{schema:D.object({errors:D.record(D.string(),D.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:D.object({message:D.string()})}}},404:{description:"Meeting not found with the provided ID",summary:"Meeting Not Found",content:{"application/json":{schema:D.object({message:D.string()})}}},409:{description:"Meeting already has a minute",summary:"Conflict",content:{"application/json":{schema:D.object({message:D.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:D.object({message:D.string()})}}}}},Lc={method:"get",path:"/meeting/{meetingId}/minute",tags:["Meetings"],summary:"Find meeting minute by meeting ID",request:{params:Vt},responses:{200:{description:"Meeting minute retrieved successfully by meeting ID",summary:"Meeting Minute Retrieved by Meeting ID",content:{"application/json":{schema:Zy.nullable()}}},400:{description:"Invalid meeting ID parameter provided",summary:"Validation Error",content:{"application/json":{schema:D.object({errors:D.record(D.string(),D.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:D.object({message:D.string()})}}}}},Gc={method:"put",path:"/meeting/{meetingId}/minute",tags:["Meetings"],summary:"Update meeting minute with optional document upload",security:[{bearerAuth:[]}],request:{params:Vt,body:{content:{"multipart/form-data":{schema:Ps.omit({meetingId:!0})}}}},responses:{200:{description:"Meeting minute updated successfully",summary:"Meeting Minute Updated"},400:{description:"Invalid input data, meeting minute ID format, or invalid document format/size",summary:"Validation Error",content:{"application/json":{schema:D.object({errors:D.record(D.string(),D.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:D.object({message:D.string()})}}},404:{description:"Meeting minute not found with the provided ID",summary:"Meeting Minute Not Found",content:{"application/json":{schema:D.object({message:D.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:D.object({message:D.string()})}}}}},_c={method:"delete",path:"/meeting/{meetingId}/minute",tags:["Meetings"],summary:"Delete meeting minute",security:[{bearerAuth:[]}],request:{params:Vt},responses:{200:{description:"Meeting minute deleted successfully",summary:"Meeting Minute Deleted"},400:{description:"Invalid meeting minute ID format",summary:"Validation Error",content:{"application/json":{schema:D.object({errors:D.record(D.string(),D.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:D.object({message:D.string()})}}},404:{description:"Meeting minute not found with the provided ID",summary:"Meeting Minute Not Found",content:{"application/json":{schema:D.object({message:D.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:D.object({message:D.string()})}}}}};import{MeetingFormat as af,MeetingStatus as mf}from"@prisma/client";import b from"zod";import{extendZodWithOpenApi as Vy}from"@asteasolutions/zod-to-openapi";import{MeetingFormat as fo,MeetingStatus as Ts}from"@prisma/client";import Ce from"zod";Vy(Ce);var As=Ce.object({title:Ce.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio"),scheduledAt:Ce.coerce.date(),format:Ce.enum(fo).default(fo.ONLINE),agenda:Ce.string().min(1,"Pauta \xE9 obrigat\xF3ria"),meetingLink:Ce.string().url("Link da reuni\xE3o deve ser uma URL v\xE1lida").optional().or(Ce.literal("")),location:Ce.string().optional(),status:Ce.enum(Ts).default(Ts.PENDING)}).refine(o=>o.format===fo.ONLINE?!!o.meetingLink:o.format===fo.IN_PERSON?!!o.location:!0,{message:"Reuni\xF5es online devem ter link e reuni\xF5es presenciais devem ter localiza\xE7\xE3o",path:["format"]}),ho=class{constructor(e){this.meetingRepository=e}async handle(e,r){try{let{title:t,scheduledAt:i,format:n,agenda:s,meetingLink:m,location:c,status:u}=As.parse(e.body);return await this.meetingRepository.create({title:t,scheduledAt:i,format:n,agenda:s,meetingLink:m||void 0,location:c||void 0,status:u??Ts.PENDING}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Ky}from"@asteasolutions/zod-to-openapi";import Ds from"zod";Ky(Ds);var Fs=Ds.object({id:Ds.uuid()}),Ro=class{constructor(e){this.meetingRepository=e}async handle(e,r){try{let{id:t}=Fs.parse({id:e.params.id});if(!await this.meetingRepository.findById(t))throw new l("A reuni\xE3o n\xE3o existe.");return await this.meetingRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Yy}from"@asteasolutions/zod-to-openapi";import Us from"zod";Yy(Us);var Co=Us.object({id:Us.uuid()}),Io=class{constructor(e){this.meetingRepository=e}async handle(e,r){try{let{id:t}=Co.parse({id:e.params.id}),i=await this.meetingRepository.findById(t);if(!i)throw new l("A reuni\xE3o n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Xy}from"@asteasolutions/zod-to-openapi";import{MeetingStatus as $y}from"@prisma/client";import qs from"zod";Xy(qs);var Bs=qs.object({status:qs.enum($y)}),bo=class{constructor(e){this.meetingRepository=e}async handle(e,r){try{let{status:t}=Bs.parse({status:e.params.status}),i=await this.meetingRepository.findByStatus(t);return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Jy}from"@asteasolutions/zod-to-openapi";import{MeetingFormat as Qy,MeetingStatus as ef}from"@prisma/client";import ke from"zod";var tf=1,rf=10;Jy(ke);var Os=ke.object({page:ke.coerce.number().min(1).default(tf),limit:ke.coerce.number().min(1).default(rf),title:ke.string().optional(),format:ke.enum(Qy).optional(),status:ke.enum(ef).optional(),orderBy:ke.enum(["asc","desc"]).optional()}),wo=class{constructor(e){this.meetingRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=Os.parse(e.query),s=i*t-i,[m,c]=await Promise.all([this.meetingRepository.find({pagination:{offset:s,limit:i},filter:n}),this.meetingRepository.count({filter:n})]),u=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:u,offset:s,limit:i,meetings:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as of}from"@asteasolutions/zod-to-openapi";import{MeetingFormat as nf,MeetingStatus as sf}from"@prisma/client";import ge from"zod";of(ge);var Ns=ge.object({id:ge.uuid(),title:ge.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio").optional(),scheduledAt:ge.coerce.date().optional(),format:ge.enum(nf).optional(),agenda:ge.string().min(1,"Pauta \xE9 obrigat\xF3ria").optional(),meetingLink:ge.string().url("Link da reuni\xE3o deve ser uma URL v\xE1lida").optional().or(ge.literal("")),location:ge.string().optional(),status:ge.enum(sf).optional()}),So=class{constructor(e){this.meetingRepository=e}async handle(e,r){try{let{id:t,title:i,scheduledAt:n,format:s,agenda:m,meetingLink:c,location:u,status:E}=Ns.parse({id:e.params.id,...e.body});if(!await this.meetingRepository.findById(t))throw new l("A reuni\xE3o n\xE3o existe.");return await this.meetingRepository.update({id:t,title:i,scheduledAt:n,format:s,agenda:m,meetingLink:c||void 0,location:u||void 0,status:E}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var cf=b.object({id:b.uuid(),title:b.string(),publishedAt:b.date(),documentUrl:b.string(),meetingId:b.uuid(),createdAt:b.date(),updatedAt:b.date()}),ks=b.object({id:b.uuid(),title:b.string(),scheduledAt:b.date(),format:b.enum(af),agenda:b.string(),meetingLink:b.string().nullable(),location:b.string().nullable(),status:b.enum(mf),minutes:cf.nullable(),createdAt:b.date(),updatedAt:b.date()}),Wc={method:"post",path:"/meeting",tags:["Meetings"],summary:"Create a new meeting",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:As}}}},responses:{201:{description:"Meeting created successfully",summary:"Meeting Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:b.object({errors:b.record(b.string(),b.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:b.object({message:b.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:b.object({message:b.string()})}}}}},Hc={method:"get",path:"/meeting",tags:["Meetings"],summary:"List all meetings with pagination and filters",request:{query:Os},responses:{200:{description:"List of meetings retrieved successfully with pagination",summary:"Meetings Retrieved",content:{"application/json":{schema:b.object({page:b.number(),totalPages:b.number(),offset:b.number(),limit:b.number(),meetings:b.array(ks)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:b.object({errors:b.record(b.string(),b.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:b.object({message:b.string()})}}}}},zc={method:"get",path:"/meeting/{id}",tags:["Meetings"],summary:"Find meeting by ID",request:{params:Co},responses:{200:{description:"Meeting details retrieved successfully",summary:"Meeting Retrieved",content:{"application/json":{schema:ks}}},400:{description:"Invalid meeting ID format",summary:"Validation Error",content:{"application/json":{schema:b.object({errors:b.record(b.string(),b.string())})}}},404:{description:"Meeting not found with the provided ID",summary:"Meeting Not Found",content:{"application/json":{schema:b.object({message:b.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:b.object({message:b.string()})}}}}},Zc={method:"get",path:"/meeting/status/{status}",tags:["Meetings"],summary:"Find meetings by status",request:{params:Bs},responses:{200:{description:"Meetings retrieved successfully by status",summary:"Meetings Retrieved by Status",content:{"application/json":{schema:b.array(ks)}}},400:{description:"Invalid status parameter provided",summary:"Validation Error",content:{"application/json":{schema:b.object({errors:b.record(b.string(),b.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:b.object({message:b.string()})}}}}},Vc={method:"put",path:"/meeting/{id}",tags:["Meetings"],summary:"Update meeting",security:[{bearerAuth:[]}],request:{params:Co,body:{content:{"application/json":{schema:Ns.omit({id:!0})}}}},responses:{200:{description:"Meeting updated successfully",summary:"Meeting Updated"},400:{description:"Invalid input data or meeting ID format",summary:"Validation Error",content:{"application/json":{schema:b.object({errors:b.record(b.string(),b.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:b.object({message:b.string()})}}},404:{description:"Meeting not found with the provided ID",summary:"Meeting Not Found",content:{"application/json":{schema:b.object({message:b.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:b.object({message:b.string()})}}}}},Kc={method:"delete",path:"/meeting/{id}",tags:["Meetings"],summary:"Delete meeting",security:[{bearerAuth:[]}],request:{params:Fs},responses:{200:{description:"Meeting deleted successfully",summary:"Meeting Deleted"},400:{description:"Invalid meeting ID format",summary:"Validation Error",content:{"application/json":{schema:b.object({errors:b.record(b.string(),b.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:b.object({message:b.string()})}}},404:{description:"Meeting not found with the provided ID",summary:"Meeting Not Found",content:{"application/json":{schema:b.object({message:b.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:b.object({message:b.string()})}}}}};import j from"zod";import{extendZodWithOpenApi as pf}from"@asteasolutions/zod-to-openapi";import Kt from"zod";var df=5,Yc=1024,lf=Yc*Yc,uf=df*lf;pf(Kt);var Ls=Kt.object({title:Kt.string().min(1),content:Kt.string().min(1),image:Kt.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=uf,{message:"A imagem deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB."})}),vo=class{constructor(e,r){this.newsRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{title:t,content:i,image:n}=Ls.parse({...e.body,image:e.file}),s=e.user.id,m=await this.firebaseStorageService.uploadFile({file:n,folder:F.NEWS,id:s});await this.newsRepository.create({title:t,content:i,authorId:s,imageUrl:m}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as gf}from"@asteasolutions/zod-to-openapi";import Le from"zod";var yf=1,ff=7;gf(Le);var Eo=Le.object({page:Le.coerce.number().min(1).default(yf),limit:Le.coerce.number().min(1).default(ff),authorId:Le.string(),title:Le.string().optional(),content:Le.string().optional(),orderBy:Le.enum(["asc","desc"]).default("desc")}),jo=class{constructor(e){this.newsRepository=e}async handle(e,r){try{let{page:t,limit:i,authorId:n,...s}=Eo.parse(e.query),m=i*t-i,[c,u]=await Promise.all([this.newsRepository.findByAuthorId({authorId:n,pagination:{offset:m,limit:i},filter:s}),this.newsRepository.count({filter:{authorId:n,...s}})]),E=Math.max(Math.ceil(u/i),1);r.status(200).json({page:t,totalPages:E,offset:m,limit:i,news:c})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as hf}from"@asteasolutions/zod-to-openapi";import Gs from"zod";hf(Gs);var _s=Gs.object({id:Gs.string()}),xo=class{constructor(e){this.newsRepository=e}async handle(e,r){try{let{id:t}=_s.parse(e.params),i=await this.newsRepository.findById(t);if(!i)throw new l("Not\xEDcia n\xE3o encontrada.");r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Rf}from"@asteasolutions/zod-to-openapi";import Ge from"zod";var If=1,Cf=9;Rf(Ge);var Ws=Ge.object({page:Ge.coerce.number().min(1).default(If),limit:Ge.coerce.number().min(1).default(Cf),title:Ge.string().optional(),content:Ge.string().optional(),authorId:Ge.string().optional(),orderBy:Ge.enum(["asc","desc"]).default("desc")}),Mo=class{constructor(e){this.newsRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=Ws.parse(e.query),s=i*t-i,[m,c]=await Promise.all([this.newsRepository.find({pagination:{offset:s,limit:i},filter:n}),this.newsRepository.count({filter:n})]),u=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:u,offset:s,limit:i,news:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Xc={method:"post",path:"/news",tags:["News"],summary:"Create news",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:Ls}}}},responses:{201:{description:"News article created successfully",summary:"News Created",content:{"application/json":{schema:j.object({message:j.string()})}}},400:{description:"Invalid input data or file format",summary:"Validation Error",content:{"application/json":{schema:j.object({errors:j.record(j.string(),j.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:j.object({message:j.string()})}}}}},$c={method:"get",path:"/news",tags:["News"],summary:"List news",request:{query:Ws},responses:{200:{description:"Paginated list of news articles retrieved successfully",summary:"News Retrieved",content:{"application/json":{schema:j.object({page:j.number(),totalPages:j.number(),offset:j.number(),limit:j.number(),news:j.array(j.object({title:j.string(),content:j.string(),id:j.string(),createdAt:j.date(),updatedAt:j.date(),imageUrl:j.string().nullable()}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:j.object({errors:j.record(j.string(),j.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:j.object({message:j.string()})}}}}},Jc={method:"get",path:"/news/{id}",tags:["News"],summary:"Find news by ID",request:{params:_s},responses:{200:{description:"News article details retrieved successfully",summary:"News Retrieved",content:{"application/json":{schema:j.object({page:j.number(),totalPages:j.number(),offset:j.number(),limit:j.number(),news:j.object({title:j.string(),content:j.string(),id:j.string(),createdAt:j.date(),updatedAt:j.date(),imageUrl:j.string().nullable()})})}}},400:{description:"Invalid news ID format",summary:"Validation Error",content:{"application/json":{schema:j.object({errors:j.record(j.string(),j.string())})}}},404:{description:"News article not found with the provided ID",summary:"News Not Found",content:{"application/json":{schema:j.object({message:j.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:j.object({message:j.string()})}}}}},Qc={method:"get",path:"/news/author/{author_id}",tags:["News"],summary:"List news by author",request:{params:Eo.pick({authorId:!0}).transform(()=>({author_id:""})),query:Eo.omit({authorId:!0})},responses:{200:{description:"Paginated list of news articles by author retrieved successfully",summary:"Author News Retrieved",content:{"application/json":{schema:j.object({page:j.number(),totalPages:j.number(),offset:j.number(),limit:j.number(),news:j.array(j.object({title:j.string(),content:j.string(),id:j.string(),createdAt:j.date(),updatedAt:j.date(),imageUrl:j.string().nullable()}))})}}},400:{description:"Invalid author ID or query parameters",summary:"Validation Error",content:{"application/json":{schema:j.object({errors:j.record(j.string(),j.string())})}}},404:{description:"Author not found with the provided ID",summary:"Author Not Found",content:{"application/json":{schema:j.object({message:j.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:j.object({message:j.string()})}}}}};import M from"zod";import{extendZodWithOpenApi as bf}from"@asteasolutions/zod-to-openapi";import be from"zod";var tp=2,ep=1024,wf=ep*ep,Sf=tp*wf;bf(be);var Hs=be.object({name:be.string().min(1,"Nome \xE9 obrigat\xF3rio"),logo:be.any().refine(o=>o==null||typeof o!="object"||typeof o.size!="number"?!1:o.size<=Sf,`A imagem deve ter no m\xE1ximo ${tp}MB.`),websiteUrl:be.url("URL do site deve ser v\xE1lida").optional(),description:be.string().optional(),category:be.string().optional(),since:be.coerce.date(),isActive:be.preprocess(o=>o==="true",be.boolean().optional())}),Po=class{constructor(e,r){this.partnerRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{name:t,logo:i,websiteUrl:n,description:s,category:m,since:c,isActive:u}=Hs.parse({...e.body,logo:e.file}),E=await this.partnerRepository.create({name:t,websiteUrl:n,description:s,category:m,since:c,isActive:u}),B=await this.firebaseStorageService.uploadFile({file:i,id:E.id,folder:F.PARTNER});return await this.partnerRepository.update({id:E.id,logoUrl:B}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as vf}from"@asteasolutions/zod-to-openapi";import zs from"zod";vf(zs);var Zs=zs.object({id:zs.uuid()}),To=class{constructor(e,r){this.partnerRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=Zs.parse({id:e.params.id}),i=await this.partnerRepository.findById(t);if(!i)throw new l("O parceiro n\xE3o existe.");return i.logoUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.logoUrl}),await this.partnerRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as jf}from"@asteasolutions/zod-to-openapi";import Vs from"zod";jf(Vs);var Do=Vs.object({id:Vs.uuid()}),Ao=class{constructor(e){this.partnerRepository=e}async handle(e,r){try{let{id:t}=Do.parse({id:e.params.id}),i=await this.partnerRepository.findById(t);if(!i)throw new l("O parceiro n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Ef}from"@asteasolutions/zod-to-openapi";import je from"zod";var xf=1,Mf=9;Ef(je);var Ks=je.object({page:je.coerce.number().min(1).default(xf),limit:je.coerce.number().min(1).default(Mf),name:je.string().optional(),description:je.string().optional(),category:je.string().optional(),isActive:je.coerce.boolean().optional(),orderBy:je.enum(["asc","desc"]).optional()}),Fo=class{constructor(e){this.partnerRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=Ks.parse(e.query),s=i*t-i,[m,c]=await Promise.all([this.partnerRepository.find({pagination:{offset:s,limit:i},filter:n}),this.partnerRepository.count({filter:n})]),u=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:u,offset:s,limit:i,partners:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Pf}from"@asteasolutions/zod-to-openapi";import ye from"zod";var op=2,rp=1024,Tf=rp*rp,Af=op*Tf;Pf(ye);var Ys=ye.object({id:ye.uuid(),name:ye.string().min(1,"Nome \xE9 obrigat\xF3rio").optional(),logo:ye.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=Af,`A imagem deve ter no m\xE1ximo ${op}MB.`).optional(),websiteUrl:ye.url("URL do site deve ser v\xE1lida").optional(),description:ye.string().optional(),category:ye.string().optional(),since:ye.coerce.date().optional(),isActive:ye.preprocess(o=>o==="true",ye.boolean().optional())}),Uo=class{constructor(e,r){this.partnerRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,name:i,logo:n,websiteUrl:s,description:m,category:c,since:u,isActive:E}=Ys.parse({id:e.params.id,...e.body,logo:e.file}),B=await this.partnerRepository.findById(t);if(!B)throw new l("O parceiro n\xE3o existe.");let H=B.logoUrl;if(n&&(H=await this.firebaseStorageService.uploadFile({file:n,id:t,folder:"images/partners"})),!H)throw new a("Logo URL \xE9 obrigat\xF3rio");return await this.partnerRepository.update({id:t,name:i,logoUrl:H,websiteUrl:s,description:m,category:c,since:u,isActive:E}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var ip=M.object({id:M.uuid(),name:M.string(),logoUrl:M.string(),description:M.string().nullable(),category:M.string().nullable(),since:M.date(),isActive:M.boolean(),createdAt:M.date(),updatedAt:M.date()}),np={method:"post",path:"/partner",tags:["Partners"],summary:"Create a new partner with logo upload",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:Hs}}}},responses:{201:{description:"Partner created successfully",summary:"Partner Created"},400:{description:"Invalid input data, missing required fields, or invalid logo format/size",summary:"Validation Error",content:{"application/json":{schema:M.object({errors:M.record(M.string(),M.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:M.object({message:M.string()})}}},409:{description:"Partner with this name already exists",summary:"Conflict",content:{"application/json":{schema:M.object({message:M.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:M.object({message:M.string()})}}}}},sp={method:"get",path:"/partner",tags:["Partners"],summary:"List all partners with pagination and filters",request:{query:Ks},responses:{200:{description:"List of partners retrieved successfully with pagination",summary:"Partners Retrieved",content:{"application/json":{schema:M.object({page:M.number(),totalPages:M.number(),offset:M.number(),limit:M.number(),partners:M.array(ip)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:M.object({errors:M.record(M.string(),M.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:M.object({message:M.string()})}}}}},ap={method:"get",path:"/partner/{id}",tags:["Partners"],summary:"Find partner by ID",request:{params:Do},responses:{200:{description:"Partner details retrieved successfully",summary:"Partner Retrieved",content:{"application/json":{schema:ip}}},400:{description:"Invalid partner ID format",summary:"Validation Error",content:{"application/json":{schema:M.object({errors:M.record(M.string(),M.string())})}}},404:{description:"Partner not found with the provided ID",summary:"Partner Not Found",content:{"application/json":{schema:M.object({message:M.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:M.object({message:M.string()})}}}}},mp={method:"put",path:"/partner/{id}",tags:["Partners"],summary:"Update partner with optional logo upload",security:[{bearerAuth:[]}],request:{params:Do,body:{content:{"multipart/form-data":{schema:Ys.omit({id:!0})}}}},responses:{200:{description:"Partner updated successfully",summary:"Partner Updated"},400:{description:"Invalid input data, partner ID format, or invalid logo format/size",summary:"Validation Error",content:{"application/json":{schema:M.object({errors:M.record(M.string(),M.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:M.object({message:M.string()})}}},404:{description:"Partner not found with the provided ID",summary:"Partner Not Found",content:{"application/json":{schema:M.object({message:M.string()})}}},409:{description:"Partner with this name already exists",summary:"Conflict",content:{"application/json":{schema:M.object({message:M.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:M.object({message:M.string()})}}}}},cp={method:"delete",path:"/partner/{id}",tags:["Partners"],summary:"Delete partner",security:[{bearerAuth:[]}],request:{params:Zs},responses:{200:{description:"Partner deleted successfully",summary:"Partner Deleted"},400:{description:"Invalid partner ID format",summary:"Validation Error",content:{"application/json":{schema:M.object({errors:M.record(M.string(),M.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:M.object({message:M.string()})}}},404:{description:"Partner not found with the provided ID",summary:"Partner Not Found",content:{"application/json":{schema:M.object({message:M.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:M.object({message:M.string()})}}}}};import{$Enums as pp}from"@prisma/client";import P from"zod";import{extendZodWithOpenApi as Df}from"@asteasolutions/zod-to-openapi";import{PendencyStatus as Ff}from"@prisma/client";import _e from"zod";Df(_e);var Bo=_e.object({userId:_e.uuid(),title:_e.string().min(1),description:_e.string().optional(),status:_e.enum(Ff).default("PENDING"),dueDate:_e.coerce.date().optional(),document:_e.any().refine(o=>o&&typeof o=="object"&&o.size>0,"Arquivo do documento \xE9 obrigat\xF3rio")}),qo=class{constructor(e,r,t){this.userRepository=e;this.pendencyRepository=r;this.firebaseStorageService=t}async handle(e,r){try{let{userId:t,title:i,description:n,status:s,dueDate:m,document:c}=Bo.parse({...e.body,userId:e.params.user_id,document:e.file});if(!await this.userRepository.findById(t))throw new te("O usu\xE1rio n\xE3o existe.");let E=await this.firebaseStorageService.uploadFile({file:c,id:t,folder:F.PENDENCY});return await this.pendencyRepository.create({userId:t,title:i,description:n,status:s,dueDate:m,documentUrl:E}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Uf}from"@asteasolutions/zod-to-openapi";import Xs from"zod";Uf(Xs);var $s=Xs.object({id:Xs.uuid()}),Oo=class{constructor(e,r){this.pendencyRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=$s.parse({id:e.params.pendency_id}),i=await this.pendencyRepository.findById(t);if(!i)throw new l("A pend\xEAncia n\xE3o existe.");return await Promise.all([this.pendencyRepository.deleteById(i.id),this.firebaseStorageService.deleteFile({fileUrl:i.documentUrl})]),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as qf}from"@asteasolutions/zod-to-openapi";import{PendencyStatus as Bf}from"@prisma/client";import Ee from"zod";var Of=1,Nf=6;qf(Ee);var Js=Ee.object({page:Ee.coerce.number().min(1).default(Of),limit:Ee.coerce.number().min(1).default(Nf),title:Ee.string().optional(),description:Ee.string().optional(),status:Ee.enum(Bf).default("PENDING"),userId:Ee.uuid().optional(),orderBy:Ee.enum(["asc","desc"]).default("desc")}),No=class{constructor(e){this.pendencyRepository=e}async handle(e,r){try{let{description:t,limit:i,orderBy:n,page:s,title:m,status:c,userId:u}=Js.parse(e.query),E=s*i-i,[B,H]=await Promise.all([this.pendencyRepository.find({pagination:{offset:E,limit:i},filter:{title:m,description:t,status:c,orderBy:n,userId:u}}),this.pendencyRepository.count({filter:{title:m,description:t,status:c,userId:u}})]),K=Math.max(Math.ceil(H/i),1);return r.status(200).json({page:s,totalPages:K,offset:E,limit:i,pendencies:B})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as kf}from"@asteasolutions/zod-to-openapi";import Qs from"zod";kf(Qs);var ea=Qs.object({pendencyId:Qs.uuid()}),ko=class{constructor(e){this.pendencyRepository=e}async handle(e,r){try{let{pendencyId:t}=ea.parse({pendencyId:e.params.pendency_id}),i=await this.pendencyRepository.findById(t);if(!i)throw new l("Pend\xEAncia n\xE3o encontrada.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Lf}from"@asteasolutions/zod-to-openapi";import{PendencyStatus as Gf}from"@prisma/client";import We from"zod";Lf(We);var Go=We.object({id:We.uuid(),title:We.string().min(1),description:We.string().optional(),status:We.enum(Gf),dueDate:We.coerce.date().optional(),document:We.any().refine(o=>o==null||typeof o=="object"&&typeof o.size=="number"&&(o.size===0||o.size>0),"Arquivo do documento \xE9 inv\xE1lido").optional()}),Lo=class{constructor(e,r){this.pendencyRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{document:t,id:i,...n}=Go.parse({...e.body,id:e.params.pendency_id,document:e.file}),s=await this.pendencyRepository.findById(i);if(!s)throw new te("A pend\xEAncia n\xE3o existe");let m=s.documentUrl;return t&&t.size>0&&(m=await this.firebaseStorageService.updateFile({file:t,id:s.userId,folder:F.PENDENCY,fileUrl:s.documentUrl})),await this.pendencyRepository.update({...n,id:i,documentUrl:m}),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var dp={method:"post",path:"/pendency/{user_id}",tags:["Pendencies"],summary:"Create pendency for user",security:[{bearerAuth:[]}],request:{params:Bo.pick({userId:!0}).transform(()=>({user_id:""})),body:{content:{"multipart/form-data":{schema:Bo.omit({userId:!0})}}}},responses:{201:{description:"Pendency created successfully for the user",summary:"Pendency Created",content:{"application/json":{schema:P.object({})}}},400:{description:"Invalid input data or file format",summary:"Validation Error",content:{"application/json":{schema:P.object({errors:P.record(P.string(),P.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:P.object({message:P.string()})}}}}},lp={method:"get",path:"/pendency",tags:["Pendencies"],summary:"List pendencies",security:[{bearerAuth:[]}],request:{query:Js},responses:{200:{description:"Paginated list of pendencies retrieved successfully",summary:"Pendencies Retrieved",content:{"application/json":{schema:P.object({page:P.number(),totalPages:P.number(),offset:P.number(),limit:P.number(),pendencies:P.array(P.object({id:P.string(),title:P.string(),description:P.string().nullable(),status:P.enum(pp.PendencyStatus),dueDate:P.date().nullable(),documentUrl:P.string(),userId:P.string(),createdAt:P.date(),updatedAt:P.date()}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:P.object({errors:P.record(P.string(),P.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:P.object({message:P.string()})}}}}},up={method:"get",path:"/pendency/{pendency_id}",tags:["Pendencies"],summary:"Find pendency by ID",security:[{bearerAuth:[]}],request:{params:ea},responses:{200:{description:"Pendency details retrieved successfully",summary:"Pendency Retrieved",content:{"application/json":{schema:P.object({id:P.string(),title:P.string(),description:P.string().nullable(),status:P.enum(pp.PendencyStatus),dueDate:P.date().nullable(),documentUrl:P.string(),userId:P.string(),createdAt:P.date(),updatedAt:P.date()}).nullable()}}},400:{description:"Invalid pendency ID format",summary:"Validation Error",content:{"application/json":{schema:P.object({errors:P.record(P.string(),P.string())})}}},404:{description:"Pendency not found with the provided ID",summary:"Pendency Not Found",content:{"application/json":{schema:P.object({message:P.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:P.object({message:P.string()})}}}}},gp={method:"put",path:"/pendency/{pendency_id}",tags:["Pendencies"],summary:"Update pendency",security:[{bearerAuth:[]}],request:{params:Go.pick({id:!0}).transform(()=>({pendency_id:""})),body:{content:{"multipart/form-data":{schema:Go.omit({id:!0})}}}},responses:{204:{description:"Pendency updated successfully",summary:"Pendency Updated"},400:{description:"Invalid input data or pendency does not exist",summary:"Validation Error",content:{"application/json":{schema:P.object({errors:P.record(P.string(),P.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:P.object({message:P.string()})}}}}},yp={method:"delete",path:"/pendency/{pendency_id}",tags:["Pendencies"],summary:"Delete pendency",security:[{bearerAuth:[]}],request:{params:$s},responses:{204:{description:"Pendency deleted successfully",summary:"Pendency Deleted"},400:{description:"Invalid pendency ID format",summary:"Validation Error",content:{"application/json":{schema:P.object({errors:P.record(P.string(),P.string())})}}},404:{description:"Pendency not found with the provided ID",summary:"Pendency Not Found",content:{"application/json":{schema:P.object({message:P.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:P.object({message:P.string()})}}}}};import{RegimentStatus as oh}from"@prisma/client";import x from"zod";import{extendZodWithOpenApi as _f}from"@asteasolutions/zod-to-openapi";import{RegimentStatus as hp}from"@prisma/client";import tt from"zod";var Rp=10,fp=1024,Wf=fp*fp,Hf=Rp*Wf;_f(tt);var ta=tt.object({title:tt.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio"),version:tt.string().min(1,"Vers\xE3o \xE9 obrigat\xF3ria"),publishedAt:tt.coerce.date(),document:tt.any().refine(o=>o==null||typeof o!="object"||typeof o.size!="number"?!1:o.size<=Hf,`O documento deve ter no m\xE1ximo ${Rp}MB.`),status:tt.enum(hp).optional()}),_o=class{constructor(e,r){this.regimentRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{title:t,version:i,publishedAt:n,document:s,status:m}=ta.parse({...e.body,document:e.file}),c=await this.regimentRepository.create({title:t,version:i,publishedAt:n,documentUrl:"",status:m??hp.IN_FORCE}),u=await this.firebaseStorageService.uploadFile({file:s,id:c.id,folder:F.REGIMENT});return await this.regimentRepository.update({id:c.id,documentUrl:u}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as zf}from"@asteasolutions/zod-to-openapi";import ra from"zod";zf(ra);var oa=ra.object({id:ra.uuid()}),Wo=class{constructor(e,r){this.regimentRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=oa.parse({id:e.params.id}),i=await this.regimentRepository.findById(t);if(!i)throw new l("O regimento n\xE3o existe.");return i.documentUrl&&await this.firebaseStorageService.deleteFile({fileUrl:i.documentUrl}),await this.regimentRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Zf}from"@asteasolutions/zod-to-openapi";import ia from"zod";Zf(ia);var zo=ia.object({id:ia.uuid()}),Ho=class{constructor(e){this.regimentRepository=e}async handle(e,r){try{let{id:t}=zo.parse({id:e.params.id}),i=await this.regimentRepository.findById(t);if(!i)throw new l("O regimento n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Vf}from"@asteasolutions/zod-to-openapi";import{RegimentStatus as Kf}from"@prisma/client";import na from"zod";Vf(na);var sa=na.object({status:na.enum(Kf)}),Zo=class{constructor(e){this.regimentRepository=e}async handle(e,r){try{let{status:t}=sa.parse({status:e.params.status}),i=await this.regimentRepository.findByStatus(t);return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Yf}from"@asteasolutions/zod-to-openapi";import{RegimentStatus as Xf}from"@prisma/client";import rt from"zod";var $f=1,Jf=10;Yf(rt);var aa=rt.object({page:rt.coerce.number().min(1).default($f),limit:rt.coerce.number().min(1).default(Jf),title:rt.string().optional(),status:rt.enum(Xf).optional(),orderBy:rt.enum(["asc","desc"]).optional()}),Vo=class{constructor(e){this.regimentRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=aa.parse(e.query),s=i*t-i,[m,c]=await Promise.all([this.regimentRepository.find({pagination:{offset:s,limit:i},filter:n}),this.regimentRepository.count({filter:n})]),u=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:u,offset:s,limit:i,regiments:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Qf}from"@asteasolutions/zod-to-openapi";import{RegimentStatus as eh}from"@prisma/client";import He from"zod";var Cp=10,Ip=1024,th=Ip*Ip,rh=Cp*th;Qf(He);var ma=He.object({id:He.uuid(),title:He.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio").optional(),version:He.string().min(1,"Vers\xE3o \xE9 obrigat\xF3ria").optional(),publishedAt:He.coerce.date().optional(),document:He.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=rh,`O documento deve ter no m\xE1ximo ${Cp}MB.`).optional(),status:He.enum(eh).optional()}),Ko=class{constructor(e,r){this.regimentRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,title:i,version:n,publishedAt:s,document:m,status:c}=ma.parse({id:e.params.id,...e.body,document:e.file}),u=await this.regimentRepository.findById(t);if(!u)throw new l("O regimento n\xE3o existe.");let E=u.documentUrl;return m&&(u.documentUrl&&await this.firebaseStorageService.deleteFile({fileUrl:u.documentUrl}),E=await this.firebaseStorageService.uploadFile({file:m,id:t,folder:F.REGIMENT})),await this.regimentRepository.update({id:t,title:i,version:n,publishedAt:s,documentUrl:E??void 0,status:c}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var ca=x.object({id:x.uuid(),title:x.string(),version:x.string(),publishedAt:x.date(),documentUrl:x.string(),status:x.enum(oh),createdAt:x.date(),updatedAt:x.date()}),bp={method:"post",path:"/regiment",tags:["Regiments"],summary:"Create a new regiment with document upload",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:ta}}}},responses:{201:{description:"Regiment created successfully",summary:"Regiment Created"},400:{description:"Invalid input data, missing required fields, or invalid document format/size",summary:"Validation Error",content:{"application/json":{schema:x.object({errors:x.record(x.string(),x.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:x.object({message:x.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:x.object({message:x.string()})}}}}},wp={method:"get",path:"/regiment",tags:["Regiments"],summary:"List all regiments with pagination and filters",request:{query:aa},responses:{200:{description:"List of regiments retrieved successfully with pagination",summary:"Regiments Retrieved",content:{"application/json":{schema:x.object({page:x.number(),totalPages:x.number(),offset:x.number(),limit:x.number(),regiments:x.array(ca)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:x.object({errors:x.record(x.string(),x.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:x.object({message:x.string()})}}}}},Sp={method:"get",path:"/regiment/{id}",tags:["Regiments"],summary:"Find regiment by ID",request:{params:zo},responses:{200:{description:"Regiment details retrieved successfully",summary:"Regiment Retrieved",content:{"application/json":{schema:ca}}},400:{description:"Invalid regiment ID format",summary:"Validation Error",content:{"application/json":{schema:x.object({errors:x.record(x.string(),x.string())})}}},404:{description:"Regiment not found with the provided ID",summary:"Regiment Not Found",content:{"application/json":{schema:x.object({message:x.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:x.object({message:x.string()})}}}}},vp={method:"get",path:"/regiment/status/{status}",tags:["Regiments"],summary:"Find regiments by status",request:{params:sa},responses:{200:{description:"Regiments retrieved successfully by status",summary:"Regiments Retrieved by Status",content:{"application/json":{schema:x.array(ca)}}},400:{description:"Invalid status parameter provided",summary:"Validation Error",content:{"application/json":{schema:x.object({errors:x.record(x.string(),x.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:x.object({message:x.string()})}}}}},jp={method:"put",path:"/regiment/{id}",tags:["Regiments"],summary:"Update regiment with optional document upload",security:[{bearerAuth:[]}],request:{params:zo,body:{content:{"multipart/form-data":{schema:ma.omit({id:!0})}}}},responses:{200:{description:"Regiment updated successfully",summary:"Regiment Updated"},400:{description:"Invalid input data, regiment ID format, or invalid document format/size",summary:"Validation Error",content:{"application/json":{schema:x.object({errors:x.record(x.string(),x.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:x.object({message:x.string()})}}},404:{description:"Regiment not found with the provided ID",summary:"Regiment Not Found",content:{"application/json":{schema:x.object({message:x.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:x.object({message:x.string()})}}}}},Ep={method:"delete",path:"/regiment/{id}",tags:["Regiments"],summary:"Delete regiment",security:[{bearerAuth:[]}],request:{params:oa},responses:{200:{description:"Regiment deleted successfully",summary:"Regiment Deleted"},400:{description:"Invalid regiment ID format",summary:"Validation Error",content:{"application/json":{schema:x.object({errors:x.record(x.string(),x.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:x.object({message:x.string()})}}},404:{description:"Regiment not found with the provided ID",summary:"Regiment Not Found",content:{"application/json":{schema:x.object({message:x.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:x.object({message:x.string()})}}}}};import k from"zod";import{extendZodWithOpenApi as ih}from"@asteasolutions/zod-to-openapi";import Yt from"zod";var Mp=5,xp=1024,nh=xp*xp,sh=Mp*nh;ih(Yt);var pa=Yt.object({caption:Yt.string().optional(),image:Yt.any().refine(o=>o==null||typeof o!="object"||typeof o.size!="number"?!1:o.size<=sh,`A imagem deve ter no m\xE1ximo ${Mp}MB.`),congressId:Yt.uuid()}),Yo=class{constructor(e,r,t){this.regionalCongressGalleryRepository=e;this.regionalCongressRepository=r;this.firebaseStorageService=t}async handle(e,r){try{let{caption:t,image:i,congressId:n}=pa.parse({...e.body,...e.params,image:e.file});if(!await this.regionalCongressRepository.findById(n))throw new l("O congresso n\xE3o existe.");let m=await this.regionalCongressGalleryRepository.create({caption:t,congressId:n,imageUrl:""}),c=await this.firebaseStorageService.uploadFile({file:i,id:m.id,folder:F.GALLERY});return await this.regionalCongressGalleryRepository.update({id:m.id,imageUrl:c}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as ah}from"@asteasolutions/zod-to-openapi";import da from"zod";ah(da);var $o=da.object({id:da.uuid("ID inv\xE1lido")}),Xo=class{constructor(e){this.regionalCongressGalleryRepository=e}async handle(e,r){try{let{id:t}=$o.parse(e.params);if(!await this.regionalCongressGalleryRepository.findById(t))throw new l("Item de galeria n\xE3o encontrado");return await this.regionalCongressGalleryRepository.deleteById(t),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as mh}from"@asteasolutions/zod-to-openapi";import Et from"zod";mh(Et);var la=Et.object({congressId:Et.uuid("ID do congresso inv\xE1lido"),page:Et.coerce.number().int().positive().default(1),limit:Et.coerce.number().int().positive().default(10),caption:Et.string().optional()}),Jo=class{constructor(e){this.regionalCongressGalleryRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=la.parse({...e.params,...e.query}),s=(t-1)*i,m=await this.regionalCongressGalleryRepository.findByCongressId({pagination:{offset:s,limit:i},filter:n});if(!m)throw new l("Itens de galeria n\xE3o encontrados");let c=await this.regionalCongressGalleryRepository.count({filter:n});return r.status(200).json({data:m,pagination:{page:t,limit:i,total:c,totalPages:Math.ceil(c/i)}})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as ch}from"@asteasolutions/zod-to-openapi";import Xt from"zod";var Tp=5,Pp=1024,ph=Pp*Pp,dh=Tp*ph;ch(Xt);var ua=Xt.object({id:Xt.string().uuid("ID inv\xE1lido"),caption:Xt.string().optional(),image:Xt.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=dh,`A imagem deve ter no m\xE1ximo ${Tp}MB.`).optional()}),Qo=class{constructor(e,r){this.regionalCongressGalleryRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,caption:i,image:n}=ua.parse({...e.params,...e.body,image:e.file});if(!await this.regionalCongressGalleryRepository.findById(t))throw new l("Item de galeria n\xE3o encontrado");let m;return n&&(m=await this.firebaseStorageService.uploadFile({file:n,id:t,folder:F.GALLERY})),await this.regionalCongressGalleryRepository.update({id:t,caption:i,...m&&{imageUrl:m}}),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var lh=k.object({id:k.uuid(),imageUrl:k.string(),caption:k.string().nullable(),congressId:k.uuid()}),Ap={method:"post",path:"/regional-congress/{congressId}/gallery",tags:["Regional Congresses"],summary:"Create a new congress gallery image",security:[{bearerAuth:[]}],request:{params:k.object({congressId:k.uuid()}),body:{content:{"application/json":{schema:pa.omit({congressId:!0})}}}},responses:{201:{description:"Congress gallery image created successfully",summary:"Congress Gallery Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:k.object({errors:k.record(k.string(),k.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:k.object({message:k.string()})}}},404:{description:"Congress not found with the provided ID",summary:"Congress Not Found",content:{"application/json":{schema:k.object({message:k.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:k.object({message:k.string()})}}}}},Dp={method:"get",path:"/regional-congress/{congressId}/gallery",tags:["Regional Congresses"],summary:"Find congress gallery images by congress ID",request:{params:la},responses:{200:{description:"Congress gallery images retrieved successfully by congress ID",summary:"Congress Galleries Retrieved",content:{"application/json":{schema:k.array(lh)}}},400:{description:"Invalid congress ID parameter provided",summary:"Validation Error",content:{"application/json":{schema:k.object({errors:k.record(k.string(),k.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:k.object({message:k.string()})}}}}},Fp={method:"put",path:"/regional-congress/gallery/{id}",tags:["Regional Congresses"],summary:"Update congress gallery image",security:[{bearerAuth:[]}],request:{params:$o,body:{content:{"application/json":{schema:ua.omit({id:!0})}}}},responses:{200:{description:"Congress gallery image updated successfully",summary:"Congress Gallery Updated"},400:{description:"Invalid input data or gallery ID format",summary:"Validation Error",content:{"application/json":{schema:k.object({errors:k.record(k.string(),k.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:k.object({message:k.string()})}}},404:{description:"Congress gallery image not found with the provided ID",summary:"Congress Gallery Not Found",content:{"application/json":{schema:k.object({message:k.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:k.object({message:k.string()})}}}}},Up={method:"delete",path:"/regional-congress/gallery/{id}",tags:["Regional Congresses"],summary:"Delete congress gallery image",security:[{bearerAuth:[]}],request:{params:$o},responses:{200:{description:"Congress gallery image deleted successfully",summary:"Congress Gallery Deleted"},400:{description:"Invalid gallery ID format",summary:"Validation Error",content:{"application/json":{schema:k.object({errors:k.record(k.string(),k.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:k.object({message:k.string()})}}},404:{description:"Congress gallery image not found with the provided ID",summary:"Congress Gallery Not Found",content:{"application/json":{schema:k.object({message:k.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:k.object({message:k.string()})}}}}};import L from"zod";import{extendZodWithOpenApi as uh}from"@asteasolutions/zod-to-openapi";import $t from"zod";var Bp=2,qp=1024,gh=qp*qp,yh=Bp*gh;uh($t);var ga=$t.object({name:$t.string().min(1,"Nome \xE9 obrigat\xF3rio"),logo:$t.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=yh,`A imagem deve ter no m\xE1ximo ${Bp}MB.`).optional(),congressId:$t.uuid()}),ei=class{constructor(e,r,t){this.regionalCongressPartnerRepository=e;this.regionalCongressRepository=r;this.firebaseStorageService=t}async handle(e,r){try{let{name:t,logo:i,congressId:n}=ga.parse({...e.body,...e.params,logo:e.file});if(!await this.regionalCongressRepository.findById(n))throw new l("O congresso n\xE3o existe.");let m=await this.regionalCongressPartnerRepository.create({name:t,congressId:n}),c;return i&&(c=await this.firebaseStorageService.uploadFile({file:i,id:m.id,folder:F.PARTNER}),await this.regionalCongressPartnerRepository.update({id:m.id,logoUrl:c})),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as fh}from"@asteasolutions/zod-to-openapi";import ya from"zod";fh(ya);var ri=ya.object({id:ya.string().uuid("ID inv\xE1lido")}),ti=class{constructor(e){this.regionalCongressPartnerRepository=e}async handle(e,r){try{let{id:t}=ri.parse(e.params);if(!await this.regionalCongressPartnerRepository.findById(t))throw new l("Parceiro n\xE3o encontrado");return await this.regionalCongressPartnerRepository.deleteById(t),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as hh}from"@asteasolutions/zod-to-openapi";import xt from"zod";hh(xt);var fa=xt.object({congressId:xt.uuid("ID do congresso inv\xE1lido"),page:xt.coerce.number().int().positive().optional(),limit:xt.coerce.number().int().positive().optional(),name:xt.string().optional()}),oi=class{constructor(e){this.regionalCongressPartnerRepository=e}async handle(e,r){try{let{congressId:t,page:i,limit:n,name:s}=fa.parse({...e.params,...e.query}),m=i!==void 0&&n!==void 0,c=m?{offset:(i-1)*n,limit:n}:void 0,u=await this.regionalCongressPartnerRepository.findByCongressId({pagination:c,filter:{congressId:t,name:s}});if(!u)throw new l("Parceiros n\xE3o encontrados");if(!m)return r.status(200).json(u);let E=await this.regionalCongressPartnerRepository.count({filter:{congressId:t,name:s}});return r.status(200).json({data:u,pagination:{page:i,limit:n,total:E,totalPages:Math.ceil(E/n)}})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Rh}from"@asteasolutions/zod-to-openapi";import Jt from"zod";var Np=2,Op=1024,Ih=Op*Op,Ch=Np*Ih;Rh(Jt);var ha=Jt.object({id:Jt.string().uuid("ID inv\xE1lido"),name:Jt.string().min(1,"Nome \xE9 obrigat\xF3rio").optional(),logo:Jt.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=Ch,`A imagem deve ter no m\xE1ximo ${Np}MB.`).optional()}),ii=class{constructor(e,r){this.regionalCongressPartnerRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,name:i,logo:n}=ha.parse({...e.params,...e.body,logo:e.file});if(!await this.regionalCongressPartnerRepository.findById(t))throw new l("Parceiro n\xE3o encontrado");let m;return n&&(m=await this.firebaseStorageService.uploadFile({file:n,id:t,folder:F.PARTNER})),await this.regionalCongressPartnerRepository.update({id:t,name:i,...m&&{logoUrl:m}}),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var bh=L.object({id:L.uuid(),name:L.string(),logoUrl:L.string().nullable(),congressId:L.uuid()}),kp={method:"post",path:"/regional-congress/{congressId}/partner",tags:["Regional Congresses"],summary:"Create a new congress partner",security:[{bearerAuth:[]}],request:{params:L.object({congressId:L.uuid()}),body:{content:{"application/json":{schema:ga.omit({congressId:!0})}}}},responses:{201:{description:"Congress partner created successfully",summary:"Congress Partner Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:L.object({errors:L.record(L.string(),L.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:L.object({message:L.string()})}}},404:{description:"Congress not found with the provided ID",summary:"Congress Not Found",content:{"application/json":{schema:L.object({message:L.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:L.object({message:L.string()})}}}}},Lp={method:"get",path:"/regional-congress/{congressId}/partner",tags:["Regional Congresses"],summary:"Find congress partners by congress ID",request:{params:fa},responses:{200:{description:"Congress partners retrieved successfully by congress ID",summary:"Congress Partners Retrieved",content:{"application/json":{schema:L.array(bh)}}},400:{description:"Invalid congress ID parameter provided",summary:"Validation Error",content:{"application/json":{schema:L.object({errors:L.record(L.string(),L.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:L.object({message:L.string()})}}}}},Gp={method:"put",path:"/regional-congress/partner/{id}",tags:["Regional Congresses"],summary:"Update congress partner",security:[{bearerAuth:[]}],request:{params:ri,body:{content:{"application/json":{schema:ha.omit({id:!0})}}}},responses:{200:{description:"Congress partner updated successfully",summary:"Congress Partner Updated"},400:{description:"Invalid input data or partner ID format",summary:"Validation Error",content:{"application/json":{schema:L.object({errors:L.record(L.string(),L.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:L.object({message:L.string()})}}},404:{description:"Congress partner not found with the provided ID",summary:"Congress Partner Not Found",content:{"application/json":{schema:L.object({message:L.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:L.object({message:L.string()})}}}}},_p={method:"delete",path:"/regional-congress/partner/{id}",tags:["Regional Congresses"],summary:"Delete congress partner",security:[{bearerAuth:[]}],request:{params:ri},responses:{200:{description:"Congress partner deleted successfully",summary:"Congress Partner Deleted"},400:{description:"Invalid partner ID format",summary:"Validation Error",content:{"application/json":{schema:L.object({errors:L.record(L.string(),L.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:L.object({message:L.string()})}}},404:{description:"Congress partner not found with the provided ID",summary:"Congress Partner Not Found",content:{"application/json":{schema:L.object({message:L.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:L.object({message:L.string()})}}}}};import d from"zod";import{extendZodWithOpenApi as wh}from"@asteasolutions/zod-to-openapi";import Z from"zod";wh(Z);var Ra=Z.object({title:Z.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio"),edition:Z.coerce.number().int().positive("Edi\xE7\xE3o deve ser um n\xFAmero positivo"),startDate:Z.coerce.date(),endDate:Z.coerce.date(),description:Z.string().optional(),location:Z.string().optional(),congressLink:Z.union([Z.url("Link do congresso deve ser uma URL v\xE1lida"),Z.literal("")]),noticeUrl:Z.union([Z.url("URL do edital deve ser uma URL v\xE1lida"),Z.literal("")]),scheduleUrl:Z.union([Z.url("URL do cronograma deve ser uma URL v\xE1lida"),Z.literal("")]),programUrl:Z.union([Z.url("URL da programa\xE7\xE3o deve ser uma URL v\xE1lida"),Z.literal("")]),adminReportUrl:Z.union([Z.url("URL do relat\xF3rio administrativo deve ser uma URL v\xE1lida"),Z.literal("")]),proceedingsUrl:Z.union([Z.url("URL dos anais deve ser uma URL v\xE1lida"),Z.literal("")])}).refine(o=>o.endDate>=o.startDate,{message:"Data de t\xE9rmino deve ser posterior ou igual \xE0 data de in\xEDcio",path:["endDate"]}),ni=class{constructor(e){this.regionalCongressRepository=e}async handle(e,r){try{let t=Ra.parse(e.body);return await this.regionalCongressRepository.create(t),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Sh}from"@asteasolutions/zod-to-openapi";import Ia from"zod";Sh(Ia);var Ca=Ia.object({id:Ia.string().uuid("ID inv\xE1lido")}),si=class{constructor(e){this.regionalCongressRepository=e}async handle(e,r){try{let{id:t}=Ca.parse(e.params);if(!await this.regionalCongressRepository.findById(t))throw new l("Congresso regional n\xE3o encontrado");return await this.regionalCongressRepository.deleteById(t),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as vh}from"@asteasolutions/zod-to-openapi";import ba from"zod";vh(ba);var wa=ba.object({edition:ba.coerce.number().int().positive("Edi\xE7\xE3o deve ser um n\xFAmero positivo")}),ai=class{constructor(e){this.regionalCongressRepository=e}async handle(e,r){try{let{edition:t}=wa.parse(e.params),i=await this.regionalCongressRepository.findByEdition(t);if(!i||i.length===0)throw new l("Congresso regional n\xE3o encontrado");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as jh}from"@asteasolutions/zod-to-openapi";import Sa from"zod";jh(Sa);var ci=Sa.object({id:Sa.string().uuid("ID inv\xE1lido")}),mi=class{constructor(e){this.regionalCongressRepository=e}async handle(e,r){try{let{id:t}=ci.parse(e.params),i=await this.regionalCongressRepository.findById(t);if(!i)throw new l("Congresso regional n\xE3o encontrado");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Eh}from"@asteasolutions/zod-to-openapi";import ze from"zod";Eh(ze);var va=ze.object({page:ze.coerce.number().int().positive().default(1),limit:ze.coerce.number().int().positive().default(10),title:ze.string().optional(),edition:ze.coerce.number().int().positive().optional(),location:ze.string().optional(),orderBy:ze.enum(["asc","desc"]).optional().default("desc")}),pi=class{constructor(e){this.regionalCongressRepository=e}async handle(e,r){try{let{page:t,limit:i,orderBy:n,...s}=va.parse(e.query),m=(t-1)*i,c=await this.regionalCongressRepository.find({pagination:{offset:m,limit:i},filter:{...s,orderBy:n}});if(!c)throw new l("Congressos regionais n\xE3o encontrados");let u=await this.regionalCongressRepository.count({filter:s});return r.status(200).json({data:c,pagination:{page:t,limit:i,total:u,totalPages:Math.ceil(u/i)}})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as xh}from"@asteasolutions/zod-to-openapi";import z from"zod";xh(z);var ja=z.object({id:z.string().uuid("ID inv\xE1lido"),title:z.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio").optional(),edition:z.coerce.number().int().positive("Edi\xE7\xE3o deve ser um n\xFAmero positivo").optional(),startDate:z.coerce.date().optional(),endDate:z.coerce.date().optional(),description:z.string().optional(),location:z.string().optional(),congressLink:z.union([z.url("Link do congresso deve ser uma URL v\xE1lida"),z.literal("")]),noticeUrl:z.union([z.url("URL do edital deve ser uma URL v\xE1lida"),z.literal("")]),scheduleUrl:z.union([z.url("URL do cronograma deve ser uma URL v\xE1lida"),z.literal("")]),programUrl:z.union([z.url("URL da programa\xE7\xE3o deve ser uma URL v\xE1lida"),z.literal("")]),adminReportUrl:z.union([z.url("URL do relat\xF3rio administrativo deve ser uma URL v\xE1lida"),z.literal("")]),proceedingsUrl:z.union([z.url("URL dos anais deve ser uma URL v\xE1lida"),z.literal("")])}).refine(o=>o.startDate&&o.endDate?o.endDate>=o.startDate:!0,{message:"Data de t\xE9rmino deve ser posterior ou igual \xE0 data de in\xEDcio",path:["endDate"]}),di=class{constructor(e){this.regionalCongressRepository=e}async handle(e,r){try{let{id:t}=z.object({id:z.string().uuid()}).parse(e.params);if(!await this.regionalCongressRepository.findById(t))throw new l("Congresso regional n\xE3o encontrado");let n=ja.parse({id:t,...e.body});return await this.regionalCongressRepository.update(n),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Mh=9,Ph=d.object({image:d.any().openapi({type:"string",format:"binary"}),caption:d.string().optional()}),Th=d.object({image:d.any().openapi({type:"string",format:"binary"}).optional(),caption:d.string().optional()}),Ah=d.object({id:d.uuid(),name:d.string(),logoUrl:d.string().nullable(),congressId:d.uuid()}),Ea=d.object({id:d.uuid(),imageUrl:d.string(),caption:d.string().nullable(),congressId:d.uuid()}),xa=d.object({id:d.uuid(),title:d.string(),edition:d.number(),startDate:d.date(),endDate:d.date(),description:d.string().nullable(),location:d.string().nullable(),congressLink:d.string().nullable(),noticeUrl:d.string().nullable(),scheduleUrl:d.string().nullable(),programUrl:d.string().nullable(),adminReportUrl:d.string().nullable(),proceedingsUrl:d.string().nullable(),partners:d.array(Ah),galleries:d.array(Ea),createdAt:d.date(),updatedAt:d.date()}),Wp={method:"post",path:"/regional-congress",tags:["Regional Congresses"],summary:"Create a new regional congress",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:Ra}}}},responses:{201:{description:"Regional congress created successfully",summary:"Regional Congress Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:d.object({errors:d.record(d.string(),d.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:d.object({message:d.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:d.object({message:d.string()})}}}}},Hp={method:"get",path:"/regional-congress",tags:["Regional Congresses"],summary:"List all regional congresses with pagination and filters",request:{query:va},responses:{200:{description:"List of regional congresses retrieved successfully with pagination",summary:"Regional Congresses Retrieved",content:{"application/json":{schema:d.object({page:d.number(),totalPages:d.number(),offset:d.number(),limit:d.number(),congresses:d.array(xa)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:d.object({errors:d.record(d.string(),d.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:d.object({message:d.string()})}}}}},zp={method:"get",path:"/regional-congress/{id}",tags:["Regional Congresses"],summary:"Find regional congress by ID",request:{params:ci},responses:{200:{description:"Regional congress details retrieved successfully",summary:"Regional Congress Retrieved",content:{"application/json":{schema:xa}}},400:{description:"Invalid regional congress ID format",summary:"Validation Error",content:{"application/json":{schema:d.object({errors:d.record(d.string(),d.string())})}}},404:{description:"Regional congress not found with the provided ID",summary:"Regional Congress Not Found",content:{"application/json":{schema:d.object({message:d.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:d.object({message:d.string()})}}}}},Zp={method:"get",path:"/regional-congress/edition/{edition}",tags:["Regional Congresses"],summary:"Find regional congresses by edition",request:{params:wa},responses:{200:{description:"Regional congresses retrieved successfully by edition",summary:"Regional Congresses Retrieved by Edition",content:{"application/json":{schema:d.array(xa)}}},400:{description:"Invalid edition parameter provided",summary:"Validation Error",content:{"application/json":{schema:d.object({errors:d.record(d.string(),d.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:d.object({message:d.string()})}}}}},Vp={method:"put",path:"/regional-congress/{id}",tags:["Regional Congresses"],summary:"Update regional congress",security:[{bearerAuth:[]}],request:{params:ci,body:{content:{"application/json":{schema:ja.omit({id:!0})}}}},responses:{200:{description:"Regional congress updated successfully",summary:"Regional Congress Updated"},400:{description:"Invalid input data or regional congress ID format",summary:"Validation Error",content:{"application/json":{schema:d.object({errors:d.record(d.string(),d.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:d.object({message:d.string()})}}},404:{description:"Regional congress not found with the provided ID",summary:"Regional Congress Not Found",content:{"application/json":{schema:d.object({message:d.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:d.object({message:d.string()})}}}}},Kp={method:"delete",path:"/regional-congress/{id}",tags:["Regional Congresses"],summary:"Delete regional congress",security:[{bearerAuth:[]}],request:{params:Ca},responses:{200:{description:"Regional congress deleted successfully",summary:"Regional Congress Deleted"},400:{description:"Invalid regional congress ID format",summary:"Validation Error",content:{"application/json":{schema:d.object({errors:d.record(d.string(),d.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:d.object({message:d.string()})}}},404:{description:"Regional congress not found with the provided ID",summary:"Regional Congress Not Found",content:{"application/json":{schema:d.object({message:d.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:d.object({message:d.string()})}}}}},LA={method:"post",path:"/regional-congress/{congressId}/gallery",tags:["Regional Congress Gallery"],summary:"Create a new gallery image for a congress",security:[{bearerAuth:[]}],request:{params:d.object({congressId:d.uuid()}),body:{content:{"multipart/form-data":{schema:Ph}}}},responses:{201:{description:"Gallery image created successfully",summary:"Gallery Image Created"},400:{description:"Invalid input data, missing required fields, or invalid image format/size",summary:"Validation Error",content:{"application/json":{schema:d.object({errors:d.record(d.string(),d.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:d.object({message:d.string()})}}},404:{description:"Congress not found with the provided ID",summary:"Congress Not Found",content:{"application/json":{schema:d.object({message:d.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:d.object({message:d.string()})}}}}},GA={method:"get",path:"/regional-congress/{congressId}/gallery",tags:["Regional Congress Gallery"],summary:"List all gallery images for a congress with pagination",request:{params:d.object({congressId:d.uuid()}),query:d.object({page:d.coerce.number().min(1).default(1),limit:d.coerce.number().min(1).default(Mh),caption:d.string().optional()})},responses:{200:{description:"Gallery images retrieved successfully with pagination",summary:"Gallery Images Retrieved",content:{"application/json":{schema:d.object({page:d.number(),totalPages:d.number(),offset:d.number(),limit:d.number(),galleries:d.array(Ea)})}}},400:{description:"Invalid congress ID format or query parameters",summary:"Validation Error",content:{"application/json":{schema:d.object({errors:d.record(d.string(),d.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:d.object({message:d.string()})}}}}},_A={method:"get",path:"/regional-congress/gallery/{id}",tags:["Regional Congress Gallery"],summary:"Find a gallery image by ID",request:{params:d.object({id:d.uuid()})},responses:{200:{description:"Gallery image retrieved successfully",summary:"Gallery Image Retrieved",content:{"application/json":{schema:Ea}}},400:{description:"Invalid gallery image ID format",summary:"Validation Error",content:{"application/json":{schema:d.object({errors:d.record(d.string(),d.string())})}}},404:{description:"Gallery image not found with the provided ID",summary:"Gallery Image Not Found",content:{"application/json":{schema:d.object({message:d.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:d.object({message:d.string()})}}}}},WA={method:"put",path:"/regional-congress/gallery/{id}",tags:["Regional Congress Gallery"],summary:"Update a gallery image with optional image upload",security:[{bearerAuth:[]}],request:{params:d.object({id:d.uuid()}),body:{content:{"multipart/form-data":{schema:Th}}}},responses:{200:{description:"Gallery image updated successfully",summary:"Gallery Image Updated"},400:{description:"Invalid input data, gallery ID format, or invalid image format/size",summary:"Validation Error",content:{"application/json":{schema:d.object({errors:d.record(d.string(),d.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:d.object({message:d.string()})}}},404:{description:"Gallery image not found with the provided ID",summary:"Gallery Image Not Found",content:{"application/json":{schema:d.object({message:d.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:d.object({message:d.string()})}}}}},HA={method:"delete",path:"/regional-congress/gallery/{id}",tags:["Regional Congress Gallery"],summary:"Delete a gallery image",security:[{bearerAuth:[]}],request:{params:d.object({id:d.uuid()})},responses:{200:{description:"Gallery image deleted successfully",summary:"Gallery Image Deleted"},400:{description:"Invalid gallery ID format",summary:"Validation Error",content:{"application/json":{schema:d.object({errors:d.record(d.string(),d.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:d.object({message:d.string()})}}},404:{description:"Gallery image not found with the provided ID",summary:"Gallery Image Not Found",content:{"application/json":{schema:d.object({message:d.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:d.object({message:d.string()})}}}}};import{$Enums as qa}from"@prisma/client";import R from"zod";import{extendZodWithOpenApi as Dh}from"@asteasolutions/zod-to-openapi";import{Degree as Fh,Seniority as Uh}from"@prisma/client";import pe from"zod";Dh(pe);var Ma=pe.object({registrationNumber:pe.string(),mainEtps:pe.string().optional(),formations:pe.string().optional(),degrees:pe.array(pe.enum(Fh)),occupations:pe.string(),seniority:pe.enum(Uh),institutions:pe.string(),biography:pe.string().optional(),userId:pe.string()}),li=class{constructor(e){this.researcherRepository=e}async handle(e,r){try{let{registrationNumber:t,mainEtps:i,formations:n,degrees:s,occupations:m,seniority:c,institutions:u,biography:E,userId:B}=Ma.parse(e.body);if(await this.researcherRepository.findByRegistrationNumber(t))throw new $("J\xE1 existe um pesquisador cadastrado com este n\xFAmero de registro.");if(await this.researcherRepository.findByUserId(B))throw new $("Usu\xE1rio j\xE1 possui um perfil de pesquisador.");return await this.researcherRepository.create({registrationNumber:t,mainEtps:i,formations:n,degrees:s,occupations:m,seniority:c,institutions:u,biography:E,userId:B}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as qh}from"@asteasolutions/zod-to-openapi";import Pa from"zod";qh(Pa);var Ta=Pa.object({id:Pa.uuid()}),ui=class{constructor(e){this.researcherRepository=e}async handle(e,r){try{let{id:t}=Ta.parse({id:e.params.id});if(!await this.researcherRepository.findById(t))throw new l("O pesquisador n\xE3o existe.");return await this.researcherRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Bh}from"@asteasolutions/zod-to-openapi";import Aa from"zod";Bh(Aa);var yi=Aa.object({id:Aa.uuid()}),gi=class{constructor(e){this.researcherRepository=e}async handle(e,r){try{let{id:t}=yi.parse({id:e.params.id}),i=await this.researcherRepository.findById(t);if(!i)throw new l("O pesquisador n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Oh}from"@asteasolutions/zod-to-openapi";import Da from"zod";Oh(Da);var Fa=Da.object({userId:Da.uuid()}),fi=class{constructor(e){this.researcherRepository=e}async handle(e,r){try{let{userId:t}=Fa.parse({userId:e.params.userId}),i=await this.researcherRepository.findByUserId(t);if(!i)throw new l("O pesquisador n\xE3o existe para este usu\xE1rio.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Nh}from"@asteasolutions/zod-to-openapi";import{Degree as kh,Seniority as Lh}from"@prisma/client";import de from"zod";Nh(de);var Ua=de.object({id:de.uuid(),registrationNumber:de.string().optional(),mainEtps:de.string().optional(),formations:de.string().optional(),degrees:de.array(de.enum(kh)).optional(),occupations:de.string().optional(),seniority:de.enum(Lh).optional(),institutions:de.string().optional(),biography:de.string().optional()}),hi=class{constructor(e){this.researcherRepository=e}async handle(e,r){try{let{id:t,registrationNumber:i,mainEtps:n,formations:s,degrees:m,occupations:c,seniority:u,institutions:E,biography:B}=Ua.parse({id:e.params.id,...e.body}),H=await this.researcherRepository.findById(t);if(!H)throw new l("O pesquisador n\xE3o existe.");if(i&&i!==H.registrationNumber){let K=await this.researcherRepository.findByRegistrationNumber(i);if(K&&K.id!==t)throw new $("J\xE1 existe um pesquisador com este n\xFAmero de registro.")}return await this.researcherRepository.update({id:t,registrationNumber:i,mainEtps:n,formations:s,degrees:m,occupations:c,seniority:u,institutions:E,biography:B}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Gh=1,_h=9,Ba=R.object({id:R.uuid(),registrationNumber:R.string(),mainEtps:R.string().nullable(),formations:R.string().nullable(),degrees:R.array(R.enum(qa.Degree)),occupations:R.string(),seniority:R.enum(qa.Seniority),institutions:R.string(),biography:R.string().nullable(),createdAt:R.date(),updatedAt:R.date(),userId:R.uuid(),user:R.object({id:R.uuid(),name:R.string(),emailAddress:R.string(),avatarUrl:R.string().nullable(),orcid:R.string().nullable(),phone:R.string().nullable(),lattesUrl:R.string().nullable(),role:R.enum(qa.UserRole)})}),Yp={method:"post",path:"/researcher",tags:["Researchers"],summary:"Create a new researcher profile",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:Ma}}}},responses:{201:{description:"Researcher profile created successfully",summary:"Researcher Created",content:{"application/json":{schema:R.object({message:R.string()})}}},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:R.object({errors:R.record(R.string(),R.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:R.object({message:R.string()})}}},409:{description:"Researcher with this registration number already exists or user already has a researcher profile",summary:"Conflict",content:{"application/json":{schema:R.object({message:R.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:R.object({message:R.string()})}}}}},Xp={method:"get",path:"/researcher",tags:["Researchers"],summary:"List all researchers with pagination and filters",request:{query:R.object({page:R.coerce.number().min(1).default(Gh).optional(),limit:R.coerce.number().min(1).default(_h).optional(),userId:R.string().optional(),registrationNumber:R.string().optional(),name:R.string().optional(),emailAddress:R.string().optional(),mainEtps:R.string().optional(),formations:R.string().optional(),occupations:R.string().optional(),institutions:R.string().optional(),biography:R.string().optional(),orderBy:R.enum(["asc","desc"]).optional()})},responses:{200:{description:"List of researchers retrieved successfully with pagination",summary:"Researchers Retrieved",content:{"application/json":{schema:R.object({page:R.number(),totalPages:R.number(),offset:R.number(),limit:R.number(),researchers:R.array(Ba)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:R.object({message:R.string()})}}}}},$p={method:"get",path:"/researcher/{id}",tags:["Researchers"],summary:"Find researcher by ID",request:{params:yi},responses:{200:{description:"Researcher details retrieved successfully",summary:"Researcher Retrieved",content:{"application/json":{schema:Ba}}},400:{description:"Invalid researcher ID format",summary:"Validation Error",content:{"application/json":{schema:R.object({errors:R.record(R.string(),R.string())})}}},404:{description:"Researcher not found with the provided ID",summary:"Researcher Not Found",content:{"application/json":{schema:R.object({message:R.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:R.object({message:R.string()})}}}}},Jp={method:"get",path:"/researcher/user/{userId}",tags:["Researchers"],summary:"Find researcher by user ID",request:{params:Fa},responses:{200:{description:"Researcher details retrieved successfully",summary:"Researcher Retrieved",content:{"application/json":{schema:Ba}}},400:{description:"Invalid user ID format",summary:"Validation Error",content:{"application/json":{schema:R.object({errors:R.record(R.string(),R.string())})}}},404:{description:"Researcher not found for this user",summary:"Researcher Not Found",content:{"application/json":{schema:R.object({message:R.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:R.object({message:R.string()})}}}}},Qp={method:"put",path:"/researcher/{id}",tags:["Researchers"],summary:"Update researcher profile",security:[{bearerAuth:[]}],request:{params:yi,body:{content:{"application/json":{schema:Ua.omit({id:!0})}}}},responses:{200:{description:"Researcher profile updated successfully",summary:"Researcher Updated",content:{"application/json":{schema:R.object({message:R.string()})}}},400:{description:"Invalid input data or researcher ID format",summary:"Validation Error",content:{"application/json":{schema:R.object({errors:R.record(R.string(),R.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:R.object({message:R.string()})}}},404:{description:"Researcher not found with the provided ID",summary:"Researcher Not Found",content:{"application/json":{schema:R.object({message:R.string()})}}},409:{description:"Researcher with this registration number already exists",summary:"Conflict",content:{"application/json":{schema:R.object({message:R.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:R.object({message:R.string()})}}}}},ed={method:"delete",path:"/researcher/{id}",tags:["Researchers"],summary:"Delete researcher profile",security:[{bearerAuth:[]}],request:{params:Ta},responses:{200:{description:"Researcher profile deleted successfully",summary:"Researcher Deleted"},400:{description:"Invalid researcher ID format",summary:"Validation Error",content:{"application/json":{schema:R.object({errors:R.record(R.string(),R.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:R.object({message:R.string()})}}},404:{description:"Researcher not found with the provided ID",summary:"Researcher Not Found",content:{"application/json":{schema:R.object({message:R.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:R.object({message:R.string()})}}}}};import{$Enums as Vh}from"@prisma/client";import A from"zod";import{extendZodWithOpenApi as Wh}from"@asteasolutions/zod-to-openapi";import Mt from"zod";Wh(Mt);var Oa=Mt.object({role:Mt.string().min(1),description:Mt.string().optional(),userId:Mt.uuid(),order:Mt.number().optional()}),Ri=class{constructor(e){this.sdhcTeamMemberRepository=e}async handle(e,r){try{let{role:t,description:i,userId:n,order:s}=Oa.parse(e.body);return await this.sdhcTeamMemberRepository.create({role:t,description:i,userId:n,order:s??0}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Hh}from"@asteasolutions/zod-to-openapi";import Na from"zod";Hh(Na);var ka=Na.object({id:Na.uuid()}),Ii=class{constructor(e){this.sdhcTeamMemberRepository=e}async handle(e,r){try{let{id:t}=ka.parse({id:e.params.id});if(!await this.sdhcTeamMemberRepository.findById(t))throw new l("O membro da equipe SDHC n\xE3o existe.");return await this.sdhcTeamMemberRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as zh}from"@asteasolutions/zod-to-openapi";import La from"zod";zh(La);var bi=La.object({id:La.uuid()}),Ci=class{constructor(e){this.sdhcTeamMemberRepository=e}async handle(e,r){try{let{id:t}=bi.parse({id:e.params.id}),i=await this.sdhcTeamMemberRepository.findById(t);if(!i)throw new l("O membro da equipe SDHC n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Zh}from"@asteasolutions/zod-to-openapi";import ot from"zod";Zh(ot);var Ga=ot.object({id:ot.uuid(),role:ot.string().min(1).optional(),description:ot.string().optional(),userId:ot.uuid().optional(),order:ot.number().optional()}),wi=class{constructor(e){this.sdhcTeamMemberRepository=e}async handle(e,r){try{let{id:t,role:i,description:n,userId:s,order:m}=Ga.parse({id:e.params.id,...e.body});if(!await this.sdhcTeamMemberRepository.findById(t))throw new l("O membro da equipe SDHC n\xE3o existe.");return await this.sdhcTeamMemberRepository.update({id:t,role:i,description:n,userId:s,order:m}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Kh=A.object({id:A.uuid(),name:A.string(),emailAddress:A.string(),avatarUrl:A.string().nullable(),orcid:A.string().nullable(),phone:A.string().nullable(),lattesUrl:A.string().nullable(),role:A.enum(Vh.UserRole)}),td=A.object({id:A.uuid(),role:A.string(),description:A.string().nullable(),order:A.number(),createdAt:A.date(),updatedAt:A.date(),userId:A.uuid(),user:Kh}),rd={method:"post",path:"/sdhc-team-member",tags:["SDHC Team Members"],summary:"Create a new SDHC Team Member",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:Oa}}}},responses:{201:{description:"SDHC Team Member created successfully",summary:"SDHC Team Member Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:A.object({errors:A.record(A.string(),A.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:A.object({message:A.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:A.object({message:A.string()})}}}}},od={method:"get",path:"/sdhc-team-member",tags:["SDHC Team Members"],summary:"List all SDHC Team Members with filters",request:{query:A.object({role:A.string().optional(),orderBy:A.enum(["asc","desc"]).optional()})},responses:{200:{description:"List of SDHC Team Members retrieved successfully",summary:"SDHC Team Members Retrieved",content:{"application/json":{schema:A.object({members:A.array(td)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:A.object({message:A.string()})}}}}},id={method:"get",path:"/sdhc-team-member/{id}",tags:["SDHC Team Members"],summary:"Find SDHC Team Member by ID",request:{params:bi},responses:{200:{description:"SDHC Team Member details retrieved successfully",summary:"SDHC Team Member Retrieved",content:{"application/json":{schema:td}}},400:{description:"Invalid SDHC Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:A.object({errors:A.record(A.string(),A.string())})}}},404:{description:"SDHC Team Member not found with the provided ID",summary:"SDHC Team Member Not Found",content:{"application/json":{schema:A.object({message:A.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:A.object({message:A.string()})}}}}},nd={method:"put",path:"/sdhc-team-member/{id}",tags:["SDHC Team Members"],summary:"Update SDHC Team Member",security:[{bearerAuth:[]}],request:{params:bi,body:{content:{"application/json":{schema:Ga.omit({id:!0})}}}},responses:{200:{description:"SDHC Team Member updated successfully",summary:"SDHC Team Member Updated"},400:{description:"Invalid input data or SDHC Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:A.object({errors:A.record(A.string(),A.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:A.object({message:A.string()})}}},404:{description:"SDHC Team Member not found with the provided ID",summary:"SDHC Team Member Not Found",content:{"application/json":{schema:A.object({message:A.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:A.object({message:A.string()})}}}}},sd={method:"delete",path:"/sdhc-team-member/{id}",tags:["SDHC Team Members"],summary:"Delete SDHC Team Member",security:[{bearerAuth:[]}],request:{params:ka},responses:{200:{description:"SDHC Team Member deleted successfully",summary:"SDHC Team Member Deleted"},400:{description:"Invalid SDHC Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:A.object({errors:A.record(A.string(),A.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:A.object({message:A.string()})}}},404:{description:"SDHC Team Member not found with the provided ID",summary:"SDHC Team Member Not Found",content:{"application/json":{schema:A.object({message:A.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:A.object({message:A.string()})}}}}};import{$Enums as cd}from"@prisma/client";import U from"zod";import{extendZodWithOpenApi as Yh}from"@asteasolutions/zod-to-openapi";import _a from"zod";Yh(_a);var Wa=_a.object({id:_a.string()}),Si=class{constructor(e){this.userRepository=e}async handle(e,r){try{let{id:t}=Wa.parse({id:e.params.id}),i=await this.userRepository.findById(t);if(!i)throw new l("O usu\xE1rio n\xE3o existe.");let n=e.user.id;if(i.id!==n)throw new me("Voc\xEA n\xE3o tem permiss\xE3o para deletar o usu\xE1rio");return await this.userRepository.deleteById(i.id),r.sendStatus(204)}catch(t){if(console.log(t),t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Xh}from"@asteasolutions/zod-to-openapi";import{z as Ha}from"zod";Xh(Ha);var za=Ha.object({id:Ha.string().min(1,"id do usu\xE1rio n\xE3o fornecido.")}),vi=class{constructor(e){this.userRepository=e}async handle(e,r){try{let{id:t}=za.parse(e.params),i=await this.userRepository.findById(t);if(!i)throw new l("Usu\xE1rio n\xE3o encontrado");r.status(200).json(i)}catch(t){if(console.log(t),t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as $h}from"@asteasolutions/zod-to-openapi";import it from"zod";var md=2,ad=1024,Jh=ad*ad,Qh=md*Jh,eR=/^\d{4}-\d{4}-\d{4}-\d{4}$/,tR=/^\(?\d{2}\)?[\s-]?\d{4,5}-?\d{4}$/;$h(it);var Za=it.object({name:it.string().optional(),lattesUrl:it.string().optional(),orcid:it.string().optional().transform(o=>o===void 0?void 0:o.trim()).refine(o=>o===void 0||o===""||eR.test(o),{message:"ORCID inv\xE1lido. Deve estar no formato 0000-0000-0000-0000"}),phone:it.string().optional().refine(o=>o===void 0||o===""||tR.test(o),{message:"Telefone inv\xE1lido. Deve estar no formato (99) 99999-9999"}),avatarImage:it.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=Qh,`A imagem deve ter no m\xE1ximo ${md}MB.`).optional()}),ji=class{constructor(e,r){this.userRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{avatarImage:t,...i}=Za.parse({...e.body,avatarImage:e.file}),n=e.user.id,s=await this.userRepository.findById(n);if(!s)throw new te("O usu\xE1rio n\xE3o existe");let m=s.avatarUrl;return t&&(s.avatarUrl?m=await this.firebaseStorageService.updateFile({file:t,id:n,folder:F.USER,fileUrl:s.avatarUrl}):m=await this.firebaseStorageService.uploadFile({file:t,id:n,folder:F.USER})),await this.userRepository.update({...i,id:n,avatarUrl:m||void 0}),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var pd={method:"get",path:"/users/{id}",tags:["Users"],summary:"Find user by ID",request:{params:za},responses:{200:{description:"User details retrieved successfully",summary:"User Retrieved",content:{"application/json":{schema:U.object({id:U.string(),name:U.string(),createdAt:U.date(),updatedAt:U.date(),role:U.enum(cd.UserRole),lattesUrl:U.string().nullable(),orcid:U.string().nullable(),phone:U.string().nullable(),avatarUrl:U.url().nullable(),emailAddress:U.email()})}}},400:{description:"Invalid user ID format",summary:"Validation Error",content:{"application/json":{schema:U.object({errors:U.record(U.string(),U.string())})}}},404:{description:"User not found with the provided ID",summary:"User Not Found",content:{"application/json":{schema:U.object({message:U.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:U.object({message:U.string()})}}}}},dd={method:"put",path:"/users",tags:["Users"],summary:"Update authenticated user",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:Za}}}},responses:{200:{description:"User profile updated successfully",summary:"User Updated",content:{"application/json":{schema:U.object({message:U.string()})}}},400:{description:"Invalid input data or file format",summary:"Validation Error",content:{"application/json":{schema:U.object({errors:U.record(U.string(),U.string())})}}},401:{description:"User not authenticated or unauthorized",summary:"Authentication Required",content:{"application/json":{schema:U.object({message:U.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:U.object({message:U.string()})}}}}},ld={method:"delete",path:"/users",tags:["Users"],summary:"Delete authenticated user",security:[{bearerAuth:[]}],request:{params:Wa},responses:{200:{description:"User account deleted successfully",summary:"User Deleted",content:{"application/json":{schema:U.object({message:U.string()})}}},400:{description:"Invalid request parameters",summary:"Validation Error",content:{"application/json":{schema:U.object({errors:U.record(U.string(),U.string())})}}},401:{description:"User not authenticated or unauthorized",summary:"Authentication Required",content:{"application/json":{schema:U.object({message:U.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:U.object({message:U.string()})}}}}},ud={method:"get",path:"/users",tags:["Users"],summary:"List users",responses:{200:{description:"Complete list of users retrieved successfully",summary:"Users Retrieved",content:{"application/json":{schema:U.array(U.object({id:U.string(),name:U.string(),createdAt:U.date(),updatedAt:U.date(),role:U.enum(cd.UserRole),lattesUrl:U.url().nullable(),orcid:U.string().nullable(),phone:U.string().nullable(),avatarUrl:U.string().nullable(),emailAddress:U.email()}))}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:U.object({message:U.string()})}}}}};import C from"zod";import{extendZodWithOpenApi as rR}from"@asteasolutions/zod-to-openapi";import Va from"zod";rR(Va);var Ka=Va.object({id:Va.uuid()}),Ei=class{constructor(e,r){this.webinarRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=Ka.parse({id:e.params.id}),i=await this.webinarRepository.findById(t);if(!i)throw new l("O webinar n\xE3o existe.");return i.thumbnailUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.thumbnailUrl}),await this.webinarRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as oR}from"@asteasolutions/zod-to-openapi";import Ya from"zod";oR(Ya);var Xa=Ya.object({id:Ya.uuid()}),xi=class{constructor(e){this.webinarRepository=e}async handle(e,r){try{let{id:t}=Xa.parse({id:e.params.id}),i=await this.webinarRepository.findById(t);if(!i)throw new l("Webinar n\xE3o encontrado.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as iR}from"@asteasolutions/zod-to-openapi";import nt from"zod";var nR=1,sR=6;iR(nt);var $a=nt.object({page:nt.coerce.number().min(1).default(nR),limit:nt.coerce.number().min(1).default(sR),title:nt.string().optional(),description:nt.string().optional(),orderBy:nt.enum(["asc","desc"]).default("desc")}),Mi=class{constructor(e){this.webinarRepository=e}async handle(e,r){try{let{limit:t,page:i,...n}=$a.parse(e.query),s=i*t-t,[m,c]=await Promise.all([this.webinarRepository.find({pagination:{offset:s,limit:t},filter:n}),this.webinarRepository.count({filter:n})]),u=Math.max(Math.ceil(c/t),1);return r.status(200).json({page:i,totalPages:u,offset:s,limit:t,webinars:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as aR}from"@asteasolutions/zod-to-openapi";import fe from"zod";var yd=5,gd=1024,mR=gd*gd,cR=yd*mR;aR(fe);var Ja=fe.object({id:fe.uuid(),title:fe.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio.").optional(),description:fe.string().optional(),scheduledAt:fe.coerce.date().optional(),webinarLink:fe.url("URL do webinar deve ser v\xE1lida").optional(),guestIds:fe.transform(o=>typeof o=="string"?o.split(","):o).pipe(fe.array(fe.uuid())).optional(),thumbnail:fe.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=cR,`A thumbnail deve ter no m\xE1ximo ${yd}MB.`).optional()}),Pi=class{constructor(e,r){this.webinarRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,thumbnail:i,title:n,description:s,scheduledAt:m,webinarLink:c,guestIds:u}=Ja.parse({id:e.params.id,...e.body,thumbnail:e.file}),E=await this.webinarRepository.findById(t);if(!E)throw new l("O webinar n\xE3o existe.");let B=E.thumbnailUrl;if(i&&(B=await this.firebaseStorageService.uploadFile({file:i,id:t,folder:F.WEBINAR})),!B)throw new a("Thumbnail URL \xE9 obrigat\xF3rio");return await this.webinarRepository.update({id:t,title:n,description:s,scheduledAt:m,webinarLink:c,thumbnailUrl:B,guestIds:u}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var fd={method:"post",path:"/webinars",tags:["Webinars"],summary:"Create webinar",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:C.object({title:C.string().min(1).openapi({description:"T\xEDtulo do webinar"}),description:C.string().optional().openapi({description:"Descri\xE7\xE3o do webinar"}),scheduledAt:C.string().openapi({description:"Data e hora agendada (ISO 8601)",example:"2024-01-01T10:00:00Z"}),webinarLink:C.string().url().optional().openapi({description:"Link do webinar"}),guestIds:C.string().openapi({description:"IDs dos convidados separados por v\xEDrgula",example:"uuid1,uuid2,uuid3"}),thumbnail:C.string().optional().openapi({description:"Imagem de thumbnail (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{201:{description:"Webinar created successfully",summary:"Webinar Created"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:C.object({errors:C.record(C.string(),C.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:C.object({message:C.string()})}}}}},hd={method:"get",path:"/webinars",tags:["Webinars"],summary:"List webinars",security:[{bearerAuth:[]}],request:{query:$a},responses:{200:{description:"Paginated list of webinars with guest information retrieved successfully",summary:"Webinars Retrieved",content:{"application/json":{schema:C.object({page:C.number(),totalPages:C.number(),offset:C.number(),limit:C.number(),webinars:C.array(C.object({id:C.string(),title:C.string(),description:C.string().nullable(),scheduledAt:C.date(),webinarLink:C.string().nullable(),thumbnailUrl:C.string().nullable(),createdAt:C.date(),updatedAt:C.date(),guests:C.array(C.object({id:C.uuid(),name:C.string(),emailAddress:C.email(),avatarUrl:C.string().nullable(),createdAt:C.date(),updatedAt:C.date()}))}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:C.object({errors:C.record(C.string(),C.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:C.object({message:C.string()})}}}}},Rd={method:"get",path:"/webinars/{id}",tags:["Webinars"],summary:"Find webinar by ID",security:[{bearerAuth:[]}],request:{params:Xa},responses:{200:{description:"Webinar details retrieved successfully",summary:"Webinar Retrieved",content:{"application/json":{schema:C.object({id:C.string(),title:C.string(),description:C.string().nullable(),scheduledAt:C.date(),webinarLink:C.string().nullable(),thumbnailUrl:C.string().nullable(),createdAt:C.date(),updatedAt:C.date(),guests:C.array(C.object({id:C.uuid(),name:C.string(),emailAddress:C.email(),avatarUrl:C.string().nullable(),createdAt:C.date(),updatedAt:C.date()}))}).nullable()}}},400:{description:"Invalid webinar ID format",summary:"Validation Error",content:{"application/json":{schema:C.object({errors:C.record(C.string(),C.string())})}}},404:{description:"Webinar not found with the provided ID",summary:"Webinar Not Found",content:{"application/json":{schema:C.object({message:C.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:C.object({message:C.string()})}}}}},Id={method:"put",path:"/webinars/{id}",tags:["Webinars"],summary:"Update webinar",security:[{bearerAuth:[]}],request:{params:Ja.pick({id:!0}),body:{content:{"multipart/form-data":{schema:C.object({title:C.string().min(1).optional().openapi({description:"T\xEDtulo do webinar"}),description:C.string().optional().openapi({description:"Descri\xE7\xE3o do webinar"}),scheduledAt:C.string().optional().openapi({description:"Data e hora agendada (ISO 8601)",example:"2024-01-01T10:00:00Z"}),webinarLink:C.string().url().optional().openapi({description:"Link do webinar"}),guestIds:C.string().optional().openapi({description:"IDs dos convidados separados por v\xEDrgula",example:"uuid1,uuid2,uuid3"}),thumbnail:C.string().optional().openapi({description:"Imagem de thumbnail (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{200:{description:"Webinar updated successfully",summary:"Webinar Updated"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:C.object({errors:C.record(C.string(),C.string())})}}},404:{description:"Webinar not found with the provided ID",summary:"Webinar Not Found",content:{"application/json":{schema:C.object({message:C.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:C.object({message:C.string()})}}}}},Cd={method:"delete",path:"/webinars/{id}",tags:["Webinars"],summary:"Delete webinar",security:[{bearerAuth:[]}],request:{params:Ka},responses:{200:{description:"Webinar deleted successfully",summary:"Webinar Deleted"},400:{description:"Invalid webinar ID format",summary:"Validation Error",content:{"application/json":{schema:C.object({errors:C.record(C.string(),C.string())})}}},404:{description:"Webinar not found with the provided ID",summary:"Webinar Not Found",content:{"application/json":{schema:C.object({message:C.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:C.object({message:C.string()})}}}}};var y=new pR;y.registerComponent("securitySchemes","bearerAuth",{type:"http",scheme:"bearer",bearerFormat:"JWT"});y.registerPath(bm);y.registerPath(wm);y.registerPath(Sm);y.registerPath(vm);y.registerPath(Em);y.registerPath(xm);y.registerPath(jm);y.registerPath(pd);y.registerPath(dd);y.registerPath(ld);y.registerPath(ud);y.registerPath(Xc);y.registerPath($c);y.registerPath(Jc);y.registerPath(Qc);y.registerPath(Mm);y.registerPath(Pm);y.registerPath(Tm);y.registerPath(Am);y.registerPath(Dm);y.registerPath(dp);y.registerPath(lp);y.registerPath(up);y.registerPath(gp);y.registerPath(yp);y.registerPath(Xm);y.registerPath($m);y.registerPath(Jm);y.registerPath(Qm);y.registerPath(ec);y.registerPath(Yp);y.registerPath(Xp);y.registerPath($p);y.registerPath(Jp);y.registerPath(Qp);y.registerPath(ed);y.registerPath(Gm);y.registerPath(_m);y.registerPath(Wm);y.registerPath(Hm);y.registerPath(zm);y.registerPath(np);y.registerPath(sp);y.registerPath(ap);y.registerPath(mp);y.registerPath(cp);y.registerPath(Tc);y.registerPath(Ac);y.registerPath(Dc);y.registerPath(Fc);y.registerPath(Uc);y.registerPath(rd);y.registerPath(od);y.registerPath(id);y.registerPath(nd);y.registerPath(sd);y.registerPath(vc);y.registerPath(jc);y.registerPath(Ec);y.registerPath(xc);y.registerPath(Mc);y.registerPath(bp);y.registerPath(wp);y.registerPath(Sp);y.registerPath(vp);y.registerPath(jp);y.registerPath(Ep);y.registerPath(Wc);y.registerPath(Hc);y.registerPath(zc);y.registerPath(Zc);y.registerPath(Vc);y.registerPath(Kc);y.registerPath(kc);y.registerPath(Lc);y.registerPath(Gc);y.registerPath(_c);y.registerPath(hc);y.registerPath(Rc);y.registerPath(Ic);y.registerPath(Cc);y.registerPath(bc);y.registerPath(wc);y.registerPath(uc);y.registerPath(gc);y.registerPath(yc);y.registerPath(fc);y.registerPath(nc);y.registerPath(sc);y.registerPath(ac);y.registerPath(mc);y.registerPath(Wp);y.registerPath(Hp);y.registerPath(zp);y.registerPath(Zp);y.registerPath(Vp);y.registerPath(Kp);y.registerPath(kp);y.registerPath(Lp);y.registerPath(Gp);y.registerPath(_p);y.registerPath(Ap);y.registerPath(Dp);y.registerPath(Fp);y.registerPath(Up);y.registerPath(fd);y.registerPath(hd);y.registerPath(Rd);y.registerPath(Id);y.registerPath(Cd);y.registerPath(qm);y.registerPath(Bm);y.registerPath(Om);y.registerPath(Nm);y.registerPath(km);var lR=new dR(y.definitions),bd=lR.generateDocument({openapi:"3.0.0",info:{title:"API da Rede CT",version:"1.0.0",description:"API com valida\xE7\xE3o Zod"}});import{Router as IR}from"express";import{extendZodWithOpenApi as uR}from"@asteasolutions/zod-to-openapi";import Qa from"zod";uR(Qa);var gR=Qa.object({authenticatedUserId:Qa.uuid()}),Ti=class{constructor(e){this.userRepository=e}async handle(e,r){try{let{authenticatedUserId:t}=gR.parse({authenticatedUserId:e.user.id}),i=await this.userRepository.findById(t);if(!i)throw new l("Usu\xE1rio n\xE3o encontrado.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{PrismaClient as yR}from"@prisma/client";var G=new yR({log:["warn","error"]});var Ai=class{constructor(e){this.prisma=e}async register({userId:e,title:r,description:t,certificationUrl:i}){await this.prisma.certification.create({data:{title:r,description:t,certificationUrl:i,user:{connect:{id:e}}}})}async find({pagination:{offset:e,limit:r},filter:{description:t,orderBy:i,title:n,userId:s}}){let m={},c=[];return s&&(m.userId=s),n&&c.push({title:{contains:n,mode:"insensitive"}}),t&&c.push({description:{contains:t,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.certification.findMany({where:m,include:{user:{omit:{passwordHash:!0}}},orderBy:{updatedAt:i},skip:e,take:r})}async findById(e){return await this.prisma.certification.findFirst({where:{id:e}})}async findByUserId({pagination:{limit:e,offset:r},filter:{description:t,orderBy:i,title:n},userId:s}){let m={userId:s},c=[];return n&&c.push({title:{contains:n,mode:"insensitive"}}),t&&c.push({description:{contains:t,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.certification.findMany({where:m,include:{user:{omit:{passwordHash:!0}}},skip:r,take:e,orderBy:i?{updatedAt:i}:{updatedAt:"desc"}})}async update({id:e,...r}){await this.prisma.certification.update({where:{id:e},data:r})}async deleteById(e){await this.prisma.certification.delete({where:{id:e}})}async count({filter:{description:e,title:r,userId:t}}){let i={},n=[];return t&&(i.userId=t),r&&n.push({title:{contains:r,mode:"insensitive"}}),e&&n.push({description:{contains:e,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.certification.count({where:i})}};function Ze(){return new Ai(G)}var Di=class{constructor(e){this.prisma=e}async create(e){await this.prisma.news.create({data:e})}async find({pagination:{offset:e,limit:r},filter:{authorId:t,content:i,title:n,orderBy:s}}){let m={};t&&(m.authorId={contains:t,mode:"insensitive"});let c=[];return n&&c.push({title:{contains:n,mode:"insensitive"}}),i&&c.push({content:{contains:i,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.news.findMany({where:m,omit:{authorId:!0},include:{author:!0},orderBy:{updatedAt:s},skip:e,take:r})}async findById(e){return await this.prisma.news.findUnique({where:{id:e},omit:{authorId:!0},include:{author:!0}})}async findByAuthorId({authorId:e,pagination:{offset:r,limit:t},filter:{orderBy:i="desc",content:n,title:s}}){let m={authorId:e},c=[];return s&&c.push({title:{contains:s,mode:"insensitive"}}),n&&c.push({content:{contains:n,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.news.findMany({omit:{authorId:!0},where:m,orderBy:{updatedAt:i},skip:r,take:t})}async update(e){await this.prisma.news.update({where:{id:e.id},data:{title:e.title,content:e.content,imageUrl:e.imageUrl}})}async delete(e){await this.prisma.news.delete({where:{id:e}})}async count({filter:{authorId:e,content:r,title:t}}){let i={};e&&(i.authorId={contains:e,mode:"insensitive"});let n=[];return t&&n.push({title:{contains:t,mode:"insensitive"}}),r&&n.push({content:{contains:r,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.news.count({where:i})}};function xe(){return new Di(G)}var Fi=class{constructor(e){this.prisma=e}async create(e){await this.prisma.pendency.create({data:e})}async find({filter:{description:e,orderBy:r,title:t,status:i,userId:n},pagination:{limit:s,offset:m}}){let c={userId:n,AND:{status:{equals:i}}};e&&(c.description={contains:e,mode:"insensitive"});let u=[];return t&&u.push({title:{contains:t,mode:"insensitive"}}),u.length>0&&(c.OR=u),await this.prisma.pendency.findMany({where:c,orderBy:{updatedAt:r},include:{user:{omit:{passwordHash:!0}}},skip:m,take:s})}async findById(e){return await this.prisma.pendency.findFirst({where:{id:e},include:{user:{omit:{passwordHash:!0}}}})}async findByUserId({filter:{description:e,orderBy:r,title:t,status:i},pagination:{limit:n,offset:s},userId:m}){let c={userId:m,AND:{status:{equals:i}}},u=[];return e&&u.push({description:{contains:e,mode:"insensitive"}}),t&&u.push({title:{contains:t,mode:"insensitive"}}),u.length>0&&(c.OR=u),await this.prisma.pendency.findMany({where:c,orderBy:{updatedAt:r},include:{user:{omit:{passwordHash:!0}}},skip:s,take:n})}async update({id:e,...r}){await this.prisma.pendency.update({where:{id:e},data:r})}async deleteById(e){await this.prisma.pendency.delete({where:{id:e}})}async count({filter:{description:e,title:r,status:t,userId:i}}){let n={userId:i},s=[];return e&&s.push({description:{contains:e,mode:"insensitive"}}),r&&s.push({title:{contains:r,mode:"insensitive"}}),t&&s.push({status:{equals:t}}),s.length>0&&(n.OR=s),await this.prisma.pendency.count({where:n})}};function Ve(){return new Fi(G)}var Ui=class{constructor(e){this.prisma=e}async create(e){await this.prisma.user.create({data:e})}async update(e){await this.prisma.user.update({where:{id:e.id},data:{lattesUrl:e.lattesUrl??null,orcid:e.orcid??null,phone:e.phone??null,avatarUrl:e.avatarUrl??null}})}async deleteById(e){await this.prisma.user.delete({where:{id:e}})}async find(){return await this.prisma.user.findMany({omit:{passwordHash:!0}})}async findByEmail(e){return await this.prisma.user.findFirst({where:{emailAddress:e}})}async findById(e){return await this.prisma.user.findFirst({where:{id:e},omit:{passwordHash:!0}})}};function ne(){return new Ui(G)}import{compare as fR,hash as hR}from"bcryptjs";var qi=class{constructor(e,r){this.hashFn=e;this.compareFn=r}async hash(e){return await this.hashFn(e,6)}async compare({password:e,hashedPassword:r}){return await this.compareFn(e,r)}};function em(){return new qi(hR,fR)}import wd from"jsonwebtoken";import se from"zod";var RR=se.object({JWT_SECRET:se.string(),FIREBASE_BUCKET:se.string(),FIREBASE_CLIENT_EMAIL:se.string(),FIREBASE_PRIVATE_KEY:se.string(),FIREBASE_PROJECT_ID:se.string(),FIREBASE_TYPE:se.string(),FIREBASE_PRIVATE_KEY_ID:se.string(),FIREBASE_CLIENT_ID:se.string(),FIREBASE_AUTH_URI:se.string(),FIREBASE_TOKEN_URI:se.string(),FIREBASE_AUTH_PROVIDER_X509_CERT_URL:se.string(),FIREBASE_CLIENT_X509_CERT_URL:se.string()}),ee=RR.parse(process.env);var Bi=class{constructor(e,r){this.signFn=e;this.verifyFn=r}sign(e){try{return this.signFn(e,ee.JWT_SECRET,{expiresIn:"3d",subject:e.id})}catch{return null}}verify(e){try{return this.verifyFn(e,ee.JWT_SECRET)}catch{return null}}};function Oi(){return new Bi(wd.sign,wd.verify)}function Sd(){return{signUpController:new gr(ne(),em())}}function vd(){return{signInController:new lr(ne(),em(),Oi())}}function jd(){return{findAuthenticatedUserController:new Ti(ne())}}function Ed(){return{findAuthenticatedUserController:new cr(xe())}}function xd(){return{findAuthenticatedUserCertificationsController:new mr(Ze())}}function Md(){return{findAuthenticatedUserPendenciesController:new pr(Ve())}}var Ni=class{constructor(e){this.jwtService=e}authenticated(e,r,t){let i=e.headers.authorization;if(!i?.startsWith("Bearer "))return r.status(401).json({message:"Token inv\xE1lido.",invalid:!0});let n=i.split(" ")[1];if(!n)return r.status(401).json({message:"Token n\xE3o fornecido."});try{let s=this.jwtService.verify(n);if(!s)return r.status(401).json({message:"Token inv\xE1lido.",invalid:!0});e.user=s,t()}catch(s){if(console.log(s),s instanceof Error)return r.status(401).json({message:s.message})}}isAdmin(e,r,t){let i=e.headers.authorization;if(!i?.startsWith("Bearer "))return r.status(401).json({message:"Token inv\xE1lido.",invalid:!0});let n=i.split(" ")[1];if(!n)return r.status(401).json({message:"Token n\xE3o fornecido."});try{let s=this.jwtService.verify(n);if(!s)return r.status(401).json({message:"Token inv\xE1lido.",invalid:!0});if(s.role!=="ADMIN")return r.status(401).json({message:"\xC9 necess\xE1rio ter permiss\xF5es de administrador."});e.user=s,t()}catch(s){if(console.log(s),s instanceof Error)return r.status(401).json({message:s.message})}}};function W(){return{authMiddleware:new Ni(Oi())}}var Me=IR(),{authMiddleware:Qt}=W();Me.post("/sign-up",async(o,e)=>{let{signUpController:r}=Sd();await r.handle(o,e)});Me.post("/sign-in",async(o,e)=>{let{signInController:r}=vd();await r.handle(o,e)});Me.get("/user",(o,e,r)=>{Qt.authenticated(o,e,r)},async(o,e)=>{let{findAuthenticatedUserController:r}=jd();await r.handle(o,e)});Me.get("/user/news",(o,e,r)=>{Qt.authenticated(o,e,r)},async(o,e)=>{let{findAuthenticatedUserController:r}=Ed();await r.handle(o,e)});Me.get("/admin",(o,e,r)=>{Qt.isAdmin(o,e,r)},(o,e)=>{try{e.status(200).json({success:!0})}catch(r){r instanceof Error&&e.status(500).json({message:r.message})}});Me.get("/certifications",(o,e,r)=>{Qt.authenticated(o,e,r)},async(o,e)=>{let{findAuthenticatedUserCertificationsController:r}=xd();await r.handle(o,e)});Me.get("/pendencies",(o,e,r)=>{Qt.authenticated(o,e,r)},async(o,e)=>{let{findAuthenticatedUserPendenciesController:r}=Md();await r.handle(o,e)});import{Router as jR}from"express";import{getStorage as bR}from"firebase-admin/storage";import{config as CR}from"dotenv";import Pd from"firebase-admin";CR();var tm=Pd.initializeApp({credential:Pd.credential.cert({clientEmail:ee.FIREBASE_CLIENT_EMAIL,privateKey:ee.FIREBASE_PRIVATE_KEY,projectId:ee.FIREBASE_PROJECT_ID,type:ee.FIREBASE_TYPE,privateKeyId:ee.FIREBASE_PRIVATE_KEY_ID,clientId:ee.FIREBASE_CLIENT_ID,authUri:ee.FIREBASE_AUTH_URI,tokenUri:ee.FIREBASE_TOKEN_URI,authProviderX509CertUrl:ee.FIREBASE_AUTH_PROVIDER_X509_CERT_URL,clientX509CertUrl:ee.FIREBASE_CLIENT_X509_CERT_URL}),storageBucket:ee.FIREBASE_BUCKET});tm.name?console.log("\u{1F525} Firebase conectado com sucesso!"):console.error("\u274C Erro ao se conectar ao Firebase.");var wR=bR(tm),Td=wR.bucket(ee.FIREBASE_BUCKET);import{randomUUID as SR}from"node:crypto";var vR=/https:\/\/storage\.googleapis\.com\/[^/]+\/(.+)$/,ki=class{constructor(e){this.bucket=e}async uploadFile({file:e,folder:r,id:t}){let i=`${SR()}-${e?.originalname}`,n=this.bucket.file(`${r}/${t}/${i}`);return await new Promise((s,m)=>{let c=n.createWriteStream({metadata:{contentType:e?.mimetype}});c.on("error",u=>{m(u)}),c.on("finish",async()=>{try{await n.makePublic();let u=`https://storage.googleapis.com/${this.bucket.name}/${n.name}`;s(u)}catch(u){m(u)}}),c.end(e.buffer)})}async updateFile({file:e,id:r,fileUrl:t,folder:i}){try{let n=this.getPath(t);if(!n)throw new Error("Arquivo n\xE3o encontrado.");let[s,m]=await Promise.all([this.bucket.file(n).delete(),this.uploadFile({file:e,id:r,folder:i})]);return m}catch{throw new Error("Erro ao atualizar o arquivo.")}}async deleteFile({fileUrl:e}){let r=this.getPath(e);if(!r)throw new Error("Arquivo n\xE3o encontrado.");try{await this.bucket.file(r).delete()}catch{throw new Error("Erro ao deletar o arquivo.")}}getPath(e){let r=e.match(vR);return r?r[1]:null}};function q(){return new ki(Td)}function Ad(){return{registerCertificationController:new Rr(ne(),Ze(),q())}}function Dd(){return{findCertificationsController:new hr(Ze())}}function Fd(){return{findCertificationByIdController:new fr(Ze())}}function Ud(){return{updateCertificationController:new Cr(Ze(),q())}}function qd(){return{deleteCertificationController:new yr(Ze(),q())}}import Bd from"multer";var _=Bd({storage:Bd.memoryStorage()});var st=jR(),{authMiddleware:er}=W();st.post("/:user_id",(o,e,r)=>{er.isAdmin(o,e,r)},_.single("certification"),async(o,e)=>{let{registerCertificationController:r}=Ad();await r.handle(o,e)});st.get("/",(o,e,r)=>{er.isAdmin(o,e,r)},async(o,e)=>{let{findCertificationsController:r}=Dd();await r.handle(o,e)});st.get("/:certification_id",(o,e,r)=>{er.isAdmin(o,e,r)},async(o,e)=>{let{findCertificationByIdController:r}=Fd();await r.handle(o,e)});st.put("/:certification_id",(o,e,r)=>{er.isAdmin(o,e,r)},_.single("certification"),async(o,e)=>{let{updateCertificationController:r}=Ud();await r.handle(o,e)});st.delete("/:certification_id",(o,e,r)=>{er.isAdmin(o,e,r)},async(o,e)=>{let{deleteCertificationController:r}=qd();await r.handle(o,e)});import{Router as AR}from"express";import{extendZodWithOpenApi as ER}from"@asteasolutions/zod-to-openapi";import ae from"zod";var xR=5,Od=1024,MR=Od*Od,PR=xR*MR;ER(ae);var TR=ae.object({title:ae.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),coordinatorId:ae.string().uuid("Coordenador \xE9 obrigat\xF3rio."),email:ae.email("E-mail deve ser v\xE1lido."),location:ae.string().min(1,"Localiza\xE7\xE3o \xE9 obrigat\xF3ria."),scheduledAt:ae.coerce.date(),registrationLink:ae.url().optional(),description:ae.string().optional(),instructorIds:ae.transform(o=>typeof o=="string"?o.split(","):o).pipe(ae.array(ae.uuid())),image:ae.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=PR,"A imagem deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.")}),Li=class{constructor(e,r){this.courseRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{title:t,coordinatorId:i,email:n,location:s,scheduledAt:m,registrationLink:c,description:u,instructorIds:E,image:B}=TR.parse({...e.body,image:e.file}),H=await this.courseRepository.create({title:t,coordinatorId:i,email:n,location:s,scheduledAt:m,registrationLink:c||void 0,description:u,instructorIds:E}),K=await this.firebaseStorageService.uploadFile({file:B,folder:F.COURSE,id:H.id});return await this.courseRepository.update({id:H.id,imageUrl:K}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Gi=class{constructor(e){this.prisma=e}async create({title:e,imageUrl:r,coordinatorId:t,email:i,instructorIds:n,scheduledAt:s,location:m,registrationLink:c,description:u}){return await this.prisma.course.create({data:{title:e,imageUrl:r,coordinatorId:t,email:i,scheduledAt:s,location:m,registrationLink:c,description:u,instructors:{connect:n?.map(E=>({id:E}))}}})}async find({pagination:{offset:e,limit:r},filter:{description:t,orderBy:i,title:n,coordinator:s}}){let m={},c=[];return n&&c.push({title:{contains:n,mode:"insensitive"}}),t&&c.push({description:{contains:t,mode:"insensitive"}}),s&&c.push({coordinator:{name:{contains:s,mode:"insensitive"}}}),c.length>0&&(m.OR=c),await this.prisma.course.findMany({where:m,include:{coordinator:{omit:{passwordHash:!0}},instructors:{omit:{passwordHash:!0}}},orderBy:{updatedAt:i},skip:e,take:r})}async findById(e){return await this.prisma.course.findFirst({where:{id:e},include:{coordinator:{omit:{passwordHash:!0}},instructors:{omit:{passwordHash:!0}}}})}async update({id:e,title:r,imageUrl:t,coordinatorId:i,email:n,instructorIds:s,scheduledAt:m,location:c,registrationLink:u,description:E}){s!==void 0&&await this.prisma.course.update({where:{id:e},data:{instructors:{set:[]}}}),await this.prisma.course.update({where:{id:e},data:{title:r,imageUrl:t,coordinatorId:i,email:n,scheduledAt:m,location:c,registrationLink:u,description:E,...s?.length>0&&{instructors:{connect:s.map(B=>({id:B}))}}}})}async deleteById(e){await this.prisma.course.delete({where:{id:e}})}async count({filter:{description:e,title:r,coordinator:t}}){let i={},n=[];return r&&n.push({title:{contains:r,mode:"insensitive"}}),e&&n.push({description:{contains:e,mode:"insensitive"}}),t&&n.push({coordinator:{name:{contains:t,mode:"insensitive"}}}),n.length>0&&(i.OR=n),await this.prisma.course.count({where:i})}};function Pt(){return new Gi(G)}function Nd(){return{createCourseController:new Li(Pt(),q())}}function kd(){return{findCoursesController:new vr(Pt())}}function Ld(){return{findCourseByIdController:new Sr(Pt())}}function Gd(){return{updateCourseController:new jr(Pt(),q())}}function _d(){return{deleteCourseController:new wr(Pt(),q())}}var at=AR(),{authMiddleware:tr}=W();at.post("/",(o,e,r)=>{tr.isAdmin(o,e,r)},_.single("image"),async(o,e)=>{let{createCourseController:r}=Nd();await r.handle(o,e)});at.get("/",(o,e,r)=>{tr.isAdmin(o,e,r)},async(o,e)=>{let{findCoursesController:r}=kd();await r.handle(o,e)});at.get("/:id",(o,e,r)=>{tr.isAdmin(o,e,r)},async(o,e)=>{let{findCourseByIdController:r}=Ld();await r.handle(o,e)});at.put("/:id",(o,e,r)=>{tr.isAdmin(o,e,r)},_.single("image"),async(o,e)=>{let{updateCourseController:r}=Gd();await r.handle(o,e)});at.delete("/:id",(o,e,r)=>{tr.isAdmin(o,e,r)},async(o,e)=>{let{deleteCourseController:r}=_d();await r.handle(o,e)});import{Router as BR}from"express";import{extendZodWithOpenApi as DR}from"@asteasolutions/zod-to-openapi";import Pe from"zod";var FR=1,UR=9;DR(Pe);var qR=Pe.object({page:Pe.coerce.number().min(1).default(FR),limit:Pe.coerce.number().min(1).default(UR),code:Pe.string().optional(),title:Pe.string().optional(),description:Pe.string().optional(),notes:Pe.string().optional(),orderBy:Pe.enum(["asc","desc"]).default("desc")}),_i=class{constructor(e){this.etpRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=qR.parse(e.query),s=i*t-i,[m,c]=await Promise.all([this.etpRepository.find({pagination:{offset:s,limit:i},filter:n}),this.etpRepository.count({filter:n})]),u=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:u,offset:s,limit:i,etps:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Wi=class{constructor(e){this.prisma=e}async create(e){let{leaderId:r,deputyLeaderId:t,secretaryId:i,memberIds:n,...s}=e;await this.prisma.$transaction(async m=>{let c=await m.eTP.create({data:s});await m.eTPLeader.create({data:{etpId:c.id,researcherId:r}}),await m.eTPDeputy.create({data:{etpId:c.id,researcherId:t}}),await m.eTPSecretary.create({data:{etpId:c.id,researcherId:i}}),await m.eTP.update({where:{id:c.id},data:{members:{connect:n.map(u=>({id:u}))}}})})}async update(e){let{leaderId:r,deputyLeaderId:t,secretaryId:i,memberIds:n,...s}=e;await this.prisma.$transaction(async m=>{await m.eTP.update({where:{id:e.id},data:s}),await this.updateLeader(m,e.id,r),await this.updateDeputyLeader(m,e.id,t),await this.updateSecretary(m,e.id,i),await this.updateMembers(m,e.id,n)})}async updateLeader(e,r,t){t!==void 0&&(await e.eTPLeader.deleteMany({where:{etpId:r}}),t&&await e.eTPLeader.create({data:{etpId:r,researcherId:t}}))}async updateDeputyLeader(e,r,t){t!==void 0&&(await e.eTPDeputy.deleteMany({where:{etpId:r}}),t&&await e.eTPDeputy.create({data:{etpId:r,researcherId:t}}))}async updateSecretary(e,r,t){t!==void 0&&(await e.eTPSecretary.deleteMany({where:{etpId:r}}),t&&await e.eTPSecretary.create({data:{etpId:r,researcherId:t}}))}async updateMembers(e,r,t){t!==void 0&&await e.eTP.update({where:{id:r},data:{members:{set:t.map(i=>({id:i}))}}})}async deleteById(e){await this.prisma.eTP.delete({where:{id:e}})}async find({pagination:{offset:e,limit:r},filter:{code:t,title:i,description:n,notes:s,orderBy:m}}){let c={},u=[];return t&&u.push({code:{contains:t,mode:"insensitive"}}),i&&u.push({title:{contains:i,mode:"insensitive"}}),n&&u.push({description:{contains:n,mode:"insensitive"}}),s&&u.push({notes:{contains:s,mode:"insensitive"}}),u.length>0&&(c.OR=u),await this.prisma.eTP.findMany({where:c,include:{leader:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},deputyLeader:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},secretary:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},members:{include:{user:{omit:{passwordHash:!0}}}}},orderBy:{updatedAt:m},skip:e,take:r})}async findById(e){return await this.prisma.eTP.findFirst({where:{id:e},include:{leader:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},deputyLeader:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},secretary:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},members:{include:{user:{omit:{passwordHash:!0}}}}}})}async findByCode(e){return await this.prisma.eTP.findFirst({where:{code:e},include:{leader:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},deputyLeader:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},secretary:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},members:{include:{user:{omit:{passwordHash:!0}}}}}})}async count({filter:{code:e,title:r,description:t,notes:i}}){let n={},s=[];return e&&s.push({code:{contains:e,mode:"insensitive"}}),r&&s.push({title:{contains:r,mode:"insensitive"}}),t&&s.push({description:{contains:t,mode:"insensitive"}}),i&&s.push({notes:{contains:i,mode:"insensitive"}}),s.length>0&&(n.OR=s),await this.prisma.eTP.count({where:n})}};function Tt(){return new Wi(G)}function Wd(){return{createETPController:new Er(Tt())}}function Hd(){return{findETPsController:new _i(Tt())}}function zd(){return{findETPByIdController:new Mr(Tt())}}function Zd(){return{updateETPController:new Tr(Tt())}}function Vd(){return{deleteETPController:new xr(Tt())}}var mt=BR(),{authMiddleware:rm}=W();mt.post("/",(o,e,r)=>{rm.authenticated(o,e,r)},async(o,e)=>{let{createETPController:r}=Wd();await r.handle(o,e)});mt.get("/",async(o,e)=>{let{findETPsController:r}=Hd();await r.handle(o,e)});mt.get("/:id",async(o,e)=>{let{findETPByIdController:r}=zd();await r.handle(o,e)});mt.put("/:id",(o,e,r)=>{rm.authenticated(o,e,r)},async(o,e)=>{let{updateETPController:r}=Zd();await r.handle(o,e)});mt.delete("/:id",(o,e,r)=>{rm.authenticated(o,e,r)},async(o,e)=>{let{deleteETPController:r}=Vd();await r.handle(o,e)});import{Router as OR}from"express";var Hi=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.inMemoriam.create({data:e})}async update(e){await this.prisma.inMemoriam.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.inMemoriam.delete({where:{id:e}})}async find({pagination:{offset:e,limit:r},filter:{name:t,biography:i,role:n,orderBy:s}}){let m={},c=[];return n&&(m.role=n),t&&c.push({name:{contains:t,mode:"insensitive"}}),i&&c.push({biography:{contains:i,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.inMemoriam.findMany({where:m,orderBy:{updatedAt:s},skip:e,take:r})}async findById(e){return await this.prisma.inMemoriam.findFirst({where:{id:e}})}async findByRole(e){return await this.prisma.inMemoriam.findMany({where:{role:e}})}async count({filter:{name:e,biography:r,role:t}}){let i={},n=[];return t&&(i.role=t),e&&n.push({name:{contains:e,mode:"insensitive"}}),r&&n.push({biography:{contains:r,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.inMemoriam.count({where:i})}};function ct(){return new Hi(G)}function Kd(){return{createInMemoriamController:new Dr(ct(),q())}}function Yd(){return{findInMemoriamsController:new Or(ct())}}function Xd(){return{findInMemoriamByIdController:new Ur(ct())}}function $d(){return{findInMemoriamByRoleController:new Br(ct())}}function Jd(){return{updateInMemoriamController:new Nr(ct(),q())}}function Qd(){return{deleteInMemoriamController:new Fr(ct(),q())}}var Ke=OR(),{authMiddleware:om}=W();Ke.post("/",(o,e,r)=>{om.authenticated(o,e,r)},_.single("photo"),async(o,e)=>{let{createInMemoriamController:r}=Kd();await r.handle(o,e)});Ke.get("/",async(o,e)=>{let{findInMemoriamsController:r}=Yd();await r.handle(o,e)});Ke.get("/:id",async(o,e)=>{let{findInMemoriamByIdController:r}=Xd();await r.handle(o,e)});Ke.get("/role/:role",async(o,e)=>{let{findInMemoriamByRoleController:r}=$d();await r.handle(o,e)});Ke.put("/:id",(o,e,r)=>{om.authenticated(o,e,r)},_.single("photo"),async(o,e)=>{let{updateInMemoriamController:r}=Jd();await r.handle(o,e)});Ke.delete("/:id",(o,e,r)=>{om.authenticated(o,e,r)},async(o,e)=>{let{deleteInMemoriamController:r}=Qd();await r.handle(o,e)});import{Router as NR}from"express";var im=NR();im.get("/",(o,e)=>{e.status(200).json({message:"Rede CT"})});import{Router as WR}from"express";var zi=class{constructor(e){this.prisma=e}async create(e){await this.prisma.internationalScientificCongress.create({data:e})}async update(e){await this.prisma.internationalScientificCongress.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.internationalScientificCongress.delete({where:{id:e}})}async find({pagination:{offset:e,limit:r},filter:{title:t,edition:i,location:n,orderBy:s}}){let m={},c=[];return i&&c.push({edition:{equals:i}}),t&&c.push({title:{contains:t,mode:"insensitive"}}),n&&c.push({location:{contains:n,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.internationalScientificCongress.findMany({where:m,include:{partners:!0,galleries:!0},orderBy:s?{startDate:s}:{startDate:"desc"},skip:e,take:r})}async findById(e){return await this.prisma.internationalScientificCongress.findFirst({where:{id:e},include:{partners:!0,galleries:!0}})}async findByEdition(e){return await this.prisma.internationalScientificCongress.findMany({where:{edition:e},include:{partners:!0,galleries:!0}})}async count({filter:{title:e,edition:r,location:t}}){let i={},n=[];return r&&n.push({edition:{equals:r}}),e&&n.push({title:{contains:e,mode:"insensitive"}}),t&&n.push({location:{contains:t,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.internationalScientificCongress.count({where:i})}};function he(){return new zi(G)}function el(){return{createInternationalScientificCongressController:new Yr(he())}}function tl(){return{findInternationalScientificCongressesController:new eo(he())}}function rl(){return{findInternationalScientificCongressByIdController:new Jr(he())}}function ol(){return{findInternationalScientificCongressByEditionController:new $r(he())}}function il(){return{updateInternationalScientificCongressController:new to(he())}}function nl(){return{deleteInternationalScientificCongressController:new Xr(he())}}import{extendZodWithOpenApi as kR}from"@asteasolutions/zod-to-openapi";import nm from"zod";kR(nm);var LR=nm.object({id:nm.uuid()}),Zi=class{constructor(e){this.internationalScientificCongressGalleryRepository=e}async handle(e,r){try{let{id:t}=LR.parse({id:e.params.id}),i=await this.internationalScientificCongressGalleryRepository.findById(t);if(!i)throw new l("A imagem da galeria n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Vi=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.internationalScientificCongressGalleryItem.create({data:e})}async update(e){await this.prisma.internationalScientificCongressGalleryItem.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.internationalScientificCongressGalleryItem.delete({where:{id:e}})}async findByCongressId(e){let{pagination:r,filter:t}=e;return await this.prisma.internationalScientificCongressGalleryItem.findMany({where:{congressId:t.congressId,...t.caption&&{caption:{contains:t.caption,mode:"insensitive"}}},skip:r.offset,take:r.limit})}async findById(e){return await this.prisma.internationalScientificCongressGalleryItem.findFirst({where:{id:e}})}async count(e){let{filter:r}=e;return await this.prisma.internationalScientificCongressGalleryItem.count({where:{congressId:r.congressId,...r.caption&&{caption:{contains:r.caption,mode:"insensitive"}}}})}};function At(){return new Vi(G)}function sl(){return{createInternationalScientificCongressGalleryController:new kr(At(),he(),q())}}function al(){return{findInternationalScientificCongressGalleriesByCongressIdController:new _r(At())}}function ml(){return{findInternationalScientificCongressGalleryByIdController:new Zi(At())}}function cl(){return{updateInternationalScientificCongressGalleryController:new Wr(At(),q())}}function pl(){return{deleteInternationalScientificCongressGalleryController:new Lr(At())}}import{extendZodWithOpenApi as GR}from"@asteasolutions/zod-to-openapi";import sm from"zod";GR(sm);var _R=sm.object({id:sm.uuid()}),Ki=class{constructor(e){this.internationalScientificCongressPartnerRepository=e}async handle(e,r){try{let{id:t}=_R.parse({id:e.params.id}),i=await this.internationalScientificCongressPartnerRepository.findById(t);if(!i)throw new l("O parceiro n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Yi=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.internationalScientificCongressPartner.create({data:e})}async update(e){await this.prisma.internationalScientificCongressPartner.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.internationalScientificCongressPartner.delete({where:{id:e}})}async findByCongressId(e){return await this.prisma.internationalScientificCongressPartner.findMany({where:{congressId:e.filter.congressId,name:e.filter.name?{contains:e.filter.name,mode:"insensitive"}:void 0},skip:e.pagination?.offset,take:e.pagination?.limit})}async findById(e){return await this.prisma.internationalScientificCongressPartner.findFirst({where:{id:e}})}async count(e){return await this.prisma.internationalScientificCongressPartner.count({where:{congressId:e.filter.congressId,name:e.filter.name?{contains:e.filter.name,mode:"insensitive"}:void 0}})}};function Dt(){return new Yi(G)}function dl(){return{createInternationalScientificCongressPartnerController:new Hr(Dt(),he(),q())}}function ll(){return{findInternationalScientificCongressPartnersByCongressIdController:new Vr(Dt())}}function ul(){return{findInternationalScientificCongressPartnerByIdController:new Ki(Dt())}}function gl(){return{updateInternationalScientificCongressPartnerController:new Kr(Dt(),q())}}function yl(){return{deleteInternationalScientificCongressPartnerController:new zr(Dt())}}var J=WR(),{authMiddleware:Te}=W();J.post("/",(o,e,r)=>{Te.authenticated(o,e,r)},async(o,e)=>{let{createInternationalScientificCongressController:r}=el();await r.handle(o,e)});J.get("/",async(o,e)=>{let{findInternationalScientificCongressesController:r}=tl();await r.handle(o,e)});J.get("/:id",async(o,e)=>{let{findInternationalScientificCongressByIdController:r}=rl();await r.handle(o,e)});J.get("/edition/:edition",async(o,e)=>{let{findInternationalScientificCongressByEditionController:r}=ol();await r.handle(o,e)});J.put("/:id",(o,e,r)=>{Te.authenticated(o,e,r)},async(o,e)=>{let{updateInternationalScientificCongressController:r}=il();await r.handle(o,e)});J.delete("/:id",(o,e,r)=>{Te.authenticated(o,e,r)},async(o,e)=>{let{deleteInternationalScientificCongressController:r}=nl();await r.handle(o,e)});J.post("/:congressId/gallery",(o,e,r)=>{Te.authenticated(o,e,r)},_.single("image"),async(o,e)=>{let{createInternationalScientificCongressGalleryController:r}=sl();await r.handle(o,e)});J.get("/:congressId/gallery",async(o,e)=>{let{findInternationalScientificCongressGalleriesByCongressIdController:r}=al();await r.handle(o,e)});J.get("/gallery/:id",async(o,e)=>{let{findInternationalScientificCongressGalleryByIdController:r}=ml();await r.handle(o,e)});J.put("/gallery/:id",(o,e,r)=>{Te.authenticated(o,e,r)},_.single("image"),async(o,e)=>{let{updateInternationalScientificCongressGalleryController:r}=cl();await r.handle(o,e)});J.delete("/gallery/:id",(o,e,r)=>{Te.authenticated(o,e,r)},async(o,e)=>{let{deleteInternationalScientificCongressGalleryController:r}=pl();await r.handle(o,e)});J.post("/:congressId/partner",(o,e,r)=>{Te.authenticated(o,e,r)},_.single("logo"),async(o,e)=>{let{createInternationalScientificCongressPartnerController:r}=dl();await r.handle(o,e)});J.get("/:congressId/partner",async(o,e)=>{let{findInternationalScientificCongressPartnersByCongressIdController:r}=ll();await r.handle(o,e)});J.get("/partner/:id",async(o,e)=>{let{findInternationalScientificCongressPartnerByIdController:r}=ul();await r.handle(o,e)});J.put("/partner/:id",(o,e,r)=>{Te.authenticated(o,e,r)},_.single("logo"),async(o,e)=>{let{updateInternationalScientificCongressPartnerController:r}=gl();await r.handle(o,e)});J.delete("/partner/:id",(o,e,r)=>{Te.authenticated(o,e,r)},async(o,e)=>{let{deleteInternationalScientificCongressPartnerController:r}=yl();await r.handle(o,e)});import{Router as ZR}from"express";import{extendZodWithOpenApi as HR}from"@asteasolutions/zod-to-openapi";import Xi from"zod";HR(Xi);var zR=Xi.object({role:Xi.string().optional(),orderBy:Xi.enum(["asc","desc"]).optional()}),$i=class{constructor(e){this.legitimatorCommitteeMemberRepository=e}async handle(e,r){try{let t=zR.parse(e.query),i=await this.legitimatorCommitteeMemberRepository.find({filter:t});r.status(200).json({members:i})}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Ji=class{constructor(e){this.prisma=e}async create(e){await this.prisma.legitimatorCommitteeMember.create({data:{...e,order:e.order??0}})}async update(e){let{id:r,...t}=e;await this.prisma.legitimatorCommitteeMember.update({where:{id:r},data:t})}async deleteById(e){await this.prisma.legitimatorCommitteeMember.delete({where:{id:e}})}async find({filter:{role:e,orderBy:r}}){let t={};return e&&(t.role={contains:e,mode:"insensitive"}),await this.prisma.legitimatorCommitteeMember.findMany({where:t,include:{user:{omit:{passwordHash:!0}}},orderBy:r?[{order:"asc"},{updatedAt:r}]:[{order:"asc"},{updatedAt:"desc"}]})}async findById(e){return await this.prisma.legitimatorCommitteeMember.findFirst({where:{id:e},include:{user:{omit:{passwordHash:!0}}}})}async count({filter:{role:e}}){let r={};return e&&(r.role={contains:e,mode:"insensitive"}),await this.prisma.legitimatorCommitteeMember.count({where:r})}};function Ft(){return new Ji(G)}function fl(){return{createLegitimatorCommitteeMemberController:new ro(Ft())}}function hl(){return{findLegitimatorCommitteeMembersController:new $i(Ft())}}function Rl(){return{findLegitimatorCommitteeMemberByIdController:new io(Ft())}}function Il(){return{updateLegitimatorCommitteeMemberController:new so(Ft())}}function Cl(){return{deleteLegitimatorCommitteeMemberController:new oo(Ft())}}var pt=ZR(),{authMiddleware:am}=W();pt.post("/",(o,e,r)=>{am.authenticated(o,e,r)},async(o,e)=>{let{createLegitimatorCommitteeMemberController:r}=fl();await r.handle(o,e)});pt.get("/",async(o,e)=>{let{findLegitimatorCommitteeMembersController:r}=hl();await r.handle(o,e)});pt.get("/:id",async(o,e)=>{let{findLegitimatorCommitteeMemberByIdController:r}=Rl();await r.handle(o,e)});pt.put("/:id",(o,e,r)=>{am.authenticated(o,e,r)},async(o,e)=>{let{updateLegitimatorCommitteeMemberController:r}=Il();await r.handle(o,e)});pt.delete("/:id",(o,e,r)=>{am.authenticated(o,e,r)},async(o,e)=>{let{deleteLegitimatorCommitteeMemberController:r}=Cl();await r.handle(o,e)});import{Router as YR}from"express";import{extendZodWithOpenApi as VR}from"@asteasolutions/zod-to-openapi";import rr from"zod";VR(rr);var KR=rr.object({name:rr.string().optional(),description:rr.string().optional(),orderBy:rr.enum(["asc","desc"]).default("desc")}),Qi=class{constructor(e){this.managementTeamRepository=e}async handle(e,r){try{let t=KR.parse(e.query),i=await this.managementTeamRepository.find({filter:t});r.status(200).json({teams:i})}catch(t){if(t instanceof Error)throw new a(t.message)}}};var en=class{constructor(e){this.prisma=e}async create(e){let{members:r,...t}=e;await this.prisma.$transaction(async i=>{let n=await i.managementTeam.create({data:t});return await i.managementTeamMember.createMany({data:r.map(({userId:s,role:m,order:c})=>({teamId:n.id,userId:s,role:m,order:c??0}))}),n})}async update(e){let{members:r,...t}=e;await this.prisma.$transaction(async i=>{let n=await i.managementTeam.update({where:{id:e.id},data:t});return r!==void 0&&(await i.managementTeamMember.deleteMany({where:{teamId:e.id}}),r.length>0&&await i.managementTeamMember.createMany({data:r.map(({userId:s,role:m,order:c})=>({teamId:e.id,userId:s,role:m,order:c??0}))})),n})}async deleteById(e){await this.prisma.managementTeam.delete({where:{id:e}})}async find({filter:{name:e,description:r,orderBy:t}}){let i={},n=[];return e&&n.push({name:{contains:e,mode:"insensitive"}}),r&&n.push({description:{contains:r,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.managementTeam.findMany({where:i,include:{members:{include:{user:{omit:{passwordHash:!0}}},orderBy:{order:"asc"}}},orderBy:{updatedAt:t}})}async findById(e){return await this.prisma.managementTeam.findFirst({where:{id:e},include:{members:{include:{user:{omit:{passwordHash:!0}}},orderBy:{order:"asc"}}}})}async findByName(e){return await this.prisma.managementTeam.findFirst({where:{name:e},include:{members:{include:{user:{omit:{passwordHash:!0}}},orderBy:{order:"asc"}}}})}async count({filter:{name:e,description:r}}){let t={},i=[];return e&&i.push({name:{contains:e,mode:"insensitive"}}),r&&i.push({description:{contains:r,mode:"insensitive"}}),i.length>0&&(t.OR=i),await this.prisma.managementTeam.count({where:t})}};function Ut(){return new en(G)}function bl(){return{createManagementTeamController:new ao(Ut())}}function wl(){return{findManagementTeamsController:new Qi(Ut())}}function Sl(){return{findManagementTeamByIdController:new co(Ut())}}function vl(){return{updateManagementTeamController:new lo(Ut())}}function jl(){return{deleteManagementTeamController:new mo(Ut())}}var dt=YR(),{authMiddleware:mm}=W();dt.post("/",(o,e,r)=>{mm.authenticated(o,e,r)},async(o,e)=>{let{createManagementTeamController:r}=bl();await r.handle(o,e)});dt.get("/",async(o,e)=>{let{findManagementTeamsController:r}=wl();await r.handle(o,e)});dt.get("/:id",async(o,e)=>{let{findManagementTeamByIdController:r}=Sl();await r.handle(o,e)});dt.put("/:id",(o,e,r)=>{mm.authenticated(o,e,r)},async(o,e)=>{let{updateManagementTeamController:r}=vl();await r.handle(o,e)});dt.delete("/:id",(o,e,r)=>{mm.authenticated(o,e,r)},async(o,e)=>{let{deleteManagementTeamController:r}=jl();await r.handle(o,e)});import{Router as JR}from"express";var tn=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.meeting.create({data:e})}async update(e){await this.prisma.meeting.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.meeting.delete({where:{id:e}})}async find({pagination:{offset:e,limit:r},filter:{title:t,format:i,status:n,orderBy:s}}){let m={},c=[];return i&&(m.format=i),n&&(m.status=n),t&&c.push({title:{contains:t,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.meeting.findMany({where:m,include:{minutes:!0},orderBy:s?{scheduledAt:s}:{scheduledAt:"desc"},skip:e,take:r})}async findById(e){return await this.prisma.meeting.findFirst({where:{id:e},include:{minutes:!0}})}async findByStatus(e){return await this.prisma.meeting.findMany({where:{status:e},include:{minutes:!0}})}async count({filter:{title:e,format:r,status:t}}){let i={},n=[];return r&&(i.format=r),t&&(i.status=t),e&&n.push({title:{contains:e,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.meeting.count({where:i})}};function Ae(){return new tn(G)}function El(){return{createMeetingController:new ho(Ae())}}function xl(){return{findMeetingsController:new wo(Ae())}}function Ml(){return{findMeetingByIdController:new Io(Ae())}}function Pl(){return{findMeetingByStatusController:new bo(Ae())}}function Tl(){return{updateMeetingController:new So(Ae())}}function Al(){return{deleteMeetingController:new Ro(Ae())}}import{extendZodWithOpenApi as XR}from"@asteasolutions/zod-to-openapi";import cm from"zod";XR(cm);var $R=cm.object({meetingId:cm.uuid()}),rn=class{constructor(e,r){this.meetingMinuteRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{meetingId:t}=$R.parse({meetingId:e.params.meetingId}),i=await this.meetingMinuteRepository.findByMeetingId(t);if(!i)throw new l("A ata n\xE3o existe para esta reuni\xE3o.");return i.documentUrl&&await this.firebaseStorageService.deleteFile({fileUrl:i.documentUrl}),await this.meetingMinuteRepository.deleteByMeetingId(i.id),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var on=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.meetingMinute.create({data:e,include:{meeting:!0}})}async update(e){await this.prisma.meetingMinute.update({where:{id:e.id},data:e})}async deleteByMeetingId(e){await this.prisma.meetingMinute.delete({where:{id:e}})}async findByMeetingId(e){return await this.prisma.meetingMinute.findFirst({where:{meetingId:e},include:{meeting:!0}})}};function or(){return new on(G)}function Dl(){return{createMeetingMinuteController:new uo(or(),Ae(),q())}}function Fl(){return{findMeetingMinuteByMeetingIdController:new go(or())}}function Ul(){return{updateMeetingMinuteByMeetingIdController:new yo(or(),q())}}function ql(){return{deleteMeetingMinuteByMeetingIdController:new rn(or(),q())}}var le=JR(),{authMiddleware:qt}=W();le.post("/",(o,e,r)=>{qt.authenticated(o,e,r)},async(o,e)=>{let{createMeetingController:r}=El();await r.handle(o,e)});le.get("/",async(o,e)=>{let{findMeetingsController:r}=xl();await r.handle(o,e)});le.get("/:id",async(o,e)=>{let{findMeetingByIdController:r}=Ml();await r.handle(o,e)});le.get("/status/:status",async(o,e)=>{let{findMeetingByStatusController:r}=Pl();await r.handle(o,e)});le.put("/:id",(o,e,r)=>{qt.authenticated(o,e,r)},async(o,e)=>{let{updateMeetingController:r}=Tl();await r.handle(o,e)});le.delete("/:id",(o,e,r)=>{qt.authenticated(o,e,r)},async(o,e)=>{let{deleteMeetingController:r}=Al();await r.handle(o,e)});le.post("/:meetingId/minute",(o,e,r)=>{qt.authenticated(o,e,r)},_.single("document"),async(o,e)=>{let{createMeetingMinuteController:r}=Dl();await r.handle(o,e)});le.get("/:meetingId/minute",async(o,e)=>{let{findMeetingMinuteByMeetingIdController:r}=Fl();await r.handle(o,e)});le.put("/:meetingId/minute",(o,e,r)=>{qt.authenticated(o,e,r)},_.single("document"),async(o,e)=>{let{updateMeetingMinuteByMeetingIdController:r}=Ul();await r.handle(o,e)});le.delete("/:meetingId/minute",(o,e,r)=>{qt.authenticated(o,e,r)},async(o,e)=>{let{deleteMeetingMinuteByMeetingIdController:r}=ql();await r.handle(o,e)});import{Router as sI}from"express";import{extendZodWithOpenApi as QR}from"@asteasolutions/zod-to-openapi";import pm from"zod";QR(pm);var eI=pm.object({id:pm.string()}),nn=class{constructor(e,r){this.newsRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=eI.parse(e.params),i=e.user.id,n=await this.newsRepository.findById(t);if(!n)throw new l("Not\xEDcia n\xE3o encontrada.");if(n.author.id!==i)throw new me("Sem permiss\xE3o.");await Promise.all([this.newsRepository.delete(t),this.firebaseStorageService.deleteFile({fileUrl:n.imageUrl})]),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as tI}from"@asteasolutions/zod-to-openapi";import Bt from"zod";var rI=5,Bl=1024,oI=Bl*Bl,iI=rI*oI;tI(Bt);var nI=Bt.object({id:Bt.string(),title:Bt.string().min(1),content:Bt.string().min(1),image:Bt.any().optional().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=iI,"A imagem deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.")}),sn=class{constructor(e,r){this.newsRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,title:i,content:n,image:s}=nI.parse({id:e.params.id,image:e.file,...e.body}),m=await this.newsRepository.findById(t);if(!m)throw new l("Not\xEDcia n\xE3o encontrada.");let c=e.user.id;if(m.author.id!==c)throw new me("Sem permiss\xE3o.");let u=m.imageUrl||"";s&&m.imageUrl&&(u=await this.firebaseStorageService.updateFile({file:s,folder:F.NEWS,id:t,fileUrl:m.imageUrl}));let E=await this.newsRepository.update({id:t,title:i,content:n,imageUrl:u});r.status(200).json(E)}catch(t){if(t instanceof Error)throw new a(t.message)}}};function Ol(){return{createNewsController:new vo(xe(),q())}}function Nl(){return{findAllNewsController:new Mo(xe())}}function kl(){return{findNewsByIdController:new xo(xe())}}function Ll(){return{findNewsByAuthorIdController:new jo(xe())}}function Gl(){return{updateNewsController:new sn(xe(),q())}}function _l(){return{deleteNewsController:new nn(xe(),q())}}var Ye=sI(),{authMiddleware:dm}=W();Ye.post("/",(o,e,r)=>{dm.authenticated(o,e,r)},_.single("image"),async(o,e)=>{let{createNewsController:r}=Ol();await r.handle(o,e)});Ye.get("/",async(o,e)=>{let{findAllNewsController:r}=Nl();await r.handle(o,e)});Ye.get("/:id",async(o,e)=>{let{findNewsByIdController:r}=kl();await r.handle(o,e)});Ye.get("/author/:authorId",async(o,e)=>{let{findNewsByAuthorIdController:r}=Ll();await r.handle(o,e)});Ye.put("/:id",(o,e,r)=>{dm.authenticated(o,e,r)},_.single("image"),async(o,e)=>{let{updateNewsController:r}=Gl();await r.handle(o,e)});Ye.delete("/:id",(o,e,r)=>{dm.authenticated(o,e,r)},async(o,e)=>{let{deleteNewsController:r}=_l();await r.handle(o,e)});import{Router as aI}from"express";var an=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.partner.create({data:e})}async update(e){await this.prisma.partner.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.partner.delete({where:{id:e}})}async find({pagination:e,filter:{name:r,description:t,category:i,isActive:n,orderBy:s}}){let m={},c=[];return n!==void 0&&(m.isActive=n),r&&c.push({name:{contains:r,mode:"insensitive"}}),t&&c.push({description:{contains:t,mode:"insensitive"}}),i&&c.push({category:{contains:i,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.partner.findMany({where:m,orderBy:s?{updatedAt:s}:{updatedAt:"desc"},...e&&{skip:e.offset,take:e.limit}})}async findById(e){return await this.prisma.partner.findFirst({where:{id:e}})}async count({filter:{name:e,description:r,category:t,isActive:i}}){let n={},s=[];return i!==void 0&&(n.isActive=i),e&&s.push({name:{contains:e,mode:"insensitive"}}),r&&s.push({description:{contains:r,mode:"insensitive"}}),t&&s.push({category:{contains:t,mode:"insensitive"}}),s.length>0&&(n.OR=s),await this.prisma.partner.count({where:n})}};function Ot(){return new an(G)}function Wl(){return{createPartnerController:new Po(Ot(),q())}}function Hl(){return{findPartnersController:new Fo(Ot())}}function zl(){return{findPartnerByIdController:new Ao(Ot())}}function Zl(){return{updatePartnerController:new Uo(Ot(),q())}}function Vl(){return{deletePartnerController:new To(Ot(),q())}}var lt=aI(),{authMiddleware:lm}=W();lt.post("/",(o,e,r)=>{lm.authenticated(o,e,r)},_.single("logo"),async(o,e)=>{let{createPartnerController:r}=Wl();await r.handle(o,e)});lt.get("/",async(o,e)=>{let{findPartnersController:r}=Hl();await r.handle(o,e)});lt.get("/:id",async(o,e)=>{let{findPartnerByIdController:r}=zl();await r.handle(o,e)});lt.put("/:id",(o,e,r)=>{lm.authenticated(o,e,r)},_.single("logo"),async(o,e)=>{let{updatePartnerController:r}=Zl();await r.handle(o,e)});lt.delete("/:id",(o,e,r)=>{lm.authenticated(o,e,r)},async(o,e)=>{let{deletePartnerController:r}=Vl();await r.handle(o,e)});import{Router as mI}from"express";function Kl(){return{createPendencyController:new qo(ne(),Ve(),q())}}function Yl(){return{findPendenciesController:new No(Ve())}}function Xl(){return{findPendencyByIdController:new ko(Ve())}}function $l(){return{updatePendencyController:new Lo(Ve(),q())}}function Jl(){return{deletePendencyController:new Oo(Ve(),q())}}var ut=mI(),{authMiddleware:ir}=W();ut.post("/:user_id",(o,e,r)=>{ir.isAdmin(o,e,r)},_.single("document"),async(o,e)=>{let{createPendencyController:r}=Kl();await r.handle(o,e)});ut.get("/",(o,e,r)=>{ir.isAdmin(o,e,r)},async(o,e)=>{let{findPendenciesController:r}=Yl();await r.handle(o,e)});ut.get("/:pendency_id",(o,e,r)=>{ir.isAdmin(o,e,r)},async(o,e)=>{let{findPendencyByIdController:r}=Xl();await r.handle(o,e)});ut.put("/:pendency_id",(o,e,r)=>{ir.isAdmin(o,e,r)},_.single("document"),async(o,e)=>{let{updatePendencyController:r}=$l();await r.handle(o,e)});ut.delete("/:pendency_id",(o,e,r)=>{ir.isAdmin(o,e,r)},async(o,e)=>{let{deletePendencyController:r}=Jl();await r.handle(o,e)});import{Router as cI}from"express";var mn=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.regiment.create({data:e})}async update(e){await this.prisma.regiment.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.regiment.delete({where:{id:e}})}async find({pagination:{offset:e,limit:r},filter:{title:t,status:i,orderBy:n}}){let s={},m=[];return i&&(s.status=i),t&&m.push({title:{contains:t,mode:"insensitive"}}),m.length>0&&(s.OR=m),await this.prisma.regiment.findMany({where:s,orderBy:n?{updatedAt:n}:{updatedAt:"desc"},skip:e,take:r})}async findById(e){return await this.prisma.regiment.findFirst({where:{id:e}})}async findByStatus(e){return await this.prisma.regiment.findMany({where:{status:e}})}async count({filter:{title:e,status:r}}){let t={},i=[];return r&&(t.status=r),e&&i.push({title:{contains:e,mode:"insensitive"}}),i.length>0&&(t.OR=i),await this.prisma.regiment.count({where:t})}};function gt(){return new mn(G)}function Ql(){return{createRegimentController:new _o(gt(),q())}}function eu(){return{findRegimentsController:new Vo(gt())}}function tu(){return{findRegimentByIdController:new Ho(gt())}}function ru(){return{findRegimentByStatusController:new Zo(gt())}}function ou(){return{updateRegimentController:new Ko(gt(),q())}}function iu(){return{deleteRegimentController:new Wo(gt(),q())}}var Xe=cI(),{authMiddleware:um}=W();Xe.post("/",(o,e,r)=>{um.authenticated(o,e,r)},_.single("document"),async(o,e)=>{let{createRegimentController:r}=Ql();await r.handle(o,e)});Xe.get("/",async(o,e)=>{let{findRegimentsController:r}=eu();await r.handle(o,e)});Xe.get("/:id",async(o,e)=>{let{findRegimentByIdController:r}=tu();await r.handle(o,e)});Xe.get("/status/:status",async(o,e)=>{let{findRegimentByStatusController:r}=ru();await r.handle(o,e)});Xe.put("/:id",(o,e,r)=>{um.authenticated(o,e,r)},_.single("document"),async(o,e)=>{let{updateRegimentController:r}=ou();await r.handle(o,e)});Xe.delete("/:id",(o,e,r)=>{um.authenticated(o,e,r)},async(o,e)=>{let{deleteRegimentController:r}=iu();await r.handle(o,e)});import{Router as gI}from"express";import{extendZodWithOpenApi as pI}from"@asteasolutions/zod-to-openapi";import gm from"zod";pI(gm);var dI=gm.object({id:gm.string().uuid("ID inv\xE1lido")}),cn=class{constructor(e){this.regionalCongressGalleryRepository=e}async handle(e,r){try{let{id:t}=dI.parse(e.params),i=await this.regionalCongressGalleryRepository.findById(t);if(!i)throw new l("Item de galeria n\xE3o encontrado");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var pn=class{constructor(e){this.prisma=e}async create(e){await this.prisma.regionalCongress.create({data:e})}async update(e){await this.prisma.regionalCongress.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.regionalCongress.delete({where:{id:e}})}async find({pagination:{offset:e,limit:r},filter:{title:t,edition:i,location:n,orderBy:s}}){let m={},c=[];return i&&c.push({edition:{equals:i}}),t&&c.push({title:{contains:t,mode:"insensitive"}}),n&&c.push({location:{contains:n,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.regionalCongress.findMany({where:m,include:{regionalCongressPartners:!0,regionalCongressGalleryItems:!0},orderBy:s?{startDate:s}:{startDate:"desc"},skip:e,take:r})}async findById(e){return await this.prisma.regionalCongress.findFirst({where:{id:e},include:{regionalCongressPartners:!0,regionalCongressGalleryItems:!0}})}async findByEdition(e){return await this.prisma.regionalCongress.findMany({where:{edition:e},include:{regionalCongressPartners:!0,regionalCongressGalleryItems:!0}})}async count({filter:{title:e,edition:r,location:t}}){let i={},n=[];return r&&n.push({edition:{equals:r}}),e&&n.push({title:{contains:e,mode:"insensitive"}}),t&&n.push({location:{contains:t,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.regionalCongress.count({where:i})}};function Re(){return new pn(G)}var dn=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.regionalCongressGalleryItem.create({data:e})}async update(e){await this.prisma.regionalCongressGalleryItem.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.regionalCongressGalleryItem.delete({where:{id:e}})}async findByCongressId({pagination:e,filter:r}){return await this.prisma.regionalCongressGalleryItem.findMany({where:{congressId:r.congressId,...r.caption&&{caption:{contains:r.caption,mode:"insensitive"}}},skip:e.offset,take:e.limit})}async findById(e){return await this.prisma.regionalCongressGalleryItem.findFirst({where:{id:e}})}async count({filter:e}){return await this.prisma.regionalCongressGalleryItem.count({where:{congressId:e.congressId,...e.caption&&{caption:{contains:e.caption,mode:"insensitive"}}}})}};function Nt(){return new dn(G)}function nu(){return{createRegionalCongressGalleryController:new Yo(Nt(),Re(),q())}}function su(){return{findRegionalCongressGalleriesByCongressIdController:new Jo(Nt())}}function au(){return{findRegionalCongressGalleryByIdController:new cn(Nt())}}function mu(){return{updateRegionalCongressGalleryController:new Qo(Nt(),q())}}function cu(){return{deleteRegionalCongressGalleryController:new Xo(Nt())}}import{extendZodWithOpenApi as lI}from"@asteasolutions/zod-to-openapi";import ym from"zod";lI(ym);var uI=ym.object({id:ym.string().uuid("ID inv\xE1lido")}),ln=class{constructor(e){this.regionalCongressPartnerRepository=e}async handle(e,r){try{let{id:t}=uI.parse(e.params),i=await this.regionalCongressPartnerRepository.findById(t);if(!i)throw new l("Parceiro n\xE3o encontrado");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var un=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.regionalCongressPartner.create({data:e})}async update(e){await this.prisma.regionalCongressPartner.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.regionalCongressPartner.delete({where:{id:e}})}async findByCongressId(e){return await this.prisma.regionalCongressPartner.findMany({where:{congressId:e.filter.congressId,name:e.filter.name?{contains:e.filter.name,mode:"insensitive"}:void 0},skip:e.pagination?.offset,take:e.pagination?.limit})}async findById(e){return await this.prisma.regionalCongressPartner.findFirst({where:{id:e}})}async count(e){return await this.prisma.regionalCongressPartner.count({where:{congressId:e.filter.congressId,name:e.filter.name?{contains:e.filter.name,mode:"insensitive"}:void 0}})}};function kt(){return new un(G)}function pu(){return{createRegionalCongressPartnerController:new ei(kt(),Re(),q())}}function du(){return{findRegionalCongressPartnersByCongressIdController:new oi(kt())}}function lu(){return{findRegionalCongressPartnerByIdController:new ln(kt())}}function uu(){return{updateRegionalCongressPartnerController:new ii(kt(),q())}}function gu(){return{deleteRegionalCongressPartnerController:new ti(kt())}}function yu(){return{createRegionalCongressController:new ni(Re())}}function fu(){return{findRegionalCongressesController:new pi(Re())}}function hu(){return{findRegionalCongressByIdController:new mi(Re())}}function Ru(){return{findRegionalCongressByEditionController:new ai(Re())}}function Iu(){return{updateRegionalCongressController:new di(Re())}}function Cu(){return{deleteRegionalCongressController:new si(Re())}}var Q=gI(),{authMiddleware:De}=W();Q.post("/",(o,e,r)=>{De.authenticated(o,e,r)},async(o,e)=>{let{createRegionalCongressController:r}=yu();await r.handle(o,e)});Q.get("/",async(o,e)=>{let{findRegionalCongressesController:r}=fu();await r.handle(o,e)});Q.get("/:id",async(o,e)=>{let{findRegionalCongressByIdController:r}=hu();await r.handle(o,e)});Q.get("/edition/:edition",async(o,e)=>{let{findRegionalCongressByEditionController:r}=Ru();await r.handle(o,e)});Q.put("/:id",(o,e,r)=>{De.authenticated(o,e,r)},async(o,e)=>{let{updateRegionalCongressController:r}=Iu();await r.handle(o,e)});Q.delete("/:id",(o,e,r)=>{De.authenticated(o,e,r)},async(o,e)=>{let{deleteRegionalCongressController:r}=Cu();await r.handle(o,e)});Q.post("/:congressId/gallery",(o,e,r)=>{De.authenticated(o,e,r)},_.single("image"),async(o,e)=>{let{createRegionalCongressGalleryController:r}=nu();await r.handle(o,e)});Q.get("/:congressId/gallery",async(o,e)=>{let{findRegionalCongressGalleriesByCongressIdController:r}=su();await r.handle(o,e)});Q.get("/gallery/:id",async(o,e)=>{let{findRegionalCongressGalleryByIdController:r}=au();await r.handle(o,e)});Q.put("/gallery/:id",(o,e,r)=>{De.authenticated(o,e,r)},_.single("image"),async(o,e)=>{let{updateRegionalCongressGalleryController:r}=mu();await r.handle(o,e)});Q.delete("/gallery/:id",(o,e,r)=>{De.authenticated(o,e,r)},async(o,e)=>{let{deleteRegionalCongressGalleryController:r}=cu();await r.handle(o,e)});Q.post("/:congressId/partner",(o,e,r)=>{De.authenticated(o,e,r)},_.single("logo"),async(o,e)=>{let{createRegionalCongressPartnerController:r}=pu();await r.handle(o,e)});Q.get("/:congressId/partner",async(o,e)=>{let{findRegionalCongressPartnersByCongressIdController:r}=du();await r.handle(o,e)});Q.get("/partner/:id",async(o,e)=>{let{findRegionalCongressPartnerByIdController:r}=lu();await r.handle(o,e)});Q.put("/partner/:id",(o,e,r)=>{De.authenticated(o,e,r)},_.single("logo"),async(o,e)=>{let{updateRegionalCongressPartnerController:r}=uu();await r.handle(o,e)});Q.delete("/partner/:id",(o,e,r)=>{De.authenticated(o,e,r)},async(o,e)=>{let{deleteRegionalCongressPartnerController:r}=gu();await r.handle(o,e)});import{Router as II}from"express";import{extendZodWithOpenApi as yI}from"@asteasolutions/zod-to-openapi";import oe from"zod";var fI=1,hI=9;yI(oe);var RI=oe.object({page:oe.coerce.number().min(1).default(fI),limit:oe.coerce.number().min(1).default(hI),userId:oe.string().optional(),registrationNumber:oe.string().optional(),name:oe.string().optional(),emailAddress:oe.string().optional(),mainEtps:oe.string().optional(),formations:oe.string().optional(),occupations:oe.string().optional(),institutions:oe.string().optional(),biography:oe.string().optional(),orderBy:oe.enum(["asc","desc"]).default("desc")}),gn=class{constructor(e){this.researcherRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=RI.parse(e.query),s=i*t-i,[m,c]=await Promise.all([this.researcherRepository.find({pagination:{offset:s,limit:i},filter:{userName:n.name,...n}}),this.researcherRepository.count({filter:{userName:n.name,...n}})]),u=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:u,offset:s,limit:i,researchers:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};var yn=class{constructor(e){this.prisma=e}async create(e){await this.prisma.researcher.create({data:e})}async update(e){await this.prisma.researcher.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.researcher.delete({where:{id:e}})}async find({pagination:e,filter:{biography:r,degrees:t,formations:i,institutions:n,mainEtps:s,occupations:m,orderBy:c,registrationNumber:u,seniority:E,userId:B,userName:H}}){let K={},ie=[];return H&&ie.push({user:{name:{contains:H,mode:"insensitive"}}}),u&&ie.push({registrationNumber:{contains:u,mode:"insensitive"}}),s&&ie.push({mainEtps:{contains:s,mode:"insensitive"}}),i&&ie.push({formations:{contains:i,mode:"insensitive"}}),m&&ie.push({occupations:{contains:m,mode:"insensitive"}}),n&&ie.push({institutions:{contains:n,mode:"insensitive"}}),r&&ie.push({biography:{contains:r,mode:"insensitive"}}),ie.length>0&&(K.OR=ie),t&&t.length>0&&(K.degrees={hasSome:t}),E&&(K.seniority=E),B&&(K.userId={equals:B}),await this.prisma.researcher.findMany({where:K,omit:{userId:!0},include:{user:{omit:{passwordHash:!0}}},orderBy:{updatedAt:c},...e&&{skip:e.offset,take:e.limit}})}async findById(e){return await this.prisma.researcher.findFirst({where:{id:e},include:{user:{omit:{passwordHash:!0}}}})}async findByUserId(e){return await this.prisma.researcher.findFirst({where:{userId:e},include:{user:{omit:{passwordHash:!0}}}})}async findByRegistrationNumber(e){return await this.prisma.researcher.findFirst({where:{registrationNumber:e},include:{user:{omit:{passwordHash:!0}}}})}async count({filter:{biography:e,degrees:r,formations:t,institutions:i,mainEtps:n,occupations:s,registrationNumber:m,seniority:c,userId:u,userName:E}}){let B={},H=[];return E&&H.push({user:{name:{contains:E,mode:"insensitive"}}}),m&&H.push({registrationNumber:{contains:m,mode:"insensitive"}}),H.length>0&&(B.OR=H),n&&(B.mainEtps={contains:n,mode:"insensitive"}),t&&(B.formations={contains:t,mode:"insensitive"}),r&&r.length>0&&(B.degrees={hasSome:r}),s&&(B.occupations={contains:s,mode:"insensitive"}),c&&(B.seniority=c),i&&(B.institutions={contains:i,mode:"insensitive"}),e&&(B.biography={contains:e,mode:"insensitive"}),u&&(B.userId={equals:u}),await this.prisma.researcher.count({where:B})}};function yt(){return new yn(G)}function bu(){return{createResearcherController:new li(yt())}}function wu(){return{findResearchersController:new gn(yt())}}function Su(){return{findResearcherByIdController:new gi(yt())}}function vu(){return{findResearcherByUserIdController:new fi(yt())}}function ju(){return{updateResearcherController:new hi(yt())}}function Eu(){return{deleteResearcherController:new ui(yt())}}var $e=II(),{authMiddleware:fm}=W();$e.post("/",(o,e,r)=>{fm.authenticated(o,e,r)},async(o,e)=>{let{createResearcherController:r}=bu();await r.handle(o,e)});$e.get("/",async(o,e)=>{let{findResearchersController:r}=wu();await r.handle(o,e)});$e.get("/:id",async(o,e)=>{let{findResearcherByIdController:r}=Su();await r.handle(o,e)});$e.get("/user/:userId",async(o,e)=>{let{findResearcherByUserIdController:r}=vu();await r.handle(o,e)});$e.put("/:id",(o,e,r)=>{fm.authenticated(o,e,r)},async(o,e)=>{let{updateResearcherController:r}=ju();await r.handle(o,e)});$e.delete("/:id",(o,e,r)=>{fm.authenticated(o,e,r)},async(o,e)=>{let{deleteResearcherController:r}=Eu();await r.handle(o,e)});import{Router as wI}from"express";import{extendZodWithOpenApi as CI}from"@asteasolutions/zod-to-openapi";import fn from"zod";CI(fn);var bI=fn.object({role:fn.string().optional(),orderBy:fn.enum(["asc","desc"]).optional()}),hn=class{constructor(e){this.sdhcTeamMemberRepository=e}async handle(e,r){try{let t=bI.parse(e.query),i=await this.sdhcTeamMemberRepository.find({filter:t});r.status(200).json({members:i})}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Rn=class{constructor(e){this.prisma=e}async create(e){await this.prisma.sDHCTeamMember.create({data:{...e,order:e.order??0}})}async update(e){let{id:r,...t}=e;await this.prisma.sDHCTeamMember.update({where:{id:r},data:t})}async deleteById(e){await this.prisma.sDHCTeamMember.delete({where:{id:e}})}async find({filter:{role:e,orderBy:r}}){let t={};return e&&(t.role={contains:e,mode:"insensitive"}),await this.prisma.sDHCTeamMember.findMany({where:t,include:{user:{omit:{passwordHash:!0}}},orderBy:r?[{order:"asc"},{updatedAt:r}]:[{order:"asc"},{updatedAt:"desc"}]})}async findById(e){return await this.prisma.sDHCTeamMember.findFirst({where:{id:e},include:{user:{omit:{passwordHash:!0}}}})}async count({filter:{role:e}}){let r={};return e&&(r.role={contains:e,mode:"insensitive"}),await this.prisma.sDHCTeamMember.count({where:r})}};function Lt(){return new Rn(G)}function xu(){return{createSDHCTeamMemberController:new Ri(Lt())}}function Mu(){return{findSDHCTeamMembersController:new hn(Lt())}}function Pu(){return{findSDHCTeamMemberByIdController:new Ci(Lt())}}function Tu(){return{updateSDHCTeamMemberController:new wi(Lt())}}function Au(){return{deleteSDHCTeamMemberController:new Ii(Lt())}}var ft=wI(),{authMiddleware:hm}=W();ft.post("/",(o,e,r)=>{hm.authenticated(o,e,r)},async(o,e)=>{let{createSDHCTeamMemberController:r}=xu();await r.handle(o,e)});ft.get("/",async(o,e)=>{let{findSDHCTeamMembersController:r}=Mu();await r.handle(o,e)});ft.get("/:id",async(o,e)=>{let{findSDHCTeamMemberByIdController:r}=Pu();await r.handle(o,e)});ft.put("/:id",(o,e,r)=>{hm.authenticated(o,e,r)},async(o,e)=>{let{updateSDHCTeamMemberController:r}=Tu();await r.handle(o,e)});ft.delete("/:id",(o,e,r)=>{hm.authenticated(o,e,r)},async(o,e)=>{let{deleteSDHCTeamMemberController:r}=Au();await r.handle(o,e)});import{Router as SI}from"express";var In=class{constructor(e){this.userRepository=e}async handle(e,r){try{let t=await this.userRepository.find();r.status(200).json(t)}catch(t){if(t instanceof Error)throw new a(t.message)}}};function Du(){return{updateUserController:new ji(ne(),q())}}function Fu(){return{deleteUserController:new Si(ne())}}function Uu(){return{findUsersController:new In(ne())}}function qu(){return{findUserController:new vi(ne())}}var Gt=SI(),{authMiddleware:Bu}=W();Gt.get("/:id",async(o,e)=>{let{findUserController:r}=qu();await r.handle(o,e)});Gt.put("/",(o,e,r)=>{Bu.authenticated(o,e,r)},_.single("avatarImage"),async(o,e)=>{let{updateUserController:r}=Du();await r.handle(o,e)});Gt.delete("/:id",(o,e,r)=>{Bu.authenticated(o,e,r)},async(o,e)=>{let{deleteUserController:r}=Fu();await r.handle(o,e)});Gt.get("/",async(o,e)=>{let{findUsersController:r}=Uu();await r.handle(o,e)});import{Router as PI}from"express";import{extendZodWithOpenApi as vI}from"@asteasolutions/zod-to-openapi";import we from"zod";var jI=5,Ou=1024,EI=Ou*Ou,xI=jI*EI;vI(we);var MI=we.object({title:we.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),description:we.string().optional(),scheduledAt:we.coerce.date(),webinarLink:we.url().optional(),guestIds:we.transform(o=>typeof o=="string"?o.split(","):o).pipe(we.array(we.uuid())),thumbnail:we.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=xI,"A thumbnail deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.")}),Cn=class{constructor(e,r){this.webinarRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{title:t,description:i,scheduledAt:n,webinarLink:s,guestIds:m,thumbnail:c}=MI.parse({...e.body,thumbnail:e.file}),u=await this.webinarRepository.create({title:t,description:i,scheduledAt:n,webinarLink:s||void 0,guestIds:m}),E=await this.firebaseStorageService.uploadFile({file:c,folder:F.WEBINAR,id:u.id});return await this.webinarRepository.update({id:u.id,thumbnailUrl:E}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var bn=class{constructor(e){this.prisma=e}async create({title:e,description:r,scheduledAt:t,webinarLink:i,thumbnailUrl:n,guestIds:s}){return await this.prisma.webinar.create({data:{title:e,description:r,scheduledAt:t,webinarLink:i,thumbnailUrl:n,guests:s?{connect:s.map(m=>({id:m}))}:void 0}})}async find({pagination:{offset:e,limit:r},filter:{description:t,orderBy:i,title:n}}){let s={},m=[];return n&&m.push({title:{contains:n,mode:"insensitive"}}),t&&m.push({description:{contains:t,mode:"insensitive"}}),m.length>0&&(s.OR=m),await this.prisma.webinar.findMany({where:s,include:{guests:{omit:{passwordHash:!0}}},orderBy:{updatedAt:i},skip:e,take:r})}async findById(e){return await this.prisma.webinar.findFirst({where:{id:e},include:{guests:{omit:{passwordHash:!0}}}})}async update({id:e,title:r,description:t,scheduledAt:i,webinarLink:n,thumbnailUrl:s,guestIds:m}){await this.prisma.webinar.update({where:{id:e},data:{title:r,description:t,scheduledAt:i,webinarLink:n,thumbnailUrl:s,guests:m?{connect:m.map(c=>({id:c}))}:void 0}})}async deleteById(e){await this.prisma.webinar.delete({where:{id:e}})}async count({filter:{description:e,title:r}}){let t={},i=[];return r&&i.push({title:{contains:r,mode:"insensitive"}}),e&&i.push({description:{contains:e,mode:"insensitive"}}),i.length>0&&(t.OR=i),await this.prisma.webinar.count({where:t})}};function _t(){return new bn(G)}function Nu(){return{createWebinarController:new Cn(_t(),q())}}function ku(){return{findWebinarsController:new Mi(_t())}}function Lu(){return{findWebinarByIdController:new xi(_t())}}function Gu(){return{updateWebinarController:new Pi(_t(),q())}}function _u(){return{deleteWebinarController:new Ei(_t(),q())}}var ht=PI(),{authMiddleware:nr}=W();ht.post("/",(o,e,r)=>{nr.isAdmin(o,e,r)},_.single("thumbnail"),async(o,e)=>{let{createWebinarController:r}=Nu();await r.handle(o,e)});ht.get("/",(o,e,r)=>{nr.isAdmin(o,e,r)},async(o,e)=>{let{findWebinarsController:r}=ku();await r.handle(o,e)});ht.get("/:id",(o,e,r)=>{nr.isAdmin(o,e,r)},async(o,e)=>{let{findWebinarByIdController:r}=Lu();await r.handle(o,e)});ht.put("/:id",(o,e,r)=>{nr.isAdmin(o,e,r)},_.single("thumbnail"),async(o,e)=>{let{updateWebinarController:r}=Gu();await r.handle(o,e)});ht.delete("/:id",(o,e,r)=>{nr.isAdmin(o,e,r)},async(o,e)=>{let{deleteWebinarController:r}=_u();await r.handle(o,e)});var V=Rm(),DI={methods:["GET","POST","PUT","DELETE"],origin:["http://localhost:3000","https://rede-ct.vercel.app"],credentials:!0};V.use(AI(DI));V.use(Rm.json());V.use(Rm.urlencoded({extended:!1}));V.use("/docs",TI({content:bd,theme:"kepler"}));V.use("/",im);V.use("/auth",Me);V.use("/user",Gt);V.use("/news",Ye);V.use("/certification",st);V.use("/pendency",ut);V.use("/researcher",$e);V.use("/in-memoriam",Ke);V.use("/etp",mt);V.use("/partner",lt);V.use("/management-team",dt);V.use("/sdhc-team-member",ft);V.use("/legitimator-committee-member",pt);V.use("/regiment",Xe);V.use("/meeting",le);V.use("/international-scientific-congress",J);V.use("/regional-congress",Q);V.use("/webinars",ht);V.use("/courses",at);V.use((o,e,r,t)=>{let{errorHandler:i}=Im();i.handle(o,e,r,t)});var UI=FI.createServer(V),Wu=4e3;UI.listen(Wu,()=>{console.log(`\u{1F680} Aplica\xE7\xE3o rodando na porta ${Wu}.`)});

import jC from"node:http";import{apiReference as wC}from"@scalar/express-api-reference";import SC from"cors";import Om from"express";import Sg from"zod";var re=class extends Error{};var J=class extends Error{};var a=class extends Error{};var p=class extends Error{};var ce=class extends Error{};import{ZodError as wg}from"zod";var ur=class extends wg{};var gr=class{handle(e,r,t,i){return e instanceof ur?t.status(400).json({message:"Validation error",error:Sg.treeifyError(e)}):e instanceof re?t.status(400).json({message:e.message}):e instanceof p?t.status(404).json({message:e.message}):e instanceof ce?t.status(401).json({message:e.message}):e instanceof J?t.status(409).json({message:e.message}):e instanceof a?t.status(500).json({message:e.message}):t.status(500).json({message:"Internal server error"})}};function Nm(){return{errorHandler:new gr}}import{OpenAPIRegistry as XR,OpenApiGeneratorV3 as $R}from"@asteasolutions/zod-to-openapi";import{$Enums as km}from"@prisma/client";import h from"zod";import{extendZodWithOpenApi as vg}from"@asteasolutions/zod-to-openapi";import rt from"zod";var jg=1,Eg=6;vg(rt);var qn=rt.object({page:rt.coerce.number().min(1).default(jg),limit:rt.coerce.number().min(1).default(Eg),title:rt.string().optional(),description:rt.string().optional(),orderBy:rt.enum(["asc","desc"]).default("desc")}),yr=class{constructor(e){this.certificationRepository=e}async handle(e,r){try{let{title:t,description:i,limit:n,orderBy:s,page:m}=qn.parse(e.query),c=m*n-n,u=e.user.id,[j,q]=await Promise.all([this.certificationRepository.findByUserId({userId:u,pagination:{offset:c,limit:n},filter:{title:t,description:i,orderBy:s}}),this.certificationRepository.count({filter:{title:t,description:i,userId:u}})]),z=Math.max(Math.ceil(q/n),1);return r.status(200).json({page:m,totalPages:z,offset:c,limit:n,totalCertifications:q,certifications:j})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as xg}from"@asteasolutions/zod-to-openapi";import ot from"zod";var Pg=1,Mg=7;xg(ot);var Bn=ot.object({page:ot.coerce.number().min(1).default(Pg),limit:ot.coerce.number().min(1).default(Mg),title:ot.string().optional(),content:ot.string().optional(),orderBy:ot.enum(["asc","desc"]).default("desc")}),fr=class{constructor(e){this.newsRepository=e}async handle(e,r){try{let{page:t,limit:i,content:n,orderBy:s,title:m}=Bn.parse(e.query),c=i*t-i,u=e.user.id,[j,q]=await Promise.all([this.newsRepository.findByAuthorId({authorId:u,pagination:{offset:c,limit:i},filter:{orderBy:s,title:m,content:n}}),this.newsRepository.count({filter:{authorId:u,content:n,title:m}})]),z=Math.ceil(q/i);r.status(200).json({page:t,totalPages:z,offset:c,limit:i,news:j})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Tg}from"@asteasolutions/zod-to-openapi";import{PendencyStatus as Ag}from"@prisma/client";import Be from"zod";var Dg=1,Fg=6;Tg(Be);var On=Be.object({page:Be.coerce.number().min(1).default(Dg),limit:Be.coerce.number().min(1).default(Fg),title:Be.string().optional(),description:Be.string().optional(),status:Be.enum(Ag).default("PENDING"),orderBy:Be.enum(["asc","desc"]).default("desc")}),hr=class{constructor(e){this.pendencyRepository=e}async handle(e,r){try{let{limit:t,page:i,...n}=On.parse(e.query),s=i*t-t,m=e.user.id,[c,u]=await Promise.all([this.pendencyRepository.findByUserId({userId:m,pagination:{offset:s,limit:t},filter:n}),this.pendencyRepository.count({filter:{...n,userId:m}})]),j=Math.max(Math.ceil(u/t),1);return r.status(200).json({page:i,totalPages:j,offset:s,limit:t,pendencies:c})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Ug}from"@asteasolutions/zod-to-openapi";import Rr from"zod";Ug(Rr);var Nn=Rr.object({password:Rr.string(),email:Rr.email()}),Ir=class{constructor(e,r,t){this.userRepository=e;this.bcrypt=r;this.jwtService=t}async handle(e,r){try{let{email:t,password:i}=Nn.parse(e.body),n=await this.userRepository.findByEmail(t);if(!n)return r.status(401).json({message:"Usu\xE1rio n\xE3o existe."});if(!await this.bcrypt.compare({password:i,hashedPassword:n.passwordHash}))throw new ce("Senha inv\xE1lida.");let{id:m,role:c}=n,u=this.jwtService.sign({id:m,role:c,email:t});return r.status(200).json({token:u})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as qg}from"@asteasolutions/zod-to-openapi";import St from"zod";var Cr=8;qg(St);var kn=St.object({name:St.string("Nome \xE9 obrigat\xF3rio.").min(1,"Nome \xE9 obrigat\xF3rio."),emailAddress:St.email("E-mail inv\xE1lido.").min(1,"E-mail \xE9 obrigat\xF3rio."),password:St.string("A senha \xE9 obrigat\xF3ria.").min(Cr,`A senha deve ter pelo menos ${Cr} caracteres.`),confirmPassword:St.string("A senha \xE9 obrigat\xF3ria.").min(Cr,`A senha deve ter pelo menos ${Cr} caracteres.`)}).refine(o=>o.password===o.confirmPassword,{message:"As senhas n\xE3o coincidem.",path:["confirmPassword"]}),br=class{constructor(e,r){this.userRepository=e;this.bcrypt=r}async handle(e,r){try{let{emailAddress:t,name:i,password:n}=kn.parse(e.body);if(await this.userRepository.findByEmail(t))throw new J("Usu\xE1rio j\xE1 existe.");let m=await this.bcrypt.hash(n);return await this.userRepository.create({name:i,emailAddress:t,passwordHash:m}),r.status(201).json()}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Gm={method:"post",path:"/auth/sign-up",tags:["Authentication"],summary:"Create a new user",request:{body:{content:{"application/json":{schema:kn}}}},responses:{201:{description:"User created successfully",summary:"User Registration Successful",content:{"application/json":{schema:h.object({message:h.string()})}}},400:{description:"Invalid input data provided",summary:"Validation Error",content:{"application/json":{schema:h.object({errors:h.record(h.string(),h.string())})}}},409:{description:"User already exists with this email",summary:"User Already Exists",content:{"application/json":{schema:h.object({message:h.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:h.object({message:h.string()})}}}}},Lm={method:"post",path:"/auth/sign-in",tags:["Authentication"],summary:"Sign in",request:{body:{content:{"application/json":{schema:Nn}}}},responses:{200:{description:"Authentication successful, JWT token returned",summary:"Login Successful",content:{"application/json":{schema:h.object({token:h.string()})}}},400:{description:"Invalid credentials or input data",summary:"Validation Error",content:{"application/json":{schema:h.object({errors:h.record(h.string(),h.string())})}}},401:{description:"Invalid email or password",summary:"Authentication Failed",content:{"application/json":{schema:h.object({message:h.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:h.object({message:h.string()})}}}}},_m={method:"get",path:"/auth/user",tags:["Authentication"],summary:"Search for authenticated user",security:[{bearerAuth:[]}],responses:{200:{description:"Authenticated user information retrieved successfully",summary:"User Information Retrieved",content:{"application/json":{schema:h.object({name:h.string(),id:h.string(),avatarUrl:h.string().nullable(),createdAt:h.date(),updatedAt:h.date(),emailAddress:h.string(),orcid:h.string().nullable(),phone:h.string().nullable(),lattesUrl:h.string().nullable(),role:h.enum(km.UserRole)}).nullable()}}},400:{description:"Invalid request parameters",summary:"Validation Error",content:{"application/json":{schema:h.object({errors:h.record(h.string(),h.string())})}}},404:{description:"User not found or not authenticated",summary:"User Not Found",content:{"application/json":{schema:h.object({message:h.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:h.object({message:h.string()})}}}}},Wm={method:"get",path:"/auth/user/news",tags:["Authentication"],summary:"List authenticated user news",security:[{bearerAuth:[]}],request:{query:Bn},responses:{200:{description:"Paginated list of authenticated user news retrieved successfully",summary:"User News Retrieved",content:{"application/json":{schema:h.object({page:h.number(),totalPages:h.number(),offset:h.number(),limit:h.number(),news:h.object({content:h.string(),id:h.string(),title:h.string(),createdAt:h.date(),updatedAt:h.date(),imageUrl:h.string().nullable()})})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:h.object({errors:h.record(h.string(),h.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:h.object({message:h.string()})}}}}},Hm={method:"get",path:"/auth/admin",tags:["Authentication"],summary:"Verify admin access",security:[{bearerAuth:[]}],responses:{200:{description:"Admin access verified successfully",summary:"Admin Access Granted",content:{"application/json":{schema:h.object({success:h.boolean()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:h.object({message:h.string()})}}}}},zm={method:"get",path:"/auth/certifications",tags:["Authentication"],summary:"List all authenticated user's certifications",security:[{bearerAuth:[]}],request:{query:qn},responses:{200:{description:"Paginated list of authenticated user certifications retrieved successfully",summary:"User Certifications Retrieved",content:{"application/json":{schema:h.object({page:h.number(),totalPages:h.number(),offset:h.number(),limit:h.number(),certifications:h.object({description:h.string(),id:h.string(),title:h.string(),certificationUrl:h.string(),createdAt:h.date(),updatedAt:h.date(),userId:h.string()})})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:h.object({errors:h.record(h.string(),h.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:h.object({message:h.string()})}}}}},Zm={method:"get",path:"/auth/pendencies",tags:["Authentication"],summary:"List all authenticated user's pendencies",security:[{bearerAuth:[]}],request:{query:On},responses:{200:{description:"Paginated list of authenticated user pendencies retrieved successfully",summary:"User Pendencies Retrieved",content:{"application/json":{schema:h.object({page:h.number(),totalPages:h.number(),offset:h.number(),limit:h.number(),pendencies:h.object({id:h.string(),title:h.string(),description:h.string(),status:h.enum(km.PendencyStatus),createdAt:h.date(),updatedAt:h.date(),userId:h.string()})})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:h.object({errors:h.record(h.string(),h.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:h.object({message:h.string()})}}}}};import{$Enums as Wg}from"@prisma/client";import S from"zod";import{extendZodWithOpenApi as Bg}from"@asteasolutions/zod-to-openapi";import Gn from"zod";Bg(Gn);var Ln=Gn.object({id:Gn.string()}),wr=class{constructor(e,r){this.certificationRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=Ln.parse({id:e.params.certification_id}),i=await this.certificationRepository.findById(t);if(!i)throw new p("A certifica\xE7\xE3o n\xE3o existe.");return await Promise.all([this.certificationRepository.deleteById(i.id),this.firebaseStorageService.deleteFile({fileUrl:i.certificationUrl})]),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Og}from"@asteasolutions/zod-to-openapi";import _n from"zod";Og(_n);var Wn=_n.object({certificationId:_n.uuid()}),Sr=class{constructor(e){this.certificationRepository=e}async handle(e,r){try{let{certificationId:t}=Wn.parse({certificationId:e.params.certification_id}),i=await this.certificationRepository.findById(t);if(!i)throw new p("Certificado n\xE3o encontrado.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Ng}from"@asteasolutions/zod-to-openapi";import Oe from"zod";var kg=1,Gg=6;Ng(Oe);var Hn=Oe.object({page:Oe.coerce.number().min(1).default(kg),limit:Oe.coerce.number().min(1).default(Gg),title:Oe.string().optional(),description:Oe.string().optional(),userId:Oe.uuid().optional(),orderBy:Oe.enum(["asc","desc"]).default("desc")}),vr=class{constructor(e){this.certificationRepository=e}async handle(e,r){try{let{limit:t,page:i,...n}=Hn.parse(e.query),s=i*t-t,[m,c]=await Promise.all([this.certificationRepository.find({pagination:{offset:s,limit:t},filter:n}),this.certificationRepository.count({filter:n})]),u=Math.max(Math.ceil(c/t),1);return r.status(200).json({page:i,totalPages:u,offset:s,limit:t,certifications:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Lg}from"@asteasolutions/zod-to-openapi";import vt from"zod";var U={NEWS:"images/news",USER:"images/user",IN_MEMORIAM:"images/in-memoriam",PARTNER:"images/partners",CERTIFICATION:"documents/certifications",PENDENCY:"documents/pendencies",REGIMENT:"documents/regiments",MEETING_MINUTE:"documents/meeting-minutes",INTERNATIONAL_SCIENTIFIC_CONGRESS_GALLERY:"images/international-scientific-congress-gallery",GALLERY:"images/regional-congress-gallery",REGIONAL_CONGRESS_GALLERY:"images/regional-congress-gallery",WEBINAR:"images/webinars",COURSE:"images/courses",POST_GRADUATE_PROGRAM:"images/post-graduate-programs"};Lg(vt);var Er=vt.object({userId:vt.uuid(),title:vt.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),description:vt.string().min(1,"Descri\xE7\xE3o \xE9 obrigat\xF3ria."),certification:vt.any().refine(o=>o&&typeof o=="object"&&o.size>0,"Arquivo do certificado \xE9 obrigat\xF3rio")}),jr=class{constructor(e,r,t){this.userRepository=e;this.certificationRepository=r;this.firebaseStorageService=t}async handle(e,r){try{let{userId:t,title:i,description:n,certification:s}=Er.parse({...e.body,userId:e.params.user_id,certification:e.file});if(!await this.userRepository.findById(t))throw new re("O usu\xE1rio n\xE3o existe.");let c=await this.firebaseStorageService.uploadFile({file:s,id:t,folder:U.CERTIFICATION});return await this.certificationRepository.register({userId:t,title:i,description:n,certificationUrl:c}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as _g}from"@asteasolutions/zod-to-openapi";import jt from"zod";_g(jt);var Pr=jt.object({id:jt.uuid(),title:jt.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),description:jt.string().min(1,"Descri\xE7\xE3o \xE9 obrigat\xF3ria."),certification:jt.any().refine(o=>o==null||typeof o=="object"&&typeof o.size=="number"&&(o.size===0||o.size>0),"Arquivo do certificado \xE9 inv\xE1lido").optional()}),xr=class{constructor(e,r){this.certificationRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{certification:t,id:i,...n}=Pr.parse({...e.body,id:e.params.certification_id,certification:e.file}),s=await this.certificationRepository.findById(i);if(!s)throw new re("A certifica\xE7\xE3o n\xE3o existe");let m=s.certificationUrl;return t&&t.size>0&&(m=await this.firebaseStorageService.updateFile({file:t,id:s.userId,folder:U.CERTIFICATION,fileUrl:s.certificationUrl})),await this.certificationRepository.update({...n,id:i,certificationUrl:m}),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Vm={method:"post",path:"/certifications/{user_id}",tags:["Certifications"],summary:"Register certification for user",security:[{bearerAuth:[]}],request:{params:Er.pick({userId:!0}).transform(()=>({user_id:""})),body:{content:{"multipart/form-data":{schema:Er.omit({userId:!0})}}}},responses:{201:{description:"Certification registered successfully for the user",summary:"Certification Registered",content:{"application/json":{schema:S.object({message:S.string()})}}},400:{description:"Invalid input data or file format",summary:"Validation Error",content:{"application/json":{schema:S.object({errors:S.record(S.string(),S.string())})}}},404:{description:"User not found with the provided ID",summary:"User Not Found",content:{"application/json":{schema:S.object({message:S.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:S.object({message:S.string()})}}}}},Km={method:"get",path:"/certifications",tags:["Certifications"],summary:"List certifications",security:[{bearerAuth:[]}],request:{query:Hn},responses:{200:{description:"Paginated list of certifications with user information retrieved successfully",summary:"Certifications Retrieved",content:{"application/json":{schema:S.object({page:S.number(),totalPages:S.number(),offset:S.number(),limit:S.number(),certifications:S.array(S.object({description:S.string(),userId:S.string(),title:S.string(),id:S.string(),createdAt:S.date(),updatedAt:S.date(),certificationUrl:S.url(),user:S.object({id:S.uuid(),name:S.string(),createdAt:S.date(),updatedAt:S.date(),avatarUrl:S.string().nullable(),emailAddress:S.email(),orcid:S.string().nullable(),phone:S.string().nullable(),lattesUrl:S.url().nullable(),role:S.enum(Wg.UserRole)})}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:S.object({errors:S.record(S.string(),S.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:S.object({message:S.string()})}}}}},Ym={method:"get",path:"/certifications/{certification_id}",tags:["Certifications"],summary:"Find certification by ID",security:[{bearerAuth:[]}],request:{params:Wn},responses:{200:{description:"Certification details retrieved successfully",summary:"Certification Retrieved",content:{"application/json":{schema:S.object({description:S.string(),userId:S.string(),title:S.string(),id:S.string(),createdAt:S.date(),updatedAt:S.date(),certificationUrl:S.url()}).nullable()}}},400:{description:"Invalid certification ID format",summary:"Validation Error",content:{"application/json":{schema:S.object({errors:S.record(S.string(),S.string())})}}},404:{description:"Certification not found with the provided ID",summary:"Certification Not Found",content:{"application/json":{schema:S.object({message:S.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:S.object({message:S.string()})}}}}},Xm={method:"put",path:"/certifications/{certification_id}",tags:["Certifications"],summary:"Update certification",security:[{bearerAuth:[]}],request:{params:Pr.pick({id:!0}).transform(()=>({certification_id:""})),body:{content:{"multipart/form-data":{schema:Pr.omit({id:!0})}}}},responses:{204:{description:"Certification updated successfully",summary:"Certification Updated"},400:{description:"Invalid input data or file format",summary:"Validation Error",content:{"application/json":{schema:S.object({errors:S.record(S.string(),S.string())})}}},404:{description:"Certification not found with the provided ID",summary:"Certification Not Found",content:{"application/json":{schema:S.object({message:S.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:S.object({message:S.string()})}}}}},$m={method:"delete",path:"/certifications/{certification_id}",tags:["Certifications"],summary:"Delete certification",security:[{bearerAuth:[]}],request:{params:Ln},responses:{204:{description:"Certification deleted successfully",summary:"Certification Deleted"},400:{description:"Invalid certification ID format",summary:"Validation Error",content:{"application/json":{schema:S.object({errors:S.record(S.string(),S.string())})}}},404:{description:"Certification not found with the provided ID",summary:"Certification Not Found",content:{"application/json":{schema:S.object({message:S.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:S.object({message:S.string()})}}}}};import f from"zod";import{extendZodWithOpenApi as Hg}from"@asteasolutions/zod-to-openapi";import zn from"zod";Hg(zn);var Zn=zn.object({id:zn.uuid()}),Mr=class{constructor(e,r){this.courseRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=Zn.parse({id:e.params.id}),i=await this.courseRepository.findById(t);if(!i)throw new p("O curso n\xE3o existe.");return i.imageUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.imageUrl}),await this.courseRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as zg}from"@asteasolutions/zod-to-openapi";import Vn from"zod";zg(Vn);var Kn=Vn.object({id:Vn.uuid()}),Tr=class{constructor(e){this.courseRepository=e}async handle(e,r){try{let{id:t}=Kn.parse({id:e.params.id}),i=await this.courseRepository.findById(t);if(!i)throw new p("Curso n\xE3o encontrado.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Zg}from"@asteasolutions/zod-to-openapi";import Ne from"zod";var Vg=1,Kg=6;Zg(Ne);var Yn=Ne.object({page:Ne.coerce.number().min(1).default(Vg),limit:Ne.coerce.number().min(1).default(Kg),title:Ne.string().optional(),description:Ne.string().optional(),coordinator:Ne.string().optional(),orderBy:Ne.enum(["asc","desc"]).default("desc")}),Ar=class{constructor(e){this.courseRepository=e}async handle(e,r){try{let{limit:t,page:i,...n}=Yn.parse(e.query),s=i*t-t,[m,c]=await Promise.all([this.courseRepository.find({pagination:{offset:s,limit:t},filter:n}),this.courseRepository.count({filter:n})]),u=Math.max(Math.ceil(c/t),1);return r.status(200).json({page:i,totalPages:u,offset:s,limit:t,courses:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Yg}from"@asteasolutions/zod-to-openapi";import oe from"zod";var Qm=5,Jm=1024,Xg=Jm*Jm,$g=Qm*Xg;Yg(oe);var Xn=oe.object({id:oe.uuid(),title:oe.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio.").optional(),coordinatorId:oe.string().uuid("Coordenador \xE9 obrigat\xF3rio.").optional(),email:oe.string().email("E-mail deve ser v\xE1lido.").optional(),location:oe.string().min(1,"Localiza\xE7\xE3o \xE9 obrigat\xF3ria.").optional(),scheduledAt:oe.coerce.date().optional(),registrationLink:oe.url("URL de inscri\xE7\xE3o deve ser v\xE1lida").optional(),description:oe.string().optional(),instructorIds:oe.transform(o=>typeof o=="string"?o.split(","):o).pipe(oe.array(oe.uuid())).optional(),image:oe.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=$g,`A imagem deve ter no m\xE1ximo ${Qm}MB.`).optional()}),Dr=class{constructor(e,r){this.courseRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,image:i,title:n,coordinatorId:s,email:m,location:c,scheduledAt:u,registrationLink:j,description:q,instructorIds:z}=Xn.parse({id:e.params.id,...e.body,image:e.file}),Y=await this.courseRepository.findById(t);if(!Y)throw new p("O curso n\xE3o existe.");let ne=Y.imageUrl;if(i&&(ne=await this.firebaseStorageService.uploadFile({file:i,id:t,folder:U.COURSE})),!ne)throw new a("URL da imagem \xE9 obrigat\xF3rio");return await this.courseRepository.update({id:t,title:n,coordinatorId:s,email:m,location:c,scheduledAt:u,registrationLink:j,description:q,imageUrl:ne,instructorIds:z}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var ec={method:"post",path:"/courses",tags:["Courses"],summary:"Create course",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:f.object({title:f.string().min(1).openapi({description:"T\xEDtulo do curso"}),coordinator:f.string().min(1).openapi({description:"Nome do coordenador"}),email:f.string().email().openapi({description:"E-mail de contato"}),location:f.string().min(1).openapi({description:"Localiza\xE7\xE3o do curso"}),scheduledAt:f.string().openapi({description:"Data e hora agendada (ISO 8601)",example:"2024-01-01T10:00:00Z"}),registrationLink:f.string().url().optional().openapi({description:"Link de inscri\xE7\xE3o"}),description:f.string().optional().openapi({description:"Descri\xE7\xE3o do curso"}),instructorIds:f.string().openapi({description:"IDs dos instrutores separados por v\xEDrgula",example:"uuid1,uuid2,uuid3"}),image:f.string().optional().openapi({description:"Imagem do curso (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{201:{description:"Course created successfully",summary:"Course Created"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:f.object({errors:f.record(f.string(),f.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:f.object({message:f.string()})}}}}},tc={method:"get",path:"/courses",tags:["Courses"],summary:"List courses",security:[{bearerAuth:[]}],request:{query:Yn},responses:{200:{description:"Paginated list of courses with instructor information retrieved successfully",summary:"Courses Retrieved",content:{"application/json":{schema:f.object({page:f.number(),totalPages:f.number(),offset:f.number(),limit:f.number(),courses:f.array(f.object({id:f.string(),title:f.string(),imageUrl:f.string().nullable(),coordinator:f.string(),email:f.string(),scheduledAt:f.date(),location:f.string(),registrationLink:f.string().nullable(),description:f.string().nullable(),createdAt:f.date(),updatedAt:f.date(),instructors:f.array(f.object({id:f.uuid(),name:f.string(),emailAddress:f.email(),avatarUrl:f.string().nullable(),createdAt:f.date(),updatedAt:f.date()}))}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:f.object({errors:f.record(f.string(),f.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:f.object({message:f.string()})}}}}},rc={method:"get",path:"/courses/{id}",tags:["Courses"],summary:"Find course by ID",security:[{bearerAuth:[]}],request:{params:Kn},responses:{200:{description:"Course details retrieved successfully",summary:"Course Retrieved",content:{"application/json":{schema:f.object({id:f.string(),title:f.string(),imageUrl:f.string().nullable(),coordinator:f.string(),email:f.string(),scheduledAt:f.date(),location:f.string(),registrationLink:f.string().nullable(),description:f.string().nullable(),createdAt:f.date(),updatedAt:f.date(),instructors:f.array(f.object({id:f.uuid(),name:f.string(),emailAddress:f.email(),avatarUrl:f.string().nullable(),createdAt:f.date(),updatedAt:f.date()}))}).nullable()}}},400:{description:"Invalid course ID format",summary:"Validation Error",content:{"application/json":{schema:f.object({errors:f.record(f.string(),f.string())})}}},404:{description:"Course not found with the provided ID",summary:"Course Not Found",content:{"application/json":{schema:f.object({message:f.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:f.object({message:f.string()})}}}}},oc={method:"put",path:"/courses/{id}",tags:["Courses"],summary:"Update course",security:[{bearerAuth:[]}],request:{params:Xn.pick({id:!0}),body:{content:{"multipart/form-data":{schema:f.object({title:f.string().min(1).optional().openapi({description:"T\xEDtulo do curso"}),coordinator:f.string().min(1).optional().openapi({description:"Nome do coordenador"}),email:f.string().email().optional().openapi({description:"E-mail de contato"}),location:f.string().min(1).optional().openapi({description:"Localiza\xE7\xE3o do curso"}),scheduledAt:f.string().optional().openapi({description:"Data e hora agendada (ISO 8601)",example:"2024-01-01T10:00:00Z"}),registrationLink:f.string().url().optional().openapi({description:"Link de inscri\xE7\xE3o"}),description:f.string().optional().openapi({description:"Descri\xE7\xE3o do curso"}),instructorIds:f.string().optional().openapi({description:"IDs dos instrutores separados por v\xEDrgula",example:"uuid1,uuid2,uuid3"}),image:f.string().optional().openapi({description:"Imagem do curso (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{200:{description:"Course updated successfully",summary:"Course Updated"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:f.object({errors:f.record(f.string(),f.string())})}}},404:{description:"Course not found with the provided ID",summary:"Course Not Found",content:{"application/json":{schema:f.object({message:f.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:f.object({message:f.string()})}}}}},ic={method:"delete",path:"/courses/{id}",tags:["Courses"],summary:"Delete course",security:[{bearerAuth:[]}],request:{params:Zn},responses:{200:{description:"Course deleted successfully",summary:"Course Deleted"},400:{description:"Invalid course ID format",summary:"Validation Error",content:{"application/json":{schema:f.object({errors:f.record(f.string(),f.string())})}}},404:{description:"Course not found with the provided ID",summary:"Course Not Found",content:{"application/json":{schema:f.object({message:f.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:f.object({message:f.string()})}}}}};import{$Enums as rs}from"@prisma/client";import I from"zod";import{extendZodWithOpenApi as Jg}from"@asteasolutions/zod-to-openapi";import ge from"zod";Jg(ge);var $n=ge.object({code:ge.string(),title:ge.string(),description:ge.string().optional(),notes:ge.string().optional(),leaderId:ge.uuid(),deputyLeaderId:ge.uuid(),secretaryId:ge.uuid(),memberIds:ge.array(ge.uuid())}),Fr=class{constructor(e){this.etpRepository=e}async handle(e,r){try{let{code:t,title:i,description:n,notes:s,leaderId:m,deputyLeaderId:c,secretaryId:u,memberIds:j}=$n.parse(e.body);if(await this.etpRepository.findByCode(t))throw new J("J\xE1 existe um ETP cadastrado com este c\xF3digo.");return await this.etpRepository.create({code:t,title:i,description:n,notes:s,leaderId:m,deputyLeaderId:c,secretaryId:u,memberIds:j}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Qg}from"@asteasolutions/zod-to-openapi";import Jn from"zod";Qg(Jn);var Qn=Jn.object({id:Jn.uuid()}),Ur=class{constructor(e){this.etpRepository=e}async handle(e,r){try{let{id:t}=Qn.parse({id:e.params.id});if(!await this.etpRepository.findById(t))throw new p("O ETP n\xE3o existe.");return await this.etpRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as ey}from"@asteasolutions/zod-to-openapi";import es from"zod";ey(es);var Br=es.object({id:es.uuid()}),qr=class{constructor(e){this.etpRepository=e}async handle(e,r){try{let{id:t}=Br.parse({id:e.params.id}),i=await this.etpRepository.findById(t);if(!i)throw new p("O ETP n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as ty}from"@asteasolutions/zod-to-openapi";import pe from"zod";ty(pe);var ts=pe.object({id:pe.uuid(),code:pe.string().optional(),title:pe.string().optional(),description:pe.string().optional(),notes:pe.string().optional(),leaderId:pe.uuid().optional(),deputyLeaderId:pe.uuid().optional(),secretaryId:pe.uuid().optional(),memberIds:pe.array(pe.uuid()).optional()}),Or=class{constructor(e){this.etpRepository=e}async handle(e,r){try{let{id:t,code:i,title:n,description:s,notes:m,leaderId:c,deputyLeaderId:u,secretaryId:j,memberIds:q}=ts.parse({id:e.params.id,...e.body});if(!await this.etpRepository.findById(t))throw new p("O ETP n\xE3o existe.");if(i){let Y=await this.etpRepository.findByCode(i);if(Y&&Y.id!==t)throw new J("J\xE1 existe um ETP com este c\xF3digo.")}return await this.etpRepository.update({id:t,code:i,title:n,description:s,notes:m,leaderId:c,deputyLeaderId:u,secretaryId:j,memberIds:q}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var ry=1,oy=9,Nr=I.object({id:I.uuid(),registrationNumber:I.string(),mainEtps:I.string().nullable(),formations:I.string().nullable(),degrees:I.array(I.enum(rs.Degree)),occupations:I.string(),seniority:I.enum(rs.Seniority),institutions:I.string(),biography:I.string().nullable(),createdAt:I.date(),updatedAt:I.date(),user:I.object({id:I.uuid(),name:I.string(),emailAddress:I.string(),avatarUrl:I.string().nullable(),orcid:I.string().nullable(),phone:I.string().nullable(),lattesUrl:I.string().nullable(),role:I.enum(rs.UserRole)})}),nc=I.object({id:I.uuid(),code:I.string(),title:I.string(),description:I.string().nullable(),notes:I.string().nullable(),createdAt:I.date(),updatedAt:I.date(),leader:I.object({id:I.uuid(),researcher:Nr}).nullable(),deputyLeader:I.object({id:I.uuid(),researcher:Nr}).nullable(),secretary:I.object({id:I.uuid(),researcher:Nr}).nullable(),members:I.array(Nr)}),sc={method:"post",path:"/etp",tags:["ETPs"],summary:"Create a new ETP with single leader, deputy leader, secretary and multiple members",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:$n}}}},responses:{201:{description:"ETP created successfully",summary:"ETP Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:I.object({errors:I.record(I.string(),I.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:I.object({message:I.string()})}}},409:{description:"ETP with this code already exists",summary:"Conflict",content:{"application/json":{schema:I.object({message:I.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:I.object({message:I.string()})}}}}},ac={method:"get",path:"/etp",tags:["ETPs"],summary:"List all ETPs with pagination and filters",request:{query:I.object({page:I.coerce.number().min(1).default(ry).optional(),limit:I.coerce.number().min(1).default(oy).optional(),code:I.string().optional(),title:I.string().optional(),description:I.string().optional(),notes:I.string().optional(),orderBy:I.enum(["asc","desc"]).optional()})},responses:{200:{description:"List of ETPs retrieved successfully with pagination",summary:"ETPs Retrieved",content:{"application/json":{schema:I.object({page:I.number(),totalPages:I.number(),offset:I.number(),limit:I.number(),etps:I.array(nc)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:I.object({message:I.string()})}}}}},mc={method:"get",path:"/etp/{id}",tags:["ETPs"],summary:"Find ETP by ID",request:{params:Br},responses:{200:{description:"ETP details retrieved successfully",summary:"ETP Retrieved",content:{"application/json":{schema:nc}}},400:{description:"Invalid ETP ID format",summary:"Validation Error",content:{"application/json":{schema:I.object({errors:I.record(I.string(),I.string())})}}},404:{description:"ETP not found with the provided ID",summary:"ETP Not Found",content:{"application/json":{schema:I.object({message:I.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:I.object({message:I.string()})}}}}},cc={method:"put",path:"/etp/{id}",tags:["ETPs"],summary:"Update ETP and manage user relationships (single leader, deputy leader, secretary, multiple members)",security:[{bearerAuth:[]}],request:{params:Br,body:{content:{"application/json":{schema:ts.omit({id:!0})}}}},responses:{200:{description:"ETP updated successfully",summary:"ETP Updated"},400:{description:"Invalid input data or ETP ID format",summary:"Validation Error",content:{"application/json":{schema:I.object({errors:I.record(I.string(),I.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:I.object({message:I.string()})}}},404:{description:"ETP not found with the provided ID",summary:"ETP Not Found",content:{"application/json":{schema:I.object({message:I.string()})}}},409:{description:"ETP with this code already exists",summary:"Conflict",content:{"application/json":{schema:I.object({message:I.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:I.object({message:I.string()})}}}}},pc={method:"delete",path:"/etp/{id}",tags:["ETPs"],summary:"Delete ETP",security:[{bearerAuth:[]}],request:{params:Qn},responses:{200:{description:"ETP deleted successfully",summary:"ETP Deleted"},400:{description:"Invalid ETP ID format",summary:"Validation Error",content:{"application/json":{schema:I.object({errors:I.record(I.string(),I.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:I.object({message:I.string()})}}},404:{description:"ETP not found with the provided ID",summary:"ETP Not Found",content:{"application/json":{schema:I.object({message:I.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:I.object({message:I.string()})}}}}};import{InMemoriamRole as Cy}from"@prisma/client";import E from"zod";import{extendZodWithOpenApi as iy}from"@asteasolutions/zod-to-openapi";import{InMemoriamRole as ny}from"@prisma/client";import ke from"zod";var lc=2,dc=1024,sy=dc*dc,ay=lc*sy;iy(ke);var os=ke.object({name:ke.string().min(1,"Nome \xE9 obrigat\xF3rio"),birthDate:ke.coerce.date(),deathDate:ke.coerce.date(),biography:ke.string().optional(),photo:ke.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=ay,`A imagem deve ter no m\xE1ximo ${lc}MB.`).optional(),role:ke.enum(ny)}).refine(o=>o.deathDate>o.birthDate,{message:"Data de falecimento deve ser posterior \xE0 data de nascimento",path:["deathDate"]}),kr=class{constructor(e,r){this.inMemoriamRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{name:t,birthDate:i,deathDate:n,biography:s,role:m,photo:c}=os.parse({...e.body,photo:e.file}),u=await this.inMemoriamRepository.create({name:t,birthDate:i,deathDate:n,biography:s??void 0,role:m}),j;return c&&(j=await this.firebaseStorageService.uploadFile({file:c,id:u.id,folder:U.IN_MEMORIAM}),await this.inMemoriamRepository.update({id:u.id,photoUrl:j})),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as my}from"@asteasolutions/zod-to-openapi";import is from"zod";my(is);var ns=is.object({id:is.uuid()}),Gr=class{constructor(e,r){this.inMemoriamRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=ns.parse({id:e.params.id}),i=await this.inMemoriamRepository.findById(t);if(!i)throw new p("O in memoriam n\xE3o existe.");return i.photoUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.photoUrl}),await this.inMemoriamRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as cy}from"@asteasolutions/zod-to-openapi";import ss from"zod";cy(ss);var _r=ss.object({id:ss.uuid()}),Lr=class{constructor(e){this.inMemoriamRepository=e}async handle(e,r){try{let{id:t}=_r.parse({id:e.params.id}),i=await this.inMemoriamRepository.findById(t);if(!i)throw new p("O in memoriam n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as py}from"@asteasolutions/zod-to-openapi";import{InMemoriamRole as dy}from"@prisma/client";import as from"zod";py(as);var ms=as.object({role:as.enum(dy)}),Wr=class{constructor(e){this.inMemoriamRepository=e}async handle(e,r){try{let{role:t}=ms.parse({role:e.params.role}),i=await this.inMemoriamRepository.findByRole(t);return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as ly}from"@asteasolutions/zod-to-openapi";import{InMemoriamRole as uy}from"@prisma/client";import Ge from"zod";var gy=1,yy=9;ly(Ge);var cs=Ge.object({page:Ge.coerce.number().min(1).default(gy),limit:Ge.coerce.number().min(1).default(yy),name:Ge.string().optional(),biography:Ge.string().optional(),role:Ge.enum(uy).optional(),orderBy:Ge.enum(["asc","desc"]).default("desc")}),Hr=class{constructor(e){this.inMemoriamRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=cs.parse(e.query),s=i*t-i,[m,c]=await Promise.all([this.inMemoriamRepository.find({pagination:{offset:s,limit:i},filter:n}),this.inMemoriamRepository.count({filter:n})]),u=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:u,offset:s,limit:i,inMemoriam:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as fy}from"@asteasolutions/zod-to-openapi";import{InMemoriamRole as hy}from"@prisma/client";import je from"zod";var gc=2,uc=1024,Ry=uc*uc,Iy=gc*Ry;fy(je);var ps=je.object({id:je.uuid(),name:je.string().min(1,"Nome \xE9 obrigat\xF3rio").optional(),birthDate:je.coerce.date().optional(),deathDate:je.coerce.date().optional(),biography:je.string().optional(),photo:je.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=Iy,`A imagem deve ter no m\xE1ximo ${gc}MB.`).optional(),role:je.enum(hy).optional()}).refine(o=>o.birthDate&&o.deathDate?o.deathDate>o.birthDate:!0,{message:"Data de falecimento deve ser posterior \xE0 data de nascimento",path:["deathDate"]}),zr=class{constructor(e,r){this.inMemoriamRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,name:i,birthDate:n,deathDate:s,biography:m,photo:c,role:u}=ps.parse({id:e.params.id,...e.body,photo:e.file}),j=await this.inMemoriamRepository.findById(t);if(!j)throw new p("O registro in memoriam n\xE3o existe.");let q=j.photoUrl;return c&&(q=await this.firebaseStorageService.uploadFile({file:c,id:t,folder:U.IN_MEMORIAM})),await this.inMemoriamRepository.update({id:t,name:i,birthDate:n,deathDate:s,biography:m,photoUrl:q??void 0,role:u}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var ds=E.object({id:E.uuid(),name:E.string(),birthDate:E.date(),deathDate:E.date(),biography:E.string().nullable(),photoUrl:E.string().nullable(),role:E.enum(Cy),createdAt:E.date(),updatedAt:E.date()}),yc={method:"post",path:"/in-memoriam",tags:["In Memoriam"],summary:"Create a new in memoriam record with optional photo upload",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:os}}}},responses:{201:{description:"In memoriam record created successfully",summary:"In Memoriam Created"},400:{description:"Invalid input data, missing required fields, or invalid photo format/size",summary:"Validation Error",content:{"application/json":{schema:E.object({errors:E.record(E.string(),E.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:E.object({message:E.string()})}}},409:{description:"In memoriam record with this name already exists",summary:"Conflict",content:{"application/json":{schema:E.object({message:E.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:E.object({message:E.string()})}}}}},fc={method:"get",path:"/in-memoriam",tags:["In Memoriam"],summary:"List all in memoriam records with pagination and filters",request:{query:cs},responses:{200:{description:"List of in memoriam records retrieved successfully with pagination",summary:"In Memoriam Records Retrieved",content:{"application/json":{schema:E.object({page:E.number(),totalPages:E.number(),offset:E.number(),limit:E.number(),inMemoriam:E.array(ds)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:E.object({errors:E.record(E.string(),E.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:E.object({message:E.string()})}}}}},hc={method:"get",path:"/in-memoriam/{id}",tags:["In Memoriam"],summary:"Find in memoriam record by ID",request:{params:_r},responses:{200:{description:"In memoriam record details retrieved successfully",summary:"In Memoriam Record Retrieved",content:{"application/json":{schema:ds}}},400:{description:"Invalid in memoriam record ID format",summary:"Validation Error",content:{"application/json":{schema:E.object({errors:E.record(E.string(),E.string())})}}},404:{description:"In memoriam record not found with the provided ID",summary:"In Memoriam Record Not Found",content:{"application/json":{schema:E.object({message:E.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:E.object({message:E.string()})}}}}},Rc={method:"put",path:"/in-memoriam/{id}",tags:["In Memoriam"],summary:"Update in memoriam record with optional photo upload",security:[{bearerAuth:[]}],request:{params:_r,body:{content:{"multipart/form-data":{schema:ps.omit({id:!0})}}}},responses:{200:{description:"In memoriam record updated successfully",summary:"In Memoriam Record Updated"},400:{description:"Invalid input data, in memoriam record ID format, or invalid photo format/size",summary:"Validation Error",content:{"application/json":{schema:E.object({errors:E.record(E.string(),E.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:E.object({message:E.string()})}}},404:{description:"In memoriam record not found with the provided ID",summary:"In Memoriam Record Not Found",content:{"application/json":{schema:E.object({message:E.string()})}}},409:{description:"In memoriam record with this name already exists",summary:"Conflict",content:{"application/json":{schema:E.object({message:E.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:E.object({message:E.string()})}}}}},Ic={method:"delete",path:"/in-memoriam/{id}",tags:["In Memoriam"],summary:"Delete in memoriam record",security:[{bearerAuth:[]}],request:{params:ns},responses:{200:{description:"In memoriam record deleted successfully",summary:"In Memoriam Record Deleted"},400:{description:"Invalid in memoriam record ID format",summary:"Validation Error",content:{"application/json":{schema:E.object({errors:E.record(E.string(),E.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:E.object({message:E.string()})}}},404:{description:"In memoriam record not found with the provided ID",summary:"In Memoriam Record Not Found",content:{"application/json":{schema:E.object({message:E.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:E.object({message:E.string()})}}}}},yv={method:"get",path:"/in-memoriam/role/{role}",tags:["In Memoriam"],summary:"Find in memoriam records by role",request:{params:ms},responses:{200:{description:"In memoriam records retrieved successfully by role",summary:"In Memoriam Records Retrieved by Role",content:{"application/json":{schema:E.array(ds)}}},400:{description:"Invalid role parameter provided",summary:"Validation Error",content:{"application/json":{schema:E.object({errors:E.record(E.string(),E.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:E.object({message:E.string()})}}}}};import k from"zod";import{extendZodWithOpenApi as by}from"@asteasolutions/zod-to-openapi";import Yt from"zod";var bc=2,Cc=1024,wy=Cc*Cc,Sy=bc*wy;by(Yt);var ls=Yt.object({image:Yt.any().refine(o=>o==null||typeof o!="object"||typeof o.size!="number"?!1:o.size<=Sy,`A imagem deve ter no m\xE1ximo ${bc}MB.`),caption:Yt.string().optional(),congressId:Yt.uuid()}),Zr=class{constructor(e,r,t){this.internationalScientificCongressGalleryRepository=e;this.internationalScientificCongressRepository=r;this.firebaseStorageService=t}async handle(e,r){try{let{image:t,caption:i,congressId:n}=ls.parse({...e.body,...e.params,image:e.file});if(!await this.internationalScientificCongressRepository.findById(n))throw new p("O congresso n\xE3o existe.");let m=await this.internationalScientificCongressGalleryRepository.create({imageUrl:"",caption:i||void 0,congressId:n}),c=await this.firebaseStorageService.uploadFile({file:t,id:m.id,folder:U.INTERNATIONAL_SCIENTIFIC_CONGRESS_GALLERY});return await this.internationalScientificCongressGalleryRepository.update({id:m.id,imageUrl:c}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as vy}from"@asteasolutions/zod-to-openapi";import us from"zod";vy(us);var Kr=us.object({id:us.uuid()}),Vr=class{constructor(e){this.internationalScientificCongressGalleryRepository=e}async handle(e,r){try{let{id:t}=Kr.parse({id:e.params.id});if(!await this.internationalScientificCongressGalleryRepository.findById(t))throw new p("A imagem da galeria n\xE3o existe.");return await this.internationalScientificCongressGalleryRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as jy}from"@asteasolutions/zod-to-openapi";import Et from"zod";var Ey=1,xy=9;jy(Et);var gs=Et.object({congressId:Et.uuid(),page:Et.coerce.number().min(1).default(Ey),limit:Et.coerce.number().min(1).default(xy),caption:Et.string().optional()}),Yr=class{constructor(e){this.internationalScientificCongressGalleryRepository=e}async handle(e,r){try{let{congressId:t,page:i,limit:n,...s}=gs.parse({congressId:e.params.congressId,...e.query}),m=n*i-n,[c,u]=await Promise.all([this.internationalScientificCongressGalleryRepository.findByCongressId({pagination:{offset:m,limit:n},filter:{congressId:t,...s}}),this.internationalScientificCongressGalleryRepository.count({filter:{congressId:t,caption:s.caption}})]),j=Math.max(Math.ceil(u/n),1);return r.status(200).json({page:i,totalPages:j,offset:m,limit:n,galleryImages:c})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Py}from"@asteasolutions/zod-to-openapi";import Xt from"zod";var Sc=2,wc=1024,My=wc*wc,Ty=Sc*My;Py(Xt);var ys=Xt.object({id:Xt.uuid(),image:Xt.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=Ty,`A imagem deve ter no m\xE1ximo ${Sc}MB.`).optional(),caption:Xt.string().optional()}),Xr=class{constructor(e,r){this.internationalScientificCongressGalleryRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,image:i,caption:n}=ys.parse({id:e.params.id,...e.body,image:e.file}),s=await this.internationalScientificCongressGalleryRepository.findById(t);if(!s)throw new p("A imagem da galeria n\xE3o existe.");let m=s.imageUrl;return i&&(m=await this.firebaseStorageService.uploadFile({file:i,id:t,folder:U.INTERNATIONAL_SCIENTIFIC_CONGRESS_GALLERY})),await this.internationalScientificCongressGalleryRepository.update({id:t,imageUrl:m??void 0,caption:n||void 0}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Ay=k.object({id:k.uuid(),imageUrl:k.string(),caption:k.string().nullable(),congressId:k.uuid()}),vc={method:"post",path:"/international-scientific-congress/{congressId}/gallery",tags:["International Scientific Congresses"],summary:"Create a new congress gallery image",security:[{bearerAuth:[]}],request:{params:k.object({congressId:k.uuid()}),body:{content:{"application/json":{schema:ls.omit({congressId:!0})}}}},responses:{201:{description:"Congress gallery image created successfully",summary:"Congress Gallery Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:k.object({errors:k.record(k.string(),k.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:k.object({message:k.string()})}}},404:{description:"Congress not found with the provided ID",summary:"Congress Not Found",content:{"application/json":{schema:k.object({message:k.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:k.object({message:k.string()})}}}}},jc={method:"get",path:"/international-scientific-congress/{congressId}/gallery",tags:["International Scientific Congresses"],summary:"Find congress gallery images by congress ID",request:{params:gs},responses:{200:{description:"Congress gallery images retrieved successfully by congress ID",summary:"Congress Galleries Retrieved",content:{"application/json":{schema:k.array(Ay)}}},400:{description:"Invalid congress ID parameter provided",summary:"Validation Error",content:{"application/json":{schema:k.object({errors:k.record(k.string(),k.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:k.object({message:k.string()})}}}}},Ec={method:"put",path:"/international-scientific-congress/gallery/{id}",tags:["International Scientific Congresses"],summary:"Update congress gallery image",security:[{bearerAuth:[]}],request:{params:Kr,body:{content:{"application/json":{schema:ys.omit({id:!0})}}}},responses:{200:{description:"Congress gallery image updated successfully",summary:"Congress Gallery Updated"},400:{description:"Invalid input data or gallery ID format",summary:"Validation Error",content:{"application/json":{schema:k.object({errors:k.record(k.string(),k.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:k.object({message:k.string()})}}},404:{description:"Congress gallery image not found with the provided ID",summary:"Congress Gallery Not Found",content:{"application/json":{schema:k.object({message:k.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:k.object({message:k.string()})}}}}},xc={method:"delete",path:"/international-scientific-congress/gallery/{id}",tags:["International Scientific Congresses"],summary:"Delete congress gallery image",security:[{bearerAuth:[]}],request:{params:Kr},responses:{200:{description:"Congress gallery image deleted successfully",summary:"Congress Gallery Deleted"},400:{description:"Invalid gallery ID format",summary:"Validation Error",content:{"application/json":{schema:k.object({errors:k.record(k.string(),k.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:k.object({message:k.string()})}}},404:{description:"Congress gallery image not found with the provided ID",summary:"Congress Gallery Not Found",content:{"application/json":{schema:k.object({message:k.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:k.object({message:k.string()})}}}}};import G from"zod";import{extendZodWithOpenApi as Dy}from"@asteasolutions/zod-to-openapi";import $t from"zod";var Mc=2,Pc=1024,Fy=Pc*Pc,Uy=Mc*Fy;Dy($t);var fs=$t.object({name:$t.string().min(1,"Nome \xE9 obrigat\xF3rio"),logo:$t.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=Uy,`A imagem deve ter no m\xE1ximo ${Mc}MB.`).optional(),congressId:$t.uuid()}),$r=class{constructor(e,r,t){this.internationalScientificCongressPartnerRepository=e;this.internationalScientificCongressRepository=r;this.firebaseStorageService=t}async handle(e,r){try{let{name:t,logo:i,congressId:n}=fs.parse({...e.body,...e.params,logo:e.file});if(!await this.internationalScientificCongressRepository.findById(n))throw new p("O congresso n\xE3o existe.");let m=await this.internationalScientificCongressPartnerRepository.create({name:t,congressId:n}),c;return i&&(c=await this.firebaseStorageService.uploadFile({file:i,id:m.id,folder:U.PARTNER}),await this.internationalScientificCongressPartnerRepository.update({id:m.id,logoUrl:c})),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as qy}from"@asteasolutions/zod-to-openapi";import hs from"zod";qy(hs);var Qr=hs.object({id:hs.uuid()}),Jr=class{constructor(e){this.internationalScientificCongressPartnerRepository=e}async handle(e,r){try{let{id:t}=Qr.parse({id:e.params.id});if(!await this.internationalScientificCongressPartnerRepository.findById(t))throw new p("O parceiro n\xE3o existe.");return await this.internationalScientificCongressPartnerRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as By}from"@asteasolutions/zod-to-openapi";import xt from"zod";var Oy=1,Ny=9;By(xt);var Rs=xt.object({congressId:xt.uuid(),page:xt.coerce.number().min(1).optional(),limit:xt.coerce.number().min(1).optional(),name:xt.string().optional()}),eo=class{constructor(e){this.internationalScientificCongressPartnerRepository=e}async handle(e,r){try{let{congressId:t,page:i,limit:n,...s}=Rs.parse({congressId:e.params.congressId,...e.query});if(i!==void 0&&n!==void 0){let c=i||Oy,u=n||Ny,j=u*c-u,[q,z]=await Promise.all([this.internationalScientificCongressPartnerRepository.findByCongressId({pagination:{offset:j,limit:u},filter:{congressId:t,...s}}),this.internationalScientificCongressPartnerRepository.count({filter:{congressId:t,name:s.name}})]),Y=Math.max(Math.ceil(z/u),1);return r.status(200).json({page:c,totalPages:Y,offset:j,limit:u,partners:q})}let m=await this.internationalScientificCongressPartnerRepository.findByCongressId({filter:{congressId:t,...s}});return r.status(200).json(m)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as ky}from"@asteasolutions/zod-to-openapi";import Jt from"zod";var Ac=2,Tc=1024,Gy=Tc*Tc,Ly=Ac*Gy;ky(Jt);var Is=Jt.object({id:Jt.uuid(),name:Jt.string().min(1,"Nome \xE9 obrigat\xF3rio").optional(),logo:Jt.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=Ly,`A imagem deve ter no m\xE1ximo ${Ac}MB.`).optional()}),to=class{constructor(e,r){this.internationalScientificCongressPartnerRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,name:i,logo:n}=Is.parse({id:e.params.id,...e.body,logo:e.file}),s=await this.internationalScientificCongressPartnerRepository.findById(t);if(!s)throw new p("O parceiro n\xE3o existe.");let m=s.logoUrl;return n&&(m=await this.firebaseStorageService.uploadFile({file:n,id:t,folder:U.PARTNER})),await this.internationalScientificCongressPartnerRepository.update({id:t,name:i,logoUrl:m??void 0}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var _y=G.object({id:G.uuid(),name:G.string(),logoUrl:G.string().nullable(),congressId:G.uuid()}),Dc={method:"post",path:"/international-scientific-congress/{congressId}/partner",tags:["International Scientific Congresses"],summary:"Create a new congress partner",security:[{bearerAuth:[]}],request:{params:G.object({congressId:G.uuid()}),body:{content:{"application/json":{schema:fs.omit({congressId:!0})}}}},responses:{201:{description:"Congress partner created successfully",summary:"Congress Partner Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:G.object({errors:G.record(G.string(),G.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:G.object({message:G.string()})}}},404:{description:"Congress not found with the provided ID",summary:"Congress Not Found",content:{"application/json":{schema:G.object({message:G.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:G.object({message:G.string()})}}}}},Fc={method:"get",path:"/international-scientific-congress/{congressId}/partner",tags:["International Scientific Congresses"],summary:"Find congress partners by congress ID",request:{params:Rs},responses:{200:{description:"Congress partners retrieved successfully by congress ID",summary:"Congress Partners Retrieved",content:{"application/json":{schema:G.array(_y)}}},400:{description:"Invalid congress ID parameter provided",summary:"Validation Error",content:{"application/json":{schema:G.object({errors:G.record(G.string(),G.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:G.object({message:G.string()})}}}}},Uc={method:"put",path:"/international-scientific-congress/partner/{id}",tags:["International Scientific Congresses"],summary:"Update congress partner",security:[{bearerAuth:[]}],request:{params:Qr,body:{content:{"application/json":{schema:Is.omit({id:!0})}}}},responses:{200:{description:"Congress partner updated successfully",summary:"Congress Partner Updated"},400:{description:"Invalid input data or partner ID format",summary:"Validation Error",content:{"application/json":{schema:G.object({errors:G.record(G.string(),G.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:G.object({message:G.string()})}}},404:{description:"Congress partner not found with the provided ID",summary:"Congress Partner Not Found",content:{"application/json":{schema:G.object({message:G.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:G.object({message:G.string()})}}}}},qc={method:"delete",path:"/international-scientific-congress/partner/{id}",tags:["International Scientific Congresses"],summary:"Delete congress partner",security:[{bearerAuth:[]}],request:{params:Qr},responses:{200:{description:"Congress partner deleted successfully",summary:"Congress Partner Deleted"},400:{description:"Invalid partner ID format",summary:"Validation Error",content:{"application/json":{schema:G.object({errors:G.record(G.string(),G.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:G.object({message:G.string()})}}},404:{description:"Congress partner not found with the provided ID",summary:"Congress Partner Not Found",content:{"application/json":{schema:G.object({message:G.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:G.object({message:G.string()})}}}}};import d from"zod";import{extendZodWithOpenApi as Wy}from"@asteasolutions/zod-to-openapi";import $ from"zod";Wy($);var Cs=$.object({title:$.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio"),edition:$.coerce.number().int().positive("Edi\xE7\xE3o deve ser um n\xFAmero positivo"),startDate:$.coerce.date(),endDate:$.coerce.date(),description:$.string().optional(),location:$.string().optional(),congressLink:$.url("Link do congresso deve ser uma URL v\xE1lida").optional().or($.literal("")),noticeUrl:$.url("URL do edital deve ser uma URL v\xE1lida").optional().or($.literal("")),scheduleUrl:$.url("URL do cronograma deve ser uma URL v\xE1lida").optional().or($.literal("")),programUrl:$.url("URL da programa\xE7\xE3o deve ser uma URL v\xE1lida").optional().or($.literal("")),adminReportUrl:$.url("URL do relat\xF3rio administrativo deve ser uma URL v\xE1lida").optional().or($.literal("")),proceedingsUrl:$.url("URL dos anais deve ser uma URL v\xE1lida").optional().or($.literal(""))}).refine(o=>o.endDate>=o.startDate,{message:"Data de t\xE9rmino deve ser posterior ou igual \xE0 data de in\xEDcio",path:["endDate"]}),ro=class{constructor(e){this.internationalScientificCongressRepository=e}async handle(e,r){try{let t=Cs.parse(e.body);return await this.internationalScientificCongressRepository.create(t),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Hy}from"@asteasolutions/zod-to-openapi";import bs from"zod";Hy(bs);var ws=bs.object({id:bs.uuid()}),oo=class{constructor(e){this.internationalScientificCongressRepository=e}async handle(e,r){try{let{id:t}=ws.parse({id:e.params.id});if(!await this.internationalScientificCongressRepository.findById(t))throw new p("O congresso n\xE3o existe.");return await this.internationalScientificCongressRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as zy}from"@asteasolutions/zod-to-openapi";import Ss from"zod";zy(Ss);var vs=Ss.object({edition:Ss.coerce.number().int().positive()}),io=class{constructor(e){this.internationalScientificCongressRepository=e}async handle(e,r){try{let{edition:t}=vs.parse({edition:e.params.edition}),i=await this.internationalScientificCongressRepository.findByEdition(t);return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Zy}from"@asteasolutions/zod-to-openapi";import js from"zod";Zy(js);var so=js.object({id:js.uuid()}),no=class{constructor(e){this.internationalScientificCongressRepository=e}async handle(e,r){try{let{id:t}=so.parse({id:e.params.id}),i=await this.internationalScientificCongressRepository.findById(t);if(!i)throw new p("O congresso n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Vy}from"@asteasolutions/zod-to-openapi";import Le from"zod";var Ky=1,Yy=10;Vy(Le);var Es=Le.object({page:Le.coerce.number().min(1).default(Ky),limit:Le.coerce.number().min(1).default(Yy),title:Le.string().optional(),edition:Le.coerce.number().int().positive().optional(),location:Le.string().optional(),orderBy:Le.enum(["asc","desc"]).optional()}),ao=class{constructor(e){this.internationalScientificCongressRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=Es.parse(e.query),s=i*t-i,[m,c]=await Promise.all([this.internationalScientificCongressRepository.find({pagination:{offset:s,limit:i},filter:n}),this.internationalScientificCongressRepository.count({filter:n})]),u=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:u,offset:s,limit:i,congresses:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Xy}from"@asteasolutions/zod-to-openapi";import X from"zod";Xy(X);var xs=X.object({id:X.uuid(),title:X.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio").optional(),edition:X.coerce.number().int().positive("Edi\xE7\xE3o deve ser um n\xFAmero positivo").optional(),startDate:X.coerce.date().optional(),endDate:X.coerce.date().optional(),description:X.string().optional(),location:X.string().optional(),congressLink:X.url("Link do congresso deve ser uma URL v\xE1lida").optional().or(X.literal("")),noticeUrl:X.url("URL do edital deve ser uma URL v\xE1lida").optional().or(X.literal("")),scheduleUrl:X.url("URL do cronograma deve ser uma URL v\xE1lida").optional().or(X.literal("")),programUrl:X.url("URL da programa\xE7\xE3o deve ser uma URL v\xE1lida").optional().or(X.literal("")),adminReportUrl:X.url("URL do relat\xF3rio administrativo deve ser uma URL v\xE1lida").optional().or(X.literal("")),proceedingsUrl:X.url("URL dos anais deve ser uma URL v\xE1lida").optional().or(X.literal(""))}),mo=class{constructor(e){this.internationalScientificCongressRepository=e}async handle(e,r){try{let{id:t,...i}=xs.parse({id:e.params.id,...e.body});if(!await this.internationalScientificCongressRepository.findById(t))throw new p("O congresso n\xE3o existe.");return await this.internationalScientificCongressRepository.update({...i,id:t}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var $y=9,Jy=d.object({image:d.any().openapi({type:"string",format:"binary"}),caption:d.string().optional()}),Qy=d.object({image:d.any().openapi({type:"string",format:"binary"}).optional(),caption:d.string().optional()}),ef=d.object({id:d.uuid(),name:d.string(),logoUrl:d.string().nullable(),congressId:d.uuid()}),Ps=d.object({id:d.uuid(),imageUrl:d.string(),caption:d.string().nullable(),congressId:d.uuid()}),Ms=d.object({id:d.uuid(),title:d.string(),edition:d.number(),startDate:d.date(),endDate:d.date(),description:d.string().nullable(),location:d.string().nullable(),congressLink:d.string().nullable(),noticeUrl:d.string().nullable(),scheduleUrl:d.string().nullable(),programUrl:d.string().nullable(),adminReportUrl:d.string().nullable(),proceedingsUrl:d.string().nullable(),partners:d.array(ef),galleries:d.array(Ps),createdAt:d.date(),updatedAt:d.date()}),Bc={method:"post",path:"/international-scientific-congress",tags:["International Scientific Congresses"],summary:"Create a new international scientific congress",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:Cs}}}},responses:{201:{description:"International scientific congress created successfully",summary:"International Scientific Congress Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:d.object({errors:d.record(d.string(),d.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:d.object({message:d.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:d.object({message:d.string()})}}}}},Oc={method:"get",path:"/international-scientific-congress",tags:["International Scientific Congresses"],summary:"List all international scientific congresses with pagination and filters",request:{query:Es},responses:{200:{description:"List of international scientific congresses retrieved successfully with pagination",summary:"International Scientific Congresses Retrieved",content:{"application/json":{schema:d.object({page:d.number(),totalPages:d.number(),offset:d.number(),limit:d.number(),congresses:d.array(Ms)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:d.object({errors:d.record(d.string(),d.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:d.object({message:d.string()})}}}}},Nc={method:"get",path:"/international-scientific-congress/{id}",tags:["International Scientific Congresses"],summary:"Find international scientific congress by ID",request:{params:so},responses:{200:{description:"International scientific congress details retrieved successfully",summary:"International Scientific Congress Retrieved",content:{"application/json":{schema:Ms}}},400:{description:"Invalid international scientific congress ID format",summary:"Validation Error",content:{"application/json":{schema:d.object({errors:d.record(d.string(),d.string())})}}},404:{description:"International scientific congress not found with the provided ID",summary:"International Scientific Congress Not Found",content:{"application/json":{schema:d.object({message:d.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:d.object({message:d.string()})}}}}},kc={method:"get",path:"/international-scientific-congress/edition/{edition}",tags:["International Scientific Congresses"],summary:"Find international scientific congresses by edition",request:{params:vs},responses:{200:{description:"International scientific congresses retrieved successfully by edition",summary:"International Scientific Congresses Retrieved by Edition",content:{"application/json":{schema:d.array(Ms)}}},400:{description:"Invalid edition parameter provided",summary:"Validation Error",content:{"application/json":{schema:d.object({errors:d.record(d.string(),d.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:d.object({message:d.string()})}}}}},Gc={method:"put",path:"/international-scientific-congress/{id}",tags:["International Scientific Congresses"],summary:"Update international scientific congress",security:[{bearerAuth:[]}],request:{params:so,body:{content:{"application/json":{schema:xs.omit({id:!0})}}}},responses:{200:{description:"International scientific congress updated successfully",summary:"International Scientific Congress Updated"},400:{description:"Invalid input data or international scientific congress ID format",summary:"Validation Error",content:{"application/json":{schema:d.object({errors:d.record(d.string(),d.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:d.object({message:d.string()})}}},404:{description:"International scientific congress not found with the provided ID",summary:"International Scientific Congress Not Found",content:{"application/json":{schema:d.object({message:d.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:d.object({message:d.string()})}}}}},Lc={method:"delete",path:"/international-scientific-congress/{id}",tags:["International Scientific Congresses"],summary:"Delete international scientific congress",security:[{bearerAuth:[]}],request:{params:ws},responses:{200:{description:"International scientific congress deleted successfully",summary:"International Scientific Congress Deleted"},400:{description:"Invalid international scientific congress ID format",summary:"Validation Error",content:{"application/json":{schema:d.object({errors:d.record(d.string(),d.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:d.object({message:d.string()})}}},404:{description:"International scientific congress not found with the provided ID",summary:"International Scientific Congress Not Found",content:{"application/json":{schema:d.object({message:d.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:d.object({message:d.string()})}}}}},dE={method:"post",path:"/international-scientific-congress/{congressId}/gallery",tags:["International Scientific Congress Gallery"],summary:"Create a new gallery image for a congress",security:[{bearerAuth:[]}],request:{params:d.object({congressId:d.uuid()}),body:{content:{"multipart/form-data":{schema:Jy}}}},responses:{201:{description:"Gallery image created successfully",summary:"Gallery Image Created"},400:{description:"Invalid input data, missing required fields, or invalid image format/size",summary:"Validation Error",content:{"application/json":{schema:d.object({errors:d.record(d.string(),d.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:d.object({message:d.string()})}}},404:{description:"Congress not found with the provided ID",summary:"Congress Not Found",content:{"application/json":{schema:d.object({message:d.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:d.object({message:d.string()})}}}}},lE={method:"get",path:"/international-scientific-congress/{congressId}/gallery",tags:["International Scientific Congress Gallery"],summary:"List all gallery images for a congress with pagination",request:{params:d.object({congressId:d.uuid()}),query:d.object({page:d.coerce.number().min(1).default(1),limit:d.coerce.number().min(1).default($y),caption:d.string().optional()})},responses:{200:{description:"Gallery images retrieved successfully with pagination",summary:"Gallery Images Retrieved",content:{"application/json":{schema:d.object({page:d.number(),totalPages:d.number(),offset:d.number(),limit:d.number(),galleries:d.array(Ps)})}}},400:{description:"Invalid congress ID format or query parameters",summary:"Validation Error",content:{"application/json":{schema:d.object({errors:d.record(d.string(),d.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:d.object({message:d.string()})}}}}},uE={method:"get",path:"/international-scientific-congress/gallery/{id}",tags:["International Scientific Congress Gallery"],summary:"Find a gallery image by ID",request:{params:d.object({id:d.uuid()})},responses:{200:{description:"Gallery image retrieved successfully",summary:"Gallery Image Retrieved",content:{"application/json":{schema:Ps}}},400:{description:"Invalid gallery image ID format",summary:"Validation Error",content:{"application/json":{schema:d.object({errors:d.record(d.string(),d.string())})}}},404:{description:"Gallery image not found with the provided ID",summary:"Gallery Image Not Found",content:{"application/json":{schema:d.object({message:d.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:d.object({message:d.string()})}}}}},gE={method:"put",path:"/international-scientific-congress/gallery/{id}",tags:["International Scientific Congress Gallery"],summary:"Update a gallery image with optional image upload",security:[{bearerAuth:[]}],request:{params:d.object({id:d.uuid()}),body:{content:{"multipart/form-data":{schema:Qy}}}},responses:{200:{description:"Gallery image updated successfully",summary:"Gallery Image Updated"},400:{description:"Invalid input data, gallery ID format, or invalid image format/size",summary:"Validation Error",content:{"application/json":{schema:d.object({errors:d.record(d.string(),d.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:d.object({message:d.string()})}}},404:{description:"Gallery image not found with the provided ID",summary:"Gallery Image Not Found",content:{"application/json":{schema:d.object({message:d.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:d.object({message:d.string()})}}}}},yE={method:"delete",path:"/international-scientific-congress/gallery/{id}",tags:["International Scientific Congress Gallery"],summary:"Delete a gallery image",security:[{bearerAuth:[]}],request:{params:d.object({id:d.uuid()})},responses:{200:{description:"Gallery image deleted successfully",summary:"Gallery Image Deleted"},400:{description:"Invalid gallery ID format",summary:"Validation Error",content:{"application/json":{schema:d.object({errors:d.record(d.string(),d.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:d.object({message:d.string()})}}},404:{description:"Gallery image not found with the provided ID",summary:"Gallery Image Not Found",content:{"application/json":{schema:d.object({message:d.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:d.object({message:d.string()})}}}}};import{$Enums as sf}from"@prisma/client";import A from"zod";import{extendZodWithOpenApi as tf}from"@asteasolutions/zod-to-openapi";import Pt from"zod";tf(Pt);var Ts=Pt.object({role:Pt.string().min(1),description:Pt.string().optional(),userId:Pt.uuid(),order:Pt.number().optional()}),co=class{constructor(e){this.legitimatorCommitteeMemberRepository=e}async handle(e,r){try{let{role:t,description:i,userId:n,order:s}=Ts.parse(e.body);return await this.legitimatorCommitteeMemberRepository.create({role:t,description:i,userId:n,order:s??0}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as rf}from"@asteasolutions/zod-to-openapi";import As from"zod";rf(As);var Ds=As.object({id:As.uuid()}),po=class{constructor(e){this.legitimatorCommitteeMemberRepository=e}async handle(e,r){try{let{id:t}=Ds.parse({id:e.params.id});if(!await this.legitimatorCommitteeMemberRepository.findById(t))throw new p("O membro do comit\xEA legitimador n\xE3o existe.");return await this.legitimatorCommitteeMemberRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as of}from"@asteasolutions/zod-to-openapi";import Fs from"zod";of(Fs);var uo=Fs.object({id:Fs.uuid()}),lo=class{constructor(e){this.legitimatorCommitteeMemberRepository=e}async handle(e,r){try{let{id:t}=uo.parse({id:e.params.id}),i=await this.legitimatorCommitteeMemberRepository.findById(t);if(!i)throw new p("O membro do comit\xEA legitimador n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as nf}from"@asteasolutions/zod-to-openapi";import it from"zod";nf(it);var Us=it.object({id:it.uuid(),role:it.string().min(1).optional(),description:it.string().optional(),userId:it.uuid().optional(),order:it.number().optional()}),go=class{constructor(e){this.legitimatorCommitteeMemberRepository=e}async handle(e,r){try{let{id:t,role:i,description:n,userId:s,order:m}=Us.parse({id:e.params.id,...e.body});if(!await this.legitimatorCommitteeMemberRepository.findById(t))throw new p("O membro do comit\xEA legitimador n\xE3o existe.");return await this.legitimatorCommitteeMemberRepository.update({id:t,role:i,description:n,userId:s,order:m}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var af=A.object({id:A.uuid(),name:A.string(),emailAddress:A.string(),avatarUrl:A.string().nullable(),orcid:A.string().nullable(),phone:A.string().nullable(),lattesUrl:A.string().nullable(),role:A.enum(sf.UserRole)}),_c=A.object({id:A.uuid(),role:A.string(),description:A.string().nullable(),order:A.number(),createdAt:A.date(),updatedAt:A.date(),userId:A.uuid(),user:af}),Wc={method:"post",path:"/legitimator-committee-member",tags:["Legitimator Committee Members"],summary:"Create a new Legitimator Committee Member",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:Ts}}}},responses:{201:{description:"Legitimator Committee Member created successfully",summary:"Legitimator Committee Member Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:A.object({errors:A.record(A.string(),A.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:A.object({message:A.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:A.object({message:A.string()})}}}}},Hc={method:"get",path:"/legitimator-committee-member",tags:["Legitimator Committee Members"],summary:"List all Legitimator Committee Members with filters",request:{query:A.object({role:A.string().optional(),orderBy:A.enum(["asc","desc"]).optional()})},responses:{200:{description:"List of Legitimator Committee Members retrieved successfully",summary:"Legitimator Committee Members Retrieved",content:{"application/json":{schema:A.object({members:A.array(_c)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:A.object({message:A.string()})}}}}},zc={method:"get",path:"/legitimator-committee-member/{id}",tags:["Legitimator Committee Members"],summary:"Find Legitimator Committee Member by ID",request:{params:uo},responses:{200:{description:"Legitimator Committee Member details retrieved successfully",summary:"Legitimator Committee Member Retrieved",content:{"application/json":{schema:_c}}},400:{description:"Invalid Legitimator Committee Member ID format",summary:"Validation Error",content:{"application/json":{schema:A.object({errors:A.record(A.string(),A.string())})}}},404:{description:"Legitimator Committee Member not found with the provided ID",summary:"Legitimator Committee Member Not Found",content:{"application/json":{schema:A.object({message:A.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:A.object({message:A.string()})}}}}},Zc={method:"put",path:"/legitimator-committee-member/{id}",tags:["Legitimator Committee Members"],summary:"Update Legitimator Committee Member",security:[{bearerAuth:[]}],request:{params:uo,body:{content:{"application/json":{schema:Us.omit({id:!0})}}}},responses:{200:{description:"Legitimator Committee Member updated successfully",summary:"Legitimator Committee Member Updated"},400:{description:"Invalid input data or Legitimator Committee Member ID format",summary:"Validation Error",content:{"application/json":{schema:A.object({errors:A.record(A.string(),A.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:A.object({message:A.string()})}}},404:{description:"Legitimator Committee Member not found with the provided ID",summary:"Legitimator Committee Member Not Found",content:{"application/json":{schema:A.object({message:A.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:A.object({message:A.string()})}}}}},Vc={method:"delete",path:"/legitimator-committee-member/{id}",tags:["Legitimator Committee Members"],summary:"Delete Legitimator Committee Member",security:[{bearerAuth:[]}],request:{params:Ds},responses:{200:{description:"Legitimator Committee Member deleted successfully",summary:"Legitimator Committee Member Deleted"},400:{description:"Invalid Legitimator Committee Member ID format",summary:"Validation Error",content:{"application/json":{schema:A.object({errors:A.record(A.string(),A.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:A.object({message:A.string()})}}},404:{description:"Legitimator Committee Member not found with the provided ID",summary:"Legitimator Committee Member Not Found",content:{"application/json":{schema:A.object({message:A.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:A.object({message:A.string()})}}}}};import{$Enums as lf}from"@prisma/client";import v from"zod";import{extendZodWithOpenApi as mf}from"@asteasolutions/zod-to-openapi";import Ee from"zod";mf(Ee);var qs=Ee.object({name:Ee.string().min(1),description:Ee.string().optional(),members:Ee.array(Ee.object({userId:Ee.uuid(),role:Ee.string().min(1),order:Ee.number().optional()}))}),yo=class{constructor(e){this.managementTeamRepository=e}async handle(e,r){try{let{name:t,description:i,members:n}=qs.parse(e.body);if(await this.managementTeamRepository.findByName(t))throw new J("J\xE1 existe um time de gest\xE3o cadastrado com este nome.");return await this.managementTeamRepository.create({name:t,description:i,members:n.map(m=>({userId:m.userId,role:m.role,order:m.order??0}))}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as cf}from"@asteasolutions/zod-to-openapi";import Bs from"zod";cf(Bs);var Os=Bs.object({id:Bs.uuid()}),fo=class{constructor(e){this.managementTeamRepository=e}async handle(e,r){try{let{id:t}=Os.parse({id:e.params.id});if(!await this.managementTeamRepository.findById(t))throw new p("O time de gest\xE3o n\xE3o existe.");return await this.managementTeamRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as pf}from"@asteasolutions/zod-to-openapi";import Ns from"zod";pf(Ns);var Ro=Ns.object({id:Ns.uuid()}),ho=class{constructor(e){this.managementTeamRepository=e}async handle(e,r){try{let{id:t}=Ro.parse({id:e.params.id}),i=await this.managementTeamRepository.findById(t);if(!i)throw new p("O time de gest\xE3o n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as df}from"@asteasolutions/zod-to-openapi";import Ce from"zod";df(Ce);var ks=Ce.object({id:Ce.uuid(),name:Ce.string().min(1).optional(),description:Ce.string().optional(),members:Ce.array(Ce.object({userId:Ce.uuid(),role:Ce.string().min(1),order:Ce.number().optional()})).optional()}),Io=class{constructor(e){this.managementTeamRepository=e}async handle(e,r){try{let{id:t,name:i,description:n,members:s}=ks.parse({id:e.params.id,...e.body}),m=await this.managementTeamRepository.findById(t);if(!m)throw new p("O time de gest\xE3o n\xE3o existe.");if(i&&i!==m.name){let c=await this.managementTeamRepository.findByName(i);if(c&&c.id!==t)throw new J("J\xE1 existe um time de gest\xE3o com este nome.")}return await this.managementTeamRepository.update({id:t,name:i,description:n,members:s?s.map(c=>({userId:c.userId,role:c.role,order:c.order??0})):void 0}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var uf=v.object({id:v.uuid(),name:v.string(),emailAddress:v.string(),avatarUrl:v.string().nullable(),orcid:v.string().nullable(),phone:v.string().nullable(),lattesUrl:v.string().nullable(),role:v.enum(lf.UserRole)}),gf=v.object({id:v.uuid(),role:v.string(),description:v.string().nullable(),order:v.number(),teamId:v.uuid(),userId:v.uuid(),createdAt:v.date(),updatedAt:v.date(),user:uf}),Kc=v.object({id:v.uuid(),name:v.string(),description:v.string().nullable(),createdAt:v.date(),updatedAt:v.date(),members:v.array(gf)}),Yc={method:"post",path:"/management-team",tags:["Management Teams"],summary:"Create a new Management Team with multiple members",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:qs}}}},responses:{201:{description:"Management Team created successfully",summary:"Management Team Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:v.object({errors:v.record(v.string(),v.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:v.object({message:v.string()})}}},409:{description:"Management Team with this name already exists",summary:"Conflict",content:{"application/json":{schema:v.object({message:v.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:v.object({message:v.string()})}}}}},Xc={method:"get",path:"/management-team",tags:["Management Teams"],summary:"List all Management Teams with filters",request:{query:v.object({name:v.string().optional(),description:v.string().optional(),orderBy:v.enum(["asc","desc"]).optional()})},responses:{200:{description:"List of Management Teams retrieved successfully",summary:"Management Teams Retrieved",content:{"application/json":{schema:v.object({teams:v.array(Kc)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:v.object({message:v.string()})}}}}},$c={method:"get",path:"/management-team/{id}",tags:["Management Teams"],summary:"Find Management Team by ID",request:{params:Ro},responses:{200:{description:"Management Team details retrieved successfully",summary:"Management Team Retrieved",content:{"application/json":{schema:Kc}}},400:{description:"Invalid Management Team ID format",summary:"Validation Error",content:{"application/json":{schema:v.object({errors:v.record(v.string(),v.string())})}}},404:{description:"Management Team not found with the provided ID",summary:"Management Team Not Found",content:{"application/json":{schema:v.object({message:v.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:v.object({message:v.string()})}}}}},Jc={method:"put",path:"/management-team/{id}",tags:["Management Teams"],summary:"Update Management Team and manage member relationships",security:[{bearerAuth:[]}],request:{params:Ro,body:{content:{"application/json":{schema:ks.omit({id:!0})}}}},responses:{200:{description:"Management Team updated successfully",summary:"Management Team Updated"},400:{description:"Invalid input data or Management Team ID format",summary:"Validation Error",content:{"application/json":{schema:v.object({errors:v.record(v.string(),v.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:v.object({message:v.string()})}}},404:{description:"Management Team not found with the provided ID",summary:"Management Team Not Found",content:{"application/json":{schema:v.object({message:v.string()})}}},409:{description:"Management Team with this name already exists",summary:"Conflict",content:{"application/json":{schema:v.object({message:v.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:v.object({message:v.string()})}}}}},Qc={method:"delete",path:"/management-team/{id}",tags:["Management Teams"],summary:"Delete Management Team",security:[{bearerAuth:[]}],request:{params:Os},responses:{200:{description:"Management Team deleted successfully",summary:"Management Team Deleted"},400:{description:"Invalid Management Team ID format",summary:"Validation Error",content:{"application/json":{schema:v.object({errors:v.record(v.string(),v.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:v.object({message:v.string()})}}},404:{description:"Management Team not found with the provided ID",summary:"Management Team Not Found",content:{"application/json":{schema:v.object({message:v.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:v.object({message:v.string()})}}}}};import{MeetingFormat as wf,MeetingStatus as Sf}from"@prisma/client";import F from"zod";import{extendZodWithOpenApi as yf}from"@asteasolutions/zod-to-openapi";import Mt from"zod";var tp=10,ep=1024,ff=ep*ep,hf=tp*ff;yf(Mt);var Gs=Mt.object({title:Mt.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio"),publishedAt:Mt.coerce.date(),meetingId:Mt.uuid(),document:Mt.any().refine(o=>o==null||typeof o!="object"||typeof o.size!="number"?!1:o.size<=hf,`O documento deve ter no m\xE1ximo ${tp}MB.`)}),Co=class{constructor(e,r,t){this.meetingMinuteRepository=e;this.meetingRepository=r;this.firebaseStorageService=t}async handle(e,r){try{let{title:t,publishedAt:i,meetingId:n,document:s}=Gs.parse({...e.body,...e.params,document:e.file});if(!await this.meetingRepository.findById(n))throw new p("A reuni\xE3o n\xE3o existe.");if(await this.meetingMinuteRepository.findByMeetingId(n))throw new a("Esta reuni\xE3o j\xE1 possui uma ata.");let u=await this.meetingMinuteRepository.create({title:t,publishedAt:i,meetingId:n,documentUrl:""}),j=await this.firebaseStorageService.uploadFile({file:s,id:u.id,folder:U.MEETING_MINUTE});return await this.meetingMinuteRepository.update({id:u.id,documentUrl:j}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Rf}from"@asteasolutions/zod-to-openapi";import Ls from"zod";Rf(Ls);var Qt=Ls.object({meetingId:Ls.uuid()}),bo=class{constructor(e){this.meetingMinuteRepository=e}async handle(e,r){try{let{meetingId:t}=Qt.parse({meetingId:e.params.meetingId}),i=await this.meetingMinuteRepository.findByMeetingId(t);return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as If}from"@asteasolutions/zod-to-openapi";import Tt from"zod";var op=10,rp=1024,Cf=rp*rp,bf=op*Cf;If(Tt);var _s=Tt.object({meetingId:Tt.uuid(),title:Tt.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio").optional(),publishedAt:Tt.coerce.date().optional(),document:Tt.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=bf,`O documento deve ter no m\xE1ximo ${op}MB.`).optional()}),wo=class{constructor(e,r){this.meetingMinuteRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{meetingId:t,title:i,publishedAt:n,document:s}=_s.parse({meetingId:e.params.meetingId,...e.body,document:e.file}),m=await this.meetingMinuteRepository.findByMeetingId(t);if(!m)throw new p("A ata n\xE3o existe para esta reuni\xE3o.");let c=m.documentUrl;return s&&(m.documentUrl&&await this.firebaseStorageService.deleteFile({fileUrl:m.documentUrl}),c=await this.firebaseStorageService.uploadFile({file:s,id:m.id,folder:U.MEETING_MINUTE})),await this.meetingMinuteRepository.update({id:m.id,title:i,publishedAt:n,documentUrl:c??void 0}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var vf=F.object({id:F.uuid(),title:F.string(),scheduledAt:F.date(),format:F.enum(wf),agenda:F.string(),meetingLink:F.string().nullable(),location:F.string().nullable(),status:F.enum(Sf),createdAt:F.date(),updatedAt:F.date()}),jf=F.object({id:F.uuid(),title:F.string(),publishedAt:F.date(),documentUrl:F.string(),meetingId:F.uuid(),meeting:vf,createdAt:F.date(),updatedAt:F.date()}),ip={method:"post",path:"/meeting/{meetingId}/minute",tags:["Meetings"],summary:"Create a new meeting minute with document upload",security:[{bearerAuth:[]}],request:{params:F.object({meetingId:F.uuid()}),body:{content:{"multipart/form-data":{schema:Gs.omit({meetingId:!0})}}}},responses:{201:{description:"Meeting minute created successfully",summary:"Meeting Minute Created"},400:{description:"Invalid input data, missing required fields, or invalid document format/size",summary:"Validation Error",content:{"application/json":{schema:F.object({errors:F.record(F.string(),F.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:F.object({message:F.string()})}}},404:{description:"Meeting not found with the provided ID",summary:"Meeting Not Found",content:{"application/json":{schema:F.object({message:F.string()})}}},409:{description:"Meeting already has a minute",summary:"Conflict",content:{"application/json":{schema:F.object({message:F.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:F.object({message:F.string()})}}}}},np={method:"get",path:"/meeting/{meetingId}/minute",tags:["Meetings"],summary:"Find meeting minute by meeting ID",request:{params:Qt},responses:{200:{description:"Meeting minute retrieved successfully by meeting ID",summary:"Meeting Minute Retrieved by Meeting ID",content:{"application/json":{schema:jf.nullable()}}},400:{description:"Invalid meeting ID parameter provided",summary:"Validation Error",content:{"application/json":{schema:F.object({errors:F.record(F.string(),F.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:F.object({message:F.string()})}}}}},sp={method:"put",path:"/meeting/{meetingId}/minute",tags:["Meetings"],summary:"Update meeting minute with optional document upload",security:[{bearerAuth:[]}],request:{params:Qt,body:{content:{"multipart/form-data":{schema:_s.omit({meetingId:!0})}}}},responses:{200:{description:"Meeting minute updated successfully",summary:"Meeting Minute Updated"},400:{description:"Invalid input data, meeting minute ID format, or invalid document format/size",summary:"Validation Error",content:{"application/json":{schema:F.object({errors:F.record(F.string(),F.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:F.object({message:F.string()})}}},404:{description:"Meeting minute not found with the provided ID",summary:"Meeting Minute Not Found",content:{"application/json":{schema:F.object({message:F.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:F.object({message:F.string()})}}}}},ap={method:"delete",path:"/meeting/{meetingId}/minute",tags:["Meetings"],summary:"Delete meeting minute",security:[{bearerAuth:[]}],request:{params:Qt},responses:{200:{description:"Meeting minute deleted successfully",summary:"Meeting Minute Deleted"},400:{description:"Invalid meeting minute ID format",summary:"Validation Error",content:{"application/json":{schema:F.object({errors:F.record(F.string(),F.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:F.object({message:F.string()})}}},404:{description:"Meeting minute not found with the provided ID",summary:"Meeting Minute Not Found",content:{"application/json":{schema:F.object({message:F.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:F.object({message:F.string()})}}}}};import{MeetingFormat as kf,MeetingStatus as Gf}from"@prisma/client";import w from"zod";import{extendZodWithOpenApi as Ef}from"@asteasolutions/zod-to-openapi";import{MeetingFormat as So,MeetingStatus as Ws}from"@prisma/client";import be from"zod";Ef(be);var Hs=be.object({title:be.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio"),scheduledAt:be.coerce.date(),format:be.enum(So).default(So.ONLINE),agenda:be.string().min(1,"Pauta \xE9 obrigat\xF3ria"),meetingLink:be.string().url("Link da reuni\xE3o deve ser uma URL v\xE1lida").optional().or(be.literal("")),location:be.string().optional(),status:be.enum(Ws).default(Ws.PENDING)}).refine(o=>o.format===So.ONLINE?!!o.meetingLink:o.format===So.IN_PERSON?!!o.location:!0,{message:"Reuni\xF5es online devem ter link e reuni\xF5es presenciais devem ter localiza\xE7\xE3o",path:["format"]}),vo=class{constructor(e){this.meetingRepository=e}async handle(e,r){try{let{title:t,scheduledAt:i,format:n,agenda:s,meetingLink:m,location:c,status:u}=Hs.parse(e.body);return await this.meetingRepository.create({title:t,scheduledAt:i,format:n,agenda:s,meetingLink:m||void 0,location:c||void 0,status:u??Ws.PENDING}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as xf}from"@asteasolutions/zod-to-openapi";import zs from"zod";xf(zs);var Zs=zs.object({id:zs.uuid()}),jo=class{constructor(e){this.meetingRepository=e}async handle(e,r){try{let{id:t}=Zs.parse({id:e.params.id});if(!await this.meetingRepository.findById(t))throw new p("A reuni\xE3o n\xE3o existe.");return await this.meetingRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Pf}from"@asteasolutions/zod-to-openapi";import Vs from"zod";Pf(Vs);var xo=Vs.object({id:Vs.uuid()}),Eo=class{constructor(e){this.meetingRepository=e}async handle(e,r){try{let{id:t}=xo.parse({id:e.params.id}),i=await this.meetingRepository.findById(t);if(!i)throw new p("A reuni\xE3o n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Mf}from"@asteasolutions/zod-to-openapi";import{MeetingStatus as Tf}from"@prisma/client";import Ks from"zod";Mf(Ks);var Ys=Ks.object({status:Ks.enum(Tf)}),Po=class{constructor(e){this.meetingRepository=e}async handle(e,r){try{let{status:t}=Ys.parse({status:e.params.status}),i=await this.meetingRepository.findByStatus(t);return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Af}from"@asteasolutions/zod-to-openapi";import{MeetingFormat as Df,MeetingStatus as Ff}from"@prisma/client";import _e from"zod";var Uf=1,qf=10;Af(_e);var Xs=_e.object({page:_e.coerce.number().min(1).default(Uf),limit:_e.coerce.number().min(1).default(qf),title:_e.string().optional(),format:_e.enum(Df).optional(),status:_e.enum(Ff).optional(),orderBy:_e.enum(["asc","desc"]).optional()}),Mo=class{constructor(e){this.meetingRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=Xs.parse(e.query),s=i*t-i,[m,c]=await Promise.all([this.meetingRepository.find({pagination:{offset:s,limit:i},filter:n}),this.meetingRepository.count({filter:n})]),u=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:u,offset:s,limit:i,meetings:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Bf}from"@asteasolutions/zod-to-openapi";import{MeetingFormat as Of,MeetingStatus as Nf}from"@prisma/client";import ye from"zod";Bf(ye);var $s=ye.object({id:ye.uuid(),title:ye.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio").optional(),scheduledAt:ye.coerce.date().optional(),format:ye.enum(Of).optional(),agenda:ye.string().min(1,"Pauta \xE9 obrigat\xF3ria").optional(),meetingLink:ye.string().url("Link da reuni\xE3o deve ser uma URL v\xE1lida").optional().or(ye.literal("")),location:ye.string().optional(),status:ye.enum(Nf).optional()}),To=class{constructor(e){this.meetingRepository=e}async handle(e,r){try{let{id:t,title:i,scheduledAt:n,format:s,agenda:m,meetingLink:c,location:u,status:j}=$s.parse({id:e.params.id,...e.body});if(!await this.meetingRepository.findById(t))throw new p("A reuni\xE3o n\xE3o existe.");return await this.meetingRepository.update({id:t,title:i,scheduledAt:n,format:s,agenda:m,meetingLink:c||void 0,location:u||void 0,status:j}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Lf=w.object({id:w.uuid(),title:w.string(),publishedAt:w.date(),documentUrl:w.string(),meetingId:w.uuid(),createdAt:w.date(),updatedAt:w.date()}),Js=w.object({id:w.uuid(),title:w.string(),scheduledAt:w.date(),format:w.enum(kf),agenda:w.string(),meetingLink:w.string().nullable(),location:w.string().nullable(),status:w.enum(Gf),minutes:Lf.nullable(),createdAt:w.date(),updatedAt:w.date()}),mp={method:"post",path:"/meeting",tags:["Meetings"],summary:"Create a new meeting",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:Hs}}}},responses:{201:{description:"Meeting created successfully",summary:"Meeting Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:w.object({errors:w.record(w.string(),w.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:w.object({message:w.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:w.object({message:w.string()})}}}}},cp={method:"get",path:"/meeting",tags:["Meetings"],summary:"List all meetings with pagination and filters",request:{query:Xs},responses:{200:{description:"List of meetings retrieved successfully with pagination",summary:"Meetings Retrieved",content:{"application/json":{schema:w.object({page:w.number(),totalPages:w.number(),offset:w.number(),limit:w.number(),meetings:w.array(Js)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:w.object({errors:w.record(w.string(),w.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:w.object({message:w.string()})}}}}},pp={method:"get",path:"/meeting/{id}",tags:["Meetings"],summary:"Find meeting by ID",request:{params:xo},responses:{200:{description:"Meeting details retrieved successfully",summary:"Meeting Retrieved",content:{"application/json":{schema:Js}}},400:{description:"Invalid meeting ID format",summary:"Validation Error",content:{"application/json":{schema:w.object({errors:w.record(w.string(),w.string())})}}},404:{description:"Meeting not found with the provided ID",summary:"Meeting Not Found",content:{"application/json":{schema:w.object({message:w.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:w.object({message:w.string()})}}}}},dp={method:"get",path:"/meeting/status/{status}",tags:["Meetings"],summary:"Find meetings by status",request:{params:Ys},responses:{200:{description:"Meetings retrieved successfully by status",summary:"Meetings Retrieved by Status",content:{"application/json":{schema:w.array(Js)}}},400:{description:"Invalid status parameter provided",summary:"Validation Error",content:{"application/json":{schema:w.object({errors:w.record(w.string(),w.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:w.object({message:w.string()})}}}}},lp={method:"put",path:"/meeting/{id}",tags:["Meetings"],summary:"Update meeting",security:[{bearerAuth:[]}],request:{params:xo,body:{content:{"application/json":{schema:$s.omit({id:!0})}}}},responses:{200:{description:"Meeting updated successfully",summary:"Meeting Updated"},400:{description:"Invalid input data or meeting ID format",summary:"Validation Error",content:{"application/json":{schema:w.object({errors:w.record(w.string(),w.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:w.object({message:w.string()})}}},404:{description:"Meeting not found with the provided ID",summary:"Meeting Not Found",content:{"application/json":{schema:w.object({message:w.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:w.object({message:w.string()})}}}}},up={method:"delete",path:"/meeting/{id}",tags:["Meetings"],summary:"Delete meeting",security:[{bearerAuth:[]}],request:{params:Zs},responses:{200:{description:"Meeting deleted successfully",summary:"Meeting Deleted"},400:{description:"Invalid meeting ID format",summary:"Validation Error",content:{"application/json":{schema:w.object({errors:w.record(w.string(),w.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:w.object({message:w.string()})}}},404:{description:"Meeting not found with the provided ID",summary:"Meeting Not Found",content:{"application/json":{schema:w.object({message:w.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:w.object({message:w.string()})}}}}};import x from"zod";import{extendZodWithOpenApi as _f}from"@asteasolutions/zod-to-openapi";import er from"zod";var Wf=5,gp=1024,Hf=gp*gp,zf=Wf*Hf;_f(er);var Qs=er.object({title:er.string().min(1),content:er.string().min(1),image:er.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=zf,{message:"A imagem deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB."})}),Ao=class{constructor(e,r){this.newsRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{title:t,content:i,image:n}=Qs.parse({...e.body,image:e.file}),s=e.user.id,m=await this.firebaseStorageService.uploadFile({file:n,folder:U.NEWS,id:s});await this.newsRepository.create({title:t,content:i,authorId:s,imageUrl:m}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Zf}from"@asteasolutions/zod-to-openapi";import We from"zod";var Vf=1,Kf=7;Zf(We);var Fo=We.object({page:We.coerce.number().min(1).default(Vf),limit:We.coerce.number().min(1).default(Kf),authorId:We.string(),title:We.string().optional(),content:We.string().optional(),orderBy:We.enum(["asc","desc"]).default("desc")}),Do=class{constructor(e){this.newsRepository=e}async handle(e,r){try{let{page:t,limit:i,authorId:n,...s}=Fo.parse(e.query),m=i*t-i,[c,u]=await Promise.all([this.newsRepository.findByAuthorId({authorId:n,pagination:{offset:m,limit:i},filter:s}),this.newsRepository.count({filter:{authorId:n,...s}})]),j=Math.max(Math.ceil(u/i),1);r.status(200).json({page:t,totalPages:j,offset:m,limit:i,news:c})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Yf}from"@asteasolutions/zod-to-openapi";import ea from"zod";Yf(ea);var ta=ea.object({id:ea.string()}),Uo=class{constructor(e){this.newsRepository=e}async handle(e,r){try{let{id:t}=ta.parse(e.params),i=await this.newsRepository.findById(t);if(!i)throw new p("Not\xEDcia n\xE3o encontrada.");r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Xf}from"@asteasolutions/zod-to-openapi";import He from"zod";var $f=1,Jf=9;Xf(He);var ra=He.object({page:He.coerce.number().min(1).default($f),limit:He.coerce.number().min(1).default(Jf),title:He.string().optional(),content:He.string().optional(),authorId:He.string().optional(),orderBy:He.enum(["asc","desc"]).default("desc")}),qo=class{constructor(e){this.newsRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=ra.parse(e.query),s=i*t-i,[m,c]=await Promise.all([this.newsRepository.find({pagination:{offset:s,limit:i},filter:n}),this.newsRepository.count({filter:n})]),u=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:u,offset:s,limit:i,news:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};var yp={method:"post",path:"/news",tags:["News"],summary:"Create news",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:Qs}}}},responses:{201:{description:"News article created successfully",summary:"News Created",content:{"application/json":{schema:x.object({message:x.string()})}}},400:{description:"Invalid input data or file format",summary:"Validation Error",content:{"application/json":{schema:x.object({errors:x.record(x.string(),x.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:x.object({message:x.string()})}}}}},fp={method:"get",path:"/news",tags:["News"],summary:"List news",request:{query:ra},responses:{200:{description:"Paginated list of news articles retrieved successfully",summary:"News Retrieved",content:{"application/json":{schema:x.object({page:x.number(),totalPages:x.number(),offset:x.number(),limit:x.number(),news:x.array(x.object({title:x.string(),content:x.string(),id:x.string(),createdAt:x.date(),updatedAt:x.date(),imageUrl:x.string().nullable()}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:x.object({errors:x.record(x.string(),x.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:x.object({message:x.string()})}}}}},hp={method:"get",path:"/news/{id}",tags:["News"],summary:"Find news by ID",request:{params:ta},responses:{200:{description:"News article details retrieved successfully",summary:"News Retrieved",content:{"application/json":{schema:x.object({page:x.number(),totalPages:x.number(),offset:x.number(),limit:x.number(),news:x.object({title:x.string(),content:x.string(),id:x.string(),createdAt:x.date(),updatedAt:x.date(),imageUrl:x.string().nullable()})})}}},400:{description:"Invalid news ID format",summary:"Validation Error",content:{"application/json":{schema:x.object({errors:x.record(x.string(),x.string())})}}},404:{description:"News article not found with the provided ID",summary:"News Not Found",content:{"application/json":{schema:x.object({message:x.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:x.object({message:x.string()})}}}}},Rp={method:"get",path:"/news/author/{author_id}",tags:["News"],summary:"List news by author",request:{params:Fo.pick({authorId:!0}).transform(()=>({author_id:""})),query:Fo.omit({authorId:!0})},responses:{200:{description:"Paginated list of news articles by author retrieved successfully",summary:"Author News Retrieved",content:{"application/json":{schema:x.object({page:x.number(),totalPages:x.number(),offset:x.number(),limit:x.number(),news:x.array(x.object({title:x.string(),content:x.string(),id:x.string(),createdAt:x.date(),updatedAt:x.date(),imageUrl:x.string().nullable()}))})}}},400:{description:"Invalid author ID or query parameters",summary:"Validation Error",content:{"application/json":{schema:x.object({errors:x.record(x.string(),x.string())})}}},404:{description:"Author not found with the provided ID",summary:"Author Not Found",content:{"application/json":{schema:x.object({message:x.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:x.object({message:x.string()})}}}}};import M from"zod";import{extendZodWithOpenApi as Qf}from"@asteasolutions/zod-to-openapi";import we from"zod";var Cp=2,Ip=1024,eh=Ip*Ip,th=Cp*eh;Qf(we);var oa=we.object({name:we.string().min(1,"Nome \xE9 obrigat\xF3rio"),logo:we.any().refine(o=>o==null||typeof o!="object"||typeof o.size!="number"?!1:o.size<=th,`A imagem deve ter no m\xE1ximo ${Cp}MB.`),websiteUrl:we.url("URL do site deve ser v\xE1lida").optional(),description:we.string().optional(),category:we.string().optional(),since:we.coerce.date(),isActive:we.preprocess(o=>o==="true",we.boolean().optional())}),Bo=class{constructor(e,r){this.partnerRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{name:t,logo:i,websiteUrl:n,description:s,category:m,since:c,isActive:u}=oa.parse({...e.body,logo:e.file}),j=await this.partnerRepository.create({name:t,websiteUrl:n,description:s,category:m,since:c,isActive:u}),q=await this.firebaseStorageService.uploadFile({file:i,id:j.id,folder:U.PARTNER});return await this.partnerRepository.update({id:j.id,logoUrl:q}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as rh}from"@asteasolutions/zod-to-openapi";import ia from"zod";rh(ia);var na=ia.object({id:ia.uuid()}),Oo=class{constructor(e,r){this.partnerRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=na.parse({id:e.params.id}),i=await this.partnerRepository.findById(t);if(!i)throw new p("O parceiro n\xE3o existe.");return i.logoUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.logoUrl}),await this.partnerRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as oh}from"@asteasolutions/zod-to-openapi";import sa from"zod";oh(sa);var ko=sa.object({id:sa.uuid()}),No=class{constructor(e){this.partnerRepository=e}async handle(e,r){try{let{id:t}=ko.parse({id:e.params.id}),i=await this.partnerRepository.findById(t);if(!i)throw new p("O parceiro n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as ih}from"@asteasolutions/zod-to-openapi";import xe from"zod";var nh=1,sh=9;ih(xe);var aa=xe.object({page:xe.coerce.number().min(1).default(nh),limit:xe.coerce.number().min(1).default(sh),name:xe.string().optional(),description:xe.string().optional(),category:xe.string().optional(),isActive:xe.coerce.boolean().optional(),orderBy:xe.enum(["asc","desc"]).optional()}),Go=class{constructor(e){this.partnerRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=aa.parse(e.query),s=i*t-i,[m,c]=await Promise.all([this.partnerRepository.find({pagination:{offset:s,limit:i},filter:n}),this.partnerRepository.count({filter:n})]),u=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:u,offset:s,limit:i,partners:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as ah}from"@asteasolutions/zod-to-openapi";import fe from"zod";var wp=2,bp=1024,mh=bp*bp,ch=wp*mh;ah(fe);var ma=fe.object({id:fe.uuid(),name:fe.string().min(1,"Nome \xE9 obrigat\xF3rio").optional(),logo:fe.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=ch,`A imagem deve ter no m\xE1ximo ${wp}MB.`).optional(),websiteUrl:fe.url("URL do site deve ser v\xE1lida").optional(),description:fe.string().optional(),category:fe.string().optional(),since:fe.coerce.date().optional(),isActive:fe.preprocess(o=>o==="true",fe.boolean().optional())}),Lo=class{constructor(e,r){this.partnerRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,name:i,logo:n,websiteUrl:s,description:m,category:c,since:u,isActive:j}=ma.parse({id:e.params.id,...e.body,logo:e.file}),q=await this.partnerRepository.findById(t);if(!q)throw new p("O parceiro n\xE3o existe.");let z=q.logoUrl;if(n&&(z=await this.firebaseStorageService.uploadFile({file:n,id:t,folder:"images/partners"})),!z)throw new a("Logo URL \xE9 obrigat\xF3rio");return await this.partnerRepository.update({id:t,name:i,logoUrl:z,websiteUrl:s,description:m,category:c,since:u,isActive:j}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Sp=M.object({id:M.uuid(),name:M.string(),logoUrl:M.string(),description:M.string().nullable(),category:M.string().nullable(),since:M.date(),isActive:M.boolean(),createdAt:M.date(),updatedAt:M.date()}),vp={method:"post",path:"/partner",tags:["Partners"],summary:"Create a new partner with logo upload",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:oa}}}},responses:{201:{description:"Partner created successfully",summary:"Partner Created"},400:{description:"Invalid input data, missing required fields, or invalid logo format/size",summary:"Validation Error",content:{"application/json":{schema:M.object({errors:M.record(M.string(),M.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:M.object({message:M.string()})}}},409:{description:"Partner with this name already exists",summary:"Conflict",content:{"application/json":{schema:M.object({message:M.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:M.object({message:M.string()})}}}}},jp={method:"get",path:"/partner",tags:["Partners"],summary:"List all partners with pagination and filters",request:{query:aa},responses:{200:{description:"List of partners retrieved successfully with pagination",summary:"Partners Retrieved",content:{"application/json":{schema:M.object({page:M.number(),totalPages:M.number(),offset:M.number(),limit:M.number(),partners:M.array(Sp)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:M.object({errors:M.record(M.string(),M.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:M.object({message:M.string()})}}}}},Ep={method:"get",path:"/partner/{id}",tags:["Partners"],summary:"Find partner by ID",request:{params:ko},responses:{200:{description:"Partner details retrieved successfully",summary:"Partner Retrieved",content:{"application/json":{schema:Sp}}},400:{description:"Invalid partner ID format",summary:"Validation Error",content:{"application/json":{schema:M.object({errors:M.record(M.string(),M.string())})}}},404:{description:"Partner not found with the provided ID",summary:"Partner Not Found",content:{"application/json":{schema:M.object({message:M.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:M.object({message:M.string()})}}}}},xp={method:"put",path:"/partner/{id}",tags:["Partners"],summary:"Update partner with optional logo upload",security:[{bearerAuth:[]}],request:{params:ko,body:{content:{"multipart/form-data":{schema:ma.omit({id:!0})}}}},responses:{200:{description:"Partner updated successfully",summary:"Partner Updated"},400:{description:"Invalid input data, partner ID format, or invalid logo format/size",summary:"Validation Error",content:{"application/json":{schema:M.object({errors:M.record(M.string(),M.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:M.object({message:M.string()})}}},404:{description:"Partner not found with the provided ID",summary:"Partner Not Found",content:{"application/json":{schema:M.object({message:M.string()})}}},409:{description:"Partner with this name already exists",summary:"Conflict",content:{"application/json":{schema:M.object({message:M.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:M.object({message:M.string()})}}}}},Pp={method:"delete",path:"/partner/{id}",tags:["Partners"],summary:"Delete partner",security:[{bearerAuth:[]}],request:{params:na},responses:{200:{description:"Partner deleted successfully",summary:"Partner Deleted"},400:{description:"Invalid partner ID format",summary:"Validation Error",content:{"application/json":{schema:M.object({errors:M.record(M.string(),M.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:M.object({message:M.string()})}}},404:{description:"Partner not found with the provided ID",summary:"Partner Not Found",content:{"application/json":{schema:M.object({message:M.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:M.object({message:M.string()})}}}}};import{$Enums as Mp}from"@prisma/client";import T from"zod";import{extendZodWithOpenApi as ph}from"@asteasolutions/zod-to-openapi";import{PendencyStatus as dh}from"@prisma/client";import ze from"zod";ph(ze);var Wo=ze.object({userId:ze.uuid(),title:ze.string().min(1),description:ze.string().optional(),status:ze.enum(dh).default("PENDING"),dueDate:ze.coerce.date().optional(),document:ze.any().refine(o=>o&&typeof o=="object"&&o.size>0,"Arquivo do documento \xE9 obrigat\xF3rio")}),_o=class{constructor(e,r,t){this.userRepository=e;this.pendencyRepository=r;this.firebaseStorageService=t}async handle(e,r){try{let{userId:t,title:i,description:n,status:s,dueDate:m,document:c}=Wo.parse({...e.body,userId:e.params.user_id,document:e.file});if(!await this.userRepository.findById(t))throw new re("O usu\xE1rio n\xE3o existe.");let j=await this.firebaseStorageService.uploadFile({file:c,id:t,folder:U.PENDENCY});return await this.pendencyRepository.create({userId:t,title:i,description:n,status:s,dueDate:m,documentUrl:j}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as lh}from"@asteasolutions/zod-to-openapi";import ca from"zod";lh(ca);var pa=ca.object({id:ca.uuid()}),Ho=class{constructor(e,r){this.pendencyRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=pa.parse({id:e.params.pendency_id}),i=await this.pendencyRepository.findById(t);if(!i)throw new p("A pend\xEAncia n\xE3o existe.");return await Promise.all([this.pendencyRepository.deleteById(i.id),this.firebaseStorageService.deleteFile({fileUrl:i.documentUrl})]),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as uh}from"@asteasolutions/zod-to-openapi";import{PendencyStatus as gh}from"@prisma/client";import Pe from"zod";var yh=1,fh=6;uh(Pe);var da=Pe.object({page:Pe.coerce.number().min(1).default(yh),limit:Pe.coerce.number().min(1).default(fh),title:Pe.string().optional(),description:Pe.string().optional(),status:Pe.enum(gh).default("PENDING"),userId:Pe.uuid().optional(),orderBy:Pe.enum(["asc","desc"]).default("desc")}),zo=class{constructor(e){this.pendencyRepository=e}async handle(e,r){try{let{description:t,limit:i,orderBy:n,page:s,title:m,status:c,userId:u}=da.parse(e.query),j=s*i-i,[q,z]=await Promise.all([this.pendencyRepository.find({pagination:{offset:j,limit:i},filter:{title:m,description:t,status:c,orderBy:n,userId:u}}),this.pendencyRepository.count({filter:{title:m,description:t,status:c,userId:u}})]),Y=Math.max(Math.ceil(z/i),1);return r.status(200).json({page:s,totalPages:Y,offset:j,limit:i,pendencies:q})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as hh}from"@asteasolutions/zod-to-openapi";import la from"zod";hh(la);var ua=la.object({pendencyId:la.uuid()}),Zo=class{constructor(e){this.pendencyRepository=e}async handle(e,r){try{let{pendencyId:t}=ua.parse({pendencyId:e.params.pendency_id}),i=await this.pendencyRepository.findById(t);if(!i)throw new p("Pend\xEAncia n\xE3o encontrada.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Rh}from"@asteasolutions/zod-to-openapi";import{PendencyStatus as Ih}from"@prisma/client";import Ze from"zod";Rh(Ze);var Ko=Ze.object({id:Ze.uuid(),title:Ze.string().min(1),description:Ze.string().optional(),status:Ze.enum(Ih),dueDate:Ze.coerce.date().optional(),document:Ze.any().refine(o=>o==null||typeof o=="object"&&typeof o.size=="number"&&(o.size===0||o.size>0),"Arquivo do documento \xE9 inv\xE1lido").optional()}),Vo=class{constructor(e,r){this.pendencyRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{document:t,id:i,...n}=Ko.parse({...e.body,id:e.params.pendency_id,document:e.file}),s=await this.pendencyRepository.findById(i);if(!s)throw new re("A pend\xEAncia n\xE3o existe");let m=s.documentUrl;return t&&t.size>0&&(m=await this.firebaseStorageService.updateFile({file:t,id:s.userId,folder:U.PENDENCY,fileUrl:s.documentUrl})),await this.pendencyRepository.update({...n,id:i,documentUrl:m}),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Tp={method:"post",path:"/pendency/{user_id}",tags:["Pendencies"],summary:"Create pendency for user",security:[{bearerAuth:[]}],request:{params:Wo.pick({userId:!0}).transform(()=>({user_id:""})),body:{content:{"multipart/form-data":{schema:Wo.omit({userId:!0})}}}},responses:{201:{description:"Pendency created successfully for the user",summary:"Pendency Created",content:{"application/json":{schema:T.object({})}}},400:{description:"Invalid input data or file format",summary:"Validation Error",content:{"application/json":{schema:T.object({errors:T.record(T.string(),T.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:T.object({message:T.string()})}}}}},Ap={method:"get",path:"/pendency",tags:["Pendencies"],summary:"List pendencies",security:[{bearerAuth:[]}],request:{query:da},responses:{200:{description:"Paginated list of pendencies retrieved successfully",summary:"Pendencies Retrieved",content:{"application/json":{schema:T.object({page:T.number(),totalPages:T.number(),offset:T.number(),limit:T.number(),pendencies:T.array(T.object({id:T.string(),title:T.string(),description:T.string().nullable(),status:T.enum(Mp.PendencyStatus),dueDate:T.date().nullable(),documentUrl:T.string(),userId:T.string(),createdAt:T.date(),updatedAt:T.date()}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:T.object({errors:T.record(T.string(),T.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:T.object({message:T.string()})}}}}},Dp={method:"get",path:"/pendency/{pendency_id}",tags:["Pendencies"],summary:"Find pendency by ID",security:[{bearerAuth:[]}],request:{params:ua},responses:{200:{description:"Pendency details retrieved successfully",summary:"Pendency Retrieved",content:{"application/json":{schema:T.object({id:T.string(),title:T.string(),description:T.string().nullable(),status:T.enum(Mp.PendencyStatus),dueDate:T.date().nullable(),documentUrl:T.string(),userId:T.string(),createdAt:T.date(),updatedAt:T.date()}).nullable()}}},400:{description:"Invalid pendency ID format",summary:"Validation Error",content:{"application/json":{schema:T.object({errors:T.record(T.string(),T.string())})}}},404:{description:"Pendency not found with the provided ID",summary:"Pendency Not Found",content:{"application/json":{schema:T.object({message:T.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:T.object({message:T.string()})}}}}},Fp={method:"put",path:"/pendency/{pendency_id}",tags:["Pendencies"],summary:"Update pendency",security:[{bearerAuth:[]}],request:{params:Ko.pick({id:!0}).transform(()=>({pendency_id:""})),body:{content:{"multipart/form-data":{schema:Ko.omit({id:!0})}}}},responses:{204:{description:"Pendency updated successfully",summary:"Pendency Updated"},400:{description:"Invalid input data or pendency does not exist",summary:"Validation Error",content:{"application/json":{schema:T.object({errors:T.record(T.string(),T.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:T.object({message:T.string()})}}}}},Up={method:"delete",path:"/pendency/{pendency_id}",tags:["Pendencies"],summary:"Delete pendency",security:[{bearerAuth:[]}],request:{params:pa},responses:{204:{description:"Pendency deleted successfully",summary:"Pendency Deleted"},400:{description:"Invalid pendency ID format",summary:"Validation Error",content:{"application/json":{schema:T.object({errors:T.record(T.string(),T.string())})}}},404:{description:"Pendency not found with the provided ID",summary:"Pendency Not Found",content:{"application/json":{schema:T.object({message:T.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:T.object({message:T.string()})}}}}};import b from"zod";import{extendZodWithOpenApi as Ch}from"@asteasolutions/zod-to-openapi";import ga from"zod";Ch(ga);var ya=ga.object({id:ga.uuid()}),Yo=class{constructor(e,r){this.postGraduateProgramRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=ya.parse({id:e.params.id}),i=await this.postGraduateProgramRepository.findById(t);if(!i)throw new p("O programa de p\xF3s-gradua\xE7\xE3o n\xE3o existe.");return i.imageUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.imageUrl}),await this.postGraduateProgramRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as bh}from"@asteasolutions/zod-to-openapi";import fa from"zod";bh(fa);var ha=fa.object({id:fa.uuid()}),Xo=class{constructor(e){this.postGraduateProgramRepository=e}async handle(e,r){try{let{id:t}=ha.parse({id:e.params.id}),i=await this.postGraduateProgramRepository.findById(t);if(!i)throw new p("Programa de p\xF3s-gradua\xE7\xE3o n\xE3o encontrado.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as wh}from"@asteasolutions/zod-to-openapi";import Ve from"zod";var Sh=1,vh=6;wh(Ve);var Ra=Ve.object({page:Ve.coerce.number().min(1).default(Sh),limit:Ve.coerce.number().min(1).default(vh),title:Ve.string().optional(),description:Ve.string().optional(),contact:Ve.string().optional(),orderBy:Ve.enum(["asc","desc"]).default("desc")}),$o=class{constructor(e){this.postGraduateProgramRepository=e}async handle(e,r){try{let{limit:t,page:i,...n}=Ra.parse(e.query),s=i*t-t,[m,c]=await Promise.all([this.postGraduateProgramRepository.find({pagination:{offset:s,limit:t},filter:n}),this.postGraduateProgramRepository.count({filter:n})]),u=Math.max(Math.ceil(c/t),1);return r.status(200).json({page:i,totalPages:u,offset:s,limit:t,postGraduatePrograms:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as jh}from"@asteasolutions/zod-to-openapi";import Se from"zod";var Bp=5,qp=1024,Eh=qp*qp,xh=Bp*Eh;jh(Se);var Ia=Se.object({id:Se.uuid(),title:Se.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio.").optional(),description:Se.string().optional(),startDate:Se.coerce.date().optional(),endDate:Se.coerce.date().optional(),contact:Se.string().min(1,"Contato \xE9 obrigat\xF3rio.").optional(),registrationLink:Se.url("URL de inscri\xE7\xE3o deve ser v\xE1lida").optional(),image:Se.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=xh,`A imagem deve ter no m\xE1ximo ${Bp}MB.`).optional()}),Jo=class{constructor(e,r){this.postGraduateProgramRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,image:i,title:n,description:s,startDate:m,endDate:c,contact:u,registrationLink:j}=Ia.parse({id:e.params.id,...e.body,image:e.file}),q=await this.postGraduateProgramRepository.findById(t);if(!q)throw new p("O programa de p\xF3s-gradua\xE7\xE3o n\xE3o existe.");let z=q.imageUrl;if(i&&(z=await this.firebaseStorageService.uploadFile({file:i,id:t,folder:U.POST_GRADUATE_PROGRAM})),!z)throw new a("URL da imagem \xE9 obrigat\xF3rio");return await this.postGraduateProgramRepository.update({id:t,title:n,description:s,startDate:m,endDate:c,contact:u,registrationLink:j,imageUrl:z}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Op={method:"post",path:"/post-graduate-programs",tags:["Post Graduate Programs"],summary:"Create post-graduate program",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:b.object({title:b.string().min(1).openapi({description:"T\xEDtulo do programa"}),description:b.string().optional().openapi({description:"Descri\xE7\xE3o do programa"}),startDate:b.string().openapi({description:"Data de in\xEDcio (ISO 8601)",example:"2024-01-01T10:00:00Z"}),endDate:b.string().openapi({description:"Data de t\xE9rmino (ISO 8601)",example:"2024-12-31T10:00:00Z"}),contact:b.string().min(1).openapi({description:"Informa\xE7\xF5es de contato"}),registrationLink:b.string().url().optional().openapi({description:"Link de inscri\xE7\xE3o"}),image:b.string().optional().openapi({description:"Imagem do programa (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{201:{description:"Post-graduate program created successfully",summary:"Program Created"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:b.object({errors:b.record(b.string(),b.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:b.object({message:b.string()})}}}}},Np={method:"get",path:"/post-graduate-programs",tags:["Post Graduate Programs"],summary:"List post-graduate programs",security:[{bearerAuth:[]}],request:{query:Ra},responses:{200:{description:"Paginated list of post-graduate programs retrieved successfully",summary:"Programs Retrieved",content:{"application/json":{schema:b.object({page:b.number(),totalPages:b.number(),offset:b.number(),limit:b.number(),postGraduatePrograms:b.array(b.object({id:b.string(),title:b.string(),imageUrl:b.string().nullable(),description:b.string().nullable(),startDate:b.date(),endDate:b.date(),contact:b.string(),registrationLink:b.string().nullable(),createdAt:b.date(),updatedAt:b.date()}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:b.object({errors:b.record(b.string(),b.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:b.object({message:b.string()})}}}}},kp={method:"get",path:"/post-graduate-programs/{id}",tags:["Post Graduate Programs"],summary:"Find post-graduate program by ID",security:[{bearerAuth:[]}],request:{params:ha},responses:{200:{description:"Post-graduate program details retrieved successfully",summary:"Program Retrieved",content:{"application/json":{schema:b.object({id:b.string(),title:b.string(),imageUrl:b.string().nullable(),description:b.string().nullable(),startDate:b.date(),endDate:b.date(),contact:b.string(),registrationLink:b.string().nullable(),createdAt:b.date(),updatedAt:b.date()}).nullable()}}},400:{description:"Invalid program ID format",summary:"Validation Error",content:{"application/json":{schema:b.object({errors:b.record(b.string(),b.string())})}}},404:{description:"Post-graduate program not found with the provided ID",summary:"Program Not Found",content:{"application/json":{schema:b.object({message:b.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:b.object({message:b.string()})}}}}},Gp={method:"put",path:"/post-graduate-programs/{id}",tags:["Post Graduate Programs"],summary:"Update post-graduate program",security:[{bearerAuth:[]}],request:{params:Ia.pick({id:!0}),body:{content:{"multipart/form-data":{schema:b.object({title:b.string().min(1).optional().openapi({description:"T\xEDtulo do programa"}),description:b.string().optional().openapi({description:"Descri\xE7\xE3o do programa"}),startDate:b.string().optional().openapi({description:"Data de in\xEDcio (ISO 8601)",example:"2024-01-01T10:00:00Z"}),endDate:b.string().optional().openapi({description:"Data de t\xE9rmino (ISO 8601)",example:"2024-12-31T10:00:00Z"}),contact:b.string().min(1).optional().openapi({description:"Informa\xE7\xF5es de contato"}),registrationLink:b.string().url().optional().openapi({description:"Link de inscri\xE7\xE3o"}),image:b.string().optional().openapi({description:"Imagem do programa (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{200:{description:"Post-graduate program updated successfully",summary:"Program Updated"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:b.object({errors:b.record(b.string(),b.string())})}}},404:{description:"Post-graduate program not found with the provided ID",summary:"Program Not Found",content:{"application/json":{schema:b.object({message:b.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:b.object({message:b.string()})}}}}},Lp={method:"delete",path:"/post-graduate-programs/{id}",tags:["Post Graduate Programs"],summary:"Delete post-graduate program",security:[{bearerAuth:[]}],request:{params:ya},responses:{200:{description:"Post-graduate program deleted successfully",summary:"Program Deleted"},400:{description:"Invalid program ID format",summary:"Validation Error",content:{"application/json":{schema:b.object({errors:b.record(b.string(),b.string())})}}},404:{description:"Post-graduate program not found with the provided ID",summary:"Program Not Found",content:{"application/json":{schema:b.object({message:b.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:b.object({message:b.string()})}}}}};import{RegimentStatus as Wh}from"@prisma/client";import P from"zod";import{extendZodWithOpenApi as Ph}from"@asteasolutions/zod-to-openapi";import{RegimentStatus as Wp}from"@prisma/client";import nt from"zod";var Hp=10,_p=1024,Mh=_p*_p,Th=Hp*Mh;Ph(nt);var Ca=nt.object({title:nt.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio"),version:nt.string().min(1,"Vers\xE3o \xE9 obrigat\xF3ria"),publishedAt:nt.coerce.date(),document:nt.any().refine(o=>o==null||typeof o!="object"||typeof o.size!="number"?!1:o.size<=Th,`O documento deve ter no m\xE1ximo ${Hp}MB.`),status:nt.enum(Wp).optional()}),Qo=class{constructor(e,r){this.regimentRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{title:t,version:i,publishedAt:n,document:s,status:m}=Ca.parse({...e.body,document:e.file}),c=await this.regimentRepository.create({title:t,version:i,publishedAt:n,documentUrl:"",status:m??Wp.IN_FORCE}),u=await this.firebaseStorageService.uploadFile({file:s,id:c.id,folder:U.REGIMENT});return await this.regimentRepository.update({id:c.id,documentUrl:u}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Ah}from"@asteasolutions/zod-to-openapi";import ba from"zod";Ah(ba);var wa=ba.object({id:ba.uuid()}),ei=class{constructor(e,r){this.regimentRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=wa.parse({id:e.params.id}),i=await this.regimentRepository.findById(t);if(!i)throw new p("O regimento n\xE3o existe.");return i.documentUrl&&await this.firebaseStorageService.deleteFile({fileUrl:i.documentUrl}),await this.regimentRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Dh}from"@asteasolutions/zod-to-openapi";import Sa from"zod";Dh(Sa);var ri=Sa.object({id:Sa.uuid()}),ti=class{constructor(e){this.regimentRepository=e}async handle(e,r){try{let{id:t}=ri.parse({id:e.params.id}),i=await this.regimentRepository.findById(t);if(!i)throw new p("O regimento n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Fh}from"@asteasolutions/zod-to-openapi";import{RegimentStatus as Uh}from"@prisma/client";import va from"zod";Fh(va);var ja=va.object({status:va.enum(Uh)}),oi=class{constructor(e){this.regimentRepository=e}async handle(e,r){try{let{status:t}=ja.parse({status:e.params.status}),i=await this.regimentRepository.findByStatus(t);return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as qh}from"@asteasolutions/zod-to-openapi";import{RegimentStatus as Bh}from"@prisma/client";import st from"zod";var Oh=1,Nh=10;qh(st);var Ea=st.object({page:st.coerce.number().min(1).default(Oh),limit:st.coerce.number().min(1).default(Nh),title:st.string().optional(),status:st.enum(Bh).optional(),orderBy:st.enum(["asc","desc"]).optional()}),ii=class{constructor(e){this.regimentRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=Ea.parse(e.query),s=i*t-i,[m,c]=await Promise.all([this.regimentRepository.find({pagination:{offset:s,limit:i},filter:n}),this.regimentRepository.count({filter:n})]),u=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:u,offset:s,limit:i,regiments:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as kh}from"@asteasolutions/zod-to-openapi";import{RegimentStatus as Gh}from"@prisma/client";import Ke from"zod";var Zp=10,zp=1024,Lh=zp*zp,_h=Zp*Lh;kh(Ke);var xa=Ke.object({id:Ke.uuid(),title:Ke.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio").optional(),version:Ke.string().min(1,"Vers\xE3o \xE9 obrigat\xF3ria").optional(),publishedAt:Ke.coerce.date().optional(),document:Ke.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=_h,`O documento deve ter no m\xE1ximo ${Zp}MB.`).optional(),status:Ke.enum(Gh).optional()}),ni=class{constructor(e,r){this.regimentRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,title:i,version:n,publishedAt:s,document:m,status:c}=xa.parse({id:e.params.id,...e.body,document:e.file}),u=await this.regimentRepository.findById(t);if(!u)throw new p("O regimento n\xE3o existe.");let j=u.documentUrl;return m&&(u.documentUrl&&await this.firebaseStorageService.deleteFile({fileUrl:u.documentUrl}),j=await this.firebaseStorageService.uploadFile({file:m,id:t,folder:U.REGIMENT})),await this.regimentRepository.update({id:t,title:i,version:n,publishedAt:s,documentUrl:j??void 0,status:c}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Pa=P.object({id:P.uuid(),title:P.string(),version:P.string(),publishedAt:P.date(),documentUrl:P.string(),status:P.enum(Wh),createdAt:P.date(),updatedAt:P.date()}),Vp={method:"post",path:"/regiment",tags:["Regiments"],summary:"Create a new regiment with document upload",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:Ca}}}},responses:{201:{description:"Regiment created successfully",summary:"Regiment Created"},400:{description:"Invalid input data, missing required fields, or invalid document format/size",summary:"Validation Error",content:{"application/json":{schema:P.object({errors:P.record(P.string(),P.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:P.object({message:P.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:P.object({message:P.string()})}}}}},Kp={method:"get",path:"/regiment",tags:["Regiments"],summary:"List all regiments with pagination and filters",request:{query:Ea},responses:{200:{description:"List of regiments retrieved successfully with pagination",summary:"Regiments Retrieved",content:{"application/json":{schema:P.object({page:P.number(),totalPages:P.number(),offset:P.number(),limit:P.number(),regiments:P.array(Pa)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:P.object({errors:P.record(P.string(),P.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:P.object({message:P.string()})}}}}},Yp={method:"get",path:"/regiment/{id}",tags:["Regiments"],summary:"Find regiment by ID",request:{params:ri},responses:{200:{description:"Regiment details retrieved successfully",summary:"Regiment Retrieved",content:{"application/json":{schema:Pa}}},400:{description:"Invalid regiment ID format",summary:"Validation Error",content:{"application/json":{schema:P.object({errors:P.record(P.string(),P.string())})}}},404:{description:"Regiment not found with the provided ID",summary:"Regiment Not Found",content:{"application/json":{schema:P.object({message:P.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:P.object({message:P.string()})}}}}},Xp={method:"get",path:"/regiment/status/{status}",tags:["Regiments"],summary:"Find regiments by status",request:{params:ja},responses:{200:{description:"Regiments retrieved successfully by status",summary:"Regiments Retrieved by Status",content:{"application/json":{schema:P.array(Pa)}}},400:{description:"Invalid status parameter provided",summary:"Validation Error",content:{"application/json":{schema:P.object({errors:P.record(P.string(),P.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:P.object({message:P.string()})}}}}},$p={method:"put",path:"/regiment/{id}",tags:["Regiments"],summary:"Update regiment with optional document upload",security:[{bearerAuth:[]}],request:{params:ri,body:{content:{"multipart/form-data":{schema:xa.omit({id:!0})}}}},responses:{200:{description:"Regiment updated successfully",summary:"Regiment Updated"},400:{description:"Invalid input data, regiment ID format, or invalid document format/size",summary:"Validation Error",content:{"application/json":{schema:P.object({errors:P.record(P.string(),P.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:P.object({message:P.string()})}}},404:{description:"Regiment not found with the provided ID",summary:"Regiment Not Found",content:{"application/json":{schema:P.object({message:P.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:P.object({message:P.string()})}}}}},Jp={method:"delete",path:"/regiment/{id}",tags:["Regiments"],summary:"Delete regiment",security:[{bearerAuth:[]}],request:{params:wa},responses:{200:{description:"Regiment deleted successfully",summary:"Regiment Deleted"},400:{description:"Invalid regiment ID format",summary:"Validation Error",content:{"application/json":{schema:P.object({errors:P.record(P.string(),P.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:P.object({message:P.string()})}}},404:{description:"Regiment not found with the provided ID",summary:"Regiment Not Found",content:{"application/json":{schema:P.object({message:P.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:P.object({message:P.string()})}}}}};import L from"zod";import{extendZodWithOpenApi as Hh}from"@asteasolutions/zod-to-openapi";import tr from"zod";var ed=5,Qp=1024,zh=Qp*Qp,Zh=ed*zh;Hh(tr);var Ma=tr.object({caption:tr.string().optional(),image:tr.any().refine(o=>o==null||typeof o!="object"||typeof o.size!="number"?!1:o.size<=Zh,`A imagem deve ter no m\xE1ximo ${ed}MB.`),congressId:tr.uuid()}),si=class{constructor(e,r,t){this.regionalCongressGalleryRepository=e;this.regionalCongressRepository=r;this.firebaseStorageService=t}async handle(e,r){try{let{caption:t,image:i,congressId:n}=Ma.parse({...e.body,...e.params,image:e.file});if(!await this.regionalCongressRepository.findById(n))throw new p("O congresso n\xE3o existe.");let m=await this.regionalCongressGalleryRepository.create({caption:t,congressId:n,imageUrl:""}),c=await this.firebaseStorageService.uploadFile({file:i,id:m.id,folder:U.GALLERY});return await this.regionalCongressGalleryRepository.update({id:m.id,imageUrl:c}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Vh}from"@asteasolutions/zod-to-openapi";import Ta from"zod";Vh(Ta);var mi=Ta.object({id:Ta.uuid("ID inv\xE1lido")}),ai=class{constructor(e){this.regionalCongressGalleryRepository=e}async handle(e,r){try{let{id:t}=mi.parse(e.params);if(!await this.regionalCongressGalleryRepository.findById(t))throw new p("Item de galeria n\xE3o encontrado");return await this.regionalCongressGalleryRepository.deleteById(t),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Kh}from"@asteasolutions/zod-to-openapi";import At from"zod";Kh(At);var Aa=At.object({congressId:At.uuid("ID do congresso inv\xE1lido"),page:At.coerce.number().int().positive().default(1),limit:At.coerce.number().int().positive().default(10),caption:At.string().optional()}),ci=class{constructor(e){this.regionalCongressGalleryRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=Aa.parse({...e.params,...e.query}),s=(t-1)*i,m=await this.regionalCongressGalleryRepository.findByCongressId({pagination:{offset:s,limit:i},filter:n});if(!m)throw new p("Itens de galeria n\xE3o encontrados");let c=await this.regionalCongressGalleryRepository.count({filter:n});return r.status(200).json({data:m,pagination:{page:t,limit:i,total:c,totalPages:Math.ceil(c/i)}})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Yh}from"@asteasolutions/zod-to-openapi";import rr from"zod";var rd=5,td=1024,Xh=td*td,$h=rd*Xh;Yh(rr);var Da=rr.object({id:rr.string().uuid("ID inv\xE1lido"),caption:rr.string().optional(),image:rr.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=$h,`A imagem deve ter no m\xE1ximo ${rd}MB.`).optional()}),pi=class{constructor(e,r){this.regionalCongressGalleryRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,caption:i,image:n}=Da.parse({...e.params,...e.body,image:e.file});if(!await this.regionalCongressGalleryRepository.findById(t))throw new p("Item de galeria n\xE3o encontrado");let m;return n&&(m=await this.firebaseStorageService.uploadFile({file:n,id:t,folder:U.GALLERY})),await this.regionalCongressGalleryRepository.update({id:t,caption:i,...m&&{imageUrl:m}}),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Jh=L.object({id:L.uuid(),imageUrl:L.string(),caption:L.string().nullable(),congressId:L.uuid()}),od={method:"post",path:"/regional-congress/{congressId}/gallery",tags:["Regional Congresses"],summary:"Create a new congress gallery image",security:[{bearerAuth:[]}],request:{params:L.object({congressId:L.uuid()}),body:{content:{"application/json":{schema:Ma.omit({congressId:!0})}}}},responses:{201:{description:"Congress gallery image created successfully",summary:"Congress Gallery Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:L.object({errors:L.record(L.string(),L.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:L.object({message:L.string()})}}},404:{description:"Congress not found with the provided ID",summary:"Congress Not Found",content:{"application/json":{schema:L.object({message:L.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:L.object({message:L.string()})}}}}},id={method:"get",path:"/regional-congress/{congressId}/gallery",tags:["Regional Congresses"],summary:"Find congress gallery images by congress ID",request:{params:Aa},responses:{200:{description:"Congress gallery images retrieved successfully by congress ID",summary:"Congress Galleries Retrieved",content:{"application/json":{schema:L.array(Jh)}}},400:{description:"Invalid congress ID parameter provided",summary:"Validation Error",content:{"application/json":{schema:L.object({errors:L.record(L.string(),L.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:L.object({message:L.string()})}}}}},nd={method:"put",path:"/regional-congress/gallery/{id}",tags:["Regional Congresses"],summary:"Update congress gallery image",security:[{bearerAuth:[]}],request:{params:mi,body:{content:{"application/json":{schema:Da.omit({id:!0})}}}},responses:{200:{description:"Congress gallery image updated successfully",summary:"Congress Gallery Updated"},400:{description:"Invalid input data or gallery ID format",summary:"Validation Error",content:{"application/json":{schema:L.object({errors:L.record(L.string(),L.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:L.object({message:L.string()})}}},404:{description:"Congress gallery image not found with the provided ID",summary:"Congress Gallery Not Found",content:{"application/json":{schema:L.object({message:L.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:L.object({message:L.string()})}}}}},sd={method:"delete",path:"/regional-congress/gallery/{id}",tags:["Regional Congresses"],summary:"Delete congress gallery image",security:[{bearerAuth:[]}],request:{params:mi},responses:{200:{description:"Congress gallery image deleted successfully",summary:"Congress Gallery Deleted"},400:{description:"Invalid gallery ID format",summary:"Validation Error",content:{"application/json":{schema:L.object({errors:L.record(L.string(),L.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:L.object({message:L.string()})}}},404:{description:"Congress gallery image not found with the provided ID",summary:"Congress Gallery Not Found",content:{"application/json":{schema:L.object({message:L.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:L.object({message:L.string()})}}}}};import _ from"zod";import{extendZodWithOpenApi as Qh}from"@asteasolutions/zod-to-openapi";import or from"zod";var md=2,ad=1024,eR=ad*ad,tR=md*eR;Qh(or);var Fa=or.object({name:or.string().min(1,"Nome \xE9 obrigat\xF3rio"),logo:or.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=tR,`A imagem deve ter no m\xE1ximo ${md}MB.`).optional(),congressId:or.uuid()}),di=class{constructor(e,r,t){this.regionalCongressPartnerRepository=e;this.regionalCongressRepository=r;this.firebaseStorageService=t}async handle(e,r){try{let{name:t,logo:i,congressId:n}=Fa.parse({...e.body,...e.params,logo:e.file});if(!await this.regionalCongressRepository.findById(n))throw new p("O congresso n\xE3o existe.");let m=await this.regionalCongressPartnerRepository.create({name:t,congressId:n}),c;return i&&(c=await this.firebaseStorageService.uploadFile({file:i,id:m.id,folder:U.PARTNER}),await this.regionalCongressPartnerRepository.update({id:m.id,logoUrl:c})),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as rR}from"@asteasolutions/zod-to-openapi";import Ua from"zod";rR(Ua);var ui=Ua.object({id:Ua.string().uuid("ID inv\xE1lido")}),li=class{constructor(e){this.regionalCongressPartnerRepository=e}async handle(e,r){try{let{id:t}=ui.parse(e.params);if(!await this.regionalCongressPartnerRepository.findById(t))throw new p("Parceiro n\xE3o encontrado");return await this.regionalCongressPartnerRepository.deleteById(t),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as oR}from"@asteasolutions/zod-to-openapi";import Dt from"zod";oR(Dt);var qa=Dt.object({congressId:Dt.uuid("ID do congresso inv\xE1lido"),page:Dt.coerce.number().int().positive().optional(),limit:Dt.coerce.number().int().positive().optional(),name:Dt.string().optional()}),gi=class{constructor(e){this.regionalCongressPartnerRepository=e}async handle(e,r){try{let{congressId:t,page:i,limit:n,name:s}=qa.parse({...e.params,...e.query}),m=i!==void 0&&n!==void 0,c=m?{offset:(i-1)*n,limit:n}:void 0,u=await this.regionalCongressPartnerRepository.findByCongressId({pagination:c,filter:{congressId:t,name:s}});if(!u)throw new p("Parceiros n\xE3o encontrados");if(!m)return r.status(200).json(u);let j=await this.regionalCongressPartnerRepository.count({filter:{congressId:t,name:s}});return r.status(200).json({data:u,pagination:{page:i,limit:n,total:j,totalPages:Math.ceil(j/n)}})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as iR}from"@asteasolutions/zod-to-openapi";import ir from"zod";var pd=2,cd=1024,nR=cd*cd,sR=pd*nR;iR(ir);var Ba=ir.object({id:ir.string().uuid("ID inv\xE1lido"),name:ir.string().min(1,"Nome \xE9 obrigat\xF3rio").optional(),logo:ir.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=sR,`A imagem deve ter no m\xE1ximo ${pd}MB.`).optional()}),yi=class{constructor(e,r){this.regionalCongressPartnerRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,name:i,logo:n}=Ba.parse({...e.params,...e.body,logo:e.file});if(!await this.regionalCongressPartnerRepository.findById(t))throw new p("Parceiro n\xE3o encontrado");let m;return n&&(m=await this.firebaseStorageService.uploadFile({file:n,id:t,folder:U.PARTNER})),await this.regionalCongressPartnerRepository.update({id:t,name:i,...m&&{logoUrl:m}}),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var aR=_.object({id:_.uuid(),name:_.string(),logoUrl:_.string().nullable(),congressId:_.uuid()}),dd={method:"post",path:"/regional-congress/{congressId}/partner",tags:["Regional Congresses"],summary:"Create a new congress partner",security:[{bearerAuth:[]}],request:{params:_.object({congressId:_.uuid()}),body:{content:{"application/json":{schema:Fa.omit({congressId:!0})}}}},responses:{201:{description:"Congress partner created successfully",summary:"Congress Partner Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:_.object({errors:_.record(_.string(),_.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:_.object({message:_.string()})}}},404:{description:"Congress not found with the provided ID",summary:"Congress Not Found",content:{"application/json":{schema:_.object({message:_.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:_.object({message:_.string()})}}}}},ld={method:"get",path:"/regional-congress/{congressId}/partner",tags:["Regional Congresses"],summary:"Find congress partners by congress ID",request:{params:qa},responses:{200:{description:"Congress partners retrieved successfully by congress ID",summary:"Congress Partners Retrieved",content:{"application/json":{schema:_.array(aR)}}},400:{description:"Invalid congress ID parameter provided",summary:"Validation Error",content:{"application/json":{schema:_.object({errors:_.record(_.string(),_.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:_.object({message:_.string()})}}}}},ud={method:"put",path:"/regional-congress/partner/{id}",tags:["Regional Congresses"],summary:"Update congress partner",security:[{bearerAuth:[]}],request:{params:ui,body:{content:{"application/json":{schema:Ba.omit({id:!0})}}}},responses:{200:{description:"Congress partner updated successfully",summary:"Congress Partner Updated"},400:{description:"Invalid input data or partner ID format",summary:"Validation Error",content:{"application/json":{schema:_.object({errors:_.record(_.string(),_.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:_.object({message:_.string()})}}},404:{description:"Congress partner not found with the provided ID",summary:"Congress Partner Not Found",content:{"application/json":{schema:_.object({message:_.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:_.object({message:_.string()})}}}}},gd={method:"delete",path:"/regional-congress/partner/{id}",tags:["Regional Congresses"],summary:"Delete congress partner",security:[{bearerAuth:[]}],request:{params:ui},responses:{200:{description:"Congress partner deleted successfully",summary:"Congress Partner Deleted"},400:{description:"Invalid partner ID format",summary:"Validation Error",content:{"application/json":{schema:_.object({errors:_.record(_.string(),_.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:_.object({message:_.string()})}}},404:{description:"Congress partner not found with the provided ID",summary:"Congress Partner Not Found",content:{"application/json":{schema:_.object({message:_.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:_.object({message:_.string()})}}}}};import l from"zod";import{extendZodWithOpenApi as mR}from"@asteasolutions/zod-to-openapi";import K from"zod";mR(K);var Oa=K.object({title:K.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio"),edition:K.coerce.number().int().positive("Edi\xE7\xE3o deve ser um n\xFAmero positivo"),startDate:K.coerce.date(),endDate:K.coerce.date(),description:K.string().optional(),location:K.string().optional(),congressLink:K.union([K.url("Link do congresso deve ser uma URL v\xE1lida"),K.literal("")]),noticeUrl:K.union([K.url("URL do edital deve ser uma URL v\xE1lida"),K.literal("")]),scheduleUrl:K.union([K.url("URL do cronograma deve ser uma URL v\xE1lida"),K.literal("")]),programUrl:K.union([K.url("URL da programa\xE7\xE3o deve ser uma URL v\xE1lida"),K.literal("")]),adminReportUrl:K.union([K.url("URL do relat\xF3rio administrativo deve ser uma URL v\xE1lida"),K.literal("")]),proceedingsUrl:K.union([K.url("URL dos anais deve ser uma URL v\xE1lida"),K.literal("")])}).refine(o=>o.endDate>=o.startDate,{message:"Data de t\xE9rmino deve ser posterior ou igual \xE0 data de in\xEDcio",path:["endDate"]}),fi=class{constructor(e){this.regionalCongressRepository=e}async handle(e,r){try{let t=Oa.parse(e.body);return await this.regionalCongressRepository.create(t),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as cR}from"@asteasolutions/zod-to-openapi";import Na from"zod";cR(Na);var ka=Na.object({id:Na.string().uuid("ID inv\xE1lido")}),hi=class{constructor(e){this.regionalCongressRepository=e}async handle(e,r){try{let{id:t}=ka.parse(e.params);if(!await this.regionalCongressRepository.findById(t))throw new p("Congresso regional n\xE3o encontrado");return await this.regionalCongressRepository.deleteById(t),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as pR}from"@asteasolutions/zod-to-openapi";import Ga from"zod";pR(Ga);var La=Ga.object({edition:Ga.coerce.number().int().positive("Edi\xE7\xE3o deve ser um n\xFAmero positivo")}),Ri=class{constructor(e){this.regionalCongressRepository=e}async handle(e,r){try{let{edition:t}=La.parse(e.params),i=await this.regionalCongressRepository.findByEdition(t);if(!i||i.length===0)throw new p("Congresso regional n\xE3o encontrado");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as dR}from"@asteasolutions/zod-to-openapi";import _a from"zod";dR(_a);var Ci=_a.object({id:_a.string().uuid("ID inv\xE1lido")}),Ii=class{constructor(e){this.regionalCongressRepository=e}async handle(e,r){try{let{id:t}=Ci.parse(e.params),i=await this.regionalCongressRepository.findById(t);if(!i)throw new p("Congresso regional n\xE3o encontrado");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as lR}from"@asteasolutions/zod-to-openapi";import Ye from"zod";lR(Ye);var Wa=Ye.object({page:Ye.coerce.number().int().positive().default(1),limit:Ye.coerce.number().int().positive().default(10),title:Ye.string().optional(),edition:Ye.coerce.number().int().positive().optional(),location:Ye.string().optional(),orderBy:Ye.enum(["asc","desc"]).optional().default("desc")}),bi=class{constructor(e){this.regionalCongressRepository=e}async handle(e,r){try{let{page:t,limit:i,orderBy:n,...s}=Wa.parse(e.query),m=(t-1)*i,c=await this.regionalCongressRepository.find({pagination:{offset:m,limit:i},filter:{...s,orderBy:n}});if(!c)throw new p("Congressos regionais n\xE3o encontrados");let u=await this.regionalCongressRepository.count({filter:s});return r.status(200).json({data:c,pagination:{page:t,limit:i,total:u,totalPages:Math.ceil(u/i)}})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as uR}from"@asteasolutions/zod-to-openapi";import Z from"zod";uR(Z);var Ha=Z.object({id:Z.string().uuid("ID inv\xE1lido"),title:Z.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio").optional(),edition:Z.coerce.number().int().positive("Edi\xE7\xE3o deve ser um n\xFAmero positivo").optional(),startDate:Z.coerce.date().optional(),endDate:Z.coerce.date().optional(),description:Z.string().optional(),location:Z.string().optional(),congressLink:Z.union([Z.url("Link do congresso deve ser uma URL v\xE1lida"),Z.literal("")]),noticeUrl:Z.union([Z.url("URL do edital deve ser uma URL v\xE1lida"),Z.literal("")]),scheduleUrl:Z.union([Z.url("URL do cronograma deve ser uma URL v\xE1lida"),Z.literal("")]),programUrl:Z.union([Z.url("URL da programa\xE7\xE3o deve ser uma URL v\xE1lida"),Z.literal("")]),adminReportUrl:Z.union([Z.url("URL do relat\xF3rio administrativo deve ser uma URL v\xE1lida"),Z.literal("")]),proceedingsUrl:Z.union([Z.url("URL dos anais deve ser uma URL v\xE1lida"),Z.literal("")])}).refine(o=>o.startDate&&o.endDate?o.endDate>=o.startDate:!0,{message:"Data de t\xE9rmino deve ser posterior ou igual \xE0 data de in\xEDcio",path:["endDate"]}),wi=class{constructor(e){this.regionalCongressRepository=e}async handle(e,r){try{let{id:t}=Z.object({id:Z.string().uuid()}).parse(e.params);if(!await this.regionalCongressRepository.findById(t))throw new p("Congresso regional n\xE3o encontrado");let n=Ha.parse({id:t,...e.body});return await this.regionalCongressRepository.update(n),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var gR=9,yR=l.object({image:l.any().openapi({type:"string",format:"binary"}),caption:l.string().optional()}),fR=l.object({image:l.any().openapi({type:"string",format:"binary"}).optional(),caption:l.string().optional()}),hR=l.object({id:l.uuid(),name:l.string(),logoUrl:l.string().nullable(),congressId:l.uuid()}),za=l.object({id:l.uuid(),imageUrl:l.string(),caption:l.string().nullable(),congressId:l.uuid()}),Za=l.object({id:l.uuid(),title:l.string(),edition:l.number(),startDate:l.date(),endDate:l.date(),description:l.string().nullable(),location:l.string().nullable(),congressLink:l.string().nullable(),noticeUrl:l.string().nullable(),scheduleUrl:l.string().nullable(),programUrl:l.string().nullable(),adminReportUrl:l.string().nullable(),proceedingsUrl:l.string().nullable(),partners:l.array(hR),galleries:l.array(za),createdAt:l.date(),updatedAt:l.date()}),yd={method:"post",path:"/regional-congress",tags:["Regional Congresses"],summary:"Create a new regional congress",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:Oa}}}},responses:{201:{description:"Regional congress created successfully",summary:"Regional Congress Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:l.object({errors:l.record(l.string(),l.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:l.object({message:l.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:l.object({message:l.string()})}}}}},fd={method:"get",path:"/regional-congress",tags:["Regional Congresses"],summary:"List all regional congresses with pagination and filters",request:{query:Wa},responses:{200:{description:"List of regional congresses retrieved successfully with pagination",summary:"Regional Congresses Retrieved",content:{"application/json":{schema:l.object({page:l.number(),totalPages:l.number(),offset:l.number(),limit:l.number(),congresses:l.array(Za)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:l.object({errors:l.record(l.string(),l.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:l.object({message:l.string()})}}}}},hd={method:"get",path:"/regional-congress/{id}",tags:["Regional Congresses"],summary:"Find regional congress by ID",request:{params:Ci},responses:{200:{description:"Regional congress details retrieved successfully",summary:"Regional Congress Retrieved",content:{"application/json":{schema:Za}}},400:{description:"Invalid regional congress ID format",summary:"Validation Error",content:{"application/json":{schema:l.object({errors:l.record(l.string(),l.string())})}}},404:{description:"Regional congress not found with the provided ID",summary:"Regional Congress Not Found",content:{"application/json":{schema:l.object({message:l.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:l.object({message:l.string()})}}}}},Rd={method:"get",path:"/regional-congress/edition/{edition}",tags:["Regional Congresses"],summary:"Find regional congresses by edition",request:{params:La},responses:{200:{description:"Regional congresses retrieved successfully by edition",summary:"Regional Congresses Retrieved by Edition",content:{"application/json":{schema:l.array(Za)}}},400:{description:"Invalid edition parameter provided",summary:"Validation Error",content:{"application/json":{schema:l.object({errors:l.record(l.string(),l.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:l.object({message:l.string()})}}}}},Id={method:"put",path:"/regional-congress/{id}",tags:["Regional Congresses"],summary:"Update regional congress",security:[{bearerAuth:[]}],request:{params:Ci,body:{content:{"application/json":{schema:Ha.omit({id:!0})}}}},responses:{200:{description:"Regional congress updated successfully",summary:"Regional Congress Updated"},400:{description:"Invalid input data or regional congress ID format",summary:"Validation Error",content:{"application/json":{schema:l.object({errors:l.record(l.string(),l.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:l.object({message:l.string()})}}},404:{description:"Regional congress not found with the provided ID",summary:"Regional Congress Not Found",content:{"application/json":{schema:l.object({message:l.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:l.object({message:l.string()})}}}}},Cd={method:"delete",path:"/regional-congress/{id}",tags:["Regional Congresses"],summary:"Delete regional congress",security:[{bearerAuth:[]}],request:{params:ka},responses:{200:{description:"Regional congress deleted successfully",summary:"Regional Congress Deleted"},400:{description:"Invalid regional congress ID format",summary:"Validation Error",content:{"application/json":{schema:l.object({errors:l.record(l.string(),l.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:l.object({message:l.string()})}}},404:{description:"Regional congress not found with the provided ID",summary:"Regional Congress Not Found",content:{"application/json":{schema:l.object({message:l.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:l.object({message:l.string()})}}}}},mF={method:"post",path:"/regional-congress/{congressId}/gallery",tags:["Regional Congress Gallery"],summary:"Create a new gallery image for a congress",security:[{bearerAuth:[]}],request:{params:l.object({congressId:l.uuid()}),body:{content:{"multipart/form-data":{schema:yR}}}},responses:{201:{description:"Gallery image created successfully",summary:"Gallery Image Created"},400:{description:"Invalid input data, missing required fields, or invalid image format/size",summary:"Validation Error",content:{"application/json":{schema:l.object({errors:l.record(l.string(),l.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:l.object({message:l.string()})}}},404:{description:"Congress not found with the provided ID",summary:"Congress Not Found",content:{"application/json":{schema:l.object({message:l.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:l.object({message:l.string()})}}}}},cF={method:"get",path:"/regional-congress/{congressId}/gallery",tags:["Regional Congress Gallery"],summary:"List all gallery images for a congress with pagination",request:{params:l.object({congressId:l.uuid()}),query:l.object({page:l.coerce.number().min(1).default(1),limit:l.coerce.number().min(1).default(gR),caption:l.string().optional()})},responses:{200:{description:"Gallery images retrieved successfully with pagination",summary:"Gallery Images Retrieved",content:{"application/json":{schema:l.object({page:l.number(),totalPages:l.number(),offset:l.number(),limit:l.number(),galleries:l.array(za)})}}},400:{description:"Invalid congress ID format or query parameters",summary:"Validation Error",content:{"application/json":{schema:l.object({errors:l.record(l.string(),l.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:l.object({message:l.string()})}}}}},pF={method:"get",path:"/regional-congress/gallery/{id}",tags:["Regional Congress Gallery"],summary:"Find a gallery image by ID",request:{params:l.object({id:l.uuid()})},responses:{200:{description:"Gallery image retrieved successfully",summary:"Gallery Image Retrieved",content:{"application/json":{schema:za}}},400:{description:"Invalid gallery image ID format",summary:"Validation Error",content:{"application/json":{schema:l.object({errors:l.record(l.string(),l.string())})}}},404:{description:"Gallery image not found with the provided ID",summary:"Gallery Image Not Found",content:{"application/json":{schema:l.object({message:l.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:l.object({message:l.string()})}}}}},dF={method:"put",path:"/regional-congress/gallery/{id}",tags:["Regional Congress Gallery"],summary:"Update a gallery image with optional image upload",security:[{bearerAuth:[]}],request:{params:l.object({id:l.uuid()}),body:{content:{"multipart/form-data":{schema:fR}}}},responses:{200:{description:"Gallery image updated successfully",summary:"Gallery Image Updated"},400:{description:"Invalid input data, gallery ID format, or invalid image format/size",summary:"Validation Error",content:{"application/json":{schema:l.object({errors:l.record(l.string(),l.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:l.object({message:l.string()})}}},404:{description:"Gallery image not found with the provided ID",summary:"Gallery Image Not Found",content:{"application/json":{schema:l.object({message:l.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:l.object({message:l.string()})}}}}},lF={method:"delete",path:"/regional-congress/gallery/{id}",tags:["Regional Congress Gallery"],summary:"Delete a gallery image",security:[{bearerAuth:[]}],request:{params:l.object({id:l.uuid()})},responses:{200:{description:"Gallery image deleted successfully",summary:"Gallery Image Deleted"},400:{description:"Invalid gallery ID format",summary:"Validation Error",content:{"application/json":{schema:l.object({errors:l.record(l.string(),l.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:l.object({message:l.string()})}}},404:{description:"Gallery image not found with the provided ID",summary:"Gallery Image Not Found",content:{"application/json":{schema:l.object({message:l.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:l.object({message:l.string()})}}}}};import{$Enums as em}from"@prisma/client";import R from"zod";import{extendZodWithOpenApi as RR}from"@asteasolutions/zod-to-openapi";import{Degree as IR,Seniority as CR}from"@prisma/client";import de from"zod";RR(de);var Va=de.object({registrationNumber:de.string(),mainEtps:de.string().optional(),formations:de.string().optional(),degrees:de.array(de.enum(IR)),occupations:de.string(),seniority:de.enum(CR),institutions:de.string(),biography:de.string().optional(),userId:de.string()}),Si=class{constructor(e){this.researcherRepository=e}async handle(e,r){try{let{registrationNumber:t,mainEtps:i,formations:n,degrees:s,occupations:m,seniority:c,institutions:u,biography:j,userId:q}=Va.parse(e.body);if(await this.researcherRepository.findByRegistrationNumber(t))throw new J("J\xE1 existe um pesquisador cadastrado com este n\xFAmero de registro.");if(await this.researcherRepository.findByUserId(q))throw new J("Usu\xE1rio j\xE1 possui um perfil de pesquisador.");return await this.researcherRepository.create({registrationNumber:t,mainEtps:i,formations:n,degrees:s,occupations:m,seniority:c,institutions:u,biography:j,userId:q}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as bR}from"@asteasolutions/zod-to-openapi";import Ka from"zod";bR(Ka);var Ya=Ka.object({id:Ka.uuid()}),vi=class{constructor(e){this.researcherRepository=e}async handle(e,r){try{let{id:t}=Ya.parse({id:e.params.id});if(!await this.researcherRepository.findById(t))throw new p("O pesquisador n\xE3o existe.");return await this.researcherRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as wR}from"@asteasolutions/zod-to-openapi";import Xa from"zod";wR(Xa);var Ei=Xa.object({id:Xa.uuid()}),ji=class{constructor(e){this.researcherRepository=e}async handle(e,r){try{let{id:t}=Ei.parse({id:e.params.id}),i=await this.researcherRepository.findById(t);if(!i)throw new p("O pesquisador n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as SR}from"@asteasolutions/zod-to-openapi";import $a from"zod";SR($a);var Ja=$a.object({userId:$a.uuid()}),xi=class{constructor(e){this.researcherRepository=e}async handle(e,r){try{let{userId:t}=Ja.parse({userId:e.params.userId}),i=await this.researcherRepository.findByUserId(t);if(!i)throw new p("O pesquisador n\xE3o existe para este usu\xE1rio.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as vR}from"@asteasolutions/zod-to-openapi";import{Degree as jR,Seniority as ER}from"@prisma/client";import le from"zod";vR(le);var Qa=le.object({id:le.uuid(),registrationNumber:le.string().optional(),mainEtps:le.string().optional(),formations:le.string().optional(),degrees:le.array(le.enum(jR)).optional(),occupations:le.string().optional(),seniority:le.enum(ER).optional(),institutions:le.string().optional(),biography:le.string().optional()}),Pi=class{constructor(e){this.researcherRepository=e}async handle(e,r){try{let{id:t,registrationNumber:i,mainEtps:n,formations:s,degrees:m,occupations:c,seniority:u,institutions:j,biography:q}=Qa.parse({id:e.params.id,...e.body}),z=await this.researcherRepository.findById(t);if(!z)throw new p("O pesquisador n\xE3o existe.");if(i&&i!==z.registrationNumber){let Y=await this.researcherRepository.findByRegistrationNumber(i);if(Y&&Y.id!==t)throw new J("J\xE1 existe um pesquisador com este n\xFAmero de registro.")}return await this.researcherRepository.update({id:t,registrationNumber:i,mainEtps:n,formations:s,degrees:m,occupations:c,seniority:u,institutions:j,biography:q}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var xR=1,PR=9,tm=R.object({id:R.uuid(),registrationNumber:R.string(),mainEtps:R.string().nullable(),formations:R.string().nullable(),degrees:R.array(R.enum(em.Degree)),occupations:R.string(),seniority:R.enum(em.Seniority),institutions:R.string(),biography:R.string().nullable(),createdAt:R.date(),updatedAt:R.date(),userId:R.uuid(),user:R.object({id:R.uuid(),name:R.string(),emailAddress:R.string(),avatarUrl:R.string().nullable(),orcid:R.string().nullable(),phone:R.string().nullable(),lattesUrl:R.string().nullable(),role:R.enum(em.UserRole)})}),bd={method:"post",path:"/researcher",tags:["Researchers"],summary:"Create a new researcher profile",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:Va}}}},responses:{201:{description:"Researcher profile created successfully",summary:"Researcher Created",content:{"application/json":{schema:R.object({message:R.string()})}}},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:R.object({errors:R.record(R.string(),R.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:R.object({message:R.string()})}}},409:{description:"Researcher with this registration number already exists or user already has a researcher profile",summary:"Conflict",content:{"application/json":{schema:R.object({message:R.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:R.object({message:R.string()})}}}}},wd={method:"get",path:"/researcher",tags:["Researchers"],summary:"List all researchers with pagination and filters",request:{query:R.object({page:R.coerce.number().min(1).default(xR).optional(),limit:R.coerce.number().min(1).default(PR).optional(),userId:R.string().optional(),registrationNumber:R.string().optional(),name:R.string().optional(),emailAddress:R.string().optional(),mainEtps:R.string().optional(),formations:R.string().optional(),occupations:R.string().optional(),institutions:R.string().optional(),biography:R.string().optional(),orderBy:R.enum(["asc","desc"]).optional()})},responses:{200:{description:"List of researchers retrieved successfully with pagination",summary:"Researchers Retrieved",content:{"application/json":{schema:R.object({page:R.number(),totalPages:R.number(),offset:R.number(),limit:R.number(),researchers:R.array(tm)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:R.object({message:R.string()})}}}}},Sd={method:"get",path:"/researcher/{id}",tags:["Researchers"],summary:"Find researcher by ID",request:{params:Ei},responses:{200:{description:"Researcher details retrieved successfully",summary:"Researcher Retrieved",content:{"application/json":{schema:tm}}},400:{description:"Invalid researcher ID format",summary:"Validation Error",content:{"application/json":{schema:R.object({errors:R.record(R.string(),R.string())})}}},404:{description:"Researcher not found with the provided ID",summary:"Researcher Not Found",content:{"application/json":{schema:R.object({message:R.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:R.object({message:R.string()})}}}}},vd={method:"get",path:"/researcher/user/{userId}",tags:["Researchers"],summary:"Find researcher by user ID",request:{params:Ja},responses:{200:{description:"Researcher details retrieved successfully",summary:"Researcher Retrieved",content:{"application/json":{schema:tm}}},400:{description:"Invalid user ID format",summary:"Validation Error",content:{"application/json":{schema:R.object({errors:R.record(R.string(),R.string())})}}},404:{description:"Researcher not found for this user",summary:"Researcher Not Found",content:{"application/json":{schema:R.object({message:R.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:R.object({message:R.string()})}}}}},jd={method:"put",path:"/researcher/{id}",tags:["Researchers"],summary:"Update researcher profile",security:[{bearerAuth:[]}],request:{params:Ei,body:{content:{"application/json":{schema:Qa.omit({id:!0})}}}},responses:{200:{description:"Researcher profile updated successfully",summary:"Researcher Updated",content:{"application/json":{schema:R.object({message:R.string()})}}},400:{description:"Invalid input data or researcher ID format",summary:"Validation Error",content:{"application/json":{schema:R.object({errors:R.record(R.string(),R.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:R.object({message:R.string()})}}},404:{description:"Researcher not found with the provided ID",summary:"Researcher Not Found",content:{"application/json":{schema:R.object({message:R.string()})}}},409:{description:"Researcher with this registration number already exists",summary:"Conflict",content:{"application/json":{schema:R.object({message:R.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:R.object({message:R.string()})}}}}},Ed={method:"delete",path:"/researcher/{id}",tags:["Researchers"],summary:"Delete researcher profile",security:[{bearerAuth:[]}],request:{params:Ya},responses:{200:{description:"Researcher profile deleted successfully",summary:"Researcher Deleted"},400:{description:"Invalid researcher ID format",summary:"Validation Error",content:{"application/json":{schema:R.object({errors:R.record(R.string(),R.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:R.object({message:R.string()})}}},404:{description:"Researcher not found with the provided ID",summary:"Researcher Not Found",content:{"application/json":{schema:R.object({message:R.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:R.object({message:R.string()})}}}}};import{$Enums as FR}from"@prisma/client";import D from"zod";import{extendZodWithOpenApi as MR}from"@asteasolutions/zod-to-openapi";import Ft from"zod";MR(Ft);var rm=Ft.object({role:Ft.string().min(1),description:Ft.string().optional(),userId:Ft.uuid(),order:Ft.number().optional()}),Mi=class{constructor(e){this.sdhcTeamMemberRepository=e}async handle(e,r){try{let{role:t,description:i,userId:n,order:s}=rm.parse(e.body);return await this.sdhcTeamMemberRepository.create({role:t,description:i,userId:n,order:s??0}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as TR}from"@asteasolutions/zod-to-openapi";import om from"zod";TR(om);var im=om.object({id:om.uuid()}),Ti=class{constructor(e){this.sdhcTeamMemberRepository=e}async handle(e,r){try{let{id:t}=im.parse({id:e.params.id});if(!await this.sdhcTeamMemberRepository.findById(t))throw new p("O membro da equipe SDHC n\xE3o existe.");return await this.sdhcTeamMemberRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as AR}from"@asteasolutions/zod-to-openapi";import nm from"zod";AR(nm);var Di=nm.object({id:nm.uuid()}),Ai=class{constructor(e){this.sdhcTeamMemberRepository=e}async handle(e,r){try{let{id:t}=Di.parse({id:e.params.id}),i=await this.sdhcTeamMemberRepository.findById(t);if(!i)throw new p("O membro da equipe SDHC n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as DR}from"@asteasolutions/zod-to-openapi";import at from"zod";DR(at);var sm=at.object({id:at.uuid(),role:at.string().min(1).optional(),description:at.string().optional(),userId:at.uuid().optional(),order:at.number().optional()}),Fi=class{constructor(e){this.sdhcTeamMemberRepository=e}async handle(e,r){try{let{id:t,role:i,description:n,userId:s,order:m}=sm.parse({id:e.params.id,...e.body});if(!await this.sdhcTeamMemberRepository.findById(t))throw new p("O membro da equipe SDHC n\xE3o existe.");return await this.sdhcTeamMemberRepository.update({id:t,role:i,description:n,userId:s,order:m}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var UR=D.object({id:D.uuid(),name:D.string(),emailAddress:D.string(),avatarUrl:D.string().nullable(),orcid:D.string().nullable(),phone:D.string().nullable(),lattesUrl:D.string().nullable(),role:D.enum(FR.UserRole)}),xd=D.object({id:D.uuid(),role:D.string(),description:D.string().nullable(),order:D.number(),createdAt:D.date(),updatedAt:D.date(),userId:D.uuid(),user:UR}),Pd={method:"post",path:"/sdhc-team-member",tags:["SDHC Team Members"],summary:"Create a new SDHC Team Member",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:rm}}}},responses:{201:{description:"SDHC Team Member created successfully",summary:"SDHC Team Member Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:D.object({errors:D.record(D.string(),D.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:D.object({message:D.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:D.object({message:D.string()})}}}}},Md={method:"get",path:"/sdhc-team-member",tags:["SDHC Team Members"],summary:"List all SDHC Team Members with filters",request:{query:D.object({role:D.string().optional(),orderBy:D.enum(["asc","desc"]).optional()})},responses:{200:{description:"List of SDHC Team Members retrieved successfully",summary:"SDHC Team Members Retrieved",content:{"application/json":{schema:D.object({members:D.array(xd)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:D.object({message:D.string()})}}}}},Td={method:"get",path:"/sdhc-team-member/{id}",tags:["SDHC Team Members"],summary:"Find SDHC Team Member by ID",request:{params:Di},responses:{200:{description:"SDHC Team Member details retrieved successfully",summary:"SDHC Team Member Retrieved",content:{"application/json":{schema:xd}}},400:{description:"Invalid SDHC Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:D.object({errors:D.record(D.string(),D.string())})}}},404:{description:"SDHC Team Member not found with the provided ID",summary:"SDHC Team Member Not Found",content:{"application/json":{schema:D.object({message:D.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:D.object({message:D.string()})}}}}},Ad={method:"put",path:"/sdhc-team-member/{id}",tags:["SDHC Team Members"],summary:"Update SDHC Team Member",security:[{bearerAuth:[]}],request:{params:Di,body:{content:{"application/json":{schema:sm.omit({id:!0})}}}},responses:{200:{description:"SDHC Team Member updated successfully",summary:"SDHC Team Member Updated"},400:{description:"Invalid input data or SDHC Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:D.object({errors:D.record(D.string(),D.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:D.object({message:D.string()})}}},404:{description:"SDHC Team Member not found with the provided ID",summary:"SDHC Team Member Not Found",content:{"application/json":{schema:D.object({message:D.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:D.object({message:D.string()})}}}}},Dd={method:"delete",path:"/sdhc-team-member/{id}",tags:["SDHC Team Members"],summary:"Delete SDHC Team Member",security:[{bearerAuth:[]}],request:{params:im},responses:{200:{description:"SDHC Team Member deleted successfully",summary:"SDHC Team Member Deleted"},400:{description:"Invalid SDHC Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:D.object({errors:D.record(D.string(),D.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:D.object({message:D.string()})}}},404:{description:"SDHC Team Member not found with the provided ID",summary:"SDHC Team Member Not Found",content:{"application/json":{schema:D.object({message:D.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:D.object({message:D.string()})}}}}};import{$Enums as qd}from"@prisma/client";import O from"zod";import{extendZodWithOpenApi as qR}from"@asteasolutions/zod-to-openapi";import am from"zod";qR(am);var mm=am.object({id:am.string()}),Ui=class{constructor(e){this.userRepository=e}async handle(e,r){try{let{id:t}=mm.parse({id:e.params.id}),i=await this.userRepository.findById(t);if(!i)throw new p("O usu\xE1rio n\xE3o existe.");let n=e.user.id;if(i.id!==n)throw new ce("Voc\xEA n\xE3o tem permiss\xE3o para deletar o usu\xE1rio");return await this.userRepository.deleteById(i.id),r.sendStatus(204)}catch(t){if(console.log(t),t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as BR}from"@asteasolutions/zod-to-openapi";import{z as cm}from"zod";BR(cm);var pm=cm.object({id:cm.string().min(1,"id do usu\xE1rio n\xE3o fornecido.")}),qi=class{constructor(e){this.userRepository=e}async handle(e,r){try{let{id:t}=pm.parse(e.params),i=await this.userRepository.findById(t);if(!i)throw new p("Usu\xE1rio n\xE3o encontrado");r.status(200).json(i)}catch(t){if(console.log(t),t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as OR}from"@asteasolutions/zod-to-openapi";import mt from"zod";var Ud=2,Fd=1024,NR=Fd*Fd,kR=Ud*NR,GR=/^\d{4}-\d{4}-\d{4}-\d{4}$/,LR=/^\(?\d{2}\)?[\s-]?\d{4,5}-?\d{4}$/;OR(mt);var dm=mt.object({name:mt.string().optional(),lattesUrl:mt.string().optional(),orcid:mt.string().optional().transform(o=>o===void 0?void 0:o.trim()).refine(o=>o===void 0||o===""||GR.test(o),{message:"ORCID inv\xE1lido. Deve estar no formato 0000-0000-0000-0000"}),phone:mt.string().optional().refine(o=>o===void 0||o===""||LR.test(o),{message:"Telefone inv\xE1lido. Deve estar no formato (99) 99999-9999"}),avatarImage:mt.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=kR,`A imagem deve ter no m\xE1ximo ${Ud}MB.`).optional()}),Bi=class{constructor(e,r){this.userRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{avatarImage:t,...i}=dm.parse({...e.body,avatarImage:e.file}),n=e.user.id,s=await this.userRepository.findById(n);if(!s)throw new re("O usu\xE1rio n\xE3o existe");let m=s.avatarUrl;return t&&(s.avatarUrl?m=await this.firebaseStorageService.updateFile({file:t,id:n,folder:U.USER,fileUrl:s.avatarUrl}):m=await this.firebaseStorageService.uploadFile({file:t,id:n,folder:U.USER})),await this.userRepository.update({...i,id:n,avatarUrl:m||void 0}),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Bd={method:"get",path:"/users/{id}",tags:["Users"],summary:"Find user by ID",request:{params:pm},responses:{200:{description:"User details retrieved successfully",summary:"User Retrieved",content:{"application/json":{schema:O.object({id:O.string(),name:O.string(),createdAt:O.date(),updatedAt:O.date(),role:O.enum(qd.UserRole),lattesUrl:O.string().nullable(),orcid:O.string().nullable(),phone:O.string().nullable(),avatarUrl:O.url().nullable(),emailAddress:O.email()})}}},400:{description:"Invalid user ID format",summary:"Validation Error",content:{"application/json":{schema:O.object({errors:O.record(O.string(),O.string())})}}},404:{description:"User not found with the provided ID",summary:"User Not Found",content:{"application/json":{schema:O.object({message:O.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:O.object({message:O.string()})}}}}},Od={method:"put",path:"/users",tags:["Users"],summary:"Update authenticated user",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:dm}}}},responses:{200:{description:"User profile updated successfully",summary:"User Updated",content:{"application/json":{schema:O.object({message:O.string()})}}},400:{description:"Invalid input data or file format",summary:"Validation Error",content:{"application/json":{schema:O.object({errors:O.record(O.string(),O.string())})}}},401:{description:"User not authenticated or unauthorized",summary:"Authentication Required",content:{"application/json":{schema:O.object({message:O.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:O.object({message:O.string()})}}}}},Nd={method:"delete",path:"/users",tags:["Users"],summary:"Delete authenticated user",security:[{bearerAuth:[]}],request:{params:mm},responses:{200:{description:"User account deleted successfully",summary:"User Deleted",content:{"application/json":{schema:O.object({message:O.string()})}}},400:{description:"Invalid request parameters",summary:"Validation Error",content:{"application/json":{schema:O.object({errors:O.record(O.string(),O.string())})}}},401:{description:"User not authenticated or unauthorized",summary:"Authentication Required",content:{"application/json":{schema:O.object({message:O.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:O.object({message:O.string()})}}}}},kd={method:"get",path:"/users",tags:["Users"],summary:"List users",responses:{200:{description:"Complete list of users retrieved successfully",summary:"Users Retrieved",content:{"application/json":{schema:O.array(O.object({id:O.string(),name:O.string(),createdAt:O.date(),updatedAt:O.date(),role:O.enum(qd.UserRole),lattesUrl:O.url().nullable(),orcid:O.string().nullable(),phone:O.string().nullable(),avatarUrl:O.string().nullable(),emailAddress:O.email()}))}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:O.object({message:O.string()})}}}}};import C from"zod";import{extendZodWithOpenApi as _R}from"@asteasolutions/zod-to-openapi";import lm from"zod";_R(lm);var um=lm.object({id:lm.uuid()}),Oi=class{constructor(e,r){this.webinarRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=um.parse({id:e.params.id}),i=await this.webinarRepository.findById(t);if(!i)throw new p("O webinar n\xE3o existe.");return i.thumbnailUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.thumbnailUrl}),await this.webinarRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as WR}from"@asteasolutions/zod-to-openapi";import gm from"zod";WR(gm);var ym=gm.object({id:gm.uuid()}),Ni=class{constructor(e){this.webinarRepository=e}async handle(e,r){try{let{id:t}=ym.parse({id:e.params.id}),i=await this.webinarRepository.findById(t);if(!i)throw new p("Webinar n\xE3o encontrado.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as HR}from"@asteasolutions/zod-to-openapi";import ct from"zod";var zR=1,ZR=6;HR(ct);var fm=ct.object({page:ct.coerce.number().min(1).default(zR),limit:ct.coerce.number().min(1).default(ZR),title:ct.string().optional(),description:ct.string().optional(),orderBy:ct.enum(["asc","desc"]).default("desc")}),ki=class{constructor(e){this.webinarRepository=e}async handle(e,r){try{let{limit:t,page:i,...n}=fm.parse(e.query),s=i*t-t,[m,c]=await Promise.all([this.webinarRepository.find({pagination:{offset:s,limit:t},filter:n}),this.webinarRepository.count({filter:n})]),u=Math.max(Math.ceil(c/t),1);return r.status(200).json({page:i,totalPages:u,offset:s,limit:t,webinars:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as VR}from"@asteasolutions/zod-to-openapi";import he from"zod";var Ld=5,Gd=1024,KR=Gd*Gd,YR=Ld*KR;VR(he);var hm=he.object({id:he.uuid(),title:he.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio.").optional(),description:he.string().optional(),scheduledAt:he.coerce.date().optional(),webinarLink:he.url("URL do webinar deve ser v\xE1lida").optional(),guestIds:he.transform(o=>typeof o=="string"?o.split(","):o).pipe(he.array(he.uuid())).optional(),thumbnail:he.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=YR,`A thumbnail deve ter no m\xE1ximo ${Ld}MB.`).optional()}),Gi=class{constructor(e,r){this.webinarRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,thumbnail:i,title:n,description:s,scheduledAt:m,webinarLink:c,guestIds:u}=hm.parse({id:e.params.id,...e.body,thumbnail:e.file}),j=await this.webinarRepository.findById(t);if(!j)throw new p("O webinar n\xE3o existe.");let q=j.thumbnailUrl;if(i&&(q=await this.firebaseStorageService.uploadFile({file:i,id:t,folder:U.WEBINAR})),!q)throw new a("Thumbnail URL \xE9 obrigat\xF3rio");return await this.webinarRepository.update({id:t,title:n,description:s,scheduledAt:m,webinarLink:c,thumbnailUrl:q,guestIds:u}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var _d={method:"post",path:"/webinars",tags:["Webinars"],summary:"Create webinar",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:C.object({title:C.string().min(1).openapi({description:"T\xEDtulo do webinar"}),description:C.string().optional().openapi({description:"Descri\xE7\xE3o do webinar"}),scheduledAt:C.string().openapi({description:"Data e hora agendada (ISO 8601)",example:"2024-01-01T10:00:00Z"}),webinarLink:C.string().url().optional().openapi({description:"Link do webinar"}),guestIds:C.string().openapi({description:"IDs dos convidados separados por v\xEDrgula",example:"uuid1,uuid2,uuid3"}),thumbnail:C.string().optional().openapi({description:"Imagem de thumbnail (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{201:{description:"Webinar created successfully",summary:"Webinar Created"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:C.object({errors:C.record(C.string(),C.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:C.object({message:C.string()})}}}}},Wd={method:"get",path:"/webinars",tags:["Webinars"],summary:"List webinars",security:[{bearerAuth:[]}],request:{query:fm},responses:{200:{description:"Paginated list of webinars with guest information retrieved successfully",summary:"Webinars Retrieved",content:{"application/json":{schema:C.object({page:C.number(),totalPages:C.number(),offset:C.number(),limit:C.number(),webinars:C.array(C.object({id:C.string(),title:C.string(),description:C.string().nullable(),scheduledAt:C.date(),webinarLink:C.string().nullable(),thumbnailUrl:C.string().nullable(),createdAt:C.date(),updatedAt:C.date(),guests:C.array(C.object({id:C.uuid(),name:C.string(),emailAddress:C.email(),avatarUrl:C.string().nullable(),createdAt:C.date(),updatedAt:C.date()}))}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:C.object({errors:C.record(C.string(),C.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:C.object({message:C.string()})}}}}},Hd={method:"get",path:"/webinars/{id}",tags:["Webinars"],summary:"Find webinar by ID",security:[{bearerAuth:[]}],request:{params:ym},responses:{200:{description:"Webinar details retrieved successfully",summary:"Webinar Retrieved",content:{"application/json":{schema:C.object({id:C.string(),title:C.string(),description:C.string().nullable(),scheduledAt:C.date(),webinarLink:C.string().nullable(),thumbnailUrl:C.string().nullable(),createdAt:C.date(),updatedAt:C.date(),guests:C.array(C.object({id:C.uuid(),name:C.string(),emailAddress:C.email(),avatarUrl:C.string().nullable(),createdAt:C.date(),updatedAt:C.date()}))}).nullable()}}},400:{description:"Invalid webinar ID format",summary:"Validation Error",content:{"application/json":{schema:C.object({errors:C.record(C.string(),C.string())})}}},404:{description:"Webinar not found with the provided ID",summary:"Webinar Not Found",content:{"application/json":{schema:C.object({message:C.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:C.object({message:C.string()})}}}}},zd={method:"put",path:"/webinars/{id}",tags:["Webinars"],summary:"Update webinar",security:[{bearerAuth:[]}],request:{params:hm.pick({id:!0}),body:{content:{"multipart/form-data":{schema:C.object({title:C.string().min(1).optional().openapi({description:"T\xEDtulo do webinar"}),description:C.string().optional().openapi({description:"Descri\xE7\xE3o do webinar"}),scheduledAt:C.string().optional().openapi({description:"Data e hora agendada (ISO 8601)",example:"2024-01-01T10:00:00Z"}),webinarLink:C.string().url().optional().openapi({description:"Link do webinar"}),guestIds:C.string().optional().openapi({description:"IDs dos convidados separados por v\xEDrgula",example:"uuid1,uuid2,uuid3"}),thumbnail:C.string().optional().openapi({description:"Imagem de thumbnail (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{200:{description:"Webinar updated successfully",summary:"Webinar Updated"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:C.object({errors:C.record(C.string(),C.string())})}}},404:{description:"Webinar not found with the provided ID",summary:"Webinar Not Found",content:{"application/json":{schema:C.object({message:C.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:C.object({message:C.string()})}}}}},Zd={method:"delete",path:"/webinars/{id}",tags:["Webinars"],summary:"Delete webinar",security:[{bearerAuth:[]}],request:{params:um},responses:{200:{description:"Webinar deleted successfully",summary:"Webinar Deleted"},400:{description:"Invalid webinar ID format",summary:"Validation Error",content:{"application/json":{schema:C.object({errors:C.record(C.string(),C.string())})}}},404:{description:"Webinar not found with the provided ID",summary:"Webinar Not Found",content:{"application/json":{schema:C.object({message:C.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:C.object({message:C.string()})}}}}};var y=new XR;y.registerComponent("securitySchemes","bearerAuth",{type:"http",scheme:"bearer",bearerFormat:"JWT"});y.registerPath(Gm);y.registerPath(Lm);y.registerPath(_m);y.registerPath(Wm);y.registerPath(zm);y.registerPath(Zm);y.registerPath(Hm);y.registerPath(Bd);y.registerPath(Od);y.registerPath(Nd);y.registerPath(kd);y.registerPath(yp);y.registerPath(fp);y.registerPath(hp);y.registerPath(Rp);y.registerPath(Vm);y.registerPath(Km);y.registerPath(Ym);y.registerPath(Xm);y.registerPath($m);y.registerPath(Tp);y.registerPath(Ap);y.registerPath(Dp);y.registerPath(Fp);y.registerPath(Up);y.registerPath(yc);y.registerPath(fc);y.registerPath(hc);y.registerPath(Rc);y.registerPath(Ic);y.registerPath(bd);y.registerPath(wd);y.registerPath(Sd);y.registerPath(vd);y.registerPath(jd);y.registerPath(Ed);y.registerPath(sc);y.registerPath(ac);y.registerPath(mc);y.registerPath(cc);y.registerPath(pc);y.registerPath(vp);y.registerPath(jp);y.registerPath(Ep);y.registerPath(xp);y.registerPath(Pp);y.registerPath(Yc);y.registerPath(Xc);y.registerPath($c);y.registerPath(Jc);y.registerPath(Qc);y.registerPath(Pd);y.registerPath(Md);y.registerPath(Td);y.registerPath(Ad);y.registerPath(Dd);y.registerPath(Wc);y.registerPath(Hc);y.registerPath(zc);y.registerPath(Zc);y.registerPath(Vc);y.registerPath(Vp);y.registerPath(Kp);y.registerPath(Yp);y.registerPath(Xp);y.registerPath($p);y.registerPath(Jp);y.registerPath(mp);y.registerPath(cp);y.registerPath(pp);y.registerPath(dp);y.registerPath(lp);y.registerPath(up);y.registerPath(ip);y.registerPath(np);y.registerPath(sp);y.registerPath(ap);y.registerPath(Bc);y.registerPath(Oc);y.registerPath(Nc);y.registerPath(kc);y.registerPath(Gc);y.registerPath(Lc);y.registerPath(Dc);y.registerPath(Fc);y.registerPath(Uc);y.registerPath(qc);y.registerPath(vc);y.registerPath(jc);y.registerPath(Ec);y.registerPath(xc);y.registerPath(yd);y.registerPath(fd);y.registerPath(hd);y.registerPath(Rd);y.registerPath(Id);y.registerPath(Cd);y.registerPath(dd);y.registerPath(ld);y.registerPath(ud);y.registerPath(gd);y.registerPath(od);y.registerPath(id);y.registerPath(nd);y.registerPath(sd);y.registerPath(_d);y.registerPath(Wd);y.registerPath(Hd);y.registerPath(zd);y.registerPath(Zd);y.registerPath(ec);y.registerPath(tc);y.registerPath(rc);y.registerPath(oc);y.registerPath(ic);y.registerPath(Op);y.registerPath(Np);y.registerPath(kp);y.registerPath(Gp);y.registerPath(Lp);var JR=new $R(y.definitions),Vd=JR.generateDocument({openapi:"3.0.0",info:{title:"API da Rede CT",version:"1.0.0",description:"API com valida\xE7\xE3o Zod"}});import{Router as nI}from"express";import{extendZodWithOpenApi as QR}from"@asteasolutions/zod-to-openapi";import Rm from"zod";QR(Rm);var eI=Rm.object({authenticatedUserId:Rm.uuid()}),Li=class{constructor(e){this.userRepository=e}async handle(e,r){try{let{authenticatedUserId:t}=eI.parse({authenticatedUserId:e.user.id}),i=await this.userRepository.findById(t);if(!i)throw new p("Usu\xE1rio n\xE3o encontrado.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{PrismaClient as tI}from"@prisma/client";var N=new tI({log:["warn","error"]});var _i=class{constructor(e){this.prisma=e}async register({userId:e,title:r,description:t,certificationUrl:i}){await this.prisma.certification.create({data:{title:r,description:t,certificationUrl:i,user:{connect:{id:e}}}})}async find({pagination:{offset:e,limit:r},filter:{description:t,orderBy:i,title:n,userId:s}}){let m={},c=[];return s&&(m.userId=s),n&&c.push({title:{contains:n,mode:"insensitive"}}),t&&c.push({description:{contains:t,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.certification.findMany({where:m,include:{user:{omit:{passwordHash:!0}}},orderBy:{updatedAt:i},skip:e,take:r})}async findById(e){return await this.prisma.certification.findFirst({where:{id:e}})}async findByUserId({pagination:{limit:e,offset:r},filter:{description:t,orderBy:i,title:n},userId:s}){let m={userId:s},c=[];return n&&c.push({title:{contains:n,mode:"insensitive"}}),t&&c.push({description:{contains:t,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.certification.findMany({where:m,include:{user:{omit:{passwordHash:!0}}},skip:r,take:e,orderBy:i?{updatedAt:i}:{updatedAt:"desc"}})}async update({id:e,...r}){await this.prisma.certification.update({where:{id:e},data:r})}async deleteById(e){await this.prisma.certification.delete({where:{id:e}})}async count({filter:{description:e,title:r,userId:t}}){let i={},n=[];return t&&(i.userId=t),r&&n.push({title:{contains:r,mode:"insensitive"}}),e&&n.push({description:{contains:e,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.certification.count({where:i})}};function Xe(){return new _i(N)}var Wi=class{constructor(e){this.prisma=e}async create(e){await this.prisma.news.create({data:e})}async find({pagination:{offset:e,limit:r},filter:{authorId:t,content:i,title:n,orderBy:s}}){let m={};t&&(m.authorId={contains:t,mode:"insensitive"});let c=[];return n&&c.push({title:{contains:n,mode:"insensitive"}}),i&&c.push({content:{contains:i,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.news.findMany({where:m,omit:{authorId:!0},include:{author:!0},orderBy:{updatedAt:s},skip:e,take:r})}async findById(e){return await this.prisma.news.findUnique({where:{id:e},omit:{authorId:!0},include:{author:!0}})}async findByAuthorId({authorId:e,pagination:{offset:r,limit:t},filter:{orderBy:i="desc",content:n,title:s}}){let m={authorId:e},c=[];return s&&c.push({title:{contains:s,mode:"insensitive"}}),n&&c.push({content:{contains:n,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.news.findMany({omit:{authorId:!0},where:m,orderBy:{updatedAt:i},skip:r,take:t})}async update(e){await this.prisma.news.update({where:{id:e.id},data:{title:e.title,content:e.content,imageUrl:e.imageUrl}})}async delete(e){await this.prisma.news.delete({where:{id:e}})}async count({filter:{authorId:e,content:r,title:t}}){let i={};e&&(i.authorId={contains:e,mode:"insensitive"});let n=[];return t&&n.push({title:{contains:t,mode:"insensitive"}}),r&&n.push({content:{contains:r,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.news.count({where:i})}};function Me(){return new Wi(N)}var Hi=class{constructor(e){this.prisma=e}async create(e){await this.prisma.pendency.create({data:e})}async find({filter:{description:e,orderBy:r,title:t,status:i,userId:n},pagination:{limit:s,offset:m}}){let c={userId:n,AND:{status:{equals:i}}};e&&(c.description={contains:e,mode:"insensitive"});let u=[];return t&&u.push({title:{contains:t,mode:"insensitive"}}),u.length>0&&(c.OR=u),await this.prisma.pendency.findMany({where:c,orderBy:{updatedAt:r},include:{user:{omit:{passwordHash:!0}}},skip:m,take:s})}async findById(e){return await this.prisma.pendency.findFirst({where:{id:e},include:{user:{omit:{passwordHash:!0}}}})}async findByUserId({filter:{description:e,orderBy:r,title:t,status:i},pagination:{limit:n,offset:s},userId:m}){let c={userId:m,AND:{status:{equals:i}}},u=[];return e&&u.push({description:{contains:e,mode:"insensitive"}}),t&&u.push({title:{contains:t,mode:"insensitive"}}),u.length>0&&(c.OR=u),await this.prisma.pendency.findMany({where:c,orderBy:{updatedAt:r},include:{user:{omit:{passwordHash:!0}}},skip:s,take:n})}async update({id:e,...r}){await this.prisma.pendency.update({where:{id:e},data:r})}async deleteById(e){await this.prisma.pendency.delete({where:{id:e}})}async count({filter:{description:e,title:r,status:t,userId:i}}){let n={userId:i},s=[];return e&&s.push({description:{contains:e,mode:"insensitive"}}),r&&s.push({title:{contains:r,mode:"insensitive"}}),t&&s.push({status:{equals:t}}),s.length>0&&(n.OR=s),await this.prisma.pendency.count({where:n})}};function $e(){return new Hi(N)}var zi=class{constructor(e){this.prisma=e}async create(e){await this.prisma.user.create({data:e})}async update(e){await this.prisma.user.update({where:{id:e.id},data:{lattesUrl:e.lattesUrl??null,orcid:e.orcid??null,phone:e.phone??null,avatarUrl:e.avatarUrl??null}})}async deleteById(e){await this.prisma.user.delete({where:{id:e}})}async find(){return await this.prisma.user.findMany({omit:{passwordHash:!0}})}async findByEmail(e){return await this.prisma.user.findFirst({where:{emailAddress:e}})}async findById(e){return await this.prisma.user.findFirst({where:{id:e},omit:{passwordHash:!0}})}};function se(){return new zi(N)}import{compare as rI,hash as oI}from"bcryptjs";var Zi=class{constructor(e,r){this.hashFn=e;this.compareFn=r}async hash(e){return await this.hashFn(e,6)}async compare({password:e,hashedPassword:r}){return await this.compareFn(e,r)}};function Im(){return new Zi(oI,rI)}import Kd from"jsonwebtoken";import ae from"zod";var iI=ae.object({JWT_SECRET:ae.string(),FIREBASE_BUCKET:ae.string(),FIREBASE_CLIENT_EMAIL:ae.string(),FIREBASE_PRIVATE_KEY:ae.string(),FIREBASE_PROJECT_ID:ae.string(),FIREBASE_TYPE:ae.string(),FIREBASE_PRIVATE_KEY_ID:ae.string(),FIREBASE_CLIENT_ID:ae.string(),FIREBASE_AUTH_URI:ae.string(),FIREBASE_TOKEN_URI:ae.string(),FIREBASE_AUTH_PROVIDER_X509_CERT_URL:ae.string(),FIREBASE_CLIENT_X509_CERT_URL:ae.string()}),te=iI.parse(process.env);var Vi=class{constructor(e,r){this.signFn=e;this.verifyFn=r}sign(e){try{return this.signFn(e,te.JWT_SECRET,{expiresIn:"3d",subject:e.id})}catch{return null}}verify(e){try{return this.verifyFn(e,te.JWT_SECRET)}catch{return null}}};function Ki(){return new Vi(Kd.sign,Kd.verify)}function Yd(){return{signUpController:new br(se(),Im())}}function Xd(){return{signInController:new Ir(se(),Im(),Ki())}}function $d(){return{findAuthenticatedUserController:new Li(se())}}function Jd(){return{findAuthenticatedUserController:new fr(Me())}}function Qd(){return{findAuthenticatedUserCertificationsController:new yr(Xe())}}function el(){return{findAuthenticatedUserPendenciesController:new hr($e())}}var Yi=class{constructor(e){this.jwtService=e}authenticated(e,r,t){let i=e.headers.authorization;if(!i?.startsWith("Bearer "))return r.status(401).json({message:"Token inv\xE1lido.",invalid:!0});let n=i.split(" ")[1];if(!n)return r.status(401).json({message:"Token n\xE3o fornecido."});try{let s=this.jwtService.verify(n);if(!s)return r.status(401).json({message:"Token inv\xE1lido.",invalid:!0});e.user=s,t()}catch(s){if(console.log(s),s instanceof Error)return r.status(401).json({message:s.message})}}isAdmin(e,r,t){let i=e.headers.authorization;if(!i?.startsWith("Bearer "))return r.status(401).json({message:"Token inv\xE1lido.",invalid:!0});let n=i.split(" ")[1];if(!n)return r.status(401).json({message:"Token n\xE3o fornecido."});try{let s=this.jwtService.verify(n);if(!s)return r.status(401).json({message:"Token inv\xE1lido.",invalid:!0});if(s.role!=="ADMIN")return r.status(401).json({message:"\xC9 necess\xE1rio ter permiss\xF5es de administrador."});e.user=s,t()}catch(s){if(console.log(s),s instanceof Error)return r.status(401).json({message:s.message})}}};function H(){return{authMiddleware:new Yi(Ki())}}var Te=nI(),{authMiddleware:nr}=H();Te.post("/sign-up",async(o,e)=>{let{signUpController:r}=Yd();await r.handle(o,e)});Te.post("/sign-in",async(o,e)=>{let{signInController:r}=Xd();await r.handle(o,e)});Te.get("/user",(o,e,r)=>{nr.authenticated(o,e,r)},async(o,e)=>{let{findAuthenticatedUserController:r}=$d();await r.handle(o,e)});Te.get("/user/news",(o,e,r)=>{nr.authenticated(o,e,r)},async(o,e)=>{let{findAuthenticatedUserController:r}=Jd();await r.handle(o,e)});Te.get("/admin",(o,e,r)=>{nr.isAdmin(o,e,r)},(o,e)=>{try{e.status(200).json({success:!0})}catch(r){r instanceof Error&&e.status(500).json({message:r.message})}});Te.get("/certifications",(o,e,r)=>{nr.authenticated(o,e,r)},async(o,e)=>{let{findAuthenticatedUserCertificationsController:r}=Qd();await r.handle(o,e)});Te.get("/pendencies",(o,e,r)=>{nr.authenticated(o,e,r)},async(o,e)=>{let{findAuthenticatedUserPendenciesController:r}=el();await r.handle(o,e)});import{Router as dI}from"express";import{getStorage as aI}from"firebase-admin/storage";import{config as sI}from"dotenv";import tl from"firebase-admin";sI();var Cm=tl.initializeApp({credential:tl.credential.cert({clientEmail:te.FIREBASE_CLIENT_EMAIL,privateKey:te.FIREBASE_PRIVATE_KEY,projectId:te.FIREBASE_PROJECT_ID,type:te.FIREBASE_TYPE,privateKeyId:te.FIREBASE_PRIVATE_KEY_ID,clientId:te.FIREBASE_CLIENT_ID,authUri:te.FIREBASE_AUTH_URI,tokenUri:te.FIREBASE_TOKEN_URI,authProviderX509CertUrl:te.FIREBASE_AUTH_PROVIDER_X509_CERT_URL,clientX509CertUrl:te.FIREBASE_CLIENT_X509_CERT_URL}),storageBucket:te.FIREBASE_BUCKET});Cm.name?console.log("\u{1F525} Firebase conectado com sucesso!"):console.error("\u274C Erro ao se conectar ao Firebase.");var mI=aI(Cm),rl=mI.bucket(te.FIREBASE_BUCKET);import{randomUUID as cI}from"node:crypto";var pI=/https:\/\/storage\.googleapis\.com\/[^/]+\/(.+)$/,Xi=class{constructor(e){this.bucket=e}async uploadFile({file:e,folder:r,id:t}){let i=`${cI()}-${e?.originalname}`,n=this.bucket.file(`${r}/${t}/${i}`);return await new Promise((s,m)=>{let c=n.createWriteStream({metadata:{contentType:e?.mimetype}});c.on("error",u=>{m(u)}),c.on("finish",async()=>{try{await n.makePublic();let u=`https://storage.googleapis.com/${this.bucket.name}/${n.name}`;s(u)}catch(u){m(u)}}),c.end(e.buffer)})}async updateFile({file:e,id:r,fileUrl:t,folder:i}){try{let n=this.getPath(t);if(!n)throw new Error("Arquivo n\xE3o encontrado.");let[s,m]=await Promise.all([this.bucket.file(n).delete(),this.uploadFile({file:e,id:r,folder:i})]);return m}catch{throw new Error("Erro ao atualizar o arquivo.")}}async deleteFile({fileUrl:e}){let r=this.getPath(e);if(!r)throw new Error("Arquivo n\xE3o encontrado.");try{await this.bucket.file(r).delete()}catch{throw new Error("Erro ao deletar o arquivo.")}}getPath(e){let r=e.match(pI);return r?r[1]:null}};function B(){return new Xi(rl)}function ol(){return{registerCertificationController:new jr(se(),Xe(),B())}}function il(){return{findCertificationsController:new vr(Xe())}}function nl(){return{findCertificationByIdController:new Sr(Xe())}}function sl(){return{updateCertificationController:new xr(Xe(),B())}}function al(){return{deleteCertificationController:new wr(Xe(),B())}}import ml from"multer";var W=ml({storage:ml.memoryStorage()});var pt=dI(),{authMiddleware:sr}=H();pt.post("/:user_id",(o,e,r)=>{sr.isAdmin(o,e,r)},W.single("certification"),async(o,e)=>{let{registerCertificationController:r}=ol();await r.handle(o,e)});pt.get("/",(o,e,r)=>{sr.isAdmin(o,e,r)},async(o,e)=>{let{findCertificationsController:r}=il();await r.handle(o,e)});pt.get("/:certification_id",(o,e,r)=>{sr.isAdmin(o,e,r)},async(o,e)=>{let{findCertificationByIdController:r}=nl();await r.handle(o,e)});pt.put("/:certification_id",(o,e,r)=>{sr.isAdmin(o,e,r)},W.single("certification"),async(o,e)=>{let{updateCertificationController:r}=sl();await r.handle(o,e)});pt.delete("/:certification_id",(o,e,r)=>{sr.isAdmin(o,e,r)},async(o,e)=>{let{deleteCertificationController:r}=al();await r.handle(o,e)});import{Router as hI}from"express";import{extendZodWithOpenApi as lI}from"@asteasolutions/zod-to-openapi";import me from"zod";var uI=5,cl=1024,gI=cl*cl,yI=uI*gI;lI(me);var fI=me.object({title:me.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),coordinatorId:me.string().uuid("Coordenador \xE9 obrigat\xF3rio."),email:me.email("E-mail deve ser v\xE1lido."),location:me.string().min(1,"Localiza\xE7\xE3o \xE9 obrigat\xF3ria."),scheduledAt:me.coerce.date(),registrationLink:me.url().optional(),description:me.string().optional(),instructorIds:me.transform(o=>typeof o=="string"?o.split(","):o).pipe(me.array(me.uuid())),image:me.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=yI,"A imagem deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.")}),$i=class{constructor(e,r){this.courseRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{title:t,coordinatorId:i,email:n,location:s,scheduledAt:m,registrationLink:c,description:u,instructorIds:j,image:q}=fI.parse({...e.body,image:e.file}),z=await this.courseRepository.create({title:t,coordinatorId:i,email:n,location:s,scheduledAt:m,registrationLink:c||void 0,description:u,instructorIds:j}),Y=await this.firebaseStorageService.uploadFile({file:q,folder:U.COURSE,id:z.id});return await this.courseRepository.update({id:z.id,imageUrl:Y}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Ji=class{constructor(e){this.prisma=e}async create({title:e,imageUrl:r,coordinatorId:t,email:i,instructorIds:n,scheduledAt:s,location:m,registrationLink:c,description:u}){return await this.prisma.course.create({data:{title:e,imageUrl:r,coordinatorId:t,email:i,scheduledAt:s,location:m,registrationLink:c,description:u,instructors:{connect:n?.map(j=>({id:j}))}}})}async find({pagination:{offset:e,limit:r},filter:{description:t,orderBy:i,title:n,coordinator:s}}){let m={},c=[];return n&&c.push({title:{contains:n,mode:"insensitive"}}),t&&c.push({description:{contains:t,mode:"insensitive"}}),s&&c.push({coordinator:{name:{contains:s,mode:"insensitive"}}}),c.length>0&&(m.OR=c),await this.prisma.course.findMany({where:m,include:{coordinator:{omit:{passwordHash:!0}},instructors:{omit:{passwordHash:!0}}},orderBy:{updatedAt:i},skip:e,take:r})}async findById(e){return await this.prisma.course.findFirst({where:{id:e},include:{coordinator:{omit:{passwordHash:!0}},instructors:{omit:{passwordHash:!0}}}})}async update({id:e,title:r,imageUrl:t,coordinatorId:i,email:n,instructorIds:s,scheduledAt:m,location:c,registrationLink:u,description:j}){s!==void 0&&await this.prisma.course.update({where:{id:e},data:{instructors:{set:[]}}}),await this.prisma.course.update({where:{id:e},data:{title:r,imageUrl:t,coordinatorId:i,email:n,scheduledAt:m,location:c,registrationLink:u,description:j,...s?.length>0&&{instructors:{connect:s.map(q=>({id:q}))}}}})}async deleteById(e){await this.prisma.course.delete({where:{id:e}})}async count({filter:{description:e,title:r,coordinator:t}}){let i={},n=[];return r&&n.push({title:{contains:r,mode:"insensitive"}}),e&&n.push({description:{contains:e,mode:"insensitive"}}),t&&n.push({coordinator:{name:{contains:t,mode:"insensitive"}}}),n.length>0&&(i.OR=n),await this.prisma.course.count({where:i})}};function Ut(){return new Ji(N)}function pl(){return{createCourseController:new $i(Ut(),B())}}function dl(){return{findCoursesController:new Ar(Ut())}}function ll(){return{findCourseByIdController:new Tr(Ut())}}function ul(){return{updateCourseController:new Dr(Ut(),B())}}function gl(){return{deleteCourseController:new Mr(Ut(),B())}}var dt=hI(),{authMiddleware:ar}=H();dt.post("/",(o,e,r)=>{ar.isAdmin(o,e,r)},W.single("image"),async(o,e)=>{let{createCourseController:r}=pl();await r.handle(o,e)});dt.get("/",(o,e,r)=>{ar.isAdmin(o,e,r)},async(o,e)=>{let{findCoursesController:r}=dl();await r.handle(o,e)});dt.get("/:id",(o,e,r)=>{ar.isAdmin(o,e,r)},async(o,e)=>{let{findCourseByIdController:r}=ll();await r.handle(o,e)});dt.put("/:id",(o,e,r)=>{ar.isAdmin(o,e,r)},W.single("image"),async(o,e)=>{let{updateCourseController:r}=ul();await r.handle(o,e)});dt.delete("/:id",(o,e,r)=>{ar.isAdmin(o,e,r)},async(o,e)=>{let{deleteCourseController:r}=gl();await r.handle(o,e)});import{Router as wI}from"express";import{extendZodWithOpenApi as RI}from"@asteasolutions/zod-to-openapi";import Ae from"zod";var II=1,CI=9;RI(Ae);var bI=Ae.object({page:Ae.coerce.number().min(1).default(II),limit:Ae.coerce.number().min(1).default(CI),code:Ae.string().optional(),title:Ae.string().optional(),description:Ae.string().optional(),notes:Ae.string().optional(),orderBy:Ae.enum(["asc","desc"]).default("desc")}),Qi=class{constructor(e){this.etpRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=bI.parse(e.query),s=i*t-i,[m,c]=await Promise.all([this.etpRepository.find({pagination:{offset:s,limit:i},filter:n}),this.etpRepository.count({filter:n})]),u=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:u,offset:s,limit:i,etps:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};var en=class{constructor(e){this.prisma=e}async create(e){let{leaderId:r,deputyLeaderId:t,secretaryId:i,memberIds:n,...s}=e;await this.prisma.$transaction(async m=>{let c=await m.eTP.create({data:s});await m.eTPLeader.create({data:{etpId:c.id,researcherId:r}}),await m.eTPDeputy.create({data:{etpId:c.id,researcherId:t}}),await m.eTPSecretary.create({data:{etpId:c.id,researcherId:i}}),await m.eTP.update({where:{id:c.id},data:{members:{connect:n.map(u=>({id:u}))}}})})}async update(e){let{leaderId:r,deputyLeaderId:t,secretaryId:i,memberIds:n,...s}=e;await this.prisma.$transaction(async m=>{await m.eTP.update({where:{id:e.id},data:s}),await this.updateLeader(m,e.id,r),await this.updateDeputyLeader(m,e.id,t),await this.updateSecretary(m,e.id,i),await this.updateMembers(m,e.id,n)})}async updateLeader(e,r,t){t!==void 0&&(await e.eTPLeader.deleteMany({where:{etpId:r}}),t&&await e.eTPLeader.create({data:{etpId:r,researcherId:t}}))}async updateDeputyLeader(e,r,t){t!==void 0&&(await e.eTPDeputy.deleteMany({where:{etpId:r}}),t&&await e.eTPDeputy.create({data:{etpId:r,researcherId:t}}))}async updateSecretary(e,r,t){t!==void 0&&(await e.eTPSecretary.deleteMany({where:{etpId:r}}),t&&await e.eTPSecretary.create({data:{etpId:r,researcherId:t}}))}async updateMembers(e,r,t){t!==void 0&&await e.eTP.update({where:{id:r},data:{members:{set:t.map(i=>({id:i}))}}})}async deleteById(e){await this.prisma.eTP.delete({where:{id:e}})}async find({pagination:{offset:e,limit:r},filter:{code:t,title:i,description:n,notes:s,orderBy:m}}){let c={},u=[];return t&&u.push({code:{contains:t,mode:"insensitive"}}),i&&u.push({title:{contains:i,mode:"insensitive"}}),n&&u.push({description:{contains:n,mode:"insensitive"}}),s&&u.push({notes:{contains:s,mode:"insensitive"}}),u.length>0&&(c.OR=u),await this.prisma.eTP.findMany({where:c,include:{leader:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},deputyLeader:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},secretary:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},members:{include:{user:{omit:{passwordHash:!0}}}}},orderBy:{updatedAt:m},skip:e,take:r})}async findById(e){return await this.prisma.eTP.findFirst({where:{id:e},include:{leader:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},deputyLeader:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},secretary:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},members:{include:{user:{omit:{passwordHash:!0}}}}}})}async findByCode(e){return await this.prisma.eTP.findFirst({where:{code:e},include:{leader:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},deputyLeader:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},secretary:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},members:{include:{user:{omit:{passwordHash:!0}}}}}})}async count({filter:{code:e,title:r,description:t,notes:i}}){let n={},s=[];return e&&s.push({code:{contains:e,mode:"insensitive"}}),r&&s.push({title:{contains:r,mode:"insensitive"}}),t&&s.push({description:{contains:t,mode:"insensitive"}}),i&&s.push({notes:{contains:i,mode:"insensitive"}}),s.length>0&&(n.OR=s),await this.prisma.eTP.count({where:n})}};function qt(){return new en(N)}function yl(){return{createETPController:new Fr(qt())}}function fl(){return{findETPsController:new Qi(qt())}}function hl(){return{findETPByIdController:new qr(qt())}}function Rl(){return{updateETPController:new Or(qt())}}function Il(){return{deleteETPController:new Ur(qt())}}var lt=wI(),{authMiddleware:bm}=H();lt.post("/",(o,e,r)=>{bm.authenticated(o,e,r)},async(o,e)=>{let{createETPController:r}=yl();await r.handle(o,e)});lt.get("/",async(o,e)=>{let{findETPsController:r}=fl();await r.handle(o,e)});lt.get("/:id",async(o,e)=>{let{findETPByIdController:r}=hl();await r.handle(o,e)});lt.put("/:id",(o,e,r)=>{bm.authenticated(o,e,r)},async(o,e)=>{let{updateETPController:r}=Rl();await r.handle(o,e)});lt.delete("/:id",(o,e,r)=>{bm.authenticated(o,e,r)},async(o,e)=>{let{deleteETPController:r}=Il();await r.handle(o,e)});import{Router as SI}from"express";var tn=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.inMemoriam.create({data:e})}async update(e){await this.prisma.inMemoriam.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.inMemoriam.delete({where:{id:e}})}async find({pagination:{offset:e,limit:r},filter:{name:t,biography:i,role:n,orderBy:s}}){let m={},c=[];return n&&(m.role=n),t&&c.push({name:{contains:t,mode:"insensitive"}}),i&&c.push({biography:{contains:i,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.inMemoriam.findMany({where:m,orderBy:{updatedAt:s},skip:e,take:r})}async findById(e){return await this.prisma.inMemoriam.findFirst({where:{id:e}})}async findByRole(e){return await this.prisma.inMemoriam.findMany({where:{role:e}})}async count({filter:{name:e,biography:r,role:t}}){let i={},n=[];return t&&(i.role=t),e&&n.push({name:{contains:e,mode:"insensitive"}}),r&&n.push({biography:{contains:r,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.inMemoriam.count({where:i})}};function ut(){return new tn(N)}function Cl(){return{createInMemoriamController:new kr(ut(),B())}}function bl(){return{findInMemoriamsController:new Hr(ut())}}function wl(){return{findInMemoriamByIdController:new Lr(ut())}}function Sl(){return{findInMemoriamByRoleController:new Wr(ut())}}function vl(){return{updateInMemoriamController:new zr(ut(),B())}}function jl(){return{deleteInMemoriamController:new Gr(ut(),B())}}var Je=SI(),{authMiddleware:wm}=H();Je.post("/",(o,e,r)=>{wm.authenticated(o,e,r)},W.single("photo"),async(o,e)=>{let{createInMemoriamController:r}=Cl();await r.handle(o,e)});Je.get("/",async(o,e)=>{let{findInMemoriamsController:r}=bl();await r.handle(o,e)});Je.get("/:id",async(o,e)=>{let{findInMemoriamByIdController:r}=wl();await r.handle(o,e)});Je.get("/role/:role",async(o,e)=>{let{findInMemoriamByRoleController:r}=Sl();await r.handle(o,e)});Je.put("/:id",(o,e,r)=>{wm.authenticated(o,e,r)},W.single("photo"),async(o,e)=>{let{updateInMemoriamController:r}=vl();await r.handle(o,e)});Je.delete("/:id",(o,e,r)=>{wm.authenticated(o,e,r)},async(o,e)=>{let{deleteInMemoriamController:r}=jl();await r.handle(o,e)});import{Router as vI}from"express";var Sm=vI();Sm.get("/",(o,e)=>{e.status(200).json({message:"Rede CT"})});import{Router as MI}from"express";var rn=class{constructor(e){this.prisma=e}async create(e){await this.prisma.internationalScientificCongress.create({data:e})}async update(e){await this.prisma.internationalScientificCongress.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.internationalScientificCongress.delete({where:{id:e}})}async find({pagination:{offset:e,limit:r},filter:{title:t,edition:i,location:n,orderBy:s}}){let m={},c=[];return i&&c.push({edition:{equals:i}}),t&&c.push({title:{contains:t,mode:"insensitive"}}),n&&c.push({location:{contains:n,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.internationalScientificCongress.findMany({where:m,include:{partners:!0,galleries:!0},orderBy:s?{startDate:s}:{startDate:"desc"},skip:e,take:r})}async findById(e){return await this.prisma.internationalScientificCongress.findFirst({where:{id:e},include:{partners:!0,galleries:!0}})}async findByEdition(e){return await this.prisma.internationalScientificCongress.findMany({where:{edition:e},include:{partners:!0,galleries:!0}})}async count({filter:{title:e,edition:r,location:t}}){let i={},n=[];return r&&n.push({edition:{equals:r}}),e&&n.push({title:{contains:e,mode:"insensitive"}}),t&&n.push({location:{contains:t,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.internationalScientificCongress.count({where:i})}};function Re(){return new rn(N)}function El(){return{createInternationalScientificCongressController:new ro(Re())}}function xl(){return{findInternationalScientificCongressesController:new ao(Re())}}function Pl(){return{findInternationalScientificCongressByIdController:new no(Re())}}function Ml(){return{findInternationalScientificCongressByEditionController:new io(Re())}}function Tl(){return{updateInternationalScientificCongressController:new mo(Re())}}function Al(){return{deleteInternationalScientificCongressController:new oo(Re())}}import{extendZodWithOpenApi as jI}from"@asteasolutions/zod-to-openapi";import vm from"zod";jI(vm);var EI=vm.object({id:vm.uuid()}),on=class{constructor(e){this.internationalScientificCongressGalleryRepository=e}async handle(e,r){try{let{id:t}=EI.parse({id:e.params.id}),i=await this.internationalScientificCongressGalleryRepository.findById(t);if(!i)throw new p("A imagem da galeria n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var nn=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.internationalScientificCongressGalleryItem.create({data:e})}async update(e){await this.prisma.internationalScientificCongressGalleryItem.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.internationalScientificCongressGalleryItem.delete({where:{id:e}})}async findByCongressId(e){let{pagination:r,filter:t}=e;return await this.prisma.internationalScientificCongressGalleryItem.findMany({where:{congressId:t.congressId,...t.caption&&{caption:{contains:t.caption,mode:"insensitive"}}},skip:r.offset,take:r.limit})}async findById(e){return await this.prisma.internationalScientificCongressGalleryItem.findFirst({where:{id:e}})}async count(e){let{filter:r}=e;return await this.prisma.internationalScientificCongressGalleryItem.count({where:{congressId:r.congressId,...r.caption&&{caption:{contains:r.caption,mode:"insensitive"}}}})}};function Bt(){return new nn(N)}function Dl(){return{createInternationalScientificCongressGalleryController:new Zr(Bt(),Re(),B())}}function Fl(){return{findInternationalScientificCongressGalleriesByCongressIdController:new Yr(Bt())}}function Ul(){return{findInternationalScientificCongressGalleryByIdController:new on(Bt())}}function ql(){return{updateInternationalScientificCongressGalleryController:new Xr(Bt(),B())}}function Bl(){return{deleteInternationalScientificCongressGalleryController:new Vr(Bt())}}import{extendZodWithOpenApi as xI}from"@asteasolutions/zod-to-openapi";import jm from"zod";xI(jm);var PI=jm.object({id:jm.uuid()}),sn=class{constructor(e){this.internationalScientificCongressPartnerRepository=e}async handle(e,r){try{let{id:t}=PI.parse({id:e.params.id}),i=await this.internationalScientificCongressPartnerRepository.findById(t);if(!i)throw new p("O parceiro n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var an=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.internationalScientificCongressPartner.create({data:e})}async update(e){await this.prisma.internationalScientificCongressPartner.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.internationalScientificCongressPartner.delete({where:{id:e}})}async findByCongressId(e){return await this.prisma.internationalScientificCongressPartner.findMany({where:{congressId:e.filter.congressId,name:e.filter.name?{contains:e.filter.name,mode:"insensitive"}:void 0},skip:e.pagination?.offset,take:e.pagination?.limit})}async findById(e){return await this.prisma.internationalScientificCongressPartner.findFirst({where:{id:e}})}async count(e){return await this.prisma.internationalScientificCongressPartner.count({where:{congressId:e.filter.congressId,name:e.filter.name?{contains:e.filter.name,mode:"insensitive"}:void 0}})}};function Ot(){return new an(N)}function Ol(){return{createInternationalScientificCongressPartnerController:new $r(Ot(),Re(),B())}}function Nl(){return{findInternationalScientificCongressPartnersByCongressIdController:new eo(Ot())}}function kl(){return{findInternationalScientificCongressPartnerByIdController:new sn(Ot())}}function Gl(){return{updateInternationalScientificCongressPartnerController:new to(Ot(),B())}}function Ll(){return{deleteInternationalScientificCongressPartnerController:new Jr(Ot())}}var Q=MI(),{authMiddleware:De}=H();Q.post("/",(o,e,r)=>{De.authenticated(o,e,r)},async(o,e)=>{let{createInternationalScientificCongressController:r}=El();await r.handle(o,e)});Q.get("/",async(o,e)=>{let{findInternationalScientificCongressesController:r}=xl();await r.handle(o,e)});Q.get("/:id",async(o,e)=>{let{findInternationalScientificCongressByIdController:r}=Pl();await r.handle(o,e)});Q.get("/edition/:edition",async(o,e)=>{let{findInternationalScientificCongressByEditionController:r}=Ml();await r.handle(o,e)});Q.put("/:id",(o,e,r)=>{De.authenticated(o,e,r)},async(o,e)=>{let{updateInternationalScientificCongressController:r}=Tl();await r.handle(o,e)});Q.delete("/:id",(o,e,r)=>{De.authenticated(o,e,r)},async(o,e)=>{let{deleteInternationalScientificCongressController:r}=Al();await r.handle(o,e)});Q.post("/:congressId/gallery",(o,e,r)=>{De.authenticated(o,e,r)},W.single("image"),async(o,e)=>{let{createInternationalScientificCongressGalleryController:r}=Dl();await r.handle(o,e)});Q.get("/:congressId/gallery",async(o,e)=>{let{findInternationalScientificCongressGalleriesByCongressIdController:r}=Fl();await r.handle(o,e)});Q.get("/gallery/:id",async(o,e)=>{let{findInternationalScientificCongressGalleryByIdController:r}=Ul();await r.handle(o,e)});Q.put("/gallery/:id",(o,e,r)=>{De.authenticated(o,e,r)},W.single("image"),async(o,e)=>{let{updateInternationalScientificCongressGalleryController:r}=ql();await r.handle(o,e)});Q.delete("/gallery/:id",(o,e,r)=>{De.authenticated(o,e,r)},async(o,e)=>{let{deleteInternationalScientificCongressGalleryController:r}=Bl();await r.handle(o,e)});Q.post("/:congressId/partner",(o,e,r)=>{De.authenticated(o,e,r)},W.single("logo"),async(o,e)=>{let{createInternationalScientificCongressPartnerController:r}=Ol();await r.handle(o,e)});Q.get("/:congressId/partner",async(o,e)=>{let{findInternationalScientificCongressPartnersByCongressIdController:r}=Nl();await r.handle(o,e)});Q.get("/partner/:id",async(o,e)=>{let{findInternationalScientificCongressPartnerByIdController:r}=kl();await r.handle(o,e)});Q.put("/partner/:id",(o,e,r)=>{De.authenticated(o,e,r)},W.single("logo"),async(o,e)=>{let{updateInternationalScientificCongressPartnerController:r}=Gl();await r.handle(o,e)});Q.delete("/partner/:id",(o,e,r)=>{De.authenticated(o,e,r)},async(o,e)=>{let{deleteInternationalScientificCongressPartnerController:r}=Ll();await r.handle(o,e)});import{Router as DI}from"express";import{extendZodWithOpenApi as TI}from"@asteasolutions/zod-to-openapi";import mn from"zod";TI(mn);var AI=mn.object({role:mn.string().optional(),orderBy:mn.enum(["asc","desc"]).optional()}),cn=class{constructor(e){this.legitimatorCommitteeMemberRepository=e}async handle(e,r){try{let t=AI.parse(e.query),i=await this.legitimatorCommitteeMemberRepository.find({filter:t});r.status(200).json({members:i})}catch(t){if(t instanceof Error)throw new a(t.message)}}};var pn=class{constructor(e){this.prisma=e}async create(e){await this.prisma.legitimatorCommitteeMember.create({data:{...e,order:e.order??0}})}async update(e){let{id:r,...t}=e;await this.prisma.legitimatorCommitteeMember.update({where:{id:r},data:t})}async deleteById(e){await this.prisma.legitimatorCommitteeMember.delete({where:{id:e}})}async find({filter:{role:e,orderBy:r}}){let t={};return e&&(t.role={contains:e,mode:"insensitive"}),await this.prisma.legitimatorCommitteeMember.findMany({where:t,include:{user:{omit:{passwordHash:!0}}},orderBy:r?[{order:"asc"},{updatedAt:r}]:[{order:"asc"},{updatedAt:"desc"}]})}async findById(e){return await this.prisma.legitimatorCommitteeMember.findFirst({where:{id:e},include:{user:{omit:{passwordHash:!0}}}})}async count({filter:{role:e}}){let r={};return e&&(r.role={contains:e,mode:"insensitive"}),await this.prisma.legitimatorCommitteeMember.count({where:r})}};function Nt(){return new pn(N)}function _l(){return{createLegitimatorCommitteeMemberController:new co(Nt())}}function Wl(){return{findLegitimatorCommitteeMembersController:new cn(Nt())}}function Hl(){return{findLegitimatorCommitteeMemberByIdController:new lo(Nt())}}function zl(){return{updateLegitimatorCommitteeMemberController:new go(Nt())}}function Zl(){return{deleteLegitimatorCommitteeMemberController:new po(Nt())}}var gt=DI(),{authMiddleware:Em}=H();gt.post("/",(o,e,r)=>{Em.authenticated(o,e,r)},async(o,e)=>{let{createLegitimatorCommitteeMemberController:r}=_l();await r.handle(o,e)});gt.get("/",async(o,e)=>{let{findLegitimatorCommitteeMembersController:r}=Wl();await r.handle(o,e)});gt.get("/:id",async(o,e)=>{let{findLegitimatorCommitteeMemberByIdController:r}=Hl();await r.handle(o,e)});gt.put("/:id",(o,e,r)=>{Em.authenticated(o,e,r)},async(o,e)=>{let{updateLegitimatorCommitteeMemberController:r}=zl();await r.handle(o,e)});gt.delete("/:id",(o,e,r)=>{Em.authenticated(o,e,r)},async(o,e)=>{let{deleteLegitimatorCommitteeMemberController:r}=Zl();await r.handle(o,e)});import{Router as qI}from"express";import{extendZodWithOpenApi as FI}from"@asteasolutions/zod-to-openapi";import mr from"zod";FI(mr);var UI=mr.object({name:mr.string().optional(),description:mr.string().optional(),orderBy:mr.enum(["asc","desc"]).default("desc")}),dn=class{constructor(e){this.managementTeamRepository=e}async handle(e,r){try{let t=UI.parse(e.query),i=await this.managementTeamRepository.find({filter:t});r.status(200).json({teams:i})}catch(t){if(t instanceof Error)throw new a(t.message)}}};var ln=class{constructor(e){this.prisma=e}async create(e){let{members:r,...t}=e;await this.prisma.$transaction(async i=>{let n=await i.managementTeam.create({data:t});return await i.managementTeamMember.createMany({data:r.map(({userId:s,role:m,order:c})=>({teamId:n.id,userId:s,role:m,order:c??0}))}),n})}async update(e){let{members:r,...t}=e;await this.prisma.$transaction(async i=>{let n=await i.managementTeam.update({where:{id:e.id},data:t});return r!==void 0&&(await i.managementTeamMember.deleteMany({where:{teamId:e.id}}),r.length>0&&await i.managementTeamMember.createMany({data:r.map(({userId:s,role:m,order:c})=>({teamId:e.id,userId:s,role:m,order:c??0}))})),n})}async deleteById(e){await this.prisma.managementTeam.delete({where:{id:e}})}async find({filter:{name:e,description:r,orderBy:t}}){let i={},n=[];return e&&n.push({name:{contains:e,mode:"insensitive"}}),r&&n.push({description:{contains:r,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.managementTeam.findMany({where:i,include:{members:{include:{user:{omit:{passwordHash:!0}}},orderBy:{order:"asc"}}},orderBy:{updatedAt:t}})}async findById(e){return await this.prisma.managementTeam.findFirst({where:{id:e},include:{members:{include:{user:{omit:{passwordHash:!0}}},orderBy:{order:"asc"}}}})}async findByName(e){return await this.prisma.managementTeam.findFirst({where:{name:e},include:{members:{include:{user:{omit:{passwordHash:!0}}},orderBy:{order:"asc"}}}})}async count({filter:{name:e,description:r}}){let t={},i=[];return e&&i.push({name:{contains:e,mode:"insensitive"}}),r&&i.push({description:{contains:r,mode:"insensitive"}}),i.length>0&&(t.OR=i),await this.prisma.managementTeam.count({where:t})}};function kt(){return new ln(N)}function Vl(){return{createManagementTeamController:new yo(kt())}}function Kl(){return{findManagementTeamsController:new dn(kt())}}function Yl(){return{findManagementTeamByIdController:new ho(kt())}}function Xl(){return{updateManagementTeamController:new Io(kt())}}function $l(){return{deleteManagementTeamController:new fo(kt())}}var yt=qI(),{authMiddleware:xm}=H();yt.post("/",(o,e,r)=>{xm.authenticated(o,e,r)},async(o,e)=>{let{createManagementTeamController:r}=Vl();await r.handle(o,e)});yt.get("/",async(o,e)=>{let{findManagementTeamsController:r}=Kl();await r.handle(o,e)});yt.get("/:id",async(o,e)=>{let{findManagementTeamByIdController:r}=Yl();await r.handle(o,e)});yt.put("/:id",(o,e,r)=>{xm.authenticated(o,e,r)},async(o,e)=>{let{updateManagementTeamController:r}=Xl();await r.handle(o,e)});yt.delete("/:id",(o,e,r)=>{xm.authenticated(o,e,r)},async(o,e)=>{let{deleteManagementTeamController:r}=$l();await r.handle(o,e)});import{Router as NI}from"express";var un=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.meeting.create({data:e})}async update(e){await this.prisma.meeting.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.meeting.delete({where:{id:e}})}async find({pagination:{offset:e,limit:r},filter:{title:t,format:i,status:n,orderBy:s}}){let m={},c=[];return i&&(m.format=i),n&&(m.status=n),t&&c.push({title:{contains:t,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.meeting.findMany({where:m,include:{minutes:!0},orderBy:s?{scheduledAt:s}:{scheduledAt:"desc"},skip:e,take:r})}async findById(e){return await this.prisma.meeting.findFirst({where:{id:e},include:{minutes:!0}})}async findByStatus(e){return await this.prisma.meeting.findMany({where:{status:e},include:{minutes:!0}})}async count({filter:{title:e,format:r,status:t}}){let i={},n=[];return r&&(i.format=r),t&&(i.status=t),e&&n.push({title:{contains:e,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.meeting.count({where:i})}};function Fe(){return new un(N)}function Jl(){return{createMeetingController:new vo(Fe())}}function Ql(){return{findMeetingsController:new Mo(Fe())}}function eu(){return{findMeetingByIdController:new Eo(Fe())}}function tu(){return{findMeetingByStatusController:new Po(Fe())}}function ru(){return{updateMeetingController:new To(Fe())}}function ou(){return{deleteMeetingController:new jo(Fe())}}import{extendZodWithOpenApi as BI}from"@asteasolutions/zod-to-openapi";import Pm from"zod";BI(Pm);var OI=Pm.object({meetingId:Pm.uuid()}),gn=class{constructor(e,r){this.meetingMinuteRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{meetingId:t}=OI.parse({meetingId:e.params.meetingId}),i=await this.meetingMinuteRepository.findByMeetingId(t);if(!i)throw new p("A ata n\xE3o existe para esta reuni\xE3o.");return i.documentUrl&&await this.firebaseStorageService.deleteFile({fileUrl:i.documentUrl}),await this.meetingMinuteRepository.deleteByMeetingId(i.id),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var yn=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.meetingMinute.create({data:e,include:{meeting:!0}})}async update(e){await this.prisma.meetingMinute.update({where:{id:e.id},data:e})}async deleteByMeetingId(e){await this.prisma.meetingMinute.delete({where:{id:e}})}async findByMeetingId(e){return await this.prisma.meetingMinute.findFirst({where:{meetingId:e},include:{meeting:!0}})}};function cr(){return new yn(N)}function iu(){return{createMeetingMinuteController:new Co(cr(),Fe(),B())}}function nu(){return{findMeetingMinuteByMeetingIdController:new bo(cr())}}function su(){return{updateMeetingMinuteByMeetingIdController:new wo(cr(),B())}}function au(){return{deleteMeetingMinuteByMeetingIdController:new gn(cr(),B())}}var ue=NI(),{authMiddleware:Gt}=H();ue.post("/",(o,e,r)=>{Gt.authenticated(o,e,r)},async(o,e)=>{let{createMeetingController:r}=Jl();await r.handle(o,e)});ue.get("/",async(o,e)=>{let{findMeetingsController:r}=Ql();await r.handle(o,e)});ue.get("/:id",async(o,e)=>{let{findMeetingByIdController:r}=eu();await r.handle(o,e)});ue.get("/status/:status",async(o,e)=>{let{findMeetingByStatusController:r}=tu();await r.handle(o,e)});ue.put("/:id",(o,e,r)=>{Gt.authenticated(o,e,r)},async(o,e)=>{let{updateMeetingController:r}=ru();await r.handle(o,e)});ue.delete("/:id",(o,e,r)=>{Gt.authenticated(o,e,r)},async(o,e)=>{let{deleteMeetingController:r}=ou();await r.handle(o,e)});ue.post("/:meetingId/minute",(o,e,r)=>{Gt.authenticated(o,e,r)},W.single("document"),async(o,e)=>{let{createMeetingMinuteController:r}=iu();await r.handle(o,e)});ue.get("/:meetingId/minute",async(o,e)=>{let{findMeetingMinuteByMeetingIdController:r}=nu();await r.handle(o,e)});ue.put("/:meetingId/minute",(o,e,r)=>{Gt.authenticated(o,e,r)},W.single("document"),async(o,e)=>{let{updateMeetingMinuteByMeetingIdController:r}=su();await r.handle(o,e)});ue.delete("/:meetingId/minute",(o,e,r)=>{Gt.authenticated(o,e,r)},async(o,e)=>{let{deleteMeetingMinuteByMeetingIdController:r}=au();await r.handle(o,e)});import{Router as ZI}from"express";import{extendZodWithOpenApi as kI}from"@asteasolutions/zod-to-openapi";import Mm from"zod";kI(Mm);var GI=Mm.object({id:Mm.string()}),fn=class{constructor(e,r){this.newsRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=GI.parse(e.params),i=e.user.id,n=await this.newsRepository.findById(t);if(!n)throw new p("Not\xEDcia n\xE3o encontrada.");if(n.author.id!==i)throw new ce("Sem permiss\xE3o.");await Promise.all([this.newsRepository.delete(t),this.firebaseStorageService.deleteFile({fileUrl:n.imageUrl})]),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as LI}from"@asteasolutions/zod-to-openapi";import Lt from"zod";var _I=5,mu=1024,WI=mu*mu,HI=_I*WI;LI(Lt);var zI=Lt.object({id:Lt.string(),title:Lt.string().min(1),content:Lt.string().min(1),image:Lt.any().optional().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=HI,"A imagem deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.")}),hn=class{constructor(e,r){this.newsRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,title:i,content:n,image:s}=zI.parse({id:e.params.id,image:e.file,...e.body}),m=await this.newsRepository.findById(t);if(!m)throw new p("Not\xEDcia n\xE3o encontrada.");let c=e.user.id;if(m.author.id!==c)throw new ce("Sem permiss\xE3o.");let u=m.imageUrl||"";s&&m.imageUrl&&(u=await this.firebaseStorageService.updateFile({file:s,folder:U.NEWS,id:t,fileUrl:m.imageUrl}));let j=await this.newsRepository.update({id:t,title:i,content:n,imageUrl:u});r.status(200).json(j)}catch(t){if(t instanceof Error)throw new a(t.message)}}};function cu(){return{createNewsController:new Ao(Me(),B())}}function pu(){return{findAllNewsController:new qo(Me())}}function du(){return{findNewsByIdController:new Uo(Me())}}function lu(){return{findNewsByAuthorIdController:new Do(Me())}}function uu(){return{updateNewsController:new hn(Me(),B())}}function gu(){return{deleteNewsController:new fn(Me(),B())}}var Qe=ZI(),{authMiddleware:Tm}=H();Qe.post("/",(o,e,r)=>{Tm.authenticated(o,e,r)},W.single("image"),async(o,e)=>{let{createNewsController:r}=cu();await r.handle(o,e)});Qe.get("/",async(o,e)=>{let{findAllNewsController:r}=pu();await r.handle(o,e)});Qe.get("/:id",async(o,e)=>{let{findNewsByIdController:r}=du();await r.handle(o,e)});Qe.get("/author/:authorId",async(o,e)=>{let{findNewsByAuthorIdController:r}=lu();await r.handle(o,e)});Qe.put("/:id",(o,e,r)=>{Tm.authenticated(o,e,r)},W.single("image"),async(o,e)=>{let{updateNewsController:r}=uu();await r.handle(o,e)});Qe.delete("/:id",(o,e,r)=>{Tm.authenticated(o,e,r)},async(o,e)=>{let{deleteNewsController:r}=gu();await r.handle(o,e)});import{Router as VI}from"express";var Rn=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.partner.create({data:e})}async update(e){await this.prisma.partner.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.partner.delete({where:{id:e}})}async find({pagination:e,filter:{name:r,description:t,category:i,isActive:n,orderBy:s}}){let m={},c=[];return n!==void 0&&(m.isActive=n),r&&c.push({name:{contains:r,mode:"insensitive"}}),t&&c.push({description:{contains:t,mode:"insensitive"}}),i&&c.push({category:{contains:i,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.partner.findMany({where:m,orderBy:s?{updatedAt:s}:{updatedAt:"desc"},...e&&{skip:e.offset,take:e.limit}})}async findById(e){return await this.prisma.partner.findFirst({where:{id:e}})}async count({filter:{name:e,description:r,category:t,isActive:i}}){let n={},s=[];return i!==void 0&&(n.isActive=i),e&&s.push({name:{contains:e,mode:"insensitive"}}),r&&s.push({description:{contains:r,mode:"insensitive"}}),t&&s.push({category:{contains:t,mode:"insensitive"}}),s.length>0&&(n.OR=s),await this.prisma.partner.count({where:n})}};function _t(){return new Rn(N)}function yu(){return{createPartnerController:new Bo(_t(),B())}}function fu(){return{findPartnersController:new Go(_t())}}function hu(){return{findPartnerByIdController:new No(_t())}}function Ru(){return{updatePartnerController:new Lo(_t(),B())}}function Iu(){return{deletePartnerController:new Oo(_t(),B())}}var ft=VI(),{authMiddleware:Am}=H();ft.post("/",(o,e,r)=>{Am.authenticated(o,e,r)},W.single("logo"),async(o,e)=>{let{createPartnerController:r}=yu();await r.handle(o,e)});ft.get("/",async(o,e)=>{let{findPartnersController:r}=fu();await r.handle(o,e)});ft.get("/:id",async(o,e)=>{let{findPartnerByIdController:r}=hu();await r.handle(o,e)});ft.put("/:id",(o,e,r)=>{Am.authenticated(o,e,r)},W.single("logo"),async(o,e)=>{let{updatePartnerController:r}=Ru();await r.handle(o,e)});ft.delete("/:id",(o,e,r)=>{Am.authenticated(o,e,r)},async(o,e)=>{let{deletePartnerController:r}=Iu();await r.handle(o,e)});import{Router as KI}from"express";function Cu(){return{createPendencyController:new _o(se(),$e(),B())}}function bu(){return{findPendenciesController:new zo($e())}}function wu(){return{findPendencyByIdController:new Zo($e())}}function Su(){return{updatePendencyController:new Vo($e(),B())}}function vu(){return{deletePendencyController:new Ho($e(),B())}}var ht=KI(),{authMiddleware:pr}=H();ht.post("/:user_id",(o,e,r)=>{pr.isAdmin(o,e,r)},W.single("document"),async(o,e)=>{let{createPendencyController:r}=Cu();await r.handle(o,e)});ht.get("/",(o,e,r)=>{pr.isAdmin(o,e,r)},async(o,e)=>{let{findPendenciesController:r}=bu();await r.handle(o,e)});ht.get("/:pendency_id",(o,e,r)=>{pr.isAdmin(o,e,r)},async(o,e)=>{let{findPendencyByIdController:r}=wu();await r.handle(o,e)});ht.put("/:pendency_id",(o,e,r)=>{pr.isAdmin(o,e,r)},W.single("document"),async(o,e)=>{let{updatePendencyController:r}=Su();await r.handle(o,e)});ht.delete("/:pendency_id",(o,e,r)=>{pr.isAdmin(o,e,r)},async(o,e)=>{let{deletePendencyController:r}=vu();await r.handle(o,e)});import{Router as eC}from"express";import{extendZodWithOpenApi as YI}from"@asteasolutions/zod-to-openapi";import Ue from"zod";var XI=5,ju=1024,$I=ju*ju,JI=XI*$I;YI(Ue);var QI=Ue.object({title:Ue.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),description:Ue.string().optional(),startDate:Ue.coerce.date(),endDate:Ue.coerce.date(),contact:Ue.string().min(1,"Contato \xE9 obrigat\xF3rio."),registrationLink:Ue.url().optional(),image:Ue.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=JI,"A imagem deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.")}),In=class{constructor(e,r){this.postGraduateProgramRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{title:t,description:i,startDate:n,endDate:s,contact:m,registrationLink:c,image:u}=QI.parse({...e.body,image:e.file}),j=await this.postGraduateProgramRepository.create({title:t,description:i,startDate:n,endDate:s,contact:m,registrationLink:c||void 0}),q=await this.firebaseStorageService.uploadFile({file:u,folder:U.POST_GRADUATE_PROGRAM,id:j.id});return await this.postGraduateProgramRepository.update({id:j.id,imageUrl:q}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Cn=class{constructor(e){this.prisma=e}async create({title:e,imageUrl:r,description:t,startDate:i,endDate:n,contact:s,registrationLink:m}){return await this.prisma.postGraduateProgram.create({data:{title:e,imageUrl:r,description:t,startDate:i,endDate:n,contact:s,registrationLink:m}})}async find({pagination:{offset:e,limit:r},filter:{description:t,orderBy:i,title:n,contact:s}}){let m={},c=[];return n&&c.push({title:{contains:n,mode:"insensitive"}}),t&&c.push({description:{contains:t,mode:"insensitive"}}),s&&c.push({contact:{contains:s,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.postGraduateProgram.findMany({where:m,orderBy:{updatedAt:i},skip:e,take:r})}async findById(e){return await this.prisma.postGraduateProgram.findFirst({where:{id:e}})}async update({id:e,title:r,imageUrl:t,description:i,startDate:n,endDate:s,contact:m,registrationLink:c}){await this.prisma.postGraduateProgram.update({where:{id:e},data:{title:r,imageUrl:t,description:i,startDate:n,endDate:s,contact:m,registrationLink:c}})}async deleteById(e){await this.prisma.postGraduateProgram.delete({where:{id:e}})}async count({filter:{description:e,title:r,contact:t}}){let i={},n=[];return r&&n.push({title:{contains:r,mode:"insensitive"}}),e&&n.push({description:{contains:e,mode:"insensitive"}}),t&&n.push({contact:{contains:t,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.postGraduateProgram.count({where:i})}};function Wt(){return new Cn(N)}function Eu(){return{createPostGraduateProgramController:new In(Wt(),B())}}function xu(){return{findPostGraduateProgramsController:new $o(Wt())}}function Pu(){return{findPostGraduateProgramByIdController:new Xo(Wt())}}function Mu(){return{updatePostGraduateProgramController:new Jo(Wt(),B())}}function Tu(){return{deletePostGraduateProgramController:new Yo(Wt(),B())}}var Rt=eC(),{authMiddleware:dr}=H();Rt.post("/",(o,e,r)=>{dr.isAdmin(o,e,r)},W.single("image"),async(o,e)=>{let{createPostGraduateProgramController:r}=Eu();await r.handle(o,e)});Rt.get("/",(o,e,r)=>{dr.isAdmin(o,e,r)},async(o,e)=>{let{findPostGraduateProgramsController:r}=xu();await r.handle(o,e)});Rt.get("/:id",(o,e,r)=>{dr.isAdmin(o,e,r)},async(o,e)=>{let{findPostGraduateProgramByIdController:r}=Pu();await r.handle(o,e)});Rt.put("/:id",(o,e,r)=>{dr.isAdmin(o,e,r)},W.single("image"),async(o,e)=>{let{updatePostGraduateProgramController:r}=Mu();await r.handle(o,e)});Rt.delete("/:id",(o,e,r)=>{dr.isAdmin(o,e,r)},async(o,e)=>{let{deletePostGraduateProgramController:r}=Tu();await r.handle(o,e)});import{Router as tC}from"express";var bn=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.regiment.create({data:e})}async update(e){await this.prisma.regiment.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.regiment.delete({where:{id:e}})}async find({pagination:{offset:e,limit:r},filter:{title:t,status:i,orderBy:n}}){let s={},m=[];return i&&(s.status=i),t&&m.push({title:{contains:t,mode:"insensitive"}}),m.length>0&&(s.OR=m),await this.prisma.regiment.findMany({where:s,orderBy:n?{updatedAt:n}:{updatedAt:"desc"},skip:e,take:r})}async findById(e){return await this.prisma.regiment.findFirst({where:{id:e}})}async findByStatus(e){return await this.prisma.regiment.findMany({where:{status:e}})}async count({filter:{title:e,status:r}}){let t={},i=[];return r&&(t.status=r),e&&i.push({title:{contains:e,mode:"insensitive"}}),i.length>0&&(t.OR=i),await this.prisma.regiment.count({where:t})}};function It(){return new bn(N)}function Au(){return{createRegimentController:new Qo(It(),B())}}function Du(){return{findRegimentsController:new ii(It())}}function Fu(){return{findRegimentByIdController:new ti(It())}}function Uu(){return{findRegimentByStatusController:new oi(It())}}function qu(){return{updateRegimentController:new ni(It(),B())}}function Bu(){return{deleteRegimentController:new ei(It(),B())}}var et=tC(),{authMiddleware:Dm}=H();et.post("/",(o,e,r)=>{Dm.authenticated(o,e,r)},W.single("document"),async(o,e)=>{let{createRegimentController:r}=Au();await r.handle(o,e)});et.get("/",async(o,e)=>{let{findRegimentsController:r}=Du();await r.handle(o,e)});et.get("/:id",async(o,e)=>{let{findRegimentByIdController:r}=Fu();await r.handle(o,e)});et.get("/status/:status",async(o,e)=>{let{findRegimentByStatusController:r}=Uu();await r.handle(o,e)});et.put("/:id",(o,e,r)=>{Dm.authenticated(o,e,r)},W.single("document"),async(o,e)=>{let{updateRegimentController:r}=qu();await r.handle(o,e)});et.delete("/:id",(o,e,r)=>{Dm.authenticated(o,e,r)},async(o,e)=>{let{deleteRegimentController:r}=Bu();await r.handle(o,e)});import{Router as sC}from"express";import{extendZodWithOpenApi as rC}from"@asteasolutions/zod-to-openapi";import Fm from"zod";rC(Fm);var oC=Fm.object({id:Fm.string().uuid("ID inv\xE1lido")}),wn=class{constructor(e){this.regionalCongressGalleryRepository=e}async handle(e,r){try{let{id:t}=oC.parse(e.params),i=await this.regionalCongressGalleryRepository.findById(t);if(!i)throw new p("Item de galeria n\xE3o encontrado");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Sn=class{constructor(e){this.prisma=e}async create(e){await this.prisma.regionalCongress.create({data:e})}async update(e){await this.prisma.regionalCongress.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.regionalCongress.delete({where:{id:e}})}async find({pagination:{offset:e,limit:r},filter:{title:t,edition:i,location:n,orderBy:s}}){let m={},c=[];return i&&c.push({edition:{equals:i}}),t&&c.push({title:{contains:t,mode:"insensitive"}}),n&&c.push({location:{contains:n,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.regionalCongress.findMany({where:m,include:{regionalCongressPartners:!0,regionalCongressGalleryItems:!0},orderBy:s?{startDate:s}:{startDate:"desc"},skip:e,take:r})}async findById(e){return await this.prisma.regionalCongress.findFirst({where:{id:e},include:{regionalCongressPartners:!0,regionalCongressGalleryItems:!0}})}async findByEdition(e){return await this.prisma.regionalCongress.findMany({where:{edition:e},include:{regionalCongressPartners:!0,regionalCongressGalleryItems:!0}})}async count({filter:{title:e,edition:r,location:t}}){let i={},n=[];return r&&n.push({edition:{equals:r}}),e&&n.push({title:{contains:e,mode:"insensitive"}}),t&&n.push({location:{contains:t,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.regionalCongress.count({where:i})}};function Ie(){return new Sn(N)}var vn=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.regionalCongressGalleryItem.create({data:e})}async update(e){await this.prisma.regionalCongressGalleryItem.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.regionalCongressGalleryItem.delete({where:{id:e}})}async findByCongressId({pagination:e,filter:r}){return await this.prisma.regionalCongressGalleryItem.findMany({where:{congressId:r.congressId,...r.caption&&{caption:{contains:r.caption,mode:"insensitive"}}},skip:e.offset,take:e.limit})}async findById(e){return await this.prisma.regionalCongressGalleryItem.findFirst({where:{id:e}})}async count({filter:e}){return await this.prisma.regionalCongressGalleryItem.count({where:{congressId:e.congressId,...e.caption&&{caption:{contains:e.caption,mode:"insensitive"}}}})}};function Ht(){return new vn(N)}function Ou(){return{createRegionalCongressGalleryController:new si(Ht(),Ie(),B())}}function Nu(){return{findRegionalCongressGalleriesByCongressIdController:new ci(Ht())}}function ku(){return{findRegionalCongressGalleryByIdController:new wn(Ht())}}function Gu(){return{updateRegionalCongressGalleryController:new pi(Ht(),B())}}function Lu(){return{deleteRegionalCongressGalleryController:new ai(Ht())}}import{extendZodWithOpenApi as iC}from"@asteasolutions/zod-to-openapi";import Um from"zod";iC(Um);var nC=Um.object({id:Um.string().uuid("ID inv\xE1lido")}),jn=class{constructor(e){this.regionalCongressPartnerRepository=e}async handle(e,r){try{let{id:t}=nC.parse(e.params),i=await this.regionalCongressPartnerRepository.findById(t);if(!i)throw new p("Parceiro n\xE3o encontrado");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var En=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.regionalCongressPartner.create({data:e})}async update(e){await this.prisma.regionalCongressPartner.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.regionalCongressPartner.delete({where:{id:e}})}async findByCongressId(e){return await this.prisma.regionalCongressPartner.findMany({where:{congressId:e.filter.congressId,name:e.filter.name?{contains:e.filter.name,mode:"insensitive"}:void 0},skip:e.pagination?.offset,take:e.pagination?.limit})}async findById(e){return await this.prisma.regionalCongressPartner.findFirst({where:{id:e}})}async count(e){return await this.prisma.regionalCongressPartner.count({where:{congressId:e.filter.congressId,name:e.filter.name?{contains:e.filter.name,mode:"insensitive"}:void 0}})}};function zt(){return new En(N)}function _u(){return{createRegionalCongressPartnerController:new di(zt(),Ie(),B())}}function Wu(){return{findRegionalCongressPartnersByCongressIdController:new gi(zt())}}function Hu(){return{findRegionalCongressPartnerByIdController:new jn(zt())}}function zu(){return{updateRegionalCongressPartnerController:new yi(zt(),B())}}function Zu(){return{deleteRegionalCongressPartnerController:new li(zt())}}function Vu(){return{createRegionalCongressController:new fi(Ie())}}function Ku(){return{findRegionalCongressesController:new bi(Ie())}}function Yu(){return{findRegionalCongressByIdController:new Ii(Ie())}}function Xu(){return{findRegionalCongressByEditionController:new Ri(Ie())}}function $u(){return{updateRegionalCongressController:new wi(Ie())}}function Ju(){return{deleteRegionalCongressController:new hi(Ie())}}var ee=sC(),{authMiddleware:qe}=H();ee.post("/",(o,e,r)=>{qe.authenticated(o,e,r)},async(o,e)=>{let{createRegionalCongressController:r}=Vu();await r.handle(o,e)});ee.get("/",async(o,e)=>{let{findRegionalCongressesController:r}=Ku();await r.handle(o,e)});ee.get("/:id",async(o,e)=>{let{findRegionalCongressByIdController:r}=Yu();await r.handle(o,e)});ee.get("/edition/:edition",async(o,e)=>{let{findRegionalCongressByEditionController:r}=Xu();await r.handle(o,e)});ee.put("/:id",(o,e,r)=>{qe.authenticated(o,e,r)},async(o,e)=>{let{updateRegionalCongressController:r}=$u();await r.handle(o,e)});ee.delete("/:id",(o,e,r)=>{qe.authenticated(o,e,r)},async(o,e)=>{let{deleteRegionalCongressController:r}=Ju();await r.handle(o,e)});ee.post("/:congressId/gallery",(o,e,r)=>{qe.authenticated(o,e,r)},W.single("image"),async(o,e)=>{let{createRegionalCongressGalleryController:r}=Ou();await r.handle(o,e)});ee.get("/:congressId/gallery",async(o,e)=>{let{findRegionalCongressGalleriesByCongressIdController:r}=Nu();await r.handle(o,e)});ee.get("/gallery/:id",async(o,e)=>{let{findRegionalCongressGalleryByIdController:r}=ku();await r.handle(o,e)});ee.put("/gallery/:id",(o,e,r)=>{qe.authenticated(o,e,r)},W.single("image"),async(o,e)=>{let{updateRegionalCongressGalleryController:r}=Gu();await r.handle(o,e)});ee.delete("/gallery/:id",(o,e,r)=>{qe.authenticated(o,e,r)},async(o,e)=>{let{deleteRegionalCongressGalleryController:r}=Lu();await r.handle(o,e)});ee.post("/:congressId/partner",(o,e,r)=>{qe.authenticated(o,e,r)},W.single("logo"),async(o,e)=>{let{createRegionalCongressPartnerController:r}=_u();await r.handle(o,e)});ee.get("/:congressId/partner",async(o,e)=>{let{findRegionalCongressPartnersByCongressIdController:r}=Wu();await r.handle(o,e)});ee.get("/partner/:id",async(o,e)=>{let{findRegionalCongressPartnerByIdController:r}=Hu();await r.handle(o,e)});ee.put("/partner/:id",(o,e,r)=>{qe.authenticated(o,e,r)},W.single("logo"),async(o,e)=>{let{updateRegionalCongressPartnerController:r}=zu();await r.handle(o,e)});ee.delete("/partner/:id",(o,e,r)=>{qe.authenticated(o,e,r)},async(o,e)=>{let{deleteRegionalCongressPartnerController:r}=Zu();await r.handle(o,e)});import{Router as dC}from"express";import{extendZodWithOpenApi as aC}from"@asteasolutions/zod-to-openapi";import ie from"zod";var mC=1,cC=9;aC(ie);var pC=ie.object({page:ie.coerce.number().min(1).default(mC),limit:ie.coerce.number().min(1).default(cC),userId:ie.string().optional(),registrationNumber:ie.string().optional(),name:ie.string().optional(),emailAddress:ie.string().optional(),mainEtps:ie.string().optional(),formations:ie.string().optional(),occupations:ie.string().optional(),institutions:ie.string().optional(),biography:ie.string().optional(),orderBy:ie.enum(["asc","desc"]).default("desc")}),xn=class{constructor(e){this.researcherRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=pC.parse(e.query),s=i*t-i,[m,c]=await Promise.all([this.researcherRepository.find({pagination:{offset:s,limit:i},filter:{userName:n.name,...n}}),this.researcherRepository.count({filter:{userName:n.name,...n}})]),u=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:u,offset:s,limit:i,researchers:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Pn=class{constructor(e){this.prisma=e}async create(e){await this.prisma.researcher.create({data:e})}async update(e){await this.prisma.researcher.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.researcher.delete({where:{id:e}})}async find({pagination:e,filter:{biography:r,degrees:t,formations:i,institutions:n,mainEtps:s,occupations:m,orderBy:c,registrationNumber:u,seniority:j,userId:q,userName:z}}){let Y={},ne=[];return z&&ne.push({user:{name:{contains:z,mode:"insensitive"}}}),u&&ne.push({registrationNumber:{contains:u,mode:"insensitive"}}),s&&ne.push({mainEtps:{contains:s,mode:"insensitive"}}),i&&ne.push({formations:{contains:i,mode:"insensitive"}}),m&&ne.push({occupations:{contains:m,mode:"insensitive"}}),n&&ne.push({institutions:{contains:n,mode:"insensitive"}}),r&&ne.push({biography:{contains:r,mode:"insensitive"}}),ne.length>0&&(Y.OR=ne),t&&t.length>0&&(Y.degrees={hasSome:t}),j&&(Y.seniority=j),q&&(Y.userId={equals:q}),await this.prisma.researcher.findMany({where:Y,omit:{userId:!0},include:{user:{omit:{passwordHash:!0}}},orderBy:{updatedAt:c},...e&&{skip:e.offset,take:e.limit}})}async findById(e){return await this.prisma.researcher.findFirst({where:{id:e},include:{user:{omit:{passwordHash:!0}}}})}async findByUserId(e){return await this.prisma.researcher.findFirst({where:{userId:e},include:{user:{omit:{passwordHash:!0}}}})}async findByRegistrationNumber(e){return await this.prisma.researcher.findFirst({where:{registrationNumber:e},include:{user:{omit:{passwordHash:!0}}}})}async count({filter:{biography:e,degrees:r,formations:t,institutions:i,mainEtps:n,occupations:s,registrationNumber:m,seniority:c,userId:u,userName:j}}){let q={},z=[];return j&&z.push({user:{name:{contains:j,mode:"insensitive"}}}),m&&z.push({registrationNumber:{contains:m,mode:"insensitive"}}),z.length>0&&(q.OR=z),n&&(q.mainEtps={contains:n,mode:"insensitive"}),t&&(q.formations={contains:t,mode:"insensitive"}),r&&r.length>0&&(q.degrees={hasSome:r}),s&&(q.occupations={contains:s,mode:"insensitive"}),c&&(q.seniority=c),i&&(q.institutions={contains:i,mode:"insensitive"}),e&&(q.biography={contains:e,mode:"insensitive"}),u&&(q.userId={equals:u}),await this.prisma.researcher.count({where:q})}};function Ct(){return new Pn(N)}function Qu(){return{createResearcherController:new Si(Ct())}}function eg(){return{findResearchersController:new xn(Ct())}}function tg(){return{findResearcherByIdController:new ji(Ct())}}function rg(){return{findResearcherByUserIdController:new xi(Ct())}}function og(){return{updateResearcherController:new Pi(Ct())}}function ig(){return{deleteResearcherController:new vi(Ct())}}var tt=dC(),{authMiddleware:qm}=H();tt.post("/",(o,e,r)=>{qm.authenticated(o,e,r)},async(o,e)=>{let{createResearcherController:r}=Qu();await r.handle(o,e)});tt.get("/",async(o,e)=>{let{findResearchersController:r}=eg();await r.handle(o,e)});tt.get("/:id",async(o,e)=>{let{findResearcherByIdController:r}=tg();await r.handle(o,e)});tt.get("/user/:userId",async(o,e)=>{let{findResearcherByUserIdController:r}=rg();await r.handle(o,e)});tt.put("/:id",(o,e,r)=>{qm.authenticated(o,e,r)},async(o,e)=>{let{updateResearcherController:r}=og();await r.handle(o,e)});tt.delete("/:id",(o,e,r)=>{qm.authenticated(o,e,r)},async(o,e)=>{let{deleteResearcherController:r}=ig();await r.handle(o,e)});import{Router as gC}from"express";import{extendZodWithOpenApi as lC}from"@asteasolutions/zod-to-openapi";import Mn from"zod";lC(Mn);var uC=Mn.object({role:Mn.string().optional(),orderBy:Mn.enum(["asc","desc"]).optional()}),Tn=class{constructor(e){this.sdhcTeamMemberRepository=e}async handle(e,r){try{let t=uC.parse(e.query),i=await this.sdhcTeamMemberRepository.find({filter:t});r.status(200).json({members:i})}catch(t){if(t instanceof Error)throw new a(t.message)}}};var An=class{constructor(e){this.prisma=e}async create(e){await this.prisma.sDHCTeamMember.create({data:{...e,order:e.order??0}})}async update(e){let{id:r,...t}=e;await this.prisma.sDHCTeamMember.update({where:{id:r},data:t})}async deleteById(e){await this.prisma.sDHCTeamMember.delete({where:{id:e}})}async find({filter:{role:e,orderBy:r}}){let t={};return e&&(t.role={contains:e,mode:"insensitive"}),await this.prisma.sDHCTeamMember.findMany({where:t,include:{user:{omit:{passwordHash:!0}}},orderBy:r?[{order:"asc"},{updatedAt:r}]:[{order:"asc"},{updatedAt:"desc"}]})}async findById(e){return await this.prisma.sDHCTeamMember.findFirst({where:{id:e},include:{user:{omit:{passwordHash:!0}}}})}async count({filter:{role:e}}){let r={};return e&&(r.role={contains:e,mode:"insensitive"}),await this.prisma.sDHCTeamMember.count({where:r})}};function Zt(){return new An(N)}function ng(){return{createSDHCTeamMemberController:new Mi(Zt())}}function sg(){return{findSDHCTeamMembersController:new Tn(Zt())}}function ag(){return{findSDHCTeamMemberByIdController:new Ai(Zt())}}function mg(){return{updateSDHCTeamMemberController:new Fi(Zt())}}function cg(){return{deleteSDHCTeamMemberController:new Ti(Zt())}}var bt=gC(),{authMiddleware:Bm}=H();bt.post("/",(o,e,r)=>{Bm.authenticated(o,e,r)},async(o,e)=>{let{createSDHCTeamMemberController:r}=ng();await r.handle(o,e)});bt.get("/",async(o,e)=>{let{findSDHCTeamMembersController:r}=sg();await r.handle(o,e)});bt.get("/:id",async(o,e)=>{let{findSDHCTeamMemberByIdController:r}=ag();await r.handle(o,e)});bt.put("/:id",(o,e,r)=>{Bm.authenticated(o,e,r)},async(o,e)=>{let{updateSDHCTeamMemberController:r}=mg();await r.handle(o,e)});bt.delete("/:id",(o,e,r)=>{Bm.authenticated(o,e,r)},async(o,e)=>{let{deleteSDHCTeamMemberController:r}=cg();await r.handle(o,e)});import{Router as yC}from"express";var Dn=class{constructor(e){this.userRepository=e}async handle(e,r){try{let t=await this.userRepository.find();r.status(200).json(t)}catch(t){if(t instanceof Error)throw new a(t.message)}}};function pg(){return{updateUserController:new Bi(se(),B())}}function dg(){return{deleteUserController:new Ui(se())}}function lg(){return{findUsersController:new Dn(se())}}function ug(){return{findUserController:new qi(se())}}var Vt=yC(),{authMiddleware:gg}=H();Vt.get("/:id",async(o,e)=>{let{findUserController:r}=ug();await r.handle(o,e)});Vt.put("/",(o,e,r)=>{gg.authenticated(o,e,r)},W.single("avatarImage"),async(o,e)=>{let{updateUserController:r}=pg();await r.handle(o,e)});Vt.delete("/:id",(o,e,r)=>{gg.authenticated(o,e,r)},async(o,e)=>{let{deleteUserController:r}=dg();await r.handle(o,e)});Vt.get("/",async(o,e)=>{let{findUsersController:r}=lg();await r.handle(o,e)});import{Router as bC}from"express";import{extendZodWithOpenApi as fC}from"@asteasolutions/zod-to-openapi";import ve from"zod";var hC=5,yg=1024,RC=yg*yg,IC=hC*RC;fC(ve);var CC=ve.object({title:ve.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),description:ve.string().optional(),scheduledAt:ve.coerce.date(),webinarLink:ve.url().optional(),guestIds:ve.transform(o=>typeof o=="string"?o.split(","):o).pipe(ve.array(ve.uuid())),thumbnail:ve.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=IC,"A thumbnail deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.")}),Fn=class{constructor(e,r){this.webinarRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{title:t,description:i,scheduledAt:n,webinarLink:s,guestIds:m,thumbnail:c}=CC.parse({...e.body,thumbnail:e.file}),u=await this.webinarRepository.create({title:t,description:i,scheduledAt:n,webinarLink:s||void 0,guestIds:m}),j=await this.firebaseStorageService.uploadFile({file:c,folder:U.WEBINAR,id:u.id});return await this.webinarRepository.update({id:u.id,thumbnailUrl:j}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Un=class{constructor(e){this.prisma=e}async create({title:e,description:r,scheduledAt:t,webinarLink:i,thumbnailUrl:n,guestIds:s}){return await this.prisma.webinar.create({data:{title:e,description:r,scheduledAt:t,webinarLink:i,thumbnailUrl:n,guests:s?{connect:s.map(m=>({id:m}))}:void 0}})}async find({pagination:{offset:e,limit:r},filter:{description:t,orderBy:i,title:n}}){let s={},m=[];return n&&m.push({title:{contains:n,mode:"insensitive"}}),t&&m.push({description:{contains:t,mode:"insensitive"}}),m.length>0&&(s.OR=m),await this.prisma.webinar.findMany({where:s,include:{guests:{omit:{passwordHash:!0}}},orderBy:{updatedAt:i},skip:e,take:r})}async findById(e){return await this.prisma.webinar.findFirst({where:{id:e},include:{guests:{omit:{passwordHash:!0}}}})}async update({id:e,title:r,description:t,scheduledAt:i,webinarLink:n,thumbnailUrl:s,guestIds:m}){await this.prisma.webinar.update({where:{id:e},data:{title:r,description:t,scheduledAt:i,webinarLink:n,thumbnailUrl:s,guests:m?{connect:m.map(c=>({id:c}))}:void 0}})}async deleteById(e){await this.prisma.webinar.delete({where:{id:e}})}async count({filter:{description:e,title:r}}){let t={},i=[];return r&&i.push({title:{contains:r,mode:"insensitive"}}),e&&i.push({description:{contains:e,mode:"insensitive"}}),i.length>0&&(t.OR=i),await this.prisma.webinar.count({where:t})}};function Kt(){return new Un(N)}function fg(){return{createWebinarController:new Fn(Kt(),B())}}function hg(){return{findWebinarsController:new ki(Kt())}}function Rg(){return{findWebinarByIdController:new Ni(Kt())}}function Ig(){return{updateWebinarController:new Gi(Kt(),B())}}function Cg(){return{deleteWebinarController:new Oi(Kt(),B())}}var wt=bC(),{authMiddleware:lr}=H();wt.post("/",(o,e,r)=>{lr.isAdmin(o,e,r)},W.single("thumbnail"),async(o,e)=>{let{createWebinarController:r}=fg();await r.handle(o,e)});wt.get("/",(o,e,r)=>{lr.isAdmin(o,e,r)},async(o,e)=>{let{findWebinarsController:r}=hg();await r.handle(o,e)});wt.get("/:id",(o,e,r)=>{lr.isAdmin(o,e,r)},async(o,e)=>{let{findWebinarByIdController:r}=Rg();await r.handle(o,e)});wt.put("/:id",(o,e,r)=>{lr.isAdmin(o,e,r)},W.single("thumbnail"),async(o,e)=>{let{updateWebinarController:r}=Ig();await r.handle(o,e)});wt.delete("/:id",(o,e,r)=>{lr.isAdmin(o,e,r)},async(o,e)=>{let{deleteWebinarController:r}=Cg();await r.handle(o,e)});var V=Om(),vC={methods:["GET","POST","PUT","DELETE"],origin:["http://localhost:3000","https://rede-ct.vercel.app"],credentials:!0};V.use(SC(vC));V.use(Om.json());V.use(Om.urlencoded({extended:!1}));V.use("/docs",wC({content:Vd,theme:"kepler"}));V.use("/",Sm);V.use("/auth",Te);V.use("/user",Vt);V.use("/news",Qe);V.use("/certification",pt);V.use("/pendency",ht);V.use("/researcher",tt);V.use("/in-memoriam",Je);V.use("/etp",lt);V.use("/partner",ft);V.use("/management-team",yt);V.use("/sdhc-team-member",bt);V.use("/legitimator-committee-member",gt);V.use("/regiment",et);V.use("/meeting",ue);V.use("/international-scientific-congress",Q);V.use("/regional-congress",ee);V.use("/webinars",wt);V.use("/courses",dt);V.use("/post-graduate-programs",Rt);V.use((o,e,r,t)=>{let{errorHandler:i}=Nm();i.handle(o,e,r,t)});var EC=jC.createServer(V),bg=4e3;EC.listen(bg,()=>{console.log(`\u{1F680} Aplica\xE7\xE3o rodando na porta ${bg}.`)});

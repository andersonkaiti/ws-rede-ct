var oE=Object.create;var ca=Object.defineProperty;var aE=Object.getOwnPropertyDescriptor;var lE=Object.getOwnPropertyNames;var cE=Object.getPrototypeOf,uE=Object.prototype.hasOwnProperty;var $=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,r)=>(typeof require<"u"?require:e)[r]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')});var be=(t,e)=>()=>(t&&(e=t(t=0)),e);var at=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),fu=(t,e)=>{for(var r in e)ca(t,r,{get:e[r],enumerable:!0})},$p=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of lE(e))!uE.call(t,i)&&i!==r&&ca(t,i,{get:()=>e[i],enumerable:!(n=aE(e,i))||n.enumerable});return t};var On=(t,e,r)=>(r=t!=null?oE(cE(t)):{},$p(e||!t||!t.__esModule?ca(r,"default",{value:t,enumerable:!0}):r,t)),du=t=>$p(ca({},"__esModule",{value:!0}),t);function Su(...t){let e=t.map(i=>i.byteLength).reduce((i,s)=>i+s),r=new Uint8Array(e),n=0;return t.map(i=>new Uint8Array(i)).forEach(i=>{for(let s of i)r[n++]=s}),r.buffer}var SE,R,vu,EE,AE,_E,fa,Ot,Z,Yr=be(()=>{"use strict";SE="[object ArrayBuffer]",R=class t{static isArrayBuffer(e){return Object.prototype.toString.call(e)===SE}static toArrayBuffer(e){return this.isArrayBuffer(e)?e:e.byteLength===e.buffer.byteLength||e.byteOffset===0&&e.byteLength===e.buffer.byteLength?e.buffer:this.toUint8Array(e.buffer).slice(e.byteOffset,e.byteOffset+e.byteLength).buffer}static toUint8Array(e){return this.toView(e,Uint8Array)}static toView(e,r){if(e.constructor===r)return e;if(this.isArrayBuffer(e))return new r(e);if(this.isArrayBufferView(e))return new r(e.buffer,e.byteOffset,e.byteLength);throw new TypeError("The provided value is not of type '(ArrayBuffer or ArrayBufferView)'")}static isBufferSource(e){return this.isArrayBufferView(e)||this.isArrayBuffer(e)}static isArrayBufferView(e){return ArrayBuffer.isView(e)||e&&this.isArrayBuffer(e.buffer)}static isEqual(e,r){let n=t.toUint8Array(e),i=t.toUint8Array(r);if(n.length!==i.byteLength)return!1;for(let s=0;s<n.length;s++)if(n[s]!==i[s])return!1;return!0}static concat(...e){let r;Array.isArray(e[0])&&!(e[1]instanceof Function)||Array.isArray(e[0])&&e[1]instanceof Function?r=e[0]:e[e.length-1]instanceof Function?r=e.slice(0,e.length-1):r=e;let n=0;for(let o of r)n+=o.byteLength;let i=new Uint8Array(n),s=0;for(let o of r){let a=this.toUint8Array(o);i.set(a,s),s+=a.length}return e[e.length-1]instanceof Function?this.toView(i,e[e.length-1]):i.buffer}},vu="string",EE=/^[0-9a-f\s]+$/i,AE=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/,_E=/^[a-zA-Z0-9-_]+$/,fa=class{static fromString(e){let r=unescape(encodeURIComponent(e)),n=new Uint8Array(r.length);for(let i=0;i<r.length;i++)n[i]=r.charCodeAt(i);return n.buffer}static toString(e){let r=R.toUint8Array(e),n="";for(let s=0;s<r.length;s++)n+=String.fromCharCode(r[s]);return decodeURIComponent(escape(n))}},Ot=class{static toString(e,r=!1){let n=R.toArrayBuffer(e),i=new DataView(n),s="";for(let o=0;o<n.byteLength;o+=2){let a=i.getUint16(o,r);s+=String.fromCharCode(a)}return s}static fromString(e,r=!1){let n=new ArrayBuffer(e.length*2),i=new DataView(n);for(let s=0;s<e.length;s++)i.setUint16(s*2,e.charCodeAt(s),r);return n}},Z=class t{static isHex(e){return typeof e===vu&&EE.test(e)}static isBase64(e){return typeof e===vu&&AE.test(e)}static isBase64Url(e){return typeof e===vu&&_E.test(e)}static ToString(e,r="utf8"){let n=R.toUint8Array(e);switch(r.toLowerCase()){case"utf8":return this.ToUtf8String(n);case"binary":return this.ToBinary(n);case"hex":return this.ToHex(n);case"base64":return this.ToBase64(n);case"base64url":return this.ToBase64Url(n);case"utf16le":return Ot.toString(n,!0);case"utf16":case"utf16be":return Ot.toString(n);default:throw new Error(`Unknown type of encoding '${r}'`)}}static FromString(e,r="utf8"){if(!e)return new ArrayBuffer(0);switch(r.toLowerCase()){case"utf8":return this.FromUtf8String(e);case"binary":return this.FromBinary(e);case"hex":return this.FromHex(e);case"base64":return this.FromBase64(e);case"base64url":return this.FromBase64Url(e);case"utf16le":return Ot.fromString(e,!0);case"utf16":case"utf16be":return Ot.fromString(e);default:throw new Error(`Unknown type of encoding '${r}'`)}}static ToBase64(e){let r=R.toUint8Array(e);if(typeof btoa<"u"){let n=this.ToString(r,"binary");return btoa(n)}else return Buffer.from(r).toString("base64")}static FromBase64(e){let r=this.formatString(e);if(!r)return new ArrayBuffer(0);if(!t.isBase64(r))throw new TypeError("Argument 'base64Text' is not Base64 encoded");return typeof atob<"u"?this.FromBinary(atob(r)):new Uint8Array(Buffer.from(r,"base64")).buffer}static FromBase64Url(e){let r=this.formatString(e);if(!r)return new ArrayBuffer(0);if(!t.isBase64Url(r))throw new TypeError("Argument 'base64url' is not Base64Url encoded");return this.FromBase64(this.Base64Padding(r.replace(/\-/g,"+").replace(/\_/g,"/")))}static ToBase64Url(e){return this.ToBase64(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}static FromUtf8String(e,r=t.DEFAULT_UTF8_ENCODING){switch(r){case"ascii":return this.FromBinary(e);case"utf8":return fa.fromString(e);case"utf16":case"utf16be":return Ot.fromString(e);case"utf16le":case"usc2":return Ot.fromString(e,!0);default:throw new Error(`Unknown type of encoding '${r}'`)}}static ToUtf8String(e,r=t.DEFAULT_UTF8_ENCODING){switch(r){case"ascii":return this.ToBinary(e);case"utf8":return fa.toString(e);case"utf16":case"utf16be":return Ot.toString(e);case"utf16le":case"usc2":return Ot.toString(e,!0);default:throw new Error(`Unknown type of encoding '${r}'`)}}static FromBinary(e){let r=e.length,n=new Uint8Array(r);for(let i=0;i<r;i++)n[i]=e.charCodeAt(i);return n.buffer}static ToBinary(e){let r=R.toUint8Array(e),n="";for(let i=0;i<r.length;i++)n+=String.fromCharCode(r[i]);return n}static ToHex(e){let r=R.toUint8Array(e),n="",i=r.length;for(let s=0;s<i;s++){let o=r[s];o<16&&(n+="0"),n+=o.toString(16)}return n}static FromHex(e){let r=this.formatString(e);if(!r)return new ArrayBuffer(0);if(!t.isHex(r))throw new TypeError("Argument 'hexString' is not HEX encoded");r.length%2&&(r=`0${r}`);let n=new Uint8Array(r.length/2);for(let i=0;i<r.length;i=i+2){let s=r.slice(i,i+2);n[i/2]=parseInt(s,16)}return n.buffer}static ToUtf16String(e,r=!1){return Ot.toString(e,r)}static FromUtf16String(e,r=!1){return Ot.fromString(e,r)}static Base64Padding(e){let r=4-e.length%4;if(r<4)for(let n=0;n<r;n++)e+="=";return e}static formatString(e){return e?.replace(/[\n\r\t ]/g,"")||""}};Z.DEFAULT_UTF8_ENCODING="utf8"});function Un(t,e){let r=0;if(t.length===1)return t[0];for(let n=t.length-1;n>=0;n--)r+=t[t.length-1-n]*Math.pow(2,e*n);return r}function Qr(t,e,r=-1){let n=r,i=t,s=0,o=Math.pow(2,e);for(let a=1;a<8;a++){if(t<o){let c;if(n<0)c=new ArrayBuffer(a),s=a;else{if(n<a)return new ArrayBuffer(0);c=new ArrayBuffer(n),s=n}let f=new Uint8Array(c);for(let d=a-1;d>=0;d--){let h=Math.pow(2,d*e);f[s-d-1]=Math.floor(i/h),i-=f[s-d-1]*h}return c}o*=Math.pow(2,e)}return new ArrayBuffer(0)}function da(...t){let e=0,r=0;for(let s of t)e+=s.length;let n=new ArrayBuffer(e),i=new Uint8Array(n);for(let s of t)i.set(s,r),r+=s.length;return i}function Eu(){let t=new Uint8Array(this.valueHex);if(this.valueHex.byteLength>=2){let a=t[0]===255&&t[1]&128,c=t[0]===0&&(t[1]&128)===0;(a||c)&&this.warnings.push("Needlessly long format")}let e=new ArrayBuffer(this.valueHex.byteLength),r=new Uint8Array(e);for(let a=0;a<this.valueHex.byteLength;a++)r[a]=0;r[0]=t[0]&128;let n=Un(r,8),i=new ArrayBuffer(this.valueHex.byteLength),s=new Uint8Array(i);for(let a=0;a<this.valueHex.byteLength;a++)s[a]=t[a];return s[0]&=127,Un(s,8)-n}function Fp(t){let e=t<0?t*-1:t,r=128;for(let n=1;n<8;n++){if(e<=r){if(t<0){let o=r-e,a=Qr(o,8,n),c=new Uint8Array(a);return c[0]|=128,a}let i=Qr(e,8,n),s=new Uint8Array(i);if(s[0]&128){let o=i.slice(0),a=new Uint8Array(o);i=new ArrayBuffer(i.byteLength+1),s=new Uint8Array(i);for(let c=0;c<o.byteLength;c++)s[c+1]=a[c];s[0]=0}return i}r*=Math.pow(2,8)}return new ArrayBuffer(0)}function Vp(t,e){if(t.byteLength!==e.byteLength)return!1;let r=new Uint8Array(t),n=new Uint8Array(e);for(let i=0;i<r.length;i++)if(r[i]!==n[i])return!1;return!0}function lt(t,e){let r=t.toString(10);if(e<r.length)return"";let n=e-r.length,i=new Array(n);for(let o=0;o<n;o++)i[o]="0";return i.join("").concat(r)}var wU,Hp=be(()=>{"use strict";wU=Math.log(2)});var zt={};fu(zt,{Any:()=>sr,BaseBlock:()=>Ue,BaseStringBlock:()=>Ss,BitString:()=>en,BmpString:()=>qn,Boolean:()=>$n,CharacterString:()=>Jn,Choice:()=>Pi,Constructed:()=>Le,DATE:()=>Cs,DateTime:()=>Rs,Duration:()=>Ts,EndOfContent:()=>Es,Enumerated:()=>Dn,GeneralString:()=>zn,GeneralizedTime:()=>Gn,GraphicString:()=>Wn,HexBlock:()=>or,IA5String:()=>Hn,Integer:()=>It,Null:()=>Ht,NumericString:()=>jn,ObjectIdentifier:()=>Kn,OctetString:()=>Xr,Primitive:()=>Cr,PrintableString:()=>Mn,RawData:()=>_u,RelativeObjectIdentifier:()=>xs,Repeated:()=>Yn,Sequence:()=>ut,Set:()=>ft,TIME:()=>Bs,TeletexString:()=>Fn,TimeOfDay:()=>Ps,UTCTime:()=>rn,UniversalString:()=>Ln,Utf8String:()=>Nt,ValueBlock:()=>We,VideotexString:()=>Vn,ViewWriter:()=>Ci,VisibleString:()=>tn,compareSchema:()=>Zr,fromBER:()=>Rr,verifySchema:()=>qE});function ha(){if(typeof BigInt>"u")throw new Error("BigInt is not defined. Your environment doesn't implement BigInt.")}function ku(t){let e=0,r=0;for(let i=0;i<t.length;i++){let s=t[i];e+=s.byteLength}let n=new Uint8Array(e);for(let i=0;i<t.length;i++){let s=t[i];n.set(new Uint8Array(s),r),r+=s.byteLength}return n.buffer}function Pr(t,e,r,n){return e instanceof Uint8Array?e.byteLength?r<0?(t.error="Wrong parameter: inputOffset less than zero",!1):n<0?(t.error="Wrong parameter: inputLength less than zero",!1):e.byteLength-r-n<0?(t.error="End of input reached before message was fully decoded (inconsistent offset and length values)",!1):!0:(t.error="Wrong parameter: inputBuffer has zero length",!1):(t.error="Wrong parameter: inputBuffer must be 'Uint8Array'",!1)}function or(t){var e;return e=class extends t{get valueHex(){return this.valueHexView.slice().buffer}set valueHex(n){this.valueHexView=new Uint8Array(n)}constructor(...n){var i;super(...n);let s=n[0]||{};this.isHexOnly=(i=s.isHexOnly)!==null&&i!==void 0?i:!1,this.valueHexView=s.valueHex?R.toUint8Array(s.valueHex):Pa}fromBER(n,i,s){let o=n instanceof ArrayBuffer?new Uint8Array(n):n;if(!Pr(this,o,i,s))return-1;let a=i+s;return this.valueHexView=o.subarray(i,a),this.valueHexView.length?(this.blockLength=s,a):(this.warnings.push("Zero buffer length"),i)}toBER(n=!1){return this.isHexOnly?n?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.byteLength===this.valueHexView.buffer.byteLength?this.valueHexView.buffer:this.valueHexView.slice().buffer:(this.error="Flag 'isHexOnly' is not set, abort",Wt)}toJSON(){return{...super.toJSON(),isHexOnly:this.isHexOnly,valueHex:Z.ToHex(this.valueHexView)}}},e.NAME="hexBlock",e}function Qp(t){var e;if(t instanceof I.Constructed)for(let r of t.valueBlock.value)Qp(r)&&(t.lenBlock.isIndefiniteForm=!0);return!!(!((e=t.lenBlock)===null||e===void 0)&&e.isIndefiniteForm)}function UE(t,e){if(t instanceof e)return t;let r=new e;return r.idBlock=t.idBlock,r.lenBlock=t.lenBlock,r.warnings=t.warnings,r.valueBeforeDecodeView=t.valueBeforeDecodeView,r}function Ri(t,e=0,r=t.length){let n=e,i=new Ue({},We),s=new xr;if(!Pr(s,t,e,r))return i.error=s.error,{offset:-1,result:i};if(!t.subarray(e,e+r).length)return i.error="Zero buffer length",{offset:-1,result:i};let a=i.idBlock.fromBER(t,e,r);if(i.idBlock.warnings.length&&i.warnings.concat(i.idBlock.warnings),a===-1)return i.error=i.idBlock.error,{offset:-1,result:i};if(e=a,r-=i.idBlock.blockLength,a=i.lenBlock.fromBER(t,e,r),i.lenBlock.warnings.length&&i.warnings.concat(i.lenBlock.warnings),a===-1)return i.error=i.lenBlock.error,{offset:-1,result:i};if(e=a,r-=i.lenBlock.blockLength,!i.idBlock.isConstructed&&i.lenBlock.isIndefiniteForm)return i.error="Indefinite length form used for primitive encoding form",{offset:-1,result:i};let c=Ue;switch(i.idBlock.tagClass){case 1:if(i.idBlock.tagNumber>=37&&i.idBlock.isHexOnly===!1)return i.error="UNIVERSAL 37 and upper tags are reserved by ASN.1 standard",{offset:-1,result:i};switch(i.idBlock.tagNumber){case 0:if(i.idBlock.isConstructed&&i.lenBlock.length>0)return i.error="Type [UNIVERSAL 0] is reserved",{offset:-1,result:i};c=I.EndOfContent;break;case 1:c=I.Boolean;break;case 2:c=I.Integer;break;case 3:c=I.BitString;break;case 4:c=I.OctetString;break;case 5:c=I.Null;break;case 6:c=I.ObjectIdentifier;break;case 10:c=I.Enumerated;break;case 12:c=I.Utf8String;break;case 13:c=I.RelativeObjectIdentifier;break;case 14:c=I.TIME;break;case 15:return i.error="[UNIVERSAL 15] is reserved by ASN.1 standard",{offset:-1,result:i};case 16:c=I.Sequence;break;case 17:c=I.Set;break;case 18:c=I.NumericString;break;case 19:c=I.PrintableString;break;case 20:c=I.TeletexString;break;case 21:c=I.VideotexString;break;case 22:c=I.IA5String;break;case 23:c=I.UTCTime;break;case 24:c=I.GeneralizedTime;break;case 25:c=I.GraphicString;break;case 26:c=I.VisibleString;break;case 27:c=I.GeneralString;break;case 28:c=I.UniversalString;break;case 29:c=I.CharacterString;break;case 30:c=I.BmpString;break;case 31:c=I.DATE;break;case 32:c=I.TimeOfDay;break;case 33:c=I.DateTime;break;case 34:c=I.Duration;break;default:{let f=i.idBlock.isConstructed?new I.Constructed:new I.Primitive;f.idBlock=i.idBlock,f.lenBlock=i.lenBlock,f.warnings=i.warnings,i=f}}break;case 2:case 3:case 4:default:c=i.idBlock.isConstructed?I.Constructed:I.Primitive}return i=UE(i,c),a=i.fromBER(t,e,i.lenBlock.isIndefiniteForm?r:i.lenBlock.length),i.valueBeforeDecodeView=t.subarray(n,n+i.blockLength),{offset:a,result:i}}function Rr(t){if(!t.byteLength){let e=new Ue({},We);return e.error="Input buffer has zero length",{offset:-1,result:e}}return Ri(R.toUint8Array(t).slice(),0,t.byteLength)}function $E(t,e){return t?1:e}function DE(t,e){let r=new Uint8Array([0]),n=new Uint8Array(t),i=new Uint8Array(e),s=n.slice(0),o=s.length-1,a=i.slice(0),c=a.length-1,f=0,d=c<o?o:c,h=0;for(let m=d;m>=0;m--,h++){switch(!0){case h<a.length:f=s[o-h]+a[c-h]+r[0];break;default:f=s[o-h]+r[0]}switch(r[0]=f/10,!0){case h>=s.length:s=da(new Uint8Array([f%10]),s);break;default:s[o-h]=f%10}}return r[0]>0&&(s=da(r,s)),s}function Jp(t){if(t>=bs.length)for(let e=bs.length;e<=t;e++){let r=new Uint8Array([0]),n=bs[e-1].slice(0);for(let i=n.length-1;i>=0;i--){let s=new Uint8Array([(n[i]<<1)+r[0]]);r[0]=s[0]/10,n[i]=s[0]%10}r[0]>0&&(n=da(r,n)),bs.push(n)}return bs[t]}function KE(t,e){let r=0,n=new Uint8Array(t),i=new Uint8Array(e),s=n.slice(0),o=s.length-1,a=i.slice(0),c=a.length-1,f,d=0;for(let h=c;h>=0;h--,d++)switch(f=s[o-d]-a[c-d]-r,!0){case f<0:r=1,s[o-d]=f+10;break;default:r=0,s[o-d]=f}if(r>0)for(let h=o-c+1;h>=0;h--,d++)if(f=s[o-d]-r,f<0)r=1,s[o-d]=f+10;else{r=0,s[o-d]=f;break}return s.slice()}function Zr(t,e,r){if(r instanceof Pi){for(let s of r.value)if(Zr(t,e,s).verified)return{verified:!0,result:t};{let s={verified:!1,result:{error:"Wrong values for Choice type"}};return r.hasOwnProperty(Au)&&(s.name=r.name),s}}if(r instanceof sr)return r.hasOwnProperty(Au)&&(t[r.name]=e),{verified:!0,result:t};if(!(t instanceof Object))return{verified:!1,result:{error:"Wrong root object"}};if(!(e instanceof Object))return{verified:!1,result:{error:"Wrong ASN.1 data"}};if(!(r instanceof Object))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(!(PE in r))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(!(OE in r.idBlock))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(!(IE in r.idBlock))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};let n=r.idBlock.toBER(!1);if(n.byteLength===0)return{verified:!1,result:{error:"Error encoding idBlock for ASN.1 schema"}};if(r.idBlock.fromBER(n,0,n.byteLength)===-1)return{verified:!1,result:{error:"Error decoding idBlock for ASN.1 schema"}};if(r.idBlock.hasOwnProperty(RE)===!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(r.idBlock.tagClass!==e.idBlock.tagClass)return{verified:!1,result:t};if(r.idBlock.hasOwnProperty(TE)===!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(r.idBlock.tagNumber!==e.idBlock.tagNumber)return{verified:!1,result:t};if(r.idBlock.hasOwnProperty(BE)===!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(r.idBlock.isConstructed!==e.idBlock.isConstructed)return{verified:!1,result:t};if(!(CE in r.idBlock))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(r.idBlock.isHexOnly!==e.idBlock.isHexOnly)return{verified:!1,result:t};if(r.idBlock.isHexOnly){if(!(zp in r.idBlock))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};let s=r.idBlock.valueHexView,o=e.idBlock.valueHexView;if(s.length!==o.length)return{verified:!1,result:t};for(let a=0;a<s.length;a++)if(s[a]!==o[1])return{verified:!1,result:t}}if(r.name&&(r.name=r.name.replace(/^\s+|\s+$/g,ct),r.name&&(t[r.name]=e)),r instanceof I.Constructed){let s=0,o={verified:!1,result:{error:"Unknown error"}},a=r.valueBlock.value.length;if(a>0&&r.valueBlock.value[0]instanceof Yn&&(a=e.valueBlock.value.length),a===0)return{verified:!0,result:t};if(e.valueBlock.value.length===0&&r.valueBlock.value.length!==0){let c=!0;for(let f=0;f<r.valueBlock.value.length;f++)c=c&&(r.valueBlock.value[f].optional||!1);return c?{verified:!0,result:t}:(r.name&&(r.name=r.name.replace(/^\s+|\s+$/g,ct),r.name&&delete t[r.name]),t.error="Inconsistent object length",{verified:!1,result:t})}for(let c=0;c<a;c++)if(c-s>=e.valueBlock.value.length){if(r.valueBlock.value[c].optional===!1){let f={verified:!1,result:t};return t.error="Inconsistent length between ASN.1 data and schema",r.name&&(r.name=r.name.replace(/^\s+|\s+$/g,ct),r.name&&(delete t[r.name],f.name=r.name)),f}}else if(r.valueBlock.value[0]instanceof Yn){if(o=Zr(t,e.valueBlock.value[c],r.valueBlock.value[0].value),o.verified===!1)if(r.valueBlock.value[0].optional)s++;else return r.name&&(r.name=r.name.replace(/^\s+|\s+$/g,ct),r.name&&delete t[r.name]),o;if(Au in r.valueBlock.value[0]&&r.valueBlock.value[0].name.length>0){let f={};NE in r.valueBlock.value[0]&&r.valueBlock.value[0].local?f=e:f=t,typeof f[r.valueBlock.value[0].name]>"u"&&(f[r.valueBlock.value[0].name]=[]),f[r.valueBlock.value[0].name].push(e.valueBlock.value[c])}}else if(o=Zr(t,e.valueBlock.value[c-s],r.valueBlock.value[c]),o.verified===!1)if(r.valueBlock.value[c].optional)s++;else return r.name&&(r.name=r.name.replace(/^\s+|\s+$/g,ct),r.name&&delete t[r.name]),o;if(o.verified===!1){let c={verified:!1,result:t};return r.name&&(r.name=r.name.replace(/^\s+|\s+$/g,ct),r.name&&(delete t[r.name],c.name=r.name)),c}return{verified:!0,result:t}}if(r.primitiveSchema&&zp in e.valueBlock){let s=Ri(e.valueBlock.valueHexView);if(s.offset===-1){let o={verified:!1,result:s.result};return r.name&&(r.name=r.name.replace(/^\s+|\s+$/g,ct),r.name&&(delete t[r.name],o.name=r.name)),o}return Zr(t,s.result,r.primitiveSchema)}return{verified:!0,result:t}}function qE(t,e){if(!(e instanceof Object))return{verified:!1,result:{error:"Wrong ASN.1 schema type"}};let r=Ri(R.toUint8Array(t));return r.offset===-1?{verified:!1,result:r.result}:Zr(r.result,r.result,e)}var Ci,bs,Wp,Au,zp,CE,PE,RE,TE,BE,OE,IE,NE,ct,Wt,Pa,vs,Gp,Yp,xr,We,pa,ma,I,Ue,Ss,ga,Zp,Cr,ir,Xp,Le,ya,em,Es,tm,Ht,ba,rm,$n,wa,xu,Xr,va,nm,en,im,As,ws,It,sm,Dn,_s,Sa,om,Kn,ks,Ea,am,xs,lm,ut,cm,ft,Aa,_a,tt,ka,um,Nt,xa,fm,qn,Ca,dm,Ln,hm,jn,pm,Mn,mm,Fn,gm,Vn,ym,Hn,bm,Wn,wm,tn,vm,zn,Sm,Jn,Em,rn,Am,Gn,_m,Cs,km,Ps,xm,Rs,Cm,Ts,Pm,Bs,sr,Pi,Yn,_u,Tr=be(()=>{"use strict";Yr();Hp();Ci=class{constructor(){this.items=[]}write(e){this.items.push(e)}final(){return ku(this.items)}},bs=[new Uint8Array([1])],Wp="0123456789",Au="name",zp="valueHexView",CE="isHexOnly",PE="idBlock",RE="tagClass",TE="tagNumber",BE="isConstructed",OE="fromBER",IE="toBER",NE="local",ct="",Wt=new ArrayBuffer(0),Pa=new Uint8Array(0),vs="EndOfContent",Gp="OCTET STRING",Yp="BIT STRING";xr=class{static blockName(){return this.NAME}get valueBeforeDecode(){return this.valueBeforeDecodeView.slice().buffer}set valueBeforeDecode(e){this.valueBeforeDecodeView=new Uint8Array(e)}constructor({blockLength:e=0,error:r=ct,warnings:n=[],valueBeforeDecode:i=Pa}={}){this.blockLength=e,this.error=r,this.warnings=n,this.valueBeforeDecodeView=R.toUint8Array(i)}toJSON(){return{blockName:this.constructor.NAME,blockLength:this.blockLength,error:this.error,warnings:this.warnings,valueBeforeDecode:Z.ToHex(this.valueBeforeDecodeView)}}};xr.NAME="baseBlock";We=class extends xr{fromBER(e,r,n){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}toBER(e,r){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}};We.NAME="valueBlock";pa=class extends or(xr){constructor({idBlock:e={}}={}){var r,n,i,s;super(),e?(this.isHexOnly=(r=e.isHexOnly)!==null&&r!==void 0?r:!1,this.valueHexView=e.valueHex?R.toUint8Array(e.valueHex):Pa,this.tagClass=(n=e.tagClass)!==null&&n!==void 0?n:-1,this.tagNumber=(i=e.tagNumber)!==null&&i!==void 0?i:-1,this.isConstructed=(s=e.isConstructed)!==null&&s!==void 0?s:!1):(this.tagClass=-1,this.tagNumber=-1,this.isConstructed=!1)}toBER(e=!1){let r=0;switch(this.tagClass){case 1:r|=0;break;case 2:r|=64;break;case 3:r|=128;break;case 4:r|=192;break;default:return this.error="Unknown tag class",Wt}if(this.isConstructed&&(r|=32),this.tagNumber<31&&!this.isHexOnly){let i=new Uint8Array(1);if(!e){let s=this.tagNumber;s&=31,r|=s,i[0]=r}return i.buffer}if(!this.isHexOnly){let i=Qr(this.tagNumber,7),s=new Uint8Array(i),o=i.byteLength,a=new Uint8Array(o+1);if(a[0]=r|31,!e){for(let c=0;c<o-1;c++)a[c+1]=s[c]|128;a[o]=s[o-1]}return a.buffer}let n=new Uint8Array(this.valueHexView.byteLength+1);if(n[0]=r|31,!e){let i=this.valueHexView;for(let s=0;s<i.length-1;s++)n[s+1]=i[s]|128;n[this.valueHexView.byteLength]=i[i.length-1]}return n.buffer}fromBER(e,r,n){let i=R.toUint8Array(e);if(!Pr(this,i,r,n))return-1;let s=i.subarray(r,r+n);if(s.length===0)return this.error="Zero buffer length",-1;switch(s[0]&192){case 0:this.tagClass=1;break;case 64:this.tagClass=2;break;case 128:this.tagClass=3;break;case 192:this.tagClass=4;break;default:return this.error="Unknown tag class",-1}this.isConstructed=(s[0]&32)===32,this.isHexOnly=!1;let a=s[0]&31;if(a!==31)this.tagNumber=a,this.blockLength=1;else{let c=1,f=this.valueHexView=new Uint8Array(255),d=255;for(;s[c]&128;){if(f[c-1]=s[c]&127,c++,c>=s.length)return this.error="End of input reached before message was fully decoded",-1;if(c===d){d+=255;let m=new Uint8Array(d);for(let b=0;b<f.length;b++)m[b]=f[b];f=this.valueHexView=new Uint8Array(d)}}this.blockLength=c+1,f[c-1]=s[c]&127;let h=new Uint8Array(c);for(let m=0;m<c;m++)h[m]=f[m];f=this.valueHexView=new Uint8Array(c),f.set(h),this.blockLength<=9?this.tagNumber=Un(f,7):(this.isHexOnly=!0,this.warnings.push("Tag too long, represented as hex-coded"))}if(this.tagClass===1&&this.isConstructed)switch(this.tagNumber){case 1:case 2:case 5:case 6:case 9:case 13:case 14:case 23:case 24:case 31:case 32:case 33:case 34:return this.error="Constructed encoding used for primitive type",-1}return r+this.blockLength}toJSON(){return{...super.toJSON(),tagClass:this.tagClass,tagNumber:this.tagNumber,isConstructed:this.isConstructed}}};pa.NAME="identificationBlock";ma=class extends xr{constructor({lenBlock:e={}}={}){var r,n,i;super(),this.isIndefiniteForm=(r=e.isIndefiniteForm)!==null&&r!==void 0?r:!1,this.longFormUsed=(n=e.longFormUsed)!==null&&n!==void 0?n:!1,this.length=(i=e.length)!==null&&i!==void 0?i:0}fromBER(e,r,n){let i=R.toUint8Array(e);if(!Pr(this,i,r,n))return-1;let s=i.subarray(r,r+n);if(s.length===0)return this.error="Zero buffer length",-1;if(s[0]===255)return this.error="Length block 0xFF is reserved by standard",-1;if(this.isIndefiniteForm=s[0]===128,this.isIndefiniteForm)return this.blockLength=1,r+this.blockLength;if(this.longFormUsed=!!(s[0]&128),this.longFormUsed===!1)return this.length=s[0],this.blockLength=1,r+this.blockLength;let o=s[0]&127;if(o>8)return this.error="Too big integer",-1;if(o+1>s.length)return this.error="End of input reached before message was fully decoded",-1;let a=r+1,c=i.subarray(a,a+o);return c[o-1]===0&&this.warnings.push("Needlessly long encoded length"),this.length=Un(c,8),this.longFormUsed&&this.length<=127&&this.warnings.push("Unnecessary usage of long length form"),this.blockLength=o+1,r+this.blockLength}toBER(e=!1){let r,n;if(this.length>127&&(this.longFormUsed=!0),this.isIndefiniteForm)return r=new ArrayBuffer(1),e===!1&&(n=new Uint8Array(r),n[0]=128),r;if(this.longFormUsed){let i=Qr(this.length,8);if(i.byteLength>127)return this.error="Too big length",Wt;if(r=new ArrayBuffer(i.byteLength+1),e)return r;let s=new Uint8Array(i);n=new Uint8Array(r),n[0]=i.byteLength|128;for(let o=0;o<i.byteLength;o++)n[o+1]=s[o];return r}return r=new ArrayBuffer(1),e===!1&&(n=new Uint8Array(r),n[0]=this.length),r}toJSON(){return{...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,longFormUsed:this.longFormUsed,length:this.length}}};ma.NAME="lengthBlock";I={},Ue=class extends xr{constructor({name:e=ct,optional:r=!1,primitiveSchema:n,...i}={},s){super(i),this.name=e,this.optional=r,n&&(this.primitiveSchema=n),this.idBlock=new pa(i),this.lenBlock=new ma(i),this.valueBlock=s?new s(i):new We(i)}fromBER(e,r,n){let i=this.valueBlock.fromBER(e,r,this.lenBlock.isIndefiniteForm?n:this.lenBlock.length);return i===-1?(this.error=this.valueBlock.error,i):(this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),i)}toBER(e,r){let n=r||new Ci;r||Qp(this);let i=this.idBlock.toBER(e);if(n.write(i),this.lenBlock.isIndefiniteForm)n.write(new Uint8Array([128]).buffer),this.valueBlock.toBER(e,n),n.write(new ArrayBuffer(2));else{let s=this.valueBlock.toBER(e);this.lenBlock.length=s.byteLength;let o=this.lenBlock.toBER(e);n.write(o),n.write(s)}return r?Wt:n.final()}toJSON(){let e={...super.toJSON(),idBlock:this.idBlock.toJSON(),lenBlock:this.lenBlock.toJSON(),valueBlock:this.valueBlock.toJSON(),name:this.name,optional:this.optional};return this.primitiveSchema&&(e.primitiveSchema=this.primitiveSchema.toJSON()),e}toString(e="ascii"){return e==="ascii"?this.onAsciiEncoding():Z.ToHex(this.toBER())}onAsciiEncoding(){let e=this.constructor.NAME,r=Z.ToHex(this.valueBlock.valueBeforeDecodeView);return`${e} : ${r}`}isEqual(e){if(this===e)return!0;if(!(e instanceof this.constructor))return!1;let r=this.toBER(),n=e.toBER();return Vp(r,n)}};Ue.NAME="BaseBlock";Ss=class extends Ue{getValue(){return this.valueBlock.value}setValue(e){this.valueBlock.value=e}constructor({value:e=ct,...r}={},n){super(r,n),e&&this.fromString(e)}fromBER(e,r,n){let i=this.valueBlock.fromBER(e,r,this.lenBlock.isIndefiniteForm?n:this.lenBlock.length);return i===-1?(this.error=this.valueBlock.error,i):(this.fromBuffer(this.valueBlock.valueHexView),this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),i)}onAsciiEncoding(){return`${this.constructor.NAME} : '${this.valueBlock.value}'`}};Ss.NAME="BaseStringBlock";ga=class extends or(We){constructor({isHexOnly:e=!0,...r}={}){super(r),this.isHexOnly=e}};ga.NAME="PrimitiveValueBlock";Cr=class extends Ue{constructor(e={}){super(e,ga),this.idBlock.isConstructed=!1}};Zp=Cr;I.Primitive=Zp;Cr.NAME="PRIMITIVE";ir=class extends We{constructor({value:e=[],isIndefiniteForm:r=!1,...n}={}){super(n),this.value=e,this.isIndefiniteForm=r}fromBER(e,r,n){let i=R.toUint8Array(e);if(!Pr(this,i,r,n))return-1;if(this.valueBeforeDecodeView=i.subarray(r,r+n),this.valueBeforeDecodeView.length===0)return this.warnings.push("Zero buffer length"),r;let s=r;for(;$E(this.isIndefiniteForm,n)>0;){let o=Ri(i,s,n);if(o.offset===-1)return this.error=o.result.error,this.warnings.concat(o.result.warnings),-1;if(s=o.offset,this.blockLength+=o.result.blockLength,n-=o.result.blockLength,this.value.push(o.result),this.isIndefiniteForm&&o.result.constructor.NAME===vs)break}return this.isIndefiniteForm&&(this.value[this.value.length-1].constructor.NAME===vs?this.value.pop():this.warnings.push("No EndOfContent block encoded")),s}toBER(e,r){let n=r||new Ci;for(let i=0;i<this.value.length;i++)this.value[i].toBER(e,n);return r?Wt:n.final()}toJSON(){let e={...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,value:[]};for(let r of this.value)e.value.push(r.toJSON());return e}};ir.NAME="ConstructedValueBlock";Le=class extends Ue{constructor(e={}){super(e,ir),this.idBlock.isConstructed=!0}fromBER(e,r,n){this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm;let i=this.valueBlock.fromBER(e,r,this.lenBlock.isIndefiniteForm?n:this.lenBlock.length);return i===-1?(this.error=this.valueBlock.error,i):(this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),i)}onAsciiEncoding(){let e=[];for(let n of this.valueBlock.value)e.push(n.toString("ascii").split(`
`).map(i=>`  ${i}`).join(`
`));let r=this.idBlock.tagClass===3?`[${this.idBlock.tagNumber}]`:this.constructor.NAME;return e.length?`${r} :
${e.join(`
`)}`:`${r} :`}};Xp=Le;I.Constructed=Xp;Le.NAME="CONSTRUCTED";ya=class extends We{fromBER(e,r,n){return r}toBER(e){return Wt}};ya.override="EndOfContentValueBlock";Es=class extends Ue{constructor(e={}){super(e,ya),this.idBlock.tagClass=1,this.idBlock.tagNumber=0}};em=Es;I.EndOfContent=em;Es.NAME=vs;Ht=class extends Ue{constructor(e={}){super(e,We),this.idBlock.tagClass=1,this.idBlock.tagNumber=5}fromBER(e,r,n){return this.lenBlock.length>0&&this.warnings.push("Non-zero length of value block for Null type"),this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.blockLength+=n,r+n>e.byteLength?(this.error="End of input reached before message was fully decoded (inconsistent offset and length values)",-1):r+n}toBER(e,r){let n=new ArrayBuffer(2);if(!e){let i=new Uint8Array(n);i[0]=5,i[1]=0}return r&&r.write(n),n}onAsciiEncoding(){return`${this.constructor.NAME}`}};tm=Ht;I.Null=tm;Ht.NAME="NULL";ba=class extends or(We){get value(){for(let e of this.valueHexView)if(e>0)return!0;return!1}set value(e){this.valueHexView[0]=e?255:0}constructor({value:e,...r}={}){super(r),r.valueHex?this.valueHexView=R.toUint8Array(r.valueHex):this.valueHexView=new Uint8Array(1),e&&(this.value=e)}fromBER(e,r,n){let i=R.toUint8Array(e);return Pr(this,i,r,n)?(this.valueHexView=i.subarray(r,r+n),n>1&&this.warnings.push("Boolean value encoded in more then 1 octet"),this.isHexOnly=!0,Eu.call(this),this.blockLength=n,r+n):-1}toBER(){return this.valueHexView.slice()}toJSON(){return{...super.toJSON(),value:this.value}}};ba.NAME="BooleanValueBlock";$n=class extends Ue{getValue(){return this.valueBlock.value}setValue(e){this.valueBlock.value=e}constructor(e={}){super(e,ba),this.idBlock.tagClass=1,this.idBlock.tagNumber=1}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.getValue}`}};rm=$n;I.Boolean=rm;$n.NAME="BOOLEAN";wa=class extends or(ir){constructor({isConstructed:e=!1,...r}={}){super(r),this.isConstructed=e}fromBER(e,r,n){let i=0;if(this.isConstructed){if(this.isHexOnly=!1,i=ir.prototype.fromBER.call(this,e,r,n),i===-1)return i;for(let s=0;s<this.value.length;s++){let o=this.value[s].constructor.NAME;if(o===vs){if(this.isIndefiniteForm)break;return this.error="EndOfContent is unexpected, OCTET STRING may consists of OCTET STRINGs only",-1}if(o!==Gp)return this.error="OCTET STRING may consists of OCTET STRINGs only",-1}}else this.isHexOnly=!0,i=super.fromBER(e,r,n),this.blockLength=n;return i}toBER(e,r){return this.isConstructed?ir.prototype.toBER.call(this,e,r):e?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),isConstructed:this.isConstructed}}};wa.NAME="OctetStringValueBlock";Xr=class extends Ue{constructor({idBlock:e={},lenBlock:r={},...n}={}){var i,s;(i=n.isConstructed)!==null&&i!==void 0||(n.isConstructed=!!(!((s=n.value)===null||s===void 0)&&s.length)),super({idBlock:{isConstructed:n.isConstructed,...e},lenBlock:{...r,isIndefiniteForm:!!n.isIndefiniteForm},...n},wa),this.idBlock.tagClass=1,this.idBlock.tagNumber=4}fromBER(e,r,n){if(this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,n===0)return this.idBlock.error.length===0&&(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length===0&&(this.blockLength+=this.lenBlock.blockLength),r;if(!this.valueBlock.isConstructed){let s=(e instanceof ArrayBuffer?new Uint8Array(e):e).subarray(r,r+n);try{if(s.byteLength){let o=Ri(s,0,s.byteLength);o.offset!==-1&&o.offset===n&&(this.valueBlock.value=[o.result])}}catch{}}return super.fromBER(e,r,n)}onAsciiEncoding(){if(this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length)return Le.prototype.onAsciiEncoding.call(this);let e=this.constructor.NAME,r=Z.ToHex(this.valueBlock.valueHexView);return`${e} : ${r}`}getValue(){if(!this.idBlock.isConstructed)return this.valueBlock.valueHexView.slice().buffer;let e=[];for(let r of this.valueBlock.value)r instanceof xu&&e.push(r.valueBlock.valueHexView);return R.concat(e)}};xu=Xr;I.OctetString=xu;Xr.NAME=Gp;va=class extends or(ir){constructor({unusedBits:e=0,isConstructed:r=!1,...n}={}){super(n),this.unusedBits=e,this.isConstructed=r,this.blockLength=this.valueHexView.byteLength}fromBER(e,r,n){if(!n)return r;let i=-1;if(this.isConstructed){if(i=ir.prototype.fromBER.call(this,e,r,n),i===-1)return i;for(let a of this.value){let c=a.constructor.NAME;if(c===vs){if(this.isIndefiniteForm)break;return this.error="EndOfContent is unexpected, BIT STRING may consists of BIT STRINGs only",-1}if(c!==Yp)return this.error="BIT STRING may consists of BIT STRINGs only",-1;let f=a.valueBlock;if(this.unusedBits>0&&f.unusedBits>0)return this.error='Using of "unused bits" inside constructive BIT STRING allowed for least one only',-1;this.unusedBits=f.unusedBits}return i}let s=R.toUint8Array(e);if(!Pr(this,s,r,n))return-1;let o=s.subarray(r,r+n);if(this.unusedBits=o[0],this.unusedBits>7)return this.error="Unused bits for BitString must be in range 0-7",-1;if(!this.unusedBits){let a=o.subarray(1);try{if(a.byteLength){let c=Ri(a,0,a.byteLength);c.offset!==-1&&c.offset===n-1&&(this.value=[c.result])}}catch{}}return this.valueHexView=o.subarray(1),this.blockLength=o.length,r+n}toBER(e,r){if(this.isConstructed)return ir.prototype.toBER.call(this,e,r);if(e)return new ArrayBuffer(this.valueHexView.byteLength+1);if(!this.valueHexView.byteLength)return Wt;let n=new Uint8Array(this.valueHexView.length+1);return n[0]=this.unusedBits,n.set(this.valueHexView,1),n.buffer}toJSON(){return{...super.toJSON(),unusedBits:this.unusedBits,isConstructed:this.isConstructed}}};va.NAME="BitStringValueBlock";en=class extends Ue{constructor({idBlock:e={},lenBlock:r={},...n}={}){var i,s;(i=n.isConstructed)!==null&&i!==void 0||(n.isConstructed=!!(!((s=n.value)===null||s===void 0)&&s.length)),super({idBlock:{isConstructed:n.isConstructed,...e},lenBlock:{...r,isIndefiniteForm:!!n.isIndefiniteForm},...n},va),this.idBlock.tagClass=1,this.idBlock.tagNumber=3}fromBER(e,r,n){return this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,super.fromBER(e,r,n)}onAsciiEncoding(){if(this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length)return Le.prototype.onAsciiEncoding.call(this);{let e=[],r=this.valueBlock.valueHexView;for(let o of r)e.push(o.toString(2).padStart(8,"0"));let n=e.join(""),i=this.constructor.NAME,s=n.substring(0,n.length-this.valueBlock.unusedBits);return`${i} : ${s}`}}};nm=en;I.BitString=nm;en.NAME=Yp;As=class extends or(We){setValueHex(){this.valueHexView.length>=4?(this.warnings.push("Too big Integer for decoding, hex only"),this.isHexOnly=!0,this._valueDec=0):(this.isHexOnly=!1,this.valueHexView.length>0&&(this._valueDec=Eu.call(this)))}constructor({value:e,...r}={}){super(r),this._valueDec=0,r.valueHex&&this.setValueHex(),e!==void 0&&(this.valueDec=e)}set valueDec(e){this._valueDec=e,this.isHexOnly=!1,this.valueHexView=new Uint8Array(Fp(e))}get valueDec(){return this._valueDec}fromDER(e,r,n,i=0){let s=this.fromBER(e,r,n);if(s===-1)return s;let o=this.valueHexView;return o[0]===0&&(o[1]&128)!==0?this.valueHexView=o.subarray(1):i!==0&&o.length<i&&(i-o.length>1&&(i=o.length+1),this.valueHexView=o.subarray(i-o.length)),s}toDER(e=!1){let r=this.valueHexView;switch(!0){case(r[0]&128)!==0:{let n=new Uint8Array(this.valueHexView.length+1);n[0]=0,n.set(r,1),this.valueHexView=n}break;case(r[0]===0&&(r[1]&128)===0):this.valueHexView=this.valueHexView.subarray(1);break}return this.toBER(e)}fromBER(e,r,n){let i=super.fromBER(e,r,n);return i===-1||this.setValueHex(),i}toBER(e){return e?new ArrayBuffer(this.valueHexView.length):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}toString(){let e=this.valueHexView.length*8-1,r=new Uint8Array(this.valueHexView.length*8/3),n=0,i,s=this.valueHexView,o="",a=!1;for(let c=s.byteLength-1;c>=0;c--){i=s[c];for(let f=0;f<8;f++){if((i&1)===1)switch(n){case e:r=KE(Jp(n),r),o="-";break;default:r=DE(r,Jp(n))}n++,i>>=1}}for(let c=0;c<r.length;c++)r[c]&&(a=!0),a&&(o+=Wp.charAt(r[c]));return a===!1&&(o+=Wp.charAt(0)),o}};im=As;As.NAME="IntegerValueBlock";Object.defineProperty(im.prototype,"valueHex",{set:function(t){this.valueHexView=new Uint8Array(t),this.setValueHex()},get:function(){return this.valueHexView.slice().buffer}});It=class extends Ue{constructor(e={}){super(e,As),this.idBlock.tagClass=1,this.idBlock.tagNumber=2}toBigInt(){return ha(),BigInt(this.valueBlock.toString())}static fromBigInt(e){ha();let r=BigInt(e),n=new Ci,i=r.toString(16).replace(/^-/,""),s=new Uint8Array(Z.FromHex(i));if(r<0){let a=new Uint8Array(s.length+(s[0]&128?1:0));a[0]|=128;let f=BigInt(`0x${Z.ToHex(a)}`)+r,d=R.toUint8Array(Z.FromHex(f.toString(16)));d[0]|=128,n.write(d)}else s[0]&128&&n.write(new Uint8Array([0])),n.write(s);return new ws({valueHex:n.final()})}convertToDER(){let e=new ws({valueHex:this.valueBlock.valueHexView});return e.valueBlock.toDER(),e}convertFromDER(){return new ws({valueHex:this.valueBlock.valueHexView[0]===0?this.valueBlock.valueHexView.subarray(1):this.valueBlock.valueHexView})}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()}`}};ws=It;I.Integer=ws;It.NAME="INTEGER";Dn=class extends It{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=10}};sm=Dn;I.Enumerated=sm;Dn.NAME="ENUMERATED";_s=class extends or(We){constructor({valueDec:e=-1,isFirstSid:r=!1,...n}={}){super(n),this.valueDec=e,this.isFirstSid=r}fromBER(e,r,n){if(!n)return r;let i=R.toUint8Array(e);if(!Pr(this,i,r,n))return-1;let s=i.subarray(r,r+n);this.valueHexView=new Uint8Array(n);for(let a=0;a<n&&(this.valueHexView[a]=s[a]&127,this.blockLength++,(s[a]&128)!==0);a++);let o=new Uint8Array(this.blockLength);for(let a=0;a<this.blockLength;a++)o[a]=this.valueHexView[a];return this.valueHexView=o,(s[this.blockLength-1]&128)!==0?(this.error="End of input reached before message was fully decoded",-1):(this.valueHexView[0]===0&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=Un(this.valueHexView,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),r+this.blockLength)}set valueBigInt(e){ha();let r=BigInt(e).toString(2);for(;r.length%7;)r="0"+r;let n=new Uint8Array(r.length/7);for(let i=0;i<n.length;i++)n[i]=parseInt(r.slice(i*7,i*7+7),2)+(i+1<n.length?128:0);this.fromBER(n.buffer,0,n.length)}toBER(e){if(this.isHexOnly){if(e)return new ArrayBuffer(this.valueHexView.byteLength);let i=this.valueHexView,s=new Uint8Array(this.blockLength);for(let o=0;o<this.blockLength-1;o++)s[o]=i[o]|128;return s[this.blockLength-1]=i[this.blockLength-1],s.buffer}let r=Qr(this.valueDec,7);if(r.byteLength===0)return this.error="Error during encoding SID value",Wt;let n=new Uint8Array(r.byteLength);if(!e){let i=new Uint8Array(r),s=r.byteLength-1;for(let o=0;o<s;o++)n[o]=i[o]|128;n[s]=i[s]}return n}toString(){let e="";if(this.isHexOnly)e=Z.ToHex(this.valueHexView);else if(this.isFirstSid){let r=this.valueDec;this.valueDec<=39?e="0.":this.valueDec<=79?(e="1.",r-=40):(e="2.",r-=80),e+=r.toString()}else e=this.valueDec.toString();return e}toJSON(){return{...super.toJSON(),valueDec:this.valueDec,isFirstSid:this.isFirstSid}}};_s.NAME="sidBlock";Sa=class extends We{constructor({value:e=ct,...r}={}){super(r),this.value=[],e&&this.fromString(e)}fromBER(e,r,n){let i=r;for(;n>0;){let s=new _s;if(i=s.fromBER(e,i,n),i===-1)return this.blockLength=0,this.error=s.error,i;this.value.length===0&&(s.isFirstSid=!0),this.blockLength+=s.blockLength,n-=s.blockLength,this.value.push(s)}return i}toBER(e){let r=[];for(let n=0;n<this.value.length;n++){let i=this.value[n].toBER(e);if(i.byteLength===0)return this.error=this.value[n].error,Wt;r.push(i)}return ku(r)}fromString(e){this.value=[];let r=0,n=0,i="",s=!1;do if(n=e.indexOf(".",r),n===-1?i=e.substring(r):i=e.substring(r,n),r=n+1,s){let o=this.value[0],a=0;switch(o.valueDec){case 0:break;case 1:a=40;break;case 2:a=80;break;default:this.value=[];return}let c=parseInt(i,10);if(isNaN(c))return;o.valueDec=c+a,s=!1}else{let o=new _s;if(i>Number.MAX_SAFE_INTEGER){ha();let a=BigInt(i);o.valueBigInt=a}else if(o.valueDec=parseInt(i,10),isNaN(o.valueDec))return;this.value.length||(o.isFirstSid=!0,s=!0),this.value.push(o)}while(n!==-1)}toString(){let e="",r=!1;for(let n=0;n<this.value.length;n++){r=this.value[n].isHexOnly;let i=this.value[n].toString();n!==0&&(e=`${e}.`),r?(i=`{${i}}`,this.value[n].isFirstSid?e=`2.{${i} - 80}`:e+=i):e+=i}return e}toJSON(){let e={...super.toJSON(),value:this.toString(),sidArray:[]};for(let r=0;r<this.value.length;r++)e.sidArray.push(this.value[r].toJSON());return e}};Sa.NAME="ObjectIdentifierValueBlock";Kn=class extends Ue{getValue(){return this.valueBlock.toString()}setValue(e){this.valueBlock.fromString(e)}constructor(e={}){super(e,Sa),this.idBlock.tagClass=1,this.idBlock.tagNumber=6}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()||"empty"}`}toJSON(){return{...super.toJSON(),value:this.getValue()}}};om=Kn;I.ObjectIdentifier=om;Kn.NAME="OBJECT IDENTIFIER";ks=class extends or(xr){constructor({valueDec:e=0,...r}={}){super(r),this.valueDec=e}fromBER(e,r,n){if(n===0)return r;let i=R.toUint8Array(e);if(!Pr(this,i,r,n))return-1;let s=i.subarray(r,r+n);this.valueHexView=new Uint8Array(n);for(let a=0;a<n&&(this.valueHexView[a]=s[a]&127,this.blockLength++,(s[a]&128)!==0);a++);let o=new Uint8Array(this.blockLength);for(let a=0;a<this.blockLength;a++)o[a]=this.valueHexView[a];return this.valueHexView=o,(s[this.blockLength-1]&128)!==0?(this.error="End of input reached before message was fully decoded",-1):(this.valueHexView[0]===0&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=Un(this.valueHexView,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),r+this.blockLength)}toBER(e){if(this.isHexOnly){if(e)return new ArrayBuffer(this.valueHexView.byteLength);let i=this.valueHexView,s=new Uint8Array(this.blockLength);for(let o=0;o<this.blockLength-1;o++)s[o]=i[o]|128;return s[this.blockLength-1]=i[this.blockLength-1],s.buffer}let r=Qr(this.valueDec,7);if(r.byteLength===0)return this.error="Error during encoding SID value",Wt;let n=new Uint8Array(r.byteLength);if(!e){let i=new Uint8Array(r),s=r.byteLength-1;for(let o=0;o<s;o++)n[o]=i[o]|128;n[s]=i[s]}return n.buffer}toString(){let e="";return this.isHexOnly?e=Z.ToHex(this.valueHexView):e=this.valueDec.toString(),e}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}};ks.NAME="relativeSidBlock";Ea=class extends We{constructor({value:e=ct,...r}={}){super(r),this.value=[],e&&this.fromString(e)}fromBER(e,r,n){let i=r;for(;n>0;){let s=new ks;if(i=s.fromBER(e,i,n),i===-1)return this.blockLength=0,this.error=s.error,i;this.blockLength+=s.blockLength,n-=s.blockLength,this.value.push(s)}return i}toBER(e,r){let n=[];for(let i=0;i<this.value.length;i++){let s=this.value[i].toBER(e);if(s.byteLength===0)return this.error=this.value[i].error,Wt;n.push(s)}return ku(n)}fromString(e){this.value=[];let r=0,n=0,i="";do{n=e.indexOf(".",r),n===-1?i=e.substring(r):i=e.substring(r,n),r=n+1;let s=new ks;if(s.valueDec=parseInt(i,10),isNaN(s.valueDec))return!0;this.value.push(s)}while(n!==-1);return!0}toString(){let e="",r=!1;for(let n=0;n<this.value.length;n++){r=this.value[n].isHexOnly;let i=this.value[n].toString();n!==0&&(e=`${e}.`),r&&(i=`{${i}}`),e+=i}return e}toJSON(){let e={...super.toJSON(),value:this.toString(),sidArray:[]};for(let r=0;r<this.value.length;r++)e.sidArray.push(this.value[r].toJSON());return e}};Ea.NAME="RelativeObjectIdentifierValueBlock";xs=class extends Ue{getValue(){return this.valueBlock.toString()}setValue(e){this.valueBlock.fromString(e)}constructor(e={}){super(e,Ea),this.idBlock.tagClass=1,this.idBlock.tagNumber=13}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()||"empty"}`}toJSON(){return{...super.toJSON(),value:this.getValue()}}};am=xs;I.RelativeObjectIdentifier=am;xs.NAME="RelativeObjectIdentifier";ut=class extends Le{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=16}};lm=ut;I.Sequence=lm;ut.NAME="SEQUENCE";ft=class extends Le{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=17}};cm=ft;I.Set=cm;ft.NAME="SET";Aa=class extends or(We){constructor({...e}={}){super(e),this.isHexOnly=!0,this.value=ct}toJSON(){return{...super.toJSON(),value:this.value}}};Aa.NAME="StringValueBlock";_a=class extends Aa{};_a.NAME="SimpleStringValueBlock";tt=class extends Ss{constructor({...e}={}){super(e,_a)}fromBuffer(e){this.valueBlock.value=String.fromCharCode.apply(null,R.toUint8Array(e))}fromString(e){let r=e.length,n=this.valueBlock.valueHexView=new Uint8Array(r);for(let i=0;i<r;i++)n[i]=e.charCodeAt(i);this.valueBlock.value=e}};tt.NAME="SIMPLE STRING";ka=class extends tt{fromBuffer(e){this.valueBlock.valueHexView=R.toUint8Array(e);try{this.valueBlock.value=Z.ToUtf8String(e)}catch(r){this.warnings.push(`Error during "decodeURIComponent": ${r}, using raw string`),this.valueBlock.value=Z.ToBinary(e)}}fromString(e){this.valueBlock.valueHexView=new Uint8Array(Z.FromUtf8String(e)),this.valueBlock.value=e}};ka.NAME="Utf8StringValueBlock";Nt=class extends ka{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=12}};um=Nt;I.Utf8String=um;Nt.NAME="UTF8String";xa=class extends tt{fromBuffer(e){this.valueBlock.value=Z.ToUtf16String(e),this.valueBlock.valueHexView=R.toUint8Array(e)}fromString(e){this.valueBlock.value=e,this.valueBlock.valueHexView=new Uint8Array(Z.FromUtf16String(e))}};xa.NAME="BmpStringValueBlock";qn=class extends xa{constructor({...e}={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=30}};fm=qn;I.BmpString=fm;qn.NAME="BMPString";Ca=class extends tt{fromBuffer(e){let r=ArrayBuffer.isView(e)?e.slice().buffer:e.slice(0),n=new Uint8Array(r);for(let i=0;i<n.length;i+=4)n[i]=n[i+3],n[i+1]=n[i+2],n[i+2]=0,n[i+3]=0;this.valueBlock.value=String.fromCharCode.apply(null,new Uint32Array(r))}fromString(e){let r=e.length,n=this.valueBlock.valueHexView=new Uint8Array(r*4);for(let i=0;i<r;i++){let s=Qr(e.charCodeAt(i),8),o=new Uint8Array(s);if(o.length>4)continue;let a=4-o.length;for(let c=o.length-1;c>=0;c--)n[i*4+c+a]=o[c]}this.valueBlock.value=e}};Ca.NAME="UniversalStringValueBlock";Ln=class extends Ca{constructor({...e}={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=28}};dm=Ln;I.UniversalString=dm;Ln.NAME="UniversalString";jn=class extends tt{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=18}};hm=jn;I.NumericString=hm;jn.NAME="NumericString";Mn=class extends tt{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=19}};pm=Mn;I.PrintableString=pm;Mn.NAME="PrintableString";Fn=class extends tt{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=20}};mm=Fn;I.TeletexString=mm;Fn.NAME="TeletexString";Vn=class extends tt{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=21}};gm=Vn;I.VideotexString=gm;Vn.NAME="VideotexString";Hn=class extends tt{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=22}};ym=Hn;I.IA5String=ym;Hn.NAME="IA5String";Wn=class extends tt{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=25}};bm=Wn;I.GraphicString=bm;Wn.NAME="GraphicString";tn=class extends tt{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=26}};wm=tn;I.VisibleString=wm;tn.NAME="VisibleString";zn=class extends tt{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=27}};vm=zn;I.GeneralString=vm;zn.NAME="GeneralString";Jn=class extends tt{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=29}};Sm=Jn;I.CharacterString=Sm;Jn.NAME="CharacterString";rn=class extends tn{constructor({value:e,valueDate:r,...n}={}){if(super(n),this.year=0,this.month=0,this.day=0,this.hour=0,this.minute=0,this.second=0,e){this.fromString(e),this.valueBlock.valueHexView=new Uint8Array(e.length);for(let i=0;i<e.length;i++)this.valueBlock.valueHexView[i]=e.charCodeAt(i)}r&&(this.fromDate(r),this.valueBlock.valueHexView=new Uint8Array(this.toBuffer())),this.idBlock.tagClass=1,this.idBlock.tagNumber=23}fromBuffer(e){this.fromString(String.fromCharCode.apply(null,R.toUint8Array(e)))}toBuffer(){let e=this.toString(),r=new ArrayBuffer(e.length),n=new Uint8Array(r);for(let i=0;i<e.length;i++)n[i]=e.charCodeAt(i);return r}fromDate(e){this.year=e.getUTCFullYear(),this.month=e.getUTCMonth()+1,this.day=e.getUTCDate(),this.hour=e.getUTCHours(),this.minute=e.getUTCMinutes(),this.second=e.getUTCSeconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second))}fromString(e){let n=/(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})Z/ig.exec(e);if(n===null){this.error="Wrong input string for conversion";return}let i=parseInt(n[1],10);i>=50?this.year=1900+i:this.year=2e3+i,this.month=parseInt(n[2],10),this.day=parseInt(n[3],10),this.hour=parseInt(n[4],10),this.minute=parseInt(n[5],10),this.second=parseInt(n[6],10)}toString(e="iso"){if(e==="iso"){let r=new Array(7);return r[0]=lt(this.year<2e3?this.year-1900:this.year-2e3,2),r[1]=lt(this.month,2),r[2]=lt(this.day,2),r[3]=lt(this.hour,2),r[4]=lt(this.minute,2),r[5]=lt(this.second,2),r[6]="Z",r.join("")}return super.toString(e)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.toDate().toISOString()}`}toJSON(){return{...super.toJSON(),year:this.year,month:this.month,day:this.day,hour:this.hour,minute:this.minute,second:this.second}}};Em=rn;I.UTCTime=Em;rn.NAME="UTCTime";Gn=class extends rn{constructor(e={}){var r;super(e),(r=this.millisecond)!==null&&r!==void 0||(this.millisecond=0),this.idBlock.tagClass=1,this.idBlock.tagNumber=24}fromDate(e){super.fromDate(e),this.millisecond=e.getUTCMilliseconds()}toDate(){let e=Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond);return new Date(e)}fromString(e){let r=!1,n="",i="",s=0,o,a=0,c=0;if(e[e.length-1]==="Z")n=e.substring(0,e.length-1),r=!0;else{let h=new Number(e[e.length-1]);if(isNaN(h.valueOf()))throw new Error("Wrong input string for conversion");n=e}if(r){if(n.indexOf("+")!==-1)throw new Error("Wrong input string for conversion");if(n.indexOf("-")!==-1)throw new Error("Wrong input string for conversion")}else{let h=1,m=n.indexOf("+"),b="";if(m===-1&&(m=n.indexOf("-"),h=-1),m!==-1){if(b=n.substring(m+1),n=n.substring(0,m),b.length!==2&&b.length!==4)throw new Error("Wrong input string for conversion");let y=parseInt(b.substring(0,2),10);if(isNaN(y.valueOf()))throw new Error("Wrong input string for conversion");if(a=h*y,b.length===4){if(y=parseInt(b.substring(2,4),10),isNaN(y.valueOf()))throw new Error("Wrong input string for conversion");c=h*y}}}let f=n.indexOf(".");if(f===-1&&(f=n.indexOf(",")),f!==-1){let h=new Number(`0${n.substring(f)}`);if(isNaN(h.valueOf()))throw new Error("Wrong input string for conversion");s=h.valueOf(),i=n.substring(0,f)}else i=n;switch(!0){case i.length===8:if(o=/(\d{4})(\d{2})(\d{2})/ig,f!==-1)throw new Error("Wrong input string for conversion");break;case i.length===10:if(o=/(\d{4})(\d{2})(\d{2})(\d{2})/ig,f!==-1){let h=60*s;this.minute=Math.floor(h),h=60*(h-this.minute),this.second=Math.floor(h),h=1e3*(h-this.second),this.millisecond=Math.floor(h)}break;case i.length===12:if(o=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})/ig,f!==-1){let h=60*s;this.second=Math.floor(h),h=1e3*(h-this.second),this.millisecond=Math.floor(h)}break;case i.length===14:if(o=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})/ig,f!==-1){let h=1e3*s;this.millisecond=Math.floor(h)}break;default:throw new Error("Wrong input string for conversion")}let d=o.exec(i);if(d===null)throw new Error("Wrong input string for conversion");for(let h=1;h<d.length;h++)switch(h){case 1:this.year=parseInt(d[h],10);break;case 2:this.month=parseInt(d[h],10);break;case 3:this.day=parseInt(d[h],10);break;case 4:this.hour=parseInt(d[h],10)+a;break;case 5:this.minute=parseInt(d[h],10)+c;break;case 6:this.second=parseInt(d[h],10);break;default:throw new Error("Wrong input string for conversion")}if(r===!1){let h=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond);this.year=h.getUTCFullYear(),this.month=h.getUTCMonth(),this.day=h.getUTCDay(),this.hour=h.getUTCHours(),this.minute=h.getUTCMinutes(),this.second=h.getUTCSeconds(),this.millisecond=h.getUTCMilliseconds()}}toString(e="iso"){if(e==="iso"){let r=[];return r.push(lt(this.year,4)),r.push(lt(this.month,2)),r.push(lt(this.day,2)),r.push(lt(this.hour,2)),r.push(lt(this.minute,2)),r.push(lt(this.second,2)),this.millisecond!==0&&(r.push("."),r.push(lt(this.millisecond,3))),r.push("Z"),r.join("")}return super.toString(e)}toJSON(){return{...super.toJSON(),millisecond:this.millisecond}}};Am=Gn;I.GeneralizedTime=Am;Gn.NAME="GeneralizedTime";Cs=class extends Nt{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=31}};_m=Cs;I.DATE=_m;Cs.NAME="DATE";Ps=class extends Nt{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=32}};km=Ps;I.TimeOfDay=km;Ps.NAME="TimeOfDay";Rs=class extends Nt{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=33}};xm=Rs;I.DateTime=xm;Rs.NAME="DateTime";Ts=class extends Nt{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=34}};Cm=Ts;I.Duration=Cm;Ts.NAME="Duration";Bs=class extends Nt{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=14}};Pm=Bs;I.TIME=Pm;Bs.NAME="TIME";sr=class{constructor({name:e=ct,optional:r=!1}={}){this.name=e,this.optional=r}},Pi=class extends sr{constructor({value:e=[],...r}={}){super(r),this.value=e}},Yn=class extends sr{constructor({value:e=new sr,local:r=!1,...n}={}){super(n),this.value=e,this.local=r}},_u=class{get data(){return this.dataView.slice().buffer}set data(e){this.dataView=R.toUint8Array(e)}constructor({data:e=Pa}={}){this.dataView=R.toUint8Array(e)}fromBER(e,r,n){let i=r+n;return this.dataView=R.toUint8Array(e).subarray(r,i),i}toBER(e){return this.dataView.slice().buffer}}});var Te,D,Qn=be(()=>{"use strict";(function(t){t[t.Sequence=0]="Sequence",t[t.Set=1]="Set",t[t.Choice=2]="Choice"})(Te||(Te={}));(function(t){t[t.Any=1]="Any",t[t.Boolean=2]="Boolean",t[t.OctetString=3]="OctetString",t[t.BitString=4]="BitString",t[t.Integer=5]="Integer",t[t.Enumerated=6]="Enumerated",t[t.ObjectIdentifier=7]="ObjectIdentifier",t[t.Utf8String=8]="Utf8String",t[t.BmpString=9]="BmpString",t[t.UniversalString=10]="UniversalString",t[t.NumericString=11]="NumericString",t[t.PrintableString=12]="PrintableString",t[t.TeletexString=13]="TeletexString",t[t.VideotexString=14]="VideotexString",t[t.IA5String=15]="IA5String",t[t.GraphicString=16]="GraphicString",t[t.VisibleString=17]="VisibleString",t[t.GeneralString=18]="GeneralString",t[t.CharacterString=19]="CharacterString",t[t.UTCTime=20]="UTCTime",t[t.GeneralizedTime=21]="GeneralizedTime",t[t.DATE=22]="DATE",t[t.TimeOfDay=23]="TimeOfDay",t[t.DateTime=24]="DateTime",t[t.Duration=25]="Duration",t[t.TIME=26]="TIME",t[t.Null=27]="Null"})(D||(D={}))});var Rm=be(()=>{"use strict";Tr();Yr()});var Tm=be(()=>{"use strict";Tr();Yr()});var Cu=be(()=>{"use strict";Rm();Tm()});function Ut(t){return{fromASN:e=>e.valueBlock.value,toASN:e=>new t({value:e})}}function Ti(t){switch(t){case D.Any:return LE;case D.BitString:return ME;case D.BmpString:return zE;case D.Boolean:return VE;case D.CharacterString:return nA;case D.Enumerated:return jE;case D.GeneralString:return rA;case D.GeneralizedTime:return sA;case D.GraphicString:return eA;case D.IA5String:return XE;case D.Integer:return Ra;case D.Null:return oA;case D.NumericString:return GE;case D.ObjectIdentifier:return FE;case D.OctetString:return HE;case D.PrintableString:return YE;case D.TeletexString:return QE;case D.UTCTime:return iA;case D.UniversalString:return JE;case D.Utf8String:return WE;case D.VideotexString:return ZE;case D.VisibleString:return tA;default:return null}}var LE,Ra,jE,ME,FE,VE,HE,WE,zE,JE,GE,YE,QE,ZE,XE,eA,tA,rA,nA,iA,sA,oA,Os=be(()=>{"use strict";Tr();Qn();Cu();LE={fromASN:t=>t instanceof Ht?null:t.valueBeforeDecodeView,toASN:t=>{if(t===null)return new Ht;let e=Rr(t);if(e.result.error)throw new Error(e.result.error);return e.result}},Ra={fromASN:t=>t.valueBlock.valueHexView.byteLength>=4?t.valueBlock.toString():t.valueBlock.valueDec,toASN:t=>new It({value:+t})},jE={fromASN:t=>t.valueBlock.valueDec,toASN:t=>new Dn({value:t})},ME={fromASN:t=>t.valueBlock.valueHexView,toASN:t=>new en({valueHex:t})},FE={fromASN:t=>t.valueBlock.toString(),toASN:t=>new Kn({value:t})},VE={fromASN:t=>t.valueBlock.value,toASN:t=>new $n({value:t})},HE={fromASN:t=>t.valueBlock.valueHexView,toASN:t=>new Xr({valueHex:t})};WE=Ut(Nt),zE=Ut(qn),JE=Ut(Ln),GE=Ut(jn),YE=Ut(Mn),QE=Ut(Fn),ZE=Ut(Vn),XE=Ut(Hn),eA=Ut(Wn),tA=Ut(tn),rA=Ut(zn),nA=Ut(Jn),iA={fromASN:t=>t.toDate(),toASN:t=>new rn({valueDate:t})},sA={fromASN:t=>t.toDate(),toASN:t=>new Gn({valueDate:t})},oA={fromASN:()=>null,toASN:()=>new Ht}});function $t(t){return typeof t=="function"&&t.prototype?t.prototype.toASN&&t.prototype.fromASN?!0:$t(t.prototype):!!(t&&typeof t=="object"&&"toASN"in t&&"fromASN"in t)}function Ru(t){var e;if(t){let r=Object.getPrototypeOf(t);return((e=r?.prototype)===null||e===void 0?void 0:e.constructor)===Array?!0:Ru(r)}return!1}function Bm(t,e){if(!(t&&e)||t.byteLength!==e.byteLength)return!1;let r=new Uint8Array(t),n=new Uint8Array(e);for(let i=0;i<t.byteLength;i++)if(r[i]!==n[i])return!1;return!0}var Ta=be(()=>{"use strict"});var Ba,Om=be(()=>{"use strict";Tr();Qn();Ta();Ba=class{constructor(){this.items=new WeakMap}has(e){return this.items.has(e)}get(e,r=!1){let n=this.items.get(e);if(!n)throw new Error(`Cannot get schema for '${e.prototype.constructor.name}' target`);if(r&&!n.schema)throw new Error(`Schema '${e.prototype.constructor.name}' doesn't contain ASN.1 schema. Call 'AsnSchemaStorage.cache'.`);return n}cache(e){let r=this.get(e);r.schema||(r.schema=this.create(e,!0))}createDefault(e){let r={type:Te.Sequence,items:{}},n=this.findParentSchema(e);return n&&(Object.assign(r,n),r.items=Object.assign({},r.items,n.items)),r}create(e,r){let n=this.items.get(e)||this.createDefault(e),i=[];for(let s in n.items){let o=n.items[s],a=r?s:"",c;if(typeof o.type=="number"){let d=D[o.type],h=zt[d];if(!h)throw new Error(`Cannot get ASN1 class by name '${d}'`);c=new h({name:a})}else $t(o.type)?c=new o.type().toSchema(a):o.optional?this.get(o.type).type===Te.Choice?c=new sr({name:a}):(c=this.create(o.type,!1),c.name=a):c=new sr({name:a});let f=!!o.optional||o.defaultValue!==void 0;if(o.repeated){c.name="";let d=o.repeated==="set"?ft:ut;c=new d({name:"",value:[new Yn({name:a,value:c})]})}if(o.context!==null&&o.context!==void 0)if(o.implicit)if(typeof o.type=="number"||$t(o.type)){let d=o.repeated?Le:Cr;i.push(new d({name:a,optional:f,idBlock:{tagClass:3,tagNumber:o.context}}))}else{this.cache(o.type);let d=!!o.repeated,h=d?c:this.get(o.type,!0).schema;h="valueBlock"in h?h.valueBlock.value:h.value,i.push(new Le({name:d?"":a,optional:f,idBlock:{tagClass:3,tagNumber:o.context},value:h}))}else i.push(new Le({optional:f,idBlock:{tagClass:3,tagNumber:o.context},value:[c]}));else c.optional=f,i.push(c)}switch(n.type){case Te.Sequence:return new ut({value:i,name:""});case Te.Set:return new ft({value:i,name:""});case Te.Choice:return new Pi({value:i,name:""});default:throw new Error("Unsupported ASN1 type in use")}}set(e,r){return this.items.set(e,r),this}findParentSchema(e){let r=Object.getPrototypeOf(e);return r?this.items.get(r)||this.findParentSchema(r):null}}});var rt,Oa=be(()=>{"use strict";Om();rt=new Ba});var Zn,le,Im=be(()=>{"use strict";Os();Qn();Oa();Zn=t=>e=>{let r;rt.has(e)?r=rt.get(e):(r=rt.createDefault(e),rt.set(e,r)),Object.assign(r,t)},le=t=>(e,r)=>{let n;rt.has(e.constructor)?n=rt.get(e.constructor):(n=rt.createDefault(e.constructor),rt.set(e.constructor,n));let i=Object.assign({},t);if(typeof i.type=="number"&&!i.converter){let s=Ti(t.type);if(!s)throw new Error(`Cannot get default converter for property '${r}' of ${e.constructor.name}`);i.converter=s}n.items[r]=i}});var Is,Nm=be(()=>{"use strict";Is=class extends Error{constructor(){super(...arguments),this.schemas=[]}}});var Tu=be(()=>{"use strict";Nm()});var ce,Bu=be(()=>{"use strict";Tr();Qn();Os();Tu();Ta();Oa();ce=class{static parse(e,r){let n=Rr(e);if(n.result.error)throw new Error(n.result.error);return this.fromASN(n.result,r)}static fromASN(e,r){var n;try{if($t(r))return new r().fromASN(e);let i=rt.get(r);rt.cache(r);let s=i.schema;if(e.constructor===Le&&i.type!==Te.Choice){s=new Le({idBlock:{tagClass:3,tagNumber:e.idBlock.tagNumber},value:i.schema.valueBlock.value});for(let c in i.items)delete e[c]}let o=Zr({},e,s);if(!o.verified)throw new Is(`Data does not match to ${r.name} ASN1 schema. ${o.result.error}`);let a=new r;if(Ru(r)){if(!("value"in e.valueBlock&&Array.isArray(e.valueBlock.value)))throw new Error("Cannot get items from the ASN.1 parsed value. ASN.1 object is not constructed.");let c=i.itemType;if(typeof c=="number"){let f=Ti(c);if(!f)throw new Error(`Cannot get default converter for array item of ${r.name} ASN1 schema`);return r.from(e.valueBlock.value,d=>f.fromASN(d))}else return r.from(e.valueBlock.value,f=>this.fromASN(f,c))}for(let c in i.items){let f=o.result[c];if(!f)continue;let d=i.items[c],h=d.type;if(typeof h=="number"||$t(h)){let m=(n=d.converter)!==null&&n!==void 0?n:$t(h)?new h:null;if(!m)throw new Error("Converter is empty");if(d.repeated)if(d.implicit){let b=d.repeated==="sequence"?ut:ft,y=new b;y.valueBlock=f.valueBlock;let w=Rr(y.toBER(!1));if(w.offset===-1)throw new Error(`Cannot parse the child item. ${w.result.error}`);if(!("value"in w.result.valueBlock&&Array.isArray(w.result.valueBlock.value)))throw new Error("Cannot get items from the ASN.1 parsed value. ASN.1 object is not constructed.");let S=w.result.valueBlock.value;a[c]=Array.from(S,_=>m.fromASN(_))}else a[c]=Array.from(f,b=>m.fromASN(b));else{let b=f;if(d.implicit){let y;if($t(h))y=new h().toSchema("");else{let w=D[h],S=zt[w];if(!S)throw new Error(`Cannot get '${w}' class from asn1js module`);y=new S}y.valueBlock=b.valueBlock,b=Rr(y.toBER(!1)).result}a[c]=m.fromASN(b)}}else if(d.repeated){if(!Array.isArray(f))throw new Error("Cannot get list of items from the ASN.1 parsed value. ASN.1 value should be iterable.");a[c]=Array.from(f,m=>this.fromASN(m,h))}else a[c]=this.fromASN(f,h)}return a}catch(i){throw i instanceof Is&&i.schemas.push(r.name),i}}}});var he,Ou=be(()=>{"use strict";Tr();Os();Qn();Ta();Oa();he=class t{static serialize(e){return e instanceof Ue?e.toBER(!1):this.toASN(e).toBER(!1)}static toASN(e){if(e&&typeof e=="object"&&$t(e))return e.toASN();if(!(e&&typeof e=="object"))throw new TypeError("Parameter 1 should be type of Object.");let r=e.constructor,n=rt.get(r);rt.cache(r);let i=[];if(n.itemType){if(!Array.isArray(e))throw new TypeError("Parameter 1 should be type of Array.");if(typeof n.itemType=="number"){let o=Ti(n.itemType);if(!o)throw new Error(`Cannot get default converter for array item of ${r.name} ASN1 schema`);i=e.map(a=>o.toASN(a))}else i=e.map(o=>this.toAsnItem({type:n.itemType},"[]",r,o))}else for(let o in n.items){let a=n.items[o],c=e[o];if(c===void 0||a.defaultValue===c||typeof a.defaultValue=="object"&&typeof c=="object"&&Bm(this.serialize(a.defaultValue),this.serialize(c)))continue;let f=t.toAsnItem(a,o,r,c);if(typeof a.context=="number")if(a.implicit)if(!a.repeated&&(typeof a.type=="number"||$t(a.type))){let d={};d.valueHex=f instanceof Ht?f.valueBeforeDecodeView:f.valueBlock.toBER(),i.push(new Cr({optional:a.optional,idBlock:{tagClass:3,tagNumber:a.context},...d}))}else i.push(new Le({optional:a.optional,idBlock:{tagClass:3,tagNumber:a.context},value:f.valueBlock.value}));else i.push(new Le({optional:a.optional,idBlock:{tagClass:3,tagNumber:a.context},value:[f]}));else a.repeated?i=i.concat(f):i.push(f)}let s;switch(n.type){case Te.Sequence:s=new ut({value:i});break;case Te.Set:s=new ft({value:i});break;case Te.Choice:if(!i[0])throw new Error(`Schema '${r.name}' has wrong data. Choice cannot be empty.`);s=i[0];break}return s}static toAsnItem(e,r,n,i){let s;if(typeof e.type=="number"){let o=e.converter;if(!o)throw new Error(`Property '${r}' doesn't have converter for type ${D[e.type]} in schema '${n.name}'`);if(e.repeated){if(!Array.isArray(i))throw new TypeError("Parameter 'objProp' should be type of Array.");let a=Array.from(i,f=>o.toASN(f)),c=e.repeated==="sequence"?ut:ft;s=new c({value:a})}else s=o.toASN(i)}else if(e.repeated){if(!Array.isArray(i))throw new TypeError("Parameter 'objProp' should be type of Array.");let o=Array.from(i,c=>this.toASN(c)),a=e.repeated==="sequence"?ut:ft;s=new a({value:o})}else s=this.toASN(i);return s}}});var Um=be(()=>{"use strict"});var Ia,$m=be(()=>{"use strict";Tr();Yr();Bu();Ou();Ia=class t{static serialize(e){return he.serialize(e)}static parse(e,r){return ce.parse(e,r)}static toString(e){let r=R.isBufferSource(e)?R.toArrayBuffer(e):t.serialize(e),n=Rr(r);if(n.offset===-1)throw new Error(`Cannot decode ASN.1 data. ${n.result.error}`);return n.result.toString()}}});var Iu=be(()=>{"use strict";Os();Cu();Im();Qn();Bu();Ou();Tu();Um();$m()});function ie(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s}var Dm=be(()=>{"use strict"});function aA(t,e){switch(e){case Oe.Boolean:return typeof t=="boolean";case Oe.Number:return typeof t=="number";case Oe.String:return typeof t=="string"}return!0}function Da(t,e){if(!aA(t,e))throw new TypeError(`Value must be ${Oe[e]}`)}function Ka(t){return t&&t.prototype?t.prototype.toJSON&&t.prototype.fromJSON?!0:Ka(t.prototype):!!(t&&t.toJSON&&t.fromJSON)}function lA(t){let e=[];return t.pattern&&e.push(new $u(t.pattern)),(t.type===Oe.Number||t.type===Oe.Any)&&((t.minInclusive!==void 0||t.maxInclusive!==void 0)&&e.push(new Du(t.minInclusive,t.maxInclusive)),(t.minExclusive!==void 0||t.maxExclusive!==void 0)&&e.push(new Ku(t.minExclusive,t.maxExclusive)),t.enumeration!==void 0&&e.push(new qu(t.enumeration))),(t.type===Oe.String||t.repeated||t.type===Oe.Any)&&(t.length!==void 0||t.minLength!==void 0||t.maxLength!==void 0)&&e.push(new Ua(t.length,t.minLength,t.maxLength)),e}var Oi,Nu,Bi,ar,Ns,Na,Oe,Uu,Us,Jt,$u,Du,Ku,Ua,qu,$a,dt,Ge,$e,Lu=be(()=>{"use strict";Oi=class extends Error{constructor(e,r){super(r?`${e}. See the inner exception for more details.`:e),this.message=e,this.innerError=r}},Nu=class extends Oi{constructor(e,r,n){super(r,n),this.schema=e}},Bi=class extends Nu{constructor(e,r,n){super(e,`JSON doesn't match to '${e.target.name}' schema. ${r}`,n)}},ar=class extends Oi{},Ns=class extends Oi{constructor(e,r,n){super(`Cannot serialize by '${e}' schema. ${r}`,n),this.schemaName=e}},Na=class extends Bi{constructor(e,r,n={}){super(e,"Some keys doesn't match to schema"),this.keys=r,this.errors=n}};(function(t){t[t.Any=0]="Any",t[t.Boolean=1]="Boolean",t[t.Number=2]="Number",t[t.String=3]="String"})(Oe||(Oe={}));Uu=class{constructor(){this.items=new Map}has(e){return this.items.has(e)||!!this.findParentSchema(e)}get(e){let r=this.items.get(e)||this.findParentSchema(e);if(!r)throw new Error("Cannot get schema for current target");return r}create(e){let r={names:{}},n=this.findParentSchema(e);if(n){Object.assign(r,n),r.names={};for(let i in n.names)r.names[i]=Object.assign({},n.names[i])}return r.target=e,r}set(e,r){return this.items.set(e,r),this}findParentSchema(e){let r=e.__proto__;return r?this.items.get(r)||this.findParentSchema(r):null}},Us="default",Jt=new Uu,$u=class{constructor(e){this.pattern=new RegExp(e)}validate(e){let r=new RegExp(this.pattern.source,this.pattern.flags);if(typeof e!="string")throw new ar("Incoming value must be string");if(!r.exec(e))throw new ar(`Value doesn't match to pattern '${r.toString()}'`)}},Du=class{constructor(e=Number.MIN_VALUE,r=Number.MAX_VALUE){this.min=e,this.max=r}validate(e){if(Da(e,Oe.Number),!(this.min<=e&&e<=this.max)){let r=this.min===Number.MIN_VALUE?"MIN":this.min,n=this.max===Number.MAX_VALUE?"MAX":this.max;throw new ar(`Value doesn't match to diapason [${r},${n}]`)}}},Ku=class{constructor(e=Number.MIN_VALUE,r=Number.MAX_VALUE){this.min=e,this.max=r}validate(e){if(Da(e,Oe.Number),!(this.min<e&&e<this.max)){let r=this.min===Number.MIN_VALUE?"MIN":this.min,n=this.max===Number.MAX_VALUE?"MAX":this.max;throw new ar(`Value doesn't match to diapason (${r},${n})`)}}},Ua=class{constructor(e,r,n){this.length=e,this.minLength=r,this.maxLength=n}validate(e){if(this.length!==void 0){if(e.length!==this.length)throw new ar(`Value length must be exactly ${this.length}.`);return}if(this.minLength!==void 0&&e.length<this.minLength)throw new ar(`Value length must be more than ${this.minLength}.`);if(this.maxLength!==void 0&&e.length>this.maxLength)throw new ar(`Value length must be less than ${this.maxLength}.`)}},qu=class{constructor(e){this.enumeration=e}validate(e){if(Da(e,Oe.String),!this.enumeration.includes(e))throw new ar(`Value must be one of ${this.enumeration.map(r=>`'${r}'`).join(", ")}`)}},$a=class{static checkValues(e,r){let n=Array.isArray(e)?e:[e];for(let i of n)for(let s of r.validations)s instanceof Ua&&r.repeated?s.validate(e):s.validate(i)}static checkTypes(e,r){if(r.repeated&&!Array.isArray(e))throw new TypeError("Value must be Array");if(typeof r.type=="number"){let n=Array.isArray(e)?e:[e];for(let i of n)Da(i,r.type)}}static getSchemaByName(e,r=Us){return{...e.names[Us],...e.names[r]}}},dt=class extends $a{static serialize(e,r,n,i){let s=this.toJSON(e,r);return JSON.stringify(s,n,i)}static toJSON(e,r={}){let n,i=r.targetSchema,s=r.schemaName||Us;if(Ka(e))return e.toJSON();if(Array.isArray(e)){n=[];for(let o of e)n.push(this.toJSON(o,r))}else if(typeof e=="object"){if(i&&!Jt.has(i))throw new Oi("Cannot get schema for `targetSchema` param");if(i=i||e.constructor,Jt.has(i)){let o=Jt.get(i);n={};let a=this.getSchemaByName(o,s);for(let c in a)try{let f=a[c],d=e[c],h;if(f.optional&&d===void 0||f.defaultValue!==void 0&&d===f.defaultValue)continue;if(!f.optional&&d===void 0)throw new Ns(i.name,`Property '${c}' is required.`);typeof f.type=="number"?f.converter?f.repeated?h=d.map(m=>f.converter.toJSON(m,e)):h=f.converter.toJSON(d,e):h=d:f.repeated?h=d.map(m=>this.toJSON(m,{schemaName:s})):h=this.toJSON(d,{schemaName:s}),this.checkTypes(h,f),this.checkValues(h,f),n[f.name||c]=h}catch(f){throw f instanceof Ns?f:new Ns(o.target.name,`Property '${c}' is wrong. ${f.message}`,f)}}else{n={};for(let o in e)n[o]=this.toJSON(e[o],{schemaName:s})}}else n=e;return n}},Ge=class t extends $a{static parse(e,r){let n=JSON.parse(e);return this.fromJSON(n,r)}static fromJSON(e,r){let n=r.targetSchema,i=r.schemaName||Us,s=new n;if(Ka(s))return s.fromJSON(e);let o=Jt.get(n),a=this.getSchemaByName(o,i),c={};r.strictProperty&&!Array.isArray(e)&&t.checkStrictProperty(e,a,o);for(let d in a)try{let h=a[d],m=h.name||d,b=e[m];if(b===void 0&&(h.optional||h.defaultValue!==void 0))continue;if(!h.optional&&b===void 0)throw new Bi(o,`Property '${m}' is required.`);if(this.checkTypes(b,h),this.checkValues(b,h),typeof h.type=="number")h.converter?h.repeated?s[d]=b.map(y=>h.converter.fromJSON(y,s)):s[d]=h.converter.fromJSON(b,s):s[d]=b;else{let y={...r,targetSchema:h.type,schemaName:i};h.repeated?s[d]=b.map(w=>this.fromJSON(w,y)):s[d]=this.fromJSON(b,y)}}catch(h){if(h instanceof Bi||(h=new Bi(o,`Property '${d}' is wrong. ${h.message}`,h)),r.strictAllKeys)c[d]=h;else throw h}let f=Object.keys(c);if(f.length)throw new Na(o,f,c);return s}static checkStrictProperty(e,r,n){let i=Object.keys(e),s=Object.keys(r),o=[];for(let a of i)s.indexOf(a)===-1&&o.push(a);if(o.length)throw new Na(n,o)}};$e=(t={})=>(e,r)=>{let n=`Cannot set type for ${r} property of ${e.constructor.name} schema`,i;Jt.has(e.constructor)?(i=Jt.get(e.constructor),i.target!==e.constructor&&(i=Jt.create(e.constructor),Jt.set(e.constructor,i))):(i=Jt.create(e.constructor),Jt.set(e.constructor,i));let s={type:Oe.Any,validations:[]},o=Object.assign(s,t);if(o.validations=lA(o),typeof o.type!="number"&&!Jt.has(o.type)&&!Ka(o.type))throw new Error(`${n}. Assigning type doesn't have schema.`);let a;Array.isArray(t.schema)?a=t.schema:a=[t.schema||Us];for(let c of a){i.names[c]||(i.names[c]={});let f=i.names[c];f[r]=o}}});function cA(t){return typeof t=="object"&&"kty"in t}var Et,Xn,Gt,J,ju,je,nn,qa,La,ja,Ma,Fa,Va,$s,Ds,Ha,Wa,za,Ks,Ja,uA,Br,qs,Ga,Ya,Ls,Or,sn,js,Yt,lr,At,Ms,Ii,ei,Fu,fA,ti,Fs,Qa,Za,Xa,el,qm,cl,Lm,jm,Mm,nt,Fm,Vm,Hm,Wm,zm,Jm,Gm,Ym,Qm,Zm,Xm,eg,tg,rg,dA,hA,pA,mA,N,ve,tl,rl,nl,il,sl,ol,al,Mu,Km,gA,ll,ul=be(()=>{"use strict";Yr();Yr();Iu();Dm();Lu();Tr();Et=class extends Error{},Xn=class extends Et{},Gt=class extends Et{constructor(e){super(`Unsupported operation: ${e?`${e}`:""}`)}},J=class extends Et{},ju=class extends Et{constructor(e){super(`${e}: Missing required property`)}};je=class{async digest(...e){return this.checkDigest.apply(this,e),this.onDigest.apply(this,e)}checkDigest(e,r){this.checkAlgorithmName(e)}async onDigest(e,r){throw new Gt("digest")}async generateKey(...e){return this.checkGenerateKey.apply(this,e),this.onGenerateKey.apply(this,e)}checkGenerateKey(e,r,n,...i){if(this.checkAlgorithmName(e),this.checkGenerateKeyParams(e),!(n&&n.length))throw new TypeError("Usages cannot be empty when creating a key.");let s;Array.isArray(this.usages)?s=this.usages:s=this.usages.privateKey.concat(this.usages.publicKey),this.checkKeyUsages(n,s)}checkGenerateKeyParams(e){}async onGenerateKey(e,r,n,...i){throw new Gt("generateKey")}async sign(...e){return this.checkSign.apply(this,e),this.onSign.apply(this,e)}checkSign(e,r,n,...i){this.checkAlgorithmName(e),this.checkAlgorithmParams(e),this.checkCryptoKey(r,"sign")}async onSign(e,r,n,...i){throw new Gt("sign")}async verify(...e){return this.checkVerify.apply(this,e),this.onVerify.apply(this,e)}checkVerify(e,r,n,i,...s){this.checkAlgorithmName(e),this.checkAlgorithmParams(e),this.checkCryptoKey(r,"verify")}async onVerify(e,r,n,i,...s){throw new Gt("verify")}async encrypt(...e){return this.checkEncrypt.apply(this,e),this.onEncrypt.apply(this,e)}checkEncrypt(e,r,n,i={},...s){this.checkAlgorithmName(e),this.checkAlgorithmParams(e),this.checkCryptoKey(r,i.keyUsage?"encrypt":void 0)}async onEncrypt(e,r,n,...i){throw new Gt("encrypt")}async decrypt(...e){return this.checkDecrypt.apply(this,e),this.onDecrypt.apply(this,e)}checkDecrypt(e,r,n,i={},...s){this.checkAlgorithmName(e),this.checkAlgorithmParams(e),this.checkCryptoKey(r,i.keyUsage?"decrypt":void 0)}async onDecrypt(e,r,n,...i){throw new Gt("decrypt")}async deriveBits(...e){return this.checkDeriveBits.apply(this,e),this.onDeriveBits.apply(this,e)}checkDeriveBits(e,r,n,i={},...s){if(this.checkAlgorithmName(e),this.checkAlgorithmParams(e),this.checkCryptoKey(r,i.keyUsage?"deriveBits":void 0),n%8!==0)throw new J("length: Is not multiple of 8")}async onDeriveBits(e,r,n,...i){throw new Gt("deriveBits")}async exportKey(...e){return this.checkExportKey.apply(this,e),this.onExportKey.apply(this,e)}checkExportKey(e,r,...n){if(this.checkKeyFormat(e),this.checkCryptoKey(r),!r.extractable)throw new Et("key: Is not extractable")}async onExportKey(e,r,...n){throw new Gt("exportKey")}async importKey(...e){return this.checkImportKey.apply(this,e),this.onImportKey.apply(this,e)}checkImportKey(e,r,n,i,s,...o){this.checkKeyFormat(e),this.checkKeyData(e,r),this.checkAlgorithmName(n),this.checkImportParams(n),Array.isArray(this.usages)&&this.checkKeyUsages(s,this.usages)}async onImportKey(e,r,n,i,s,...o){throw new Gt("importKey")}checkAlgorithmName(e){if(e.name.toLowerCase()!==this.name.toLowerCase())throw new Xn("Unrecognized name")}checkAlgorithmParams(e){}checkDerivedKeyParams(e){}checkKeyUsages(e,r){for(let n of e)if(r.indexOf(n)===-1)throw new TypeError("Cannot create a key using the specified key usages")}checkCryptoKey(e,r){if(this.checkAlgorithmName(e.algorithm),r&&e.usages.indexOf(r)===-1)throw new Et("key does not match that of operation")}checkRequiredProperty(e,r){if(!(r in e))throw new ju(r)}checkHashAlgorithm(e,r){for(let n of r)if(n.toLowerCase()===e.name.toLowerCase())return;throw new J(`hash: Must be one of ${r.join(", ")}`)}checkImportParams(e){}checkKeyFormat(e){switch(e){case"raw":case"pkcs8":case"spki":case"jwk":break;default:throw new TypeError("format: Is invalid value. Must be 'jwk', 'raw', 'spki', or 'pkcs8'")}}checkKeyData(e,r){if(!r)throw new TypeError("keyData: Cannot be empty on empty on key importing");if(e==="jwk"){if(!cA(r))throw new TypeError("keyData: Is not JsonWebToken")}else if(!R.isBufferSource(r))throw new TypeError("keyData: Is not ArrayBufferView or ArrayBuffer")}prepareData(e){return R.toArrayBuffer(e)}},nn=class extends je{checkGenerateKeyParams(e){if(this.checkRequiredProperty(e,"length"),typeof e.length!="number")throw new TypeError("length: Is not of type Number");switch(e.length){case 128:case 192:case 256:break;default:throw new TypeError("length: Must be 128, 192, or 256")}}checkDerivedKeyParams(e){this.checkGenerateKeyParams(e)}},qa=class extends nn{constructor(){super(...arguments),this.name="AES-CBC",this.usages=["encrypt","decrypt","wrapKey","unwrapKey"]}checkAlgorithmParams(e){if(this.checkRequiredProperty(e,"iv"),!(e.iv instanceof ArrayBuffer||ArrayBuffer.isView(e.iv)))throw new TypeError("iv: Is not of type '(ArrayBuffer or ArrayBufferView)'");if(e.iv.byteLength!==16)throw new TypeError("iv: Must have length 16 bytes")}},La=class extends nn{constructor(){super(...arguments),this.name="AES-CMAC",this.usages=["sign","verify"]}checkAlgorithmParams(e){if(this.checkRequiredProperty(e,"length"),typeof e.length!="number")throw new TypeError("length: Is not a Number");if(e.length<1)throw new J("length: Must be more than 0")}},ja=class extends nn{constructor(){super(...arguments),this.name="AES-CTR",this.usages=["encrypt","decrypt","wrapKey","unwrapKey"]}checkAlgorithmParams(e){if(this.checkRequiredProperty(e,"counter"),!(e.counter instanceof ArrayBuffer||ArrayBuffer.isView(e.counter)))throw new TypeError("counter: Is not of type '(ArrayBuffer or ArrayBufferView)'");if(e.counter.byteLength!==16)throw new TypeError("iv: Must have length 16 bytes");if(this.checkRequiredProperty(e,"length"),typeof e.length!="number")throw new TypeError("length: Is not a Number");if(e.length<1)throw new J("length: Must be more than 0")}},Ma=class extends nn{constructor(){super(...arguments),this.name="AES-ECB",this.usages=["encrypt","decrypt","wrapKey","unwrapKey"]}},Fa=class extends nn{constructor(){super(...arguments),this.name="AES-GCM",this.usages=["encrypt","decrypt","wrapKey","unwrapKey"]}checkAlgorithmParams(e){var r;if(this.checkRequiredProperty(e,"iv"),!(e.iv instanceof ArrayBuffer||ArrayBuffer.isView(e.iv)))throw new TypeError("iv: Is not of type '(ArrayBuffer or ArrayBufferView)'");if(e.iv.byteLength<1)throw new J("iv: Must have length more than 0 and less than 2^64 - 1");switch((r=e.tagLength)!==null&&r!==void 0||(e.tagLength=128),e.tagLength){case 32:case 64:case 96:case 104:case 112:case 120:case 128:break;default:throw new J("tagLength: Must be one of 32, 64, 96, 104, 112, 120 or 128")}}},Va=class extends nn{constructor(){super(...arguments),this.name="AES-KW",this.usages=["wrapKey","unwrapKey"]}},$s=class extends je{constructor(){super(...arguments),this.usages=["encrypt","decrypt","wrapKey","unwrapKey"]}checkAlgorithmParams(e){if(this.ivSize){if(this.checkRequiredProperty(e,"iv"),!(e.iv instanceof ArrayBuffer||ArrayBuffer.isView(e.iv)))throw new TypeError("iv: Is not of type '(ArrayBuffer or ArrayBufferView)'");if(e.iv.byteLength!==this.ivSize)throw new TypeError(`iv: Must have length ${this.ivSize} bytes`)}}checkGenerateKeyParams(e){if(this.checkRequiredProperty(e,"length"),typeof e.length!="number")throw new TypeError("length: Is not of type Number");if(e.length!==this.keySizeBits)throw new J(`algorithm.length: Must be ${this.keySizeBits}`)}checkDerivedKeyParams(e){this.checkGenerateKeyParams(e)}},Ds=class extends je{constructor(){super(...arguments),this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512"]}checkGenerateKeyParams(e){if(this.checkRequiredProperty(e,"hash"),this.checkHashAlgorithm(e.hash,this.hashAlgorithms),this.checkRequiredProperty(e,"publicExponent"),!(e.publicExponent&&e.publicExponent instanceof Uint8Array))throw new TypeError("publicExponent: Missing or not a Uint8Array");let r=Z.ToBase64(e.publicExponent);if(!(r==="Aw=="||r==="AQAB"))throw new TypeError("publicExponent: Must be [3] or [1,0,1]");if(this.checkRequiredProperty(e,"modulusLength"),e.modulusLength%8||e.modulusLength<256||e.modulusLength>16384)throw new TypeError("The modulus length must be a multiple of 8 bits and >= 256 and <= 16384")}checkImportParams(e){this.checkRequiredProperty(e,"hash"),this.checkHashAlgorithm(e.hash,this.hashAlgorithms)}},Ha=class extends Ds{constructor(){super(...arguments),this.name="RSASSA-PKCS1-v1_5",this.usages={privateKey:["sign"],publicKey:["verify"]}}},Wa=class extends Ds{constructor(){super(...arguments),this.name="RSA-PSS",this.usages={privateKey:["sign"],publicKey:["verify"]}}checkAlgorithmParams(e){if(this.checkRequiredProperty(e,"saltLength"),typeof e.saltLength!="number")throw new TypeError("saltLength: Is not a Number");if(e.saltLength<0)throw new RangeError("saltLength: Must be positive number")}},za=class extends Ds{constructor(){super(...arguments),this.name="RSA-OAEP",this.usages={privateKey:["decrypt","unwrapKey"],publicKey:["encrypt","wrapKey"]}}checkAlgorithmParams(e){if(e.label&&!(e.label instanceof ArrayBuffer||ArrayBuffer.isView(e.label)))throw new TypeError("label: Is not of type '(ArrayBuffer or ArrayBufferView)'")}},Ks=class extends je{checkGenerateKeyParams(e){this.checkRequiredProperty(e,"namedCurve"),this.checkNamedCurve(e.namedCurve)}checkNamedCurve(e){for(let r of this.namedCurves)if(r.toLowerCase()===e.toLowerCase())return;throw new J(`namedCurve: Must be one of ${this.namedCurves.join(", ")}`)}},Ja=class extends Ks{constructor(){super(...arguments),this.name="ECDSA",this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512"],this.usages={privateKey:["sign"],publicKey:["verify"]},this.namedCurves=["P-256","P-384","P-521","K-256"]}checkAlgorithmParams(e){this.checkRequiredProperty(e,"hash"),this.checkHashAlgorithm(e.hash,this.hashAlgorithms)}},uA=["secret","private","public"],Br=class{static create(e,r,n,i){let s=new this;return s.algorithm=e,s.type=r,s.extractable=n,s.usages=i,s}static isKeyType(e){return uA.indexOf(e)!==-1}get[Symbol.toStringTag](){return"CryptoKey"}},qs=class extends Ks{constructor(){super(...arguments),this.name="ECDH",this.usages={privateKey:["deriveBits","deriveKey"],publicKey:[]},this.namedCurves=["P-256","P-384","P-521","K-256"]}checkAlgorithmParams(e){if(this.checkRequiredProperty(e,"public"),!(e.public instanceof Br))throw new TypeError("public: Is not a CryptoKey");if(e.public.type!=="public")throw new J("public: Is not a public key");if(e.public.algorithm.name!==this.name)throw new J(`public: Is not ${this.name} key`)}},Ga=class extends qs{constructor(){super(...arguments),this.name="ECDH-ES",this.namedCurves=["X25519","X448"]}},Ya=class extends Ks{constructor(){super(...arguments),this.name="EdDSA",this.usages={privateKey:["sign"],publicKey:["verify"]},this.namedCurves=["Ed25519","Ed448"]}},Ls=class{constructor(e){e&&(this.value=e)}};ie([le({type:D.ObjectIdentifier})],Ls.prototype,"value",void 0);Ls=ie([Zn({type:Te.Choice})],Ls);Or=class{constructor(e){Object.assign(this,e)}};ie([le({type:D.ObjectIdentifier})],Or.prototype,"algorithm",void 0);ie([le({type:D.Any,optional:!0})],Or.prototype,"parameters",void 0);sn=class{constructor(){this.version=0,this.privateKeyAlgorithm=new Or,this.privateKey=new ArrayBuffer(0)}};ie([le({type:D.Integer})],sn.prototype,"version",void 0);ie([le({type:Or})],sn.prototype,"privateKeyAlgorithm",void 0);ie([le({type:D.OctetString})],sn.prototype,"privateKey",void 0);ie([le({type:D.Any,optional:!0})],sn.prototype,"attributes",void 0);js=class{constructor(){this.publicKeyAlgorithm=new Or,this.publicKey=new ArrayBuffer(0)}};ie([le({type:Or})],js.prototype,"publicKeyAlgorithm",void 0);ie([le({type:D.BitString})],js.prototype,"publicKey",void 0);Yt={fromJSON:t=>Z.FromBase64Url(t),toJSON:t=>Z.ToBase64Url(new Uint8Array(t))},lr={fromASN:t=>{let e=t.valueBlock.valueHex;return new Uint8Array(e)[0]?t.valueBlock.valueHex:t.valueBlock.valueHex.slice(1)},toASN:t=>{let e=new Uint8Array(t)[0]>127?Su(new Uint8Array([0]).buffer,t):t;return new It({valueHex:e})}},At=class{constructor(){this.version=0,this.modulus=new ArrayBuffer(0),this.publicExponent=new ArrayBuffer(0),this.privateExponent=new ArrayBuffer(0),this.prime1=new ArrayBuffer(0),this.prime2=new ArrayBuffer(0),this.exponent1=new ArrayBuffer(0),this.exponent2=new ArrayBuffer(0),this.coefficient=new ArrayBuffer(0)}};ie([le({type:D.Integer,converter:Ra})],At.prototype,"version",void 0);ie([le({type:D.Integer,converter:lr}),$e({name:"n",converter:Yt})],At.prototype,"modulus",void 0);ie([le({type:D.Integer,converter:lr}),$e({name:"e",converter:Yt})],At.prototype,"publicExponent",void 0);ie([le({type:D.Integer,converter:lr}),$e({name:"d",converter:Yt})],At.prototype,"privateExponent",void 0);ie([le({type:D.Integer,converter:lr}),$e({name:"p",converter:Yt})],At.prototype,"prime1",void 0);ie([le({type:D.Integer,converter:lr}),$e({name:"q",converter:Yt})],At.prototype,"prime2",void 0);ie([le({type:D.Integer,converter:lr}),$e({name:"dp",converter:Yt})],At.prototype,"exponent1",void 0);ie([le({type:D.Integer,converter:lr}),$e({name:"dq",converter:Yt})],At.prototype,"exponent2",void 0);ie([le({type:D.Integer,converter:lr}),$e({name:"qi",converter:Yt})],At.prototype,"coefficient",void 0);ie([le({type:D.Any,optional:!0})],At.prototype,"otherPrimeInfos",void 0);Ms=class{constructor(){this.modulus=new ArrayBuffer(0),this.publicExponent=new ArrayBuffer(0)}};ie([le({type:D.Integer,converter:lr}),$e({name:"n",converter:Yt})],Ms.prototype,"modulus",void 0);ie([le({type:D.Integer,converter:lr}),$e({name:"e",converter:Yt})],Ms.prototype,"publicExponent",void 0);Ii=class{constructor(e){this.value=new ArrayBuffer(0),e&&(this.value=e)}toJSON(){let e=new Uint8Array(this.value);if(e[0]!==4)throw new Et("Wrong ECPoint. Current version supports only Uncompressed (0x04) point");e=new Uint8Array(this.value.slice(1));let r=e.length/2,n=0;return{x:Z.ToBase64Url(e.buffer.slice(n,n+r)),y:Z.ToBase64Url(e.buffer.slice(n+r,n+r+r))}}fromJSON(e){if(!("x"in e))throw new Error("x: Missing required property");if(!("y"in e))throw new Error("y: Missing required property");let r=Z.FromBase64Url(e.x),n=Z.FromBase64Url(e.y),i=Su(new Uint8Array([4]).buffer,r,n);return this.value=new Uint8Array(i).buffer,this}};ie([le({type:D.OctetString})],Ii.prototype,"value",void 0);Ii=ie([Zn({type:Te.Choice})],Ii);ei=class{constructor(){this.version=1,this.privateKey=new ArrayBuffer(0)}fromJSON(e){if(!("d"in e))throw new Error("d: Missing required property");if(this.privateKey=Z.FromBase64Url(e.d),"x"in e){let r=new Ii;r.fromJSON(e);let n=he.toASN(r);"valueHex"in n.valueBlock&&(this.publicKey=n.valueBlock.valueHex)}return this}toJSON(){let e={};return e.d=Z.ToBase64Url(this.privateKey),this.publicKey&&Object.assign(e,new Ii(this.publicKey).toJSON()),e}};ie([le({type:D.Integer,converter:Ra})],ei.prototype,"version",void 0);ie([le({type:D.OctetString})],ei.prototype,"privateKey",void 0);ie([le({context:0,type:D.Any,optional:!0})],ei.prototype,"parameters",void 0);ie([le({context:1,type:D.BitString,optional:!0})],ei.prototype,"publicKey",void 0);Fu={fromASN:t=>{let e=new Uint8Array(t.valueBlock.valueHex);return e[0]===0?e.buffer.slice(1):e.buffer},toASN:t=>{let e=new Uint8Array(t);if(e[0]>127){let r=new Uint8Array(e.length+1);return r.set(e,1),new It({valueHex:r.buffer})}return new It({valueHex:t})}},fA=Object.freeze({__proto__:null,AsnIntegerWithoutPaddingConverter:Fu}),ti=class{static decodePoint(e,r){let n=R.toUint8Array(e);if(n.length===0||n[0]!==4)throw new Error("Only uncompressed point format supported");let i=(n.length-1)/2;if(i!==Math.ceil(r/8))throw new Error("Point does not match field size");let s=n.slice(1,i+1),o=n.slice(i+1,i+1+i);return{x:s,y:o}}static encodePoint(e,r){let n=Math.ceil(r/8);if(e.x.byteLength!==n||e.y.byteLength!==n)throw new Error("X,Y coordinates don't match point size criteria");let i=R.toUint8Array(e.x),s=R.toUint8Array(e.y),o=new Uint8Array(n*2+1);return o[0]=4,o.set(i,1),o.set(s,n+1),o}static getSize(e){return Math.ceil(e/8)}static encodeSignature(e,r){let n=this.getSize(r),i=R.toUint8Array(e.r),s=R.toUint8Array(e.s),o=new Uint8Array(n*2);return o.set(this.padStart(i,n)),o.set(this.padStart(s,n),n),o}static decodeSignature(e,r){let n=this.getSize(r),i=R.toUint8Array(e);if(i.length!==n*2)throw new Error("Incorrect size of the signature");let s=i.slice(0,n),o=i.slice(n);return{r:this.trimStart(s),s:this.trimStart(o)}}static trimStart(e){let r=0;for(;r<e.length-1&&e[r]===0;)r++;return r===0?e:e.slice(r,e.length)}static padStart(e,r){if(r===e.length)return e;let n=new Uint8Array(r);return n.set(e,r-e.length),n}},Fs=class t{constructor(){this.r=new ArrayBuffer(0),this.s=new ArrayBuffer(0)}static fromWebCryptoSignature(e){let r=e.byteLength/2,n=ti.decodeSignature(e,r*8),i=new t;return i.r=R.toArrayBuffer(n.r),i.s=R.toArrayBuffer(n.s),i}toWebCryptoSignature(e){if(!e){let n=Math.max(this.r.byteLength,this.s.byteLength);n<=32?e=256:n<=48?e=384:e=521}return ti.encodeSignature(this,e).buffer}};ie([le({type:D.Integer,converter:Fu})],Fs.prototype,"r",void 0);ie([le({type:D.Integer,converter:Fu})],Fs.prototype,"s",void 0);Qa=class extends sn{};ie([le({context:1,implicit:!0,type:D.BitString,optional:!0})],Qa.prototype,"publicKey",void 0);Za=class{constructor(){this.value=new ArrayBuffer(0)}fromJSON(e){if(!e.d)throw new Error("d: Missing required property");return this.value=Z.FromBase64Url(e.d),this}toJSON(){return{d:Z.ToBase64Url(this.value)}}};ie([le({type:D.OctetString})],Za.prototype,"value",void 0);Za=ie([Zn({type:Te.Choice})],Za);Xa=class{constructor(e){this.value=new ArrayBuffer(0),e&&(this.value=e)}toJSON(){return{x:Z.ToBase64Url(this.value)}}fromJSON(e){if(!("x"in e))throw new Error("x: Missing required property");return this.value=Z.FromBase64Url(e.x),this}};ie([le({type:D.BitString})],Xa.prototype,"value",void 0);Xa=ie([Zn({type:Te.Choice})],Xa);el=class{};ie([le({type:D.OctetString}),$e({type:Oe.String,converter:Yt})],el.prototype,"d",void 0);el=ie([Zn({type:Te.Choice})],el);qm="1.2.840.10045.3.1.7",cl="1.3.132.0",Lm=`${cl}.34`,jm=`${cl}.35`,Mm=`${cl}.10`,nt="1.3.36.3.3.2.8.1.1",Fm=`${nt}.1`,Vm=`${nt}.2`,Hm=`${nt}.3`,Wm=`${nt}.4`,zm=`${nt}.5`,Jm=`${nt}.6`,Gm=`${nt}.7`,Ym=`${nt}.8`,Qm=`${nt}.9`,Zm=`${nt}.10`,Xm=`${nt}.11`,eg=`${nt}.12`,tg=`${nt}.13`,rg=`${nt}.14`,dA="1.3.101.110",hA="1.3.101.111",pA="1.3.101.112",mA="1.3.101.113",N=Object.freeze({__proto__:null,AlgorithmIdentifier:Or,get CurvePrivateKey(){return el},EcDsaSignature:Fs,EcPrivateKey:ei,get EcPublicKey(){return Ii},get EdPrivateKey(){return Za},get EdPublicKey(){return Xa},get ObjectIdentifier(){return Ls},OneAsymmetricKey:Qa,PrivateKeyInfo:sn,PublicKeyInfo:js,RsaPrivateKey:At,RsaPublicKey:Ms,converters:fA,idBrainpoolP160r1:Fm,idBrainpoolP160t1:Vm,idBrainpoolP192r1:Hm,idBrainpoolP192t1:Wm,idBrainpoolP224r1:zm,idBrainpoolP224t1:Jm,idBrainpoolP256r1:Gm,idBrainpoolP256t1:Ym,idBrainpoolP320r1:Qm,idBrainpoolP320t1:Zm,idBrainpoolP384r1:Xm,idBrainpoolP384t1:eg,idBrainpoolP512r1:tg,idBrainpoolP512t1:rg,idEd25519:pA,idEd448:mA,idEllipticCurve:cl,idSecp256k1:Mm,idSecp256r1:qm,idSecp384r1:Lm,idSecp521r1:jm,idVersionOne:nt,idX25519:dA,idX448:hA}),ve=class{constructor(){}static register(e){let r=new Ls;r.value=e.id;let n=Ia.serialize(r);this.items.push({...e,raw:n}),this.names.push(e.name)}static find(e){e=e.toUpperCase();for(let r of this.items)if(r.name.toUpperCase()===e||r.id.toUpperCase()===e)return r;return null}static get(e){let r=this.find(e);if(!r)throw new Error(`Unsupported EC named curve '${e}'`);return r}};ve.items=[];ve.names=[];ve.register({name:"P-256",id:qm,size:256});ve.register({name:"P-384",id:Lm,size:384});ve.register({name:"P-521",id:jm,size:521});ve.register({name:"K-256",id:Mm,size:256});ve.register({name:"brainpoolP160r1",id:Fm,size:160});ve.register({name:"brainpoolP160t1",id:Vm,size:160});ve.register({name:"brainpoolP192r1",id:Hm,size:192});ve.register({name:"brainpoolP192t1",id:Wm,size:192});ve.register({name:"brainpoolP224r1",id:zm,size:224});ve.register({name:"brainpoolP224t1",id:Jm,size:224});ve.register({name:"brainpoolP256r1",id:Gm,size:256});ve.register({name:"brainpoolP256t1",id:Ym,size:256});ve.register({name:"brainpoolP320r1",id:Qm,size:320});ve.register({name:"brainpoolP320t1",id:Zm,size:320});ve.register({name:"brainpoolP384r1",id:Xm,size:384});ve.register({name:"brainpoolP384t1",id:eg,size:384});ve.register({name:"brainpoolP512r1",id:tg,size:512});ve.register({name:"brainpoolP512t1",id:rg,size:512});tl=class extends je{constructor(){super(...arguments),this.name="HMAC",this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512"],this.usages=["sign","verify"]}getDefaultLength(e){switch(e.toUpperCase()){case"SHA-1":case"SHA-256":case"SHA-384":case"SHA-512":return 512;default:throw new Error(`Unknown algorithm name '${e}'`)}}checkGenerateKeyParams(e){if(this.checkRequiredProperty(e,"hash"),this.checkHashAlgorithm(e.hash,this.hashAlgorithms),"length"in e){if(typeof e.length!="number")throw new TypeError("length: Is not a Number");if(e.length<1)throw new RangeError("length: Number is out of range")}}checkImportParams(e){this.checkRequiredProperty(e,"hash"),this.checkHashAlgorithm(e.hash,this.hashAlgorithms)}},rl=class extends je{constructor(){super(...arguments),this.name="PBKDF2",this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512"],this.usages=["deriveBits","deriveKey"]}checkAlgorithmParams(e){if(this.checkRequiredProperty(e,"hash"),this.checkHashAlgorithm(e.hash,this.hashAlgorithms),this.checkRequiredProperty(e,"salt"),!(e.salt instanceof ArrayBuffer||ArrayBuffer.isView(e.salt)))throw new TypeError("salt: Is not of type '(ArrayBuffer or ArrayBufferView)'");if(this.checkRequiredProperty(e,"iterations"),typeof e.iterations!="number")throw new TypeError("iterations: Is not a Number");if(e.iterations<1)throw new TypeError("iterations: Is less than 1")}checkImportKey(e,r,n,i,s,...o){if(super.checkImportKey(e,r,n,i,s,...o),i)throw new SyntaxError("extractable: Must be 'false'")}},nl=class extends je{constructor(){super(...arguments),this.name="HKDF",this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512"],this.usages=["deriveKey","deriveBits"]}checkAlgorithmParams(e){if(this.checkRequiredProperty(e,"hash"),this.checkHashAlgorithm(e.hash,this.hashAlgorithms),this.checkRequiredProperty(e,"salt"),!R.isBufferSource(e.salt))throw new TypeError("salt: Is not of type '(ArrayBuffer or ArrayBufferView)'");if(this.checkRequiredProperty(e,"info"),!R.isBufferSource(e.info))throw new TypeError("salt: Is not of type '(ArrayBuffer or ArrayBufferView)'")}checkImportKey(e,r,n,i,s,...o){if(super.checkImportKey(e,r,n,i,s,...o),i)throw new SyntaxError("extractable: Must be 'false'")}},il=class extends je{constructor(){super(...arguments),this.usages=[],this.defaultLength=0}digest(...e){return e[0]={length:this.defaultLength,...e[0]},super.digest.apply(this,e)}checkDigest(e,r){super.checkDigest(e,r);let n=e.length||0;if(typeof n!="number")throw new TypeError("length: Is not a Number");if(n<0)throw new TypeError("length: Is negative")}},sl=class extends il{constructor(){super(...arguments),this.name="shake128",this.defaultLength=16}},ol=class extends il{constructor(){super(...arguments),this.name="shake256",this.defaultLength=32}},al=class{get[Symbol.toStringTag](){return"Crypto"}randomUUID(){let e=this.getRandomValues(new Uint8Array(16));e[6]=e[6]&15|64,e[8]=e[8]&63|128;let r=Z.ToHex(e).toLowerCase();return`${r.substring(0,8)}-${r.substring(8,12)}-${r.substring(12,16)}-${r.substring(16,20)}-${r.substring(20)}`}},Mu=class{constructor(){this.items={}}get(e){return this.items[e.toLowerCase()]||null}set(e){this.items[e.name.toLowerCase()]=e}removeAt(e){let r=this.get(e.toLowerCase());return r&&delete this.items[e],r}has(e){return!!this.get(e)}get length(){return Object.keys(this.items).length}get algorithms(){let e=[];for(let r in this.items){let n=this.items[r];e.push(n.name)}return e.sort()}},Km={jwk:["private","public","secret"],pkcs8:["private"],spki:["public"],raw:["secret","public"]},gA=["pkcs8","spki","raw"],ll=class t{constructor(){this.providers=new Mu}static isHashedAlgorithm(e){return!!(e&&typeof e=="object"&&"name"in e&&"hash"in e)}get[Symbol.toStringTag](){return"SubtleCrypto"}async digest(...e){this.checkRequiredArguments(e,2,"digest");let[r,n,...i]=e,s=this.prepareAlgorithm(r),o=R.toArrayBuffer(n);return await this.getProvider(s.name).digest(s,o,...i)}async generateKey(...e){this.checkRequiredArguments(e,3,"generateKey");let[r,n,i,...s]=e,o=this.prepareAlgorithm(r),a=this.getProvider(o.name);return await a.generateKey({...o,name:a.name},n,i,...s)}async sign(...e){this.checkRequiredArguments(e,3,"sign");let[r,n,i,...s]=e;this.checkCryptoKey(n);let o=this.prepareAlgorithm(r),a=R.toArrayBuffer(i),c=this.getProvider(o.name);return await c.sign({...o,name:c.name},n,a,...s)}async verify(...e){this.checkRequiredArguments(e,4,"verify");let[r,n,i,s,...o]=e;this.checkCryptoKey(n);let a=this.prepareAlgorithm(r),c=R.toArrayBuffer(s),f=R.toArrayBuffer(i),d=this.getProvider(a.name);return await d.verify({...a,name:d.name},n,f,c,...o)}async encrypt(...e){this.checkRequiredArguments(e,3,"encrypt");let[r,n,i,...s]=e;this.checkCryptoKey(n);let o=this.prepareAlgorithm(r),a=R.toArrayBuffer(i),c=this.getProvider(o.name);return await c.encrypt({...o,name:c.name},n,a,{keyUsage:!0},...s)}async decrypt(...e){this.checkRequiredArguments(e,3,"decrypt");let[r,n,i,...s]=e;this.checkCryptoKey(n);let o=this.prepareAlgorithm(r),a=R.toArrayBuffer(i),c=this.getProvider(o.name);return await c.decrypt({...o,name:c.name},n,a,{keyUsage:!0},...s)}async deriveBits(...e){this.checkRequiredArguments(e,3,"deriveBits");let[r,n,i,...s]=e;this.checkCryptoKey(n);let o=this.prepareAlgorithm(r),a=this.getProvider(o.name);return await a.deriveBits({...o,name:a.name},n,i,{keyUsage:!0},...s)}async deriveKey(...e){this.checkRequiredArguments(e,5,"deriveKey");let[r,n,i,s,o,...a]=e,c=this.prepareAlgorithm(i);this.getProvider(c.name).checkDerivedKeyParams(c);let d=this.prepareAlgorithm(r),h=this.getProvider(d.name);h.checkCryptoKey(n,"deriveKey");let m=await h.deriveBits({...d,name:h.name},n,i.length||512,{keyUsage:!1},...a);return this.importKey("raw",m,i,s,o,...a)}async exportKey(...e){this.checkRequiredArguments(e,2,"exportKey");let[r,n,...i]=e;if(this.checkCryptoKey(n),!Km[r])throw new TypeError("Invalid keyFormat argument");if(!Km[r].includes(n.type))throw new DOMException("The key is not of the expected type");return await this.getProvider(n.algorithm.name).exportKey(r,n,...i)}async importKey(...e){this.checkRequiredArguments(e,5,"importKey");let[r,n,i,s,o,...a]=e,c=this.prepareAlgorithm(i),f=this.getProvider(c.name);if(r==="jwk"){if(typeof n!="object"||!n.kty)throw new TypeError("Key data must be an object for JWK import")}else if(gA.includes(r)){if(!R.isBufferSource(n))throw new TypeError("Key data must be a BufferSource for non-JWK formats")}else throw new TypeError("The provided value is not of type '(ArrayBuffer or ArrayBufferView or JsonWebKey)'");return f.importKey(r,n,{...c,name:f.name},s,o,...a)}async wrapKey(e,r,n,i,...s){let o=await this.exportKey(e,r,...s);if(e==="jwk"){let d=JSON.stringify(o);o=Z.FromUtf8String(d)}let a=this.prepareAlgorithm(i),c=R.toArrayBuffer(o),f=this.getProvider(a.name);return f.encrypt({...a,name:f.name},n,c,{keyUsage:!1},...s)}async unwrapKey(e,r,n,i,s,o,a,...c){let f=this.prepareAlgorithm(i),d=R.toArrayBuffer(r),h=this.getProvider(f.name),m=await h.decrypt({...f,name:h.name},n,d,{keyUsage:!1},...c);if(e==="jwk")try{m=JSON.parse(Z.ToUtf8String(m))}catch(b){let y=new TypeError("wrappedKey: Is not a JSON");throw y.internal=b,y}return this.importKey(e,m,s,o,a,...c)}checkRequiredArguments(e,r,n){if(e.length<r)throw new TypeError(`Failed to execute '${n}' on 'SubtleCrypto': ${r} arguments required, but only ${e.length} present`)}prepareAlgorithm(e){if(typeof e=="string")return{name:e};if(t.isHashedAlgorithm(e)){let r={...e};return r.hash=this.prepareAlgorithm(e.hash),r}return{...e}}getProvider(e){let r=this.providers.get(e);if(!r)throw new Xn("Unrecognized name");return r}checkCryptoKey(e){if(!(e instanceof Br))throw new TypeError("Key is not of type 'CryptoKey'")}}});function on(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s}var Ni,fl=be(()=>{"use strict";Ni=function(){return Ni=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Ni.apply(this,arguments)}});var _f={};fu(_f,{Crypto:()=>Sf,CryptoKey:()=>Br});import*as cr from"crypto";import V from"crypto";import*as og from"process";function O(t){let e=ag.get(t);if(!e)throw new J("Cannot get CryptoKey from secure storage");return e}function X(t){let e=Br.create(t.algorithm,t.type,t.extractable,t.usages);return Object.freeze(e),ag.set(e,t),e}function ig(t){let e=Buffer.alloc(t.length),r=t.length-1;for(let n=0;n<r;n++)e[n]=t[n]<<1,t[n+1]&128&&(e[n]+=1);return e[r]=t[r]<<1,e}function Ui(t,e){let r=Math.min(t.length,e.length),n=Buffer.alloc(r);for(let i=0;i<r;i++)n[i]=t[i]^e[i];return n}function Hu(t,e){let r=cr.createCipheriv(`aes${t.length<<3}`,t,Af),n=r.update(e);return r.final(),n}function sg(t,e){let r=Buffer.alloc(ni),n=e*ni,i=n+ni;return t.copy(r,0,n,i),r}function bA(t,e){let r=Buffer.alloc(ni),n=e*ni,i=t.length;return r.fill(0),t.copy(r,0,n,i),r[i-n]=128,r}function wA(t){let e=Hu(t,Af),r=ig(e);e[0]&128&&(r=Ui(r,ng));let n=ig(r);return r[0]&128&&(n=Ui(n,ng)),{subkey1:r,subkey2:n}}function vA(t,e){let r=wA(t),n=Math.ceil(e.length/ni),i,s;n===0?(n=1,i=!1):i=e.length%ni===0;let o=n-1;i?s=Ui(sg(e,o),r.subkey1):s=Ui(bA(e,o),r.subkey2);let a=Af,c;for(let f=0;f<o;f++)c=Ui(a,sg(e,f)),a=Hu(t,c);return c=Ui(s,a),Hu(t,c)}function lg(t){switch(t.name.toUpperCase()){case"RSA-OAEP":{let e=/(\d+)$/.exec(t.hash.name)[1];return`RSA-OAEP${e!=="1"?`-${e}`:""}`}case"RSASSA-PKCS1-V1_5":return`RS${/(\d+)$/.exec(t.hash.name)[1]}`;case"RSA-PSS":return`PS${/(\d+)$/.exec(t.hash.name)[1]}`;case"RSA-PKCS1":return"RS1";default:throw new J("algorithm: Is not recognized")}}function Vs(t){let e=SA[t];if(!e)throw new J(`Cannot convert WebCrypto named curve '${t}' to OID`);return e}function cg(t){let e=EA[t.toLowerCase()];if(!e)throw new J(`Cannot convert WebCrypto named curve '${t}' to OID`);return e}var Ef,Qt,dl,an,ht,ag,pe,Vu,Af,ng,ni,Wu,zu,Ju,Gu,Yu,Ir,Dt,Qu,Zu,ln,cn,De,Xu,ef,Ye,tf,rf,SA,$i,Di,nf,sf,of,af,lf,cf,uf,_t,ff,df,EA,hl,pl,kt,hf,pf,ml,mf,ri,gf,gl,yf,yl,bf,wf,vf,Sf,kf=be(()=>{"use strict";ul();ul();ul();fl();Lu();Yr();Iu();Ef={fromJSON:t=>Buffer.from(Z.FromBase64Url(t)),toJSON:t=>Z.ToBase64Url(t)},Qt=class extends Br{constructor(){super(...arguments),this.data=Buffer.alloc(0),this.algorithm={name:""},this.extractable=!1,this.type="secret",this.usages=[],this.kty="oct",this.alg=""}};on([$e({name:"ext",type:Oe.Boolean,optional:!0})],Qt.prototype,"extractable",void 0);on([$e({name:"key_ops",type:Oe.String,repeated:!0,optional:!0})],Qt.prototype,"usages",void 0);on([$e({type:Oe.String})],Qt.prototype,"kty",void 0);on([$e({type:Oe.String,optional:!0})],Qt.prototype,"alg",void 0);dl=class extends Qt{constructor(){super(...arguments),this.kty="oct",this.type="secret"}},an=class extends Qt{},ht=class extends dl{get alg(){switch(this.algorithm.name.toUpperCase()){case"AES-CBC":return`A${this.algorithm.length}CBC`;case"AES-CTR":return`A${this.algorithm.length}CTR`;case"AES-GCM":return`A${this.algorithm.length}GCM`;case"AES-KW":return`A${this.algorithm.length}KW`;case"AES-CMAC":return`A${this.algorithm.length}CMAC`;case"AES-ECB":return`A${this.algorithm.length}ECB`;default:throw new Xn("Unsupported algorithm name")}}set alg(e){}};on([$e({name:"k",converter:Ef})],ht.prototype,"data",void 0);ag=new WeakMap;pe=class{static async generateKey(e,r,n){let i=new ht;return i.algorithm=e,i.extractable=r,i.usages=n,i.data=V.randomBytes(e.length>>3),i}static async exportKey(e,r){if(!(r instanceof ht))throw new Error("key: Is not AesCryptoKey");switch(e.toLowerCase()){case"jwk":return dt.toJSON(r);case"raw":return new Uint8Array(r.data).buffer;default:throw new J("format: Must be 'jwk' or 'raw'")}}static async importKey(e,r,n,i,s){let o;switch(e.toLowerCase()){case"jwk":o=Ge.fromJSON(r,{targetSchema:ht});break;case"raw":o=new ht,o.data=Buffer.from(r);break;default:throw new J("format: Must be 'jwk' or 'raw'")}switch(o.algorithm=n,o.algorithm.length=o.data.length<<3,o.extractable=i,o.usages=s,o.algorithm.length){case 128:case 192:case 256:break;default:throw new J("keyData: Is wrong key length")}return o}static async encrypt(e,r,n){switch(e.name.toUpperCase()){case"AES-CBC":return this.encryptAesCBC(e,r,Buffer.from(n));case"AES-CTR":return this.encryptAesCTR(e,r,Buffer.from(n));case"AES-GCM":return this.encryptAesGCM(e,r,Buffer.from(n));case"AES-KW":return this.encryptAesKW(e,r,Buffer.from(n));case"AES-ECB":return this.encryptAesECB(e,r,Buffer.from(n));default:throw new J("algorithm: Is not recognized")}}static async decrypt(e,r,n){if(!(r instanceof ht))throw new Error("key: Is not AesCryptoKey");switch(e.name.toUpperCase()){case"AES-CBC":return this.decryptAesCBC(e,r,Buffer.from(n));case"AES-CTR":return this.decryptAesCTR(e,r,Buffer.from(n));case"AES-GCM":return this.decryptAesGCM(e,r,Buffer.from(n));case"AES-KW":return this.decryptAesKW(e,r,Buffer.from(n));case"AES-ECB":return this.decryptAesECB(e,r,Buffer.from(n));default:throw new J("algorithm: Is not recognized")}}static async encryptAesCBC(e,r,n){let i=V.createCipheriv(`aes-${r.algorithm.length}-cbc`,r.data,new Uint8Array(e.iv)),s=i.update(n);return s=Buffer.concat([s,i.final()]),new Uint8Array(s).buffer}static async decryptAesCBC(e,r,n){let i=V.createDecipheriv(`aes-${r.algorithm.length}-cbc`,r.data,new Uint8Array(e.iv)),s=i.update(n);return s=Buffer.concat([s,i.final()]),new Uint8Array(s).buffer}static async encryptAesCTR(e,r,n){let i=V.createCipheriv(`aes-${r.algorithm.length}-ctr`,r.data,Buffer.from(e.counter)),s=i.update(n);return s=Buffer.concat([s,i.final()]),new Uint8Array(s).buffer}static async decryptAesCTR(e,r,n){let i=V.createDecipheriv(`aes-${r.algorithm.length}-ctr`,r.data,new Uint8Array(e.counter)),s=i.update(n);return s=Buffer.concat([s,i.final()]),new Uint8Array(s).buffer}static async encryptAesGCM(e,r,n){let i=V.createCipheriv(`aes-${r.algorithm.length}-gcm`,r.data,Buffer.from(e.iv),{authTagLength:(e.tagLength||128)>>3});e.additionalData&&i.setAAD(Buffer.from(e.additionalData));let s=i.update(n);return s=Buffer.concat([s,i.final(),i.getAuthTag()]),new Uint8Array(s).buffer}static async decryptAesGCM(e,r,n){let i=V.createDecipheriv(`aes-${r.algorithm.length}-gcm`,r.data,new Uint8Array(e.iv)),s=(e.tagLength||128)>>3,o=n.slice(0,n.length-s),a=n.slice(n.length-s);e.additionalData&&i.setAAD(Buffer.from(e.additionalData)),i.setAuthTag(a);let c=i.update(o);return c=Buffer.concat([c,i.final()]),new Uint8Array(c).buffer}static async encryptAesKW(e,r,n){let i=V.createCipheriv(`id-aes${r.algorithm.length}-wrap`,r.data,this.AES_KW_IV),s=i.update(n);return s=Buffer.concat([s,i.final()]),new Uint8Array(s).buffer}static async decryptAesKW(e,r,n){let i=V.createDecipheriv(`id-aes${r.algorithm.length}-wrap`,r.data,this.AES_KW_IV),s=i.update(n);return s=Buffer.concat([s,i.final()]),new Uint8Array(s).buffer}static async encryptAesECB(e,r,n){let i=V.createCipheriv(`aes-${r.algorithm.length}-ecb`,r.data,new Uint8Array(0)),s=i.update(n);return s=Buffer.concat([s,i.final()]),new Uint8Array(s).buffer}static async decryptAesECB(e,r,n){let i=V.createDecipheriv(`aes-${r.algorithm.length}-ecb`,r.data,new Uint8Array(0)),s=i.update(n);return s=Buffer.concat([s,i.final()]),new Uint8Array(s).buffer}};pe.AES_KW_IV=Buffer.from("A6A6A6A6A6A6A6A6","hex");Vu=class extends qa{async onGenerateKey(e,r,n){let i=await pe.generateKey({name:this.name,length:e.length},r,n);return X(i)}async onEncrypt(e,r,n){return pe.encrypt(e,O(r),new Uint8Array(n))}async onDecrypt(e,r,n){return pe.decrypt(e,O(r),new Uint8Array(n))}async onExportKey(e,r){return pe.exportKey(e,O(r))}async onImportKey(e,r,n,i,s){let o=await pe.importKey(e,r,{name:n.name},i,s);return X(o)}checkCryptoKey(e,r){if(super.checkCryptoKey(e,r),!(O(e)instanceof ht))throw new TypeError("key: Is not a AesCryptoKey")}},Af=Buffer.from([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),ng=Buffer.from([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,135]),ni=16;Wu=class extends La{async onGenerateKey(e,r,n){let i=await pe.generateKey({name:this.name,length:e.length},r,n);return X(i)}async onSign(e,r,n){let i=vA(O(r).data,Buffer.from(n));return new Uint8Array(i).buffer}async onVerify(e,r,n,i){let s=await this.sign(e,r,i);return Buffer.from(n).compare(Buffer.from(s))===0}async onExportKey(e,r){return pe.exportKey(e,O(r))}async onImportKey(e,r,n,i,s){let o=await pe.importKey(e,r,{name:n.name},i,s);return X(o)}checkCryptoKey(e,r){if(super.checkCryptoKey(e,r),!(O(e)instanceof ht))throw new TypeError("key: Is not a AesCryptoKey")}},zu=class extends ja{async onGenerateKey(e,r,n){let i=await pe.generateKey({name:this.name,length:e.length},r,n);return X(i)}async onEncrypt(e,r,n){return pe.encrypt(e,O(r),new Uint8Array(n))}async onDecrypt(e,r,n){return pe.decrypt(e,O(r),new Uint8Array(n))}async onExportKey(e,r){return pe.exportKey(e,O(r))}async onImportKey(e,r,n,i,s){let o=await pe.importKey(e,r,{name:n.name},i,s);return X(o)}checkCryptoKey(e,r){if(super.checkCryptoKey(e,r),!(O(e)instanceof ht))throw new TypeError("key: Is not a AesCryptoKey")}},Ju=class extends Fa{async onGenerateKey(e,r,n){let i=await pe.generateKey({name:this.name,length:e.length},r,n);return X(i)}async onEncrypt(e,r,n){return pe.encrypt(e,O(r),new Uint8Array(n))}async onDecrypt(e,r,n){return pe.decrypt(e,O(r),new Uint8Array(n))}async onExportKey(e,r){return pe.exportKey(e,O(r))}async onImportKey(e,r,n,i,s){let o=await pe.importKey(e,r,{name:n.name},i,s);return X(o)}checkCryptoKey(e,r){if(super.checkCryptoKey(e,r),!(O(e)instanceof ht))throw new TypeError("key: Is not a AesCryptoKey")}},Gu=class extends Va{async onGenerateKey(e,r,n){let i=await pe.generateKey({name:this.name,length:e.length},r,n);return X(i)}async onExportKey(e,r){return pe.exportKey(e,O(r))}async onImportKey(e,r,n,i,s){let o=await pe.importKey(e,r,{name:n.name},i,s);return X(o)}async onEncrypt(e,r,n){return pe.encrypt(e,O(r),new Uint8Array(n))}async onDecrypt(e,r,n){return pe.decrypt(e,O(r),new Uint8Array(n))}checkCryptoKey(e,r){if(super.checkCryptoKey(e,r),!(O(e)instanceof ht))throw new TypeError("key: Is not a AesCryptoKey")}},Yu=class extends Ma{async onGenerateKey(e,r,n){let i=await pe.generateKey({name:this.name,length:e.length},r,n);return X(i)}async onEncrypt(e,r,n){return pe.encrypt(e,O(r),new Uint8Array(n))}async onDecrypt(e,r,n){return pe.decrypt(e,O(r),new Uint8Array(n))}async onExportKey(e,r){return pe.exportKey(e,O(r))}async onImportKey(e,r,n,i,s){let o=await pe.importKey(e,r,{name:n.name},i,s);return X(o)}checkCryptoKey(e,r){if(super.checkCryptoKey(e,r),!(O(e)instanceof ht))throw new TypeError("key: Is not a AesCryptoKey")}},Ir=class extends dl{get alg(){switch(this.algorithm.name.toUpperCase()){case"DES-CBC":return"DES-CBC";case"DES-EDE3-CBC":return"3DES-CBC";default:throw new Xn("Unsupported algorithm name")}}set alg(e){}};on([$e({name:"k",converter:Ef})],Ir.prototype,"data",void 0);Dt=class{static async generateKey(e,r,n){let i=new Ir;return i.algorithm=e,i.extractable=r,i.usages=n,i.data=V.randomBytes(e.length>>3),i}static async exportKey(e,r){switch(e.toLowerCase()){case"jwk":return dt.toJSON(r);case"raw":return new Uint8Array(r.data).buffer;default:throw new J("format: Must be 'jwk' or 'raw'")}}static async importKey(e,r,n,i,s){let o;switch(e.toLowerCase()){case"jwk":o=Ge.fromJSON(r,{targetSchema:Ir});break;case"raw":o=new Ir,o.data=Buffer.from(r);break;default:throw new J("format: Must be 'jwk' or 'raw'")}return o.algorithm=n,o.extractable=i,o.usages=s,o}static async encrypt(e,r,n){switch(e.name.toUpperCase()){case"DES-CBC":return this.encryptDesCBC(e,r,Buffer.from(n));case"DES-EDE3-CBC":return this.encryptDesEDE3CBC(e,r,Buffer.from(n));default:throw new J("algorithm: Is not recognized")}}static async decrypt(e,r,n){if(!(r instanceof Ir))throw new Error("key: Is not DesCryptoKey");switch(e.name.toUpperCase()){case"DES-CBC":return this.decryptDesCBC(e,r,Buffer.from(n));case"DES-EDE3-CBC":return this.decryptDesEDE3CBC(e,r,Buffer.from(n));default:throw new J("algorithm: Is not recognized")}}static async encryptDesCBC(e,r,n){let i=V.createCipheriv("des-cbc",r.data,new Uint8Array(e.iv)),s=i.update(n);return s=Buffer.concat([s,i.final()]),new Uint8Array(s).buffer}static async decryptDesCBC(e,r,n){let i=V.createDecipheriv("des-cbc",r.data,new Uint8Array(e.iv)),s=i.update(n);return s=Buffer.concat([s,i.final()]),new Uint8Array(s).buffer}static async encryptDesEDE3CBC(e,r,n){let i=V.createCipheriv("des-ede3-cbc",r.data,Buffer.from(e.iv)),s=i.update(n);return s=Buffer.concat([s,i.final()]),new Uint8Array(s).buffer}static async decryptDesEDE3CBC(e,r,n){let i=V.createDecipheriv("des-ede3-cbc",r.data,new Uint8Array(e.iv)),s=i.update(n);return s=Buffer.concat([s,i.final()]),new Uint8Array(s).buffer}},Qu=class extends $s{constructor(){super(...arguments),this.keySizeBits=64,this.ivSize=8,this.name="DES-CBC"}async onGenerateKey(e,r,n){let i=await Dt.generateKey({name:this.name,length:this.keySizeBits},r,n);return X(i)}async onEncrypt(e,r,n){return Dt.encrypt(e,O(r),new Uint8Array(n))}async onDecrypt(e,r,n){return Dt.decrypt(e,O(r),new Uint8Array(n))}async onExportKey(e,r){return Dt.exportKey(e,O(r))}async onImportKey(e,r,n,i,s){let o=await Dt.importKey(e,r,{name:this.name,length:this.keySizeBits},i,s);if(o.data.length!==this.keySizeBits>>3)throw new J("keyData: Wrong key size");return X(o)}checkCryptoKey(e,r){if(super.checkCryptoKey(e,r),!(O(e)instanceof Ir))throw new TypeError("key: Is not a DesCryptoKey")}},Zu=class extends $s{constructor(){super(...arguments),this.keySizeBits=192,this.ivSize=8,this.name="DES-EDE3-CBC"}async onGenerateKey(e,r,n){let i=await Dt.generateKey({name:this.name,length:this.keySizeBits},r,n);return X(i)}async onEncrypt(e,r,n){return Dt.encrypt(e,O(r),new Uint8Array(n))}async onDecrypt(e,r,n){return Dt.decrypt(e,O(r),new Uint8Array(n))}async onExportKey(e,r){return Dt.exportKey(e,O(r))}async onImportKey(e,r,n,i,s){let o=await Dt.importKey(e,r,{name:this.name,length:this.keySizeBits},i,s);if(o.data.length!==this.keySizeBits>>3)throw new J("keyData: Wrong key size");return X(o)}checkCryptoKey(e,r){if(super.checkCryptoKey(e,r),!(O(e)instanceof Ir))throw new TypeError("key: Is not a DesCryptoKey")}};ln=class extends an{constructor(){super(...arguments),this.type="private"}getKey(){let e=ce.parse(this.data,N.PrivateKeyInfo);return ce.parse(e.privateKey,N.RsaPrivateKey)}toJSON(){let e=this.getKey(),r={kty:"RSA",alg:lg(this.algorithm),key_ops:this.usages,ext:this.extractable};return Object.assign(r,dt.toJSON(e))}fromJSON(e){let r=Ge.fromJSON(e,{targetSchema:N.RsaPrivateKey}),n=new N.PrivateKeyInfo;n.privateKeyAlgorithm.algorithm="1.2.840.113549.1.1.1",n.privateKeyAlgorithm.parameters=null,n.privateKey=he.serialize(r),this.data=Buffer.from(he.serialize(n))}},cn=class extends an{constructor(){super(...arguments),this.type="public"}getKey(){let e=ce.parse(this.data,N.PublicKeyInfo);return ce.parse(e.publicKey,N.RsaPublicKey)}toJSON(){let e=this.getKey(),r={kty:"RSA",alg:lg(this.algorithm),key_ops:this.usages,ext:this.extractable};return Object.assign(r,dt.toJSON(e))}fromJSON(e){let r=Ge.fromJSON(e,{targetSchema:N.RsaPublicKey}),n=new N.PublicKeyInfo;n.publicKeyAlgorithm.algorithm="1.2.840.113549.1.1.1",n.publicKeyAlgorithm.parameters=null,n.publicKey=he.serialize(r),this.data=Buffer.from(he.serialize(n))}},De=class{static async generateKey(e,r,n){let i=new ln;i.algorithm=e,i.extractable=r,i.usages=n.filter(f=>this.privateKeyUsages.indexOf(f)!==-1);let s=new cn;s.algorithm=e,s.extractable=!0,s.usages=n.filter(f=>this.publicKeyUsages.indexOf(f)!==-1);let o=Buffer.concat([Buffer.alloc(4-e.publicExponent.byteLength,0),Buffer.from(e.publicExponent)]).readInt32BE(0),a=V.generateKeyPairSync("rsa",{modulusLength:e.modulusLength,publicExponent:o,publicKeyEncoding:{format:"der",type:"spki"},privateKeyEncoding:{format:"der",type:"pkcs8"}});return i.data=a.privateKey,s.data=a.publicKey,{privateKey:i,publicKey:s}}static async exportKey(e,r){switch(e.toLowerCase()){case"jwk":return dt.toJSON(r);case"pkcs8":case"spki":return new Uint8Array(r.data).buffer;default:throw new J("format: Must be 'jwk', 'pkcs8' or 'spki'")}}static async importKey(e,r,n,i,s){switch(e.toLowerCase()){case"jwk":if(r.d){let a=Ge.fromJSON(r,{targetSchema:N.RsaPrivateKey});return this.importPrivateKey(a,n,i,s)}else{let a=Ge.fromJSON(r,{targetSchema:N.RsaPublicKey});return this.importPublicKey(a,n,i,s)}case"spki":{let o=ce.parse(new Uint8Array(r),N.PublicKeyInfo),a=ce.parse(o.publicKey,N.RsaPublicKey);return this.importPublicKey(a,n,i,s)}case"pkcs8":{let o=ce.parse(new Uint8Array(r),N.PrivateKeyInfo),a=ce.parse(o.privateKey,N.RsaPrivateKey);return this.importPrivateKey(a,n,i,s)}default:throw new J("format: Must be 'jwk', 'pkcs8' or 'spki'")}}static async sign(e,r,n){switch(e.name.toUpperCase()){case"RSA-PSS":case"RSASSA-PKCS1-V1_5":return this.signRsa(e,r,n);default:throw new J("algorithm: Is not recognized")}}static async verify(e,r,n,i){switch(e.name.toUpperCase()){case"RSA-PSS":case"RSASSA-PKCS1-V1_5":return this.verifySSA(e,r,i,n);default:throw new J("algorithm: Is not recognized")}}static async encrypt(e,r,n){switch(e.name.toUpperCase()){case"RSA-OAEP":return this.encryptOAEP(e,r,n);default:throw new J("algorithm: Is not recognized")}}static async decrypt(e,r,n){switch(e.name.toUpperCase()){case"RSA-OAEP":return this.decryptOAEP(e,r,n);default:throw new J("algorithm: Is not recognized")}}static importPrivateKey(e,r,n,i){let s=new N.PrivateKeyInfo;s.privateKeyAlgorithm.algorithm="1.2.840.113549.1.1.1",s.privateKeyAlgorithm.parameters=null,s.privateKey=he.serialize(e);let o=new ln;return o.data=Buffer.from(he.serialize(s)),o.algorithm=Object.assign({},r),o.algorithm.publicExponent=new Uint8Array(e.publicExponent),o.algorithm.modulusLength=e.modulus.byteLength<<3,o.extractable=n,o.usages=i,o}static importPublicKey(e,r,n,i){let s=new N.PublicKeyInfo;s.publicKeyAlgorithm.algorithm="1.2.840.113549.1.1.1",s.publicKeyAlgorithm.parameters=null,s.publicKey=he.serialize(e);let o=new cn;return o.data=Buffer.from(he.serialize(s)),o.algorithm=Object.assign({},r),o.algorithm.publicExponent=new Uint8Array(e.publicExponent),o.algorithm.modulusLength=e.modulus.byteLength<<3,o.extractable=n,o.usages=i,o}static getCryptoAlgorithm(e){switch(e.hash.name.toUpperCase()){case"SHA-1":return"RSA-SHA1";case"SHA-256":return"RSA-SHA256";case"SHA-384":return"RSA-SHA384";case"SHA-512":return"RSA-SHA512";case"SHA3-256":return"RSA-SHA3-256";case"SHA3-384":return"RSA-SHA3-384";case"SHA3-512":return"RSA-SHA3-512";default:throw new J("algorithm.hash: Is not recognized")}}static signRsa(e,r,n){let i=this.getCryptoAlgorithm(r.algorithm),s=V.createSign(i);s.update(Buffer.from(n)),r.pem||(r.pem=`-----BEGIN PRIVATE KEY-----
${r.data.toString("base64")}
-----END PRIVATE KEY-----`);let o={key:r.pem};e.name.toUpperCase()==="RSA-PSS"&&(o.padding=V.constants.RSA_PKCS1_PSS_PADDING,o.saltLength=e.saltLength);let a=s.sign(o);return new Uint8Array(a).buffer}static verifySSA(e,r,n,i){let s=this.getCryptoAlgorithm(r.algorithm),o=V.createVerify(s);o.update(Buffer.from(n)),r.pem||(r.pem=`-----BEGIN PUBLIC KEY-----
${r.data.toString("base64")}
-----END PUBLIC KEY-----`);let a={key:r.pem};return e.name.toUpperCase()==="RSA-PSS"&&(a.padding=V.constants.RSA_PKCS1_PSS_PADDING,a.saltLength=e.saltLength),o.verify(a,i)}static encryptOAEP(e,r,n){let i={key:`-----BEGIN PUBLIC KEY-----
${r.data.toString("base64")}
-----END PUBLIC KEY-----`,padding:V.constants.RSA_PKCS1_OAEP_PADDING};return e.label,new Uint8Array(V.publicEncrypt(i,n)).buffer}static decryptOAEP(e,r,n){let i={key:`-----BEGIN PRIVATE KEY-----
${r.data.toString("base64")}
-----END PRIVATE KEY-----`,padding:V.constants.RSA_PKCS1_OAEP_PADDING};return e.label,new Uint8Array(V.privateDecrypt(i,n)).buffer}};De.publicKeyUsages=["verify","encrypt","wrapKey"];De.privateKeyUsages=["sign","decrypt","unwrapKey"];Xu=class extends Ha{constructor(){super(...arguments),this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512","shake128","shake256","SHA3-256","SHA3-384","SHA3-512"]}async onGenerateKey(e,r,n){let i=await De.generateKey({...e,name:this.name},r,n);return{privateKey:X(i.privateKey),publicKey:X(i.publicKey)}}async onSign(e,r,n){return De.sign(e,O(r),new Uint8Array(n))}async onVerify(e,r,n,i){return De.verify(e,O(r),new Uint8Array(n),new Uint8Array(i))}async onExportKey(e,r){return De.exportKey(e,O(r))}async onImportKey(e,r,n,i,s){let o=await De.importKey(e,r,{...n,name:this.name},i,s);return X(o)}checkCryptoKey(e,r){super.checkCryptoKey(e,r);let n=O(e);if(!(n instanceof ln||n instanceof cn))throw new TypeError("key: Is not RSA CryptoKey")}},ef=class extends Wa{constructor(){super(...arguments),this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512","shake128","shake256","SHA3-256","SHA3-384","SHA3-512"]}async onGenerateKey(e,r,n){let i=await De.generateKey({...e,name:this.name},r,n);return{privateKey:X(i.privateKey),publicKey:X(i.publicKey)}}async onSign(e,r,n){return De.sign(e,O(r),new Uint8Array(n))}async onVerify(e,r,n,i){return De.verify(e,O(r),new Uint8Array(n),new Uint8Array(i))}async onExportKey(e,r){return De.exportKey(e,O(r))}async onImportKey(e,r,n,i,s){let o=await De.importKey(e,r,{...n,name:this.name},i,s);return X(o)}checkCryptoKey(e,r){super.checkCryptoKey(e,r);let n=O(e);if(!(n instanceof ln||n instanceof cn))throw new TypeError("key: Is not RSA CryptoKey")}},Ye=class{static size(e){switch(e.name.toUpperCase()){case"SHA-1":return 160;case"SHA-256":case"SHA3-256":return 256;case"SHA-384":case"SHA3-384":return 384;case"SHA-512":case"SHA3-512":return 512;default:throw new Error("Unrecognized name")}}static getAlgorithmName(e){switch(e.name.toUpperCase()){case"SHA-1":return"sha1";case"SHA-256":return"sha256";case"SHA-384":return"sha384";case"SHA-512":return"sha512";case"SHA3-256":return"sha3-256";case"SHA3-384":return"sha3-384";case"SHA3-512":return"sha3-512";default:throw new Error("Unrecognized name")}}static digest(e,r){let n=this.getAlgorithmName(e),i=V.createHash(n).update(Buffer.from(r)).digest();return new Uint8Array(i).buffer}},tf=class extends za{async onGenerateKey(e,r,n){let i=await De.generateKey({...e,name:this.name},r,n);return{privateKey:X(i.privateKey),publicKey:X(i.publicKey)}}async onEncrypt(e,r,n){let i=O(r),s=new Uint8Array(n),o=Math.ceil(i.algorithm.modulusLength>>3),a=Ye.size(i.algorithm.hash)>>3,c=s.byteLength,f=o-c-2*a-2;if(c>o-2*a-2)throw new Error("Data too large");let d=new Uint8Array(o),h=d.subarray(1,a+1),m=d.subarray(a+1);m.set(s,a+f+1);let b=V.createHash(i.algorithm.hash.name.replace("-","")).update(R.toUint8Array(e.label||new Uint8Array(0))).digest();m.set(b,0),m[a+f]=1,V.randomFillSync(h);let y=this.mgf1(i.algorithm.hash,h,m.length);for(let _=0;_<m.length;_++)m[_]^=y[_];let w=this.mgf1(i.algorithm.hash,m,h.length);for(let _=0;_<h.length;_++)h[_]^=w[_];i.pem||(i.pem=`-----BEGIN PUBLIC KEY-----
${i.data.toString("base64")}
-----END PUBLIC KEY-----`);let S=V.publicEncrypt({key:i.pem,padding:V.constants.RSA_NO_PADDING},Buffer.from(d));return new Uint8Array(S).buffer}async onDecrypt(e,r,n){let i=O(r),s=Math.ceil(i.algorithm.modulusLength>>3),o=Ye.size(i.algorithm.hash)>>3;if(n.byteLength!==s)throw new Error("Bad data");i.pem||(i.pem=`-----BEGIN PRIVATE KEY-----
${i.data.toString("base64")}
-----END PRIVATE KEY-----`);let c=V.privateDecrypt({key:i.pem,padding:V.constants.RSA_NO_PADDING},Buffer.from(n)),f=c[0],d=c.subarray(1,o+1),h=c.subarray(o+1);if(f!==0)throw new Error("Decryption failed");let m=this.mgf1(i.algorithm.hash,h,d.length);for(let S=0;S<d.length;S++)d[S]^=m[S];let b=this.mgf1(i.algorithm.hash,d,h.length);for(let S=0;S<h.length;S++)h[S]^=b[S];let y=V.createHash(i.algorithm.hash.name.replace("-","")).update(R.toUint8Array(e.label||new Uint8Array(0))).digest();for(let S=0;S<o;S++)if(y[S]!==h[S])throw new Error("Decryption failed");let w=o;for(;w<h.length;w++){let S=h[w];if(S===1)break;if(S!==0)throw new Error("Decryption failed")}if(w===h.length)throw new Error("Decryption failed");return c=h.subarray(w+1),new Uint8Array(c).buffer}async onExportKey(e,r){return De.exportKey(e,O(r))}async onImportKey(e,r,n,i,s){let o=await De.importKey(e,r,{...n,name:this.name},i,s);return X(o)}checkCryptoKey(e,r){super.checkCryptoKey(e,r);let n=O(e);if(!(n instanceof ln||n instanceof cn))throw new TypeError("key: Is not RSA CryptoKey")}mgf1(e,r,n=0){let i=Ye.size(e)>>3,s=new Uint8Array(n),o=new Uint8Array(4),a=Math.ceil(n/i);for(let c=0;c<a;c++){o[0]=c>>>24,o[1]=c>>>16&255,o[2]=c>>>8&255,o[3]=c&255;let f=s.subarray(c*i),d=V.createHash(e.name.replace("-","")).update(r).update(o).digest();d.length>f.length&&(d=d.subarray(0,f.length)),f.set(d)}return s}},rf=class extends je{constructor(){super(...arguments),this.name="RSAES-PKCS1-v1_5",this.usages={publicKey:["encrypt","wrapKey"],privateKey:["decrypt","unwrapKey"]}}async onGenerateKey(e,r,n){let i=await De.generateKey({...e,name:this.name},r,n);return{privateKey:X(i.privateKey),publicKey:X(i.publicKey)}}checkGenerateKeyParams(e){if(this.checkRequiredProperty(e,"publicExponent"),!(e.publicExponent&&e.publicExponent instanceof Uint8Array))throw new TypeError("publicExponent: Missing or not a Uint8Array");let r=Z.ToBase64(e.publicExponent);if(!(r==="Aw=="||r==="AQAB"))throw new TypeError("publicExponent: Must be [3] or [1,0,1]");switch(this.checkRequiredProperty(e,"modulusLength"),e.modulusLength){case 1024:case 2048:case 4096:break;default:throw new TypeError("modulusLength: Must be 1024, 2048, or 4096")}}async onEncrypt(e,r,n){let i=this.toCryptoOptions(r),s=cr.publicEncrypt(i,new Uint8Array(n));return new Uint8Array(s).buffer}async onDecrypt(e,r,n){let i=this.toCryptoOptions(r),s=cr.privateDecrypt(i,new Uint8Array(n));return new Uint8Array(s).buffer}async onExportKey(e,r){return De.exportKey(e,O(r))}async onImportKey(e,r,n,i,s){let o=await De.importKey(e,r,{...n,name:this.name},i,s);return X(o)}checkCryptoKey(e,r){super.checkCryptoKey(e,r);let n=O(e);if(!(n instanceof ln||n instanceof cn))throw new TypeError("key: Is not RSA CryptoKey")}toCryptoOptions(e){let r=e.type.toUpperCase();return{key:`-----BEGIN ${r} KEY-----
${O(e).data.toString("base64")}
-----END ${r} KEY-----`,padding:cr.constants.RSA_PKCS1_PADDING}}},SA={"1.2.840.10045.3.1.7":"P-256","P-256":"1.2.840.10045.3.1.7","1.3.132.0.34":"P-384","P-384":"1.3.132.0.34","1.3.132.0.35":"P-521","P-521":"1.3.132.0.35","1.3.132.0.10":"K-256","K-256":"1.3.132.0.10",brainpoolP160r1:"1.3.36.3.3.2.8.1.1.1","1.3.36.3.3.2.8.1.1.1":"brainpoolP160r1",brainpoolP160t1:"1.3.36.3.3.2.8.1.1.2","1.3.36.3.3.2.8.1.1.2":"brainpoolP160t1",brainpoolP192r1:"1.3.36.3.3.2.8.1.1.3","1.3.36.3.3.2.8.1.1.3":"brainpoolP192r1",brainpoolP192t1:"1.3.36.3.3.2.8.1.1.4","1.3.36.3.3.2.8.1.1.4":"brainpoolP192t1",brainpoolP224r1:"1.3.36.3.3.2.8.1.1.5","1.3.36.3.3.2.8.1.1.5":"brainpoolP224r1",brainpoolP224t1:"1.3.36.3.3.2.8.1.1.6","1.3.36.3.3.2.8.1.1.6":"brainpoolP224t1",brainpoolP256r1:"1.3.36.3.3.2.8.1.1.7","1.3.36.3.3.2.8.1.1.7":"brainpoolP256r1",brainpoolP256t1:"1.3.36.3.3.2.8.1.1.8","1.3.36.3.3.2.8.1.1.8":"brainpoolP256t1",brainpoolP320r1:"1.3.36.3.3.2.8.1.1.9","1.3.36.3.3.2.8.1.1.9":"brainpoolP320r1",brainpoolP320t1:"1.3.36.3.3.2.8.1.1.10","1.3.36.3.3.2.8.1.1.10":"brainpoolP320t1",brainpoolP384r1:"1.3.36.3.3.2.8.1.1.11","1.3.36.3.3.2.8.1.1.11":"brainpoolP384r1",brainpoolP384t1:"1.3.36.3.3.2.8.1.1.12","1.3.36.3.3.2.8.1.1.12":"brainpoolP384t1",brainpoolP512r1:"1.3.36.3.3.2.8.1.1.13","1.3.36.3.3.2.8.1.1.13":"brainpoolP512r1",brainpoolP512t1:"1.3.36.3.3.2.8.1.1.14","1.3.36.3.3.2.8.1.1.14":"brainpoolP512t1"};$i=class extends an{constructor(){super(...arguments),this.type="private"}getKey(){let e=ce.parse(this.data,N.PrivateKeyInfo);return ce.parse(e.privateKey,N.EcPrivateKey)}toJSON(){let e=this.getKey(),r={kty:"EC",crv:this.algorithm.namedCurve,key_ops:this.usages,ext:this.extractable};return Object.assign(r,dt.toJSON(e))}fromJSON(e){if(!e.crv)throw new J("Cannot get named curve from JWK. Property 'crv' is required");let r=new N.PrivateKeyInfo;r.privateKeyAlgorithm.algorithm="1.2.840.10045.2.1",r.privateKeyAlgorithm.parameters=he.serialize(new N.ObjectIdentifier(Vs(e.crv)));let n=Ge.fromJSON(e,{targetSchema:N.EcPrivateKey});return r.privateKey=he.serialize(n),this.data=Buffer.from(he.serialize(r)),this}},Di=class extends an{constructor(){super(...arguments),this.type="public"}getKey(){let e=ce.parse(this.data,N.PublicKeyInfo);return new N.EcPublicKey(e.publicKey)}toJSON(){let e=this.getKey(),r={kty:"EC",crv:this.algorithm.namedCurve,key_ops:this.usages,ext:this.extractable};return Object.assign(r,dt.toJSON(e))}fromJSON(e){if(!e.crv)throw new J("Cannot get named curve from JWK. Property 'crv' is required");let r=Ge.fromJSON(e,{targetSchema:N.EcPublicKey}),n=new N.PublicKeyInfo;return n.publicKeyAlgorithm.algorithm="1.2.840.10045.2.1",n.publicKeyAlgorithm.parameters=he.serialize(new N.ObjectIdentifier(Vs(e.crv))),n.publicKey=he.toASN(r).valueHex,this.data=Buffer.from(he.serialize(n)),this}},nf=class extends je{constructor(){super(...arguments),this.name="SHA-1",this.usages=[]}async onDigest(e,r){return Ye.digest(e,r)}},sf=class extends je{constructor(){super(...arguments),this.name="SHA-256",this.usages=[]}async onDigest(e,r){return Ye.digest(e,r)}},of=class extends je{constructor(){super(...arguments),this.name="SHA-384",this.usages=[]}async onDigest(e,r){return Ye.digest(e,r)}},af=class extends je{constructor(){super(...arguments),this.name="SHA-512",this.usages=[]}async onDigest(e,r){return Ye.digest(e,r)}},lf=class extends je{constructor(){super(...arguments),this.name="SHA3-256",this.usages=[]}async onDigest(e,r){return Ye.digest(e,r)}},cf=class extends je{constructor(){super(...arguments),this.name="SHA3-384",this.usages=[]}async onDigest(e,r){return Ye.digest(e,r)}},uf=class extends je{constructor(){super(...arguments),this.name="SHA3-512",this.usages=[]}async onDigest(e,r){return Ye.digest(e,r)}},_t=class{static async generateKey(e,r,n){let i=new $i;i.algorithm=e,i.extractable=r,i.usages=n.filter(c=>this.privateKeyUsages.indexOf(c)!==-1);let s=new Di;s.algorithm=e,s.extractable=!0,s.usages=n.filter(c=>this.publicKeyUsages.indexOf(c)!==-1);let o=V.generateKeyPairSync("ec",{namedCurve:this.getOpenSSLNamedCurve(e.namedCurve),publicKeyEncoding:{format:"der",type:"spki"},privateKeyEncoding:{format:"der",type:"pkcs8"}});return i.data=o.privateKey,s.data=o.publicKey,{privateKey:i,publicKey:s}}static async sign(e,r,n){let i=Ye.getAlgorithmName(e.hash),s=V.createSign(i);s.update(Buffer.from(n)),r.pem||(r.pem=`-----BEGIN PRIVATE KEY-----
${r.data.toString("base64")}
-----END PRIVATE KEY-----`);let o={key:r.pem},a=s.sign(o),c=ce.parse(a,N.EcDsaSignature);return ti.encodeSignature(c,ve.get(r.algorithm.namedCurve).size).buffer}static async verify(e,r,n,i){let s=Ye.getAlgorithmName(e.hash),o=V.createVerify(s);o.update(Buffer.from(i)),r.pem||(r.pem=`-----BEGIN PUBLIC KEY-----
${r.data.toString("base64")}
-----END PUBLIC KEY-----`);let a={key:r.pem},c=new N.EcDsaSignature,f=ve.get(r.algorithm.namedCurve),d=ti.decodeSignature(n,f.size);c.r=R.toArrayBuffer(d.r),c.s=R.toArrayBuffer(d.s);let h=Buffer.from(he.serialize(c));return o.verify(a,h)}static async deriveBits(e,r,n){let i=this.getOpenSSLNamedCurve(r.algorithm.namedCurve),s=V.createECDH(i),o=ce.parse(r.data,N.PrivateKeyInfo),a=ce.parse(o.privateKey,N.EcPrivateKey);s.setPrivateKey(Buffer.from(a.privateKey));let c=ce.parse(e.public.data,N.PublicKeyInfo),f=s.computeSecret(Buffer.from(c.publicKey));return n===null?f:new Uint8Array(f).buffer.slice(0,n>>3)}static async exportKey(e,r){switch(e.toLowerCase()){case"jwk":return dt.toJSON(r);case"pkcs8":case"spki":return new Uint8Array(r.data).buffer;case"raw":return ce.parse(r.data,N.PublicKeyInfo).publicKey;default:throw new J("format: Must be 'jwk', 'raw', pkcs8' or 'spki'")}}static async importKey(e,r,n,i,s){switch(e.toLowerCase()){case"jwk":if(r.d){let a=Ge.fromJSON(r,{targetSchema:N.EcPrivateKey});return this.importPrivateKey(a,n,i,s)}else{let a=Ge.fromJSON(r,{targetSchema:N.EcPublicKey});return this.importPublicKey(a,n,i,s)}case"raw":{let o=new N.EcPublicKey(r);return this.importPublicKey(o,n,i,s)}case"spki":{let o=ce.parse(new Uint8Array(r),N.PublicKeyInfo),a=new N.EcPublicKey(o.publicKey);return this.assertKeyParameters(o.publicKeyAlgorithm.parameters,n.namedCurve),this.importPublicKey(a,n,i,s)}case"pkcs8":{let o=ce.parse(new Uint8Array(r),N.PrivateKeyInfo),a=ce.parse(o.privateKey,N.EcPrivateKey);return this.assertKeyParameters(o.privateKeyAlgorithm.parameters,n.namedCurve),this.importPrivateKey(a,n,i,s)}default:throw new J("format: Must be 'jwk', 'raw', 'pkcs8' or 'spki'")}}static assertKeyParameters(e,r){if(!e)throw new Et("Key info doesn't have required parameters");let n="";try{n=ce.parse(e,N.ObjectIdentifier).value}catch{throw new Et("Cannot read key info parameters")}if(Vs(r)!==n)throw new Et("Key info parameter doesn't match to named curve")}static async importPrivateKey(e,r,n,i){let s=new N.PrivateKeyInfo;s.privateKeyAlgorithm.algorithm="1.2.840.10045.2.1",s.privateKeyAlgorithm.parameters=he.serialize(new N.ObjectIdentifier(Vs(r.namedCurve))),s.privateKey=he.serialize(e);let o=new $i;return o.data=Buffer.from(he.serialize(s)),o.algorithm=Object.assign({},r),o.extractable=n,o.usages=i,o}static async importPublicKey(e,r,n,i){let s=new N.PublicKeyInfo;s.publicKeyAlgorithm.algorithm="1.2.840.10045.2.1";let o=Vs(r.namedCurve);s.publicKeyAlgorithm.parameters=he.serialize(new N.ObjectIdentifier(o)),s.publicKey=e.value;let a=new Di;return a.data=Buffer.from(he.serialize(s)),a.algorithm=Object.assign({},r),a.extractable=n,a.usages=i,a}static getOpenSSLNamedCurve(e){switch(e.toUpperCase()){case"P-256":return"prime256v1";case"K-256":return"secp256k1";case"P-384":return"secp384r1";case"P-521":return"secp521r1";default:return e}}};_t.publicKeyUsages=["verify"];_t.privateKeyUsages=["sign","deriveKey","deriveBits"];ff=class extends Ja{constructor(){super(...arguments),this.namedCurves=ve.names,this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512","shake128","shake256","SHA3-256","SHA3-384","SHA3-512"]}async onGenerateKey(e,r,n){let i=await _t.generateKey({...e,name:this.name},r,n);return{privateKey:X(i.privateKey),publicKey:X(i.publicKey)}}async onSign(e,r,n){return _t.sign(e,O(r),new Uint8Array(n))}async onVerify(e,r,n,i){return _t.verify(e,O(r),new Uint8Array(n),new Uint8Array(i))}async onExportKey(e,r){return _t.exportKey(e,O(r))}async onImportKey(e,r,n,i,s){let o=await _t.importKey(e,r,{...n,name:this.name},i,s);return X(o)}checkCryptoKey(e,r){super.checkCryptoKey(e,r);let n=O(e);if(!(n instanceof $i||n instanceof Di))throw new TypeError("key: Is not EC CryptoKey")}},df=class extends qs{constructor(){super(...arguments),this.namedCurves=ve.names}async onGenerateKey(e,r,n){let i=await _t.generateKey({...e,name:this.name},r,n);return{privateKey:X(i.privateKey),publicKey:X(i.publicKey)}}async onExportKey(e,r){return _t.exportKey(e,O(r))}async onImportKey(e,r,n,i,s){let o=await _t.importKey(e,r,{...n,name:this.name},i,s);return X(o)}checkCryptoKey(e,r){super.checkCryptoKey(e,r);let n=O(e);if(!(n instanceof $i||n instanceof Di))throw new TypeError("key: Is not EC CryptoKey")}async onDeriveBits(e,r,n){return await _t.deriveBits({...e,public:O(e.public)},O(r),n)}},EA={[N.idEd448]:"Ed448",ed448:N.idEd448,[N.idX448]:"X448",x448:N.idX448,[N.idEd25519]:"Ed25519",ed25519:N.idEd25519,[N.idX25519]:"X25519",x25519:N.idX25519};hl=class extends an{constructor(){super(...arguments),this.type="private"}getKey(){let e=ce.parse(this.data,N.PrivateKeyInfo);return ce.parse(e.privateKey,N.CurvePrivateKey)}toJSON(){let e=this.getKey(),r={kty:"OKP",crv:this.algorithm.namedCurve,key_ops:this.usages,ext:this.extractable};return Object.assign(r,dt.toJSON(e))}fromJSON(e){if(!e.crv)throw new J("Cannot get named curve from JWK. Property 'crv' is required");let r=new N.PrivateKeyInfo;r.privateKeyAlgorithm.algorithm=cg(e.crv);let n=Ge.fromJSON(e,{targetSchema:N.CurvePrivateKey});return r.privateKey=he.serialize(n),this.data=Buffer.from(he.serialize(r)),this}},pl=class extends an{constructor(){super(...arguments),this.type="public"}getKey(){return ce.parse(this.data,N.PublicKeyInfo).publicKey}toJSON(){let e=this.getKey(),r={kty:"OKP",crv:this.algorithm.namedCurve,key_ops:this.usages,ext:this.extractable};return Object.assign(r,{x:Z.ToBase64Url(e)})}fromJSON(e){if(!e.crv)throw new J("Cannot get named curve from JWK. Property 'crv' is required");if(!e.x)throw new J("Cannot get property from JWK. Property 'x' is required");let r=new N.PublicKeyInfo;return r.publicKeyAlgorithm.algorithm=cg(e.crv),r.publicKey=Z.FromBase64Url(e.x),this.data=Buffer.from(he.serialize(r)),this}},kt=class{static async generateKey(e,r,n){let i=new hl;i.algorithm=e,i.extractable=r,i.usages=n.filter(f=>this.privateKeyUsages.indexOf(f)!==-1);let s=new pl;s.algorithm=e,s.extractable=!0,s.usages=n.filter(f=>this.publicKeyUsages.indexOf(f)!==-1);let o=e.namedCurve.toLowerCase(),a=V.generateKeyPairSync(o,{publicKeyEncoding:{format:"der",type:"spki"},privateKeyEncoding:{format:"der",type:"pkcs8"}});return i.data=a.privateKey,s.data=a.publicKey,{privateKey:i,publicKey:s}}static async sign(e,r,n){r.pem||(r.pem=`-----BEGIN PRIVATE KEY-----
${r.data.toString("base64")}
-----END PRIVATE KEY-----`);let i={key:r.pem},s=V.sign(null,Buffer.from(n),i);return R.toArrayBuffer(s)}static async verify(e,r,n,i){r.pem||(r.pem=`-----BEGIN PUBLIC KEY-----
${r.data.toString("base64")}
-----END PUBLIC KEY-----`);let s={key:r.pem};return V.verify(null,Buffer.from(i),s,Buffer.from(n))}static async deriveBits(e,r,n){let i=V.createPublicKey({key:e.public.data,format:"der",type:"spki"}),s=V.createPrivateKey({key:r.data,format:"der",type:"pkcs8"}),o=V.diffieHellman({publicKey:i,privateKey:s});return new Uint8Array(o).buffer.slice(0,n>>3)}static async exportKey(e,r){switch(e.toLowerCase()){case"jwk":return dt.toJSON(r);case"pkcs8":case"spki":return new Uint8Array(r.data).buffer;case"raw":return ce.parse(r.data,N.PublicKeyInfo).publicKey;default:throw new J("format: Must be 'jwk', 'raw', pkcs8' or 'spki'")}}static async importKey(e,r,n,i,s){switch(e.toLowerCase()){case"jwk":{let o=r;if(o.d){let a=Ge.fromJSON(r,{targetSchema:N.CurvePrivateKey});return this.importPrivateKey(a,n,i,s)}else{if(!o.x)throw new TypeError("keyData: Cannot get required 'x' filed");return this.importPublicKey(Z.FromBase64Url(o.x),n,i,s)}}case"raw":return this.importPublicKey(r,n,i,s);case"spki":{let o=ce.parse(new Uint8Array(r),N.PublicKeyInfo);return this.importPublicKey(o.publicKey,n,i,s)}case"pkcs8":{let o=ce.parse(new Uint8Array(r),N.PrivateKeyInfo),a=ce.parse(o.privateKey,N.CurvePrivateKey);return this.importPrivateKey(a,n,i,s)}default:throw new J("format: Must be 'jwk', 'raw', 'pkcs8' or 'spki'")}}static importPrivateKey(e,r,n,i){let s=new hl;return s.fromJSON({crv:r.namedCurve,d:Z.ToBase64Url(e.d)}),s.algorithm=Object.assign({},r),s.extractable=n,s.usages=i,s}static async importPublicKey(e,r,n,i){let s=new pl;return s.fromJSON({crv:r.namedCurve,x:Z.ToBase64Url(e)}),s.algorithm=Object.assign({},r),s.extractable=n,s.usages=i,s}};kt.publicKeyUsages=["verify"];kt.privateKeyUsages=["sign","deriveKey","deriveBits"];hf=class extends Ya{async onGenerateKey(e,r,n){let i=await kt.generateKey({name:this.name,namedCurve:e.namedCurve.replace(/^ed/i,"Ed")},r,n);return{privateKey:X(i.privateKey),publicKey:X(i.publicKey)}}async onSign(e,r,n){return kt.sign(e,O(r),new Uint8Array(n))}async onVerify(e,r,n,i){return kt.verify(e,O(r),new Uint8Array(n),new Uint8Array(i))}async onExportKey(e,r){return kt.exportKey(e,O(r))}async onImportKey(e,r,n,i,s){let o=await kt.importKey(e,r,{...n,name:this.name},i,s);return X(o)}},pf=class extends Ga{async onGenerateKey(e,r,n){let i=await kt.generateKey({name:this.name,namedCurve:e.namedCurve.toUpperCase()},r,n);return{privateKey:X(i.privateKey),publicKey:X(i.publicKey)}}async onDeriveBits(e,r,n){return await kt.deriveBits({...e,public:O(e.public)},O(r),n)}async onExportKey(e,r){return kt.exportKey(e,O(r))}async onImportKey(e,r,n,i,s){let o=await kt.importKey(e,r,{...n,name:this.name},i,s);return X(o)}},ml=class extends Qt{},mf=class extends rl{async onDeriveBits(e,r,n){return new Promise((i,s)=>{let o=R.toArrayBuffer(e.salt),a=e.hash.name.replace("-","");V.pbkdf2(O(r).data,Buffer.from(o),e.iterations,n>>3,a,(c,f)=>{c?s(c):i(new Uint8Array(f).buffer)})})}async onImportKey(e,r,n,i,s){if(e==="raw"){let o=new ml;return o.data=Buffer.from(r),o.algorithm={name:this.name},o.extractable=!1,o.usages=s,X(o)}throw new J("format: Must be 'raw'")}checkCryptoKey(e,r){if(super.checkCryptoKey(e,r),!(O(e)instanceof ml))throw new TypeError("key: Is not PBKDF CryptoKey")}},ri=class extends Qt{get alg(){return`HS${this.algorithm.hash.name.toUpperCase().replace("SHA-","")}`}set alg(e){}};on([$e({name:"k",converter:Ef})],ri.prototype,"data",void 0);gf=class extends tl{async onGenerateKey(e,r,n){let i=(e.length||this.getDefaultLength(e.hash.name))>>3<<3,s=new ri;return s.algorithm={...e,length:i,name:this.name},s.extractable=r,s.usages=n,s.data=V.randomBytes(i>>3),X(s)}async onSign(e,r,n){let i=Ye.getAlgorithmName(r.algorithm.hash),s=V.createHmac(i,O(r).data).update(Buffer.from(n)).digest();return new Uint8Array(s).buffer}async onVerify(e,r,n,i){let s=Ye.getAlgorithmName(r.algorithm.hash);return V.createHmac(s,O(r).data).update(Buffer.from(i)).digest().compare(Buffer.from(n))===0}async onImportKey(e,r,n,i,s){let o;switch(e.toLowerCase()){case"jwk":o=Ge.fromJSON(r,{targetSchema:ri});break;case"raw":o=new ri,o.data=Buffer.from(r);break;default:throw new J("format: Must be 'jwk' or 'raw'")}return o.algorithm={hash:{name:n.hash.name},name:this.name,length:o.data.length<<3},o.extractable=i,o.usages=s,X(o)}async onExportKey(e,r){switch(e.toLowerCase()){case"jwk":return dt.toJSON(O(r));case"raw":return new Uint8Array(O(r).data).buffer;default:throw new J("format: Must be 'jwk' or 'raw'")}}checkCryptoKey(e,r){if(super.checkCryptoKey(e,r),!(O(e)instanceof ri))throw new TypeError("key: Is not HMAC CryptoKey")}},gl=class extends Qt{},yf=class extends nl{async onImportKey(e,r,n,i,s){if(e.toLowerCase()!=="raw")throw new J("Operation not supported");let o=new gl;return o.data=Buffer.from(r),o.algorithm={name:this.name},o.extractable=i,o.usages=s,X(o)}async onDeriveBits(e,r,n){let i=e.hash.name.replace("-",""),s=V.createHash(i).digest().length,o=n/8,a=R.toUint8Array(e.info),c=V.createHmac(i,R.toUint8Array(e.salt)).update(R.toUint8Array(O(r).data)).digest(),f=[Buffer.alloc(0)],d=Math.ceil(o/s)+1;for(let h=1;h<d;++h)f.push(V.createHmac(i,c).update(Buffer.concat([f[h-1],a,Buffer.from([h])])).digest());return Buffer.concat(f).slice(0,o)}checkCryptoKey(e,r){if(super.checkCryptoKey(e,r),!(O(e)instanceof gl))throw new TypeError("key: Is not HKDF CryptoKey")}},yl=class{static digest(e,r){let n=V.createHash(e.name.toLowerCase(),{outputLength:e.length}).update(Buffer.from(r)).digest();return new Uint8Array(n).buffer}},bf=class extends sl{async onDigest(e,r){return yl.digest(e,r)}},wf=class extends ol{async onDigest(e,r){return yl.digest(e,r)}},vf=class extends ll{constructor(){var e;super(),this.providers.set(new Vu),this.providers.set(new zu),this.providers.set(new Ju),this.providers.set(new Wu),this.providers.set(new Gu),this.providers.set(new Yu),this.providers.set(new Qu),this.providers.set(new Zu),this.providers.set(new Xu),this.providers.set(new ef),this.providers.set(new tf),this.providers.set(new rf),this.providers.set(new ff),this.providers.set(new df),this.providers.set(new nf),this.providers.set(new sf),this.providers.set(new of),this.providers.set(new af),this.providers.set(new mf),this.providers.set(new gf),this.providers.set(new yf);let r=(e=/^v(\d+)/.exec(og.version))===null||e===void 0?void 0:e[1];r&&parseInt(r,10)>=12&&(this.providers.set(new bf),this.providers.set(new wf));let n=cr.getHashes();n.includes("sha3-256")&&this.providers.set(new lf),n.includes("sha3-384")&&this.providers.set(new cf),n.includes("sha3-512")&&this.providers.set(new uf),r&&parseInt(r,10)>=14&&(this.providers.set(new hf),this.providers.set(new pf))}},Sf=class extends al{constructor(){super(...arguments),this.subtle=new vf}getRandomValues(e){if(!ArrayBuffer.isView(e))throw new TypeError("Failed to execute 'getRandomValues' on 'Crypto': parameter 1 is not of type 'ArrayBufferView'");let r=Buffer.from(e.buffer,e.byteOffset,e.byteLength);return V.randomFillSync(r),e}}});var fg=at((D$,ug)=>{"use strict";var Hs;try{Hs=$("node:crypto").webcrypto,Hs||(Hs=new(kf(),du(_f)).Crypto)}catch{Hs=new(kf(),du(_f)).Crypto}ug.exports=Hs});var mg=at(pg=>{"use strict";$("node:fs");$("node:path");var dg=Cf();$("node:http");$("node:https");$("node:zlib");$("node:stream");$("node:buffer");$("node:util");$("node:url");$("node:net");var ur=0,Ae={START_BOUNDARY:ur++,HEADER_FIELD_START:ur++,HEADER_FIELD:ur++,HEADER_VALUE_START:ur++,HEADER_VALUE:ur++,HEADER_VALUE_ALMOST_DONE:ur++,HEADERS_ALMOST_DONE:ur++,PART_DATA_START:ur++,PART_DATA:ur++,END:ur++},hg=1,un={PART_BOUNDARY:hg,LAST_BOUNDARY:hg*=2},bl=10,wl=13,AA=32,Ws=45,_A=58,kA=97,xA=122,CA=t=>t|32,ii=()=>{},xf=class{constructor(e){this.index=0,this.flags=0,this.onHeaderEnd=ii,this.onHeaderField=ii,this.onHeadersEnd=ii,this.onHeaderValue=ii,this.onPartBegin=ii,this.onPartData=ii,this.onPartEnd=ii,this.boundaryChars={},e=`\r
--`+e;let r=new Uint8Array(e.length);for(let n=0;n<e.length;n++)r[n]=e.charCodeAt(n),this.boundaryChars[r[n]]=!0;this.boundary=r,this.lookbehind=new Uint8Array(this.boundary.length+8),this.state=Ae.START_BOUNDARY}write(e){let r=0,n=e.length,i=this.index,{lookbehind:s,boundary:o,boundaryChars:a,index:c,state:f,flags:d}=this,h=this.boundary.length,m=h-1,b=e.length,y,w,S=C=>{this[C+"Mark"]=r},_=C=>{delete this[C+"Mark"]},T=(C,L,B,j)=>{(L===void 0||L!==B)&&this[C](j&&j.subarray(L,B))},P=(C,L)=>{let B=C+"Mark";B in this&&(L?(T(C,this[B],r,e),delete this[B]):(T(C,this[B],e.length,e),this[B]=0))};for(r=0;r<n;r++)switch(y=e[r],f){case Ae.START_BOUNDARY:if(c===o.length-2){if(y===Ws)d|=un.LAST_BOUNDARY;else if(y!==wl)return;c++;break}else if(c-1===o.length-2){if(d&un.LAST_BOUNDARY&&y===Ws)f=Ae.END,d=0;else if(!(d&un.LAST_BOUNDARY)&&y===bl)c=0,T("onPartBegin"),f=Ae.HEADER_FIELD_START;else return;break}y!==o[c+2]&&(c=-2),y===o[c+2]&&c++;break;case Ae.HEADER_FIELD_START:f=Ae.HEADER_FIELD,S("onHeaderField"),c=0;case Ae.HEADER_FIELD:if(y===wl){_("onHeaderField"),f=Ae.HEADERS_ALMOST_DONE;break}if(c++,y===Ws)break;if(y===_A){if(c===1)return;P("onHeaderField",!0),f=Ae.HEADER_VALUE_START;break}if(w=CA(y),w<kA||w>xA)return;break;case Ae.HEADER_VALUE_START:if(y===AA)break;S("onHeaderValue"),f=Ae.HEADER_VALUE;case Ae.HEADER_VALUE:y===wl&&(P("onHeaderValue",!0),T("onHeaderEnd"),f=Ae.HEADER_VALUE_ALMOST_DONE);break;case Ae.HEADER_VALUE_ALMOST_DONE:if(y!==bl)return;f=Ae.HEADER_FIELD_START;break;case Ae.HEADERS_ALMOST_DONE:if(y!==bl)return;T("onHeadersEnd"),f=Ae.PART_DATA_START;break;case Ae.PART_DATA_START:f=Ae.PART_DATA,S("onPartData");case Ae.PART_DATA:if(i=c,c===0){for(r+=m;r<b&&!(e[r]in a);)r+=h;r-=m,y=e[r]}if(c<o.length)o[c]===y?(c===0&&P("onPartData",!0),c++):c=0;else if(c===o.length)c++,y===wl?d|=un.PART_BOUNDARY:y===Ws?d|=un.LAST_BOUNDARY:c=0;else if(c-1===o.length)if(d&un.PART_BOUNDARY){if(c=0,y===bl){d&=~un.PART_BOUNDARY,T("onPartEnd"),T("onPartBegin"),f=Ae.HEADER_FIELD_START;break}}else d&un.LAST_BOUNDARY&&y===Ws?(T("onPartEnd"),f=Ae.END,d=0):c=0;if(c>0)s[c-1]=y;else if(i>0){let C=new Uint8Array(s.buffer,s.byteOffset,s.byteLength);T("onPartData",0,i,C),i=0,S("onPartData"),r--}break;case Ae.END:break;default:throw new Error(`Unexpected state entered: ${f}`)}P("onHeaderField"),P("onHeaderValue"),P("onPartData"),this.index=c,this.state=f,this.flags=d}end(){if(this.state===Ae.HEADER_FIELD_START&&this.index===0||this.state===Ae.PART_DATA&&this.index===this.boundary.length)this.onPartEnd();else if(this.state!==Ae.END)throw new Error("MultipartParser.end(): stream ended unexpectedly")}};function PA(t){let e=t.match(/\bfilename=("(.*?)"|([^()<>@,;:\\"/[\]?={}\s\t]+))($|;\s)/i);if(!e)return;let r=e[2]||e[3]||"",n=r.slice(r.lastIndexOf("\\")+1);return n=n.replace(/%22/g,'"'),n=n.replace(/&#(\d{4});/g,(i,s)=>String.fromCharCode(s)),n}async function RA(t,e){if(!/multipart/i.test(e))throw new TypeError("Failed to fetch");let r=e.match(/boundary=(?:"([^"]+)"|([^;]+))/i);if(!r)throw new TypeError("no or bad content-type header, no multipart boundary");let n=new xf(r[1]||r[2]),i,s,o,a,c,f,d=[],h=new dg.FormData,m=_=>{o+=S.decode(_,{stream:!0})},b=_=>{d.push(_)},y=()=>{let _=new dg.File(d,f,{type:c});h.append(a,_)},w=()=>{h.append(a,o)},S=new TextDecoder("utf-8");S.decode(),n.onPartBegin=function(){n.onPartData=m,n.onPartEnd=w,i="",s="",o="",a="",c="",f=null,d.length=0},n.onHeaderField=function(_){i+=S.decode(_,{stream:!0})},n.onHeaderValue=function(_){s+=S.decode(_,{stream:!0})},n.onHeaderEnd=function(){if(s+=S.decode(),i=i.toLowerCase(),i==="content-disposition"){let _=s.match(/\bname=("([^"]*)"|([^()<>@,;:\\"/[\]?={}\s\t]+))/i);_&&(a=_[2]||_[3]||""),f=PA(s),f&&(n.onPartData=b,n.onPartEnd=y)}else i==="content-type"&&(c=s);s="",i=""};for await(let _ of t)n.write(_);return n.end(),h}pg.toFormData=RA});var Cf=at(Ct=>{"use strict";var Ys=$("node:http"),TA=$("node:https"),Ki=$("node:zlib"),Ke=$("node:stream"),Qe=$("node:buffer"),Nr=$("node:util"),BA=$("node:url"),OA=$("node:net");$("node:fs");$("node:path");function IA(t){if(!/^data:/i.test(t))throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');t=t.replace(/\r?\n/g,"");let e=t.indexOf(",");if(e===-1||e<=4)throw new TypeError("malformed data: URI");let r=t.substring(5,e).split(";"),n="",i=!1,s=r[0]||"text/plain",o=s;for(let d=1;d<r.length;d++)r[d]==="base64"?i=!0:(o+=`;${r[d]}`,r[d].indexOf("charset=")===0&&(n=r[d].substring(8)));!r[0]&&!n.length&&(o+=";charset=US-ASCII",n="US-ASCII");let a=i?"base64":"ascii",c=unescape(t.substring(e+1)),f=Buffer.from(c,a);return f.type=s,f.typeFull=o,f.charset=n,f}var Pf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},vl={exports:{}},gg;function NA(){return gg||(gg=1,function(t,e){(function(r,n){n(e)})(Pf,function(r){let n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol:l=>`Symbol(${l})`;function i(){}function s(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof Pf<"u")return Pf}let o=s();function a(l){return typeof l=="object"&&l!==null||typeof l=="function"}let c=i,f=Promise,d=Promise.prototype.then,h=Promise.resolve.bind(f),m=Promise.reject.bind(f);function b(l){return new f(l)}function y(l){return h(l)}function w(l){return m(l)}function S(l,u,p){return d.call(l,u,p)}function _(l,u,p){S(S(l,u,p),void 0,c)}function T(l,u){_(l,u)}function P(l,u){_(l,void 0,u)}function C(l,u,p){return S(l,u,p)}function L(l){S(l,void 0,c)}let B=(()=>{let l=o&&o.queueMicrotask;if(typeof l=="function")return l;let u=y(void 0);return p=>S(u,p)})();function j(l,u,p){if(typeof l!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(l,u,p)}function A(l,u,p){try{return y(j(l,u,p))}catch(g){return w(g)}}let M=16384;class K{constructor(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}get length(){return this._size}push(u){let p=this._back,g=p;p._elements.length===M-1&&(g={_elements:[],_next:void 0}),p._elements.push(u),g!==p&&(this._back=g,p._next=g),++this._size}shift(){let u=this._front,p=u,g=this._cursor,v=g+1,E=u._elements,x=E[g];return v===M&&(p=u._next,v=0),--this._size,this._cursor=v,u!==p&&(this._front=p),E[g]=void 0,x}forEach(u){let p=this._cursor,g=this._front,v=g._elements;for(;(p!==v.length||g._next!==void 0)&&!(p===v.length&&(g=g._next,v=g._elements,p=0,v.length===0));)u(v[p]),++p}peek(){let u=this._front,p=this._cursor;return u._elements[p]}}function G(l,u){l._ownerReadableStream=u,u._reader=l,u._state==="readable"?ee(l):u._state==="closed"?rr(l):Q(l,u._storedError)}function ae(l,u){let p=l._ownerReadableStream;return Ft(p,u)}function F(l){l._ownerReadableStream._state==="readable"?Sr(l,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):$0(l,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),l._ownerReadableStream._reader=void 0,l._ownerReadableStream=void 0}function ne(l){return new TypeError("Cannot "+l+" a stream using a released reader")}function ee(l){l._closedPromise=b((u,p)=>{l._closedPromise_resolve=u,l._closedPromise_reject=p})}function Q(l,u){ee(l),Sr(l,u)}function rr(l){ee(l),Ah(l)}function Sr(l,u){l._closedPromise_reject!==void 0&&(L(l._closedPromise),l._closedPromise_reject(u),l._closedPromise_resolve=void 0,l._closedPromise_reject=void 0)}function $0(l,u){Q(l,u)}function Ah(l){l._closedPromise_resolve!==void 0&&(l._closedPromise_resolve(void 0),l._closedPromise_resolve=void 0,l._closedPromise_reject=void 0)}let _h=n("[[AbortSteps]]"),kh=n("[[ErrorSteps]]"),$c=n("[[CancelSteps]]"),Dc=n("[[PullSteps]]"),xh=Number.isFinite||function(l){return typeof l=="number"&&isFinite(l)},D0=Math.trunc||function(l){return l<0?Math.ceil(l):Math.floor(l)};function K0(l){return typeof l=="object"||typeof l=="function"}function Er(l,u){if(l!==void 0&&!K0(l))throw new TypeError(`${u} is not an object.`)}function jt(l,u){if(typeof l!="function")throw new TypeError(`${u} is not a function.`)}function q0(l){return typeof l=="object"&&l!==null||typeof l=="function"}function Ch(l,u){if(!q0(l))throw new TypeError(`${u} is not an object.`)}function Ar(l,u,p){if(l===void 0)throw new TypeError(`Parameter ${u} is required in '${p}'.`)}function Kc(l,u,p){if(l===void 0)throw new TypeError(`${u} is required in '${p}'.`)}function qc(l){return Number(l)}function Ph(l){return l===0?0:l}function L0(l){return Ph(D0(l))}function Rh(l,u){let g=Number.MAX_SAFE_INTEGER,v=Number(l);if(v=Ph(v),!xh(v))throw new TypeError(`${u} is not a finite number`);if(v=L0(v),v<0||v>g)throw new TypeError(`${u} is outside the accepted range of 0 to ${g}, inclusive`);return!xh(v)||v===0?0:v}function Lc(l,u){if(!zr(l))throw new TypeError(`${u} is not a ReadableStream.`)}function pi(l){return new ts(l)}function Th(l,u){l._reader._readRequests.push(u)}function jc(l,u,p){let v=l._reader._readRequests.shift();p?v._closeSteps():v._chunkSteps(u)}function Bo(l){return l._reader._readRequests.length}function Bh(l){let u=l._reader;return!(u===void 0||!Fr(u))}class ts{constructor(u){if(Ar(u,1,"ReadableStreamDefaultReader"),Lc(u,"First parameter"),Jr(u))throw new TypeError("This stream has already been locked for exclusive reading by another reader");G(this,u),this._readRequests=new K}get closed(){return Fr(this)?this._closedPromise:w(Oo("closed"))}cancel(u=void 0){return Fr(this)?this._ownerReadableStream===void 0?w(ne("cancel")):ae(this,u):w(Oo("cancel"))}read(){if(!Fr(this))return w(Oo("read"));if(this._ownerReadableStream===void 0)return w(ne("read from"));let u,p,g=b((E,x)=>{u=E,p=x});return rs(this,{_chunkSteps:E=>u({value:E,done:!1}),_closeSteps:()=>u({value:void 0,done:!0}),_errorSteps:E=>p(E)}),g}releaseLock(){if(!Fr(this))throw Oo("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");F(this)}}}Object.defineProperties(ts.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof n.toStringTag=="symbol"&&Object.defineProperty(ts.prototype,n.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});function Fr(l){return!a(l)||!Object.prototype.hasOwnProperty.call(l,"_readRequests")?!1:l instanceof ts}function rs(l,u){let p=l._ownerReadableStream;p._disturbed=!0,p._state==="closed"?u._closeSteps():p._state==="errored"?u._errorSteps(p._storedError):p._readableStreamController[Dc](u)}function Oo(l){return new TypeError(`ReadableStreamDefaultReader.prototype.${l} can only be used on a ReadableStreamDefaultReader`)}let Oh=Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}).prototype);class Ih{constructor(u,p){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=u,this._preventCancel=p}next(){let u=()=>this._nextSteps();return this._ongoingPromise=this._ongoingPromise?C(this._ongoingPromise,u,u):u(),this._ongoingPromise}return(u){let p=()=>this._returnSteps(u);return this._ongoingPromise?C(this._ongoingPromise,p,p):p()}_nextSteps(){if(this._isFinished)return Promise.resolve({value:void 0,done:!0});let u=this._reader;if(u._ownerReadableStream===void 0)return w(ne("iterate"));let p,g,v=b((x,U)=>{p=x,g=U});return rs(u,{_chunkSteps:x=>{this._ongoingPromise=void 0,B(()=>p({value:x,done:!1}))},_closeSteps:()=>{this._ongoingPromise=void 0,this._isFinished=!0,F(u),p({value:void 0,done:!0})},_errorSteps:x=>{this._ongoingPromise=void 0,this._isFinished=!0,F(u),g(x)}}),v}_returnSteps(u){if(this._isFinished)return Promise.resolve({value:u,done:!0});this._isFinished=!0;let p=this._reader;if(p._ownerReadableStream===void 0)return w(ne("finish iterating"));if(!this._preventCancel){let g=ae(p,u);return F(p),C(g,()=>({value:u,done:!0}))}return F(p),y({value:u,done:!0})}}let Nh={next(){return Uh(this)?this._asyncIteratorImpl.next():w($h("next"))},return(l){return Uh(this)?this._asyncIteratorImpl.return(l):w($h("return"))}};Oh!==void 0&&Object.setPrototypeOf(Nh,Oh);function j0(l,u){let p=pi(l),g=new Ih(p,u),v=Object.create(Nh);return v._asyncIteratorImpl=g,v}function Uh(l){if(!a(l)||!Object.prototype.hasOwnProperty.call(l,"_asyncIteratorImpl"))return!1;try{return l._asyncIteratorImpl instanceof Ih}catch{return!1}}function $h(l){return new TypeError(`ReadableStreamAsyncIterator.${l} can only be used on a ReadableSteamAsyncIterator`)}let Dh=Number.isNaN||function(l){return l!==l};function ns(l){return l.slice()}function Kh(l,u,p,g,v){new Uint8Array(l).set(new Uint8Array(p,g,v),u)}function AN(l){return l}function Io(l){return!1}function qh(l,u,p){if(l.slice)return l.slice(u,p);let g=p-u,v=new ArrayBuffer(g);return Kh(v,0,l,u,g),v}function M0(l){return!(typeof l!="number"||Dh(l)||l<0)}function Lh(l){let u=qh(l.buffer,l.byteOffset,l.byteOffset+l.byteLength);return new Uint8Array(u)}function Mc(l){let u=l._queue.shift();return l._queueTotalSize-=u.size,l._queueTotalSize<0&&(l._queueTotalSize=0),u.value}function Fc(l,u,p){if(!M0(p)||p===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");l._queue.push({value:u,size:p}),l._queueTotalSize+=p}function F0(l){return l._queue.peek().value}function Vr(l){l._queue=new K,l._queueTotalSize=0}class is{constructor(){throw new TypeError("Illegal constructor")}get view(){if(!Vc(this))throw Jc("view");return this._view}respond(u){if(!Vc(this))throw Jc("respond");if(Ar(u,1,"respond"),u=Rh(u,"First parameter"),this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");Io(this._view.buffer),Ko(this._associatedReadableByteStreamController,u)}respondWithNewView(u){if(!Vc(this))throw Jc("respondWithNewView");if(Ar(u,1,"respondWithNewView"),!ArrayBuffer.isView(u))throw new TypeError("You can only respond with array buffer views");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");Io(u.buffer),qo(this._associatedReadableByteStreamController,u)}}Object.defineProperties(is.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),typeof n.toStringTag=="symbol"&&Object.defineProperty(is.prototype,n.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});class mi{constructor(){throw new TypeError("Illegal constructor")}get byobRequest(){if(!xn(this))throw os("byobRequest");return zc(this)}get desiredSize(){if(!xn(this))throw os("desiredSize");return Jh(this)}close(){if(!xn(this))throw os("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");let u=this._controlledReadableByteStream._state;if(u!=="readable")throw new TypeError(`The stream (in ${u} state) is not in the readable state and cannot be closed`);ss(this)}enqueue(u){if(!xn(this))throw os("enqueue");if(Ar(u,1,"enqueue"),!ArrayBuffer.isView(u))throw new TypeError("chunk must be an array buffer view");if(u.byteLength===0)throw new TypeError("chunk must have non-zero byteLength");if(u.buffer.byteLength===0)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");let p=this._controlledReadableByteStream._state;if(p!=="readable")throw new TypeError(`The stream (in ${p} state) is not in the readable state and cannot be enqueued to`);Do(this,u)}error(u=void 0){if(!xn(this))throw os("error");Mt(this,u)}[$c](u){jh(this),Vr(this);let p=this._cancelAlgorithm(u);return $o(this),p}[Dc](u){let p=this._controlledReadableByteStream;if(this._queueTotalSize>0){let v=this._queue.shift();this._queueTotalSize-=v.byteLength,Hh(this);let E=new Uint8Array(v.buffer,v.byteOffset,v.byteLength);u._chunkSteps(E);return}let g=this._autoAllocateChunkSize;if(g!==void 0){let v;try{v=new ArrayBuffer(g)}catch(x){u._errorSteps(x);return}let E={buffer:v,bufferByteLength:g,byteOffset:0,byteLength:g,bytesFilled:0,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(E)}Th(p,u),Cn(this)}}Object.defineProperties(mi.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof n.toStringTag=="symbol"&&Object.defineProperty(mi.prototype,n.toStringTag,{value:"ReadableByteStreamController",configurable:!0});function xn(l){return!a(l)||!Object.prototype.hasOwnProperty.call(l,"_controlledReadableByteStream")?!1:l instanceof mi}function Vc(l){return!a(l)||!Object.prototype.hasOwnProperty.call(l,"_associatedReadableByteStreamController")?!1:l instanceof is}function Cn(l){if(!z0(l))return;if(l._pulling){l._pullAgain=!0;return}l._pulling=!0;let p=l._pullAlgorithm();_(p,()=>{l._pulling=!1,l._pullAgain&&(l._pullAgain=!1,Cn(l))},g=>{Mt(l,g)})}function jh(l){Wc(l),l._pendingPullIntos=new K}function Hc(l,u){let p=!1;l._state==="closed"&&(p=!0);let g=Mh(u);u.readerType==="default"?jc(l,g,p):Y0(l,g,p)}function Mh(l){let u=l.bytesFilled,p=l.elementSize;return new l.viewConstructor(l.buffer,l.byteOffset,u/p)}function No(l,u,p,g){l._queue.push({buffer:u,byteOffset:p,byteLength:g}),l._queueTotalSize+=g}function Fh(l,u){let p=u.elementSize,g=u.bytesFilled-u.bytesFilled%p,v=Math.min(l._queueTotalSize,u.byteLength-u.bytesFilled),E=u.bytesFilled+v,x=E-E%p,U=v,re=!1;x>g&&(U=x-u.bytesFilled,re=!0);let oe=l._queue;for(;U>0;){let ue=oe.peek(),fe=Math.min(U,ue.byteLength),Ne=u.byteOffset+u.bytesFilled;Kh(u.buffer,Ne,ue.buffer,ue.byteOffset,fe),ue.byteLength===fe?oe.shift():(ue.byteOffset+=fe,ue.byteLength-=fe),l._queueTotalSize-=fe,Vh(l,fe,u),U-=fe}return re}function Vh(l,u,p){p.bytesFilled+=u}function Hh(l){l._queueTotalSize===0&&l._closeRequested?($o(l),ps(l._controlledReadableByteStream)):Cn(l)}function Wc(l){l._byobRequest!==null&&(l._byobRequest._associatedReadableByteStreamController=void 0,l._byobRequest._view=null,l._byobRequest=null)}function Wh(l){for(;l._pendingPullIntos.length>0;){if(l._queueTotalSize===0)return;let u=l._pendingPullIntos.peek();Fh(l,u)&&(Uo(l),Hc(l._controlledReadableByteStream,u))}}function V0(l,u,p){let g=l._controlledReadableByteStream,v=1;u.constructor!==DataView&&(v=u.constructor.BYTES_PER_ELEMENT);let E=u.constructor,x=u.buffer,U={buffer:x,bufferByteLength:x.byteLength,byteOffset:u.byteOffset,byteLength:u.byteLength,bytesFilled:0,elementSize:v,viewConstructor:E,readerType:"byob"};if(l._pendingPullIntos.length>0){l._pendingPullIntos.push(U),Qh(g,p);return}if(g._state==="closed"){let re=new E(U.buffer,U.byteOffset,0);p._closeSteps(re);return}if(l._queueTotalSize>0){if(Fh(l,U)){let re=Mh(U);Hh(l),p._chunkSteps(re);return}if(l._closeRequested){let re=new TypeError("Insufficient bytes to fill elements in the given buffer");Mt(l,re),p._errorSteps(re);return}}l._pendingPullIntos.push(U),Qh(g,p),Cn(l)}function H0(l,u){let p=l._controlledReadableByteStream;if(Gc(p))for(;Zh(p)>0;){let g=Uo(l);Hc(p,g)}}function W0(l,u,p){if(Vh(l,u,p),p.bytesFilled<p.elementSize)return;Uo(l);let g=p.bytesFilled%p.elementSize;if(g>0){let v=p.byteOffset+p.bytesFilled,E=qh(p.buffer,v-g,v);No(l,E,0,E.byteLength)}p.bytesFilled-=g,Hc(l._controlledReadableByteStream,p),Wh(l)}function zh(l,u){let p=l._pendingPullIntos.peek();Wc(l),l._controlledReadableByteStream._state==="closed"?H0(l):W0(l,u,p),Cn(l)}function Uo(l){return l._pendingPullIntos.shift()}function z0(l){let u=l._controlledReadableByteStream;return u._state!=="readable"||l._closeRequested||!l._started?!1:!!(Bh(u)&&Bo(u)>0||Gc(u)&&Zh(u)>0||Jh(l)>0)}function $o(l){l._pullAlgorithm=void 0,l._cancelAlgorithm=void 0}function ss(l){let u=l._controlledReadableByteStream;if(!(l._closeRequested||u._state!=="readable")){if(l._queueTotalSize>0){l._closeRequested=!0;return}if(l._pendingPullIntos.length>0&&l._pendingPullIntos.peek().bytesFilled>0){let g=new TypeError("Insufficient bytes to fill elements in the given buffer");throw Mt(l,g),g}$o(l),ps(u)}}function Do(l,u){let p=l._controlledReadableByteStream;if(l._closeRequested||p._state!=="readable")return;let g=u.buffer,v=u.byteOffset,E=u.byteLength,x=g;if(l._pendingPullIntos.length>0){let U=l._pendingPullIntos.peek();Io(U.buffer),U.buffer=U.buffer}if(Wc(l),Bh(p))if(Bo(p)===0)No(l,x,v,E);else{l._pendingPullIntos.length>0&&Uo(l);let U=new Uint8Array(x,v,E);jc(p,U,!1)}else Gc(p)?(No(l,x,v,E),Wh(l)):No(l,x,v,E);Cn(l)}function Mt(l,u){let p=l._controlledReadableByteStream;p._state==="readable"&&(jh(l),Vr(l),$o(l),Ep(p,u))}function zc(l){if(l._byobRequest===null&&l._pendingPullIntos.length>0){let u=l._pendingPullIntos.peek(),p=new Uint8Array(u.buffer,u.byteOffset+u.bytesFilled,u.byteLength-u.bytesFilled),g=Object.create(is.prototype);G0(g,l,p),l._byobRequest=g}return l._byobRequest}function Jh(l){let u=l._controlledReadableByteStream._state;return u==="errored"?null:u==="closed"?0:l._strategyHWM-l._queueTotalSize}function Ko(l,u){let p=l._pendingPullIntos.peek();if(l._controlledReadableByteStream._state==="closed"){if(u!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(u===0)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(p.bytesFilled+u>p.byteLength)throw new RangeError("bytesWritten out of range")}p.buffer=p.buffer,zh(l,u)}function qo(l,u){let p=l._pendingPullIntos.peek();if(l._controlledReadableByteStream._state==="closed"){if(u.byteLength!==0)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(u.byteLength===0)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(p.byteOffset+p.bytesFilled!==u.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(p.bufferByteLength!==u.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(p.bytesFilled+u.byteLength>p.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");let v=u.byteLength;p.buffer=u.buffer,zh(l,v)}function Gh(l,u,p,g,v,E,x){u._controlledReadableByteStream=l,u._pullAgain=!1,u._pulling=!1,u._byobRequest=null,u._queue=u._queueTotalSize=void 0,Vr(u),u._closeRequested=!1,u._started=!1,u._strategyHWM=E,u._pullAlgorithm=g,u._cancelAlgorithm=v,u._autoAllocateChunkSize=x,u._pendingPullIntos=new K,l._readableStreamController=u;let U=p();_(y(U),()=>{u._started=!0,Cn(u)},re=>{Mt(u,re)})}function J0(l,u,p){let g=Object.create(mi.prototype),v=()=>{},E=()=>y(void 0),x=()=>y(void 0);u.start!==void 0&&(v=()=>u.start(g)),u.pull!==void 0&&(E=()=>u.pull(g)),u.cancel!==void 0&&(x=re=>u.cancel(re));let U=u.autoAllocateChunkSize;if(U===0)throw new TypeError("autoAllocateChunkSize must be greater than 0");Gh(l,g,v,E,x,p,U)}function G0(l,u,p){l._associatedReadableByteStreamController=u,l._view=p}function Jc(l){return new TypeError(`ReadableStreamBYOBRequest.prototype.${l} can only be used on a ReadableStreamBYOBRequest`)}function os(l){return new TypeError(`ReadableByteStreamController.prototype.${l} can only be used on a ReadableByteStreamController`)}function Yh(l){return new as(l)}function Qh(l,u){l._reader._readIntoRequests.push(u)}function Y0(l,u,p){let v=l._reader._readIntoRequests.shift();p?v._closeSteps(u):v._chunkSteps(u)}function Zh(l){return l._reader._readIntoRequests.length}function Gc(l){let u=l._reader;return!(u===void 0||!Pn(u))}class as{constructor(u){if(Ar(u,1,"ReadableStreamBYOBReader"),Lc(u,"First parameter"),Jr(u))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!xn(u._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");G(this,u),this._readIntoRequests=new K}get closed(){return Pn(this)?this._closedPromise:w(Lo("closed"))}cancel(u=void 0){return Pn(this)?this._ownerReadableStream===void 0?w(ne("cancel")):ae(this,u):w(Lo("cancel"))}read(u){if(!Pn(this))return w(Lo("read"));if(!ArrayBuffer.isView(u))return w(new TypeError("view must be an array buffer view"));if(u.byteLength===0)return w(new TypeError("view must have non-zero byteLength"));if(u.buffer.byteLength===0)return w(new TypeError("view's buffer must have non-zero byteLength"));if(Io(u.buffer),this._ownerReadableStream===void 0)return w(ne("read from"));let p,g,v=b((x,U)=>{p=x,g=U});return Xh(this,u,{_chunkSteps:x=>p({value:x,done:!1}),_closeSteps:x=>p({value:x,done:!0}),_errorSteps:x=>g(x)}),v}releaseLock(){if(!Pn(this))throw Lo("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readIntoRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");F(this)}}}Object.defineProperties(as.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof n.toStringTag=="symbol"&&Object.defineProperty(as.prototype,n.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});function Pn(l){return!a(l)||!Object.prototype.hasOwnProperty.call(l,"_readIntoRequests")?!1:l instanceof as}function Xh(l,u,p){let g=l._ownerReadableStream;g._disturbed=!0,g._state==="errored"?p._errorSteps(g._storedError):V0(g._readableStreamController,u,p)}function Lo(l){return new TypeError(`ReadableStreamBYOBReader.prototype.${l} can only be used on a ReadableStreamBYOBReader`)}function ls(l,u){let{highWaterMark:p}=l;if(p===void 0)return u;if(Dh(p)||p<0)throw new RangeError("Invalid highWaterMark");return p}function jo(l){let{size:u}=l;return u||(()=>1)}function Mo(l,u){Er(l,u);let p=l?.highWaterMark,g=l?.size;return{highWaterMark:p===void 0?void 0:qc(p),size:g===void 0?void 0:Q0(g,`${u} has member 'size' that`)}}function Q0(l,u){return jt(l,u),p=>qc(l(p))}function Z0(l,u){Er(l,u);let p=l?.abort,g=l?.close,v=l?.start,E=l?.type,x=l?.write;return{abort:p===void 0?void 0:X0(p,l,`${u} has member 'abort' that`),close:g===void 0?void 0:eS(g,l,`${u} has member 'close' that`),start:v===void 0?void 0:tS(v,l,`${u} has member 'start' that`),write:x===void 0?void 0:rS(x,l,`${u} has member 'write' that`),type:E}}function X0(l,u,p){return jt(l,p),g=>A(l,u,[g])}function eS(l,u,p){return jt(l,p),()=>A(l,u,[])}function tS(l,u,p){return jt(l,p),g=>j(l,u,[g])}function rS(l,u,p){return jt(l,p),(g,v)=>A(l,u,[g,v])}function ep(l,u){if(!gi(l))throw new TypeError(`${u} is not a WritableStream.`)}function nS(l){if(typeof l!="object"||l===null)return!1;try{return typeof l.aborted=="boolean"}catch{return!1}}let iS=typeof AbortController=="function";function sS(){if(iS)return new AbortController}class cs{constructor(u={},p={}){u===void 0?u=null:Ch(u,"First parameter");let g=Mo(p,"Second parameter"),v=Z0(u,"First parameter");if(rp(this),v.type!==void 0)throw new RangeError("Invalid type is specified");let x=jo(g),U=ls(g,1);wS(this,v,U,x)}get locked(){if(!gi(this))throw zo("locked");return yi(this)}abort(u=void 0){return gi(this)?yi(this)?w(new TypeError("Cannot abort a stream that already has a writer")):Fo(this,u):w(zo("abort"))}close(){return gi(this)?yi(this)?w(new TypeError("Cannot close a stream that already has a writer")):nr(this)?w(new TypeError("Cannot close an already-closing stream")):np(this):w(zo("close"))}getWriter(){if(!gi(this))throw zo("getWriter");return tp(this)}}Object.defineProperties(cs.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),typeof n.toStringTag=="symbol"&&Object.defineProperty(cs.prototype,n.toStringTag,{value:"WritableStream",configurable:!0});function tp(l){return new us(l)}function oS(l,u,p,g,v=1,E=()=>1){let x=Object.create(cs.prototype);rp(x);let U=Object.create(bi.prototype);return cp(x,U,l,u,p,g,v,E),x}function rp(l){l._state="writable",l._storedError=void 0,l._writer=void 0,l._writableStreamController=void 0,l._writeRequests=new K,l._inFlightWriteRequest=void 0,l._closeRequest=void 0,l._inFlightCloseRequest=void 0,l._pendingAbortRequest=void 0,l._backpressure=!1}function gi(l){return!a(l)||!Object.prototype.hasOwnProperty.call(l,"_writableStreamController")?!1:l instanceof cs}function yi(l){return l._writer!==void 0}function Fo(l,u){var p;if(l._state==="closed"||l._state==="errored")return y(void 0);l._writableStreamController._abortReason=u,(p=l._writableStreamController._abortController)===null||p===void 0||p.abort();let g=l._state;if(g==="closed"||g==="errored")return y(void 0);if(l._pendingAbortRequest!==void 0)return l._pendingAbortRequest._promise;let v=!1;g==="erroring"&&(v=!0,u=void 0);let E=b((x,U)=>{l._pendingAbortRequest={_promise:void 0,_resolve:x,_reject:U,_reason:u,_wasAlreadyErroring:v}});return l._pendingAbortRequest._promise=E,v||Qc(l,u),E}function np(l){let u=l._state;if(u==="closed"||u==="errored")return w(new TypeError(`The stream (in ${u} state) is not in the writable state and cannot be closed`));let p=b((v,E)=>{let x={_resolve:v,_reject:E};l._closeRequest=x}),g=l._writer;return g!==void 0&&l._backpressure&&u==="writable"&&ou(g),vS(l._writableStreamController),p}function aS(l){return b((p,g)=>{let v={_resolve:p,_reject:g};l._writeRequests.push(v)})}function Yc(l,u){if(l._state==="writable"){Qc(l,u);return}Zc(l)}function Qc(l,u){let p=l._writableStreamController;l._state="erroring",l._storedError=u;let g=l._writer;g!==void 0&&sp(g,u),!dS(l)&&p._started&&Zc(l)}function Zc(l){l._state="errored",l._writableStreamController[kh]();let u=l._storedError;if(l._writeRequests.forEach(v=>{v._reject(u)}),l._writeRequests=new K,l._pendingAbortRequest===void 0){Vo(l);return}let p=l._pendingAbortRequest;if(l._pendingAbortRequest=void 0,p._wasAlreadyErroring){p._reject(u),Vo(l);return}let g=l._writableStreamController[_h](p._reason);_(g,()=>{p._resolve(),Vo(l)},v=>{p._reject(v),Vo(l)})}function lS(l){l._inFlightWriteRequest._resolve(void 0),l._inFlightWriteRequest=void 0}function cS(l,u){l._inFlightWriteRequest._reject(u),l._inFlightWriteRequest=void 0,Yc(l,u)}function uS(l){l._inFlightCloseRequest._resolve(void 0),l._inFlightCloseRequest=void 0,l._state==="erroring"&&(l._storedError=void 0,l._pendingAbortRequest!==void 0&&(l._pendingAbortRequest._resolve(),l._pendingAbortRequest=void 0)),l._state="closed";let p=l._writer;p!==void 0&&hp(p)}function fS(l,u){l._inFlightCloseRequest._reject(u),l._inFlightCloseRequest=void 0,l._pendingAbortRequest!==void 0&&(l._pendingAbortRequest._reject(u),l._pendingAbortRequest=void 0),Yc(l,u)}function nr(l){return!(l._closeRequest===void 0&&l._inFlightCloseRequest===void 0)}function dS(l){return!(l._inFlightWriteRequest===void 0&&l._inFlightCloseRequest===void 0)}function hS(l){l._inFlightCloseRequest=l._closeRequest,l._closeRequest=void 0}function pS(l){l._inFlightWriteRequest=l._writeRequests.shift()}function Vo(l){l._closeRequest!==void 0&&(l._closeRequest._reject(l._storedError),l._closeRequest=void 0);let u=l._writer;u!==void 0&&iu(u,l._storedError)}function Xc(l,u){let p=l._writer;p!==void 0&&u!==l._backpressure&&(u?CS(p):ou(p)),l._backpressure=u}class us{constructor(u){if(Ar(u,1,"WritableStreamDefaultWriter"),ep(u,"First parameter"),yi(u))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=u,u._writer=this;let p=u._state;if(p==="writable")!nr(u)&&u._backpressure?Go(this):pp(this),Jo(this);else if(p==="erroring")su(this,u._storedError),Jo(this);else if(p==="closed")pp(this),kS(this);else{let g=u._storedError;su(this,g),dp(this,g)}}get closed(){return Rn(this)?this._closedPromise:w(Tn("closed"))}get desiredSize(){if(!Rn(this))throw Tn("desiredSize");if(this._ownerWritableStream===void 0)throw fs("desiredSize");return bS(this)}get ready(){return Rn(this)?this._readyPromise:w(Tn("ready"))}abort(u=void 0){return Rn(this)?this._ownerWritableStream===void 0?w(fs("abort")):mS(this,u):w(Tn("abort"))}close(){if(!Rn(this))return w(Tn("close"));let u=this._ownerWritableStream;return u===void 0?w(fs("close")):nr(u)?w(new TypeError("Cannot close an already-closing stream")):ip(this)}releaseLock(){if(!Rn(this))throw Tn("releaseLock");this._ownerWritableStream!==void 0&&op(this)}write(u=void 0){return Rn(this)?this._ownerWritableStream===void 0?w(fs("write to")):ap(this,u):w(Tn("write"))}}Object.defineProperties(us.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),typeof n.toStringTag=="symbol"&&Object.defineProperty(us.prototype,n.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});function Rn(l){return!a(l)||!Object.prototype.hasOwnProperty.call(l,"_ownerWritableStream")?!1:l instanceof us}function mS(l,u){let p=l._ownerWritableStream;return Fo(p,u)}function ip(l){let u=l._ownerWritableStream;return np(u)}function gS(l){let u=l._ownerWritableStream,p=u._state;return nr(u)||p==="closed"?y(void 0):p==="errored"?w(u._storedError):ip(l)}function yS(l,u){l._closedPromiseState==="pending"?iu(l,u):xS(l,u)}function sp(l,u){l._readyPromiseState==="pending"?mp(l,u):PS(l,u)}function bS(l){let u=l._ownerWritableStream,p=u._state;return p==="errored"||p==="erroring"?null:p==="closed"?0:up(u._writableStreamController)}function op(l){let u=l._ownerWritableStream,p=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");sp(l,p),yS(l,p),u._writer=void 0,l._ownerWritableStream=void 0}function ap(l,u){let p=l._ownerWritableStream,g=p._writableStreamController,v=SS(g,u);if(p!==l._ownerWritableStream)return w(fs("write to"));let E=p._state;if(E==="errored")return w(p._storedError);if(nr(p)||E==="closed")return w(new TypeError("The stream is closing or closed and cannot be written to"));if(E==="erroring")return w(p._storedError);let x=aS(p);return ES(g,u,v),x}let lp={};class bi{constructor(){throw new TypeError("Illegal constructor")}get abortReason(){if(!eu(this))throw nu("abortReason");return this._abortReason}get signal(){if(!eu(this))throw nu("signal");if(this._abortController===void 0)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal}error(u=void 0){if(!eu(this))throw nu("error");this._controlledWritableStream._state==="writable"&&fp(this,u)}[_h](u){let p=this._abortAlgorithm(u);return Ho(this),p}[kh](){Vr(this)}}Object.defineProperties(bi.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),typeof n.toStringTag=="symbol"&&Object.defineProperty(bi.prototype,n.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});function eu(l){return!a(l)||!Object.prototype.hasOwnProperty.call(l,"_controlledWritableStream")?!1:l instanceof bi}function cp(l,u,p,g,v,E,x,U){u._controlledWritableStream=l,l._writableStreamController=u,u._queue=void 0,u._queueTotalSize=void 0,Vr(u),u._abortReason=void 0,u._abortController=sS(),u._started=!1,u._strategySizeAlgorithm=U,u._strategyHWM=x,u._writeAlgorithm=g,u._closeAlgorithm=v,u._abortAlgorithm=E;let re=ru(u);Xc(l,re);let oe=p(),ue=y(oe);_(ue,()=>{u._started=!0,Wo(u)},fe=>{u._started=!0,Yc(l,fe)})}function wS(l,u,p,g){let v=Object.create(bi.prototype),E=()=>{},x=()=>y(void 0),U=()=>y(void 0),re=()=>y(void 0);u.start!==void 0&&(E=()=>u.start(v)),u.write!==void 0&&(x=oe=>u.write(oe,v)),u.close!==void 0&&(U=()=>u.close()),u.abort!==void 0&&(re=oe=>u.abort(oe)),cp(l,v,E,x,U,re,p,g)}function Ho(l){l._writeAlgorithm=void 0,l._closeAlgorithm=void 0,l._abortAlgorithm=void 0,l._strategySizeAlgorithm=void 0}function vS(l){Fc(l,lp,0),Wo(l)}function SS(l,u){try{return l._strategySizeAlgorithm(u)}catch(p){return tu(l,p),1}}function up(l){return l._strategyHWM-l._queueTotalSize}function ES(l,u,p){try{Fc(l,u,p)}catch(v){tu(l,v);return}let g=l._controlledWritableStream;if(!nr(g)&&g._state==="writable"){let v=ru(l);Xc(g,v)}Wo(l)}function Wo(l){let u=l._controlledWritableStream;if(!l._started||u._inFlightWriteRequest!==void 0)return;if(u._state==="erroring"){Zc(u);return}if(l._queue.length===0)return;let g=F0(l);g===lp?AS(l):_S(l,g)}function tu(l,u){l._controlledWritableStream._state==="writable"&&fp(l,u)}function AS(l){let u=l._controlledWritableStream;hS(u),Mc(l);let p=l._closeAlgorithm();Ho(l),_(p,()=>{uS(u)},g=>{fS(u,g)})}function _S(l,u){let p=l._controlledWritableStream;pS(p);let g=l._writeAlgorithm(u);_(g,()=>{lS(p);let v=p._state;if(Mc(l),!nr(p)&&v==="writable"){let E=ru(l);Xc(p,E)}Wo(l)},v=>{p._state==="writable"&&Ho(l),cS(p,v)})}function ru(l){return up(l)<=0}function fp(l,u){let p=l._controlledWritableStream;Ho(l),Qc(p,u)}function zo(l){return new TypeError(`WritableStream.prototype.${l} can only be used on a WritableStream`)}function nu(l){return new TypeError(`WritableStreamDefaultController.prototype.${l} can only be used on a WritableStreamDefaultController`)}function Tn(l){return new TypeError(`WritableStreamDefaultWriter.prototype.${l} can only be used on a WritableStreamDefaultWriter`)}function fs(l){return new TypeError("Cannot "+l+" a stream using a released writer")}function Jo(l){l._closedPromise=b((u,p)=>{l._closedPromise_resolve=u,l._closedPromise_reject=p,l._closedPromiseState="pending"})}function dp(l,u){Jo(l),iu(l,u)}function kS(l){Jo(l),hp(l)}function iu(l,u){l._closedPromise_reject!==void 0&&(L(l._closedPromise),l._closedPromise_reject(u),l._closedPromise_resolve=void 0,l._closedPromise_reject=void 0,l._closedPromiseState="rejected")}function xS(l,u){dp(l,u)}function hp(l){l._closedPromise_resolve!==void 0&&(l._closedPromise_resolve(void 0),l._closedPromise_resolve=void 0,l._closedPromise_reject=void 0,l._closedPromiseState="resolved")}function Go(l){l._readyPromise=b((u,p)=>{l._readyPromise_resolve=u,l._readyPromise_reject=p}),l._readyPromiseState="pending"}function su(l,u){Go(l),mp(l,u)}function pp(l){Go(l),ou(l)}function mp(l,u){l._readyPromise_reject!==void 0&&(L(l._readyPromise),l._readyPromise_reject(u),l._readyPromise_resolve=void 0,l._readyPromise_reject=void 0,l._readyPromiseState="rejected")}function CS(l){Go(l)}function PS(l,u){su(l,u)}function ou(l){l._readyPromise_resolve!==void 0&&(l._readyPromise_resolve(void 0),l._readyPromise_resolve=void 0,l._readyPromise_reject=void 0,l._readyPromiseState="fulfilled")}let gp=typeof DOMException<"u"?DOMException:void 0;function RS(l){if(!(typeof l=="function"||typeof l=="object"))return!1;try{return new l,!0}catch{return!1}}function TS(){let l=function(p,g){this.message=p||"",this.name=g||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return l.prototype=Object.create(Error.prototype),Object.defineProperty(l.prototype,"constructor",{value:l,writable:!0,configurable:!0}),l}let BS=RS(gp)?gp:TS();function yp(l,u,p,g,v,E){let x=pi(l),U=tp(u);l._disturbed=!0;let re=!1,oe=y(void 0);return b((ue,fe)=>{let Ne;if(E!==void 0){if(Ne=()=>{let H=new BS("Aborted","AbortError"),se=[];g||se.push(()=>u._state==="writable"?Fo(u,H):y(void 0)),v||se.push(()=>l._state==="readable"?Ft(l,H):y(void 0)),ot(()=>Promise.all(se.map(Ee=>Ee())),!0,H)},E.aborted){Ne();return}E.addEventListener("abort",Ne)}function Vt(){return b((H,se)=>{function Ee(St){St?H():S(Si(),Ee,se)}Ee(!1)})}function Si(){return re?y(!0):S(U._readyPromise,()=>b((H,se)=>{rs(x,{_chunkSteps:Ee=>{oe=S(ap(U,Ee),void 0,i),H(!1)},_closeSteps:()=>H(!0),_errorSteps:se})}))}if(_r(l,x._closedPromise,H=>{g?Bt(!0,H):ot(()=>Fo(u,H),!0,H)}),_r(u,U._closedPromise,H=>{v?Bt(!0,H):ot(()=>Ft(l,H),!0,H)}),et(l,x._closedPromise,()=>{p?Bt():ot(()=>gS(U))}),nr(u)||u._state==="closed"){let H=new TypeError("the destination writable stream closed before all data could be piped to it");v?Bt(!0,H):ot(()=>Ft(l,H),!0,H)}L(Vt());function Gr(){let H=oe;return S(oe,()=>H!==oe?Gr():void 0)}function _r(H,se,Ee){H._state==="errored"?Ee(H._storedError):P(se,Ee)}function et(H,se,Ee){H._state==="closed"?Ee():T(se,Ee)}function ot(H,se,Ee){if(re)return;re=!0,u._state==="writable"&&!nr(u)?T(Gr(),St):St();function St(){_(H(),()=>kr(se,Ee),Ei=>kr(!0,Ei))}}function Bt(H,se){re||(re=!0,u._state==="writable"&&!nr(u)?T(Gr(),()=>kr(H,se)):kr(H,se))}function kr(H,se){op(U),F(x),E!==void 0&&E.removeEventListener("abort",Ne),H?fe(se):ue(void 0)}})}class wi{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!Yo(this))throw Xo("desiredSize");return au(this)}close(){if(!Yo(this))throw Xo("close");if(!vi(this))throw new TypeError("The stream is not in a state that permits close");hs(this)}enqueue(u=void 0){if(!Yo(this))throw Xo("enqueue");if(!vi(this))throw new TypeError("The stream is not in a state that permits enqueue");return Zo(this,u)}error(u=void 0){if(!Yo(this))throw Xo("error");Hr(this,u)}[$c](u){Vr(this);let p=this._cancelAlgorithm(u);return Qo(this),p}[Dc](u){let p=this._controlledReadableStream;if(this._queue.length>0){let g=Mc(this);this._closeRequested&&this._queue.length===0?(Qo(this),ps(p)):ds(this),u._chunkSteps(g)}else Th(p,u),ds(this)}}Object.defineProperties(wi.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof n.toStringTag=="symbol"&&Object.defineProperty(wi.prototype,n.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});function Yo(l){return!a(l)||!Object.prototype.hasOwnProperty.call(l,"_controlledReadableStream")?!1:l instanceof wi}function ds(l){if(!bp(l))return;if(l._pulling){l._pullAgain=!0;return}l._pulling=!0;let p=l._pullAlgorithm();_(p,()=>{l._pulling=!1,l._pullAgain&&(l._pullAgain=!1,ds(l))},g=>{Hr(l,g)})}function bp(l){let u=l._controlledReadableStream;return!vi(l)||!l._started?!1:!!(Jr(u)&&Bo(u)>0||au(l)>0)}function Qo(l){l._pullAlgorithm=void 0,l._cancelAlgorithm=void 0,l._strategySizeAlgorithm=void 0}function hs(l){if(!vi(l))return;let u=l._controlledReadableStream;l._closeRequested=!0,l._queue.length===0&&(Qo(l),ps(u))}function Zo(l,u){if(!vi(l))return;let p=l._controlledReadableStream;if(Jr(p)&&Bo(p)>0)jc(p,u,!1);else{let g;try{g=l._strategySizeAlgorithm(u)}catch(v){throw Hr(l,v),v}try{Fc(l,u,g)}catch(v){throw Hr(l,v),v}}ds(l)}function Hr(l,u){let p=l._controlledReadableStream;p._state==="readable"&&(Vr(l),Qo(l),Ep(p,u))}function au(l){let u=l._controlledReadableStream._state;return u==="errored"?null:u==="closed"?0:l._strategyHWM-l._queueTotalSize}function OS(l){return!bp(l)}function vi(l){let u=l._controlledReadableStream._state;return!l._closeRequested&&u==="readable"}function wp(l,u,p,g,v,E,x){u._controlledReadableStream=l,u._queue=void 0,u._queueTotalSize=void 0,Vr(u),u._started=!1,u._closeRequested=!1,u._pullAgain=!1,u._pulling=!1,u._strategySizeAlgorithm=x,u._strategyHWM=E,u._pullAlgorithm=g,u._cancelAlgorithm=v,l._readableStreamController=u;let U=p();_(y(U),()=>{u._started=!0,ds(u)},re=>{Hr(u,re)})}function IS(l,u,p,g){let v=Object.create(wi.prototype),E=()=>{},x=()=>y(void 0),U=()=>y(void 0);u.start!==void 0&&(E=()=>u.start(v)),u.pull!==void 0&&(x=()=>u.pull(v)),u.cancel!==void 0&&(U=re=>u.cancel(re)),wp(l,v,E,x,U,p,g)}function Xo(l){return new TypeError(`ReadableStreamDefaultController.prototype.${l} can only be used on a ReadableStreamDefaultController`)}function NS(l,u){return xn(l._readableStreamController)?$S(l):US(l)}function US(l,u){let p=pi(l),g=!1,v=!1,E=!1,x=!1,U,re,oe,ue,fe,Ne=b(et=>{fe=et});function Vt(){return g?(v=!0,y(void 0)):(g=!0,rs(p,{_chunkSteps:ot=>{B(()=>{v=!1;let Bt=ot,kr=ot;E||Zo(oe._readableStreamController,Bt),x||Zo(ue._readableStreamController,kr),g=!1,v&&Vt()})},_closeSteps:()=>{g=!1,E||hs(oe._readableStreamController),x||hs(ue._readableStreamController),(!E||!x)&&fe(void 0)},_errorSteps:()=>{g=!1}}),y(void 0))}function Si(et){if(E=!0,U=et,x){let ot=ns([U,re]),Bt=Ft(l,ot);fe(Bt)}return Ne}function Gr(et){if(x=!0,re=et,E){let ot=ns([U,re]),Bt=Ft(l,ot);fe(Bt)}return Ne}function _r(){}return oe=lu(_r,Vt,Si),ue=lu(_r,Vt,Gr),P(p._closedPromise,et=>{Hr(oe._readableStreamController,et),Hr(ue._readableStreamController,et),(!E||!x)&&fe(void 0)}),[oe,ue]}function $S(l){let u=pi(l),p=!1,g=!1,v=!1,E=!1,x=!1,U,re,oe,ue,fe,Ne=b(H=>{fe=H});function Vt(H){P(H._closedPromise,se=>{H===u&&(Mt(oe._readableStreamController,se),Mt(ue._readableStreamController,se),(!E||!x)&&fe(void 0))})}function Si(){Pn(u)&&(F(u),u=pi(l),Vt(u)),rs(u,{_chunkSteps:se=>{B(()=>{g=!1,v=!1;let Ee=se,St=se;if(!E&&!x)try{St=Lh(se)}catch(Ei){Mt(oe._readableStreamController,Ei),Mt(ue._readableStreamController,Ei),fe(Ft(l,Ei));return}E||Do(oe._readableStreamController,Ee),x||Do(ue._readableStreamController,St),p=!1,g?_r():v&&et()})},_closeSteps:()=>{p=!1,E||ss(oe._readableStreamController),x||ss(ue._readableStreamController),oe._readableStreamController._pendingPullIntos.length>0&&Ko(oe._readableStreamController,0),ue._readableStreamController._pendingPullIntos.length>0&&Ko(ue._readableStreamController,0),(!E||!x)&&fe(void 0)},_errorSteps:()=>{p=!1}})}function Gr(H,se){Fr(u)&&(F(u),u=Yh(l),Vt(u));let Ee=se?ue:oe,St=se?oe:ue;Xh(u,H,{_chunkSteps:Ai=>{B(()=>{g=!1,v=!1;let _i=se?x:E;if(se?E:x)_i||qo(Ee._readableStreamController,Ai);else{let Up;try{Up=Lh(Ai)}catch(uu){Mt(Ee._readableStreamController,uu),Mt(St._readableStreamController,uu),fe(Ft(l,uu));return}_i||qo(Ee._readableStreamController,Ai),Do(St._readableStreamController,Up)}p=!1,g?_r():v&&et()})},_closeSteps:Ai=>{p=!1;let _i=se?x:E,la=se?E:x;_i||ss(Ee._readableStreamController),la||ss(St._readableStreamController),Ai!==void 0&&(_i||qo(Ee._readableStreamController,Ai),!la&&St._readableStreamController._pendingPullIntos.length>0&&Ko(St._readableStreamController,0)),(!_i||!la)&&fe(void 0)},_errorSteps:()=>{p=!1}})}function _r(){if(p)return g=!0,y(void 0);p=!0;let H=zc(oe._readableStreamController);return H===null?Si():Gr(H._view,!1),y(void 0)}function et(){if(p)return v=!0,y(void 0);p=!0;let H=zc(ue._readableStreamController);return H===null?Si():Gr(H._view,!0),y(void 0)}function ot(H){if(E=!0,U=H,x){let se=ns([U,re]),Ee=Ft(l,se);fe(Ee)}return Ne}function Bt(H){if(x=!0,re=H,E){let se=ns([U,re]),Ee=Ft(l,se);fe(Ee)}return Ne}function kr(){}return oe=Sp(kr,_r,ot),ue=Sp(kr,et,Bt),Vt(u),[oe,ue]}function DS(l,u){Er(l,u);let p=l,g=p?.autoAllocateChunkSize,v=p?.cancel,E=p?.pull,x=p?.start,U=p?.type;return{autoAllocateChunkSize:g===void 0?void 0:Rh(g,`${u} has member 'autoAllocateChunkSize' that`),cancel:v===void 0?void 0:KS(v,p,`${u} has member 'cancel' that`),pull:E===void 0?void 0:qS(E,p,`${u} has member 'pull' that`),start:x===void 0?void 0:LS(x,p,`${u} has member 'start' that`),type:U===void 0?void 0:jS(U,`${u} has member 'type' that`)}}function KS(l,u,p){return jt(l,p),g=>A(l,u,[g])}function qS(l,u,p){return jt(l,p),g=>A(l,u,[g])}function LS(l,u,p){return jt(l,p),g=>j(l,u,[g])}function jS(l,u){if(l=`${l}`,l!=="bytes")throw new TypeError(`${u} '${l}' is not a valid enumeration value for ReadableStreamType`);return l}function MS(l,u){Er(l,u);let p=l?.mode;return{mode:p===void 0?void 0:FS(p,`${u} has member 'mode' that`)}}function FS(l,u){if(l=`${l}`,l!=="byob")throw new TypeError(`${u} '${l}' is not a valid enumeration value for ReadableStreamReaderMode`);return l}function VS(l,u){return Er(l,u),{preventCancel:!!l?.preventCancel}}function vp(l,u){Er(l,u);let p=l?.preventAbort,g=l?.preventCancel,v=l?.preventClose,E=l?.signal;return E!==void 0&&HS(E,`${u} has member 'signal' that`),{preventAbort:!!p,preventCancel:!!g,preventClose:!!v,signal:E}}function HS(l,u){if(!nS(l))throw new TypeError(`${u} is not an AbortSignal.`)}function WS(l,u){Er(l,u);let p=l?.readable;Kc(p,"readable","ReadableWritablePair"),Lc(p,`${u} has member 'readable' that`);let g=l?.writable;return Kc(g,"writable","ReadableWritablePair"),ep(g,`${u} has member 'writable' that`),{readable:p,writable:g}}class Wr{constructor(u={},p={}){u===void 0?u=null:Ch(u,"First parameter");let g=Mo(p,"Second parameter"),v=DS(u,"First parameter");if(cu(this),v.type==="bytes"){if(g.size!==void 0)throw new RangeError("The strategy for a byte stream cannot have a size function");let E=ls(g,0);J0(this,v,E)}else{let E=jo(g),x=ls(g,1);IS(this,v,x,E)}}get locked(){if(!zr(this))throw Bn("locked");return Jr(this)}cancel(u=void 0){return zr(this)?Jr(this)?w(new TypeError("Cannot cancel a stream that already has a reader")):Ft(this,u):w(Bn("cancel"))}getReader(u=void 0){if(!zr(this))throw Bn("getReader");return MS(u,"First parameter").mode===void 0?pi(this):Yh(this)}pipeThrough(u,p={}){if(!zr(this))throw Bn("pipeThrough");Ar(u,1,"pipeThrough");let g=WS(u,"First parameter"),v=vp(p,"Second parameter");if(Jr(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(yi(g.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");let E=yp(this,g.writable,v.preventClose,v.preventAbort,v.preventCancel,v.signal);return L(E),g.readable}pipeTo(u,p={}){if(!zr(this))return w(Bn("pipeTo"));if(u===void 0)return w("Parameter 1 is required in 'pipeTo'.");if(!gi(u))return w(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));let g;try{g=vp(p,"Second parameter")}catch(v){return w(v)}return Jr(this)?w(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):yi(u)?w(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):yp(this,u,g.preventClose,g.preventAbort,g.preventCancel,g.signal)}tee(){if(!zr(this))throw Bn("tee");let u=NS(this);return ns(u)}values(u=void 0){if(!zr(this))throw Bn("values");let p=VS(u,"First parameter");return j0(this,p.preventCancel)}}Object.defineProperties(Wr.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),typeof n.toStringTag=="symbol"&&Object.defineProperty(Wr.prototype,n.toStringTag,{value:"ReadableStream",configurable:!0}),typeof n.asyncIterator=="symbol"&&Object.defineProperty(Wr.prototype,n.asyncIterator,{value:Wr.prototype.values,writable:!0,configurable:!0});function lu(l,u,p,g=1,v=()=>1){let E=Object.create(Wr.prototype);cu(E);let x=Object.create(wi.prototype);return wp(E,x,l,u,p,g,v),E}function Sp(l,u,p){let g=Object.create(Wr.prototype);cu(g);let v=Object.create(mi.prototype);return Gh(g,v,l,u,p,0,void 0),g}function cu(l){l._state="readable",l._reader=void 0,l._storedError=void 0,l._disturbed=!1}function zr(l){return!a(l)||!Object.prototype.hasOwnProperty.call(l,"_readableStreamController")?!1:l instanceof Wr}function Jr(l){return l._reader!==void 0}function Ft(l,u){if(l._disturbed=!0,l._state==="closed")return y(void 0);if(l._state==="errored")return w(l._storedError);ps(l);let p=l._reader;p!==void 0&&Pn(p)&&(p._readIntoRequests.forEach(v=>{v._closeSteps(void 0)}),p._readIntoRequests=new K);let g=l._readableStreamController[$c](u);return C(g,i)}function ps(l){l._state="closed";let u=l._reader;u!==void 0&&(Ah(u),Fr(u)&&(u._readRequests.forEach(p=>{p._closeSteps()}),u._readRequests=new K))}function Ep(l,u){l._state="errored",l._storedError=u;let p=l._reader;p!==void 0&&(Sr(p,u),Fr(p)?(p._readRequests.forEach(g=>{g._errorSteps(u)}),p._readRequests=new K):(p._readIntoRequests.forEach(g=>{g._errorSteps(u)}),p._readIntoRequests=new K))}function Bn(l){return new TypeError(`ReadableStream.prototype.${l} can only be used on a ReadableStream`)}function Ap(l,u){Er(l,u);let p=l?.highWaterMark;return Kc(p,"highWaterMark","QueuingStrategyInit"),{highWaterMark:qc(p)}}let _p=l=>l.byteLength;try{Object.defineProperty(_p,"name",{value:"size",configurable:!0})}catch{}class ea{constructor(u){Ar(u,1,"ByteLengthQueuingStrategy"),u=Ap(u,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=u.highWaterMark}get highWaterMark(){if(!xp(this))throw kp("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark}get size(){if(!xp(this))throw kp("size");return _p}}Object.defineProperties(ea.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof n.toStringTag=="symbol"&&Object.defineProperty(ea.prototype,n.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});function kp(l){return new TypeError(`ByteLengthQueuingStrategy.prototype.${l} can only be used on a ByteLengthQueuingStrategy`)}function xp(l){return!a(l)||!Object.prototype.hasOwnProperty.call(l,"_byteLengthQueuingStrategyHighWaterMark")?!1:l instanceof ea}let Cp=()=>1;try{Object.defineProperty(Cp,"name",{value:"size",configurable:!0})}catch{}class ta{constructor(u){Ar(u,1,"CountQueuingStrategy"),u=Ap(u,"First parameter"),this._countQueuingStrategyHighWaterMark=u.highWaterMark}get highWaterMark(){if(!Rp(this))throw Pp("highWaterMark");return this._countQueuingStrategyHighWaterMark}get size(){if(!Rp(this))throw Pp("size");return Cp}}Object.defineProperties(ta.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof n.toStringTag=="symbol"&&Object.defineProperty(ta.prototype,n.toStringTag,{value:"CountQueuingStrategy",configurable:!0});function Pp(l){return new TypeError(`CountQueuingStrategy.prototype.${l} can only be used on a CountQueuingStrategy`)}function Rp(l){return!a(l)||!Object.prototype.hasOwnProperty.call(l,"_countQueuingStrategyHighWaterMark")?!1:l instanceof ta}function zS(l,u){Er(l,u);let p=l?.flush,g=l?.readableType,v=l?.start,E=l?.transform,x=l?.writableType;return{flush:p===void 0?void 0:JS(p,l,`${u} has member 'flush' that`),readableType:g,start:v===void 0?void 0:GS(v,l,`${u} has member 'start' that`),transform:E===void 0?void 0:YS(E,l,`${u} has member 'transform' that`),writableType:x}}function JS(l,u,p){return jt(l,p),g=>A(l,u,[g])}function GS(l,u,p){return jt(l,p),g=>j(l,u,[g])}function YS(l,u,p){return jt(l,p),(g,v)=>A(l,u,[g,v])}class ra{constructor(u={},p={},g={}){u===void 0&&(u=null);let v=Mo(p,"Second parameter"),E=Mo(g,"Third parameter"),x=zS(u,"First parameter");if(x.readableType!==void 0)throw new RangeError("Invalid readableType specified");if(x.writableType!==void 0)throw new RangeError("Invalid writableType specified");let U=ls(E,0),re=jo(E),oe=ls(v,1),ue=jo(v),fe,Ne=b(Vt=>{fe=Vt});QS(this,Ne,oe,ue,U,re),XS(this,x),x.start!==void 0?fe(x.start(this._transformStreamController)):fe(void 0)}get readable(){if(!Tp(this))throw Np("readable");return this._readable}get writable(){if(!Tp(this))throw Np("writable");return this._writable}}Object.defineProperties(ra.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),typeof n.toStringTag=="symbol"&&Object.defineProperty(ra.prototype,n.toStringTag,{value:"TransformStream",configurable:!0});function QS(l,u,p,g,v,E){function x(){return u}function U(Ne){return rE(l,Ne)}function re(Ne){return nE(l,Ne)}function oe(){return iE(l)}l._writable=oS(x,U,oe,re,p,g);function ue(){return sE(l)}function fe(Ne){return ia(l,Ne),y(void 0)}l._readable=lu(x,ue,fe,v,E),l._backpressure=void 0,l._backpressureChangePromise=void 0,l._backpressureChangePromise_resolve=void 0,sa(l,!0),l._transformStreamController=void 0}function Tp(l){return!a(l)||!Object.prototype.hasOwnProperty.call(l,"_transformStreamController")?!1:l instanceof ra}function na(l,u){Hr(l._readable._readableStreamController,u),ia(l,u)}function ia(l,u){Bp(l._transformStreamController),tu(l._writable._writableStreamController,u),l._backpressure&&sa(l,!1)}function sa(l,u){l._backpressureChangePromise!==void 0&&l._backpressureChangePromise_resolve(),l._backpressureChangePromise=b(p=>{l._backpressureChangePromise_resolve=p}),l._backpressure=u}class ms{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!oa(this))throw aa("desiredSize");let u=this._controlledTransformStream._readable._readableStreamController;return au(u)}enqueue(u=void 0){if(!oa(this))throw aa("enqueue");Op(this,u)}error(u=void 0){if(!oa(this))throw aa("error");eE(this,u)}terminate(){if(!oa(this))throw aa("terminate");tE(this)}}Object.defineProperties(ms.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof n.toStringTag=="symbol"&&Object.defineProperty(ms.prototype,n.toStringTag,{value:"TransformStreamDefaultController",configurable:!0});function oa(l){return!a(l)||!Object.prototype.hasOwnProperty.call(l,"_controlledTransformStream")?!1:l instanceof ms}function ZS(l,u,p,g){u._controlledTransformStream=l,l._transformStreamController=u,u._transformAlgorithm=p,u._flushAlgorithm=g}function XS(l,u){let p=Object.create(ms.prototype),g=E=>{try{return Op(p,E),y(void 0)}catch(x){return w(x)}},v=()=>y(void 0);u.transform!==void 0&&(g=E=>u.transform(E,p)),u.flush!==void 0&&(v=()=>u.flush(p)),ZS(l,p,g,v)}function Bp(l){l._transformAlgorithm=void 0,l._flushAlgorithm=void 0}function Op(l,u){let p=l._controlledTransformStream,g=p._readable._readableStreamController;if(!vi(g))throw new TypeError("Readable side is not in a state that permits enqueue");try{Zo(g,u)}catch(E){throw ia(p,E),p._readable._storedError}OS(g)!==p._backpressure&&sa(p,!0)}function eE(l,u){na(l._controlledTransformStream,u)}function Ip(l,u){let p=l._transformAlgorithm(u);return C(p,void 0,g=>{throw na(l._controlledTransformStream,g),g})}function tE(l){let u=l._controlledTransformStream,p=u._readable._readableStreamController;hs(p);let g=new TypeError("TransformStream terminated");ia(u,g)}function rE(l,u){let p=l._transformStreamController;if(l._backpressure){let g=l._backpressureChangePromise;return C(g,()=>{let v=l._writable;if(v._state==="erroring")throw v._storedError;return Ip(p,u)})}return Ip(p,u)}function nE(l,u){return na(l,u),y(void 0)}function iE(l){let u=l._readable,p=l._transformStreamController,g=p._flushAlgorithm();return Bp(p),C(g,()=>{if(u._state==="errored")throw u._storedError;hs(u._readableStreamController)},v=>{throw na(l,v),u._storedError})}function sE(l){return sa(l,!1),l._backpressureChangePromise}function aa(l){return new TypeError(`TransformStreamDefaultController.prototype.${l} can only be used on a TransformStreamDefaultController`)}function Np(l){return new TypeError(`TransformStream.prototype.${l} can only be used on a TransformStream`)}r.ByteLengthQueuingStrategy=ea,r.CountQueuingStrategy=ta,r.ReadableByteStreamController=mi,r.ReadableStream=Wr,r.ReadableStreamBYOBReader=as,r.ReadableStreamBYOBRequest=is,r.ReadableStreamDefaultController=wi,r.ReadableStreamDefaultReader=ts,r.TransformStream=ra,r.TransformStreamDefaultController=ms,r.WritableStream=cs,r.WritableStreamDefaultController=bi,r.WritableStreamDefaultWriter=us,Object.defineProperty(r,"__esModule",{value:!0})})}(vl,vl.exports)),vl.exports}var UA=65536;if(!globalThis.ReadableStream)try{let t=$("node:process"),{emitWarning:e}=t;try{t.emitWarning=()=>{},Object.assign(globalThis,$("node:stream/web")),t.emitWarning=e}catch(r){throw t.emitWarning=e,r}}catch{Object.assign(globalThis,NA())}try{let{Blob:t}=$("buffer");t&&!t.prototype.stream&&(t.prototype.stream=function(r){let n=0,i=this;return new ReadableStream({type:"bytes",async pull(s){let a=await i.slice(n,Math.min(i.size,n+UA)).arrayBuffer();n+=a.byteLength,s.enqueue(new Uint8Array(a)),n===i.size&&s.close()}})})}catch{}var yg=65536;async function*Rf(t,e=!0){for(let r of t)if("stream"in r)yield*r.stream();else if(ArrayBuffer.isView(r))if(e){let n=r.byteOffset,i=r.byteOffset+r.byteLength;for(;n!==i;){let s=Math.min(i-n,yg),o=r.buffer.slice(n,n+s);n+=o.byteLength,yield new Uint8Array(o)}}else yield r;else{let n=0,i=r;for(;n!==i.size;){let o=await i.slice(n,Math.min(i.size,n+yg)).arrayBuffer();n+=o.byteLength,yield new Uint8Array(o)}}}var Cg=class Of{#e=[];#t="";#r=0;#n="transparent";constructor(e=[],r={}){if(typeof e!="object"||e===null)throw new TypeError("Failed to construct 'Blob': The provided value cannot be converted to a sequence.");if(typeof e[Symbol.iterator]!="function")throw new TypeError("Failed to construct 'Blob': The object must have a callable @@iterator property.");if(typeof r!="object"&&typeof r!="function")throw new TypeError("Failed to construct 'Blob': parameter 2 cannot convert to dictionary.");r===null&&(r={});let n=new TextEncoder;for(let s of e){let o;ArrayBuffer.isView(s)?o=new Uint8Array(s.buffer.slice(s.byteOffset,s.byteOffset+s.byteLength)):s instanceof ArrayBuffer?o=new Uint8Array(s.slice(0)):s instanceof Of?o=s:o=n.encode(`${s}`);let a=ArrayBuffer.isView(o)?o.byteLength:o.size;a&&(this.#r+=a,this.#e.push(o))}this.#n=`${r.endings===void 0?"transparent":r.endings}`;let i=r.type===void 0?"":String(r.type);this.#t=/^[\x20-\x7E]*$/.test(i)?i:""}get size(){return this.#r}get type(){return this.#t}async text(){let e=new TextDecoder,r="";for await(let n of Rf(this.#e,!1))r+=e.decode(n,{stream:!0});return r+=e.decode(),r}async arrayBuffer(){let e=new Uint8Array(this.size),r=0;for await(let n of Rf(this.#e,!1))e.set(n,r),r+=n.length;return e.buffer}stream(){let e=Rf(this.#e,!0);return new globalThis.ReadableStream({type:"bytes",async pull(r){let n=await e.next();n.done?r.close():r.enqueue(n.value)},async cancel(){await e.return()}})}slice(e=0,r=this.size,n=""){let{size:i}=this,s=e<0?Math.max(i+e,0):Math.min(e,i),o=r<0?Math.max(i+r,0):Math.min(r,i),a=Math.max(o-s,0),c=this.#e,f=[],d=0;for(let m of c){if(d>=a)break;let b=ArrayBuffer.isView(m)?m.byteLength:m.size;if(s&&b<=s)s-=b,o-=b;else{let y;ArrayBuffer.isView(m)?(y=m.subarray(s,Math.min(b,o)),d+=y.byteLength):(y=m.slice(s,Math.min(b,o)),d+=y.size),o-=b,f.push(y),s=0}}let h=new Of([],{type:String(n).toLowerCase()});return h.#r=a,h.#e=f,h}get[Symbol.toStringTag](){return"Blob"}static[Symbol.hasInstance](e){return e&&typeof e=="object"&&typeof e.constructor=="function"&&(typeof e.stream=="function"||typeof e.arrayBuffer=="function")&&/^(Blob|File)$/.test(e[Symbol.toStringTag])}};Object.defineProperties(Cg.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}});var $A=Cg,Qs=$A,DA=class extends Qs{#e=0;#t="";constructor(e,r,n={}){if(arguments.length<2)throw new TypeError(`Failed to construct 'File': 2 arguments required, but only ${arguments.length} present.`);super(e,n),n===null&&(n={});let i=n.lastModified===void 0?Date.now():Number(n.lastModified);Number.isNaN(i)||(this.#e=i),this.#t=String(r)}get name(){return this.#t}get lastModified(){return this.#e}get[Symbol.toStringTag](){return"File"}static[Symbol.hasInstance](e){return!!e&&e instanceof Qs&&/^(File)$/.test(e[Symbol.toStringTag])}},KA=DA,Pg=KA;var{toStringTag:Js,iterator:qA,hasInstance:LA}=Symbol,bg=Math.random,jA="append,set,get,getAll,delete,keys,values,entries,forEach,constructor".split(","),wg=(t,e,r)=>(t+="",/^(Blob|File)$/.test(e&&e[Js])?[(r=r!==void 0?r+"":e[Js]=="File"?e.name:"blob",t),e.name!==r||e[Js]=="blob"?new Pg([e],r,e):e]:[t,e+""]),Tf=(t,e)=>(e?t:t.replace(/\r?\n|\r/g,`\r
`)).replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),si=(t,e,r)=>{if(e.length<r)throw new TypeError(`Failed to execute '${t}' on 'FormData': ${r} arguments required, but only ${e.length} present.`)},_l=class{#e=[];constructor(...e){if(e.length)throw new TypeError("Failed to construct 'FormData': parameter 1 is not of type 'HTMLFormElement'.")}get[Js](){return"FormData"}[qA](){return this.entries()}static[LA](e){return e&&typeof e=="object"&&e[Js]==="FormData"&&!jA.some(r=>typeof e[r]!="function")}append(...e){si("append",arguments,2),this.#e.push(wg(...e))}delete(e){si("delete",arguments,1),e+="",this.#e=this.#e.filter(([r])=>r!==e)}get(e){si("get",arguments,1),e+="";for(var r=this.#e,n=r.length,i=0;i<n;i++)if(r[i][0]===e)return r[i][1];return null}getAll(e,r){return si("getAll",arguments,1),r=[],e+="",this.#e.forEach(n=>n[0]===e&&r.push(n[1])),r}has(e){return si("has",arguments,1),e+="",this.#e.some(r=>r[0]===e)}forEach(e,r){si("forEach",arguments,1);for(var[n,i]of this)e.call(r,i,n,this)}set(...e){si("set",arguments,2);var r=[],n=!0;e=wg(...e),this.#e.forEach(i=>{i[0]===e[0]?n&&(n=!r.push(e)):r.push(i)}),n&&r.push(e),this.#e=r}*entries(){yield*this.#e}*keys(){for(var[e]of this)yield e}*values(){for(var[,e]of this)yield e}};function MA(t,e=Qs){var r=`${bg()}${bg()}`.replace(/\./g,"").slice(-28).padStart(32,"-"),n=[],i=`--${r}\r
Content-Disposition: form-data; name="`;return t.forEach((s,o)=>typeof s=="string"?n.push(i+Tf(o)+`"\r
\r
${s.replace(/\r(?!\n)|(?<!\r)\n/g,`\r
`)}\r
`):n.push(i+Tf(o)+`"; filename="${Tf(s.name,1)}"\r
Content-Type: ${s.type||"application/octet-stream"}\r
\r
`,s,`\r
`)),n.push(`--${r}--`),new e(n,{type:"multipart/form-data; boundary="+r})}var Li=class extends Error{constructor(e,r){super(e),Error.captureStackTrace(this,this.constructor),this.type=r}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}},xt=class extends Li{constructor(e,r,n){super(e,r),n&&(this.code=this.errno=n.code,this.erroredSysCall=n.syscall)}},kl=Symbol.toStringTag,Rg=t=>typeof t=="object"&&typeof t.append=="function"&&typeof t.delete=="function"&&typeof t.get=="function"&&typeof t.getAll=="function"&&typeof t.has=="function"&&typeof t.set=="function"&&typeof t.sort=="function"&&t[kl]==="URLSearchParams",xl=t=>t&&typeof t=="object"&&typeof t.arrayBuffer=="function"&&typeof t.type=="string"&&typeof t.stream=="function"&&typeof t.constructor=="function"&&/^(Blob|File)$/.test(t[kl]),FA=t=>typeof t=="object"&&(t[kl]==="AbortSignal"||t[kl]==="EventTarget"),VA=(t,e)=>{let r=new URL(e).hostname,n=new URL(t).hostname;return r===n||r.endsWith(`.${n}`)},HA=(t,e)=>{let r=new URL(e).protocol,n=new URL(t).protocol;return r===n},WA=Nr.promisify(Ke.pipeline),pt=Symbol("Body internals"),oi=class{constructor(e,{size:r=0}={}){let n=null;e===null?e=null:Rg(e)?e=Qe.Buffer.from(e.toString()):xl(e)||Qe.Buffer.isBuffer(e)||(Nr.types.isAnyArrayBuffer(e)?e=Qe.Buffer.from(e):ArrayBuffer.isView(e)?e=Qe.Buffer.from(e.buffer,e.byteOffset,e.byteLength):e instanceof Ke||(e instanceof _l?(e=MA(e),n=e.type.split("=")[1]):e=Qe.Buffer.from(String(e))));let i=e;Qe.Buffer.isBuffer(e)?i=Ke.Readable.from(e):xl(e)&&(i=Ke.Readable.from(e.stream())),this[pt]={body:e,stream:i,boundary:n,disturbed:!1,error:null},this.size=r,e instanceof Ke&&e.on("error",s=>{let o=s instanceof Li?s:new xt(`Invalid response body while trying to fetch ${this.url}: ${s.message}`,"system",s);this[pt].error=o})}get body(){return this[pt].stream}get bodyUsed(){return this[pt].disturbed}async arrayBuffer(){let{buffer:e,byteOffset:r,byteLength:n}=await Bf(this);return e.slice(r,r+n)}async formData(){let e=this.headers.get("content-type");if(e.startsWith("application/x-www-form-urlencoded")){let n=new _l,i=new URLSearchParams(await this.text());for(let[s,o]of i)n.append(s,o);return n}let{toFormData:r}=await Promise.resolve().then(()=>On(mg()));return r(this.body,e)}async blob(){let e=this.headers&&this.headers.get("content-type")||this[pt].body&&this[pt].body.type||"",r=await this.arrayBuffer();return new Qs([r],{type:e})}async json(){let e=await this.text();return JSON.parse(e)}async text(){let e=await Bf(this);return new TextDecoder().decode(e)}buffer(){return Bf(this)}};oi.prototype.buffer=Nr.deprecate(oi.prototype.buffer,"Please use 'response.arrayBuffer()' instead of 'response.buffer()'","node-fetch#buffer");Object.defineProperties(oi.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0},data:{get:Nr.deprecate(()=>{},"data doesn't exist, use json(), text(), arrayBuffer(), or body instead","https://github.com/node-fetch/node-fetch/issues/1000 (response)")}});async function Bf(t){if(t[pt].disturbed)throw new TypeError(`body used already for: ${t.url}`);if(t[pt].disturbed=!0,t[pt].error)throw t[pt].error;let{body:e}=t;if(e===null||!(e instanceof Ke))return Qe.Buffer.alloc(0);let r=[],n=0;try{for await(let i of e){if(t.size>0&&n+i.length>t.size){let s=new xt(`content size at ${t.url} over limit: ${t.size}`,"max-size");throw e.destroy(s),s}n+=i.length,r.push(i)}}catch(i){throw i instanceof Li?i:new xt(`Invalid response body while trying to fetch ${t.url}: ${i.message}`,"system",i)}if(e.readableEnded===!0||e._readableState.ended===!0)try{return r.every(i=>typeof i=="string")?Qe.Buffer.from(r.join("")):Qe.Buffer.concat(r,n)}catch(i){throw new xt(`Could not create Buffer from response body for ${t.url}: ${i.message}`,"system",i)}else throw new xt(`Premature close of server response while trying to fetch ${t.url}`)}var Uf=(t,e)=>{let r,n,{body:i}=t[pt];if(t.bodyUsed)throw new Error("cannot clone body after it is used");return i instanceof Ke&&typeof i.getBoundary!="function"&&(r=new Ke.PassThrough({highWaterMark:e}),n=new Ke.PassThrough({highWaterMark:e}),i.pipe(r),i.pipe(n),t[pt].stream=r,i=n),i},zA=Nr.deprecate(t=>t.getBoundary(),"form-data doesn't follow the spec and requires special treatment. Use alternative package","https://github.com/node-fetch/node-fetch/issues/1167"),Tg=(t,e)=>t===null?null:typeof t=="string"?"text/plain;charset=UTF-8":Rg(t)?"application/x-www-form-urlencoded;charset=UTF-8":xl(t)?t.type||null:Qe.Buffer.isBuffer(t)||Nr.types.isAnyArrayBuffer(t)||ArrayBuffer.isView(t)?null:t instanceof _l?`multipart/form-data; boundary=${e[pt].boundary}`:t&&typeof t.getBoundary=="function"?`multipart/form-data;boundary=${zA(t)}`:t instanceof Ke?null:"text/plain;charset=UTF-8",JA=t=>{let{body:e}=t[pt];return e===null?0:xl(e)?e.size:Qe.Buffer.isBuffer(e)?e.length:e&&typeof e.getLengthSync=="function"&&e.hasKnownLength&&e.hasKnownLength()?e.getLengthSync():null},GA=async(t,{body:e})=>{e===null?t.end():await WA(e,t)},Sl=typeof Ys.validateHeaderName=="function"?Ys.validateHeaderName:t=>{if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(t)){let e=new TypeError(`Header name must be a valid HTTP token [${t}]`);throw Object.defineProperty(e,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),e}},If=typeof Ys.validateHeaderValue=="function"?Ys.validateHeaderValue:(t,e)=>{if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(e)){let r=new TypeError(`Invalid character in header content ["${t}"]`);throw Object.defineProperty(r,"code",{value:"ERR_INVALID_CHAR"}),r}},fr=class t extends URLSearchParams{constructor(e){let r=[];if(e instanceof t){let n=e.raw();for(let[i,s]of Object.entries(n))r.push(...s.map(o=>[i,o]))}else if(e!=null)if(typeof e=="object"&&!Nr.types.isBoxedPrimitive(e)){let n=e[Symbol.iterator];if(n==null)r.push(...Object.entries(e));else{if(typeof n!="function")throw new TypeError("Header pairs must be iterable");r=[...e].map(i=>{if(typeof i!="object"||Nr.types.isBoxedPrimitive(i))throw new TypeError("Each header pair must be an iterable object");return[...i]}).map(i=>{if(i.length!==2)throw new TypeError("Each header pair must be a name/value tuple");return[...i]})}}else throw new TypeError("Failed to construct 'Headers': The provided value is not of type '(sequence<sequence<ByteString>> or record<ByteString, ByteString>)");return r=r.length>0?r.map(([n,i])=>(Sl(n),If(n,String(i)),[String(n).toLowerCase(),String(i)])):void 0,super(r),new Proxy(this,{get(n,i,s){switch(i){case"append":case"set":return(o,a)=>(Sl(o),If(o,String(a)),URLSearchParams.prototype[i].call(n,String(o).toLowerCase(),String(a)));case"delete":case"has":case"getAll":return o=>(Sl(o),URLSearchParams.prototype[i].call(n,String(o).toLowerCase()));case"keys":return()=>(n.sort(),new Set(URLSearchParams.prototype.keys.call(n)).keys());default:return Reflect.get(n,i,s)}}})}get[Symbol.toStringTag](){return this.constructor.name}toString(){return Object.prototype.toString.call(this)}get(e){let r=this.getAll(e);if(r.length===0)return null;let n=r.join(", ");return/^content-encoding$/i.test(e)&&(n=n.toLowerCase()),n}forEach(e,r=void 0){for(let n of this.keys())Reflect.apply(e,r,[this.get(n),n,this])}*values(){for(let e of this.keys())yield this.get(e)}*entries(){for(let e of this.keys())yield[e,this.get(e)]}[Symbol.iterator](){return this.entries()}raw(){return[...this.keys()].reduce((e,r)=>(e[r]=this.getAll(r),e),{})}[Symbol.for("nodejs.util.inspect.custom")](){return[...this.keys()].reduce((e,r)=>{let n=this.getAll(r);return r==="host"?e[r]=n[0]:e[r]=n.length>1?n:n[0],e},{})}};Object.defineProperties(fr.prototype,["get","entries","forEach","values"].reduce((t,e)=>(t[e]={enumerable:!0},t),{}));function YA(t=[]){return new fr(t.reduce((e,r,n,i)=>(n%2===0&&e.push(i.slice(n,n+2)),e),[]).filter(([e,r])=>{try{return Sl(e),If(e,String(r)),!0}catch{return!1}}))}var QA=new Set([301,302,303,307,308]),$f=t=>QA.has(t),Zt=Symbol("Response internals"),Xt=class t extends oi{constructor(e=null,r={}){super(e,r);let n=r.status!=null?r.status:200,i=new fr(r.headers);if(e!==null&&!i.has("Content-Type")){let s=Tg(e,this);s&&i.append("Content-Type",s)}this[Zt]={type:"default",url:r.url,status:n,statusText:r.statusText||"",headers:i,counter:r.counter,highWaterMark:r.highWaterMark}}get type(){return this[Zt].type}get url(){return this[Zt].url||""}get status(){return this[Zt].status}get ok(){return this[Zt].status>=200&&this[Zt].status<300}get redirected(){return this[Zt].counter>0}get statusText(){return this[Zt].statusText}get headers(){return this[Zt].headers}get highWaterMark(){return this[Zt].highWaterMark}clone(){return new t(Uf(this,this.highWaterMark),{type:this.type,url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected,size:this.size,highWaterMark:this.highWaterMark})}static redirect(e,r=302){if(!$f(r))throw new RangeError('Failed to execute "redirect" on "response": Invalid status code');return new t(null,{headers:{location:new URL(e).toString()},status:r})}static error(){let e=new t(null,{status:0,statusText:""});return e[Zt].type="error",e}static json(e=void 0,r={}){let n=JSON.stringify(e);if(n===void 0)throw new TypeError("data is not JSON serializable");let i=new fr(r&&r.headers);return i.has("content-type")||i.set("content-type","application/json"),new t(n,{...r,headers:i})}get[Symbol.toStringTag](){return"Response"}};Object.defineProperties(Xt.prototype,{type:{enumerable:!0},url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});var ZA=t=>{if(t.search)return t.search;let e=t.href.length-1,r=t.hash||(t.href[e]==="#"?"#":"");return t.href[e-r.length]==="?"?"?":""};function vg(t,e=!1){return t==null||(t=new URL(t),/^(about|blob|data):$/.test(t.protocol))?"no-referrer":(t.username="",t.password="",t.hash="",e&&(t.pathname="",t.search=""),t)}var Bg=new Set(["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"]),XA="strict-origin-when-cross-origin";function e1(t){if(!Bg.has(t))throw new TypeError(`Invalid referrerPolicy: ${t}`);return t}function t1(t){if(/^(http|ws)s:$/.test(t.protocol))return!0;let e=t.host.replace(/(^\[)|(]$)/g,""),r=OA.isIP(e);return r===4&&/^127\./.test(e)||r===6&&/^(((0+:){7})|(::(0+:){0,6}))0*1$/.test(e)?!0:t.host==="localhost"||t.host.endsWith(".localhost")?!1:t.protocol==="file:"}function qi(t){return/^about:(blank|srcdoc)$/.test(t)||t.protocol==="data:"||/^(blob|filesystem):$/.test(t.protocol)?!0:t1(t)}function r1(t,{referrerURLCallback:e,referrerOriginCallback:r}={}){if(t.referrer==="no-referrer"||t.referrerPolicy==="")return null;let n=t.referrerPolicy;if(t.referrer==="about:client")return"no-referrer";let i=t.referrer,s=vg(i),o=vg(i,!0);s.toString().length>4096&&(s=o),e&&(s=e(s)),r&&(o=r(o));let a=new URL(t.url);switch(n){case"no-referrer":return"no-referrer";case"origin":return o;case"unsafe-url":return s;case"strict-origin":return qi(s)&&!qi(a)?"no-referrer":o.toString();case"strict-origin-when-cross-origin":return s.origin===a.origin?s:qi(s)&&!qi(a)?"no-referrer":o;case"same-origin":return s.origin===a.origin?s:"no-referrer";case"origin-when-cross-origin":return s.origin===a.origin?s:o;case"no-referrer-when-downgrade":return qi(s)&&!qi(a)?"no-referrer":s;default:throw new TypeError(`Invalid referrerPolicy: ${n}`)}}function n1(t){let e=(t.get("referrer-policy")||"").split(/[,\s]+/),r="";for(let n of e)n&&Bg.has(n)&&(r=n);return r}var Fe=Symbol("Request internals"),zs=t=>typeof t=="object"&&typeof t[Fe]=="object",i1=Nr.deprecate(()=>{},".data is not a valid RequestInit property, use .body instead","https://github.com/node-fetch/node-fetch/issues/1000 (request)"),ji=class t extends oi{constructor(e,r={}){let n;if(zs(e)?n=new URL(e.url):(n=new URL(e),e={}),n.username!==""||n.password!=="")throw new TypeError(`${n} is an url with embedded credentials.`);let i=r.method||e.method||"GET";if(/^(delete|get|head|options|post|put)$/i.test(i)&&(i=i.toUpperCase()),!zs(r)&&"data"in r&&i1(),(r.body!=null||zs(e)&&e.body!==null)&&(i==="GET"||i==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body");let s=r.body?r.body:zs(e)&&e.body!==null?Uf(e):null;super(s,{size:r.size||e.size||0});let o=new fr(r.headers||e.headers||{});if(s!==null&&!o.has("Content-Type")){let f=Tg(s,this);f&&o.set("Content-Type",f)}let a=zs(e)?e.signal:null;if("signal"in r&&(a=r.signal),a!=null&&!FA(a))throw new TypeError("Expected signal to be an instanceof AbortSignal or EventTarget");let c=r.referrer==null?e.referrer:r.referrer;if(c==="")c="no-referrer";else if(c){let f=new URL(c);c=/^about:(\/\/)?client$/.test(f)?"client":f}else c=void 0;this[Fe]={method:i,redirect:r.redirect||e.redirect||"follow",headers:o,parsedURL:n,signal:a,referrer:c},this.follow=r.follow===void 0?e.follow===void 0?20:e.follow:r.follow,this.compress=r.compress===void 0?e.compress===void 0?!0:e.compress:r.compress,this.counter=r.counter||e.counter||0,this.agent=r.agent||e.agent,this.highWaterMark=r.highWaterMark||e.highWaterMark||16384,this.insecureHTTPParser=r.insecureHTTPParser||e.insecureHTTPParser||!1,this.referrerPolicy=r.referrerPolicy||e.referrerPolicy||""}get method(){return this[Fe].method}get url(){return BA.format(this[Fe].parsedURL)}get headers(){return this[Fe].headers}get redirect(){return this[Fe].redirect}get signal(){return this[Fe].signal}get referrer(){if(this[Fe].referrer==="no-referrer")return"";if(this[Fe].referrer==="client")return"about:client";if(this[Fe].referrer)return this[Fe].referrer.toString()}get referrerPolicy(){return this[Fe].referrerPolicy}set referrerPolicy(e){this[Fe].referrerPolicy=e1(e)}clone(){return new t(this)}get[Symbol.toStringTag](){return"Request"}};Object.defineProperties(ji.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0},referrer:{enumerable:!0},referrerPolicy:{enumerable:!0}});var s1=t=>{let{parsedURL:e}=t[Fe],r=new fr(t[Fe].headers);r.has("Accept")||r.set("Accept","*/*");let n=null;if(t.body===null&&/^(post|put)$/i.test(t.method)&&(n="0"),t.body!==null){let a=JA(t);typeof a=="number"&&!Number.isNaN(a)&&(n=String(a))}n&&r.set("Content-Length",n),t.referrerPolicy===""&&(t.referrerPolicy=XA),t.referrer&&t.referrer!=="no-referrer"?t[Fe].referrer=r1(t):t[Fe].referrer="no-referrer",t[Fe].referrer instanceof URL&&r.set("Referer",t.referrer),r.has("User-Agent")||r.set("User-Agent","node-fetch"),t.compress&&!r.has("Accept-Encoding")&&r.set("Accept-Encoding","gzip, deflate, br");let{agent:i}=t;typeof i=="function"&&(i=i(e)),!r.has("Connection")&&!i&&r.set("Connection","close");let s=ZA(e),o={path:e.pathname+s,method:t.method,headers:r[Symbol.for("nodejs.util.inspect.custom")](),insecureHTTPParser:t.insecureHTTPParser,agent:i};return{parsedURL:e,options:o}},Cl=class extends Li{constructor(e,r="aborted"){super(e,r)}};if(!globalThis.DOMException)try{let{MessageChannel:t}=$("worker_threads"),e=new t().port1,r=new ArrayBuffer;e.postMessage(r,[r,r])}catch(t){t.constructor.name==="DOMException"&&(globalThis.DOMException=t.constructor)}var o1=globalThis.DOMException,a1=new Set(["data:","http:","https:"]);async function Og(t,e){return new Promise((r,n)=>{let i=new ji(t,e),{parsedURL:s,options:o}=s1(i);if(!a1.has(s.protocol))throw new TypeError(`node-fetch cannot load ${t}. URL scheme "${s.protocol.replace(/:$/,"")}" is not supported.`);if(s.protocol==="data:"){let y=IA(i.url),w=new Xt(y,{headers:{"Content-Type":y.typeFull}});r(w);return}let a=(s.protocol==="https:"?TA:Ys).request,{signal:c}=i,f=null,d=()=>{let y=new Cl("The operation was aborted.");n(y),i.body&&i.body instanceof Ke.Readable&&i.body.destroy(y),!(!f||!f.body)&&f.body.emit("error",y)};if(c&&c.aborted){d();return}let h=()=>{d(),b()},m=a(s.toString(),o);c&&c.addEventListener("abort",h);let b=()=>{m.abort(),c&&c.removeEventListener("abort",h)};m.on("error",y=>{n(new xt(`request to ${i.url} failed, reason: ${y.message}`,"system",y)),b()}),l1(m,y=>{f&&f.body&&f.body.destroy(y)}),process.version<"v14"&&m.on("socket",y=>{let w;y.prependListener("end",()=>{w=y._eventsCount}),y.prependListener("close",S=>{if(f&&w<y._eventsCount&&!S){let _=new Error("Premature close");_.code="ERR_STREAM_PREMATURE_CLOSE",f.body.emit("error",_)}})}),m.on("response",y=>{m.setTimeout(0);let w=YA(y.rawHeaders);if($f(y.statusCode)){let C=w.get("Location"),L=null;try{L=C===null?null:new URL(C,i.url)}catch{if(i.redirect!=="manual"){n(new xt(`uri requested responds with an invalid redirect URL: ${C}`,"invalid-redirect")),b();return}}switch(i.redirect){case"error":n(new xt(`uri requested responds with a redirect, redirect mode is set to error: ${i.url}`,"no-redirect")),b();return;case"manual":break;case"follow":{if(L===null)break;if(i.counter>=i.follow){n(new xt(`maximum redirect reached at: ${i.url}`,"max-redirect")),b();return}let B={headers:new fr(i.headers),follow:i.follow,counter:i.counter+1,agent:i.agent,compress:i.compress,method:i.method,body:Uf(i),signal:i.signal,size:i.size,referrer:i.referrer,referrerPolicy:i.referrerPolicy};if(!VA(i.url,L)||!HA(i.url,L))for(let A of["authorization","www-authenticate","cookie","cookie2"])B.headers.delete(A);if(y.statusCode!==303&&i.body&&e.body instanceof Ke.Readable){n(new xt("Cannot follow redirect with body being a readable stream","unsupported-redirect")),b();return}(y.statusCode===303||(y.statusCode===301||y.statusCode===302)&&i.method==="POST")&&(B.method="GET",B.body=void 0,B.headers.delete("content-length"));let j=n1(w);j&&(B.referrerPolicy=j),r(Og(new ji(L,B))),b();return}default:return n(new TypeError(`Redirect option '${i.redirect}' is not a valid value of RequestRedirect`))}}c&&y.once("end",()=>{c.removeEventListener("abort",h)});let S=Ke.pipeline(y,new Ke.PassThrough,C=>{C&&n(C)});process.version<"v12.10"&&y.on("aborted",h);let _={url:i.url,status:y.statusCode,statusText:y.statusMessage,headers:w,size:i.size,counter:i.counter,highWaterMark:i.highWaterMark},T=w.get("Content-Encoding");if(!i.compress||i.method==="HEAD"||T===null||y.statusCode===204||y.statusCode===304){f=new Xt(S,_),r(f);return}let P={flush:Ki.Z_SYNC_FLUSH,finishFlush:Ki.Z_SYNC_FLUSH};if(T==="gzip"||T==="x-gzip"){S=Ke.pipeline(S,Ki.createGunzip(P),C=>{C&&n(C)}),f=new Xt(S,_),r(f);return}if(T==="deflate"||T==="x-deflate"){let C=Ke.pipeline(y,new Ke.PassThrough,L=>{L&&n(L)});C.once("data",L=>{(L[0]&15)===8?S=Ke.pipeline(S,Ki.createInflate(),B=>{B&&n(B)}):S=Ke.pipeline(S,Ki.createInflateRaw(),B=>{B&&n(B)}),f=new Xt(S,_),r(f)}),C.once("end",()=>{f||(f=new Xt(S,_),r(f))});return}if(T==="br"){S=Ke.pipeline(S,Ki.createBrotliDecompress(),C=>{C&&n(C)}),f=new Xt(S,_),r(f);return}f=new Xt(S,_),r(f)}),GA(m,i).catch(n)})}function l1(t,e){let r=Qe.Buffer.from(`0\r
\r
`),n=!1,i=!1,s;t.on("response",o=>{let{headers:a}=o;n=a["transfer-encoding"]==="chunked"&&!a["content-length"]}),t.on("socket",o=>{let a=()=>{if(n&&!i){let f=new Error("Premature close");f.code="ERR_STREAM_PREMATURE_CLOSE",e(f)}},c=f=>{i=Qe.Buffer.compare(f.slice(-5),r)===0,!i&&s&&(i=Qe.Buffer.compare(s.slice(-3),r.slice(0,3))===0&&Qe.Buffer.compare(f.slice(-2),r.slice(3))===0),s=f};o.prependListener("close",a),o.on("data",c),t.on("close",()=>{o.removeListener("close",a),o.removeListener("data",c)})})}var Ig=new WeakMap,Nf=new WeakMap;function Ce(t){let e=Ig.get(t);return console.assert(e!=null,"'this' is expected an Event object, but got",t),e}function Sg(t){if(t.passiveListener!=null){typeof console<"u"&&typeof console.error=="function"&&console.error("Unable to preventDefault inside passive event listener invocation.",t.passiveListener);return}t.event.cancelable&&(t.canceled=!0,typeof t.event.preventDefault=="function"&&t.event.preventDefault())}function Mi(t,e){Ig.set(this,{eventTarget:t,event:e,eventPhase:2,currentTarget:t,canceled:!1,stopped:!1,immediateStopped:!1,passiveListener:null,timeStamp:e.timeStamp||Date.now()}),Object.defineProperty(this,"isTrusted",{value:!1,enumerable:!0});let r=Object.keys(e);for(let n=0;n<r.length;++n){let i=r[n];i in this||Object.defineProperty(this,i,Ng(i))}}Mi.prototype={get type(){return Ce(this).event.type},get target(){return Ce(this).eventTarget},get currentTarget(){return Ce(this).currentTarget},composedPath(){let t=Ce(this).currentTarget;return t==null?[]:[t]},get NONE(){return 0},get CAPTURING_PHASE(){return 1},get AT_TARGET(){return 2},get BUBBLING_PHASE(){return 3},get eventPhase(){return Ce(this).eventPhase},stopPropagation(){let t=Ce(this);t.stopped=!0,typeof t.event.stopPropagation=="function"&&t.event.stopPropagation()},stopImmediatePropagation(){let t=Ce(this);t.stopped=!0,t.immediateStopped=!0,typeof t.event.stopImmediatePropagation=="function"&&t.event.stopImmediatePropagation()},get bubbles(){return!!Ce(this).event.bubbles},get cancelable(){return!!Ce(this).event.cancelable},preventDefault(){Sg(Ce(this))},get defaultPrevented(){return Ce(this).canceled},get composed(){return!!Ce(this).event.composed},get timeStamp(){return Ce(this).timeStamp},get srcElement(){return Ce(this).eventTarget},get cancelBubble(){return Ce(this).stopped},set cancelBubble(t){if(!t)return;let e=Ce(this);e.stopped=!0,typeof e.event.cancelBubble=="boolean"&&(e.event.cancelBubble=!0)},get returnValue(){return!Ce(this).canceled},set returnValue(t){t||Sg(Ce(this))},initEvent(){}};Object.defineProperty(Mi.prototype,"constructor",{value:Mi,configurable:!0,writable:!0});typeof window<"u"&&typeof window.Event<"u"&&(Object.setPrototypeOf(Mi.prototype,window.Event.prototype),Nf.set(window.Event.prototype,Mi));function Ng(t){return{get(){return Ce(this).event[t]},set(e){Ce(this).event[t]=e},configurable:!0,enumerable:!0}}function c1(t){return{value(){let e=Ce(this).event;return e[t].apply(e,arguments)},configurable:!0,enumerable:!0}}function u1(t,e){let r=Object.keys(e);if(r.length===0)return t;function n(i,s){t.call(this,i,s)}n.prototype=Object.create(t.prototype,{constructor:{value:n,configurable:!0,writable:!0}});for(let i=0;i<r.length;++i){let s=r[i];if(!(s in t.prototype)){let a=typeof Object.getOwnPropertyDescriptor(e,s).value=="function";Object.defineProperty(n.prototype,s,a?c1(s):Ng(s))}}return n}function Ug(t){if(t==null||t===Object.prototype)return Mi;let e=Nf.get(t);return e==null&&(e=u1(Ug(Object.getPrototypeOf(t)),t),Nf.set(t,e)),e}function f1(t,e){let r=Ug(Object.getPrototypeOf(e));return new r(t,e)}function d1(t){return Ce(t).immediateStopped}function h1(t,e){Ce(t).eventPhase=e}function p1(t,e){Ce(t).currentTarget=e}function Eg(t,e){Ce(t).passiveListener=e}var $g=new WeakMap,Ag=1,_g=2,El=3;function Al(t){return t!==null&&typeof t=="object"}function Gs(t){let e=$g.get(t);if(e==null)throw new TypeError("'this' is expected an EventTarget object, but got another value.");return e}function m1(t){return{get(){let r=Gs(this).get(t);for(;r!=null;){if(r.listenerType===El)return r.listener;r=r.next}return null},set(e){typeof e!="function"&&!Al(e)&&(e=null);let r=Gs(this),n=null,i=r.get(t);for(;i!=null;)i.listenerType===El?n!==null?n.next=i.next:i.next!==null?r.set(t,i.next):r.delete(t):n=i,i=i.next;if(e!==null){let s={listener:e,listenerType:El,passive:!1,once:!1,next:null};n===null?r.set(t,s):n.next=s}},configurable:!0,enumerable:!0}}function Dg(t,e){Object.defineProperty(t,`on${e}`,m1(e))}function kg(t){function e(){Ur.call(this)}e.prototype=Object.create(Ur.prototype,{constructor:{value:e,configurable:!0,writable:!0}});for(let r=0;r<t.length;++r)Dg(e.prototype,t[r]);return e}function Ur(){if(this instanceof Ur){$g.set(this,new Map);return}if(arguments.length===1&&Array.isArray(arguments[0]))return kg(arguments[0]);if(arguments.length>0){let t=new Array(arguments.length);for(let e=0;e<arguments.length;++e)t[e]=arguments[e];return kg(t)}throw new TypeError("Cannot call a class as a function")}Ur.prototype={addEventListener(t,e,r){if(e==null)return;if(typeof e!="function"&&!Al(e))throw new TypeError("'listener' should be a function or an object.");let n=Gs(this),i=Al(r),o=(i?!!r.capture:!!r)?Ag:_g,a={listener:e,listenerType:o,passive:i&&!!r.passive,once:i&&!!r.once,next:null},c=n.get(t);if(c===void 0){n.set(t,a);return}let f=null;for(;c!=null;){if(c.listener===e&&c.listenerType===o)return;f=c,c=c.next}f.next=a},removeEventListener(t,e,r){if(e==null)return;let n=Gs(this),s=(Al(r)?!!r.capture:!!r)?Ag:_g,o=null,a=n.get(t);for(;a!=null;){if(a.listener===e&&a.listenerType===s){o!==null?o.next=a.next:a.next!==null?n.set(t,a.next):n.delete(t);return}o=a,a=a.next}},dispatchEvent(t){if(t==null||typeof t.type!="string")throw new TypeError('"event.type" should be a string.');let e=Gs(this),r=t.type,n=e.get(r);if(n==null)return!0;let i=f1(this,t),s=null;for(;n!=null;){if(n.once?s!==null?s.next=n.next:n.next!==null?e.set(r,n.next):e.delete(r):s=n,Eg(i,n.passive?n.listener:null),typeof n.listener=="function")try{n.listener.call(this,i)}catch(o){typeof console<"u"&&typeof console.error=="function"&&console.error(o)}else n.listenerType!==El&&typeof n.listener.handleEvent=="function"&&n.listener.handleEvent(i);if(d1(i))break;n=n.next}return Eg(i,null),h1(i,0),p1(i,null),!i.defaultPrevented}};Object.defineProperty(Ur.prototype,"constructor",{value:Ur,configurable:!0,writable:!0});typeof window<"u"&&typeof window.EventTarget<"u"&&Object.setPrototypeOf(Ur.prototype,window.EventTarget.prototype);var Fi=class extends Ur{constructor(){throw super(),new TypeError("AbortSignal cannot be constructed directly")}get aborted(){let e=Pl.get(this);if(typeof e!="boolean")throw new TypeError(`Expected 'this' to be an 'AbortSignal' object, but got ${this===null?"null":typeof this}`);return e}};Dg(Fi.prototype,"abort");function g1(){let t=Object.create(Fi.prototype);return Ur.call(t),Pl.set(t,!1),t}function y1(t){Pl.get(t)===!1&&(Pl.set(t,!0),t.dispatchEvent({type:"abort"}))}var Pl=new WeakMap;Object.defineProperties(Fi.prototype,{aborted:{enumerable:!0}});typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Fi.prototype,Symbol.toStringTag,{configurable:!0,value:"AbortSignal"});var Zs=class{constructor(){Kg.set(this,g1())}get signal(){return xg(this)}abort(){y1(xg(this))}},Kg=new WeakMap;function xg(t){let e=Kg.get(t);if(e==null)throw new TypeError(`Expected 'this' to be an 'AbortController' object, but got ${t===null?"null":typeof t}`);return e}Object.defineProperties(Zs.prototype,{signal:{enumerable:!0},abort:{enumerable:!0}});typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Zs.prototype,Symbol.toStringTag,{configurable:!0,value:"AbortController"});Ct.AbortController=Zs;Ct.AbortError=Cl;Ct.FetchError=xt;Ct.File=Pg;Ct.FormData=_l;Ct.Headers=fr;Ct.Request=ji;Ct.Response=Xt;Ct._Blob=Qs;Ct.fetch=Og;Ct.isRedirect=$f;Ct.nodeDomexception=o1});var Mg=at(Ve=>{"use strict";Object.defineProperty(Ve,"__esModule",{value:!0});var mt=Cf(),Tl=$("node:fs"),b1=$("node:path");$("node:http");$("node:https");$("node:zlib");$("node:stream");$("node:buffer");$("node:util");$("node:url");$("node:net");var{stat:Df}=Tl.promises,w1=(t,e)=>qg(Tl.statSync(t),t,e),v1=(t,e)=>Df(t).then(r=>qg(r,t,e)),S1=(t,e)=>Df(t).then(r=>Lg(r,t,e)),E1=(t,e)=>Lg(Tl.statSync(t),t,e),qg=(t,e,r="")=>new mt._Blob([new Rl({path:e,size:t.size,lastModified:t.mtimeMs,start:0})],{type:r}),Lg=(t,e,r="")=>new mt.File([new Rl({path:e,size:t.size,lastModified:t.mtimeMs,start:0})],b1.basename(e),{type:r,lastModified:t.mtimeMs}),Rl=class t{#e;#t;constructor(e){this.#e=e.path,this.#t=e.start,this.size=e.size,this.lastModified=e.lastModified,this.originalSize=e.originalSize===void 0?e.size:e.originalSize}slice(e,r){return new t({path:this.#e,lastModified:this.lastModified,originalSize:this.originalSize,size:r-e,start:this.#t+e})}async*stream(){let{mtimeMs:e,size:r}=await Df(this.#e);if(e>this.lastModified||this.originalSize!==r)throw new mt.nodeDomexception("The requested file could not be read, typically due to permission problems that have occurred after a reference to a file was acquired.","NotReadableError");yield*Tl.createReadStream(this.#e,{start:this.#t,end:this.#t+this.size-1})}get[Symbol.toStringTag](){return"Blob"}},jg=globalThis.fetch||mt.fetch,A1=globalThis.Blob||mt._Blob,_1=globalThis.File||mt.File,k1=globalThis.FormData||mt.FormData,x1=globalThis.Headers||mt.Headers,C1=globalThis.Request||mt.Request,P1=globalThis.Response||mt.Response,R1=globalThis.AbortController||mt.AbortController;Ve.AbortError=mt.AbortError;Ve.FetchError=mt.FetchError;Ve.isRedirect=mt.isRedirect;Ve.AbortController=R1;Ve.Blob=A1;Ve.File=_1;Ve.FormData=k1;Ve.Headers=x1;Ve.Request=C1;Ve.Response=P1;Ve.blobFrom=v1;Ve.blobFromSync=w1;Ve.default=jg;Ve.fetch=jg;Ve.fileFrom=S1;Ve.fileFromSync=E1});var Hg=at((F$,Vg)=>{"use strict";var Kf=Mg();function Fg(t,e){return Kf.fetch(t,e)}for(let t in Kf)Fg[t]=Kf[t];Vg.exports=Fg});var zg=at((V$,$r)=>{"use strict";var{fetch:Wg,Blob:T1,FormData:B1,Headers:O1,Request:I1,Response:N1,AbortController:U1}=Hg();$r.exports=Wg;$r.exports.RuntimeBlob=T1;$r.exports.RuntimeFormData=B1;$r.exports.RuntimeHeaders=O1;$r.exports.RuntimeRequest=I1;$r.exports.RuntimeResponse=N1;$r.exports.RuntimeAbortController=U1;$r.exports.RuntimeFetch=Wg});var Qg=at((H$,Yg)=>{"use strict";var $1=function(e){return D1(e)&&!K1(e)};function D1(t){return!!t&&typeof t=="object"}function K1(t){var e=Object.prototype.toString.call(t);return e==="[object RegExp]"||e==="[object Date]"||j1(t)}var q1=typeof Symbol=="function"&&Symbol.for,L1=q1?Symbol.for("react.element"):60103;function j1(t){return t.$$typeof===L1}function M1(t){return Array.isArray(t)?[]:{}}function Xs(t,e){return e.clone!==!1&&e.isMergeableObject(t)?Vi(M1(t),t,e):t}function F1(t,e,r){return t.concat(e).map(function(n){return Xs(n,r)})}function V1(t,e){if(!e.customMerge)return Vi;var r=e.customMerge(t);return typeof r=="function"?r:Vi}function H1(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter(function(e){return t.propertyIsEnumerable(e)}):[]}function Jg(t){return Object.keys(t).concat(H1(t))}function Gg(t,e){try{return e in t}catch{return!1}}function W1(t,e){return Gg(t,e)&&!(Object.hasOwnProperty.call(t,e)&&Object.propertyIsEnumerable.call(t,e))}function z1(t,e,r){var n={};return r.isMergeableObject(t)&&Jg(t).forEach(function(i){n[i]=Xs(t[i],r)}),Jg(e).forEach(function(i){W1(t,i)||(Gg(t,i)&&r.isMergeableObject(e[i])?n[i]=V1(i,r)(t[i],e[i],r):n[i]=Xs(e[i],r))}),n}function Vi(t,e,r){r=r||{},r.arrayMerge=r.arrayMerge||F1,r.isMergeableObject=r.isMergeableObject||$1,r.cloneUnlessOtherwiseSpecified=Xs;var n=Array.isArray(e),i=Array.isArray(t),s=n===i;return s?n?r.arrayMerge(t,e,r):z1(t,e,r):Xs(e,r)}Vi.all=function(e,r){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(n,i){return Vi(n,i,r)},{})};var J1=Vi;Yg.exports=J1});var ty=at((W$,Lf)=>{"use strict";var Xg=t=>typeof t=="object"&&t!==null,ey=Symbol("skip"),Zg=t=>Xg(t)&&!(t instanceof RegExp)&&!(t instanceof Error)&&!(t instanceof Date),qf=(t,e,r,n=new WeakMap)=>{if(r={deep:!1,target:{},...r},n.has(t))return n.get(t);n.set(t,r.target);let{target:i}=r;delete r.target;let s=o=>o.map(a=>Zg(a)?qf(a,e,r,n):a);if(Array.isArray(t))return s(t);for(let[o,a]of Object.entries(t)){let c=e(o,a,t);if(c===ey)continue;let[f,d,{shouldRecurse:h=!0}={}]=c;f!=="__proto__"&&(r.deep&&h&&Zg(d)&&(d=Array.isArray(d)?s(d):qf(d,e,r,n)),i[f]=d)}return i};Lf.exports=(t,e,r)=>{if(!Xg(t))throw new TypeError(`Expected an object, got \`${t}\` (${typeof t})`);return qf(t,e,r)};Lf.exports.mapObjectSkip=ey});function ry(t){return t.toLowerCase()}var ny=be(()=>{"use strict"});function sy(t,e){e===void 0&&(e={});for(var r=e.splitRegexp,n=r===void 0?G1:r,i=e.stripRegexp,s=i===void 0?Y1:i,o=e.transform,a=o===void 0?ry:o,c=e.delimiter,f=c===void 0?" ":c,d=iy(iy(t,n,"$1\0$2"),s,"\0"),h=0,m=d.length;d.charAt(h)==="\0";)h++;for(;d.charAt(m-1)==="\0";)m--;return d.slice(h,m).split("\0").map(a).join(f)}function iy(t,e,r){return e instanceof RegExp?t.replace(e,r):e.reduce(function(n,i){return n.replace(i,r)},t)}var G1,Y1,oy=be(()=>{"use strict";ny();G1=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],Y1=/[^A-Z0-9]+/gi});function ay(t,e){return e===void 0&&(e={}),sy(t,Ni({delimiter:"."},e))}var ly=be(()=>{"use strict";fl();oy()});var cy={};fu(cy,{snakeCase:()=>Q1});function Q1(t,e){return e===void 0&&(e={}),ay(t,Ni({delimiter:"_"},e))}var uy=be(()=>{"use strict";fl();ly()});var dy=at((tD,fy)=>{"use strict";var Z1=ty(),{snakeCase:X1}=(uy(),du(cy));fy.exports=function(t,e){return e=Object.assign({deep:!0,exclude:[],parsingOptions:{}},e),Z1(t,function(r,n){return[e_(e.exclude,r)?r:X1(r,e.parsingOptions),n]},e)};function e_(t,e){return t.some(function(r){return typeof r=="string"?r===e:r.test(e)})}});var hy=at(jf=>{"use strict";jf.parse=r_;jf.serialize=n_;var t_=Object.prototype.toString,Bl=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function r_(t,e){if(typeof t!="string")throw new TypeError("argument str must be a string");for(var r={},n=e||{},i=n.decode||i_,s=0;s<t.length;){var o=t.indexOf("=",s);if(o===-1)break;var a=t.indexOf(";",s);if(a===-1)a=t.length;else if(a<o){s=t.lastIndexOf(";",o-1)+1;continue}var c=t.slice(s,o).trim();if(r[c]===void 0){var f=t.slice(o+1,a).trim();f.charCodeAt(0)===34&&(f=f.slice(1,-1)),r[c]=a_(f,i)}s=a+1}return r}function n_(t,e,r){var n=r||{},i=n.encode||s_;if(typeof i!="function")throw new TypeError("option encode is invalid");if(!Bl.test(t))throw new TypeError("argument name is invalid");var s=i(e);if(s&&!Bl.test(s))throw new TypeError("argument val is invalid");var o=t+"="+s;if(n.maxAge!=null){var a=n.maxAge-0;if(isNaN(a)||!isFinite(a))throw new TypeError("option maxAge is invalid");o+="; Max-Age="+Math.floor(a)}if(n.domain){if(!Bl.test(n.domain))throw new TypeError("option domain is invalid");o+="; Domain="+n.domain}if(n.path){if(!Bl.test(n.path))throw new TypeError("option path is invalid");o+="; Path="+n.path}if(n.expires){var c=n.expires;if(!o_(c)||isNaN(c.valueOf()))throw new TypeError("option expires is invalid");o+="; Expires="+c.toUTCString()}if(n.httpOnly&&(o+="; HttpOnly"),n.secure&&(o+="; Secure"),n.priority){var f=typeof n.priority=="string"?n.priority.toLowerCase():n.priority;switch(f){case"low":o+="; Priority=Low";break;case"medium":o+="; Priority=Medium";break;case"high":o+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}}if(n.sameSite){var d=typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite;switch(d){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return o}function i_(t){return t.indexOf("%")!==-1?decodeURIComponent(t):t}function s_(t){return encodeURIComponent(t)}function o_(t){return t_.call(t)==="[object Date]"||t instanceof Date}function a_(t,e){try{return e(t)}catch{return t}}});var Sh=at((oK,E0)=>{"use strict";var Ax=Object.create,vc=Object.defineProperty,_x=Object.getOwnPropertyDescriptor,kx=Object.getOwnPropertyNames,xx=Object.getPrototypeOf,Cx=Object.prototype.hasOwnProperty,dw=(t,e)=>()=>(t&&(e=t(t=0)),e),wt=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),hi=(t,e)=>{for(var r in e)vc(t,r,{get:e[r],enumerable:!0})},hw=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of kx(e))!Cx.call(t,i)&&i!==r&&vc(t,i,{get:()=>e[i],enumerable:!(n=_x(e,i))||n.enumerable});return t},ye=(t,e,r)=>(r=t!=null?Ax(xx(t)):{},hw(e||!t||!t.__esModule?vc(r,"default",{value:t,enumerable:!0}):r,t)),Px=t=>hw(vc({},"__esModule",{value:!0}),t),pw=wt((t,e)=>{"use strict";e.exports=(r,n=process.argv)=>{let i=r.startsWith("-")?"":r.length===1?"-":"--",s=n.indexOf(i+r),o=n.indexOf("--");return s!==-1&&(o===-1||s<o)}}),Rx=wt((t,e)=>{"use strict";var r=$("node:os"),n=$("node:tty"),i=pw(),{env:s}=process,o;i("no-color")||i("no-colors")||i("color=false")||i("color=never")?o=0:(i("color")||i("colors")||i("color=true")||i("color=always"))&&(o=1),"FORCE_COLOR"in s&&(s.FORCE_COLOR==="true"?o=1:s.FORCE_COLOR==="false"?o=0:o=s.FORCE_COLOR.length===0?1:Math.min(parseInt(s.FORCE_COLOR,10),3));function a(d){return d===0?!1:{level:d,hasBasic:!0,has256:d>=2,has16m:d>=3}}function c(d,h){if(o===0)return 0;if(i("color=16m")||i("color=full")||i("color=truecolor"))return 3;if(i("color=256"))return 2;if(d&&!h&&o===void 0)return 0;let m=o||0;if(s.TERM==="dumb")return m;if(process.platform==="win32"){let b=r.release().split(".");return Number(b[0])>=10&&Number(b[2])>=10586?Number(b[2])>=14931?3:2:1}if("CI"in s)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(b=>b in s)||s.CI_NAME==="codeship"?1:m;if("TEAMCITY_VERSION"in s)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(s.TEAMCITY_VERSION)?1:0;if(s.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in s){let b=parseInt((s.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(s.TERM_PROGRAM){case"iTerm.app":return b>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(s.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(s.TERM)||"COLORTERM"in s?1:m}function f(d){let h=c(d,d&&d.isTTY);return a(h)}e.exports={supportsColor:f,stdout:a(c(!0,n.isatty(1))),stderr:a(c(!0,n.isatty(2)))}}),Tx=wt((t,e)=>{"use strict";var r=Rx(),n=pw();function i(o){if(/^\d{3,4}$/.test(o)){let c=/(\d{1,2})(\d{2})/.exec(o)||[];return{major:0,minor:parseInt(c[1],10),patch:parseInt(c[2],10)}}let a=(o||"").split(".").map(c=>parseInt(c,10));return{major:a[0],minor:a[1],patch:a[2]}}function s(o){let{CI:a,FORCE_HYPERLINK:c,NETLIFY:f,TEAMCITY_VERSION:d,TERM_PROGRAM:h,TERM_PROGRAM_VERSION:m,VTE_VERSION:b,TERM:y}=process.env;if(c)return!(c.length>0&&parseInt(c,10)===0);if(n("no-hyperlink")||n("no-hyperlinks")||n("hyperlink=false")||n("hyperlink=never"))return!1;if(n("hyperlink=true")||n("hyperlink=always")||f)return!0;if(!r.supportsColor(o)||o&&!o.isTTY)return!1;if("WT_SESSION"in process.env)return!0;if(process.platform==="win32"||a||d)return!1;if(h){let w=i(m||"");switch(h){case"iTerm.app":return w.major===3?w.minor>=1:w.major>3;case"WezTerm":return w.major>=20200620;case"vscode":return w.major>1||w.major===1&&w.minor>=72;case"ghostty":return!0}}if(b){if(b==="0.50.0")return!1;let w=i(b);return w.major>0||w.minor>=50}switch(y){case"alacritty":return!0}return!1}e.exports={supportsHyperlink:s,stdout:s(process.stdout),stderr:s(process.stderr)}}),Bx=wt((t,e)=>{e.exports={name:"@prisma/internals",version:"6.7.0",description:"This package is intended for Prisma's internal use",main:"dist/index.js",types:"dist/index.d.ts",repository:{type:"git",url:"https://github.com/prisma/prisma.git",directory:"packages/internals"},homepage:"https://www.prisma.io",author:"Tim Suchanek <suchanek@prisma.io>",bugs:"https://github.com/prisma/prisma/issues",license:"Apache-2.0",scripts:{dev:"DEV=true tsx helpers/build.ts",build:"tsx helpers/build.ts",test:"dotenv -e ../../.db.env -- jest --silent",prepublishOnly:"pnpm run build"},files:["README.md","dist","!**/libquery_engine*","!dist/get-generators/engines/*","scripts"],devDependencies:{"@babel/helper-validator-identifier":"7.25.9","@opentelemetry/api":"1.9.0","@swc/core":"1.11.5","@swc/jest":"0.2.37","@types/babel__helper-validator-identifier":"7.15.2","@types/jest":"29.5.14","@types/node":"18.19.76","@types/resolve":"1.20.6",archiver:"6.0.2","checkpoint-client":"1.1.33","cli-truncate":"4.0.0",dotenv:"16.4.7",esbuild:"0.25.1","escape-string-regexp":"5.0.0",execa:"5.1.1","fast-glob":"3.3.3","find-up":"7.0.0","fp-ts":"2.16.9","fs-extra":"11.3.0","fs-jetpack":"5.1.0","global-dirs":"4.0.0",globby:"11.1.0","identifier-regex":"1.0.0","indent-string":"4.0.0","is-windows":"1.0.2","is-wsl":"3.1.0",jest:"29.7.0","jest-junit":"16.0.0",kleur:"4.1.5","mock-stdin":"1.0.0","new-github-issue-url":"0.2.1","node-fetch":"3.3.2","npm-packlist":"5.1.3",open:"7.4.2","p-map":"4.0.0","read-package-up":"11.0.0",resolve:"1.22.10","string-width":"7.2.0","strip-ansi":"6.0.1","strip-indent":"4.0.0","temp-dir":"2.0.0",tempy:"1.0.1","terminal-link":"4.0.0",tmp:"0.2.3","ts-node":"10.9.2","ts-pattern":"5.6.2","ts-toolbelt":"9.6.0",typescript:"5.4.5",yarn:"1.22.22"},dependencies:{"@prisma/config":"workspace:*","@prisma/debug":"workspace:*","@prisma/dmmf":"workspace:*","@prisma/driver-adapter-utils":"workspace:*","@prisma/engines":"workspace:*","@prisma/fetch-engine":"workspace:*","@prisma/generator":"workspace:*","@prisma/generator-helper":"workspace:*","@prisma/get-platform":"workspace:*","@prisma/prisma-schema-wasm":"6.7.0-36.3cff47a7f5d65c3ea74883f1d736e41d68ce91ed","@prisma/schema-engine-wasm":"6.7.0-36.3cff47a7f5d65c3ea74883f1d736e41d68ce91ed","@prisma/schema-files-loader":"workspace:*",arg:"5.0.2",prompts:"2.4.2"},peerDependencies:{typescript:">=5.1.0"},peerDependenciesMeta:{typescript:{optional:!0}},sideEffects:!1}}),mw=wt((t,e)=>{e.exports={name:"@prisma/engines-version",version:"6.7.0-36.3cff47a7f5d65c3ea74883f1d736e41d68ce91ed",main:"index.js",types:"index.d.ts",license:"Apache-2.0",author:"Tim Suchanek <suchanek@prisma.io>",prisma:{enginesVersion:"3cff47a7f5d65c3ea74883f1d736e41d68ce91ed"},repository:{type:"git",url:"https://github.com/prisma/engines-wrapper.git",directory:"packages/engines-version"},devDependencies:{"@types/node":"18.19.76",typescript:"4.9.5"},files:["index.js","index.d.ts"],scripts:{build:"tsc -d"}}}),gw=wt(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enginesVersion=void 0,t.enginesVersion=mw().prisma.enginesVersion}),Ox=wt((t,e)=>{"use strict";e.exports=r=>{let n=r.match(/^[ \t]*(?=\S)/gm);return n?n.reduce((i,s)=>Math.min(i,s.length),1/0):0}}),yw=wt((t,e)=>{"use strict";e.exports=(r,n=1,i)=>{if(i={indent:" ",includeEmptyLines:!1,...i},typeof r!="string")throw new TypeError(`Expected \`input\` to be a \`string\`, got \`${typeof r}\``);if(typeof n!="number")throw new TypeError(`Expected \`count\` to be a \`number\`, got \`${typeof n}\``);if(typeof i.indent!="string")throw new TypeError(`Expected \`options.indent\` to be a \`string\`, got \`${typeof i.indent}\``);if(n===0)return r;let s=i.includeEmptyLines?/^/gm:/^(?!\s*$)/gm;return r.replace(s,i.indent.repeat(n))}}),Ix=wt((t,e)=>{"use strict";e.exports=({onlyFirst:r=!1}={})=>{let n=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|");return new RegExp(n,r?void 0:"g")}}),bw=wt((t,e)=>{"use strict";var r=Ix();e.exports=n=>typeof n=="string"?n.replace(r(),""):n}),Nx=wt((t,e)=>{e.exports={name:"dotenv",version:"16.4.7",description:"Loads environment variables from .env file",main:"lib/main.js",types:"lib/main.d.ts",exports:{".":{types:"./lib/main.d.ts",require:"./lib/main.js",default:"./lib/main.js"},"./config":"./config.js","./config.js":"./config.js","./lib/env-options":"./lib/env-options.js","./lib/env-options.js":"./lib/env-options.js","./lib/cli-options":"./lib/cli-options.js","./lib/cli-options.js":"./lib/cli-options.js","./package.json":"./package.json"},scripts:{"dts-check":"tsc --project tests/types/tsconfig.json",lint:"standard",pretest:"npm run lint && npm run dts-check",test:"tap run --allow-empty-coverage --disable-coverage --timeout=60000","test:coverage":"tap run --show-full-coverage --timeout=60000 --coverage-report=lcov",prerelease:"npm test",release:"standard-version"},repository:{type:"git",url:"git://github.com/motdotla/dotenv.git"},funding:"https://dotenvx.com",keywords:["dotenv","env",".env","environment","variables","config","settings"],readmeFilename:"README.md",license:"BSD-2-Clause",devDependencies:{"@types/node":"^18.11.3",decache:"^4.6.2",sinon:"^14.0.1",standard:"^17.0.0","standard-version":"^9.5.0",tap:"^19.2.0",typescript:"^4.8.4"},engines:{node:">=12"},browser:{fs:!1}}}),Ux=wt((t,e)=>{"use strict";var r=$("node:fs"),n=$("node:path"),i=$("node:os"),s=$("node:crypto"),o=Nx(),a=o.version,c=/(?:^|^)\s*(?:export\s+)?([\w.-]+)(?:\s*=\s*?|:\s+?)(\s*'(?:\\'|[^'])*'|\s*"(?:\\"|[^"])*"|\s*`(?:\\`|[^`])*`|[^#\r\n]+)?\s*(?:#.*)?(?:$|$)/mg;function f(A){let M={},K=A.toString();K=K.replace(/\r\n?/mg,`
`);let G;for(;(G=c.exec(K))!=null;){let ae=G[1],F=G[2]||"";F=F.trim();let ne=F[0];F=F.replace(/^(['"`])([\s\S]*)\1$/mg,"$2"),ne==='"'&&(F=F.replace(/\\n/g,`
`),F=F.replace(/\\r/g,"\r")),M[ae]=F}return M}function d(A){let M=S(A),K=j.configDotenv({path:M});if(!K.parsed){let ne=new Error(`MISSING_DATA: Cannot parse ${M} for an unknown reason`);throw ne.code="MISSING_DATA",ne}let G=y(A).split(","),ae=G.length,F;for(let ne=0;ne<ae;ne++)try{let ee=G[ne].trim(),Q=w(K,ee);F=j.decrypt(Q.ciphertext,Q.key);break}catch(ee){if(ne+1>=ae)throw ee}return j.parse(F)}function h(A){console.log(`[dotenv@${a}][INFO] ${A}`)}function m(A){console.log(`[dotenv@${a}][WARN] ${A}`)}function b(A){console.log(`[dotenv@${a}][DEBUG] ${A}`)}function y(A){return A&&A.DOTENV_KEY&&A.DOTENV_KEY.length>0?A.DOTENV_KEY:process.env.DOTENV_KEY&&process.env.DOTENV_KEY.length>0?process.env.DOTENV_KEY:""}function w(A,M){let K;try{K=new URL(M)}catch(ee){if(ee.code==="ERR_INVALID_URL"){let Q=new Error("INVALID_DOTENV_KEY: Wrong format. Must be in valid uri format like dotenv://:key_1234@dotenvx.com/vault/.env.vault?environment=development");throw Q.code="INVALID_DOTENV_KEY",Q}throw ee}let G=K.password;if(!G){let ee=new Error("INVALID_DOTENV_KEY: Missing key part");throw ee.code="INVALID_DOTENV_KEY",ee}let ae=K.searchParams.get("environment");if(!ae){let ee=new Error("INVALID_DOTENV_KEY: Missing environment part");throw ee.code="INVALID_DOTENV_KEY",ee}let F=`DOTENV_VAULT_${ae.toUpperCase()}`,ne=A.parsed[F];if(!ne){let ee=new Error(`NOT_FOUND_DOTENV_ENVIRONMENT: Cannot locate environment ${F} in your .env.vault file.`);throw ee.code="NOT_FOUND_DOTENV_ENVIRONMENT",ee}return{ciphertext:ne,key:G}}function S(A){let M=null;if(A&&A.path&&A.path.length>0)if(Array.isArray(A.path))for(let K of A.path)r.existsSync(K)&&(M=K.endsWith(".vault")?K:`${K}.vault`);else M=A.path.endsWith(".vault")?A.path:`${A.path}.vault`;else M=n.resolve(process.cwd(),".env.vault");return r.existsSync(M)?M:null}function _(A){return A[0]==="~"?n.join(i.homedir(),A.slice(1)):A}function T(A){h("Loading env from encrypted .env.vault");let M=j._parseVault(A),K=process.env;return A&&A.processEnv!=null&&(K=A.processEnv),j.populate(K,M,A),{parsed:M}}function P(A){let M=n.resolve(process.cwd(),".env"),K="utf8",G=!!(A&&A.debug);A&&A.encoding?K=A.encoding:G&&b("No encoding is specified. UTF-8 is used by default");let ae=[M];if(A&&A.path)if(!Array.isArray(A.path))ae=[_(A.path)];else{ae=[];for(let Q of A.path)ae.push(_(Q))}let F,ne={};for(let Q of ae)try{let rr=j.parse(r.readFileSync(Q,{encoding:K}));j.populate(ne,rr,A)}catch(rr){G&&b(`Failed to load ${Q} ${rr.message}`),F=rr}let ee=process.env;return A&&A.processEnv!=null&&(ee=A.processEnv),j.populate(ee,ne,A),F?{parsed:ne,error:F}:{parsed:ne}}function C(A){if(y(A).length===0)return j.configDotenv(A);let M=S(A);return M?j._configVault(A):(m(`You set DOTENV_KEY but you are missing a .env.vault file at ${M}. Did you forget to build it?`),j.configDotenv(A))}function L(A,M){let K=Buffer.from(M.slice(-64),"hex"),G=Buffer.from(A,"base64"),ae=G.subarray(0,12),F=G.subarray(-16);G=G.subarray(12,-16);try{let ne=s.createDecipheriv("aes-256-gcm",K,ae);return ne.setAuthTag(F),`${ne.update(G)}${ne.final()}`}catch(ne){let ee=ne instanceof RangeError,Q=ne.message==="Invalid key length",rr=ne.message==="Unsupported state or unable to authenticate data";if(ee||Q){let Sr=new Error("INVALID_DOTENV_KEY: It must be 64 characters long (or more)");throw Sr.code="INVALID_DOTENV_KEY",Sr}else if(rr){let Sr=new Error("DECRYPTION_FAILED: Please check your DOTENV_KEY");throw Sr.code="DECRYPTION_FAILED",Sr}else throw ne}}function B(A,M,K={}){let G=!!(K&&K.debug),ae=!!(K&&K.override);if(typeof M!="object"){let F=new Error("OBJECT_REQUIRED: Please check the processEnv argument being passed to populate");throw F.code="OBJECT_REQUIRED",F}for(let F of Object.keys(M))Object.prototype.hasOwnProperty.call(A,F)?(ae===!0&&(A[F]=M[F]),G&&b(ae===!0?`"${F}" is already defined and WAS overwritten`:`"${F}" is already defined and was NOT overwritten`)):A[F]=M[F]}var j={configDotenv:P,_configVault:T,_parseVault:d,config:C,decrypt:L,parse:f,populate:B};e.exports.configDotenv=j.configDotenv,e.exports._configVault=j._configVault,e.exports._parseVault=j._parseVault,e.exports.config=j.config,e.exports.decrypt=j.decrypt,e.exports.parse=j.parse,e.exports.populate=j.populate,e.exports=j}),$x=wt((t,e)=>{"use strict";e.exports=(r={})=>{let n;if(r.repoUrl)n=r.repoUrl;else if(r.user&&r.repo)n=`https://github.com/${r.user}/${r.repo}`;else throw new Error("You need to specify either the `repoUrl` option or both the `user` and `repo` options");let i=new URL(`${n}/issues/new`),s=["body","title","labels","template","milestone","assignee","projects"];for(let o of s){let a=r[o];if(a!==void 0){if(o==="labels"||o==="projects"){if(!Array.isArray(a))throw new TypeError(`The \`${o}\` option should be an array`);a=a.join(",")}i.searchParams.set(o,a)}}return i.toString()},e.exports.default=e.exports}),ww=wt((t,e)=>{"use strict";e.exports=function(){function r(n,i,s,o,a){return n<i||s<i?n>s?s+1:n+1:o===a?i:i+1}return function(n,i){if(n===i)return 0;if(n.length>i.length){var s=n;n=i,i=s}for(var o=n.length,a=i.length;o>0&&n.charCodeAt(o-1)===i.charCodeAt(a-1);)o--,a--;for(var c=0;c<o&&n.charCodeAt(c)===i.charCodeAt(c);)c++;if(o-=c,a-=c,o===0||a<3)return a;var f=0,d,h,m,b,y,w,S,_,T,P,C,L,B=[];for(d=0;d<o;d++)B.push(d+1),B.push(n.charCodeAt(c+d));for(var j=B.length-1;f<a-3;)for(T=i.charCodeAt(c+(h=f)),P=i.charCodeAt(c+(m=f+1)),C=i.charCodeAt(c+(b=f+2)),L=i.charCodeAt(c+(y=f+3)),w=f+=4,d=0;d<j;d+=2)S=B[d],_=B[d+1],h=r(S,h,m,T,_),m=r(h,m,b,P,_),b=r(m,b,y,C,_),w=r(b,y,w,L,_),B[d]=w,y=b,b=m,m=h,h=S;for(;f<a;)for(T=i.charCodeAt(c+(h=f)),w=++f,d=0;d<j;d+=2)S=B[d],B[d]=w=r(S,h,w,T,B[d+1]),h=S;return w}}()}),Dx=dw(()=>{"use strict"}),Kx=dw(()=>{"use strict"}),vw={};hi(vw,{DMMF:()=>nv,Debug:()=>st,Decimal:()=>ko,Extensions:()=>Sw,MetricsClient:()=>Ov,PrismaClientInitializationError:()=>Ie,PrismaClientKnownRequestError:()=>Sn,PrismaClientRustPanicError:()=>wn,PrismaClientUnknownRequestError:()=>Tt,PrismaClientValidationError:()=>qr,Public:()=>Ew,Sql:()=>_n,createParam:()=>LT,defineDmmfProperty:()=>QT,deserializeJsonResponse:()=>yc,deserializeRawResult:()=>w0,dmmfToRuntimeDataModel:()=>DR,empty:()=>sB,getPrismaClient:()=>WI,getRuntime:()=>Vv,join:()=>iB,makeStrictEnum:()=>GI,makeTypedQueryFactory:()=>XT,objectEnumValues:()=>bv,raw:()=>Uv,serializeJsonQuery:()=>Rv,skip:()=>Cv,sqltag:()=>oB,warnEnvConflicts:()=>YI,warnOnce:()=>Fw});E0.exports=Px(vw);var Sw={};hi(Sw,{defineExtension:()=>qx,getExtensionContext:()=>Lx});function qx(t){return typeof t=="function"?t:e=>e.$extends(t)}function Lx(t){return t}var Ew={};hi(Ew,{validator:()=>jx});function jx(...t){return e=>e}var vd={};hi(vd,{$:()=>Cw,bgBlack:()=>Qx,bgBlue:()=>tC,bgCyan:()=>nC,bgGreen:()=>Xx,bgMagenta:()=>rC,bgRed:()=>Zx,bgWhite:()=>iC,bgYellow:()=>eC,black:()=>zx,blue:()=>ao,bold:()=>er,cyan:()=>ui,dim:()=>So,gray:()=>Yd,green:()=>po,grey:()=>Yx,hidden:()=>Hx,inverse:()=>Vx,italic:()=>Fx,magenta:()=>Jx,red:()=>fi,reset:()=>Mx,strikethrough:()=>Wx,underline:()=>Kt,white:()=>Gx,yellow:()=>Eo});var Sd,Aw,_w,kw,xw=!0;typeof process<"u"&&({FORCE_COLOR:Sd,NODE_DISABLE_COLORS:Aw,NO_COLOR:_w,TERM:kw}=process.env||{},xw=process.stdout&&process.stdout.isTTY);var Cw={enabled:!Aw&&_w==null&&kw!=="dumb"&&(Sd!=null&&Sd!=="0"||xw)};function ke(t,e){let r=new RegExp(`\\x1b\\[${e}m`,"g"),n=`\x1B[${t}m`,i=`\x1B[${e}m`;return function(s){return!Cw.enabled||s==null?s:n+(~(""+s).indexOf(i)?s.replace(r,i+n):s)+i}}var Mx=ke(0,0),er=ke(1,22),So=ke(2,22),Fx=ke(3,23),Kt=ke(4,24),Vx=ke(7,27),Hx=ke(8,28),Wx=ke(9,29),zx=ke(30,39),fi=ke(31,39),po=ke(32,39),Eo=ke(33,39),ao=ke(34,39),Jx=ke(35,39),ui=ke(36,39),Gx=ke(37,39),Yd=ke(90,39),Yx=ke(90,39),Qx=ke(40,49),Zx=ke(41,49),Xx=ke(42,49),eC=ke(43,49),tC=ke(44,49),rC=ke(45,49),nC=ke(46,49),iC=ke(47,49),sC=100,Sb=["green","yellow","blue","magenta","cyan","red"],lo=[],Eb=Date.now(),oC=0,Ed=typeof process<"u"?process.env:{};globalThis.DEBUG??=Ed.DEBUG??"";globalThis.DEBUG_COLORS??=Ed.DEBUG_COLORS?Ed.DEBUG_COLORS==="true":!0;var co={enable(t){typeof t=="string"&&(globalThis.DEBUG=t)},disable(){let t=globalThis.DEBUG;return globalThis.DEBUG="",t},enabled(t){let e=globalThis.DEBUG.split(",").map(i=>i.replace(/[.+?^${}()|[\]\\]/g,"\\$&")),r=e.some(i=>i===""||i[0]==="-"?!1:t.match(RegExp(i.split("*").join(".*")+"$"))),n=e.some(i=>i===""||i[0]!=="-"?!1:t.match(RegExp(i.slice(1).split("*").join(".*")+"$")));return r&&!n},log:(...t)=>{let[e,r,...n]=t;(console.warn??console.log)(`${e} ${r}`,...n)},formatters:{}};function aC(t){let e={color:Sb[oC++%Sb.length],enabled:co.enabled(t),namespace:t,log:co.log,extend:()=>{}},r=(...n)=>{let{enabled:i,namespace:s,color:o,log:a}=e;if(n.length!==0&&lo.push([s,...n]),lo.length>sC&&lo.shift(),co.enabled(s)||i){let c=n.map(d=>typeof d=="string"?d:lC(d)),f=`+${Date.now()-Eb}ms`;Eb=Date.now(),globalThis.DEBUG_COLORS?a(vd[o](er(s)),...c,vd[o](f)):a(s,...c,f)}};return new Proxy(r,{get:(n,i)=>e[i],set:(n,i,s)=>e[i]=s})}var st=new Proxy(aC,{get:(t,e)=>co[e],set:(t,e,r)=>co[e]=r});function lC(t,e=2){let r=new Set;return JSON.stringify(t,(n,i)=>{if(typeof i=="object"&&i!==null){if(r.has(i))return"[Circular *]";r.add(i)}else if(typeof i=="bigint")return i.toString();return i},e)}function cC(t=7500){let e=lo.map(([r,...n])=>`${r} ${n.map(i=>typeof i=="string"?i:JSON.stringify(i)).join(" ")}`).join(`
`);return e.length<t?e:e.slice(-t)}function uC(){lo.length=0}var Qd=st,fC=ye($("node:fs"));function dC(){let t=process.env.PRISMA_QUERY_ENGINE_LIBRARY;if(!(t&&fC.default.existsSync(t))&&process.arch==="ia32")throw new Error('The default query engine type (Node-API, "library") is currently not supported for 32bit Node. Please set `engineType = "binary"` in the "generator" block of your "schema.prisma" file (or use the environment variables "PRISMA_CLIENT_ENGINE_TYPE=binary" and/or "PRISMA_CLI_QUERY_ENGINE_TYPE=binary".)')}var hC=["darwin","darwin-arm64","debian-openssl-1.0.x","debian-openssl-1.1.x","debian-openssl-3.0.x","rhel-openssl-1.0.x","rhel-openssl-1.1.x","rhel-openssl-3.0.x","linux-arm64-openssl-1.1.x","linux-arm64-openssl-1.0.x","linux-arm64-openssl-3.0.x","linux-arm-openssl-1.1.x","linux-arm-openssl-1.0.x","linux-arm-openssl-3.0.x","linux-musl","linux-musl-openssl-3.0.x","linux-musl-arm64-openssl-1.1.x","linux-musl-arm64-openssl-3.0.x","linux-nixos","linux-static-x64","linux-static-arm64","windows","freebsd11","freebsd12","freebsd13","freebsd14","freebsd15","openbsd","netbsd","arm"],Ql="libquery_engine";function pC(t,e){let r=e==="url";return t.includes("windows")?r?"query_engine.dll.node":`query_engine-${t}.dll.node`:t.includes("darwin")?r?`${Ql}.dylib.node`:`${Ql}-${t}.dylib.node`:r?`${Ql}.so.node`:`${Ql}-${t}.so.node`}var mC=ye($("node:child_process")),Pw=ye($("node:fs/promises")),Ad=ye($("node:os")),jr=Symbol.for("@ts-pattern/matcher"),gC=Symbol.for("@ts-pattern/isVariadic"),dc="@ts-pattern/anonymous-select-key",_d=t=>!!(t&&typeof t=="object"),ic=t=>t&&!!t[jr],gr=(t,e,r)=>{if(ic(t)){let n=t[jr](),{matched:i,selections:s}=n.match(e);return i&&s&&Object.keys(s).forEach(o=>r(o,s[o])),i}if(_d(t)){if(!_d(e))return!1;if(Array.isArray(t)){if(!Array.isArray(e))return!1;let n=[],i=[],s=[];for(let o of t.keys()){let a=t[o];ic(a)&&a[gC]?s.push(a):s.length?i.push(a):n.push(a)}if(s.length){if(s.length>1)throw new Error("Pattern error: Using `...P.array(...)` several times in a single pattern is not allowed.");if(e.length<n.length+i.length)return!1;let o=e.slice(0,n.length),a=i.length===0?[]:e.slice(-i.length),c=e.slice(n.length,i.length===0?1/0:-i.length);return n.every((f,d)=>gr(f,o[d],r))&&i.every((f,d)=>gr(f,a[d],r))&&(s.length===0||gr(s[0],c,r))}return t.length===e.length&&t.every((o,a)=>gr(o,e[a],r))}return Reflect.ownKeys(t).every(n=>{let i=t[n];return(n in e||ic(s=i)&&s[jr]().matcherType==="optional")&&gr(i,e[n],r);var s})}return Object.is(e,t)},vn=t=>{var e,r,n;return _d(t)?ic(t)?(e=(r=(n=t[jr]()).getSelectionKeys)==null?void 0:r.call(n))!=null?e:[]:Array.isArray(t)?mo(t,vn):mo(Object.values(t),vn):[]},mo=(t,e)=>t.reduce((r,n)=>r.concat(e(n)),[]);function qt(t){return Object.assign(t,{optional:()=>yC(t),and:e=>Re(t,e),or:e=>bC(t,e),select:e=>e===void 0?Ab(t):Ab(e,t)})}function yC(t){return qt({[jr]:()=>({match:e=>{let r={},n=(i,s)=>{r[i]=s};return e===void 0?(vn(t).forEach(i=>n(i,void 0)),{matched:!0,selections:r}):{matched:gr(t,e,n),selections:r}},getSelectionKeys:()=>vn(t),matcherType:"optional"})})}function Re(...t){return qt({[jr]:()=>({match:e=>{let r={},n=(i,s)=>{r[i]=s};return{matched:t.every(i=>gr(i,e,n)),selections:r}},getSelectionKeys:()=>mo(t,vn),matcherType:"and"})})}function bC(...t){return qt({[jr]:()=>({match:e=>{let r={},n=(i,s)=>{r[i]=s};return mo(t,vn).forEach(i=>n(i,void 0)),{matched:t.some(i=>gr(i,e,n)),selections:r}},getSelectionKeys:()=>mo(t,vn),matcherType:"or"})})}function me(t){return{[jr]:()=>({match:e=>({matched:!!t(e)})})}}function Ab(...t){let e=typeof t[0]=="string"?t[0]:void 0,r=t.length===2?t[1]:typeof t[0]=="string"?void 0:t[0];return qt({[jr]:()=>({match:n=>{let i={[e??dc]:n};return{matched:r===void 0||gr(r,n,(s,o)=>{i[s]=o}),selections:i}},getSelectionKeys:()=>[e??dc].concat(r===void 0?[]:vn(r))})})}function hr(t){return typeof t=="number"}function hn(t){return typeof t=="string"}function pn(t){return typeof t=="bigint"}var U2=qt(me(function(t){return!0})),mn=t=>Object.assign(qt(t),{startsWith:e=>{return mn(Re(t,(r=e,me(n=>hn(n)&&n.startsWith(r)))));var r},endsWith:e=>{return mn(Re(t,(r=e,me(n=>hn(n)&&n.endsWith(r)))));var r},minLength:e=>mn(Re(t,(r=>me(n=>hn(n)&&n.length>=r))(e))),length:e=>mn(Re(t,(r=>me(n=>hn(n)&&n.length===r))(e))),maxLength:e=>mn(Re(t,(r=>me(n=>hn(n)&&n.length<=r))(e))),includes:e=>{return mn(Re(t,(r=e,me(n=>hn(n)&&n.includes(r)))));var r},regex:e=>{return mn(Re(t,(r=e,me(n=>hn(n)&&!!n.match(r)))));var r}}),$2=mn(me(hn)),pr=t=>Object.assign(qt(t),{between:(e,r)=>pr(Re(t,((n,i)=>me(s=>hr(s)&&n<=s&&i>=s))(e,r))),lt:e=>pr(Re(t,(r=>me(n=>hr(n)&&n<r))(e))),gt:e=>pr(Re(t,(r=>me(n=>hr(n)&&n>r))(e))),lte:e=>pr(Re(t,(r=>me(n=>hr(n)&&n<=r))(e))),gte:e=>pr(Re(t,(r=>me(n=>hr(n)&&n>=r))(e))),int:()=>pr(Re(t,me(e=>hr(e)&&Number.isInteger(e)))),finite:()=>pr(Re(t,me(e=>hr(e)&&Number.isFinite(e)))),positive:()=>pr(Re(t,me(e=>hr(e)&&e>0))),negative:()=>pr(Re(t,me(e=>hr(e)&&e<0)))}),D2=pr(me(hr)),gn=t=>Object.assign(qt(t),{between:(e,r)=>gn(Re(t,((n,i)=>me(s=>pn(s)&&n<=s&&i>=s))(e,r))),lt:e=>gn(Re(t,(r=>me(n=>pn(n)&&n<r))(e))),gt:e=>gn(Re(t,(r=>me(n=>pn(n)&&n>r))(e))),lte:e=>gn(Re(t,(r=>me(n=>pn(n)&&n<=r))(e))),gte:e=>gn(Re(t,(r=>me(n=>pn(n)&&n>=r))(e))),positive:()=>gn(Re(t,me(e=>pn(e)&&e>0))),negative:()=>gn(Re(t,me(e=>pn(e)&&e<0)))}),K2=gn(me(pn)),q2=qt(me(function(t){return typeof t=="boolean"})),L2=qt(me(function(t){return typeof t=="symbol"})),j2=qt(me(function(t){return t==null})),M2=qt(me(function(t){return t!=null})),wC=class extends Error{constructor(t){let e;try{e=JSON.stringify(t)}catch{e=t}super(`Pattern matching error: no pattern matches value ${e}`),this.input=void 0,this.input=t}},kd={matched:!1,value:void 0};function Sc(t){return new vC(t,kd)}var vC=class xd{constructor(e,r){this.input=void 0,this.state=void 0,this.input=e,this.state=r}with(...e){if(this.state.matched)return this;let r=e[e.length-1],n=[e[0]],i;e.length===3&&typeof e[1]=="function"?i=e[1]:e.length>2&&n.push(...e.slice(1,e.length-1));let s=!1,o={},a=(f,d)=>{s=!0,o[f]=d},c=!n.some(f=>gr(f,this.input,a))||i&&!i(this.input)?kd:{matched:!0,value:r(s?dc in o?o[dc]:o:this.input,this.input)};return new xd(this.input,c)}when(e,r){if(this.state.matched)return this;let n=!!e(this.input);return new xd(this.input,n?{matched:!0,value:r(this.input,this.input)}:kd)}otherwise(e){return this.state.matched?this.state.value:e(this.input)}exhaustive(){if(this.state.matched)return this.state.value;throw new wC(this.input)}run(){return this.exhaustive()}returnType(){return this}},SC=$("node:util"),EC={warn:Eo("prisma:warn")},AC={warn:()=>!process.env.PRISMA_DISABLE_WARNINGS};function ud(t,...e){AC.warn()&&console.warn(`${EC.warn} ${t}`,...e)}var _C=(0,SC.promisify)(mC.default.exec),it=Qd("prisma:get-platform"),kC=["1.0.x","1.1.x","3.0.x"];async function xC(){let t=Ad.default.platform(),e=process.arch;if(t==="freebsd"){let o=await hc("freebsd-version");if(o&&o.trim().length>0){let a=/^(\d+)\.?/.exec(o);if(a)return{platform:"freebsd",targetDistro:`freebsd${a[1]}`,arch:e}}}if(t!=="linux")return{platform:t,arch:e};let r=await PC(),n=await DC(),i=TC({arch:e,archFromUname:n,familyDistro:r.familyDistro}),{libssl:s}=await BC(i);return{platform:"linux",libssl:s,arch:e,archFromUname:n,...r}}function CC(t){let e=/^ID="?([^"\n]*)"?$/im,r=/^ID_LIKE="?([^"\n]*)"?$/im,n=e.exec(t),i=n&&n[1]&&n[1].toLowerCase()||"",s=r.exec(t),o=s&&s[1]&&s[1].toLowerCase()||"",a=Sc({id:i,idLike:o}).with({id:"alpine"},({id:c})=>({targetDistro:"musl",familyDistro:c,originalDistro:c})).with({id:"raspbian"},({id:c})=>({targetDistro:"arm",familyDistro:"debian",originalDistro:c})).with({id:"nixos"},({id:c})=>({targetDistro:"nixos",originalDistro:c,familyDistro:"nixos"})).with({id:"debian"},{id:"ubuntu"},({id:c})=>({targetDistro:"debian",familyDistro:"debian",originalDistro:c})).with({id:"rhel"},{id:"centos"},{id:"fedora"},({id:c})=>({targetDistro:"rhel",familyDistro:"rhel",originalDistro:c})).when(({idLike:c})=>c.includes("debian")||c.includes("ubuntu"),({id:c})=>({targetDistro:"debian",familyDistro:"debian",originalDistro:c})).when(({idLike:c})=>i==="arch"||c.includes("arch"),({id:c})=>({targetDistro:"debian",familyDistro:"arch",originalDistro:c})).when(({idLike:c})=>c.includes("centos")||c.includes("fedora")||c.includes("rhel")||c.includes("suse"),({id:c})=>({targetDistro:"rhel",familyDistro:"rhel",originalDistro:c})).otherwise(({id:c})=>({targetDistro:void 0,familyDistro:void 0,originalDistro:c}));return it(`Found distro info:
${JSON.stringify(a,null,2)}`),a}async function PC(){let t="/etc/os-release";try{let e=await Pw.default.readFile(t,{encoding:"utf-8"});return CC(e)}catch{return{targetDistro:void 0,familyDistro:void 0,originalDistro:void 0}}}function RC(t){let e=/^OpenSSL\s(\d+\.\d+)\.\d+/.exec(t);if(e){let r=`${e[1]}.x`;return Rw(r)}}function _b(t){let e=/libssl\.so\.(\d)(\.\d)?/.exec(t);if(e){let r=`${e[1]}${e[2]??".0"}.x`;return Rw(r)}}function Rw(t){let e=(()=>{if(Bw(t))return t;let r=t.split(".");return r[1]="0",r.join(".")})();if(kC.includes(e))return e}function TC(t){return Sc(t).with({familyDistro:"musl"},()=>(it('Trying platform-specific paths for "alpine"'),["/lib","/usr/lib"])).with({familyDistro:"debian"},({archFromUname:e})=>(it('Trying platform-specific paths for "debian" (and "ubuntu")'),[`/usr/lib/${e}-linux-gnu`,`/lib/${e}-linux-gnu`])).with({familyDistro:"rhel"},()=>(it('Trying platform-specific paths for "rhel"'),["/lib64","/usr/lib64"])).otherwise(({familyDistro:e,arch:r,archFromUname:n})=>(it(`Don't know any platform-specific paths for "${e}" on ${r} (${n})`),[]))}async function BC(t){let e='grep -v "libssl.so.0"',r=await kb(t);if(r){it(`Found libssl.so file using platform-specific paths: ${r}`);let s=_b(r);if(it(`The parsed libssl version is: ${s}`),s)return{libssl:s,strategy:"libssl-specific-path"}}it('Falling back to "ldconfig" and other generic paths');let n=await hc(`ldconfig -p | sed "s/.*=>s*//" | sed "s|.*/||" | grep libssl | sort | ${e}`);if(n||(n=await kb(["/lib64","/usr/lib64","/lib","/usr/lib"])),n){it(`Found libssl.so file using "ldconfig" or other generic paths: ${n}`);let s=_b(n);if(it(`The parsed libssl version is: ${s}`),s)return{libssl:s,strategy:"ldconfig"}}let i=await hc("openssl version -v");if(i){it(`Found openssl binary with version: ${i}`);let s=RC(i);if(it(`The parsed openssl version is: ${s}`),s)return{libssl:s,strategy:"openssl-binary"}}return it("Couldn't find any version of libssl or OpenSSL in the system"),{}}async function kb(t){for(let e of t){let r=await OC(e);if(r)return r}}async function OC(t){try{return(await Pw.default.readdir(t)).find(e=>e.startsWith("libssl.so.")&&!e.startsWith("libssl.so.0"))}catch(e){if(e.code==="ENOENT")return;throw e}}async function Zd(){let{binaryTarget:t}=await Tw();return t}function IC(t){return t.binaryTarget!==void 0}async function NC(){let{memoized:t,...e}=await Tw();return e}var Zl={};async function Tw(){if(IC(Zl))return Promise.resolve({...Zl,memoized:!0});let t=await xC(),e=UC(t);return Zl={...t,binaryTarget:e},{...Zl,memoized:!1}}function UC(t){let{platform:e,arch:r,archFromUname:n,libssl:i,targetDistro:s,familyDistro:o,originalDistro:a}=t;e==="linux"&&!["x64","arm64"].includes(r)&&ud(`Prisma only officially supports Linux on amd64 (x86_64) and arm64 (aarch64) system architectures (detected "${r}" instead). If you are using your own custom Prisma engines, you can ignore this warning, as long as you've compiled the engines for your system architecture "${n}".`);let c="1.1.x";if(e==="linux"&&i===void 0){let d=Sc({familyDistro:o}).with({familyDistro:"debian"},()=>"Please manually install OpenSSL via `apt-get update -y && apt-get install -y openssl` and try installing Prisma again. If you're running Prisma on Docker, add this command to your Dockerfile, or switch to an image that already has OpenSSL installed.").otherwise(()=>"Please manually install OpenSSL and try installing Prisma again.");ud(`Prisma failed to detect the libssl/openssl version to use, and may not work as expected. Defaulting to "openssl-${c}".
${d}`)}let f="debian";if(e==="linux"&&s===void 0&&it(`Distro is "${a}". Falling back to Prisma engines built for "${f}".`),e==="darwin"&&r==="arm64")return"darwin-arm64";if(e==="darwin")return"darwin";if(e==="win32")return"windows";if(e==="freebsd")return s;if(e==="openbsd")return"openbsd";if(e==="netbsd")return"netbsd";if(e==="linux"&&s==="nixos")return"linux-nixos";if(e==="linux"&&r==="arm64")return`${s==="musl"?"linux-musl-arm64":"linux-arm64"}-openssl-${i||c}`;if(e==="linux"&&r==="arm")return`linux-arm-openssl-${i||c}`;if(e==="linux"&&s==="musl"){let d="linux-musl";return!i||Bw(i)?d:`${d}-openssl-${i}`}return e==="linux"&&s&&i?`${s}-openssl-${i}`:(e!=="linux"&&ud(`Prisma detected unknown OS "${e}" and may not work as expected. Defaulting to "linux".`),i?`${f}-openssl-${i}`:s?`${s}-openssl-${c}`:`${f}-openssl-${c}`)}async function $C(t){try{return await t()}catch{return}}function hc(t){return $C(async()=>{let e=await _C(t);return it(`Command "${t}" successfully returned "${e.stdout}"`),e.stdout})}async function DC(){return typeof Ad.default.machine=="function"?Ad.default.machine():(await hc("uname -m"))?.trim()}function Bw(t){return t.startsWith("1.")}var Ow={};hi(Ow,{beep:()=>cP,clearScreen:()=>sP,clearTerminal:()=>oP,cursorBackward:()=>VC,cursorDown:()=>MC,cursorForward:()=>FC,cursorGetPosition:()=>zC,cursorHide:()=>YC,cursorLeft:()=>Uw,cursorMove:()=>jC,cursorNextLine:()=>JC,cursorPrevLine:()=>GC,cursorRestorePosition:()=>WC,cursorSavePosition:()=>HC,cursorShow:()=>QC,cursorTo:()=>LC,cursorUp:()=>Nw,enterAlternativeScreen:()=>aP,eraseDown:()=>tP,eraseEndLine:()=>XC,eraseLine:()=>$w,eraseLines:()=>ZC,eraseScreen:()=>Cd,eraseStartLine:()=>eP,eraseUp:()=>rP,exitAlternativeScreen:()=>lP,iTerm:()=>dP,image:()=>fP,link:()=>uP,scrollDown:()=>iP,scrollUp:()=>nP});var Xd=ye($("node:process"),1),eh=globalThis.window?.document!==void 0,F2=globalThis.process?.versions?.node!==void 0,V2=globalThis.process?.versions?.bun!==void 0,H2=globalThis.Deno?.version?.deno!==void 0,W2=globalThis.process?.versions?.electron!==void 0,z2=globalThis.navigator?.userAgent?.includes("jsdom")===!0,J2=typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope,G2=typeof DedicatedWorkerGlobalScope<"u"&&globalThis instanceof DedicatedWorkerGlobalScope,Y2=typeof SharedWorkerGlobalScope<"u"&&globalThis instanceof SharedWorkerGlobalScope,Q2=typeof ServiceWorkerGlobalScope<"u"&&globalThis instanceof ServiceWorkerGlobalScope,Ao=globalThis.navigator?.userAgentData?.platform,Z2=Ao==="macOS"||globalThis.navigator?.platform==="MacIntel"||globalThis.navigator?.userAgent?.includes(" Mac ")===!0||globalThis.process?.platform==="darwin",X2=Ao==="Windows"||globalThis.navigator?.platform==="Win32"||globalThis.process?.platform==="win32",eK=Ao==="Linux"||globalThis.navigator?.platform?.startsWith("Linux")===!0||globalThis.navigator?.userAgent?.includes(" Linux ")===!0||globalThis.process?.platform==="linux",tK=Ao==="iOS"||globalThis.navigator?.platform==="MacIntel"&&globalThis.navigator?.maxTouchPoints>1||/iPad|iPhone|iPod/.test(globalThis.navigator?.platform),rK=Ao==="Android"||globalThis.navigator?.platform==="Android"||globalThis.navigator?.userAgent?.includes(" Android ")===!0||globalThis.process?.platform==="android",ge="\x1B[",go="\x1B]",Ji="\x07",so=";",Iw=!eh&&Xd.default.env.TERM_PROGRAM==="Apple_Terminal",KC=!eh&&Xd.default.platform==="win32",qC=eh?()=>{throw new Error("`process.cwd()` only works in Node.js, not the browser.")}:Xd.default.cwd,LC=(t,e)=>{if(typeof t!="number")throw new TypeError("The `x` argument is required");return typeof e!="number"?ge+(t+1)+"G":ge+(e+1)+so+(t+1)+"H"},jC=(t,e)=>{if(typeof t!="number")throw new TypeError("The `x` argument is required");let r="";return t<0?r+=ge+-t+"D":t>0&&(r+=ge+t+"C"),e<0?r+=ge+-e+"A":e>0&&(r+=ge+e+"B"),r},Nw=(t=1)=>ge+t+"A",MC=(t=1)=>ge+t+"B",FC=(t=1)=>ge+t+"C",VC=(t=1)=>ge+t+"D",Uw=ge+"G",HC=Iw?"\x1B7":ge+"s",WC=Iw?"\x1B8":ge+"u",zC=ge+"6n",JC=ge+"E",GC=ge+"F",YC=ge+"?25l",QC=ge+"?25h",ZC=t=>{let e="";for(let r=0;r<t;r++)e+=$w+(r<t-1?Nw():"");return t&&(e+=Uw),e},XC=ge+"K",eP=ge+"1K",$w=ge+"2K",tP=ge+"J",rP=ge+"1J",Cd=ge+"2J",nP=ge+"S",iP=ge+"T",sP="\x1Bc",oP=KC?`${Cd}${ge}0f`:`${Cd}${ge}3J${ge}H`,aP=ge+"?1049h",lP=ge+"?1049l",cP=Ji,uP=(t,e)=>[go,"8",so,so,e,Ji,t,go,"8",so,so,Ji].join(""),fP=(t,e={})=>{let r=`${go}1337;File=inline=1`;return e.width&&(r+=`;width=${e.width}`),e.height&&(r+=`;height=${e.height}`),e.preserveAspectRatio===!1&&(r+=";preserveAspectRatio=0"),r+":"+Buffer.from(t).toString("base64")+Ji},dP={setCwd:(t=qC())=>`${go}50;CurrentDir=${t}${Ji}`,annotation(t,e={}){let r=`${go}1337;`,n=e.x!==void 0,i=e.y!==void 0;if((n||i)&&!(n&&i&&e.length!==void 0))throw new Error("`x`, `y` and `length` must be defined when `x` or `y` is defined");return t=t.replaceAll("|",""),r+=e.isHidden?"AddHiddenAnnotation=":"AddAnnotation=",e.length>0?r+=(n?[t,e.length,e.x,e.y]:[e.length,t]).join("|"):r+=t,r+Ji}},th=ye(Tx(),1);function yo(t,e,{target:r="stdout",...n}={}){return th.default[r]?Ow.link(t,e):n.fallback===!1?t:typeof n.fallback=="function"?n.fallback(t,e):`${t} (\u200B${e}\u200B)`}yo.isSupported=th.default.stdout;yo.stderr=(t,e,r={})=>yo(t,e,{target:"stderr",...r});yo.stderr.isSupported=th.default.stderr;function hP(t){return yo(t,t,{fallback:Kt})}var pP=Bx(),mP=pP.version;function Pd(t){return gP()||(t?.config.engineType==="library"?"library":t?.config.engineType==="binary"?"binary":t?.config.engineType==="client"?"client":yP(t))}function gP(){let t=process.env.PRISMA_CLIENT_ENGINE_TYPE;return t==="library"?"library":t==="binary"?"binary":t==="client"?"client":void 0}function yP(t){return t?.previewFeatures.includes("queryCompiler")?"client":"library"}var nK=ye(gw()),Pe=ye($("node:path")),iK=ye(gw()),sK=st("prisma:engines");function bP(){return Pe.default.join(__dirname,"../")}Pe.default.join(__dirname,"../query-engine-darwin");Pe.default.join(__dirname,"../query-engine-darwin-arm64");Pe.default.join(__dirname,"../query-engine-debian-openssl-1.0.x");Pe.default.join(__dirname,"../query-engine-debian-openssl-1.1.x");Pe.default.join(__dirname,"../query-engine-debian-openssl-3.0.x");Pe.default.join(__dirname,"../query-engine-linux-static-x64");Pe.default.join(__dirname,"../query-engine-linux-static-arm64");Pe.default.join(__dirname,"../query-engine-rhel-openssl-1.0.x");Pe.default.join(__dirname,"../query-engine-rhel-openssl-1.1.x");Pe.default.join(__dirname,"../query-engine-rhel-openssl-3.0.x");Pe.default.join(__dirname,"../libquery_engine-darwin.dylib.node");Pe.default.join(__dirname,"../libquery_engine-darwin-arm64.dylib.node");Pe.default.join(__dirname,"../libquery_engine-debian-openssl-1.0.x.so.node");Pe.default.join(__dirname,"../libquery_engine-debian-openssl-1.1.x.so.node");Pe.default.join(__dirname,"../libquery_engine-debian-openssl-3.0.x.so.node");Pe.default.join(__dirname,"../libquery_engine-linux-arm64-openssl-1.0.x.so.node");Pe.default.join(__dirname,"../libquery_engine-linux-arm64-openssl-1.1.x.so.node");Pe.default.join(__dirname,"../libquery_engine-linux-arm64-openssl-3.0.x.so.node");Pe.default.join(__dirname,"../libquery_engine-linux-musl.so.node");Pe.default.join(__dirname,"../libquery_engine-linux-musl-openssl-3.0.x.so.node");Pe.default.join(__dirname,"../libquery_engine-rhel-openssl-1.0.x.so.node");Pe.default.join(__dirname,"../libquery_engine-rhel-openssl-1.1.x.so.node");Pe.default.join(__dirname,"../libquery_engine-rhel-openssl-3.0.x.so.node");Pe.default.join(__dirname,"../query_engine-windows.dll.node");var xb=ye($("node:fs")),Cb=Qd("chmodPlusX");function wP(t){if(process.platform==="win32")return;let e=xb.default.statSync(t),r=e.mode|64|8|1;if(e.mode===r){Cb(`Execution permissions of ${t} are fine`);return}let n=r.toString(8).slice(-3);Cb(`Have to call chmodPlusX on ${t}`),xb.default.chmodSync(t,n)}function vP(t){let e=t.e,r=a=>`Prisma cannot find the required \`${a}\` system library in your system`,n=e.message.includes("cannot open shared object file"),i=`Please refer to the documentation about Prisma's system requirements: ${hP("https://pris.ly/d/system-requirements")}`,s=`Unable to require(\`${So(t.id)}\`).`,o=Sc({message:e.message,code:e.code}).with({code:"ENOENT"},()=>"File does not exist.").when(({message:a})=>n&&a.includes("libz"),()=>`${r("libz")}. Please install it and try again.`).when(({message:a})=>n&&a.includes("libgcc_s"),()=>`${r("libgcc_s")}. Please install it and try again.`).when(({message:a})=>n&&a.includes("libssl"),()=>{let a=t.platformInfo.libssl?`openssl-${t.platformInfo.libssl}`:"openssl";return`${r("libssl")}. Please install ${a} and try again.`}).when(({message:a})=>a.includes("GLIBC"),()=>`Prisma has detected an incompatible version of the \`glibc\` C standard library installed in your system. This probably means your system may be too old to run Prisma. ${i}`).when(({message:a})=>t.platformInfo.platform==="linux"&&a.includes("symbol not found"),()=>`The Prisma engines are not compatible with your system ${t.platformInfo.originalDistro} on (${t.platformInfo.archFromUname}) which uses the \`${t.platformInfo.binaryTarget}\` binaryTarget by default. ${i}`).otherwise(()=>`The Prisma engines do not seem to be compatible with your system. ${i}`);return`${s}
${o}

Details: ${e.message}`}var SP=ye(Ox(),1);function EP(t){let e=(0,SP.default)(t);if(e===0)return t;let r=new RegExp(`^[ \\t]{${e}}`,"gm");return t.replace(r,"")}var AP="prisma+postgres",Dw=`${AP}:`;function _P(t){return t?.startsWith(`${Dw}//`)??!1}var kP=ye(yw());function xP(t){return String(new CP(t))}var CP=class{constructor(t){this.config=t}toString(){let{config:t}=this,e=t.provider.fromEnvVar?`env("${t.provider.fromEnvVar}")`:t.provider.value,r=JSON.parse(JSON.stringify({provider:e,binaryTargets:PP(t.binaryTargets)}));return`generator ${t.name} {
${(0,kP.default)(RP(r),2)}
}`}};function PP(t){let e;if(t.length>0){let r=t.find(n=>n.fromEnvVar!==null);r?e=`env("${r.fromEnvVar}")`:e=t.map(n=>n.native?"native":n.value)}else e=void 0;return e}function RP(t){let e=Object.keys(t).reduce((r,n)=>Math.max(r,n.length),0);return Object.entries(t).map(([r,n])=>`${r.padEnd(e)} = ${TP(n)}`).join(`
`)}function TP(t){return JSON.parse(JSON.stringify(t,(e,r)=>Array.isArray(r)?`[${r.map(n=>JSON.stringify(n)).join(", ")}]`:JSON.stringify(r)))}var Rd={};hi(Rd,{error:()=>IP,info:()=>OP,log:()=>BP,query:()=>NP,should:()=>Kw,tags:()=>_o,warn:()=>qw});var _o={error:fi("prisma:error"),warn:Eo("prisma:warn"),info:ui("prisma:info"),query:ao("prisma:query")},Kw={warn:()=>!process.env.PRISMA_DISABLE_WARNINGS};function BP(...t){console.log(...t)}function qw(t,...e){Kw.warn()&&console.warn(`${_o.warn} ${t}`,...e)}function OP(t,...e){console.info(`${_o.info} ${t}`,...e)}function IP(t,...e){console.error(`${_o.error} ${t}`,...e)}function NP(t,...e){console.log(`${_o.query} ${t}`,...e)}function Pb(t,e){if(!t)throw new Error(`${e}. This should never happen. If you see this error, please, open an issue at https://pris.ly/prisma-prisma-bug-report`)}function Ec(t,e){throw new Error(e)}var Xl=ye($("node:path"));function UP(t){return Xl.default.sep===Xl.default.posix.sep?t:t.split(Xl.default.sep).join(Xl.default.posix.sep)}var Lw=ye(Ux()),Td=ye($("node:fs")),bo=ye($("node:path"));function $P(t){let e=t.ignoreProcessEnv?{}:process.env,r=n=>n.match(/(.?\${(?:[a-zA-Z0-9_]+)?})/g)?.reduce(function(i,s){let o=/(.?)\${([a-zA-Z0-9_]+)?}/g.exec(s);if(!o)return i;let a=o[1],c,f;if(a==="\\")f=o[0],c=f.replace("\\$","$");else{let d=o[2];f=o[0].substring(a.length),c=Object.hasOwnProperty.call(e,d)?e[d]:t.parsed[d]||"",c=r(c)}return i.replace(f,c)},n)??n;for(let n in t.parsed){let i=Object.hasOwnProperty.call(e,n)?e[n]:t.parsed[n];t.parsed[n]=r(i)}for(let n in t.parsed)e[n]=t.parsed[n];return t}var Bd=Qd("prisma:tryLoadEnv");function jw({rootEnvPath:t,schemaEnvPath:e},r={conflictCheck:"none"}){let n=Rb(t);r.conflictCheck!=="none"&&DP(n,e,r.conflictCheck);let i=null;return Mw(n?.path,e)||(i=Rb(e)),!n&&!i&&Bd("No Environment variables loaded"),i?.dotenvResult.error?console.error(fi(er("Schema Env Error: "))+i.dotenvResult.error):{message:[n?.message,i?.message].filter(Boolean).join(`
`),parsed:{...n?.dotenvResult?.parsed,...i?.dotenvResult?.parsed}}}function DP(t,e,r){let n=t?.dotenvResult.parsed,i=!Mw(t?.path,e);if(n&&e&&i&&Td.default.existsSync(e)){let s=Lw.default.parse(Td.default.readFileSync(e)),o=[];for(let a in s)n[a]===s[a]&&o.push(a);if(o.length>0){let a=bo.default.relative(process.cwd(),t.path),c=bo.default.relative(process.cwd(),e);if(r==="error"){let f=`There is a conflict between env var${o.length>1?"s":""} in ${Kt(a)} and ${Kt(c)}
Conflicting env vars:
${o.map(d=>`  ${er(d)}`).join(`
`)}

We suggest to move the contents of ${Kt(c)} to ${Kt(a)} to consolidate your env vars.
`;throw new Error(f)}else if(r==="warn"){let f=`Conflict for env var${o.length>1?"s":""} ${o.map(d=>er(d)).join(", ")} in ${Kt(a)} and ${Kt(c)}
Env vars from ${Kt(c)} overwrite the ones from ${Kt(a)}
      `;console.warn(`${Eo("warn(prisma)")} ${f}`)}}}}function Rb(t){if(KP(t)){Bd(`Environment variables loaded from ${t}`);let e=Lw.default.config({path:t,debug:process.env.DOTENV_CONFIG_DEBUG?!0:void 0});return{dotenvResult:$P(e),message:So(`Environment variables loaded from ${bo.default.relative(process.cwd(),t)}`),path:t}}else Bd(`Environment variables not found at ${t}`);return null}function Mw(t,e){return t&&e&&bo.default.resolve(t)===bo.default.resolve(e)}function KP(t){return!!(t&&Td.default.existsSync(t))}function qP(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function rh(t,e){let r={};for(let n of Object.keys(t))r[n]=e(t[n],n);return r}function LP(t,e){if(t.length===0)return;let r=t[0];for(let n=1;n<t.length;n++)e(r,t[n])<0&&(r=t[n]);return r}function Be(t,e){Object.defineProperty(t,"name",{value:e,configurable:!0})}var Tb=new Set,Fw=(t,e,...r)=>{Tb.has(t)||(Tb.add(t),qw(e,...r))},Ie=class Vw extends Error{clientVersion;errorCode;retryable;constructor(e,r,n){super(e),this.name="PrismaClientInitializationError",this.clientVersion=r,this.errorCode=n,Error.captureStackTrace(Vw)}get[Symbol.toStringTag](){return"PrismaClientInitializationError"}};Be(Ie,"PrismaClientInitializationError");var Sn=class extends Error{code;meta;clientVersion;batchRequestIdx;constructor(t,{code:e,clientVersion:r,meta:n,batchRequestIdx:i}){super(t),this.name="PrismaClientKnownRequestError",this.code=e,this.clientVersion=r,this.meta=n,Object.defineProperty(this,"batchRequestIdx",{value:i,enumerable:!1,writable:!0})}get[Symbol.toStringTag](){return"PrismaClientKnownRequestError"}};Be(Sn,"PrismaClientKnownRequestError");var wn=class extends Error{clientVersion;constructor(t,e){super(t),this.name="PrismaClientRustPanicError",this.clientVersion=e}get[Symbol.toStringTag](){return"PrismaClientRustPanicError"}};Be(wn,"PrismaClientRustPanicError");var Tt=class extends Error{clientVersion;batchRequestIdx;constructor(t,{clientVersion:e,batchRequestIdx:r}){super(t),this.name="PrismaClientUnknownRequestError",this.clientVersion=e,Object.defineProperty(this,"batchRequestIdx",{value:r,writable:!0,enumerable:!1})}get[Symbol.toStringTag](){return"PrismaClientUnknownRequestError"}};Be(Tt,"PrismaClientUnknownRequestError");var qr=class extends Error{name="PrismaClientValidationError";clientVersion;constructor(t,{clientVersion:e}){super(t),this.clientVersion=e}get[Symbol.toStringTag](){return"PrismaClientValidationError"}};Be(qr,"PrismaClientValidationError");var zi=9e15,An=1e9,Od="0123456789abcdef",pc="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",mc="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",Id={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-zi,maxE:zi,crypto:!1},Hw,Lr,Y=!0,Ac="[DecimalError] ",En=Ac+"Invalid argument: ",Ww=Ac+"Precision limit exceeded",zw=Ac+"crypto unavailable",Jw="[object Decimal]",Ze=Math.floor,Me=Math.pow,jP=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,MP=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,FP=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,Gw=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,tr=1e7,W=7,VP=9007199254740991,HP=pc.length-1,Nd=mc.length-1,k={toStringTag:Jw};k.absoluteValue=k.abs=function(){var t=new this.constructor(this);return t.s<0&&(t.s=1),q(t)};k.ceil=function(){return q(new this.constructor(this),this.e+1,2)};k.clampedTo=k.clamp=function(t,e){var r,n=this,i=n.constructor;if(t=new i(t),e=new i(e),!t.s||!e.s)return new i(NaN);if(t.gt(e))throw Error(En+e);return r=n.cmp(t),r<0?t:n.cmp(e)>0?e:new i(n)};k.comparedTo=k.cmp=function(t){var e,r,n,i,s=this,o=s.d,a=(t=new s.constructor(t)).d,c=s.s,f=t.s;if(!o||!a)return!c||!f?NaN:c!==f?c:o===a?0:!o^c<0?1:-1;if(!o[0]||!a[0])return o[0]?c:a[0]?-f:0;if(c!==f)return c;if(s.e!==t.e)return s.e>t.e^c<0?1:-1;for(n=o.length,i=a.length,e=0,r=n<i?n:i;e<r;++e)if(o[e]!==a[e])return o[e]>a[e]^c<0?1:-1;return n===i?0:n>i^c<0?1:-1};k.cosine=k.cos=function(){var t,e,r=this,n=r.constructor;return r.d?r.d[0]?(t=n.precision,e=n.rounding,n.precision=t+Math.max(r.e,r.sd())+W,n.rounding=1,r=WP(n,ev(n,r)),n.precision=t,n.rounding=e,q(Lr==2||Lr==3?r.neg():r,t,e,!0)):new n(1):new n(NaN)};k.cubeRoot=k.cbrt=function(){var t,e,r,n,i,s,o,a,c,f,d=this,h=d.constructor;if(!d.isFinite()||d.isZero())return new h(d);for(Y=!1,s=d.s*Me(d.s*d,1/3),!s||Math.abs(s)==1/0?(r=ze(d.d),t=d.e,(s=(t-r.length+1)%3)&&(r+=s==1||s==-2?"0":"00"),s=Me(r,1/3),t=Ze((t+1)/3)-(t%3==(t<0?-1:2)),s==1/0?r="5e"+t:(r=s.toExponential(),r=r.slice(0,r.indexOf("e")+1)+t),n=new h(r),n.s=d.s):n=new h(s.toString()),o=(t=h.precision)+3;;)if(a=n,c=a.times(a).times(a),f=c.plus(d),n=Se(f.plus(d).times(a),f.plus(c),o+2,1),ze(a.d).slice(0,o)===(r=ze(n.d)).slice(0,o))if(r=r.slice(o-3,o+1),r=="9999"||!i&&r=="4999"){if(!i&&(q(a,t+1,0),a.times(a).times(a).eq(d))){n=a;break}o+=4,i=1}else{(!+r||!+r.slice(1)&&r.charAt(0)=="5")&&(q(n,t+1,1),e=!n.times(n).times(n).eq(d));break}return Y=!0,q(n,t,h.rounding,e)};k.decimalPlaces=k.dp=function(){var t,e=this.d,r=NaN;if(e){if(t=e.length-1,r=(t-Ze(this.e/W))*W,t=e[t],t)for(;t%10==0;t/=10)r--;r<0&&(r=0)}return r};k.dividedBy=k.div=function(t){return Se(this,new this.constructor(t))};k.dividedToIntegerBy=k.divToInt=function(t){var e=this,r=e.constructor;return q(Se(e,new r(t),0,1,1),r.precision,r.rounding)};k.equals=k.eq=function(t){return this.cmp(t)===0};k.floor=function(){return q(new this.constructor(this),this.e+1,3)};k.greaterThan=k.gt=function(t){return this.cmp(t)>0};k.greaterThanOrEqualTo=k.gte=function(t){var e=this.cmp(t);return e==1||e===0};k.hyperbolicCosine=k.cosh=function(){var t,e,r,n,i,s=this,o=s.constructor,a=new o(1);if(!s.isFinite())return new o(s.s?1/0:NaN);if(s.isZero())return a;r=o.precision,n=o.rounding,o.precision=r+Math.max(s.e,s.sd())+4,o.rounding=1,i=s.d.length,i<32?(t=Math.ceil(i/3),e=(1/kc(4,t)).toString()):(t=16,e="2.3283064365386962890625e-10"),s=Gi(o,1,s.times(e),new o(1),!0);for(var c,f=t,d=new o(8);f--;)c=s.times(s),s=a.minus(c.times(d.minus(c.times(d))));return q(s,o.precision=r,o.rounding=n,!0)};k.hyperbolicSine=k.sinh=function(){var t,e,r,n,i=this,s=i.constructor;if(!i.isFinite()||i.isZero())return new s(i);if(e=s.precision,r=s.rounding,s.precision=e+Math.max(i.e,i.sd())+4,s.rounding=1,n=i.d.length,n<3)i=Gi(s,2,i,i,!0);else{t=1.4*Math.sqrt(n),t=t>16?16:t|0,i=i.times(1/kc(5,t)),i=Gi(s,2,i,i,!0);for(var o,a=new s(5),c=new s(16),f=new s(20);t--;)o=i.times(i),i=i.times(a.plus(o.times(c.times(o).plus(f))))}return s.precision=e,s.rounding=r,q(i,e,r,!0)};k.hyperbolicTangent=k.tanh=function(){var t,e,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+7,n.rounding=1,Se(r.sinh(),r.cosh(),n.precision=t,n.rounding=e)):new n(r.s)};k.inverseCosine=k.acos=function(){var t=this,e=t.constructor,r=t.abs().cmp(1),n=e.precision,i=e.rounding;return r!==-1?r===0?t.isNeg()?yr(e,n,i):new e(0):new e(NaN):t.isZero()?yr(e,n+4,i).times(.5):(e.precision=n+6,e.rounding=1,t=new e(1).minus(t).div(t.plus(1)).sqrt().atan(),e.precision=n,e.rounding=i,t.times(2))};k.inverseHyperbolicCosine=k.acosh=function(){var t,e,r=this,n=r.constructor;return r.lte(1)?new n(r.eq(1)?0:NaN):r.isFinite()?(t=n.precision,e=n.rounding,n.precision=t+Math.max(Math.abs(r.e),r.sd())+4,n.rounding=1,Y=!1,r=r.times(r).minus(1).sqrt().plus(r),Y=!0,n.precision=t,n.rounding=e,r.ln()):new n(r)};k.inverseHyperbolicSine=k.asinh=function(){var t,e,r=this,n=r.constructor;return!r.isFinite()||r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+2*Math.max(Math.abs(r.e),r.sd())+6,n.rounding=1,Y=!1,r=r.times(r).plus(1).sqrt().plus(r),Y=!0,n.precision=t,n.rounding=e,r.ln())};k.inverseHyperbolicTangent=k.atanh=function(){var t,e,r,n,i=this,s=i.constructor;return i.isFinite()?i.e>=0?new s(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(t=s.precision,e=s.rounding,n=i.sd(),Math.max(n,t)<2*-i.e-1?q(new s(i),t,e,!0):(s.precision=r=n-i.e,i=Se(i.plus(1),new s(1).minus(i),r+t,1),s.precision=t+4,s.rounding=1,i=i.ln(),s.precision=t,s.rounding=e,i.times(.5))):new s(NaN)};k.inverseSine=k.asin=function(){var t,e,r,n,i=this,s=i.constructor;return i.isZero()?new s(i):(e=i.abs().cmp(1),r=s.precision,n=s.rounding,e!==-1?e===0?(t=yr(s,r+4,n).times(.5),t.s=i.s,t):new s(NaN):(s.precision=r+6,s.rounding=1,i=i.div(new s(1).minus(i.times(i)).sqrt().plus(1)).atan(),s.precision=r,s.rounding=n,i.times(2)))};k.inverseTangent=k.atan=function(){var t,e,r,n,i,s,o,a,c,f=this,d=f.constructor,h=d.precision,m=d.rounding;if(f.isFinite()){if(f.isZero())return new d(f);if(f.abs().eq(1)&&h+4<=Nd)return o=yr(d,h+4,m).times(.25),o.s=f.s,o}else{if(!f.s)return new d(NaN);if(h+4<=Nd)return o=yr(d,h+4,m).times(.5),o.s=f.s,o}for(d.precision=a=h+10,d.rounding=1,r=Math.min(28,a/W+2|0),t=r;t;--t)f=f.div(f.times(f).plus(1).sqrt().plus(1));for(Y=!1,e=Math.ceil(a/W),n=1,c=f.times(f),o=new d(f),i=f;t!==-1;)if(i=i.times(c),s=o.minus(i.div(n+=2)),i=i.times(c),o=s.plus(i.div(n+=2)),o.d[e]!==void 0)for(t=e;o.d[t]===s.d[t]&&t--;);return r&&(o=o.times(2<<r-1)),Y=!0,q(o,d.precision=h,d.rounding=m,!0)};k.isFinite=function(){return!!this.d};k.isInteger=k.isInt=function(){return!!this.d&&Ze(this.e/W)>this.d.length-2};k.isNaN=function(){return!this.s};k.isNegative=k.isNeg=function(){return this.s<0};k.isPositive=k.isPos=function(){return this.s>0};k.isZero=function(){return!!this.d&&this.d[0]===0};k.lessThan=k.lt=function(t){return this.cmp(t)<0};k.lessThanOrEqualTo=k.lte=function(t){return this.cmp(t)<1};k.logarithm=k.log=function(t){var e,r,n,i,s,o,a,c,f=this,d=f.constructor,h=d.precision,m=d.rounding,b=5;if(t==null)t=new d(10),e=!0;else{if(t=new d(t),r=t.d,t.s<0||!r||!r[0]||t.eq(1))return new d(NaN);e=t.eq(10)}if(r=f.d,f.s<0||!r||!r[0]||f.eq(1))return new d(r&&!r[0]?-1/0:f.s!=1?NaN:r?0:1/0);if(e)if(r.length>1)s=!0;else{for(i=r[0];i%10===0;)i/=10;s=i!==1}if(Y=!1,a=h+b,o=bn(f,a),n=e?gc(d,a+10):bn(t,a),c=Se(o,n,a,1),wo(c.d,i=h,m))do if(a+=10,o=bn(f,a),n=e?gc(d,a+10):bn(t,a),c=Se(o,n,a,1),!s){+ze(c.d).slice(i+1,i+15)+1==1e14&&(c=q(c,h+1,0));break}while(wo(c.d,i+=10,m));return Y=!0,q(c,h,m)};k.minus=k.sub=function(t){var e,r,n,i,s,o,a,c,f,d,h,m,b=this,y=b.constructor;if(t=new y(t),!b.d||!t.d)return!b.s||!t.s?t=new y(NaN):b.d?t.s=-t.s:t=new y(t.d||b.s!==t.s?b:NaN),t;if(b.s!=t.s)return t.s=-t.s,b.plus(t);if(f=b.d,m=t.d,a=y.precision,c=y.rounding,!f[0]||!m[0]){if(m[0])t.s=-t.s;else if(f[0])t=new y(b);else return new y(c===3?-0:0);return Y?q(t,a,c):t}if(r=Ze(t.e/W),d=Ze(b.e/W),f=f.slice(),s=d-r,s){for(h=s<0,h?(e=f,s=-s,o=m.length):(e=m,r=d,o=f.length),n=Math.max(Math.ceil(a/W),o)+2,s>n&&(s=n,e.length=1),e.reverse(),n=s;n--;)e.push(0);e.reverse()}else{for(n=f.length,o=m.length,h=n<o,h&&(o=n),n=0;n<o;n++)if(f[n]!=m[n]){h=f[n]<m[n];break}s=0}for(h&&(e=f,f=m,m=e,t.s=-t.s),o=f.length,n=m.length-o;n>0;--n)f[o++]=0;for(n=m.length;n>s;){if(f[--n]<m[n]){for(i=n;i&&f[--i]===0;)f[i]=tr-1;--f[i],f[n]+=tr}f[n]-=m[n]}for(;f[--o]===0;)f.pop();for(;f[0]===0;f.shift())--r;return f[0]?(t.d=f,t.e=_c(f,r),Y?q(t,a,c):t):new y(c===3?-0:0)};k.modulo=k.mod=function(t){var e,r=this,n=r.constructor;return t=new n(t),!r.d||!t.s||t.d&&!t.d[0]?new n(NaN):!t.d||r.d&&!r.d[0]?q(new n(r),n.precision,n.rounding):(Y=!1,n.modulo==9?(e=Se(r,t.abs(),0,3,1),e.s*=t.s):e=Se(r,t,0,n.modulo,1),e=e.times(t),Y=!0,r.minus(e))};k.naturalExponential=k.exp=function(){return Ud(this)};k.naturalLogarithm=k.ln=function(){return bn(this)};k.negated=k.neg=function(){var t=new this.constructor(this);return t.s=-t.s,q(t)};k.plus=k.add=function(t){var e,r,n,i,s,o,a,c,f,d,h=this,m=h.constructor;if(t=new m(t),!h.d||!t.d)return!h.s||!t.s?t=new m(NaN):h.d||(t=new m(t.d||h.s===t.s?h:NaN)),t;if(h.s!=t.s)return t.s=-t.s,h.minus(t);if(f=h.d,d=t.d,a=m.precision,c=m.rounding,!f[0]||!d[0])return d[0]||(t=new m(h)),Y?q(t,a,c):t;if(s=Ze(h.e/W),n=Ze(t.e/W),f=f.slice(),i=s-n,i){for(i<0?(r=f,i=-i,o=d.length):(r=d,n=s,o=f.length),s=Math.ceil(a/W),o=s>o?s+1:o+1,i>o&&(i=o,r.length=1),r.reverse();i--;)r.push(0);r.reverse()}for(o=f.length,i=d.length,o-i<0&&(i=o,r=d,d=f,f=r),e=0;i;)e=(f[--i]=f[i]+d[i]+e)/tr|0,f[i]%=tr;for(e&&(f.unshift(e),++n),o=f.length;f[--o]==0;)f.pop();return t.d=f,t.e=_c(f,n),Y?q(t,a,c):t};k.precision=k.sd=function(t){var e,r=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(En+t);return r.d?(e=Yw(r.d),t&&r.e+1>e&&(e=r.e+1)):e=NaN,e};k.round=function(){var t=this,e=t.constructor;return q(new e(t),t.e+1,e.rounding)};k.sine=k.sin=function(){var t,e,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+Math.max(r.e,r.sd())+W,n.rounding=1,r=JP(n,ev(n,r)),n.precision=t,n.rounding=e,q(Lr>2?r.neg():r,t,e,!0)):new n(NaN)};k.squareRoot=k.sqrt=function(){var t,e,r,n,i,s,o=this,a=o.d,c=o.e,f=o.s,d=o.constructor;if(f!==1||!a||!a[0])return new d(!f||f<0&&(!a||a[0])?NaN:a?o:1/0);for(Y=!1,f=Math.sqrt(+o),f==0||f==1/0?(e=ze(a),(e.length+c)%2==0&&(e+="0"),f=Math.sqrt(e),c=Ze((c+1)/2)-(c<0||c%2),f==1/0?e="5e"+c:(e=f.toExponential(),e=e.slice(0,e.indexOf("e")+1)+c),n=new d(e)):n=new d(f.toString()),r=(c=d.precision)+3;;)if(s=n,n=s.plus(Se(o,s,r+2,1)).times(.5),ze(s.d).slice(0,r)===(e=ze(n.d)).slice(0,r))if(e=e.slice(r-3,r+1),e=="9999"||!i&&e=="4999"){if(!i&&(q(s,c+1,0),s.times(s).eq(o))){n=s;break}r+=4,i=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(q(n,c+1,1),t=!n.times(n).eq(o));break}return Y=!0,q(n,c,d.rounding,t)};k.tangent=k.tan=function(){var t,e,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+10,n.rounding=1,r=r.sin(),r.s=1,r=Se(r,new n(1).minus(r.times(r)).sqrt(),t+10,0),n.precision=t,n.rounding=e,q(Lr==2||Lr==4?r.neg():r,t,e,!0)):new n(NaN)};k.times=k.mul=function(t){var e,r,n,i,s,o,a,c,f,d=this,h=d.constructor,m=d.d,b=(t=new h(t)).d;if(t.s*=d.s,!m||!m[0]||!b||!b[0])return new h(!t.s||m&&!m[0]&&!b||b&&!b[0]&&!m?NaN:!m||!b?t.s/0:t.s*0);for(r=Ze(d.e/W)+Ze(t.e/W),c=m.length,f=b.length,c<f&&(s=m,m=b,b=s,o=c,c=f,f=o),s=[],o=c+f,n=o;n--;)s.push(0);for(n=f;--n>=0;){for(e=0,i=c+n;i>n;)a=s[i]+b[n]*m[i-n-1]+e,s[i--]=a%tr|0,e=a/tr|0;s[i]=(s[i]+e)%tr|0}for(;!s[--o];)s.pop();return e?++r:s.shift(),t.d=s,t.e=_c(s,r),Y?q(t,h.precision,h.rounding):t};k.toBinary=function(t,e){return nh(this,2,t,e)};k.toDecimalPlaces=k.toDP=function(t,e){var r=this,n=r.constructor;return r=new n(r),t===void 0?r:(bt(t,0,An),e===void 0?e=n.rounding:bt(e,0,8),q(r,t+r.e+1,e))};k.toExponential=function(t,e){var r,n=this,i=n.constructor;return t===void 0?r=wr(n,!0):(bt(t,0,An),e===void 0?e=i.rounding:bt(e,0,8),n=q(new i(n),t+1,e),r=wr(n,!0,t+1)),n.isNeg()&&!n.isZero()?"-"+r:r};k.toFixed=function(t,e){var r,n,i=this,s=i.constructor;return t===void 0?r=wr(i):(bt(t,0,An),e===void 0?e=s.rounding:bt(e,0,8),n=q(new s(i),t+i.e+1,e),r=wr(n,!1,t+n.e+1)),i.isNeg()&&!i.isZero()?"-"+r:r};k.toFraction=function(t){var e,r,n,i,s,o,a,c,f,d,h,m,b=this,y=b.d,w=b.constructor;if(!y)return new w(b);if(f=r=new w(1),n=c=new w(0),e=new w(n),s=e.e=Yw(y)-b.e-1,o=s%W,e.d[0]=Me(10,o<0?W+o:o),t==null)t=s>0?e:f;else{if(a=new w(t),!a.isInt()||a.lt(f))throw Error(En+a);t=a.gt(e)?s>0?e:f:a}for(Y=!1,a=new w(ze(y)),d=w.precision,w.precision=s=y.length*W*2;h=Se(a,e,0,1,1),i=r.plus(h.times(n)),i.cmp(t)!=1;)r=n,n=i,i=f,f=c.plus(h.times(i)),c=i,i=e,e=a.minus(h.times(i)),a=i;return i=Se(t.minus(r),n,0,1,1),c=c.plus(i.times(f)),r=r.plus(i.times(n)),c.s=f.s=b.s,m=Se(f,n,s,1).minus(b).abs().cmp(Se(c,r,s,1).minus(b).abs())<1?[f,n]:[c,r],w.precision=d,Y=!0,m};k.toHexadecimal=k.toHex=function(t,e){return nh(this,16,t,e)};k.toNearest=function(t,e){var r=this,n=r.constructor;if(r=new n(r),t==null){if(!r.d)return r;t=new n(1),e=n.rounding}else{if(t=new n(t),e===void 0?e=n.rounding:bt(e,0,8),!r.d)return t.s?r:t;if(!t.d)return t.s&&(t.s=r.s),t}return t.d[0]?(Y=!1,r=Se(r,t,0,e,1).times(t),Y=!0,q(r)):(t.s=r.s,r=t),r};k.toNumber=function(){return+this};k.toOctal=function(t,e){return nh(this,8,t,e)};k.toPower=k.pow=function(t){var e,r,n,i,s,o,a=this,c=a.constructor,f=+(t=new c(t));if(!a.d||!t.d||!a.d[0]||!t.d[0])return new c(Me(+a,f));if(a=new c(a),a.eq(1))return a;if(n=c.precision,s=c.rounding,t.eq(1))return q(a,n,s);if(e=Ze(t.e/W),e>=t.d.length-1&&(r=f<0?-f:f)<=VP)return i=Qw(c,a,r,n),t.s<0?new c(1).div(i):q(i,n,s);if(o=a.s,o<0){if(e<t.d.length-1)return new c(NaN);if((t.d[e]&1)==0&&(o=1),a.e==0&&a.d[0]==1&&a.d.length==1)return a.s=o,a}return r=Me(+a,f),e=r==0||!isFinite(r)?Ze(f*(Math.log("0."+ze(a.d))/Math.LN10+a.e+1)):new c(r+"").e,e>c.maxE+1||e<c.minE-1?new c(e>0?o/0:0):(Y=!1,c.rounding=a.s=1,r=Math.min(12,(e+"").length),i=Ud(t.times(bn(a,n+r)),n),i.d&&(i=q(i,n+5,1),wo(i.d,n,s)&&(e=n+10,i=q(Ud(t.times(bn(a,e+r)),e),e+5,1),+ze(i.d).slice(n+1,n+15)+1==1e14&&(i=q(i,n+1,0)))),i.s=o,Y=!0,c.rounding=s,q(i,n,s))};k.toPrecision=function(t,e){var r,n=this,i=n.constructor;return t===void 0?r=wr(n,n.e<=i.toExpNeg||n.e>=i.toExpPos):(bt(t,1,An),e===void 0?e=i.rounding:bt(e,0,8),n=q(new i(n),t,e),r=wr(n,t<=n.e||n.e<=i.toExpNeg,t)),n.isNeg()&&!n.isZero()?"-"+r:r};k.toSignificantDigits=k.toSD=function(t,e){var r=this,n=r.constructor;return t===void 0?(t=n.precision,e=n.rounding):(bt(t,1,An),e===void 0?e=n.rounding:bt(e,0,8)),q(new n(r),t,e)};k.toString=function(){var t=this,e=t.constructor,r=wr(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()&&!t.isZero()?"-"+r:r};k.truncated=k.trunc=function(){return q(new this.constructor(this),this.e+1,1)};k.valueOf=k.toJSON=function(){var t=this,e=t.constructor,r=wr(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()?"-"+r:r};function ze(t){var e,r,n,i=t.length-1,s="",o=t[0];if(i>0){for(s+=o,e=1;e<i;e++)n=t[e]+"",r=W-n.length,r&&(s+=yn(r)),s+=n;o=t[e],n=o+"",r=W-n.length,r&&(s+=yn(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return s+o}function bt(t,e,r){if(t!==~~t||t<e||t>r)throw Error(En+t)}function wo(t,e,r,n){var i,s,o,a;for(s=t[0];s>=10;s/=10)--e;return--e<0?(e+=W,i=0):(i=Math.ceil((e+1)/W),e%=W),s=Me(10,W-e),a=t[i]%s|0,n==null?e<3?(e==0?a=a/100|0:e==1&&(a=a/10|0),o=r<4&&a==99999||r>3&&a==49999||a==5e4||a==0):o=(r<4&&a+1==s||r>3&&a+1==s/2)&&(t[i+1]/s/100|0)==Me(10,e-2)-1||(a==s/2||a==0)&&(t[i+1]/s/100|0)==0:e<4?(e==0?a=a/1e3|0:e==1?a=a/100|0:e==2&&(a=a/10|0),o=(n||r<4)&&a==9999||!n&&r>3&&a==4999):o=((n||r<4)&&a+1==s||!n&&r>3&&a+1==s/2)&&(t[i+1]/s/1e3|0)==Me(10,e-3)-1,o}function sc(t,e,r){for(var n,i=[0],s,o=0,a=t.length;o<a;){for(s=i.length;s--;)i[s]*=e;for(i[0]+=Od.indexOf(t.charAt(o++)),n=0;n<i.length;n++)i[n]>r-1&&(i[n+1]===void 0&&(i[n+1]=0),i[n+1]+=i[n]/r|0,i[n]%=r)}return i.reverse()}function WP(t,e){var r,n,i;if(e.isZero())return e;n=e.d.length,n<32?(r=Math.ceil(n/3),i=(1/kc(4,r)).toString()):(r=16,i="2.3283064365386962890625e-10"),t.precision+=r,e=Gi(t,1,e.times(i),new t(1));for(var s=r;s--;){var o=e.times(e);e=o.times(o).minus(o).times(8).plus(1)}return t.precision-=r,e}var Se=function(){function t(n,i,s){var o,a=0,c=n.length;for(n=n.slice();c--;)o=n[c]*i+a,n[c]=o%s|0,a=o/s|0;return a&&n.unshift(a),n}function e(n,i,s,o){var a,c;if(s!=o)c=s>o?1:-1;else for(a=c=0;a<s;a++)if(n[a]!=i[a]){c=n[a]>i[a]?1:-1;break}return c}function r(n,i,s,o){for(var a=0;s--;)n[s]-=a,a=n[s]<i[s]?1:0,n[s]=a*o+n[s]-i[s];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,s,o,a,c){var f,d,h,m,b,y,w,S,_,T,P,C,L,B,j,A,M,K,G,ae,F=n.constructor,ne=n.s==i.s?1:-1,ee=n.d,Q=i.d;if(!ee||!ee[0]||!Q||!Q[0])return new F(!n.s||!i.s||(ee?Q&&ee[0]==Q[0]:!Q)?NaN:ee&&ee[0]==0||!Q?ne*0:ne/0);for(c?(b=1,d=n.e-i.e):(c=tr,b=W,d=Ze(n.e/b)-Ze(i.e/b)),G=Q.length,M=ee.length,_=new F(ne),T=_.d=[],h=0;Q[h]==(ee[h]||0);h++);if(Q[h]>(ee[h]||0)&&d--,s==null?(B=s=F.precision,o=F.rounding):a?B=s+(n.e-i.e)+1:B=s,B<0)T.push(1),y=!0;else{if(B=B/b+2|0,h=0,G==1){for(m=0,Q=Q[0],B++;(h<M||m)&&B--;h++)j=m*c+(ee[h]||0),T[h]=j/Q|0,m=j%Q|0;y=m||h<M}else{for(m=c/(Q[0]+1)|0,m>1&&(Q=t(Q,m,c),ee=t(ee,m,c),G=Q.length,M=ee.length),A=G,P=ee.slice(0,G),C=P.length;C<G;)P[C++]=0;ae=Q.slice(),ae.unshift(0),K=Q[0],Q[1]>=c/2&&++K;do m=0,f=e(Q,P,G,C),f<0?(L=P[0],G!=C&&(L=L*c+(P[1]||0)),m=L/K|0,m>1?(m>=c&&(m=c-1),w=t(Q,m,c),S=w.length,C=P.length,f=e(w,P,S,C),f==1&&(m--,r(w,G<S?ae:Q,S,c))):(m==0&&(f=m=1),w=Q.slice()),S=w.length,S<C&&w.unshift(0),r(P,w,C,c),f==-1&&(C=P.length,f=e(Q,P,G,C),f<1&&(m++,r(P,G<C?ae:Q,C,c))),C=P.length):f===0&&(m++,P=[0]),T[h++]=m,f&&P[0]?P[C++]=ee[A]||0:(P=[ee[A]],C=1);while((A++<M||P[0]!==void 0)&&B--);y=P[0]!==void 0}T[0]||T.shift()}if(b==1)_.e=d,Hw=y;else{for(h=1,m=T[0];m>=10;m/=10)h++;_.e=h+d*b-1,q(_,a?s+_.e+1:s,o,y)}return _}}();function q(t,e,r,n){var i,s,o,a,c,f,d,h,m,b=t.constructor;e:if(e!=null){if(h=t.d,!h)return t;for(i=1,a=h[0];a>=10;a/=10)i++;if(s=e-i,s<0)s+=W,o=e,d=h[m=0],c=d/Me(10,i-o-1)%10|0;else if(m=Math.ceil((s+1)/W),a=h.length,m>=a)if(n){for(;a++<=m;)h.push(0);d=c=0,i=1,s%=W,o=s-W+1}else break e;else{for(d=a=h[m],i=1;a>=10;a/=10)i++;s%=W,o=s-W+i,c=o<0?0:d/Me(10,i-o-1)%10|0}if(n=n||e<0||h[m+1]!==void 0||(o<0?d:d%Me(10,i-o-1)),f=r<4?(c||n)&&(r==0||r==(t.s<0?3:2)):c>5||c==5&&(r==4||n||r==6&&(s>0?o>0?d/Me(10,i-o):0:h[m-1])%10&1||r==(t.s<0?8:7)),e<1||!h[0])return h.length=0,f?(e-=t.e+1,h[0]=Me(10,(W-e%W)%W),t.e=-e||0):h[0]=t.e=0,t;if(s==0?(h.length=m,a=1,m--):(h.length=m+1,a=Me(10,W-s),h[m]=o>0?(d/Me(10,i-o)%Me(10,o)|0)*a:0),f)for(;;)if(m==0){for(s=1,o=h[0];o>=10;o/=10)s++;for(o=h[0]+=a,a=1;o>=10;o/=10)a++;s!=a&&(t.e++,h[0]==tr&&(h[0]=1));break}else{if(h[m]+=a,h[m]!=tr)break;h[m--]=0,a=1}for(s=h.length;h[--s]===0;)h.pop()}return Y&&(t.e>b.maxE?(t.d=null,t.e=NaN):t.e<b.minE&&(t.e=0,t.d=[0])),t}function wr(t,e,r){if(!t.isFinite())return Xw(t);var n,i=t.e,s=ze(t.d),o=s.length;return e?(r&&(n=r-o)>0?s=s.charAt(0)+"."+s.slice(1)+yn(n):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(t.e<0?"e":"e+")+t.e):i<0?(s="0."+yn(-i-1)+s,r&&(n=r-o)>0&&(s+=yn(n))):i>=o?(s+=yn(i+1-o),r&&(n=r-i-1)>0&&(s=s+"."+yn(n))):((n=i+1)<o&&(s=s.slice(0,n)+"."+s.slice(n)),r&&(n=r-o)>0&&(i+1===o&&(s+="."),s+=yn(n))),s}function _c(t,e){var r=t[0];for(e*=W;r>=10;r/=10)e++;return e}function gc(t,e,r){if(e>HP)throw Y=!0,r&&(t.precision=r),Error(Ww);return q(new t(pc),e,1,!0)}function yr(t,e,r){if(e>Nd)throw Error(Ww);return q(new t(mc),e,r,!0)}function Yw(t){var e=t.length-1,r=e*W+1;if(e=t[e],e){for(;e%10==0;e/=10)r--;for(e=t[0];e>=10;e/=10)r++}return r}function yn(t){for(var e="";t--;)e+="0";return e}function Qw(t,e,r,n){var i,s=new t(1),o=Math.ceil(n/W+4);for(Y=!1;;){if(r%2&&(s=s.times(e),Ob(s.d,o)&&(i=!0)),r=Ze(r/2),r===0){r=s.d.length-1,i&&s.d[r]===0&&++s.d[r];break}e=e.times(e),Ob(e.d,o)}return Y=!0,s}function Bb(t){return t.d[t.d.length-1]&1}function Zw(t,e,r){for(var n,i,s=new t(e[0]),o=0;++o<e.length;){if(i=new t(e[o]),!i.s){s=i;break}n=s.cmp(i),(n===r||n===0&&s.s===r)&&(s=i)}return s}function Ud(t,e){var r,n,i,s,o,a,c,f=0,d=0,h=0,m=t.constructor,b=m.rounding,y=m.precision;if(!t.d||!t.d[0]||t.e>17)return new m(t.d?t.d[0]?t.s<0?0:1/0:1:t.s?t.s<0?0:t:NaN);for(e==null?(Y=!1,c=y):c=e,a=new m(.03125);t.e>-2;)t=t.times(a),h+=5;for(n=Math.log(Me(2,h))/Math.LN10*2+5|0,c+=n,r=s=o=new m(1),m.precision=c;;){if(s=q(s.times(t),c,1),r=r.times(++d),a=o.plus(Se(s,r,c,1)),ze(a.d).slice(0,c)===ze(o.d).slice(0,c)){for(i=h;i--;)o=q(o.times(o),c,1);if(e==null)if(f<3&&wo(o.d,c-n,b,f))m.precision=c+=10,r=s=a=new m(1),d=0,f++;else return q(o,m.precision=y,b,Y=!0);else return m.precision=y,o}o=a}}function bn(t,e){var r,n,i,s,o,a,c,f,d,h,m,b=1,y=10,w=t,S=w.d,_=w.constructor,T=_.rounding,P=_.precision;if(w.s<0||!S||!S[0]||!w.e&&S[0]==1&&S.length==1)return new _(S&&!S[0]?-1/0:w.s!=1?NaN:S?0:w);if(e==null?(Y=!1,d=P):d=e,_.precision=d+=y,r=ze(S),n=r.charAt(0),Math.abs(s=w.e)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)w=w.times(t),r=ze(w.d),n=r.charAt(0),b++;s=w.e,n>1?(w=new _("0."+r),s++):w=new _(n+"."+r.slice(1))}else return f=gc(_,d+2,P).times(s+""),w=bn(new _(n+"."+r.slice(1)),d-y).plus(f),_.precision=P,e==null?q(w,P,T,Y=!0):w;for(h=w,c=o=w=Se(w.minus(1),w.plus(1),d,1),m=q(w.times(w),d,1),i=3;;){if(o=q(o.times(m),d,1),f=c.plus(Se(o,new _(i),d,1)),ze(f.d).slice(0,d)===ze(c.d).slice(0,d))if(c=c.times(2),s!==0&&(c=c.plus(gc(_,d+2,P).times(s+""))),c=Se(c,new _(b),d,1),e==null)if(wo(c.d,d-y,T,a))_.precision=d+=y,f=o=w=Se(h.minus(1),h.plus(1),d,1),m=q(w.times(w),d,1),i=a=1;else return q(c,_.precision=P,T,Y=!0);else return _.precision=P,c;c=f,i+=2}}function Xw(t){return String(t.s*t.s/0)}function oc(t,e){var r,n,i;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),n=0;e.charCodeAt(n)===48;n++);for(i=e.length;e.charCodeAt(i-1)===48;--i);if(e=e.slice(n,i),e){if(i-=n,t.e=r=r-n-1,t.d=[],n=(r+1)%W,r<0&&(n+=W),n<i){for(n&&t.d.push(+e.slice(0,n)),i-=W;n<i;)t.d.push(+e.slice(n,n+=W));e=e.slice(n),n=W-e.length}else n-=i;for(;n--;)e+="0";t.d.push(+e),Y&&(t.e>t.constructor.maxE?(t.d=null,t.e=NaN):t.e<t.constructor.minE&&(t.e=0,t.d=[0]))}else t.e=0,t.d=[0];return t}function zP(t,e){var r,n,i,s,o,a,c,f,d;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),Gw.test(e))return oc(t,e)}else if(e==="Infinity"||e==="NaN")return+e||(t.s=NaN),t.e=NaN,t.d=null,t;if(MP.test(e))r=16,e=e.toLowerCase();else if(jP.test(e))r=2;else if(FP.test(e))r=8;else throw Error(En+e);for(s=e.search(/p/i),s>0?(c=+e.slice(s+1),e=e.substring(2,s)):e=e.slice(2),s=e.indexOf("."),o=s>=0,n=t.constructor,o&&(e=e.replace(".",""),a=e.length,s=a-s,i=Qw(n,new n(r),s,s*2)),f=sc(e,r,tr),d=f.length-1,s=d;f[s]===0;--s)f.pop();return s<0?new n(t.s*0):(t.e=_c(f,d),t.d=f,Y=!1,o&&(t=Se(t,i,a*4)),c&&(t=t.times(Math.abs(c)<54?Me(2,c):Zi.pow(2,c))),Y=!0,t)}function JP(t,e){var r,n=e.d.length;if(n<3)return e.isZero()?e:Gi(t,2,e,e);r=1.4*Math.sqrt(n),r=r>16?16:r|0,e=e.times(1/kc(5,r)),e=Gi(t,2,e,e);for(var i,s=new t(5),o=new t(16),a=new t(20);r--;)i=e.times(e),e=e.times(s.plus(i.times(o.times(i).minus(a))));return e}function Gi(t,e,r,n,i){var s,o,a,c,f=1,d=t.precision,h=Math.ceil(d/W);for(Y=!1,c=r.times(r),a=new t(n);;){if(o=Se(a.times(c),new t(e++*e++),d,1),a=i?n.plus(o):n.minus(o),n=Se(o.times(c),new t(e++*e++),d,1),o=a.plus(n),o.d[h]!==void 0){for(s=h;o.d[s]===a.d[s]&&s--;);if(s==-1)break}s=a,a=n,n=o,o=s,f++}return Y=!0,o.d.length=h+1,o}function kc(t,e){for(var r=t;--e;)r*=t;return r}function ev(t,e){var r,n=e.s<0,i=yr(t,t.precision,1),s=i.times(.5);if(e=e.abs(),e.lte(s))return Lr=n?4:1,e;if(r=e.divToInt(i),r.isZero())Lr=n?3:2;else{if(e=e.minus(r.times(i)),e.lte(s))return Lr=Bb(r)?n?2:3:n?4:1,e;Lr=Bb(r)?n?1:4:n?3:2}return e.minus(i).abs()}function nh(t,e,r,n){var i,s,o,a,c,f,d,h,m,b=t.constructor,y=r!==void 0;if(y?(bt(r,1,An),n===void 0?n=b.rounding:bt(n,0,8)):(r=b.precision,n=b.rounding),!t.isFinite())d=Xw(t);else{for(d=wr(t),o=d.indexOf("."),y?(i=2,e==16?r=r*4-3:e==8&&(r=r*3-2)):i=e,o>=0&&(d=d.replace(".",""),m=new b(1),m.e=d.length-o,m.d=sc(wr(m),10,i),m.e=m.d.length),h=sc(d,10,i),s=c=h.length;h[--c]==0;)h.pop();if(!h[0])d=y?"0p+0":"0";else{if(o<0?s--:(t=new b(t),t.d=h,t.e=s,t=Se(t,m,r,n,0,i),h=t.d,s=t.e,f=Hw),o=h[r],a=i/2,f=f||h[r+1]!==void 0,f=n<4?(o!==void 0||f)&&(n===0||n===(t.s<0?3:2)):o>a||o===a&&(n===4||f||n===6&&h[r-1]&1||n===(t.s<0?8:7)),h.length=r,f)for(;++h[--r]>i-1;)h[r]=0,r||(++s,h.unshift(1));for(c=h.length;!h[c-1];--c);for(o=0,d="";o<c;o++)d+=Od.charAt(h[o]);if(y){if(c>1)if(e==16||e==8){for(o=e==16?4:3,--c;c%o;c++)d+="0";for(h=sc(d,i,e),c=h.length;!h[c-1];--c);for(o=1,d="1.";o<c;o++)d+=Od.charAt(h[o])}else d=d.charAt(0)+"."+d.slice(1);d=d+(s<0?"p":"p+")+s}else if(s<0){for(;++s;)d="0"+d;d="0."+d}else if(++s>c)for(s-=c;s--;)d+="0";else s<c&&(d=d.slice(0,s)+"."+d.slice(s))}d=(e==16?"0x":e==2?"0b":e==8?"0o":"")+d}return t.s<0?"-"+d:d}function Ob(t,e){if(t.length>e)return t.length=e,!0}function GP(t){return new this(t).abs()}function YP(t){return new this(t).acos()}function QP(t){return new this(t).acosh()}function ZP(t,e){return new this(t).plus(e)}function XP(t){return new this(t).asin()}function eR(t){return new this(t).asinh()}function tR(t){return new this(t).atan()}function rR(t){return new this(t).atanh()}function nR(t,e){t=new this(t),e=new this(e);var r,n=this.precision,i=this.rounding,s=n+4;return!t.s||!e.s?r=new this(NaN):!t.d&&!e.d?(r=yr(this,s,1).times(e.s>0?.25:.75),r.s=t.s):!e.d||t.isZero()?(r=e.s<0?yr(this,n,i):new this(0),r.s=t.s):!t.d||e.isZero()?(r=yr(this,s,1).times(.5),r.s=t.s):e.s<0?(this.precision=s,this.rounding=1,r=this.atan(Se(t,e,s,1)),e=yr(this,s,1),this.precision=n,this.rounding=i,r=t.s<0?r.minus(e):r.plus(e)):r=this.atan(Se(t,e,s,1)),r}function iR(t){return new this(t).cbrt()}function sR(t){return q(t=new this(t),t.e+1,2)}function oR(t,e,r){return new this(t).clamp(e,r)}function aR(t){if(!t||typeof t!="object")throw Error(Ac+"Object expected");var e,r,n,i=t.defaults===!0,s=["precision",1,An,"rounding",0,8,"toExpNeg",-zi,0,"toExpPos",0,zi,"maxE",0,zi,"minE",-zi,0,"modulo",0,9];for(e=0;e<s.length;e+=3)if(r=s[e],i&&(this[r]=Id[r]),(n=t[r])!==void 0)if(Ze(n)===n&&n>=s[e+1]&&n<=s[e+2])this[r]=n;else throw Error(En+r+": "+n);if(r="crypto",i&&(this[r]=Id[r]),(n=t[r])!==void 0)if(n===!0||n===!1||n===0||n===1)if(n)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[r]=!0;else throw Error(zw);else this[r]=!1;else throw Error(En+r+": "+n);return this}function lR(t){return new this(t).cos()}function cR(t){return new this(t).cosh()}function tv(t){var e,r,n;function i(s){var o,a,c,f=this;if(!(f instanceof i))return new i(s);if(f.constructor=i,Ib(s)){f.s=s.s,Y?!s.d||s.e>i.maxE?(f.e=NaN,f.d=null):s.e<i.minE?(f.e=0,f.d=[0]):(f.e=s.e,f.d=s.d.slice()):(f.e=s.e,f.d=s.d?s.d.slice():s.d);return}if(c=typeof s,c==="number"){if(s===0){f.s=1/s<0?-1:1,f.e=0,f.d=[0];return}if(s<0?(s=-s,f.s=-1):f.s=1,s===~~s&&s<1e7){for(o=0,a=s;a>=10;a/=10)o++;Y?o>i.maxE?(f.e=NaN,f.d=null):o<i.minE?(f.e=0,f.d=[0]):(f.e=o,f.d=[s]):(f.e=o,f.d=[s]);return}if(s*0!==0){s||(f.s=NaN),f.e=NaN,f.d=null;return}return oc(f,s.toString())}if(c==="string")return(a=s.charCodeAt(0))===45?(s=s.slice(1),f.s=-1):(a===43&&(s=s.slice(1)),f.s=1),Gw.test(s)?oc(f,s):zP(f,s);if(c==="bigint")return s<0?(s=-s,f.s=-1):f.s=1,oc(f,s.toString());throw Error(En+s)}if(i.prototype=k,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=aR,i.clone=tv,i.isDecimal=Ib,i.abs=GP,i.acos=YP,i.acosh=QP,i.add=ZP,i.asin=XP,i.asinh=eR,i.atan=tR,i.atanh=rR,i.atan2=nR,i.cbrt=iR,i.ceil=sR,i.clamp=oR,i.cos=lR,i.cosh=cR,i.div=uR,i.exp=fR,i.floor=dR,i.hypot=hR,i.ln=pR,i.log=mR,i.log10=yR,i.log2=gR,i.max=bR,i.min=wR,i.mod=vR,i.mul=SR,i.pow=ER,i.random=AR,i.round=_R,i.sign=kR,i.sin=xR,i.sinh=CR,i.sqrt=PR,i.sub=RR,i.sum=TR,i.tan=BR,i.tanh=OR,i.trunc=IR,t===void 0&&(t={}),t&&t.defaults!==!0)for(n=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<n.length;)t.hasOwnProperty(r=n[e++])||(t[r]=this[r]);return i.config(t),i}function uR(t,e){return new this(t).div(e)}function fR(t){return new this(t).exp()}function dR(t){return q(t=new this(t),t.e+1,3)}function hR(){var t,e,r=new this(0);for(Y=!1,t=0;t<arguments.length;)if(e=new this(arguments[t++]),e.d)r.d&&(r=r.plus(e.times(e)));else{if(e.s)return Y=!0,new this(1/0);r=e}return Y=!0,r.sqrt()}function Ib(t){return t instanceof Zi||t&&t.toStringTag===Jw||!1}function pR(t){return new this(t).ln()}function mR(t,e){return new this(t).log(e)}function gR(t){return new this(t).log(2)}function yR(t){return new this(t).log(10)}function bR(){return Zw(this,arguments,-1)}function wR(){return Zw(this,arguments,1)}function vR(t,e){return new this(t).mod(e)}function SR(t,e){return new this(t).mul(e)}function ER(t,e){return new this(t).pow(e)}function AR(t){var e,r,n,i,s=0,o=new this(1),a=[];if(t===void 0?t=this.precision:bt(t,1,An),n=Math.ceil(t/W),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(n));s<n;)i=e[s],i>=429e7?e[s]=crypto.getRandomValues(new Uint32Array(1))[0]:a[s++]=i%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(n*=4);s<n;)i=e[s]+(e[s+1]<<8)+(e[s+2]<<16)+((e[s+3]&127)<<24),i>=214e7?crypto.randomBytes(4).copy(e,s):(a.push(i%1e7),s+=4);s=n/4}else throw Error(zw);else for(;s<n;)a[s++]=Math.random()*1e7|0;for(n=a[--s],t%=W,n&&t&&(i=Me(10,W-t),a[s]=(n/i|0)*i);a[s]===0;s--)a.pop();if(s<0)r=0,a=[0];else{for(r=-1;a[0]===0;r-=W)a.shift();for(n=1,i=a[0];i>=10;i/=10)n++;n<W&&(r-=W-n)}return o.e=r,o.d=a,o}function _R(t){return q(t=new this(t),t.e+1,this.rounding)}function kR(t){return t=new this(t),t.d?t.d[0]?t.s:0*t.s:t.s||NaN}function xR(t){return new this(t).sin()}function CR(t){return new this(t).sinh()}function PR(t){return new this(t).sqrt()}function RR(t,e){return new this(t).sub(e)}function TR(){var t=0,e=arguments,r=new this(e[t]);for(Y=!1;r.s&&++t<e.length;)r=r.plus(e[t]);return Y=!0,q(r,this.precision,this.rounding)}function BR(t){return new this(t).tan()}function OR(t){return new this(t).tanh()}function IR(t){return q(t=new this(t),t.e+1,1)}k[Symbol.for("nodejs.util.inspect.custom")]=k.toString;k[Symbol.toStringTag]="Decimal";var Zi=k.constructor=tv(Id);pc=new Zi(pc);mc=new Zi(mc);var ko=Zi;function yc(t){return t===null?t:Array.isArray(t)?t.map(yc):typeof t=="object"?NR(t)?UR(t):rh(t,yc):t}function NR(t){return t!==null&&typeof t=="object"&&typeof t.$type=="string"}function UR({$type:t,value:e}){switch(t){case"BigInt":return BigInt(e);case"Bytes":{let{buffer:r,byteOffset:n,byteLength:i}=Buffer.from(e,"base64");return new Uint8Array(r,n,i)}case"DateTime":return new Date(e);case"Decimal":return new ko(e);case"Json":return JSON.parse(e);default:Ec(e,"Unknown tagged value")}}var uo=class{_map=new Map;get(t){return this._map.get(t)?.value}set(t,e){this._map.set(t,{value:e})}getOrCreate(t,e){let r=this._map.get(t);if(r)return r.value;let n=e();return this.set(t,n),n}};function xc(t){return t.substring(0,1).toLowerCase()+t.substring(1)}function $R(t,e){let r={};for(let n of t){let i=n[e];r[i]=n}return r}function $d(t){let e;return{get(){return e||(e={value:t()}),e.value}}}function DR(t){return{models:fd(t.models),enums:fd(t.enums),types:fd(t.types)}}function fd(t){let e={};for(let{name:r,...n}of t)e[r]=n;return e}function ih(t){return t instanceof Date||Object.prototype.toString.call(t)==="[object Date]"}function rv(t){return t.toString()!=="Invalid Date"}function sh(t){return Zi.isDecimal(t)?!0:t!==null&&typeof t=="object"&&typeof t.s=="number"&&typeof t.e=="number"&&typeof t.toFixed=="function"&&Array.isArray(t.d)}var nv={};hi(nv,{ModelAction:()=>Cc,datamodelEnumToSchemaEnum:()=>KR});function KR(t){return{name:t.name,values:t.values.map(e=>e.name)}}var Cc=(t=>(t.findUnique="findUnique",t.findUniqueOrThrow="findUniqueOrThrow",t.findFirst="findFirst",t.findFirstOrThrow="findFirstOrThrow",t.findMany="findMany",t.create="create",t.createMany="createMany",t.createManyAndReturn="createManyAndReturn",t.update="update",t.updateMany="updateMany",t.updateManyAndReturn="updateManyAndReturn",t.upsert="upsert",t.delete="delete",t.deleteMany="deleteMany",t.groupBy="groupBy",t.count="count",t.aggregate="aggregate",t.findRaw="findRaw",t.aggregateRaw="aggregateRaw",t))(Cc||{}),qR=ye(yw()),LR=ye($("node:fs")),jR={keyword:ui,entity:ui,value:t=>er(ao(t)),punctuation:ao,directive:ui,function:ui,variable:t=>er(ao(t)),string:t=>er(po(t)),boolean:Eo,number:ui,comment:Yd},MR=t=>t,ec={},FR=0,te={manual:ec.Prism&&ec.Prism.manual,disableWorkerMessageHandler:ec.Prism&&ec.Prism.disableWorkerMessageHandler,util:{encode:function(t){if(t instanceof mr){let e=t;return new mr(e.type,te.util.encode(e.content),e.alias)}else return Array.isArray(t)?t.map(te.util.encode):t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(t){return Object.prototype.toString.call(t).slice(8,-1)},objId:function(t){return t.__id||Object.defineProperty(t,"__id",{value:++FR}),t.__id},clone:function t(e,r){let n,i,s=te.util.type(e);switch(r=r||{},s){case"Object":if(i=te.util.objId(e),r[i])return r[i];n={},r[i]=n;for(let o in e)e.hasOwnProperty(o)&&(n[o]=t(e[o],r));return n;case"Array":return i=te.util.objId(e),r[i]?r[i]:(n=[],r[i]=n,e.forEach(function(o,a){n[a]=t(o,r)}),n);default:return e}}},languages:{extend:function(t,e){let r=te.util.clone(te.languages[t]);for(let n in e)r[n]=e[n];return r},insertBefore:function(t,e,r,n){n=n||te.languages;let i=n[t],s={};for(let a in i)if(i.hasOwnProperty(a)){if(a==e)for(let c in r)r.hasOwnProperty(c)&&(s[c]=r[c]);r.hasOwnProperty(a)||(s[a]=i[a])}let o=n[t];return n[t]=s,te.languages.DFS(te.languages,function(a,c){c===o&&a!=t&&(this[a]=s)}),s},DFS:function t(e,r,n,i){i=i||{};let s=te.util.objId;for(let o in e)if(e.hasOwnProperty(o)){r.call(e,o,e[o],n||o);let a=e[o],c=te.util.type(a);c==="Object"&&!i[s(a)]?(i[s(a)]=!0,t(a,r,null,i)):c==="Array"&&!i[s(a)]&&(i[s(a)]=!0,t(a,r,o,i))}}},plugins:{},highlight:function(t,e,r){let n={code:t,grammar:e,language:r};return te.hooks.run("before-tokenize",n),n.tokens=te.tokenize(n.code,n.grammar),te.hooks.run("after-tokenize",n),mr.stringify(te.util.encode(n.tokens),n.language)},matchGrammar:function(t,e,r,n,i,s,o){for(let w in r){if(!r.hasOwnProperty(w)||!r[w])continue;if(w==o)return;let S=r[w];S=te.util.type(S)==="Array"?S:[S];for(let _=0;_<S.length;++_){let T=S[_],P=T.inside,C=!!T.lookbehind,L=!!T.greedy,B=0,j=T.alias;if(L&&!T.pattern.global){let A=T.pattern.toString().match(/[imuy]*$/)[0];T.pattern=RegExp(T.pattern.source,A+"g")}T=T.pattern||T;for(let A=n,M=i;A<e.length;M+=e[A].length,++A){let K=e[A];if(e.length>t.length)return;if(K instanceof mr)continue;if(L&&A!=e.length-1){T.lastIndex=M;var h=T.exec(t);if(!h)break;var d=h.index+(C?h[1].length:0),m=h.index+h[0].length,a=A,c=M;for(let Q=e.length;a<Q&&(c<m||!e[a].type&&!e[a-1].greedy);++a)c+=e[a].length,d>=c&&(++A,M=c);if(e[A]instanceof mr)continue;f=a-A,K=t.slice(M,c),h.index-=M}else{T.lastIndex=0;var h=T.exec(K),f=1}if(!h){if(s)break;continue}C&&(B=h[1]?h[1].length:0);var d=h.index+B,h=h[0].slice(B),m=d+h.length,b=K.slice(0,d),y=K.slice(m);let G=[A,f];b&&(++A,M+=b.length,G.push(b));let ae=new mr(w,P?te.tokenize(h,P):h,j,h,L);if(G.push(ae),y&&G.push(y),Array.prototype.splice.apply(e,G),f!=1&&te.matchGrammar(t,e,r,A,M,!0,w),s)break}}}},tokenize:function(t,e){let r=[t],n=e.rest;if(n){for(let i in n)e[i]=n[i];delete e.rest}return te.matchGrammar(t,r,e,0,0,!1),r},hooks:{all:{},add:function(t,e){let r=te.hooks.all;r[t]=r[t]||[],r[t].push(e)},run:function(t,e){let r=te.hooks.all[t];if(!(!r||!r.length))for(var n=0,i;i=r[n++];)i(e)}},Token:mr};te.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/((?:\b(?:class|interface|extends|implements|trait|instanceof|new)\s+)|(?:catch\s+\())[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\b/,boolean:/\b(?:true|false)\b/,function:/\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+\.?\d*|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/--?|\+\+?|!=?=?|<=?|>=?|==?=?|&&?|\|\|?|\?|\*|\/|~|\^|%/,punctuation:/[{}[\];(),.:]/};te.languages.javascript=te.languages.extend("clike",{"class-name":[te.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])[_$A-Z\xA0-\uFFFF][$\w\xA0-\uFFFF]*(?=\.(?:prototype|constructor))/,lookbehind:!0}],keyword:[{pattern:/((?:^|})\s*)(?:catch|finally)\b/,lookbehind:!0},{pattern:/(^|[^.])\b(?:as|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],number:/\b(?:(?:0[xX](?:[\dA-Fa-f](?:_[\dA-Fa-f])?)+|0[bB](?:[01](?:_[01])?)+|0[oO](?:[0-7](?:_[0-7])?)+)n?|(?:\d(?:_\d)?)+n|NaN|Infinity)\b|(?:\b(?:\d(?:_\d)?)+\.?(?:\d(?:_\d)?)*|\B\.(?:\d(?:_\d)?)+)(?:[Ee][+-]?(?:\d(?:_\d)?)+)?/,function:/[_$a-zA-Z\xA0-\uFFFF][$\w\xA0-\uFFFF]*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,operator:/-[-=]?|\+[+=]?|!=?=?|<<?=?|>>?>?=?|=(?:==?|>)?|&[&=]?|\|[|=]?|\*\*?=?|\/=?|~|\^=?|%=?|\?|\.{3}/});te.languages.javascript["class-name"][0].pattern=/(\b(?:class|interface|extends|implements|instanceof|new)\s+)[\w.\\]+/;te.languages.insertBefore("javascript","keyword",{regex:{pattern:/((?:^|[^$\w\xA0-\uFFFF."'\])\s])\s*)\/(\[(?:[^\]\\\r\n]|\\.)*]|\\.|[^/\\\[\r\n])+\/[gimyus]{0,6}(?=\s*($|[\r\n,.;})\]]))/,lookbehind:!0,greedy:!0},"function-variable":{pattern:/[_$a-zA-Z\xA0-\uFFFF][$\w\xA0-\uFFFF]*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|[_$a-zA-Z\xA0-\uFFFF][$\w\xA0-\uFFFF]*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+[_$A-Za-z\xA0-\uFFFF][$\w\xA0-\uFFFF]*)?\s*\(\s*)(?!\s)(?:[^()]|\([^()]*\))+?(?=\s*\))/,lookbehind:!0,inside:te.languages.javascript},{pattern:/[_$a-z\xA0-\uFFFF][$\w\xA0-\uFFFF]*(?=\s*=>)/i,inside:te.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()]|\([^()]*\))+?(?=\s*\)\s*=>)/,lookbehind:!0,inside:te.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:[_$A-Za-z\xA0-\uFFFF][$\w\xA0-\uFFFF]*\s*)\(\s*)(?!\s)(?:[^()]|\([^()]*\))+?(?=\s*\)\s*\{)/,lookbehind:!0,inside:te.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/});te.languages.markup&&te.languages.markup.tag.addInlined("script","javascript");te.languages.js=te.languages.javascript;te.languages.typescript=te.languages.extend("javascript",{keyword:/\b(?:abstract|as|async|await|break|case|catch|class|const|constructor|continue|debugger|declare|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|is|keyof|let|module|namespace|new|null|of|package|private|protected|public|readonly|return|require|set|static|super|switch|this|throw|try|type|typeof|var|void|while|with|yield)\b/,builtin:/\b(?:string|Function|any|number|boolean|Array|symbol|console|Promise|unknown|never)\b/});te.languages.ts=te.languages.typescript;function mr(t,e,r,n,i){this.type=t,this.content=e,this.alias=r,this.length=(n||"").length|0,this.greedy=!!i}mr.stringify=function(t,e){return typeof t=="string"?t:Array.isArray(t)?t.map(function(r){return mr.stringify(r,e)}).join(""):VR(t.type)(t.content)};function VR(t){return jR[t]||MR}function HR(t){return WR(t,te.languages.javascript)}function WR(t,e){return te.tokenize(t,e).map(r=>mr.stringify(r)).join("")}function zR(t){return EP(t)}var JR=class li{firstLineNumber;lines;static read(e){let r;try{r=LR.default.readFileSync(e,"utf-8")}catch{return null}return li.fromContent(r)}static fromContent(e){let r=e.split(/\r?\n/);return new li(1,r)}constructor(e,r){this.firstLineNumber=e,this.lines=r}get lastLineNumber(){return this.firstLineNumber+this.lines.length-1}mapLineAt(e,r){if(e<this.firstLineNumber||e>this.lines.length+this.firstLineNumber)return this;let n=e-this.firstLineNumber,i=[...this.lines];return i[n]=r(i[n]),new li(this.firstLineNumber,i)}mapLines(e){return new li(this.firstLineNumber,this.lines.map((r,n)=>e(r,this.firstLineNumber+n)))}lineAt(e){return this.lines[e-this.firstLineNumber]}prependSymbolAt(e,r){return this.mapLines((n,i)=>i===e?`${r} ${n}`:`  ${n}`)}slice(e,r){let n=this.lines.slice(e-1,r).join(`
`);return new li(e,zR(n).split(`
`))}highlight(){let e=HR(this.toString());return new li(this.firstLineNumber,e.split(`
`))}toString(){return this.lines.join(`
`)}},GR={red:fi,gray:Yd,dim:So,bold:er,underline:Kt,highlightSource:t=>t.highlight()},YR={red:t=>t,gray:t=>t,dim:t=>t,bold:t=>t,underline:t=>t,highlightSource:t=>t};function QR({message:t,originalMethod:e,isPanic:r,callArguments:n}){return{functionName:`prisma.${e}()`,message:t,isPanic:r??!1,callArguments:n}}function ZR({callsite:t,message:e,originalMethod:r,isPanic:n,callArguments:i},s){let o=QR({message:e,originalMethod:r,isPanic:n,callArguments:i});if(!t||typeof window<"u"||process.env.NODE_ENV==="production")return o;let a=t.getLocation();if(!a||!a.lineNumber||!a.columnNumber)return o;let c=Math.max(1,a.lineNumber-3),f=JR.read(a.fileName)?.slice(c,a.lineNumber),d=f?.lineAt(a.lineNumber);if(f&&d){let h=eT(d),m=XR(d);if(!m)return o;o.functionName=`${m.code})`,o.location=a,n||(f=f.mapLineAt(a.lineNumber,y=>y.slice(0,m.openingBraceIndex))),f=s.highlightSource(f);let b=String(f.lastLineNumber).length;if(o.contextLines=f.mapLines((y,w)=>s.gray(String(w).padStart(b))+" "+y).mapLines(y=>s.dim(y)).prependSymbolAt(a.lineNumber,s.bold(s.red("\u2192"))),i){let y=h+b+1;y+=2,o.callArguments=(0,qR.default)(i,y).slice(y)}}return o}function XR(t){let e=Object.keys(Cc).join("|"),r=new RegExp(String.raw`\.(${e})\(`).exec(t);if(r){let n=r.index+r[0].length,i=t.lastIndexOf(" ",r.index)+1;return{code:t.slice(i,n),openingBraceIndex:n}}return null}function eT(t){let e=0;for(let r=0;r<t.length;r++){if(t.charAt(r)!==" ")return e;e++}return e}function tT({functionName:t,location:e,message:r,isPanic:n,contextLines:i,callArguments:s},o){let a=[""],c=e?" in":":";if(n?(a.push(o.red(`Oops, an unknown error occurred! This is ${o.bold("on us")}, you did nothing wrong.`)),a.push(o.red(`It occurred in the ${o.bold(`\`${t}\``)} invocation${c}`))):a.push(o.red(`Invalid ${o.bold(`\`${t}\``)} invocation${c}`)),e&&a.push(o.underline(rT(e))),i){a.push("");let f=[i.toString()];s&&(f.push(s),f.push(o.dim(")"))),a.push(f.join("")),s&&a.push("")}else a.push(""),s&&a.push(s),a.push("");return a.push(r),a.join(`
`)}function rT(t){let e=[t.fileName];return t.lineNumber&&e.push(String(t.lineNumber)),t.columnNumber&&e.push(String(t.columnNumber)),e.join(":")}function iv(t){let e=t.showColors?GR:YR,r;return r=ZR(t,e),tT(r,e)}var nT=ye(ww());function iT(t,e,r){let n=sv(t),i=sT(n),s=aT(i);s?fv(s,e,r):e.addErrorMessage(()=>"Unknown error")}function sv(t){return t.errors.flatMap(e=>e.kind==="Union"?sv(e):[e])}function sT(t){let e=new Map,r=[];for(let n of t){if(n.kind!=="InvalidArgumentType"){r.push(n);continue}let i=`${n.selectionPath.join(".")}:${n.argumentPath.join(".")}`,s=e.get(i);s?e.set(i,{...n,argument:{...n.argument,typeNames:oT(s.argument.typeNames,n.argument.typeNames)}}):e.set(i,n)}return r.push(...e.values()),r}function oT(t,e){return[...new Set(t.concat(e))]}function aT(t){return LP(t,(e,r)=>{let n=Nb(e),i=Nb(r);return n!==i?n-i:Ub(e)-Ub(r)})}function Nb(t){let e=0;return Array.isArray(t.selectionPath)&&(e+=t.selectionPath.length),Array.isArray(t.argumentPath)&&(e+=t.argumentPath.length),e}function Ub(t){switch(t.kind){case"InvalidArgumentValue":case"ValueTooLarge":return 20;case"InvalidArgumentType":return 10;case"RequiredArgumentMissing":return-10;default:return 0}}var vr=class{constructor(t,e){this.name=t,this.value=e}isRequired=!1;makeRequired(){return this.isRequired=!0,this}write(t){let{colors:{green:e}}=t.context;t.addMarginSymbol(e(this.isRequired?"+":"?")),t.write(e(this.name)),this.isRequired||t.write(e("?")),t.write(e(": ")),typeof this.value=="string"?t.write(e(this.value)):t.write(this.value)}};Kx();var ov=class{constructor(t=0,e){this.context=e,this.currentIndent=t}lines=[];currentLine="";currentIndent=0;marginSymbol;afterNextNewLineCallback;write(t){return typeof t=="string"?this.currentLine+=t:t.write(this),this}writeJoined(t,e,r=(n,i)=>i.write(n)){let n=e.length-1;for(let i=0;i<e.length;i++)r(e[i],this),i!==n&&this.write(t);return this}writeLine(t){return this.write(t).newLine()}newLine(){this.lines.push(this.indentedCurrentLine()),this.currentLine="",this.marginSymbol=void 0;let t=this.afterNextNewLineCallback;return this.afterNextNewLineCallback=void 0,t?.(),this}withIndent(t){return this.indent(),t(this),this.unindent(),this}afterNextNewline(t){return this.afterNextNewLineCallback=t,this}indent(){return this.currentIndent++,this}unindent(){return this.currentIndent>0&&this.currentIndent--,this}addMarginSymbol(t){return this.marginSymbol=t,this}toString(){return this.lines.concat(this.indentedCurrentLine()).join(`
`)}getCurrentLineLength(){return this.currentLine.length}indentedCurrentLine(){let t=this.currentLine.padStart(this.currentLine.length+2*this.currentIndent);return this.marginSymbol?this.marginSymbol+t.slice(1):t}};Dx();var lT=class{constructor(t){this.value=t}write(t){t.write(this.value)}markAsError(){this.value.markAsError()}},tc=t=>t,av={bold:tc,red:tc,green:tc,dim:tc,enabled:!1},cT={bold:er,red:fi,green:po,dim:So,enabled:!0},oh={write(t){t.writeLine(",")}},Pc=class{constructor(t){this.contents=t}isUnderlined=!1;color=t=>t;underline(){return this.isUnderlined=!0,this}setColor(t){return this.color=t,this}write(t){let e=t.getCurrentLineLength();t.write(this.color(this.contents)),this.isUnderlined&&t.afterNextNewline(()=>{t.write(" ".repeat(e)).writeLine(this.color("~".repeat(this.contents.length)))})}},ah=class{hasError=!1;markAsError(){return this.hasError=!0,this}},lv=class extends ah{items=[];addItem(t){return this.items.push(new lT(t)),this}getField(t){return this.items[t]}getPrintWidth(){return this.items.length===0?2:Math.max(...this.items.map(t=>t.value.getPrintWidth()))+2}write(t){if(this.items.length===0){this.writeEmpty(t);return}this.writeWithItems(t)}writeEmpty(t){let e=new Pc("[]");this.hasError&&e.setColor(t.context.colors.red).underline(),t.write(e)}writeWithItems(t){let{colors:e}=t.context;t.writeLine("[").withIndent(()=>t.writeJoined(oh,this.items).newLine()).write("]"),this.hasError&&t.afterNextNewline(()=>{t.writeLine(e.red("~".repeat(this.getPrintWidth())))})}asObject(){}},cv=class ac extends ah{fields={};suggestions=[];addField(e){this.fields[e.name]=e}addSuggestion(e){this.suggestions.push(e)}getField(e){return this.fields[e]}getDeepField(e){let[r,...n]=e,i=this.getField(r);if(!i)return;let s=i;for(let o of n){let a;if(s.value instanceof ac?a=s.value.getField(o):s.value instanceof lv&&(a=s.value.getField(Number(o))),!a)return;s=a}return s}getDeepFieldValue(e){return e.length===0?this:this.getDeepField(e)?.value}hasField(e){return!!this.getField(e)}removeAllFields(){this.fields={}}removeField(e){delete this.fields[e]}getFields(){return this.fields}isEmpty(){return Object.keys(this.fields).length===0}getFieldValue(e){return this.getField(e)?.value}getDeepSubSelectionValue(e){let r=this;for(let n of e){if(!(r instanceof ac))return;let i=r.getSubSelectionValue(n);if(!i)return;r=i}return r}getDeepSelectionParent(e){let r=this.getSelectionParent();if(!r)return;let n=r;for(let i of e){let s=n.value.getFieldValue(i);if(!s||!(s instanceof ac))return;let o=s.getSelectionParent();if(!o)return;n=o}return n}getSelectionParent(){let e=this.getField("select")?.value.asObject();if(e)return{kind:"select",value:e};let r=this.getField("include")?.value.asObject();if(r)return{kind:"include",value:r}}getSubSelectionValue(e){return this.getSelectionParent()?.value.fields[e].value}getPrintWidth(){let e=Object.values(this.fields);return e.length==0?2:Math.max(...e.map(r=>r.getPrintWidth()))+2}write(e){let r=Object.values(this.fields);if(r.length===0&&this.suggestions.length===0){this.writeEmpty(e);return}this.writeWithContents(e,r)}asObject(){return this}writeEmpty(e){let r=new Pc("{}");this.hasError&&r.setColor(e.context.colors.red).underline(),e.write(r)}writeWithContents(e,r){e.writeLine("{").withIndent(()=>{e.writeJoined(oh,[...r,...this.suggestions]).newLine()}),e.write("}"),this.hasError&&e.afterNextNewline(()=>{e.writeLine(e.context.colors.red("~".repeat(this.getPrintWidth())))})}},yt=class extends ah{constructor(t){super(),this.text=t}getPrintWidth(){return this.text.length}write(t){let e=new Pc(this.text);this.hasError&&e.underline().setColor(t.context.colors.red),t.write(e)}asObject(){}},uv=class{fields=[];addField(t,e){return this.fields.push({write(r){let{green:n,dim:i}=r.context.colors;r.write(n(i(`${t}: ${e}`))).addMarginSymbol(n(i("+")))}}),this}write(t){let{colors:{green:e}}=t.context;t.writeLine(e("{")).withIndent(()=>{t.writeJoined(oh,this.fields).newLine()}).write(e("}")).addMarginSymbol(e("+"))}};function fv(t,e,r){switch(t.kind){case"MutuallyExclusiveFields":uT(t,e);break;case"IncludeOnScalar":fT(t,e);break;case"EmptySelection":dT(t,e,r);break;case"UnknownSelectionField":gT(t,e);break;case"InvalidSelectionValue":yT(t,e);break;case"UnknownArgument":bT(t,e);break;case"UnknownInputField":wT(t,e);break;case"RequiredArgumentMissing":vT(t,e);break;case"InvalidArgumentType":ST(t,e);break;case"InvalidArgumentValue":ET(t,e);break;case"ValueTooLarge":AT(t,e);break;case"SomeFieldsMissing":_T(t,e);break;case"TooManyFieldsGiven":kT(t,e);break;case"Union":iT(t,e,r);break;default:throw new Error("not implemented: "+t.kind)}}function uT(t,e){let r=e.arguments.getDeepSubSelectionValue(t.selectionPath)?.asObject();r&&(r.getField(t.firstField)?.markAsError(),r.getField(t.secondField)?.markAsError()),e.addErrorMessage(n=>`Please ${n.bold("either")} use ${n.green(`\`${t.firstField}\``)} or ${n.green(`\`${t.secondField}\``)}, but ${n.red("not both")} at the same time.`)}function fT(t,e){let[r,n]=xo(t.selectionPath),i=t.outputType,s=e.arguments.getDeepSelectionParent(r)?.value;if(s&&(s.getField(n)?.markAsError(),i))for(let o of i.fields)o.isRelation&&s.addSuggestion(new vr(o.name,"true"));e.addErrorMessage(o=>{let a=`Invalid scalar field ${o.red(`\`${n}\``)} for ${o.bold("include")} statement`;return i?a+=` on model ${o.bold(i.name)}. ${Co(o)}`:a+=".",a+=`
Note that ${o.bold("include")} statements only accept relation fields.`,a})}function dT(t,e,r){let n=e.arguments.getDeepSubSelectionValue(t.selectionPath)?.asObject();if(n){let i=n.getField("omit")?.value.asObject();if(i){hT(t,e,i);return}if(n.hasField("select")){pT(t,e);return}}if(r?.[xc(t.outputType.name)]){mT(t,e);return}e.addErrorMessage(()=>`Unknown field at "${t.selectionPath.join(".")} selection"`)}function hT(t,e,r){r.removeAllFields();for(let n of t.outputType.fields)r.addSuggestion(new vr(n.name,"false"));e.addErrorMessage(n=>`The ${n.red("omit")} statement includes every field of the model ${n.bold(t.outputType.name)}. At least one field must be included in the result`)}function pT(t,e){let r=t.outputType,n=e.arguments.getDeepSelectionParent(t.selectionPath)?.value,i=n?.isEmpty()??!1;n&&(n.removeAllFields(),pv(n,r)),e.addErrorMessage(s=>i?`The ${s.red("`select`")} statement for type ${s.bold(r.name)} must not be empty. ${Co(s)}`:`The ${s.red("`select`")} statement for type ${s.bold(r.name)} needs ${s.bold("at least one truthy value")}.`)}function mT(t,e){let r=new uv;for(let i of t.outputType.fields)i.isRelation||r.addField(i.name,"false");let n=new vr("omit",r).makeRequired();if(t.selectionPath.length===0)e.arguments.addSuggestion(n);else{let[i,s]=xo(t.selectionPath),o=e.arguments.getDeepSelectionParent(i)?.value.asObject()?.getField(s);if(o){let a=o?.value.asObject()??new cv;a.addSuggestion(n),o.value=a}}e.addErrorMessage(i=>`The global ${i.red("omit")} configuration excludes every field of the model ${i.bold(t.outputType.name)}. At least one field must be included in the result`)}function gT(t,e){let r=mv(t.selectionPath,e);if(r.parentKind!=="unknown"){r.field.markAsError();let n=r.parent;switch(r.parentKind){case"select":pv(n,t.outputType);break;case"include":xT(n,t.outputType);break;case"omit":CT(n,t.outputType);break}}e.addErrorMessage(n=>{let i=[`Unknown field ${n.red(`\`${r.fieldName}\``)}`];return r.parentKind!=="unknown"&&i.push(`for ${n.bold(r.parentKind)} statement`),i.push(`on model ${n.bold(`\`${t.outputType.name}\``)}.`),i.push(Co(n)),i.join(" ")})}function yT(t,e){let r=mv(t.selectionPath,e);r.parentKind!=="unknown"&&r.field.value.markAsError(),e.addErrorMessage(n=>`Invalid value for selection field \`${n.red(r.fieldName)}\`: ${t.underlyingError}`)}function bT(t,e){let r=t.argumentPath[0],n=e.arguments.getDeepSubSelectionValue(t.selectionPath)?.asObject();n&&(n.getField(r)?.markAsError(),PT(n,t.arguments)),e.addErrorMessage(i=>dv(i,r,t.arguments.map(s=>s.name)))}function wT(t,e){let[r,n]=xo(t.argumentPath),i=e.arguments.getDeepSubSelectionValue(t.selectionPath)?.asObject();if(i){i.getDeepField(t.argumentPath)?.markAsError();let s=i.getDeepFieldValue(r)?.asObject();s&&gv(s,t.inputType)}e.addErrorMessage(s=>dv(s,n,t.inputType.fields.map(o=>o.name)))}function dv(t,e,r){let n=[`Unknown argument \`${t.red(e)}\`.`],i=TT(e,r);return i&&n.push(`Did you mean \`${t.green(i)}\`?`),r.length>0&&n.push(Co(t)),n.join(" ")}function vT(t,e){let r;e.addErrorMessage(c=>r?.value instanceof yt&&r.value.text==="null"?`Argument \`${c.green(s)}\` must not be ${c.red("null")}.`:`Argument \`${c.green(s)}\` is missing.`);let n=e.arguments.getDeepSubSelectionValue(t.selectionPath)?.asObject();if(!n)return;let[i,s]=xo(t.argumentPath),o=new uv,a=n.getDeepFieldValue(i)?.asObject();if(a)if(r=a.getField(s),r&&a.removeField(s),t.inputTypes.length===1&&t.inputTypes[0].kind==="object"){for(let c of t.inputTypes[0].fields)o.addField(c.name,c.typeNames.join(" | "));a.addSuggestion(new vr(s,o).makeRequired())}else{let c=t.inputTypes.map(hv).join(" | ");a.addSuggestion(new vr(s,c).makeRequired())}}function hv(t){return t.kind==="list"?`${hv(t.elementType)}[]`:t.name}function ST(t,e){let r=t.argument.name,n=e.arguments.getDeepSubSelectionValue(t.selectionPath)?.asObject();n&&n.getDeepFieldValue(t.argumentPath)?.markAsError(),e.addErrorMessage(i=>{let s=Rc("or",t.argument.typeNames.map(o=>i.green(o)));return`Argument \`${i.bold(r)}\`: Invalid value provided. Expected ${s}, provided ${i.red(t.inferredType)}.`})}function ET(t,e){let r=t.argument.name,n=e.arguments.getDeepSubSelectionValue(t.selectionPath)?.asObject();n&&n.getDeepFieldValue(t.argumentPath)?.markAsError(),e.addErrorMessage(i=>{let s=[`Invalid value for argument \`${i.bold(r)}\``];if(t.underlyingError&&s.push(`: ${t.underlyingError}`),s.push("."),t.argument.typeNames.length>0){let o=Rc("or",t.argument.typeNames.map(a=>i.green(a)));s.push(` Expected ${o}.`)}return s.join("")})}function AT(t,e){let r=t.argument.name,n=e.arguments.getDeepSubSelectionValue(t.selectionPath)?.asObject(),i;if(n){let s=n.getDeepField(t.argumentPath)?.value;s?.markAsError(),s instanceof yt&&(i=s.text)}e.addErrorMessage(s=>{let o=["Unable to fit value"];return i&&o.push(s.red(i)),o.push(`into a 64-bit signed integer for field \`${s.bold(r)}\``),o.join(" ")})}function _T(t,e){let r=t.argumentPath[t.argumentPath.length-1],n=e.arguments.getDeepSubSelectionValue(t.selectionPath)?.asObject();if(n){let i=n.getDeepFieldValue(t.argumentPath)?.asObject();i&&gv(i,t.inputType)}e.addErrorMessage(i=>{let s=[`Argument \`${i.bold(r)}\` of type ${i.bold(t.inputType.name)} needs`];return t.constraints.minFieldCount===1?t.constraints.requiredFields?s.push(`${i.green("at least one of")} ${Rc("or",t.constraints.requiredFields.map(o=>`\`${i.bold(o)}\``))} arguments.`):s.push(`${i.green("at least one")} argument.`):s.push(`${i.green(`at least ${t.constraints.minFieldCount}`)} arguments.`),s.push(Co(i)),s.join(" ")})}function kT(t,e){let r=t.argumentPath[t.argumentPath.length-1],n=e.arguments.getDeepSubSelectionValue(t.selectionPath)?.asObject(),i=[];if(n){let s=n.getDeepFieldValue(t.argumentPath)?.asObject();s&&(s.markAsError(),i=Object.keys(s.getFields()))}e.addErrorMessage(s=>{let o=[`Argument \`${s.bold(r)}\` of type ${s.bold(t.inputType.name)} needs`];return t.constraints.minFieldCount===1&&t.constraints.maxFieldCount==1?o.push(`${s.green("exactly one")} argument,`):t.constraints.maxFieldCount==1?o.push(`${s.green("at most one")} argument,`):o.push(`${s.green(`at most ${t.constraints.maxFieldCount}`)} arguments,`),o.push(`but you provided ${Rc("and",i.map(a=>s.red(a)))}. Please choose`),t.constraints.maxFieldCount===1?o.push("one."):o.push(`${t.constraints.maxFieldCount}.`),o.join(" ")})}function pv(t,e){for(let r of e.fields)t.hasField(r.name)||t.addSuggestion(new vr(r.name,"true"))}function xT(t,e){for(let r of e.fields)r.isRelation&&!t.hasField(r.name)&&t.addSuggestion(new vr(r.name,"true"))}function CT(t,e){for(let r of e.fields)!t.hasField(r.name)&&!r.isRelation&&t.addSuggestion(new vr(r.name,"true"))}function PT(t,e){for(let r of e)t.hasField(r.name)||t.addSuggestion(new vr(r.name,r.typeNames.join(" | ")))}function mv(t,e){let[r,n]=xo(t),i=e.arguments.getDeepSubSelectionValue(r)?.asObject();if(!i)return{parentKind:"unknown",fieldName:n};let s=i.getFieldValue("select")?.asObject(),o=i.getFieldValue("include")?.asObject(),a=i.getFieldValue("omit")?.asObject(),c=s?.getField(n);return s&&c?{parentKind:"select",parent:s,field:c,fieldName:n}:(c=o?.getField(n),o&&c?{parentKind:"include",field:c,parent:o,fieldName:n}:(c=a?.getField(n),a&&c?{parentKind:"omit",field:c,parent:a,fieldName:n}:{parentKind:"unknown",fieldName:n}))}function gv(t,e){if(e.kind==="object")for(let r of e.fields)t.hasField(r.name)||t.addSuggestion(new vr(r.name,r.typeNames.join(" | ")))}function xo(t){let e=[...t],r=e.pop();if(!r)throw new Error("unexpected empty path");return[e,r]}function Co({green:t,enabled:e}){return"Available options are "+(e?`listed in ${t("green")}`:"marked with ?")+"."}function Rc(t,e){if(e.length===1)return e[0];let r=[...e],n=r.pop();return`${r.join(", ")} ${t} ${n}`}var RT=3;function TT(t,e){let r=1/0,n;for(let i of e){let s=(0,nT.default)(t,i);s>RT||s<r&&(r=s,n=i)}return n}var yv=class{modelName;name;typeName;isList;isEnum;constructor(t,e,r,n,i){this.modelName=t,this.name=e,this.typeName=r,this.isList=n,this.isEnum=i}_toGraphQLInputType(){let t=this.isList?"List":"",e=this.isEnum?"Enum":"";return`${t}${e}${this.typeName}FieldRefInput<${this.modelName}>`}};function lh(t){return t instanceof yv}var lc=Symbol(),dd=new WeakMap,Tc=class{constructor(t){t===lc?dd.set(this,`Prisma.${this._getName()}`):dd.set(this,`new Prisma.${this._getNamespace()}.${this._getName()}()`)}_getName(){return this.constructor.name}toString(){return dd.get(this)}},ch=class extends Tc{_getNamespace(){return"NullTypes"}},Dd=class extends ch{#e};uh(Dd,"DbNull");var Kd=class extends ch{#e};uh(Kd,"JsonNull");var qd=class extends ch{#e};uh(qd,"AnyNull");var bv={classes:{DbNull:Dd,JsonNull:Kd,AnyNull:qd},instances:{DbNull:new Dd(lc),JsonNull:new Kd(lc),AnyNull:new qd(lc)}};function uh(t,e){Object.defineProperty(t,"name",{value:e,configurable:!0})}var $b=": ",BT=class{constructor(t,e){this.name=t,this.value=e}hasError=!1;markAsError(){this.hasError=!0}getPrintWidth(){return this.name.length+this.value.getPrintWidth()+$b.length}write(t){let e=new Pc(this.name);this.hasError&&e.underline().setColor(t.context.colors.red),t.write(e).write($b).write(this.value)}},OT=class{arguments;errorMessages=[];constructor(t){this.arguments=t}write(t){t.write(this.arguments)}addErrorMessage(t){this.errorMessages.push(t)}renderAllMessages(t){return this.errorMessages.map(e=>e(t)).join(`
`)}};function fh(t){return new OT(wv(t))}function wv(t){let e=new cv;for(let[r,n]of Object.entries(t)){let i=new BT(r,vv(n));e.addField(i)}return e}function vv(t){if(typeof t=="string")return new yt(JSON.stringify(t));if(typeof t=="number"||typeof t=="boolean")return new yt(String(t));if(typeof t=="bigint")return new yt(`${t}n`);if(t===null)return new yt("null");if(t===void 0)return new yt("undefined");if(sh(t))return new yt(`new Prisma.Decimal("${t.toFixed()}")`);if(t instanceof Uint8Array)return Buffer.isBuffer(t)?new yt(`Buffer.alloc(${t.byteLength})`):new yt(`new Uint8Array(${t.byteLength})`);if(t instanceof Date){let e=rv(t)?t.toISOString():"Invalid Date";return new yt(`new Date("${e}")`)}return t instanceof Tc?new yt(`Prisma.${t._getName()}`):lh(t)?new yt(`prisma.${xc(t.modelName)}.$fields.${t.name}`):Array.isArray(t)?IT(t):typeof t=="object"?wv(t):new yt(Object.prototype.toString.call(t))}function IT(t){let e=new lv;for(let r of t)e.addItem(vv(r));return e}function Sv(t,e){let r=e==="pretty"?cT:av,n=t.renderAllMessages(r),i=new ov(0,{colors:r}).write(t).toString();return{message:n,args:i}}function Ev({args:t,errors:e,errorFormat:r,callsite:n,originalMethod:i,clientVersion:s,globalOmit:o}){let a=fh(t);for(let h of e)fv(h,a,o);let{message:c,args:f}=Sv(a,r),d=iv({message:c,callsite:n,originalMethod:i,showColors:r==="pretty",callArguments:f});throw new qr(d,{clientVersion:s})}function Po(t){return t.replace(/^./,e=>e.toLowerCase())}function NT(t,e,r){let n=Po(r);return!e.result||!(e.result.$allModels||e.result[n])?t:UT({...t,...Db(e.name,t,e.result.$allModels),...Db(e.name,t,e.result[n])})}function UT(t){let e=new uo,r=(n,i)=>e.getOrCreate(n,()=>i.has(n)?[n]:(i.add(n),t[n]?t[n].needs.flatMap(s=>r(s,i)):[n]));return rh(t,n=>({...n,needs:r(n.name,new Set)}))}function Db(t,e,r){return r?rh(r,({needs:n,compute:i},s)=>({name:s,needs:n?Object.keys(n).filter(o=>n[o]):[],compute:$T(e,s,i)})):{}}function $T(t,e,r){let n=t?.[e]?.compute;return n?i=>r({...i,[e]:n(i)}):r}function DT(t,e){if(!e)return t;let r={...t};for(let n of Object.values(e))if(t[n.name])for(let i of n.needs)r[i]=!0;return r}function KT(t,e){if(!e)return t;let r={...t};for(let n of Object.values(e))if(!t[n.name])for(let i of n.needs)delete r[i];return r}var Kb=class{constructor(t,e){this.extension=t,this.previous=e}computedFieldsCache=new uo;modelExtensionsCache=new uo;queryCallbacksCache=new uo;clientExtensions=$d(()=>this.extension.client?{...this.previous?.getAllClientExtensions(),...this.extension.client}:this.previous?.getAllClientExtensions());batchCallbacks=$d(()=>{let t=this.previous?.getAllBatchQueryCallbacks()??[],e=this.extension.query?.$__internalBatch;return e?t.concat(e):t});getAllComputedFields(t){return this.computedFieldsCache.getOrCreate(t,()=>NT(this.previous?.getAllComputedFields(t),this.extension,t))}getAllClientExtensions(){return this.clientExtensions.get()}getAllModelExtensions(t){return this.modelExtensionsCache.getOrCreate(t,()=>{let e=Po(t);return!this.extension.model||!(this.extension.model[e]||this.extension.model.$allModels)?this.previous?.getAllModelExtensions(t):{...this.previous?.getAllModelExtensions(t),...this.extension.model.$allModels,...this.extension.model[e]}})}getAllQueryCallbacks(t,e){return this.queryCallbacksCache.getOrCreate(`${t}:${e}`,()=>{let r=this.previous?.getAllQueryCallbacks(t,e)??[],n=[],i=this.extension.query;return!i||!(i[t]||i.$allModels||i[e]||i.$allOperations)?r:(i[t]!==void 0&&(i[t][e]!==void 0&&n.push(i[t][e]),i[t].$allOperations!==void 0&&n.push(i[t].$allOperations)),t!=="$none"&&i.$allModels!==void 0&&(i.$allModels[e]!==void 0&&n.push(i.$allModels[e]),i.$allModels.$allOperations!==void 0&&n.push(i.$allModels.$allOperations)),i[e]!==void 0&&n.push(i[e]),i.$allOperations!==void 0&&n.push(i.$allOperations),r.concat(n))})}getAllBatchQueryCallbacks(){return this.batchCallbacks.get()}},Av=class cc{constructor(e){this.head=e}static empty(){return new cc}static single(e){return new cc(new Kb(e))}isEmpty(){return this.head===void 0}append(e){return new cc(new Kb(e,this.head))}getAllComputedFields(e){return this.head?.getAllComputedFields(e)}getAllClientExtensions(){return this.head?.getAllClientExtensions()}getAllModelExtensions(e){return this.head?.getAllModelExtensions(e)}getAllQueryCallbacks(e,r){return this.head?.getAllQueryCallbacks(e,r)??[]}getAllBatchQueryCallbacks(){return this.head?.getAllBatchQueryCallbacks()??[]}},_v=class{constructor(t){this.name=t}};function qT(t){return t instanceof _v}function LT(t){return new _v(t)}var kv=Symbol(),xv=class{constructor(t){if(t!==kv)throw new Error("Skip instance can not be constructed directly")}ifUndefined(t){return t===void 0?Cv:t}},Cv=new xv(kv);function di(t){return t instanceof xv}var jT={findUnique:"findUnique",findUniqueOrThrow:"findUniqueOrThrow",findFirst:"findFirst",findFirstOrThrow:"findFirstOrThrow",findMany:"findMany",count:"aggregate",create:"createOne",createMany:"createMany",createManyAndReturn:"createManyAndReturn",update:"updateOne",updateMany:"updateMany",updateManyAndReturn:"updateManyAndReturn",upsert:"upsertOne",delete:"deleteOne",deleteMany:"deleteMany",executeRaw:"executeRaw",queryRaw:"queryRaw",aggregate:"aggregate",groupBy:"groupBy",runCommandRaw:"runCommandRaw",findRaw:"findRaw",aggregateRaw:"aggregateRaw"},Pv="explicitly `undefined` values are not allowed";function Rv({modelName:t,action:e,args:r,runtimeDataModel:n,extensions:i=Av.empty(),callsite:s,clientMethod:o,errorFormat:a,clientVersion:c,previewFeatures:f,globalOmit:d}){let h=new YT({runtimeDataModel:n,modelName:t,action:e,rootArgs:r,callsite:s,extensions:i,selectionPath:[],argumentPath:[],originalMethod:o,errorFormat:a,clientVersion:c,previewFeatures:f,globalOmit:d});return{modelName:t,action:jT[e],query:vo(r,h)}}function vo({select:t,include:e,...r}={},n){let i=r.omit;return delete r.omit,{arguments:Bv(r,n),selection:MT(t,e,i,n)}}function MT(t,e,r,n){return t?(e?n.throwValidationError({kind:"MutuallyExclusiveFields",firstField:"include",secondField:"select",selectionPath:n.getSelectionPath()}):r&&n.throwValidationError({kind:"MutuallyExclusiveFields",firstField:"omit",secondField:"select",selectionPath:n.getSelectionPath()}),WT(t,n)):FT(n,e,r)}function FT(t,e,r){let n={};return t.modelOrType&&!t.isRawAction()&&(n.$composites=!0,n.$scalars=!0),e&&VT(n,e,t),HT(n,r,t),n}function VT(t,e,r){for(let[n,i]of Object.entries(e)){if(di(i))continue;let s=r.nestSelection(n);if(dh(i,s),i===!1||i===void 0){t[n]=!1;continue}let o=r.findField(n);if(o&&o.kind!=="object"&&r.throwValidationError({kind:"IncludeOnScalar",selectionPath:r.getSelectionPath().concat(n),outputType:r.getOutputTypeDescription()}),o){t[n]=vo(i===!0?{}:i,s);continue}if(i===!0){t[n]=!0;continue}t[n]=vo(i,s)}}function HT(t,e,r){let n=r.getComputedFields(),i={...r.getGlobalOmit(),...e},s=KT(i,n);for(let[o,a]of Object.entries(s)){if(di(a))continue;dh(a,r.nestSelection(o));let c=r.findField(o);n?.[o]&&!c||(t[o]=!a)}}function WT(t,e){let r={},n=e.getComputedFields(),i=DT(t,n);for(let[s,o]of Object.entries(i)){if(di(o))continue;let a=e.nestSelection(s);dh(o,a);let c=e.findField(s);if(!(n?.[s]&&!c)){if(o===!1||o===void 0||di(o)){r[s]=!1;continue}if(o===!0){c?.kind==="object"?r[s]=vo({},a):r[s]=!0;continue}r[s]=vo(o,a)}}return r}function Tv(t,e){if(t===null)return null;if(typeof t=="string"||typeof t=="number"||typeof t=="boolean")return t;if(typeof t=="bigint")return{$type:"BigInt",value:String(t)};if(ih(t)){if(rv(t))return{$type:"DateTime",value:t.toISOString()};e.throwValidationError({kind:"InvalidArgumentValue",selectionPath:e.getSelectionPath(),argumentPath:e.getArgumentPath(),argument:{name:e.getArgumentName(),typeNames:["Date"]},underlyingError:"Provided Date object is invalid"})}if(qT(t))return{$type:"Param",value:t.name};if(lh(t))return{$type:"FieldRef",value:{_ref:t.name,_container:t.modelName}};if(Array.isArray(t))return zT(t,e);if(ArrayBuffer.isView(t)){let{buffer:r,byteOffset:n,byteLength:i}=t;return{$type:"Bytes",value:Buffer.from(r,n,i).toString("base64")}}if(JT(t))return t.values;if(sh(t))return{$type:"Decimal",value:t.toFixed()};if(t instanceof Tc){if(t!==bv.instances[t._getName()])throw new Error("Invalid ObjectEnumValue");return{$type:"Enum",value:t._getName()}}if(GT(t))return t.toJSON();if(typeof t=="object")return Bv(t,e);e.throwValidationError({kind:"InvalidArgumentValue",selectionPath:e.getSelectionPath(),argumentPath:e.getArgumentPath(),argument:{name:e.getArgumentName(),typeNames:[]},underlyingError:`We could not serialize ${Object.prototype.toString.call(t)} value. Serialize the object to JSON or implement a ".toJSON()" method on it`})}function Bv(t,e){if(t.$type)return{$type:"Raw",value:t};let r={};for(let n in t){let i=t[n],s=e.nestArgument(n);di(i)||(i!==void 0?r[n]=Tv(i,s):e.isPreviewFeatureOn("strictUndefinedChecks")&&e.throwValidationError({kind:"InvalidArgumentValue",argumentPath:s.getArgumentPath(),selectionPath:e.getSelectionPath(),argument:{name:e.getArgumentName(),typeNames:[]},underlyingError:Pv}))}return r}function zT(t,e){let r=[];for(let n=0;n<t.length;n++){let i=e.nestArgument(String(n)),s=t[n];if(s===void 0||di(s)){let o=s===void 0?"undefined":"Prisma.skip";e.throwValidationError({kind:"InvalidArgumentValue",selectionPath:i.getSelectionPath(),argumentPath:i.getArgumentPath(),argument:{name:`${e.getArgumentName()}[${n}]`,typeNames:[]},underlyingError:`Can not use \`${o}\` value within array. Use \`null\` or filter out \`${o}\` values`})}r.push(Tv(s,i))}return r}function JT(t){return typeof t=="object"&&t!==null&&t.__prismaRawParameters__===!0}function GT(t){return typeof t=="object"&&t!==null&&typeof t.toJSON=="function"}function dh(t,e){t===void 0&&e.isPreviewFeatureOn("strictUndefinedChecks")&&e.throwValidationError({kind:"InvalidSelectionValue",selectionPath:e.getSelectionPath(),underlyingError:Pv})}var YT=class Ld{constructor(e){this.params=e,this.params.modelName&&(this.modelOrType=this.params.runtimeDataModel.models[this.params.modelName]??this.params.runtimeDataModel.types[this.params.modelName])}modelOrType;throwValidationError(e){Ev({errors:[e],originalMethod:this.params.originalMethod,args:this.params.rootArgs??{},callsite:this.params.callsite,errorFormat:this.params.errorFormat,clientVersion:this.params.clientVersion,globalOmit:this.params.globalOmit})}getSelectionPath(){return this.params.selectionPath}getArgumentPath(){return this.params.argumentPath}getArgumentName(){return this.params.argumentPath[this.params.argumentPath.length-1]}getOutputTypeDescription(){if(!(!this.params.modelName||!this.modelOrType))return{name:this.params.modelName,fields:this.modelOrType.fields.map(e=>({name:e.name,typeName:"boolean",isRelation:e.kind==="object"}))}}isRawAction(){return["executeRaw","queryRaw","runCommandRaw","findRaw","aggregateRaw"].includes(this.params.action)}isPreviewFeatureOn(e){return this.params.previewFeatures.includes(e)}getComputedFields(){if(this.params.modelName)return this.params.extensions.getAllComputedFields(this.params.modelName)}findField(e){return this.modelOrType?.fields.find(r=>r.name===e)}nestSelection(e){let r=this.findField(e),n=r?.kind==="object"?r.type:void 0;return new Ld({...this.params,modelName:n,selectionPath:this.params.selectionPath.concat(e)})}getGlobalOmit(){return this.params.modelName&&this.shouldApplyGlobalOmit()?this.params.globalOmit?.[xc(this.params.modelName)]??{}:{}}shouldApplyGlobalOmit(){switch(this.params.action){case"findFirst":case"findFirstOrThrow":case"findUniqueOrThrow":case"findMany":case"upsert":case"findUnique":case"createManyAndReturn":case"create":case"update":case"updateManyAndReturn":case"delete":return!0;case"executeRaw":case"aggregateRaw":case"runCommandRaw":case"findRaw":case"createMany":case"deleteMany":case"groupBy":case"updateMany":case"count":case"aggregate":case"queryRaw":return!1;default:Ec(this.params.action,"Unknown action")}}nestArgument(e){return new Ld({...this.params,argumentPath:this.params.argumentPath.concat(e)})}};function qb(t){if(!t._hasPreviewFlag("metrics"))throw new qr("`metrics` preview feature must be enabled in order to access metrics API",{clientVersion:t._clientVersion})}var Ov=class{_client;constructor(t){this._client=t}prometheus(t){return qb(this._client),this._client._engine.metrics({format:"prometheus",...t})}json(t){return qb(this._client),this._client._engine.metrics({format:"json",...t})}};function QT(t,e){let r=$d(()=>ZT(e));Object.defineProperty(t,"dmmf",{get:()=>r.get()})}function ZT(t){return{datamodel:{models:hd(t.models),enums:hd(t.enums),types:hd(t.types)}}}function hd(t){return Object.entries(t).map(([e,r])=>({name:e,...r}))}var pd=new WeakMap,bc="$$PrismaTypedSql",Iv=class{constructor(t,e){pd.set(this,{sql:t,values:e}),Object.defineProperty(this,bc,{value:bc})}get sql(){return pd.get(this).sql}get values(){return pd.get(this).values}};function XT(t){return(...e)=>new Iv(t,e)}function Nv(t){return t!=null&&t[bc]===bc}var eB=ye(mw()),tB=$("node:async_hooks"),rB=$("node:events"),nB=ye($("node:fs")),md=ye($("node:path")),_n=class jd{constructor(e,r){if(e.length-1!==r.length)throw e.length===0?new TypeError("Expected at least 1 string"):new TypeError(`Expected ${e.length} strings to have ${e.length-1} values`);let n=r.reduce((o,a)=>o+(a instanceof jd?a.values.length:1),0);this.values=new Array(n),this.strings=new Array(n+1),this.strings[0]=e[0];let i=0,s=0;for(;i<r.length;){let o=r[i++],a=e[i];if(o instanceof jd){this.strings[s]+=o.strings[0];let c=0;for(;c<o.values.length;)this.values[s++]=o.values[c++],this.strings[s]=o.strings[c];this.strings[s]+=a}else this.values[s++]=o,this.strings[s]=a}}get sql(){let e=this.strings.length,r=1,n=this.strings[0];for(;r<e;)n+=`?${this.strings[r++]}`;return n}get statement(){let e=this.strings.length,r=1,n=this.strings[0];for(;r<e;)n+=`:${r}${this.strings[r++]}`;return n}get text(){let e=this.strings.length,r=1,n=this.strings[0];for(;r<e;)n+=`$${r}${this.strings[r++]}`;return n}inspect(){return{sql:this.sql,statement:this.statement,text:this.text,values:this.values}}};function iB(t,e=",",r="",n=""){if(t.length===0)throw new TypeError("Expected `join([])` to be called with an array of multiple elements, but got an empty array");return new _n([r,...Array(t.length-1).fill(e),n],t)}function Uv(t){return new _n([t],[])}var sB=Uv("");function oB(t,...e){return new _n(t,e)}function $v(t){return{getKeys(){return Object.keys(t)},getPropertyValue(e){return t[e]}}}function br(t,e){return{getKeys(){return[t]},getPropertyValue(){return e()}}}function hh(t){let e=new uo;return{getKeys(){return t.getKeys()},getPropertyValue(r){return e.getOrCreate(r,()=>t.getPropertyValue(r))},getPropertyDescriptor(r){return t.getPropertyDescriptor?.(r)}}}var Md={enumerable:!0,configurable:!0,writable:!0};function Dv(t){let e=new Set(t);return{getPrototypeOf:()=>Object.prototype,getOwnPropertyDescriptor:()=>Md,has:(r,n)=>e.has(n),set:(r,n,i)=>e.add(n)&&Reflect.set(r,n,i),ownKeys:()=>[...e]}}var Lb=Symbol.for("nodejs.util.inspect.custom");function Yi(t,e){let r=aB(e),n=new Set,i=new Proxy(t,{get(s,o){if(n.has(o))return s[o];let a=r.get(o);return a?a.getPropertyValue(o):s[o]},has(s,o){if(n.has(o))return!0;let a=r.get(o);return a?a.has?.(o)??!0:Reflect.has(s,o)},ownKeys(s){let o=jb(Reflect.ownKeys(s),r),a=jb(Array.from(r.keys()),r);return[...new Set([...o,...a,...n])]},set(s,o,a){return r.get(o)?.getPropertyDescriptor?.(o)?.writable===!1?!1:(n.add(o),Reflect.set(s,o,a))},getOwnPropertyDescriptor(s,o){let a=Reflect.getOwnPropertyDescriptor(s,o);if(a&&!a.configurable)return a;let c=r.get(o);return c?c.getPropertyDescriptor?{...Md,...c?.getPropertyDescriptor(o)}:Md:a},defineProperty(s,o,a){return n.add(o),Reflect.defineProperty(s,o,a)},getPrototypeOf:()=>Object.prototype});return i[Lb]=function(){let s={...this};return delete s[Lb],s},i}function aB(t){let e=new Map;for(let r of t){let n=r.getKeys();for(let i of n)e.set(i,r)}return e}function jb(t,e){return t.filter(r=>e.get(r)?.has?.(r)??!0)}function Fd(t){return{getKeys(){return t},has(){return!1},getPropertyValue(){}}}function ph(t,e){return{batch:t,transaction:e?.kind==="batch"?{isolationLevel:e.options.isolationLevel}:void 0}}function lB(t){if(t===void 0)return"";let e=fh(t);return new ov(0,{colors:av}).write(e).toString()}var cB="P2037";function mh({error:t,user_facing_error:e},r,n){return e.error_code?new Sn(uB(e,n),{code:e.error_code,clientVersion:r,meta:e.meta,batchRequestIdx:e.batch_request_idx}):new Tt(t,{clientVersion:r,batchRequestIdx:e.batch_request_idx})}function uB(t,e){let r=t.message;return(e==="postgresql"||e==="postgres"||e==="mysql")&&t.error_code===cB&&(r+=`
Prisma Accelerate has built-in connection pooling to prevent such errors: https://pris.ly/client/error-accelerate`),r}var Ro="<unknown>";function fB(t){var e=t.split(`
`);return e.reduce(function(r,n){var i=pB(n)||gB(n)||wB(n)||AB(n)||SB(n);return i&&r.push(i),r},[])}var dB=/^\s*at (.*?) ?\(((?:file|https?|blob|chrome-extension|native|eval|webpack|rsc|<anonymous>|\/|[a-z]:\\|\\\\).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,hB=/\((\S*)(?::(\d+))(?::(\d+))\)/;function pB(t){var e=dB.exec(t);if(!e)return null;var r=e[2]&&e[2].indexOf("native")===0,n=e[2]&&e[2].indexOf("eval")===0,i=hB.exec(e[2]);return n&&i!=null&&(e[2]=i[1],e[3]=i[2],e[4]=i[3]),{file:r?null:e[2],methodName:e[1]||Ro,arguments:r?[e[2]]:[],lineNumber:e[3]?+e[3]:null,column:e[4]?+e[4]:null}}var mB=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|rsc|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i;function gB(t){var e=mB.exec(t);return e?{file:e[2],methodName:e[1]||Ro,arguments:[],lineNumber:+e[3],column:e[4]?+e[4]:null}:null}var yB=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|rsc|resource|\[native).*?|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i,bB=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i;function wB(t){var e=yB.exec(t);if(!e)return null;var r=e[3]&&e[3].indexOf(" > eval")>-1,n=bB.exec(e[3]);return r&&n!=null&&(e[3]=n[1],e[4]=n[2],e[5]=null),{file:e[3],methodName:e[1]||Ro,arguments:e[2]?e[2].split(","):[],lineNumber:e[4]?+e[4]:null,column:e[5]?+e[5]:null}}var vB=/^\s*(?:([^@]*)(?:\((.*?)\))?@)?(\S.*?):(\d+)(?::(\d+))?\s*$/i;function SB(t){var e=vB.exec(t);return e?{file:e[3],methodName:e[1]||Ro,arguments:[],lineNumber:+e[4],column:e[5]?+e[5]:null}:null}var EB=/^\s*at (?:((?:\[object object\])?[^\\/]+(?: \[as \S+\])?) )?\(?(.*?):(\d+)(?::(\d+))?\)?\s*$/i;function AB(t){var e=EB.exec(t);return e?{file:e[2],methodName:e[1]||Ro,arguments:[],lineNumber:+e[3],column:e[4]?+e[4]:null}:null}var _B=class{getLocation(){return null}},kB=class{_error;constructor(){this._error=new Error}getLocation(){let t=this._error.stack;if(!t)return null;let e=fB(t).find(r=>{if(!r.file)return!1;let n=UP(r.file);return n!=="<anonymous>"&&!n.includes("@prisma")&&!n.includes("/packages/client/src/runtime/")&&!n.endsWith("/runtime/binary.js")&&!n.endsWith("/runtime/library.js")&&!n.endsWith("/runtime/edge.js")&&!n.endsWith("/runtime/edge-esm.js")&&!n.startsWith("internal/")&&!r.methodName.includes("new ")&&!r.methodName.includes("getCallSite")&&!r.methodName.includes("Proxy.")&&r.methodName.split(".").length<4});return!e||!e.file?null:{fileName:e.file,lineNumber:e.lineNumber,columnNumber:e.column}}};function fo(t){return t==="minimal"?typeof $EnabledCallSite=="function"&&t!=="minimal"?new $EnabledCallSite:new _B:new kB}var xB={_avg:!0,_count:!0,_sum:!0,_min:!0,_max:!0};function wc(t={}){let e=CB(t);return Object.entries(e).reduce((r,[n,i])=>(xB[n]!==void 0?r.select[n]={select:i}:r[n]=i,r),{select:{}})}function CB(t={}){return typeof t._count=="boolean"?{...t,_count:{_all:t._count}}:t}function Vd(t={}){return e=>(typeof t._count=="boolean"&&(e._count=e._count._all),e)}function PB(t,e){let r=Vd(t);return e({action:"aggregate",unpacker:r,argsMapper:wc})(t)}function RB(t={}){let{select:e,...r}=t;return wc(typeof e=="object"?{...r,_count:e}:{...r,_count:{_all:!0}})}function TB(t={}){return typeof t.select=="object"?e=>Vd(t)(e)._count:e=>Vd(t)(e)._count._all}function BB(t,e){return e({action:"count",unpacker:TB(t),argsMapper:RB})(t)}function OB(t={}){let e=wc(t);if(Array.isArray(e.by))for(let r of e.by)typeof r=="string"&&(e.select[r]=!0);else typeof e.by=="string"&&(e.select[e.by]=!0);return e}function IB(t={}){return e=>(typeof t?._count=="boolean"&&e.forEach(r=>{r._count=r._count._all}),e)}function NB(t,e){return e({action:"groupBy",unpacker:IB(t),argsMapper:OB})(t)}function UB(t,e,r){if(e==="aggregate")return n=>PB(n,r);if(e==="count")return n=>BB(n,r);if(e==="groupBy")return n=>NB(n,r)}function $B(t,e){let r=e.fields.filter(i=>!i.relationName),n=$R(r,"name");return new Proxy({},{get(i,s){if(s in i||typeof s=="symbol")return i[s];let o=n[s];if(o)return new yv(t,s,o.type,o.isList,o.kind==="enum")},...Dv(Object.keys(n))})}var Kv=t=>Array.isArray(t)?t:t.split("."),qv=(t,e)=>Kv(e).reduce((r,n)=>r&&r[n],t),DB=(t,e,r)=>Kv(e).reduceRight((n,i,s,o)=>Object.assign({},qv(t,o.slice(0,s)),{[i]:n}),r);function KB(t,e){return t===void 0||e===void 0?[]:[...e,"select",t]}function qB(t,e,r){return e===void 0?t??{}:DB(e,r,t||!0)}function Lv(t,e,r,n,i,s){let o=t._runtimeDataModel.models[e].fields.reduce((a,c)=>({...a,[c.name]:c}),{});return a=>{let c=fo(t._errorFormat),f=KB(n,i),d=qB(a,s,f),h=r({dataPath:f,callsite:c})(d),m=LB(t,e);return new Proxy(h,{get(b,y){if(!m.includes(y))return b[y];let w=[o[y].type,r,y],S=[f,d];return Lv(t,...w,...S)},...Dv([...m,...Object.getOwnPropertyNames(h)])})}}function LB(t,e){return t._runtimeDataModel.models[e].fields.filter(r=>r.kind==="object").map(r=>r.name)}var jB=["findUnique","findUniqueOrThrow","findFirst","findFirstOrThrow","create","update","upsert","delete"],MB=["aggregate","count","groupBy"];function Mb(t,e){let r=t._extensions.getAllModelExtensions(e)??{},n=[FB(t,e),HB(t,e),$v(r),br("name",()=>e),br("$name",()=>e),br("$parent",()=>t._appliedParent)];return Yi({},n)}function FB(t,e){let r=Po(e),n=Object.keys(Cc).concat("count");return{getKeys(){return n},getPropertyValue(i){let s=i,o=a=>c=>{let f=fo(t._errorFormat);return t._createPrismaPromise(d=>{let h={args:c,dataPath:[],action:s,model:e,clientMethod:`${r}.${i}`,jsModelName:r,transaction:d,callsite:f};return t._request({...h,...a})},{action:s,args:c,model:e})};return jB.includes(s)?Lv(t,e,o):VB(i)?UB(t,i,o):o({})}}}function VB(t){return MB.includes(t)}function HB(t,e){return hh(br("fields",()=>{let r=t._runtimeDataModel.models[e];return $B(e,r)}))}function WB(t){return t.replace(/^./,e=>e.toUpperCase())}var Hd=Symbol();function Wd(t){let e=[zB(t),JB(t),br(Hd,()=>t),br("$parent",()=>t._appliedParent)],r=t._extensions.getAllClientExtensions();return r&&e.push($v(r)),Yi(t,e)}function zB(t){let e=Object.getPrototypeOf(t._originalClient),r=[...new Set(Object.getOwnPropertyNames(e))];return{getKeys(){return r},getPropertyValue(n){return t[n]}}}function JB(t){let e=Object.keys(t._runtimeDataModel.models),r=e.map(Po),n=[...new Set(e.concat(r))];return hh({getKeys(){return n},getPropertyValue(i){let s=WB(i);if(t._runtimeDataModel.models[s]!==void 0)return Mb(t,s);if(t._runtimeDataModel.models[i]!==void 0)return Mb(t,i)},getPropertyDescriptor(i){if(!r.includes(i))return{enumerable:!1}}})}function GB(t){return t[Hd]?t[Hd]:t}function YB(t){if(typeof t=="function")return t(this);if(t.client?.__AccelerateEngine){let r=t.client.__AccelerateEngine;this._originalClient._engine=new r(this._originalClient._accelerateEngineConfig)}let e=Object.create(this._originalClient,{_extensions:{value:this._extensions.append(t)},_appliedParent:{value:this,configurable:!0},$use:{value:void 0},$on:{value:void 0}});return Wd(e)}function QB({result:t,modelName:e,select:r,omit:n,extensions:i}){let s=i.getAllComputedFields(e);if(!s)return t;let o=[],a=[];for(let c of Object.values(s)){if(n){if(n[c.name])continue;let f=c.needs.filter(d=>n[d]);f.length>0&&a.push(Fd(f))}else if(r){if(!r[c.name])continue;let f=c.needs.filter(d=>!r[d]);f.length>0&&a.push(Fd(f))}ZB(t,c.needs)&&o.push(XB(c,Yi(t,o)))}return o.length>0||a.length>0?Yi(t,[...o,...a]):t}function ZB(t,e){return e.every(r=>qP(t,r))}function XB(t,e){return hh(br(t.name,()=>t.compute(e)))}function gh({visitor:t,result:e,args:r,runtimeDataModel:n,modelName:i}){if(Array.isArray(e)){for(let o=0;o<e.length;o++)e[o]=gh({result:e[o],args:r,modelName:i,runtimeDataModel:n,visitor:t});return e}let s=t(e,i,r)??e;return r.include&&Fb({includeOrSelect:r.include,result:s,parentModelName:i,runtimeDataModel:n,visitor:t}),r.select&&Fb({includeOrSelect:r.select,result:s,parentModelName:i,runtimeDataModel:n,visitor:t}),s}function Fb({includeOrSelect:t,result:e,parentModelName:r,runtimeDataModel:n,visitor:i}){for(let[s,o]of Object.entries(t)){if(!o||e[s]==null||di(o))continue;let a=n.models[r].fields.find(f=>f.name===s);if(!a||a.kind!=="object"||!a.relationName)continue;let c=typeof o=="object"?o:{};e[s]=gh({visitor:i,result:e[s],args:c,modelName:a.type,runtimeDataModel:n})}}function eO({result:t,modelName:e,args:r,extensions:n,runtimeDataModel:i,globalOmit:s}){return n.isEmpty()||t==null||typeof t!="object"||!i.models[e]?t:gh({result:t,args:r??{},modelName:e,runtimeDataModel:i,visitor:(o,a,c)=>{let f=Po(a);return QB({result:o,modelName:f,select:c.select,omit:c.select?void 0:{...s?.[f],...c.omit},extensions:n})}})}var tO=["$connect","$disconnect","$on","$transaction","$use","$extends"],rO=tO;function nO(t){if(t instanceof _n)return iO(t);if(Nv(t))return sO(t);if(Array.isArray(t)){let r=[t[0]];for(let n=1;n<t.length;n++)r[n]=ho(t[n]);return r}let e={};for(let r in t)e[r]=ho(t[r]);return e}function iO(t){return new _n(t.strings,t.values)}function sO(t){return new Iv(t.sql,t.values)}function ho(t){if(typeof t!="object"||t==null||t instanceof Tc||lh(t))return t;if(sh(t))return new ko(t.toFixed());if(ih(t))return new Date(+t);if(ArrayBuffer.isView(t))return t.slice(0);if(Array.isArray(t)){let e=t.length,r;for(r=Array(e);e--;)r[e]=ho(t[e]);return r}if(typeof t=="object"){let e={};for(let r in t)r==="__proto__"?Object.defineProperty(e,r,{value:ho(t[r]),configurable:!0,enumerable:!0,writable:!0}):e[r]=ho(t[r]);return e}Ec(t,"Unknown value")}function jv(t,e,r,n=0){return t._createPrismaPromise(i=>{let s=e.customDataProxyFetch;return"transaction"in e&&i!==void 0&&(e.transaction?.kind==="batch"&&e.transaction.lock.then(),e.transaction=i),n===r.length?t._executeRequest(e):r[n]({model:e.model,operation:e.model?e.action:e.clientMethod,args:nO(e.args??{}),__internalParams:e,query:(o,a=e)=>{let c=a.customDataProxyFetch;return a.customDataProxyFetch=Fv(s,c),a.args=o,jv(t,a,r,n+1)}})})}function oO(t,e){let{jsModelName:r,action:n,clientMethod:i}=e,s=r?n:i;if(t._extensions.isEmpty())return t._executeRequest(e);let o=t._extensions.getAllQueryCallbacks(r??"$none",s);return jv(t,e,o)}function aO(t){return e=>{let r={requests:e},n=e[0].extensions.getAllBatchQueryCallbacks();return n.length?Mv(r,n,0,t):t(r)}}function Mv(t,e,r,n){if(r===e.length)return n(t);let i=t.customDataProxyFetch,s=t.requests[0].transaction;return e[r]({args:{queries:t.requests.map(o=>({model:o.modelName,operation:o.action,args:o.args})),transaction:s?{isolationLevel:s.kind==="batch"?s.isolationLevel:void 0}:void 0},__internalParams:t,query(o,a=t){let c=a.customDataProxyFetch;return a.customDataProxyFetch=Fv(i,c),Mv(a,e,r+1,n)}})}var Vb=t=>t;function Fv(t=Vb,e=Vb){return r=>t(e(r))}var Hb=st("prisma:client"),Wb={Vercel:"vercel","Netlify CI":"netlify"};function lO({postinstall:t,ciName:e,clientVersion:r}){if(Hb("checkPlatformCaching:postinstall",t),Hb("checkPlatformCaching:ciName",e),t===!0&&e&&e in Wb){let n=`Prisma has detected that this project was built on ${e}, which caches dependencies. This leads to an outdated Prisma Client because Prisma's auto-generation isn't triggered. To fix this, make sure to run the \`prisma generate\` command during the build process.

Learn how: https://pris.ly/d/${Wb[e]}-build`;throw console.error(n),new Ie(n,r)}}function cO(t,e){return t?t.datasources?t.datasources:t.datasourceUrl?{[e[0]]:{url:t.datasourceUrl}}:{}:{}}var uO=()=>globalThis.process?.release?.name==="node",fO=()=>!!globalThis.Bun||!!globalThis.process?.versions?.bun,dO=()=>!!globalThis.Deno,hO=()=>typeof globalThis.Netlify=="object",pO=()=>typeof globalThis.EdgeRuntime=="object",mO=()=>globalThis.navigator?.userAgent==="Cloudflare-Workers";function gO(){return[[hO,"netlify"],[pO,"edge-light"],[mO,"workerd"],[dO,"deno"],[fO,"bun"],[uO,"node"]].flatMap(t=>t[0]()?[t[1]]:[]).at(0)??""}var yO={node:"Node.js",workerd:"Cloudflare Workers",deno:"Deno and Deno Deploy",netlify:"Netlify Edge Functions","edge-light":"Edge Runtime (Vercel Edge Functions, Vercel Edge Middleware, Next.js (Pages Router) Edge API Routes, Next.js (App Router) Edge Route Handlers or Next.js Middleware)"};function Vv(){let t=gO();return{id:t,prettyName:yO[t]||t,isEdge:["workerd","deno","netlify","edge-light"].includes(t)}}var bO=ye($("node:fs")),uc=ye($("node:path"));function Hv(t){let{runtimeBinaryTarget:e}=t;return`Add "${e}" to \`binaryTargets\` in the "schema.prisma" file and run \`prisma generate\` after saving it:

${wO(t)}`}function wO(t){let{generator:e,generatorBinaryTargets:r,runtimeBinaryTarget:n}=t,i={fromEnvVar:null,value:n},s=[...r,i];return xP({...e,binaryTargets:s})}function Bc(t){let{runtimeBinaryTarget:e}=t;return`Prisma Client could not locate the Query Engine for runtime "${e}".`}function Oc(t){let{searchedLocations:e}=t;return`The following locations have been searched:
${[...new Set(e)].map(r=>`  ${r}`).join(`
`)}`}function vO(t){let{runtimeBinaryTarget:e}=t;return`${Bc(t)}

This happened because \`binaryTargets\` have been pinned, but the actual deployment also required "${e}".
${Hv(t)}

${Oc(t)}`}function Wv(t){return`We would appreciate if you could take the time to share some information with us.
Please help us by answering a few questions: https://pris.ly/${t}`}function zv(t){let{errorStack:e}=t;return e?.match(/\/\.next|\/next@|\/next\//)?`

We detected that you are using Next.js, learn how to fix this: https://pris.ly/d/engine-not-found-nextjs.`:""}function SO(t){let{queryEngineName:e}=t;return`${Bc(t)}${zv(t)}

This is likely caused by a bundler that has not copied "${e}" next to the resulting bundle.
Ensure that "${e}" has been copied next to the bundle or in "${t.expectedLocation}".

${Wv("engine-not-found-bundler-investigation")}

${Oc(t)}`}function EO(t){let{runtimeBinaryTarget:e,generatorBinaryTargets:r}=t,n=r.find(i=>i.native);return`${Bc(t)}

This happened because Prisma Client was generated for "${n?.value??"unknown"}", but the actual deployment required "${e}".
${Hv(t)}

${Oc(t)}`}function AO(t){let{queryEngineName:e}=t;return`${Bc(t)}${zv(t)}

This is likely caused by tooling that has not copied "${e}" to the deployment folder.
Ensure that you ran \`prisma generate\` and that "${e}" has been copied to "${t.expectedLocation}".

${Wv("engine-not-found-tooling-investigation")}

${Oc(t)}`}var _O=st("prisma:client:engines:resolveEnginePath"),kO=()=>new RegExp("runtime[\\\\/]library\\.m?js$");async function xO(t,e){let r={binary:process.env.PRISMA_QUERY_ENGINE_BINARY,library:process.env.PRISMA_QUERY_ENGINE_LIBRARY}[t]??e.prismaPath;if(r!==void 0)return r;let{enginePath:n,searchedLocations:i}=await CO(t,e);if(_O("enginePath",n),n!==void 0&&t==="binary"&&wP(n),n!==void 0)return e.prismaPath=n;let s=await Zd(),o=e.generator?.binaryTargets??[],a=o.some(m=>m.native),c=!o.some(m=>m.value===s),f=__filename.match(kO())===null,d={searchedLocations:i,generatorBinaryTargets:o,generator:e.generator,runtimeBinaryTarget:s,queryEngineName:Jv(t,s),expectedLocation:uc.default.relative(process.cwd(),e.dirname),errorStack:new Error().stack},h;throw a&&c?h=EO(d):c?h=vO(d):f?h=SO(d):h=AO(d),new Ie(h,e.clientVersion)}async function CO(t,e){let r=await Zd(),n=[],i=[e.dirname,uc.default.resolve(__dirname,".."),e.generator?.output?.value??__dirname,uc.default.resolve(__dirname,"../../../.prisma/client"),"/tmp/prisma-engines",e.cwd];__filename.includes("resolveEnginePath")&&i.push(bP());for(let s of i){let o=Jv(t,r),a=uc.default.join(s,o);if(n.push(s),bO.default.existsSync(a))return{enginePath:a,searchedLocations:n}}return{enginePath:void 0,searchedLocations:n}}function Jv(t,e){return t==="library"?pC(e,"fs"):`query-engine-${e}${e==="windows"?".exe":""}`}var zb=ye(bw());function PO(t){return t?t.replace(/".*"/g,'"X"').replace(/[\s:\[]([+-]?([0-9]*[.])?[0-9]+)/g,e=>`${e[0]}5`):""}function RO(t){return t.split(`
`).map(e=>e.replace(/^\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z)\s*/,"").replace(/\+\d+\s*ms$/,"")).join(`
`)}var TO=ye($x());function BO({title:t,user:e="prisma",repo:r="prisma",template:n="bug_report.yml",body:i}){return(0,TO.default)({user:e,repo:r,template:n,title:t,body:i})}function OO({version:t,binaryTarget:e,title:r,description:n,engineVersion:i,database:s,query:o}){let a=cC(6e3-(o?.length??0)),c=RO((0,zb.default)(a)),f=n?`# Description
\`\`\`
${n}
\`\`\``:"",d=(0,zb.default)(`Hi Prisma Team! My Prisma Client just crashed. This is the report:
## Versions

| Name            | Version            |
|-----------------|--------------------|
| Node            | ${process.version?.padEnd(19)}| 
| OS              | ${e?.padEnd(19)}|
| Prisma Client   | ${t?.padEnd(19)}|
| Query Engine    | ${i?.padEnd(19)}|
| Database        | ${s?.padEnd(19)}|

${f}

## Logs
\`\`\`
${c}
\`\`\`

## Client Snippet
\`\`\`ts
// PLEASE FILL YOUR CODE SNIPPET HERE
\`\`\`

## Schema
\`\`\`prisma
// PLEASE ADD YOUR SCHEMA HERE IF POSSIBLE
\`\`\`

## Prisma Engine Query
\`\`\`
${o?PO(o):""}
\`\`\`
`),h=BO({title:r,body:d});return`${r}

This is a non-recoverable error which probably happens when the Prisma Query Engine has a panic.

${Kt(h)}

If you want the Prisma team to look into it, please open the link above \u{1F64F}
To increase the chance of success, please post your schema and a snippet of
how you used Prisma Client in the issue. 
`}function Gv(t){return t.name==="DriverAdapterError"&&typeof t.cause=="object"}function yh(t){return{ok:!0,value:t,map(e){return yh(e(t))},flatMap(e){return e(t)}}}function Qi(t){return{ok:!1,error:t,map(){return Qi(t)},flatMap(){return Qi(t)}}}var Yv=st("driver-adapter-utils"),IO=class{registeredErrors=[];consumeError(t){return this.registeredErrors[t]}registerNewError(t){let e=0;for(;this.registeredErrors[e]!==void 0;)e++;return this.registeredErrors[e]={error:t},e}},NO=(t,e=new IO)=>{let r={adapterName:t.adapterName,errorRegistry:e,queryRaw:Kr(e,t.queryRaw.bind(t)),executeRaw:Kr(e,t.executeRaw.bind(t)),executeScript:Kr(e,t.executeScript.bind(t)),dispose:Kr(e,t.dispose.bind(t)),provider:t.provider,startTransaction:async(...n)=>(await Kr(e,t.startTransaction.bind(t))(...n)).map(i=>UO(e,i))};return t.getConnectionInfo&&(r.getConnectionInfo=$O(e,t.getConnectionInfo.bind(t))),r},UO=(t,e)=>({adapterName:e.adapterName,provider:e.provider,options:e.options,queryRaw:Kr(t,e.queryRaw.bind(e)),executeRaw:Kr(t,e.executeRaw.bind(e)),commit:Kr(t,e.commit.bind(e)),rollback:Kr(t,e.rollback.bind(e))});function Kr(t,e){return async(...r)=>{try{return yh(await e(...r))}catch(n){if(Yv("[error@wrapAsync]",n),Gv(n))return Qi(n.cause);let i=t.registerNewError(n);return Qi({kind:"GenericJs",id:i})}}}function $O(t,e){return(...r)=>{try{return yh(e(...r))}catch(n){if(Yv("[error@wrapSync]",n),Gv(n))return Qi(n.cause);let i=t.registerNewError(n);return Qi({kind:"GenericJs",id:i})}}}function bh({inlineDatasources:t,overrideDatasources:e,env:r,clientVersion:n}){let i,s=Object.keys(t)[0],o=t[s]?.url,a=e[s]?.url;if(s===void 0?i=void 0:a?i=a:o?.value?i=o.value:o?.fromEnvVar&&(i=r[o.fromEnvVar]),o?.fromEnvVar!==void 0&&i===void 0)throw new Ie(`error: Environment variable not found: ${o.fromEnvVar}.`,n);if(i===void 0)throw new Ie("error: Missing URL environment variable, value, or override.",n);return i}var DO=class extends Error{clientVersion;cause;constructor(t,e){super(t),this.clientVersion=e.clientVersion,this.cause=e.cause}get[Symbol.toStringTag](){return this.name}},Xi=class extends DO{isRetryable;constructor(t,e){super(t,e),this.isRetryable=e.isRetryable??!0}};function Xe(t,e){return{...t,isRetryable:e}}var zd=class extends Xi{name="ForcedRetryError";code="P5001";constructor(t){super("This request must be retried",Xe(t,!0))}};Be(zd,"ForcedRetryError");var fc=class extends Xi{name="InvalidDatasourceError";code="P6001";constructor(t,e){super(t,Xe(e,!1))}};Be(fc,"InvalidDatasourceError");var wh=class extends Xi{name="NotImplementedYetError";code="P5004";constructor(t,e){super(t,Xe(e,!1))}};Be(wh,"NotImplementedYetError");var Lt=class extends Xi{response;constructor(t,e){super(t,e),this.response=e.response;let r=this.response.headers.get("prisma-request-id");if(r){let n=`(The request id was: ${r})`;this.message=this.message+" "+n}}},vh=class extends Lt{name="SchemaMissingError";code="P5005";constructor(t){super("Schema needs to be uploaded",Xe(t,!0))}};Be(vh,"SchemaMissingError");var Qv="This request could not be understood by the server",Zv=class extends Lt{name="BadRequestError";code="P5000";constructor(t,e,r){super(e||Qv,Xe(t,!1)),r&&(this.code=r)}};Be(Zv,"BadRequestError");var Xv=class extends Lt{name="HealthcheckTimeoutError";code="P5013";logs;constructor(t,e){super("Engine not started: healthcheck timeout",Xe(t,!0)),this.logs=e}};Be(Xv,"HealthcheckTimeoutError");var e0=class extends Lt{name="EngineStartupError";code="P5014";logs;constructor(t,e,r){super(e,Xe(t,!0)),this.logs=r}};Be(e0,"EngineStartupError");var t0=class extends Lt{name="EngineVersionNotSupportedError";code="P5012";constructor(t){super("Engine version is not supported",Xe(t,!1))}};Be(t0,"EngineVersionNotSupportedError");var r0="Request timed out",n0=class extends Lt{name="GatewayTimeoutError";code="P5009";constructor(t,e=r0){super(e,Xe(t,!1))}};Be(n0,"GatewayTimeoutError");var KO="Interactive transaction error",i0=class extends Lt{name="InteractiveTransactionError";code="P5015";constructor(t,e=KO){super(e,Xe(t,!1))}};Be(i0,"InteractiveTransactionError");var qO="Request parameters are invalid",s0=class extends Lt{name="InvalidRequestError";code="P5011";constructor(t,e=qO){super(e,Xe(t,!1))}};Be(s0,"InvalidRequestError");var o0="Requested resource does not exist",a0=class extends Lt{name="NotFoundError";code="P5003";constructor(t,e=o0){super(e,Xe(t,!1))}};Be(a0,"NotFoundError");var l0="Unknown server error",Jd=class extends Lt{name="ServerError";code="P5006";logs;constructor(t,e,r){super(e||l0,Xe(t,!0)),this.logs=r}};Be(Jd,"ServerError");var c0="Unauthorized, check your connection string",u0=class extends Lt{name="UnauthorizedError";code="P5007";constructor(t,e=c0){super(e,Xe(t,!1))}};Be(u0,"UnauthorizedError");var f0="Usage exceeded, retry again later",d0=class extends Lt{name="UsageExceededError";code="P5008";constructor(t,e=f0){super(e,Xe(t,!0))}};Be(d0,"UsageExceededError");async function LO(t){let e;try{e=await t.text()}catch{return{type:"EmptyError"}}try{let r=JSON.parse(e);if(typeof r=="string")switch(r){case"InternalDataProxyError":return{type:"DataProxyError",body:r};default:return{type:"UnknownTextError",body:r}}if(typeof r=="object"&&r!==null){if("is_panic"in r&&"message"in r&&"error_code"in r)return{type:"QueryEngineError",body:r};if("EngineNotStarted"in r||"InteractiveTransactionMisrouted"in r||"InvalidRequestError"in r){let n=Object.values(r)[0].reason;return typeof n=="string"&&!["SchemaMissing","EngineVersionNotSupported"].includes(n)?{type:"UnknownJsonError",body:r}:{type:"DataProxyError",body:r}}}return{type:"UnknownJsonError",body:r}}catch{return e===""?{type:"EmptyError"}:{type:"UnknownTextError",body:e}}}async function rc(t,e){if(t.ok)return;let r={clientVersion:e,response:t},n=await LO(t);if(n.type==="QueryEngineError")throw new Sn(n.body.message,{code:n.body.error_code,clientVersion:e});if(n.type==="DataProxyError"){if(n.body==="InternalDataProxyError")throw new Jd(r,"Internal Data Proxy error");if("EngineNotStarted"in n.body){if(n.body.EngineNotStarted.reason==="SchemaMissing")return new vh(r);if(n.body.EngineNotStarted.reason==="EngineVersionNotSupported")throw new t0(r);if("EngineStartupError"in n.body.EngineNotStarted.reason){let{msg:i,logs:s}=n.body.EngineNotStarted.reason.EngineStartupError;throw new e0(r,i,s)}if("KnownEngineStartupError"in n.body.EngineNotStarted.reason){let{msg:i,error_code:s}=n.body.EngineNotStarted.reason.KnownEngineStartupError;throw new Ie(i,e,s)}if("HealthcheckTimeout"in n.body.EngineNotStarted.reason){let{logs:i}=n.body.EngineNotStarted.reason.HealthcheckTimeout;throw new Xv(r,i)}}if("InteractiveTransactionMisrouted"in n.body){let i={IDParseError:"Could not parse interactive transaction ID",NoQueryEngineFoundError:"Could not find Query Engine for the specified host and transaction ID",TransactionStartError:"Could not start interactive transaction"};throw new i0(r,i[n.body.InteractiveTransactionMisrouted.reason])}if("InvalidRequestError"in n.body)throw new s0(r,n.body.InvalidRequestError.reason)}if(t.status===401||t.status===403)throw new u0(r,Hi(c0,n));if(t.status===404)return new a0(r,Hi(o0,n));if(t.status===429)throw new d0(r,Hi(f0,n));if(t.status===504)throw new n0(r,Hi(r0,n));if(t.status>=500)throw new Jd(r,Hi(l0,n));if(t.status>=400)throw new Zv(r,Hi(Qv,n))}function Hi(t,e){return e.type==="EmptyError"?t:`${t}: ${JSON.stringify(e)}`}function jO(t){let e=Math.pow(2,t)*50,r=Math.ceil(Math.random()*e)-Math.ceil(e/2),n=e+r;return new Promise(i=>setTimeout(()=>i(n),n))}var Dr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function MO(t){let e=new TextEncoder().encode(t),r="",n=e.byteLength,i=n%3,s=n-i,o,a,c,f,d;for(let h=0;h<s;h=h+3)d=e[h]<<16|e[h+1]<<8|e[h+2],o=(d&16515072)>>18,a=(d&258048)>>12,c=(d&4032)>>6,f=d&63,r+=Dr[o]+Dr[a]+Dr[c]+Dr[f];return i==1?(d=e[s],o=(d&252)>>2,a=(d&3)<<4,r+=Dr[o]+Dr[a]+"=="):i==2&&(d=e[s]<<8|e[s+1],o=(d&64512)>>10,a=(d&1008)>>4,c=(d&15)<<2,r+=Dr[o]+Dr[a]+Dr[c]+"="),r}function FO(t){if(t.generator?.previewFeatures.some(e=>e.toLowerCase().includes("metrics")))throw new Ie("The `metrics` preview feature is not yet available with Accelerate.\nPlease remove `metrics` from the `previewFeatures` in your schema.\n\nMore information about Accelerate: https://pris.ly/d/accelerate",t.clientVersion)}function VO(t){return t[0]*1e3+t[1]/1e6}function Jb(t){return new Date(VO(t))}var HO={"@prisma/debug":"workspace:*","@prisma/engines-version":"6.7.0-36.3cff47a7f5d65c3ea74883f1d736e41d68ce91ed","@prisma/fetch-engine":"workspace:*","@prisma/get-platform":"workspace:*"},h0=class extends Xi{name="RequestError";code="P5010";constructor(t,e){super(`Cannot fetch data from service:
${t}`,Xe(e,!0))}};Be(h0,"RequestError");async function oo(t,e,r=n=>n){let{clientVersion:n,...i}=e,s=r(fetch);try{return await s(t,i)}catch(o){let a=o.message??"Unknown error";throw new h0(a,{clientVersion:n,cause:o})}}var WO=/^[1-9][0-9]*\.[0-9]+\.[0-9]+$/,p0=st("prisma:client:dataproxyEngine");async function zO(t,e){let r=HO["@prisma/engines-version"],n=e.clientVersion??"unknown";if(process.env.PRISMA_CLIENT_DATA_PROXY_CLIENT_VERSION)return process.env.PRISMA_CLIENT_DATA_PROXY_CLIENT_VERSION;if(t.includes("accelerate")&&n!=="0.0.0"&&n!=="in-memory")return n;let[i,s]=n?.split("-")??[];if(s===void 0&&WO.test(i))return i;if(s!==void 0||n==="0.0.0"||n==="in-memory"){if(t.startsWith("localhost")||t.startsWith("127.0.0.1"))return"0.0.0";let[o]=r.split("-")??[],[a,c,f]=o.split("."),d=GO(`<=${a}.${c}.${f}`),h=await oo(d,{clientVersion:n});if(!h.ok)throw new Error(`Failed to fetch stable Prisma version, unpkg.com status ${h.status} ${h.statusText}, response body: ${await h.text()||"<empty body>"}`);let m=await h.text();p0("length of body fetched from unpkg.com",m.length);let b;try{b=JSON.parse(m)}catch(y){throw console.error("JSON.parse error: body fetched from unpkg.com: ",m),y}return b.version}throw new wh("Only `major.minor.patch` versions are supported by Accelerate.",{clientVersion:n})}async function JO(t,e){let r=await zO(t,e);return p0("version",r),r}function GO(t){return encodeURI(`https://unpkg.com/prisma@${t}/package.json`)}var Gb=3,nc=st("prisma:client:dataproxyEngine"),YO=class{apiKey;tracingHelper;logLevel;logQueries;engineHash;constructor({apiKey:t,tracingHelper:e,logLevel:r,logQueries:n,engineHash:i}){this.apiKey=t,this.tracingHelper=e,this.logLevel=r,this.logQueries=n,this.engineHash=i}build({traceparent:t,interactiveTransaction:e}={}){let r={Authorization:`Bearer ${this.apiKey}`,"Prisma-Engine-Hash":this.engineHash};this.tracingHelper.isEnabled()&&(r.traceparent=t??this.tracingHelper.getTraceParent()),e&&(r["X-transaction-id"]=e.id);let n=this.buildCaptureSettings();return n.length>0&&(r["X-capture-telemetry"]=n.join(", ")),r}buildCaptureSettings(){let t=[];return this.tracingHelper.isEnabled()&&t.push("tracing"),this.logLevel&&t.push(this.logLevel),this.logQueries&&t.push("query"),t}},QO=class{name="DataProxyEngine";inlineSchema;inlineSchemaHash;inlineDatasources;config;logEmitter;env;clientVersion;engineHash;tracingHelper;remoteClientVersion;host;headerBuilder;startPromise;constructor(t){FO(t),this.config=t,this.env={...t.env,...typeof process<"u"?process.env:{}},this.inlineSchema=MO(t.inlineSchema),this.inlineDatasources=t.inlineDatasources,this.inlineSchemaHash=t.inlineSchemaHash,this.clientVersion=t.clientVersion,this.engineHash=t.engineVersion,this.logEmitter=t.logEmitter,this.tracingHelper=t.tracingHelper}apiKey(){return this.headerBuilder.apiKey}version(){return this.engineHash}async start(){this.startPromise!==void 0&&await this.startPromise,this.startPromise=(async()=>{let[t,e]=this.extractHostAndApiKey();this.host=t,this.headerBuilder=new YO({apiKey:e,tracingHelper:this.tracingHelper,logLevel:this.config.logLevel,logQueries:this.config.logQueries,engineHash:this.engineHash}),this.remoteClientVersion=await JO(t,this.config),nc("host",this.host)})(),await this.startPromise}async stop(){}propagateResponseExtensions(t){t?.logs?.length&&t.logs.forEach(e=>{switch(e.level){case"debug":case"trace":nc(e);break;case"error":case"warn":case"info":{this.logEmitter.emit(e.level,{timestamp:Jb(e.timestamp),message:e.attributes.message??"",target:e.target});break}case"query":{this.logEmitter.emit("query",{query:e.attributes.query??"",timestamp:Jb(e.timestamp),duration:e.attributes.duration_ms??0,params:e.attributes.params??"",target:e.target});break}default:e.level}}),t?.traces?.length&&this.tracingHelper.dispatchEngineSpans(t.traces)}onBeforeExit(){throw new Error('"beforeExit" hook is not applicable to the remote query engine')}async url(t){return await this.start(),`https://${this.host}/${this.remoteClientVersion}/${this.inlineSchemaHash}/${t}`}async uploadSchema(){let t={name:"schemaUpload",internal:!0};return this.tracingHelper.runInChildSpan(t,async()=>{let e=await oo(await this.url("schema"),{method:"PUT",headers:this.headerBuilder.build(),body:this.inlineSchema,clientVersion:this.clientVersion});e.ok||nc("schema response status",e.status);let r=await rc(e,this.clientVersion);if(r)throw this.logEmitter.emit("warn",{message:`Error while uploading schema: ${r.message}`,timestamp:new Date,target:""}),r;this.logEmitter.emit("info",{message:`Schema (re)uploaded (hash: ${this.inlineSchemaHash})`,timestamp:new Date,target:""})})}request(t,{traceparent:e,interactiveTransaction:r,customDataProxyFetch:n}){return this.requestInternal({body:t,traceparent:e,interactiveTransaction:r,customDataProxyFetch:n})}async requestBatch(t,{traceparent:e,transaction:r,customDataProxyFetch:n}){let i=r?.kind==="itx"?r.options:void 0,s=ph(t,r);return(await this.requestInternal({body:s,customDataProxyFetch:n,interactiveTransaction:i,traceparent:e})).map(o=>(o.extensions&&this.propagateResponseExtensions(o.extensions),"errors"in o?this.convertProtocolErrorsToClientError(o.errors):o))}requestInternal({body:t,traceparent:e,customDataProxyFetch:r,interactiveTransaction:n}){return this.withRetry({actionGerund:"querying",callback:async({logHttpCall:i})=>{let s=n?`${n.payload.endpoint}/graphql`:await this.url("graphql");i(s);let o=await oo(s,{method:"POST",headers:this.headerBuilder.build({traceparent:e,interactiveTransaction:n}),body:JSON.stringify(t),clientVersion:this.clientVersion},r);o.ok||nc("graphql response status",o.status),await this.handleError(await rc(o,this.clientVersion));let a=await o.json();if(a.extensions&&this.propagateResponseExtensions(a.extensions),"errors"in a)throw this.convertProtocolErrorsToClientError(a.errors);return"batchResult"in a?a.batchResult:a}})}async transaction(t,e,r){let n={start:"starting",commit:"committing",rollback:"rolling back"};return this.withRetry({actionGerund:`${n[t]} transaction`,callback:async({logHttpCall:i})=>{if(t==="start"){let s=JSON.stringify({max_wait:r.maxWait,timeout:r.timeout,isolation_level:r.isolationLevel}),o=await this.url("transaction/start");i(o);let a=await oo(o,{method:"POST",headers:this.headerBuilder.build({traceparent:e.traceparent}),body:s,clientVersion:this.clientVersion});await this.handleError(await rc(a,this.clientVersion));let c=await a.json(),{extensions:f}=c;f&&this.propagateResponseExtensions(f);let d=c.id,h=c["data-proxy"].endpoint;return{id:d,payload:{endpoint:h}}}else{let s=`${r.payload.endpoint}/${t}`;i(s);let o=await oo(s,{method:"POST",headers:this.headerBuilder.build({traceparent:e.traceparent}),clientVersion:this.clientVersion});await this.handleError(await rc(o,this.clientVersion));let a=await o.json(),{extensions:c}=a;c&&this.propagateResponseExtensions(c);return}}})}extractHostAndApiKey(){let t={clientVersion:this.clientVersion},e=Object.keys(this.inlineDatasources)[0],r=bh({inlineDatasources:this.inlineDatasources,overrideDatasources:this.config.overrideDatasources,clientVersion:this.clientVersion,env:this.env}),n;try{n=new URL(r)}catch{throw new fc(`Error validating datasource \`${e}\`: the URL must start with the protocol \`prisma://\``,t)}let{protocol:i,host:s,searchParams:o}=n;if(i!=="prisma:"&&i!==Dw)throw new fc(`Error validating datasource \`${e}\`: the URL must start with the protocol \`prisma://\``,t);let a=o.get("api_key");if(a===null||a.length<1)throw new fc(`Error validating datasource \`${e}\`: the URL must contain a valid API key`,t);return[s,a]}metrics(){throw new wh("Metrics are not yet supported for Accelerate",{clientVersion:this.clientVersion})}async withRetry(t){for(let e=0;;e++){let r=n=>{this.logEmitter.emit("info",{message:`Calling ${n} (n=${e})`,timestamp:new Date,target:""})};try{return await t.callback({logHttpCall:r})}catch(n){if(!(n instanceof Xi)||!n.isRetryable)throw n;if(e>=Gb)throw n instanceof zd?n.cause:n;this.logEmitter.emit("warn",{message:`Attempt ${e+1}/${Gb} failed for ${t.actionGerund}: ${n.message??"(unknown)"}`,timestamp:new Date,target:""});let i=await jO(e);this.logEmitter.emit("warn",{message:`Retrying after ${i}ms`,timestamp:new Date,target:""})}}}async handleError(t){if(t instanceof vh)throw await this.uploadSchema(),new zd({clientVersion:this.clientVersion,cause:t});if(t)throw t}convertProtocolErrorsToClientError(t){return t.length===1?mh(t[0],this.config.clientVersion,this.config.activeProvider):new Tt(JSON.stringify(t),{clientVersion:this.config.clientVersion})}applyPendingMigrations(){throw new Error("Method not implemented.")}};function ZO(t){if(t?.kind==="itx")return t.options.id}var Yb=ye($("node:os")),XO=ye($("node:path")),gd=Symbol("PrismaLibraryEngineCache");function eI(){let t=globalThis;return t[gd]===void 0&&(t[gd]={}),t[gd]}function tI(t){let e=eI();if(e[t]!==void 0)return e[t];let r=XO.default.toNamespacedPath(t),n={exports:{}},i=0;return process.platform!=="win32"&&(i=Yb.default.constants.dlopen.RTLD_LAZY|Yb.default.constants.dlopen.RTLD_DEEPBIND),process.dlopen(n,r,i),e[t]=n.exports,n.exports}var rI={async loadLibrary(t){let e=await NC(),r=await xO("library",t);try{return t.tracingHelper.runInChildSpan({name:"loadLibrary",internal:!0},()=>tI(r))}catch(n){let i=vP({e:n,platformInfo:e,id:r});throw new Ie(i,t.clientVersion)}}},yd,nI={async loadLibrary(t){let{clientVersion:e,adapter:r,engineWasm:n}=t;if(r===void 0)throw new Ie(`The \`adapter\` option for \`PrismaClient\` is required in this context (${Vv().prettyName})`,e);if(n===void 0)throw new Ie("WASM engine was unexpectedly `undefined`",e);yd===void 0&&(yd=(async()=>{let s=await n.getRuntime(),o=await n.getQueryEngineWasmModule();if(o==null)throw new Ie("The loaded wasm module was unexpectedly `undefined` or `null` once loaded",e);let a={"./query_engine_bg.js":s},c=new WebAssembly.Instance(o,a),f=c.exports.__wbindgen_start;return s.__wbg_set_wasm(c.exports),f(),s.QueryEngine})());let i=await yd;return{debugPanic(){return Promise.reject("{}")},dmmf(){return Promise.resolve("{}")},version(){return{commit:"unknown",version:"unknown"}},QueryEngine:i}}},iI="P2036",dr=st("prisma:client:libraryEngine");function sI(t){return t.item_type==="query"&&"query"in t}function oI(t){return"level"in t?t.level==="error"&&t.message==="PANIC":!1}var Qb=[...hC,"native"],aI=0xffffffffffffffffn,bd=1n;function lI(){let t=bd++;return bd>aI&&(bd=1n),t}var Zb=class{name="LibraryEngine";engine;libraryInstantiationPromise;libraryStartingPromise;libraryStoppingPromise;libraryStarted;executingQueryPromise;config;QueryEngineConstructor;libraryLoader;library;logEmitter;libQueryEnginePath;binaryTarget;datasourceOverrides;datamodel;logQueries;logLevel;lastQuery;loggerRustPanic;tracingHelper;adapterPromise;versionInfo;constructor(t,e){this.libraryLoader=e??rI,t.engineWasm!==void 0&&(this.libraryLoader=e??nI),this.config=t,this.libraryStarted=!1,this.logQueries=t.logQueries??!1,this.logLevel=t.logLevel??"error",this.logEmitter=t.logEmitter,this.datamodel=t.inlineSchema,this.tracingHelper=t.tracingHelper,t.enableDebugLogs&&(this.logLevel="debug");let r=Object.keys(t.overrideDatasources)[0],n=t.overrideDatasources[r]?.url;r!==void 0&&n!==void 0&&(this.datasourceOverrides={[r]:n}),this.libraryInstantiationPromise=this.instantiateLibrary()}wrapEngine(t){return{applyPendingMigrations:t.applyPendingMigrations?.bind(t),commitTransaction:this.withRequestId(t.commitTransaction.bind(t)),connect:this.withRequestId(t.connect.bind(t)),disconnect:this.withRequestId(t.disconnect.bind(t)),metrics:t.metrics?.bind(t),query:this.withRequestId(t.query.bind(t)),rollbackTransaction:this.withRequestId(t.rollbackTransaction.bind(t)),sdlSchema:t.sdlSchema?.bind(t),startTransaction:this.withRequestId(t.startTransaction.bind(t)),trace:t.trace.bind(t)}}withRequestId(t){return async(...e)=>{let r=lI().toString();try{return await t(...e,r)}finally{if(this.tracingHelper.isEnabled()){let n=await this.engine?.trace(r);if(n){let i=JSON.parse(n);this.tracingHelper.dispatchEngineSpans(i.spans)}}}}}async applyPendingMigrations(){throw new Error("Cannot call this method from this type of engine instance")}async transaction(t,e,r){await this.start();let n=await this.adapterPromise,i=JSON.stringify(e),s;if(t==="start"){let a=JSON.stringify({max_wait:r.maxWait,timeout:r.timeout,isolation_level:r.isolationLevel});s=await this.engine?.startTransaction(a,i)}else t==="commit"?s=await this.engine?.commitTransaction(r.id,i):t==="rollback"&&(s=await this.engine?.rollbackTransaction(r.id,i));let o=this.parseEngineResponse(s);if(cI(o)){let a=this.getExternalAdapterError(o,n?.errorRegistry);throw a?a.error:new Sn(o.message,{code:o.error_code,clientVersion:this.config.clientVersion,meta:o.meta})}else if(typeof o.message=="string")throw new Tt(o.message,{clientVersion:this.config.clientVersion});return o}async instantiateLibrary(){if(dr("internalSetup"),this.libraryInstantiationPromise)return this.libraryInstantiationPromise;dC(),this.binaryTarget=await this.getCurrentBinaryTarget(),await this.tracingHelper.runInChildSpan("load_engine",()=>this.loadEngine()),this.version()}async getCurrentBinaryTarget(){{if(this.binaryTarget)return this.binaryTarget;let t=await this.tracingHelper.runInChildSpan("detect_platform",()=>Zd());if(!Qb.includes(t))throw new Ie(`Unknown ${fi("PRISMA_QUERY_ENGINE_LIBRARY")} ${fi(er(t))}. Possible binaryTargets: ${po(Qb.join(", "))} or a path to the query engine library.
You may have to run ${po("prisma generate")} for your changes to take effect.`,this.config.clientVersion);return t}}parseEngineResponse(t){if(!t)throw new Tt("Response from the Engine was empty",{clientVersion:this.config.clientVersion});try{return JSON.parse(t)}catch{throw new Tt("Unable to JSON.parse response from engine",{clientVersion:this.config.clientVersion})}}async loadEngine(){if(!this.engine){this.QueryEngineConstructor||(this.library=await this.libraryLoader.loadLibrary(this.config),this.QueryEngineConstructor=this.library.QueryEngine);try{let t=new WeakRef(this);this.adapterPromise||(this.adapterPromise=this.config.adapter?.connect()?.then(NO));let e=await this.adapterPromise;e&&dr("Using driver adapter: %O",e),this.engine=this.wrapEngine(new this.QueryEngineConstructor({datamodel:this.datamodel,env:process.env,logQueries:this.config.logQueries??!1,ignoreEnvVarErrors:!0,datasourceOverrides:this.datasourceOverrides??{},logLevel:this.logLevel,configDir:this.config.cwd,engineProtocol:"json",enableTracing:this.tracingHelper.isEnabled()},r=>{t.deref()?.logger(r)},e))}catch(t){let e=t,r=this.parseInitError(e.message);throw typeof r=="string"?e:new Ie(r.message,this.config.clientVersion,r.error_code)}}}logger(t){let e=this.parseEngineResponse(t);e&&(e.level=e?.level.toLowerCase()??"unknown",sI(e)?this.logEmitter.emit("query",{timestamp:new Date,query:e.query,params:e.params,duration:Number(e.duration_ms),target:e.module_path}):oI(e)?this.loggerRustPanic=new wn(wd(this,`${e.message}: ${e.reason} in ${e.file}:${e.line}:${e.column}`),this.config.clientVersion):this.logEmitter.emit(e.level,{timestamp:new Date,message:e.message,target:e.module_path}))}parseInitError(t){try{return JSON.parse(t)}catch{}return t}parseRequestError(t){try{return JSON.parse(t)}catch{}return t}onBeforeExit(){throw new Error('"beforeExit" hook is not applicable to the library engine since Prisma 5.0.0, it is only relevant and implemented for the binary engine. Please add your event listener to the `process` object directly instead.')}async start(){if(await this.libraryInstantiationPromise,await this.libraryStoppingPromise,this.libraryStartingPromise)return dr(`library already starting, this.libraryStarted: ${this.libraryStarted}`),this.libraryStartingPromise;if(this.libraryStarted)return;let t=async()=>{dr("library starting");try{let e={traceparent:this.tracingHelper.getTraceParent()};await this.engine?.connect(JSON.stringify(e)),this.libraryStarted=!0,dr("library started")}catch(e){let r=this.parseInitError(e.message);throw typeof r=="string"?e:new Ie(r.message,this.config.clientVersion,r.error_code)}finally{this.libraryStartingPromise=void 0}};return this.libraryStartingPromise=this.tracingHelper.runInChildSpan("connect",t),this.libraryStartingPromise}async stop(){if(await this.libraryInstantiationPromise,await this.libraryStartingPromise,await this.executingQueryPromise,this.libraryStoppingPromise)return dr("library is already stopping"),this.libraryStoppingPromise;if(!this.libraryStarted)return;let t=async()=>{await new Promise(r=>setTimeout(r,5)),dr("library stopping");let e={traceparent:this.tracingHelper.getTraceParent()};await this.engine?.disconnect(JSON.stringify(e)),this.libraryStarted=!1,this.libraryStoppingPromise=void 0,await(await this.adapterPromise)?.dispose(),this.adapterPromise=void 0,dr("library stopped")};return this.libraryStoppingPromise=this.tracingHelper.runInChildSpan("disconnect",t),this.libraryStoppingPromise}version(){return this.versionInfo=this.library?.version(),this.versionInfo?.version??"unknown"}debugPanic(t){return this.library?.debugPanic(t)}async request(t,{traceparent:e,interactiveTransaction:r}){dr(`sending request, this.libraryStarted: ${this.libraryStarted}`);let n=JSON.stringify({traceparent:e}),i=JSON.stringify(t);try{await this.start();let s=await this.adapterPromise;this.executingQueryPromise=this.engine?.query(i,n,r?.id),this.lastQuery=i;let o=this.parseEngineResponse(await this.executingQueryPromise);if(o.errors)throw o.errors.length===1?this.buildQueryError(o.errors[0],s?.errorRegistry):new Tt(JSON.stringify(o.errors),{clientVersion:this.config.clientVersion});if(this.loggerRustPanic)throw this.loggerRustPanic;return{data:o}}catch(s){if(s instanceof Ie)throw s;if(s.code==="GenericFailure"&&s.message?.startsWith("PANIC:"))throw new wn(wd(this,s.message),this.config.clientVersion);let o=this.parseRequestError(s.message);throw typeof o=="string"?s:new Tt(`${o.message}
${o.backtrace}`,{clientVersion:this.config.clientVersion})}}async requestBatch(t,{transaction:e,traceparent:r}){dr("requestBatch");let n=ph(t,e);await this.start();let i=await this.adapterPromise;this.lastQuery=JSON.stringify(n),this.executingQueryPromise=this.engine.query(this.lastQuery,JSON.stringify({traceparent:r}),ZO(e));let s=await this.executingQueryPromise,o=this.parseEngineResponse(s);if(o.errors)throw o.errors.length===1?this.buildQueryError(o.errors[0],i?.errorRegistry):new Tt(JSON.stringify(o.errors),{clientVersion:this.config.clientVersion});let{batchResult:a,errors:c}=o;if(Array.isArray(a))return a.map(f=>f.errors&&f.errors.length>0?this.loggerRustPanic??this.buildQueryError(f.errors[0],i?.errorRegistry):{data:f});throw c&&c.length===1?new Error(c[0].error):new Error(JSON.stringify(o))}buildQueryError(t,e){if(t.user_facing_error.is_panic)return new wn(wd(this,t.user_facing_error.message),this.config.clientVersion);let r=this.getExternalAdapterError(t.user_facing_error,e);return r?r.error:mh(t,this.config.clientVersion,this.config.activeProvider)}getExternalAdapterError(t,e){if(t.error_code===iI&&e){let r=t.meta?.id;Pb(typeof r=="number","Malformed external JS error received from the engine");let n=e.consumeError(r);return Pb(n,"External error with reported id was not registered"),n}}async metrics(t){await this.start();let e=await this.engine.metrics(JSON.stringify(t));return t.format==="prometheus"?e:this.parseEngineResponse(e)}};function cI(t){return typeof t=="object"&&t!==null&&t.error_code!==void 0}function wd(t,e){return OO({binaryTarget:t.binaryTarget,title:e,version:t.config.clientVersion,engineVersion:t.versionInfo?.commit,database:t.config.activeProvider,query:t.lastQuery})}function uI({copyEngine:t=!0},e){let r;try{r=bh({inlineDatasources:e.inlineDatasources,overrideDatasources:e.overrideDatasources,env:{...e.env,...process.env},clientVersion:e.clientVersion})}catch{}let n=!!(r?.startsWith("prisma://")||_P(r));t&&n&&Fw("recommend--no-engine","In production, we recommend using `prisma generate --no-engine` (See: `prisma generate --help`)");let i=Pd(e.generator),s=n||!t,o=!!e.adapter,a=i==="library",c=i==="binary",f=i==="client";if(s&&o||o&&!1){let d;throw t?r?.startsWith("prisma://")?d=["Prisma Client was configured to use the `adapter` option but the URL was a `prisma://` URL.","Please either use the `prisma://` URL or remove the `adapter` from the Prisma Client constructor."]:d=["Prisma Client was configured to use both the `adapter` and Accelerate, please chose one."]:d=["Prisma Client was configured to use the `adapter` option but `prisma generate` was run with `--no-engine`.","Please run `prisma generate` without `--no-engine` to be able to use Prisma Client with the adapter."],new qr(d.join(`
`),{clientVersion:e.clientVersion})}return s?new QO(e):a?new Zb(e):new Zb(e)}function m0({generator:t}){return t?.previewFeatures??[]}var fI=t=>({command:t}),dI=t=>t.strings.reduce((e,r,n)=>`${e}@P${n}${r}`);function io(t){try{return Xb(t,"fast")}catch{return Xb(t,"slow")}}function Xb(t,e){return JSON.stringify(t.map(r=>g0(r,e)))}function g0(t,e){if(Array.isArray(t))return t.map(r=>g0(r,e));if(typeof t=="bigint")return{prisma__type:"bigint",prisma__value:t.toString()};if(ih(t))return{prisma__type:"date",prisma__value:t.toJSON()};if(ko.isDecimal(t))return{prisma__type:"decimal",prisma__value:t.toJSON()};if(Buffer.isBuffer(t))return{prisma__type:"bytes",prisma__value:t.toString("base64")};if(hI(t))return{prisma__type:"bytes",prisma__value:Buffer.from(t).toString("base64")};if(ArrayBuffer.isView(t)){let{buffer:r,byteOffset:n,byteLength:i}=t;return{prisma__type:"bytes",prisma__value:Buffer.from(r,n,i).toString("base64")}}return typeof t=="object"&&e==="slow"?y0(t):t}function hI(t){return t instanceof ArrayBuffer||t instanceof SharedArrayBuffer?!0:typeof t=="object"&&t!==null?t[Symbol.toStringTag]==="ArrayBuffer"||t[Symbol.toStringTag]==="SharedArrayBuffer":!1}function y0(t){if(typeof t!="object"||t===null)return t;if(typeof t.toJSON=="function")return t.toJSON();if(Array.isArray(t))return t.map(ew);let e={};for(let r of Object.keys(t))e[r]=ew(t[r]);return e}function ew(t){return typeof t=="bigint"?t.toString():y0(t)}var pI=/^(\s*alter\s)/i,tw=st("prisma:client");function rw(t,e,r,n){if(!(t!=="postgresql"&&t!=="cockroachdb")&&r.length>0&&pI.exec(e))throw new Error(`Running ALTER using ${n} is not supported
Using the example below you can still execute your query with Prisma, but please note that it is vulnerable to SQL injection attacks and requires you to take care of input sanitization.

Example:
  await prisma.$executeRawUnsafe(\`ALTER USER prisma WITH PASSWORD '\${password}'\`)

More Information: https://pris.ly/d/execute-raw
`)}var nw=({clientMethod:t,activeProvider:e})=>r=>{let n="",i;if(Nv(r))n=r.sql,i={values:io(r.values),__prismaRawParameters__:!0};else if(Array.isArray(r)){let[s,...o]=r;n=s,i={values:io(o||[]),__prismaRawParameters__:!0}}else switch(e){case"sqlite":case"mysql":{n=r.sql,i={values:io(r.values),__prismaRawParameters__:!0};break}case"cockroachdb":case"postgresql":case"postgres":{n=r.text,i={values:io(r.values),__prismaRawParameters__:!0};break}case"sqlserver":{n=dI(r),i={values:io(r.values),__prismaRawParameters__:!0};break}default:throw new Error(`The ${e} provider does not support ${t}`)}return i?.values?tw(`prisma.${t}(${n}, ${i.values})`):tw(`prisma.${t}(${n})`),{query:n,parameters:i}},mI={requestArgsToMiddlewareArgs(t){return[t.strings,...t.values]},middlewareArgsToRequestArgs(t){let[e,...r]=t;return new _n(e,r)}},gI={requestArgsToMiddlewareArgs(t){return[t]},middlewareArgsToRequestArgs(t){return t[0]}};function iw(t){return function(e,r){let n,i=(s=t)=>{try{return s===void 0||s?.kind==="itx"?n??=sw(e(s)):sw(e(s))}catch(o){return Promise.reject(o)}};return{get spec(){return r},then(s,o){return i().then(s,o)},catch(s){return i().catch(s)},finally(s){return i().finally(s)},requestTransaction(s){let o=i(s);return o.requestTransaction?o.requestTransaction(s):o},[Symbol.toStringTag]:"PrismaPromise"}}}function sw(t){return typeof t.then=="function"?t:Promise.resolve(t)}var yI=mP.split(".")[0],bI={isEnabled(){return!1},getTraceParent(){return"00-10-10-00"},dispatchEngineSpans(){},getActiveContext(){},runInChildSpan(t,e){return e()}},wI=class{isEnabled(){return this.getGlobalTracingHelper().isEnabled()}getTraceParent(t){return this.getGlobalTracingHelper().getTraceParent(t)}dispatchEngineSpans(t){return this.getGlobalTracingHelper().dispatchEngineSpans(t)}getActiveContext(){return this.getGlobalTracingHelper().getActiveContext()}runInChildSpan(t,e){return this.getGlobalTracingHelper().runInChildSpan(t,e)}getGlobalTracingHelper(){let t=globalThis[`V${yI}_PRISMA_INSTRUMENTATION`],e=globalThis.PRISMA_INSTRUMENTATION;return t?.helper??e?.helper??bI}};function vI(){return new wI}function SI(t,e=()=>{}){let r,n=new Promise(i=>r=i);return{then(i){return--t===0&&r(e()),i?.(n)}}}function EI(t){return typeof t=="string"?t:t.reduce((e,r)=>{let n=typeof r=="string"?r:r.level;return n==="query"?e:e&&(r==="info"||e==="info")?"info":n},void 0)}var AI=class{_middlewares=[];use(t){this._middlewares.push(t)}get(t){return this._middlewares[t]}has(t){return!!this._middlewares[t]}length(){return this._middlewares.length}},_I=ye(bw());function b0(t){return typeof t.batchRequestIdx=="number"}function kI(t){if(t.action!=="findUnique"&&t.action!=="findUniqueOrThrow")return;let e=[];return t.modelName&&e.push(t.modelName),t.query.arguments&&e.push(Gd(t.query.arguments)),e.push(Gd(t.query.selection)),e.join("")}function Gd(t){return`(${Object.keys(t).sort().map(e=>{let r=t[e];return typeof r=="object"&&r!==null?`(${e} ${Gd(r)})`:e}).join(" ")})`}var xI={aggregate:!1,aggregateRaw:!1,createMany:!0,createManyAndReturn:!0,createOne:!0,deleteMany:!0,deleteOne:!0,executeRaw:!0,findFirst:!1,findFirstOrThrow:!1,findMany:!1,findRaw:!1,findUnique:!1,findUniqueOrThrow:!1,groupBy:!1,queryRaw:!1,runCommandRaw:!0,updateMany:!0,updateManyAndReturn:!0,updateOne:!0,upsertOne:!0};function ow(t){return xI[t]}var CI=class{constructor(t){this.options=t,this.batches={}}batches;tickActive=!1;request(t){let e=this.options.batchBy(t);return e?(this.batches[e]||(this.batches[e]=[],this.tickActive||(this.tickActive=!0,process.nextTick(()=>{this.dispatchBatches(),this.tickActive=!1}))),new Promise((r,n)=>{this.batches[e].push({request:t,resolve:r,reject:n})})):this.options.singleLoader(t)}dispatchBatches(){for(let t in this.batches){let e=this.batches[t];delete this.batches[t],e.length===1?this.options.singleLoader(e[0].request).then(r=>{r instanceof Error?e[0].reject(r):e[0].resolve(r)}).catch(r=>{e[0].reject(r)}):(e.sort((r,n)=>this.options.batchOrder(r.request,n.request)),this.options.batchLoader(e.map(r=>r.request)).then(r=>{if(r instanceof Error)for(let n=0;n<e.length;n++)e[n].reject(r);else for(let n=0;n<e.length;n++){let i=r[n];i instanceof Error?e[n].reject(i):e[n].resolve(i)}}).catch(r=>{for(let n=0;n<e.length;n++)e[n].reject(r)}))}}get[Symbol.toStringTag](){return"DataLoader"}};function ci(t,e){if(e===null)return e;switch(t){case"bigint":return BigInt(e);case"bytes":{let{buffer:r,byteOffset:n,byteLength:i}=Buffer.from(e,"base64");return new Uint8Array(r,n,i)}case"decimal":return new ko(e);case"datetime":case"date":return new Date(e);case"time":return new Date(`1970-01-01T${e}Z`);case"bigint-array":return e.map(r=>ci("bigint",r));case"bytes-array":return e.map(r=>ci("bytes",r));case"decimal-array":return e.map(r=>ci("decimal",r));case"datetime-array":return e.map(r=>ci("datetime",r));case"date-array":return e.map(r=>ci("date",r));case"time-array":return e.map(r=>ci("time",r));default:return e}}function w0(t){let e=[],r=PI(t);for(let n=0;n<t.rows.length;n++){let i=t.rows[n],s={...r};for(let o=0;o<i.length;o++)s[t.columns[o]]=ci(t.types[o],i[o]);e.push(s)}return e}function PI(t){let e={};for(let r=0;r<t.columns.length;r++)e[t.columns[r]]=null;return e}var RI=st("prisma:client:request_handler"),TI=class{client;dataloader;logEmitter;constructor(t,e){this.logEmitter=e,this.client=t,this.dataloader=new CI({batchLoader:aO(async({requests:r,customDataProxyFetch:n})=>{let{transaction:i,otelParentCtx:s}=r[0],o=r.map(f=>f.protocolQuery),a=this.client._tracingHelper.getTraceParent(s),c=r.some(f=>ow(f.protocolQuery.action));return(await this.client._engine.requestBatch(o,{traceparent:a,transaction:BI(i),containsWrite:c,customDataProxyFetch:n})).map((f,d)=>{if(f instanceof Error)return f;try{return this.mapQueryEngineResult(r[d],f)}catch(h){return h}})}),singleLoader:async r=>{let n=r.transaction?.kind==="itx"?v0(r.transaction):void 0,i=await this.client._engine.request(r.protocolQuery,{traceparent:this.client._tracingHelper.getTraceParent(),interactiveTransaction:n,isWrite:ow(r.protocolQuery.action),customDataProxyFetch:r.customDataProxyFetch});return this.mapQueryEngineResult(r,i)},batchBy:r=>r.transaction?.id?`transaction-${r.transaction.id}`:kI(r.protocolQuery),batchOrder(r,n){return r.transaction?.kind==="batch"&&n.transaction?.kind==="batch"?r.transaction.index-n.transaction.index:0}})}async request(t){try{return await this.dataloader.request(t)}catch(e){let{clientMethod:r,callsite:n,transaction:i,args:s,modelName:o}=t;this.handleAndLogRequestError({error:e,clientMethod:r,callsite:n,transaction:i,args:s,modelName:o,globalOmit:t.globalOmit})}}mapQueryEngineResult({dataPath:t,unpacker:e},r){let n=r?.data,i=this.unpack(n,t,e);return process.env.PRISMA_CLIENT_GET_TIME?{data:i}:i}handleAndLogRequestError(t){try{this.handleRequestError(t)}catch(e){throw this.logEmitter&&this.logEmitter.emit("error",{message:e.message,target:t.clientMethod,timestamp:new Date}),e}}handleRequestError({error:t,clientMethod:e,callsite:r,transaction:n,args:i,modelName:s,globalOmit:o}){if(RI(t),OI(t,n))throw t;if(t instanceof Sn&&II(t)){let c=S0(t.meta);Ev({args:i,errors:[c],callsite:r,errorFormat:this.client._errorFormat,originalMethod:e,clientVersion:this.client._clientVersion,globalOmit:o})}let a=t.message;if(r&&(a=iv({callsite:r,originalMethod:e,isPanic:t.isPanic,showColors:this.client._errorFormat==="pretty",message:a})),a=this.sanitizeMessage(a),t.code){let c=s?{modelName:s,...t.meta}:t.meta;throw new Sn(a,{code:t.code,clientVersion:this.client._clientVersion,meta:c,batchRequestIdx:t.batchRequestIdx})}else{if(t.isPanic)throw new wn(a,this.client._clientVersion);if(t instanceof Tt)throw new Tt(a,{clientVersion:this.client._clientVersion,batchRequestIdx:t.batchRequestIdx});if(t instanceof Ie)throw new Ie(a,this.client._clientVersion);if(t instanceof wn)throw new wn(a,this.client._clientVersion)}throw t.clientVersion=this.client._clientVersion,t}sanitizeMessage(t){return this.client._errorFormat&&this.client._errorFormat!=="pretty"?(0,_I.default)(t):t}unpack(t,e,r){if(!t||(t.data&&(t=t.data),!t))return t;let n=Object.keys(t)[0],i=Object.values(t)[0],s=e.filter(c=>c!=="select"&&c!=="include"),o=qv(i,s),a=n==="queryRaw"?w0(o):yc(o);return r?r(a):a}get[Symbol.toStringTag](){return"RequestHandler"}};function BI(t){if(t){if(t.kind==="batch")return{kind:"batch",options:{isolationLevel:t.isolationLevel}};if(t.kind==="itx")return{kind:"itx",options:v0(t)};Ec(t,"Unknown transaction kind")}}function v0(t){return{id:t.id,payload:t.payload}}function OI(t,e){return b0(t)&&e?.kind==="batch"&&t.batchRequestIdx!==e.index}function II(t){return t.code==="P2009"||t.code==="P2012"}function S0(t){if(t.kind==="Union")return{kind:"Union",errors:t.errors.map(S0)};if(Array.isArray(t.selectionPath)){let[,...e]=t.selectionPath;return{...t,selectionPath:e}}return t}var NI="6.7.0",UI=NI,$I=ye(ww()),_e=class extends Error{constructor(t){super(t+`
Read more at https://pris.ly/d/client-constructor`),this.name="PrismaClientConstructorValidationError"}get[Symbol.toStringTag](){return"PrismaClientConstructorValidationError"}};Be(_e,"PrismaClientConstructorValidationError");var aw=["datasources","datasourceUrl","errorFormat","adapter","log","transactionOptions","omit","__internal"],lw=["pretty","colorless","minimal"],cw=["info","query","warn","error"],DI={datasources:(t,{datasourceNames:e})=>{if(t){if(typeof t!="object"||Array.isArray(t))throw new _e(`Invalid value ${JSON.stringify(t)} for "datasources" provided to PrismaClient constructor`);for(let[r,n]of Object.entries(t)){if(!e.includes(r)){let i=Wi(r,e)||` Available datasources: ${e.join(", ")}`;throw new _e(`Unknown datasource ${r} provided to PrismaClient constructor.${i}`)}if(typeof n!="object"||Array.isArray(n))throw new _e(`Invalid value ${JSON.stringify(t)} for datasource "${r}" provided to PrismaClient constructor.
It should have this form: { url: "CONNECTION_STRING" }`);if(n&&typeof n=="object")for(let[i,s]of Object.entries(n)){if(i!=="url")throw new _e(`Invalid value ${JSON.stringify(t)} for datasource "${r}" provided to PrismaClient constructor.
It should have this form: { url: "CONNECTION_STRING" }`);if(typeof s!="string")throw new _e(`Invalid value ${JSON.stringify(s)} for datasource "${r}" provided to PrismaClient constructor.
It should have this form: { url: "CONNECTION_STRING" }`)}}}},adapter:(t,e)=>{if(!t&&Pd(e.generator)==="client")throw new _e('Using engine type "client" requires a driver adapter to be provided to PrismaClient constructor.');if(t!==null){if(t===void 0)throw new _e('"adapter" property must not be undefined, use null to conditionally disable driver adapters.');if(!m0(e).includes("driverAdapters"))throw new _e('"adapter" property can only be provided to PrismaClient constructor when "driverAdapters" preview feature is enabled.');if(Pd(e.generator)==="binary")throw new _e('Cannot use a driver adapter with the "binary" Query Engine. Please use the "library" Query Engine.')}},datasourceUrl:t=>{if(typeof t<"u"&&typeof t!="string")throw new _e(`Invalid value ${JSON.stringify(t)} for "datasourceUrl" provided to PrismaClient constructor.
Expected string or undefined.`)},errorFormat:t=>{if(t){if(typeof t!="string")throw new _e(`Invalid value ${JSON.stringify(t)} for "errorFormat" provided to PrismaClient constructor.`);if(!lw.includes(t)){let e=Wi(t,lw);throw new _e(`Invalid errorFormat ${t} provided to PrismaClient constructor.${e}`)}}},log:t=>{if(!t)return;if(!Array.isArray(t))throw new _e(`Invalid value ${JSON.stringify(t)} for "log" provided to PrismaClient constructor.`);function e(r){if(typeof r=="string"&&!cw.includes(r)){let n=Wi(r,cw);throw new _e(`Invalid log level "${r}" provided to PrismaClient constructor.${n}`)}}for(let r of t){e(r);let n={level:e,emit:i=>{let s=["stdout","event"];if(!s.includes(i)){let o=Wi(i,s);throw new _e(`Invalid value ${JSON.stringify(i)} for "emit" in logLevel provided to PrismaClient constructor.${o}`)}}};if(r&&typeof r=="object")for(let[i,s]of Object.entries(r))if(n[i])n[i](s);else throw new _e(`Invalid property ${i} for "log" provided to PrismaClient constructor`)}},transactionOptions:t=>{if(!t)return;let e=t.maxWait;if(e!=null&&e<=0)throw new _e(`Invalid value ${e} for maxWait in "transactionOptions" provided to PrismaClient constructor. maxWait needs to be greater than 0`);let r=t.timeout;if(r!=null&&r<=0)throw new _e(`Invalid value ${r} for timeout in "transactionOptions" provided to PrismaClient constructor. timeout needs to be greater than 0`)},omit:(t,e)=>{if(typeof t!="object")throw new _e('"omit" option is expected to be an object.');if(t===null)throw new _e('"omit" option can not be `null`');let r=[];for(let[n,i]of Object.entries(t)){let s=LI(n,e.runtimeDataModel);if(!s){r.push({kind:"UnknownModel",modelKey:n});continue}for(let[o,a]of Object.entries(i)){let c=s.fields.find(f=>f.name===o);if(!c){r.push({kind:"UnknownField",modelKey:n,fieldName:o});continue}if(c.relationName){r.push({kind:"RelationInOmit",modelKey:n,fieldName:o});continue}typeof a!="boolean"&&r.push({kind:"InvalidFieldValue",modelKey:n,fieldName:o})}}if(r.length>0)throw new _e(jI(t,r))},__internal:t=>{if(!t)return;let e=["debug","engine","configOverride"];if(typeof t!="object")throw new _e(`Invalid value ${JSON.stringify(t)} for "__internal" to PrismaClient constructor`);for(let[r]of Object.entries(t))if(!e.includes(r)){let n=Wi(r,e);throw new _e(`Invalid property ${JSON.stringify(r)} for "__internal" provided to PrismaClient constructor.${n}`)}}};function KI(t,e){for(let[r,n]of Object.entries(t)){if(!aw.includes(r)){let i=Wi(r,aw);throw new _e(`Unknown property ${r} provided to PrismaClient constructor.${i}`)}DI[r](n,e)}if(t.datasourceUrl&&t.datasources)throw new _e('Can not use "datasourceUrl" and "datasources" options at the same time. Pick one of them')}function Wi(t,e){if(e.length===0||typeof t!="string")return"";let r=qI(t,e);return r?` Did you mean "${r}"?`:""}function qI(t,e){if(e.length===0)return null;let r=e.map(i=>({value:i,distance:(0,$I.default)(t,i)}));r.sort((i,s)=>i.distance<s.distance?-1:1);let n=r[0];return n.distance<3?n.value:null}function LI(t,e){return uw(e.models,t)??uw(e.types,t)}function uw(t,e){let r=Object.keys(t).find(n=>xc(n)===e);if(r)return t[r]}function jI(t,e){let r=fh(t);for(let s of e)switch(s.kind){case"UnknownModel":r.arguments.getField(s.modelKey)?.markAsError(),r.addErrorMessage(()=>`Unknown model name: ${s.modelKey}.`);break;case"UnknownField":r.arguments.getDeepField([s.modelKey,s.fieldName])?.markAsError(),r.addErrorMessage(()=>`Model "${s.modelKey}" does not have a field named "${s.fieldName}".`);break;case"RelationInOmit":r.arguments.getDeepField([s.modelKey,s.fieldName])?.markAsError(),r.addErrorMessage(()=>'Relations are already excluded by default and can not be specified in "omit".');break;case"InvalidFieldValue":r.arguments.getDeepFieldValue([s.modelKey,s.fieldName])?.markAsError(),r.addErrorMessage(()=>"Omit field option value must be a boolean.");break}let{message:n,args:i}=Sv(r,"colorless");return`Error validating "omit" option:

${i}

${n}`}function MI(t){return t.length===0?Promise.resolve([]):new Promise((e,r)=>{let n=new Array(t.length),i=null,s=!1,o=0,a=()=>{s||(o++,o===t.length&&(s=!0,i?r(i):e(n)))},c=f=>{s||(s=!0,r(f))};for(let f=0;f<t.length;f++)t[f].then(d=>{n[f]=d,a()},d=>{if(!b0(d)){c(d);return}d.batchRequestIdx===f?c(d):(i||(i=d),a())})})}var dn=st("prisma:client");typeof globalThis=="object"&&(globalThis.NODE_CLIENT=!0);var FI={requestArgsToMiddlewareArgs:t=>t,middlewareArgsToRequestArgs:t=>t},VI=Symbol.for("prisma.client.transaction.id"),HI={id:0,nextId(){return++this.id}};function WI(t){class e{_originalClient=this;_runtimeDataModel;_requestHandler;_connectionPromise;_disconnectionPromise;_engineConfig;_accelerateEngineConfig;_clientVersion;_errorFormat;_tracingHelper;_middlewares=new AI;_previewFeatures;_activeProvider;_globalOmit;_extensions;_engine;_appliedParent;_createPrismaPromise=iw();constructor(n){t=n?.__internal?.configOverride?.(t)??t,lO(t),n&&KI(n,t);let i=new rB.EventEmitter().on("error",()=>{});this._extensions=Av.empty(),this._previewFeatures=m0(t),this._clientVersion=t.clientVersion??UI,this._activeProvider=t.activeProvider,this._globalOmit=n?.omit,this._tracingHelper=vI();let s=t.relativeEnvPaths&&{rootEnvPath:t.relativeEnvPaths.rootEnvPath&&md.default.resolve(t.dirname,t.relativeEnvPaths.rootEnvPath),schemaEnvPath:t.relativeEnvPaths.schemaEnvPath&&md.default.resolve(t.dirname,t.relativeEnvPaths.schemaEnvPath)},o;if(n?.adapter){o=n.adapter;let c=t.activeProvider==="postgresql"?"postgres":t.activeProvider;if(o.provider!==c)throw new Ie(`The Driver Adapter \`${o.adapterName}\`, based on \`${o.provider}\`, is not compatible with the provider \`${c}\` specified in the Prisma schema.`,this._clientVersion);if(n.datasources||n.datasourceUrl!==void 0)throw new Ie("Custom datasource configuration is not compatible with Prisma Driver Adapters. Please define the database connection string directly in the Driver Adapter configuration.",this._clientVersion)}let a=!o&&s&&jw(s,{conflictCheck:"none"})||t.injectableEdgeEnv?.();try{let c=n??{},f=c.__internal??{},d=f.debug===!0;d&&st.enable("prisma:client");let h=md.default.resolve(t.dirname,t.relativePath);nB.default.existsSync(h)||(h=t.dirname),dn("dirname",t.dirname),dn("relativePath",t.relativePath),dn("cwd",h);let m=f.engine||{};if(c.errorFormat?this._errorFormat=c.errorFormat:process.env.NODE_ENV==="production"?this._errorFormat="minimal":process.env.NO_COLOR?this._errorFormat="colorless":this._errorFormat="colorless",this._runtimeDataModel=t.runtimeDataModel,this._engineConfig={cwd:h,dirname:t.dirname,enableDebugLogs:d,allowTriggerPanic:m.allowTriggerPanic,prismaPath:m.binaryPath??void 0,engineEndpoint:m.endpoint,generator:t.generator,showColors:this._errorFormat==="pretty",logLevel:c.log&&EI(c.log),logQueries:c.log&&!!(typeof c.log=="string"?c.log==="query":c.log.find(b=>typeof b=="string"?b==="query":b.level==="query")),env:a?.parsed??{},flags:[],engineWasm:t.engineWasm,compilerWasm:t.compilerWasm,clientVersion:t.clientVersion,engineVersion:t.engineVersion,previewFeatures:this._previewFeatures,activeProvider:t.activeProvider,inlineSchema:t.inlineSchema,overrideDatasources:cO(c,t.datasourceNames),inlineDatasources:t.inlineDatasources,inlineSchemaHash:t.inlineSchemaHash,tracingHelper:this._tracingHelper,transactionOptions:{maxWait:c.transactionOptions?.maxWait??2e3,timeout:c.transactionOptions?.timeout??5e3,isolationLevel:c.transactionOptions?.isolationLevel},logEmitter:i,isBundled:t.isBundled,adapter:o},this._accelerateEngineConfig={...this._engineConfig,accelerateUtils:{resolveDatasourceUrl:bh,getBatchRequestPayload:ph,prismaGraphQLToJSError:mh,PrismaClientUnknownRequestError:Tt,PrismaClientInitializationError:Ie,PrismaClientKnownRequestError:Sn,debug:st("prisma:client:accelerateEngine"),engineVersion:eB.version,clientVersion:t.clientVersion}},dn("clientVersion",t.clientVersion),this._engine=uI(t,this._engineConfig),this._requestHandler=new TI(this,i),c.log)for(let b of c.log){let y=typeof b=="string"?b:b.emit==="stdout"?b.level:null;y&&this.$on(y,w=>{Rd.log(`${Rd.tags[y]??""}`,w.message||w.query)})}}catch(c){throw c.clientVersion=this._clientVersion,c}return this._appliedParent=Wd(this)}get[Symbol.toStringTag](){return"PrismaClient"}$use(n){this._middlewares.use(n)}$on(n,i){return n==="beforeExit"?this._engine.onBeforeExit(i):n&&this._engineConfig.logEmitter.on(n,i),this}$connect(){try{return this._engine.start()}catch(n){throw n.clientVersion=this._clientVersion,n}}async $disconnect(){try{await this._engine.stop()}catch(n){throw n.clientVersion=this._clientVersion,n}finally{uC()}}$executeRawInternal(n,i,s,o){let a=this._activeProvider;return this._request({action:"executeRaw",args:s,transaction:n,clientMethod:i,argsMapper:nw({clientMethod:i,activeProvider:a}),callsite:fo(this._errorFormat),dataPath:[],middlewareArgsMapper:o})}$executeRaw(n,...i){return this._createPrismaPromise(s=>{if(n.raw!==void 0||n.sql!==void 0){let[o,a]=fw(n,i);return rw(this._activeProvider,o.text,o.values,Array.isArray(n)?"prisma.$executeRaw`<SQL>`":"prisma.$executeRaw(sql`<SQL>`)"),this.$executeRawInternal(s,"$executeRaw",o,a)}throw new qr("`$executeRaw` is a tag function, please use it like the following:\n```\nconst result = await prisma.$executeRaw`UPDATE User SET cool = ${true} WHERE email = ${'user@email.com'};`\n```\n\nOr read our docs at https://www.prisma.io/docs/concepts/components/prisma-client/raw-database-access#executeraw\n",{clientVersion:this._clientVersion})})}$executeRawUnsafe(n,...i){return this._createPrismaPromise(s=>(rw(this._activeProvider,n,i,"prisma.$executeRawUnsafe(<SQL>, [...values])"),this.$executeRawInternal(s,"$executeRawUnsafe",[n,...i])))}$runCommandRaw(n){if(t.activeProvider!=="mongodb")throw new qr(`The ${t.activeProvider} provider does not support $runCommandRaw. Use the mongodb provider.`,{clientVersion:this._clientVersion});return this._createPrismaPromise(i=>this._request({args:n,clientMethod:"$runCommandRaw",dataPath:[],action:"runCommandRaw",argsMapper:fI,callsite:fo(this._errorFormat),transaction:i}))}async $queryRawInternal(n,i,s,o){let a=this._activeProvider;return this._request({action:"queryRaw",args:s,transaction:n,clientMethod:i,argsMapper:nw({clientMethod:i,activeProvider:a}),callsite:fo(this._errorFormat),dataPath:[],middlewareArgsMapper:o})}$queryRaw(n,...i){return this._createPrismaPromise(s=>{if(n.raw!==void 0||n.sql!==void 0)return this.$queryRawInternal(s,"$queryRaw",...fw(n,i));throw new qr("`$queryRaw` is a tag function, please use it like the following:\n```\nconst result = await prisma.$queryRaw`SELECT * FROM User WHERE id = ${1} OR email = ${'user@email.com'};`\n```\n\nOr read our docs at https://www.prisma.io/docs/concepts/components/prisma-client/raw-database-access#queryraw\n",{clientVersion:this._clientVersion})})}$queryRawTyped(n){return this._createPrismaPromise(i=>{if(!this._hasPreviewFlag("typedSql"))throw new qr("`typedSql` preview feature must be enabled in order to access $queryRawTyped API",{clientVersion:this._clientVersion});return this.$queryRawInternal(i,"$queryRawTyped",n)})}$queryRawUnsafe(n,...i){return this._createPrismaPromise(s=>this.$queryRawInternal(s,"$queryRawUnsafe",[n,...i]))}_transactionWithArray({promises:n,options:i}){let s=HI.nextId(),o=SI(n.length),a=n.map((c,f)=>{if(c?.[Symbol.toStringTag]!=="PrismaPromise")throw new Error("All elements of the array need to be Prisma Client promises. Hint: Please make sure you are not awaiting the Prisma client calls you intended to pass in the $transaction function.");let d=i?.isolationLevel??this._engineConfig.transactionOptions.isolationLevel,h={kind:"batch",id:s,index:f,isolationLevel:d,lock:o};return c.requestTransaction?.(h)??c});return MI(a)}async _transactionWithCallback({callback:n,options:i}){let s={traceparent:this._tracingHelper.getTraceParent()},o={maxWait:i?.maxWait??this._engineConfig.transactionOptions.maxWait,timeout:i?.timeout??this._engineConfig.transactionOptions.timeout,isolationLevel:i?.isolationLevel??this._engineConfig.transactionOptions.isolationLevel},a=await this._engine.transaction("start",s,o),c;try{let f={kind:"itx",...a};c=await n(this._createItxClient(f)),await this._engine.transaction("commit",s,a)}catch(f){throw await this._engine.transaction("rollback",s,a).catch(()=>{}),f}return c}_createItxClient(n){return Yi(Wd(Yi(GB(this),[br("_appliedParent",()=>this._appliedParent._createItxClient(n)),br("_createPrismaPromise",()=>iw(n)),br(VI,()=>n.id)])),[Fd(rO)])}$transaction(n,i){let s;typeof n=="function"?this._engineConfig.adapter?.adapterName==="@prisma/adapter-d1"?s=()=>{throw new Error("Cloudflare D1 does not support interactive transactions. We recommend you to refactor your queries with that limitation in mind, and use batch transactions with `prisma.$transactions([])` where applicable.")}:s=()=>this._transactionWithCallback({callback:n,options:i}):s=()=>this._transactionWithArray({promises:n,options:i});let o={name:"transaction",attributes:{method:"$transaction"}};return this._tracingHelper.runInChildSpan(o,s)}_request(n){n.otelParentCtx=this._tracingHelper.getActiveContext();let i=n.middlewareArgsMapper??FI,s={args:i.requestArgsToMiddlewareArgs(n.args),dataPath:n.dataPath,runInTransaction:!!n.transaction,action:n.action,model:n.model},o={middleware:{name:"middleware",middleware:!0,attributes:{method:"$use"},active:!1},operation:{name:"operation",attributes:{method:s.action,model:s.model,name:s.model?`${s.model}.${s.action}`:s.action}}},a=-1,c=async f=>{let d=this._middlewares.get(++a);if(d)return this._tracingHelper.runInChildSpan(o.middleware,S=>d(f,_=>(S?.end(),c(_))));let{runInTransaction:h,args:m,...b}=f,y={...n,...b};m&&(y.args=i.middlewareArgsToRequestArgs(m)),n.transaction!==void 0&&h===!1&&delete y.transaction;let w=await oO(this,y);return y.model?eO({result:w,modelName:y.model,args:y.args,extensions:this._extensions,runtimeDataModel:this._runtimeDataModel,globalOmit:this._globalOmit}):w};return this._tracingHelper.runInChildSpan(o.operation,()=>new tB.AsyncResource("prisma-client-request").runInAsyncScope(()=>c(s)))}async _executeRequest({args:n,clientMethod:i,dataPath:s,callsite:o,action:a,model:c,argsMapper:f,transaction:d,unpacker:h,otelParentCtx:m,customDataProxyFetch:b}){try{n=f?f(n):n;let y={name:"serialize"},w=this._tracingHelper.runInChildSpan(y,()=>Rv({modelName:c,runtimeDataModel:this._runtimeDataModel,action:a,args:n,clientMethod:i,callsite:o,extensions:this._extensions,errorFormat:this._errorFormat,clientVersion:this._clientVersion,previewFeatures:this._previewFeatures,globalOmit:this._globalOmit}));return st.enabled("prisma:client")&&(dn("Prisma Client call:"),dn(`prisma.${i}(${lB(n)})`),dn("Generated request:"),dn(JSON.stringify(w,null,2)+`
`)),d?.kind==="batch"&&await d.lock,this._requestHandler.request({protocolQuery:w,modelName:c,action:a,clientMethod:i,dataPath:s,callsite:o,args:n,extensions:this._extensions,transaction:d,unpacker:h,otelParentCtx:m,otelChildCtx:this._tracingHelper.getActiveContext(),globalOmit:this._globalOmit,customDataProxyFetch:b})}catch(y){throw y.clientVersion=this._clientVersion,y}}$metrics=new Ov(this);_hasPreviewFlag(n){return!!this._engineConfig.previewFeatures?.includes(n)}$applyPendingMigrations(){return this._engine.applyPendingMigrations()}$extends=YB}return e}function fw(t,e){return zI(t)?[new _n(t,e),mI]:[t,gI]}function zI(t){return Array.isArray(t)&&Array.isArray(t.raw)}var JI=new Set(["toJSON","$$typeof","asymmetricMatch",Symbol.iterator,Symbol.toStringTag,Symbol.isConcatSpreadable,Symbol.toPrimitive]);function GI(t){return new Proxy(t,{get(e,r){if(r in e)return e[r];if(!JI.has(r))throw new TypeError(`Invalid enum value: ${String(r)}`)}})}function YI(t){jw(t,{conflictCheck:"warn"})}});var k0=at(Je=>{"use strict";Object.defineProperty(Je,"__esModule",{value:!0});var{PrismaClientKnownRequestError:QI,PrismaClientUnknownRequestError:ZI,PrismaClientRustPanicError:XI,PrismaClientInitializationError:eN,PrismaClientValidationError:tN,getPrismaClient:rN,sqltag:nN,empty:iN,join:sN,raw:oN,skip:fq,Decimal:aN,Debug:dq,objectEnumValues:es,makeStrictEnum:lN,Extensions:_0,warnOnce:hq,defineDmmfProperty:cN,Public:uN,getRuntime:pq,createParam:mq}=Sh(),xe={};Je.Prisma=xe;Je.$Enums={};xe.prismaVersion={client:"6.8.2",engine:"2060c79ba17c6bb9f5823312b6f6b7f4a845738e"};xe.PrismaClientKnownRequestError=QI;xe.PrismaClientUnknownRequestError=ZI;xe.PrismaClientRustPanicError=XI;xe.PrismaClientInitializationError=eN;xe.PrismaClientValidationError=tN;xe.Decimal=aN;xe.sql=nN;xe.empty=iN;xe.join=sN;xe.raw=oN;xe.validator=uN.validator;xe.getExtensionContext=_0.getExtensionContext;xe.defineExtension=_0.defineExtension;xe.DbNull=es.instances.DbNull;xe.JsonNull=es.instances.JsonNull;xe.AnyNull=es.instances.AnyNull;xe.NullTypes={DbNull:es.classes.DbNull,JsonNull:es.classes.JsonNull,AnyNull:es.classes.AnyNull};var Mr=$("path");Je.Prisma.TransactionIsolationLevel=lN({ReadUncommitted:"ReadUncommitted",ReadCommitted:"ReadCommitted",RepeatableRead:"RepeatableRead",Serializable:"Serializable"});Je.Prisma.UserScalarFieldEnum={id:"id",firstName:"firstName",lastName:"lastName",createdAt:"createdAt",birthday:"birthday",imageUrl:"imageUrl",profileImageUrl:"profileImageUrl",lastSignInAt:"lastSignInAt",updatedAt:"updatedAt",username:"username",privateMetadata:"privateMetadata",publicMetadata:"publicMetadata",unsafeMetadata:"unsafeMetadata"};Je.Prisma.EmailAddressScalarFieldEnum={id:"id",emailAddress:"emailAddress",object:"object",verification:"verification",userId:"userId",linkedTo:"linkedTo"};Je.Prisma.SortOrder={asc:"asc",desc:"desc"};Je.Prisma.NullableJsonNullValueInput={DbNull:xe.DbNull,JsonNull:xe.JsonNull};Je.Prisma.JsonNullValueInput={JsonNull:xe.JsonNull};Je.Prisma.QueryMode={default:"default",insensitive:"insensitive"};Je.Prisma.JsonNullValueFilter={DbNull:xe.DbNull,JsonNull:xe.JsonNull,AnyNull:xe.AnyNull};Je.Prisma.NullsOrder={first:"first",last:"last"};Je.Prisma.ModelName={User:"User",EmailAddress:"EmailAddress"};var vt={generator:{name:"client",provider:{fromEnvVar:null,value:"prisma-client-js"},output:{value:"C:\\Users\\ander\\\xC1rea de Trabalho\\rede-ct\\ws-rede-ct\\node_modules\\@prisma\\client",fromEnvVar:null},config:{engineType:"library"},binaryTargets:[{fromEnvVar:null,value:"windows",native:!0}],previewFeatures:[],sourceFilePath:"C:\\Users\\ander\\\xC1rea de Trabalho\\rede-ct\\ws-rede-ct\\prisma\\schema.prisma"},relativeEnvPaths:{rootEnvPath:null,schemaEnvPath:"../../../.env"},relativePath:"../../../prisma",clientVersion:"6.8.2",engineVersion:"2060c79ba17c6bb9f5823312b6f6b7f4a845738e",datasourceNames:["db"],activeProvider:"postgresql",inlineDatasources:{db:{url:{fromEnvVar:"DATABASE_URL",value:null}}},inlineSchema:`generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id              String         @id
  firstName       String
  lastName        String
  createdAt       DateTime       @default(now())
  birthday        DateTime?
  imageUrl        String?
  profileImageUrl String?
  lastSignInAt    DateTime?
  updatedAt       DateTime       @updatedAt
  username        String?
  emailAddresses  EmailAddress[] @relation("UserEmailAddresses")
  privateMetadata Json?
  publicMetadata  Json?
  unsafeMetadata  Json?
}

model EmailAddress {
  id            String @id
  emailAddress  String @unique
  object        String
  verification  Json
  userId        String
  userAddresses User   @relation("UserEmailAddresses", fields: [userId], references: [id], map: "EmailAddress_userId_fkey_2", onDelete: Cascade)
  linkedTo      Json?
}
`,inlineSchemaHash:"5a337b3cca2b0fbdbe18d663c668470246e7fe8843376b6ea2124f12a4ed2fc2",copyEngine:!0},A0=$("fs");vt.dirname=__dirname;if(!A0.existsSync(Mr.join(__dirname,"schema.prisma"))){let t=["node_modules/.prisma/client",".prisma/client"],e=t.find(r=>A0.existsSync(Mr.join(process.cwd(),r,"schema.prisma")))??t[0];vt.dirname=Mr.join(process.cwd(),e),vt.isBundled=!0}vt.runtimeDataModel=JSON.parse('{"models":{"User":{"dbName":null,"schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"firstName","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"lastName","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false},{"name":"birthday","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"DateTime","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"imageUrl","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"profileImageUrl","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"lastSignInAt","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"DateTime","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"updatedAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"DateTime","nativeType":null,"isGenerated":false,"isUpdatedAt":true},{"name":"username","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"emailAddresses","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"EmailAddress","nativeType":null,"relationName":"UserEmailAddresses","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"privateMetadata","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Json","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"publicMetadata","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Json","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"unsafeMetadata","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Json","nativeType":null,"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false},"EmailAddress":{"dbName":null,"schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"emailAddress","kind":"scalar","isList":false,"isRequired":true,"isUnique":true,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"object","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"verification","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Json","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"userId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"userAddresses","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"User","nativeType":null,"relationName":"UserEmailAddresses","relationFromFields":["userId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"linkedTo","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Json","nativeType":null,"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false}},"enums":{},"types":{}}');cN(Je.Prisma,vt.runtimeDataModel);vt.engineWasm=void 0;vt.compilerWasm=void 0;var{warnEnvConflicts:fN}=Sh();fN({rootEnvPath:vt.relativeEnvPaths.rootEnvPath&&Mr.resolve(vt.dirname,vt.relativeEnvPaths.rootEnvPath),schemaEnvPath:vt.relativeEnvPaths.schemaEnvPath&&Mr.resolve(vt.dirname,vt.relativeEnvPaths.schemaEnvPath)});var dN=rN(vt);Je.PrismaClient=dN;Object.assign(Je,xe);Mr.join(__dirname,"query_engine-windows.dll.node");Mr.join(process.cwd(),"node_modules/.prisma/client/query_engine-windows.dll.node");Mr.join(__dirname,"schema.prisma");Mr.join(process.cwd(),"node_modules/.prisma/client/schema.prisma")});var C0=at((yq,x0)=>{"use strict";x0.exports={...k0()}});var R0=at((bq,P0)=>{"use strict";P0.exports={...C0()}});import SN from"node:http";import Eh from"express";import wN from"cors";import{Router as fE}from"express";var hu=fE();hu.get("/",(t,e)=>{e.status(200).json({message:"Rede CT"})});import{Router as Sx}from"express";var dE=()=>{try{return process.env.NODE_ENV==="test"}catch{}return!1},hE=()=>{try{return process.env.NODE_ENV==="production"}catch{}return!1},Dp=new Set,de=(t,e,r)=>{let n=dE()||hE(),i=r??t;Dp.has(i)||n||(Dp.add(i),console.warn(`Clerk - DEPRECATION WARNING: "${t}" is deprecated and will be removed in the next major release.
${e}`))},In=(t,e,r,n=!1)=>{let i=n?t:t.prototype,s=i[e];Object.defineProperty(i,e,{get(){return de(e,r,`${t.name}:${e}`),s},set(o){s=o}})},gs=(t,e,r,n)=>{let i=t[e];Object.defineProperty(t,e,{get(){return de(e,r,n),i},set(s){i=s}})};function pE(t){return t.endsWith(".lclstage.dev")||t.endsWith(".stgstage.dev")||t.endsWith(".clerkstage.dev")||t.endsWith(".accountsstage.dev")}function pu(t){if(!t)return"";let e;if(t.match(/^(clerk\.)+\w*$/))e=/(clerk\.)*(?=clerk\.)/;else{if(t.match(/\.clerk.accounts/))return t;e=/^(clerk\.)*/gi}return`clerk.${t.replace(e,"")}`}var ua=(t,e)=>!e&&pE(t)?"canary":e&&e.split(".")[0]||"latest",mu=(t,{pkgVersion:e="4.73.9",clerkJSVersion:r})=>{let n=t.replace(/http(s)?:\/\//,""),i=ua(t,e);return`https://${n}/npm/@clerk/clerk-js@${r||i}/dist/clerk.browser.js`};function mE(t){return new Promise(e=>setTimeout(e,t))}var gE=5;async function ys(t,e=1,r=gE){try{return await t()}catch(n){if(e>=r)throw n;return await mE(2**e*100),ys(t,e+1,r)}}var ki=t=>typeof atob<"u"&&typeof atob=="function"?atob(t):typeof global<"u"&&global.Buffer?new global.Buffer(t,"base64").toString():t;var Kp="pk_live_",yE="pk_test_";function xi(t){if(t=t||"",!qp(t))return null;let e=t.startsWith(Kp)?"production":"development",r=ki(t.split("_")[2]);return r.endsWith("$")?(r=r.slice(0,-1),{instanceType:e,frontendApi:r}):null}function qp(t){t=t||"";let e=t.startsWith(Kp)||t.startsWith(yE),r=ki(t.split("_")[2]||"").endsWith("$");return e&&r}function gu(){let t=[".lcl.dev",".stg.dev",".lclstage.dev",".stgstage.dev",".dev.lclclerk.com",".stg.lclclerk.com",".accounts.lclclerk.com","accountsstage.dev","accounts.dev"],e=new Map;return{isDevOrStagingUrl:r=>{if(!r)return!1;let n=typeof r=="string"?r:r.hostname,i=e.get(n);return i===void 0&&(i=t.some(s=>n.endsWith(s)),e.set(n,i)),i}}}function Nn(t){return t.startsWith("test_")||t.startsWith("sk_test_")}function yu(t){return t.startsWith("live_")||t.startsWith("sk_live_")}function Lp(t=[]){return t.length>0?t.map(jp):[]}function jp(t){var e,r,n,i,s;return{code:t.code,message:t.message,longMessage:t.long_message,meta:{paramName:(e=t?.meta)==null?void 0:e.param_name,sessionId:(r=t?.meta)==null?void 0:r.session_id,emailAddresses:(n=t?.meta)==null?void 0:n.email_addresses,identifiers:(i=t?.meta)==null?void 0:i.identifiers,zxcvbn:(s=t?.meta)==null?void 0:s.zxcvbn}}}var bu=class Mp extends Error{constructor(e,{data:r,status:n,clerkTraceId:i}){super(e),this.toString=()=>{let s=`[${this.name}]
Message:${this.message}
Status:${this.status}
Serialized errors: ${this.errors.map(o=>JSON.stringify(o))}`;return this.clerkTraceId&&(s+=`
Clerk Trace ID: ${this.clerkTraceId}`),s},Object.setPrototypeOf(this,Mp.prototype),this.status=n,this.message=e,this.clerkTraceId=i,this.clerkError=!0,this.errors=Lp(r)}};var bE={Expired:"expired",Failed:"failed"},wE=new Proxy(bE,{get(t,e,r){return de("MagicLinkErrorCode","Use `EmailLinkErrorCode` instead."),Reflect.get(t,e,r)}});var vE=Object.freeze({InvalidFrontendApiErrorMessage:"The frontendApi passed to Clerk is invalid. You can get your Frontend API key at https://dashboard.clerk.com/last-active?path=api-keys. (key={{key}})",InvalidProxyUrlErrorMessage:"The proxyUrl passed to Clerk is invalid. The expected value for proxyUrl is an absolute URL or a relative path with a leading '/'. (key={{url}})",InvalidPublishableKeyErrorMessage:"The publishableKey passed to Clerk is invalid. You can get your Publishable key at https://dashboard.clerk.com/last-active?path=api-keys. (key={{key}})",MissingPublishableKeyErrorMessage:"Missing publishableKey. You can get your key at https://dashboard.clerk.com/last-active?path=api-keys."});function wu({packageName:t,customMessages:e}){let r=t,n={...vE,...e};function i(s,o){if(!o)return`${r}: ${s}`;let a=s,c=s.matchAll(/{{([a-zA-Z0-9-_]+)}}/g);for(let f of c){let d=(o[f[1]]||"").toString();a=a.replace(`{{${f[1]}}}`,d)}return`${r}: ${a}`}return{setPackageName({packageName:s}){return typeof s=="string"&&(r=s),this},setMessages({customMessages:s}){return Object.assign(n,s||{}),this},throwInvalidPublishableKeyError(s){throw new Error(i(n.InvalidPublishableKeyErrorMessage,s))},throwInvalidFrontendApiError(s){throw new Error(i(n.InvalidFrontendApiErrorMessage,s))},throwInvalidProxyUrl(s){throw new Error(i(n.InvalidProxyUrlErrorMessage,s))},throwMissingPublishableKeyError(){throw new Error(i(n.MissingPublishableKeyErrorMessage))}}}var Ay=On(fg()),b_=On(zg());var _y=On(Qg()),Yf=On(dy());var ib=On(hy());var gt=class{constructor(t){this.request=t}requireId(t){if(!t)throw new Error("A valid resource ID is required.")}},Gf="/",l_=new RegExp("(?<!:)"+Gf+"{1,}","g");function z(...t){return t.filter(e=>e).join(Gf).replace(l_,Gf)}var Mf="/allowlist_identifiers",c_=class extends gt{async getAllowlistIdentifierList(){return this.request({method:"GET",path:Mf})}async createAllowlistIdentifier(t){return this.request({method:"POST",path:Mf,bodyParams:t})}async deleteAllowlistIdentifier(t){return this.requireId(t),this.request({method:"DELETE",path:z(Mf,t)})}},Ff="/clients",u_=class extends gt{async getClientList(){return this.request({method:"GET",path:Ff})}async getClient(t){return this.requireId(t),this.request({method:"GET",path:z(Ff,t)})}verifyClient(t){return this.request({method:"POST",path:z(Ff,"verify"),bodyParams:{token:t}})}},f_="/domains",d_=class extends gt{async deleteDomain(t){return this.request({method:"DELETE",path:z(f_,t)})}},Ol="/email_addresses",h_=class extends gt{async getEmailAddress(t){return this.requireId(t),this.request({method:"GET",path:z(Ol,t)})}async createEmailAddress(t){return this.request({method:"POST",path:Ol,bodyParams:t})}async updateEmailAddress(t,e={}){return this.requireId(t),this.request({method:"PATCH",path:z(Ol,t),bodyParams:e})}async deleteEmailAddress(t){return this.requireId(t),this.request({method:"DELETE",path:z(Ol,t)})}},p_="/emails",m_=class extends gt{async createEmail(t){return de("EmailAPI.createEmail","This endpoint is no longer available and the function will be removed in the next major version."),this.request({method:"POST",path:p_,bodyParams:t})}},pD=wu({packageName:"@clerk/backend"}),{isDevOrStagingUrl:Ey}=gu(),g_=class extends gt{async getInterstitial(){return de("getInterstitial()",'Switch to `Clerk(...).localInterstitial(...)` from `import { Clerk } from "@clerk/backend"`.'),this.request({path:"internal/interstitial",method:"GET",headerParams:{"Content-Type":"text/html"}})}},Vf="/invitations",y_=class extends gt{async getInvitationList(t={}){return this.request({method:"GET",path:Vf,queryParams:t})}async createInvitation(t){return this.request({method:"POST",path:Vf,bodyParams:t})}async revokeInvitation(t){return this.requireId(t),this.request({method:"POST",path:z(Vf,t,"revoke")})}},{RuntimeFetch:w_,RuntimeAbortController:v_,RuntimeBlob:S_,RuntimeFormData:E_,RuntimeHeaders:A_,RuntimeRequest:__,RuntimeResponse:k_}=b_,x_=w_.bind(globalThis),C_={crypto:Ay.default,fetch:x_,AbortController:v_,Blob:S_,FormData:E_,Headers:A_,Request:__,Response:k_},Rt=C_,He="/organizations",P_=class extends gt{async getOrganizationList(t){return this.request({method:"GET",path:He,queryParams:t})}async createOrganization(t){return this.request({method:"POST",path:He,bodyParams:t})}async getOrganization(t){let e="organizationId"in t?t.organizationId:t.slug;return this.requireId(e),this.request({method:"GET",path:z(He,e)})}async updateOrganization(t,e){return this.requireId(t),this.request({method:"PATCH",path:z(He,t),bodyParams:e})}async updateOrganizationLogo(t,e){this.requireId(t);let r=new Rt.FormData;return r.append("file",e?.file),r.append("uploader_user_id",e?.uploaderUserId),this.request({method:"PUT",path:z(He,t,"logo"),formData:r})}async deleteOrganizationLogo(t){return this.requireId(t),this.request({method:"DELETE",path:z(He,t,"logo")})}async updateOrganizationMetadata(t,e){return this.requireId(t),this.request({method:"PATCH",path:z(He,t,"metadata"),bodyParams:e})}async deleteOrganization(t){return this.request({method:"DELETE",path:z(He,t)})}async getOrganizationMembershipList(t){let{organizationId:e,limit:r,offset:n}=t;return this.requireId(e),this.request({method:"GET",path:z(He,e,"memberships"),queryParams:{limit:r,offset:n}})}async createOrganizationMembership(t){let{organizationId:e,userId:r,role:n}=t;return this.requireId(e),this.request({method:"POST",path:z(He,e,"memberships"),bodyParams:{userId:r,role:n}})}async updateOrganizationMembership(t){let{organizationId:e,userId:r,role:n}=t;return this.requireId(e),this.request({method:"PATCH",path:z(He,e,"memberships",r),bodyParams:{role:n}})}async updateOrganizationMembershipMetadata(t){let{organizationId:e,userId:r,publicMetadata:n,privateMetadata:i}=t;return this.request({method:"PATCH",path:z(He,e,"memberships",r,"metadata"),bodyParams:{publicMetadata:n,privateMetadata:i}})}async deleteOrganizationMembership(t){let{organizationId:e,userId:r}=t;return this.requireId(e),this.request({method:"DELETE",path:z(He,e,"memberships",r)})}async getOrganizationInvitationList(t){let{organizationId:e,status:r,limit:n,offset:i}=t;return this.requireId(e),this.request({method:"GET",path:z(He,e,"invitations"),queryParams:{status:r,limit:n,offset:i}})}async getPendingOrganizationInvitationList(t){de("getPendingOrganizationInvitationList","Use `getOrganizationInvitationList` instead.");let{organizationId:e,limit:r,offset:n}=t;return this.requireId(e),this.request({method:"GET",path:z(He,e,"invitations","pending"),queryParams:{limit:r,offset:n}})}async createOrganizationInvitation(t){let{organizationId:e,...r}=t;return this.requireId(e),this.request({method:"POST",path:z(He,e,"invitations"),bodyParams:{...r}})}async getOrganizationInvitation(t){let{organizationId:e,invitationId:r}=t;return this.requireId(e),this.requireId(r),this.request({method:"GET",path:z(He,e,"invitations",r)})}async revokeOrganizationInvitation(t){let{organizationId:e,invitationId:r,requestingUserId:n}=t;return this.requireId(e),this.request({method:"POST",path:z(He,e,"invitations",r,"revoke"),bodyParams:{requestingUserId:n}})}},Il="/phone_numbers",R_=class extends gt{async getPhoneNumber(t){return this.requireId(t),this.request({method:"GET",path:z(Il,t)})}async createPhoneNumber(t){return this.request({method:"POST",path:Il,bodyParams:t})}async updatePhoneNumber(t,e={}){return this.requireId(t),this.request({method:"PATCH",path:z(Il,t),bodyParams:e})}async deletePhoneNumber(t){return this.requireId(t),this.request({method:"DELETE",path:z(Il,t)})}},Nl="/redirect_urls",T_=class extends gt{async getRedirectUrlList(){return this.request({method:"GET",path:Nl})}async getRedirectUrl(t){return this.requireId(t),this.request({method:"GET",path:z(Nl,t)})}async createRedirectUrl(t){return this.request({method:"POST",path:Nl,bodyParams:t})}async deleteRedirectUrl(t){return this.requireId(t),this.request({method:"DELETE",path:z(Nl,t)})}},eo="/sessions",B_=class extends gt{async getSessionList(t){return this.request({method:"GET",path:eo,queryParams:t})}async getSession(t){return this.requireId(t),this.request({method:"GET",path:z(eo,t)})}async revokeSession(t){return this.requireId(t),this.request({method:"POST",path:z(eo,t,"revoke")})}async verifySession(t,e){return this.requireId(t),this.request({method:"POST",path:z(eo,t,"verify"),bodyParams:{token:e}})}async getToken(t,e){return this.requireId(t),(await this.request({method:"POST",path:z(eo,t,"tokens",e||"")})).jwt}},py="/sign_in_tokens",O_=class extends gt{async createSignInToken(t){return this.request({method:"POST",path:py,bodyParams:t})}async revokeSignInToken(t){return this.requireId(t),this.request({method:"POST",path:z(py,t,"revoke")})}},I_="/sms_messages",N_=class extends gt{async createSMSMessage(t){return de("SMSMessageAPI.createSMSMessage","This endpoint is no longer available and the function will be removed in the next major version."),this.request({method:"POST",path:I_,bodyParams:t})}},Pt="/users",U_=class extends gt{async getUserList(t={}){return this.request({method:"GET",path:Pt,queryParams:t})}async getUser(t){return this.requireId(t),this.request({method:"GET",path:z(Pt,t)})}async createUser(t){return this.request({method:"POST",path:Pt,bodyParams:t})}async updateUser(t,e={}){return this.requireId(t),this.request({method:"PATCH",path:z(Pt,t),bodyParams:e})}async updateUserProfileImage(t,e){this.requireId(t);let r=new Rt.FormData;return r.append("file",e?.file),this.request({method:"POST",path:z(Pt,t,"profile_image"),formData:r})}async updateUserMetadata(t,e){return this.requireId(t),this.request({method:"PATCH",path:z(Pt,t,"metadata"),bodyParams:e})}async deleteUser(t){return this.requireId(t),this.request({method:"DELETE",path:z(Pt,t)})}async getCount(t={}){return this.request({method:"GET",path:z(Pt,"count"),queryParams:t})}async getUserOauthAccessToken(t,e){return this.requireId(t),this.request({method:"GET",path:z(Pt,t,"oauth_access_tokens",e)})}async disableUserMFA(t){return this.requireId(t),this.request({method:"DELETE",path:z(Pt,t,"mfa")})}async getOrganizationMembershipList(t){let{userId:e,limit:r,offset:n}=t;return this.requireId(e),this.request({method:"GET",path:z(Pt,e,"organization_memberships"),queryParams:{limit:r,offset:n}})}async verifyPassword(t){let{userId:e,password:r}=t;return this.requireId(e),this.request({method:"POST",path:z(Pt,e,"verify_password"),bodyParams:{password:r}})}async verifyTOTP(t){let{userId:e,code:r}=t;return this.requireId(e),this.request({method:"POST",path:z(Pt,e,"verify_totp"),bodyParams:{code:r}})}},$l="https://api.clerk.dev",to="v1",ky="@clerk/backend@0.38.15",$_=5*60,D_={AuthToken:"__clerkAuthToken",AuthStatus:"__clerkAuthStatus",AuthReason:"__clerkAuthReason",AuthMessage:"__clerkAuthMessage"},K_={Session:"__session",ClientUat:"__client_uat"},Qf={AuthToken:"x-clerk-auth-token",AuthStatus:"x-clerk-auth-status",AuthReason:"x-clerk-auth-reason",AuthMessage:"x-clerk-auth-message",EnableDebug:"x-clerk-debug",ClerkRedirectTo:"x-clerk-redirect-to",CloudFrontForwardedProto:"cloudfront-forwarded-proto",Authorization:"authorization",ForwardedPort:"x-forwarded-port",ForwardedProto:"x-forwarded-proto",ForwardedHost:"x-forwarded-host",Referrer:"referer",UserAgent:"user-agent",Origin:"origin",Host:"host",ContentType:"content-type"},q_={AuthStatus:Qf.AuthStatus,AuthToken:Qf.AuthToken},L_={Json:"application/json"},qe={Attributes:D_,Cookies:K_,Headers:Qf,SearchParams:q_,ContentTypes:L_};function xy(t){if(!t||typeof t!="string")throw Error("Missing Clerk Secret Key or API Key. Go to https://dashboard.clerk.com and get your key for your instance.")}var j_=class Cy{constructor(e,r,n,i,s){this.id=e,this.identifier=r,this.createdAt=n,this.updatedAt=i,this.invitationId=s}static fromJSON(e){return new Cy(e.id,e.identifier,e.created_at,e.updated_at,e.invitation_id)}},Py=class Ry{constructor(e,r,n,i,s,o,a,c,f){this.id=e,this.clientId=r,this.userId=n,this.status=i,this.lastActiveAt=s,this.expireAt=o,this.abandonAt=a,this.createdAt=c,this.updatedAt=f}static fromJSON(e){return new Ry(e.id,e.client_id,e.user_id,e.status,e.last_active_at,e.expire_at,e.abandon_at,e.created_at,e.updated_at)}},M_=class Ty{constructor(e,r,n,i,s,o,a,c){this.id=e,this.sessionIds=r,this.sessions=n,this.signInId=i,this.signUpId=s,this.lastActiveSessionId=o,this.createdAt=a,this.updatedAt=c}static fromJSON(e){return new Ty(e.id,e.session_ids,e.sessions.map(r=>Py.fromJSON(r)),e.sign_in_id,e.sign_up_id,e.last_active_session_id,e.created_at,e.updated_at)}},F_=class By{constructor(e,r,n,i){this.object=e,this.id=r,this.slug=n,this.deleted=i}static fromJSON(e){return new By(e.object,e.id||null,e.slug||null,e.deleted)}},V_=class Oy{constructor(e,r,n,i,s,o,a,c,f,d,h){this.id=e,this.fromEmailName=r,this.emailAddressId=n,this.toEmailAddress=i,this.subject=s,this.body=o,this.bodyPlain=a,this.status=c,this.slug=f,this.data=d,this.deliveredByClerk=h}static fromJSON(e){return new Oy(e.id,e.from_email_name,e.email_address_id,e.to_email_address,e.subject,e.body,e.body_plain,e.status,e.slug,e.data,e.delivered_by_clerk)}},Iy=class Ny{constructor(e,r){this.id=e,this.type=r}static fromJSON(e){return new Ny(e.id,e.type)}},Dl=class Uy{constructor(e,r,n=null,i=null,s=null,o=null){this.status=e,this.strategy=r,this.externalVerificationRedirectURL=n,this.attempts=i,this.expireAt=s,this.nonce=o}static fromJSON(e){return new Uy(e.status,e.strategy,e.external_verification_redirect_url?new URL(e.external_verification_redirect_url):null,e.attempts,e.expire_at,e.nonce)}},$y=class Dy{constructor(e,r,n,i){this.id=e,this.emailAddress=r,this.verification=n,this.linkedTo=i}static fromJSON(e){return new Dy(e.id,e.email_address,e.verification&&Dl.fromJSON(e.verification),e.linked_to.map(r=>Iy.fromJSON(r)))}},Ky=class qy{constructor(e,r,n,i,s,o,a,c,f,d,h,m={},b,y){this.id=e,this.provider=r,this.identificationId=n,this.externalId=i,this.approvedScopes=s,this.emailAddress=o,this.firstName=a,this.lastName=c,this.picture=f,this.imageUrl=d,this.username=h,this.publicMetadata=m,this.label=b,this.verification=y}static fromJSON(e){return new qy(e.id,e.provider,e.identification_id,e.provider_user_id,e.approved_scopes,e.email_address,e.first_name,e.last_name,e.avatar_url,e.image_url,e.username,e.public_metadata,e.label,e.verification&&Dl.fromJSON(e.verification))}};In(Ky,"picture","Use `imageUrl` instead.");var H_=class Ly{constructor(e,r,n,i,s,o,a){this.id=e,this.emailAddress=r,this.publicMetadata=n,this.createdAt=i,this.updatedAt=s,this.status=o,this.revoked=a}static fromJSON(e){return new Ly(e.id,e.email_address,e.public_metadata,e.created_at,e.updated_at,e.status,e.revoked)}};var W_=class jy{constructor(e,r,n={},i,s,o){this.provider=e,this.token=r,this.publicMetadata=n,this.label=i,this.scopes=s,this.tokenSecret=o}static fromJSON(e){return new jy(e.provider,e.token,e.public_metadata,e.label,e.scopes,e.token_secret)}},Kl=class My{constructor(e,r,n,i,s,o,a,c,f,d={},h={},m,b,y,w){this.id=e,this.name=r,this.slug=n,this.logoUrl=i,this.imageUrl=s,this.hasImage=o,this.createdBy=a,this.createdAt=c,this.updatedAt=f,this.publicMetadata=d,this.privateMetadata=h,this.maxAllowedMemberships=m,this.adminDeleteEnabled=b,this.members_count=y,this.membersCount=w}static fromJSON(e){return new My(e.id,e.name,e.slug,e.logo_url,e.image_url,e.has_image,e.created_by,e.created_at,e.updated_at,e.public_metadata,e.private_metadata,e.max_allowed_memberships,e.admin_delete_enabled,e.members_count,e.members_count)}};In(Kl,"logoUrl","Use `imageUrl` instead.");In(Kl,"members_count","Use `membersCount` instead.");var z_=class Fy{constructor(e,r,n,i,s,o,a,c={},f={}){this.id=e,this.emailAddress=r,this.role=n,this.organizationId=i,this.createdAt=s,this.updatedAt=o,this.status=a,this.publicMetadata=c,this.privateMetadata=f}static fromJSON(e){return new Fy(e.id,e.email_address,e.role,e.organization_id,e.created_at,e.updated_at,e.status,e.public_metadata,e.private_metadata)}},J_=class Vy{constructor(e,r,n={},i={},s,o,a,c){this.id=e,this.role=r,this.publicMetadata=n,this.privateMetadata=i,this.createdAt=s,this.updatedAt=o,this.organization=a,this.publicUserData=c}static fromJSON(e){return new Vy(e.id,e.role,e.public_metadata,e.private_metadata,e.created_at,e.updated_at,Kl.fromJSON(e.organization),Hy.fromJSON(e.public_user_data))}},Hy=class Wy{constructor(e,r,n,i,s,o,a){this.identifier=e,this.firstName=r,this.lastName=n,this.profileImageUrl=i,this.imageUrl=s,this.hasImage=o,this.userId=a}static fromJSON(e){return new Wy(e.identifier,e.first_name,e.last_name,e.profile_image_url,e.image_url,e.has_image,e.user_id)}};In(Hy,"profileImageUrl","Use `imageUrl` instead.");var zy=class Jy{constructor(e,r,n,i,s,o){this.id=e,this.phoneNumber=r,this.reservedForSecondFactor=n,this.defaultSecondFactor=i,this.verification=s,this.linkedTo=o}static fromJSON(e){return new Jy(e.id,e.phone_number,e.reserved_for_second_factor,e.default_second_factor,e.verification&&Dl.fromJSON(e.verification),e.linked_to.map(r=>Iy.fromJSON(r)))}},G_=class Gy{constructor(e,r,n,i){this.id=e,this.url=r,this.createdAt=n,this.updatedAt=i}static fromJSON(e){return new Gy(e.id,e.url,e.created_at,e.updated_at)}},Y_=class Yy{constructor(e,r,n,i,s,o,a){this.id=e,this.userId=r,this.token=n,this.status=i,this.url=s,this.createdAt=o,this.updatedAt=a}static fromJSON(e){return new Yy(e.id,e.user_id,e.token,e.status,e.url,e.created_at,e.updated_at)}},Q_=class Qy{constructor(e,r,n,i,s,o,a){this.id=e,this.fromPhoneNumber=r,this.toPhoneNumber=n,this.message=i,this.status=s,this.phoneNumberId=o,this.data=a}static fromJSON(e){return new Qy(e.id,e.from_phone_number,e.to_phone_number,e.message,e.status,e.phone_number_id,e.data)}},Z_=class Zy{constructor(e){this.jwt=e}static fromJSON(e){return new Zy(e.jwt)}},X_=class Xy{constructor(e,r,n){this.id=e,this.web3Wallet=r,this.verification=n}static fromJSON(e){return new Xy(e.id,e.web3_wallet,e.verification&&Dl.fromJSON(e.verification))}},eb=class tb{constructor(e,r,n,i,s,o,a,c,f,d,h,m,b,y,w,S,_,T,P,C,L,B={},j={},A={},M=[],K=[],G=[],ae=[],F){this.id=e,this.passwordEnabled=r,this.totpEnabled=n,this.backupCodeEnabled=i,this.twoFactorEnabled=s,this.banned=o,this.createdAt=a,this.updatedAt=c,this.profileImageUrl=f,this.imageUrl=d,this.hasImage=h,this.gender=m,this.birthday=b,this.primaryEmailAddressId=y,this.primaryPhoneNumberId=w,this.primaryWeb3WalletId=S,this.lastSignInAt=_,this.externalId=T,this.username=P,this.firstName=C,this.lastName=L,this.publicMetadata=B,this.privateMetadata=j,this.unsafeMetadata=A,this.emailAddresses=M,this.phoneNumbers=K,this.web3Wallets=G,this.externalAccounts=ae,this.createOrganizationEnabled=F}static fromJSON(e){return new tb(e.id,e.password_enabled,e.totp_enabled,e.backup_code_enabled,e.two_factor_enabled,e.banned,e.created_at,e.updated_at,e.profile_image_url,e.image_url,e.has_image,e.gender,e.birthday,e.primary_email_address_id,e.primary_phone_number_id,e.primary_web3_wallet_id,e.last_sign_in_at,e.external_id,e.username,e.first_name,e.last_name,e.public_metadata,e.private_metadata,e.unsafe_metadata,(e.email_addresses||[]).map(r=>$y.fromJSON(r)),(e.phone_numbers||[]).map(r=>zy.fromJSON(r)),(e.web3_wallets||[]).map(r=>X_.fromJSON(r)),(e.external_accounts||[]).map(r=>Ky.fromJSON(r)),e.create_organization_enabled)}};In(eb,"profileImageUrl","Use `imageUrl` instead.");function ek(t){return Array.isArray(t)?t.map(e=>Hf(e)):tk(t)?t.data.map(e=>Hf(e)):Hf(t)}function tk(t){return Array.isArray(t.data)&&t.data!==void 0}function rk(t){return t.total_count}function Hf(t){if(typeof t!="string"&&"object"in t&&"deleted"in t)return F_.fromJSON(t);switch(t.object){case"allowlist_identifier":return j_.fromJSON(t);case"client":return M_.fromJSON(t);case"email_address":return $y.fromJSON(t);case"email":return V_.fromJSON(t);case"invitation":return H_.fromJSON(t);case"oauth_access_token":return W_.fromJSON(t);case"organization":return Kl.fromJSON(t);case"organization_invitation":return z_.fromJSON(t);case"organization_membership":return J_.fromJSON(t);case"phone_number":return zy.fromJSON(t);case"redirect_url":return G_.fromJSON(t);case"sign_in_token":return Y_.fromJSON(t);case"session":return Py.fromJSON(t);case"sms_message":return Q_.fromJSON(t);case"token":return Z_.fromJSON(t);case"total_count":return rk(t);case"user":return eb.fromJSON(t);default:return t}}var nk=t=>async(...e)=>{let r=await t(...e);if(r.errors===null)return r.data;{let{errors:n,clerkTraceId:i}=r,{status:s,statusText:o}=r,a=new bu(o||"",{data:[],status:s||"",clerkTraceId:i});throw a.errors=n,a}};function ik(t){return nk(async r=>{let{apiKey:n,secretKey:i,httpOptions:s,apiUrl:o=$l,apiVersion:a=to,userAgent:c=ky}=t;n&&de("apiKey","Use `secretKey` instead."),s&&de("httpOptions","This option has been deprecated and will be removed with the next major release.\nA RequestInit init object used by the `request` method.");let{path:f,method:d,queryParams:h,headerParams:m,bodyParams:b,formData:y}=r,w=i||n;xy(w);let S=z(o,a,f),_=new URL(S);if(h){let C=(0,Yf.default)({...h});for(let[L,B]of Object.entries(C))B&&[B].flat().forEach(j=>_.searchParams.append(L,j))}let T={Authorization:`Bearer ${w}`,"User-Agent":c,...m},P;try{if(y)P=await Rt.fetch(_.href,{...s,method:d,headers:T,body:y});else{T["Content-Type"]="application/json";let j=d!=="GET"&&b&&Object.keys(b).length>0?{body:JSON.stringify((0,Yf.default)(b,{deep:!1}))}:null;P=await Rt.fetch(_.href,(0,_y.default)(s||{},{method:d,headers:T,...j}))}let L=await(P?.headers&&P.headers?.get(qe.Headers.ContentType)===qe.ContentTypes.Json?P.json():P.text());if(!P.ok)throw L;return{data:ek(L),errors:null}}catch(C){return C instanceof Error?{data:null,errors:[{code:"unexpected_error",message:C.message||"Unexpected error"}],clerkTraceId:my(C,P?.headers)}:{data:null,errors:sk(C),status:P?.status,statusText:P?.statusText,clerkTraceId:my(C,P?.headers)}}})}function my(t,e){return t&&typeof t=="object"&&"clerk_trace_id"in t&&typeof t.clerk_trace_id=="string"?t.clerk_trace_id:e?.get("cf-ray")||""}function sk(t){if(t&&typeof t=="object"&&"errors"in t){let e=t.errors;return e.length>0?e.map(ok):[]}return[]}function ok(t){return{code:t.code,message:t.message,longMessage:t.long_message,meta:{paramName:t?.meta?.param_name,sessionId:t?.meta?.session_id}}}function rd(t){let e=ik(t);return{allowlistIdentifiers:new c_(e),clients:new u_(e),emailAddresses:new h_(e),emails:new m_(e),interstitial:new g_(e),invitations:new y_(e),organizations:new P_(e),phoneNumbers:new R_(e),redirectUrls:new T_(e),sessions:new B_(e),signInTokens:new O_(e),smsMessages:new N_(e),users:new U_(e),domains:new d_(e)}}var rb=t=>()=>{let e={...t};return e.apiKey=(e.apiKey||"").substring(0,7),e.secretKey=(e.secretKey||"").substring(0,7),e.jwtKey=(e.jwtKey||"").substring(0,7),{...e}};function ak(t,e,r){let{act:n,sid:i,org_id:s,org_role:o,org_slug:a,org_permissions:c,sub:f}=t,{apiKey:d,secretKey:h,apiUrl:m,apiVersion:b,token:y,session:w,user:S,organization:_}=e;d&&de("apiKey","Use `secretKey` instead.");let{sessions:T}=rd({apiKey:d,secretKey:h,apiUrl:m,apiVersion:b}),P=ck({sessionId:i,sessionToken:y,fetcher:(...C)=>T.getToken(...C)});return{actor:n,sessionClaims:t,sessionId:i,session:w,userId:f,user:S,orgId:s,orgRole:o,orgSlug:a,orgPermissions:c,organization:_,getToken:P,has:uk({orgId:s,orgRole:o,orgPermissions:c,userId:f}),debug:rb({...e,...r})}}function lk(t){return t?.apiKey&&de("apiKey","Use `secretKey` instead."),{sessionClaims:null,sessionId:null,session:null,userId:null,user:null,actor:null,orgId:null,orgRole:null,orgSlug:null,orgPermissions:null,organization:null,getToken:()=>Promise.resolve(null),has:()=>!1,debug:rb(t)}}var ck=t=>{let{fetcher:e,sessionToken:r,sessionId:n}=t||{};return async(i={})=>n?i.template?e(n,i.template):r:null},uk=({orgId:t,orgRole:e,userId:r,orgPermissions:n})=>i=>{if(!i?.permission&&!i?.role)throw new Error('Missing parameters. `has` from `auth` or `getAuth` requires a permission or role key to be passed. Example usage: `has({permission: "org:posts:edit"`');return!t||!r||!e||!n?!1:i.permission?n.includes(i.permission):i.role?e===i.role:!1},we=class nb extends Error{constructor({action:e,message:r,reason:n}){super(r),Object.setPrototypeOf(this,nb.prototype),this.reason=n,this.message=r,this.action=e}getFullMessage(){return`${[this.message,this.action].filter(e=>e).join(" ")} (reason=${this.reason}, token-carrier=${this.tokenCarrier})`}};function fk(t){t.frontendApi&&de("frontendApi","Use `publishableKey` instead."),t.pkgVersion&&de("pkgVersion","Use `clerkJSVersion` instead."),t.frontendApi=xi(t.publishableKey)?.frontendApi||t.frontendApi||"";let e=Ey(t.frontendApi)?"":pu(t.domain),{debugData:r,frontendApi:n,pkgVersion:i,clerkJSUrl:s,clerkJSVersion:o,publishableKey:a,proxyUrl:c,isSatellite:f=!1,domain:d,signInUrl:h}=t;return`
    <head>
        <meta charset="UTF-8" />
        <style>
          @media (prefers-color-scheme: dark) {
            body {
              background-color: black;
            }
          }
        </style>
    </head>
    <body>
        <script>
            window.__clerk_frontend_api = '${n}';
            window.__clerk_debug = ${JSON.stringify(r||{})};
            ${c?`window.__clerk_proxy_url = '${c}'`:""}
            ${d?`window.__clerk_domain = '${d}'`:""}
            window.startClerk = async () => {
                function formRedirect(){
                    const form = '<form method="get" action="" name="redirect"></form>';
                    document.body.innerHTML = document.body.innerHTML + form;

                    const searchParams = new URLSearchParams(window.location.search);
                    for (let paramTuple of searchParams) {
                        const input = document.createElement("input");
                        input.type = "hidden";
                        input.name = paramTuple[0];
                        input.value = paramTuple[1];
                        document.forms.redirect.appendChild(input);
                    }
                    const url = new URL(window.location.origin + window.location.pathname + window.location.hash);
                    window.history.pushState({}, '', url);

                    document.forms.redirect.action = window.location.pathname + window.location.hash;
                    document.forms.redirect.submit();
                }

                const Clerk = window.Clerk;
                try {
                    await Clerk.load({
                        isSatellite: ${f},
                        isInterstitial: true,
                        signInUrl: ${h?`'${h}'`:void 0}
                    });
                    if(Clerk.loaded){
                      if(window.location.href.indexOf("#") === -1){
                        window.location.href = window.location.href;
                      } else if (window.navigator.userAgent.toLowerCase().includes("firefox/")){
                          formRedirect();
                      } else {
                          window.location.reload();
                      }
                    }
                } catch (err) {
                    console.error('Clerk: ', err);
                }
            };
            (() => {
                const script = document.createElement('script');
                ${a?`script.setAttribute('data-clerk-publishable-key', '${a}');`:`script.setAttribute('data-clerk-frontend-api', '${n}');`}

                ${d?`script.setAttribute('data-clerk-domain', '${d}');`:""}
                ${c?`script.setAttribute('data-clerk-proxy-url', '${c}')`:""};
                script.async = true;
                script.src = '${s||mu(c||e||n,{pkgVersion:i,clerkJSVersion:o})}';
                script.crossOrigin = 'anonymous';
                script.addEventListener('load', startClerk);
                document.body.appendChild(script);
            })();
        </script>
    </body>
`}async function dk(t){t.frontendApi&&de("frontendApi","Use `publishableKey` instead."),t.pkgVersion&&de("pkgVersion","Use `clerkJSVersion` instead."),t.frontendApi=xi(t.publishableKey)?.frontendApi||t.frontendApi||"";let e=Zf(t),r=await ys(()=>Rt.fetch(Zf(t),{method:"GET",headers:{"Clerk-Backend-SDK":t.userAgent||ky}}));if(!r.ok)throw new we({action:"Contact support@clerk.com",message:`Error loading Clerk Interstitial from ${e} with code=${r.status}`,reason:"interstitial-remote-failed-to-load"});return r.text()}function Zf(t){t.frontendApi&&de("frontendApi","Use `publishableKey` instead."),t.frontendApi=xi(t.publishableKey)?.frontendApi||t.frontendApi||"";let{apiUrl:e,frontendApi:r,pkgVersion:n,clerkJSVersion:i,publishableKey:s,proxyUrl:o,isSatellite:a,domain:c,signInUrl:f}=t,d=new URL(e);return d.pathname=z(d.pathname,to,"/public/interstitial"),d.searchParams.append("clerk_js_version",i||ua(r,n)),s?d.searchParams.append("publishable_key",s):d.searchParams.append("frontend_api",r),o&&d.searchParams.append("proxy_url",o),a&&d.searchParams.append("is_satellite","true"),d.searchParams.append("sign_in_url",f||""),Ey(t.frontendApi)||d.searchParams.append("use_domain_for_script","true"),c&&d.searchParams.append("domain",c),d.href}var Wf=(t,e)=>t.headers.get(e),gy=t=>t?.split(",")[0],nd=(t,e)=>{let r=new URL(t.url),n=Wf(t,qe.Headers.ForwardedProto),i=Wf(t,qe.Headers.ForwardedHost),s=Wf(t,qe.Headers.Host),o=r.protocol,a=sb({protocol:o,forwardedProto:n,forwardedHost:i,host:s||r.host});return new URL(e||r.pathname,a)},sb=({protocol:t,forwardedProto:e,forwardedHost:r,host:n})=>{let i=gy(r)??n,s=gy(e)??t?.replace(/[:/]/,"");return!i||!s?"":`${s}://${i}`},ob=t=>{let e=t(Rt.Request,Rt.Headers),r=nd(e);return new Rt.Request(r,e)},hk=t=>{if(!t)return{};let e=mk(t),r=gk(t),n=yk(t);return{cookies:e,headers:r,searchParams:n}},pk=t=>t&&t.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent),mk=t=>{let e=t.headers&&t.headers?.get("cookie")?(0,ib.parse)(t.headers.get("cookie")):{};return r=>{let n=e?.[r];if(n!==void 0)return pk(n)}},gk=t=>e=>t?.headers?.get(e)||void 0,yk=t=>t?.url?new URL(t.url)?.searchParams:void 0,bk=t=>t?.replace("Bearer ","");async function ab(t,e){let{apiKey:r,secretKey:n,apiUrl:i,apiVersion:s,cookieToken:o,frontendApi:a,proxyUrl:c,publishableKey:f,domain:d,isSatellite:h,headerToken:m,loadSession:b,loadUser:y,loadOrganization:w,signInUrl:S,signUpUrl:_,afterSignInUrl:T,afterSignUpUrl:P,token:C}=t,{sid:L,org_id:B,sub:j}=e,{sessions:A,users:M,organizations:K}=rd({apiKey:r,secretKey:n,apiUrl:i,apiVersion:s}),[G,ae,F]=await Promise.all([b?A.getSession(L):Promise.resolve(void 0),y?M.getUser(j):Promise.resolve(void 0),w&&B?K.getOrganization({organizationId:B}):Promise.resolve(void 0)]),rr=ak(e,{secretKey:n,apiKey:r,apiUrl:i,apiVersion:s,token:o||m||"",session:G,user:ae,organization:F},{...t,status:"signed-in"});return{status:"signed-in",reason:null,message:null,frontendApi:a,proxyUrl:c,publishableKey:f,domain:d,isSatellite:h,signInUrl:S,signUpUrl:_,afterSignInUrl:T,afterSignUpUrl:P,isSignedIn:!0,isInterstitial:!1,isUnknown:!1,toAuth:()=>rr,token:C}}function fn(t,e,r=""){let{frontendApi:n,publishableKey:i,proxyUrl:s,isSatellite:o,domain:a,signInUrl:c,signUpUrl:f,afterSignInUrl:d,afterSignUpUrl:h}=t;return{status:"signed-out",reason:e,message:r,frontendApi:n,proxyUrl:s,publishableKey:i,isSatellite:o,domain:a,signInUrl:c,signUpUrl:f,afterSignInUrl:d,afterSignUpUrl:h,isSignedIn:!1,isInterstitial:!1,isUnknown:!1,toAuth:()=>lk({...t,status:"signed-out",reason:e,message:r}),token:null}}function ai(t,e,r=""){let{frontendApi:n,publishableKey:i,proxyUrl:s,isSatellite:o,domain:a,signInUrl:c,signUpUrl:f,afterSignInUrl:d,afterSignUpUrl:h}=t;return{status:"interstitial",reason:e,message:r,frontendApi:n,publishableKey:i,isSatellite:o,domain:a,proxyUrl:s,signInUrl:c,signUpUrl:f,afterSignInUrl:d,afterSignUpUrl:h,isSignedIn:!1,isInterstitial:!0,isUnknown:!1,toAuth:()=>null,token:null}}function wk(t,e,r=""){let{frontendApi:n,publishableKey:i,isSatellite:s,domain:o,signInUrl:a,signUpUrl:c,afterSignInUrl:f,afterSignUpUrl:d}=t;return{status:"unknown",reason:e,message:r,frontendApi:n,publishableKey:i,isSatellite:s,domain:o,signInUrl:a,signUpUrl:c,afterSignInUrl:f,afterSignUpUrl:d,isSignedIn:!1,isInterstitial:!1,isUnknown:!0,toAuth:()=>null,token:null}}function lb({originURL:t,host:e,forwardedHost:r,forwardedProto:n}){let i=sb({forwardedProto:n,forwardedHost:r,protocol:t.protocol,host:e});return i&&new URL(i).origin!==t.origin}var vk=(t,e)=>t?t.find(r=>r.code===e):null,zf={parse(t,e){return Sk(t,yy,e)},stringify(t,e){return Ek(t,yy,e)}},yy={chars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bits:6};function Sk(t,e,r={}){if(!e.codes){e.codes={};for(let c=0;c<e.chars.length;++c)e.codes[e.chars[c]]=c}if(!r.loose&&t.length*e.bits&7)throw new SyntaxError("Invalid padding");let n=t.length;for(;t[n-1]==="=";)if(--n,!r.loose&&!((t.length-n)*e.bits&7))throw new SyntaxError("Invalid padding");let i=new(r.out??Uint8Array)(n*e.bits/8|0),s=0,o=0,a=0;for(let c=0;c<n;++c){let f=e.codes[t[c]];if(f===void 0)throw new SyntaxError("Invalid character "+t[c]);o=o<<e.bits|f,s+=e.bits,s>=8&&(s-=8,i[a++]=255&o>>s)}if(s>=e.bits||255&o<<8-s)throw new SyntaxError("Unexpected end of data");return i}function Ek(t,e,r={}){let{pad:n=!0}=r,i=(1<<e.bits)-1,s="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|255&t[c],o+=8;o>e.bits;)o-=e.bits,s+=e.chars[i&a>>o];if(o&&(s+=e.chars[i&a<<e.bits-o]),n)for(;s.length*e.bits&7;)s+="=";return s}var Xf={RS256:"SHA-256",RS384:"SHA-384",RS512:"SHA-512"},Jf="RSASSA-PKCS1-v1_5",by={RS256:Jf,RS384:Jf,RS512:Jf},ed=Object.keys(Xf);function Ak(t){let e=Xf[t],r=by[t];if(!e||!r)throw new Error(`Unsupported algorithm ${t}, expected one of ${ed.join(",")}.`);return{hash:{name:Xf[t]},name:by[t]}}var _k=t=>Array.isArray(t)&&t.length>0&&t.every(e=>typeof e=="string"),kk=(t,e)=>{let r=[e].flat().filter(s=>!!s),n=[t].flat().filter(s=>!!s);if(r.length>0&&n.length>0){if(typeof t=="string"){if(!r.includes(t))throw new we({action:"Make sure that this is a valid Clerk generate JWT.",reason:"token-verification-failed",message:`Invalid JWT audience claim (aud) ${JSON.stringify(t)}. Is not included in "${JSON.stringify(r)}".`})}else if(_k(t)&&!t.some(s=>r.includes(s)))throw new we({action:"Make sure that this is a valid Clerk generate JWT.",reason:"token-verification-failed",message:`Invalid JWT audience claim array (aud) ${JSON.stringify(t)}. Is not included in "${JSON.stringify(r)}".`})}},xk=t=>{if(!(typeof t>"u")&&t!=="JWT")throw new we({action:"Make sure that this is a valid Clerk generate JWT.",reason:"token-invalid",message:`Invalid JWT type ${JSON.stringify(t)}. Expected "JWT".`})},Ck=t=>{if(!ed.includes(t))throw new we({action:"Make sure that this is a valid Clerk generate JWT.",reason:"token-invalid-algorithm",message:`Invalid JWT algorithm ${JSON.stringify(t)}. Supported: ${ed}.`})},Pk=t=>{if(typeof t!="string")throw new we({action:"Make sure that this is a valid Clerk generate JWT.",reason:"token-verification-failed",message:`Subject claim (sub) is required and must be a string. Received ${JSON.stringify(t)}.`})},Rk=(t,e)=>{if(!(!t||!e||e.length===0)&&!e.includes(t))throw new we({reason:"token-invalid-authorized-parties",message:`Invalid JWT Authorized party claim (azp) ${JSON.stringify(t)}. Expected "${e}".`})},Tk=(t,e)=>{if(typeof e=="function"&&!e(t))throw new we({reason:"token-invalid-issuer",message:"Failed JWT issuer resolver. Make sure that the resolver returns a truthy value."});if(typeof e=="string"&&t&&t!==e)throw new we({reason:"token-invalid-issuer",message:`Invalid JWT issuer claim (iss) ${JSON.stringify(t)}. Expected "${e}".`})},Bk=(t,e)=>{if(typeof t!="number")throw new we({action:"Make sure that this is a valid Clerk generate JWT.",reason:"token-verification-failed",message:`Invalid JWT expiry date claim (exp) ${JSON.stringify(t)}. Expected number.`});let r=new Date(Date.now()),n=new Date(0);if(n.setUTCSeconds(t),n.getTime()<=r.getTime()-e)throw new we({reason:"token-expired",message:`JWT is expired. Expiry date: ${n.toUTCString()}, Current date: ${r.toUTCString()}.`})},Ok=(t,e)=>{if(typeof t>"u")return;if(typeof t!="number")throw new we({action:"Make sure that this is a valid Clerk generate JWT.",reason:"token-verification-failed",message:`Invalid JWT not before date claim (nbf) ${JSON.stringify(t)}. Expected number.`});let r=new Date(Date.now()),n=new Date(0);if(n.setUTCSeconds(t),n.getTime()>r.getTime()+e)throw new we({reason:"token-not-active-yet",message:`JWT cannot be used prior to not before date claim (nbf). Not before date: ${n.toUTCString()}; Current date: ${r.toUTCString()};`})},Ik=(t,e)=>{if(typeof t>"u")return;if(typeof t!="number")throw new we({action:"Make sure that this is a valid Clerk generate JWT.",reason:"token-verification-failed",message:`Invalid JWT issued at date claim (iat) ${JSON.stringify(t)}. Expected number.`});let r=new Date(Date.now()),n=new Date(0);if(n.setUTCSeconds(t),n.getTime()>r.getTime()+e)throw new we({reason:"token-not-active-yet",message:`JWT issued at date claim (iat) is in the future. Issued at date: ${n.toUTCString()}; Current date: ${r.toUTCString()};`})};function Nk(t){let e=t.replace(/-----BEGIN.*?-----/g,"").replace(/-----END.*?-----/g,"").replace(/\s/g,""),r=ki(e),n=new ArrayBuffer(r.length),i=new Uint8Array(n);for(let s=0,o=r.length;s<o;s++)i[s]=r.charCodeAt(s);return i}function Uk(t,e,r){if(typeof t=="object")return Rt.crypto.subtle.importKey("jwk",t,e,!1,[r]);let n=Nk(t),i=r==="sign"?"pkcs8":"spki";return Rt.crypto.subtle.importKey(i,n,e,!1,[r])}var $k=5*1e3;async function Dk(t,e){let{header:r,signature:n,raw:i}=t,o=new TextEncoder().encode([i.header,i.payload].join(".")),a=Ak(r.alg),c=await Uk(e,a,"verify");return Rt.crypto.subtle.verify(a.name,c,n,o)}function ql(t){let e=(t||"").toString().split(".");if(e.length!==3)throw new we({reason:"token-invalid",message:"Invalid JWT form. A JWT consists of three parts separated by dots."});let[r,n,i]=e,s=new TextDecoder,o=JSON.parse(s.decode(zf.parse(r,{loose:!0}))),a=JSON.parse(s.decode(zf.parse(n,{loose:!0}))),c=zf.parse(i,{loose:!0});return gs(a,"orgs",'Add orgs to your session token using the "user.organizations" shortcode in JWT Templates instead.',"decodeJwt:orgs"),{header:o,payload:a,signature:c,raw:{header:r,payload:n,signature:i,text:t}}}async function Kk(t,{audience:e,authorizedParties:r,clockSkewInSeconds:n,clockSkewInMs:i,issuer:s,key:o}){n&&de("clockSkewInSeconds","Use `clockSkewInMs` instead.");let a=i||n||$k,c=ql(t),{header:f,payload:d}=c,{typ:h,alg:m}=f;xk(h),Ck(m);let{azp:b,sub:y,aud:w,iss:S,iat:_,exp:T,nbf:P}=d;Pk(y),kk([w],[e]),Rk(b,r),Tk(S,s),Bk(T,a),Ok(P,a),Ik(_,a);let C;try{C=await Dk(c,o)}catch(L){throw new we({action:"Make sure that this is a valid Clerk generate JWT.",reason:"token-verification-failed",message:`Error verifying JWT signature. ${L}`})}if(!C)throw new we({reason:"token-invalid-signature",message:"JWT signature is invalid."});return d}var Ll={},td=0;function Ul(t){return Ll[t]}function qk(){return Object.values(Ll)}function cb(t,e=!0){Ll[t.kid]=t,td=e?Date.now():-1}var wy="local",Lk="-----BEGIN PUBLIC KEY-----",jk="-----END PUBLIC KEY-----",Mk="MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA",Fk="IDAQAB";function Vk(t){if(!Ul(wy)){if(!t)throw new we({action:"Set the CLERK_JWT_KEY environment variable.",message:"Missing local JWK.",reason:"jwk-local-missing"});let e=t.replace(/(\r\n|\n|\r)/gm,"").replace(Lk,"").replace(jk,"").replace(Mk,"").replace(Fk,"").replace(/\+/g,"-").replace(/\//g,"_");cb({kid:"local",kty:"RSA",alg:"RS256",n:e,e:"AQAB"},!1)}return Ul(wy)}async function vy({apiKey:t,secretKey:e,apiUrl:r=$l,apiVersion:n=to,issuer:i,kid:s,skipJwksCache:o}){zk()&&(Ll={});let a=!Ul(s);if(o||a){let f,d=e||t;if(d)f=()=>Wk(r,d,n);else if(i)f=()=>Hk(i);else throw new we({action:"Contact support@clerk.com",message:"Failed to load JWKS from Clerk Backend or Frontend API.",reason:"jwk-remote-failed-to-load"});let{keys:h}=await ys(f);if(!h||!h.length)throw new we({action:"Contact support@clerk.com",message:"The JWKS endpoint did not contain any signing keys. Contact support@clerk.com.",reason:"jwk-remote-failed-to-load"});h.forEach(m=>cb(m))}let c=Ul(s);if(!c){let d=qk().map(h=>h.kid).join(", ");throw new we({action:"Contact support@clerk.com",message:`Unable to find a signing key in JWKS that matches the kid='${s}' of the provided session token. Please make sure that the __session cookie or the HTTP authorization header contain a Clerk-generated session JWT.${d?` The following kid are available: ${d}`:""}`,reason:"jwk-remote-missing"})}return c}async function Hk(t){let e=new URL(t);e.pathname=z(e.pathname,".well-known/jwks.json");let r=await Rt.fetch(e.href);if(!r.ok)throw new we({action:"Contact support@clerk.com",message:`Error loading Clerk JWKS from ${e.href} with code=${r.status}`,reason:"jwk-remote-failed-to-load"});return r.json()}async function Wk(t,e,r){if(!e)throw new we({action:"Set the CLERK_SECRET_KEY or CLERK_API_KEY environment variable.",message:"Missing Clerk Secret Key or API Key. Go to https://dashboard.clerk.com and get your key for your instance.",reason:"jwk-remote-failed-to-load"});let n=new URL(t);n.pathname=z(n.pathname,r,"/jwks");let i=await Rt.fetch(n.href,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!i.ok){let s=await i.json(),o=vk(s?.errors,"clerk_key_invalid");if(o){let a="secret-key-invalid";throw new we({action:"Contact support@clerk.com",message:o.message,reason:a})}throw new we({action:"Contact support@clerk.com",message:`Error loading Clerk JWKS from ${n.href} with code=${i.status}`,reason:"jwk-remote-failed-to-load"})}return i.json()}function zk(){return td===-1?!1:Date.now()-td>=$_*1e3}async function jl(t,e){let{apiKey:r,secretKey:n,apiUrl:i,apiVersion:s,audience:o,authorizedParties:a,clockSkewInSeconds:c,clockSkewInMs:f,issuer:d,jwksCacheTtlInMs:h,jwtKey:m,skipJwksCache:b}=e;e.apiKey&&de("apiKey","Use `secretKey` instead.");let{header:y}=ql(t),{kid:w}=y,S;if(m)S=Vk(m);else if(typeof d=="string")S=await vy({issuer:d,kid:w,jwksCacheTtlInMs:h,skipJwksCache:b});else if(r||n)S=await vy({apiKey:r,secretKey:n,apiUrl:i,apiVersion:s,kid:w,jwksCacheTtlInMs:h,skipJwksCache:b});else throw new we({action:"Set the CLERK_JWT_KEY environment variable.",message:"Failed to resolve JWK during verification.",reason:"jwk-failed-to-resolve"});return await Kk(t,{audience:o,authorizedParties:a,clockSkewInSeconds:c,clockSkewInMs:f,key:S,issuer:d})}var Jk=t=>!!t?.get("__clerk_satellite_url"),Gk=t=>t?.get("__clerk_synced")==="true",Yk=/^Mozilla\/|(Amazon CloudFront)/,ub=t=>Yk.test(t||""),Qk=t=>{let{apiKey:e,secretKey:r,userAgent:n}=t;if(Nn(r||e||"")&&!ub(n))return fn(t,"header-missing-non-browser")},Zk=t=>{let{origin:e,host:r,forwardedHost:n,forwardedProto:i}=t;if(e&&lb({originURL:new URL(e),host:r,forwardedHost:n,forwardedProto:i}))return fn(t,"header-missing-cors")},Xk=t=>{let{apiKey:e,secretKey:r,isSatellite:n,searchParams:i}=t;if(Nn(r||e||"")&&!n&&Jk(i))return ai(t,"primary-responds-to-syncing")},ex=t=>{let{apiKey:e,secretKey:r,clientUat:n}=t;if(Nn(r||e||"")&&!n)return ai(t,"uat-missing")},tx=t=>{let{apiKey:e,secretKey:r,referrer:n,host:i,forwardedHost:s,forwardedProto:o}=t,a=n&&lb({originURL:new URL(n),host:i,forwardedHost:s,forwardedProto:o});if(Nn(r||e||"")&&a)return ai(t,"cross-origin-referrer")},rx=t=>{let{apiKey:e,secretKey:r,clientUat:n,cookieToken:i}=t;if(yu(r||e||"")&&!n&&!i)return fn(t,"cookie-and-uat-missing")},nx=t=>{let{clientUat:e}=t;if(e==="0")return fn(t,"standard-signed-out")},ix=t=>{let{clientUat:e,cookieToken:r}=t;if(e&&Number.parseInt(e)>0&&!r)return ai(t,"cookie-missing")},sx=async t=>{let{headerToken:e}=t,r=await fb(t,e);return await ab({...t,token:e},r)},ox=async t=>{let{cookieToken:e,clientUat:r}=t,n=await fb(t,e),i=await ab({...t,token:e},n),o=i.toAuth().sessionClaims.iat<Number.parseInt(r);return!r||o?ai(t,"cookie-outdated"):i};async function Sy(t,e){for(let r of e){let n=await r(t);if(n)return n}return fn(t,"unexpected-error")}async function fb(t,e){let{isSatellite:r,proxyUrl:n}=t,i;return r?i=null:n?i=n:i=s=>s.startsWith("https://clerk.")||s.includes(".clerk.accounts"),jl(e,{...t,issuer:i})}var ax=t=>{let{clientUat:e,isSatellite:r,searchParams:n,userAgent:i}=t,s=!e||e==="0";if(r&&s&&!ub(i))return fn(t,"satellite-needs-syncing");if(r&&s&&!Gk(n))return ai(t,"satellite-needs-syncing")};function lx(t,e){if(!t&&Nn(e))throw new Error("Missing signInUrl. Pass a signInUrl for dev instances if an app is satellite")}function cx(t){if(!t)throw new Error("Missing domain and proxyUrl. A satellite application needs to specify a domain or a proxyUrl")}function ux(t,e){let r;try{r=new URL(t)}catch{throw new Error("The signInUrl needs to have a absolute url format.")}if(r.origin===e)throw new Error("The signInUrl needs to be on a different origin than your satellite application.")}async function fx(t){let{cookies:e,headers:r,searchParams:n}=hk(t?.request);t.frontendApi&&de("frontendApi","Use `publishableKey` instead."),t.apiKey&&de("apiKey","Use `secretKey` instead."),t={...t,...hx(t,r),frontendApi:xi(t.publishableKey)?.frontendApi||t.frontendApi,apiUrl:t.apiUrl||$l,apiVersion:t.apiVersion||to,cookieToken:t.cookieToken||e?.(qe.Cookies.Session),clientUat:t.clientUat||e?.(qe.Cookies.ClientUat),searchParams:t.searchParams||n||void 0},xy(t.secretKey||t.apiKey),t.isSatellite&&(lx(t.signInUrl,t.secretKey||t.apiKey),t.signInUrl&&t.origin&&ux(t.signInUrl,t.origin),cx(t.proxyUrl||t.domain));async function i(){try{return await Sy(t,[sx])}catch(a){return o(a,"header")}}async function s(){try{return await Sy(t,[Zk,Qk,ax,Xk,rx,ex,tx,ix,nx,ox])}catch(a){return o(a,"cookie")}}function o(a,c){return a instanceof we?(a.tokenCarrier=c,["token-expired","token-not-active-yet"].includes(a.reason)?c==="header"?wk(t,a.reason,a.getFullMessage()):ai(t,a.reason,a.getFullMessage()):fn(t,a.reason,a.getFullMessage())):fn(t,"unexpected-error",a.message)}return t.headerToken?i():s()}var dx=t=>{let{frontendApi:e,isSignedIn:r,proxyUrl:n,isInterstitial:i,reason:s,message:o,publishableKey:a,isSatellite:c,domain:f}=t;return{frontendApi:e,isSignedIn:r,proxyUrl:n,isInterstitial:i,reason:s,message:o,publishableKey:a,isSatellite:c,domain:f}},hx=(t,e)=>e?{headerToken:bk(t.headerToken||e(qe.Headers.Authorization)),origin:t.origin||e(qe.Headers.Origin),host:t.host||e(qe.Headers.Host),forwardedHost:t.forwardedHost||e(qe.Headers.ForwardedHost),forwardedPort:t.forwardedPort||e(qe.Headers.ForwardedPort),forwardedProto:t.forwardedProto||e(qe.Headers.CloudFrontForwardedProto)||e(qe.Headers.ForwardedProto),referrer:t.referrer||e(qe.Headers.Referrer),userAgent:t.userAgent||e(qe.Headers.UserAgent)}:{};function px(t){let{apiClient:e}=t,{apiKey:r="",secretKey:n="",jwtKey:i="",apiUrl:s=$l,apiVersion:o=to,frontendApi:a="",proxyUrl:c="",publishableKey:f="",isSatellite:d=!1,domain:h="",audience:m="",userAgent:b}=t.options;return{authenticateRequest:({apiKey:P,secretKey:C,audience:L,frontendApi:B,proxyUrl:j,publishableKey:A,jwtKey:M,isSatellite:K,domain:G,searchParams:ae,...F})=>fx({...F,apiKey:P||r,secretKey:C||n,audience:L||m,apiUrl:s,apiVersion:o,frontendApi:B||a,proxyUrl:j||c,publishableKey:A||f,isSatellite:K||d,domain:G||h,jwtKey:M||i,searchParams:ae}),localInterstitial:({frontendApi:P,publishableKey:C,proxyUrl:L,isSatellite:B,domain:j,...A})=>fk({...A,frontendApi:P||a,proxyUrl:L||c,publishableKey:C||f,isSatellite:B||d,domain:j||h}),remotePublicInterstitial:({frontendApi:P,publishableKey:C,proxyUrl:L,isSatellite:B,domain:j,userAgent:A,...M})=>dk({...M,apiUrl:s,frontendApi:P||a,publishableKey:C||f,proxyUrl:L||c,isSatellite:B||d,domain:j||h,userAgent:A||b}),remotePrivateInterstitial:()=>e.interstitial.getInterstitial(),remotePublicInterstitialUrl:Zf,debugRequestState:dx}}function db(t){let e={...t},r=rd(e),n=px({options:e,apiClient:r}),i={...r,...n,__unstable_options:e};return gs(i,"__unstable_options","Use `createClerkClient({...})` to create a new clerk instance instead."),i}function ro(t,e,r){if(typeof t=="function")return t(e);if(typeof t<"u")return t;if(typeof r<"u")return r}function id(t){return t?Ml(t)||Fl(t):!0}function Ml(t){return/^http(s)?:\/\//.test(t||"")}function Fl(t){return t.startsWith("/")}var Vl=()=>(process.env.CLERK_FRONTEND_API&&de("CLERK_FRONTEND_API","Use `CLERK_PUBLISHABLE_KEY` instead."),{publishableKey:process.env.CLERK_PUBLISHABLE_KEY||"",frontendApi:process.env.CLERK_FRONTEND_API||"",clerkJSUrl:process.env.CLERK_JS||"",clerkJSVersion:process.env.CLERK_JS_VERSION||""}),Hl=()=>(process.env.CLERK_API_KEY&&de("CLERK_API_KEY","Use `CLERK_SECRET_KEY` instead."),{secretKey:process.env.CLERK_SECRET_KEY||process.env.CLERK_API_KEY||"",apiKey:process.env.CLERK_API_KEY||"",apiUrl:process.env.CLERK_API_URL||"https://api.clerk.dev",apiVersion:process.env.CLERK_API_VERSION||"v1",domain:process.env.CLERK_DOMAIN||"",proxyUrl:process.env.CLERK_PROXY_URL||"",signInUrl:process.env.CLERK_SIGN_IN_URL||"",isSatellite:process.env.CLERK_IS_SATELLITE==="true",jwtKey:process.env.CLERK_JWT_KEY||""});async function hb({clerkClient:t,requestState:e}){let{clerkJSVersion:r,clerkJSUrl:n}=Vl();return e.publishableKey||e.frontendApi?t.localInterstitial({frontendApi:e.publishableKey?"":e.frontendApi,publishableKey:e.publishableKey,proxyUrl:e.proxyUrl,signInUrl:e.signInUrl,isSatellite:e.isSatellite,domain:e.domain,clerkJSVersion:r,clerkJSUrl:n}):await t.remotePrivateInterstitial()}var pb=t=>{let{clerkClient:e,apiKey:r,secretKey:n,frontendApi:i,publishableKey:s,req:o,options:a}=t,{jwtKey:c,authorizedParties:f,audience:d}=a||{},h={...Hl(),...Vl()},m=ob((T,P)=>{let C=Object.keys(o.headers).reduce((j,A)=>Object.assign(j,{[A]:o?.headers[A]}),{}),L=o.connection?.encrypted?"https":"http",B=new URL(o.url||"",`${L}://clerk-dummy`);return new T(B,{method:o.method,headers:new P(C)})}),b=nd(m),y=ro(a?.isSatellite,b,h.isSatellite),w=ro(a?.domain,b)||h.domain,S=a?.signInUrl||h.signInUrl,_=gx(ro(a?.proxyUrl,b,h.proxyUrl),b.toString());if(y&&!_&&!w)throw new Error(yx);if(y&&!Ml(S)&&mx(n||r||""))throw new Error(bx);return e.authenticateRequest({audience:d,apiKey:r,secretKey:n,frontendApi:i,publishableKey:s,jwtKey:c,authorizedParties:f,proxyUrl:_,isSatellite:y,domain:w,signInUrl:S,request:m})},mb=(t,e)=>{e.isUnknown&&(t.writeHead(401,{"Content-Type":"text/html"}),t.end())},gb=(t,e,r)=>{e.isInterstitial&&(t.writeHead(401,{"Content-Type":"text/html"}),t.end(r))},yb=(t,e)=>{e.message&&t.setHeader(qe.Headers.AuthMessage,encodeURIComponent(e.message)),e.reason&&t.setHeader(qe.Headers.AuthReason,encodeURIComponent(e.reason)),e.status&&t.setHeader(qe.Headers.AuthStatus,encodeURIComponent(e.status))},mx=t=>t.startsWith("test_")||t.startsWith("sk_test_"),gx=(t,e)=>!t||!id(t)||!Fl(t)?t:new URL(t,e).toString(),yx="Missing domain and proxyUrl. A satellite application needs to specify a domain or a proxyUrl",bx=`
Invalid signInUrl. A satellite application requires a signInUrl for development instances.
Check if signInUrl is missing from your configuration or if it is not an absolute URL.`,bb=t=>{let{clerkClient:e,frontendApi:r="",apiKey:n="",secretKey:i="",publishableKey:s=""}=t;return(o={})=>async(a,c,f)=>{let d=await pb({clerkClient:e,apiKey:n,secretKey:i,frontendApi:r,publishableKey:s,req:a,options:o});if(yb(c,d),d.isUnknown)return mb(c,d);if(d.isInterstitial){let h=await hb({clerkClient:e,requestState:d});return gb(c,d,h)}if(d.isSignedIn){a.auth={...d.toAuth(),claims:d.toAuth().sessionClaims},f();return}f(new Error("Unauthenticated"))}},od=t=>{let{clerkClient:e,frontendApi:r="",apiKey:n="",secretKey:i="",publishableKey:s=""}=t;return(o={})=>async(a,c,f)=>{let d=await pb({clerkClient:e,apiKey:n,secretKey:i,frontendApi:r,publishableKey:s,req:a,options:o});if(yb(c,d),d.isUnknown)return mb(c,d);if(d.isInterstitial){let h=await hb({clerkClient:e,requestState:d});return gb(c,d,h)}a.auth={...d.toAuth(),claims:d.toAuth().sessionClaims},f()}};function sd(t){let e=db(t),r=od({...t,clerkClient:e}),n=bb({...t,clerkClient:e});return Object.assign(e,{expressWithAuth:r,expressRequireAuth:n,verifyToken:(s,o)=>jl(s,{issuer:c=>c.startsWith("https://clerk.")||c.includes(".clerk.accounts"),...t,...o}),...wx()})}var wx=()=>({base:{verifySessionToken:e=>{let{jwtKey:r}=Hl(),{payload:n}=ql(e);return jl(e,{issuer:n.iss,jwtKey:r})}}});var no={},ad=new Proxy(no,{get(t,e){if(!!no.authenticateRequest)return no[e];let n={...Hl(),...Vl()};return n.secretKey?(no=sd({...n,userAgent:"@clerk/clerk-sdk-node"}),no[e]):sd({...n,userAgent:"@clerk/clerk-sdk-node"})[e]},set(){return!1}});var ld=(...t)=>{let e={...Hl(),...Vl()};return od({clerkClient:ad,...e})(...t)};var{users:c2,smsMessages:u2,sessions:f2,emailAddresses:d2,phoneNumbers:h2,emails:p2,invitations:m2,organizations:g2,clients:y2,allowlistIdentifiers:b2,domains:w2}=ad;var vx=ld(),wb=(t,e,r)=>vx(t,e,r);var Wl=class{async handle(e,r){let n=e.auth;if(!n||!n.userId){r.status(401).json({message:"N\xE3o autenticado"});return}r.status(200).json({message:"Usu\xE1rio autenticado com Clerk",userId:n.userId})}};function vb(){return{clerkAuthController:new Wl}}var{clerkAuthController:Ex}=vb(),cd=Sx();cd.get("/",wb,async(t,e)=>{await Ex.handle(t,e)});import{Router as mN}from"express";var zl=class{constructor(e,r){this.clerkWebhookService=e;this.userRepository=r}async handle(e,r){try{let n=await this.clerkWebhookService.verifyEvent(e);if(!n)throw new Error("Erro ao verificar webhook.");let{type:i,data:{created_at:s,birthday:o,last_sign_in_at:a,updated_at:c,email_addresses:f,...d}}=n;if(i==="user.created")return await this.userRepository.create({created_at:new Date(s),birthday:new Date(o),last_sign_in_at:new Date(a),updated_at:new Date(c),email_addresses:f,...d}),r.status(201).json({message:"Usu\xE1rio criado com sucesso."})}catch(n){if(n instanceof Error)return r.status(400).json({message:n.message})}}};var Jl=class{constructor(e,r){this.clerkWebhookService=e;this.userRepository=r}async handle(e,r){try{let n=await this.clerkWebhookService.verifyEvent(e);if(!n)throw new Error("Erro ao verificar webhook.");let{type:i,data:s}=n;i==="user.deleted"&&(await this.userRepository.delete(s),r.status(200).json({message:"Usu\xE1rio deletado com sucesso."}))}catch(n){n instanceof Error&&r.status(400).json({message:n.message})}}};var Gl=class{constructor(e,r){this.clerkWebhookService=e;this.userRepository=r}async handle(e,r){try{let n=await this.clerkWebhookService.verifyEvent(e);if(!n)throw new Error("Erro ao verificar webhook.");let{type:i,data:{email_addresses:s,...o}}=n;i==="user.updated"&&(await this.userRepository.update({...o,email_addresses:s}),r.status(200).json({message:"Usu\xE1rio atualizado com sucesso."}))}catch(n){n instanceof Error&&r.status(400).json({message:n.message})}}};var Yl=class{constructor(e){this.prisma=e}async create({email_addresses:e,first_name:r,last_name:n,...i}){await this.prisma.user.create({data:{...i,firstName:r,lastName:n,emailAddresses:{create:e.map(s=>({emailAddress:s.email_address,object:s.object,verification:JSON.stringify(s.verification),linkedTo:JSON.stringify(s.linked_to),id:s.id}))}}})}async update(e){await this.prisma.user.update({where:{id:e.id},data:{...e,emailAddresses:{update:e.email_addresses.map(r=>({where:{id:r.id},data:{emailAddress:r.email_address,object:r.object,verification:JSON.stringify(r.verification),linkedTo:JSON.stringify(r.linked_to)}}))}}})}async delete(e){await this.prisma.user.delete({where:{id:e.id}})}};var T0=On(R0(),1),B0=new T0.PrismaClient;function Ic(){return new Yl(B0)}import{Webhook as hN}from"svix";var Nc=class{constructor(e){this.webhook=e}async verifyEvent(e){let{"svix-id":r,"svix-timestamp":n,"svix-signature":i}=e.headers;if(!r||!n||!i)throw new Error("Headers are missing");let s=JSON.stringify(e.body),o={"svix-id":r,"svix-timestamp":n,"svix-signature":i};try{return this.webhook.verify(s,o)}catch(a){if(a instanceof Error)throw new Error(a.message)}}};function Uc(t){return new Nc(new hN(t))}import{config as pN}from"dotenv";pN();function O0(){return{createUserController:new zl(Uc(process.env.CLERK_USER_CREATED),Ic())}}function I0(){return{updateUserController:new Gl(Uc(process.env.CLERK_USER_UPDATED),Ic())}}function N0(){return{deleteUserController:new Jl(Uc(process.env.CLERK_USER_DELETED),Ic())}}var{createUserController:gN}=O0(),{updateUserController:yN}=I0(),{deleteUserController:bN}=N0(),To=mN();To.post("/api/webhook/created-user",async(t,e)=>{await gN.handle(t,e)});To.post("/api/webhook/updated-user",async(t,e)=>{await yN.handle(t,e)});To.post("/api/webhook/deleted-user",async(t,e)=>{await bN.handle(t,e)});var kn=Eh(),vN={methods:["GET","POST","PUT","DELETE"],origin:["http://localhost:3000","https://rede-ct.vercel.app"],credentials:!0};kn.use(wN(vN));kn.use(Eh.json());kn.use(Eh.urlencoded({extended:!1}));kn.use("/",hu);kn.use("/auth",cd);kn.use("/user",To);var EN=SN.createServer(kn),U0=3e3;EN.listen(U0,()=>{console.log(`\u{1F680} Aplica\xE7\xE3o rodando na porta ${U0}.`)});
/*! Bundled license information:

pvtsutils/build/index.es.js:
  (*!
   * MIT License
   * 
   * Copyright (c) 2017-2024 Peculiar Ventures, LLC
   * 
   * Permission is hereby granted, free of charge, to any person obtaining a copy
   * of this software and associated documentation files (the "Software"), to deal
   * in the Software without restriction, including without limitation the rights
   * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
   * copies of the Software, and to permit persons to whom the Software is
   * furnished to do so, subject to the following conditions:
   * 
   * The above copyright notice and this permission notice shall be included in all
   * copies or substantial portions of the Software.
   * 
   * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
   * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
   * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
   * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
   * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
   * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
   * SOFTWARE.
   * 
   *)

pvutils/build/utils.es.js:
webcrypto-core/build/webcrypto-core.es.js:
@peculiar/webcrypto/build/webcrypto.es.js:
  (*!
   Copyright (c) Peculiar Ventures, LLC
  *)

asn1js/build/index.es.js:
  (*!
   * Copyright (c) 2014, GMO GlobalSign
   * Copyright (c) 2015-2022, Peculiar Ventures
   * All rights reserved.
   * 
   * Author 2014-2019, Yury Strozhevsky
   * 
   * Redistribution and use in source and binary forms, with or without modification,
   * are permitted provided that the following conditions are met:
   * 
   * * Redistributions of source code must retain the above copyright notice, this
   *   list of conditions and the following disclaimer.
   * 
   * * Redistributions in binary form must reproduce the above copyright notice, this
   *   list of conditions and the following disclaimer in the documentation and/or
   *   other materials provided with the distribution.
   * 
   * * Neither the name of the copyright holder nor the names of its
   *   contributors may be used to endorse or promote products derived from
   *   this software without specific prior written permission.
   * 
   * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
   * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
   * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
   * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR
   * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
   * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
   * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
   * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
   * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
   * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
   * 
   *)

node-fetch-native/dist/shared/node-fetch-native.8afd3fea.cjs:
  (*! fetch-blob. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)
  (*! formdata-polyfill. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)
  (*! node-domexception. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)

cookie/index.js:
  (*!
   * cookie
   * Copyright(c) 2012-2014 Roman Shtylman
   * Copyright(c) 2015 Douglas Christopher Wilson
   * MIT Licensed
   *)

@prisma/client/runtime/library.js:
  (*! Bundled license information:
  
  decimal.js/decimal.mjs:
    (*!
     *  decimal.js v10.5.0
     *  An arbitrary-precision Decimal type for JavaScript.
     *  https://github.com/MikeMcl/decimal.js
     *  Copyright (c) 2025 Michael Mclaughlin <M8ch88l@gmail.com>
     *  MIT Licence
     *)
  *)
*/
//# sourceMappingURL=server.js.map
import Gv from"node:http";import{apiReference as kv}from"@scalar/express-api-reference";import Ov from"cors";import Bp from"express";import xh from"zod";var pe=class extends Error{};var ie=class extends Error{};var m=class extends Error{};var p=class extends Error{};var Re=class extends Error{};import{ZodError as jh}from"zod";var Jr=class extends jh{};var Yr=class{handle(e,r,t,i){return e instanceof Jr?t.status(400).json({message:"Validation error",error:xh.treeifyError(e)}):e instanceof pe?t.status(400).json({message:e.message}):e instanceof p?t.status(404).json({message:e.message}):e instanceof Re?t.status(401).json({message:e.message}):e instanceof ie?t.status(409).json({message:e.message}):e instanceof m?t.status(500).json({message:e.message}):t.status(500).json({message:"Internal server error"})}};function Up(){return{errorHandler:new Yr}}import{OpenAPIRegistry as HS,OpenApiGeneratorV3 as VS}from"@asteasolutions/zod-to-openapi";import{$Enums as qp}from"@prisma/client";import I from"zod";import{extendZodWithOpenApi as Mh}from"@asteasolutions/zod-to-openapi";import Ct from"zod";var Ph=1,Ah=6;Mh(Ct);var $s=Ct.object({page:Ct.coerce.number().min(1).default(Ph),limit:Ct.coerce.number().min(1).default(Ah),title:Ct.string().optional(),description:Ct.string().optional(),orderBy:Ct.enum(["asc","desc"]).default("desc")}),Xr=class{constructor(e){this.certificationRepository=e}async handle(e,r){try{let{title:t,description:i,limit:n,orderBy:s,page:a}=$s.parse(e.query),c=a*n-n,d=e.user.id,[h,j]=await Promise.all([this.certificationRepository.findByUserId({userId:d,pagination:{offset:c,limit:n},filter:{title:t,description:i,orderBy:s}}),this.certificationRepository.count({filter:{title:t,description:i,userId:d}})]),q=Math.max(Math.ceil(j/n),1);return r.status(200).json({page:a,totalPages:q,offset:c,limit:n,totalCertifications:j,certifications:h})}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as Th}from"@asteasolutions/zod-to-openapi";import St from"zod";var Dh=1,Fh=7;Th(St);var Qs=St.object({page:St.coerce.number().min(1).default(Dh),limit:St.coerce.number().min(1).default(Fh),title:St.string().optional(),content:St.string().optional(),orderBy:St.enum(["asc","desc"]).default("desc")}),$r=class{constructor(e){this.newsRepository=e}async handle(e,r){try{let{page:t,limit:i,content:n,orderBy:s,title:a}=Qs.parse(e.query),c=i*t-i,d=e.user.id,[h,j]=await Promise.all([this.newsRepository.findByAuthorId({authorId:d,pagination:{offset:c,limit:i},filter:{orderBy:s,title:a,content:n}}),this.newsRepository.count({filter:{authorId:d,content:n,title:a}})]),q=Math.ceil(j/i);r.status(200).json({page:t,totalPages:q,offset:c,limit:i,news:h})}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as Bh}from"@asteasolutions/zod-to-openapi";import{PendencyStatus as Uh}from"@prisma/client";import $e from"zod";var qh=1,kh=6;Bh($e);var ea=$e.object({page:$e.coerce.number().min(1).default(qh),limit:$e.coerce.number().min(1).default(kh),title:$e.string().optional(),description:$e.string().optional(),status:$e.enum(Uh).default("PENDING"),orderBy:$e.enum(["asc","desc"]).default("desc")}),Qr=class{constructor(e){this.pendencyRepository=e}async handle(e,r){try{let{limit:t,page:i,...n}=ea.parse(e.query),s=i*t-t,a=e.user.id,[c,d]=await Promise.all([this.pendencyRepository.findByUserId({userId:a,pagination:{offset:s,limit:t},filter:n}),this.pendencyRepository.count({filter:{...n,userId:a}})]),h=Math.max(Math.ceil(d/t),1);return r.status(200).json({page:i,totalPages:h,offset:s,limit:t,pendencies:c})}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as Oh}from"@asteasolutions/zod-to-openapi";import eo from"zod";Oh(eo);var ta=eo.object({password:eo.string(),email:eo.email()}),to=class{constructor(e,r,t){this.userRepository=e;this.bcrypt=r;this.jwtService=t}async handle(e,r){try{let{email:t,password:i}=ta.parse(e.body),n=await this.userRepository.findByEmail(t);if(!n)return r.status(401).json({message:"Usu\xE1rio n\xE3o existe."});if(!await this.bcrypt.compare({password:i,hashedPassword:n.passwordHash}))throw new Re("Senha inv\xE1lida.");let{id:a,role:c}=n,d=this.jwtService.sign({id:a,role:c,email:t});return r.status(200).json({token:d})}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as Nh}from"@asteasolutions/zod-to-openapi";import Zt from"zod";var ro=8;Nh(Zt);var ra=Zt.object({name:Zt.string("Nome \xE9 obrigat\xF3rio.").min(1,"Nome \xE9 obrigat\xF3rio."),emailAddress:Zt.email("E-mail inv\xE1lido.").min(1,"E-mail \xE9 obrigat\xF3rio."),password:Zt.string("A senha \xE9 obrigat\xF3ria.").min(ro,`A senha deve ter pelo menos ${ro} caracteres.`),confirmPassword:Zt.string("A senha \xE9 obrigat\xF3ria.").min(ro,`A senha deve ter pelo menos ${ro} caracteres.`)}).refine(o=>o.password===o.confirmPassword,{message:"As senhas n\xE3o coincidem.",path:["confirmPassword"]}),oo=class{constructor(e,r){this.userRepository=e;this.bcrypt=r}async handle(e,r){try{let{emailAddress:t,name:i,password:n}=ra.parse(e.body);if(await this.userRepository.findByEmail(t))throw new ie("Usu\xE1rio j\xE1 existe.");let a=await this.bcrypt.hash(n);return await this.userRepository.create({name:i,emailAddress:t,passwordHash:a}),r.status(201).json()}catch(t){if(t instanceof Error)throw new m(t.message)}}};var kp={method:"post",path:"/auth/sign-up",tags:["Authentication"],summary:"Create a new user",request:{body:{content:{"application/json":{schema:ra}}}},responses:{201:{description:"User created successfully",summary:"User Registration Successful",content:{"application/json":{schema:I.object({message:I.string()})}}},400:{description:"Invalid input data provided",summary:"Validation Error",content:{"application/json":{schema:I.object({errors:I.record(I.string(),I.string())})}}},409:{description:"User already exists with this email",summary:"User Already Exists",content:{"application/json":{schema:I.object({message:I.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:I.object({message:I.string()})}}}}},Op={method:"post",path:"/auth/sign-in",tags:["Authentication"],summary:"Sign in",request:{body:{content:{"application/json":{schema:ta}}}},responses:{200:{description:"Authentication successful, JWT token returned",summary:"Login Successful",content:{"application/json":{schema:I.object({token:I.string()})}}},400:{description:"Invalid credentials or input data",summary:"Validation Error",content:{"application/json":{schema:I.object({errors:I.record(I.string(),I.string())})}}},401:{description:"Invalid email or password",summary:"Authentication Failed",content:{"application/json":{schema:I.object({message:I.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:I.object({message:I.string()})}}}}},Np={method:"get",path:"/auth/user",tags:["Authentication"],summary:"Search for authenticated user",security:[{bearerAuth:[]}],responses:{200:{description:"Authenticated user information retrieved successfully",summary:"User Information Retrieved",content:{"application/json":{schema:I.object({name:I.string(),id:I.string(),avatarUrl:I.string().nullable(),createdAt:I.date(),updatedAt:I.date(),emailAddress:I.string(),orcid:I.string().nullable(),phone:I.string().nullable(),lattesUrl:I.string().nullable(),role:I.enum(qp.UserRole)}).nullable()}}},400:{description:"Invalid request parameters",summary:"Validation Error",content:{"application/json":{schema:I.object({errors:I.record(I.string(),I.string())})}}},404:{description:"User not found or not authenticated",summary:"User Not Found",content:{"application/json":{schema:I.object({message:I.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:I.object({message:I.string()})}}}}},Gp={method:"get",path:"/auth/user/news",tags:["Authentication"],summary:"List authenticated user news",security:[{bearerAuth:[]}],request:{query:Qs},responses:{200:{description:"Paginated list of authenticated user news retrieved successfully",summary:"User News Retrieved",content:{"application/json":{schema:I.object({page:I.number(),totalPages:I.number(),offset:I.number(),limit:I.number(),news:I.object({content:I.string(),id:I.string(),title:I.string(),createdAt:I.date(),updatedAt:I.date(),imageUrl:I.string().nullable()})})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:I.object({errors:I.record(I.string(),I.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:I.object({message:I.string()})}}}}},Lp={method:"get",path:"/auth/admin",tags:["Authentication"],summary:"Verify admin access",security:[{bearerAuth:[]}],responses:{200:{description:"Admin access verified successfully",summary:"Admin Access Granted",content:{"application/json":{schema:I.object({success:I.boolean()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:I.object({message:I.string()})}}}}},Wp={method:"get",path:"/auth/certifications",tags:["Authentication"],summary:"List all authenticated user's certifications",security:[{bearerAuth:[]}],request:{query:$s},responses:{200:{description:"Paginated list of authenticated user certifications retrieved successfully",summary:"User Certifications Retrieved",content:{"application/json":{schema:I.object({page:I.number(),totalPages:I.number(),offset:I.number(),limit:I.number(),certifications:I.object({description:I.string(),id:I.string(),title:I.string(),certificationUrl:I.string(),createdAt:I.date(),updatedAt:I.date(),userId:I.string()})})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:I.object({errors:I.record(I.string(),I.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:I.object({message:I.string()})}}}}},_p={method:"get",path:"/auth/pendencies",tags:["Authentication"],summary:"List all authenticated user's pendencies",security:[{bearerAuth:[]}],request:{query:ea},responses:{200:{description:"Paginated list of authenticated user pendencies retrieved successfully",summary:"User Pendencies Retrieved",content:{"application/json":{schema:I.object({page:I.number(),totalPages:I.number(),offset:I.number(),limit:I.number(),pendencies:I.object({id:I.string(),title:I.string(),description:I.string(),status:I.enum(qp.PendencyStatus),createdAt:I.date(),updatedAt:I.date(),userId:I.string()})})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:I.object({errors:I.record(I.string(),I.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:I.object({message:I.string()})}}}}};import w from"zod";import{extendZodWithOpenApi as Gh}from"@asteasolutions/zod-to-openapi";import oa from"zod";Gh(oa);var ia=oa.object({id:oa.uuid()}),io=class{constructor(e,r){this.bookVolumeRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=ia.parse({id:e.params.id}),i=await this.bookVolumeRepository.findById(t);if(!i)throw new p("O volume de livro n\xE3o existe.");return i.authorImageUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.authorImageUrl}),i.coverImageUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.coverImageUrl}),i.catalogSheetUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.catalogSheetUrl}),await this.bookVolumeRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as Lh}from"@asteasolutions/zod-to-openapi";import na from"zod";Lh(na);var sa=na.object({id:na.uuid()}),no=class{constructor(e){this.bookVolumeRepository=e}async handle(e,r){try{let{id:t}=sa.parse({id:e.params.id}),i=await this.bookVolumeRepository.findById(t);if(!i)throw new p("Volume de livro n\xE3o encontrado.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as Wh}from"@asteasolutions/zod-to-openapi";import Qe from"zod";var _h=1,zh=6;Wh(Qe);var aa=Qe.object({page:Qe.coerce.number().min(1).default(_h),limit:Qe.coerce.number().min(1).default(zh),title:Qe.string().optional(),author:Qe.string().optional(),description:Qe.string().optional(),orderBy:Qe.enum(["asc","desc"]).default("desc")}),so=class{constructor(e){this.bookVolumeRepository=e}async handle(e,r){try{let{limit:t,page:i,...n}=aa.parse(e.query),s=i*t-t,[a,c]=await Promise.all([this.bookVolumeRepository.find({pagination:{offset:s,limit:t},filter:n}),this.bookVolumeRepository.count({filter:n})]),d=Math.max(Math.ceil(c/t),1);return r.status(200).json({page:i,totalPages:d,offset:s,limit:t,bookVolumes:a})}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as Hh}from"@asteasolutions/zod-to-openapi";import Ie from"zod";var M={NEWS:"images/news",USER:"images/user",IN_MEMORIAM:"images/in-memoriam",PARTNER:"images/partners",CERTIFICATION:"documents/certifications",PENDENCY:"documents/pendencies",REGIMENT:"documents/regiments",MEETING_MINUTE:"documents/meeting-minutes",INTERNATIONAL_SCIENTIFIC_CONGRESS_GALLERY:"images/international-scientific-congress-gallery",GALLERY:"images/regional-congress-gallery",REGIONAL_CONGRESS_GALLERY:"images/regional-congress-gallery",WEBINAR:"images/webinars",COURSE:"images/courses",POST_GRADUATE_PROGRAM:"images/post-graduate-programs",EVENT:"images/events",SCIENTIFIC_JOURNAL:"images/scientific-journals",BOOK_VOLUME_AUTHOR_IMAGE:"images/book-volumes/authors",BOOK_VOLUME_COVER:"images/book-volumes/covers",BOOK_VOLUME_CATALOG_SHEET:"documents/book-volumes/catalog-sheets"};var ao=5,zp=1024,Vh=zp*zp,ma=ao*Vh;Hh(Ie);var ca=Ie.object({id:Ie.uuid(),volumeNumber:Ie.coerce.number().int().positive().optional(),year:Ie.coerce.number().int().positive().optional(),title:Ie.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio.").optional(),author:Ie.string().min(1,"Autor \xE9 obrigat\xF3rio.").optional(),accessUrl:Ie.string().url("URL de acesso deve ser v\xE1lida").optional(),description:Ie.string().optional(),authorImage:Ie.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=ma,`A imagem do autor deve ter no m\xE1ximo ${ao}MB.`).optional(),coverImage:Ie.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=ma,`A imagem da capa deve ter no m\xE1ximo ${ao}MB.`).optional(),catalogSheet:Ie.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=ma,`A ficha catalogr\xE1fica deve ter no m\xE1ximo ${ao}MB.`).optional()}),mo=class{constructor(e,r){this.bookVolumeRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,volumeNumber:i,year:n,title:s,author:a,accessUrl:c,description:d,authorImage:h,coverImage:j,catalogSheet:q}=ca.parse({id:e.params.id,...e.body,authorImage:e.files?.authorImage?.[0],coverImage:e.files?.coverImage?.[0],catalogSheet:e.files?.catalogSheet?.[0]}),X=await this.bookVolumeRepository.findById(t);if(!X)throw new p("O volume de livro n\xE3o existe.");let Q=X.authorImageUrl,ue=X.coverImageUrl,De=X.catalogSheetUrl;return h&&(Q=await this.firebaseStorageService.uploadFile({file:h,id:t,folder:M.BOOK_VOLUME_AUTHOR_IMAGE})),j&&(ue=await this.firebaseStorageService.uploadFile({file:j,id:t,folder:M.BOOK_VOLUME_COVER})),q&&(De=await this.firebaseStorageService.uploadFile({file:q,id:t,folder:M.BOOK_VOLUME_CATALOG_SHEET})),await this.bookVolumeRepository.update({id:t,volumeNumber:i,year:n,title:s,author:a,accessUrl:c,description:d,authorImageUrl:Q,coverImageUrl:ue,catalogSheetUrl:De}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var Hp={method:"post",path:"/book-volumes",tags:["Book Volumes"],summary:"Create book volume",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:w.object({volumeNumber:w.number().int().positive().openapi({description:"N\xFAmero do volume"}),year:w.number().int().positive().openapi({description:"Ano de publica\xE7\xE3o"}),title:w.string().min(1).openapi({description:"T\xEDtulo do livro"}),author:w.string().min(1).openapi({description:"Nome do autor"}),accessUrl:w.string().url().optional().openapi({description:"URL de acesso ao livro"}),description:w.string().optional().openapi({description:"Descri\xE7\xE3o do livro"}),authorImage:w.string().optional().openapi({description:"Imagem do autor (m\xE1ximo 5MB)",type:"string",format:"binary"}),coverImage:w.string().optional().openapi({description:"Imagem da capa (m\xE1ximo 5MB)",type:"string",format:"binary"}),catalogSheet:w.string().optional().openapi({description:"Ficha catalogr\xE1fica (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{201:{description:"Book volume created successfully",summary:"Volume Created"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:w.object({errors:w.record(w.string(),w.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:w.object({message:w.string()})}}}}},Vp={method:"get",path:"/book-volumes",tags:["Book Volumes"],summary:"List book volumes",security:[{bearerAuth:[]}],request:{query:aa},responses:{200:{description:"Paginated list of book volumes retrieved successfully",summary:"Volumes Retrieved",content:{"application/json":{schema:w.object({page:w.number(),totalPages:w.number(),offset:w.number(),limit:w.number(),bookVolumes:w.array(w.object({id:w.string(),volumeNumber:w.number(),year:w.number(),title:w.string(),author:w.string(),accessUrl:w.string().nullable(),authorImageUrl:w.string().nullable(),coverImageUrl:w.string().nullable(),catalogSheetUrl:w.string().nullable(),description:w.string().nullable(),createdAt:w.date(),updatedAt:w.date()}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:w.object({errors:w.record(w.string(),w.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:w.object({message:w.string()})}}}}},Zp={method:"get",path:"/book-volumes/{id}",tags:["Book Volumes"],summary:"Find book volume by ID",security:[{bearerAuth:[]}],request:{params:sa},responses:{200:{description:"Book volume details retrieved successfully",summary:"Volume Retrieved",content:{"application/json":{schema:w.object({id:w.string(),volumeNumber:w.number(),year:w.number(),title:w.string(),author:w.string(),accessUrl:w.string().nullable(),authorImageUrl:w.string().nullable(),coverImageUrl:w.string().nullable(),catalogSheetUrl:w.string().nullable(),description:w.string().nullable(),createdAt:w.date(),updatedAt:w.date()}).nullable()}}},400:{description:"Invalid volume ID format",summary:"Validation Error",content:{"application/json":{schema:w.object({errors:w.record(w.string(),w.string())})}}},404:{description:"Book volume not found with the provided ID",summary:"Volume Not Found",content:{"application/json":{schema:w.object({message:w.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:w.object({message:w.string()})}}}}},Kp={method:"put",path:"/book-volumes/{id}",tags:["Book Volumes"],summary:"Update book volume",security:[{bearerAuth:[]}],request:{params:ca.pick({id:!0}),body:{content:{"multipart/form-data":{schema:w.object({volumeNumber:w.number().int().positive().optional().openapi({description:"N\xFAmero do volume"}),year:w.number().int().positive().optional().openapi({description:"Ano de publica\xE7\xE3o"}),title:w.string().min(1).optional().openapi({description:"T\xEDtulo do livro"}),author:w.string().min(1).optional().openapi({description:"Nome do autor"}),accessUrl:w.string().url().optional().openapi({description:"URL de acesso ao livro"}),description:w.string().optional().openapi({description:"Descri\xE7\xE3o do livro"}),authorImage:w.string().optional().openapi({description:"Imagem do autor (m\xE1ximo 5MB)",type:"string",format:"binary"}),coverImage:w.string().optional().openapi({description:"Imagem da capa (m\xE1ximo 5MB)",type:"string",format:"binary"}),catalogSheet:w.string().optional().openapi({description:"Ficha catalogr\xE1fica (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{200:{description:"Book volume updated successfully",summary:"Volume Updated"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:w.object({errors:w.record(w.string(),w.string())})}}},404:{description:"Book volume not found with the provided ID",summary:"Volume Not Found",content:{"application/json":{schema:w.object({message:w.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:w.object({message:w.string()})}}}}},Jp={method:"delete",path:"/book-volumes/{id}",tags:["Book Volumes"],summary:"Delete book volume",security:[{bearerAuth:[]}],request:{params:ia},responses:{200:{description:"Book volume deleted successfully",summary:"Volume Deleted"},400:{description:"Invalid volume ID format",summary:"Validation Error",content:{"application/json":{schema:w.object({errors:w.record(w.string(),w.string())})}}},404:{description:"Book volume not found with the provided ID",summary:"Volume Not Found",content:{"application/json":{schema:w.object({message:w.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:w.object({message:w.string()})}}}}};import{$Enums as eR}from"@prisma/client";import P from"zod";import{extendZodWithOpenApi as Zh}from"@asteasolutions/zod-to-openapi";import pa from"zod";Zh(pa);var da=pa.object({id:pa.string()}),co=class{constructor(e,r){this.certificationRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=da.parse({id:e.params.certification_id}),i=await this.certificationRepository.findById(t);if(!i)throw new p("A certifica\xE7\xE3o n\xE3o existe.");return await Promise.all([this.certificationRepository.deleteById(i.id),this.firebaseStorageService.deleteFile({fileUrl:i.certificationUrl})]),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as Kh}from"@asteasolutions/zod-to-openapi";import la from"zod";Kh(la);var ua=la.object({certificationId:la.uuid()}),po=class{constructor(e){this.certificationRepository=e}async handle(e,r){try{let{certificationId:t}=ua.parse({certificationId:e.params.certification_id}),i=await this.certificationRepository.findById(t);if(!i)throw new p("Certificado n\xE3o encontrado.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as Jh}from"@asteasolutions/zod-to-openapi";import et from"zod";var Yh=1,Xh=6;Jh(et);var ga=et.object({page:et.coerce.number().min(1).default(Yh),limit:et.coerce.number().min(1).default(Xh),title:et.string().optional(),description:et.string().optional(),userId:et.uuid().optional(),orderBy:et.enum(["asc","desc"]).default("desc")}),lo=class{constructor(e){this.certificationRepository=e}async handle(e,r){try{let{limit:t,page:i,...n}=ga.parse(e.query),s=i*t-t,[a,c]=await Promise.all([this.certificationRepository.find({pagination:{offset:s,limit:t},filter:n}),this.certificationRepository.count({filter:n})]),d=Math.max(Math.ceil(c/t),1);return r.status(200).json({page:i,totalPages:d,offset:s,limit:t,certifications:a})}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as $h}from"@asteasolutions/zod-to-openapi";import Kt from"zod";$h(Kt);var go=Kt.object({userId:Kt.uuid(),title:Kt.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),description:Kt.string().min(1,"Descri\xE7\xE3o \xE9 obrigat\xF3ria."),certification:Kt.any().refine(o=>o&&typeof o=="object"&&o.size>0,"Arquivo do certificado \xE9 obrigat\xF3rio")}),uo=class{constructor(e,r,t){this.userRepository=e;this.certificationRepository=r;this.firebaseStorageService=t}async handle(e,r){try{let{userId:t,title:i,description:n,certification:s}=go.parse({...e.body,userId:e.params.user_id,certification:e.file});if(!await this.userRepository.findById(t))throw new pe("O usu\xE1rio n\xE3o existe.");let c=await this.firebaseStorageService.uploadFile({file:s,id:t,folder:M.CERTIFICATION});return await this.certificationRepository.register({userId:t,title:i,description:n,certificationUrl:c}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as Qh}from"@asteasolutions/zod-to-openapi";import Jt from"zod";Qh(Jt);var yo=Jt.object({id:Jt.uuid(),title:Jt.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),description:Jt.string().min(1,"Descri\xE7\xE3o \xE9 obrigat\xF3ria."),certification:Jt.any().refine(o=>o==null||typeof o=="object"&&typeof o.size=="number"&&(o.size===0||o.size>0),"Arquivo do certificado \xE9 inv\xE1lido").optional()}),fo=class{constructor(e,r){this.certificationRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{certification:t,id:i,...n}=yo.parse({...e.body,id:e.params.certification_id,certification:e.file}),s=await this.certificationRepository.findById(i);if(!s)throw new pe("A certifica\xE7\xE3o n\xE3o existe");let a=s.certificationUrl;return t&&t.size>0&&(a=await this.firebaseStorageService.updateFile({file:t,id:s.userId,folder:M.CERTIFICATION,fileUrl:s.certificationUrl})),await this.certificationRepository.update({...n,id:i,certificationUrl:a}),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var Yp={method:"post",path:"/certifications/{user_id}",tags:["Certifications"],summary:"Register certification for user",security:[{bearerAuth:[]}],request:{params:go.pick({userId:!0}).transform(()=>({user_id:""})),body:{content:{"multipart/form-data":{schema:go.omit({userId:!0})}}}},responses:{201:{description:"Certification registered successfully for the user",summary:"Certification Registered",content:{"application/json":{schema:P.object({message:P.string()})}}},400:{description:"Invalid input data or file format",summary:"Validation Error",content:{"application/json":{schema:P.object({errors:P.record(P.string(),P.string())})}}},404:{description:"User not found with the provided ID",summary:"User Not Found",content:{"application/json":{schema:P.object({message:P.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:P.object({message:P.string()})}}}}},Xp={method:"get",path:"/certifications",tags:["Certifications"],summary:"List certifications",security:[{bearerAuth:[]}],request:{query:ga},responses:{200:{description:"Paginated list of certifications with user information retrieved successfully",summary:"Certifications Retrieved",content:{"application/json":{schema:P.object({page:P.number(),totalPages:P.number(),offset:P.number(),limit:P.number(),certifications:P.array(P.object({description:P.string(),userId:P.string(),title:P.string(),id:P.string(),createdAt:P.date(),updatedAt:P.date(),certificationUrl:P.url(),user:P.object({id:P.uuid(),name:P.string(),createdAt:P.date(),updatedAt:P.date(),avatarUrl:P.string().nullable(),emailAddress:P.email(),orcid:P.string().nullable(),phone:P.string().nullable(),lattesUrl:P.url().nullable(),role:P.enum(eR.UserRole)})}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:P.object({errors:P.record(P.string(),P.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:P.object({message:P.string()})}}}}},$p={method:"get",path:"/certifications/{certification_id}",tags:["Certifications"],summary:"Find certification by ID",security:[{bearerAuth:[]}],request:{params:ua},responses:{200:{description:"Certification details retrieved successfully",summary:"Certification Retrieved",content:{"application/json":{schema:P.object({description:P.string(),userId:P.string(),title:P.string(),id:P.string(),createdAt:P.date(),updatedAt:P.date(),certificationUrl:P.url()}).nullable()}}},400:{description:"Invalid certification ID format",summary:"Validation Error",content:{"application/json":{schema:P.object({errors:P.record(P.string(),P.string())})}}},404:{description:"Certification not found with the provided ID",summary:"Certification Not Found",content:{"application/json":{schema:P.object({message:P.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:P.object({message:P.string()})}}}}},Qp={method:"put",path:"/certifications/{certification_id}",tags:["Certifications"],summary:"Update certification",security:[{bearerAuth:[]}],request:{params:yo.pick({id:!0}).transform(()=>({certification_id:""})),body:{content:{"multipart/form-data":{schema:yo.omit({id:!0})}}}},responses:{204:{description:"Certification updated successfully",summary:"Certification Updated"},400:{description:"Invalid input data or file format",summary:"Validation Error",content:{"application/json":{schema:P.object({errors:P.record(P.string(),P.string())})}}},404:{description:"Certification not found with the provided ID",summary:"Certification Not Found",content:{"application/json":{schema:P.object({message:P.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:P.object({message:P.string()})}}}}},ed={method:"delete",path:"/certifications/{certification_id}",tags:["Certifications"],summary:"Delete certification",security:[{bearerAuth:[]}],request:{params:da},responses:{204:{description:"Certification deleted successfully",summary:"Certification Deleted"},400:{description:"Invalid certification ID format",summary:"Validation Error",content:{"application/json":{schema:P.object({errors:P.record(P.string(),P.string())})}}},404:{description:"Certification not found with the provided ID",summary:"Certification Not Found",content:{"application/json":{schema:P.object({message:P.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:P.object({message:P.string()})}}}}};import R from"zod";import{extendZodWithOpenApi as tR}from"@asteasolutions/zod-to-openapi";import fa from"zod";tR(fa);var ya=fa.object({id:fa.uuid()}),ho=class{constructor(e,r){this.courseRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=ya.parse({id:e.params.id}),i=await this.courseRepository.findById(t);if(!i)throw new p("O curso n\xE3o existe.");return i.imageUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.imageUrl}),await this.courseRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as rR}from"@asteasolutions/zod-to-openapi";import ha from"zod";rR(ha);var Ra=ha.object({id:ha.uuid()}),Ro=class{constructor(e){this.courseRepository=e}async handle(e,r){try{let{id:t}=Ra.parse({id:e.params.id}),i=await this.courseRepository.findById(t);if(!i)throw new p("Curso n\xE3o encontrado.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as oR}from"@asteasolutions/zod-to-openapi";import tt from"zod";var iR=1,nR=6;oR(tt);var Ia=tt.object({page:tt.coerce.number().min(1).default(iR),limit:tt.coerce.number().min(1).default(nR),title:tt.string().optional(),description:tt.string().optional(),coordinator:tt.string().optional(),orderBy:tt.enum(["asc","desc"]).default("desc")}),Io=class{constructor(e){this.courseRepository=e}async handle(e,r){try{let{limit:t,page:i,...n}=Ia.parse(e.query),s=i*t-t,[a,c]=await Promise.all([this.courseRepository.find({pagination:{offset:s,limit:t},filter:n}),this.courseRepository.count({filter:n})]),d=Math.max(Math.ceil(c/t),1);return r.status(200).json({page:i,totalPages:d,offset:s,limit:t,courses:a})}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as sR}from"@asteasolutions/zod-to-openapi";import de from"zod";var rd=5,td=1024,aR=td*td,mR=rd*aR;sR(de);var ba=de.object({id:de.uuid(),title:de.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio.").optional(),coordinatorId:de.string().uuid("Coordenador \xE9 obrigat\xF3rio.").optional(),email:de.string().email("E-mail deve ser v\xE1lido.").optional(),location:de.string().min(1,"Localiza\xE7\xE3o \xE9 obrigat\xF3ria.").optional(),scheduledAt:de.coerce.date().optional(),registrationLink:de.url("URL de inscri\xE7\xE3o deve ser v\xE1lida").optional(),description:de.string().optional(),instructorIds:de.transform(o=>typeof o=="string"?o.split(","):o).pipe(de.array(de.uuid())).optional(),image:de.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=mR,`A imagem deve ter no m\xE1ximo ${rd}MB.`).optional()}),bo=class{constructor(e,r){this.courseRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,image:i,title:n,coordinatorId:s,email:a,location:c,scheduledAt:d,registrationLink:h,description:j,instructorIds:q}=ba.parse({id:e.params.id,...e.body,image:e.file}),X=await this.courseRepository.findById(t);if(!X)throw new p("O curso n\xE3o existe.");let Q=X.imageUrl;if(i&&(Q=await this.firebaseStorageService.uploadFile({file:i,id:t,folder:M.COURSE})),!Q)throw new m("URL da imagem \xE9 obrigat\xF3rio");return await this.courseRepository.update({id:t,title:n,coordinatorId:s,email:a,location:c,scheduledAt:d,registrationLink:h,description:j,imageUrl:Q,instructorIds:q}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var od={method:"post",path:"/courses",tags:["Courses"],summary:"Create course",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:R.object({title:R.string().min(1).openapi({description:"T\xEDtulo do curso"}),coordinator:R.string().min(1).openapi({description:"Nome do coordenador"}),email:R.string().email().openapi({description:"E-mail de contato"}),location:R.string().min(1).openapi({description:"Localiza\xE7\xE3o do curso"}),scheduledAt:R.string().openapi({description:"Data e hora agendada (ISO 8601)",example:"2024-01-01T10:00:00Z"}),registrationLink:R.string().url().optional().openapi({description:"Link de inscri\xE7\xE3o"}),description:R.string().optional().openapi({description:"Descri\xE7\xE3o do curso"}),instructorIds:R.string().openapi({description:"IDs dos instrutores separados por v\xEDrgula",example:"uuid1,uuid2,uuid3"}),image:R.string().optional().openapi({description:"Imagem do curso (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{201:{description:"Course created successfully",summary:"Course Created"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:R.object({errors:R.record(R.string(),R.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:R.object({message:R.string()})}}}}},id={method:"get",path:"/courses",tags:["Courses"],summary:"List courses",security:[{bearerAuth:[]}],request:{query:Ia},responses:{200:{description:"Paginated list of courses with instructor information retrieved successfully",summary:"Courses Retrieved",content:{"application/json":{schema:R.object({page:R.number(),totalPages:R.number(),offset:R.number(),limit:R.number(),courses:R.array(R.object({id:R.string(),title:R.string(),imageUrl:R.string().nullable(),coordinator:R.string(),email:R.string(),scheduledAt:R.date(),location:R.string(),registrationLink:R.string().nullable(),description:R.string().nullable(),createdAt:R.date(),updatedAt:R.date(),instructors:R.array(R.object({id:R.uuid(),name:R.string(),emailAddress:R.email(),avatarUrl:R.string().nullable(),createdAt:R.date(),updatedAt:R.date()}))}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:R.object({errors:R.record(R.string(),R.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:R.object({message:R.string()})}}}}},nd={method:"get",path:"/courses/{id}",tags:["Courses"],summary:"Find course by ID",security:[{bearerAuth:[]}],request:{params:Ra},responses:{200:{description:"Course details retrieved successfully",summary:"Course Retrieved",content:{"application/json":{schema:R.object({id:R.string(),title:R.string(),imageUrl:R.string().nullable(),coordinator:R.string(),email:R.string(),scheduledAt:R.date(),location:R.string(),registrationLink:R.string().nullable(),description:R.string().nullable(),createdAt:R.date(),updatedAt:R.date(),instructors:R.array(R.object({id:R.uuid(),name:R.string(),emailAddress:R.email(),avatarUrl:R.string().nullable(),createdAt:R.date(),updatedAt:R.date()}))}).nullable()}}},400:{description:"Invalid course ID format",summary:"Validation Error",content:{"application/json":{schema:R.object({errors:R.record(R.string(),R.string())})}}},404:{description:"Course not found with the provided ID",summary:"Course Not Found",content:{"application/json":{schema:R.object({message:R.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:R.object({message:R.string()})}}}}},sd={method:"put",path:"/courses/{id}",tags:["Courses"],summary:"Update course",security:[{bearerAuth:[]}],request:{params:ba.pick({id:!0}),body:{content:{"multipart/form-data":{schema:R.object({title:R.string().min(1).optional().openapi({description:"T\xEDtulo do curso"}),coordinator:R.string().min(1).optional().openapi({description:"Nome do coordenador"}),email:R.string().email().optional().openapi({description:"E-mail de contato"}),location:R.string().min(1).optional().openapi({description:"Localiza\xE7\xE3o do curso"}),scheduledAt:R.string().optional().openapi({description:"Data e hora agendada (ISO 8601)",example:"2024-01-01T10:00:00Z"}),registrationLink:R.string().url().optional().openapi({description:"Link de inscri\xE7\xE3o"}),description:R.string().optional().openapi({description:"Descri\xE7\xE3o do curso"}),instructorIds:R.string().optional().openapi({description:"IDs dos instrutores separados por v\xEDrgula",example:"uuid1,uuid2,uuid3"}),image:R.string().optional().openapi({description:"Imagem do curso (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{200:{description:"Course updated successfully",summary:"Course Updated"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:R.object({errors:R.record(R.string(),R.string())})}}},404:{description:"Course not found with the provided ID",summary:"Course Not Found",content:{"application/json":{schema:R.object({message:R.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:R.object({message:R.string()})}}}}},ad={method:"delete",path:"/courses/{id}",tags:["Courses"],summary:"Delete course",security:[{bearerAuth:[]}],request:{params:ya},responses:{200:{description:"Course deleted successfully",summary:"Course Deleted"},400:{description:"Invalid course ID format",summary:"Validation Error",content:{"application/json":{schema:R.object({errors:R.record(R.string(),R.string())})}}},404:{description:"Course not found with the provided ID",summary:"Course Not Found",content:{"application/json":{schema:R.object({message:R.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:R.object({message:R.string()})}}}}};import{$Enums as ja}from"@prisma/client";import C from"zod";import{extendZodWithOpenApi as cR}from"@asteasolutions/zod-to-openapi";import Ee from"zod";cR(Ee);var Ca=Ee.object({code:Ee.string(),title:Ee.string(),description:Ee.string().optional(),notes:Ee.string().optional(),leaderId:Ee.uuid(),deputyLeaderId:Ee.uuid(),secretaryId:Ee.uuid(),memberIds:Ee.array(Ee.uuid())}),Co=class{constructor(e){this.etpRepository=e}async handle(e,r){try{let{code:t,title:i,description:n,notes:s,leaderId:a,deputyLeaderId:c,secretaryId:d,memberIds:h}=Ca.parse(e.body);if(await this.etpRepository.findByCode(t))throw new ie("J\xE1 existe um ETP cadastrado com este c\xF3digo.");return await this.etpRepository.create({code:t,title:i,description:n,notes:s,leaderId:a,deputyLeaderId:c,secretaryId:d,memberIds:h}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as pR}from"@asteasolutions/zod-to-openapi";import Sa from"zod";pR(Sa);var wa=Sa.object({id:Sa.uuid()}),So=class{constructor(e){this.etpRepository=e}async handle(e,r){try{let{id:t}=wa.parse({id:e.params.id});if(!await this.etpRepository.findById(t))throw new p("O ETP n\xE3o existe.");return await this.etpRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as dR}from"@asteasolutions/zod-to-openapi";import va from"zod";dR(va);var vo=va.object({id:va.uuid()}),wo=class{constructor(e){this.etpRepository=e}async handle(e,r){try{let{id:t}=vo.parse({id:e.params.id}),i=await this.etpRepository.findById(t);if(!i)throw new p("O ETP n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as lR}from"@asteasolutions/zod-to-openapi";import be from"zod";lR(be);var Ea=be.object({id:be.uuid(),code:be.string().optional(),title:be.string().optional(),description:be.string().optional(),notes:be.string().optional(),leaderId:be.uuid().optional(),deputyLeaderId:be.uuid().optional(),secretaryId:be.uuid().optional(),memberIds:be.array(be.uuid()).optional()}),Eo=class{constructor(e){this.etpRepository=e}async handle(e,r){try{let{id:t,code:i,title:n,description:s,notes:a,leaderId:c,deputyLeaderId:d,secretaryId:h,memberIds:j}=Ea.parse({id:e.params.id,...e.body});if(!await this.etpRepository.findById(t))throw new p("O ETP n\xE3o existe.");if(i){let X=await this.etpRepository.findByCode(i);if(X&&X.id!==t)throw new ie("J\xE1 existe um ETP com este c\xF3digo.")}return await this.etpRepository.update({id:t,code:i,title:n,description:s,notes:a,leaderId:c,deputyLeaderId:d,secretaryId:h,memberIds:j}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var uR=1,gR=9,jo=C.object({id:C.uuid(),registrationNumber:C.string(),mainEtps:C.string().nullable(),formations:C.string().nullable(),degrees:C.array(C.enum(ja.Degree)),occupations:C.string(),seniority:C.enum(ja.Seniority),institutions:C.string(),biography:C.string().nullable(),createdAt:C.date(),updatedAt:C.date(),user:C.object({id:C.uuid(),name:C.string(),emailAddress:C.string(),avatarUrl:C.string().nullable(),orcid:C.string().nullable(),phone:C.string().nullable(),lattesUrl:C.string().nullable(),role:C.enum(ja.UserRole)})}),md=C.object({id:C.uuid(),code:C.string(),title:C.string(),description:C.string().nullable(),notes:C.string().nullable(),createdAt:C.date(),updatedAt:C.date(),leader:C.object({id:C.uuid(),researcher:jo}).nullable(),deputyLeader:C.object({id:C.uuid(),researcher:jo}).nullable(),secretary:C.object({id:C.uuid(),researcher:jo}).nullable(),members:C.array(jo)}),cd={method:"post",path:"/etp",tags:["ETPs"],summary:"Create a new ETP with single leader, deputy leader, secretary and multiple members",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:Ca}}}},responses:{201:{description:"ETP created successfully",summary:"ETP Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:C.object({errors:C.record(C.string(),C.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:C.object({message:C.string()})}}},409:{description:"ETP with this code already exists",summary:"Conflict",content:{"application/json":{schema:C.object({message:C.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:C.object({message:C.string()})}}}}},pd={method:"get",path:"/etp",tags:["ETPs"],summary:"List all ETPs with pagination and filters",request:{query:C.object({page:C.coerce.number().min(1).default(uR).optional(),limit:C.coerce.number().min(1).default(gR).optional(),code:C.string().optional(),title:C.string().optional(),description:C.string().optional(),notes:C.string().optional(),orderBy:C.enum(["asc","desc"]).optional()})},responses:{200:{description:"List of ETPs retrieved successfully with pagination",summary:"ETPs Retrieved",content:{"application/json":{schema:C.object({page:C.number(),totalPages:C.number(),offset:C.number(),limit:C.number(),etps:C.array(md)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:C.object({message:C.string()})}}}}},dd={method:"get",path:"/etp/{id}",tags:["ETPs"],summary:"Find ETP by ID",request:{params:vo},responses:{200:{description:"ETP details retrieved successfully",summary:"ETP Retrieved",content:{"application/json":{schema:md}}},400:{description:"Invalid ETP ID format",summary:"Validation Error",content:{"application/json":{schema:C.object({errors:C.record(C.string(),C.string())})}}},404:{description:"ETP not found with the provided ID",summary:"ETP Not Found",content:{"application/json":{schema:C.object({message:C.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:C.object({message:C.string()})}}}}},ld={method:"put",path:"/etp/{id}",tags:["ETPs"],summary:"Update ETP and manage user relationships (single leader, deputy leader, secretary, multiple members)",security:[{bearerAuth:[]}],request:{params:vo,body:{content:{"application/json":{schema:Ea.omit({id:!0})}}}},responses:{200:{description:"ETP updated successfully",summary:"ETP Updated"},400:{description:"Invalid input data or ETP ID format",summary:"Validation Error",content:{"application/json":{schema:C.object({errors:C.record(C.string(),C.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:C.object({message:C.string()})}}},404:{description:"ETP not found with the provided ID",summary:"ETP Not Found",content:{"application/json":{schema:C.object({message:C.string()})}}},409:{description:"ETP with this code already exists",summary:"Conflict",content:{"application/json":{schema:C.object({message:C.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:C.object({message:C.string()})}}}}},ud={method:"delete",path:"/etp/{id}",tags:["ETPs"],summary:"Delete ETP",security:[{bearerAuth:[]}],request:{params:wa},responses:{200:{description:"ETP deleted successfully",summary:"ETP Deleted"},400:{description:"Invalid ETP ID format",summary:"Validation Error",content:{"application/json":{schema:C.object({errors:C.record(C.string(),C.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:C.object({message:C.string()})}}},404:{description:"ETP not found with the provided ID",summary:"ETP Not Found",content:{"application/json":{schema:C.object({message:C.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:C.object({message:C.string()})}}}}};import{EventFormat as DR,EventStatus as FR}from"@prisma/client";import k from"zod";import{extendZodWithOpenApi as fR}from"@asteasolutions/zod-to-openapi";import{EventFormat as xo,EventStatus as xa}from"@prisma/client";import Ce from"zod";var yR=5,gd=1024,hR=gd*gd,RR=yR*hR;fR(Ce);var Ma=Ce.object({title:Ce.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio"),description:Ce.string().optional(),startDate:Ce.coerce.date(),endDate:Ce.coerce.date(),location:Ce.string().optional(),format:Ce.enum(xo).default(xo.ONLINE),eventLink:Ce.string().url("Link do evento deve ser uma URL v\xE1lida").optional().or(Ce.literal("")),status:Ce.enum(xa).default(xa.PENDING),image:Ce.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=RR,"A imagem deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.")}).refine(o=>o.format===xo.ONLINE?!!o.eventLink:o.format===xo.IN_PERSON?!!o.location:!0,{message:"Eventos online devem ter link e eventos presenciais devem ter localiza\xE7\xE3o",path:["format"]}),Mo=class{constructor(e,r){this.eventRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{title:t,description:i,startDate:n,endDate:s,location:a,format:c,eventLink:d,status:h,image:j}=Ma.parse({...e.body,image:e.file}),q=await this.eventRepository.create({title:t,description:i,startDate:n,endDate:s,location:a||void 0,format:c,eventLink:d||void 0,status:h??xa.PENDING}),X=await this.firebaseStorageService.uploadFile({file:j,folder:M.EVENT,id:q.id});return await this.eventRepository.update({id:q.id,imageUrl:X}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as IR}from"@asteasolutions/zod-to-openapi";import Pa from"zod";IR(Pa);var Aa=Pa.object({id:Pa.uuid()}),Po=class{constructor(e){this.eventRepository=e}async handle(e,r){try{let{id:t}=Aa.parse({id:e.params.id});if(!await this.eventRepository.findById(t))throw new p("O evento n\xE3o existe.");return await this.eventRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as bR}from"@asteasolutions/zod-to-openapi";import Ta from"zod";bR(Ta);var To=Ta.object({id:Ta.uuid()}),Ao=class{constructor(e){this.eventRepository=e}async handle(e,r){try{let{id:t}=To.parse({id:e.params.id}),i=await this.eventRepository.findById(t);if(!i)throw new p("O evento n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as CR}from"@asteasolutions/zod-to-openapi";import{EventFormat as SR,EventStatus as wR}from"@prisma/client";import rt from"zod";var vR=1,ER=10;CR(rt);var Da=rt.object({page:rt.coerce.number().min(1).default(vR),limit:rt.coerce.number().min(1).default(ER),title:rt.string().optional(),status:rt.nativeEnum(wR).optional(),format:rt.nativeEnum(SR).optional(),orderBy:rt.enum(["asc","desc"]).optional()}),Do=class{constructor(e){this.eventRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=Da.parse(e.query),s=i*t-i,[a,c]=await Promise.all([this.eventRepository.find({pagination:{offset:s,limit:i},filter:n}),this.eventRepository.count({filter:n})]),d=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:d,offset:s,limit:i,events:a})}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as jR}from"@asteasolutions/zod-to-openapi";import{EventFormat as xR,EventStatus as MR}from"@prisma/client";import ge from"zod";var PR=5,fd=1024,AR=fd*fd,TR=PR*AR;jR(ge);var Fa=ge.object({id:ge.uuid(),title:ge.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio").optional(),description:ge.string().optional(),startDate:ge.coerce.date().optional(),endDate:ge.coerce.date().optional(),location:ge.string().optional(),format:ge.nativeEnum(xR).optional(),eventLink:ge.string().url("Link do evento deve ser uma URL v\xE1lida").optional().or(ge.literal("")),status:ge.nativeEnum(MR).optional(),image:ge.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=TR,"A imagem deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.").optional()}),Fo=class{constructor(e,r){this.eventRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,title:i,description:n,startDate:s,endDate:a,location:c,format:d,eventLink:h,status:j,image:q}=Fa.parse({id:e.params.id,...e.body,image:e.file});if(!await this.eventRepository.findById(t))throw new p("O evento n\xE3o existe.");let Q;return q&&(Q=await this.firebaseStorageService.uploadFile({file:q,folder:M.EVENT,id:t})),await this.eventRepository.update({id:t,title:i,description:n,startDate:s,endDate:a,location:c||void 0,format:d,eventLink:h||void 0,status:j,imageUrl:Q}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var yd=k.object({id:k.uuid(),title:k.string(),description:k.string().nullable(),imageUrl:k.string().nullable(),startDate:k.date(),endDate:k.date(),location:k.string().nullable(),status:k.nativeEnum(FR),format:k.nativeEnum(DR),eventLink:k.string().nullable(),createdAt:k.date(),updatedAt:k.date()}),hd={method:"post",path:"/event",tags:["Events"],summary:"Create a new event",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:Ma}}}},responses:{201:{description:"Event created successfully",summary:"Event Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:k.object({errors:k.record(k.string(),k.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:k.object({message:k.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:k.object({message:k.string()})}}}}},Rd={method:"get",path:"/event",tags:["Events"],summary:"List all events with pagination and filters",request:{query:Da},responses:{200:{description:"List of events retrieved successfully with pagination",summary:"Events Retrieved",content:{"application/json":{schema:k.object({page:k.number(),totalPages:k.number(),offset:k.number(),limit:k.number(),events:k.array(yd)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:k.object({errors:k.record(k.string(),k.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:k.object({message:k.string()})}}}}},Id={method:"get",path:"/event/{id}",tags:["Events"],summary:"Find event by ID",request:{params:To},responses:{200:{description:"Event details retrieved successfully",summary:"Event Retrieved",content:{"application/json":{schema:yd}}},400:{description:"Invalid event ID format",summary:"Validation Error",content:{"application/json":{schema:k.object({errors:k.record(k.string(),k.string())})}}},404:{description:"Event not found with the provided ID",summary:"Event Not Found",content:{"application/json":{schema:k.object({message:k.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:k.object({message:k.string()})}}}}},bd={method:"put",path:"/event/{id}",tags:["Events"],summary:"Update event",security:[{bearerAuth:[]}],request:{params:To,body:{content:{"multipart/form-data":{schema:Fa.omit({id:!0})}}}},responses:{200:{description:"Event updated successfully",summary:"Event Updated"},400:{description:"Invalid input data or event ID format",summary:"Validation Error",content:{"application/json":{schema:k.object({errors:k.record(k.string(),k.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:k.object({message:k.string()})}}},404:{description:"Event not found with the provided ID",summary:"Event Not Found",content:{"application/json":{schema:k.object({message:k.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:k.object({message:k.string()})}}}}},Cd={method:"delete",path:"/event/{id}",tags:["Events"],summary:"Delete event",security:[{bearerAuth:[]}],request:{params:Aa},responses:{200:{description:"Event deleted successfully",summary:"Event Deleted"},400:{description:"Invalid event ID format",summary:"Validation Error",content:{"application/json":{schema:k.object({errors:k.record(k.string(),k.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:k.object({message:k.string()})}}},404:{description:"Event not found with the provided ID",summary:"Event Not Found",content:{"application/json":{schema:k.object({message:k.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:k.object({message:k.string()})}}}}};import{InMemoriamRole as YR}from"@prisma/client";import T from"zod";import{extendZodWithOpenApi as BR}from"@asteasolutions/zod-to-openapi";import{InMemoriamRole as UR}from"@prisma/client";import ot from"zod";var wd=2,Sd=1024,qR=Sd*Sd,kR=wd*qR;BR(ot);var Ba=ot.object({name:ot.string().min(1,"Nome \xE9 obrigat\xF3rio"),birthDate:ot.coerce.date(),deathDate:ot.coerce.date(),biography:ot.string().optional(),photo:ot.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=kR,`A imagem deve ter no m\xE1ximo ${wd}MB.`).optional(),role:ot.enum(UR)}).refine(o=>o.deathDate>o.birthDate,{message:"Data de falecimento deve ser posterior \xE0 data de nascimento",path:["deathDate"]}),Bo=class{constructor(e,r){this.inMemoriamRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{name:t,birthDate:i,deathDate:n,biography:s,role:a,photo:c}=Ba.parse({...e.body,photo:e.file}),d=await this.inMemoriamRepository.create({name:t,birthDate:i,deathDate:n,biography:s??void 0,role:a}),h;return c&&(h=await this.firebaseStorageService.uploadFile({file:c,id:d.id,folder:M.IN_MEMORIAM}),await this.inMemoriamRepository.update({id:d.id,photoUrl:h})),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as OR}from"@asteasolutions/zod-to-openapi";import Ua from"zod";OR(Ua);var qa=Ua.object({id:Ua.uuid()}),Uo=class{constructor(e,r){this.inMemoriamRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=qa.parse({id:e.params.id}),i=await this.inMemoriamRepository.findById(t);if(!i)throw new p("O in memoriam n\xE3o existe.");return i.photoUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.photoUrl}),await this.inMemoriamRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as NR}from"@asteasolutions/zod-to-openapi";import ka from"zod";NR(ka);var ko=ka.object({id:ka.uuid()}),qo=class{constructor(e){this.inMemoriamRepository=e}async handle(e,r){try{let{id:t}=ko.parse({id:e.params.id}),i=await this.inMemoriamRepository.findById(t);if(!i)throw new p("O in memoriam n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as GR}from"@asteasolutions/zod-to-openapi";import{InMemoriamRole as LR}from"@prisma/client";import Oa from"zod";GR(Oa);var Na=Oa.object({role:Oa.enum(LR)}),Oo=class{constructor(e){this.inMemoriamRepository=e}async handle(e,r){try{let{role:t}=Na.parse({role:e.params.role}),i=await this.inMemoriamRepository.findByRole(t);return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as WR}from"@asteasolutions/zod-to-openapi";import{InMemoriamRole as _R}from"@prisma/client";import it from"zod";var zR=1,HR=9;WR(it);var Ga=it.object({page:it.coerce.number().min(1).default(zR),limit:it.coerce.number().min(1).default(HR),name:it.string().optional(),biography:it.string().optional(),role:it.enum(_R).optional(),orderBy:it.enum(["asc","desc"]).default("desc")}),No=class{constructor(e){this.inMemoriamRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=Ga.parse(e.query),s=i*t-i,[a,c]=await Promise.all([this.inMemoriamRepository.find({pagination:{offset:s,limit:i},filter:n}),this.inMemoriamRepository.count({filter:n})]),d=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:d,offset:s,limit:i,inMemoriam:a})}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as VR}from"@asteasolutions/zod-to-openapi";import{InMemoriamRole as ZR}from"@prisma/client";import Ge from"zod";var Ed=2,vd=1024,KR=vd*vd,JR=Ed*KR;VR(Ge);var La=Ge.object({id:Ge.uuid(),name:Ge.string().min(1,"Nome \xE9 obrigat\xF3rio").optional(),birthDate:Ge.coerce.date().optional(),deathDate:Ge.coerce.date().optional(),biography:Ge.string().optional(),photo:Ge.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=JR,`A imagem deve ter no m\xE1ximo ${Ed}MB.`).optional(),role:Ge.enum(ZR).optional()}).refine(o=>o.birthDate&&o.deathDate?o.deathDate>o.birthDate:!0,{message:"Data de falecimento deve ser posterior \xE0 data de nascimento",path:["deathDate"]}),Go=class{constructor(e,r){this.inMemoriamRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,name:i,birthDate:n,deathDate:s,biography:a,photo:c,role:d}=La.parse({id:e.params.id,...e.body,photo:e.file}),h=await this.inMemoriamRepository.findById(t);if(!h)throw new p("O registro in memoriam n\xE3o existe.");let j=h.photoUrl;return c&&(j=await this.firebaseStorageService.uploadFile({file:c,id:t,folder:M.IN_MEMORIAM})),await this.inMemoriamRepository.update({id:t,name:i,birthDate:n,deathDate:s,biography:a,photoUrl:j??void 0,role:d}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var Wa=T.object({id:T.uuid(),name:T.string(),birthDate:T.date(),deathDate:T.date(),biography:T.string().nullable(),photoUrl:T.string().nullable(),role:T.enum(YR),createdAt:T.date(),updatedAt:T.date()}),jd={method:"post",path:"/in-memoriam",tags:["In Memoriam"],summary:"Create a new in memoriam record with optional photo upload",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:Ba}}}},responses:{201:{description:"In memoriam record created successfully",summary:"In Memoriam Created"},400:{description:"Invalid input data, missing required fields, or invalid photo format/size",summary:"Validation Error",content:{"application/json":{schema:T.object({errors:T.record(T.string(),T.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:T.object({message:T.string()})}}},409:{description:"In memoriam record with this name already exists",summary:"Conflict",content:{"application/json":{schema:T.object({message:T.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:T.object({message:T.string()})}}}}},xd={method:"get",path:"/in-memoriam",tags:["In Memoriam"],summary:"List all in memoriam records with pagination and filters",request:{query:Ga},responses:{200:{description:"List of in memoriam records retrieved successfully with pagination",summary:"In Memoriam Records Retrieved",content:{"application/json":{schema:T.object({page:T.number(),totalPages:T.number(),offset:T.number(),limit:T.number(),inMemoriam:T.array(Wa)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:T.object({errors:T.record(T.string(),T.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:T.object({message:T.string()})}}}}},Md={method:"get",path:"/in-memoriam/{id}",tags:["In Memoriam"],summary:"Find in memoriam record by ID",request:{params:ko},responses:{200:{description:"In memoriam record details retrieved successfully",summary:"In Memoriam Record Retrieved",content:{"application/json":{schema:Wa}}},400:{description:"Invalid in memoriam record ID format",summary:"Validation Error",content:{"application/json":{schema:T.object({errors:T.record(T.string(),T.string())})}}},404:{description:"In memoriam record not found with the provided ID",summary:"In Memoriam Record Not Found",content:{"application/json":{schema:T.object({message:T.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:T.object({message:T.string()})}}}}},Pd={method:"put",path:"/in-memoriam/{id}",tags:["In Memoriam"],summary:"Update in memoriam record with optional photo upload",security:[{bearerAuth:[]}],request:{params:ko,body:{content:{"multipart/form-data":{schema:La.omit({id:!0})}}}},responses:{200:{description:"In memoriam record updated successfully",summary:"In Memoriam Record Updated"},400:{description:"Invalid input data, in memoriam record ID format, or invalid photo format/size",summary:"Validation Error",content:{"application/json":{schema:T.object({errors:T.record(T.string(),T.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:T.object({message:T.string()})}}},404:{description:"In memoriam record not found with the provided ID",summary:"In Memoriam Record Not Found",content:{"application/json":{schema:T.object({message:T.string()})}}},409:{description:"In memoriam record with this name already exists",summary:"Conflict",content:{"application/json":{schema:T.object({message:T.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:T.object({message:T.string()})}}}}},Ad={method:"delete",path:"/in-memoriam/{id}",tags:["In Memoriam"],summary:"Delete in memoriam record",security:[{bearerAuth:[]}],request:{params:qa},responses:{200:{description:"In memoriam record deleted successfully",summary:"In Memoriam Record Deleted"},400:{description:"Invalid in memoriam record ID format",summary:"Validation Error",content:{"application/json":{schema:T.object({errors:T.record(T.string(),T.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:T.object({message:T.string()})}}},404:{description:"In memoriam record not found with the provided ID",summary:"In Memoriam Record Not Found",content:{"application/json":{schema:T.object({message:T.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:T.object({message:T.string()})}}}}},K0={method:"get",path:"/in-memoriam/role/{role}",tags:["In Memoriam"],summary:"Find in memoriam records by role",request:{params:Na},responses:{200:{description:"In memoriam records retrieved successfully by role",summary:"In Memoriam Records Retrieved by Role",content:{"application/json":{schema:T.array(Wa)}}},400:{description:"Invalid role parameter provided",summary:"Validation Error",content:{"application/json":{schema:T.object({errors:T.record(T.string(),T.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:T.object({message:T.string()})}}}}};import Z from"zod";import{extendZodWithOpenApi as XR}from"@asteasolutions/zod-to-openapi";import xr from"zod";var Dd=2,Td=1024,$R=Td*Td,QR=Dd*$R;XR(xr);var _a=xr.object({image:xr.any().refine(o=>o==null||typeof o!="object"||typeof o.size!="number"?!1:o.size<=QR,`A imagem deve ter no m\xE1ximo ${Dd}MB.`),caption:xr.string().optional(),congressId:xr.uuid()}),Lo=class{constructor(e,r,t){this.internationalScientificCongressGalleryRepository=e;this.internationalScientificCongressRepository=r;this.firebaseStorageService=t}async handle(e,r){try{let{image:t,caption:i,congressId:n}=_a.parse({...e.body,...e.params,image:e.file});if(!await this.internationalScientificCongressRepository.findById(n))throw new p("O congresso n\xE3o existe.");let a=await this.internationalScientificCongressGalleryRepository.create({imageUrl:"",caption:i||void 0,congressId:n}),c=await this.firebaseStorageService.uploadFile({file:t,id:a.id,folder:M.INTERNATIONAL_SCIENTIFIC_CONGRESS_GALLERY});return await this.internationalScientificCongressGalleryRepository.update({id:a.id,imageUrl:c}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as eI}from"@asteasolutions/zod-to-openapi";import za from"zod";eI(za);var _o=za.object({id:za.uuid()}),Wo=class{constructor(e){this.internationalScientificCongressGalleryRepository=e}async handle(e,r){try{let{id:t}=_o.parse({id:e.params.id});if(!await this.internationalScientificCongressGalleryRepository.findById(t))throw new p("A imagem da galeria n\xE3o existe.");return await this.internationalScientificCongressGalleryRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as tI}from"@asteasolutions/zod-to-openapi";import Yt from"zod";var rI=1,oI=9;tI(Yt);var Ha=Yt.object({congressId:Yt.uuid(),page:Yt.coerce.number().min(1).default(rI),limit:Yt.coerce.number().min(1).default(oI),caption:Yt.string().optional()}),zo=class{constructor(e){this.internationalScientificCongressGalleryRepository=e}async handle(e,r){try{let{congressId:t,page:i,limit:n,...s}=Ha.parse({congressId:e.params.congressId,...e.query}),a=n*i-n,[c,d]=await Promise.all([this.internationalScientificCongressGalleryRepository.findByCongressId({pagination:{offset:a,limit:n},filter:{congressId:t,...s}}),this.internationalScientificCongressGalleryRepository.count({filter:{congressId:t,caption:s.caption}})]),h=Math.max(Math.ceil(d/n),1);return r.status(200).json({page:i,totalPages:h,offset:a,limit:n,galleryImages:c})}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as iI}from"@asteasolutions/zod-to-openapi";import Mr from"zod";var Bd=2,Fd=1024,nI=Fd*Fd,sI=Bd*nI;iI(Mr);var Va=Mr.object({id:Mr.uuid(),image:Mr.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=sI,`A imagem deve ter no m\xE1ximo ${Bd}MB.`).optional(),caption:Mr.string().optional()}),Ho=class{constructor(e,r){this.internationalScientificCongressGalleryRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,image:i,caption:n}=Va.parse({id:e.params.id,...e.body,image:e.file}),s=await this.internationalScientificCongressGalleryRepository.findById(t);if(!s)throw new p("A imagem da galeria n\xE3o existe.");let a=s.imageUrl;return i&&(a=await this.firebaseStorageService.uploadFile({file:i,id:t,folder:M.INTERNATIONAL_SCIENTIFIC_CONGRESS_GALLERY})),await this.internationalScientificCongressGalleryRepository.update({id:t,imageUrl:a??void 0,caption:n||void 0}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var aI=Z.object({id:Z.uuid(),imageUrl:Z.string(),caption:Z.string().nullable(),congressId:Z.uuid()}),Ud={method:"post",path:"/international-scientific-congress/{congressId}/gallery",tags:["International Scientific Congresses"],summary:"Create a new congress gallery image",security:[{bearerAuth:[]}],request:{params:Z.object({congressId:Z.uuid()}),body:{content:{"application/json":{schema:_a.omit({congressId:!0})}}}},responses:{201:{description:"Congress gallery image created successfully",summary:"Congress Gallery Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:Z.object({errors:Z.record(Z.string(),Z.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:Z.object({message:Z.string()})}}},404:{description:"Congress not found with the provided ID",summary:"Congress Not Found",content:{"application/json":{schema:Z.object({message:Z.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Z.object({message:Z.string()})}}}}},qd={method:"get",path:"/international-scientific-congress/{congressId}/gallery",tags:["International Scientific Congresses"],summary:"Find congress gallery images by congress ID",request:{params:Ha},responses:{200:{description:"Congress gallery images retrieved successfully by congress ID",summary:"Congress Galleries Retrieved",content:{"application/json":{schema:Z.array(aI)}}},400:{description:"Invalid congress ID parameter provided",summary:"Validation Error",content:{"application/json":{schema:Z.object({errors:Z.record(Z.string(),Z.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Z.object({message:Z.string()})}}}}},kd={method:"put",path:"/international-scientific-congress/gallery/{id}",tags:["International Scientific Congresses"],summary:"Update congress gallery image",security:[{bearerAuth:[]}],request:{params:_o,body:{content:{"application/json":{schema:Va.omit({id:!0})}}}},responses:{200:{description:"Congress gallery image updated successfully",summary:"Congress Gallery Updated"},400:{description:"Invalid input data or gallery ID format",summary:"Validation Error",content:{"application/json":{schema:Z.object({errors:Z.record(Z.string(),Z.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:Z.object({message:Z.string()})}}},404:{description:"Congress gallery image not found with the provided ID",summary:"Congress Gallery Not Found",content:{"application/json":{schema:Z.object({message:Z.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Z.object({message:Z.string()})}}}}},Od={method:"delete",path:"/international-scientific-congress/gallery/{id}",tags:["International Scientific Congresses"],summary:"Delete congress gallery image",security:[{bearerAuth:[]}],request:{params:_o},responses:{200:{description:"Congress gallery image deleted successfully",summary:"Congress Gallery Deleted"},400:{description:"Invalid gallery ID format",summary:"Validation Error",content:{"application/json":{schema:Z.object({errors:Z.record(Z.string(),Z.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:Z.object({message:Z.string()})}}},404:{description:"Congress gallery image not found with the provided ID",summary:"Congress Gallery Not Found",content:{"application/json":{schema:Z.object({message:Z.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Z.object({message:Z.string()})}}}}};import K from"zod";import{extendZodWithOpenApi as mI}from"@asteasolutions/zod-to-openapi";import Pr from"zod";var Gd=2,Nd=1024,cI=Nd*Nd,pI=Gd*cI;mI(Pr);var Za=Pr.object({name:Pr.string().min(1,"Nome \xE9 obrigat\xF3rio"),logo:Pr.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=pI,`A imagem deve ter no m\xE1ximo ${Gd}MB.`).optional(),congressId:Pr.uuid()}),Vo=class{constructor(e,r,t){this.internationalScientificCongressPartnerRepository=e;this.internationalScientificCongressRepository=r;this.firebaseStorageService=t}async handle(e,r){try{let{name:t,logo:i,congressId:n}=Za.parse({...e.body,...e.params,logo:e.file});if(!await this.internationalScientificCongressRepository.findById(n))throw new p("O congresso n\xE3o existe.");let a=await this.internationalScientificCongressPartnerRepository.create({name:t,congressId:n}),c;return i&&(c=await this.firebaseStorageService.uploadFile({file:i,id:a.id,folder:M.PARTNER}),await this.internationalScientificCongressPartnerRepository.update({id:a.id,logoUrl:c})),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as dI}from"@asteasolutions/zod-to-openapi";import Ka from"zod";dI(Ka);var Ko=Ka.object({id:Ka.uuid()}),Zo=class{constructor(e){this.internationalScientificCongressPartnerRepository=e}async handle(e,r){try{let{id:t}=Ko.parse({id:e.params.id});if(!await this.internationalScientificCongressPartnerRepository.findById(t))throw new p("O parceiro n\xE3o existe.");return await this.internationalScientificCongressPartnerRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as lI}from"@asteasolutions/zod-to-openapi";import Xt from"zod";var uI=1,gI=9;lI(Xt);var Ja=Xt.object({congressId:Xt.uuid(),page:Xt.coerce.number().min(1).optional(),limit:Xt.coerce.number().min(1).optional(),name:Xt.string().optional()}),Jo=class{constructor(e){this.internationalScientificCongressPartnerRepository=e}async handle(e,r){try{let{congressId:t,page:i,limit:n,...s}=Ja.parse({congressId:e.params.congressId,...e.query});if(i!==void 0&&n!==void 0){let c=i||uI,d=n||gI,h=d*c-d,[j,q]=await Promise.all([this.internationalScientificCongressPartnerRepository.findByCongressId({pagination:{offset:h,limit:d},filter:{congressId:t,...s}}),this.internationalScientificCongressPartnerRepository.count({filter:{congressId:t,name:s.name}})]),X=Math.max(Math.ceil(q/d),1);return r.status(200).json({page:c,totalPages:X,offset:h,limit:d,partners:j})}let a=await this.internationalScientificCongressPartnerRepository.findByCongressId({filter:{congressId:t,...s}});return r.status(200).json(a)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as fI}from"@asteasolutions/zod-to-openapi";import Ar from"zod";var Wd=2,Ld=1024,yI=Ld*Ld,hI=Wd*yI;fI(Ar);var Ya=Ar.object({id:Ar.uuid(),name:Ar.string().min(1,"Nome \xE9 obrigat\xF3rio").optional(),logo:Ar.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=hI,`A imagem deve ter no m\xE1ximo ${Wd}MB.`).optional()}),Yo=class{constructor(e,r){this.internationalScientificCongressPartnerRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,name:i,logo:n}=Ya.parse({id:e.params.id,...e.body,logo:e.file}),s=await this.internationalScientificCongressPartnerRepository.findById(t);if(!s)throw new p("O parceiro n\xE3o existe.");let a=s.logoUrl;return n&&(a=await this.firebaseStorageService.uploadFile({file:n,id:t,folder:M.PARTNER})),await this.internationalScientificCongressPartnerRepository.update({id:t,name:i,logoUrl:a??void 0}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var RI=K.object({id:K.uuid(),name:K.string(),logoUrl:K.string().nullable(),congressId:K.uuid()}),_d={method:"post",path:"/international-scientific-congress/{congressId}/partner",tags:["International Scientific Congresses"],summary:"Create a new congress partner",security:[{bearerAuth:[]}],request:{params:K.object({congressId:K.uuid()}),body:{content:{"application/json":{schema:Za.omit({congressId:!0})}}}},responses:{201:{description:"Congress partner created successfully",summary:"Congress Partner Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:K.object({errors:K.record(K.string(),K.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:K.object({message:K.string()})}}},404:{description:"Congress not found with the provided ID",summary:"Congress Not Found",content:{"application/json":{schema:K.object({message:K.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:K.object({message:K.string()})}}}}},zd={method:"get",path:"/international-scientific-congress/{congressId}/partner",tags:["International Scientific Congresses"],summary:"Find congress partners by congress ID",request:{params:Ja},responses:{200:{description:"Congress partners retrieved successfully by congress ID",summary:"Congress Partners Retrieved",content:{"application/json":{schema:K.array(RI)}}},400:{description:"Invalid congress ID parameter provided",summary:"Validation Error",content:{"application/json":{schema:K.object({errors:K.record(K.string(),K.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:K.object({message:K.string()})}}}}},Hd={method:"put",path:"/international-scientific-congress/partner/{id}",tags:["International Scientific Congresses"],summary:"Update congress partner",security:[{bearerAuth:[]}],request:{params:Ko,body:{content:{"application/json":{schema:Ya.omit({id:!0})}}}},responses:{200:{description:"Congress partner updated successfully",summary:"Congress Partner Updated"},400:{description:"Invalid input data or partner ID format",summary:"Validation Error",content:{"application/json":{schema:K.object({errors:K.record(K.string(),K.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:K.object({message:K.string()})}}},404:{description:"Congress partner not found with the provided ID",summary:"Congress Partner Not Found",content:{"application/json":{schema:K.object({message:K.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:K.object({message:K.string()})}}}}},Vd={method:"delete",path:"/international-scientific-congress/partner/{id}",tags:["International Scientific Congresses"],summary:"Delete congress partner",security:[{bearerAuth:[]}],request:{params:Ko},responses:{200:{description:"Congress partner deleted successfully",summary:"Congress Partner Deleted"},400:{description:"Invalid partner ID format",summary:"Validation Error",content:{"application/json":{schema:K.object({errors:K.record(K.string(),K.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:K.object({message:K.string()})}}},404:{description:"Congress partner not found with the provided ID",summary:"Congress Partner Not Found",content:{"application/json":{schema:K.object({message:K.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:K.object({message:K.string()})}}}}};import u from"zod";import{extendZodWithOpenApi as II}from"@asteasolutions/zod-to-openapi";import oe from"zod";II(oe);var Xa=oe.object({title:oe.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio"),edition:oe.coerce.number().int().positive("Edi\xE7\xE3o deve ser um n\xFAmero positivo"),startDate:oe.coerce.date(),endDate:oe.coerce.date(),description:oe.string().optional(),location:oe.string().optional(),congressLink:oe.url("Link do congresso deve ser uma URL v\xE1lida").optional().or(oe.literal("")),noticeUrl:oe.url("URL do edital deve ser uma URL v\xE1lida").optional().or(oe.literal("")),scheduleUrl:oe.url("URL do cronograma deve ser uma URL v\xE1lida").optional().or(oe.literal("")),programUrl:oe.url("URL da programa\xE7\xE3o deve ser uma URL v\xE1lida").optional().or(oe.literal("")),adminReportUrl:oe.url("URL do relat\xF3rio administrativo deve ser uma URL v\xE1lida").optional().or(oe.literal("")),proceedingsUrl:oe.url("URL dos anais deve ser uma URL v\xE1lida").optional().or(oe.literal(""))}).refine(o=>o.endDate>=o.startDate,{message:"Data de t\xE9rmino deve ser posterior ou igual \xE0 data de in\xEDcio",path:["endDate"]}),Xo=class{constructor(e){this.internationalScientificCongressRepository=e}async handle(e,r){try{let t=Xa.parse(e.body);return await this.internationalScientificCongressRepository.create(t),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as bI}from"@asteasolutions/zod-to-openapi";import $a from"zod";bI($a);var Qa=$a.object({id:$a.uuid()}),$o=class{constructor(e){this.internationalScientificCongressRepository=e}async handle(e,r){try{let{id:t}=Qa.parse({id:e.params.id});if(!await this.internationalScientificCongressRepository.findById(t))throw new p("O congresso n\xE3o existe.");return await this.internationalScientificCongressRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as CI}from"@asteasolutions/zod-to-openapi";import em from"zod";CI(em);var tm=em.object({edition:em.coerce.number().int().positive()}),Qo=class{constructor(e){this.internationalScientificCongressRepository=e}async handle(e,r){try{let{edition:t}=tm.parse({edition:e.params.edition}),i=await this.internationalScientificCongressRepository.findByEdition(t);return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as SI}from"@asteasolutions/zod-to-openapi";import rm from"zod";SI(rm);var ti=rm.object({id:rm.uuid()}),ei=class{constructor(e){this.internationalScientificCongressRepository=e}async handle(e,r){try{let{id:t}=ti.parse({id:e.params.id}),i=await this.internationalScientificCongressRepository.findById(t);if(!i)throw new p("O congresso n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as wI}from"@asteasolutions/zod-to-openapi";import nt from"zod";var vI=1,EI=10;wI(nt);var om=nt.object({page:nt.coerce.number().min(1).default(vI),limit:nt.coerce.number().min(1).default(EI),title:nt.string().optional(),edition:nt.coerce.number().int().positive().optional(),location:nt.string().optional(),orderBy:nt.enum(["asc","desc"]).optional()}),ri=class{constructor(e){this.internationalScientificCongressRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=om.parse(e.query),s=i*t-i,[a,c]=await Promise.all([this.internationalScientificCongressRepository.find({pagination:{offset:s,limit:i},filter:n}),this.internationalScientificCongressRepository.count({filter:n})]),d=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:d,offset:s,limit:i,congresses:a})}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as jI}from"@asteasolutions/zod-to-openapi";import re from"zod";jI(re);var im=re.object({id:re.uuid(),title:re.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio").optional(),edition:re.coerce.number().int().positive("Edi\xE7\xE3o deve ser um n\xFAmero positivo").optional(),startDate:re.coerce.date().optional(),endDate:re.coerce.date().optional(),description:re.string().optional(),location:re.string().optional(),congressLink:re.url("Link do congresso deve ser uma URL v\xE1lida").optional().or(re.literal("")),noticeUrl:re.url("URL do edital deve ser uma URL v\xE1lida").optional().or(re.literal("")),scheduleUrl:re.url("URL do cronograma deve ser uma URL v\xE1lida").optional().or(re.literal("")),programUrl:re.url("URL da programa\xE7\xE3o deve ser uma URL v\xE1lida").optional().or(re.literal("")),adminReportUrl:re.url("URL do relat\xF3rio administrativo deve ser uma URL v\xE1lida").optional().or(re.literal("")),proceedingsUrl:re.url("URL dos anais deve ser uma URL v\xE1lida").optional().or(re.literal(""))}),oi=class{constructor(e){this.internationalScientificCongressRepository=e}async handle(e,r){try{let{id:t,...i}=im.parse({id:e.params.id,...e.body});if(!await this.internationalScientificCongressRepository.findById(t))throw new p("O congresso n\xE3o existe.");return await this.internationalScientificCongressRepository.update({...i,id:t}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var xI=9,MI=u.object({image:u.any().openapi({type:"string",format:"binary"}),caption:u.string().optional()}),PI=u.object({image:u.any().openapi({type:"string",format:"binary"}).optional(),caption:u.string().optional()}),AI=u.object({id:u.uuid(),name:u.string(),logoUrl:u.string().nullable(),congressId:u.uuid()}),nm=u.object({id:u.uuid(),imageUrl:u.string(),caption:u.string().nullable(),congressId:u.uuid()}),sm=u.object({id:u.uuid(),title:u.string(),edition:u.number(),startDate:u.date(),endDate:u.date(),description:u.string().nullable(),location:u.string().nullable(),congressLink:u.string().nullable(),noticeUrl:u.string().nullable(),scheduleUrl:u.string().nullable(),programUrl:u.string().nullable(),adminReportUrl:u.string().nullable(),proceedingsUrl:u.string().nullable(),partners:u.array(AI),galleries:u.array(nm),createdAt:u.date(),updatedAt:u.date()}),Zd={method:"post",path:"/international-scientific-congress",tags:["International Scientific Congresses"],summary:"Create a new international scientific congress",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:Xa}}}},responses:{201:{description:"International scientific congress created successfully",summary:"International Scientific Congress Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:u.object({errors:u.record(u.string(),u.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:u.object({message:u.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:u.object({message:u.string()})}}}}},Kd={method:"get",path:"/international-scientific-congress",tags:["International Scientific Congresses"],summary:"List all international scientific congresses with pagination and filters",request:{query:om},responses:{200:{description:"List of international scientific congresses retrieved successfully with pagination",summary:"International Scientific Congresses Retrieved",content:{"application/json":{schema:u.object({page:u.number(),totalPages:u.number(),offset:u.number(),limit:u.number(),congresses:u.array(sm)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:u.object({errors:u.record(u.string(),u.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:u.object({message:u.string()})}}}}},Jd={method:"get",path:"/international-scientific-congress/{id}",tags:["International Scientific Congresses"],summary:"Find international scientific congress by ID",request:{params:ti},responses:{200:{description:"International scientific congress details retrieved successfully",summary:"International Scientific Congress Retrieved",content:{"application/json":{schema:sm}}},400:{description:"Invalid international scientific congress ID format",summary:"Validation Error",content:{"application/json":{schema:u.object({errors:u.record(u.string(),u.string())})}}},404:{description:"International scientific congress not found with the provided ID",summary:"International Scientific Congress Not Found",content:{"application/json":{schema:u.object({message:u.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:u.object({message:u.string()})}}}}},Yd={method:"get",path:"/international-scientific-congress/edition/{edition}",tags:["International Scientific Congresses"],summary:"Find international scientific congresses by edition",request:{params:tm},responses:{200:{description:"International scientific congresses retrieved successfully by edition",summary:"International Scientific Congresses Retrieved by Edition",content:{"application/json":{schema:u.array(sm)}}},400:{description:"Invalid edition parameter provided",summary:"Validation Error",content:{"application/json":{schema:u.object({errors:u.record(u.string(),u.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:u.object({message:u.string()})}}}}},Xd={method:"put",path:"/international-scientific-congress/{id}",tags:["International Scientific Congresses"],summary:"Update international scientific congress",security:[{bearerAuth:[]}],request:{params:ti,body:{content:{"application/json":{schema:im.omit({id:!0})}}}},responses:{200:{description:"International scientific congress updated successfully",summary:"International Scientific Congress Updated"},400:{description:"Invalid input data or international scientific congress ID format",summary:"Validation Error",content:{"application/json":{schema:u.object({errors:u.record(u.string(),u.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:u.object({message:u.string()})}}},404:{description:"International scientific congress not found with the provided ID",summary:"International Scientific Congress Not Found",content:{"application/json":{schema:u.object({message:u.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:u.object({message:u.string()})}}}}},$d={method:"delete",path:"/international-scientific-congress/{id}",tags:["International Scientific Congresses"],summary:"Delete international scientific congress",security:[{bearerAuth:[]}],request:{params:Qa},responses:{200:{description:"International scientific congress deleted successfully",summary:"International Scientific Congress Deleted"},400:{description:"Invalid international scientific congress ID format",summary:"Validation Error",content:{"application/json":{schema:u.object({errors:u.record(u.string(),u.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:u.object({message:u.string()})}}},404:{description:"International scientific congress not found with the provided ID",summary:"International Scientific Congress Not Found",content:{"application/json":{schema:u.object({message:u.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:u.object({message:u.string()})}}}}},zA={method:"post",path:"/international-scientific-congress/{congressId}/gallery",tags:["International Scientific Congress Gallery"],summary:"Create a new gallery image for a congress",security:[{bearerAuth:[]}],request:{params:u.object({congressId:u.uuid()}),body:{content:{"multipart/form-data":{schema:MI}}}},responses:{201:{description:"Gallery image created successfully",summary:"Gallery Image Created"},400:{description:"Invalid input data, missing required fields, or invalid image format/size",summary:"Validation Error",content:{"application/json":{schema:u.object({errors:u.record(u.string(),u.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:u.object({message:u.string()})}}},404:{description:"Congress not found with the provided ID",summary:"Congress Not Found",content:{"application/json":{schema:u.object({message:u.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:u.object({message:u.string()})}}}}},HA={method:"get",path:"/international-scientific-congress/{congressId}/gallery",tags:["International Scientific Congress Gallery"],summary:"List all gallery images for a congress with pagination",request:{params:u.object({congressId:u.uuid()}),query:u.object({page:u.coerce.number().min(1).default(1),limit:u.coerce.number().min(1).default(xI),caption:u.string().optional()})},responses:{200:{description:"Gallery images retrieved successfully with pagination",summary:"Gallery Images Retrieved",content:{"application/json":{schema:u.object({page:u.number(),totalPages:u.number(),offset:u.number(),limit:u.number(),galleries:u.array(nm)})}}},400:{description:"Invalid congress ID format or query parameters",summary:"Validation Error",content:{"application/json":{schema:u.object({errors:u.record(u.string(),u.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:u.object({message:u.string()})}}}}},VA={method:"get",path:"/international-scientific-congress/gallery/{id}",tags:["International Scientific Congress Gallery"],summary:"Find a gallery image by ID",request:{params:u.object({id:u.uuid()})},responses:{200:{description:"Gallery image retrieved successfully",summary:"Gallery Image Retrieved",content:{"application/json":{schema:nm}}},400:{description:"Invalid gallery image ID format",summary:"Validation Error",content:{"application/json":{schema:u.object({errors:u.record(u.string(),u.string())})}}},404:{description:"Gallery image not found with the provided ID",summary:"Gallery Image Not Found",content:{"application/json":{schema:u.object({message:u.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:u.object({message:u.string()})}}}}},ZA={method:"put",path:"/international-scientific-congress/gallery/{id}",tags:["International Scientific Congress Gallery"],summary:"Update a gallery image with optional image upload",security:[{bearerAuth:[]}],request:{params:u.object({id:u.uuid()}),body:{content:{"multipart/form-data":{schema:PI}}}},responses:{200:{description:"Gallery image updated successfully",summary:"Gallery Image Updated"},400:{description:"Invalid input data, gallery ID format, or invalid image format/size",summary:"Validation Error",content:{"application/json":{schema:u.object({errors:u.record(u.string(),u.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:u.object({message:u.string()})}}},404:{description:"Gallery image not found with the provided ID",summary:"Gallery Image Not Found",content:{"application/json":{schema:u.object({message:u.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:u.object({message:u.string()})}}}}},KA={method:"delete",path:"/international-scientific-congress/gallery/{id}",tags:["International Scientific Congress Gallery"],summary:"Delete a gallery image",security:[{bearerAuth:[]}],request:{params:u.object({id:u.uuid()})},responses:{200:{description:"Gallery image deleted successfully",summary:"Gallery Image Deleted"},400:{description:"Invalid gallery ID format",summary:"Validation Error",content:{"application/json":{schema:u.object({errors:u.record(u.string(),u.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:u.object({message:u.string()})}}},404:{description:"Gallery image not found with the provided ID",summary:"Gallery Image Not Found",content:{"application/json":{schema:u.object({message:u.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:u.object({message:u.string()})}}}}};import{$Enums as UI}from"@prisma/client";import N from"zod";import{extendZodWithOpenApi as TI}from"@asteasolutions/zod-to-openapi";import $t from"zod";TI($t);var am=$t.object({role:$t.string().min(1),description:$t.string().optional(),userId:$t.uuid(),order:$t.number().optional()}),ii=class{constructor(e){this.legitimatorCommitteeMemberRepository=e}async handle(e,r){try{let{role:t,description:i,userId:n,order:s}=am.parse(e.body);return await this.legitimatorCommitteeMemberRepository.create({role:t,description:i,userId:n,order:s??0}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as DI}from"@asteasolutions/zod-to-openapi";import mm from"zod";DI(mm);var cm=mm.object({id:mm.uuid()}),ni=class{constructor(e){this.legitimatorCommitteeMemberRepository=e}async handle(e,r){try{let{id:t}=cm.parse({id:e.params.id});if(!await this.legitimatorCommitteeMemberRepository.findById(t))throw new p("O membro do comit\xEA legitimador n\xE3o existe.");return await this.legitimatorCommitteeMemberRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as FI}from"@asteasolutions/zod-to-openapi";import pm from"zod";FI(pm);var ai=pm.object({id:pm.uuid()}),si=class{constructor(e){this.legitimatorCommitteeMemberRepository=e}async handle(e,r){try{let{id:t}=ai.parse({id:e.params.id}),i=await this.legitimatorCommitteeMemberRepository.findById(t);if(!i)throw new p("O membro do comit\xEA legitimador n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as BI}from"@asteasolutions/zod-to-openapi";import wt from"zod";BI(wt);var dm=wt.object({id:wt.uuid(),role:wt.string().min(1).optional(),description:wt.string().optional(),userId:wt.uuid().optional(),order:wt.number().optional()}),mi=class{constructor(e){this.legitimatorCommitteeMemberRepository=e}async handle(e,r){try{let{id:t,role:i,description:n,userId:s,order:a}=dm.parse({id:e.params.id,...e.body});if(!await this.legitimatorCommitteeMemberRepository.findById(t))throw new p("O membro do comit\xEA legitimador n\xE3o existe.");return await this.legitimatorCommitteeMemberRepository.update({id:t,role:i,description:n,userId:s,order:a}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var qI=N.object({id:N.uuid(),name:N.string(),emailAddress:N.string(),avatarUrl:N.string().nullable(),orcid:N.string().nullable(),phone:N.string().nullable(),lattesUrl:N.string().nullable(),role:N.enum(UI.UserRole)}),Qd=N.object({id:N.uuid(),role:N.string(),description:N.string().nullable(),order:N.number(),createdAt:N.date(),updatedAt:N.date(),userId:N.uuid(),user:qI}),el={method:"post",path:"/legitimator-committee-member",tags:["Legitimator Committee Members"],summary:"Create a new Legitimator Committee Member",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:am}}}},responses:{201:{description:"Legitimator Committee Member created successfully",summary:"Legitimator Committee Member Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:N.object({errors:N.record(N.string(),N.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:N.object({message:N.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:N.object({message:N.string()})}}}}},tl={method:"get",path:"/legitimator-committee-member",tags:["Legitimator Committee Members"],summary:"List all Legitimator Committee Members with filters",request:{query:N.object({role:N.string().optional(),orderBy:N.enum(["asc","desc"]).optional()})},responses:{200:{description:"List of Legitimator Committee Members retrieved successfully",summary:"Legitimator Committee Members Retrieved",content:{"application/json":{schema:N.object({members:N.array(Qd)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:N.object({message:N.string()})}}}}},rl={method:"get",path:"/legitimator-committee-member/{id}",tags:["Legitimator Committee Members"],summary:"Find Legitimator Committee Member by ID",request:{params:ai},responses:{200:{description:"Legitimator Committee Member details retrieved successfully",summary:"Legitimator Committee Member Retrieved",content:{"application/json":{schema:Qd}}},400:{description:"Invalid Legitimator Committee Member ID format",summary:"Validation Error",content:{"application/json":{schema:N.object({errors:N.record(N.string(),N.string())})}}},404:{description:"Legitimator Committee Member not found with the provided ID",summary:"Legitimator Committee Member Not Found",content:{"application/json":{schema:N.object({message:N.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:N.object({message:N.string()})}}}}},ol={method:"put",path:"/legitimator-committee-member/{id}",tags:["Legitimator Committee Members"],summary:"Update Legitimator Committee Member",security:[{bearerAuth:[]}],request:{params:ai,body:{content:{"application/json":{schema:dm.omit({id:!0})}}}},responses:{200:{description:"Legitimator Committee Member updated successfully",summary:"Legitimator Committee Member Updated"},400:{description:"Invalid input data or Legitimator Committee Member ID format",summary:"Validation Error",content:{"application/json":{schema:N.object({errors:N.record(N.string(),N.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:N.object({message:N.string()})}}},404:{description:"Legitimator Committee Member not found with the provided ID",summary:"Legitimator Committee Member Not Found",content:{"application/json":{schema:N.object({message:N.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:N.object({message:N.string()})}}}}},il={method:"delete",path:"/legitimator-committee-member/{id}",tags:["Legitimator Committee Members"],summary:"Delete Legitimator Committee Member",security:[{bearerAuth:[]}],request:{params:cm},responses:{200:{description:"Legitimator Committee Member deleted successfully",summary:"Legitimator Committee Member Deleted"},400:{description:"Invalid Legitimator Committee Member ID format",summary:"Validation Error",content:{"application/json":{schema:N.object({errors:N.record(N.string(),N.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:N.object({message:N.string()})}}},404:{description:"Legitimator Committee Member not found with the provided ID",summary:"Legitimator Committee Member Not Found",content:{"application/json":{schema:N.object({message:N.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:N.object({message:N.string()})}}}}};import{$Enums as LI}from"@prisma/client";import A from"zod";import{extendZodWithOpenApi as kI}from"@asteasolutions/zod-to-openapi";import Le from"zod";kI(Le);var lm=Le.object({name:Le.string().min(1),description:Le.string().optional(),members:Le.array(Le.object({userId:Le.uuid(),role:Le.string().min(1),order:Le.number().optional()}))}),ci=class{constructor(e){this.managementTeamRepository=e}async handle(e,r){try{let{name:t,description:i,members:n}=lm.parse(e.body);if(await this.managementTeamRepository.findByName(t))throw new ie("J\xE1 existe um time de gest\xE3o cadastrado com este nome.");return await this.managementTeamRepository.create({name:t,description:i,members:n.map(a=>({userId:a.userId,role:a.role,order:a.order??0}))}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as OI}from"@asteasolutions/zod-to-openapi";import um from"zod";OI(um);var gm=um.object({id:um.uuid()}),pi=class{constructor(e){this.managementTeamRepository=e}async handle(e,r){try{let{id:t}=gm.parse({id:e.params.id});if(!await this.managementTeamRepository.findById(t))throw new p("O time de gest\xE3o n\xE3o existe.");return await this.managementTeamRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as NI}from"@asteasolutions/zod-to-openapi";import fm from"zod";NI(fm);var li=fm.object({id:fm.uuid()}),di=class{constructor(e){this.managementTeamRepository=e}async handle(e,r){try{let{id:t}=li.parse({id:e.params.id}),i=await this.managementTeamRepository.findById(t);if(!i)throw new p("O time de gest\xE3o n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as GI}from"@asteasolutions/zod-to-openapi";import Fe from"zod";GI(Fe);var ym=Fe.object({id:Fe.uuid(),name:Fe.string().min(1).optional(),description:Fe.string().optional(),members:Fe.array(Fe.object({userId:Fe.uuid(),role:Fe.string().min(1),order:Fe.number().optional()})).optional()}),ui=class{constructor(e){this.managementTeamRepository=e}async handle(e,r){try{let{id:t,name:i,description:n,members:s}=ym.parse({id:e.params.id,...e.body}),a=await this.managementTeamRepository.findById(t);if(!a)throw new p("O time de gest\xE3o n\xE3o existe.");if(i&&i!==a.name){let c=await this.managementTeamRepository.findByName(i);if(c&&c.id!==t)throw new ie("J\xE1 existe um time de gest\xE3o com este nome.")}return await this.managementTeamRepository.update({id:t,name:i,description:n,members:s?s.map(c=>({userId:c.userId,role:c.role,order:c.order??0})):void 0}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var WI=A.object({id:A.uuid(),name:A.string(),emailAddress:A.string(),avatarUrl:A.string().nullable(),orcid:A.string().nullable(),phone:A.string().nullable(),lattesUrl:A.string().nullable(),role:A.enum(LI.UserRole)}),_I=A.object({id:A.uuid(),role:A.string(),description:A.string().nullable(),order:A.number(),teamId:A.uuid(),userId:A.uuid(),createdAt:A.date(),updatedAt:A.date(),user:WI}),nl=A.object({id:A.uuid(),name:A.string(),description:A.string().nullable(),createdAt:A.date(),updatedAt:A.date(),members:A.array(_I)}),sl={method:"post",path:"/management-team",tags:["Management Teams"],summary:"Create a new Management Team with multiple members",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:lm}}}},responses:{201:{description:"Management Team created successfully",summary:"Management Team Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:A.object({errors:A.record(A.string(),A.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:A.object({message:A.string()})}}},409:{description:"Management Team with this name already exists",summary:"Conflict",content:{"application/json":{schema:A.object({message:A.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:A.object({message:A.string()})}}}}},al={method:"get",path:"/management-team",tags:["Management Teams"],summary:"List all Management Teams with filters",request:{query:A.object({name:A.string().optional(),description:A.string().optional(),orderBy:A.enum(["asc","desc"]).optional()})},responses:{200:{description:"List of Management Teams retrieved successfully",summary:"Management Teams Retrieved",content:{"application/json":{schema:A.object({teams:A.array(nl)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:A.object({message:A.string()})}}}}},ml={method:"get",path:"/management-team/{id}",tags:["Management Teams"],summary:"Find Management Team by ID",request:{params:li},responses:{200:{description:"Management Team details retrieved successfully",summary:"Management Team Retrieved",content:{"application/json":{schema:nl}}},400:{description:"Invalid Management Team ID format",summary:"Validation Error",content:{"application/json":{schema:A.object({errors:A.record(A.string(),A.string())})}}},404:{description:"Management Team not found with the provided ID",summary:"Management Team Not Found",content:{"application/json":{schema:A.object({message:A.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:A.object({message:A.string()})}}}}},cl={method:"put",path:"/management-team/{id}",tags:["Management Teams"],summary:"Update Management Team and manage member relationships",security:[{bearerAuth:[]}],request:{params:li,body:{content:{"application/json":{schema:ym.omit({id:!0})}}}},responses:{200:{description:"Management Team updated successfully",summary:"Management Team Updated"},400:{description:"Invalid input data or Management Team ID format",summary:"Validation Error",content:{"application/json":{schema:A.object({errors:A.record(A.string(),A.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:A.object({message:A.string()})}}},404:{description:"Management Team not found with the provided ID",summary:"Management Team Not Found",content:{"application/json":{schema:A.object({message:A.string()})}}},409:{description:"Management Team with this name already exists",summary:"Conflict",content:{"application/json":{schema:A.object({message:A.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:A.object({message:A.string()})}}}}},pl={method:"delete",path:"/management-team/{id}",tags:["Management Teams"],summary:"Delete Management Team",security:[{bearerAuth:[]}],request:{params:gm},responses:{200:{description:"Management Team deleted successfully",summary:"Management Team Deleted"},400:{description:"Invalid Management Team ID format",summary:"Validation Error",content:{"application/json":{schema:A.object({errors:A.record(A.string(),A.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:A.object({message:A.string()})}}},404:{description:"Management Team not found with the provided ID",summary:"Management Team Not Found",content:{"application/json":{schema:A.object({message:A.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:A.object({message:A.string()})}}}}};import{MeetingFormat as XI,MeetingStatus as $I}from"@prisma/client";import L from"zod";import{extendZodWithOpenApi as zI}from"@asteasolutions/zod-to-openapi";import Qt from"zod";var ll=10,dl=1024,HI=dl*dl,VI=ll*HI;zI(Qt);var hm=Qt.object({title:Qt.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio"),publishedAt:Qt.coerce.date(),meetingId:Qt.uuid(),document:Qt.any().refine(o=>o==null||typeof o!="object"||typeof o.size!="number"?!1:o.size<=VI,`O documento deve ter no m\xE1ximo ${ll}MB.`)}),gi=class{constructor(e,r,t){this.meetingMinuteRepository=e;this.meetingRepository=r;this.firebaseStorageService=t}async handle(e,r){try{let{title:t,publishedAt:i,meetingId:n,document:s}=hm.parse({...e.body,...e.params,document:e.file});if(!await this.meetingRepository.findById(n))throw new p("A reuni\xE3o n\xE3o existe.");if(await this.meetingMinuteRepository.findByMeetingId(n))throw new m("Esta reuni\xE3o j\xE1 possui uma ata.");let d=await this.meetingMinuteRepository.create({title:t,publishedAt:i,meetingId:n,documentUrl:""}),h=await this.firebaseStorageService.uploadFile({file:s,id:d.id,folder:M.MEETING_MINUTE});return await this.meetingMinuteRepository.update({id:d.id,documentUrl:h}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as ZI}from"@asteasolutions/zod-to-openapi";import Rm from"zod";ZI(Rm);var Tr=Rm.object({meetingId:Rm.uuid()}),fi=class{constructor(e){this.meetingMinuteRepository=e}async handle(e,r){try{let{meetingId:t}=Tr.parse({meetingId:e.params.meetingId}),i=await this.meetingMinuteRepository.findByMeetingId(t);return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as KI}from"@asteasolutions/zod-to-openapi";import er from"zod";var gl=10,ul=1024,JI=ul*ul,YI=gl*JI;KI(er);var Im=er.object({meetingId:er.uuid(),title:er.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio").optional(),publishedAt:er.coerce.date().optional(),document:er.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=YI,`O documento deve ter no m\xE1ximo ${gl}MB.`).optional()}),yi=class{constructor(e,r){this.meetingMinuteRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{meetingId:t,title:i,publishedAt:n,document:s}=Im.parse({meetingId:e.params.meetingId,...e.body,document:e.file}),a=await this.meetingMinuteRepository.findByMeetingId(t);if(!a)throw new p("A ata n\xE3o existe para esta reuni\xE3o.");let c=a.documentUrl;return s&&(a.documentUrl&&await this.firebaseStorageService.deleteFile({fileUrl:a.documentUrl}),c=await this.firebaseStorageService.uploadFile({file:s,id:a.id,folder:M.MEETING_MINUTE})),await this.meetingMinuteRepository.update({id:a.id,title:i,publishedAt:n,documentUrl:c??void 0}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var QI=L.object({id:L.uuid(),title:L.string(),scheduledAt:L.date(),format:L.enum(XI),agenda:L.string(),meetingLink:L.string().nullable(),location:L.string().nullable(),status:L.enum($I),createdAt:L.date(),updatedAt:L.date()}),eb=L.object({id:L.uuid(),title:L.string(),publishedAt:L.date(),documentUrl:L.string(),meetingId:L.uuid(),meeting:QI,createdAt:L.date(),updatedAt:L.date()}),fl={method:"post",path:"/meeting/{meetingId}/minute",tags:["Meetings"],summary:"Create a new meeting minute with document upload",security:[{bearerAuth:[]}],request:{params:L.object({meetingId:L.uuid()}),body:{content:{"multipart/form-data":{schema:hm.omit({meetingId:!0})}}}},responses:{201:{description:"Meeting minute created successfully",summary:"Meeting Minute Created"},400:{description:"Invalid input data, missing required fields, or invalid document format/size",summary:"Validation Error",content:{"application/json":{schema:L.object({errors:L.record(L.string(),L.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:L.object({message:L.string()})}}},404:{description:"Meeting not found with the provided ID",summary:"Meeting Not Found",content:{"application/json":{schema:L.object({message:L.string()})}}},409:{description:"Meeting already has a minute",summary:"Conflict",content:{"application/json":{schema:L.object({message:L.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:L.object({message:L.string()})}}}}},yl={method:"get",path:"/meeting/{meetingId}/minute",tags:["Meetings"],summary:"Find meeting minute by meeting ID",request:{params:Tr},responses:{200:{description:"Meeting minute retrieved successfully by meeting ID",summary:"Meeting Minute Retrieved by Meeting ID",content:{"application/json":{schema:eb.nullable()}}},400:{description:"Invalid meeting ID parameter provided",summary:"Validation Error",content:{"application/json":{schema:L.object({errors:L.record(L.string(),L.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:L.object({message:L.string()})}}}}},hl={method:"put",path:"/meeting/{meetingId}/minute",tags:["Meetings"],summary:"Update meeting minute with optional document upload",security:[{bearerAuth:[]}],request:{params:Tr,body:{content:{"multipart/form-data":{schema:Im.omit({meetingId:!0})}}}},responses:{200:{description:"Meeting minute updated successfully",summary:"Meeting Minute Updated"},400:{description:"Invalid input data, meeting minute ID format, or invalid document format/size",summary:"Validation Error",content:{"application/json":{schema:L.object({errors:L.record(L.string(),L.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:L.object({message:L.string()})}}},404:{description:"Meeting minute not found with the provided ID",summary:"Meeting Minute Not Found",content:{"application/json":{schema:L.object({message:L.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:L.object({message:L.string()})}}}}},Rl={method:"delete",path:"/meeting/{meetingId}/minute",tags:["Meetings"],summary:"Delete meeting minute",security:[{bearerAuth:[]}],request:{params:Tr},responses:{200:{description:"Meeting minute deleted successfully",summary:"Meeting Minute Deleted"},400:{description:"Invalid meeting minute ID format",summary:"Validation Error",content:{"application/json":{schema:L.object({errors:L.record(L.string(),L.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:L.object({message:L.string()})}}},404:{description:"Meeting minute not found with the provided ID",summary:"Meeting Minute Not Found",content:{"application/json":{schema:L.object({message:L.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:L.object({message:L.string()})}}}}};import{MeetingFormat as gb,MeetingStatus as fb}from"@prisma/client";import x from"zod";import{extendZodWithOpenApi as tb}from"@asteasolutions/zod-to-openapi";import{MeetingFormat as hi,MeetingStatus as bm}from"@prisma/client";import Be from"zod";tb(Be);var Cm=Be.object({title:Be.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio"),scheduledAt:Be.coerce.date(),format:Be.enum(hi).default(hi.ONLINE),agenda:Be.string().min(1,"Pauta \xE9 obrigat\xF3ria"),meetingLink:Be.string().url("Link da reuni\xE3o deve ser uma URL v\xE1lida").optional().or(Be.literal("")),location:Be.string().optional(),status:Be.enum(bm).default(bm.PENDING)}).refine(o=>o.format===hi.ONLINE?!!o.meetingLink:o.format===hi.IN_PERSON?!!o.location:!0,{message:"Reuni\xF5es online devem ter link e reuni\xF5es presenciais devem ter localiza\xE7\xE3o",path:["format"]}),Ri=class{constructor(e){this.meetingRepository=e}async handle(e,r){try{let{title:t,scheduledAt:i,format:n,agenda:s,meetingLink:a,location:c,status:d}=Cm.parse(e.body);return await this.meetingRepository.create({title:t,scheduledAt:i,format:n,agenda:s,meetingLink:a||void 0,location:c||void 0,status:d??bm.PENDING}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as rb}from"@asteasolutions/zod-to-openapi";import Sm from"zod";rb(Sm);var wm=Sm.object({id:Sm.uuid()}),Ii=class{constructor(e){this.meetingRepository=e}async handle(e,r){try{let{id:t}=wm.parse({id:e.params.id});if(!await this.meetingRepository.findById(t))throw new p("A reuni\xE3o n\xE3o existe.");return await this.meetingRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as ob}from"@asteasolutions/zod-to-openapi";import vm from"zod";ob(vm);var Ci=vm.object({id:vm.uuid()}),bi=class{constructor(e){this.meetingRepository=e}async handle(e,r){try{let{id:t}=Ci.parse({id:e.params.id}),i=await this.meetingRepository.findById(t);if(!i)throw new p("A reuni\xE3o n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as ib}from"@asteasolutions/zod-to-openapi";import{MeetingStatus as nb}from"@prisma/client";import Em from"zod";ib(Em);var jm=Em.object({status:Em.enum(nb)}),Si=class{constructor(e){this.meetingRepository=e}async handle(e,r){try{let{status:t}=jm.parse({status:e.params.status}),i=await this.meetingRepository.findByStatus(t);return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as sb}from"@asteasolutions/zod-to-openapi";import{MeetingFormat as ab,MeetingStatus as mb}from"@prisma/client";import st from"zod";var cb=1,pb=10;sb(st);var xm=st.object({page:st.coerce.number().min(1).default(cb),limit:st.coerce.number().min(1).default(pb),title:st.string().optional(),format:st.enum(ab).optional(),status:st.enum(mb).optional(),orderBy:st.enum(["asc","desc"]).optional()}),wi=class{constructor(e){this.meetingRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=xm.parse(e.query),s=i*t-i,[a,c]=await Promise.all([this.meetingRepository.find({pagination:{offset:s,limit:i},filter:n}),this.meetingRepository.count({filter:n})]),d=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:d,offset:s,limit:i,meetings:a})}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as db}from"@asteasolutions/zod-to-openapi";import{MeetingFormat as lb,MeetingStatus as ub}from"@prisma/client";import je from"zod";db(je);var Mm=je.object({id:je.uuid(),title:je.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio").optional(),scheduledAt:je.coerce.date().optional(),format:je.enum(lb).optional(),agenda:je.string().min(1,"Pauta \xE9 obrigat\xF3ria").optional(),meetingLink:je.string().url("Link da reuni\xE3o deve ser uma URL v\xE1lida").optional().or(je.literal("")),location:je.string().optional(),status:je.enum(ub).optional()}),vi=class{constructor(e){this.meetingRepository=e}async handle(e,r){try{let{id:t,title:i,scheduledAt:n,format:s,agenda:a,meetingLink:c,location:d,status:h}=Mm.parse({id:e.params.id,...e.body});if(!await this.meetingRepository.findById(t))throw new p("A reuni\xE3o n\xE3o existe.");return await this.meetingRepository.update({id:t,title:i,scheduledAt:n,format:s,agenda:a,meetingLink:c||void 0,location:d||void 0,status:h}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var yb=x.object({id:x.uuid(),title:x.string(),publishedAt:x.date(),documentUrl:x.string(),meetingId:x.uuid(),createdAt:x.date(),updatedAt:x.date()}),Pm=x.object({id:x.uuid(),title:x.string(),scheduledAt:x.date(),format:x.enum(gb),agenda:x.string(),meetingLink:x.string().nullable(),location:x.string().nullable(),status:x.enum(fb),minutes:yb.nullable(),createdAt:x.date(),updatedAt:x.date()}),Il={method:"post",path:"/meeting",tags:["Meetings"],summary:"Create a new meeting",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:Cm}}}},responses:{201:{description:"Meeting created successfully",summary:"Meeting Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:x.object({errors:x.record(x.string(),x.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:x.object({message:x.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:x.object({message:x.string()})}}}}},bl={method:"get",path:"/meeting",tags:["Meetings"],summary:"List all meetings with pagination and filters",request:{query:xm},responses:{200:{description:"List of meetings retrieved successfully with pagination",summary:"Meetings Retrieved",content:{"application/json":{schema:x.object({page:x.number(),totalPages:x.number(),offset:x.number(),limit:x.number(),meetings:x.array(Pm)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:x.object({errors:x.record(x.string(),x.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:x.object({message:x.string()})}}}}},Cl={method:"get",path:"/meeting/{id}",tags:["Meetings"],summary:"Find meeting by ID",request:{params:Ci},responses:{200:{description:"Meeting details retrieved successfully",summary:"Meeting Retrieved",content:{"application/json":{schema:Pm}}},400:{description:"Invalid meeting ID format",summary:"Validation Error",content:{"application/json":{schema:x.object({errors:x.record(x.string(),x.string())})}}},404:{description:"Meeting not found with the provided ID",summary:"Meeting Not Found",content:{"application/json":{schema:x.object({message:x.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:x.object({message:x.string()})}}}}},Sl={method:"get",path:"/meeting/status/{status}",tags:["Meetings"],summary:"Find meetings by status",request:{params:jm},responses:{200:{description:"Meetings retrieved successfully by status",summary:"Meetings Retrieved by Status",content:{"application/json":{schema:x.array(Pm)}}},400:{description:"Invalid status parameter provided",summary:"Validation Error",content:{"application/json":{schema:x.object({errors:x.record(x.string(),x.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:x.object({message:x.string()})}}}}},wl={method:"put",path:"/meeting/{id}",tags:["Meetings"],summary:"Update meeting",security:[{bearerAuth:[]}],request:{params:Ci,body:{content:{"application/json":{schema:Mm.omit({id:!0})}}}},responses:{200:{description:"Meeting updated successfully",summary:"Meeting Updated"},400:{description:"Invalid input data or meeting ID format",summary:"Validation Error",content:{"application/json":{schema:x.object({errors:x.record(x.string(),x.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:x.object({message:x.string()})}}},404:{description:"Meeting not found with the provided ID",summary:"Meeting Not Found",content:{"application/json":{schema:x.object({message:x.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:x.object({message:x.string()})}}}}},vl={method:"delete",path:"/meeting/{id}",tags:["Meetings"],summary:"Delete meeting",security:[{bearerAuth:[]}],request:{params:wm},responses:{200:{description:"Meeting deleted successfully",summary:"Meeting Deleted"},400:{description:"Invalid meeting ID format",summary:"Validation Error",content:{"application/json":{schema:x.object({errors:x.record(x.string(),x.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:x.object({message:x.string()})}}},404:{description:"Meeting not found with the provided ID",summary:"Meeting Not Found",content:{"application/json":{schema:x.object({message:x.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:x.object({message:x.string()})}}}}};import D from"zod";import{extendZodWithOpenApi as hb}from"@asteasolutions/zod-to-openapi";import Dr from"zod";var Rb=5,El=1024,Ib=El*El,bb=Rb*Ib;hb(Dr);var Am=Dr.object({title:Dr.string().min(1),content:Dr.string().min(1),image:Dr.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=bb,{message:"A imagem deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB."})}),Ei=class{constructor(e,r){this.newsRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{title:t,content:i,image:n}=Am.parse({...e.body,image:e.file}),s=e.user.id,a=await this.firebaseStorageService.uploadFile({file:n,folder:M.NEWS,id:s});await this.newsRepository.create({title:t,content:i,authorId:s,imageUrl:a}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as Cb}from"@asteasolutions/zod-to-openapi";import at from"zod";var Sb=1,wb=7;Cb(at);var xi=at.object({page:at.coerce.number().min(1).default(Sb),limit:at.coerce.number().min(1).default(wb),authorId:at.string(),title:at.string().optional(),content:at.string().optional(),orderBy:at.enum(["asc","desc"]).default("desc")}),ji=class{constructor(e){this.newsRepository=e}async handle(e,r){try{let{page:t,limit:i,authorId:n,...s}=xi.parse(e.query),a=i*t-i,[c,d]=await Promise.all([this.newsRepository.findByAuthorId({authorId:n,pagination:{offset:a,limit:i},filter:s}),this.newsRepository.count({filter:{authorId:n,...s}})]),h=Math.max(Math.ceil(d/i),1);r.status(200).json({page:t,totalPages:h,offset:a,limit:i,news:c})}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as vb}from"@asteasolutions/zod-to-openapi";import Tm from"zod";vb(Tm);var Dm=Tm.object({id:Tm.string()}),Mi=class{constructor(e){this.newsRepository=e}async handle(e,r){try{let{id:t}=Dm.parse(e.params),i=await this.newsRepository.findById(t);if(!i)throw new p("Not\xEDcia n\xE3o encontrada.");r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as Eb}from"@asteasolutions/zod-to-openapi";import mt from"zod";var jb=1,xb=9;Eb(mt);var Fm=mt.object({page:mt.coerce.number().min(1).default(jb),limit:mt.coerce.number().min(1).default(xb),title:mt.string().optional(),content:mt.string().optional(),authorId:mt.string().optional(),orderBy:mt.enum(["asc","desc"]).default("desc")}),Pi=class{constructor(e){this.newsRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=Fm.parse(e.query),s=i*t-i,[a,c]=await Promise.all([this.newsRepository.find({pagination:{offset:s,limit:i},filter:n}),this.newsRepository.count({filter:n})]),d=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:d,offset:s,limit:i,news:a})}catch(t){if(t instanceof Error)throw new m(t.message)}}};var jl={method:"post",path:"/news",tags:["News"],summary:"Create news",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:Am}}}},responses:{201:{description:"News article created successfully",summary:"News Created",content:{"application/json":{schema:D.object({message:D.string()})}}},400:{description:"Invalid input data or file format",summary:"Validation Error",content:{"application/json":{schema:D.object({errors:D.record(D.string(),D.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:D.object({message:D.string()})}}}}},xl={method:"get",path:"/news",tags:["News"],summary:"List news",request:{query:Fm},responses:{200:{description:"Paginated list of news articles retrieved successfully",summary:"News Retrieved",content:{"application/json":{schema:D.object({page:D.number(),totalPages:D.number(),offset:D.number(),limit:D.number(),news:D.array(D.object({title:D.string(),content:D.string(),id:D.string(),createdAt:D.date(),updatedAt:D.date(),imageUrl:D.string().nullable()}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:D.object({errors:D.record(D.string(),D.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:D.object({message:D.string()})}}}}},Ml={method:"get",path:"/news/{id}",tags:["News"],summary:"Find news by ID",request:{params:Dm},responses:{200:{description:"News article details retrieved successfully",summary:"News Retrieved",content:{"application/json":{schema:D.object({page:D.number(),totalPages:D.number(),offset:D.number(),limit:D.number(),news:D.object({title:D.string(),content:D.string(),id:D.string(),createdAt:D.date(),updatedAt:D.date(),imageUrl:D.string().nullable()})})}}},400:{description:"Invalid news ID format",summary:"Validation Error",content:{"application/json":{schema:D.object({errors:D.record(D.string(),D.string())})}}},404:{description:"News article not found with the provided ID",summary:"News Not Found",content:{"application/json":{schema:D.object({message:D.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:D.object({message:D.string()})}}}}},Pl={method:"get",path:"/news/author/{author_id}",tags:["News"],summary:"List news by author",request:{params:xi.pick({authorId:!0}).transform(()=>({author_id:""})),query:xi.omit({authorId:!0})},responses:{200:{description:"Paginated list of news articles by author retrieved successfully",summary:"Author News Retrieved",content:{"application/json":{schema:D.object({page:D.number(),totalPages:D.number(),offset:D.number(),limit:D.number(),news:D.array(D.object({title:D.string(),content:D.string(),id:D.string(),createdAt:D.date(),updatedAt:D.date(),imageUrl:D.string().nullable()}))})}}},400:{description:"Invalid author ID or query parameters",summary:"Validation Error",content:{"application/json":{schema:D.object({errors:D.record(D.string(),D.string())})}}},404:{description:"Author not found with the provided ID",summary:"Author Not Found",content:{"application/json":{schema:D.object({message:D.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:D.object({message:D.string()})}}}}};import U from"zod";import{extendZodWithOpenApi as Mb}from"@asteasolutions/zod-to-openapi";import Ue from"zod";var Tl=2,Al=1024,Pb=Al*Al,Ab=Tl*Pb;Mb(Ue);var Bm=Ue.object({name:Ue.string().min(1,"Nome \xE9 obrigat\xF3rio"),logo:Ue.any().refine(o=>o==null||typeof o!="object"||typeof o.size!="number"?!1:o.size<=Ab,`A imagem deve ter no m\xE1ximo ${Tl}MB.`),websiteUrl:Ue.url("URL do site deve ser v\xE1lida").optional(),description:Ue.string().optional(),category:Ue.string().optional(),since:Ue.coerce.date(),isActive:Ue.preprocess(o=>o==="true",Ue.boolean().optional())}),Ai=class{constructor(e,r){this.partnerRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{name:t,logo:i,websiteUrl:n,description:s,category:a,since:c,isActive:d}=Bm.parse({...e.body,logo:e.file}),h=await this.partnerRepository.create({name:t,websiteUrl:n,description:s,category:a,since:c,isActive:d}),j=await this.firebaseStorageService.uploadFile({file:i,id:h.id,folder:M.PARTNER});return await this.partnerRepository.update({id:h.id,logoUrl:j}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as Tb}from"@asteasolutions/zod-to-openapi";import Um from"zod";Tb(Um);var qm=Um.object({id:Um.uuid()}),Ti=class{constructor(e,r){this.partnerRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=qm.parse({id:e.params.id}),i=await this.partnerRepository.findById(t);if(!i)throw new p("O parceiro n\xE3o existe.");return i.logoUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.logoUrl}),await this.partnerRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as Db}from"@asteasolutions/zod-to-openapi";import km from"zod";Db(km);var Fi=km.object({id:km.uuid()}),Di=class{constructor(e){this.partnerRepository=e}async handle(e,r){try{let{id:t}=Fi.parse({id:e.params.id}),i=await this.partnerRepository.findById(t);if(!i)throw new p("O parceiro n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as Fb}from"@asteasolutions/zod-to-openapi";import We from"zod";var Bb=1,Ub=9;Fb(We);var Om=We.object({page:We.coerce.number().min(1).default(Bb),limit:We.coerce.number().min(1).default(Ub),name:We.string().optional(),description:We.string().optional(),category:We.string().optional(),isActive:We.coerce.boolean().optional(),orderBy:We.enum(["asc","desc"]).optional()}),Bi=class{constructor(e){this.partnerRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=Om.parse(e.query),s=i*t-i,[a,c]=await Promise.all([this.partnerRepository.find({pagination:{offset:s,limit:i},filter:n}),this.partnerRepository.count({filter:n})]),d=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:d,offset:s,limit:i,partners:a})}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as qb}from"@asteasolutions/zod-to-openapi";import xe from"zod";var Fl=2,Dl=1024,kb=Dl*Dl,Ob=Fl*kb;qb(xe);var Nm=xe.object({id:xe.uuid(),name:xe.string().min(1,"Nome \xE9 obrigat\xF3rio").optional(),logo:xe.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=Ob,`A imagem deve ter no m\xE1ximo ${Fl}MB.`).optional(),websiteUrl:xe.url("URL do site deve ser v\xE1lida").optional(),description:xe.string().optional(),category:xe.string().optional(),since:xe.coerce.date().optional(),isActive:xe.preprocess(o=>o==="true",xe.boolean().optional())}),Ui=class{constructor(e,r){this.partnerRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,name:i,logo:n,websiteUrl:s,description:a,category:c,since:d,isActive:h}=Nm.parse({id:e.params.id,...e.body,logo:e.file}),j=await this.partnerRepository.findById(t);if(!j)throw new p("O parceiro n\xE3o existe.");let q=j.logoUrl;if(n&&(q=await this.firebaseStorageService.uploadFile({file:n,id:t,folder:"images/partners"})),!q)throw new m("Logo URL \xE9 obrigat\xF3rio");return await this.partnerRepository.update({id:t,name:i,logoUrl:q,websiteUrl:s,description:a,category:c,since:d,isActive:h}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var Bl=U.object({id:U.uuid(),name:U.string(),logoUrl:U.string(),description:U.string().nullable(),category:U.string().nullable(),since:U.date(),isActive:U.boolean(),createdAt:U.date(),updatedAt:U.date()}),Ul={method:"post",path:"/partner",tags:["Partners"],summary:"Create a new partner with logo upload",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:Bm}}}},responses:{201:{description:"Partner created successfully",summary:"Partner Created"},400:{description:"Invalid input data, missing required fields, or invalid logo format/size",summary:"Validation Error",content:{"application/json":{schema:U.object({errors:U.record(U.string(),U.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:U.object({message:U.string()})}}},409:{description:"Partner with this name already exists",summary:"Conflict",content:{"application/json":{schema:U.object({message:U.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:U.object({message:U.string()})}}}}},ql={method:"get",path:"/partner",tags:["Partners"],summary:"List all partners with pagination and filters",request:{query:Om},responses:{200:{description:"List of partners retrieved successfully with pagination",summary:"Partners Retrieved",content:{"application/json":{schema:U.object({page:U.number(),totalPages:U.number(),offset:U.number(),limit:U.number(),partners:U.array(Bl)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:U.object({errors:U.record(U.string(),U.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:U.object({message:U.string()})}}}}},kl={method:"get",path:"/partner/{id}",tags:["Partners"],summary:"Find partner by ID",request:{params:Fi},responses:{200:{description:"Partner details retrieved successfully",summary:"Partner Retrieved",content:{"application/json":{schema:Bl}}},400:{description:"Invalid partner ID format",summary:"Validation Error",content:{"application/json":{schema:U.object({errors:U.record(U.string(),U.string())})}}},404:{description:"Partner not found with the provided ID",summary:"Partner Not Found",content:{"application/json":{schema:U.object({message:U.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:U.object({message:U.string()})}}}}},Ol={method:"put",path:"/partner/{id}",tags:["Partners"],summary:"Update partner with optional logo upload",security:[{bearerAuth:[]}],request:{params:Fi,body:{content:{"multipart/form-data":{schema:Nm.omit({id:!0})}}}},responses:{200:{description:"Partner updated successfully",summary:"Partner Updated"},400:{description:"Invalid input data, partner ID format, or invalid logo format/size",summary:"Validation Error",content:{"application/json":{schema:U.object({errors:U.record(U.string(),U.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:U.object({message:U.string()})}}},404:{description:"Partner not found with the provided ID",summary:"Partner Not Found",content:{"application/json":{schema:U.object({message:U.string()})}}},409:{description:"Partner with this name already exists",summary:"Conflict",content:{"application/json":{schema:U.object({message:U.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:U.object({message:U.string()})}}}}},Nl={method:"delete",path:"/partner/{id}",tags:["Partners"],summary:"Delete partner",security:[{bearerAuth:[]}],request:{params:qm},responses:{200:{description:"Partner deleted successfully",summary:"Partner Deleted"},400:{description:"Invalid partner ID format",summary:"Validation Error",content:{"application/json":{schema:U.object({errors:U.record(U.string(),U.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:U.object({message:U.string()})}}},404:{description:"Partner not found with the provided ID",summary:"Partner Not Found",content:{"application/json":{schema:U.object({message:U.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:U.object({message:U.string()})}}}}};import{$Enums as Gl}from"@prisma/client";import O from"zod";import{extendZodWithOpenApi as Nb}from"@asteasolutions/zod-to-openapi";import{PendencyStatus as Gb}from"@prisma/client";import ct from"zod";Nb(ct);var ki=ct.object({userId:ct.uuid(),title:ct.string().min(1),description:ct.string().optional(),status:ct.enum(Gb).default("PENDING"),dueDate:ct.coerce.date().optional(),document:ct.any().refine(o=>o&&typeof o=="object"&&o.size>0,"Arquivo do documento \xE9 obrigat\xF3rio")}),qi=class{constructor(e,r,t){this.userRepository=e;this.pendencyRepository=r;this.firebaseStorageService=t}async handle(e,r){try{let{userId:t,title:i,description:n,status:s,dueDate:a,document:c}=ki.parse({...e.body,userId:e.params.user_id,document:e.file});if(!await this.userRepository.findById(t))throw new pe("O usu\xE1rio n\xE3o existe.");let h=await this.firebaseStorageService.uploadFile({file:c,id:t,folder:M.PENDENCY});return await this.pendencyRepository.create({userId:t,title:i,description:n,status:s,dueDate:a,documentUrl:h}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as Lb}from"@asteasolutions/zod-to-openapi";import Gm from"zod";Lb(Gm);var Lm=Gm.object({id:Gm.uuid()}),Oi=class{constructor(e,r){this.pendencyRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=Lm.parse({id:e.params.pendency_id}),i=await this.pendencyRepository.findById(t);if(!i)throw new p("A pend\xEAncia n\xE3o existe.");return await Promise.all([this.pendencyRepository.deleteById(i.id),this.firebaseStorageService.deleteFile({fileUrl:i.documentUrl})]),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as Wb}from"@asteasolutions/zod-to-openapi";import{PendencyStatus as _b}from"@prisma/client";import _e from"zod";var zb=1,Hb=6;Wb(_e);var Wm=_e.object({page:_e.coerce.number().min(1).default(zb),limit:_e.coerce.number().min(1).default(Hb),title:_e.string().optional(),description:_e.string().optional(),status:_e.enum(_b).default("PENDING"),userId:_e.uuid().optional(),orderBy:_e.enum(["asc","desc"]).default("desc")}),Ni=class{constructor(e){this.pendencyRepository=e}async handle(e,r){try{let{description:t,limit:i,orderBy:n,page:s,title:a,status:c,userId:d}=Wm.parse(e.query),h=s*i-i,[j,q]=await Promise.all([this.pendencyRepository.find({pagination:{offset:h,limit:i},filter:{title:a,description:t,status:c,orderBy:n,userId:d}}),this.pendencyRepository.count({filter:{title:a,description:t,status:c,userId:d}})]),X=Math.max(Math.ceil(q/i),1);return r.status(200).json({page:s,totalPages:X,offset:h,limit:i,pendencies:j})}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as Vb}from"@asteasolutions/zod-to-openapi";import _m from"zod";Vb(_m);var zm=_m.object({pendencyId:_m.uuid()}),Gi=class{constructor(e){this.pendencyRepository=e}async handle(e,r){try{let{pendencyId:t}=zm.parse({pendencyId:e.params.pendency_id}),i=await this.pendencyRepository.findById(t);if(!i)throw new p("Pend\xEAncia n\xE3o encontrada.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as Zb}from"@asteasolutions/zod-to-openapi";import{PendencyStatus as Kb}from"@prisma/client";import pt from"zod";Zb(pt);var Wi=pt.object({id:pt.uuid(),title:pt.string().min(1),description:pt.string().optional(),status:pt.enum(Kb),dueDate:pt.coerce.date().optional(),document:pt.any().refine(o=>o==null||typeof o=="object"&&typeof o.size=="number"&&(o.size===0||o.size>0),"Arquivo do documento \xE9 inv\xE1lido").optional()}),Li=class{constructor(e,r){this.pendencyRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{document:t,id:i,...n}=Wi.parse({...e.body,id:e.params.pendency_id,document:e.file}),s=await this.pendencyRepository.findById(i);if(!s)throw new pe("A pend\xEAncia n\xE3o existe");let a=s.documentUrl;return t&&t.size>0&&(a=await this.firebaseStorageService.updateFile({file:t,id:s.userId,folder:M.PENDENCY,fileUrl:s.documentUrl})),await this.pendencyRepository.update({...n,id:i,documentUrl:a}),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var Ll={method:"post",path:"/pendency/{user_id}",tags:["Pendencies"],summary:"Create pendency for user",security:[{bearerAuth:[]}],request:{params:ki.pick({userId:!0}).transform(()=>({user_id:""})),body:{content:{"multipart/form-data":{schema:ki.omit({userId:!0})}}}},responses:{201:{description:"Pendency created successfully for the user",summary:"Pendency Created",content:{"application/json":{schema:O.object({})}}},400:{description:"Invalid input data or file format",summary:"Validation Error",content:{"application/json":{schema:O.object({errors:O.record(O.string(),O.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:O.object({message:O.string()})}}}}},Wl={method:"get",path:"/pendency",tags:["Pendencies"],summary:"List pendencies",security:[{bearerAuth:[]}],request:{query:Wm},responses:{200:{description:"Paginated list of pendencies retrieved successfully",summary:"Pendencies Retrieved",content:{"application/json":{schema:O.object({page:O.number(),totalPages:O.number(),offset:O.number(),limit:O.number(),pendencies:O.array(O.object({id:O.string(),title:O.string(),description:O.string().nullable(),status:O.enum(Gl.PendencyStatus),dueDate:O.date().nullable(),documentUrl:O.string(),userId:O.string(),createdAt:O.date(),updatedAt:O.date()}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:O.object({errors:O.record(O.string(),O.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:O.object({message:O.string()})}}}}},_l={method:"get",path:"/pendency/{pendency_id}",tags:["Pendencies"],summary:"Find pendency by ID",security:[{bearerAuth:[]}],request:{params:zm},responses:{200:{description:"Pendency details retrieved successfully",summary:"Pendency Retrieved",content:{"application/json":{schema:O.object({id:O.string(),title:O.string(),description:O.string().nullable(),status:O.enum(Gl.PendencyStatus),dueDate:O.date().nullable(),documentUrl:O.string(),userId:O.string(),createdAt:O.date(),updatedAt:O.date()}).nullable()}}},400:{description:"Invalid pendency ID format",summary:"Validation Error",content:{"application/json":{schema:O.object({errors:O.record(O.string(),O.string())})}}},404:{description:"Pendency not found with the provided ID",summary:"Pendency Not Found",content:{"application/json":{schema:O.object({message:O.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:O.object({message:O.string()})}}}}},zl={method:"put",path:"/pendency/{pendency_id}",tags:["Pendencies"],summary:"Update pendency",security:[{bearerAuth:[]}],request:{params:Wi.pick({id:!0}).transform(()=>({pendency_id:""})),body:{content:{"multipart/form-data":{schema:Wi.omit({id:!0})}}}},responses:{204:{description:"Pendency updated successfully",summary:"Pendency Updated"},400:{description:"Invalid input data or pendency does not exist",summary:"Validation Error",content:{"application/json":{schema:O.object({errors:O.record(O.string(),O.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:O.object({message:O.string()})}}}}},Hl={method:"delete",path:"/pendency/{pendency_id}",tags:["Pendencies"],summary:"Delete pendency",security:[{bearerAuth:[]}],request:{params:Lm},responses:{204:{description:"Pendency deleted successfully",summary:"Pendency Deleted"},400:{description:"Invalid pendency ID format",summary:"Validation Error",content:{"application/json":{schema:O.object({errors:O.record(O.string(),O.string())})}}},404:{description:"Pendency not found with the provided ID",summary:"Pendency Not Found",content:{"application/json":{schema:O.object({message:O.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:O.object({message:O.string()})}}}}};import v from"zod";import{extendZodWithOpenApi as Jb}from"@asteasolutions/zod-to-openapi";import Hm from"zod";Jb(Hm);var Vm=Hm.object({id:Hm.uuid()}),_i=class{constructor(e,r){this.postGraduateProgramRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=Vm.parse({id:e.params.id}),i=await this.postGraduateProgramRepository.findById(t);if(!i)throw new p("O programa de p\xF3s-gradua\xE7\xE3o n\xE3o existe.");return i.imageUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.imageUrl}),await this.postGraduateProgramRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as Yb}from"@asteasolutions/zod-to-openapi";import Zm from"zod";Yb(Zm);var Km=Zm.object({id:Zm.uuid()}),zi=class{constructor(e){this.postGraduateProgramRepository=e}async handle(e,r){try{let{id:t}=Km.parse({id:e.params.id}),i=await this.postGraduateProgramRepository.findById(t);if(!i)throw new p("Programa de p\xF3s-gradua\xE7\xE3o n\xE3o encontrado.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as Xb}from"@asteasolutions/zod-to-openapi";import dt from"zod";var $b=1,Qb=6;Xb(dt);var Jm=dt.object({page:dt.coerce.number().min(1).default($b),limit:dt.coerce.number().min(1).default(Qb),title:dt.string().optional(),description:dt.string().optional(),contact:dt.string().optional(),orderBy:dt.enum(["asc","desc"]).default("desc")}),Hi=class{constructor(e){this.postGraduateProgramRepository=e}async handle(e,r){try{let{limit:t,page:i,...n}=Jm.parse(e.query),s=i*t-t,[a,c]=await Promise.all([this.postGraduateProgramRepository.find({pagination:{offset:s,limit:t},filter:n}),this.postGraduateProgramRepository.count({filter:n})]),d=Math.max(Math.ceil(c/t),1);return r.status(200).json({page:i,totalPages:d,offset:s,limit:t,postGraduatePrograms:a})}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as eC}from"@asteasolutions/zod-to-openapi";import qe from"zod";var Zl=5,Vl=1024,tC=Vl*Vl,rC=Zl*tC;eC(qe);var Ym=qe.object({id:qe.uuid(),title:qe.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio.").optional(),description:qe.string().optional(),startDate:qe.coerce.date().optional(),endDate:qe.coerce.date().optional(),contact:qe.string().min(1,"Contato \xE9 obrigat\xF3rio.").optional(),registrationLink:qe.url("URL de inscri\xE7\xE3o deve ser v\xE1lida").optional(),image:qe.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=rC,`A imagem deve ter no m\xE1ximo ${Zl}MB.`).optional()}),Vi=class{constructor(e,r){this.postGraduateProgramRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,image:i,title:n,description:s,startDate:a,endDate:c,contact:d,registrationLink:h}=Ym.parse({id:e.params.id,...e.body,image:e.file}),j=await this.postGraduateProgramRepository.findById(t);if(!j)throw new p("O programa de p\xF3s-gradua\xE7\xE3o n\xE3o existe.");let q=j.imageUrl;if(i&&(q=await this.firebaseStorageService.uploadFile({file:i,id:t,folder:M.POST_GRADUATE_PROGRAM})),!q)throw new m("URL da imagem \xE9 obrigat\xF3rio");return await this.postGraduateProgramRepository.update({id:t,title:n,description:s,startDate:a,endDate:c,contact:d,registrationLink:h,imageUrl:q}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var Kl={method:"post",path:"/post-graduate-programs",tags:["Post Graduate Programs"],summary:"Create post-graduate program",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:v.object({title:v.string().min(1).openapi({description:"T\xEDtulo do programa"}),description:v.string().optional().openapi({description:"Descri\xE7\xE3o do programa"}),startDate:v.string().openapi({description:"Data de in\xEDcio (ISO 8601)",example:"2024-01-01T10:00:00Z"}),endDate:v.string().openapi({description:"Data de t\xE9rmino (ISO 8601)",example:"2024-12-31T10:00:00Z"}),contact:v.string().min(1).openapi({description:"Informa\xE7\xF5es de contato"}),registrationLink:v.string().url().optional().openapi({description:"Link de inscri\xE7\xE3o"}),image:v.string().optional().openapi({description:"Imagem do programa (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{201:{description:"Post-graduate program created successfully",summary:"Program Created"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:v.object({errors:v.record(v.string(),v.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:v.object({message:v.string()})}}}}},Jl={method:"get",path:"/post-graduate-programs",tags:["Post Graduate Programs"],summary:"List post-graduate programs",security:[{bearerAuth:[]}],request:{query:Jm},responses:{200:{description:"Paginated list of post-graduate programs retrieved successfully",summary:"Programs Retrieved",content:{"application/json":{schema:v.object({page:v.number(),totalPages:v.number(),offset:v.number(),limit:v.number(),postGraduatePrograms:v.array(v.object({id:v.string(),title:v.string(),imageUrl:v.string().nullable(),description:v.string().nullable(),startDate:v.date(),endDate:v.date(),contact:v.string(),registrationLink:v.string().nullable(),createdAt:v.date(),updatedAt:v.date()}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:v.object({errors:v.record(v.string(),v.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:v.object({message:v.string()})}}}}},Yl={method:"get",path:"/post-graduate-programs/{id}",tags:["Post Graduate Programs"],summary:"Find post-graduate program by ID",security:[{bearerAuth:[]}],request:{params:Km},responses:{200:{description:"Post-graduate program details retrieved successfully",summary:"Program Retrieved",content:{"application/json":{schema:v.object({id:v.string(),title:v.string(),imageUrl:v.string().nullable(),description:v.string().nullable(),startDate:v.date(),endDate:v.date(),contact:v.string(),registrationLink:v.string().nullable(),createdAt:v.date(),updatedAt:v.date()}).nullable()}}},400:{description:"Invalid program ID format",summary:"Validation Error",content:{"application/json":{schema:v.object({errors:v.record(v.string(),v.string())})}}},404:{description:"Post-graduate program not found with the provided ID",summary:"Program Not Found",content:{"application/json":{schema:v.object({message:v.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:v.object({message:v.string()})}}}}},Xl={method:"put",path:"/post-graduate-programs/{id}",tags:["Post Graduate Programs"],summary:"Update post-graduate program",security:[{bearerAuth:[]}],request:{params:Ym.pick({id:!0}),body:{content:{"multipart/form-data":{schema:v.object({title:v.string().min(1).optional().openapi({description:"T\xEDtulo do programa"}),description:v.string().optional().openapi({description:"Descri\xE7\xE3o do programa"}),startDate:v.string().optional().openapi({description:"Data de in\xEDcio (ISO 8601)",example:"2024-01-01T10:00:00Z"}),endDate:v.string().optional().openapi({description:"Data de t\xE9rmino (ISO 8601)",example:"2024-12-31T10:00:00Z"}),contact:v.string().min(1).optional().openapi({description:"Informa\xE7\xF5es de contato"}),registrationLink:v.string().url().optional().openapi({description:"Link de inscri\xE7\xE3o"}),image:v.string().optional().openapi({description:"Imagem do programa (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{200:{description:"Post-graduate program updated successfully",summary:"Program Updated"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:v.object({errors:v.record(v.string(),v.string())})}}},404:{description:"Post-graduate program not found with the provided ID",summary:"Program Not Found",content:{"application/json":{schema:v.object({message:v.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:v.object({message:v.string()})}}}}},$l={method:"delete",path:"/post-graduate-programs/{id}",tags:["Post Graduate Programs"],summary:"Delete post-graduate program",security:[{bearerAuth:[]}],request:{params:Vm},responses:{200:{description:"Post-graduate program deleted successfully",summary:"Program Deleted"},400:{description:"Invalid program ID format",summary:"Validation Error",content:{"application/json":{schema:v.object({errors:v.record(v.string(),v.string())})}}},404:{description:"Post-graduate program not found with the provided ID",summary:"Program Not Found",content:{"application/json":{schema:v.object({message:v.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:v.object({message:v.string()})}}}}};import{RegimentStatus as RC}from"@prisma/client";import B from"zod";import{extendZodWithOpenApi as oC}from"@asteasolutions/zod-to-openapi";import{RegimentStatus as eu}from"@prisma/client";import vt from"zod";var tu=10,Ql=1024,iC=Ql*Ql,nC=tu*iC;oC(vt);var Xm=vt.object({title:vt.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio"),version:vt.string().min(1,"Vers\xE3o \xE9 obrigat\xF3ria"),publishedAt:vt.coerce.date(),document:vt.any().refine(o=>o==null||typeof o!="object"||typeof o.size!="number"?!1:o.size<=nC,`O documento deve ter no m\xE1ximo ${tu}MB.`),status:vt.enum(eu).optional()}),Zi=class{constructor(e,r){this.regimentRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{title:t,version:i,publishedAt:n,document:s,status:a}=Xm.parse({...e.body,document:e.file}),c=await this.regimentRepository.create({title:t,version:i,publishedAt:n,documentUrl:"",status:a??eu.IN_FORCE}),d=await this.firebaseStorageService.uploadFile({file:s,id:c.id,folder:M.REGIMENT});return await this.regimentRepository.update({id:c.id,documentUrl:d}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as sC}from"@asteasolutions/zod-to-openapi";import $m from"zod";sC($m);var Qm=$m.object({id:$m.uuid()}),Ki=class{constructor(e,r){this.regimentRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=Qm.parse({id:e.params.id}),i=await this.regimentRepository.findById(t);if(!i)throw new p("O regimento n\xE3o existe.");return i.documentUrl&&await this.firebaseStorageService.deleteFile({fileUrl:i.documentUrl}),await this.regimentRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as aC}from"@asteasolutions/zod-to-openapi";import ec from"zod";aC(ec);var Yi=ec.object({id:ec.uuid()}),Ji=class{constructor(e){this.regimentRepository=e}async handle(e,r){try{let{id:t}=Yi.parse({id:e.params.id}),i=await this.regimentRepository.findById(t);if(!i)throw new p("O regimento n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as mC}from"@asteasolutions/zod-to-openapi";import{RegimentStatus as cC}from"@prisma/client";import tc from"zod";mC(tc);var rc=tc.object({status:tc.enum(cC)}),Xi=class{constructor(e){this.regimentRepository=e}async handle(e,r){try{let{status:t}=rc.parse({status:e.params.status}),i=await this.regimentRepository.findByStatus(t);return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as pC}from"@asteasolutions/zod-to-openapi";import{RegimentStatus as dC}from"@prisma/client";import Et from"zod";var lC=1,uC=10;pC(Et);var oc=Et.object({page:Et.coerce.number().min(1).default(lC),limit:Et.coerce.number().min(1).default(uC),title:Et.string().optional(),status:Et.enum(dC).optional(),orderBy:Et.enum(["asc","desc"]).optional()}),$i=class{constructor(e){this.regimentRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=oc.parse(e.query),s=i*t-i,[a,c]=await Promise.all([this.regimentRepository.find({pagination:{offset:s,limit:i},filter:n}),this.regimentRepository.count({filter:n})]),d=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:d,offset:s,limit:i,regiments:a})}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as gC}from"@asteasolutions/zod-to-openapi";import{RegimentStatus as fC}from"@prisma/client";import lt from"zod";var ou=10,ru=1024,yC=ru*ru,hC=ou*yC;gC(lt);var ic=lt.object({id:lt.uuid(),title:lt.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio").optional(),version:lt.string().min(1,"Vers\xE3o \xE9 obrigat\xF3ria").optional(),publishedAt:lt.coerce.date().optional(),document:lt.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=hC,`O documento deve ter no m\xE1ximo ${ou}MB.`).optional(),status:lt.enum(fC).optional()}),Qi=class{constructor(e,r){this.regimentRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,title:i,version:n,publishedAt:s,document:a,status:c}=ic.parse({id:e.params.id,...e.body,document:e.file}),d=await this.regimentRepository.findById(t);if(!d)throw new p("O regimento n\xE3o existe.");let h=d.documentUrl;return a&&(d.documentUrl&&await this.firebaseStorageService.deleteFile({fileUrl:d.documentUrl}),h=await this.firebaseStorageService.uploadFile({file:a,id:t,folder:M.REGIMENT})),await this.regimentRepository.update({id:t,title:i,version:n,publishedAt:s,documentUrl:h??void 0,status:c}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var nc=B.object({id:B.uuid(),title:B.string(),version:B.string(),publishedAt:B.date(),documentUrl:B.string(),status:B.enum(RC),createdAt:B.date(),updatedAt:B.date()}),iu={method:"post",path:"/regiment",tags:["Regiments"],summary:"Create a new regiment with document upload",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:Xm}}}},responses:{201:{description:"Regiment created successfully",summary:"Regiment Created"},400:{description:"Invalid input data, missing required fields, or invalid document format/size",summary:"Validation Error",content:{"application/json":{schema:B.object({errors:B.record(B.string(),B.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:B.object({message:B.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:B.object({message:B.string()})}}}}},nu={method:"get",path:"/regiment",tags:["Regiments"],summary:"List all regiments with pagination and filters",request:{query:oc},responses:{200:{description:"List of regiments retrieved successfully with pagination",summary:"Regiments Retrieved",content:{"application/json":{schema:B.object({page:B.number(),totalPages:B.number(),offset:B.number(),limit:B.number(),regiments:B.array(nc)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:B.object({errors:B.record(B.string(),B.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:B.object({message:B.string()})}}}}},su={method:"get",path:"/regiment/{id}",tags:["Regiments"],summary:"Find regiment by ID",request:{params:Yi},responses:{200:{description:"Regiment details retrieved successfully",summary:"Regiment Retrieved",content:{"application/json":{schema:nc}}},400:{description:"Invalid regiment ID format",summary:"Validation Error",content:{"application/json":{schema:B.object({errors:B.record(B.string(),B.string())})}}},404:{description:"Regiment not found with the provided ID",summary:"Regiment Not Found",content:{"application/json":{schema:B.object({message:B.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:B.object({message:B.string()})}}}}},au={method:"get",path:"/regiment/status/{status}",tags:["Regiments"],summary:"Find regiments by status",request:{params:rc},responses:{200:{description:"Regiments retrieved successfully by status",summary:"Regiments Retrieved by Status",content:{"application/json":{schema:B.array(nc)}}},400:{description:"Invalid status parameter provided",summary:"Validation Error",content:{"application/json":{schema:B.object({errors:B.record(B.string(),B.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:B.object({message:B.string()})}}}}},mu={method:"put",path:"/regiment/{id}",tags:["Regiments"],summary:"Update regiment with optional document upload",security:[{bearerAuth:[]}],request:{params:Yi,body:{content:{"multipart/form-data":{schema:ic.omit({id:!0})}}}},responses:{200:{description:"Regiment updated successfully",summary:"Regiment Updated"},400:{description:"Invalid input data, regiment ID format, or invalid document format/size",summary:"Validation Error",content:{"application/json":{schema:B.object({errors:B.record(B.string(),B.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:B.object({message:B.string()})}}},404:{description:"Regiment not found with the provided ID",summary:"Regiment Not Found",content:{"application/json":{schema:B.object({message:B.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:B.object({message:B.string()})}}}}},cu={method:"delete",path:"/regiment/{id}",tags:["Regiments"],summary:"Delete regiment",security:[{bearerAuth:[]}],request:{params:Qm},responses:{200:{description:"Regiment deleted successfully",summary:"Regiment Deleted"},400:{description:"Invalid regiment ID format",summary:"Validation Error",content:{"application/json":{schema:B.object({errors:B.record(B.string(),B.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:B.object({message:B.string()})}}},404:{description:"Regiment not found with the provided ID",summary:"Regiment Not Found",content:{"application/json":{schema:B.object({message:B.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:B.object({message:B.string()})}}}}};import J from"zod";import{extendZodWithOpenApi as IC}from"@asteasolutions/zod-to-openapi";import Fr from"zod";var du=5,pu=1024,bC=pu*pu,CC=du*bC;IC(Fr);var sc=Fr.object({caption:Fr.string().optional(),image:Fr.any().refine(o=>o==null||typeof o!="object"||typeof o.size!="number"?!1:o.size<=CC,`A imagem deve ter no m\xE1ximo ${du}MB.`),congressId:Fr.uuid()}),en=class{constructor(e,r,t){this.regionalCongressGalleryRepository=e;this.regionalCongressRepository=r;this.firebaseStorageService=t}async handle(e,r){try{let{caption:t,image:i,congressId:n}=sc.parse({...e.body,...e.params,image:e.file});if(!await this.regionalCongressRepository.findById(n))throw new p("O congresso n\xE3o existe.");let a=await this.regionalCongressGalleryRepository.create({caption:t,congressId:n,imageUrl:""}),c=await this.firebaseStorageService.uploadFile({file:i,id:a.id,folder:M.GALLERY});return await this.regionalCongressGalleryRepository.update({id:a.id,imageUrl:c}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as SC}from"@asteasolutions/zod-to-openapi";import ac from"zod";SC(ac);var rn=ac.object({id:ac.uuid("ID inv\xE1lido")}),tn=class{constructor(e){this.regionalCongressGalleryRepository=e}async handle(e,r){try{let{id:t}=rn.parse(e.params);if(!await this.regionalCongressGalleryRepository.findById(t))throw new p("Item de galeria n\xE3o encontrado");return await this.regionalCongressGalleryRepository.deleteById(t),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as wC}from"@asteasolutions/zod-to-openapi";import tr from"zod";wC(tr);var mc=tr.object({congressId:tr.uuid("ID do congresso inv\xE1lido"),page:tr.coerce.number().int().positive().default(1),limit:tr.coerce.number().int().positive().default(10),caption:tr.string().optional()}),on=class{constructor(e){this.regionalCongressGalleryRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=mc.parse({...e.params,...e.query}),s=(t-1)*i,a=await this.regionalCongressGalleryRepository.findByCongressId({pagination:{offset:s,limit:i},filter:n});if(!a)throw new p("Itens de galeria n\xE3o encontrados");let c=await this.regionalCongressGalleryRepository.count({filter:n});return r.status(200).json({data:a,pagination:{page:t,limit:i,total:c,totalPages:Math.ceil(c/i)}})}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as vC}from"@asteasolutions/zod-to-openapi";import Br from"zod";var uu=5,lu=1024,EC=lu*lu,jC=uu*EC;vC(Br);var cc=Br.object({id:Br.string().uuid("ID inv\xE1lido"),caption:Br.string().optional(),image:Br.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=jC,`A imagem deve ter no m\xE1ximo ${uu}MB.`).optional()}),nn=class{constructor(e,r){this.regionalCongressGalleryRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,caption:i,image:n}=cc.parse({...e.params,...e.body,image:e.file});if(!await this.regionalCongressGalleryRepository.findById(t))throw new p("Item de galeria n\xE3o encontrado");let a;return n&&(a=await this.firebaseStorageService.uploadFile({file:n,id:t,folder:M.GALLERY})),await this.regionalCongressGalleryRepository.update({id:t,caption:i,...a&&{imageUrl:a}}),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var xC=J.object({id:J.uuid(),imageUrl:J.string(),caption:J.string().nullable(),congressId:J.uuid()}),gu={method:"post",path:"/regional-congress/{congressId}/gallery",tags:["Regional Congresses"],summary:"Create a new congress gallery image",security:[{bearerAuth:[]}],request:{params:J.object({congressId:J.uuid()}),body:{content:{"application/json":{schema:sc.omit({congressId:!0})}}}},responses:{201:{description:"Congress gallery image created successfully",summary:"Congress Gallery Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:J.object({errors:J.record(J.string(),J.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:J.object({message:J.string()})}}},404:{description:"Congress not found with the provided ID",summary:"Congress Not Found",content:{"application/json":{schema:J.object({message:J.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:J.object({message:J.string()})}}}}},fu={method:"get",path:"/regional-congress/{congressId}/gallery",tags:["Regional Congresses"],summary:"Find congress gallery images by congress ID",request:{params:mc},responses:{200:{description:"Congress gallery images retrieved successfully by congress ID",summary:"Congress Galleries Retrieved",content:{"application/json":{schema:J.array(xC)}}},400:{description:"Invalid congress ID parameter provided",summary:"Validation Error",content:{"application/json":{schema:J.object({errors:J.record(J.string(),J.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:J.object({message:J.string()})}}}}},yu={method:"put",path:"/regional-congress/gallery/{id}",tags:["Regional Congresses"],summary:"Update congress gallery image",security:[{bearerAuth:[]}],request:{params:rn,body:{content:{"application/json":{schema:cc.omit({id:!0})}}}},responses:{200:{description:"Congress gallery image updated successfully",summary:"Congress Gallery Updated"},400:{description:"Invalid input data or gallery ID format",summary:"Validation Error",content:{"application/json":{schema:J.object({errors:J.record(J.string(),J.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:J.object({message:J.string()})}}},404:{description:"Congress gallery image not found with the provided ID",summary:"Congress Gallery Not Found",content:{"application/json":{schema:J.object({message:J.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:J.object({message:J.string()})}}}}},hu={method:"delete",path:"/regional-congress/gallery/{id}",tags:["Regional Congresses"],summary:"Delete congress gallery image",security:[{bearerAuth:[]}],request:{params:rn},responses:{200:{description:"Congress gallery image deleted successfully",summary:"Congress Gallery Deleted"},400:{description:"Invalid gallery ID format",summary:"Validation Error",content:{"application/json":{schema:J.object({errors:J.record(J.string(),J.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:J.object({message:J.string()})}}},404:{description:"Congress gallery image not found with the provided ID",summary:"Congress Gallery Not Found",content:{"application/json":{schema:J.object({message:J.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:J.object({message:J.string()})}}}}};import Y from"zod";import{extendZodWithOpenApi as MC}from"@asteasolutions/zod-to-openapi";import Ur from"zod";var Iu=2,Ru=1024,PC=Ru*Ru,AC=Iu*PC;MC(Ur);var pc=Ur.object({name:Ur.string().min(1,"Nome \xE9 obrigat\xF3rio"),logo:Ur.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=AC,`A imagem deve ter no m\xE1ximo ${Iu}MB.`).optional(),congressId:Ur.uuid()}),sn=class{constructor(e,r,t){this.regionalCongressPartnerRepository=e;this.regionalCongressRepository=r;this.firebaseStorageService=t}async handle(e,r){try{let{name:t,logo:i,congressId:n}=pc.parse({...e.body,...e.params,logo:e.file});if(!await this.regionalCongressRepository.findById(n))throw new p("O congresso n\xE3o existe.");let a=await this.regionalCongressPartnerRepository.create({name:t,congressId:n}),c;return i&&(c=await this.firebaseStorageService.uploadFile({file:i,id:a.id,folder:M.PARTNER}),await this.regionalCongressPartnerRepository.update({id:a.id,logoUrl:c})),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as TC}from"@asteasolutions/zod-to-openapi";import dc from"zod";TC(dc);var mn=dc.object({id:dc.string().uuid("ID inv\xE1lido")}),an=class{constructor(e){this.regionalCongressPartnerRepository=e}async handle(e,r){try{let{id:t}=mn.parse(e.params);if(!await this.regionalCongressPartnerRepository.findById(t))throw new p("Parceiro n\xE3o encontrado");return await this.regionalCongressPartnerRepository.deleteById(t),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as DC}from"@asteasolutions/zod-to-openapi";import rr from"zod";DC(rr);var lc=rr.object({congressId:rr.uuid("ID do congresso inv\xE1lido"),page:rr.coerce.number().int().positive().optional(),limit:rr.coerce.number().int().positive().optional(),name:rr.string().optional()}),cn=class{constructor(e){this.regionalCongressPartnerRepository=e}async handle(e,r){try{let{congressId:t,page:i,limit:n,name:s}=lc.parse({...e.params,...e.query}),a=i!==void 0&&n!==void 0,c=a?{offset:(i-1)*n,limit:n}:void 0,d=await this.regionalCongressPartnerRepository.findByCongressId({pagination:c,filter:{congressId:t,name:s}});if(!d)throw new p("Parceiros n\xE3o encontrados");if(!a)return r.status(200).json(d);let h=await this.regionalCongressPartnerRepository.count({filter:{congressId:t,name:s}});return r.status(200).json({data:d,pagination:{page:i,limit:n,total:h,totalPages:Math.ceil(h/n)}})}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as FC}from"@asteasolutions/zod-to-openapi";import qr from"zod";var Cu=2,bu=1024,BC=bu*bu,UC=Cu*BC;FC(qr);var uc=qr.object({id:qr.string().uuid("ID inv\xE1lido"),name:qr.string().min(1,"Nome \xE9 obrigat\xF3rio").optional(),logo:qr.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=UC,`A imagem deve ter no m\xE1ximo ${Cu}MB.`).optional()}),pn=class{constructor(e,r){this.regionalCongressPartnerRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,name:i,logo:n}=uc.parse({...e.params,...e.body,logo:e.file});if(!await this.regionalCongressPartnerRepository.findById(t))throw new p("Parceiro n\xE3o encontrado");let a;return n&&(a=await this.firebaseStorageService.uploadFile({file:n,id:t,folder:M.PARTNER})),await this.regionalCongressPartnerRepository.update({id:t,name:i,...a&&{logoUrl:a}}),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var qC=Y.object({id:Y.uuid(),name:Y.string(),logoUrl:Y.string().nullable(),congressId:Y.uuid()}),Su={method:"post",path:"/regional-congress/{congressId}/partner",tags:["Regional Congresses"],summary:"Create a new congress partner",security:[{bearerAuth:[]}],request:{params:Y.object({congressId:Y.uuid()}),body:{content:{"application/json":{schema:pc.omit({congressId:!0})}}}},responses:{201:{description:"Congress partner created successfully",summary:"Congress Partner Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:Y.object({errors:Y.record(Y.string(),Y.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:Y.object({message:Y.string()})}}},404:{description:"Congress not found with the provided ID",summary:"Congress Not Found",content:{"application/json":{schema:Y.object({message:Y.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Y.object({message:Y.string()})}}}}},wu={method:"get",path:"/regional-congress/{congressId}/partner",tags:["Regional Congresses"],summary:"Find congress partners by congress ID",request:{params:lc},responses:{200:{description:"Congress partners retrieved successfully by congress ID",summary:"Congress Partners Retrieved",content:{"application/json":{schema:Y.array(qC)}}},400:{description:"Invalid congress ID parameter provided",summary:"Validation Error",content:{"application/json":{schema:Y.object({errors:Y.record(Y.string(),Y.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Y.object({message:Y.string()})}}}}},vu={method:"put",path:"/regional-congress/partner/{id}",tags:["Regional Congresses"],summary:"Update congress partner",security:[{bearerAuth:[]}],request:{params:mn,body:{content:{"application/json":{schema:uc.omit({id:!0})}}}},responses:{200:{description:"Congress partner updated successfully",summary:"Congress Partner Updated"},400:{description:"Invalid input data or partner ID format",summary:"Validation Error",content:{"application/json":{schema:Y.object({errors:Y.record(Y.string(),Y.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:Y.object({message:Y.string()})}}},404:{description:"Congress partner not found with the provided ID",summary:"Congress Partner Not Found",content:{"application/json":{schema:Y.object({message:Y.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Y.object({message:Y.string()})}}}}},Eu={method:"delete",path:"/regional-congress/partner/{id}",tags:["Regional Congresses"],summary:"Delete congress partner",security:[{bearerAuth:[]}],request:{params:mn},responses:{200:{description:"Congress partner deleted successfully",summary:"Congress Partner Deleted"},400:{description:"Invalid partner ID format",summary:"Validation Error",content:{"application/json":{schema:Y.object({errors:Y.record(Y.string(),Y.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:Y.object({message:Y.string()})}}},404:{description:"Congress partner not found with the provided ID",summary:"Congress Partner Not Found",content:{"application/json":{schema:Y.object({message:Y.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Y.object({message:Y.string()})}}}}};import g from"zod";import{extendZodWithOpenApi as kC}from"@asteasolutions/zod-to-openapi";import te from"zod";kC(te);var gc=te.object({title:te.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio"),edition:te.coerce.number().int().positive("Edi\xE7\xE3o deve ser um n\xFAmero positivo"),startDate:te.coerce.date(),endDate:te.coerce.date(),description:te.string().optional(),location:te.string().optional(),congressLink:te.union([te.url("Link do congresso deve ser uma URL v\xE1lida"),te.literal("")]),noticeUrl:te.union([te.url("URL do edital deve ser uma URL v\xE1lida"),te.literal("")]),scheduleUrl:te.union([te.url("URL do cronograma deve ser uma URL v\xE1lida"),te.literal("")]),programUrl:te.union([te.url("URL da programa\xE7\xE3o deve ser uma URL v\xE1lida"),te.literal("")]),adminReportUrl:te.union([te.url("URL do relat\xF3rio administrativo deve ser uma URL v\xE1lida"),te.literal("")]),proceedingsUrl:te.union([te.url("URL dos anais deve ser uma URL v\xE1lida"),te.literal("")])}).refine(o=>o.endDate>=o.startDate,{message:"Data de t\xE9rmino deve ser posterior ou igual \xE0 data de in\xEDcio",path:["endDate"]}),dn=class{constructor(e){this.regionalCongressRepository=e}async handle(e,r){try{let t=gc.parse(e.body);return await this.regionalCongressRepository.create(t),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as OC}from"@asteasolutions/zod-to-openapi";import fc from"zod";OC(fc);var yc=fc.object({id:fc.string().uuid("ID inv\xE1lido")}),ln=class{constructor(e){this.regionalCongressRepository=e}async handle(e,r){try{let{id:t}=yc.parse(e.params);if(!await this.regionalCongressRepository.findById(t))throw new p("Congresso regional n\xE3o encontrado");return await this.regionalCongressRepository.deleteById(t),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as NC}from"@asteasolutions/zod-to-openapi";import hc from"zod";NC(hc);var Rc=hc.object({edition:hc.coerce.number().int().positive("Edi\xE7\xE3o deve ser um n\xFAmero positivo")}),un=class{constructor(e){this.regionalCongressRepository=e}async handle(e,r){try{let{edition:t}=Rc.parse(e.params),i=await this.regionalCongressRepository.findByEdition(t);if(!i||i.length===0)throw new p("Congresso regional n\xE3o encontrado");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as GC}from"@asteasolutions/zod-to-openapi";import Ic from"zod";GC(Ic);var fn=Ic.object({id:Ic.string().uuid("ID inv\xE1lido")}),gn=class{constructor(e){this.regionalCongressRepository=e}async handle(e,r){try{let{id:t}=fn.parse(e.params),i=await this.regionalCongressRepository.findById(t);if(!i)throw new p("Congresso regional n\xE3o encontrado");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as LC}from"@asteasolutions/zod-to-openapi";import ut from"zod";LC(ut);var bc=ut.object({page:ut.coerce.number().int().positive().default(1),limit:ut.coerce.number().int().positive().default(10),title:ut.string().optional(),edition:ut.coerce.number().int().positive().optional(),location:ut.string().optional(),orderBy:ut.enum(["asc","desc"]).optional().default("desc")}),yn=class{constructor(e){this.regionalCongressRepository=e}async handle(e,r){try{let{page:t,limit:i,orderBy:n,...s}=bc.parse(e.query),a=(t-1)*i,c=await this.regionalCongressRepository.find({pagination:{offset:a,limit:i},filter:{...s,orderBy:n}});if(!c)throw new p("Congressos regionais n\xE3o encontrados");let d=await this.regionalCongressRepository.count({filter:s});return r.status(200).json({data:c,pagination:{page:t,limit:i,total:d,totalPages:Math.ceil(d/i)}})}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as WC}from"@asteasolutions/zod-to-openapi";import ee from"zod";WC(ee);var Cc=ee.object({id:ee.string().uuid("ID inv\xE1lido"),title:ee.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio").optional(),edition:ee.coerce.number().int().positive("Edi\xE7\xE3o deve ser um n\xFAmero positivo").optional(),startDate:ee.coerce.date().optional(),endDate:ee.coerce.date().optional(),description:ee.string().optional(),location:ee.string().optional(),congressLink:ee.union([ee.url("Link do congresso deve ser uma URL v\xE1lida"),ee.literal("")]),noticeUrl:ee.union([ee.url("URL do edital deve ser uma URL v\xE1lida"),ee.literal("")]),scheduleUrl:ee.union([ee.url("URL do cronograma deve ser uma URL v\xE1lida"),ee.literal("")]),programUrl:ee.union([ee.url("URL da programa\xE7\xE3o deve ser uma URL v\xE1lida"),ee.literal("")]),adminReportUrl:ee.union([ee.url("URL do relat\xF3rio administrativo deve ser uma URL v\xE1lida"),ee.literal("")]),proceedingsUrl:ee.union([ee.url("URL dos anais deve ser uma URL v\xE1lida"),ee.literal("")])}).refine(o=>o.startDate&&o.endDate?o.endDate>=o.startDate:!0,{message:"Data de t\xE9rmino deve ser posterior ou igual \xE0 data de in\xEDcio",path:["endDate"]}),hn=class{constructor(e){this.regionalCongressRepository=e}async handle(e,r){try{let{id:t}=ee.object({id:ee.string().uuid()}).parse(e.params);if(!await this.regionalCongressRepository.findById(t))throw new p("Congresso regional n\xE3o encontrado");let n=Cc.parse({id:t,...e.body});return await this.regionalCongressRepository.update(n),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var _C=9,zC=g.object({image:g.any().openapi({type:"string",format:"binary"}),caption:g.string().optional()}),HC=g.object({image:g.any().openapi({type:"string",format:"binary"}).optional(),caption:g.string().optional()}),VC=g.object({id:g.uuid(),name:g.string(),logoUrl:g.string().nullable(),congressId:g.uuid()}),Sc=g.object({id:g.uuid(),imageUrl:g.string(),caption:g.string().nullable(),congressId:g.uuid()}),wc=g.object({id:g.uuid(),title:g.string(),edition:g.number(),startDate:g.date(),endDate:g.date(),description:g.string().nullable(),location:g.string().nullable(),congressLink:g.string().nullable(),noticeUrl:g.string().nullable(),scheduleUrl:g.string().nullable(),programUrl:g.string().nullable(),adminReportUrl:g.string().nullable(),proceedingsUrl:g.string().nullable(),partners:g.array(VC),galleries:g.array(Sc),createdAt:g.date(),updatedAt:g.date()}),ju={method:"post",path:"/regional-congress",tags:["Regional Congresses"],summary:"Create a new regional congress",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:gc}}}},responses:{201:{description:"Regional congress created successfully",summary:"Regional Congress Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:g.object({message:g.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}},xu={method:"get",path:"/regional-congress",tags:["Regional Congresses"],summary:"List all regional congresses with pagination and filters",request:{query:bc},responses:{200:{description:"List of regional congresses retrieved successfully with pagination",summary:"Regional Congresses Retrieved",content:{"application/json":{schema:g.object({page:g.number(),totalPages:g.number(),offset:g.number(),limit:g.number(),congresses:g.array(wc)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}},Mu={method:"get",path:"/regional-congress/{id}",tags:["Regional Congresses"],summary:"Find regional congress by ID",request:{params:fn},responses:{200:{description:"Regional congress details retrieved successfully",summary:"Regional Congress Retrieved",content:{"application/json":{schema:wc}}},400:{description:"Invalid regional congress ID format",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},404:{description:"Regional congress not found with the provided ID",summary:"Regional Congress Not Found",content:{"application/json":{schema:g.object({message:g.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}},Pu={method:"get",path:"/regional-congress/edition/{edition}",tags:["Regional Congresses"],summary:"Find regional congresses by edition",request:{params:Rc},responses:{200:{description:"Regional congresses retrieved successfully by edition",summary:"Regional Congresses Retrieved by Edition",content:{"application/json":{schema:g.array(wc)}}},400:{description:"Invalid edition parameter provided",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}},Au={method:"put",path:"/regional-congress/{id}",tags:["Regional Congresses"],summary:"Update regional congress",security:[{bearerAuth:[]}],request:{params:fn,body:{content:{"application/json":{schema:Cc.omit({id:!0})}}}},responses:{200:{description:"Regional congress updated successfully",summary:"Regional Congress Updated"},400:{description:"Invalid input data or regional congress ID format",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:g.object({message:g.string()})}}},404:{description:"Regional congress not found with the provided ID",summary:"Regional Congress Not Found",content:{"application/json":{schema:g.object({message:g.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}},Tu={method:"delete",path:"/regional-congress/{id}",tags:["Regional Congresses"],summary:"Delete regional congress",security:[{bearerAuth:[]}],request:{params:yc},responses:{200:{description:"Regional congress deleted successfully",summary:"Regional Congress Deleted"},400:{description:"Invalid regional congress ID format",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:g.object({message:g.string()})}}},404:{description:"Regional congress not found with the provided ID",summary:"Regional Congress Not Found",content:{"application/json":{schema:g.object({message:g.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}},LO={method:"post",path:"/regional-congress/{congressId}/gallery",tags:["Regional Congress Gallery"],summary:"Create a new gallery image for a congress",security:[{bearerAuth:[]}],request:{params:g.object({congressId:g.uuid()}),body:{content:{"multipart/form-data":{schema:zC}}}},responses:{201:{description:"Gallery image created successfully",summary:"Gallery Image Created"},400:{description:"Invalid input data, missing required fields, or invalid image format/size",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:g.object({message:g.string()})}}},404:{description:"Congress not found with the provided ID",summary:"Congress Not Found",content:{"application/json":{schema:g.object({message:g.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}},WO={method:"get",path:"/regional-congress/{congressId}/gallery",tags:["Regional Congress Gallery"],summary:"List all gallery images for a congress with pagination",request:{params:g.object({congressId:g.uuid()}),query:g.object({page:g.coerce.number().min(1).default(1),limit:g.coerce.number().min(1).default(_C),caption:g.string().optional()})},responses:{200:{description:"Gallery images retrieved successfully with pagination",summary:"Gallery Images Retrieved",content:{"application/json":{schema:g.object({page:g.number(),totalPages:g.number(),offset:g.number(),limit:g.number(),galleries:g.array(Sc)})}}},400:{description:"Invalid congress ID format or query parameters",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}},_O={method:"get",path:"/regional-congress/gallery/{id}",tags:["Regional Congress Gallery"],summary:"Find a gallery image by ID",request:{params:g.object({id:g.uuid()})},responses:{200:{description:"Gallery image retrieved successfully",summary:"Gallery Image Retrieved",content:{"application/json":{schema:Sc}}},400:{description:"Invalid gallery image ID format",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},404:{description:"Gallery image not found with the provided ID",summary:"Gallery Image Not Found",content:{"application/json":{schema:g.object({message:g.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}},zO={method:"put",path:"/regional-congress/gallery/{id}",tags:["Regional Congress Gallery"],summary:"Update a gallery image with optional image upload",security:[{bearerAuth:[]}],request:{params:g.object({id:g.uuid()}),body:{content:{"multipart/form-data":{schema:HC}}}},responses:{200:{description:"Gallery image updated successfully",summary:"Gallery Image Updated"},400:{description:"Invalid input data, gallery ID format, or invalid image format/size",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:g.object({message:g.string()})}}},404:{description:"Gallery image not found with the provided ID",summary:"Gallery Image Not Found",content:{"application/json":{schema:g.object({message:g.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}},HO={method:"delete",path:"/regional-congress/gallery/{id}",tags:["Regional Congress Gallery"],summary:"Delete a gallery image",security:[{bearerAuth:[]}],request:{params:g.object({id:g.uuid()})},responses:{200:{description:"Gallery image deleted successfully",summary:"Gallery Image Deleted"},400:{description:"Invalid gallery ID format",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:g.object({message:g.string()})}}},404:{description:"Gallery image not found with the provided ID",summary:"Gallery Image Not Found",content:{"application/json":{schema:g.object({message:g.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}};import{$Enums as Tc}from"@prisma/client";import b from"zod";import{extendZodWithOpenApi as ZC}from"@asteasolutions/zod-to-openapi";import{Degree as KC,Seniority as JC}from"@prisma/client";import Se from"zod";ZC(Se);var vc=Se.object({registrationNumber:Se.string(),mainEtps:Se.string().optional(),formations:Se.string().optional(),degrees:Se.array(Se.enum(KC)),occupations:Se.string(),seniority:Se.enum(JC),institutions:Se.string(),biography:Se.string().optional(),userId:Se.string()}),Rn=class{constructor(e){this.researcherRepository=e}async handle(e,r){try{let{registrationNumber:t,mainEtps:i,formations:n,degrees:s,occupations:a,seniority:c,institutions:d,biography:h,userId:j}=vc.parse(e.body);if(await this.researcherRepository.findByRegistrationNumber(t))throw new ie("J\xE1 existe um pesquisador cadastrado com este n\xFAmero de registro.");if(await this.researcherRepository.findByUserId(j))throw new ie("Usu\xE1rio j\xE1 possui um perfil de pesquisador.");return await this.researcherRepository.create({registrationNumber:t,mainEtps:i,formations:n,degrees:s,occupations:a,seniority:c,institutions:d,biography:h,userId:j}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as YC}from"@asteasolutions/zod-to-openapi";import Ec from"zod";YC(Ec);var jc=Ec.object({id:Ec.uuid()}),In=class{constructor(e){this.researcherRepository=e}async handle(e,r){try{let{id:t}=jc.parse({id:e.params.id});if(!await this.researcherRepository.findById(t))throw new p("O pesquisador n\xE3o existe.");return await this.researcherRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as XC}from"@asteasolutions/zod-to-openapi";import xc from"zod";XC(xc);var Cn=xc.object({id:xc.uuid()}),bn=class{constructor(e){this.researcherRepository=e}async handle(e,r){try{let{id:t}=Cn.parse({id:e.params.id}),i=await this.researcherRepository.findById(t);if(!i)throw new p("O pesquisador n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as $C}from"@asteasolutions/zod-to-openapi";import Mc from"zod";$C(Mc);var Pc=Mc.object({userId:Mc.uuid()}),Sn=class{constructor(e){this.researcherRepository=e}async handle(e,r){try{let{userId:t}=Pc.parse({userId:e.params.userId}),i=await this.researcherRepository.findByUserId(t);if(!i)throw new p("O pesquisador n\xE3o existe para este usu\xE1rio.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as QC}from"@asteasolutions/zod-to-openapi";import{Degree as eS,Seniority as tS}from"@prisma/client";import we from"zod";QC(we);var Ac=we.object({id:we.uuid(),registrationNumber:we.string().optional(),mainEtps:we.string().optional(),formations:we.string().optional(),degrees:we.array(we.enum(eS)).optional(),occupations:we.string().optional(),seniority:we.enum(tS).optional(),institutions:we.string().optional(),biography:we.string().optional()}),wn=class{constructor(e){this.researcherRepository=e}async handle(e,r){try{let{id:t,registrationNumber:i,mainEtps:n,formations:s,degrees:a,occupations:c,seniority:d,institutions:h,biography:j}=Ac.parse({id:e.params.id,...e.body}),q=await this.researcherRepository.findById(t);if(!q)throw new p("O pesquisador n\xE3o existe.");if(i&&i!==q.registrationNumber){let X=await this.researcherRepository.findByRegistrationNumber(i);if(X&&X.id!==t)throw new ie("J\xE1 existe um pesquisador com este n\xFAmero de registro.")}return await this.researcherRepository.update({id:t,registrationNumber:i,mainEtps:n,formations:s,degrees:a,occupations:c,seniority:d,institutions:h,biography:j}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var rS=1,oS=9,Dc=b.object({id:b.uuid(),registrationNumber:b.string(),mainEtps:b.string().nullable(),formations:b.string().nullable(),degrees:b.array(b.enum(Tc.Degree)),occupations:b.string(),seniority:b.enum(Tc.Seniority),institutions:b.string(),biography:b.string().nullable(),createdAt:b.date(),updatedAt:b.date(),userId:b.uuid(),user:b.object({id:b.uuid(),name:b.string(),emailAddress:b.string(),avatarUrl:b.string().nullable(),orcid:b.string().nullable(),phone:b.string().nullable(),lattesUrl:b.string().nullable(),role:b.enum(Tc.UserRole)})}),Du={method:"post",path:"/researcher",tags:["Researchers"],summary:"Create a new researcher profile",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:vc}}}},responses:{201:{description:"Researcher profile created successfully",summary:"Researcher Created",content:{"application/json":{schema:b.object({message:b.string()})}}},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:b.object({errors:b.record(b.string(),b.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:b.object({message:b.string()})}}},409:{description:"Researcher with this registration number already exists or user already has a researcher profile",summary:"Conflict",content:{"application/json":{schema:b.object({message:b.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:b.object({message:b.string()})}}}}},Fu={method:"get",path:"/researcher",tags:["Researchers"],summary:"List all researchers with pagination and filters",request:{query:b.object({page:b.coerce.number().min(1).default(rS).optional(),limit:b.coerce.number().min(1).default(oS).optional(),userId:b.string().optional(),registrationNumber:b.string().optional(),name:b.string().optional(),emailAddress:b.string().optional(),mainEtps:b.string().optional(),formations:b.string().optional(),occupations:b.string().optional(),institutions:b.string().optional(),biography:b.string().optional(),orderBy:b.enum(["asc","desc"]).optional()})},responses:{200:{description:"List of researchers retrieved successfully with pagination",summary:"Researchers Retrieved",content:{"application/json":{schema:b.object({page:b.number(),totalPages:b.number(),offset:b.number(),limit:b.number(),researchers:b.array(Dc)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:b.object({message:b.string()})}}}}},Bu={method:"get",path:"/researcher/{id}",tags:["Researchers"],summary:"Find researcher by ID",request:{params:Cn},responses:{200:{description:"Researcher details retrieved successfully",summary:"Researcher Retrieved",content:{"application/json":{schema:Dc}}},400:{description:"Invalid researcher ID format",summary:"Validation Error",content:{"application/json":{schema:b.object({errors:b.record(b.string(),b.string())})}}},404:{description:"Researcher not found with the provided ID",summary:"Researcher Not Found",content:{"application/json":{schema:b.object({message:b.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:b.object({message:b.string()})}}}}},Uu={method:"get",path:"/researcher/user/{userId}",tags:["Researchers"],summary:"Find researcher by user ID",request:{params:Pc},responses:{200:{description:"Researcher details retrieved successfully",summary:"Researcher Retrieved",content:{"application/json":{schema:Dc}}},400:{description:"Invalid user ID format",summary:"Validation Error",content:{"application/json":{schema:b.object({errors:b.record(b.string(),b.string())})}}},404:{description:"Researcher not found for this user",summary:"Researcher Not Found",content:{"application/json":{schema:b.object({message:b.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:b.object({message:b.string()})}}}}},qu={method:"put",path:"/researcher/{id}",tags:["Researchers"],summary:"Update researcher profile",security:[{bearerAuth:[]}],request:{params:Cn,body:{content:{"application/json":{schema:Ac.omit({id:!0})}}}},responses:{200:{description:"Researcher profile updated successfully",summary:"Researcher Updated",content:{"application/json":{schema:b.object({message:b.string()})}}},400:{description:"Invalid input data or researcher ID format",summary:"Validation Error",content:{"application/json":{schema:b.object({errors:b.record(b.string(),b.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:b.object({message:b.string()})}}},404:{description:"Researcher not found with the provided ID",summary:"Researcher Not Found",content:{"application/json":{schema:b.object({message:b.string()})}}},409:{description:"Researcher with this registration number already exists",summary:"Conflict",content:{"application/json":{schema:b.object({message:b.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:b.object({message:b.string()})}}}}},ku={method:"delete",path:"/researcher/{id}",tags:["Researchers"],summary:"Delete researcher profile",security:[{bearerAuth:[]}],request:{params:jc},responses:{200:{description:"Researcher profile deleted successfully",summary:"Researcher Deleted"},400:{description:"Invalid researcher ID format",summary:"Validation Error",content:{"application/json":{schema:b.object({errors:b.record(b.string(),b.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:b.object({message:b.string()})}}},404:{description:"Researcher not found with the provided ID",summary:"Researcher Not Found",content:{"application/json":{schema:b.object({message:b.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:b.object({message:b.string()})}}}}};import y from"zod";import{extendZodWithOpenApi as iS}from"@asteasolutions/zod-to-openapi";import Fc from"zod";iS(Fc);var Bc=Fc.object({id:Fc.uuid()}),vn=class{constructor(e){this.scientificArticlesRepository=e}async handle(e,r){try{let{id:t}=Bc.parse({id:e.params.id});if(!await this.scientificArticlesRepository.findById(t))throw new p("O artigo cient\xEDfico n\xE3o existe.");return await this.scientificArticlesRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as nS}from"@asteasolutions/zod-to-openapi";import Uc from"zod";nS(Uc);var qc=Uc.object({id:Uc.uuid()}),En=class{constructor(e){this.scientificArticlesRepository=e}async handle(e,r){try{let{id:t}=qc.parse({id:e.params.id}),i=await this.scientificArticlesRepository.findById(t);if(!i)throw new p("Artigo cient\xEDfico n\xE3o encontrado.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as sS}from"@asteasolutions/zod-to-openapi";import gt from"zod";var aS=1,mS=6;sS(gt);var kc=gt.object({page:gt.coerce.number().min(1).default(aS),limit:gt.coerce.number().min(1).default(mS),title:gt.string().optional(),author:gt.string().optional(),journal:gt.string().optional(),orderBy:gt.enum(["asc","desc"]).default("desc")}),jn=class{constructor(e){this.scientificArticlesRepository=e}async handle(e,r){try{let{limit:t,page:i,...n}=kc.parse(e.query),s=i*t-t,[a,c]=await Promise.all([this.scientificArticlesRepository.find({pagination:{offset:s,limit:t},filter:n}),this.scientificArticlesRepository.count({filter:n})]),d=Math.max(Math.ceil(c/t),1);return r.status(200).json({page:i,totalPages:d,offset:s,limit:t,scientificArticles:a})}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as cS}from"@asteasolutions/zod-to-openapi";import ne from"zod";cS(ne);var Oc=ne.object({id:ne.uuid(),title:ne.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio.").optional(),author:ne.string().min(1,"Autor \xE9 obrigat\xF3rio.").optional(),journal:ne.string().optional(),volume:ne.string().optional(),edition:ne.string().optional(),pageStart:ne.coerce.number().optional(),pageEnd:ne.coerce.number().optional(),startDate:ne.coerce.date().optional(),endDate:ne.coerce.date().optional(),city:ne.string().optional(),state:ne.string().optional(),country:ne.string().optional(),publisher:ne.string().optional(),description:ne.string().optional(),year:ne.coerce.number().optional(),accessUrl:ne.url("URL de acesso deve ser v\xE1lida").optional()}),xn=class{constructor(e){this.scientificArticlesRepository=e}async handle(e,r){try{let{id:t,title:i,author:n,journal:s,volume:a,edition:c,pageStart:d,pageEnd:h,startDate:j,endDate:q,city:X,state:Q,country:ue,publisher:De,description:jr,year:Xs,accessUrl:Eh}=Oc.parse({id:e.params.id,...e.body});if(!await this.scientificArticlesRepository.findById(t))throw new p("O artigo cient\xEDfico n\xE3o existe.");return await this.scientificArticlesRepository.update({id:t,title:i,author:n,journal:s,volume:a,edition:c,pageStart:d,pageEnd:h,startDate:j,endDate:q,city:X,state:Q,country:ue,publisher:De,description:jr,year:Xs,accessUrl:Eh}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var Ou={method:"post",path:"/scientific-articles",tags:["Scientific Articles"],summary:"Create scientific article",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:y.object({title:y.string().min(1).openapi({description:"T\xEDtulo do artigo"}),author:y.string().min(1).openapi({description:"Autor do artigo"}),journal:y.string().optional().openapi({description:"Nome do peri\xF3dico/revista"}),volume:y.string().optional().openapi({description:"Volume"}),edition:y.string().optional().openapi({description:"N\xFAmero/Edi\xE7\xE3o"}),pageStart:y.number().optional().openapi({description:"P\xE1gina inicial"}),pageEnd:y.number().optional().openapi({description:"P\xE1gina final"}),startDate:y.string().openapi({description:"Data de in\xEDcio (ISO 8601)",example:"2024-01-01T10:00:00Z"}),endDate:y.string().openapi({description:"Data de t\xE9rmino (ISO 8601)",example:"2024-12-31T10:00:00Z"}),city:y.string().optional().openapi({description:"Cidade"}),state:y.string().optional().openapi({description:"Estado"}),country:y.string().optional().openapi({description:"Pa\xEDs"}),publisher:y.string().optional().openapi({description:"Editora/Institui\xE7\xE3o"}),description:y.string().optional().openapi({description:"Descri\xE7\xE3o do artigo"}),year:y.number().optional().openapi({description:"Ano"}),accessUrl:y.string().url().optional().openapi({description:"URL de acesso"})})}}}},responses:{201:{description:"Scientific article created successfully",summary:"Article Created"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:y.object({errors:y.record(y.string(),y.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:y.object({message:y.string()})}}}}},Nu={method:"get",path:"/scientific-articles",tags:["Scientific Articles"],summary:"List scientific articles",security:[{bearerAuth:[]}],request:{query:kc},responses:{200:{description:"Paginated list of scientific articles retrieved successfully",summary:"Articles Retrieved",content:{"application/json":{schema:y.object({page:y.number(),totalPages:y.number(),offset:y.number(),limit:y.number(),scientificArticles:y.array(y.object({id:y.string(),title:y.string(),author:y.string(),journal:y.string().nullable(),volume:y.string().nullable(),edition:y.string().nullable(),pageStart:y.number().nullable(),pageEnd:y.number().nullable(),startDate:y.date(),endDate:y.date(),city:y.string().nullable(),state:y.string().nullable(),country:y.string().nullable(),publisher:y.string().nullable(),description:y.string().nullable(),year:y.number().nullable(),accessUrl:y.string().nullable(),createdAt:y.date(),updatedAt:y.date()}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:y.object({errors:y.record(y.string(),y.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:y.object({message:y.string()})}}}}},Gu={method:"get",path:"/scientific-articles/{id}",tags:["Scientific Articles"],summary:"Find scientific article by ID",security:[{bearerAuth:[]}],request:{params:qc},responses:{200:{description:"Scientific article details retrieved successfully",summary:"Article Retrieved",content:{"application/json":{schema:y.object({id:y.string(),title:y.string(),author:y.string(),journal:y.string().nullable(),volume:y.string().nullable(),edition:y.string().nullable(),pageStart:y.number().nullable(),pageEnd:y.number().nullable(),startDate:y.date(),endDate:y.date(),city:y.string().nullable(),state:y.string().nullable(),country:y.string().nullable(),publisher:y.string().nullable(),description:y.string().nullable(),year:y.number().nullable(),accessUrl:y.string().nullable(),createdAt:y.date(),updatedAt:y.date()}).nullable()}}},400:{description:"Invalid article ID format",summary:"Validation Error",content:{"application/json":{schema:y.object({errors:y.record(y.string(),y.string())})}}},404:{description:"Scientific article not found with the provided ID",summary:"Article Not Found",content:{"application/json":{schema:y.object({message:y.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:y.object({message:y.string()})}}}}},Lu={method:"put",path:"/scientific-articles/{id}",tags:["Scientific Articles"],summary:"Update scientific article",security:[{bearerAuth:[]}],request:{params:Oc.pick({id:!0}),body:{content:{"application/json":{schema:y.object({title:y.string().min(1).optional().openapi({description:"T\xEDtulo do artigo"}),author:y.string().min(1).optional().openapi({description:"Autor do artigo"}),journal:y.string().optional().openapi({description:"Nome do peri\xF3dico/revista"}),volume:y.string().optional().openapi({description:"Volume"}),edition:y.string().optional().openapi({description:"N\xFAmero/Edi\xE7\xE3o"}),pageStart:y.number().optional().openapi({description:"P\xE1gina inicial"}),pageEnd:y.number().optional().openapi({description:"P\xE1gina final"}),startDate:y.string().optional().openapi({description:"Data de in\xEDcio (ISO 8601)",example:"2024-01-01T10:00:00Z"}),endDate:y.string().optional().openapi({description:"Data de t\xE9rmino (ISO 8601)",example:"2024-12-31T10:00:00Z"}),city:y.string().optional().openapi({description:"Cidade"}),state:y.string().optional().openapi({description:"Estado"}),country:y.string().optional().openapi({description:"Pa\xEDs"}),publisher:y.string().optional().openapi({description:"Editora/Institui\xE7\xE3o"}),description:y.string().optional().openapi({description:"Descri\xE7\xE3o do artigo"}),year:y.number().optional().openapi({description:"Ano"}),accessUrl:y.string().url().optional().openapi({description:"URL de acesso"})})}}}},responses:{200:{description:"Scientific article updated successfully",summary:"Article Updated"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:y.object({errors:y.record(y.string(),y.string())})}}},404:{description:"Scientific article not found with the provided ID",summary:"Article Not Found",content:{"application/json":{schema:y.object({message:y.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:y.object({message:y.string()})}}}}},Wu={method:"delete",path:"/scientific-articles/{id}",tags:["Scientific Articles"],summary:"Delete scientific article",security:[{bearerAuth:[]}],request:{params:Bc},responses:{200:{description:"Scientific article deleted successfully",summary:"Article Deleted"},400:{description:"Invalid article ID format",summary:"Validation Error",content:{"application/json":{schema:y.object({errors:y.record(y.string(),y.string())})}}},404:{description:"Scientific article not found with the provided ID",summary:"Article Not Found",content:{"application/json":{schema:y.object({message:y.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:y.object({message:y.string()})}}}}};import E from"zod";import{extendZodWithOpenApi as pS}from"@asteasolutions/zod-to-openapi";import Nc from"zod";pS(Nc);var Gc=Nc.object({id:Nc.uuid()}),Mn=class{constructor(e,r){this.scientificJournalRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=Gc.parse({id:e.params.id}),i=await this.scientificJournalRepository.findById(t);if(!i)throw new p("A revista cient\xEDfica n\xE3o existe.");return i.logoUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.logoUrl}),await this.scientificJournalRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as dS}from"@asteasolutions/zod-to-openapi";import Lc from"zod";dS(Lc);var Wc=Lc.object({id:Lc.uuid()}),Pn=class{constructor(e){this.scientificJournalRepository=e}async handle(e,r){try{let{id:t}=Wc.parse({id:e.params.id}),i=await this.scientificJournalRepository.findById(t);if(!i)throw new p("Revista cient\xEDfica n\xE3o encontrada.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as lS}from"@asteasolutions/zod-to-openapi";import ke from"zod";var uS=1,gS=6;lS(ke);var _c=ke.object({page:ke.coerce.number().min(1).default(uS),limit:ke.coerce.number().min(1).default(gS),name:ke.string().optional(),description:ke.string().optional(),issn:ke.string().optional(),directors:ke.string().optional(),editorialBoard:ke.string().optional(),orderBy:ke.enum(["asc","desc"]).default("desc")}),An=class{constructor(e){this.scientificJournalRepository=e}async handle(e,r){try{let{limit:t,page:i,...n}=_c.parse(e.query),s=i*t-t,[a,c]=await Promise.all([this.scientificJournalRepository.find({pagination:{offset:s,limit:t},filter:n}),this.scientificJournalRepository.count({filter:n})]),d=Math.max(Math.ceil(c/t),1);return r.status(200).json({page:i,totalPages:d,offset:s,limit:t,scientificJournals:a})}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as fS}from"@asteasolutions/zod-to-openapi";import Oe from"zod";var zu=5,_u=1024,yS=_u*_u,hS=zu*yS;fS(Oe);var zc=Oe.object({id:Oe.uuid(),name:Oe.string().min(1,"Nome \xE9 obrigat\xF3rio.").optional(),issn:Oe.string().min(1,"ISSN \xE9 obrigat\xF3rio.").optional(),description:Oe.string().min(1,"Descri\xE7\xE3o \xE9 obrigat\xF3ria.").optional(),journalUrl:Oe.url("URL da revista deve ser v\xE1lida.").optional(),directors:Oe.string().optional(),editorialBoard:Oe.string().optional(),logo:Oe.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=hS,`O logo deve ter no m\xE1ximo ${zu}MB.`).optional()}),Tn=class{constructor(e,r){this.scientificJournalRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,logo:i,name:n,issn:s,description:a,journalUrl:c,directors:d,editorialBoard:h}=zc.parse({id:e.params.id,...e.body,logo:e.file}),j=await this.scientificJournalRepository.findById(t);if(!j)throw new p("A revista cient\xEDfica n\xE3o existe.");let q=j.logoUrl;return i&&(q=await this.firebaseStorageService.uploadFile({file:i,id:t,folder:M.SCIENTIFIC_JOURNAL})),await this.scientificJournalRepository.update({id:t,name:n,issn:s,description:a,journalUrl:c,directors:d,editorialBoard:h,logoUrl:q}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var Hu={method:"post",path:"/scientific-journals",tags:["Scientific Journals"],summary:"Create scientific journal",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:E.object({name:E.string().min(1).openapi({description:"Nome da revista cient\xEDfica"}),issn:E.string().min(1).openapi({description:"ISSN da revista"}),description:E.string().min(1).openapi({description:"Descri\xE7\xE3o da revista"}),journalUrl:E.string().url().openapi({description:"URL da revista"}),directors:E.string().optional().openapi({description:"Diretores da revista"}),editorialBoard:E.string().optional().openapi({description:"Conselho editorial"}),logo:E.string().optional().openapi({description:"Logo da revista (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{201:{description:"Scientific journal created successfully",summary:"Journal Created"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:E.object({errors:E.record(E.string(),E.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:E.object({message:E.string()})}}}}},Vu={method:"get",path:"/scientific-journals",tags:["Scientific Journals"],summary:"List scientific journals",security:[{bearerAuth:[]}],request:{query:_c},responses:{200:{description:"Paginated list of scientific journals retrieved successfully",summary:"Journals Retrieved",content:{"application/json":{schema:E.object({page:E.number(),totalPages:E.number(),offset:E.number(),limit:E.number(),scientificJournals:E.array(E.object({id:E.string(),name:E.string(),issn:E.string(),description:E.string(),logoUrl:E.string().nullable(),journalUrl:E.string(),directors:E.string().nullable(),editorialBoard:E.string().nullable(),createdAt:E.date(),updatedAt:E.date()}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:E.object({errors:E.record(E.string(),E.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:E.object({message:E.string()})}}}}},Zu={method:"get",path:"/scientific-journals/{id}",tags:["Scientific Journals"],summary:"Find scientific journal by ID",security:[{bearerAuth:[]}],request:{params:Wc},responses:{200:{description:"Scientific journal details retrieved successfully",summary:"Journal Retrieved",content:{"application/json":{schema:E.object({id:E.string(),name:E.string(),issn:E.string(),description:E.string(),logoUrl:E.string().nullable(),journalUrl:E.string(),directors:E.string().nullable(),editorialBoard:E.string().nullable(),createdAt:E.date(),updatedAt:E.date()}).nullable()}}},400:{description:"Invalid journal ID format",summary:"Validation Error",content:{"application/json":{schema:E.object({errors:E.record(E.string(),E.string())})}}},404:{description:"Scientific journal not found with the provided ID",summary:"Journal Not Found",content:{"application/json":{schema:E.object({message:E.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:E.object({message:E.string()})}}}}},Ku={method:"put",path:"/scientific-journals/{id}",tags:["Scientific Journals"],summary:"Update scientific journal",security:[{bearerAuth:[]}],request:{params:zc.pick({id:!0}),body:{content:{"multipart/form-data":{schema:E.object({name:E.string().min(1).optional().openapi({description:"Nome da revista cient\xEDfica"}),issn:E.string().min(1).optional().openapi({description:"ISSN da revista"}),description:E.string().min(1).optional().openapi({description:"Descri\xE7\xE3o da revista"}),journalUrl:E.string().url().optional().openapi({description:"URL da revista"}),directors:E.string().optional().openapi({description:"Diretores da revista"}),editorialBoard:E.string().optional().openapi({description:"Conselho editorial"}),logo:E.string().optional().openapi({description:"Logo da revista (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{200:{description:"Scientific journal updated successfully",summary:"Journal Updated"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:E.object({errors:E.record(E.string(),E.string())})}}},404:{description:"Scientific journal not found with the provided ID",summary:"Journal Not Found",content:{"application/json":{schema:E.object({message:E.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:E.object({message:E.string()})}}}}},Ju={method:"delete",path:"/scientific-journals/{id}",tags:["Scientific Journals"],summary:"Delete scientific journal",security:[{bearerAuth:[]}],request:{params:Gc},responses:{200:{description:"Scientific journal deleted successfully",summary:"Journal Deleted"},400:{description:"Invalid journal ID format",summary:"Validation Error",content:{"application/json":{schema:E.object({errors:E.record(E.string(),E.string())})}}},404:{description:"Scientific journal not found with the provided ID",summary:"Journal Not Found",content:{"application/json":{schema:E.object({message:E.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:E.object({message:E.string()})}}}}};import{$Enums as SS}from"@prisma/client";import G from"zod";import{extendZodWithOpenApi as RS}from"@asteasolutions/zod-to-openapi";import or from"zod";RS(or);var Hc=or.object({role:or.string().min(1),description:or.string().optional(),userId:or.uuid(),order:or.number().optional()}),Dn=class{constructor(e){this.sdhcTeamMemberRepository=e}async handle(e,r){try{let{role:t,description:i,userId:n,order:s}=Hc.parse(e.body);return await this.sdhcTeamMemberRepository.create({role:t,description:i,userId:n,order:s??0}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as IS}from"@asteasolutions/zod-to-openapi";import Vc from"zod";IS(Vc);var Zc=Vc.object({id:Vc.uuid()}),Fn=class{constructor(e){this.sdhcTeamMemberRepository=e}async handle(e,r){try{let{id:t}=Zc.parse({id:e.params.id});if(!await this.sdhcTeamMemberRepository.findById(t))throw new p("O membro da equipe SDHC n\xE3o existe.");return await this.sdhcTeamMemberRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as bS}from"@asteasolutions/zod-to-openapi";import Kc from"zod";bS(Kc);var Un=Kc.object({id:Kc.uuid()}),Bn=class{constructor(e){this.sdhcTeamMemberRepository=e}async handle(e,r){try{let{id:t}=Un.parse({id:e.params.id}),i=await this.sdhcTeamMemberRepository.findById(t);if(!i)throw new p("O membro da equipe SDHC n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as CS}from"@asteasolutions/zod-to-openapi";import jt from"zod";CS(jt);var Jc=jt.object({id:jt.uuid(),role:jt.string().min(1).optional(),description:jt.string().optional(),userId:jt.uuid().optional(),order:jt.number().optional()}),qn=class{constructor(e){this.sdhcTeamMemberRepository=e}async handle(e,r){try{let{id:t,role:i,description:n,userId:s,order:a}=Jc.parse({id:e.params.id,...e.body});if(!await this.sdhcTeamMemberRepository.findById(t))throw new p("O membro da equipe SDHC n\xE3o existe.");return await this.sdhcTeamMemberRepository.update({id:t,role:i,description:n,userId:s,order:a}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var wS=G.object({id:G.uuid(),name:G.string(),emailAddress:G.string(),avatarUrl:G.string().nullable(),orcid:G.string().nullable(),phone:G.string().nullable(),lattesUrl:G.string().nullable(),role:G.enum(SS.UserRole)}),Yu=G.object({id:G.uuid(),role:G.string(),description:G.string().nullable(),order:G.number(),createdAt:G.date(),updatedAt:G.date(),userId:G.uuid(),user:wS}),Xu={method:"post",path:"/sdhc-team-member",tags:["SDHC Team Members"],summary:"Create a new SDHC Team Member",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:Hc}}}},responses:{201:{description:"SDHC Team Member created successfully",summary:"SDHC Team Member Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:G.object({errors:G.record(G.string(),G.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:G.object({message:G.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:G.object({message:G.string()})}}}}},$u={method:"get",path:"/sdhc-team-member",tags:["SDHC Team Members"],summary:"List all SDHC Team Members with filters",request:{query:G.object({role:G.string().optional(),orderBy:G.enum(["asc","desc"]).optional()})},responses:{200:{description:"List of SDHC Team Members retrieved successfully",summary:"SDHC Team Members Retrieved",content:{"application/json":{schema:G.object({members:G.array(Yu)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:G.object({message:G.string()})}}}}},Qu={method:"get",path:"/sdhc-team-member/{id}",tags:["SDHC Team Members"],summary:"Find SDHC Team Member by ID",request:{params:Un},responses:{200:{description:"SDHC Team Member details retrieved successfully",summary:"SDHC Team Member Retrieved",content:{"application/json":{schema:Yu}}},400:{description:"Invalid SDHC Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:G.object({errors:G.record(G.string(),G.string())})}}},404:{description:"SDHC Team Member not found with the provided ID",summary:"SDHC Team Member Not Found",content:{"application/json":{schema:G.object({message:G.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:G.object({message:G.string()})}}}}},eg={method:"put",path:"/sdhc-team-member/{id}",tags:["SDHC Team Members"],summary:"Update SDHC Team Member",security:[{bearerAuth:[]}],request:{params:Un,body:{content:{"application/json":{schema:Jc.omit({id:!0})}}}},responses:{200:{description:"SDHC Team Member updated successfully",summary:"SDHC Team Member Updated"},400:{description:"Invalid input data or SDHC Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:G.object({errors:G.record(G.string(),G.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:G.object({message:G.string()})}}},404:{description:"SDHC Team Member not found with the provided ID",summary:"SDHC Team Member Not Found",content:{"application/json":{schema:G.object({message:G.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:G.object({message:G.string()})}}}}},tg={method:"delete",path:"/sdhc-team-member/{id}",tags:["SDHC Team Members"],summary:"Delete SDHC Team Member",security:[{bearerAuth:[]}],request:{params:Zc},responses:{200:{description:"SDHC Team Member deleted successfully",summary:"SDHC Team Member Deleted"},400:{description:"Invalid SDHC Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:G.object({errors:G.record(G.string(),G.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:G.object({message:G.string()})}}},404:{description:"SDHC Team Member not found with the provided ID",summary:"SDHC Team Member Not Found",content:{"application/json":{schema:G.object({message:G.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:G.object({message:G.string()})}}}}};import{$Enums as ig}from"@prisma/client";import z from"zod";import{extendZodWithOpenApi as vS}from"@asteasolutions/zod-to-openapi";import Yc from"zod";vS(Yc);var Xc=Yc.object({id:Yc.string()}),kn=class{constructor(e){this.userRepository=e}async handle(e,r){try{let{id:t}=Xc.parse({id:e.params.id}),i=await this.userRepository.findById(t);if(!i)throw new p("O usu\xE1rio n\xE3o existe.");let n=e.user.id;if(i.id!==n)throw new Re("Voc\xEA n\xE3o tem permiss\xE3o para deletar o usu\xE1rio");return await this.userRepository.deleteById(i.id),r.sendStatus(204)}catch(t){if(console.log(t),t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as ES}from"@asteasolutions/zod-to-openapi";import{z as $c}from"zod";ES($c);var Qc=$c.object({id:$c.string().min(1,"id do usu\xE1rio n\xE3o fornecido.")}),On=class{constructor(e){this.userRepository=e}async handle(e,r){try{let{id:t}=Qc.parse(e.params),i=await this.userRepository.findById(t);if(!i)throw new p("Usu\xE1rio n\xE3o encontrado");r.status(200).json(i)}catch(t){if(console.log(t),t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as jS}from"@asteasolutions/zod-to-openapi";import xt from"zod";var og=2,rg=1024,xS=rg*rg,MS=og*xS,PS=/^\d{4}-\d{4}-\d{4}-\d{4}$/,AS=/^\(?\d{2}\)?[\s-]?\d{4,5}-?\d{4}$/;jS(xt);var ep=xt.object({name:xt.string().optional(),lattesUrl:xt.string().optional(),orcid:xt.string().optional().transform(o=>o===void 0?void 0:o.trim()).refine(o=>o===void 0||o===""||PS.test(o),{message:"ORCID inv\xE1lido. Deve estar no formato 0000-0000-0000-0000"}),phone:xt.string().optional().refine(o=>o===void 0||o===""||AS.test(o),{message:"Telefone inv\xE1lido. Deve estar no formato (99) 99999-9999"}),avatarImage:xt.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=MS,`A imagem deve ter no m\xE1ximo ${og}MB.`).optional()}),Nn=class{constructor(e,r){this.userRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{avatarImage:t,...i}=ep.parse({...e.body,avatarImage:e.file}),n=e.user.id,s=await this.userRepository.findById(n);if(!s)throw new pe("O usu\xE1rio n\xE3o existe");let a=s.avatarUrl;return t&&(s.avatarUrl?a=await this.firebaseStorageService.updateFile({file:t,id:n,folder:M.USER,fileUrl:s.avatarUrl}):a=await this.firebaseStorageService.uploadFile({file:t,id:n,folder:M.USER})),await this.userRepository.update({...i,id:n,avatarUrl:a||void 0}),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var ng={method:"get",path:"/users/{id}",tags:["Users"],summary:"Find user by ID",request:{params:Qc},responses:{200:{description:"User details retrieved successfully",summary:"User Retrieved",content:{"application/json":{schema:z.object({id:z.string(),name:z.string(),createdAt:z.date(),updatedAt:z.date(),role:z.enum(ig.UserRole),lattesUrl:z.string().nullable(),orcid:z.string().nullable(),phone:z.string().nullable(),avatarUrl:z.url().nullable(),emailAddress:z.email()})}}},400:{description:"Invalid user ID format",summary:"Validation Error",content:{"application/json":{schema:z.object({errors:z.record(z.string(),z.string())})}}},404:{description:"User not found with the provided ID",summary:"User Not Found",content:{"application/json":{schema:z.object({message:z.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:z.object({message:z.string()})}}}}},sg={method:"put",path:"/users",tags:["Users"],summary:"Update authenticated user",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:ep}}}},responses:{200:{description:"User profile updated successfully",summary:"User Updated",content:{"application/json":{schema:z.object({message:z.string()})}}},400:{description:"Invalid input data or file format",summary:"Validation Error",content:{"application/json":{schema:z.object({errors:z.record(z.string(),z.string())})}}},401:{description:"User not authenticated or unauthorized",summary:"Authentication Required",content:{"application/json":{schema:z.object({message:z.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:z.object({message:z.string()})}}}}},ag={method:"delete",path:"/users",tags:["Users"],summary:"Delete authenticated user",security:[{bearerAuth:[]}],request:{params:Xc},responses:{200:{description:"User account deleted successfully",summary:"User Deleted",content:{"application/json":{schema:z.object({message:z.string()})}}},400:{description:"Invalid request parameters",summary:"Validation Error",content:{"application/json":{schema:z.object({errors:z.record(z.string(),z.string())})}}},401:{description:"User not authenticated or unauthorized",summary:"Authentication Required",content:{"application/json":{schema:z.object({message:z.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:z.object({message:z.string()})}}}}},mg={method:"get",path:"/users",tags:["Users"],summary:"List users",responses:{200:{description:"Complete list of users retrieved successfully",summary:"Users Retrieved",content:{"application/json":{schema:z.array(z.object({id:z.string(),name:z.string(),createdAt:z.date(),updatedAt:z.date(),role:z.enum(ig.UserRole),lattesUrl:z.url().nullable(),orcid:z.string().nullable(),phone:z.string().nullable(),avatarUrl:z.string().nullable(),emailAddress:z.email()}))}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:z.object({message:z.string()})}}}}};import S from"zod";import{extendZodWithOpenApi as TS}from"@asteasolutions/zod-to-openapi";import tp from"zod";TS(tp);var rp=tp.object({id:tp.uuid()}),Gn=class{constructor(e,r){this.webinarRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=rp.parse({id:e.params.id}),i=await this.webinarRepository.findById(t);if(!i)throw new p("O webinar n\xE3o existe.");return i.thumbnailUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.thumbnailUrl}),await this.webinarRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as DS}from"@asteasolutions/zod-to-openapi";import op from"zod";DS(op);var ip=op.object({id:op.uuid()}),Ln=class{constructor(e){this.webinarRepository=e}async handle(e,r){try{let{id:t}=ip.parse({id:e.params.id}),i=await this.webinarRepository.findById(t);if(!i)throw new p("Webinar n\xE3o encontrado.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as FS}from"@asteasolutions/zod-to-openapi";import Mt from"zod";var BS=1,US=6;FS(Mt);var np=Mt.object({page:Mt.coerce.number().min(1).default(BS),limit:Mt.coerce.number().min(1).default(US),title:Mt.string().optional(),description:Mt.string().optional(),orderBy:Mt.enum(["asc","desc"]).default("desc")}),Wn=class{constructor(e){this.webinarRepository=e}async handle(e,r){try{let{limit:t,page:i,...n}=np.parse(e.query),s=i*t-t,[a,c]=await Promise.all([this.webinarRepository.find({pagination:{offset:s,limit:t},filter:n}),this.webinarRepository.count({filter:n})]),d=Math.max(Math.ceil(c/t),1);return r.status(200).json({page:i,totalPages:d,offset:s,limit:t,webinars:a})}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as qS}from"@asteasolutions/zod-to-openapi";import Me from"zod";var pg=5,cg=1024,kS=cg*cg,OS=pg*kS;qS(Me);var sp=Me.object({id:Me.uuid(),title:Me.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio.").optional(),description:Me.string().optional(),scheduledAt:Me.coerce.date().optional(),webinarLink:Me.url("URL do webinar deve ser v\xE1lida").optional(),guestIds:Me.transform(o=>typeof o=="string"?o.split(","):o).pipe(Me.array(Me.uuid())).optional(),thumbnail:Me.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=OS,`A thumbnail deve ter no m\xE1ximo ${pg}MB.`).optional()}),_n=class{constructor(e,r){this.webinarRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,thumbnail:i,title:n,description:s,scheduledAt:a,webinarLink:c,guestIds:d}=sp.parse({id:e.params.id,...e.body,thumbnail:e.file}),h=await this.webinarRepository.findById(t);if(!h)throw new p("O webinar n\xE3o existe.");let j=h.thumbnailUrl;if(i&&(j=await this.firebaseStorageService.uploadFile({file:i,id:t,folder:M.WEBINAR})),!j)throw new m("Thumbnail URL \xE9 obrigat\xF3rio");return await this.webinarRepository.update({id:t,title:n,description:s,scheduledAt:a,webinarLink:c,thumbnailUrl:j,guestIds:d}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var dg={method:"post",path:"/webinars",tags:["Webinars"],summary:"Create webinar",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:S.object({title:S.string().min(1).openapi({description:"T\xEDtulo do webinar"}),description:S.string().optional().openapi({description:"Descri\xE7\xE3o do webinar"}),scheduledAt:S.string().openapi({description:"Data e hora agendada (ISO 8601)",example:"2024-01-01T10:00:00Z"}),webinarLink:S.string().url().optional().openapi({description:"Link do webinar"}),guestIds:S.string().openapi({description:"IDs dos convidados separados por v\xEDrgula",example:"uuid1,uuid2,uuid3"}),thumbnail:S.string().optional().openapi({description:"Imagem de thumbnail (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{201:{description:"Webinar created successfully",summary:"Webinar Created"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:S.object({errors:S.record(S.string(),S.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:S.object({message:S.string()})}}}}},lg={method:"get",path:"/webinars",tags:["Webinars"],summary:"List webinars",security:[{bearerAuth:[]}],request:{query:np},responses:{200:{description:"Paginated list of webinars with guest information retrieved successfully",summary:"Webinars Retrieved",content:{"application/json":{schema:S.object({page:S.number(),totalPages:S.number(),offset:S.number(),limit:S.number(),webinars:S.array(S.object({id:S.string(),title:S.string(),description:S.string().nullable(),scheduledAt:S.date(),webinarLink:S.string().nullable(),thumbnailUrl:S.string().nullable(),createdAt:S.date(),updatedAt:S.date(),guests:S.array(S.object({id:S.uuid(),name:S.string(),emailAddress:S.email(),avatarUrl:S.string().nullable(),createdAt:S.date(),updatedAt:S.date()}))}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:S.object({errors:S.record(S.string(),S.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:S.object({message:S.string()})}}}}},ug={method:"get",path:"/webinars/{id}",tags:["Webinars"],summary:"Find webinar by ID",security:[{bearerAuth:[]}],request:{params:ip},responses:{200:{description:"Webinar details retrieved successfully",summary:"Webinar Retrieved",content:{"application/json":{schema:S.object({id:S.string(),title:S.string(),description:S.string().nullable(),scheduledAt:S.date(),webinarLink:S.string().nullable(),thumbnailUrl:S.string().nullable(),createdAt:S.date(),updatedAt:S.date(),guests:S.array(S.object({id:S.uuid(),name:S.string(),emailAddress:S.email(),avatarUrl:S.string().nullable(),createdAt:S.date(),updatedAt:S.date()}))}).nullable()}}},400:{description:"Invalid webinar ID format",summary:"Validation Error",content:{"application/json":{schema:S.object({errors:S.record(S.string(),S.string())})}}},404:{description:"Webinar not found with the provided ID",summary:"Webinar Not Found",content:{"application/json":{schema:S.object({message:S.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:S.object({message:S.string()})}}}}},gg={method:"put",path:"/webinars/{id}",tags:["Webinars"],summary:"Update webinar",security:[{bearerAuth:[]}],request:{params:sp.pick({id:!0}),body:{content:{"multipart/form-data":{schema:S.object({title:S.string().min(1).optional().openapi({description:"T\xEDtulo do webinar"}),description:S.string().optional().openapi({description:"Descri\xE7\xE3o do webinar"}),scheduledAt:S.string().optional().openapi({description:"Data e hora agendada (ISO 8601)",example:"2024-01-01T10:00:00Z"}),webinarLink:S.string().url().optional().openapi({description:"Link do webinar"}),guestIds:S.string().optional().openapi({description:"IDs dos convidados separados por v\xEDrgula",example:"uuid1,uuid2,uuid3"}),thumbnail:S.string().optional().openapi({description:"Imagem de thumbnail (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{200:{description:"Webinar updated successfully",summary:"Webinar Updated"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:S.object({errors:S.record(S.string(),S.string())})}}},404:{description:"Webinar not found with the provided ID",summary:"Webinar Not Found",content:{"application/json":{schema:S.object({message:S.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:S.object({message:S.string()})}}}}},fg={method:"delete",path:"/webinars/{id}",tags:["Webinars"],summary:"Delete webinar",security:[{bearerAuth:[]}],request:{params:rp},responses:{200:{description:"Webinar deleted successfully",summary:"Webinar Deleted"},400:{description:"Invalid webinar ID format",summary:"Validation Error",content:{"application/json":{schema:S.object({errors:S.record(S.string(),S.string())})}}},404:{description:"Webinar not found with the provided ID",summary:"Webinar Not Found",content:{"application/json":{schema:S.object({message:S.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:S.object({message:S.string()})}}}}};import{$Enums as _S}from"@prisma/client";import W from"zod";import{extendZodWithOpenApi as NS}from"@asteasolutions/zod-to-openapi";import kr from"zod";NS(kr);var ap=kr.object({role:kr.string().min(1),description:kr.string().optional(),userId:kr.uuid()}),zn=class{constructor(e){this.workGroupTeamMemberRepository=e}async handle(e,r){try{let{role:t,description:i,userId:n}=ap.parse(e.body);return await this.workGroupTeamMemberRepository.create({role:t,description:i,userId:n}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as GS}from"@asteasolutions/zod-to-openapi";import mp from"zod";GS(mp);var cp=mp.object({id:mp.uuid()}),Hn=class{constructor(e){this.workGroupTeamMemberRepository=e}async handle(e,r){try{let{id:t}=cp.parse({id:e.params.id});if(!await this.workGroupTeamMemberRepository.findById(t))throw new p("O membro do grupo de trabalho n\xE3o existe.");return await this.workGroupTeamMemberRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as LS}from"@asteasolutions/zod-to-openapi";import pp from"zod";LS(pp);var Zn=pp.object({id:pp.uuid()}),Vn=class{constructor(e){this.workGroupTeamMemberRepository=e}async handle(e,r){try{let{id:t}=Zn.parse({id:e.params.id}),i=await this.workGroupTeamMemberRepository.findById(t);if(!i)throw new p("O membro do grupo de trabalho n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as WS}from"@asteasolutions/zod-to-openapi";import ir from"zod";WS(ir);var dp=ir.object({id:ir.uuid(),role:ir.string().min(1).optional(),description:ir.string().optional(),userId:ir.uuid().optional()}),Kn=class{constructor(e){this.workGroupTeamMemberRepository=e}async handle(e,r){try{let{id:t,role:i,description:n,userId:s}=dp.parse({id:e.params.id,...e.body});if(!await this.workGroupTeamMemberRepository.findById(t))throw new p("O membro do grupo de trabalho n\xE3o existe.");return await this.workGroupTeamMemberRepository.update({id:t,role:i,description:n,userId:s}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var zS=W.object({id:W.uuid(),name:W.string(),emailAddress:W.string(),avatarUrl:W.string().nullable(),orcid:W.string().nullable(),phone:W.string().nullable(),lattesUrl:W.string().nullable(),role:W.enum(_S.UserRole)}),yg=W.object({id:W.uuid(),role:W.string(),description:W.string().nullable(),createdAt:W.date(),updatedAt:W.date(),userId:W.uuid(),user:zS}),hg={method:"post",path:"/work-group-team-member",tags:["Work Group Team Members"],summary:"Create a new Work Group Team Member",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:ap}}}},responses:{201:{description:"Work Group Team Member created successfully",summary:"Work Group Team Member Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:W.object({errors:W.record(W.string(),W.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:W.object({message:W.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:W.object({message:W.string()})}}}}},Rg={method:"get",path:"/work-group-team-member",tags:["Work Group Team Members"],summary:"List all Work Group Team Members with filters",request:{query:W.object({role:W.string().optional(),orderBy:W.enum(["asc","desc"]).optional()})},responses:{200:{description:"List of Work Group Team Members retrieved successfully",summary:"Work Group Team Members Retrieved",content:{"application/json":{schema:W.object({members:W.array(yg)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:W.object({message:W.string()})}}}}},Ig={method:"get",path:"/work-group-team-member/{id}",tags:["Work Group Team Members"],summary:"Find Work Group Team Member by ID",request:{params:Zn},responses:{200:{description:"Work Group Team Member details retrieved successfully",summary:"Work Group Team Member Retrieved",content:{"application/json":{schema:yg}}},400:{description:"Invalid Work Group Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:W.object({errors:W.record(W.string(),W.string())})}}},404:{description:"Work Group Team Member not found with the provided ID",summary:"Work Group Team Member Not Found",content:{"application/json":{schema:W.object({message:W.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:W.object({message:W.string()})}}}}},bg={method:"put",path:"/work-group-team-member/{id}",tags:["Work Group Team Members"],summary:"Update Work Group Team Member",security:[{bearerAuth:[]}],request:{params:Zn,body:{content:{"application/json":{schema:dp.omit({id:!0})}}}},responses:{200:{description:"Work Group Team Member updated successfully",summary:"Work Group Team Member Updated"},400:{description:"Invalid input data or Work Group Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:W.object({errors:W.record(W.string(),W.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:W.object({message:W.string()})}}},404:{description:"Work Group Team Member not found with the provided ID",summary:"Work Group Team Member Not Found",content:{"application/json":{schema:W.object({message:W.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:W.object({message:W.string()})}}}}},Cg={method:"delete",path:"/work-group-team-member/{id}",tags:["Work Group Team Members"],summary:"Delete Work Group Team Member",security:[{bearerAuth:[]}],request:{params:cp},responses:{200:{description:"Work Group Team Member deleted successfully",summary:"Work Group Team Member Deleted"},400:{description:"Invalid Work Group Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:W.object({errors:W.record(W.string(),W.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:W.object({message:W.string()})}}},404:{description:"Work Group Team Member not found with the provided ID",summary:"Work Group Team Member Not Found",content:{"application/json":{schema:W.object({message:W.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:W.object({message:W.string()})}}}}};var f=new HS;f.registerComponent("securitySchemes","bearerAuth",{type:"http",scheme:"bearer",bearerFormat:"JWT"});f.registerPath(kp);f.registerPath(Op);f.registerPath(Np);f.registerPath(Gp);f.registerPath(Wp);f.registerPath(_p);f.registerPath(Lp);f.registerPath(ng);f.registerPath(sg);f.registerPath(ag);f.registerPath(mg);f.registerPath(jl);f.registerPath(xl);f.registerPath(Ml);f.registerPath(Pl);f.registerPath(Yp);f.registerPath(Xp);f.registerPath($p);f.registerPath(Qp);f.registerPath(ed);f.registerPath(Ll);f.registerPath(Wl);f.registerPath(_l);f.registerPath(zl);f.registerPath(Hl);f.registerPath(jd);f.registerPath(xd);f.registerPath(Md);f.registerPath(Pd);f.registerPath(Ad);f.registerPath(Du);f.registerPath(Fu);f.registerPath(Bu);f.registerPath(Uu);f.registerPath(qu);f.registerPath(ku);f.registerPath(cd);f.registerPath(pd);f.registerPath(dd);f.registerPath(ld);f.registerPath(ud);f.registerPath(Ul);f.registerPath(ql);f.registerPath(kl);f.registerPath(Ol);f.registerPath(Nl);f.registerPath(sl);f.registerPath(al);f.registerPath(ml);f.registerPath(cl);f.registerPath(pl);f.registerPath(Xu);f.registerPath($u);f.registerPath(Qu);f.registerPath(eg);f.registerPath(tg);f.registerPath(el);f.registerPath(tl);f.registerPath(rl);f.registerPath(ol);f.registerPath(il);f.registerPath(iu);f.registerPath(nu);f.registerPath(su);f.registerPath(au);f.registerPath(mu);f.registerPath(cu);f.registerPath(Il);f.registerPath(bl);f.registerPath(Cl);f.registerPath(Sl);f.registerPath(wl);f.registerPath(vl);f.registerPath(fl);f.registerPath(yl);f.registerPath(hl);f.registerPath(Rl);f.registerPath(Zd);f.registerPath(Kd);f.registerPath(Jd);f.registerPath(Yd);f.registerPath(Xd);f.registerPath($d);f.registerPath(_d);f.registerPath(zd);f.registerPath(Hd);f.registerPath(Vd);f.registerPath(Ud);f.registerPath(qd);f.registerPath(kd);f.registerPath(Od);f.registerPath(ju);f.registerPath(xu);f.registerPath(Mu);f.registerPath(Pu);f.registerPath(Au);f.registerPath(Tu);f.registerPath(Su);f.registerPath(wu);f.registerPath(vu);f.registerPath(Eu);f.registerPath(gu);f.registerPath(fu);f.registerPath(yu);f.registerPath(hu);f.registerPath(dg);f.registerPath(lg);f.registerPath(ug);f.registerPath(gg);f.registerPath(fg);f.registerPath(od);f.registerPath(id);f.registerPath(nd);f.registerPath(sd);f.registerPath(ad);f.registerPath(Kl);f.registerPath(Jl);f.registerPath(Yl);f.registerPath(Xl);f.registerPath($l);f.registerPath(hd);f.registerPath(Rd);f.registerPath(Id);f.registerPath(bd);f.registerPath(Cd);f.registerPath(Hu);f.registerPath(Vu);f.registerPath(Zu);f.registerPath(Ku);f.registerPath(Ju);f.registerPath(Ou);f.registerPath(Nu);f.registerPath(Gu);f.registerPath(Lu);f.registerPath(Wu);f.registerPath(Hp);f.registerPath(Vp);f.registerPath(Zp);f.registerPath(Kp);f.registerPath(Jp);f.registerPath(hg);f.registerPath(Rg);f.registerPath(Ig);f.registerPath(bg);f.registerPath(Cg);var ZS=new VS(f.definitions),Sg=ZS.generateDocument({openapi:"3.0.0",info:{title:"API da Rede CT",version:"1.0.0",description:"API com valida\xE7\xE3o Zod"}});import{Router as ew}from"express";import{extendZodWithOpenApi as KS}from"@asteasolutions/zod-to-openapi";import lp from"zod";KS(lp);var JS=lp.object({authenticatedUserId:lp.uuid()}),Jn=class{constructor(e){this.userRepository=e}async handle(e,r){try{let{authenticatedUserId:t}=JS.parse({authenticatedUserId:e.user.id}),i=await this.userRepository.findById(t);if(!i)throw new p("Usu\xE1rio n\xE3o encontrado.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{PrismaClient as YS}from"@prisma/client";var _=new YS({log:["warn","error"]});var Yn=class{constructor(e){this.prisma=e}async register({userId:e,title:r,description:t,certificationUrl:i}){await this.prisma.certification.create({data:{title:r,description:t,certificationUrl:i,user:{connect:{id:e}}}})}async find({pagination:{offset:e,limit:r},filter:{description:t,orderBy:i,title:n,userId:s}}){let a={},c=[];return s&&(a.userId=s),n&&c.push({title:{contains:n,mode:"insensitive"}}),t&&c.push({description:{contains:t,mode:"insensitive"}}),c.length>0&&(a.OR=c),await this.prisma.certification.findMany({where:a,include:{user:{omit:{passwordHash:!0}}},orderBy:{updatedAt:i},skip:e,take:r})}async findById(e){return await this.prisma.certification.findFirst({where:{id:e}})}async findByUserId({pagination:{limit:e,offset:r},filter:{description:t,orderBy:i,title:n},userId:s}){let a={userId:s},c=[];return n&&c.push({title:{contains:n,mode:"insensitive"}}),t&&c.push({description:{contains:t,mode:"insensitive"}}),c.length>0&&(a.OR=c),await this.prisma.certification.findMany({where:a,include:{user:{omit:{passwordHash:!0}}},skip:r,take:e,orderBy:i?{updatedAt:i}:{updatedAt:"desc"}})}async update({id:e,...r}){await this.prisma.certification.update({where:{id:e},data:r})}async deleteById(e){await this.prisma.certification.delete({where:{id:e}})}async count({filter:{description:e,title:r,userId:t}}){let i={},n=[];return t&&(i.userId=t),r&&n.push({title:{contains:r,mode:"insensitive"}}),e&&n.push({description:{contains:e,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.certification.count({where:i})}};function ft(){return new Yn(_)}var Xn=class{constructor(e){this.prisma=e}async create(e){await this.prisma.news.create({data:e})}async find({pagination:{offset:e,limit:r},filter:{authorId:t,content:i,title:n,orderBy:s}}){let a={};t&&(a.authorId={contains:t,mode:"insensitive"});let c=[];return n&&c.push({title:{contains:n,mode:"insensitive"}}),i&&c.push({content:{contains:i,mode:"insensitive"}}),c.length>0&&(a.OR=c),await this.prisma.news.findMany({where:a,omit:{authorId:!0},include:{author:!0},orderBy:{updatedAt:s},skip:e,take:r})}async findById(e){return await this.prisma.news.findUnique({where:{id:e},omit:{authorId:!0},include:{author:!0}})}async findByAuthorId({authorId:e,pagination:{offset:r,limit:t},filter:{orderBy:i="desc",content:n,title:s}}){let a={authorId:e},c=[];return s&&c.push({title:{contains:s,mode:"insensitive"}}),n&&c.push({content:{contains:n,mode:"insensitive"}}),c.length>0&&(a.OR=c),await this.prisma.news.findMany({omit:{authorId:!0},where:a,orderBy:{updatedAt:i},skip:r,take:t})}async update(e){await this.prisma.news.update({where:{id:e.id},data:{title:e.title,content:e.content,imageUrl:e.imageUrl}})}async delete(e){await this.prisma.news.delete({where:{id:e}})}async count({filter:{authorId:e,content:r,title:t}}){let i={};e&&(i.authorId={contains:e,mode:"insensitive"});let n=[];return t&&n.push({title:{contains:t,mode:"insensitive"}}),r&&n.push({content:{contains:r,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.news.count({where:i})}};function ze(){return new Xn(_)}var $n=class{constructor(e){this.prisma=e}async create(e){await this.prisma.pendency.create({data:e})}async find({filter:{description:e,orderBy:r,title:t,status:i,userId:n},pagination:{limit:s,offset:a}}){let c={userId:n,AND:{status:{equals:i}}};e&&(c.description={contains:e,mode:"insensitive"});let d=[];return t&&d.push({title:{contains:t,mode:"insensitive"}}),d.length>0&&(c.OR=d),await this.prisma.pendency.findMany({where:c,orderBy:{updatedAt:r},include:{user:{omit:{passwordHash:!0}}},skip:a,take:s})}async findById(e){return await this.prisma.pendency.findFirst({where:{id:e},include:{user:{omit:{passwordHash:!0}}}})}async findByUserId({filter:{description:e,orderBy:r,title:t,status:i},pagination:{limit:n,offset:s},userId:a}){let c={userId:a,AND:{status:{equals:i}}},d=[];return e&&d.push({description:{contains:e,mode:"insensitive"}}),t&&d.push({title:{contains:t,mode:"insensitive"}}),d.length>0&&(c.OR=d),await this.prisma.pendency.findMany({where:c,orderBy:{updatedAt:r},include:{user:{omit:{passwordHash:!0}}},skip:s,take:n})}async update({id:e,...r}){await this.prisma.pendency.update({where:{id:e},data:r})}async deleteById(e){await this.prisma.pendency.delete({where:{id:e}})}async count({filter:{description:e,title:r,status:t,userId:i}}){let n={userId:i},s=[];return e&&s.push({description:{contains:e,mode:"insensitive"}}),r&&s.push({title:{contains:r,mode:"insensitive"}}),t&&s.push({status:{equals:t}}),s.length>0&&(n.OR=s),await this.prisma.pendency.count({where:n})}};function yt(){return new $n(_)}var Qn=class{constructor(e){this.prisma=e}async create(e){await this.prisma.user.create({data:e})}async update(e){await this.prisma.user.update({where:{id:e.id},data:{lattesUrl:e.lattesUrl??null,orcid:e.orcid??null,phone:e.phone??null,avatarUrl:e.avatarUrl??null}})}async deleteById(e){await this.prisma.user.delete({where:{id:e}})}async find(){return await this.prisma.user.findMany({omit:{passwordHash:!0}})}async findByEmail(e){return await this.prisma.user.findFirst({where:{emailAddress:e}})}async findById(e){return await this.prisma.user.findFirst({where:{id:e},omit:{passwordHash:!0}})}};function fe(){return new Qn(_)}import{compare as XS,hash as $S}from"bcryptjs";var es=class{constructor(e,r){this.hashFn=e;this.compareFn=r}async hash(e){return await this.hashFn(e,6)}async compare({password:e,hashedPassword:r}){return await this.compareFn(e,r)}};function up(){return new es($S,XS)}import wg from"jsonwebtoken";import ye from"zod";var QS=ye.object({JWT_SECRET:ye.string(),FIREBASE_BUCKET:ye.string(),FIREBASE_CLIENT_EMAIL:ye.string(),FIREBASE_PRIVATE_KEY:ye.string(),FIREBASE_PROJECT_ID:ye.string(),FIREBASE_TYPE:ye.string(),FIREBASE_PRIVATE_KEY_ID:ye.string(),FIREBASE_CLIENT_ID:ye.string(),FIREBASE_AUTH_URI:ye.string(),FIREBASE_TOKEN_URI:ye.string(),FIREBASE_AUTH_PROVIDER_X509_CERT_URL:ye.string(),FIREBASE_CLIENT_X509_CERT_URL:ye.string()}),ce=QS.parse(process.env);var ts=class{constructor(e,r){this.signFn=e;this.verifyFn=r}sign(e){try{return this.signFn(e,ce.JWT_SECRET,{expiresIn:"3d",subject:e.id})}catch{return null}}verify(e){try{return this.verifyFn(e,ce.JWT_SECRET)}catch{return null}}};function rs(){return new ts(wg.sign,wg.verify)}function vg(){return{signUpController:new oo(fe(),up())}}function Eg(){return{signInController:new to(fe(),up(),rs())}}function jg(){return{findAuthenticatedUserController:new Jn(fe())}}function xg(){return{findAuthenticatedUserController:new $r(ze())}}function Mg(){return{findAuthenticatedUserCertificationsController:new Xr(ft())}}function Pg(){return{findAuthenticatedUserPendenciesController:new Qr(yt())}}var os=class{constructor(e){this.jwtService=e}authenticated(e,r,t){let i=e.headers.authorization;if(!i?.startsWith("Bearer "))return r.status(401).json({message:"Token inv\xE1lido.",invalid:!0});let n=i.split(" ")[1];if(!n)return r.status(401).json({message:"Token n\xE3o fornecido."});try{let s=this.jwtService.verify(n);if(!s)return r.status(401).json({message:"Token inv\xE1lido.",invalid:!0});e.user=s,t()}catch(s){if(console.log(s),s instanceof Error)return r.status(401).json({message:s.message})}}isAdmin(e,r,t){let i=e.headers.authorization;if(!i?.startsWith("Bearer "))return r.status(401).json({message:"Token inv\xE1lido.",invalid:!0});let n=i.split(" ")[1];if(!n)return r.status(401).json({message:"Token n\xE3o fornecido."});try{let s=this.jwtService.verify(n);if(!s)return r.status(401).json({message:"Token inv\xE1lido.",invalid:!0});if(s.role!=="ADMIN")return r.status(401).json({message:"\xC9 necess\xE1rio ter permiss\xF5es de administrador."});e.user=s,t()}catch(s){if(console.log(s),s instanceof Error)return r.status(401).json({message:s.message})}}};function V(){return{authMiddleware:new os(rs())}}var He=ew(),{authMiddleware:Or}=V();He.post("/sign-up",async(o,e)=>{let{signUpController:r}=vg();await r.handle(o,e)});He.post("/sign-in",async(o,e)=>{let{signInController:r}=Eg();await r.handle(o,e)});He.get("/user",(o,e,r)=>{Or.authenticated(o,e,r)},async(o,e)=>{let{findAuthenticatedUserController:r}=jg();await r.handle(o,e)});He.get("/user/news",(o,e,r)=>{Or.authenticated(o,e,r)},async(o,e)=>{let{findAuthenticatedUserController:r}=xg();await r.handle(o,e)});He.get("/admin",(o,e,r)=>{Or.isAdmin(o,e,r)},(o,e)=>{try{e.status(200).json({success:!0})}catch(r){r instanceof Error&&e.status(500).json({message:r.message})}});He.get("/certifications",(o,e,r)=>{Or.authenticated(o,e,r)},async(o,e)=>{let{findAuthenticatedUserCertificationsController:r}=Mg();await r.handle(o,e)});He.get("/pendencies",(o,e,r)=>{Or.authenticated(o,e,r)},async(o,e)=>{let{findAuthenticatedUserPendenciesController:r}=Pg();await r.handle(o,e)});import{Router as pw}from"express";import{extendZodWithOpenApi as tw}from"@asteasolutions/zod-to-openapi";import Pe from"zod";var rw=5,Ag=1024,ow=Ag*Ag,gp=rw*ow;tw(Pe);var iw=Pe.object({volumeNumber:Pe.coerce.number().int().positive("N\xFAmero do volume \xE9 obrigat\xF3rio."),year:Pe.coerce.number().int().positive("Ano \xE9 obrigat\xF3rio."),title:Pe.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),author:Pe.string().min(1,"Autor \xE9 obrigat\xF3rio."),accessUrl:Pe.url().optional(),description:Pe.string().optional(),authorImage:Pe.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=gp,"A imagem do autor deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB."),coverImage:Pe.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=gp,"A imagem da capa deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB."),catalogSheet:Pe.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&typeof o.size=="number"&&o.size<=gp,"A ficha catalogr\xE1fica deve ter no m\xE1ximo 5MB.")}),is=class{constructor(e,r){this.bookVolumeRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{volumeNumber:t,year:i,title:n,author:s,accessUrl:a,description:c,authorImage:d,coverImage:h,catalogSheet:j}=iw.parse({...e.body,authorImage:e.files?.authorImage?.[0],coverImage:e.files?.coverImage?.[0],catalogSheet:e.files?.catalogSheet?.[0]}),q=await this.bookVolumeRepository.create({volumeNumber:t,year:i,title:n,author:s,accessUrl:a,description:c}),X=q.authorImageUrl,Q=q.coverImageUrl,ue=q.catalogSheetUrl;return X=await this.firebaseStorageService.uploadFile({file:d,folder:M.BOOK_VOLUME_AUTHOR_IMAGE,id:q.id}),Q=await this.firebaseStorageService.uploadFile({file:h,folder:M.BOOK_VOLUME_COVER,id:q.id}),ue=await this.firebaseStorageService.uploadFile({file:j,folder:M.BOOK_VOLUME_CATALOG_SHEET,id:q.id}),await this.bookVolumeRepository.update({id:q.id,authorImageUrl:X,coverImageUrl:Q,catalogSheetUrl:ue}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var ns=class{constructor(e){this.prisma=e}async create({volumeNumber:e,year:r,title:t,author:i,accessUrl:n,authorImageUrl:s,coverImageUrl:a,catalogSheetUrl:c,description:d}){return await this.prisma.bookVolume.create({data:{volumeNumber:e,year:r,title:t,author:i,accessUrl:n,authorImageUrl:s,coverImageUrl:a,catalogSheetUrl:c,description:d}})}async find({pagination:{offset:e,limit:r},filter:{title:t,author:i,description:n,orderBy:s}}){let a={},c=[];return t&&c.push({title:{contains:t,mode:"insensitive"}}),i&&c.push({author:{contains:i,mode:"insensitive"}}),n&&c.push({description:{contains:n,mode:"insensitive"}}),c.length>0&&(a.OR=c),await this.prisma.bookVolume.findMany({where:a,orderBy:{updatedAt:s},skip:e,take:r})}async findById(e){return await this.prisma.bookVolume.findFirst({where:{id:e}})}async update({id:e,volumeNumber:r,year:t,title:i,author:n,accessUrl:s,authorImageUrl:a,coverImageUrl:c,catalogSheetUrl:d,description:h}){await this.prisma.bookVolume.update({where:{id:e},data:{volumeNumber:r,year:t,title:i,author:n,accessUrl:s,authorImageUrl:a,coverImageUrl:c,catalogSheetUrl:d,description:h}})}async deleteById(e){await this.prisma.bookVolume.delete({where:{id:e}})}async count({filter:{title:e,author:r,description:t}}){let i={},n=[];return e&&n.push({title:{contains:e,mode:"insensitive"}}),r&&n.push({author:{contains:r,mode:"insensitive"}}),t&&n.push({description:{contains:t,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.bookVolume.count({where:i})}};function nr(){return new ns(_)}import{getStorage as sw}from"firebase-admin/storage";import{config as nw}from"dotenv";import Tg from"firebase-admin";nw();var fp=Tg.initializeApp({credential:Tg.credential.cert({clientEmail:ce.FIREBASE_CLIENT_EMAIL,privateKey:ce.FIREBASE_PRIVATE_KEY,projectId:ce.FIREBASE_PROJECT_ID,type:ce.FIREBASE_TYPE,privateKeyId:ce.FIREBASE_PRIVATE_KEY_ID,clientId:ce.FIREBASE_CLIENT_ID,authUri:ce.FIREBASE_AUTH_URI,tokenUri:ce.FIREBASE_TOKEN_URI,authProviderX509CertUrl:ce.FIREBASE_AUTH_PROVIDER_X509_CERT_URL,clientX509CertUrl:ce.FIREBASE_CLIENT_X509_CERT_URL}),storageBucket:ce.FIREBASE_BUCKET});fp.name?console.log("\u{1F525} Firebase conectado com sucesso!"):console.error("\u274C Erro ao se conectar ao Firebase.");var aw=sw(fp),Dg=aw.bucket(ce.FIREBASE_BUCKET);import{randomUUID as mw}from"node:crypto";var cw=/https:\/\/storage\.googleapis\.com\/[^/]+\/(.+)$/,ss=class{constructor(e){this.bucket=e}async uploadFile({file:e,folder:r,id:t}){let i=`${mw()}-${e?.originalname}`,n=this.bucket.file(`${r}/${t}/${i}`);return await new Promise((s,a)=>{let c=n.createWriteStream({metadata:{contentType:e?.mimetype}});c.on("error",d=>{a(d)}),c.on("finish",async()=>{try{await n.makePublic();let d=`https://storage.googleapis.com/${this.bucket.name}/${n.name}`;s(d)}catch(d){a(d)}}),c.end(e.buffer)})}async updateFile({file:e,id:r,fileUrl:t,folder:i}){try{let n=this.getPath(t);if(!n)throw new Error("Arquivo n\xE3o encontrado.");let[s,a]=await Promise.all([this.bucket.file(n).delete(),this.uploadFile({file:e,id:r,folder:i})]);return a}catch{throw new Error("Erro ao atualizar o arquivo.")}}async deleteFile({fileUrl:e}){let r=this.getPath(e);if(!r)throw new Error("Arquivo n\xE3o encontrado.");try{await this.bucket.file(r).delete()}catch{throw new Error("Erro ao deletar o arquivo.")}}getPath(e){let r=e.match(cw);return r?r[1]:null}};function F(){return new ss(Dg)}function Fg(){return{createBookVolumeController:new is(nr(),F())}}function Bg(){return{findBookVolumesController:new so(nr())}}function Ug(){return{findBookVolumeByIdController:new no(nr())}}function qg(){return{updateBookVolumeController:new mo(nr(),F())}}function kg(){return{deleteBookVolumeController:new io(nr(),F())}}import Og from"multer";var H=Og({storage:Og.memoryStorage()});var Pt=pw(),{authMiddleware:Nr}=V();Pt.post("/",(o,e,r)=>{Nr.isAdmin(o,e,r)},H.fields([{name:"authorImage",maxCount:1},{name:"coverImage",maxCount:1},{name:"catalogSheet",maxCount:1}]),async(o,e)=>{let{createBookVolumeController:r}=Fg();await r.handle(o,e)});Pt.get("/",(o,e,r)=>{Nr.isAdmin(o,e,r)},async(o,e)=>{let{findBookVolumesController:r}=Bg();await r.handle(o,e)});Pt.get("/:id",(o,e,r)=>{Nr.isAdmin(o,e,r)},async(o,e)=>{let{findBookVolumeByIdController:r}=Ug();await r.handle(o,e)});Pt.put("/:id",(o,e,r)=>{Nr.isAdmin(o,e,r)},H.fields([{name:"authorImage",maxCount:1},{name:"coverImage",maxCount:1},{name:"catalogSheet",maxCount:1}]),async(o,e)=>{let{updateBookVolumeController:r}=qg();await r.handle(o,e)});Pt.delete("/:id",(o,e,r)=>{Nr.isAdmin(o,e,r)},async(o,e)=>{let{deleteBookVolumeController:r}=kg();await r.handle(o,e)});import{Router as dw}from"express";function Ng(){return{registerCertificationController:new uo(fe(),ft(),F())}}function Gg(){return{findCertificationsController:new lo(ft())}}function Lg(){return{findCertificationByIdController:new po(ft())}}function Wg(){return{updateCertificationController:new fo(ft(),F())}}function _g(){return{deleteCertificationController:new co(ft(),F())}}var At=dw(),{authMiddleware:Gr}=V();At.post("/:user_id",(o,e,r)=>{Gr.isAdmin(o,e,r)},H.single("certification"),async(o,e)=>{let{registerCertificationController:r}=Ng();await r.handle(o,e)});At.get("/",(o,e,r)=>{Gr.isAdmin(o,e,r)},async(o,e)=>{let{findCertificationsController:r}=Gg();await r.handle(o,e)});At.get("/:certification_id",(o,e,r)=>{Gr.isAdmin(o,e,r)},async(o,e)=>{let{findCertificationByIdController:r}=Lg();await r.handle(o,e)});At.put("/:certification_id",(o,e,r)=>{Gr.isAdmin(o,e,r)},H.single("certification"),async(o,e)=>{let{updateCertificationController:r}=Wg();await r.handle(o,e)});At.delete("/:certification_id",(o,e,r)=>{Gr.isAdmin(o,e,r)},async(o,e)=>{let{deleteCertificationController:r}=_g();await r.handle(o,e)});import{Router as hw}from"express";import{extendZodWithOpenApi as lw}from"@asteasolutions/zod-to-openapi";import he from"zod";var uw=5,zg=1024,gw=zg*zg,fw=uw*gw;lw(he);var yw=he.object({title:he.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),coordinatorId:he.string().uuid("Coordenador \xE9 obrigat\xF3rio."),email:he.email("E-mail deve ser v\xE1lido."),location:he.string().min(1,"Localiza\xE7\xE3o \xE9 obrigat\xF3ria."),scheduledAt:he.coerce.date(),registrationLink:he.url().optional(),description:he.string().optional(),instructorIds:he.transform(o=>typeof o=="string"?o.split(","):o).pipe(he.array(he.uuid())),image:he.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=fw,"A imagem deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.")}),as=class{constructor(e,r){this.courseRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{title:t,coordinatorId:i,email:n,location:s,scheduledAt:a,registrationLink:c,description:d,instructorIds:h,image:j}=yw.parse({...e.body,image:e.file}),q=await this.courseRepository.create({title:t,coordinatorId:i,email:n,location:s,scheduledAt:a,registrationLink:c||void 0,description:d,instructorIds:h}),X=await this.firebaseStorageService.uploadFile({file:j,folder:M.COURSE,id:q.id});return await this.courseRepository.update({id:q.id,imageUrl:X}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var ms=class{constructor(e){this.prisma=e}async create({title:e,imageUrl:r,coordinatorId:t,email:i,instructorIds:n,scheduledAt:s,location:a,registrationLink:c,description:d}){return await this.prisma.course.create({data:{title:e,imageUrl:r,coordinatorId:t,email:i,scheduledAt:s,location:a,registrationLink:c,description:d,instructors:{connect:n?.map(h=>({id:h}))}}})}async find({pagination:{offset:e,limit:r},filter:{description:t,orderBy:i,title:n,coordinator:s}}){let a={},c=[];return n&&c.push({title:{contains:n,mode:"insensitive"}}),t&&c.push({description:{contains:t,mode:"insensitive"}}),s&&c.push({coordinator:{name:{contains:s,mode:"insensitive"}}}),c.length>0&&(a.OR=c),await this.prisma.course.findMany({where:a,include:{coordinator:{omit:{passwordHash:!0}},instructors:{omit:{passwordHash:!0}}},orderBy:{updatedAt:i},skip:e,take:r})}async findById(e){return await this.prisma.course.findFirst({where:{id:e},include:{coordinator:{omit:{passwordHash:!0}},instructors:{omit:{passwordHash:!0}}}})}async update({id:e,title:r,imageUrl:t,coordinatorId:i,email:n,instructorIds:s,scheduledAt:a,location:c,registrationLink:d,description:h}){s!==void 0&&await this.prisma.course.update({where:{id:e},data:{instructors:{set:[]}}}),await this.prisma.course.update({where:{id:e},data:{title:r,imageUrl:t,coordinatorId:i,email:n,scheduledAt:a,location:c,registrationLink:d,description:h,...s?.length>0&&{instructors:{connect:s.map(j=>({id:j}))}}}})}async deleteById(e){await this.prisma.course.delete({where:{id:e}})}async count({filter:{description:e,title:r,coordinator:t}}){let i={},n=[];return r&&n.push({title:{contains:r,mode:"insensitive"}}),e&&n.push({description:{contains:e,mode:"insensitive"}}),t&&n.push({coordinator:{name:{contains:t,mode:"insensitive"}}}),n.length>0&&(i.OR=n),await this.prisma.course.count({where:i})}};function sr(){return new ms(_)}function Hg(){return{createCourseController:new as(sr(),F())}}function Vg(){return{findCoursesController:new Io(sr())}}function Zg(){return{findCourseByIdController:new Ro(sr())}}function Kg(){return{updateCourseController:new bo(sr(),F())}}function Jg(){return{deleteCourseController:new ho(sr(),F())}}var Tt=hw(),{authMiddleware:Lr}=V();Tt.post("/",(o,e,r)=>{Lr.isAdmin(o,e,r)},H.single("image"),async(o,e)=>{let{createCourseController:r}=Hg();await r.handle(o,e)});Tt.get("/",(o,e,r)=>{Lr.isAdmin(o,e,r)},async(o,e)=>{let{findCoursesController:r}=Vg();await r.handle(o,e)});Tt.get("/:id",(o,e,r)=>{Lr.isAdmin(o,e,r)},async(o,e)=>{let{findCourseByIdController:r}=Zg();await r.handle(o,e)});Tt.put("/:id",(o,e,r)=>{Lr.isAdmin(o,e,r)},H.single("image"),async(o,e)=>{let{updateCourseController:r}=Kg();await r.handle(o,e)});Tt.delete("/:id",(o,e,r)=>{Lr.isAdmin(o,e,r)},async(o,e)=>{let{deleteCourseController:r}=Jg();await r.handle(o,e)});import{Router as Sw}from"express";import{extendZodWithOpenApi as Rw}from"@asteasolutions/zod-to-openapi";import Ve from"zod";var Iw=1,bw=9;Rw(Ve);var Cw=Ve.object({page:Ve.coerce.number().min(1).default(Iw),limit:Ve.coerce.number().min(1).default(bw),code:Ve.string().optional(),title:Ve.string().optional(),description:Ve.string().optional(),notes:Ve.string().optional(),orderBy:Ve.enum(["asc","desc"]).default("desc")}),cs=class{constructor(e){this.etpRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=Cw.parse(e.query),s=i*t-i,[a,c]=await Promise.all([this.etpRepository.find({pagination:{offset:s,limit:i},filter:n}),this.etpRepository.count({filter:n})]),d=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:d,offset:s,limit:i,etps:a})}catch(t){if(t instanceof Error)throw new m(t.message)}}};var ps=class{constructor(e){this.prisma=e}async create(e){let{leaderId:r,deputyLeaderId:t,secretaryId:i,memberIds:n,...s}=e;await this.prisma.$transaction(async a=>{let c=await a.eTP.create({data:s});await a.eTPLeader.create({data:{etpId:c.id,researcherId:r}}),await a.eTPDeputy.create({data:{etpId:c.id,researcherId:t}}),await a.eTPSecretary.create({data:{etpId:c.id,researcherId:i}}),await a.eTP.update({where:{id:c.id},data:{members:{connect:n.map(d=>({id:d}))}}})})}async update(e){let{leaderId:r,deputyLeaderId:t,secretaryId:i,memberIds:n,...s}=e;await this.prisma.$transaction(async a=>{await a.eTP.update({where:{id:e.id},data:s}),await this.updateLeader(a,e.id,r),await this.updateDeputyLeader(a,e.id,t),await this.updateSecretary(a,e.id,i),await this.updateMembers(a,e.id,n)})}async updateLeader(e,r,t){t!==void 0&&(await e.eTPLeader.deleteMany({where:{etpId:r}}),t&&await e.eTPLeader.create({data:{etpId:r,researcherId:t}}))}async updateDeputyLeader(e,r,t){t!==void 0&&(await e.eTPDeputy.deleteMany({where:{etpId:r}}),t&&await e.eTPDeputy.create({data:{etpId:r,researcherId:t}}))}async updateSecretary(e,r,t){t!==void 0&&(await e.eTPSecretary.deleteMany({where:{etpId:r}}),t&&await e.eTPSecretary.create({data:{etpId:r,researcherId:t}}))}async updateMembers(e,r,t){t!==void 0&&await e.eTP.update({where:{id:r},data:{members:{set:t.map(i=>({id:i}))}}})}async deleteById(e){await this.prisma.eTP.delete({where:{id:e}})}async find({pagination:{offset:e,limit:r},filter:{code:t,title:i,description:n,notes:s,orderBy:a}}){let c={},d=[];return t&&d.push({code:{contains:t,mode:"insensitive"}}),i&&d.push({title:{contains:i,mode:"insensitive"}}),n&&d.push({description:{contains:n,mode:"insensitive"}}),s&&d.push({notes:{contains:s,mode:"insensitive"}}),d.length>0&&(c.OR=d),await this.prisma.eTP.findMany({where:c,include:{leader:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},deputyLeader:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},secretary:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},members:{include:{user:{omit:{passwordHash:!0}}}}},orderBy:{updatedAt:a},skip:e,take:r})}async findById(e){return await this.prisma.eTP.findFirst({where:{id:e},include:{leader:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},deputyLeader:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},secretary:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},members:{include:{user:{omit:{passwordHash:!0}}}}}})}async findByCode(e){return await this.prisma.eTP.findFirst({where:{code:e},include:{leader:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},deputyLeader:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},secretary:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},members:{include:{user:{omit:{passwordHash:!0}}}}}})}async count({filter:{code:e,title:r,description:t,notes:i}}){let n={},s=[];return e&&s.push({code:{contains:e,mode:"insensitive"}}),r&&s.push({title:{contains:r,mode:"insensitive"}}),t&&s.push({description:{contains:t,mode:"insensitive"}}),i&&s.push({notes:{contains:i,mode:"insensitive"}}),s.length>0&&(n.OR=s),await this.prisma.eTP.count({where:n})}};function ar(){return new ps(_)}function Yg(){return{createETPController:new Co(ar())}}function Xg(){return{findETPsController:new cs(ar())}}function $g(){return{findETPByIdController:new wo(ar())}}function Qg(){return{updateETPController:new Eo(ar())}}function ef(){return{deleteETPController:new So(ar())}}var Dt=Sw(),{authMiddleware:yp}=V();Dt.post("/",(o,e,r)=>{yp.authenticated(o,e,r)},async(o,e)=>{let{createETPController:r}=Yg();await r.handle(o,e)});Dt.get("/",async(o,e)=>{let{findETPsController:r}=Xg();await r.handle(o,e)});Dt.get("/:id",async(o,e)=>{let{findETPByIdController:r}=$g();await r.handle(o,e)});Dt.put("/:id",(o,e,r)=>{yp.authenticated(o,e,r)},async(o,e)=>{let{updateETPController:r}=Qg();await r.handle(o,e)});Dt.delete("/:id",(o,e,r)=>{yp.authenticated(o,e,r)},async(o,e)=>{let{deleteETPController:r}=ef();await r.handle(o,e)});import{Router as ww}from"express";var ds=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.event.create({data:e})}async update(e){await this.prisma.event.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.event.delete({where:{id:e}})}async find({pagination:{offset:e,limit:r},filter:{title:t,status:i,format:n,orderBy:s}}){let a={},c=[];return i&&(a.status=i),n&&(a.format=n),t&&c.push({title:{contains:t,mode:"insensitive"}}),c.length>0&&(a.OR=c),await this.prisma.event.findMany({where:a,orderBy:s?{startDate:s}:{startDate:"desc"},skip:e,take:r})}async findById(e){return await this.prisma.event.findFirst({where:{id:e}})}async count({filter:{title:e,status:r,format:t}}){let i={},n=[];return r&&(i.status=r),t&&(i.format=t),e&&n.push({title:{contains:e,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.event.count({where:i})}};function mr(){return new ds(_)}function tf(){return{createEventController:new Mo(mr(),F())}}function rf(){return{findEventsController:new Do(mr())}}function of(){return{findEventByIdController:new Ao(mr())}}function nf(){return{updateEventController:new Fo(mr(),F())}}function sf(){return{deleteEventController:new Po(mr())}}var Ft=ww(),{authMiddleware:hp}=V();Ft.post("/",(o,e,r)=>{hp.authenticated(o,e,r)},H.single("image"),async(o,e)=>{let{createEventController:r}=tf();await r.handle(o,e)});Ft.get("/",async(o,e)=>{let{findEventsController:r}=rf();await r.handle(o,e)});Ft.get("/:id",async(o,e)=>{let{findEventByIdController:r}=of();await r.handle(o,e)});Ft.put("/:id",(o,e,r)=>{hp.authenticated(o,e,r)},H.single("image"),async(o,e)=>{let{updateEventController:r}=nf();await r.handle(o,e)});Ft.delete("/:id",(o,e,r)=>{hp.authenticated(o,e,r)},async(o,e)=>{let{deleteEventController:r}=sf();await r.handle(o,e)});import{Router as vw}from"express";var ls=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.inMemoriam.create({data:e})}async update(e){await this.prisma.inMemoriam.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.inMemoriam.delete({where:{id:e}})}async find({pagination:{offset:e,limit:r},filter:{name:t,biography:i,role:n,orderBy:s}}){let a={},c=[];return n&&(a.role=n),t&&c.push({name:{contains:t,mode:"insensitive"}}),i&&c.push({biography:{contains:i,mode:"insensitive"}}),c.length>0&&(a.OR=c),await this.prisma.inMemoriam.findMany({where:a,orderBy:{updatedAt:s},skip:e,take:r})}async findById(e){return await this.prisma.inMemoriam.findFirst({where:{id:e}})}async findByRole(e){return await this.prisma.inMemoriam.findMany({where:{role:e}})}async count({filter:{name:e,biography:r,role:t}}){let i={},n=[];return t&&(i.role=t),e&&n.push({name:{contains:e,mode:"insensitive"}}),r&&n.push({biography:{contains:r,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.inMemoriam.count({where:i})}};function Bt(){return new ls(_)}function af(){return{createInMemoriamController:new Bo(Bt(),F())}}function mf(){return{findInMemoriamsController:new No(Bt())}}function cf(){return{findInMemoriamByIdController:new qo(Bt())}}function pf(){return{findInMemoriamByRoleController:new Oo(Bt())}}function df(){return{updateInMemoriamController:new Go(Bt(),F())}}function lf(){return{deleteInMemoriamController:new Uo(Bt(),F())}}var ht=vw(),{authMiddleware:Rp}=V();ht.post("/",(o,e,r)=>{Rp.authenticated(o,e,r)},H.single("photo"),async(o,e)=>{let{createInMemoriamController:r}=af();await r.handle(o,e)});ht.get("/",async(o,e)=>{let{findInMemoriamsController:r}=mf();await r.handle(o,e)});ht.get("/:id",async(o,e)=>{let{findInMemoriamByIdController:r}=cf();await r.handle(o,e)});ht.get("/role/:role",async(o,e)=>{let{findInMemoriamByRoleController:r}=pf();await r.handle(o,e)});ht.put("/:id",(o,e,r)=>{Rp.authenticated(o,e,r)},H.single("photo"),async(o,e)=>{let{updateInMemoriamController:r}=df();await r.handle(o,e)});ht.delete("/:id",(o,e,r)=>{Rp.authenticated(o,e,r)},async(o,e)=>{let{deleteInMemoriamController:r}=lf();await r.handle(o,e)});import{Router as Ew}from"express";var Ip=Ew();Ip.get("/",(o,e)=>{e.status(200).json({message:"Rede CT"})});import{Router as Aw}from"express";var us=class{constructor(e){this.prisma=e}async create(e){await this.prisma.internationalScientificCongress.create({data:e})}async update(e){await this.prisma.internationalScientificCongress.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.internationalScientificCongress.delete({where:{id:e}})}async find({pagination:{offset:e,limit:r},filter:{title:t,edition:i,location:n,orderBy:s}}){let a={},c=[];return i&&c.push({edition:{equals:i}}),t&&c.push({title:{contains:t,mode:"insensitive"}}),n&&c.push({location:{contains:n,mode:"insensitive"}}),c.length>0&&(a.OR=c),await this.prisma.internationalScientificCongress.findMany({where:a,include:{partners:!0,galleries:!0},orderBy:s?{startDate:s}:{startDate:"desc"},skip:e,take:r})}async findById(e){return await this.prisma.internationalScientificCongress.findFirst({where:{id:e},include:{partners:!0,galleries:!0}})}async findByEdition(e){return await this.prisma.internationalScientificCongress.findMany({where:{edition:e},include:{partners:!0,galleries:!0}})}async count({filter:{title:e,edition:r,location:t}}){let i={},n=[];return r&&n.push({edition:{equals:r}}),e&&n.push({title:{contains:e,mode:"insensitive"}}),t&&n.push({location:{contains:t,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.internationalScientificCongress.count({where:i})}};function Ae(){return new us(_)}function uf(){return{createInternationalScientificCongressController:new Xo(Ae())}}function gf(){return{findInternationalScientificCongressesController:new ri(Ae())}}function ff(){return{findInternationalScientificCongressByIdController:new ei(Ae())}}function yf(){return{findInternationalScientificCongressByEditionController:new Qo(Ae())}}function hf(){return{updateInternationalScientificCongressController:new oi(Ae())}}function Rf(){return{deleteInternationalScientificCongressController:new $o(Ae())}}import{extendZodWithOpenApi as jw}from"@asteasolutions/zod-to-openapi";import bp from"zod";jw(bp);var xw=bp.object({id:bp.uuid()}),gs=class{constructor(e){this.internationalScientificCongressGalleryRepository=e}async handle(e,r){try{let{id:t}=xw.parse({id:e.params.id}),i=await this.internationalScientificCongressGalleryRepository.findById(t);if(!i)throw new p("A imagem da galeria n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var fs=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.internationalScientificCongressGalleryItem.create({data:e})}async update(e){await this.prisma.internationalScientificCongressGalleryItem.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.internationalScientificCongressGalleryItem.delete({where:{id:e}})}async findByCongressId(e){let{pagination:r,filter:t}=e;return await this.prisma.internationalScientificCongressGalleryItem.findMany({where:{congressId:t.congressId,...t.caption&&{caption:{contains:t.caption,mode:"insensitive"}}},skip:r.offset,take:r.limit})}async findById(e){return await this.prisma.internationalScientificCongressGalleryItem.findFirst({where:{id:e}})}async count(e){let{filter:r}=e;return await this.prisma.internationalScientificCongressGalleryItem.count({where:{congressId:r.congressId,...r.caption&&{caption:{contains:r.caption,mode:"insensitive"}}}})}};function cr(){return new fs(_)}function If(){return{createInternationalScientificCongressGalleryController:new Lo(cr(),Ae(),F())}}function bf(){return{findInternationalScientificCongressGalleriesByCongressIdController:new zo(cr())}}function Cf(){return{findInternationalScientificCongressGalleryByIdController:new gs(cr())}}function Sf(){return{updateInternationalScientificCongressGalleryController:new Ho(cr(),F())}}function wf(){return{deleteInternationalScientificCongressGalleryController:new Wo(cr())}}import{extendZodWithOpenApi as Mw}from"@asteasolutions/zod-to-openapi";import Cp from"zod";Mw(Cp);var Pw=Cp.object({id:Cp.uuid()}),ys=class{constructor(e){this.internationalScientificCongressPartnerRepository=e}async handle(e,r){try{let{id:t}=Pw.parse({id:e.params.id}),i=await this.internationalScientificCongressPartnerRepository.findById(t);if(!i)throw new p("O parceiro n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var hs=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.internationalScientificCongressPartner.create({data:e})}async update(e){await this.prisma.internationalScientificCongressPartner.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.internationalScientificCongressPartner.delete({where:{id:e}})}async findByCongressId(e){return await this.prisma.internationalScientificCongressPartner.findMany({where:{congressId:e.filter.congressId,name:e.filter.name?{contains:e.filter.name,mode:"insensitive"}:void 0},skip:e.pagination?.offset,take:e.pagination?.limit})}async findById(e){return await this.prisma.internationalScientificCongressPartner.findFirst({where:{id:e}})}async count(e){return await this.prisma.internationalScientificCongressPartner.count({where:{congressId:e.filter.congressId,name:e.filter.name?{contains:e.filter.name,mode:"insensitive"}:void 0}})}};function pr(){return new hs(_)}function vf(){return{createInternationalScientificCongressPartnerController:new Vo(pr(),Ae(),F())}}function Ef(){return{findInternationalScientificCongressPartnersByCongressIdController:new Jo(pr())}}function jf(){return{findInternationalScientificCongressPartnerByIdController:new ys(pr())}}function xf(){return{updateInternationalScientificCongressPartnerController:new Yo(pr(),F())}}function Mf(){return{deleteInternationalScientificCongressPartnerController:new Zo(pr())}}var se=Aw(),{authMiddleware:Ze}=V();se.post("/",(o,e,r)=>{Ze.authenticated(o,e,r)},async(o,e)=>{let{createInternationalScientificCongressController:r}=uf();await r.handle(o,e)});se.get("/",async(o,e)=>{let{findInternationalScientificCongressesController:r}=gf();await r.handle(o,e)});se.get("/:id",async(o,e)=>{let{findInternationalScientificCongressByIdController:r}=ff();await r.handle(o,e)});se.get("/edition/:edition",async(o,e)=>{let{findInternationalScientificCongressByEditionController:r}=yf();await r.handle(o,e)});se.put("/:id",(o,e,r)=>{Ze.authenticated(o,e,r)},async(o,e)=>{let{updateInternationalScientificCongressController:r}=hf();await r.handle(o,e)});se.delete("/:id",(o,e,r)=>{Ze.authenticated(o,e,r)},async(o,e)=>{let{deleteInternationalScientificCongressController:r}=Rf();await r.handle(o,e)});se.post("/:congressId/gallery",(o,e,r)=>{Ze.authenticated(o,e,r)},H.single("image"),async(o,e)=>{let{createInternationalScientificCongressGalleryController:r}=If();await r.handle(o,e)});se.get("/:congressId/gallery",async(o,e)=>{let{findInternationalScientificCongressGalleriesByCongressIdController:r}=bf();await r.handle(o,e)});se.get("/gallery/:id",async(o,e)=>{let{findInternationalScientificCongressGalleryByIdController:r}=Cf();await r.handle(o,e)});se.put("/gallery/:id",(o,e,r)=>{Ze.authenticated(o,e,r)},H.single("image"),async(o,e)=>{let{updateInternationalScientificCongressGalleryController:r}=Sf();await r.handle(o,e)});se.delete("/gallery/:id",(o,e,r)=>{Ze.authenticated(o,e,r)},async(o,e)=>{let{deleteInternationalScientificCongressGalleryController:r}=wf();await r.handle(o,e)});se.post("/:congressId/partner",(o,e,r)=>{Ze.authenticated(o,e,r)},H.single("logo"),async(o,e)=>{let{createInternationalScientificCongressPartnerController:r}=vf();await r.handle(o,e)});se.get("/:congressId/partner",async(o,e)=>{let{findInternationalScientificCongressPartnersByCongressIdController:r}=Ef();await r.handle(o,e)});se.get("/partner/:id",async(o,e)=>{let{findInternationalScientificCongressPartnerByIdController:r}=jf();await r.handle(o,e)});se.put("/partner/:id",(o,e,r)=>{Ze.authenticated(o,e,r)},H.single("logo"),async(o,e)=>{let{updateInternationalScientificCongressPartnerController:r}=xf();await r.handle(o,e)});se.delete("/partner/:id",(o,e,r)=>{Ze.authenticated(o,e,r)},async(o,e)=>{let{deleteInternationalScientificCongressPartnerController:r}=Mf();await r.handle(o,e)});import{Router as Fw}from"express";import{extendZodWithOpenApi as Tw}from"@asteasolutions/zod-to-openapi";import Rs from"zod";Tw(Rs);var Dw=Rs.object({role:Rs.string().optional(),orderBy:Rs.enum(["asc","desc"]).optional()}),Is=class{constructor(e){this.legitimatorCommitteeMemberRepository=e}async handle(e,r){try{let t=Dw.parse(e.query),i=await this.legitimatorCommitteeMemberRepository.find({filter:t});r.status(200).json({members:i})}catch(t){if(t instanceof Error)throw new m(t.message)}}};var bs=class{constructor(e){this.prisma=e}async create(e){await this.prisma.legitimatorCommitteeMember.create({data:{...e,order:e.order??0}})}async update(e){let{id:r,...t}=e;await this.prisma.legitimatorCommitteeMember.update({where:{id:r},data:t})}async deleteById(e){await this.prisma.legitimatorCommitteeMember.delete({where:{id:e}})}async find({filter:{role:e,orderBy:r}}){let t={};return e&&(t.role={contains:e,mode:"insensitive"}),await this.prisma.legitimatorCommitteeMember.findMany({where:t,include:{user:{omit:{passwordHash:!0}}},orderBy:r?[{order:"asc"},{updatedAt:r}]:[{order:"asc"},{updatedAt:"desc"}]})}async findById(e){return await this.prisma.legitimatorCommitteeMember.findFirst({where:{id:e},include:{user:{omit:{passwordHash:!0}}}})}async count({filter:{role:e}}){let r={};return e&&(r.role={contains:e,mode:"insensitive"}),await this.prisma.legitimatorCommitteeMember.count({where:r})}};function dr(){return new bs(_)}function Pf(){return{createLegitimatorCommitteeMemberController:new ii(dr())}}function Af(){return{findLegitimatorCommitteeMembersController:new Is(dr())}}function Tf(){return{findLegitimatorCommitteeMemberByIdController:new si(dr())}}function Df(){return{updateLegitimatorCommitteeMemberController:new mi(dr())}}function Ff(){return{deleteLegitimatorCommitteeMemberController:new ni(dr())}}var Ut=Fw(),{authMiddleware:Sp}=V();Ut.post("/",(o,e,r)=>{Sp.authenticated(o,e,r)},async(o,e)=>{let{createLegitimatorCommitteeMemberController:r}=Pf();await r.handle(o,e)});Ut.get("/",async(o,e)=>{let{findLegitimatorCommitteeMembersController:r}=Af();await r.handle(o,e)});Ut.get("/:id",async(o,e)=>{let{findLegitimatorCommitteeMemberByIdController:r}=Tf();await r.handle(o,e)});Ut.put("/:id",(o,e,r)=>{Sp.authenticated(o,e,r)},async(o,e)=>{let{updateLegitimatorCommitteeMemberController:r}=Df();await r.handle(o,e)});Ut.delete("/:id",(o,e,r)=>{Sp.authenticated(o,e,r)},async(o,e)=>{let{deleteLegitimatorCommitteeMemberController:r}=Ff();await r.handle(o,e)});import{Router as qw}from"express";import{extendZodWithOpenApi as Bw}from"@asteasolutions/zod-to-openapi";import Wr from"zod";Bw(Wr);var Uw=Wr.object({name:Wr.string().optional(),description:Wr.string().optional(),orderBy:Wr.enum(["asc","desc"]).default("desc")}),Cs=class{constructor(e){this.managementTeamRepository=e}async handle(e,r){try{let t=Uw.parse(e.query),i=await this.managementTeamRepository.find({filter:t});r.status(200).json({teams:i})}catch(t){if(t instanceof Error)throw new m(t.message)}}};var Ss=class{constructor(e){this.prisma=e}async create(e){let{members:r,...t}=e;await this.prisma.$transaction(async i=>{let n=await i.managementTeam.create({data:t});return await i.managementTeamMember.createMany({data:r.map(({userId:s,role:a,order:c})=>({teamId:n.id,userId:s,role:a,order:c??0}))}),n})}async update(e){let{members:r,...t}=e;await this.prisma.$transaction(async i=>{let n=await i.managementTeam.update({where:{id:e.id},data:t});return r!==void 0&&(await i.managementTeamMember.deleteMany({where:{teamId:e.id}}),r.length>0&&await i.managementTeamMember.createMany({data:r.map(({userId:s,role:a,order:c})=>({teamId:e.id,userId:s,role:a,order:c??0}))})),n})}async deleteById(e){await this.prisma.managementTeam.delete({where:{id:e}})}async find({filter:{name:e,description:r,orderBy:t}}){let i={},n=[];return e&&n.push({name:{contains:e,mode:"insensitive"}}),r&&n.push({description:{contains:r,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.managementTeam.findMany({where:i,include:{members:{include:{user:{omit:{passwordHash:!0}}},orderBy:{order:"asc"}}},orderBy:{updatedAt:t}})}async findById(e){return await this.prisma.managementTeam.findFirst({where:{id:e},include:{members:{include:{user:{omit:{passwordHash:!0}}},orderBy:{order:"asc"}}}})}async findByName(e){return await this.prisma.managementTeam.findFirst({where:{name:e},include:{members:{include:{user:{omit:{passwordHash:!0}}},orderBy:{order:"asc"}}}})}async count({filter:{name:e,description:r}}){let t={},i=[];return e&&i.push({name:{contains:e,mode:"insensitive"}}),r&&i.push({description:{contains:r,mode:"insensitive"}}),i.length>0&&(t.OR=i),await this.prisma.managementTeam.count({where:t})}};function lr(){return new Ss(_)}function Bf(){return{createManagementTeamController:new ci(lr())}}function Uf(){return{findManagementTeamsController:new Cs(lr())}}function qf(){return{findManagementTeamByIdController:new di(lr())}}function kf(){return{updateManagementTeamController:new ui(lr())}}function Of(){return{deleteManagementTeamController:new pi(lr())}}var qt=qw(),{authMiddleware:wp}=V();qt.post("/",(o,e,r)=>{wp.authenticated(o,e,r)},async(o,e)=>{let{createManagementTeamController:r}=Bf();await r.handle(o,e)});qt.get("/",async(o,e)=>{let{findManagementTeamsController:r}=Uf();await r.handle(o,e)});qt.get("/:id",async(o,e)=>{let{findManagementTeamByIdController:r}=qf();await r.handle(o,e)});qt.put("/:id",(o,e,r)=>{wp.authenticated(o,e,r)},async(o,e)=>{let{updateManagementTeamController:r}=kf();await r.handle(o,e)});qt.delete("/:id",(o,e,r)=>{wp.authenticated(o,e,r)},async(o,e)=>{let{deleteManagementTeamController:r}=Of();await r.handle(o,e)});import{Router as Nw}from"express";var ws=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.meeting.create({data:e})}async update(e){await this.prisma.meeting.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.meeting.delete({where:{id:e}})}async find({pagination:{offset:e,limit:r},filter:{title:t,format:i,status:n,orderBy:s}}){let a={},c=[];return i&&(a.format=i),n&&(a.status=n),t&&c.push({title:{contains:t,mode:"insensitive"}}),c.length>0&&(a.OR=c),await this.prisma.meeting.findMany({where:a,include:{minutes:!0},orderBy:s?{scheduledAt:s}:{scheduledAt:"desc"},skip:e,take:r})}async findById(e){return await this.prisma.meeting.findFirst({where:{id:e},include:{minutes:!0}})}async findByStatus(e){return await this.prisma.meeting.findMany({where:{status:e},include:{minutes:!0}})}async count({filter:{title:e,format:r,status:t}}){let i={},n=[];return r&&(i.format=r),t&&(i.status=t),e&&n.push({title:{contains:e,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.meeting.count({where:i})}};function Ke(){return new ws(_)}function Nf(){return{createMeetingController:new Ri(Ke())}}function Gf(){return{findMeetingsController:new wi(Ke())}}function Lf(){return{findMeetingByIdController:new bi(Ke())}}function Wf(){return{findMeetingByStatusController:new Si(Ke())}}function _f(){return{updateMeetingController:new vi(Ke())}}function zf(){return{deleteMeetingController:new Ii(Ke())}}import{extendZodWithOpenApi as kw}from"@asteasolutions/zod-to-openapi";import vp from"zod";kw(vp);var Ow=vp.object({meetingId:vp.uuid()}),vs=class{constructor(e,r){this.meetingMinuteRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{meetingId:t}=Ow.parse({meetingId:e.params.meetingId}),i=await this.meetingMinuteRepository.findByMeetingId(t);if(!i)throw new p("A ata n\xE3o existe para esta reuni\xE3o.");return i.documentUrl&&await this.firebaseStorageService.deleteFile({fileUrl:i.documentUrl}),await this.meetingMinuteRepository.deleteByMeetingId(i.id),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var Es=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.meetingMinute.create({data:e,include:{meeting:!0}})}async update(e){await this.prisma.meetingMinute.update({where:{id:e.id},data:e})}async deleteByMeetingId(e){await this.prisma.meetingMinute.delete({where:{id:e}})}async findByMeetingId(e){return await this.prisma.meetingMinute.findFirst({where:{meetingId:e},include:{meeting:!0}})}};function _r(){return new Es(_)}function Hf(){return{createMeetingMinuteController:new gi(_r(),Ke(),F())}}function Vf(){return{findMeetingMinuteByMeetingIdController:new fi(_r())}}function Zf(){return{updateMeetingMinuteByMeetingIdController:new yi(_r(),F())}}function Kf(){return{deleteMeetingMinuteByMeetingIdController:new vs(_r(),F())}}var ve=Nw(),{authMiddleware:ur}=V();ve.post("/",(o,e,r)=>{ur.authenticated(o,e,r)},async(o,e)=>{let{createMeetingController:r}=Nf();await r.handle(o,e)});ve.get("/",async(o,e)=>{let{findMeetingsController:r}=Gf();await r.handle(o,e)});ve.get("/:id",async(o,e)=>{let{findMeetingByIdController:r}=Lf();await r.handle(o,e)});ve.get("/status/:status",async(o,e)=>{let{findMeetingByStatusController:r}=Wf();await r.handle(o,e)});ve.put("/:id",(o,e,r)=>{ur.authenticated(o,e,r)},async(o,e)=>{let{updateMeetingController:r}=_f();await r.handle(o,e)});ve.delete("/:id",(o,e,r)=>{ur.authenticated(o,e,r)},async(o,e)=>{let{deleteMeetingController:r}=zf();await r.handle(o,e)});ve.post("/:meetingId/minute",(o,e,r)=>{ur.authenticated(o,e,r)},H.single("document"),async(o,e)=>{let{createMeetingMinuteController:r}=Hf();await r.handle(o,e)});ve.get("/:meetingId/minute",async(o,e)=>{let{findMeetingMinuteByMeetingIdController:r}=Vf();await r.handle(o,e)});ve.put("/:meetingId/minute",(o,e,r)=>{ur.authenticated(o,e,r)},H.single("document"),async(o,e)=>{let{updateMeetingMinuteByMeetingIdController:r}=Zf();await r.handle(o,e)});ve.delete("/:meetingId/minute",(o,e,r)=>{ur.authenticated(o,e,r)},async(o,e)=>{let{deleteMeetingMinuteByMeetingIdController:r}=Kf();await r.handle(o,e)});import{Router as Zw}from"express";import{extendZodWithOpenApi as Gw}from"@asteasolutions/zod-to-openapi";import Ep from"zod";Gw(Ep);var Lw=Ep.object({id:Ep.string()}),js=class{constructor(e,r){this.newsRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=Lw.parse(e.params),i=e.user.id,n=await this.newsRepository.findById(t);if(!n)throw new p("Not\xEDcia n\xE3o encontrada.");if(n.author.id!==i)throw new Re("Sem permiss\xE3o.");await Promise.all([this.newsRepository.delete(t),this.firebaseStorageService.deleteFile({fileUrl:n.imageUrl})]),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new m(t.message)}}};import{extendZodWithOpenApi as Ww}from"@asteasolutions/zod-to-openapi";import gr from"zod";var _w=5,Jf=1024,zw=Jf*Jf,Hw=_w*zw;Ww(gr);var Vw=gr.object({id:gr.string(),title:gr.string().min(1),content:gr.string().min(1),image:gr.any().optional().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=Hw,"A imagem deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.")}),xs=class{constructor(e,r){this.newsRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,title:i,content:n,image:s}=Vw.parse({id:e.params.id,image:e.file,...e.body}),a=await this.newsRepository.findById(t);if(!a)throw new p("Not\xEDcia n\xE3o encontrada.");let c=e.user.id;if(a.author.id!==c)throw new Re("Sem permiss\xE3o.");let d=a.imageUrl||"";s&&a.imageUrl&&(d=await this.firebaseStorageService.updateFile({file:s,folder:M.NEWS,id:t,fileUrl:a.imageUrl}));let h=await this.newsRepository.update({id:t,title:i,content:n,imageUrl:d});r.status(200).json(h)}catch(t){if(t instanceof Error)throw new m(t.message)}}};function Yf(){return{createNewsController:new Ei(ze(),F())}}function Xf(){return{findAllNewsController:new Pi(ze())}}function $f(){return{findNewsByIdController:new Mi(ze())}}function Qf(){return{findNewsByAuthorIdController:new ji(ze())}}function ey(){return{updateNewsController:new xs(ze(),F())}}function ty(){return{deleteNewsController:new js(ze(),F())}}var Rt=Zw(),{authMiddleware:jp}=V();Rt.post("/",(o,e,r)=>{jp.authenticated(o,e,r)},H.single("image"),async(o,e)=>{let{createNewsController:r}=Yf();await r.handle(o,e)});Rt.get("/",async(o,e)=>{let{findAllNewsController:r}=Xf();await r.handle(o,e)});Rt.get("/:id",async(o,e)=>{let{findNewsByIdController:r}=$f();await r.handle(o,e)});Rt.get("/author/:authorId",async(o,e)=>{let{findNewsByAuthorIdController:r}=Qf();await r.handle(o,e)});Rt.put("/:id",(o,e,r)=>{jp.authenticated(o,e,r)},H.single("image"),async(o,e)=>{let{updateNewsController:r}=ey();await r.handle(o,e)});Rt.delete("/:id",(o,e,r)=>{jp.authenticated(o,e,r)},async(o,e)=>{let{deleteNewsController:r}=ty();await r.handle(o,e)});import{Router as Kw}from"express";var Ms=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.partner.create({data:e})}async update(e){await this.prisma.partner.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.partner.delete({where:{id:e}})}async find({pagination:e,filter:{name:r,description:t,category:i,isActive:n,orderBy:s}}){let a={},c=[];return n!==void 0&&(a.isActive=n),r&&c.push({name:{contains:r,mode:"insensitive"}}),t&&c.push({description:{contains:t,mode:"insensitive"}}),i&&c.push({category:{contains:i,mode:"insensitive"}}),c.length>0&&(a.OR=c),await this.prisma.partner.findMany({where:a,orderBy:s?{updatedAt:s}:{updatedAt:"desc"},...e&&{skip:e.offset,take:e.limit}})}async findById(e){return await this.prisma.partner.findFirst({where:{id:e}})}async count({filter:{name:e,description:r,category:t,isActive:i}}){let n={},s=[];return i!==void 0&&(n.isActive=i),e&&s.push({name:{contains:e,mode:"insensitive"}}),r&&s.push({description:{contains:r,mode:"insensitive"}}),t&&s.push({category:{contains:t,mode:"insensitive"}}),s.length>0&&(n.OR=s),await this.prisma.partner.count({where:n})}};function fr(){return new Ms(_)}function ry(){return{createPartnerController:new Ai(fr(),F())}}function oy(){return{findPartnersController:new Bi(fr())}}function iy(){return{findPartnerByIdController:new Di(fr())}}function ny(){return{updatePartnerController:new Ui(fr(),F())}}function sy(){return{deletePartnerController:new Ti(fr(),F())}}var kt=Kw(),{authMiddleware:xp}=V();kt.post("/",(o,e,r)=>{xp.authenticated(o,e,r)},H.single("logo"),async(o,e)=>{let{createPartnerController:r}=ry();await r.handle(o,e)});kt.get("/",async(o,e)=>{let{findPartnersController:r}=oy();await r.handle(o,e)});kt.get("/:id",async(o,e)=>{let{findPartnerByIdController:r}=iy();await r.handle(o,e)});kt.put("/:id",(o,e,r)=>{xp.authenticated(o,e,r)},H.single("logo"),async(o,e)=>{let{updatePartnerController:r}=ny();await r.handle(o,e)});kt.delete("/:id",(o,e,r)=>{xp.authenticated(o,e,r)},async(o,e)=>{let{deletePartnerController:r}=sy();await r.handle(o,e)});import{Router as Jw}from"express";function ay(){return{createPendencyController:new qi(fe(),yt(),F())}}function my(){return{findPendenciesController:new Ni(yt())}}function cy(){return{findPendencyByIdController:new Gi(yt())}}function py(){return{updatePendencyController:new Li(yt(),F())}}function dy(){return{deletePendencyController:new Oi(yt(),F())}}var Ot=Jw(),{authMiddleware:zr}=V();Ot.post("/:user_id",(o,e,r)=>{zr.isAdmin(o,e,r)},H.single("document"),async(o,e)=>{let{createPendencyController:r}=ay();await r.handle(o,e)});Ot.get("/",(o,e,r)=>{zr.isAdmin(o,e,r)},async(o,e)=>{let{findPendenciesController:r}=my();await r.handle(o,e)});Ot.get("/:pendency_id",(o,e,r)=>{zr.isAdmin(o,e,r)},async(o,e)=>{let{findPendencyByIdController:r}=cy();await r.handle(o,e)});Ot.put("/:pendency_id",(o,e,r)=>{zr.isAdmin(o,e,r)},H.single("document"),async(o,e)=>{let{updatePendencyController:r}=py();await r.handle(o,e)});Ot.delete("/:pendency_id",(o,e,r)=>{zr.isAdmin(o,e,r)},async(o,e)=>{let{deletePendencyController:r}=dy();await r.handle(o,e)});import{Router as tv}from"express";import{extendZodWithOpenApi as Yw}from"@asteasolutions/zod-to-openapi";import Je from"zod";var Xw=5,ly=1024,$w=ly*ly,Qw=Xw*$w;Yw(Je);var ev=Je.object({title:Je.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),description:Je.string().optional(),startDate:Je.coerce.date(),endDate:Je.coerce.date(),contact:Je.string().min(1,"Contato \xE9 obrigat\xF3rio."),registrationLink:Je.url().optional(),image:Je.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=Qw,"A imagem deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.")}),Ps=class{constructor(e,r){this.postGraduateProgramRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{title:t,description:i,startDate:n,endDate:s,contact:a,registrationLink:c,image:d}=ev.parse({...e.body,image:e.file}),h=await this.postGraduateProgramRepository.create({title:t,description:i,startDate:n,endDate:s,contact:a,registrationLink:c||void 0}),j=await this.firebaseStorageService.uploadFile({file:d,folder:M.POST_GRADUATE_PROGRAM,id:h.id});return await this.postGraduateProgramRepository.update({id:h.id,imageUrl:j}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var As=class{constructor(e){this.prisma=e}async create({title:e,imageUrl:r,description:t,startDate:i,endDate:n,contact:s,registrationLink:a}){return await this.prisma.postGraduateProgram.create({data:{title:e,imageUrl:r,description:t,startDate:i,endDate:n,contact:s,registrationLink:a}})}async find({pagination:{offset:e,limit:r},filter:{description:t,orderBy:i,title:n,contact:s}}){let a={},c=[];return n&&c.push({title:{contains:n,mode:"insensitive"}}),t&&c.push({description:{contains:t,mode:"insensitive"}}),s&&c.push({contact:{contains:s,mode:"insensitive"}}),c.length>0&&(a.OR=c),await this.prisma.postGraduateProgram.findMany({where:a,orderBy:{updatedAt:i},skip:e,take:r})}async findById(e){return await this.prisma.postGraduateProgram.findFirst({where:{id:e}})}async update({id:e,title:r,imageUrl:t,description:i,startDate:n,endDate:s,contact:a,registrationLink:c}){await this.prisma.postGraduateProgram.update({where:{id:e},data:{title:r,imageUrl:t,description:i,startDate:n,endDate:s,contact:a,registrationLink:c}})}async deleteById(e){await this.prisma.postGraduateProgram.delete({where:{id:e}})}async count({filter:{description:e,title:r,contact:t}}){let i={},n=[];return r&&n.push({title:{contains:r,mode:"insensitive"}}),e&&n.push({description:{contains:e,mode:"insensitive"}}),t&&n.push({contact:{contains:t,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.postGraduateProgram.count({where:i})}};function yr(){return new As(_)}function uy(){return{createPostGraduateProgramController:new Ps(yr(),F())}}function gy(){return{findPostGraduateProgramsController:new Hi(yr())}}function fy(){return{findPostGraduateProgramByIdController:new zi(yr())}}function yy(){return{updatePostGraduateProgramController:new Vi(yr(),F())}}function hy(){return{deletePostGraduateProgramController:new _i(yr(),F())}}var Nt=tv(),{authMiddleware:Hr}=V();Nt.post("/",(o,e,r)=>{Hr.isAdmin(o,e,r)},H.single("image"),async(o,e)=>{let{createPostGraduateProgramController:r}=uy();await r.handle(o,e)});Nt.get("/",(o,e,r)=>{Hr.isAdmin(o,e,r)},async(o,e)=>{let{findPostGraduateProgramsController:r}=gy();await r.handle(o,e)});Nt.get("/:id",(o,e,r)=>{Hr.isAdmin(o,e,r)},async(o,e)=>{let{findPostGraduateProgramByIdController:r}=fy();await r.handle(o,e)});Nt.put("/:id",(o,e,r)=>{Hr.isAdmin(o,e,r)},H.single("image"),async(o,e)=>{let{updatePostGraduateProgramController:r}=yy();await r.handle(o,e)});Nt.delete("/:id",(o,e,r)=>{Hr.isAdmin(o,e,r)},async(o,e)=>{let{deletePostGraduateProgramController:r}=hy();await r.handle(o,e)});import{Router as rv}from"express";var Ts=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.regiment.create({data:e})}async update(e){await this.prisma.regiment.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.regiment.delete({where:{id:e}})}async find({pagination:{offset:e,limit:r},filter:{title:t,status:i,orderBy:n}}){let s={},a=[];return i&&(s.status=i),t&&a.push({title:{contains:t,mode:"insensitive"}}),a.length>0&&(s.OR=a),await this.prisma.regiment.findMany({where:s,orderBy:n?{updatedAt:n}:{updatedAt:"desc"},skip:e,take:r})}async findById(e){return await this.prisma.regiment.findFirst({where:{id:e}})}async findByStatus(e){return await this.prisma.regiment.findMany({where:{status:e}})}async count({filter:{title:e,status:r}}){let t={},i=[];return r&&(t.status=r),e&&i.push({title:{contains:e,mode:"insensitive"}}),i.length>0&&(t.OR=i),await this.prisma.regiment.count({where:t})}};function Gt(){return new Ts(_)}function Ry(){return{createRegimentController:new Zi(Gt(),F())}}function Iy(){return{findRegimentsController:new $i(Gt())}}function by(){return{findRegimentByIdController:new Ji(Gt())}}function Cy(){return{findRegimentByStatusController:new Xi(Gt())}}function Sy(){return{updateRegimentController:new Qi(Gt(),F())}}function wy(){return{deleteRegimentController:new Ki(Gt(),F())}}var It=rv(),{authMiddleware:Mp}=V();It.post("/",(o,e,r)=>{Mp.authenticated(o,e,r)},H.single("document"),async(o,e)=>{let{createRegimentController:r}=Ry();await r.handle(o,e)});It.get("/",async(o,e)=>{let{findRegimentsController:r}=Iy();await r.handle(o,e)});It.get("/:id",async(o,e)=>{let{findRegimentByIdController:r}=by();await r.handle(o,e)});It.get("/status/:status",async(o,e)=>{let{findRegimentByStatusController:r}=Cy();await r.handle(o,e)});It.put("/:id",(o,e,r)=>{Mp.authenticated(o,e,r)},H.single("document"),async(o,e)=>{let{updateRegimentController:r}=Sy();await r.handle(o,e)});It.delete("/:id",(o,e,r)=>{Mp.authenticated(o,e,r)},async(o,e)=>{let{deleteRegimentController:r}=wy();await r.handle(o,e)});import{Router as av}from"express";import{extendZodWithOpenApi as ov}from"@asteasolutions/zod-to-openapi";import Pp from"zod";ov(Pp);var iv=Pp.object({id:Pp.string().uuid("ID inv\xE1lido")}),Ds=class{constructor(e){this.regionalCongressGalleryRepository=e}async handle(e,r){try{let{id:t}=iv.parse(e.params),i=await this.regionalCongressGalleryRepository.findById(t);if(!i)throw new p("Item de galeria n\xE3o encontrado");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var Fs=class{constructor(e){this.prisma=e}async create(e){await this.prisma.regionalCongress.create({data:e})}async update(e){await this.prisma.regionalCongress.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.regionalCongress.delete({where:{id:e}})}async find({pagination:{offset:e,limit:r},filter:{title:t,edition:i,location:n,orderBy:s}}){let a={},c=[];return i&&c.push({edition:{equals:i}}),t&&c.push({title:{contains:t,mode:"insensitive"}}),n&&c.push({location:{contains:n,mode:"insensitive"}}),c.length>0&&(a.OR=c),await this.prisma.regionalCongress.findMany({where:a,include:{regionalCongressPartners:!0,regionalCongressGalleryItems:!0},orderBy:s?{startDate:s}:{startDate:"desc"},skip:e,take:r})}async findById(e){return await this.prisma.regionalCongress.findFirst({where:{id:e},include:{regionalCongressPartners:!0,regionalCongressGalleryItems:!0}})}async findByEdition(e){return await this.prisma.regionalCongress.findMany({where:{edition:e},include:{regionalCongressPartners:!0,regionalCongressGalleryItems:!0}})}async count({filter:{title:e,edition:r,location:t}}){let i={},n=[];return r&&n.push({edition:{equals:r}}),e&&n.push({title:{contains:e,mode:"insensitive"}}),t&&n.push({location:{contains:t,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.regionalCongress.count({where:i})}};function Te(){return new Fs(_)}var Bs=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.regionalCongressGalleryItem.create({data:e})}async update(e){await this.prisma.regionalCongressGalleryItem.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.regionalCongressGalleryItem.delete({where:{id:e}})}async findByCongressId({pagination:e,filter:r}){return await this.prisma.regionalCongressGalleryItem.findMany({where:{congressId:r.congressId,...r.caption&&{caption:{contains:r.caption,mode:"insensitive"}}},skip:e.offset,take:e.limit})}async findById(e){return await this.prisma.regionalCongressGalleryItem.findFirst({where:{id:e}})}async count({filter:e}){return await this.prisma.regionalCongressGalleryItem.count({where:{congressId:e.congressId,...e.caption&&{caption:{contains:e.caption,mode:"insensitive"}}}})}};function hr(){return new Bs(_)}function vy(){return{createRegionalCongressGalleryController:new en(hr(),Te(),F())}}function Ey(){return{findRegionalCongressGalleriesByCongressIdController:new on(hr())}}function jy(){return{findRegionalCongressGalleryByIdController:new Ds(hr())}}function xy(){return{updateRegionalCongressGalleryController:new nn(hr(),F())}}function My(){return{deleteRegionalCongressGalleryController:new tn(hr())}}import{extendZodWithOpenApi as nv}from"@asteasolutions/zod-to-openapi";import Ap from"zod";nv(Ap);var sv=Ap.object({id:Ap.string().uuid("ID inv\xE1lido")}),Us=class{constructor(e){this.regionalCongressPartnerRepository=e}async handle(e,r){try{let{id:t}=sv.parse(e.params),i=await this.regionalCongressPartnerRepository.findById(t);if(!i)throw new p("Parceiro n\xE3o encontrado");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var qs=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.regionalCongressPartner.create({data:e})}async update(e){await this.prisma.regionalCongressPartner.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.regionalCongressPartner.delete({where:{id:e}})}async findByCongressId(e){return await this.prisma.regionalCongressPartner.findMany({where:{congressId:e.filter.congressId,name:e.filter.name?{contains:e.filter.name,mode:"insensitive"}:void 0},skip:e.pagination?.offset,take:e.pagination?.limit})}async findById(e){return await this.prisma.regionalCongressPartner.findFirst({where:{id:e}})}async count(e){return await this.prisma.regionalCongressPartner.count({where:{congressId:e.filter.congressId,name:e.filter.name?{contains:e.filter.name,mode:"insensitive"}:void 0}})}};function Rr(){return new qs(_)}function Py(){return{createRegionalCongressPartnerController:new sn(Rr(),Te(),F())}}function Ay(){return{findRegionalCongressPartnersByCongressIdController:new cn(Rr())}}function Ty(){return{findRegionalCongressPartnerByIdController:new Us(Rr())}}function Dy(){return{updateRegionalCongressPartnerController:new pn(Rr(),F())}}function Fy(){return{deleteRegionalCongressPartnerController:new an(Rr())}}function By(){return{createRegionalCongressController:new dn(Te())}}function Uy(){return{findRegionalCongressesController:new yn(Te())}}function qy(){return{findRegionalCongressByIdController:new gn(Te())}}function ky(){return{findRegionalCongressByEditionController:new un(Te())}}function Oy(){return{updateRegionalCongressController:new hn(Te())}}function Ny(){return{deleteRegionalCongressController:new ln(Te())}}var ae=av(),{authMiddleware:Ye}=V();ae.post("/",(o,e,r)=>{Ye.authenticated(o,e,r)},async(o,e)=>{let{createRegionalCongressController:r}=By();await r.handle(o,e)});ae.get("/",async(o,e)=>{let{findRegionalCongressesController:r}=Uy();await r.handle(o,e)});ae.get("/:id",async(o,e)=>{let{findRegionalCongressByIdController:r}=qy();await r.handle(o,e)});ae.get("/edition/:edition",async(o,e)=>{let{findRegionalCongressByEditionController:r}=ky();await r.handle(o,e)});ae.put("/:id",(o,e,r)=>{Ye.authenticated(o,e,r)},async(o,e)=>{let{updateRegionalCongressController:r}=Oy();await r.handle(o,e)});ae.delete("/:id",(o,e,r)=>{Ye.authenticated(o,e,r)},async(o,e)=>{let{deleteRegionalCongressController:r}=Ny();await r.handle(o,e)});ae.post("/:congressId/gallery",(o,e,r)=>{Ye.authenticated(o,e,r)},H.single("image"),async(o,e)=>{let{createRegionalCongressGalleryController:r}=vy();await r.handle(o,e)});ae.get("/:congressId/gallery",async(o,e)=>{let{findRegionalCongressGalleriesByCongressIdController:r}=Ey();await r.handle(o,e)});ae.get("/gallery/:id",async(o,e)=>{let{findRegionalCongressGalleryByIdController:r}=jy();await r.handle(o,e)});ae.put("/gallery/:id",(o,e,r)=>{Ye.authenticated(o,e,r)},H.single("image"),async(o,e)=>{let{updateRegionalCongressGalleryController:r}=xy();await r.handle(o,e)});ae.delete("/gallery/:id",(o,e,r)=>{Ye.authenticated(o,e,r)},async(o,e)=>{let{deleteRegionalCongressGalleryController:r}=My();await r.handle(o,e)});ae.post("/:congressId/partner",(o,e,r)=>{Ye.authenticated(o,e,r)},H.single("logo"),async(o,e)=>{let{createRegionalCongressPartnerController:r}=Py();await r.handle(o,e)});ae.get("/:congressId/partner",async(o,e)=>{let{findRegionalCongressPartnersByCongressIdController:r}=Ay();await r.handle(o,e)});ae.get("/partner/:id",async(o,e)=>{let{findRegionalCongressPartnerByIdController:r}=Ty();await r.handle(o,e)});ae.put("/partner/:id",(o,e,r)=>{Ye.authenticated(o,e,r)},H.single("logo"),async(o,e)=>{let{updateRegionalCongressPartnerController:r}=Dy();await r.handle(o,e)});ae.delete("/partner/:id",(o,e,r)=>{Ye.authenticated(o,e,r)},async(o,e)=>{let{deleteRegionalCongressPartnerController:r}=Fy();await r.handle(o,e)});import{Router as lv}from"express";import{extendZodWithOpenApi as mv}from"@asteasolutions/zod-to-openapi";import le from"zod";var cv=1,pv=9;mv(le);var dv=le.object({page:le.coerce.number().min(1).default(cv),limit:le.coerce.number().min(1).default(pv),userId:le.string().optional(),registrationNumber:le.string().optional(),name:le.string().optional(),emailAddress:le.string().optional(),mainEtps:le.string().optional(),formations:le.string().optional(),occupations:le.string().optional(),institutions:le.string().optional(),biography:le.string().optional(),orderBy:le.enum(["asc","desc"]).default("desc")}),ks=class{constructor(e){this.researcherRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=dv.parse(e.query),s=i*t-i,[a,c]=await Promise.all([this.researcherRepository.find({pagination:{offset:s,limit:i},filter:{userName:n.name,...n}}),this.researcherRepository.count({filter:{userName:n.name,...n}})]),d=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:d,offset:s,limit:i,researchers:a})}catch(t){if(t instanceof Error)throw new m(t.message)}}};var Os=class{constructor(e){this.prisma=e}async create(e){await this.prisma.researcher.create({data:e})}async update(e){await this.prisma.researcher.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.researcher.delete({where:{id:e}})}async find({pagination:e,filter:{biography:r,degrees:t,formations:i,institutions:n,mainEtps:s,occupations:a,orderBy:c,registrationNumber:d,seniority:h,userId:j,userName:q}}){let X={},Q=[];return q&&Q.push({user:{name:{contains:q,mode:"insensitive"}}}),d&&Q.push({registrationNumber:{contains:d,mode:"insensitive"}}),s&&Q.push({mainEtps:{contains:s,mode:"insensitive"}}),i&&Q.push({formations:{contains:i,mode:"insensitive"}}),a&&Q.push({occupations:{contains:a,mode:"insensitive"}}),n&&Q.push({institutions:{contains:n,mode:"insensitive"}}),r&&Q.push({biography:{contains:r,mode:"insensitive"}}),Q.length>0&&(X.OR=Q),t&&t.length>0&&(X.degrees={hasSome:t}),h&&(X.seniority=h),j&&(X.userId={equals:j}),await this.prisma.researcher.findMany({where:X,omit:{userId:!0},include:{user:{omit:{passwordHash:!0}}},orderBy:{updatedAt:c},...e&&{skip:e.offset,take:e.limit}})}async findById(e){return await this.prisma.researcher.findFirst({where:{id:e},include:{user:{omit:{passwordHash:!0}}}})}async findByUserId(e){return await this.prisma.researcher.findFirst({where:{userId:e},include:{user:{omit:{passwordHash:!0}}}})}async findByRegistrationNumber(e){return await this.prisma.researcher.findFirst({where:{registrationNumber:e},include:{user:{omit:{passwordHash:!0}}}})}async count({filter:{biography:e,degrees:r,formations:t,institutions:i,mainEtps:n,occupations:s,registrationNumber:a,seniority:c,userId:d,userName:h}}){let j={},q=[];return h&&q.push({user:{name:{contains:h,mode:"insensitive"}}}),a&&q.push({registrationNumber:{contains:a,mode:"insensitive"}}),q.length>0&&(j.OR=q),n&&(j.mainEtps={contains:n,mode:"insensitive"}),t&&(j.formations={contains:t,mode:"insensitive"}),r&&r.length>0&&(j.degrees={hasSome:r}),s&&(j.occupations={contains:s,mode:"insensitive"}),c&&(j.seniority=c),i&&(j.institutions={contains:i,mode:"insensitive"}),e&&(j.biography={contains:e,mode:"insensitive"}),d&&(j.userId={equals:d}),await this.prisma.researcher.count({where:j})}};function Lt(){return new Os(_)}function Gy(){return{createResearcherController:new Rn(Lt())}}function Ly(){return{findResearchersController:new ks(Lt())}}function Wy(){return{findResearcherByIdController:new bn(Lt())}}function _y(){return{findResearcherByUserIdController:new Sn(Lt())}}function zy(){return{updateResearcherController:new wn(Lt())}}function Hy(){return{deleteResearcherController:new In(Lt())}}var bt=lv(),{authMiddleware:Tp}=V();bt.post("/",(o,e,r)=>{Tp.authenticated(o,e,r)},async(o,e)=>{let{createResearcherController:r}=Gy();await r.handle(o,e)});bt.get("/",async(o,e)=>{let{findResearchersController:r}=Ly();await r.handle(o,e)});bt.get("/:id",async(o,e)=>{let{findResearcherByIdController:r}=Wy();await r.handle(o,e)});bt.get("/user/:userId",async(o,e)=>{let{findResearcherByUserIdController:r}=_y();await r.handle(o,e)});bt.put("/:id",(o,e,r)=>{Tp.authenticated(o,e,r)},async(o,e)=>{let{updateResearcherController:r}=zy();await r.handle(o,e)});bt.delete("/:id",(o,e,r)=>{Tp.authenticated(o,e,r)},async(o,e)=>{let{deleteResearcherController:r}=Hy();await r.handle(o,e)});import{Router as fv}from"express";import{extendZodWithOpenApi as uv}from"@asteasolutions/zod-to-openapi";import me from"zod";uv(me);var gv=me.object({title:me.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),author:me.string().min(1,"Autor \xE9 obrigat\xF3rio."),journal:me.string().optional(),volume:me.string().optional(),edition:me.string().optional(),pageStart:me.coerce.number().optional(),pageEnd:me.coerce.number().optional(),startDate:me.coerce.date(),endDate:me.coerce.date(),city:me.string().optional(),state:me.string().optional(),country:me.string().optional(),publisher:me.string().optional(),description:me.string().optional(),year:me.coerce.number().optional(),accessUrl:me.url().optional()}),Ns=class{constructor(e){this.scientificArticlesRepository=e}async handle(e,r){try{let{title:t,author:i,journal:n,volume:s,edition:a,pageStart:c,pageEnd:d,startDate:h,endDate:j,city:q,state:X,country:Q,publisher:ue,description:De,year:jr,accessUrl:Xs}=gv.parse(e.body);return await this.scientificArticlesRepository.create({title:t,author:i,journal:n,volume:s,edition:a,pageStart:c,pageEnd:d,startDate:h,endDate:j,city:q,state:X,country:Q,publisher:ue,description:De,year:jr,accessUrl:Xs}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var Gs=class{constructor(e){this.prisma=e}async create({title:e,author:r,journal:t,volume:i,edition:n,pageStart:s,pageEnd:a,startDate:c,endDate:d,city:h,state:j,country:q,publisher:X,description:Q,year:ue,accessUrl:De}){return await this.prisma.scientificArticle.create({data:{title:e,author:r,journal:t,volume:i,edition:n,pageStart:s,pageEnd:a,startDate:c,endDate:d,city:h,state:j,country:q,publisher:X,description:Q,year:ue,accessUrl:De}})}async find({pagination:{offset:e,limit:r},filter:{title:t,author:i,journal:n,orderBy:s}}){let a={},c=[];return t&&c.push({title:{contains:t,mode:"insensitive"}}),i&&c.push({author:{contains:i,mode:"insensitive"}}),n&&c.push({journal:{contains:n,mode:"insensitive"}}),c.length>0&&(a.OR=c),await this.prisma.scientificArticle.findMany({where:a,orderBy:{updatedAt:s},skip:e,take:r})}async findById(e){return await this.prisma.scientificArticle.findFirst({where:{id:e}})}async update({id:e,title:r,author:t,journal:i,volume:n,edition:s,pageStart:a,pageEnd:c,startDate:d,endDate:h,city:j,state:q,country:X,publisher:Q,description:ue,year:De,accessUrl:jr}){await this.prisma.scientificArticle.update({where:{id:e},data:{title:r,author:t,journal:i,volume:n,edition:s,pageStart:a,pageEnd:c,startDate:d,endDate:h,city:j,state:q,country:X,publisher:Q,description:ue,year:De,accessUrl:jr}})}async deleteById(e){await this.prisma.scientificArticle.delete({where:{id:e}})}async count({filter:{title:e,author:r,journal:t}}){let i={},n=[];return e&&n.push({title:{contains:e,mode:"insensitive"}}),r&&n.push({author:{contains:r,mode:"insensitive"}}),t&&n.push({journal:{contains:t,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.scientificArticle.count({where:i})}};function Ir(){return new Gs(_)}function Vy(){return{createScientificArticleController:new Ns(Ir())}}function Zy(){return{findScientificArticlesController:new jn(Ir())}}function Ky(){return{findScientificArticleByIdController:new En(Ir())}}function Jy(){return{updateScientificArticleController:new xn(Ir())}}function Yy(){return{deleteScientificArticleController:new vn(Ir())}}var Wt=fv(),{authMiddleware:Vr}=V();Wt.post("/",(o,e,r)=>{Vr.isAdmin(o,e,r)},async(o,e)=>{let{createScientificArticleController:r}=Vy();await r.handle(o,e)});Wt.get("/",(o,e,r)=>{Vr.isAdmin(o,e,r)},async(o,e)=>{let{findScientificArticlesController:r}=Zy();await r.handle(o,e)});Wt.get("/:id",(o,e,r)=>{Vr.isAdmin(o,e,r)},async(o,e)=>{let{findScientificArticleByIdController:r}=Ky();await r.handle(o,e)});Wt.put("/:id",(o,e,r)=>{Vr.isAdmin(o,e,r)},async(o,e)=>{let{updateScientificArticleController:r}=Jy();await r.handle(o,e)});Wt.delete("/:id",(o,e,r)=>{Vr.isAdmin(o,e,r)},async(o,e)=>{let{deleteScientificArticleController:r}=Yy();await r.handle(o,e)});import{Router as Cv}from"express";import{extendZodWithOpenApi as yv}from"@asteasolutions/zod-to-openapi";import Xe from"zod";var hv=5,Xy=1024,Rv=Xy*Xy,Iv=hv*Rv;yv(Xe);var bv=Xe.object({name:Xe.string().min(1,"Nome \xE9 obrigat\xF3rio."),issn:Xe.string().min(1,"ISSN \xE9 obrigat\xF3rio."),description:Xe.string().min(1,"Descri\xE7\xE3o \xE9 obrigat\xF3ria."),journalUrl:Xe.url("URL da revista deve ser v\xE1lida."),directors:Xe.string().optional(),editorialBoard:Xe.string().optional(),logo:Xe.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=Iv,"O logo deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.").optional()}),Ls=class{constructor(e,r){this.scientificJournalRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{name:t,issn:i,description:n,journalUrl:s,directors:a,editorialBoard:c,logo:d}=bv.parse({...e.body,logo:e.file}),h=await this.scientificJournalRepository.create({name:t,issn:i,description:n,journalUrl:s,directors:a,editorialBoard:c});if(d){let j=await this.firebaseStorageService.uploadFile({file:d,folder:M.SCIENTIFIC_JOURNAL,id:h.id});await this.scientificJournalRepository.update({id:h.id,logoUrl:j})}return r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var Ws=class{constructor(e){this.prisma=e}async create({name:e,issn:r,description:t,logoUrl:i,journalUrl:n,directors:s,editorialBoard:a}){return await this.prisma.scientificJournal.create({data:{name:e,issn:r,description:t,logoUrl:i,journalUrl:n,directors:s,editorialBoard:a}})}async find({pagination:{offset:e,limit:r},filter:{name:t,description:i,issn:n,directors:s,editorialBoard:a,orderBy:c}}){let d={},h=[];return t&&h.push({name:{contains:t,mode:"insensitive"}}),i&&h.push({description:{contains:i,mode:"insensitive"}}),n&&h.push({issn:{contains:n,mode:"insensitive"}}),s&&h.push({directors:{contains:s,mode:"insensitive"}}),a&&h.push({editorialBoard:{contains:a,mode:"insensitive"}}),h.length>0&&(d.OR=h),await this.prisma.scientificJournal.findMany({where:d,orderBy:{updatedAt:c},skip:e,take:r})}async findById(e){return await this.prisma.scientificJournal.findFirst({where:{id:e}})}async update({id:e,name:r,issn:t,description:i,logoUrl:n,journalUrl:s,directors:a,editorialBoard:c}){await this.prisma.scientificJournal.update({where:{id:e},data:{name:r,issn:t,description:i,logoUrl:n,journalUrl:s,directors:a,editorialBoard:c}})}async deleteById(e){await this.prisma.scientificJournal.delete({where:{id:e}})}async count({filter:{name:e,description:r,issn:t,directors:i,editorialBoard:n}}){let s={},a=[];return e&&a.push({name:{contains:e,mode:"insensitive"}}),r&&a.push({description:{contains:r,mode:"insensitive"}}),t&&a.push({issn:{contains:t,mode:"insensitive"}}),i&&a.push({directors:{contains:i,mode:"insensitive"}}),n&&a.push({editorialBoard:{contains:n,mode:"insensitive"}}),a.length>0&&(s.OR=a),await this.prisma.scientificJournal.count({where:s})}};function br(){return new Ws(_)}function $y(){return{createScientificJournalController:new Ls(br(),F())}}function Qy(){return{findScientificJournalsController:new An(br())}}function eh(){return{findScientificJournalByIdController:new Pn(br())}}function th(){return{updateScientificJournalController:new Tn(br(),F())}}function rh(){return{deleteScientificJournalController:new Mn(br(),F())}}var _t=Cv(),{authMiddleware:Zr}=V();_t.post("/",(o,e,r)=>{Zr.isAdmin(o,e,r)},H.single("logo"),async(o,e)=>{let{createScientificJournalController:r}=$y();await r.handle(o,e)});_t.get("/",(o,e,r)=>{Zr.isAdmin(o,e,r)},async(o,e)=>{let{findScientificJournalsController:r}=Qy();await r.handle(o,e)});_t.get("/:id",(o,e,r)=>{Zr.isAdmin(o,e,r)},async(o,e)=>{let{findScientificJournalByIdController:r}=eh();await r.handle(o,e)});_t.put("/:id",(o,e,r)=>{Zr.isAdmin(o,e,r)},H.single("logo"),async(o,e)=>{let{updateScientificJournalController:r}=th();await r.handle(o,e)});_t.delete("/:id",(o,e,r)=>{Zr.isAdmin(o,e,r)},async(o,e)=>{let{deleteScientificJournalController:r}=rh();await r.handle(o,e)});import{Router as vv}from"express";import{extendZodWithOpenApi as Sv}from"@asteasolutions/zod-to-openapi";import _s from"zod";Sv(_s);var wv=_s.object({role:_s.string().optional(),orderBy:_s.enum(["asc","desc"]).optional()}),zs=class{constructor(e){this.sdhcTeamMemberRepository=e}async handle(e,r){try{let t=wv.parse(e.query),i=await this.sdhcTeamMemberRepository.find({filter:t});r.status(200).json({members:i})}catch(t){if(t instanceof Error)throw new m(t.message)}}};var Hs=class{constructor(e){this.prisma=e}async create(e){await this.prisma.sDHCTeamMember.create({data:{...e,order:e.order??0}})}async update(e){let{id:r,...t}=e;await this.prisma.sDHCTeamMember.update({where:{id:r},data:t})}async deleteById(e){await this.prisma.sDHCTeamMember.delete({where:{id:e}})}async find({filter:{role:e,orderBy:r}}){let t={};return e&&(t.role={contains:e,mode:"insensitive"}),await this.prisma.sDHCTeamMember.findMany({where:t,include:{user:{omit:{passwordHash:!0}}},orderBy:r?[{order:"asc"},{updatedAt:r}]:[{order:"asc"},{updatedAt:"desc"}]})}async findById(e){return await this.prisma.sDHCTeamMember.findFirst({where:{id:e},include:{user:{omit:{passwordHash:!0}}}})}async count({filter:{role:e}}){let r={};return e&&(r.role={contains:e,mode:"insensitive"}),await this.prisma.sDHCTeamMember.count({where:r})}};function Cr(){return new Hs(_)}function oh(){return{createSDHCTeamMemberController:new Dn(Cr())}}function ih(){return{findSDHCTeamMembersController:new zs(Cr())}}function nh(){return{findSDHCTeamMemberByIdController:new Bn(Cr())}}function sh(){return{updateSDHCTeamMemberController:new qn(Cr())}}function ah(){return{deleteSDHCTeamMemberController:new Fn(Cr())}}var zt=vv(),{authMiddleware:Dp}=V();zt.post("/",(o,e,r)=>{Dp.authenticated(o,e,r)},async(o,e)=>{let{createSDHCTeamMemberController:r}=oh();await r.handle(o,e)});zt.get("/",async(o,e)=>{let{findSDHCTeamMembersController:r}=ih();await r.handle(o,e)});zt.get("/:id",async(o,e)=>{let{findSDHCTeamMemberByIdController:r}=nh();await r.handle(o,e)});zt.put("/:id",(o,e,r)=>{Dp.authenticated(o,e,r)},async(o,e)=>{let{updateSDHCTeamMemberController:r}=sh();await r.handle(o,e)});zt.delete("/:id",(o,e,r)=>{Dp.authenticated(o,e,r)},async(o,e)=>{let{deleteSDHCTeamMemberController:r}=ah();await r.handle(o,e)});import{Router as Ev}from"express";var Vs=class{constructor(e){this.userRepository=e}async handle(e,r){try{let t=await this.userRepository.find();r.status(200).json(t)}catch(t){if(t instanceof Error)throw new m(t.message)}}};function mh(){return{updateUserController:new Nn(fe(),F())}}function ch(){return{deleteUserController:new kn(fe())}}function ph(){return{findUsersController:new Vs(fe())}}function dh(){return{findUserController:new On(fe())}}var Sr=Ev(),{authMiddleware:lh}=V();Sr.get("/:id",async(o,e)=>{let{findUserController:r}=dh();await r.handle(o,e)});Sr.put("/",(o,e,r)=>{lh.authenticated(o,e,r)},H.single("avatarImage"),async(o,e)=>{let{updateUserController:r}=mh();await r.handle(o,e)});Sr.delete("/:id",(o,e,r)=>{lh.authenticated(o,e,r)},async(o,e)=>{let{deleteUserController:r}=ch();await r.handle(o,e)});Sr.get("/",async(o,e)=>{let{findUsersController:r}=ph();await r.handle(o,e)});import{Router as Tv}from"express";import{extendZodWithOpenApi as jv}from"@asteasolutions/zod-to-openapi";import Ne from"zod";var xv=5,uh=1024,Mv=uh*uh,Pv=xv*Mv;jv(Ne);var Av=Ne.object({title:Ne.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),description:Ne.string().optional(),scheduledAt:Ne.coerce.date(),webinarLink:Ne.url().optional(),guestIds:Ne.transform(o=>typeof o=="string"?o.split(","):o).pipe(Ne.array(Ne.uuid())),thumbnail:Ne.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=Pv,"A thumbnail deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.")}),Zs=class{constructor(e,r){this.webinarRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{title:t,description:i,scheduledAt:n,webinarLink:s,guestIds:a,thumbnail:c}=Av.parse({...e.body,thumbnail:e.file}),d=await this.webinarRepository.create({title:t,description:i,scheduledAt:n,webinarLink:s||void 0,guestIds:a}),h=await this.firebaseStorageService.uploadFile({file:c,folder:M.WEBINAR,id:d.id});return await this.webinarRepository.update({id:d.id,thumbnailUrl:h}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new m(t.message)}}};var Ks=class{constructor(e){this.prisma=e}async create({title:e,description:r,scheduledAt:t,webinarLink:i,thumbnailUrl:n,guestIds:s}){return await this.prisma.webinar.create({data:{title:e,description:r,scheduledAt:t,webinarLink:i,thumbnailUrl:n,guests:s?{connect:s.map(a=>({id:a}))}:void 0}})}async find({pagination:{offset:e,limit:r},filter:{description:t,orderBy:i,title:n}}){let s={},a=[];return n&&a.push({title:{contains:n,mode:"insensitive"}}),t&&a.push({description:{contains:t,mode:"insensitive"}}),a.length>0&&(s.OR=a),await this.prisma.webinar.findMany({where:s,include:{guests:{omit:{passwordHash:!0}}},orderBy:{updatedAt:i},skip:e,take:r})}async findById(e){return await this.prisma.webinar.findFirst({where:{id:e},include:{guests:{omit:{passwordHash:!0}}}})}async update({id:e,title:r,description:t,scheduledAt:i,webinarLink:n,thumbnailUrl:s,guestIds:a}){await this.prisma.webinar.update({where:{id:e},data:{title:r,description:t,scheduledAt:i,webinarLink:n,thumbnailUrl:s,guests:a?{connect:a.map(c=>({id:c}))}:void 0}})}async deleteById(e){await this.prisma.webinar.delete({where:{id:e}})}async count({filter:{description:e,title:r}}){let t={},i=[];return r&&i.push({title:{contains:r,mode:"insensitive"}}),e&&i.push({description:{contains:e,mode:"insensitive"}}),i.length>0&&(t.OR=i),await this.prisma.webinar.count({where:t})}};function wr(){return new Ks(_)}function gh(){return{createWebinarController:new Zs(wr(),F())}}function fh(){return{findWebinarsController:new Wn(wr())}}function yh(){return{findWebinarByIdController:new Ln(wr())}}function hh(){return{updateWebinarController:new _n(wr(),F())}}function Rh(){return{deleteWebinarController:new Gn(wr(),F())}}var Ht=Tv(),{authMiddleware:Kr}=V();Ht.post("/",(o,e,r)=>{Kr.isAdmin(o,e,r)},H.single("thumbnail"),async(o,e)=>{let{createWebinarController:r}=gh();await r.handle(o,e)});Ht.get("/",(o,e,r)=>{Kr.isAdmin(o,e,r)},async(o,e)=>{let{findWebinarsController:r}=fh();await r.handle(o,e)});Ht.get("/:id",(o,e,r)=>{Kr.isAdmin(o,e,r)},async(o,e)=>{let{findWebinarByIdController:r}=yh();await r.handle(o,e)});Ht.put("/:id",(o,e,r)=>{Kr.isAdmin(o,e,r)},H.single("thumbnail"),async(o,e)=>{let{updateWebinarController:r}=hh();await r.handle(o,e)});Ht.delete("/:id",(o,e,r)=>{Kr.isAdmin(o,e,r)},async(o,e)=>{let{deleteWebinarController:r}=Rh();await r.handle(o,e)});import{Router as qv}from"express";import{extendZodWithOpenApi as Dv}from"@asteasolutions/zod-to-openapi";import vr from"zod";var Fv=1,Bv=7;Dv(vr);var Uv=vr.object({page:vr.coerce.number().min(1).default(Fv),limit:vr.coerce.number().min(1).default(Bv),role:vr.string().optional(),orderBy:vr.enum(["asc","desc"]).optional()}),Js=class{constructor(e){this.workGroupTeamMemberRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=Uv.parse(e.query),s=i*t-i,[a,c]=await Promise.all([this.workGroupTeamMemberRepository.find({pagination:{offset:s,limit:i},filter:n}),this.workGroupTeamMemberRepository.count({filter:n})]),d=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:d,offset:s,limit:i,members:a})}catch(t){if(t instanceof Error)throw new m(t.message)}}};var Ys=class{constructor(e){this.prisma=e}async create(e){await this.prisma.workGroupTeamMember.create({data:{...e}})}async update(e){let{id:r,...t}=e;await this.prisma.workGroupTeamMember.update({where:{id:r},data:t})}async deleteById(e){await this.prisma.workGroupTeamMember.delete({where:{id:e}})}async find({pagination:e,filter:{role:r,orderBy:t}}){let i={};return r&&(i.role={contains:r,mode:"insensitive"}),await this.prisma.workGroupTeamMember.findMany({where:i,include:{user:{omit:{passwordHash:!0}}},orderBy:{updatedAt:t??"desc"},...e&&{skip:e.offset,take:e.limit}})}async findById(e){return await this.prisma.workGroupTeamMember.findFirst({where:{id:e},include:{user:{omit:{passwordHash:!0}}}})}async count({filter:{role:e}}){let r={};return e&&(r.role={contains:e,mode:"insensitive"}),await this.prisma.workGroupTeamMember.count({where:r})}};function Er(){return new Ys(_)}function Ih(){return{createWorkGroupTeamMemberController:new zn(Er())}}function bh(){return{findWorkGroupTeamMembersController:new Js(Er())}}function Ch(){return{findWorkGroupTeamMemberByIdController:new Vn(Er())}}function Sh(){return{updateWorkGroupTeamMemberController:new Kn(Er())}}function wh(){return{deleteWorkGroupTeamMemberController:new Hn(Er())}}var Vt=qv(),{authMiddleware:Fp}=V();Vt.post("/",(o,e,r)=>{Fp.authenticated(o,e,r)},async(o,e)=>{let{createWorkGroupTeamMemberController:r}=Ih();await r.handle(o,e)});Vt.get("/",async(o,e)=>{let{findWorkGroupTeamMembersController:r}=bh();await r.handle(o,e)});Vt.get("/:id",async(o,e)=>{let{findWorkGroupTeamMemberByIdController:r}=Ch();await r.handle(o,e)});Vt.put("/:id",(o,e,r)=>{Fp.authenticated(o,e,r)},async(o,e)=>{let{updateWorkGroupTeamMemberController:r}=Sh();await r.handle(o,e)});Vt.delete("/:id",(o,e,r)=>{Fp.authenticated(o,e,r)},async(o,e)=>{let{deleteWorkGroupTeamMemberController:r}=wh();await r.handle(o,e)});var $=Bp(),Nv={methods:["GET","POST","PUT","DELETE"],origin:["http://localhost:3000","https://rede-ct.vercel.app"],credentials:!0};$.use(Ov(Nv));$.use(Bp.json());$.use(Bp.urlencoded({extended:!1}));$.use("/docs",kv({content:Sg,theme:"kepler"}));$.use("/",Ip);$.use("/auth",He);$.use("/user",Sr);$.use("/news",Rt);$.use("/certification",At);$.use("/pendency",Ot);$.use("/researcher",bt);$.use("/in-memoriam",ht);$.use("/etp",Dt);$.use("/partner",kt);$.use("/management-team",qt);$.use("/sdhc-team-member",zt);$.use("/legitimator-committee-member",Ut);$.use("/regiment",It);$.use("/meeting",ve);$.use("/international-scientific-congress",se);$.use("/regional-congress",ae);$.use("/webinars",Ht);$.use("/courses",Tt);$.use("/post-graduate-programs",Nt);$.use("/event",Ft);$.use("/scientific-journals",_t);$.use("/book-volumes",Pt);$.use("/scientific-articles",Wt);$.use("/work-group-team-member",Vt);$.use((o,e,r,t)=>{let{errorHandler:i}=Up();i.handle(o,e,r,t)});var Lv=Gv.createServer($),vh=4e3;Lv.listen(vh,()=>{console.log(`\u{1F680} Aplica\xE7\xE3o rodando na porta ${vh}.`)});

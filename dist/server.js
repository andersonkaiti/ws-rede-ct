import lj from"node:http";import{apiReference as cj}from"@scalar/express-api-reference";import pj from"cors";import Rd from"express";import FR from"zod";var le=class extends Error{};var se=class extends Error{};var a=class extends Error{};var p=class extends Error{};var be=class extends Error{};import{ZodError as DR}from"zod";var ao=class extends DR{};var mo=class{handle(e,r,t,i){return e instanceof ao?t.status(400).json({message:"Validation error",error:FR.treeifyError(e)}):e instanceof le?t.status(400).json({message:e.message}):e instanceof p?t.status(404).json({message:e.message}):e instanceof be?t.status(401).json({message:e.message}):e instanceof se?t.status(409).json({message:e.message}):e instanceof a?t.status(500).json({message:e.message}):t.status(500).json({message:"Internal server error"})}};function Id(){return{errorHandler:new mo}}import{OpenAPIRegistry as av,OpenApiGeneratorV3 as mv}from"@asteasolutions/zod-to-openapi";import{$Enums as bd}from"@prisma/client";import I from"zod";import{extendZodWithOpenApi as BR}from"@asteasolutions/zod-to-openapi";import St from"zod";var qR=1,UR=6;BR(St);var va=St.object({page:St.coerce.number().min(1).default(qR),limit:St.coerce.number().min(1).default(UR),title:St.string().optional(),description:St.string().optional(),orderBy:St.enum(["asc","desc"]).default("desc")}),co=class{constructor(e){this.certificationRepository=e}async handle(e,r){try{let{title:t,description:i,limit:n,orderBy:s,page:m}=va.parse(e.query),c=m*n-n,d=e.user.id,[h,j]=await Promise.all([this.certificationRepository.findByUserId({userId:d,pagination:{offset:c,limit:n},filter:{title:t,description:i,orderBy:s}}),this.certificationRepository.count({filter:{title:t,description:i,userId:d}})]),U=Math.max(Math.ceil(j/n),1);return r.status(200).json({page:m,totalPages:U,offset:c,limit:n,totalCertifications:j,certifications:h})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as kR}from"@asteasolutions/zod-to-openapi";import vt from"zod";var OR=1,NR=7;kR(vt);var Ea=vt.object({page:vt.coerce.number().min(1).default(OR),limit:vt.coerce.number().min(1).default(NR),title:vt.string().optional(),content:vt.string().optional(),orderBy:vt.enum(["asc","desc"]).default("desc")}),po=class{constructor(e){this.newsRepository=e}async handle(e,r){try{let{page:t,limit:i,content:n,orderBy:s,title:m}=Ea.parse(e.query),c=i*t-i,d=e.user.id,[h,j]=await Promise.all([this.newsRepository.findByAuthorId({authorId:d,pagination:{offset:c,limit:i},filter:{orderBy:s,title:m,content:n}}),this.newsRepository.count({filter:{authorId:d,content:n,title:m}})]),U=Math.ceil(j/i);r.status(200).json({page:t,totalPages:U,offset:c,limit:i,news:h})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as GR}from"@asteasolutions/zod-to-openapi";import{PendencyStatus as LR}from"@prisma/client";import et from"zod";var WR=1,_R=6;GR(et);var ja=et.object({page:et.coerce.number().min(1).default(WR),limit:et.coerce.number().min(1).default(_R),title:et.string().optional(),description:et.string().optional(),status:et.enum(LR).default("PENDING"),orderBy:et.enum(["asc","desc"]).default("desc")}),lo=class{constructor(e){this.pendencyRepository=e}async handle(e,r){try{let{limit:t,page:i,...n}=ja.parse(e.query),s=i*t-t,m=e.user.id,[c,d]=await Promise.all([this.pendencyRepository.findByUserId({userId:m,pagination:{offset:s,limit:t},filter:n}),this.pendencyRepository.count({filter:{...n,userId:m}})]),h=Math.max(Math.ceil(d/t),1);return r.status(200).json({page:i,totalPages:h,offset:s,limit:t,pendencies:c})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as zR}from"@asteasolutions/zod-to-openapi";import uo from"zod";zR(uo);var xa=uo.object({password:uo.string(),email:uo.email()}),go=class{constructor(e,r,t){this.userRepository=e;this.bcrypt=r;this.jwtService=t}async handle(e,r){try{let{email:t,password:i}=xa.parse(e.body),n=await this.userRepository.findByEmail(t);if(!n)return r.status(401).json({message:"Usu\xE1rio n\xE3o existe."});if(!await this.bcrypt.compare({password:i,hashedPassword:n.passwordHash}))throw new be("Senha inv\xE1lida.");let{id:m,role:c}=n,d=this.jwtService.sign({id:m,role:c,email:t});return r.status(200).json({token:d})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as HR}from"@asteasolutions/zod-to-openapi";import $t from"zod";var fo=8;HR($t);var Ma=$t.object({name:$t.string("Nome \xE9 obrigat\xF3rio.").min(1,"Nome \xE9 obrigat\xF3rio."),emailAddress:$t.email("E-mail inv\xE1lido.").min(1,"E-mail \xE9 obrigat\xF3rio."),password:$t.string("A senha \xE9 obrigat\xF3ria.").min(fo,`A senha deve ter pelo menos ${fo} caracteres.`),confirmPassword:$t.string("A senha \xE9 obrigat\xF3ria.").min(fo,`A senha deve ter pelo menos ${fo} caracteres.`)}).refine(o=>o.password===o.confirmPassword,{message:"As senhas n\xE3o coincidem.",path:["confirmPassword"]}),yo=class{constructor(e,r){this.userRepository=e;this.bcrypt=r}async handle(e,r){try{let{emailAddress:t,name:i,password:n}=Ma.parse(e.body);if(await this.userRepository.findByEmail(t))throw new se("Usu\xE1rio j\xE1 existe.");let m=await this.bcrypt.hash(n);return await this.userRepository.create({name:i,emailAddress:t,passwordHash:m}),r.status(201).json()}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Cd={method:"post",path:"/auth/sign-up",tags:["Authentication"],summary:"Create a new user",request:{body:{content:{"application/json":{schema:Ma}}}},responses:{201:{description:"User created successfully",summary:"User Registration Successful",content:{"application/json":{schema:I.object({message:I.string()})}}},400:{description:"Invalid input data provided",summary:"Validation Error",content:{"application/json":{schema:I.object({errors:I.record(I.string(),I.string())})}}},409:{description:"User already exists with this email",summary:"User Already Exists",content:{"application/json":{schema:I.object({message:I.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:I.object({message:I.string()})}}}}},wd={method:"post",path:"/auth/sign-in",tags:["Authentication"],summary:"Sign in",request:{body:{content:{"application/json":{schema:xa}}}},responses:{200:{description:"Authentication successful, JWT token returned",summary:"Login Successful",content:{"application/json":{schema:I.object({token:I.string()})}}},400:{description:"Invalid credentials or input data",summary:"Validation Error",content:{"application/json":{schema:I.object({errors:I.record(I.string(),I.string())})}}},401:{description:"Invalid email or password",summary:"Authentication Failed",content:{"application/json":{schema:I.object({message:I.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:I.object({message:I.string()})}}}}},Sd={method:"get",path:"/auth/user",tags:["Authentication"],summary:"Search for authenticated user",security:[{bearerAuth:[]}],responses:{200:{description:"Authenticated user information retrieved successfully",summary:"User Information Retrieved",content:{"application/json":{schema:I.object({name:I.string(),id:I.string(),avatarUrl:I.string().nullable(),createdAt:I.date(),updatedAt:I.date(),emailAddress:I.string(),orcid:I.string().nullable(),phone:I.string().nullable(),lattesUrl:I.string().nullable(),role:I.enum(bd.UserRole)}).nullable()}}},400:{description:"Invalid request parameters",summary:"Validation Error",content:{"application/json":{schema:I.object({errors:I.record(I.string(),I.string())})}}},404:{description:"User not found or not authenticated",summary:"User Not Found",content:{"application/json":{schema:I.object({message:I.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:I.object({message:I.string()})}}}}},vd={method:"get",path:"/auth/user/news",tags:["Authentication"],summary:"List authenticated user news",security:[{bearerAuth:[]}],request:{query:Ea},responses:{200:{description:"Paginated list of authenticated user news retrieved successfully",summary:"User News Retrieved",content:{"application/json":{schema:I.object({page:I.number(),totalPages:I.number(),offset:I.number(),limit:I.number(),news:I.object({content:I.string(),id:I.string(),title:I.string(),createdAt:I.date(),updatedAt:I.date(),imageUrl:I.string().nullable()})})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:I.object({errors:I.record(I.string(),I.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:I.object({message:I.string()})}}}}},Ed={method:"get",path:"/auth/admin",tags:["Authentication"],summary:"Verify admin access",security:[{bearerAuth:[]}],responses:{200:{description:"Admin access verified successfully",summary:"Admin Access Granted",content:{"application/json":{schema:I.object({success:I.boolean()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:I.object({message:I.string()})}}}}},jd={method:"get",path:"/auth/certifications",tags:["Authentication"],summary:"List all authenticated user's certifications",security:[{bearerAuth:[]}],request:{query:va},responses:{200:{description:"Paginated list of authenticated user certifications retrieved successfully",summary:"User Certifications Retrieved",content:{"application/json":{schema:I.object({page:I.number(),totalPages:I.number(),offset:I.number(),limit:I.number(),certifications:I.object({description:I.string(),id:I.string(),title:I.string(),certificationUrl:I.string(),createdAt:I.date(),updatedAt:I.date(),userId:I.string()})})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:I.object({errors:I.record(I.string(),I.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:I.object({message:I.string()})}}}}},xd={method:"get",path:"/auth/pendencies",tags:["Authentication"],summary:"List all authenticated user's pendencies",security:[{bearerAuth:[]}],request:{query:ja},responses:{200:{description:"Paginated list of authenticated user pendencies retrieved successfully",summary:"User Pendencies Retrieved",content:{"application/json":{schema:I.object({page:I.number(),totalPages:I.number(),offset:I.number(),limit:I.number(),pendencies:I.object({id:I.string(),title:I.string(),description:I.string(),status:I.enum(bd.PendencyStatus),createdAt:I.date(),updatedAt:I.date(),userId:I.string()})})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:I.object({errors:I.record(I.string(),I.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:I.object({message:I.string()})}}}}};import S from"zod";import{extendZodWithOpenApi as VR}from"@asteasolutions/zod-to-openapi";import Pa from"zod";VR(Pa);var Ta=Pa.object({id:Pa.uuid()}),ho=class{constructor(e,r){this.bookVolumeRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=Ta.parse({id:e.params.id}),i=await this.bookVolumeRepository.findById(t);if(!i)throw new p("O volume de livro n\xE3o existe.");return i.authorImageUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.authorImageUrl}),i.coverImageUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.coverImageUrl}),i.catalogSheetUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.catalogSheetUrl}),await this.bookVolumeRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as ZR}from"@asteasolutions/zod-to-openapi";import Aa from"zod";ZR(Aa);var Da=Aa.object({id:Aa.uuid()}),Ro=class{constructor(e){this.bookVolumeRepository=e}async handle(e,r){try{let{id:t}=Da.parse({id:e.params.id}),i=await this.bookVolumeRepository.findById(t);if(!i)throw new p("Volume de livro n\xE3o encontrado.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as KR}from"@asteasolutions/zod-to-openapi";import tt from"zod";var JR=1,YR=6;KR(tt);var Fa=tt.object({page:tt.coerce.number().min(1).default(JR),limit:tt.coerce.number().min(1).default(YR),title:tt.string().optional(),author:tt.string().optional(),description:tt.string().optional(),orderBy:tt.enum(["asc","desc"]).default("desc")}),Io=class{constructor(e){this.bookVolumeRepository=e}async handle(e,r){try{let{limit:t,page:i,...n}=Fa.parse(e.query),s=i*t-t,[m,c]=await Promise.all([this.bookVolumeRepository.find({pagination:{offset:s,limit:t},filter:n}),this.bookVolumeRepository.count({filter:n})]),d=Math.max(Math.ceil(c/t),1);return r.status(200).json({page:i,totalPages:d,offset:s,limit:t,bookVolumes:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as XR}from"@asteasolutions/zod-to-openapi";import Ce from"zod";var M={NEWS:"images/news",USER:"images/user",IN_MEMORIAM:"images/in-memoriam",PARTNER:"images/partners",CERTIFICATION:"documents/certifications",PENDENCY:"documents/pendencies",REGIMENT:"documents/regiments",MEETING_MINUTE:"documents/meeting-minutes",INTERNATIONAL_SCIENTIFIC_CONGRESS_GALLERY:"images/international-scientific-congress-gallery",GALLERY:"images/regional-congress-gallery",REGIONAL_CONGRESS_GALLERY:"images/regional-congress-gallery",WEBINAR:"images/webinars",COURSE:"images/courses",POST_GRADUATE_PROGRAM:"images/post-graduate-programs",EVENT:"images/events",SCIENTIFIC_JOURNAL:"images/scientific-journals",BOOK_VOLUME_AUTHOR_IMAGE:"images/book-volumes/authors",BOOK_VOLUME_COVER:"images/book-volumes/covers",BOOK_VOLUME_CATALOG_SHEET:"documents/book-volumes/catalog-sheets"};var bo=5,Md=1024,$R=Md*Md,Ba=bo*$R;XR(Ce);var qa=Ce.object({id:Ce.uuid(),volumeNumber:Ce.coerce.number().int().positive().optional(),year:Ce.coerce.number().int().positive().optional(),title:Ce.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio.").optional(),author:Ce.string().min(1,"Autor \xE9 obrigat\xF3rio.").optional(),accessUrl:Ce.string().url("URL de acesso deve ser v\xE1lida").optional(),description:Ce.string().optional(),authorImage:Ce.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=Ba,`A imagem do autor deve ter no m\xE1ximo ${bo}MB.`).optional(),coverImage:Ce.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=Ba,`A imagem da capa deve ter no m\xE1ximo ${bo}MB.`).optional(),catalogSheet:Ce.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=Ba,`A ficha catalogr\xE1fica deve ter no m\xE1ximo ${bo}MB.`).optional()}),Co=class{constructor(e,r){this.bookVolumeRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,volumeNumber:i,year:n,title:s,author:m,accessUrl:c,description:d,authorImage:h,coverImage:j,catalogSheet:U}=qa.parse({id:e.params.id,...e.body,authorImage:e.files?.authorImage?.[0],coverImage:e.files?.coverImage?.[0],catalogSheet:e.files?.catalogSheet?.[0]}),Q=await this.bookVolumeRepository.findById(t);if(!Q)throw new p("O volume de livro n\xE3o existe.");let te=Q.authorImageUrl,fe=Q.coverImageUrl,Be=Q.catalogSheetUrl;return h&&(te=await this.firebaseStorageService.uploadFile({file:h,id:t,folder:M.BOOK_VOLUME_AUTHOR_IMAGE})),j&&(fe=await this.firebaseStorageService.uploadFile({file:j,id:t,folder:M.BOOK_VOLUME_COVER})),U&&(Be=await this.firebaseStorageService.uploadFile({file:U,id:t,folder:M.BOOK_VOLUME_CATALOG_SHEET})),await this.bookVolumeRepository.update({id:t,volumeNumber:i,year:n,title:s,author:m,accessUrl:c,description:d,authorImageUrl:te,coverImageUrl:fe,catalogSheetUrl:Be}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Pd={method:"post",path:"/book-volumes",tags:["Book Volumes"],summary:"Create book volume",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:S.object({volumeNumber:S.number().int().positive().openapi({description:"N\xFAmero do volume"}),year:S.number().int().positive().openapi({description:"Ano de publica\xE7\xE3o"}),title:S.string().min(1).openapi({description:"T\xEDtulo do livro"}),author:S.string().min(1).openapi({description:"Nome do autor"}),accessUrl:S.string().url().optional().openapi({description:"URL de acesso ao livro"}),description:S.string().optional().openapi({description:"Descri\xE7\xE3o do livro"}),authorImage:S.string().optional().openapi({description:"Imagem do autor (m\xE1ximo 5MB)",type:"string",format:"binary"}),coverImage:S.string().optional().openapi({description:"Imagem da capa (m\xE1ximo 5MB)",type:"string",format:"binary"}),catalogSheet:S.string().optional().openapi({description:"Ficha catalogr\xE1fica (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{201:{description:"Book volume created successfully",summary:"Volume Created"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:S.object({errors:S.record(S.string(),S.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:S.object({message:S.string()})}}}}},Td={method:"get",path:"/book-volumes",tags:["Book Volumes"],summary:"List book volumes",security:[{bearerAuth:[]}],request:{query:Fa},responses:{200:{description:"Paginated list of book volumes retrieved successfully",summary:"Volumes Retrieved",content:{"application/json":{schema:S.object({page:S.number(),totalPages:S.number(),offset:S.number(),limit:S.number(),bookVolumes:S.array(S.object({id:S.string(),volumeNumber:S.number(),year:S.number(),title:S.string(),author:S.string(),accessUrl:S.string().nullable(),authorImageUrl:S.string().nullable(),coverImageUrl:S.string().nullable(),catalogSheetUrl:S.string().nullable(),description:S.string().nullable(),createdAt:S.date(),updatedAt:S.date()}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:S.object({errors:S.record(S.string(),S.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:S.object({message:S.string()})}}}}},Ad={method:"get",path:"/book-volumes/{id}",tags:["Book Volumes"],summary:"Find book volume by ID",security:[{bearerAuth:[]}],request:{params:Da},responses:{200:{description:"Book volume details retrieved successfully",summary:"Volume Retrieved",content:{"application/json":{schema:S.object({id:S.string(),volumeNumber:S.number(),year:S.number(),title:S.string(),author:S.string(),accessUrl:S.string().nullable(),authorImageUrl:S.string().nullable(),coverImageUrl:S.string().nullable(),catalogSheetUrl:S.string().nullable(),description:S.string().nullable(),createdAt:S.date(),updatedAt:S.date()}).nullable()}}},400:{description:"Invalid volume ID format",summary:"Validation Error",content:{"application/json":{schema:S.object({errors:S.record(S.string(),S.string())})}}},404:{description:"Book volume not found with the provided ID",summary:"Volume Not Found",content:{"application/json":{schema:S.object({message:S.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:S.object({message:S.string()})}}}}},Dd={method:"put",path:"/book-volumes/{id}",tags:["Book Volumes"],summary:"Update book volume",security:[{bearerAuth:[]}],request:{params:qa.pick({id:!0}),body:{content:{"multipart/form-data":{schema:S.object({volumeNumber:S.number().int().positive().optional().openapi({description:"N\xFAmero do volume"}),year:S.number().int().positive().optional().openapi({description:"Ano de publica\xE7\xE3o"}),title:S.string().min(1).optional().openapi({description:"T\xEDtulo do livro"}),author:S.string().min(1).optional().openapi({description:"Nome do autor"}),accessUrl:S.string().url().optional().openapi({description:"URL de acesso ao livro"}),description:S.string().optional().openapi({description:"Descri\xE7\xE3o do livro"}),authorImage:S.string().optional().openapi({description:"Imagem do autor (m\xE1ximo 5MB)",type:"string",format:"binary"}),coverImage:S.string().optional().openapi({description:"Imagem da capa (m\xE1ximo 5MB)",type:"string",format:"binary"}),catalogSheet:S.string().optional().openapi({description:"Ficha catalogr\xE1fica (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{200:{description:"Book volume updated successfully",summary:"Volume Updated"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:S.object({errors:S.record(S.string(),S.string())})}}},404:{description:"Book volume not found with the provided ID",summary:"Volume Not Found",content:{"application/json":{schema:S.object({message:S.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:S.object({message:S.string()})}}}}},Fd={method:"delete",path:"/book-volumes/{id}",tags:["Book Volumes"],summary:"Delete book volume",security:[{bearerAuth:[]}],request:{params:Ta},responses:{200:{description:"Book volume deleted successfully",summary:"Volume Deleted"},400:{description:"Invalid volume ID format",summary:"Validation Error",content:{"application/json":{schema:S.object({errors:S.record(S.string(),S.string())})}}},404:{description:"Book volume not found with the provided ID",summary:"Volume Not Found",content:{"application/json":{schema:S.object({message:S.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:S.object({message:S.string()})}}}}};import{$Enums as sI}from"@prisma/client";import P from"zod";import{extendZodWithOpenApi as QR}from"@asteasolutions/zod-to-openapi";import Ua from"zod";QR(Ua);var ka=Ua.object({id:Ua.string()}),wo=class{constructor(e,r){this.certificationRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=ka.parse({id:e.params.certification_id}),i=await this.certificationRepository.findById(t);if(!i)throw new p("A certifica\xE7\xE3o n\xE3o existe.");return await Promise.all([this.certificationRepository.deleteById(i.id),this.firebaseStorageService.deleteFile({fileUrl:i.certificationUrl})]),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as eI}from"@asteasolutions/zod-to-openapi";import Oa from"zod";eI(Oa);var Na=Oa.object({certificationId:Oa.uuid()}),So=class{constructor(e){this.certificationRepository=e}async handle(e,r){try{let{certificationId:t}=Na.parse({certificationId:e.params.certification_id}),i=await this.certificationRepository.findById(t);if(!i)throw new p("Certificado n\xE3o encontrado.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as tI}from"@asteasolutions/zod-to-openapi";import rt from"zod";var rI=1,oI=6;tI(rt);var Ga=rt.object({page:rt.coerce.number().min(1).default(rI),limit:rt.coerce.number().min(1).default(oI),title:rt.string().optional(),description:rt.string().optional(),userId:rt.uuid().optional(),orderBy:rt.enum(["asc","desc"]).default("desc")}),vo=class{constructor(e){this.certificationRepository=e}async handle(e,r){try{let{limit:t,page:i,...n}=Ga.parse(e.query),s=i*t-t,[m,c]=await Promise.all([this.certificationRepository.find({pagination:{offset:s,limit:t},filter:n}),this.certificationRepository.count({filter:n})]),d=Math.max(Math.ceil(c/t),1);return r.status(200).json({page:i,totalPages:d,offset:s,limit:t,certifications:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as iI}from"@asteasolutions/zod-to-openapi";import Qt from"zod";iI(Qt);var jo=Qt.object({userId:Qt.uuid(),title:Qt.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),description:Qt.string().min(1,"Descri\xE7\xE3o \xE9 obrigat\xF3ria."),certification:Qt.any().refine(o=>o&&typeof o=="object"&&o.size>0,"Arquivo do certificado \xE9 obrigat\xF3rio")}),Eo=class{constructor(e,r,t){this.userRepository=e;this.certificationRepository=r;this.firebaseStorageService=t}async handle(e,r){try{let{userId:t,title:i,description:n,certification:s}=jo.parse({...e.body,userId:e.params.user_id,certification:e.file});if(!await this.userRepository.findById(t))throw new le("O usu\xE1rio n\xE3o existe.");let c=await this.firebaseStorageService.uploadFile({file:s,id:t,folder:M.CERTIFICATION});return await this.certificationRepository.register({userId:t,title:i,description:n,certificationUrl:c}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as nI}from"@asteasolutions/zod-to-openapi";import er from"zod";nI(er);var Mo=er.object({id:er.uuid(),title:er.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),description:er.string().min(1,"Descri\xE7\xE3o \xE9 obrigat\xF3ria."),certification:er.any().refine(o=>o==null||typeof o=="object"&&typeof o.size=="number"&&(o.size===0||o.size>0),"Arquivo do certificado \xE9 inv\xE1lido").optional()}),xo=class{constructor(e,r){this.certificationRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{certification:t,id:i,...n}=Mo.parse({...e.body,id:e.params.certification_id,certification:e.file}),s=await this.certificationRepository.findById(i);if(!s)throw new le("A certifica\xE7\xE3o n\xE3o existe");let m=s.certificationUrl;return t&&t.size>0&&(m=await this.firebaseStorageService.updateFile({file:t,id:s.userId,folder:M.CERTIFICATION,fileUrl:s.certificationUrl})),await this.certificationRepository.update({...n,id:i,certificationUrl:m}),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Bd={method:"post",path:"/certifications/{user_id}",tags:["Certifications"],summary:"Register certification for user",security:[{bearerAuth:[]}],request:{params:jo.pick({userId:!0}).transform(()=>({user_id:""})),body:{content:{"multipart/form-data":{schema:jo.omit({userId:!0})}}}},responses:{201:{description:"Certification registered successfully for the user",summary:"Certification Registered",content:{"application/json":{schema:P.object({message:P.string()})}}},400:{description:"Invalid input data or file format",summary:"Validation Error",content:{"application/json":{schema:P.object({errors:P.record(P.string(),P.string())})}}},404:{description:"User not found with the provided ID",summary:"User Not Found",content:{"application/json":{schema:P.object({message:P.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:P.object({message:P.string()})}}}}},qd={method:"get",path:"/certifications",tags:["Certifications"],summary:"List certifications",security:[{bearerAuth:[]}],request:{query:Ga},responses:{200:{description:"Paginated list of certifications with user information retrieved successfully",summary:"Certifications Retrieved",content:{"application/json":{schema:P.object({page:P.number(),totalPages:P.number(),offset:P.number(),limit:P.number(),certifications:P.array(P.object({description:P.string(),userId:P.string(),title:P.string(),id:P.string(),createdAt:P.date(),updatedAt:P.date(),certificationUrl:P.url(),user:P.object({id:P.uuid(),name:P.string(),createdAt:P.date(),updatedAt:P.date(),avatarUrl:P.string().nullable(),emailAddress:P.email(),orcid:P.string().nullable(),phone:P.string().nullable(),lattesUrl:P.url().nullable(),role:P.enum(sI.UserRole)})}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:P.object({errors:P.record(P.string(),P.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:P.object({message:P.string()})}}}}},Ud={method:"get",path:"/certifications/{certification_id}",tags:["Certifications"],summary:"Find certification by ID",security:[{bearerAuth:[]}],request:{params:Na},responses:{200:{description:"Certification details retrieved successfully",summary:"Certification Retrieved",content:{"application/json":{schema:P.object({description:P.string(),userId:P.string(),title:P.string(),id:P.string(),createdAt:P.date(),updatedAt:P.date(),certificationUrl:P.url()}).nullable()}}},400:{description:"Invalid certification ID format",summary:"Validation Error",content:{"application/json":{schema:P.object({errors:P.record(P.string(),P.string())})}}},404:{description:"Certification not found with the provided ID",summary:"Certification Not Found",content:{"application/json":{schema:P.object({message:P.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:P.object({message:P.string()})}}}}},kd={method:"put",path:"/certifications/{certification_id}",tags:["Certifications"],summary:"Update certification",security:[{bearerAuth:[]}],request:{params:Mo.pick({id:!0}).transform(()=>({certification_id:""})),body:{content:{"multipart/form-data":{schema:Mo.omit({id:!0})}}}},responses:{204:{description:"Certification updated successfully",summary:"Certification Updated"},400:{description:"Invalid input data or file format",summary:"Validation Error",content:{"application/json":{schema:P.object({errors:P.record(P.string(),P.string())})}}},404:{description:"Certification not found with the provided ID",summary:"Certification Not Found",content:{"application/json":{schema:P.object({message:P.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:P.object({message:P.string()})}}}}},Od={method:"delete",path:"/certifications/{certification_id}",tags:["Certifications"],summary:"Delete certification",security:[{bearerAuth:[]}],request:{params:ka},responses:{204:{description:"Certification deleted successfully",summary:"Certification Deleted"},400:{description:"Invalid certification ID format",summary:"Validation Error",content:{"application/json":{schema:P.object({errors:P.record(P.string(),P.string())})}}},404:{description:"Certification not found with the provided ID",summary:"Certification Not Found",content:{"application/json":{schema:P.object({message:P.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:P.object({message:P.string()})}}}}};import R from"zod";import{extendZodWithOpenApi as aI}from"@asteasolutions/zod-to-openapi";import La from"zod";aI(La);var Wa=La.object({id:La.uuid()}),Po=class{constructor(e,r){this.courseRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=Wa.parse({id:e.params.id}),i=await this.courseRepository.findById(t);if(!i)throw new p("O curso n\xE3o existe.");return i.imageUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.imageUrl}),await this.courseRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as mI}from"@asteasolutions/zod-to-openapi";import _a from"zod";mI(_a);var za=_a.object({id:_a.uuid()}),To=class{constructor(e){this.courseRepository=e}async handle(e,r){try{let{id:t}=za.parse({id:e.params.id}),i=await this.courseRepository.findById(t);if(!i)throw new p("Curso n\xE3o encontrado.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as cI}from"@asteasolutions/zod-to-openapi";import ot from"zod";var pI=1,dI=6;cI(ot);var Ha=ot.object({page:ot.coerce.number().min(1).default(pI),limit:ot.coerce.number().min(1).default(dI),title:ot.string().optional(),description:ot.string().optional(),coordinator:ot.string().optional(),orderBy:ot.enum(["asc","desc"]).default("desc")}),Ao=class{constructor(e){this.courseRepository=e}async handle(e,r){try{let{limit:t,page:i,...n}=Ha.parse(e.query),s=i*t-t,[m,c]=await Promise.all([this.courseRepository.find({pagination:{offset:s,limit:t},filter:n}),this.courseRepository.count({filter:n})]),d=Math.max(Math.ceil(c/t),1);return r.status(200).json({page:i,totalPages:d,offset:s,limit:t,courses:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as lI}from"@asteasolutions/zod-to-openapi";import ue from"zod";var Gd=5,Nd=1024,uI=Nd*Nd,gI=Gd*uI;lI(ue);var Va=ue.object({id:ue.uuid(),title:ue.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio.").optional(),coordinatorId:ue.string().uuid("Coordenador \xE9 obrigat\xF3rio.").optional(),email:ue.string().email("E-mail deve ser v\xE1lido.").optional(),location:ue.string().min(1,"Localiza\xE7\xE3o \xE9 obrigat\xF3ria.").optional(),scheduledAt:ue.coerce.date().optional(),registrationLink:ue.url("URL de inscri\xE7\xE3o deve ser v\xE1lida").optional(),description:ue.string().optional(),instructorIds:ue.transform(o=>typeof o=="string"?o.split(","):o).pipe(ue.array(ue.uuid())).optional(),image:ue.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=gI,`A imagem deve ter no m\xE1ximo ${Gd}MB.`).optional()}),Do=class{constructor(e,r){this.courseRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,image:i,title:n,coordinatorId:s,email:m,location:c,scheduledAt:d,registrationLink:h,description:j,instructorIds:U}=Va.parse({id:e.params.id,...e.body,image:e.file}),Q=await this.courseRepository.findById(t);if(!Q)throw new p("O curso n\xE3o existe.");let te=Q.imageUrl;if(i&&(te=await this.firebaseStorageService.uploadFile({file:i,id:t,folder:M.COURSE})),!te)throw new a("URL da imagem \xE9 obrigat\xF3rio");return await this.courseRepository.update({id:t,title:n,coordinatorId:s,email:m,location:c,scheduledAt:d,registrationLink:h,description:j,imageUrl:te,instructorIds:U}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Ld={method:"post",path:"/courses",tags:["Courses"],summary:"Create course",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:R.object({title:R.string().min(1).openapi({description:"T\xEDtulo do curso"}),coordinator:R.string().min(1).openapi({description:"Nome do coordenador"}),email:R.string().email().openapi({description:"E-mail de contato"}),location:R.string().min(1).openapi({description:"Localiza\xE7\xE3o do curso"}),scheduledAt:R.string().openapi({description:"Data e hora agendada (ISO 8601)",example:"2024-01-01T10:00:00Z"}),registrationLink:R.string().url().optional().openapi({description:"Link de inscri\xE7\xE3o"}),description:R.string().optional().openapi({description:"Descri\xE7\xE3o do curso"}),instructorIds:R.string().openapi({description:"IDs dos instrutores separados por v\xEDrgula",example:"uuid1,uuid2,uuid3"}),image:R.string().optional().openapi({description:"Imagem do curso (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{201:{description:"Course created successfully",summary:"Course Created"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:R.object({errors:R.record(R.string(),R.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:R.object({message:R.string()})}}}}},Wd={method:"get",path:"/courses",tags:["Courses"],summary:"List courses",security:[{bearerAuth:[]}],request:{query:Ha},responses:{200:{description:"Paginated list of courses with instructor information retrieved successfully",summary:"Courses Retrieved",content:{"application/json":{schema:R.object({page:R.number(),totalPages:R.number(),offset:R.number(),limit:R.number(),courses:R.array(R.object({id:R.string(),title:R.string(),imageUrl:R.string().nullable(),coordinator:R.string(),email:R.string(),scheduledAt:R.date(),location:R.string(),registrationLink:R.string().nullable(),description:R.string().nullable(),createdAt:R.date(),updatedAt:R.date(),instructors:R.array(R.object({id:R.uuid(),name:R.string(),emailAddress:R.email(),avatarUrl:R.string().nullable(),createdAt:R.date(),updatedAt:R.date()}))}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:R.object({errors:R.record(R.string(),R.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:R.object({message:R.string()})}}}}},_d={method:"get",path:"/courses/{id}",tags:["Courses"],summary:"Find course by ID",security:[{bearerAuth:[]}],request:{params:za},responses:{200:{description:"Course details retrieved successfully",summary:"Course Retrieved",content:{"application/json":{schema:R.object({id:R.string(),title:R.string(),imageUrl:R.string().nullable(),coordinator:R.string(),email:R.string(),scheduledAt:R.date(),location:R.string(),registrationLink:R.string().nullable(),description:R.string().nullable(),createdAt:R.date(),updatedAt:R.date(),instructors:R.array(R.object({id:R.uuid(),name:R.string(),emailAddress:R.email(),avatarUrl:R.string().nullable(),createdAt:R.date(),updatedAt:R.date()}))}).nullable()}}},400:{description:"Invalid course ID format",summary:"Validation Error",content:{"application/json":{schema:R.object({errors:R.record(R.string(),R.string())})}}},404:{description:"Course not found with the provided ID",summary:"Course Not Found",content:{"application/json":{schema:R.object({message:R.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:R.object({message:R.string()})}}}}},zd={method:"put",path:"/courses/{id}",tags:["Courses"],summary:"Update course",security:[{bearerAuth:[]}],request:{params:Va.pick({id:!0}),body:{content:{"multipart/form-data":{schema:R.object({title:R.string().min(1).optional().openapi({description:"T\xEDtulo do curso"}),coordinator:R.string().min(1).optional().openapi({description:"Nome do coordenador"}),email:R.string().email().optional().openapi({description:"E-mail de contato"}),location:R.string().min(1).optional().openapi({description:"Localiza\xE7\xE3o do curso"}),scheduledAt:R.string().optional().openapi({description:"Data e hora agendada (ISO 8601)",example:"2024-01-01T10:00:00Z"}),registrationLink:R.string().url().optional().openapi({description:"Link de inscri\xE7\xE3o"}),description:R.string().optional().openapi({description:"Descri\xE7\xE3o do curso"}),instructorIds:R.string().optional().openapi({description:"IDs dos instrutores separados por v\xEDrgula",example:"uuid1,uuid2,uuid3"}),image:R.string().optional().openapi({description:"Imagem do curso (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{200:{description:"Course updated successfully",summary:"Course Updated"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:R.object({errors:R.record(R.string(),R.string())})}}},404:{description:"Course not found with the provided ID",summary:"Course Not Found",content:{"application/json":{schema:R.object({message:R.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:R.object({message:R.string()})}}}}},Hd={method:"delete",path:"/courses/{id}",tags:["Courses"],summary:"Delete course",security:[{bearerAuth:[]}],request:{params:Wa},responses:{200:{description:"Course deleted successfully",summary:"Course Deleted"},400:{description:"Invalid course ID format",summary:"Validation Error",content:{"application/json":{schema:R.object({errors:R.record(R.string(),R.string())})}}},404:{description:"Course not found with the provided ID",summary:"Course Not Found",content:{"application/json":{schema:R.object({message:R.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:R.object({message:R.string()})}}}}};import{$Enums as $a}from"@prisma/client";import C from"zod";import{extendZodWithOpenApi as fI}from"@asteasolutions/zod-to-openapi";import xe from"zod";fI(xe);var Za=xe.object({code:xe.string(),title:xe.string(),description:xe.string().optional(),notes:xe.string().optional(),leaderId:xe.uuid(),deputyLeaderId:xe.uuid(),secretaryId:xe.uuid(),memberIds:xe.array(xe.uuid())}),Fo=class{constructor(e){this.etpRepository=e}async handle(e,r){try{let{code:t,title:i,description:n,notes:s,leaderId:m,deputyLeaderId:c,secretaryId:d,memberIds:h}=Za.parse(e.body);if(await this.etpRepository.findByCode(t))throw new se("J\xE1 existe um ETP cadastrado com este c\xF3digo.");return await this.etpRepository.create({code:t,title:i,description:n,notes:s,leaderId:m,deputyLeaderId:c,secretaryId:d,memberIds:h}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as yI}from"@asteasolutions/zod-to-openapi";import Ka from"zod";yI(Ka);var Ja=Ka.object({id:Ka.uuid()}),Bo=class{constructor(e){this.etpRepository=e}async handle(e,r){try{let{id:t}=Ja.parse({id:e.params.id});if(!await this.etpRepository.findById(t))throw new p("O ETP n\xE3o existe.");return await this.etpRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as hI}from"@asteasolutions/zod-to-openapi";import Ya from"zod";hI(Ya);var Uo=Ya.object({id:Ya.uuid()}),qo=class{constructor(e){this.etpRepository=e}async handle(e,r){try{let{id:t}=Uo.parse({id:e.params.id}),i=await this.etpRepository.findById(t);if(!i)throw new p("O ETP n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as RI}from"@asteasolutions/zod-to-openapi";import we from"zod";RI(we);var Xa=we.object({id:we.uuid(),code:we.string().optional(),title:we.string().optional(),description:we.string().optional(),notes:we.string().optional(),leaderId:we.uuid().optional(),deputyLeaderId:we.uuid().optional(),secretaryId:we.uuid().optional(),memberIds:we.array(we.uuid()).optional()}),ko=class{constructor(e){this.etpRepository=e}async handle(e,r){try{let{id:t,code:i,title:n,description:s,notes:m,leaderId:c,deputyLeaderId:d,secretaryId:h,memberIds:j}=Xa.parse({id:e.params.id,...e.body});if(!await this.etpRepository.findById(t))throw new p("O ETP n\xE3o existe.");if(i){let Q=await this.etpRepository.findByCode(i);if(Q&&Q.id!==t)throw new se("J\xE1 existe um ETP com este c\xF3digo.")}return await this.etpRepository.update({id:t,code:i,title:n,description:s,notes:m,leaderId:c,deputyLeaderId:d,secretaryId:h,memberIds:j}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var II=1,bI=9,Oo=C.object({id:C.uuid(),registrationNumber:C.string(),mainEtps:C.string().nullable(),formations:C.string().nullable(),degrees:C.array(C.enum($a.Degree)),occupations:C.string(),seniority:C.enum($a.Seniority),institutions:C.string(),biography:C.string().nullable(),createdAt:C.date(),updatedAt:C.date(),user:C.object({id:C.uuid(),name:C.string(),emailAddress:C.string(),avatarUrl:C.string().nullable(),orcid:C.string().nullable(),phone:C.string().nullable(),lattesUrl:C.string().nullable(),role:C.enum($a.UserRole)})}),Vd=C.object({id:C.uuid(),code:C.string(),title:C.string(),description:C.string().nullable(),notes:C.string().nullable(),createdAt:C.date(),updatedAt:C.date(),leader:C.object({id:C.uuid(),researcher:Oo}).nullable(),deputyLeader:C.object({id:C.uuid(),researcher:Oo}).nullable(),secretary:C.object({id:C.uuid(),researcher:Oo}).nullable(),members:C.array(Oo)}),Zd={method:"post",path:"/etp",tags:["ETPs"],summary:"Create a new ETP with single leader, deputy leader, secretary and multiple members",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:Za}}}},responses:{201:{description:"ETP created successfully",summary:"ETP Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:C.object({errors:C.record(C.string(),C.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:C.object({message:C.string()})}}},409:{description:"ETP with this code already exists",summary:"Conflict",content:{"application/json":{schema:C.object({message:C.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:C.object({message:C.string()})}}}}},Kd={method:"get",path:"/etp",tags:["ETPs"],summary:"List all ETPs with pagination and filters",request:{query:C.object({page:C.coerce.number().min(1).default(II).optional(),limit:C.coerce.number().min(1).default(bI).optional(),code:C.string().optional(),title:C.string().optional(),description:C.string().optional(),notes:C.string().optional(),orderBy:C.enum(["asc","desc"]).optional()})},responses:{200:{description:"List of ETPs retrieved successfully with pagination",summary:"ETPs Retrieved",content:{"application/json":{schema:C.object({page:C.number(),totalPages:C.number(),offset:C.number(),limit:C.number(),etps:C.array(Vd)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:C.object({message:C.string()})}}}}},Jd={method:"get",path:"/etp/{id}",tags:["ETPs"],summary:"Find ETP by ID",request:{params:Uo},responses:{200:{description:"ETP details retrieved successfully",summary:"ETP Retrieved",content:{"application/json":{schema:Vd}}},400:{description:"Invalid ETP ID format",summary:"Validation Error",content:{"application/json":{schema:C.object({errors:C.record(C.string(),C.string())})}}},404:{description:"ETP not found with the provided ID",summary:"ETP Not Found",content:{"application/json":{schema:C.object({message:C.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:C.object({message:C.string()})}}}}},Yd={method:"put",path:"/etp/{id}",tags:["ETPs"],summary:"Update ETP and manage user relationships (single leader, deputy leader, secretary, multiple members)",security:[{bearerAuth:[]}],request:{params:Uo,body:{content:{"application/json":{schema:Xa.omit({id:!0})}}}},responses:{200:{description:"ETP updated successfully",summary:"ETP Updated"},400:{description:"Invalid input data or ETP ID format",summary:"Validation Error",content:{"application/json":{schema:C.object({errors:C.record(C.string(),C.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:C.object({message:C.string()})}}},404:{description:"ETP not found with the provided ID",summary:"ETP Not Found",content:{"application/json":{schema:C.object({message:C.string()})}}},409:{description:"ETP with this code already exists",summary:"Conflict",content:{"application/json":{schema:C.object({message:C.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:C.object({message:C.string()})}}}}},Xd={method:"delete",path:"/etp/{id}",tags:["ETPs"],summary:"Delete ETP",security:[{bearerAuth:[]}],request:{params:Ja},responses:{200:{description:"ETP deleted successfully",summary:"ETP Deleted"},400:{description:"Invalid ETP ID format",summary:"Validation Error",content:{"application/json":{schema:C.object({errors:C.record(C.string(),C.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:C.object({message:C.string()})}}},404:{description:"ETP not found with the provided ID",summary:"ETP Not Found",content:{"application/json":{schema:C.object({message:C.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:C.object({message:C.string()})}}}}};import{EventFormat as OI,EventStatus as NI}from"@prisma/client";import k from"zod";import{extendZodWithOpenApi as CI}from"@asteasolutions/zod-to-openapi";import{EventFormat as No,EventStatus as Qa}from"@prisma/client";import Se from"zod";var wI=5,$d=1024,SI=$d*$d,vI=wI*SI;CI(Se);var em=Se.object({title:Se.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio"),description:Se.string().optional(),startDate:Se.coerce.date(),endDate:Se.coerce.date(),location:Se.string().optional(),format:Se.enum(No).default(No.ONLINE),eventLink:Se.string().url("Link do evento deve ser uma URL v\xE1lida").optional().or(Se.literal("")),status:Se.enum(Qa).default(Qa.PENDING),image:Se.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=vI,"A imagem deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.")}).refine(o=>o.format===No.ONLINE?!!o.eventLink:o.format===No.IN_PERSON?!!o.location:!0,{message:"Eventos online devem ter link e eventos presenciais devem ter localiza\xE7\xE3o",path:["format"]}),Go=class{constructor(e,r){this.eventRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{title:t,description:i,startDate:n,endDate:s,location:m,format:c,eventLink:d,status:h,image:j}=em.parse({...e.body,image:e.file}),U=await this.eventRepository.create({title:t,description:i,startDate:n,endDate:s,location:m||void 0,format:c,eventLink:d||void 0,status:h??Qa.PENDING}),Q=await this.firebaseStorageService.uploadFile({file:j,folder:M.EVENT,id:U.id});return await this.eventRepository.update({id:U.id,imageUrl:Q}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as EI}from"@asteasolutions/zod-to-openapi";import tm from"zod";EI(tm);var rm=tm.object({id:tm.uuid()}),Lo=class{constructor(e){this.eventRepository=e}async handle(e,r){try{let{id:t}=rm.parse({id:e.params.id});if(!await this.eventRepository.findById(t))throw new p("O evento n\xE3o existe.");return await this.eventRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as jI}from"@asteasolutions/zod-to-openapi";import om from"zod";jI(om);var _o=om.object({id:om.uuid()}),Wo=class{constructor(e){this.eventRepository=e}async handle(e,r){try{let{id:t}=_o.parse({id:e.params.id}),i=await this.eventRepository.findById(t);if(!i)throw new p("O evento n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as xI}from"@asteasolutions/zod-to-openapi";import{EventFormat as MI,EventStatus as PI}from"@prisma/client";import it from"zod";var TI=1,AI=10;xI(it);var im=it.object({page:it.coerce.number().min(1).default(TI),limit:it.coerce.number().min(1).default(AI),title:it.string().optional(),status:it.nativeEnum(PI).optional(),format:it.nativeEnum(MI).optional(),orderBy:it.enum(["asc","desc"]).optional()}),zo=class{constructor(e){this.eventRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=im.parse(e.query),s=i*t-i,[m,c]=await Promise.all([this.eventRepository.find({pagination:{offset:s,limit:i},filter:n}),this.eventRepository.count({filter:n})]),d=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:d,offset:s,limit:i,events:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as DI}from"@asteasolutions/zod-to-openapi";import{EventFormat as FI,EventStatus as BI}from"@prisma/client";import ye from"zod";var qI=5,Qd=1024,UI=Qd*Qd,kI=qI*UI;DI(ye);var nm=ye.object({id:ye.uuid(),title:ye.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio").optional(),description:ye.string().optional(),startDate:ye.coerce.date().optional(),endDate:ye.coerce.date().optional(),location:ye.string().optional(),format:ye.nativeEnum(FI).optional(),eventLink:ye.string().url("Link do evento deve ser uma URL v\xE1lida").optional().or(ye.literal("")),status:ye.nativeEnum(BI).optional(),image:ye.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=kI,"A imagem deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.").optional()}),Ho=class{constructor(e,r){this.eventRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,title:i,description:n,startDate:s,endDate:m,location:c,format:d,eventLink:h,status:j,image:U}=nm.parse({id:e.params.id,...e.body,image:e.file});if(!await this.eventRepository.findById(t))throw new p("O evento n\xE3o existe.");let te;return U&&(te=await this.firebaseStorageService.uploadFile({file:U,folder:M.EVENT,id:t})),await this.eventRepository.update({id:t,title:i,description:n,startDate:s,endDate:m,location:c||void 0,format:d,eventLink:h||void 0,status:j,imageUrl:te}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var el=k.object({id:k.uuid(),title:k.string(),description:k.string().nullable(),imageUrl:k.string().nullable(),startDate:k.date(),endDate:k.date(),location:k.string().nullable(),status:k.nativeEnum(NI),format:k.nativeEnum(OI),eventLink:k.string().nullable(),createdAt:k.date(),updatedAt:k.date()}),tl={method:"post",path:"/event",tags:["Events"],summary:"Create a new event",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:em}}}},responses:{201:{description:"Event created successfully",summary:"Event Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:k.object({errors:k.record(k.string(),k.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:k.object({message:k.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:k.object({message:k.string()})}}}}},rl={method:"get",path:"/event",tags:["Events"],summary:"List all events with pagination and filters",request:{query:im},responses:{200:{description:"List of events retrieved successfully with pagination",summary:"Events Retrieved",content:{"application/json":{schema:k.object({page:k.number(),totalPages:k.number(),offset:k.number(),limit:k.number(),events:k.array(el)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:k.object({errors:k.record(k.string(),k.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:k.object({message:k.string()})}}}}},ol={method:"get",path:"/event/{id}",tags:["Events"],summary:"Find event by ID",request:{params:_o},responses:{200:{description:"Event details retrieved successfully",summary:"Event Retrieved",content:{"application/json":{schema:el}}},400:{description:"Invalid event ID format",summary:"Validation Error",content:{"application/json":{schema:k.object({errors:k.record(k.string(),k.string())})}}},404:{description:"Event not found with the provided ID",summary:"Event Not Found",content:{"application/json":{schema:k.object({message:k.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:k.object({message:k.string()})}}}}},il={method:"put",path:"/event/{id}",tags:["Events"],summary:"Update event",security:[{bearerAuth:[]}],request:{params:_o,body:{content:{"multipart/form-data":{schema:nm.omit({id:!0})}}}},responses:{200:{description:"Event updated successfully",summary:"Event Updated"},400:{description:"Invalid input data or event ID format",summary:"Validation Error",content:{"application/json":{schema:k.object({errors:k.record(k.string(),k.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:k.object({message:k.string()})}}},404:{description:"Event not found with the provided ID",summary:"Event Not Found",content:{"application/json":{schema:k.object({message:k.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:k.object({message:k.string()})}}}}},nl={method:"delete",path:"/event/{id}",tags:["Events"],summary:"Delete event",security:[{bearerAuth:[]}],request:{params:rm},responses:{200:{description:"Event deleted successfully",summary:"Event Deleted"},400:{description:"Invalid event ID format",summary:"Validation Error",content:{"application/json":{schema:k.object({errors:k.record(k.string(),k.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:k.object({message:k.string()})}}},404:{description:"Event not found with the provided ID",summary:"Event Not Found",content:{"application/json":{schema:k.object({message:k.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:k.object({message:k.string()})}}}}};import{InMemoriamRole as rb}from"@prisma/client";import A from"zod";import{extendZodWithOpenApi as GI}from"@asteasolutions/zod-to-openapi";import{InMemoriamRole as LI}from"@prisma/client";import nt from"zod";var al=2,sl=1024,WI=sl*sl,_I=al*WI;GI(nt);var sm=nt.object({name:nt.string().min(1,"Nome \xE9 obrigat\xF3rio"),birthDate:nt.coerce.date(),deathDate:nt.coerce.date(),biography:nt.string().optional(),photo:nt.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=_I,`A imagem deve ter no m\xE1ximo ${al}MB.`).optional(),role:nt.enum(LI)}).refine(o=>o.deathDate>o.birthDate,{message:"Data de falecimento deve ser posterior \xE0 data de nascimento",path:["deathDate"]}),Vo=class{constructor(e,r){this.inMemoriamRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{name:t,birthDate:i,deathDate:n,biography:s,role:m,photo:c}=sm.parse({...e.body,photo:e.file}),d=await this.inMemoriamRepository.create({name:t,birthDate:i,deathDate:n,biography:s??void 0,role:m}),h;return c&&(h=await this.firebaseStorageService.uploadFile({file:c,id:d.id,folder:M.IN_MEMORIAM}),await this.inMemoriamRepository.update({id:d.id,photoUrl:h})),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as zI}from"@asteasolutions/zod-to-openapi";import am from"zod";zI(am);var mm=am.object({id:am.uuid()}),Zo=class{constructor(e,r){this.inMemoriamRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=mm.parse({id:e.params.id}),i=await this.inMemoriamRepository.findById(t);if(!i)throw new p("O in memoriam n\xE3o existe.");return i.photoUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.photoUrl}),await this.inMemoriamRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as HI}from"@asteasolutions/zod-to-openapi";import cm from"zod";HI(cm);var Jo=cm.object({id:cm.uuid()}),Ko=class{constructor(e){this.inMemoriamRepository=e}async handle(e,r){try{let{id:t}=Jo.parse({id:e.params.id}),i=await this.inMemoriamRepository.findById(t);if(!i)throw new p("O in memoriam n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as VI}from"@asteasolutions/zod-to-openapi";import{InMemoriamRole as ZI}from"@prisma/client";import pm from"zod";VI(pm);var dm=pm.object({role:pm.enum(ZI)}),Yo=class{constructor(e){this.inMemoriamRepository=e}async handle(e,r){try{let{role:t}=dm.parse({role:e.params.role}),i=await this.inMemoriamRepository.findByRole(t);return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as KI}from"@asteasolutions/zod-to-openapi";import{InMemoriamRole as JI}from"@prisma/client";import st from"zod";var YI=1,XI=9;KI(st);var lm=st.object({page:st.coerce.number().min(1).default(YI),limit:st.coerce.number().min(1).default(XI),name:st.string().optional(),biography:st.string().optional(),role:st.enum(JI).optional(),orderBy:st.enum(["asc","desc"]).default("desc")}),Xo=class{constructor(e){this.inMemoriamRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=lm.parse(e.query),s=i*t-i,[m,c]=await Promise.all([this.inMemoriamRepository.find({pagination:{offset:s,limit:i},filter:n}),this.inMemoriamRepository.count({filter:n})]),d=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:d,offset:s,limit:i,inMemoriam:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as $I}from"@asteasolutions/zod-to-openapi";import{InMemoriamRole as QI}from"@prisma/client";import We from"zod";var cl=2,ml=1024,eb=ml*ml,tb=cl*eb;$I(We);var um=We.object({id:We.uuid(),name:We.string().min(1,"Nome \xE9 obrigat\xF3rio").optional(),birthDate:We.coerce.date().optional(),deathDate:We.coerce.date().optional(),biography:We.string().optional(),photo:We.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=tb,`A imagem deve ter no m\xE1ximo ${cl}MB.`).optional(),role:We.enum(QI).optional()}).refine(o=>o.birthDate&&o.deathDate?o.deathDate>o.birthDate:!0,{message:"Data de falecimento deve ser posterior \xE0 data de nascimento",path:["deathDate"]}),$o=class{constructor(e,r){this.inMemoriamRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,name:i,birthDate:n,deathDate:s,biography:m,photo:c,role:d}=um.parse({id:e.params.id,...e.body,photo:e.file}),h=await this.inMemoriamRepository.findById(t);if(!h)throw new p("O registro in memoriam n\xE3o existe.");let j=h.photoUrl;return c&&(j=await this.firebaseStorageService.uploadFile({file:c,id:t,folder:M.IN_MEMORIAM})),await this.inMemoriamRepository.update({id:t,name:i,birthDate:n,deathDate:s,biography:m,photoUrl:j??void 0,role:d}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var gm=A.object({id:A.uuid(),name:A.string(),birthDate:A.date(),deathDate:A.date(),biography:A.string().nullable(),photoUrl:A.string().nullable(),role:A.enum(rb),createdAt:A.date(),updatedAt:A.date()}),pl={method:"post",path:"/in-memoriam",tags:["In Memoriam"],summary:"Create a new in memoriam record with optional photo upload",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:sm}}}},responses:{201:{description:"In memoriam record created successfully",summary:"In Memoriam Created"},400:{description:"Invalid input data, missing required fields, or invalid photo format/size",summary:"Validation Error",content:{"application/json":{schema:A.object({errors:A.record(A.string(),A.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:A.object({message:A.string()})}}},409:{description:"In memoriam record with this name already exists",summary:"Conflict",content:{"application/json":{schema:A.object({message:A.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:A.object({message:A.string()})}}}}},dl={method:"get",path:"/in-memoriam",tags:["In Memoriam"],summary:"List all in memoriam records with pagination and filters",request:{query:lm},responses:{200:{description:"List of in memoriam records retrieved successfully with pagination",summary:"In Memoriam Records Retrieved",content:{"application/json":{schema:A.object({page:A.number(),totalPages:A.number(),offset:A.number(),limit:A.number(),inMemoriam:A.array(gm)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:A.object({errors:A.record(A.string(),A.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:A.object({message:A.string()})}}}}},ll={method:"get",path:"/in-memoriam/{id}",tags:["In Memoriam"],summary:"Find in memoriam record by ID",request:{params:Jo},responses:{200:{description:"In memoriam record details retrieved successfully",summary:"In Memoriam Record Retrieved",content:{"application/json":{schema:gm}}},400:{description:"Invalid in memoriam record ID format",summary:"Validation Error",content:{"application/json":{schema:A.object({errors:A.record(A.string(),A.string())})}}},404:{description:"In memoriam record not found with the provided ID",summary:"In Memoriam Record Not Found",content:{"application/json":{schema:A.object({message:A.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:A.object({message:A.string()})}}}}},ul={method:"put",path:"/in-memoriam/{id}",tags:["In Memoriam"],summary:"Update in memoriam record with optional photo upload",security:[{bearerAuth:[]}],request:{params:Jo,body:{content:{"multipart/form-data":{schema:um.omit({id:!0})}}}},responses:{200:{description:"In memoriam record updated successfully",summary:"In Memoriam Record Updated"},400:{description:"Invalid input data, in memoriam record ID format, or invalid photo format/size",summary:"Validation Error",content:{"application/json":{schema:A.object({errors:A.record(A.string(),A.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:A.object({message:A.string()})}}},404:{description:"In memoriam record not found with the provided ID",summary:"In Memoriam Record Not Found",content:{"application/json":{schema:A.object({message:A.string()})}}},409:{description:"In memoriam record with this name already exists",summary:"Conflict",content:{"application/json":{schema:A.object({message:A.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:A.object({message:A.string()})}}}}},gl={method:"delete",path:"/in-memoriam/{id}",tags:["In Memoriam"],summary:"Delete in memoriam record",security:[{bearerAuth:[]}],request:{params:mm},responses:{200:{description:"In memoriam record deleted successfully",summary:"In Memoriam Record Deleted"},400:{description:"Invalid in memoriam record ID format",summary:"Validation Error",content:{"application/json":{schema:A.object({errors:A.record(A.string(),A.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:A.object({message:A.string()})}}},404:{description:"In memoriam record not found with the provided ID",summary:"In Memoriam Record Not Found",content:{"application/json":{schema:A.object({message:A.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:A.object({message:A.string()})}}}}},bT={method:"get",path:"/in-memoriam/role/{role}",tags:["In Memoriam"],summary:"Find in memoriam records by role",request:{params:dm},responses:{200:{description:"In memoriam records retrieved successfully by role",summary:"In Memoriam Records Retrieved by Role",content:{"application/json":{schema:A.array(gm)}}},400:{description:"Invalid role parameter provided",summary:"Validation Error",content:{"application/json":{schema:A.object({errors:A.record(A.string(),A.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:A.object({message:A.string()})}}}}};import J from"zod";import{extendZodWithOpenApi as ob}from"@asteasolutions/zod-to-openapi";import kr from"zod";var yl=2,fl=1024,ib=fl*fl,nb=yl*ib;ob(kr);var fm=kr.object({image:kr.any().refine(o=>o==null||typeof o!="object"||typeof o.size!="number"?!1:o.size<=nb,`A imagem deve ter no m\xE1ximo ${yl}MB.`),caption:kr.string().optional(),congressId:kr.uuid()}),Qo=class{constructor(e,r,t){this.internationalScientificCongressGalleryRepository=e;this.internationalScientificCongressRepository=r;this.firebaseStorageService=t}async handle(e,r){try{let{image:t,caption:i,congressId:n}=fm.parse({...e.body,...e.params,image:e.file});if(!await this.internationalScientificCongressRepository.findById(n))throw new p("O congresso n\xE3o existe.");let m=await this.internationalScientificCongressGalleryRepository.create({imageUrl:"",caption:i||void 0,congressId:n}),c=await this.firebaseStorageService.uploadFile({file:t,id:m.id,folder:M.INTERNATIONAL_SCIENTIFIC_CONGRESS_GALLERY});return await this.internationalScientificCongressGalleryRepository.update({id:m.id,imageUrl:c}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as sb}from"@asteasolutions/zod-to-openapi";import ym from"zod";sb(ym);var ti=ym.object({id:ym.uuid()}),ei=class{constructor(e){this.internationalScientificCongressGalleryRepository=e}async handle(e,r){try{let{id:t}=ti.parse({id:e.params.id});if(!await this.internationalScientificCongressGalleryRepository.findById(t))throw new p("A imagem da galeria n\xE3o existe.");return await this.internationalScientificCongressGalleryRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as ab}from"@asteasolutions/zod-to-openapi";import tr from"zod";var mb=1,cb=9;ab(tr);var hm=tr.object({congressId:tr.uuid(),page:tr.coerce.number().min(1).default(mb),limit:tr.coerce.number().min(1).default(cb),caption:tr.string().optional()}),ri=class{constructor(e){this.internationalScientificCongressGalleryRepository=e}async handle(e,r){try{let{congressId:t,page:i,limit:n,...s}=hm.parse({congressId:e.params.congressId,...e.query}),m=n*i-n,[c,d]=await Promise.all([this.internationalScientificCongressGalleryRepository.findByCongressId({pagination:{offset:m,limit:n},filter:{congressId:t,...s}}),this.internationalScientificCongressGalleryRepository.count({filter:{congressId:t,caption:s.caption}})]),h=Math.max(Math.ceil(d/n),1);return r.status(200).json({page:i,totalPages:h,offset:m,limit:n,galleryImages:c})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as pb}from"@asteasolutions/zod-to-openapi";import Or from"zod";var Rl=2,hl=1024,db=hl*hl,lb=Rl*db;pb(Or);var Rm=Or.object({id:Or.uuid(),image:Or.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=lb,`A imagem deve ter no m\xE1ximo ${Rl}MB.`).optional(),caption:Or.string().optional()}),oi=class{constructor(e,r){this.internationalScientificCongressGalleryRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,image:i,caption:n}=Rm.parse({id:e.params.id,...e.body,image:e.file}),s=await this.internationalScientificCongressGalleryRepository.findById(t);if(!s)throw new p("A imagem da galeria n\xE3o existe.");let m=s.imageUrl;return i&&(m=await this.firebaseStorageService.uploadFile({file:i,id:t,folder:M.INTERNATIONAL_SCIENTIFIC_CONGRESS_GALLERY})),await this.internationalScientificCongressGalleryRepository.update({id:t,imageUrl:m??void 0,caption:n||void 0}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var ub=J.object({id:J.uuid(),imageUrl:J.string(),caption:J.string().nullable(),congressId:J.uuid()}),Il={method:"post",path:"/international-scientific-congress/{congressId}/gallery",tags:["International Scientific Congresses"],summary:"Create a new congress gallery image",security:[{bearerAuth:[]}],request:{params:J.object({congressId:J.uuid()}),body:{content:{"application/json":{schema:fm.omit({congressId:!0})}}}},responses:{201:{description:"Congress gallery image created successfully",summary:"Congress Gallery Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:J.object({errors:J.record(J.string(),J.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:J.object({message:J.string()})}}},404:{description:"Congress not found with the provided ID",summary:"Congress Not Found",content:{"application/json":{schema:J.object({message:J.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:J.object({message:J.string()})}}}}},bl={method:"get",path:"/international-scientific-congress/{congressId}/gallery",tags:["International Scientific Congresses"],summary:"Find congress gallery images by congress ID",request:{params:hm},responses:{200:{description:"Congress gallery images retrieved successfully by congress ID",summary:"Congress Galleries Retrieved",content:{"application/json":{schema:J.array(ub)}}},400:{description:"Invalid congress ID parameter provided",summary:"Validation Error",content:{"application/json":{schema:J.object({errors:J.record(J.string(),J.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:J.object({message:J.string()})}}}}},Cl={method:"put",path:"/international-scientific-congress/gallery/{id}",tags:["International Scientific Congresses"],summary:"Update congress gallery image",security:[{bearerAuth:[]}],request:{params:ti,body:{content:{"application/json":{schema:Rm.omit({id:!0})}}}},responses:{200:{description:"Congress gallery image updated successfully",summary:"Congress Gallery Updated"},400:{description:"Invalid input data or gallery ID format",summary:"Validation Error",content:{"application/json":{schema:J.object({errors:J.record(J.string(),J.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:J.object({message:J.string()})}}},404:{description:"Congress gallery image not found with the provided ID",summary:"Congress Gallery Not Found",content:{"application/json":{schema:J.object({message:J.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:J.object({message:J.string()})}}}}},wl={method:"delete",path:"/international-scientific-congress/gallery/{id}",tags:["International Scientific Congresses"],summary:"Delete congress gallery image",security:[{bearerAuth:[]}],request:{params:ti},responses:{200:{description:"Congress gallery image deleted successfully",summary:"Congress Gallery Deleted"},400:{description:"Invalid gallery ID format",summary:"Validation Error",content:{"application/json":{schema:J.object({errors:J.record(J.string(),J.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:J.object({message:J.string()})}}},404:{description:"Congress gallery image not found with the provided ID",summary:"Congress Gallery Not Found",content:{"application/json":{schema:J.object({message:J.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:J.object({message:J.string()})}}}}};import Y from"zod";import{extendZodWithOpenApi as gb}from"@asteasolutions/zod-to-openapi";import Nr from"zod";var vl=2,Sl=1024,fb=Sl*Sl,yb=vl*fb;gb(Nr);var Im=Nr.object({name:Nr.string().min(1,"Nome \xE9 obrigat\xF3rio"),logo:Nr.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=yb,`A imagem deve ter no m\xE1ximo ${vl}MB.`).optional(),congressId:Nr.uuid()}),ii=class{constructor(e,r,t){this.internationalScientificCongressPartnerRepository=e;this.internationalScientificCongressRepository=r;this.firebaseStorageService=t}async handle(e,r){try{let{name:t,logo:i,congressId:n}=Im.parse({...e.body,...e.params,logo:e.file});if(!await this.internationalScientificCongressRepository.findById(n))throw new p("O congresso n\xE3o existe.");let m=await this.internationalScientificCongressPartnerRepository.create({name:t,congressId:n}),c;return i&&(c=await this.firebaseStorageService.uploadFile({file:i,id:m.id,folder:M.PARTNER}),await this.internationalScientificCongressPartnerRepository.update({id:m.id,logoUrl:c})),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as hb}from"@asteasolutions/zod-to-openapi";import bm from"zod";hb(bm);var si=bm.object({id:bm.uuid()}),ni=class{constructor(e){this.internationalScientificCongressPartnerRepository=e}async handle(e,r){try{let{id:t}=si.parse({id:e.params.id});if(!await this.internationalScientificCongressPartnerRepository.findById(t))throw new p("O parceiro n\xE3o existe.");return await this.internationalScientificCongressPartnerRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Rb}from"@asteasolutions/zod-to-openapi";import rr from"zod";var Ib=1,bb=9;Rb(rr);var Cm=rr.object({congressId:rr.uuid(),page:rr.coerce.number().min(1).optional(),limit:rr.coerce.number().min(1).optional(),name:rr.string().optional()}),ai=class{constructor(e){this.internationalScientificCongressPartnerRepository=e}async handle(e,r){try{let{congressId:t,page:i,limit:n,...s}=Cm.parse({congressId:e.params.congressId,...e.query});if(i!==void 0&&n!==void 0){let c=i||Ib,d=n||bb,h=d*c-d,[j,U]=await Promise.all([this.internationalScientificCongressPartnerRepository.findByCongressId({pagination:{offset:h,limit:d},filter:{congressId:t,...s}}),this.internationalScientificCongressPartnerRepository.count({filter:{congressId:t,name:s.name}})]),Q=Math.max(Math.ceil(U/d),1);return r.status(200).json({page:c,totalPages:Q,offset:h,limit:d,partners:j})}let m=await this.internationalScientificCongressPartnerRepository.findByCongressId({filter:{congressId:t,...s}});return r.status(200).json(m)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Cb}from"@asteasolutions/zod-to-openapi";import Gr from"zod";var jl=2,El=1024,wb=El*El,Sb=jl*wb;Cb(Gr);var wm=Gr.object({id:Gr.uuid(),name:Gr.string().min(1,"Nome \xE9 obrigat\xF3rio").optional(),logo:Gr.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=Sb,`A imagem deve ter no m\xE1ximo ${jl}MB.`).optional()}),mi=class{constructor(e,r){this.internationalScientificCongressPartnerRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,name:i,logo:n}=wm.parse({id:e.params.id,...e.body,logo:e.file}),s=await this.internationalScientificCongressPartnerRepository.findById(t);if(!s)throw new p("O parceiro n\xE3o existe.");let m=s.logoUrl;return n&&(m=await this.firebaseStorageService.uploadFile({file:n,id:t,folder:M.PARTNER})),await this.internationalScientificCongressPartnerRepository.update({id:t,name:i,logoUrl:m??void 0}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var vb=Y.object({id:Y.uuid(),name:Y.string(),logoUrl:Y.string().nullable(),congressId:Y.uuid()}),xl={method:"post",path:"/international-scientific-congress/{congressId}/partner",tags:["International Scientific Congresses"],summary:"Create a new congress partner",security:[{bearerAuth:[]}],request:{params:Y.object({congressId:Y.uuid()}),body:{content:{"application/json":{schema:Im.omit({congressId:!0})}}}},responses:{201:{description:"Congress partner created successfully",summary:"Congress Partner Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:Y.object({errors:Y.record(Y.string(),Y.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:Y.object({message:Y.string()})}}},404:{description:"Congress not found with the provided ID",summary:"Congress Not Found",content:{"application/json":{schema:Y.object({message:Y.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Y.object({message:Y.string()})}}}}},Ml={method:"get",path:"/international-scientific-congress/{congressId}/partner",tags:["International Scientific Congresses"],summary:"Find congress partners by congress ID",request:{params:Cm},responses:{200:{description:"Congress partners retrieved successfully by congress ID",summary:"Congress Partners Retrieved",content:{"application/json":{schema:Y.array(vb)}}},400:{description:"Invalid congress ID parameter provided",summary:"Validation Error",content:{"application/json":{schema:Y.object({errors:Y.record(Y.string(),Y.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Y.object({message:Y.string()})}}}}},Pl={method:"put",path:"/international-scientific-congress/partner/{id}",tags:["International Scientific Congresses"],summary:"Update congress partner",security:[{bearerAuth:[]}],request:{params:si,body:{content:{"application/json":{schema:wm.omit({id:!0})}}}},responses:{200:{description:"Congress partner updated successfully",summary:"Congress Partner Updated"},400:{description:"Invalid input data or partner ID format",summary:"Validation Error",content:{"application/json":{schema:Y.object({errors:Y.record(Y.string(),Y.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:Y.object({message:Y.string()})}}},404:{description:"Congress partner not found with the provided ID",summary:"Congress Partner Not Found",content:{"application/json":{schema:Y.object({message:Y.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Y.object({message:Y.string()})}}}}},Tl={method:"delete",path:"/international-scientific-congress/partner/{id}",tags:["International Scientific Congresses"],summary:"Delete congress partner",security:[{bearerAuth:[]}],request:{params:si},responses:{200:{description:"Congress partner deleted successfully",summary:"Congress Partner Deleted"},400:{description:"Invalid partner ID format",summary:"Validation Error",content:{"application/json":{schema:Y.object({errors:Y.record(Y.string(),Y.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:Y.object({message:Y.string()})}}},404:{description:"Congress partner not found with the provided ID",summary:"Congress Partner Not Found",content:{"application/json":{schema:Y.object({message:Y.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:Y.object({message:Y.string()})}}}}};import g from"zod";import{extendZodWithOpenApi as Eb}from"@asteasolutions/zod-to-openapi";import ne from"zod";Eb(ne);var Sm=ne.object({title:ne.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio"),edition:ne.coerce.number().int().positive("Edi\xE7\xE3o deve ser um n\xFAmero positivo"),startDate:ne.coerce.date(),endDate:ne.coerce.date(),description:ne.string().optional(),location:ne.string().optional(),congressLink:ne.url("Link do congresso deve ser uma URL v\xE1lida").optional().or(ne.literal("")),noticeUrl:ne.url("URL do edital deve ser uma URL v\xE1lida").optional().or(ne.literal("")),scheduleUrl:ne.url("URL do cronograma deve ser uma URL v\xE1lida").optional().or(ne.literal("")),programUrl:ne.url("URL da programa\xE7\xE3o deve ser uma URL v\xE1lida").optional().or(ne.literal("")),adminReportUrl:ne.url("URL do relat\xF3rio administrativo deve ser uma URL v\xE1lida").optional().or(ne.literal("")),proceedingsUrl:ne.url("URL dos anais deve ser uma URL v\xE1lida").optional().or(ne.literal(""))}).refine(o=>o.endDate>=o.startDate,{message:"Data de t\xE9rmino deve ser posterior ou igual \xE0 data de in\xEDcio",path:["endDate"]}),ci=class{constructor(e){this.internationalScientificCongressRepository=e}async handle(e,r){try{let t=Sm.parse(e.body);return await this.internationalScientificCongressRepository.create(t),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as jb}from"@asteasolutions/zod-to-openapi";import vm from"zod";jb(vm);var Em=vm.object({id:vm.uuid()}),pi=class{constructor(e){this.internationalScientificCongressRepository=e}async handle(e,r){try{let{id:t}=Em.parse({id:e.params.id});if(!await this.internationalScientificCongressRepository.findById(t))throw new p("O congresso n\xE3o existe.");return await this.internationalScientificCongressRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as xb}from"@asteasolutions/zod-to-openapi";import jm from"zod";xb(jm);var xm=jm.object({edition:jm.coerce.number().int().positive()}),di=class{constructor(e){this.internationalScientificCongressRepository=e}async handle(e,r){try{let{edition:t}=xm.parse({edition:e.params.edition}),i=await this.internationalScientificCongressRepository.findByEdition(t);return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Mb}from"@asteasolutions/zod-to-openapi";import Mm from"zod";Mb(Mm);var ui=Mm.object({id:Mm.uuid()}),li=class{constructor(e){this.internationalScientificCongressRepository=e}async handle(e,r){try{let{id:t}=ui.parse({id:e.params.id}),i=await this.internationalScientificCongressRepository.findById(t);if(!i)throw new p("O congresso n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Pb}from"@asteasolutions/zod-to-openapi";import at from"zod";var Tb=1,Ab=10;Pb(at);var Pm=at.object({page:at.coerce.number().min(1).default(Tb),limit:at.coerce.number().min(1).default(Ab),title:at.string().optional(),edition:at.coerce.number().int().positive().optional(),location:at.string().optional(),orderBy:at.enum(["asc","desc"]).optional()}),gi=class{constructor(e){this.internationalScientificCongressRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=Pm.parse(e.query),s=i*t-i,[m,c]=await Promise.all([this.internationalScientificCongressRepository.find({pagination:{offset:s,limit:i},filter:n}),this.internationalScientificCongressRepository.count({filter:n})]),d=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:d,offset:s,limit:i,congresses:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Db}from"@asteasolutions/zod-to-openapi";import ie from"zod";Db(ie);var Tm=ie.object({id:ie.uuid(),title:ie.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio").optional(),edition:ie.coerce.number().int().positive("Edi\xE7\xE3o deve ser um n\xFAmero positivo").optional(),startDate:ie.coerce.date().optional(),endDate:ie.coerce.date().optional(),description:ie.string().optional(),location:ie.string().optional(),congressLink:ie.url("Link do congresso deve ser uma URL v\xE1lida").optional().or(ie.literal("")),noticeUrl:ie.url("URL do edital deve ser uma URL v\xE1lida").optional().or(ie.literal("")),scheduleUrl:ie.url("URL do cronograma deve ser uma URL v\xE1lida").optional().or(ie.literal("")),programUrl:ie.url("URL da programa\xE7\xE3o deve ser uma URL v\xE1lida").optional().or(ie.literal("")),adminReportUrl:ie.url("URL do relat\xF3rio administrativo deve ser uma URL v\xE1lida").optional().or(ie.literal("")),proceedingsUrl:ie.url("URL dos anais deve ser uma URL v\xE1lida").optional().or(ie.literal(""))}),fi=class{constructor(e){this.internationalScientificCongressRepository=e}async handle(e,r){try{let{id:t,...i}=Tm.parse({id:e.params.id,...e.body});if(!await this.internationalScientificCongressRepository.findById(t))throw new p("O congresso n\xE3o existe.");return await this.internationalScientificCongressRepository.update({...i,id:t}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Fb=9,Bb=g.object({image:g.any().openapi({type:"string",format:"binary"}),caption:g.string().optional()}),qb=g.object({image:g.any().openapi({type:"string",format:"binary"}).optional(),caption:g.string().optional()}),Ub=g.object({id:g.uuid(),name:g.string(),logoUrl:g.string().nullable(),congressId:g.uuid()}),Am=g.object({id:g.uuid(),imageUrl:g.string(),caption:g.string().nullable(),congressId:g.uuid()}),Dm=g.object({id:g.uuid(),title:g.string(),edition:g.number(),startDate:g.date(),endDate:g.date(),description:g.string().nullable(),location:g.string().nullable(),congressLink:g.string().nullable(),noticeUrl:g.string().nullable(),scheduleUrl:g.string().nullable(),programUrl:g.string().nullable(),adminReportUrl:g.string().nullable(),proceedingsUrl:g.string().nullable(),partners:g.array(Ub),galleries:g.array(Am),createdAt:g.date(),updatedAt:g.date()}),Al={method:"post",path:"/international-scientific-congress",tags:["International Scientific Congresses"],summary:"Create a new international scientific congress",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:Sm}}}},responses:{201:{description:"International scientific congress created successfully",summary:"International Scientific Congress Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:g.object({message:g.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}},Dl={method:"get",path:"/international-scientific-congress",tags:["International Scientific Congresses"],summary:"List all international scientific congresses with pagination and filters",request:{query:Pm},responses:{200:{description:"List of international scientific congresses retrieved successfully with pagination",summary:"International Scientific Congresses Retrieved",content:{"application/json":{schema:g.object({page:g.number(),totalPages:g.number(),offset:g.number(),limit:g.number(),congresses:g.array(Dm)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}},Fl={method:"get",path:"/international-scientific-congress/{id}",tags:["International Scientific Congresses"],summary:"Find international scientific congress by ID",request:{params:ui},responses:{200:{description:"International scientific congress details retrieved successfully",summary:"International Scientific Congress Retrieved",content:{"application/json":{schema:Dm}}},400:{description:"Invalid international scientific congress ID format",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},404:{description:"International scientific congress not found with the provided ID",summary:"International Scientific Congress Not Found",content:{"application/json":{schema:g.object({message:g.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}},Bl={method:"get",path:"/international-scientific-congress/edition/{edition}",tags:["International Scientific Congresses"],summary:"Find international scientific congresses by edition",request:{params:xm},responses:{200:{description:"International scientific congresses retrieved successfully by edition",summary:"International Scientific Congresses Retrieved by Edition",content:{"application/json":{schema:g.array(Dm)}}},400:{description:"Invalid edition parameter provided",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}},ql={method:"put",path:"/international-scientific-congress/{id}",tags:["International Scientific Congresses"],summary:"Update international scientific congress",security:[{bearerAuth:[]}],request:{params:ui,body:{content:{"application/json":{schema:Tm.omit({id:!0})}}}},responses:{200:{description:"International scientific congress updated successfully",summary:"International Scientific Congress Updated"},400:{description:"Invalid input data or international scientific congress ID format",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:g.object({message:g.string()})}}},404:{description:"International scientific congress not found with the provided ID",summary:"International Scientific Congress Not Found",content:{"application/json":{schema:g.object({message:g.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}},Ul={method:"delete",path:"/international-scientific-congress/{id}",tags:["International Scientific Congresses"],summary:"Delete international scientific congress",security:[{bearerAuth:[]}],request:{params:Em},responses:{200:{description:"International scientific congress deleted successfully",summary:"International Scientific Congress Deleted"},400:{description:"Invalid international scientific congress ID format",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:g.object({message:g.string()})}}},404:{description:"International scientific congress not found with the provided ID",summary:"International Scientific Congress Not Found",content:{"application/json":{schema:g.object({message:g.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}},yD={method:"post",path:"/international-scientific-congress/{congressId}/gallery",tags:["International Scientific Congress Gallery"],summary:"Create a new gallery image for a congress",security:[{bearerAuth:[]}],request:{params:g.object({congressId:g.uuid()}),body:{content:{"multipart/form-data":{schema:Bb}}}},responses:{201:{description:"Gallery image created successfully",summary:"Gallery Image Created"},400:{description:"Invalid input data, missing required fields, or invalid image format/size",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:g.object({message:g.string()})}}},404:{description:"Congress not found with the provided ID",summary:"Congress Not Found",content:{"application/json":{schema:g.object({message:g.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}},hD={method:"get",path:"/international-scientific-congress/{congressId}/gallery",tags:["International Scientific Congress Gallery"],summary:"List all gallery images for a congress with pagination",request:{params:g.object({congressId:g.uuid()}),query:g.object({page:g.coerce.number().min(1).default(1),limit:g.coerce.number().min(1).default(Fb),caption:g.string().optional()})},responses:{200:{description:"Gallery images retrieved successfully with pagination",summary:"Gallery Images Retrieved",content:{"application/json":{schema:g.object({page:g.number(),totalPages:g.number(),offset:g.number(),limit:g.number(),galleries:g.array(Am)})}}},400:{description:"Invalid congress ID format or query parameters",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}},RD={method:"get",path:"/international-scientific-congress/gallery/{id}",tags:["International Scientific Congress Gallery"],summary:"Find a gallery image by ID",request:{params:g.object({id:g.uuid()})},responses:{200:{description:"Gallery image retrieved successfully",summary:"Gallery Image Retrieved",content:{"application/json":{schema:Am}}},400:{description:"Invalid gallery image ID format",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},404:{description:"Gallery image not found with the provided ID",summary:"Gallery Image Not Found",content:{"application/json":{schema:g.object({message:g.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}},ID={method:"put",path:"/international-scientific-congress/gallery/{id}",tags:["International Scientific Congress Gallery"],summary:"Update a gallery image with optional image upload",security:[{bearerAuth:[]}],request:{params:g.object({id:g.uuid()}),body:{content:{"multipart/form-data":{schema:qb}}}},responses:{200:{description:"Gallery image updated successfully",summary:"Gallery Image Updated"},400:{description:"Invalid input data, gallery ID format, or invalid image format/size",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:g.object({message:g.string()})}}},404:{description:"Gallery image not found with the provided ID",summary:"Gallery Image Not Found",content:{"application/json":{schema:g.object({message:g.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}},bD={method:"delete",path:"/international-scientific-congress/gallery/{id}",tags:["International Scientific Congress Gallery"],summary:"Delete a gallery image",security:[{bearerAuth:[]}],request:{params:g.object({id:g.uuid()})},responses:{200:{description:"Gallery image deleted successfully",summary:"Gallery Image Deleted"},400:{description:"Invalid gallery ID format",summary:"Validation Error",content:{"application/json":{schema:g.object({errors:g.record(g.string(),g.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:g.object({message:g.string()})}}},404:{description:"Gallery image not found with the provided ID",summary:"Gallery Image Not Found",content:{"application/json":{schema:g.object({message:g.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:g.object({message:g.string()})}}}}};import H from"zod";import{extendZodWithOpenApi as kb}from"@asteasolutions/zod-to-openapi";import Lr from"zod";kb(Lr);var Fm=Lr.object({title:Lr.string().min(1),link:Lr.url(),country:Lr.string().min(1)}),yi=class{constructor(e){this.lawRepository=e}async handle(e,r){try{let{title:t,link:i,country:n}=Fm.parse(e.body);return await this.lawRepository.create({title:t,link:i,country:n}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Ob}from"@asteasolutions/zod-to-openapi";import Bm from"zod";Ob(Bm);var qm=Bm.object({id:Bm.uuid()}),hi=class{constructor(e){this.lawRepository=e}async handle(e,r){try{let{id:t}=qm.parse({id:e.params.id});if(!await this.lawRepository.findById(t))throw new p("A lei n\xE3o existe.");return await this.lawRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Nb}from"@asteasolutions/zod-to-openapi";import Um from"zod";Nb(Um);var Ii=Um.object({id:Um.uuid()}),Ri=class{constructor(e){this.lawRepository=e}async handle(e,r){try{let{id:t}=Ii.parse({id:e.params.id}),i=await this.lawRepository.findById(t);if(!i)throw new p("A lei n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Gb}from"@asteasolutions/zod-to-openapi";import or from"zod";Gb(or);var km=or.object({id:or.uuid(),title:or.string().min(1).optional(),link:or.url().optional(),country:or.string().min(1).optional()}),bi=class{constructor(e){this.lawRepository=e}async handle(e,r){try{let{id:t,title:i,link:n,country:s}=km.parse({id:e.params.id,...e.body});if(!await this.lawRepository.findById(t))throw new p("A lei n\xE3o existe.");return await this.lawRepository.update({id:t,title:i,link:n,country:s}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var kl=H.object({id:H.uuid(),title:H.string(),link:H.string(),country:H.string(),createdAt:H.date(),updatedAt:H.date()}),Ol={method:"post",path:"/law",tags:["Laws"],summary:"Create a new Law",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:Fm}}}},responses:{201:{description:"Law created successfully",summary:"Law Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:H.object({errors:H.record(H.string(),H.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:H.object({message:H.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:H.object({message:H.string()})}}}}},Nl={method:"get",path:"/law",tags:["Laws"],summary:"List all Laws with filters",request:{query:H.object({page:H.coerce.number().optional(),limit:H.coerce.number().optional(),title:H.string().optional(),country:H.string().optional(),orderBy:H.enum(["asc","desc"]).optional()})},responses:{200:{description:"List of Laws retrieved successfully",summary:"Laws Retrieved",content:{"application/json":{schema:H.object({page:H.number(),totalPages:H.number(),offset:H.number(),limit:H.number(),laws:H.array(kl)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:H.object({message:H.string()})}}}}},Gl={method:"get",path:"/law/{id}",tags:["Laws"],summary:"Find Law by ID",request:{params:Ii},responses:{200:{description:"Law details retrieved successfully",summary:"Law Retrieved",content:{"application/json":{schema:kl}}},400:{description:"Invalid Law ID format",summary:"Validation Error",content:{"application/json":{schema:H.object({errors:H.record(H.string(),H.string())})}}},404:{description:"Law not found with the provided ID",summary:"Law Not Found",content:{"application/json":{schema:H.object({message:H.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:H.object({message:H.string()})}}}}},Ll={method:"put",path:"/law/{id}",tags:["Laws"],summary:"Update Law",security:[{bearerAuth:[]}],request:{params:Ii,body:{content:{"application/json":{schema:km.omit({id:!0})}}}},responses:{200:{description:"Law updated successfully",summary:"Law Updated"},400:{description:"Invalid input data or Law ID format",summary:"Validation Error",content:{"application/json":{schema:H.object({errors:H.record(H.string(),H.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:H.object({message:H.string()})}}},404:{description:"Law not found with the provided ID",summary:"Law Not Found",content:{"application/json":{schema:H.object({message:H.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:H.object({message:H.string()})}}}}},Wl={method:"delete",path:"/law/{id}",tags:["Laws"],summary:"Delete Law",security:[{bearerAuth:[]}],request:{params:qm},responses:{200:{description:"Law deleted successfully",summary:"Law Deleted"},400:{description:"Invalid Law ID format",summary:"Validation Error",content:{"application/json":{schema:H.object({errors:H.record(H.string(),H.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:H.object({message:H.string()})}}},404:{description:"Law not found with the provided ID",summary:"Law Not Found",content:{"application/json":{schema:H.object({message:H.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:H.object({message:H.string()})}}}}};import{$Enums as Hb}from"@prisma/client";import N from"zod";import{extendZodWithOpenApi as Lb}from"@asteasolutions/zod-to-openapi";import ir from"zod";Lb(ir);var Om=ir.object({role:ir.string().min(1),description:ir.string().optional(),userId:ir.uuid(),order:ir.number().optional()}),Ci=class{constructor(e){this.legitimatorCommitteeMemberRepository=e}async handle(e,r){try{let{role:t,description:i,userId:n,order:s}=Om.parse(e.body);return await this.legitimatorCommitteeMemberRepository.create({role:t,description:i,userId:n,order:s??0}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Wb}from"@asteasolutions/zod-to-openapi";import Nm from"zod";Wb(Nm);var Gm=Nm.object({id:Nm.uuid()}),wi=class{constructor(e){this.legitimatorCommitteeMemberRepository=e}async handle(e,r){try{let{id:t}=Gm.parse({id:e.params.id});if(!await this.legitimatorCommitteeMemberRepository.findById(t))throw new p("O membro do comit\xEA legitimador n\xE3o existe.");return await this.legitimatorCommitteeMemberRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as _b}from"@asteasolutions/zod-to-openapi";import Lm from"zod";_b(Lm);var vi=Lm.object({id:Lm.uuid()}),Si=class{constructor(e){this.legitimatorCommitteeMemberRepository=e}async handle(e,r){try{let{id:t}=vi.parse({id:e.params.id}),i=await this.legitimatorCommitteeMemberRepository.findById(t);if(!i)throw new p("O membro do comit\xEA legitimador n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as zb}from"@asteasolutions/zod-to-openapi";import Et from"zod";zb(Et);var Wm=Et.object({id:Et.uuid(),role:Et.string().min(1).optional(),description:Et.string().optional(),userId:Et.uuid().optional(),order:Et.number().optional()}),Ei=class{constructor(e){this.legitimatorCommitteeMemberRepository=e}async handle(e,r){try{let{id:t,role:i,description:n,userId:s,order:m}=Wm.parse({id:e.params.id,...e.body});if(!await this.legitimatorCommitteeMemberRepository.findById(t))throw new p("O membro do comit\xEA legitimador n\xE3o existe.");return await this.legitimatorCommitteeMemberRepository.update({id:t,role:i,description:n,userId:s,order:m}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Vb=N.object({id:N.uuid(),name:N.string(),emailAddress:N.string(),avatarUrl:N.string().nullable(),orcid:N.string().nullable(),phone:N.string().nullable(),lattesUrl:N.string().nullable(),role:N.enum(Hb.UserRole)}),_l=N.object({id:N.uuid(),role:N.string(),description:N.string().nullable(),order:N.number(),createdAt:N.date(),updatedAt:N.date(),userId:N.uuid(),user:Vb}),zl={method:"post",path:"/legitimator-committee-member",tags:["Legitimator Committee Members"],summary:"Create a new Legitimator Committee Member",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:Om}}}},responses:{201:{description:"Legitimator Committee Member created successfully",summary:"Legitimator Committee Member Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:N.object({errors:N.record(N.string(),N.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:N.object({message:N.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:N.object({message:N.string()})}}}}},Hl={method:"get",path:"/legitimator-committee-member",tags:["Legitimator Committee Members"],summary:"List all Legitimator Committee Members with filters",request:{query:N.object({role:N.string().optional(),orderBy:N.enum(["asc","desc"]).optional()})},responses:{200:{description:"List of Legitimator Committee Members retrieved successfully",summary:"Legitimator Committee Members Retrieved",content:{"application/json":{schema:N.object({members:N.array(_l)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:N.object({message:N.string()})}}}}},Vl={method:"get",path:"/legitimator-committee-member/{id}",tags:["Legitimator Committee Members"],summary:"Find Legitimator Committee Member by ID",request:{params:vi},responses:{200:{description:"Legitimator Committee Member details retrieved successfully",summary:"Legitimator Committee Member Retrieved",content:{"application/json":{schema:_l}}},400:{description:"Invalid Legitimator Committee Member ID format",summary:"Validation Error",content:{"application/json":{schema:N.object({errors:N.record(N.string(),N.string())})}}},404:{description:"Legitimator Committee Member not found with the provided ID",summary:"Legitimator Committee Member Not Found",content:{"application/json":{schema:N.object({message:N.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:N.object({message:N.string()})}}}}},Zl={method:"put",path:"/legitimator-committee-member/{id}",tags:["Legitimator Committee Members"],summary:"Update Legitimator Committee Member",security:[{bearerAuth:[]}],request:{params:vi,body:{content:{"application/json":{schema:Wm.omit({id:!0})}}}},responses:{200:{description:"Legitimator Committee Member updated successfully",summary:"Legitimator Committee Member Updated"},400:{description:"Invalid input data or Legitimator Committee Member ID format",summary:"Validation Error",content:{"application/json":{schema:N.object({errors:N.record(N.string(),N.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:N.object({message:N.string()})}}},404:{description:"Legitimator Committee Member not found with the provided ID",summary:"Legitimator Committee Member Not Found",content:{"application/json":{schema:N.object({message:N.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:N.object({message:N.string()})}}}}},Kl={method:"delete",path:"/legitimator-committee-member/{id}",tags:["Legitimator Committee Members"],summary:"Delete Legitimator Committee Member",security:[{bearerAuth:[]}],request:{params:Gm},responses:{200:{description:"Legitimator Committee Member deleted successfully",summary:"Legitimator Committee Member Deleted"},400:{description:"Invalid Legitimator Committee Member ID format",summary:"Validation Error",content:{"application/json":{schema:N.object({errors:N.record(N.string(),N.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:N.object({message:N.string()})}}},404:{description:"Legitimator Committee Member not found with the provided ID",summary:"Legitimator Committee Member Not Found",content:{"application/json":{schema:N.object({message:N.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:N.object({message:N.string()})}}}}};import{$Enums as Xb}from"@prisma/client";import T from"zod";import{extendZodWithOpenApi as Zb}from"@asteasolutions/zod-to-openapi";import _e from"zod";Zb(_e);var _m=_e.object({name:_e.string().min(1),description:_e.string().optional(),members:_e.array(_e.object({userId:_e.uuid(),role:_e.string().min(1),order:_e.number().optional()}))}),ji=class{constructor(e){this.managementTeamRepository=e}async handle(e,r){try{let{name:t,description:i,members:n}=_m.parse(e.body);if(await this.managementTeamRepository.findByName(t))throw new se("J\xE1 existe um time de gest\xE3o cadastrado com este nome.");return await this.managementTeamRepository.create({name:t,description:i,members:n.map(m=>({userId:m.userId,role:m.role,order:m.order??0}))}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Kb}from"@asteasolutions/zod-to-openapi";import zm from"zod";Kb(zm);var Hm=zm.object({id:zm.uuid()}),xi=class{constructor(e){this.managementTeamRepository=e}async handle(e,r){try{let{id:t}=Hm.parse({id:e.params.id});if(!await this.managementTeamRepository.findById(t))throw new p("O time de gest\xE3o n\xE3o existe.");return await this.managementTeamRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Jb}from"@asteasolutions/zod-to-openapi";import Vm from"zod";Jb(Vm);var Pi=Vm.object({id:Vm.uuid()}),Mi=class{constructor(e){this.managementTeamRepository=e}async handle(e,r){try{let{id:t}=Pi.parse({id:e.params.id}),i=await this.managementTeamRepository.findById(t);if(!i)throw new p("O time de gest\xE3o n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Yb}from"@asteasolutions/zod-to-openapi";import qe from"zod";Yb(qe);var Zm=qe.object({id:qe.uuid(),name:qe.string().min(1).optional(),description:qe.string().optional(),members:qe.array(qe.object({userId:qe.uuid(),role:qe.string().min(1),order:qe.number().optional()})).optional()}),Ti=class{constructor(e){this.managementTeamRepository=e}async handle(e,r){try{let{id:t,name:i,description:n,members:s}=Zm.parse({id:e.params.id,...e.body}),m=await this.managementTeamRepository.findById(t);if(!m)throw new p("O time de gest\xE3o n\xE3o existe.");if(i&&i!==m.name){let c=await this.managementTeamRepository.findByName(i);if(c&&c.id!==t)throw new se("J\xE1 existe um time de gest\xE3o com este nome.")}return await this.managementTeamRepository.update({id:t,name:i,description:n,members:s?s.map(c=>({userId:c.userId,role:c.role,order:c.order??0})):void 0}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var $b=T.object({id:T.uuid(),name:T.string(),emailAddress:T.string(),avatarUrl:T.string().nullable(),orcid:T.string().nullable(),phone:T.string().nullable(),lattesUrl:T.string().nullable(),role:T.enum(Xb.UserRole)}),Qb=T.object({id:T.uuid(),role:T.string(),description:T.string().nullable(),order:T.number(),teamId:T.uuid(),userId:T.uuid(),createdAt:T.date(),updatedAt:T.date(),user:$b}),Jl=T.object({id:T.uuid(),name:T.string(),description:T.string().nullable(),createdAt:T.date(),updatedAt:T.date(),members:T.array(Qb)}),Yl={method:"post",path:"/management-team",tags:["Management Teams"],summary:"Create a new Management Team with multiple members",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:_m}}}},responses:{201:{description:"Management Team created successfully",summary:"Management Team Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:T.object({errors:T.record(T.string(),T.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:T.object({message:T.string()})}}},409:{description:"Management Team with this name already exists",summary:"Conflict",content:{"application/json":{schema:T.object({message:T.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:T.object({message:T.string()})}}}}},Xl={method:"get",path:"/management-team",tags:["Management Teams"],summary:"List all Management Teams with filters",request:{query:T.object({name:T.string().optional(),description:T.string().optional(),orderBy:T.enum(["asc","desc"]).optional()})},responses:{200:{description:"List of Management Teams retrieved successfully",summary:"Management Teams Retrieved",content:{"application/json":{schema:T.object({teams:T.array(Jl)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:T.object({message:T.string()})}}}}},$l={method:"get",path:"/management-team/{id}",tags:["Management Teams"],summary:"Find Management Team by ID",request:{params:Pi},responses:{200:{description:"Management Team details retrieved successfully",summary:"Management Team Retrieved",content:{"application/json":{schema:Jl}}},400:{description:"Invalid Management Team ID format",summary:"Validation Error",content:{"application/json":{schema:T.object({errors:T.record(T.string(),T.string())})}}},404:{description:"Management Team not found with the provided ID",summary:"Management Team Not Found",content:{"application/json":{schema:T.object({message:T.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:T.object({message:T.string()})}}}}},Ql={method:"put",path:"/management-team/{id}",tags:["Management Teams"],summary:"Update Management Team and manage member relationships",security:[{bearerAuth:[]}],request:{params:Pi,body:{content:{"application/json":{schema:Zm.omit({id:!0})}}}},responses:{200:{description:"Management Team updated successfully",summary:"Management Team Updated"},400:{description:"Invalid input data or Management Team ID format",summary:"Validation Error",content:{"application/json":{schema:T.object({errors:T.record(T.string(),T.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:T.object({message:T.string()})}}},404:{description:"Management Team not found with the provided ID",summary:"Management Team Not Found",content:{"application/json":{schema:T.object({message:T.string()})}}},409:{description:"Management Team with this name already exists",summary:"Conflict",content:{"application/json":{schema:T.object({message:T.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:T.object({message:T.string()})}}}}},eu={method:"delete",path:"/management-team/{id}",tags:["Management Teams"],summary:"Delete Management Team",security:[{bearerAuth:[]}],request:{params:Hm},responses:{200:{description:"Management Team deleted successfully",summary:"Management Team Deleted"},400:{description:"Invalid Management Team ID format",summary:"Validation Error",content:{"application/json":{schema:T.object({errors:T.record(T.string(),T.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:T.object({message:T.string()})}}},404:{description:"Management Team not found with the provided ID",summary:"Management Team Not Found",content:{"application/json":{schema:T.object({message:T.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:T.object({message:T.string()})}}}}};import{MeetingFormat as aC,MeetingStatus as mC}from"@prisma/client";import W from"zod";import{extendZodWithOpenApi as eC}from"@asteasolutions/zod-to-openapi";import nr from"zod";var ru=10,tu=1024,tC=tu*tu,rC=ru*tC;eC(nr);var Km=nr.object({title:nr.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio"),publishedAt:nr.coerce.date(),meetingId:nr.uuid(),document:nr.any().refine(o=>o==null||typeof o!="object"||typeof o.size!="number"?!1:o.size<=rC,`O documento deve ter no m\xE1ximo ${ru}MB.`)}),Ai=class{constructor(e,r,t){this.meetingMinuteRepository=e;this.meetingRepository=r;this.firebaseStorageService=t}async handle(e,r){try{let{title:t,publishedAt:i,meetingId:n,document:s}=Km.parse({...e.body,...e.params,document:e.file});if(!await this.meetingRepository.findById(n))throw new p("A reuni\xE3o n\xE3o existe.");if(await this.meetingMinuteRepository.findByMeetingId(n))throw new a("Esta reuni\xE3o j\xE1 possui uma ata.");let d=await this.meetingMinuteRepository.create({title:t,publishedAt:i,meetingId:n,documentUrl:""}),h=await this.firebaseStorageService.uploadFile({file:s,id:d.id,folder:M.MEETING_MINUTE});return await this.meetingMinuteRepository.update({id:d.id,documentUrl:h}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as oC}from"@asteasolutions/zod-to-openapi";import Jm from"zod";oC(Jm);var Wr=Jm.object({meetingId:Jm.uuid()}),Di=class{constructor(e){this.meetingMinuteRepository=e}async handle(e,r){try{let{meetingId:t}=Wr.parse({meetingId:e.params.meetingId}),i=await this.meetingMinuteRepository.findByMeetingId(t);return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as iC}from"@asteasolutions/zod-to-openapi";import sr from"zod";var iu=10,ou=1024,nC=ou*ou,sC=iu*nC;iC(sr);var Ym=sr.object({meetingId:sr.uuid(),title:sr.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio").optional(),publishedAt:sr.coerce.date().optional(),document:sr.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=sC,`O documento deve ter no m\xE1ximo ${iu}MB.`).optional()}),Fi=class{constructor(e,r){this.meetingMinuteRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{meetingId:t,title:i,publishedAt:n,document:s}=Ym.parse({meetingId:e.params.meetingId,...e.body,document:e.file}),m=await this.meetingMinuteRepository.findByMeetingId(t);if(!m)throw new p("A ata n\xE3o existe para esta reuni\xE3o.");let c=m.documentUrl;return s&&(m.documentUrl&&await this.firebaseStorageService.deleteFile({fileUrl:m.documentUrl}),c=await this.firebaseStorageService.uploadFile({file:s,id:m.id,folder:M.MEETING_MINUTE})),await this.meetingMinuteRepository.update({id:m.id,title:i,publishedAt:n,documentUrl:c??void 0}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var cC=W.object({id:W.uuid(),title:W.string(),scheduledAt:W.date(),format:W.enum(aC),agenda:W.string(),meetingLink:W.string().nullable(),location:W.string().nullable(),status:W.enum(mC),createdAt:W.date(),updatedAt:W.date()}),pC=W.object({id:W.uuid(),title:W.string(),publishedAt:W.date(),documentUrl:W.string(),meetingId:W.uuid(),meeting:cC,createdAt:W.date(),updatedAt:W.date()}),nu={method:"post",path:"/meeting/{meetingId}/minute",tags:["Meetings"],summary:"Create a new meeting minute with document upload",security:[{bearerAuth:[]}],request:{params:W.object({meetingId:W.uuid()}),body:{content:{"multipart/form-data":{schema:Km.omit({meetingId:!0})}}}},responses:{201:{description:"Meeting minute created successfully",summary:"Meeting Minute Created"},400:{description:"Invalid input data, missing required fields, or invalid document format/size",summary:"Validation Error",content:{"application/json":{schema:W.object({errors:W.record(W.string(),W.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:W.object({message:W.string()})}}},404:{description:"Meeting not found with the provided ID",summary:"Meeting Not Found",content:{"application/json":{schema:W.object({message:W.string()})}}},409:{description:"Meeting already has a minute",summary:"Conflict",content:{"application/json":{schema:W.object({message:W.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:W.object({message:W.string()})}}}}},su={method:"get",path:"/meeting/{meetingId}/minute",tags:["Meetings"],summary:"Find meeting minute by meeting ID",request:{params:Wr},responses:{200:{description:"Meeting minute retrieved successfully by meeting ID",summary:"Meeting Minute Retrieved by Meeting ID",content:{"application/json":{schema:pC.nullable()}}},400:{description:"Invalid meeting ID parameter provided",summary:"Validation Error",content:{"application/json":{schema:W.object({errors:W.record(W.string(),W.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:W.object({message:W.string()})}}}}},au={method:"put",path:"/meeting/{meetingId}/minute",tags:["Meetings"],summary:"Update meeting minute with optional document upload",security:[{bearerAuth:[]}],request:{params:Wr,body:{content:{"multipart/form-data":{schema:Ym.omit({meetingId:!0})}}}},responses:{200:{description:"Meeting minute updated successfully",summary:"Meeting Minute Updated"},400:{description:"Invalid input data, meeting minute ID format, or invalid document format/size",summary:"Validation Error",content:{"application/json":{schema:W.object({errors:W.record(W.string(),W.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:W.object({message:W.string()})}}},404:{description:"Meeting minute not found with the provided ID",summary:"Meeting Minute Not Found",content:{"application/json":{schema:W.object({message:W.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:W.object({message:W.string()})}}}}},mu={method:"delete",path:"/meeting/{meetingId}/minute",tags:["Meetings"],summary:"Delete meeting minute",security:[{bearerAuth:[]}],request:{params:Wr},responses:{200:{description:"Meeting minute deleted successfully",summary:"Meeting Minute Deleted"},400:{description:"Invalid meeting minute ID format",summary:"Validation Error",content:{"application/json":{schema:W.object({errors:W.record(W.string(),W.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:W.object({message:W.string()})}}},404:{description:"Meeting minute not found with the provided ID",summary:"Meeting Minute Not Found",content:{"application/json":{schema:W.object({message:W.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:W.object({message:W.string()})}}}}};import{MeetingFormat as vC,MeetingStatus as EC}from"@prisma/client";import x from"zod";import{extendZodWithOpenApi as dC}from"@asteasolutions/zod-to-openapi";import{MeetingFormat as Bi,MeetingStatus as Xm}from"@prisma/client";import Ue from"zod";dC(Ue);var $m=Ue.object({title:Ue.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio"),scheduledAt:Ue.coerce.date(),format:Ue.enum(Bi).default(Bi.ONLINE),agenda:Ue.string().min(1,"Pauta \xE9 obrigat\xF3ria"),meetingLink:Ue.string().url("Link da reuni\xE3o deve ser uma URL v\xE1lida").optional().or(Ue.literal("")),location:Ue.string().optional(),status:Ue.enum(Xm).default(Xm.PENDING)}).refine(o=>o.format===Bi.ONLINE?!!o.meetingLink:o.format===Bi.IN_PERSON?!!o.location:!0,{message:"Reuni\xF5es online devem ter link e reuni\xF5es presenciais devem ter localiza\xE7\xE3o",path:["format"]}),qi=class{constructor(e){this.meetingRepository=e}async handle(e,r){try{let{title:t,scheduledAt:i,format:n,agenda:s,meetingLink:m,location:c,status:d}=$m.parse(e.body);return await this.meetingRepository.create({title:t,scheduledAt:i,format:n,agenda:s,meetingLink:m||void 0,location:c||void 0,status:d??Xm.PENDING}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as lC}from"@asteasolutions/zod-to-openapi";import Qm from"zod";lC(Qm);var ec=Qm.object({id:Qm.uuid()}),Ui=class{constructor(e){this.meetingRepository=e}async handle(e,r){try{let{id:t}=ec.parse({id:e.params.id});if(!await this.meetingRepository.findById(t))throw new p("A reuni\xE3o n\xE3o existe.");return await this.meetingRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as uC}from"@asteasolutions/zod-to-openapi";import tc from"zod";uC(tc);var Oi=tc.object({id:tc.uuid()}),ki=class{constructor(e){this.meetingRepository=e}async handle(e,r){try{let{id:t}=Oi.parse({id:e.params.id}),i=await this.meetingRepository.findById(t);if(!i)throw new p("A reuni\xE3o n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as gC}from"@asteasolutions/zod-to-openapi";import{MeetingStatus as fC}from"@prisma/client";import rc from"zod";gC(rc);var oc=rc.object({status:rc.enum(fC)}),Ni=class{constructor(e){this.meetingRepository=e}async handle(e,r){try{let{status:t}=oc.parse({status:e.params.status}),i=await this.meetingRepository.findByStatus(t);return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as yC}from"@asteasolutions/zod-to-openapi";import{MeetingFormat as hC,MeetingStatus as RC}from"@prisma/client";import mt from"zod";var IC=1,bC=10;yC(mt);var ic=mt.object({page:mt.coerce.number().min(1).default(IC),limit:mt.coerce.number().min(1).default(bC),title:mt.string().optional(),format:mt.enum(hC).optional(),status:mt.enum(RC).optional(),orderBy:mt.enum(["asc","desc"]).optional()}),Gi=class{constructor(e){this.meetingRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=ic.parse(e.query),s=i*t-i,[m,c]=await Promise.all([this.meetingRepository.find({pagination:{offset:s,limit:i},filter:n}),this.meetingRepository.count({filter:n})]),d=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:d,offset:s,limit:i,meetings:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as CC}from"@asteasolutions/zod-to-openapi";import{MeetingFormat as wC,MeetingStatus as SC}from"@prisma/client";import Me from"zod";CC(Me);var nc=Me.object({id:Me.uuid(),title:Me.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio").optional(),scheduledAt:Me.coerce.date().optional(),format:Me.enum(wC).optional(),agenda:Me.string().min(1,"Pauta \xE9 obrigat\xF3ria").optional(),meetingLink:Me.string().url("Link da reuni\xE3o deve ser uma URL v\xE1lida").optional().or(Me.literal("")),location:Me.string().optional(),status:Me.enum(SC).optional()}),Li=class{constructor(e){this.meetingRepository=e}async handle(e,r){try{let{id:t,title:i,scheduledAt:n,format:s,agenda:m,meetingLink:c,location:d,status:h}=nc.parse({id:e.params.id,...e.body});if(!await this.meetingRepository.findById(t))throw new p("A reuni\xE3o n\xE3o existe.");return await this.meetingRepository.update({id:t,title:i,scheduledAt:n,format:s,agenda:m,meetingLink:c||void 0,location:d||void 0,status:h}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var jC=x.object({id:x.uuid(),title:x.string(),publishedAt:x.date(),documentUrl:x.string(),meetingId:x.uuid(),createdAt:x.date(),updatedAt:x.date()}),sc=x.object({id:x.uuid(),title:x.string(),scheduledAt:x.date(),format:x.enum(vC),agenda:x.string(),meetingLink:x.string().nullable(),location:x.string().nullable(),status:x.enum(EC),minutes:jC.nullable(),createdAt:x.date(),updatedAt:x.date()}),cu={method:"post",path:"/meeting",tags:["Meetings"],summary:"Create a new meeting",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:$m}}}},responses:{201:{description:"Meeting created successfully",summary:"Meeting Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:x.object({errors:x.record(x.string(),x.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:x.object({message:x.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:x.object({message:x.string()})}}}}},pu={method:"get",path:"/meeting",tags:["Meetings"],summary:"List all meetings with pagination and filters",request:{query:ic},responses:{200:{description:"List of meetings retrieved successfully with pagination",summary:"Meetings Retrieved",content:{"application/json":{schema:x.object({page:x.number(),totalPages:x.number(),offset:x.number(),limit:x.number(),meetings:x.array(sc)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:x.object({errors:x.record(x.string(),x.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:x.object({message:x.string()})}}}}},du={method:"get",path:"/meeting/{id}",tags:["Meetings"],summary:"Find meeting by ID",request:{params:Oi},responses:{200:{description:"Meeting details retrieved successfully",summary:"Meeting Retrieved",content:{"application/json":{schema:sc}}},400:{description:"Invalid meeting ID format",summary:"Validation Error",content:{"application/json":{schema:x.object({errors:x.record(x.string(),x.string())})}}},404:{description:"Meeting not found with the provided ID",summary:"Meeting Not Found",content:{"application/json":{schema:x.object({message:x.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:x.object({message:x.string()})}}}}},lu={method:"get",path:"/meeting/status/{status}",tags:["Meetings"],summary:"Find meetings by status",request:{params:oc},responses:{200:{description:"Meetings retrieved successfully by status",summary:"Meetings Retrieved by Status",content:{"application/json":{schema:x.array(sc)}}},400:{description:"Invalid status parameter provided",summary:"Validation Error",content:{"application/json":{schema:x.object({errors:x.record(x.string(),x.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:x.object({message:x.string()})}}}}},uu={method:"put",path:"/meeting/{id}",tags:["Meetings"],summary:"Update meeting",security:[{bearerAuth:[]}],request:{params:Oi,body:{content:{"application/json":{schema:nc.omit({id:!0})}}}},responses:{200:{description:"Meeting updated successfully",summary:"Meeting Updated"},400:{description:"Invalid input data or meeting ID format",summary:"Validation Error",content:{"application/json":{schema:x.object({errors:x.record(x.string(),x.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:x.object({message:x.string()})}}},404:{description:"Meeting not found with the provided ID",summary:"Meeting Not Found",content:{"application/json":{schema:x.object({message:x.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:x.object({message:x.string()})}}}}},gu={method:"delete",path:"/meeting/{id}",tags:["Meetings"],summary:"Delete meeting",security:[{bearerAuth:[]}],request:{params:ec},responses:{200:{description:"Meeting deleted successfully",summary:"Meeting Deleted"},400:{description:"Invalid meeting ID format",summary:"Validation Error",content:{"application/json":{schema:x.object({errors:x.record(x.string(),x.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:x.object({message:x.string()})}}},404:{description:"Meeting not found with the provided ID",summary:"Meeting Not Found",content:{"application/json":{schema:x.object({message:x.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:x.object({message:x.string()})}}}}};import D from"zod";import{extendZodWithOpenApi as xC}from"@asteasolutions/zod-to-openapi";import _r from"zod";var MC=5,fu=1024,PC=fu*fu,TC=MC*PC;xC(_r);var ac=_r.object({title:_r.string().min(1),content:_r.string().min(1),image:_r.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=TC,{message:"A imagem deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB."})}),Wi=class{constructor(e,r){this.newsRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{title:t,content:i,image:n}=ac.parse({...e.body,image:e.file}),s=e.user.id,m=await this.firebaseStorageService.uploadFile({file:n,folder:M.NEWS,id:s});await this.newsRepository.create({title:t,content:i,authorId:s,imageUrl:m}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as AC}from"@asteasolutions/zod-to-openapi";import ct from"zod";var DC=1,FC=7;AC(ct);var zi=ct.object({page:ct.coerce.number().min(1).default(DC),limit:ct.coerce.number().min(1).default(FC),authorId:ct.string(),title:ct.string().optional(),content:ct.string().optional(),orderBy:ct.enum(["asc","desc"]).default("desc")}),_i=class{constructor(e){this.newsRepository=e}async handle(e,r){try{let{page:t,limit:i,authorId:n,...s}=zi.parse(e.query),m=i*t-i,[c,d]=await Promise.all([this.newsRepository.findByAuthorId({authorId:n,pagination:{offset:m,limit:i},filter:s}),this.newsRepository.count({filter:{authorId:n,...s}})]),h=Math.max(Math.ceil(d/i),1);r.status(200).json({page:t,totalPages:h,offset:m,limit:i,news:c})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as BC}from"@asteasolutions/zod-to-openapi";import mc from"zod";BC(mc);var cc=mc.object({id:mc.string()}),Hi=class{constructor(e){this.newsRepository=e}async handle(e,r){try{let{id:t}=cc.parse(e.params),i=await this.newsRepository.findById(t);if(!i)throw new p("Not\xEDcia n\xE3o encontrada.");r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as qC}from"@asteasolutions/zod-to-openapi";import pt from"zod";var UC=1,kC=9;qC(pt);var pc=pt.object({page:pt.coerce.number().min(1).default(UC),limit:pt.coerce.number().min(1).default(kC),title:pt.string().optional(),content:pt.string().optional(),authorId:pt.string().optional(),orderBy:pt.enum(["asc","desc"]).default("desc")}),Vi=class{constructor(e){this.newsRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=pc.parse(e.query),s=i*t-i,[m,c]=await Promise.all([this.newsRepository.find({pagination:{offset:s,limit:i},filter:n}),this.newsRepository.count({filter:n})]),d=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:d,offset:s,limit:i,news:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};var yu={method:"post",path:"/news",tags:["News"],summary:"Create news",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:ac}}}},responses:{201:{description:"News article created successfully",summary:"News Created",content:{"application/json":{schema:D.object({message:D.string()})}}},400:{description:"Invalid input data or file format",summary:"Validation Error",content:{"application/json":{schema:D.object({errors:D.record(D.string(),D.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:D.object({message:D.string()})}}}}},hu={method:"get",path:"/news",tags:["News"],summary:"List news",request:{query:pc},responses:{200:{description:"Paginated list of news articles retrieved successfully",summary:"News Retrieved",content:{"application/json":{schema:D.object({page:D.number(),totalPages:D.number(),offset:D.number(),limit:D.number(),news:D.array(D.object({title:D.string(),content:D.string(),id:D.string(),createdAt:D.date(),updatedAt:D.date(),imageUrl:D.string().nullable()}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:D.object({errors:D.record(D.string(),D.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:D.object({message:D.string()})}}}}},Ru={method:"get",path:"/news/{id}",tags:["News"],summary:"Find news by ID",request:{params:cc},responses:{200:{description:"News article details retrieved successfully",summary:"News Retrieved",content:{"application/json":{schema:D.object({page:D.number(),totalPages:D.number(),offset:D.number(),limit:D.number(),news:D.object({title:D.string(),content:D.string(),id:D.string(),createdAt:D.date(),updatedAt:D.date(),imageUrl:D.string().nullable()})})}}},400:{description:"Invalid news ID format",summary:"Validation Error",content:{"application/json":{schema:D.object({errors:D.record(D.string(),D.string())})}}},404:{description:"News article not found with the provided ID",summary:"News Not Found",content:{"application/json":{schema:D.object({message:D.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:D.object({message:D.string()})}}}}},Iu={method:"get",path:"/news/author/{author_id}",tags:["News"],summary:"List news by author",request:{params:zi.pick({authorId:!0}).transform(()=>({author_id:""})),query:zi.omit({authorId:!0})},responses:{200:{description:"Paginated list of news articles by author retrieved successfully",summary:"Author News Retrieved",content:{"application/json":{schema:D.object({page:D.number(),totalPages:D.number(),offset:D.number(),limit:D.number(),news:D.array(D.object({title:D.string(),content:D.string(),id:D.string(),createdAt:D.date(),updatedAt:D.date(),imageUrl:D.string().nullable()}))})}}},400:{description:"Invalid author ID or query parameters",summary:"Validation Error",content:{"application/json":{schema:D.object({errors:D.record(D.string(),D.string())})}}},404:{description:"Author not found with the provided ID",summary:"Author Not Found",content:{"application/json":{schema:D.object({message:D.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:D.object({message:D.string()})}}}}};import q from"zod";import{extendZodWithOpenApi as OC}from"@asteasolutions/zod-to-openapi";import ke from"zod";var Cu=2,bu=1024,NC=bu*bu,GC=Cu*NC;OC(ke);var dc=ke.object({name:ke.string().min(1,"Nome \xE9 obrigat\xF3rio"),logo:ke.any().refine(o=>o==null||typeof o!="object"||typeof o.size!="number"?!1:o.size<=GC,`A imagem deve ter no m\xE1ximo ${Cu}MB.`),websiteUrl:ke.url("URL do site deve ser v\xE1lida").optional(),description:ke.string().optional(),category:ke.string().optional(),since:ke.coerce.date(),isActive:ke.preprocess(o=>o==="true",ke.boolean().optional())}),Zi=class{constructor(e,r){this.partnerRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{name:t,logo:i,websiteUrl:n,description:s,category:m,since:c,isActive:d}=dc.parse({...e.body,logo:e.file}),h=await this.partnerRepository.create({name:t,websiteUrl:n,description:s,category:m,since:c,isActive:d}),j=await this.firebaseStorageService.uploadFile({file:i,id:h.id,folder:M.PARTNER});return await this.partnerRepository.update({id:h.id,logoUrl:j}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as LC}from"@asteasolutions/zod-to-openapi";import lc from"zod";LC(lc);var uc=lc.object({id:lc.uuid()}),Ki=class{constructor(e,r){this.partnerRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=uc.parse({id:e.params.id}),i=await this.partnerRepository.findById(t);if(!i)throw new p("O parceiro n\xE3o existe.");return i.logoUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.logoUrl}),await this.partnerRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as WC}from"@asteasolutions/zod-to-openapi";import gc from"zod";WC(gc);var Yi=gc.object({id:gc.uuid()}),Ji=class{constructor(e){this.partnerRepository=e}async handle(e,r){try{let{id:t}=Yi.parse({id:e.params.id}),i=await this.partnerRepository.findById(t);if(!i)throw new p("O parceiro n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as _C}from"@asteasolutions/zod-to-openapi";import ze from"zod";var zC=1,HC=9;_C(ze);var fc=ze.object({page:ze.coerce.number().min(1).default(zC),limit:ze.coerce.number().min(1).default(HC),name:ze.string().optional(),description:ze.string().optional(),category:ze.string().optional(),isActive:ze.coerce.boolean().optional(),orderBy:ze.enum(["asc","desc"]).optional()}),Xi=class{constructor(e){this.partnerRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=fc.parse(e.query),s=i*t-i,[m,c]=await Promise.all([this.partnerRepository.find({pagination:{offset:s,limit:i},filter:n}),this.partnerRepository.count({filter:n})]),d=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:d,offset:s,limit:i,partners:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as VC}from"@asteasolutions/zod-to-openapi";import Pe from"zod";var Su=2,wu=1024,ZC=wu*wu,KC=Su*ZC;VC(Pe);var yc=Pe.object({id:Pe.uuid(),name:Pe.string().min(1,"Nome \xE9 obrigat\xF3rio").optional(),logo:Pe.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=KC,`A imagem deve ter no m\xE1ximo ${Su}MB.`).optional(),websiteUrl:Pe.url("URL do site deve ser v\xE1lida").optional(),description:Pe.string().optional(),category:Pe.string().optional(),since:Pe.coerce.date().optional(),isActive:Pe.preprocess(o=>o==="true",Pe.boolean().optional())}),$i=class{constructor(e,r){this.partnerRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,name:i,logo:n,websiteUrl:s,description:m,category:c,since:d,isActive:h}=yc.parse({id:e.params.id,...e.body,logo:e.file}),j=await this.partnerRepository.findById(t);if(!j)throw new p("O parceiro n\xE3o existe.");let U=j.logoUrl;if(n&&(U=await this.firebaseStorageService.uploadFile({file:n,id:t,folder:"images/partners"})),!U)throw new a("Logo URL \xE9 obrigat\xF3rio");return await this.partnerRepository.update({id:t,name:i,logoUrl:U,websiteUrl:s,description:m,category:c,since:d,isActive:h}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var vu=q.object({id:q.uuid(),name:q.string(),logoUrl:q.string(),description:q.string().nullable(),category:q.string().nullable(),since:q.date(),isActive:q.boolean(),createdAt:q.date(),updatedAt:q.date()}),Eu={method:"post",path:"/partner",tags:["Partners"],summary:"Create a new partner with logo upload",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:dc}}}},responses:{201:{description:"Partner created successfully",summary:"Partner Created"},400:{description:"Invalid input data, missing required fields, or invalid logo format/size",summary:"Validation Error",content:{"application/json":{schema:q.object({errors:q.record(q.string(),q.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:q.object({message:q.string()})}}},409:{description:"Partner with this name already exists",summary:"Conflict",content:{"application/json":{schema:q.object({message:q.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:q.object({message:q.string()})}}}}},ju={method:"get",path:"/partner",tags:["Partners"],summary:"List all partners with pagination and filters",request:{query:fc},responses:{200:{description:"List of partners retrieved successfully with pagination",summary:"Partners Retrieved",content:{"application/json":{schema:q.object({page:q.number(),totalPages:q.number(),offset:q.number(),limit:q.number(),partners:q.array(vu)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:q.object({errors:q.record(q.string(),q.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:q.object({message:q.string()})}}}}},xu={method:"get",path:"/partner/{id}",tags:["Partners"],summary:"Find partner by ID",request:{params:Yi},responses:{200:{description:"Partner details retrieved successfully",summary:"Partner Retrieved",content:{"application/json":{schema:vu}}},400:{description:"Invalid partner ID format",summary:"Validation Error",content:{"application/json":{schema:q.object({errors:q.record(q.string(),q.string())})}}},404:{description:"Partner not found with the provided ID",summary:"Partner Not Found",content:{"application/json":{schema:q.object({message:q.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:q.object({message:q.string()})}}}}},Mu={method:"put",path:"/partner/{id}",tags:["Partners"],summary:"Update partner with optional logo upload",security:[{bearerAuth:[]}],request:{params:Yi,body:{content:{"multipart/form-data":{schema:yc.omit({id:!0})}}}},responses:{200:{description:"Partner updated successfully",summary:"Partner Updated"},400:{description:"Invalid input data, partner ID format, or invalid logo format/size",summary:"Validation Error",content:{"application/json":{schema:q.object({errors:q.record(q.string(),q.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:q.object({message:q.string()})}}},404:{description:"Partner not found with the provided ID",summary:"Partner Not Found",content:{"application/json":{schema:q.object({message:q.string()})}}},409:{description:"Partner with this name already exists",summary:"Conflict",content:{"application/json":{schema:q.object({message:q.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:q.object({message:q.string()})}}}}},Pu={method:"delete",path:"/partner/{id}",tags:["Partners"],summary:"Delete partner",security:[{bearerAuth:[]}],request:{params:uc},responses:{200:{description:"Partner deleted successfully",summary:"Partner Deleted"},400:{description:"Invalid partner ID format",summary:"Validation Error",content:{"application/json":{schema:q.object({errors:q.record(q.string(),q.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:q.object({message:q.string()})}}},404:{description:"Partner not found with the provided ID",summary:"Partner Not Found",content:{"application/json":{schema:q.object({message:q.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:q.object({message:q.string()})}}}}};import{$Enums as Tu}from"@prisma/client";import O from"zod";import{extendZodWithOpenApi as JC}from"@asteasolutions/zod-to-openapi";import{PendencyStatus as YC}from"@prisma/client";import dt from"zod";JC(dt);var en=dt.object({userId:dt.uuid(),title:dt.string().min(1),description:dt.string().optional(),status:dt.enum(YC).default("PENDING"),dueDate:dt.coerce.date().optional(),document:dt.any().refine(o=>o&&typeof o=="object"&&o.size>0,"Arquivo do documento \xE9 obrigat\xF3rio")}),Qi=class{constructor(e,r,t){this.userRepository=e;this.pendencyRepository=r;this.firebaseStorageService=t}async handle(e,r){try{let{userId:t,title:i,description:n,status:s,dueDate:m,document:c}=en.parse({...e.body,userId:e.params.user_id,document:e.file});if(!await this.userRepository.findById(t))throw new le("O usu\xE1rio n\xE3o existe.");let h=await this.firebaseStorageService.uploadFile({file:c,id:t,folder:M.PENDENCY});return await this.pendencyRepository.create({userId:t,title:i,description:n,status:s,dueDate:m,documentUrl:h}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as XC}from"@asteasolutions/zod-to-openapi";import hc from"zod";XC(hc);var Rc=hc.object({id:hc.uuid()}),tn=class{constructor(e,r){this.pendencyRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=Rc.parse({id:e.params.pendency_id}),i=await this.pendencyRepository.findById(t);if(!i)throw new p("A pend\xEAncia n\xE3o existe.");return await Promise.all([this.pendencyRepository.deleteById(i.id),this.firebaseStorageService.deleteFile({fileUrl:i.documentUrl})]),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as $C}from"@asteasolutions/zod-to-openapi";import{PendencyStatus as QC}from"@prisma/client";import He from"zod";var ew=1,tw=6;$C(He);var Ic=He.object({page:He.coerce.number().min(1).default(ew),limit:He.coerce.number().min(1).default(tw),title:He.string().optional(),description:He.string().optional(),status:He.enum(QC).default("PENDING"),userId:He.uuid().optional(),orderBy:He.enum(["asc","desc"]).default("desc")}),rn=class{constructor(e){this.pendencyRepository=e}async handle(e,r){try{let{description:t,limit:i,orderBy:n,page:s,title:m,status:c,userId:d}=Ic.parse(e.query),h=s*i-i,[j,U]=await Promise.all([this.pendencyRepository.find({pagination:{offset:h,limit:i},filter:{title:m,description:t,status:c,orderBy:n,userId:d}}),this.pendencyRepository.count({filter:{title:m,description:t,status:c,userId:d}})]),Q=Math.max(Math.ceil(U/i),1);return r.status(200).json({page:s,totalPages:Q,offset:h,limit:i,pendencies:j})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as rw}from"@asteasolutions/zod-to-openapi";import bc from"zod";rw(bc);var Cc=bc.object({pendencyId:bc.uuid()}),on=class{constructor(e){this.pendencyRepository=e}async handle(e,r){try{let{pendencyId:t}=Cc.parse({pendencyId:e.params.pendency_id}),i=await this.pendencyRepository.findById(t);if(!i)throw new p("Pend\xEAncia n\xE3o encontrada.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as ow}from"@asteasolutions/zod-to-openapi";import{PendencyStatus as iw}from"@prisma/client";import lt from"zod";ow(lt);var sn=lt.object({id:lt.uuid(),title:lt.string().min(1),description:lt.string().optional(),status:lt.enum(iw),dueDate:lt.coerce.date().optional(),document:lt.any().refine(o=>o==null||typeof o=="object"&&typeof o.size=="number"&&(o.size===0||o.size>0),"Arquivo do documento \xE9 inv\xE1lido").optional()}),nn=class{constructor(e,r){this.pendencyRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{document:t,id:i,...n}=sn.parse({...e.body,id:e.params.pendency_id,document:e.file}),s=await this.pendencyRepository.findById(i);if(!s)throw new le("A pend\xEAncia n\xE3o existe");let m=s.documentUrl;return t&&t.size>0&&(m=await this.firebaseStorageService.updateFile({file:t,id:s.userId,folder:M.PENDENCY,fileUrl:s.documentUrl})),await this.pendencyRepository.update({...n,id:i,documentUrl:m}),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Au={method:"post",path:"/pendency/{user_id}",tags:["Pendencies"],summary:"Create pendency for user",security:[{bearerAuth:[]}],request:{params:en.pick({userId:!0}).transform(()=>({user_id:""})),body:{content:{"multipart/form-data":{schema:en.omit({userId:!0})}}}},responses:{201:{description:"Pendency created successfully for the user",summary:"Pendency Created",content:{"application/json":{schema:O.object({})}}},400:{description:"Invalid input data or file format",summary:"Validation Error",content:{"application/json":{schema:O.object({errors:O.record(O.string(),O.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:O.object({message:O.string()})}}}}},Du={method:"get",path:"/pendency",tags:["Pendencies"],summary:"List pendencies",security:[{bearerAuth:[]}],request:{query:Ic},responses:{200:{description:"Paginated list of pendencies retrieved successfully",summary:"Pendencies Retrieved",content:{"application/json":{schema:O.object({page:O.number(),totalPages:O.number(),offset:O.number(),limit:O.number(),pendencies:O.array(O.object({id:O.string(),title:O.string(),description:O.string().nullable(),status:O.enum(Tu.PendencyStatus),dueDate:O.date().nullable(),documentUrl:O.string(),userId:O.string(),createdAt:O.date(),updatedAt:O.date()}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:O.object({errors:O.record(O.string(),O.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:O.object({message:O.string()})}}}}},Fu={method:"get",path:"/pendency/{pendency_id}",tags:["Pendencies"],summary:"Find pendency by ID",security:[{bearerAuth:[]}],request:{params:Cc},responses:{200:{description:"Pendency details retrieved successfully",summary:"Pendency Retrieved",content:{"application/json":{schema:O.object({id:O.string(),title:O.string(),description:O.string().nullable(),status:O.enum(Tu.PendencyStatus),dueDate:O.date().nullable(),documentUrl:O.string(),userId:O.string(),createdAt:O.date(),updatedAt:O.date()}).nullable()}}},400:{description:"Invalid pendency ID format",summary:"Validation Error",content:{"application/json":{schema:O.object({errors:O.record(O.string(),O.string())})}}},404:{description:"Pendency not found with the provided ID",summary:"Pendency Not Found",content:{"application/json":{schema:O.object({message:O.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:O.object({message:O.string()})}}}}},Bu={method:"put",path:"/pendency/{pendency_id}",tags:["Pendencies"],summary:"Update pendency",security:[{bearerAuth:[]}],request:{params:sn.pick({id:!0}).transform(()=>({pendency_id:""})),body:{content:{"multipart/form-data":{schema:sn.omit({id:!0})}}}},responses:{204:{description:"Pendency updated successfully",summary:"Pendency Updated"},400:{description:"Invalid input data or pendency does not exist",summary:"Validation Error",content:{"application/json":{schema:O.object({errors:O.record(O.string(),O.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:O.object({message:O.string()})}}}}},qu={method:"delete",path:"/pendency/{pendency_id}",tags:["Pendencies"],summary:"Delete pendency",security:[{bearerAuth:[]}],request:{params:Rc},responses:{204:{description:"Pendency deleted successfully",summary:"Pendency Deleted"},400:{description:"Invalid pendency ID format",summary:"Validation Error",content:{"application/json":{schema:O.object({errors:O.record(O.string(),O.string())})}}},404:{description:"Pendency not found with the provided ID",summary:"Pendency Not Found",content:{"application/json":{schema:O.object({message:O.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:O.object({message:O.string()})}}}}};import v from"zod";import{extendZodWithOpenApi as nw}from"@asteasolutions/zod-to-openapi";import wc from"zod";nw(wc);var Sc=wc.object({id:wc.uuid()}),an=class{constructor(e,r){this.postGraduateProgramRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=Sc.parse({id:e.params.id}),i=await this.postGraduateProgramRepository.findById(t);if(!i)throw new p("O programa de p\xF3s-gradua\xE7\xE3o n\xE3o existe.");return i.imageUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.imageUrl}),await this.postGraduateProgramRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as sw}from"@asteasolutions/zod-to-openapi";import vc from"zod";sw(vc);var Ec=vc.object({id:vc.uuid()}),mn=class{constructor(e){this.postGraduateProgramRepository=e}async handle(e,r){try{let{id:t}=Ec.parse({id:e.params.id}),i=await this.postGraduateProgramRepository.findById(t);if(!i)throw new p("Programa de p\xF3s-gradua\xE7\xE3o n\xE3o encontrado.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as aw}from"@asteasolutions/zod-to-openapi";import ut from"zod";var mw=1,cw=6;aw(ut);var jc=ut.object({page:ut.coerce.number().min(1).default(mw),limit:ut.coerce.number().min(1).default(cw),title:ut.string().optional(),description:ut.string().optional(),contact:ut.string().optional(),orderBy:ut.enum(["asc","desc"]).default("desc")}),cn=class{constructor(e){this.postGraduateProgramRepository=e}async handle(e,r){try{let{limit:t,page:i,...n}=jc.parse(e.query),s=i*t-t,[m,c]=await Promise.all([this.postGraduateProgramRepository.find({pagination:{offset:s,limit:t},filter:n}),this.postGraduateProgramRepository.count({filter:n})]),d=Math.max(Math.ceil(c/t),1);return r.status(200).json({page:i,totalPages:d,offset:s,limit:t,postGraduatePrograms:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as pw}from"@asteasolutions/zod-to-openapi";import Oe from"zod";var ku=5,Uu=1024,dw=Uu*Uu,lw=ku*dw;pw(Oe);var xc=Oe.object({id:Oe.uuid(),title:Oe.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio.").optional(),description:Oe.string().optional(),startDate:Oe.coerce.date().optional(),endDate:Oe.coerce.date().optional(),contact:Oe.string().min(1,"Contato \xE9 obrigat\xF3rio.").optional(),registrationLink:Oe.url("URL de inscri\xE7\xE3o deve ser v\xE1lida").optional(),image:Oe.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=lw,`A imagem deve ter no m\xE1ximo ${ku}MB.`).optional()}),pn=class{constructor(e,r){this.postGraduateProgramRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,image:i,title:n,description:s,startDate:m,endDate:c,contact:d,registrationLink:h}=xc.parse({id:e.params.id,...e.body,image:e.file}),j=await this.postGraduateProgramRepository.findById(t);if(!j)throw new p("O programa de p\xF3s-gradua\xE7\xE3o n\xE3o existe.");let U=j.imageUrl;if(i&&(U=await this.firebaseStorageService.uploadFile({file:i,id:t,folder:M.POST_GRADUATE_PROGRAM})),!U)throw new a("URL da imagem \xE9 obrigat\xF3rio");return await this.postGraduateProgramRepository.update({id:t,title:n,description:s,startDate:m,endDate:c,contact:d,registrationLink:h,imageUrl:U}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Ou={method:"post",path:"/post-graduate-programs",tags:["Post Graduate Programs"],summary:"Create post-graduate program",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:v.object({title:v.string().min(1).openapi({description:"T\xEDtulo do programa"}),description:v.string().optional().openapi({description:"Descri\xE7\xE3o do programa"}),startDate:v.string().openapi({description:"Data de in\xEDcio (ISO 8601)",example:"2024-01-01T10:00:00Z"}),endDate:v.string().openapi({description:"Data de t\xE9rmino (ISO 8601)",example:"2024-12-31T10:00:00Z"}),contact:v.string().min(1).openapi({description:"Informa\xE7\xF5es de contato"}),registrationLink:v.string().url().optional().openapi({description:"Link de inscri\xE7\xE3o"}),image:v.string().optional().openapi({description:"Imagem do programa (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{201:{description:"Post-graduate program created successfully",summary:"Program Created"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:v.object({errors:v.record(v.string(),v.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:v.object({message:v.string()})}}}}},Nu={method:"get",path:"/post-graduate-programs",tags:["Post Graduate Programs"],summary:"List post-graduate programs",security:[{bearerAuth:[]}],request:{query:jc},responses:{200:{description:"Paginated list of post-graduate programs retrieved successfully",summary:"Programs Retrieved",content:{"application/json":{schema:v.object({page:v.number(),totalPages:v.number(),offset:v.number(),limit:v.number(),postGraduatePrograms:v.array(v.object({id:v.string(),title:v.string(),imageUrl:v.string().nullable(),description:v.string().nullable(),startDate:v.date(),endDate:v.date(),contact:v.string(),registrationLink:v.string().nullable(),createdAt:v.date(),updatedAt:v.date()}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:v.object({errors:v.record(v.string(),v.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:v.object({message:v.string()})}}}}},Gu={method:"get",path:"/post-graduate-programs/{id}",tags:["Post Graduate Programs"],summary:"Find post-graduate program by ID",security:[{bearerAuth:[]}],request:{params:Ec},responses:{200:{description:"Post-graduate program details retrieved successfully",summary:"Program Retrieved",content:{"application/json":{schema:v.object({id:v.string(),title:v.string(),imageUrl:v.string().nullable(),description:v.string().nullable(),startDate:v.date(),endDate:v.date(),contact:v.string(),registrationLink:v.string().nullable(),createdAt:v.date(),updatedAt:v.date()}).nullable()}}},400:{description:"Invalid program ID format",summary:"Validation Error",content:{"application/json":{schema:v.object({errors:v.record(v.string(),v.string())})}}},404:{description:"Post-graduate program not found with the provided ID",summary:"Program Not Found",content:{"application/json":{schema:v.object({message:v.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:v.object({message:v.string()})}}}}},Lu={method:"put",path:"/post-graduate-programs/{id}",tags:["Post Graduate Programs"],summary:"Update post-graduate program",security:[{bearerAuth:[]}],request:{params:xc.pick({id:!0}),body:{content:{"multipart/form-data":{schema:v.object({title:v.string().min(1).optional().openapi({description:"T\xEDtulo do programa"}),description:v.string().optional().openapi({description:"Descri\xE7\xE3o do programa"}),startDate:v.string().optional().openapi({description:"Data de in\xEDcio (ISO 8601)",example:"2024-01-01T10:00:00Z"}),endDate:v.string().optional().openapi({description:"Data de t\xE9rmino (ISO 8601)",example:"2024-12-31T10:00:00Z"}),contact:v.string().min(1).optional().openapi({description:"Informa\xE7\xF5es de contato"}),registrationLink:v.string().url().optional().openapi({description:"Link de inscri\xE7\xE3o"}),image:v.string().optional().openapi({description:"Imagem do programa (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{200:{description:"Post-graduate program updated successfully",summary:"Program Updated"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:v.object({errors:v.record(v.string(),v.string())})}}},404:{description:"Post-graduate program not found with the provided ID",summary:"Program Not Found",content:{"application/json":{schema:v.object({message:v.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:v.object({message:v.string()})}}}}},Wu={method:"delete",path:"/post-graduate-programs/{id}",tags:["Post Graduate Programs"],summary:"Delete post-graduate program",security:[{bearerAuth:[]}],request:{params:Sc},responses:{200:{description:"Post-graduate program deleted successfully",summary:"Program Deleted"},400:{description:"Invalid program ID format",summary:"Validation Error",content:{"application/json":{schema:v.object({errors:v.record(v.string(),v.string())})}}},404:{description:"Post-graduate program not found with the provided ID",summary:"Program Not Found",content:{"application/json":{schema:v.object({message:v.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:v.object({message:v.string()})}}}}};import{$Enums as hw}from"@prisma/client";import _ from"zod";import{extendZodWithOpenApi as uw}from"@asteasolutions/zod-to-openapi";import zr from"zod";uw(zr);var Mc=zr.object({role:zr.string().min(1),description:zr.string().optional(),userId:zr.uuid()}),dn=class{constructor(e){this.referenceCenterTeamMemberRepository=e}async handle(e,r){try{let{role:t,description:i,userId:n}=Mc.parse(e.body);return await this.referenceCenterTeamMemberRepository.create({role:t,description:i,userId:n}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as gw}from"@asteasolutions/zod-to-openapi";import Pc from"zod";gw(Pc);var Tc=Pc.object({id:Pc.uuid()}),ln=class{constructor(e){this.referenceCenterTeamMemberRepository=e}async handle(e,r){try{let{id:t}=Tc.parse({id:e.params.id});if(!await this.referenceCenterTeamMemberRepository.findById(t))throw new p("O membro do centro de refer\xEAncia n\xE3o existe.");return await this.referenceCenterTeamMemberRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as fw}from"@asteasolutions/zod-to-openapi";import Ac from"zod";fw(Ac);var gn=Ac.object({id:Ac.uuid()}),un=class{constructor(e){this.referenceCenterTeamMemberRepository=e}async handle(e,r){try{let{id:t}=gn.parse({id:e.params.id}),i=await this.referenceCenterTeamMemberRepository.findById(t);if(!i)throw new p("O membro do centro de refer\xEAncia n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as yw}from"@asteasolutions/zod-to-openapi";import ar from"zod";yw(ar);var Dc=ar.object({id:ar.uuid(),role:ar.string().min(1).optional(),description:ar.string().optional(),userId:ar.uuid().optional()}),fn=class{constructor(e){this.referenceCenterTeamMemberRepository=e}async handle(e,r){try{let{id:t,role:i,description:n,userId:s}=Dc.parse({id:e.params.id,...e.body});if(!await this.referenceCenterTeamMemberRepository.findById(t))throw new p("O membro do centro de refer\xEAncia n\xE3o existe.");return await this.referenceCenterTeamMemberRepository.update({id:t,role:i,description:n,userId:s}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Rw=_.object({id:_.uuid(),name:_.string(),emailAddress:_.string(),avatarUrl:_.string().nullable(),orcid:_.string().nullable(),phone:_.string().nullable(),lattesUrl:_.string().nullable(),role:_.enum(hw.UserRole)}),_u=_.object({id:_.uuid(),role:_.string(),description:_.string().nullable(),createdAt:_.date(),updatedAt:_.date(),userId:_.uuid(),user:Rw}),zu={method:"post",path:"/reference-center-team-member",tags:["Reference Center Team Members"],summary:"Create a new Reference Center Team Member",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:Mc}}}},responses:{201:{description:"Reference Center Team Member created successfully",summary:"Reference Center Team Member Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:_.object({errors:_.record(_.string(),_.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:_.object({message:_.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:_.object({message:_.string()})}}}}},Hu={method:"get",path:"/reference-center-team-member",tags:["Reference Center Team Members"],summary:"List all Reference Center Team Members with filters",request:{query:_.object({role:_.string().optional(),orderBy:_.enum(["asc","desc"]).optional()})},responses:{200:{description:"List of Reference Center Team Members retrieved successfully",summary:"Reference Center Team Members Retrieved",content:{"application/json":{schema:_.object({members:_.array(_u)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:_.object({message:_.string()})}}}}},Vu={method:"get",path:"/reference-center-team-member/{id}",tags:["Reference Center Team Members"],summary:"Find Reference Center Team Member by ID",request:{params:gn},responses:{200:{description:"Reference Center Team Member details retrieved successfully",summary:"Reference Center Team Member Retrieved",content:{"application/json":{schema:_u}}},400:{description:"Invalid Reference Center Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:_.object({errors:_.record(_.string(),_.string())})}}},404:{description:"Reference Center Team Member not found with the provided ID",summary:"Reference Center Team Member Not Found",content:{"application/json":{schema:_.object({message:_.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:_.object({message:_.string()})}}}}},Zu={method:"put",path:"/reference-center-team-member/{id}",tags:["Reference Center Team Members"],summary:"Update Reference Center Team Member",security:[{bearerAuth:[]}],request:{params:gn,body:{content:{"application/json":{schema:Dc.omit({id:!0})}}}},responses:{200:{description:"Reference Center Team Member updated successfully",summary:"Reference Center Team Member Updated"},400:{description:"Invalid input data or Reference Center Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:_.object({errors:_.record(_.string(),_.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:_.object({message:_.string()})}}},404:{description:"Reference Center Team Member not found with the provided ID",summary:"Reference Center Team Member Not Found",content:{"application/json":{schema:_.object({message:_.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:_.object({message:_.string()})}}}}},Ku={method:"delete",path:"/reference-center-team-member/{id}",tags:["Reference Center Team Members"],summary:"Delete Reference Center Team Member",security:[{bearerAuth:[]}],request:{params:Tc},responses:{200:{description:"Reference Center Team Member deleted successfully",summary:"Reference Center Team Member Deleted"},400:{description:"Invalid Reference Center Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:_.object({errors:_.record(_.string(),_.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:_.object({message:_.string()})}}},404:{description:"Reference Center Team Member not found with the provided ID",summary:"Reference Center Team Member Not Found",content:{"application/json":{schema:_.object({message:_.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:_.object({message:_.string()})}}}}};import{RegimentStatus as Bw}from"@prisma/client";import B from"zod";import{extendZodWithOpenApi as Iw}from"@asteasolutions/zod-to-openapi";import{RegimentStatus as Yu}from"@prisma/client";import jt from"zod";var Xu=10,Ju=1024,bw=Ju*Ju,Cw=Xu*bw;Iw(jt);var Fc=jt.object({title:jt.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio"),version:jt.string().min(1,"Vers\xE3o \xE9 obrigat\xF3ria"),publishedAt:jt.coerce.date(),document:jt.any().refine(o=>o==null||typeof o!="object"||typeof o.size!="number"?!1:o.size<=Cw,`O documento deve ter no m\xE1ximo ${Xu}MB.`),status:jt.enum(Yu).optional()}),yn=class{constructor(e,r){this.regimentRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{title:t,version:i,publishedAt:n,document:s,status:m}=Fc.parse({...e.body,document:e.file}),c=await this.regimentRepository.create({title:t,version:i,publishedAt:n,documentUrl:"",status:m??Yu.IN_FORCE}),d=await this.firebaseStorageService.uploadFile({file:s,id:c.id,folder:M.REGIMENT});return await this.regimentRepository.update({id:c.id,documentUrl:d}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as ww}from"@asteasolutions/zod-to-openapi";import Bc from"zod";ww(Bc);var qc=Bc.object({id:Bc.uuid()}),hn=class{constructor(e,r){this.regimentRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=qc.parse({id:e.params.id}),i=await this.regimentRepository.findById(t);if(!i)throw new p("O regimento n\xE3o existe.");return i.documentUrl&&await this.firebaseStorageService.deleteFile({fileUrl:i.documentUrl}),await this.regimentRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Sw}from"@asteasolutions/zod-to-openapi";import Uc from"zod";Sw(Uc);var In=Uc.object({id:Uc.uuid()}),Rn=class{constructor(e){this.regimentRepository=e}async handle(e,r){try{let{id:t}=In.parse({id:e.params.id}),i=await this.regimentRepository.findById(t);if(!i)throw new p("O regimento n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as vw}from"@asteasolutions/zod-to-openapi";import{RegimentStatus as Ew}from"@prisma/client";import kc from"zod";vw(kc);var Oc=kc.object({status:kc.enum(Ew)}),bn=class{constructor(e){this.regimentRepository=e}async handle(e,r){try{let{status:t}=Oc.parse({status:e.params.status}),i=await this.regimentRepository.findByStatus(t);return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as jw}from"@asteasolutions/zod-to-openapi";import{RegimentStatus as xw}from"@prisma/client";import xt from"zod";var Mw=1,Pw=10;jw(xt);var Nc=xt.object({page:xt.coerce.number().min(1).default(Mw),limit:xt.coerce.number().min(1).default(Pw),title:xt.string().optional(),status:xt.enum(xw).optional(),orderBy:xt.enum(["asc","desc"]).optional()}),Cn=class{constructor(e){this.regimentRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=Nc.parse(e.query),s=i*t-i,[m,c]=await Promise.all([this.regimentRepository.find({pagination:{offset:s,limit:i},filter:n}),this.regimentRepository.count({filter:n})]),d=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:d,offset:s,limit:i,regiments:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Tw}from"@asteasolutions/zod-to-openapi";import{RegimentStatus as Aw}from"@prisma/client";import gt from"zod";var Qu=10,$u=1024,Dw=$u*$u,Fw=Qu*Dw;Tw(gt);var Gc=gt.object({id:gt.uuid(),title:gt.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio").optional(),version:gt.string().min(1,"Vers\xE3o \xE9 obrigat\xF3ria").optional(),publishedAt:gt.coerce.date().optional(),document:gt.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=Fw,`O documento deve ter no m\xE1ximo ${Qu}MB.`).optional(),status:gt.enum(Aw).optional()}),wn=class{constructor(e,r){this.regimentRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,title:i,version:n,publishedAt:s,document:m,status:c}=Gc.parse({id:e.params.id,...e.body,document:e.file}),d=await this.regimentRepository.findById(t);if(!d)throw new p("O regimento n\xE3o existe.");let h=d.documentUrl;return m&&(d.documentUrl&&await this.firebaseStorageService.deleteFile({fileUrl:d.documentUrl}),h=await this.firebaseStorageService.uploadFile({file:m,id:t,folder:M.REGIMENT})),await this.regimentRepository.update({id:t,title:i,version:n,publishedAt:s,documentUrl:h??void 0,status:c}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Lc=B.object({id:B.uuid(),title:B.string(),version:B.string(),publishedAt:B.date(),documentUrl:B.string(),status:B.enum(Bw),createdAt:B.date(),updatedAt:B.date()}),eg={method:"post",path:"/regiment",tags:["Regiments"],summary:"Create a new regiment with document upload",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:Fc}}}},responses:{201:{description:"Regiment created successfully",summary:"Regiment Created"},400:{description:"Invalid input data, missing required fields, or invalid document format/size",summary:"Validation Error",content:{"application/json":{schema:B.object({errors:B.record(B.string(),B.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:B.object({message:B.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:B.object({message:B.string()})}}}}},tg={method:"get",path:"/regiment",tags:["Regiments"],summary:"List all regiments with pagination and filters",request:{query:Nc},responses:{200:{description:"List of regiments retrieved successfully with pagination",summary:"Regiments Retrieved",content:{"application/json":{schema:B.object({page:B.number(),totalPages:B.number(),offset:B.number(),limit:B.number(),regiments:B.array(Lc)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:B.object({errors:B.record(B.string(),B.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:B.object({message:B.string()})}}}}},rg={method:"get",path:"/regiment/{id}",tags:["Regiments"],summary:"Find regiment by ID",request:{params:In},responses:{200:{description:"Regiment details retrieved successfully",summary:"Regiment Retrieved",content:{"application/json":{schema:Lc}}},400:{description:"Invalid regiment ID format",summary:"Validation Error",content:{"application/json":{schema:B.object({errors:B.record(B.string(),B.string())})}}},404:{description:"Regiment not found with the provided ID",summary:"Regiment Not Found",content:{"application/json":{schema:B.object({message:B.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:B.object({message:B.string()})}}}}},og={method:"get",path:"/regiment/status/{status}",tags:["Regiments"],summary:"Find regiments by status",request:{params:Oc},responses:{200:{description:"Regiments retrieved successfully by status",summary:"Regiments Retrieved by Status",content:{"application/json":{schema:B.array(Lc)}}},400:{description:"Invalid status parameter provided",summary:"Validation Error",content:{"application/json":{schema:B.object({errors:B.record(B.string(),B.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:B.object({message:B.string()})}}}}},ig={method:"put",path:"/regiment/{id}",tags:["Regiments"],summary:"Update regiment with optional document upload",security:[{bearerAuth:[]}],request:{params:In,body:{content:{"multipart/form-data":{schema:Gc.omit({id:!0})}}}},responses:{200:{description:"Regiment updated successfully",summary:"Regiment Updated"},400:{description:"Invalid input data, regiment ID format, or invalid document format/size",summary:"Validation Error",content:{"application/json":{schema:B.object({errors:B.record(B.string(),B.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:B.object({message:B.string()})}}},404:{description:"Regiment not found with the provided ID",summary:"Regiment Not Found",content:{"application/json":{schema:B.object({message:B.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:B.object({message:B.string()})}}}}},ng={method:"delete",path:"/regiment/{id}",tags:["Regiments"],summary:"Delete regiment",security:[{bearerAuth:[]}],request:{params:qc},responses:{200:{description:"Regiment deleted successfully",summary:"Regiment Deleted"},400:{description:"Invalid regiment ID format",summary:"Validation Error",content:{"application/json":{schema:B.object({errors:B.record(B.string(),B.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:B.object({message:B.string()})}}},404:{description:"Regiment not found with the provided ID",summary:"Regiment Not Found",content:{"application/json":{schema:B.object({message:B.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:B.object({message:B.string()})}}}}};import X from"zod";import{extendZodWithOpenApi as qw}from"@asteasolutions/zod-to-openapi";import Hr from"zod";var ag=5,sg=1024,Uw=sg*sg,kw=ag*Uw;qw(Hr);var Wc=Hr.object({caption:Hr.string().optional(),image:Hr.any().refine(o=>o==null||typeof o!="object"||typeof o.size!="number"?!1:o.size<=kw,`A imagem deve ter no m\xE1ximo ${ag}MB.`),congressId:Hr.uuid()}),Sn=class{constructor(e,r,t){this.regionalCongressGalleryRepository=e;this.regionalCongressRepository=r;this.firebaseStorageService=t}async handle(e,r){try{let{caption:t,image:i,congressId:n}=Wc.parse({...e.body,...e.params,image:e.file});if(!await this.regionalCongressRepository.findById(n))throw new p("O congresso n\xE3o existe.");let m=await this.regionalCongressGalleryRepository.create({caption:t,congressId:n,imageUrl:""}),c=await this.firebaseStorageService.uploadFile({file:i,id:m.id,folder:M.GALLERY});return await this.regionalCongressGalleryRepository.update({id:m.id,imageUrl:c}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Ow}from"@asteasolutions/zod-to-openapi";import _c from"zod";Ow(_c);var En=_c.object({id:_c.uuid("ID inv\xE1lido")}),vn=class{constructor(e){this.regionalCongressGalleryRepository=e}async handle(e,r){try{let{id:t}=En.parse(e.params);if(!await this.regionalCongressGalleryRepository.findById(t))throw new p("Item de galeria n\xE3o encontrado");return await this.regionalCongressGalleryRepository.deleteById(t),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Nw}from"@asteasolutions/zod-to-openapi";import mr from"zod";Nw(mr);var zc=mr.object({congressId:mr.uuid("ID do congresso inv\xE1lido"),page:mr.coerce.number().int().positive().default(1),limit:mr.coerce.number().int().positive().default(10),caption:mr.string().optional()}),jn=class{constructor(e){this.regionalCongressGalleryRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=zc.parse({...e.params,...e.query}),s=(t-1)*i,m=await this.regionalCongressGalleryRepository.findByCongressId({pagination:{offset:s,limit:i},filter:n});if(!m)throw new p("Itens de galeria n\xE3o encontrados");let c=await this.regionalCongressGalleryRepository.count({filter:n});return r.status(200).json({data:m,pagination:{page:t,limit:i,total:c,totalPages:Math.ceil(c/i)}})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Gw}from"@asteasolutions/zod-to-openapi";import Vr from"zod";var cg=5,mg=1024,Lw=mg*mg,Ww=cg*Lw;Gw(Vr);var Hc=Vr.object({id:Vr.string().uuid("ID inv\xE1lido"),caption:Vr.string().optional(),image:Vr.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=Ww,`A imagem deve ter no m\xE1ximo ${cg}MB.`).optional()}),xn=class{constructor(e,r){this.regionalCongressGalleryRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,caption:i,image:n}=Hc.parse({...e.params,...e.body,image:e.file});if(!await this.regionalCongressGalleryRepository.findById(t))throw new p("Item de galeria n\xE3o encontrado");let m;return n&&(m=await this.firebaseStorageService.uploadFile({file:n,id:t,folder:M.GALLERY})),await this.regionalCongressGalleryRepository.update({id:t,caption:i,...m&&{imageUrl:m}}),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var _w=X.object({id:X.uuid(),imageUrl:X.string(),caption:X.string().nullable(),congressId:X.uuid()}),pg={method:"post",path:"/regional-congress/{congressId}/gallery",tags:["Regional Congresses"],summary:"Create a new congress gallery image",security:[{bearerAuth:[]}],request:{params:X.object({congressId:X.uuid()}),body:{content:{"application/json":{schema:Wc.omit({congressId:!0})}}}},responses:{201:{description:"Congress gallery image created successfully",summary:"Congress Gallery Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:X.object({errors:X.record(X.string(),X.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:X.object({message:X.string()})}}},404:{description:"Congress not found with the provided ID",summary:"Congress Not Found",content:{"application/json":{schema:X.object({message:X.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:X.object({message:X.string()})}}}}},dg={method:"get",path:"/regional-congress/{congressId}/gallery",tags:["Regional Congresses"],summary:"Find congress gallery images by congress ID",request:{params:zc},responses:{200:{description:"Congress gallery images retrieved successfully by congress ID",summary:"Congress Galleries Retrieved",content:{"application/json":{schema:X.array(_w)}}},400:{description:"Invalid congress ID parameter provided",summary:"Validation Error",content:{"application/json":{schema:X.object({errors:X.record(X.string(),X.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:X.object({message:X.string()})}}}}},lg={method:"put",path:"/regional-congress/gallery/{id}",tags:["Regional Congresses"],summary:"Update congress gallery image",security:[{bearerAuth:[]}],request:{params:En,body:{content:{"application/json":{schema:Hc.omit({id:!0})}}}},responses:{200:{description:"Congress gallery image updated successfully",summary:"Congress Gallery Updated"},400:{description:"Invalid input data or gallery ID format",summary:"Validation Error",content:{"application/json":{schema:X.object({errors:X.record(X.string(),X.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:X.object({message:X.string()})}}},404:{description:"Congress gallery image not found with the provided ID",summary:"Congress Gallery Not Found",content:{"application/json":{schema:X.object({message:X.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:X.object({message:X.string()})}}}}},ug={method:"delete",path:"/regional-congress/gallery/{id}",tags:["Regional Congresses"],summary:"Delete congress gallery image",security:[{bearerAuth:[]}],request:{params:En},responses:{200:{description:"Congress gallery image deleted successfully",summary:"Congress Gallery Deleted"},400:{description:"Invalid gallery ID format",summary:"Validation Error",content:{"application/json":{schema:X.object({errors:X.record(X.string(),X.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:X.object({message:X.string()})}}},404:{description:"Congress gallery image not found with the provided ID",summary:"Congress Gallery Not Found",content:{"application/json":{schema:X.object({message:X.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:X.object({message:X.string()})}}}}};import $ from"zod";import{extendZodWithOpenApi as zw}from"@asteasolutions/zod-to-openapi";import Zr from"zod";var fg=2,gg=1024,Hw=gg*gg,Vw=fg*Hw;zw(Zr);var Vc=Zr.object({name:Zr.string().min(1,"Nome \xE9 obrigat\xF3rio"),logo:Zr.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=Vw,`A imagem deve ter no m\xE1ximo ${fg}MB.`).optional(),congressId:Zr.uuid()}),Mn=class{constructor(e,r,t){this.regionalCongressPartnerRepository=e;this.regionalCongressRepository=r;this.firebaseStorageService=t}async handle(e,r){try{let{name:t,logo:i,congressId:n}=Vc.parse({...e.body,...e.params,logo:e.file});if(!await this.regionalCongressRepository.findById(n))throw new p("O congresso n\xE3o existe.");let m=await this.regionalCongressPartnerRepository.create({name:t,congressId:n}),c;return i&&(c=await this.firebaseStorageService.uploadFile({file:i,id:m.id,folder:M.PARTNER}),await this.regionalCongressPartnerRepository.update({id:m.id,logoUrl:c})),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Zw}from"@asteasolutions/zod-to-openapi";import Zc from"zod";Zw(Zc);var Tn=Zc.object({id:Zc.string().uuid("ID inv\xE1lido")}),Pn=class{constructor(e){this.regionalCongressPartnerRepository=e}async handle(e,r){try{let{id:t}=Tn.parse(e.params);if(!await this.regionalCongressPartnerRepository.findById(t))throw new p("Parceiro n\xE3o encontrado");return await this.regionalCongressPartnerRepository.deleteById(t),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Kw}from"@asteasolutions/zod-to-openapi";import cr from"zod";Kw(cr);var Kc=cr.object({congressId:cr.uuid("ID do congresso inv\xE1lido"),page:cr.coerce.number().int().positive().optional(),limit:cr.coerce.number().int().positive().optional(),name:cr.string().optional()}),An=class{constructor(e){this.regionalCongressPartnerRepository=e}async handle(e,r){try{let{congressId:t,page:i,limit:n,name:s}=Kc.parse({...e.params,...e.query}),m=i!==void 0&&n!==void 0,c=m?{offset:(i-1)*n,limit:n}:void 0,d=await this.regionalCongressPartnerRepository.findByCongressId({pagination:c,filter:{congressId:t,name:s}});if(!d)throw new p("Parceiros n\xE3o encontrados");if(!m)return r.status(200).json(d);let h=await this.regionalCongressPartnerRepository.count({filter:{congressId:t,name:s}});return r.status(200).json({data:d,pagination:{page:i,limit:n,total:h,totalPages:Math.ceil(h/n)}})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as Jw}from"@asteasolutions/zod-to-openapi";import Kr from"zod";var hg=2,yg=1024,Yw=yg*yg,Xw=hg*Yw;Jw(Kr);var Jc=Kr.object({id:Kr.string().uuid("ID inv\xE1lido"),name:Kr.string().min(1,"Nome \xE9 obrigat\xF3rio").optional(),logo:Kr.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=Xw,`A imagem deve ter no m\xE1ximo ${hg}MB.`).optional()}),Dn=class{constructor(e,r){this.regionalCongressPartnerRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,name:i,logo:n}=Jc.parse({...e.params,...e.body,logo:e.file});if(!await this.regionalCongressPartnerRepository.findById(t))throw new p("Parceiro n\xE3o encontrado");let m;return n&&(m=await this.firebaseStorageService.uploadFile({file:n,id:t,folder:M.PARTNER})),await this.regionalCongressPartnerRepository.update({id:t,name:i,...m&&{logoUrl:m}}),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var $w=$.object({id:$.uuid(),name:$.string(),logoUrl:$.string().nullable(),congressId:$.uuid()}),Rg={method:"post",path:"/regional-congress/{congressId}/partner",tags:["Regional Congresses"],summary:"Create a new congress partner",security:[{bearerAuth:[]}],request:{params:$.object({congressId:$.uuid()}),body:{content:{"application/json":{schema:Vc.omit({congressId:!0})}}}},responses:{201:{description:"Congress partner created successfully",summary:"Congress Partner Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:$.object({errors:$.record($.string(),$.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:$.object({message:$.string()})}}},404:{description:"Congress not found with the provided ID",summary:"Congress Not Found",content:{"application/json":{schema:$.object({message:$.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:$.object({message:$.string()})}}}}},Ig={method:"get",path:"/regional-congress/{congressId}/partner",tags:["Regional Congresses"],summary:"Find congress partners by congress ID",request:{params:Kc},responses:{200:{description:"Congress partners retrieved successfully by congress ID",summary:"Congress Partners Retrieved",content:{"application/json":{schema:$.array($w)}}},400:{description:"Invalid congress ID parameter provided",summary:"Validation Error",content:{"application/json":{schema:$.object({errors:$.record($.string(),$.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:$.object({message:$.string()})}}}}},bg={method:"put",path:"/regional-congress/partner/{id}",tags:["Regional Congresses"],summary:"Update congress partner",security:[{bearerAuth:[]}],request:{params:Tn,body:{content:{"application/json":{schema:Jc.omit({id:!0})}}}},responses:{200:{description:"Congress partner updated successfully",summary:"Congress Partner Updated"},400:{description:"Invalid input data or partner ID format",summary:"Validation Error",content:{"application/json":{schema:$.object({errors:$.record($.string(),$.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:$.object({message:$.string()})}}},404:{description:"Congress partner not found with the provided ID",summary:"Congress Partner Not Found",content:{"application/json":{schema:$.object({message:$.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:$.object({message:$.string()})}}}}},Cg={method:"delete",path:"/regional-congress/partner/{id}",tags:["Regional Congresses"],summary:"Delete congress partner",security:[{bearerAuth:[]}],request:{params:Tn},responses:{200:{description:"Congress partner deleted successfully",summary:"Congress Partner Deleted"},400:{description:"Invalid partner ID format",summary:"Validation Error",content:{"application/json":{schema:$.object({errors:$.record($.string(),$.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:$.object({message:$.string()})}}},404:{description:"Congress partner not found with the provided ID",summary:"Congress Partner Not Found",content:{"application/json":{schema:$.object({message:$.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:$.object({message:$.string()})}}}}};import f from"zod";import{extendZodWithOpenApi as Qw}from"@asteasolutions/zod-to-openapi";import oe from"zod";Qw(oe);var Yc=oe.object({title:oe.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio"),edition:oe.coerce.number().int().positive("Edi\xE7\xE3o deve ser um n\xFAmero positivo"),startDate:oe.coerce.date(),endDate:oe.coerce.date(),description:oe.string().optional(),location:oe.string().optional(),congressLink:oe.union([oe.url("Link do congresso deve ser uma URL v\xE1lida"),oe.literal("")]),noticeUrl:oe.union([oe.url("URL do edital deve ser uma URL v\xE1lida"),oe.literal("")]),scheduleUrl:oe.union([oe.url("URL do cronograma deve ser uma URL v\xE1lida"),oe.literal("")]),programUrl:oe.union([oe.url("URL da programa\xE7\xE3o deve ser uma URL v\xE1lida"),oe.literal("")]),adminReportUrl:oe.union([oe.url("URL do relat\xF3rio administrativo deve ser uma URL v\xE1lida"),oe.literal("")]),proceedingsUrl:oe.union([oe.url("URL dos anais deve ser uma URL v\xE1lida"),oe.literal("")])}).refine(o=>o.endDate>=o.startDate,{message:"Data de t\xE9rmino deve ser posterior ou igual \xE0 data de in\xEDcio",path:["endDate"]}),Fn=class{constructor(e){this.regionalCongressRepository=e}async handle(e,r){try{let t=Yc.parse(e.body);return await this.regionalCongressRepository.create(t),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as eS}from"@asteasolutions/zod-to-openapi";import Xc from"zod";eS(Xc);var $c=Xc.object({id:Xc.string().uuid("ID inv\xE1lido")}),Bn=class{constructor(e){this.regionalCongressRepository=e}async handle(e,r){try{let{id:t}=$c.parse(e.params);if(!await this.regionalCongressRepository.findById(t))throw new p("Congresso regional n\xE3o encontrado");return await this.regionalCongressRepository.deleteById(t),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as tS}from"@asteasolutions/zod-to-openapi";import Qc from"zod";tS(Qc);var ep=Qc.object({edition:Qc.coerce.number().int().positive("Edi\xE7\xE3o deve ser um n\xFAmero positivo")}),qn=class{constructor(e){this.regionalCongressRepository=e}async handle(e,r){try{let{edition:t}=ep.parse(e.params),i=await this.regionalCongressRepository.findByEdition(t);if(!i||i.length===0)throw new p("Congresso regional n\xE3o encontrado");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as rS}from"@asteasolutions/zod-to-openapi";import tp from"zod";rS(tp);var kn=tp.object({id:tp.string().uuid("ID inv\xE1lido")}),Un=class{constructor(e){this.regionalCongressRepository=e}async handle(e,r){try{let{id:t}=kn.parse(e.params),i=await this.regionalCongressRepository.findById(t);if(!i)throw new p("Congresso regional n\xE3o encontrado");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as oS}from"@asteasolutions/zod-to-openapi";import ft from"zod";oS(ft);var rp=ft.object({page:ft.coerce.number().int().positive().default(1),limit:ft.coerce.number().int().positive().default(10),title:ft.string().optional(),edition:ft.coerce.number().int().positive().optional(),location:ft.string().optional(),orderBy:ft.enum(["asc","desc"]).optional().default("desc")}),On=class{constructor(e){this.regionalCongressRepository=e}async handle(e,r){try{let{page:t,limit:i,orderBy:n,...s}=rp.parse(e.query),m=(t-1)*i,c=await this.regionalCongressRepository.find({pagination:{offset:m,limit:i},filter:{...s,orderBy:n}});if(!c)throw new p("Congressos regionais n\xE3o encontrados");let d=await this.regionalCongressRepository.count({filter:s});return r.status(200).json({data:c,pagination:{page:t,limit:i,total:d,totalPages:Math.ceil(d/i)}})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as iS}from"@asteasolutions/zod-to-openapi";import re from"zod";iS(re);var op=re.object({id:re.string().uuid("ID inv\xE1lido"),title:re.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio").optional(),edition:re.coerce.number().int().positive("Edi\xE7\xE3o deve ser um n\xFAmero positivo").optional(),startDate:re.coerce.date().optional(),endDate:re.coerce.date().optional(),description:re.string().optional(),location:re.string().optional(),congressLink:re.union([re.url("Link do congresso deve ser uma URL v\xE1lida"),re.literal("")]),noticeUrl:re.union([re.url("URL do edital deve ser uma URL v\xE1lida"),re.literal("")]),scheduleUrl:re.union([re.url("URL do cronograma deve ser uma URL v\xE1lida"),re.literal("")]),programUrl:re.union([re.url("URL da programa\xE7\xE3o deve ser uma URL v\xE1lida"),re.literal("")]),adminReportUrl:re.union([re.url("URL do relat\xF3rio administrativo deve ser uma URL v\xE1lida"),re.literal("")]),proceedingsUrl:re.union([re.url("URL dos anais deve ser uma URL v\xE1lida"),re.literal("")])}).refine(o=>o.startDate&&o.endDate?o.endDate>=o.startDate:!0,{message:"Data de t\xE9rmino deve ser posterior ou igual \xE0 data de in\xEDcio",path:["endDate"]}),Nn=class{constructor(e){this.regionalCongressRepository=e}async handle(e,r){try{let{id:t}=re.object({id:re.string().uuid()}).parse(e.params);if(!await this.regionalCongressRepository.findById(t))throw new p("Congresso regional n\xE3o encontrado");let n=op.parse({id:t,...e.body});return await this.regionalCongressRepository.update(n),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var nS=9,sS=f.object({image:f.any().openapi({type:"string",format:"binary"}),caption:f.string().optional()}),aS=f.object({image:f.any().openapi({type:"string",format:"binary"}).optional(),caption:f.string().optional()}),mS=f.object({id:f.uuid(),name:f.string(),logoUrl:f.string().nullable(),congressId:f.uuid()}),ip=f.object({id:f.uuid(),imageUrl:f.string(),caption:f.string().nullable(),congressId:f.uuid()}),np=f.object({id:f.uuid(),title:f.string(),edition:f.number(),startDate:f.date(),endDate:f.date(),description:f.string().nullable(),location:f.string().nullable(),congressLink:f.string().nullable(),noticeUrl:f.string().nullable(),scheduleUrl:f.string().nullable(),programUrl:f.string().nullable(),adminReportUrl:f.string().nullable(),proceedingsUrl:f.string().nullable(),partners:f.array(mS),galleries:f.array(ip),createdAt:f.date(),updatedAt:f.date()}),wg={method:"post",path:"/regional-congress",tags:["Regional Congresses"],summary:"Create a new regional congress",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:Yc}}}},responses:{201:{description:"Regional congress created successfully",summary:"Regional Congress Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:f.object({errors:f.record(f.string(),f.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:f.object({message:f.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:f.object({message:f.string()})}}}}},Sg={method:"get",path:"/regional-congress",tags:["Regional Congresses"],summary:"List all regional congresses with pagination and filters",request:{query:rp},responses:{200:{description:"List of regional congresses retrieved successfully with pagination",summary:"Regional Congresses Retrieved",content:{"application/json":{schema:f.object({page:f.number(),totalPages:f.number(),offset:f.number(),limit:f.number(),congresses:f.array(np)})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:f.object({errors:f.record(f.string(),f.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:f.object({message:f.string()})}}}}},vg={method:"get",path:"/regional-congress/{id}",tags:["Regional Congresses"],summary:"Find regional congress by ID",request:{params:kn},responses:{200:{description:"Regional congress details retrieved successfully",summary:"Regional Congress Retrieved",content:{"application/json":{schema:np}}},400:{description:"Invalid regional congress ID format",summary:"Validation Error",content:{"application/json":{schema:f.object({errors:f.record(f.string(),f.string())})}}},404:{description:"Regional congress not found with the provided ID",summary:"Regional Congress Not Found",content:{"application/json":{schema:f.object({message:f.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:f.object({message:f.string()})}}}}},Eg={method:"get",path:"/regional-congress/edition/{edition}",tags:["Regional Congresses"],summary:"Find regional congresses by edition",request:{params:ep},responses:{200:{description:"Regional congresses retrieved successfully by edition",summary:"Regional Congresses Retrieved by Edition",content:{"application/json":{schema:f.array(np)}}},400:{description:"Invalid edition parameter provided",summary:"Validation Error",content:{"application/json":{schema:f.object({errors:f.record(f.string(),f.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:f.object({message:f.string()})}}}}},jg={method:"put",path:"/regional-congress/{id}",tags:["Regional Congresses"],summary:"Update regional congress",security:[{bearerAuth:[]}],request:{params:kn,body:{content:{"application/json":{schema:op.omit({id:!0})}}}},responses:{200:{description:"Regional congress updated successfully",summary:"Regional Congress Updated"},400:{description:"Invalid input data or regional congress ID format",summary:"Validation Error",content:{"application/json":{schema:f.object({errors:f.record(f.string(),f.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:f.object({message:f.string()})}}},404:{description:"Regional congress not found with the provided ID",summary:"Regional Congress Not Found",content:{"application/json":{schema:f.object({message:f.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:f.object({message:f.string()})}}}}},xg={method:"delete",path:"/regional-congress/{id}",tags:["Regional Congresses"],summary:"Delete regional congress",security:[{bearerAuth:[]}],request:{params:$c},responses:{200:{description:"Regional congress deleted successfully",summary:"Regional Congress Deleted"},400:{description:"Invalid regional congress ID format",summary:"Validation Error",content:{"application/json":{schema:f.object({errors:f.record(f.string(),f.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:f.object({message:f.string()})}}},404:{description:"Regional congress not found with the provided ID",summary:"Regional Congress Not Found",content:{"application/json":{schema:f.object({message:f.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:f.object({message:f.string()})}}}}},RL={method:"post",path:"/regional-congress/{congressId}/gallery",tags:["Regional Congress Gallery"],summary:"Create a new gallery image for a congress",security:[{bearerAuth:[]}],request:{params:f.object({congressId:f.uuid()}),body:{content:{"multipart/form-data":{schema:sS}}}},responses:{201:{description:"Gallery image created successfully",summary:"Gallery Image Created"},400:{description:"Invalid input data, missing required fields, or invalid image format/size",summary:"Validation Error",content:{"application/json":{schema:f.object({errors:f.record(f.string(),f.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:f.object({message:f.string()})}}},404:{description:"Congress not found with the provided ID",summary:"Congress Not Found",content:{"application/json":{schema:f.object({message:f.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:f.object({message:f.string()})}}}}},IL={method:"get",path:"/regional-congress/{congressId}/gallery",tags:["Regional Congress Gallery"],summary:"List all gallery images for a congress with pagination",request:{params:f.object({congressId:f.uuid()}),query:f.object({page:f.coerce.number().min(1).default(1),limit:f.coerce.number().min(1).default(nS),caption:f.string().optional()})},responses:{200:{description:"Gallery images retrieved successfully with pagination",summary:"Gallery Images Retrieved",content:{"application/json":{schema:f.object({page:f.number(),totalPages:f.number(),offset:f.number(),limit:f.number(),galleries:f.array(ip)})}}},400:{description:"Invalid congress ID format or query parameters",summary:"Validation Error",content:{"application/json":{schema:f.object({errors:f.record(f.string(),f.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:f.object({message:f.string()})}}}}},bL={method:"get",path:"/regional-congress/gallery/{id}",tags:["Regional Congress Gallery"],summary:"Find a gallery image by ID",request:{params:f.object({id:f.uuid()})},responses:{200:{description:"Gallery image retrieved successfully",summary:"Gallery Image Retrieved",content:{"application/json":{schema:ip}}},400:{description:"Invalid gallery image ID format",summary:"Validation Error",content:{"application/json":{schema:f.object({errors:f.record(f.string(),f.string())})}}},404:{description:"Gallery image not found with the provided ID",summary:"Gallery Image Not Found",content:{"application/json":{schema:f.object({message:f.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:f.object({message:f.string()})}}}}},CL={method:"put",path:"/regional-congress/gallery/{id}",tags:["Regional Congress Gallery"],summary:"Update a gallery image with optional image upload",security:[{bearerAuth:[]}],request:{params:f.object({id:f.uuid()}),body:{content:{"multipart/form-data":{schema:aS}}}},responses:{200:{description:"Gallery image updated successfully",summary:"Gallery Image Updated"},400:{description:"Invalid input data, gallery ID format, or invalid image format/size",summary:"Validation Error",content:{"application/json":{schema:f.object({errors:f.record(f.string(),f.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:f.object({message:f.string()})}}},404:{description:"Gallery image not found with the provided ID",summary:"Gallery Image Not Found",content:{"application/json":{schema:f.object({message:f.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:f.object({message:f.string()})}}}}},wL={method:"delete",path:"/regional-congress/gallery/{id}",tags:["Regional Congress Gallery"],summary:"Delete a gallery image",security:[{bearerAuth:[]}],request:{params:f.object({id:f.uuid()})},responses:{200:{description:"Gallery image deleted successfully",summary:"Gallery Image Deleted"},400:{description:"Invalid gallery ID format",summary:"Validation Error",content:{"application/json":{schema:f.object({errors:f.record(f.string(),f.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:f.object({message:f.string()})}}},404:{description:"Gallery image not found with the provided ID",summary:"Gallery Image Not Found",content:{"application/json":{schema:f.object({message:f.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:f.object({message:f.string()})}}}}};import{$Enums as up}from"@prisma/client";import b from"zod";import{extendZodWithOpenApi as cS}from"@asteasolutions/zod-to-openapi";import{Degree as pS,Seniority as dS}from"@prisma/client";import ve from"zod";cS(ve);var sp=ve.object({registrationNumber:ve.string(),mainEtps:ve.string().optional(),formations:ve.string().optional(),degrees:ve.array(ve.enum(pS)),occupations:ve.string(),seniority:ve.enum(dS),institutions:ve.string(),biography:ve.string().optional(),userId:ve.string()}),Gn=class{constructor(e){this.researcherRepository=e}async handle(e,r){try{let{registrationNumber:t,mainEtps:i,formations:n,degrees:s,occupations:m,seniority:c,institutions:d,biography:h,userId:j}=sp.parse(e.body);if(await this.researcherRepository.findByRegistrationNumber(t))throw new se("J\xE1 existe um pesquisador cadastrado com este n\xFAmero de registro.");if(await this.researcherRepository.findByUserId(j))throw new se("Usu\xE1rio j\xE1 possui um perfil de pesquisador.");return await this.researcherRepository.create({registrationNumber:t,mainEtps:i,formations:n,degrees:s,occupations:m,seniority:c,institutions:d,biography:h,userId:j}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as lS}from"@asteasolutions/zod-to-openapi";import ap from"zod";lS(ap);var mp=ap.object({id:ap.uuid()}),Ln=class{constructor(e){this.researcherRepository=e}async handle(e,r){try{let{id:t}=mp.parse({id:e.params.id});if(!await this.researcherRepository.findById(t))throw new p("O pesquisador n\xE3o existe.");return await this.researcherRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as uS}from"@asteasolutions/zod-to-openapi";import cp from"zod";uS(cp);var _n=cp.object({id:cp.uuid()}),Wn=class{constructor(e){this.researcherRepository=e}async handle(e,r){try{let{id:t}=_n.parse({id:e.params.id}),i=await this.researcherRepository.findById(t);if(!i)throw new p("O pesquisador n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as gS}from"@asteasolutions/zod-to-openapi";import pp from"zod";gS(pp);var dp=pp.object({userId:pp.uuid()}),zn=class{constructor(e){this.researcherRepository=e}async handle(e,r){try{let{userId:t}=dp.parse({userId:e.params.userId}),i=await this.researcherRepository.findByUserId(t);if(!i)throw new p("O pesquisador n\xE3o existe para este usu\xE1rio.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as fS}from"@asteasolutions/zod-to-openapi";import{Degree as yS,Seniority as hS}from"@prisma/client";import Ee from"zod";fS(Ee);var lp=Ee.object({id:Ee.uuid(),registrationNumber:Ee.string().optional(),mainEtps:Ee.string().optional(),formations:Ee.string().optional(),degrees:Ee.array(Ee.enum(yS)).optional(),occupations:Ee.string().optional(),seniority:Ee.enum(hS).optional(),institutions:Ee.string().optional(),biography:Ee.string().optional()}),Hn=class{constructor(e){this.researcherRepository=e}async handle(e,r){try{let{id:t,registrationNumber:i,mainEtps:n,formations:s,degrees:m,occupations:c,seniority:d,institutions:h,biography:j}=lp.parse({id:e.params.id,...e.body}),U=await this.researcherRepository.findById(t);if(!U)throw new p("O pesquisador n\xE3o existe.");if(i&&i!==U.registrationNumber){let Q=await this.researcherRepository.findByRegistrationNumber(i);if(Q&&Q.id!==t)throw new se("J\xE1 existe um pesquisador com este n\xFAmero de registro.")}return await this.researcherRepository.update({id:t,registrationNumber:i,mainEtps:n,formations:s,degrees:m,occupations:c,seniority:d,institutions:h,biography:j}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var RS=1,IS=9,gp=b.object({id:b.uuid(),registrationNumber:b.string(),mainEtps:b.string().nullable(),formations:b.string().nullable(),degrees:b.array(b.enum(up.Degree)),occupations:b.string(),seniority:b.enum(up.Seniority),institutions:b.string(),biography:b.string().nullable(),createdAt:b.date(),updatedAt:b.date(),userId:b.uuid(),user:b.object({id:b.uuid(),name:b.string(),emailAddress:b.string(),avatarUrl:b.string().nullable(),orcid:b.string().nullable(),phone:b.string().nullable(),lattesUrl:b.string().nullable(),role:b.enum(up.UserRole)})}),Mg={method:"post",path:"/researcher",tags:["Researchers"],summary:"Create a new researcher profile",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:sp}}}},responses:{201:{description:"Researcher profile created successfully",summary:"Researcher Created",content:{"application/json":{schema:b.object({message:b.string()})}}},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:b.object({errors:b.record(b.string(),b.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:b.object({message:b.string()})}}},409:{description:"Researcher with this registration number already exists or user already has a researcher profile",summary:"Conflict",content:{"application/json":{schema:b.object({message:b.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:b.object({message:b.string()})}}}}},Pg={method:"get",path:"/researcher",tags:["Researchers"],summary:"List all researchers with pagination and filters",request:{query:b.object({page:b.coerce.number().min(1).default(RS).optional(),limit:b.coerce.number().min(1).default(IS).optional(),userId:b.string().optional(),registrationNumber:b.string().optional(),name:b.string().optional(),emailAddress:b.string().optional(),mainEtps:b.string().optional(),formations:b.string().optional(),occupations:b.string().optional(),institutions:b.string().optional(),biography:b.string().optional(),orderBy:b.enum(["asc","desc"]).optional()})},responses:{200:{description:"List of researchers retrieved successfully with pagination",summary:"Researchers Retrieved",content:{"application/json":{schema:b.object({page:b.number(),totalPages:b.number(),offset:b.number(),limit:b.number(),researchers:b.array(gp)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:b.object({message:b.string()})}}}}},Tg={method:"get",path:"/researcher/{id}",tags:["Researchers"],summary:"Find researcher by ID",request:{params:_n},responses:{200:{description:"Researcher details retrieved successfully",summary:"Researcher Retrieved",content:{"application/json":{schema:gp}}},400:{description:"Invalid researcher ID format",summary:"Validation Error",content:{"application/json":{schema:b.object({errors:b.record(b.string(),b.string())})}}},404:{description:"Researcher not found with the provided ID",summary:"Researcher Not Found",content:{"application/json":{schema:b.object({message:b.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:b.object({message:b.string()})}}}}},Ag={method:"get",path:"/researcher/user/{userId}",tags:["Researchers"],summary:"Find researcher by user ID",request:{params:dp},responses:{200:{description:"Researcher details retrieved successfully",summary:"Researcher Retrieved",content:{"application/json":{schema:gp}}},400:{description:"Invalid user ID format",summary:"Validation Error",content:{"application/json":{schema:b.object({errors:b.record(b.string(),b.string())})}}},404:{description:"Researcher not found for this user",summary:"Researcher Not Found",content:{"application/json":{schema:b.object({message:b.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:b.object({message:b.string()})}}}}},Dg={method:"put",path:"/researcher/{id}",tags:["Researchers"],summary:"Update researcher profile",security:[{bearerAuth:[]}],request:{params:_n,body:{content:{"application/json":{schema:lp.omit({id:!0})}}}},responses:{200:{description:"Researcher profile updated successfully",summary:"Researcher Updated",content:{"application/json":{schema:b.object({message:b.string()})}}},400:{description:"Invalid input data or researcher ID format",summary:"Validation Error",content:{"application/json":{schema:b.object({errors:b.record(b.string(),b.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:b.object({message:b.string()})}}},404:{description:"Researcher not found with the provided ID",summary:"Researcher Not Found",content:{"application/json":{schema:b.object({message:b.string()})}}},409:{description:"Researcher with this registration number already exists",summary:"Conflict",content:{"application/json":{schema:b.object({message:b.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:b.object({message:b.string()})}}}}},Fg={method:"delete",path:"/researcher/{id}",tags:["Researchers"],summary:"Delete researcher profile",security:[{bearerAuth:[]}],request:{params:mp},responses:{200:{description:"Researcher profile deleted successfully",summary:"Researcher Deleted"},400:{description:"Invalid researcher ID format",summary:"Validation Error",content:{"application/json":{schema:b.object({errors:b.record(b.string(),b.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:b.object({message:b.string()})}}},404:{description:"Researcher not found with the provided ID",summary:"Researcher Not Found",content:{"application/json":{schema:b.object({message:b.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:b.object({message:b.string()})}}}}};import y from"zod";import{extendZodWithOpenApi as bS}from"@asteasolutions/zod-to-openapi";import fp from"zod";bS(fp);var yp=fp.object({id:fp.uuid()}),Vn=class{constructor(e){this.scientificArticlesRepository=e}async handle(e,r){try{let{id:t}=yp.parse({id:e.params.id});if(!await this.scientificArticlesRepository.findById(t))throw new p("O artigo cient\xEDfico n\xE3o existe.");return await this.scientificArticlesRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as CS}from"@asteasolutions/zod-to-openapi";import hp from"zod";CS(hp);var Rp=hp.object({id:hp.uuid()}),Zn=class{constructor(e){this.scientificArticlesRepository=e}async handle(e,r){try{let{id:t}=Rp.parse({id:e.params.id}),i=await this.scientificArticlesRepository.findById(t);if(!i)throw new p("Artigo cient\xEDfico n\xE3o encontrado.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as wS}from"@asteasolutions/zod-to-openapi";import yt from"zod";var SS=1,vS=6;wS(yt);var Ip=yt.object({page:yt.coerce.number().min(1).default(SS),limit:yt.coerce.number().min(1).default(vS),title:yt.string().optional(),author:yt.string().optional(),journal:yt.string().optional(),orderBy:yt.enum(["asc","desc"]).default("desc")}),Kn=class{constructor(e){this.scientificArticlesRepository=e}async handle(e,r){try{let{limit:t,page:i,...n}=Ip.parse(e.query),s=i*t-t,[m,c]=await Promise.all([this.scientificArticlesRepository.find({pagination:{offset:s,limit:t},filter:n}),this.scientificArticlesRepository.count({filter:n})]),d=Math.max(Math.ceil(c/t),1);return r.status(200).json({page:i,totalPages:d,offset:s,limit:t,scientificArticles:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as ES}from"@asteasolutions/zod-to-openapi";import ae from"zod";ES(ae);var bp=ae.object({id:ae.uuid(),title:ae.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio.").optional(),author:ae.string().min(1,"Autor \xE9 obrigat\xF3rio.").optional(),journal:ae.string().optional(),volume:ae.string().optional(),edition:ae.string().optional(),pageStart:ae.coerce.number().optional(),pageEnd:ae.coerce.number().optional(),startDate:ae.coerce.date().optional(),endDate:ae.coerce.date().optional(),city:ae.string().optional(),state:ae.string().optional(),country:ae.string().optional(),publisher:ae.string().optional(),description:ae.string().optional(),year:ae.coerce.number().optional(),accessUrl:ae.url("URL de acesso deve ser v\xE1lida").optional()}),Jn=class{constructor(e){this.scientificArticlesRepository=e}async handle(e,r){try{let{id:t,title:i,author:n,journal:s,volume:m,edition:c,pageStart:d,pageEnd:h,startDate:j,endDate:U,city:Q,state:te,country:fe,publisher:Be,description:Ur,year:Sa,accessUrl:AR}=bp.parse({id:e.params.id,...e.body});if(!await this.scientificArticlesRepository.findById(t))throw new p("O artigo cient\xEDfico n\xE3o existe.");return await this.scientificArticlesRepository.update({id:t,title:i,author:n,journal:s,volume:m,edition:c,pageStart:d,pageEnd:h,startDate:j,endDate:U,city:Q,state:te,country:fe,publisher:Be,description:Ur,year:Sa,accessUrl:AR}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Bg={method:"post",path:"/scientific-articles",tags:["Scientific Articles"],summary:"Create scientific article",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:y.object({title:y.string().min(1).openapi({description:"T\xEDtulo do artigo"}),author:y.string().min(1).openapi({description:"Autor do artigo"}),journal:y.string().optional().openapi({description:"Nome do peri\xF3dico/revista"}),volume:y.string().optional().openapi({description:"Volume"}),edition:y.string().optional().openapi({description:"N\xFAmero/Edi\xE7\xE3o"}),pageStart:y.number().optional().openapi({description:"P\xE1gina inicial"}),pageEnd:y.number().optional().openapi({description:"P\xE1gina final"}),startDate:y.string().openapi({description:"Data de in\xEDcio (ISO 8601)",example:"2024-01-01T10:00:00Z"}),endDate:y.string().openapi({description:"Data de t\xE9rmino (ISO 8601)",example:"2024-12-31T10:00:00Z"}),city:y.string().optional().openapi({description:"Cidade"}),state:y.string().optional().openapi({description:"Estado"}),country:y.string().optional().openapi({description:"Pa\xEDs"}),publisher:y.string().optional().openapi({description:"Editora/Institui\xE7\xE3o"}),description:y.string().optional().openapi({description:"Descri\xE7\xE3o do artigo"}),year:y.number().optional().openapi({description:"Ano"}),accessUrl:y.string().url().optional().openapi({description:"URL de acesso"})})}}}},responses:{201:{description:"Scientific article created successfully",summary:"Article Created"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:y.object({errors:y.record(y.string(),y.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:y.object({message:y.string()})}}}}},qg={method:"get",path:"/scientific-articles",tags:["Scientific Articles"],summary:"List scientific articles",security:[{bearerAuth:[]}],request:{query:Ip},responses:{200:{description:"Paginated list of scientific articles retrieved successfully",summary:"Articles Retrieved",content:{"application/json":{schema:y.object({page:y.number(),totalPages:y.number(),offset:y.number(),limit:y.number(),scientificArticles:y.array(y.object({id:y.string(),title:y.string(),author:y.string(),journal:y.string().nullable(),volume:y.string().nullable(),edition:y.string().nullable(),pageStart:y.number().nullable(),pageEnd:y.number().nullable(),startDate:y.date(),endDate:y.date(),city:y.string().nullable(),state:y.string().nullable(),country:y.string().nullable(),publisher:y.string().nullable(),description:y.string().nullable(),year:y.number().nullable(),accessUrl:y.string().nullable(),createdAt:y.date(),updatedAt:y.date()}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:y.object({errors:y.record(y.string(),y.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:y.object({message:y.string()})}}}}},Ug={method:"get",path:"/scientific-articles/{id}",tags:["Scientific Articles"],summary:"Find scientific article by ID",security:[{bearerAuth:[]}],request:{params:Rp},responses:{200:{description:"Scientific article details retrieved successfully",summary:"Article Retrieved",content:{"application/json":{schema:y.object({id:y.string(),title:y.string(),author:y.string(),journal:y.string().nullable(),volume:y.string().nullable(),edition:y.string().nullable(),pageStart:y.number().nullable(),pageEnd:y.number().nullable(),startDate:y.date(),endDate:y.date(),city:y.string().nullable(),state:y.string().nullable(),country:y.string().nullable(),publisher:y.string().nullable(),description:y.string().nullable(),year:y.number().nullable(),accessUrl:y.string().nullable(),createdAt:y.date(),updatedAt:y.date()}).nullable()}}},400:{description:"Invalid article ID format",summary:"Validation Error",content:{"application/json":{schema:y.object({errors:y.record(y.string(),y.string())})}}},404:{description:"Scientific article not found with the provided ID",summary:"Article Not Found",content:{"application/json":{schema:y.object({message:y.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:y.object({message:y.string()})}}}}},kg={method:"put",path:"/scientific-articles/{id}",tags:["Scientific Articles"],summary:"Update scientific article",security:[{bearerAuth:[]}],request:{params:bp.pick({id:!0}),body:{content:{"application/json":{schema:y.object({title:y.string().min(1).optional().openapi({description:"T\xEDtulo do artigo"}),author:y.string().min(1).optional().openapi({description:"Autor do artigo"}),journal:y.string().optional().openapi({description:"Nome do peri\xF3dico/revista"}),volume:y.string().optional().openapi({description:"Volume"}),edition:y.string().optional().openapi({description:"N\xFAmero/Edi\xE7\xE3o"}),pageStart:y.number().optional().openapi({description:"P\xE1gina inicial"}),pageEnd:y.number().optional().openapi({description:"P\xE1gina final"}),startDate:y.string().optional().openapi({description:"Data de in\xEDcio (ISO 8601)",example:"2024-01-01T10:00:00Z"}),endDate:y.string().optional().openapi({description:"Data de t\xE9rmino (ISO 8601)",example:"2024-12-31T10:00:00Z"}),city:y.string().optional().openapi({description:"Cidade"}),state:y.string().optional().openapi({description:"Estado"}),country:y.string().optional().openapi({description:"Pa\xEDs"}),publisher:y.string().optional().openapi({description:"Editora/Institui\xE7\xE3o"}),description:y.string().optional().openapi({description:"Descri\xE7\xE3o do artigo"}),year:y.number().optional().openapi({description:"Ano"}),accessUrl:y.string().url().optional().openapi({description:"URL de acesso"})})}}}},responses:{200:{description:"Scientific article updated successfully",summary:"Article Updated"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:y.object({errors:y.record(y.string(),y.string())})}}},404:{description:"Scientific article not found with the provided ID",summary:"Article Not Found",content:{"application/json":{schema:y.object({message:y.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:y.object({message:y.string()})}}}}},Og={method:"delete",path:"/scientific-articles/{id}",tags:["Scientific Articles"],summary:"Delete scientific article",security:[{bearerAuth:[]}],request:{params:yp},responses:{200:{description:"Scientific article deleted successfully",summary:"Article Deleted"},400:{description:"Invalid article ID format",summary:"Validation Error",content:{"application/json":{schema:y.object({errors:y.record(y.string(),y.string())})}}},404:{description:"Scientific article not found with the provided ID",summary:"Article Not Found",content:{"application/json":{schema:y.object({message:y.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:y.object({message:y.string()})}}}}};import E from"zod";import{extendZodWithOpenApi as jS}from"@asteasolutions/zod-to-openapi";import Cp from"zod";jS(Cp);var wp=Cp.object({id:Cp.uuid()}),Yn=class{constructor(e,r){this.scientificJournalRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=wp.parse({id:e.params.id}),i=await this.scientificJournalRepository.findById(t);if(!i)throw new p("A revista cient\xEDfica n\xE3o existe.");return i.logoUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.logoUrl}),await this.scientificJournalRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as xS}from"@asteasolutions/zod-to-openapi";import Sp from"zod";xS(Sp);var vp=Sp.object({id:Sp.uuid()}),Xn=class{constructor(e){this.scientificJournalRepository=e}async handle(e,r){try{let{id:t}=vp.parse({id:e.params.id}),i=await this.scientificJournalRepository.findById(t);if(!i)throw new p("Revista cient\xEDfica n\xE3o encontrada.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as MS}from"@asteasolutions/zod-to-openapi";import Ne from"zod";var PS=1,TS=6;MS(Ne);var Ep=Ne.object({page:Ne.coerce.number().min(1).default(PS),limit:Ne.coerce.number().min(1).default(TS),name:Ne.string().optional(),description:Ne.string().optional(),issn:Ne.string().optional(),directors:Ne.string().optional(),editorialBoard:Ne.string().optional(),orderBy:Ne.enum(["asc","desc"]).default("desc")}),$n=class{constructor(e){this.scientificJournalRepository=e}async handle(e,r){try{let{limit:t,page:i,...n}=Ep.parse(e.query),s=i*t-t,[m,c]=await Promise.all([this.scientificJournalRepository.find({pagination:{offset:s,limit:t},filter:n}),this.scientificJournalRepository.count({filter:n})]),d=Math.max(Math.ceil(c/t),1);return r.status(200).json({page:i,totalPages:d,offset:s,limit:t,scientificJournals:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as AS}from"@asteasolutions/zod-to-openapi";import Ge from"zod";var Gg=5,Ng=1024,DS=Ng*Ng,FS=Gg*DS;AS(Ge);var jp=Ge.object({id:Ge.uuid(),name:Ge.string().min(1,"Nome \xE9 obrigat\xF3rio.").optional(),issn:Ge.string().min(1,"ISSN \xE9 obrigat\xF3rio.").optional(),description:Ge.string().min(1,"Descri\xE7\xE3o \xE9 obrigat\xF3ria.").optional(),journalUrl:Ge.url("URL da revista deve ser v\xE1lida.").optional(),directors:Ge.string().optional(),editorialBoard:Ge.string().optional(),logo:Ge.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=FS,`O logo deve ter no m\xE1ximo ${Gg}MB.`).optional()}),Qn=class{constructor(e,r){this.scientificJournalRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,logo:i,name:n,issn:s,description:m,journalUrl:c,directors:d,editorialBoard:h}=jp.parse({id:e.params.id,...e.body,logo:e.file}),j=await this.scientificJournalRepository.findById(t);if(!j)throw new p("A revista cient\xEDfica n\xE3o existe.");let U=j.logoUrl;return i&&(U=await this.firebaseStorageService.uploadFile({file:i,id:t,folder:M.SCIENTIFIC_JOURNAL})),await this.scientificJournalRepository.update({id:t,name:n,issn:s,description:m,journalUrl:c,directors:d,editorialBoard:h,logoUrl:U}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Lg={method:"post",path:"/scientific-journals",tags:["Scientific Journals"],summary:"Create scientific journal",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:E.object({name:E.string().min(1).openapi({description:"Nome da revista cient\xEDfica"}),issn:E.string().min(1).openapi({description:"ISSN da revista"}),description:E.string().min(1).openapi({description:"Descri\xE7\xE3o da revista"}),journalUrl:E.string().url().openapi({description:"URL da revista"}),directors:E.string().optional().openapi({description:"Diretores da revista"}),editorialBoard:E.string().optional().openapi({description:"Conselho editorial"}),logo:E.string().optional().openapi({description:"Logo da revista (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{201:{description:"Scientific journal created successfully",summary:"Journal Created"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:E.object({errors:E.record(E.string(),E.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:E.object({message:E.string()})}}}}},Wg={method:"get",path:"/scientific-journals",tags:["Scientific Journals"],summary:"List scientific journals",security:[{bearerAuth:[]}],request:{query:Ep},responses:{200:{description:"Paginated list of scientific journals retrieved successfully",summary:"Journals Retrieved",content:{"application/json":{schema:E.object({page:E.number(),totalPages:E.number(),offset:E.number(),limit:E.number(),scientificJournals:E.array(E.object({id:E.string(),name:E.string(),issn:E.string(),description:E.string(),logoUrl:E.string().nullable(),journalUrl:E.string(),directors:E.string().nullable(),editorialBoard:E.string().nullable(),createdAt:E.date(),updatedAt:E.date()}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:E.object({errors:E.record(E.string(),E.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:E.object({message:E.string()})}}}}},_g={method:"get",path:"/scientific-journals/{id}",tags:["Scientific Journals"],summary:"Find scientific journal by ID",security:[{bearerAuth:[]}],request:{params:vp},responses:{200:{description:"Scientific journal details retrieved successfully",summary:"Journal Retrieved",content:{"application/json":{schema:E.object({id:E.string(),name:E.string(),issn:E.string(),description:E.string(),logoUrl:E.string().nullable(),journalUrl:E.string(),directors:E.string().nullable(),editorialBoard:E.string().nullable(),createdAt:E.date(),updatedAt:E.date()}).nullable()}}},400:{description:"Invalid journal ID format",summary:"Validation Error",content:{"application/json":{schema:E.object({errors:E.record(E.string(),E.string())})}}},404:{description:"Scientific journal not found with the provided ID",summary:"Journal Not Found",content:{"application/json":{schema:E.object({message:E.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:E.object({message:E.string()})}}}}},zg={method:"put",path:"/scientific-journals/{id}",tags:["Scientific Journals"],summary:"Update scientific journal",security:[{bearerAuth:[]}],request:{params:jp.pick({id:!0}),body:{content:{"multipart/form-data":{schema:E.object({name:E.string().min(1).optional().openapi({description:"Nome da revista cient\xEDfica"}),issn:E.string().min(1).optional().openapi({description:"ISSN da revista"}),description:E.string().min(1).optional().openapi({description:"Descri\xE7\xE3o da revista"}),journalUrl:E.string().url().optional().openapi({description:"URL da revista"}),directors:E.string().optional().openapi({description:"Diretores da revista"}),editorialBoard:E.string().optional().openapi({description:"Conselho editorial"}),logo:E.string().optional().openapi({description:"Logo da revista (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{200:{description:"Scientific journal updated successfully",summary:"Journal Updated"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:E.object({errors:E.record(E.string(),E.string())})}}},404:{description:"Scientific journal not found with the provided ID",summary:"Journal Not Found",content:{"application/json":{schema:E.object({message:E.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:E.object({message:E.string()})}}}}},Hg={method:"delete",path:"/scientific-journals/{id}",tags:["Scientific Journals"],summary:"Delete scientific journal",security:[{bearerAuth:[]}],request:{params:wp},responses:{200:{description:"Scientific journal deleted successfully",summary:"Journal Deleted"},400:{description:"Invalid journal ID format",summary:"Validation Error",content:{"application/json":{schema:E.object({errors:E.record(E.string(),E.string())})}}},404:{description:"Scientific journal not found with the provided ID",summary:"Journal Not Found",content:{"application/json":{schema:E.object({message:E.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:E.object({message:E.string()})}}}}};import{$Enums as OS}from"@prisma/client";import G from"zod";import{extendZodWithOpenApi as BS}from"@asteasolutions/zod-to-openapi";import pr from"zod";BS(pr);var xp=pr.object({role:pr.string().min(1),description:pr.string().optional(),userId:pr.uuid(),order:pr.number().optional()}),es=class{constructor(e){this.sdhcTeamMemberRepository=e}async handle(e,r){try{let{role:t,description:i,userId:n,order:s}=xp.parse(e.body);return await this.sdhcTeamMemberRepository.create({role:t,description:i,userId:n,order:s??0}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as qS}from"@asteasolutions/zod-to-openapi";import Mp from"zod";qS(Mp);var Pp=Mp.object({id:Mp.uuid()}),ts=class{constructor(e){this.sdhcTeamMemberRepository=e}async handle(e,r){try{let{id:t}=Pp.parse({id:e.params.id});if(!await this.sdhcTeamMemberRepository.findById(t))throw new p("O membro da equipe SDHC n\xE3o existe.");return await this.sdhcTeamMemberRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as US}from"@asteasolutions/zod-to-openapi";import Tp from"zod";US(Tp);var os=Tp.object({id:Tp.uuid()}),rs=class{constructor(e){this.sdhcTeamMemberRepository=e}async handle(e,r){try{let{id:t}=os.parse({id:e.params.id}),i=await this.sdhcTeamMemberRepository.findById(t);if(!i)throw new p("O membro da equipe SDHC n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as kS}from"@asteasolutions/zod-to-openapi";import Mt from"zod";kS(Mt);var Ap=Mt.object({id:Mt.uuid(),role:Mt.string().min(1).optional(),description:Mt.string().optional(),userId:Mt.uuid().optional(),order:Mt.number().optional()}),is=class{constructor(e){this.sdhcTeamMemberRepository=e}async handle(e,r){try{let{id:t,role:i,description:n,userId:s,order:m}=Ap.parse({id:e.params.id,...e.body});if(!await this.sdhcTeamMemberRepository.findById(t))throw new p("O membro da equipe SDHC n\xE3o existe.");return await this.sdhcTeamMemberRepository.update({id:t,role:i,description:n,userId:s,order:m}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var NS=G.object({id:G.uuid(),name:G.string(),emailAddress:G.string(),avatarUrl:G.string().nullable(),orcid:G.string().nullable(),phone:G.string().nullable(),lattesUrl:G.string().nullable(),role:G.enum(OS.UserRole)}),Vg=G.object({id:G.uuid(),role:G.string(),description:G.string().nullable(),order:G.number(),createdAt:G.date(),updatedAt:G.date(),userId:G.uuid(),user:NS}),Zg={method:"post",path:"/sdhc-team-member",tags:["SDHC Team Members"],summary:"Create a new SDHC Team Member",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:xp}}}},responses:{201:{description:"SDHC Team Member created successfully",summary:"SDHC Team Member Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:G.object({errors:G.record(G.string(),G.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:G.object({message:G.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:G.object({message:G.string()})}}}}},Kg={method:"get",path:"/sdhc-team-member",tags:["SDHC Team Members"],summary:"List all SDHC Team Members with filters",request:{query:G.object({role:G.string().optional(),orderBy:G.enum(["asc","desc"]).optional()})},responses:{200:{description:"List of SDHC Team Members retrieved successfully",summary:"SDHC Team Members Retrieved",content:{"application/json":{schema:G.object({members:G.array(Vg)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:G.object({message:G.string()})}}}}},Jg={method:"get",path:"/sdhc-team-member/{id}",tags:["SDHC Team Members"],summary:"Find SDHC Team Member by ID",request:{params:os},responses:{200:{description:"SDHC Team Member details retrieved successfully",summary:"SDHC Team Member Retrieved",content:{"application/json":{schema:Vg}}},400:{description:"Invalid SDHC Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:G.object({errors:G.record(G.string(),G.string())})}}},404:{description:"SDHC Team Member not found with the provided ID",summary:"SDHC Team Member Not Found",content:{"application/json":{schema:G.object({message:G.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:G.object({message:G.string()})}}}}},Yg={method:"put",path:"/sdhc-team-member/{id}",tags:["SDHC Team Members"],summary:"Update SDHC Team Member",security:[{bearerAuth:[]}],request:{params:os,body:{content:{"application/json":{schema:Ap.omit({id:!0})}}}},responses:{200:{description:"SDHC Team Member updated successfully",summary:"SDHC Team Member Updated"},400:{description:"Invalid input data or SDHC Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:G.object({errors:G.record(G.string(),G.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:G.object({message:G.string()})}}},404:{description:"SDHC Team Member not found with the provided ID",summary:"SDHC Team Member Not Found",content:{"application/json":{schema:G.object({message:G.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:G.object({message:G.string()})}}}}},Xg={method:"delete",path:"/sdhc-team-member/{id}",tags:["SDHC Team Members"],summary:"Delete SDHC Team Member",security:[{bearerAuth:[]}],request:{params:Pp},responses:{200:{description:"SDHC Team Member deleted successfully",summary:"SDHC Team Member Deleted"},400:{description:"Invalid SDHC Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:G.object({errors:G.record(G.string(),G.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:G.object({message:G.string()})}}},404:{description:"SDHC Team Member not found with the provided ID",summary:"SDHC Team Member Not Found",content:{"application/json":{schema:G.object({message:G.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:G.object({message:G.string()})}}}}};import{$Enums as ef}from"@prisma/client";import V from"zod";import{extendZodWithOpenApi as GS}from"@asteasolutions/zod-to-openapi";import Dp from"zod";GS(Dp);var Fp=Dp.object({id:Dp.string()}),ns=class{constructor(e){this.userRepository=e}async handle(e,r){try{let{id:t}=Fp.parse({id:e.params.id}),i=await this.userRepository.findById(t);if(!i)throw new p("O usu\xE1rio n\xE3o existe.");let n=e.user.id;if(i.id!==n)throw new be("Voc\xEA n\xE3o tem permiss\xE3o para deletar o usu\xE1rio");return await this.userRepository.deleteById(i.id),r.sendStatus(204)}catch(t){if(console.log(t),t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as LS}from"@asteasolutions/zod-to-openapi";import{z as Bp}from"zod";LS(Bp);var qp=Bp.object({id:Bp.string().min(1,"id do usu\xE1rio n\xE3o fornecido.")}),ss=class{constructor(e){this.userRepository=e}async handle(e,r){try{let{id:t}=qp.parse(e.params),i=await this.userRepository.findById(t);if(!i)throw new p("Usu\xE1rio n\xE3o encontrado");r.status(200).json(i)}catch(t){if(console.log(t),t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as WS}from"@asteasolutions/zod-to-openapi";import Pt from"zod";var Qg=2,$g=1024,_S=$g*$g,zS=Qg*_S,HS=/^\d{4}-\d{4}-\d{4}-\d{4}$/,VS=/^\(?\d{2}\)?[\s-]?\d{4,5}-?\d{4}$/;WS(Pt);var Up=Pt.object({name:Pt.string().optional(),lattesUrl:Pt.string().optional(),orcid:Pt.string().optional().transform(o=>o===void 0?void 0:o.trim()).refine(o=>o===void 0||o===""||HS.test(o),{message:"ORCID inv\xE1lido. Deve estar no formato 0000-0000-0000-0000"}),phone:Pt.string().optional().refine(o=>o===void 0||o===""||VS.test(o),{message:"Telefone inv\xE1lido. Deve estar no formato (99) 99999-9999"}),avatarImage:Pt.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=zS,`A imagem deve ter no m\xE1ximo ${Qg}MB.`).optional()}),as=class{constructor(e,r){this.userRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{avatarImage:t,...i}=Up.parse({...e.body,avatarImage:e.file}),n=e.user.id,s=await this.userRepository.findById(n);if(!s)throw new le("O usu\xE1rio n\xE3o existe");let m=s.avatarUrl;return t&&(s.avatarUrl?m=await this.firebaseStorageService.updateFile({file:t,id:n,folder:M.USER,fileUrl:s.avatarUrl}):m=await this.firebaseStorageService.uploadFile({file:t,id:n,folder:M.USER})),await this.userRepository.update({...i,id:n,avatarUrl:m||void 0}),r.sendStatus(204)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var tf={method:"get",path:"/users/{id}",tags:["Users"],summary:"Find user by ID",request:{params:qp},responses:{200:{description:"User details retrieved successfully",summary:"User Retrieved",content:{"application/json":{schema:V.object({id:V.string(),name:V.string(),createdAt:V.date(),updatedAt:V.date(),role:V.enum(ef.UserRole),lattesUrl:V.string().nullable(),orcid:V.string().nullable(),phone:V.string().nullable(),avatarUrl:V.url().nullable(),emailAddress:V.email()})}}},400:{description:"Invalid user ID format",summary:"Validation Error",content:{"application/json":{schema:V.object({errors:V.record(V.string(),V.string())})}}},404:{description:"User not found with the provided ID",summary:"User Not Found",content:{"application/json":{schema:V.object({message:V.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:V.object({message:V.string()})}}}}},rf={method:"put",path:"/users",tags:["Users"],summary:"Update authenticated user",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:Up}}}},responses:{200:{description:"User profile updated successfully",summary:"User Updated",content:{"application/json":{schema:V.object({message:V.string()})}}},400:{description:"Invalid input data or file format",summary:"Validation Error",content:{"application/json":{schema:V.object({errors:V.record(V.string(),V.string())})}}},401:{description:"User not authenticated or unauthorized",summary:"Authentication Required",content:{"application/json":{schema:V.object({message:V.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:V.object({message:V.string()})}}}}},of={method:"delete",path:"/users",tags:["Users"],summary:"Delete authenticated user",security:[{bearerAuth:[]}],request:{params:Fp},responses:{200:{description:"User account deleted successfully",summary:"User Deleted",content:{"application/json":{schema:V.object({message:V.string()})}}},400:{description:"Invalid request parameters",summary:"Validation Error",content:{"application/json":{schema:V.object({errors:V.record(V.string(),V.string())})}}},401:{description:"User not authenticated or unauthorized",summary:"Authentication Required",content:{"application/json":{schema:V.object({message:V.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:V.object({message:V.string()})}}}}},nf={method:"get",path:"/users",tags:["Users"],summary:"List users",responses:{200:{description:"Complete list of users retrieved successfully",summary:"Users Retrieved",content:{"application/json":{schema:V.array(V.object({id:V.string(),name:V.string(),createdAt:V.date(),updatedAt:V.date(),role:V.enum(ef.UserRole),lattesUrl:V.url().nullable(),orcid:V.string().nullable(),phone:V.string().nullable(),avatarUrl:V.string().nullable(),emailAddress:V.email()}))}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:V.object({message:V.string()})}}}}};import w from"zod";import{extendZodWithOpenApi as ZS}from"@asteasolutions/zod-to-openapi";import kp from"zod";ZS(kp);var Op=kp.object({id:kp.uuid()}),ms=class{constructor(e,r){this.webinarRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=Op.parse({id:e.params.id}),i=await this.webinarRepository.findById(t);if(!i)throw new p("O webinar n\xE3o existe.");return i.thumbnailUrl&&this.firebaseStorageService.deleteFile({fileUrl:i.thumbnailUrl}),await this.webinarRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as KS}from"@asteasolutions/zod-to-openapi";import Np from"zod";KS(Np);var Gp=Np.object({id:Np.uuid()}),cs=class{constructor(e){this.webinarRepository=e}async handle(e,r){try{let{id:t}=Gp.parse({id:e.params.id}),i=await this.webinarRepository.findById(t);if(!i)throw new p("Webinar n\xE3o encontrado.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as JS}from"@asteasolutions/zod-to-openapi";import Tt from"zod";var YS=1,XS=6;JS(Tt);var Lp=Tt.object({page:Tt.coerce.number().min(1).default(YS),limit:Tt.coerce.number().min(1).default(XS),title:Tt.string().optional(),description:Tt.string().optional(),orderBy:Tt.enum(["asc","desc"]).default("desc")}),ps=class{constructor(e){this.webinarRepository=e}async handle(e,r){try{let{limit:t,page:i,...n}=Lp.parse(e.query),s=i*t-t,[m,c]=await Promise.all([this.webinarRepository.find({pagination:{offset:s,limit:t},filter:n}),this.webinarRepository.count({filter:n})]),d=Math.max(Math.ceil(c/t),1);return r.status(200).json({page:i,totalPages:d,offset:s,limit:t,webinars:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as $S}from"@asteasolutions/zod-to-openapi";import Te from"zod";var af=5,sf=1024,QS=sf*sf,ev=af*QS;$S(Te);var Wp=Te.object({id:Te.uuid(),title:Te.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio.").optional(),description:Te.string().optional(),scheduledAt:Te.coerce.date().optional(),webinarLink:Te.url("URL do webinar deve ser v\xE1lida").optional(),guestIds:Te.transform(o=>typeof o=="string"?o.split(","):o).pipe(Te.array(Te.uuid())).optional(),thumbnail:Te.any().refine(o=>o==null?!0:typeof o!="object"||typeof o.size!="number"?!1:o.size<=ev,`A thumbnail deve ter no m\xE1ximo ${af}MB.`).optional()}),ds=class{constructor(e,r){this.webinarRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,thumbnail:i,title:n,description:s,scheduledAt:m,webinarLink:c,guestIds:d}=Wp.parse({id:e.params.id,...e.body,thumbnail:e.file}),h=await this.webinarRepository.findById(t);if(!h)throw new p("O webinar n\xE3o existe.");let j=h.thumbnailUrl;if(i&&(j=await this.firebaseStorageService.uploadFile({file:i,id:t,folder:M.WEBINAR})),!j)throw new a("Thumbnail URL \xE9 obrigat\xF3rio");return await this.webinarRepository.update({id:t,title:n,description:s,scheduledAt:m,webinarLink:c,thumbnailUrl:j,guestIds:d}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var mf={method:"post",path:"/webinars",tags:["Webinars"],summary:"Create webinar",security:[{bearerAuth:[]}],request:{body:{content:{"multipart/form-data":{schema:w.object({title:w.string().min(1).openapi({description:"T\xEDtulo do webinar"}),description:w.string().optional().openapi({description:"Descri\xE7\xE3o do webinar"}),scheduledAt:w.string().openapi({description:"Data e hora agendada (ISO 8601)",example:"2024-01-01T10:00:00Z"}),webinarLink:w.string().url().optional().openapi({description:"Link do webinar"}),guestIds:w.string().openapi({description:"IDs dos convidados separados por v\xEDrgula",example:"uuid1,uuid2,uuid3"}),thumbnail:w.string().optional().openapi({description:"Imagem de thumbnail (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{201:{description:"Webinar created successfully",summary:"Webinar Created"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:w.object({errors:w.record(w.string(),w.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:w.object({message:w.string()})}}}}},cf={method:"get",path:"/webinars",tags:["Webinars"],summary:"List webinars",security:[{bearerAuth:[]}],request:{query:Lp},responses:{200:{description:"Paginated list of webinars with guest information retrieved successfully",summary:"Webinars Retrieved",content:{"application/json":{schema:w.object({page:w.number(),totalPages:w.number(),offset:w.number(),limit:w.number(),webinars:w.array(w.object({id:w.string(),title:w.string(),description:w.string().nullable(),scheduledAt:w.date(),webinarLink:w.string().nullable(),thumbnailUrl:w.string().nullable(),createdAt:w.date(),updatedAt:w.date(),guests:w.array(w.object({id:w.uuid(),name:w.string(),emailAddress:w.email(),avatarUrl:w.string().nullable(),createdAt:w.date(),updatedAt:w.date()}))}))})}}},400:{description:"Invalid query parameters provided",summary:"Validation Error",content:{"application/json":{schema:w.object({errors:w.record(w.string(),w.string())})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:w.object({message:w.string()})}}}}},pf={method:"get",path:"/webinars/{id}",tags:["Webinars"],summary:"Find webinar by ID",security:[{bearerAuth:[]}],request:{params:Gp},responses:{200:{description:"Webinar details retrieved successfully",summary:"Webinar Retrieved",content:{"application/json":{schema:w.object({id:w.string(),title:w.string(),description:w.string().nullable(),scheduledAt:w.date(),webinarLink:w.string().nullable(),thumbnailUrl:w.string().nullable(),createdAt:w.date(),updatedAt:w.date(),guests:w.array(w.object({id:w.uuid(),name:w.string(),emailAddress:w.email(),avatarUrl:w.string().nullable(),createdAt:w.date(),updatedAt:w.date()}))}).nullable()}}},400:{description:"Invalid webinar ID format",summary:"Validation Error",content:{"application/json":{schema:w.object({errors:w.record(w.string(),w.string())})}}},404:{description:"Webinar not found with the provided ID",summary:"Webinar Not Found",content:{"application/json":{schema:w.object({message:w.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:w.object({message:w.string()})}}}}},df={method:"put",path:"/webinars/{id}",tags:["Webinars"],summary:"Update webinar",security:[{bearerAuth:[]}],request:{params:Wp.pick({id:!0}),body:{content:{"multipart/form-data":{schema:w.object({title:w.string().min(1).optional().openapi({description:"T\xEDtulo do webinar"}),description:w.string().optional().openapi({description:"Descri\xE7\xE3o do webinar"}),scheduledAt:w.string().optional().openapi({description:"Data e hora agendada (ISO 8601)",example:"2024-01-01T10:00:00Z"}),webinarLink:w.string().url().optional().openapi({description:"Link do webinar"}),guestIds:w.string().optional().openapi({description:"IDs dos convidados separados por v\xEDrgula",example:"uuid1,uuid2,uuid3"}),thumbnail:w.string().optional().openapi({description:"Imagem de thumbnail (m\xE1ximo 5MB)",type:"string",format:"binary"})})}}}},responses:{200:{description:"Webinar updated successfully",summary:"Webinar Updated"},400:{description:"Invalid input data",summary:"Validation Error",content:{"application/json":{schema:w.object({errors:w.record(w.string(),w.string())})}}},404:{description:"Webinar not found with the provided ID",summary:"Webinar Not Found",content:{"application/json":{schema:w.object({message:w.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:w.object({message:w.string()})}}}}},lf={method:"delete",path:"/webinars/{id}",tags:["Webinars"],summary:"Delete webinar",security:[{bearerAuth:[]}],request:{params:Op},responses:{200:{description:"Webinar deleted successfully",summary:"Webinar Deleted"},400:{description:"Invalid webinar ID format",summary:"Validation Error",content:{"application/json":{schema:w.object({errors:w.record(w.string(),w.string())})}}},404:{description:"Webinar not found with the provided ID",summary:"Webinar Not Found",content:{"application/json":{schema:w.object({message:w.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:w.object({message:w.string()})}}}}};import{$Enums as nv}from"@prisma/client";import z from"zod";import{extendZodWithOpenApi as tv}from"@asteasolutions/zod-to-openapi";import Jr from"zod";tv(Jr);var _p=Jr.object({role:Jr.string().min(1),description:Jr.string().optional(),userId:Jr.uuid()}),ls=class{constructor(e){this.workGroupTeamMemberRepository=e}async handle(e,r){try{let{role:t,description:i,userId:n}=_p.parse(e.body);return await this.workGroupTeamMemberRepository.create({role:t,description:i,userId:n}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as rv}from"@asteasolutions/zod-to-openapi";import zp from"zod";rv(zp);var Hp=zp.object({id:zp.uuid()}),us=class{constructor(e){this.workGroupTeamMemberRepository=e}async handle(e,r){try{let{id:t}=Hp.parse({id:e.params.id});if(!await this.workGroupTeamMemberRepository.findById(t))throw new p("O membro do grupo de trabalho n\xE3o existe.");return await this.workGroupTeamMemberRepository.deleteById(t),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as ov}from"@asteasolutions/zod-to-openapi";import Vp from"zod";ov(Vp);var fs=Vp.object({id:Vp.uuid()}),gs=class{constructor(e){this.workGroupTeamMemberRepository=e}async handle(e,r){try{let{id:t}=fs.parse({id:e.params.id}),i=await this.workGroupTeamMemberRepository.findById(t);if(!i)throw new p("O membro do grupo de trabalho n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as iv}from"@asteasolutions/zod-to-openapi";import dr from"zod";iv(dr);var Zp=dr.object({id:dr.uuid(),role:dr.string().min(1).optional(),description:dr.string().optional(),userId:dr.uuid().optional()}),ys=class{constructor(e){this.workGroupTeamMemberRepository=e}async handle(e,r){try{let{id:t,role:i,description:n,userId:s}=Zp.parse({id:e.params.id,...e.body});if(!await this.workGroupTeamMemberRepository.findById(t))throw new p("O membro do grupo de trabalho n\xE3o existe.");return await this.workGroupTeamMemberRepository.update({id:t,role:i,description:n,userId:s}),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var sv=z.object({id:z.uuid(),name:z.string(),emailAddress:z.string(),avatarUrl:z.string().nullable(),orcid:z.string().nullable(),phone:z.string().nullable(),lattesUrl:z.string().nullable(),role:z.enum(nv.UserRole)}),uf=z.object({id:z.uuid(),role:z.string(),description:z.string().nullable(),createdAt:z.date(),updatedAt:z.date(),userId:z.uuid(),user:sv}),gf={method:"post",path:"/work-group-team-member",tags:["Work Group Team Members"],summary:"Create a new Work Group Team Member",security:[{bearerAuth:[]}],request:{body:{content:{"application/json":{schema:_p}}}},responses:{201:{description:"Work Group Team Member created successfully",summary:"Work Group Team Member Created"},400:{description:"Invalid input data or missing required fields",summary:"Validation Error",content:{"application/json":{schema:z.object({errors:z.record(z.string(),z.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:z.object({message:z.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:z.object({message:z.string()})}}}}},ff={method:"get",path:"/work-group-team-member",tags:["Work Group Team Members"],summary:"List all Work Group Team Members with filters",request:{query:z.object({role:z.string().optional(),orderBy:z.enum(["asc","desc"]).optional()})},responses:{200:{description:"List of Work Group Team Members retrieved successfully",summary:"Work Group Team Members Retrieved",content:{"application/json":{schema:z.object({members:z.array(uf)})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:z.object({message:z.string()})}}}}},yf={method:"get",path:"/work-group-team-member/{id}",tags:["Work Group Team Members"],summary:"Find Work Group Team Member by ID",request:{params:fs},responses:{200:{description:"Work Group Team Member details retrieved successfully",summary:"Work Group Team Member Retrieved",content:{"application/json":{schema:uf}}},400:{description:"Invalid Work Group Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:z.object({errors:z.record(z.string(),z.string())})}}},404:{description:"Work Group Team Member not found with the provided ID",summary:"Work Group Team Member Not Found",content:{"application/json":{schema:z.object({message:z.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:z.object({message:z.string()})}}}}},hf={method:"put",path:"/work-group-team-member/{id}",tags:["Work Group Team Members"],summary:"Update Work Group Team Member",security:[{bearerAuth:[]}],request:{params:fs,body:{content:{"application/json":{schema:Zp.omit({id:!0})}}}},responses:{200:{description:"Work Group Team Member updated successfully",summary:"Work Group Team Member Updated"},400:{description:"Invalid input data or Work Group Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:z.object({errors:z.record(z.string(),z.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:z.object({message:z.string()})}}},404:{description:"Work Group Team Member not found with the provided ID",summary:"Work Group Team Member Not Found",content:{"application/json":{schema:z.object({message:z.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:z.object({message:z.string()})}}}}},Rf={method:"delete",path:"/work-group-team-member/{id}",tags:["Work Group Team Members"],summary:"Delete Work Group Team Member",security:[{bearerAuth:[]}],request:{params:Hp},responses:{200:{description:"Work Group Team Member deleted successfully",summary:"Work Group Team Member Deleted"},400:{description:"Invalid Work Group Team Member ID format",summary:"Validation Error",content:{"application/json":{schema:z.object({errors:z.record(z.string(),z.string())})}}},401:{description:"User not authenticated",summary:"Authentication Required",content:{"application/json":{schema:z.object({message:z.string()})}}},404:{description:"Work Group Team Member not found with the provided ID",summary:"Work Group Team Member Not Found",content:{"application/json":{schema:z.object({message:z.string()})}}},500:{description:"Internal server error occurred",summary:"Server Error",content:{"application/json":{schema:z.object({message:z.string()})}}}}};var u=new av;u.registerComponent("securitySchemes","bearerAuth",{type:"http",scheme:"bearer",bearerFormat:"JWT"});u.registerPath(Cd);u.registerPath(wd);u.registerPath(Sd);u.registerPath(vd);u.registerPath(jd);u.registerPath(xd);u.registerPath(Ed);u.registerPath(tf);u.registerPath(rf);u.registerPath(of);u.registerPath(nf);u.registerPath(yu);u.registerPath(hu);u.registerPath(Ru);u.registerPath(Iu);u.registerPath(Bd);u.registerPath(qd);u.registerPath(Ud);u.registerPath(kd);u.registerPath(Od);u.registerPath(Au);u.registerPath(Du);u.registerPath(Fu);u.registerPath(Bu);u.registerPath(qu);u.registerPath(pl);u.registerPath(dl);u.registerPath(ll);u.registerPath(ul);u.registerPath(gl);u.registerPath(Mg);u.registerPath(Pg);u.registerPath(Tg);u.registerPath(Ag);u.registerPath(Dg);u.registerPath(Fg);u.registerPath(Zd);u.registerPath(Kd);u.registerPath(Jd);u.registerPath(Yd);u.registerPath(Xd);u.registerPath(Eu);u.registerPath(ju);u.registerPath(xu);u.registerPath(Mu);u.registerPath(Pu);u.registerPath(Yl);u.registerPath(Xl);u.registerPath($l);u.registerPath(Ql);u.registerPath(eu);u.registerPath(Zg);u.registerPath(Kg);u.registerPath(Jg);u.registerPath(Yg);u.registerPath(Xg);u.registerPath(zl);u.registerPath(Hl);u.registerPath(Vl);u.registerPath(Zl);u.registerPath(Kl);u.registerPath(eg);u.registerPath(tg);u.registerPath(rg);u.registerPath(og);u.registerPath(ig);u.registerPath(ng);u.registerPath(cu);u.registerPath(pu);u.registerPath(du);u.registerPath(lu);u.registerPath(uu);u.registerPath(gu);u.registerPath(nu);u.registerPath(su);u.registerPath(au);u.registerPath(mu);u.registerPath(Al);u.registerPath(Dl);u.registerPath(Fl);u.registerPath(Bl);u.registerPath(ql);u.registerPath(Ul);u.registerPath(xl);u.registerPath(Ml);u.registerPath(Pl);u.registerPath(Tl);u.registerPath(Il);u.registerPath(bl);u.registerPath(Cl);u.registerPath(wl);u.registerPath(wg);u.registerPath(Sg);u.registerPath(vg);u.registerPath(Eg);u.registerPath(jg);u.registerPath(xg);u.registerPath(Rg);u.registerPath(Ig);u.registerPath(bg);u.registerPath(Cg);u.registerPath(pg);u.registerPath(dg);u.registerPath(lg);u.registerPath(ug);u.registerPath(mf);u.registerPath(cf);u.registerPath(pf);u.registerPath(df);u.registerPath(lf);u.registerPath(Ld);u.registerPath(Wd);u.registerPath(_d);u.registerPath(zd);u.registerPath(Hd);u.registerPath(Ou);u.registerPath(Nu);u.registerPath(Gu);u.registerPath(Lu);u.registerPath(Wu);u.registerPath(tl);u.registerPath(rl);u.registerPath(ol);u.registerPath(il);u.registerPath(nl);u.registerPath(Lg);u.registerPath(Wg);u.registerPath(_g);u.registerPath(zg);u.registerPath(Hg);u.registerPath(Bg);u.registerPath(qg);u.registerPath(Ug);u.registerPath(kg);u.registerPath(Og);u.registerPath(Pd);u.registerPath(Td);u.registerPath(Ad);u.registerPath(Dd);u.registerPath(Fd);u.registerPath(Ol);u.registerPath(Nl);u.registerPath(Gl);u.registerPath(Ll);u.registerPath(Wl);u.registerPath(gf);u.registerPath(ff);u.registerPath(yf);u.registerPath(hf);u.registerPath(Rf);u.registerPath(zu);u.registerPath(Hu);u.registerPath(Vu);u.registerPath(Zu);u.registerPath(Ku);var cv=new mv(u.definitions),If=cv.generateDocument({openapi:"3.0.0",info:{title:"API da Rede CT",version:"1.0.0",description:"API com valida\xE7\xE3o Zod"}});import{Router as yv}from"express";import{extendZodWithOpenApi as pv}from"@asteasolutions/zod-to-openapi";import Kp from"zod";pv(Kp);var dv=Kp.object({authenticatedUserId:Kp.uuid()}),hs=class{constructor(e){this.userRepository=e}async handle(e,r){try{let{authenticatedUserId:t}=dv.parse({authenticatedUserId:e.user.id}),i=await this.userRepository.findById(t);if(!i)throw new p("Usu\xE1rio n\xE3o encontrado.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{PrismaClient as lv}from"@prisma/client";var L=new lv({log:["warn","error"]});var Rs=class{constructor(e){this.prisma=e}async register({userId:e,title:r,description:t,certificationUrl:i}){await this.prisma.certification.create({data:{title:r,description:t,certificationUrl:i,user:{connect:{id:e}}}})}async find({pagination:{offset:e,limit:r},filter:{description:t,orderBy:i,title:n,userId:s}}){let m={},c=[];return s&&(m.userId=s),n&&c.push({title:{contains:n,mode:"insensitive"}}),t&&c.push({description:{contains:t,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.certification.findMany({where:m,include:{user:{omit:{passwordHash:!0}}},orderBy:{updatedAt:i},skip:e,take:r})}async findById(e){return await this.prisma.certification.findFirst({where:{id:e}})}async findByUserId({pagination:{limit:e,offset:r},filter:{description:t,orderBy:i,title:n},userId:s}){let m={userId:s},c=[];return n&&c.push({title:{contains:n,mode:"insensitive"}}),t&&c.push({description:{contains:t,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.certification.findMany({where:m,include:{user:{omit:{passwordHash:!0}}},skip:r,take:e,orderBy:i?{updatedAt:i}:{updatedAt:"desc"}})}async update({id:e,...r}){await this.prisma.certification.update({where:{id:e},data:r})}async deleteById(e){await this.prisma.certification.delete({where:{id:e}})}async count({filter:{description:e,title:r,userId:t}}){let i={},n=[];return t&&(i.userId=t),r&&n.push({title:{contains:r,mode:"insensitive"}}),e&&n.push({description:{contains:e,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.certification.count({where:i})}};function ht(){return new Rs(L)}var Is=class{constructor(e){this.prisma=e}async create(e){await this.prisma.news.create({data:e})}async find({pagination:{offset:e,limit:r},filter:{authorId:t,content:i,title:n,orderBy:s}}){let m={};t&&(m.authorId={contains:t,mode:"insensitive"});let c=[];return n&&c.push({title:{contains:n,mode:"insensitive"}}),i&&c.push({content:{contains:i,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.news.findMany({where:m,omit:{authorId:!0},include:{author:!0},orderBy:{updatedAt:s},skip:e,take:r})}async findById(e){return await this.prisma.news.findUnique({where:{id:e},omit:{authorId:!0},include:{author:!0}})}async findByAuthorId({authorId:e,pagination:{offset:r,limit:t},filter:{orderBy:i="desc",content:n,title:s}}){let m={authorId:e},c=[];return s&&c.push({title:{contains:s,mode:"insensitive"}}),n&&c.push({content:{contains:n,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.news.findMany({omit:{authorId:!0},where:m,orderBy:{updatedAt:i},skip:r,take:t})}async update(e){await this.prisma.news.update({where:{id:e.id},data:{title:e.title,content:e.content,imageUrl:e.imageUrl}})}async delete(e){await this.prisma.news.delete({where:{id:e}})}async count({filter:{authorId:e,content:r,title:t}}){let i={};e&&(i.authorId={contains:e,mode:"insensitive"});let n=[];return t&&n.push({title:{contains:t,mode:"insensitive"}}),r&&n.push({content:{contains:r,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.news.count({where:i})}};function Ve(){return new Is(L)}var bs=class{constructor(e){this.prisma=e}async create(e){await this.prisma.pendency.create({data:e})}async find({filter:{description:e,orderBy:r,title:t,status:i,userId:n},pagination:{limit:s,offset:m}}){let c={userId:n,AND:{status:{equals:i}}};e&&(c.description={contains:e,mode:"insensitive"});let d=[];return t&&d.push({title:{contains:t,mode:"insensitive"}}),d.length>0&&(c.OR=d),await this.prisma.pendency.findMany({where:c,orderBy:{updatedAt:r},include:{user:{omit:{passwordHash:!0}}},skip:m,take:s})}async findById(e){return await this.prisma.pendency.findFirst({where:{id:e},include:{user:{omit:{passwordHash:!0}}}})}async findByUserId({filter:{description:e,orderBy:r,title:t,status:i},pagination:{limit:n,offset:s},userId:m}){let c={userId:m,AND:{status:{equals:i}}},d=[];return e&&d.push({description:{contains:e,mode:"insensitive"}}),t&&d.push({title:{contains:t,mode:"insensitive"}}),d.length>0&&(c.OR=d),await this.prisma.pendency.findMany({where:c,orderBy:{updatedAt:r},include:{user:{omit:{passwordHash:!0}}},skip:s,take:n})}async update({id:e,...r}){await this.prisma.pendency.update({where:{id:e},data:r})}async deleteById(e){await this.prisma.pendency.delete({where:{id:e}})}async count({filter:{description:e,title:r,status:t,userId:i}}){let n={userId:i},s=[];return e&&s.push({description:{contains:e,mode:"insensitive"}}),r&&s.push({title:{contains:r,mode:"insensitive"}}),t&&s.push({status:{equals:t}}),s.length>0&&(n.OR=s),await this.prisma.pendency.count({where:n})}};function Rt(){return new bs(L)}var Cs=class{constructor(e){this.prisma=e}async create(e){await this.prisma.user.create({data:e})}async update(e){await this.prisma.user.update({where:{id:e.id},data:{lattesUrl:e.lattesUrl??null,orcid:e.orcid??null,phone:e.phone??null,avatarUrl:e.avatarUrl??null}})}async deleteById(e){await this.prisma.user.delete({where:{id:e}})}async find(){return await this.prisma.user.findMany({omit:{passwordHash:!0}})}async findByEmail(e){return await this.prisma.user.findFirst({where:{emailAddress:e}})}async findById(e){return await this.prisma.user.findFirst({where:{id:e},omit:{passwordHash:!0}})}};function he(){return new Cs(L)}import{compare as uv,hash as gv}from"bcryptjs";var ws=class{constructor(e,r){this.hashFn=e;this.compareFn=r}async hash(e){return await this.hashFn(e,6)}async compare({password:e,hashedPassword:r}){return await this.compareFn(e,r)}};function Jp(){return new ws(gv,uv)}import bf from"jsonwebtoken";import Re from"zod";var fv=Re.object({JWT_SECRET:Re.string(),FIREBASE_BUCKET:Re.string(),FIREBASE_CLIENT_EMAIL:Re.string(),FIREBASE_PRIVATE_KEY:Re.string(),FIREBASE_PROJECT_ID:Re.string(),FIREBASE_TYPE:Re.string(),FIREBASE_PRIVATE_KEY_ID:Re.string(),FIREBASE_CLIENT_ID:Re.string(),FIREBASE_AUTH_URI:Re.string(),FIREBASE_TOKEN_URI:Re.string(),FIREBASE_AUTH_PROVIDER_X509_CERT_URL:Re.string(),FIREBASE_CLIENT_X509_CERT_URL:Re.string()}),de=fv.parse(process.env);var Ss=class{constructor(e,r){this.signFn=e;this.verifyFn=r}sign(e){try{return this.signFn(e,de.JWT_SECRET,{expiresIn:"3d",subject:e.id})}catch{return null}}verify(e){try{return this.verifyFn(e,de.JWT_SECRET)}catch{return null}}};function vs(){return new Ss(bf.sign,bf.verify)}function Cf(){return{signUpController:new yo(he(),Jp())}}function wf(){return{signInController:new go(he(),Jp(),vs())}}function Sf(){return{findAuthenticatedUserController:new hs(he())}}function vf(){return{findAuthenticatedUserController:new po(Ve())}}function Ef(){return{findAuthenticatedUserCertificationsController:new co(ht())}}function jf(){return{findAuthenticatedUserPendenciesController:new lo(Rt())}}var Es=class{constructor(e){this.jwtService=e}authenticated(e,r,t){let i=e.headers.authorization;if(!i?.startsWith("Bearer "))return r.status(401).json({message:"Token inv\xE1lido.",invalid:!0});let n=i.split(" ")[1];if(!n)return r.status(401).json({message:"Token n\xE3o fornecido."});try{let s=this.jwtService.verify(n);if(!s)return r.status(401).json({message:"Token inv\xE1lido.",invalid:!0});e.user=s,t()}catch(s){if(console.log(s),s instanceof Error)return r.status(401).json({message:s.message})}}isAdmin(e,r,t){let i=e.headers.authorization;if(!i?.startsWith("Bearer "))return r.status(401).json({message:"Token inv\xE1lido.",invalid:!0});let n=i.split(" ")[1];if(!n)return r.status(401).json({message:"Token n\xE3o fornecido."});try{let s=this.jwtService.verify(n);if(!s)return r.status(401).json({message:"Token inv\xE1lido.",invalid:!0});if(s.role!=="ADMIN")return r.status(401).json({message:"\xC9 necess\xE1rio ter permiss\xF5es de administrador."});e.user=s,t()}catch(s){if(console.log(s),s instanceof Error)return r.status(401).json({message:s.message})}}};function Z(){return{authMiddleware:new Es(vs())}}var Ze=yv(),{authMiddleware:Yr}=Z();Ze.post("/sign-up",async(o,e)=>{let{signUpController:r}=Cf();await r.handle(o,e)});Ze.post("/sign-in",async(o,e)=>{let{signInController:r}=wf();await r.handle(o,e)});Ze.get("/user",(o,e,r)=>{Yr.authenticated(o,e,r)},async(o,e)=>{let{findAuthenticatedUserController:r}=Sf();await r.handle(o,e)});Ze.get("/user/news",(o,e,r)=>{Yr.authenticated(o,e,r)},async(o,e)=>{let{findAuthenticatedUserController:r}=vf();await r.handle(o,e)});Ze.get("/admin",(o,e,r)=>{Yr.isAdmin(o,e,r)},(o,e)=>{try{e.status(200).json({success:!0})}catch(r){r instanceof Error&&e.status(500).json({message:r.message})}});Ze.get("/certifications",(o,e,r)=>{Yr.authenticated(o,e,r)},async(o,e)=>{let{findAuthenticatedUserCertificationsController:r}=Ef();await r.handle(o,e)});Ze.get("/pendencies",(o,e,r)=>{Yr.authenticated(o,e,r)},async(o,e)=>{let{findAuthenticatedUserPendenciesController:r}=jf();await r.handle(o,e)});import{Router as jv}from"express";import{extendZodWithOpenApi as hv}from"@asteasolutions/zod-to-openapi";import Ae from"zod";var Rv=5,xf=1024,Iv=xf*xf,Yp=Rv*Iv;hv(Ae);var bv=Ae.object({volumeNumber:Ae.coerce.number().int().positive("N\xFAmero do volume \xE9 obrigat\xF3rio."),year:Ae.coerce.number().int().positive("Ano \xE9 obrigat\xF3rio."),title:Ae.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),author:Ae.string().min(1,"Autor \xE9 obrigat\xF3rio."),accessUrl:Ae.url().optional(),description:Ae.string().optional(),authorImage:Ae.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=Yp,"A imagem do autor deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB."),coverImage:Ae.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=Yp,"A imagem da capa deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB."),catalogSheet:Ae.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&typeof o.size=="number"&&o.size<=Yp,"A ficha catalogr\xE1fica deve ter no m\xE1ximo 5MB.")}),js=class{constructor(e,r){this.bookVolumeRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{volumeNumber:t,year:i,title:n,author:s,accessUrl:m,description:c,authorImage:d,coverImage:h,catalogSheet:j}=bv.parse({...e.body,authorImage:e.files?.authorImage?.[0],coverImage:e.files?.coverImage?.[0],catalogSheet:e.files?.catalogSheet?.[0]}),U=await this.bookVolumeRepository.create({volumeNumber:t,year:i,title:n,author:s,accessUrl:m,description:c}),Q=U.authorImageUrl,te=U.coverImageUrl,fe=U.catalogSheetUrl;return Q=await this.firebaseStorageService.uploadFile({file:d,folder:M.BOOK_VOLUME_AUTHOR_IMAGE,id:U.id}),te=await this.firebaseStorageService.uploadFile({file:h,folder:M.BOOK_VOLUME_COVER,id:U.id}),fe=await this.firebaseStorageService.uploadFile({file:j,folder:M.BOOK_VOLUME_CATALOG_SHEET,id:U.id}),await this.bookVolumeRepository.update({id:U.id,authorImageUrl:Q,coverImageUrl:te,catalogSheetUrl:fe}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var xs=class{constructor(e){this.prisma=e}async create({volumeNumber:e,year:r,title:t,author:i,accessUrl:n,authorImageUrl:s,coverImageUrl:m,catalogSheetUrl:c,description:d}){return await this.prisma.bookVolume.create({data:{volumeNumber:e,year:r,title:t,author:i,accessUrl:n,authorImageUrl:s,coverImageUrl:m,catalogSheetUrl:c,description:d}})}async find({pagination:{offset:e,limit:r},filter:{title:t,author:i,description:n,orderBy:s}}){let m={},c=[];return t&&c.push({title:{contains:t,mode:"insensitive"}}),i&&c.push({author:{contains:i,mode:"insensitive"}}),n&&c.push({description:{contains:n,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.bookVolume.findMany({where:m,orderBy:{updatedAt:s},skip:e,take:r})}async findById(e){return await this.prisma.bookVolume.findFirst({where:{id:e}})}async update({id:e,volumeNumber:r,year:t,title:i,author:n,accessUrl:s,authorImageUrl:m,coverImageUrl:c,catalogSheetUrl:d,description:h}){await this.prisma.bookVolume.update({where:{id:e},data:{volumeNumber:r,year:t,title:i,author:n,accessUrl:s,authorImageUrl:m,coverImageUrl:c,catalogSheetUrl:d,description:h}})}async deleteById(e){await this.prisma.bookVolume.delete({where:{id:e}})}async count({filter:{title:e,author:r,description:t}}){let i={},n=[];return e&&n.push({title:{contains:e,mode:"insensitive"}}),r&&n.push({author:{contains:r,mode:"insensitive"}}),t&&n.push({description:{contains:t,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.bookVolume.count({where:i})}};function lr(){return new xs(L)}import{getStorage as wv}from"firebase-admin/storage";import{config as Cv}from"dotenv";import Mf from"firebase-admin";Cv();var Xp=Mf.initializeApp({credential:Mf.credential.cert({clientEmail:de.FIREBASE_CLIENT_EMAIL,privateKey:de.FIREBASE_PRIVATE_KEY,projectId:de.FIREBASE_PROJECT_ID,type:de.FIREBASE_TYPE,privateKeyId:de.FIREBASE_PRIVATE_KEY_ID,clientId:de.FIREBASE_CLIENT_ID,authUri:de.FIREBASE_AUTH_URI,tokenUri:de.FIREBASE_TOKEN_URI,authProviderX509CertUrl:de.FIREBASE_AUTH_PROVIDER_X509_CERT_URL,clientX509CertUrl:de.FIREBASE_CLIENT_X509_CERT_URL}),storageBucket:de.FIREBASE_BUCKET});Xp.name?console.log("\u{1F525} Firebase conectado com sucesso!"):console.error("\u274C Erro ao se conectar ao Firebase.");var Sv=wv(Xp),Pf=Sv.bucket(de.FIREBASE_BUCKET);import{randomUUID as vv}from"node:crypto";var Ev=/https:\/\/storage\.googleapis\.com\/[^/]+\/(.+)$/,Ms=class{constructor(e){this.bucket=e}async uploadFile({file:e,folder:r,id:t}){let i=`${vv()}-${e?.originalname}`,n=this.bucket.file(`${r}/${t}/${i}`);return await new Promise((s,m)=>{let c=n.createWriteStream({metadata:{contentType:e?.mimetype}});c.on("error",d=>{m(d)}),c.on("finish",async()=>{try{await n.makePublic();let d=`https://storage.googleapis.com/${this.bucket.name}/${n.name}`;s(d)}catch(d){m(d)}}),c.end(e.buffer)})}async updateFile({file:e,id:r,fileUrl:t,folder:i}){try{let n=this.getPath(t);if(!n)throw new Error("Arquivo n\xE3o encontrado.");let[s,m]=await Promise.all([this.bucket.file(n).delete(),this.uploadFile({file:e,id:r,folder:i})]);return m}catch{throw new Error("Erro ao atualizar o arquivo.")}}async deleteFile({fileUrl:e}){let r=this.getPath(e);if(!r)throw new Error("Arquivo n\xE3o encontrado.");try{await this.bucket.file(r).delete()}catch{throw new Error("Erro ao deletar o arquivo.")}}getPath(e){let r=e.match(Ev);return r?r[1]:null}};function F(){return new Ms(Pf)}function Tf(){return{createBookVolumeController:new js(lr(),F())}}function Af(){return{findBookVolumesController:new Io(lr())}}function Df(){return{findBookVolumeByIdController:new Ro(lr())}}function Ff(){return{updateBookVolumeController:new Co(lr(),F())}}function Bf(){return{deleteBookVolumeController:new ho(lr(),F())}}import qf from"multer";var K=qf({storage:qf.memoryStorage()});var At=jv(),{authMiddleware:Xr}=Z();At.post("/",(o,e,r)=>{Xr.isAdmin(o,e,r)},K.fields([{name:"authorImage",maxCount:1},{name:"coverImage",maxCount:1},{name:"catalogSheet",maxCount:1}]),async(o,e)=>{let{createBookVolumeController:r}=Tf();await r.handle(o,e)});At.get("/",(o,e,r)=>{Xr.isAdmin(o,e,r)},async(o,e)=>{let{findBookVolumesController:r}=Af();await r.handle(o,e)});At.get("/:id",(o,e,r)=>{Xr.isAdmin(o,e,r)},async(o,e)=>{let{findBookVolumeByIdController:r}=Df();await r.handle(o,e)});At.put("/:id",(o,e,r)=>{Xr.isAdmin(o,e,r)},K.fields([{name:"authorImage",maxCount:1},{name:"coverImage",maxCount:1},{name:"catalogSheet",maxCount:1}]),async(o,e)=>{let{updateBookVolumeController:r}=Ff();await r.handle(o,e)});At.delete("/:id",(o,e,r)=>{Xr.isAdmin(o,e,r)},async(o,e)=>{let{deleteBookVolumeController:r}=Bf();await r.handle(o,e)});import{Router as xv}from"express";function Uf(){return{registerCertificationController:new Eo(he(),ht(),F())}}function kf(){return{findCertificationsController:new vo(ht())}}function Of(){return{findCertificationByIdController:new So(ht())}}function Nf(){return{updateCertificationController:new xo(ht(),F())}}function Gf(){return{deleteCertificationController:new wo(ht(),F())}}var Dt=xv(),{authMiddleware:$r}=Z();Dt.post("/:user_id",(o,e,r)=>{$r.isAdmin(o,e,r)},K.single("certification"),async(o,e)=>{let{registerCertificationController:r}=Uf();await r.handle(o,e)});Dt.get("/",(o,e,r)=>{$r.isAdmin(o,e,r)},async(o,e)=>{let{findCertificationsController:r}=kf();await r.handle(o,e)});Dt.get("/:certification_id",(o,e,r)=>{$r.isAdmin(o,e,r)},async(o,e)=>{let{findCertificationByIdController:r}=Of();await r.handle(o,e)});Dt.put("/:certification_id",(o,e,r)=>{$r.isAdmin(o,e,r)},K.single("certification"),async(o,e)=>{let{updateCertificationController:r}=Nf();await r.handle(o,e)});Dt.delete("/:certification_id",(o,e,r)=>{$r.isAdmin(o,e,r)},async(o,e)=>{let{deleteCertificationController:r}=Gf();await r.handle(o,e)});import{Router as Fv}from"express";import{extendZodWithOpenApi as Mv}from"@asteasolutions/zod-to-openapi";import Ie from"zod";var Pv=5,Lf=1024,Tv=Lf*Lf,Av=Pv*Tv;Mv(Ie);var Dv=Ie.object({title:Ie.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),coordinatorId:Ie.string().uuid("Coordenador \xE9 obrigat\xF3rio."),email:Ie.email("E-mail deve ser v\xE1lido."),location:Ie.string().min(1,"Localiza\xE7\xE3o \xE9 obrigat\xF3ria."),scheduledAt:Ie.coerce.date(),registrationLink:Ie.url().optional(),description:Ie.string().optional(),instructorIds:Ie.transform(o=>typeof o=="string"?o.split(","):o).pipe(Ie.array(Ie.uuid())),image:Ie.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=Av,"A imagem deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.")}),Ps=class{constructor(e,r){this.courseRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{title:t,coordinatorId:i,email:n,location:s,scheduledAt:m,registrationLink:c,description:d,instructorIds:h,image:j}=Dv.parse({...e.body,image:e.file}),U=await this.courseRepository.create({title:t,coordinatorId:i,email:n,location:s,scheduledAt:m,registrationLink:c||void 0,description:d,instructorIds:h}),Q=await this.firebaseStorageService.uploadFile({file:j,folder:M.COURSE,id:U.id});return await this.courseRepository.update({id:U.id,imageUrl:Q}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Ts=class{constructor(e){this.prisma=e}async create({title:e,imageUrl:r,coordinatorId:t,email:i,instructorIds:n,scheduledAt:s,location:m,registrationLink:c,description:d}){return await this.prisma.course.create({data:{title:e,imageUrl:r,coordinatorId:t,email:i,scheduledAt:s,location:m,registrationLink:c,description:d,instructors:{connect:n?.map(h=>({id:h}))}}})}async find({pagination:{offset:e,limit:r},filter:{description:t,orderBy:i,title:n,coordinator:s}}){let m={},c=[];return n&&c.push({title:{contains:n,mode:"insensitive"}}),t&&c.push({description:{contains:t,mode:"insensitive"}}),s&&c.push({coordinator:{name:{contains:s,mode:"insensitive"}}}),c.length>0&&(m.OR=c),await this.prisma.course.findMany({where:m,include:{coordinator:{omit:{passwordHash:!0}},instructors:{omit:{passwordHash:!0}}},orderBy:{updatedAt:i},skip:e,take:r})}async findById(e){return await this.prisma.course.findFirst({where:{id:e},include:{coordinator:{omit:{passwordHash:!0}},instructors:{omit:{passwordHash:!0}}}})}async update({id:e,title:r,imageUrl:t,coordinatorId:i,email:n,instructorIds:s,scheduledAt:m,location:c,registrationLink:d,description:h}){s!==void 0&&await this.prisma.course.update({where:{id:e},data:{instructors:{set:[]}}}),await this.prisma.course.update({where:{id:e},data:{title:r,imageUrl:t,coordinatorId:i,email:n,scheduledAt:m,location:c,registrationLink:d,description:h,...s?.length>0&&{instructors:{connect:s.map(j=>({id:j}))}}}})}async deleteById(e){await this.prisma.course.delete({where:{id:e}})}async count({filter:{description:e,title:r,coordinator:t}}){let i={},n=[];return r&&n.push({title:{contains:r,mode:"insensitive"}}),e&&n.push({description:{contains:e,mode:"insensitive"}}),t&&n.push({coordinator:{name:{contains:t,mode:"insensitive"}}}),n.length>0&&(i.OR=n),await this.prisma.course.count({where:i})}};function ur(){return new Ts(L)}function Wf(){return{createCourseController:new Ps(ur(),F())}}function _f(){return{findCoursesController:new Ao(ur())}}function zf(){return{findCourseByIdController:new To(ur())}}function Hf(){return{updateCourseController:new Do(ur(),F())}}function Vf(){return{deleteCourseController:new Po(ur(),F())}}var Ft=Fv(),{authMiddleware:Qr}=Z();Ft.post("/",(o,e,r)=>{Qr.isAdmin(o,e,r)},K.single("image"),async(o,e)=>{let{createCourseController:r}=Wf();await r.handle(o,e)});Ft.get("/",(o,e,r)=>{Qr.isAdmin(o,e,r)},async(o,e)=>{let{findCoursesController:r}=_f();await r.handle(o,e)});Ft.get("/:id",(o,e,r)=>{Qr.isAdmin(o,e,r)},async(o,e)=>{let{findCourseByIdController:r}=zf();await r.handle(o,e)});Ft.put("/:id",(o,e,r)=>{Qr.isAdmin(o,e,r)},K.single("image"),async(o,e)=>{let{updateCourseController:r}=Hf();await r.handle(o,e)});Ft.delete("/:id",(o,e,r)=>{Qr.isAdmin(o,e,r)},async(o,e)=>{let{deleteCourseController:r}=Vf();await r.handle(o,e)});import{Router as Ov}from"express";import{extendZodWithOpenApi as Bv}from"@asteasolutions/zod-to-openapi";import Ke from"zod";var qv=1,Uv=9;Bv(Ke);var kv=Ke.object({page:Ke.coerce.number().min(1).default(qv),limit:Ke.coerce.number().min(1).default(Uv),code:Ke.string().optional(),title:Ke.string().optional(),description:Ke.string().optional(),notes:Ke.string().optional(),orderBy:Ke.enum(["asc","desc"]).default("desc")}),As=class{constructor(e){this.etpRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=kv.parse(e.query),s=i*t-i,[m,c]=await Promise.all([this.etpRepository.find({pagination:{offset:s,limit:i},filter:n}),this.etpRepository.count({filter:n})]),d=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:d,offset:s,limit:i,etps:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Ds=class{constructor(e){this.prisma=e}async create(e){let{leaderId:r,deputyLeaderId:t,secretaryId:i,memberIds:n,...s}=e;await this.prisma.$transaction(async m=>{let c=await m.eTP.create({data:s});await m.eTPLeader.create({data:{etpId:c.id,researcherId:r}}),await m.eTPDeputy.create({data:{etpId:c.id,researcherId:t}}),await m.eTPSecretary.create({data:{etpId:c.id,researcherId:i}}),await m.eTP.update({where:{id:c.id},data:{members:{connect:n.map(d=>({id:d}))}}})})}async update(e){let{leaderId:r,deputyLeaderId:t,secretaryId:i,memberIds:n,...s}=e;await this.prisma.$transaction(async m=>{await m.eTP.update({where:{id:e.id},data:s}),await this.updateLeader(m,e.id,r),await this.updateDeputyLeader(m,e.id,t),await this.updateSecretary(m,e.id,i),await this.updateMembers(m,e.id,n)})}async updateLeader(e,r,t){t!==void 0&&(await e.eTPLeader.deleteMany({where:{etpId:r}}),t&&await e.eTPLeader.create({data:{etpId:r,researcherId:t}}))}async updateDeputyLeader(e,r,t){t!==void 0&&(await e.eTPDeputy.deleteMany({where:{etpId:r}}),t&&await e.eTPDeputy.create({data:{etpId:r,researcherId:t}}))}async updateSecretary(e,r,t){t!==void 0&&(await e.eTPSecretary.deleteMany({where:{etpId:r}}),t&&await e.eTPSecretary.create({data:{etpId:r,researcherId:t}}))}async updateMembers(e,r,t){t!==void 0&&await e.eTP.update({where:{id:r},data:{members:{set:t.map(i=>({id:i}))}}})}async deleteById(e){await this.prisma.eTP.delete({where:{id:e}})}async find({pagination:{offset:e,limit:r},filter:{code:t,title:i,description:n,notes:s,orderBy:m}}){let c={},d=[];return t&&d.push({code:{contains:t,mode:"insensitive"}}),i&&d.push({title:{contains:i,mode:"insensitive"}}),n&&d.push({description:{contains:n,mode:"insensitive"}}),s&&d.push({notes:{contains:s,mode:"insensitive"}}),d.length>0&&(c.OR=d),await this.prisma.eTP.findMany({where:c,include:{leader:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},deputyLeader:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},secretary:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},members:{include:{user:{omit:{passwordHash:!0}}}}},orderBy:{updatedAt:m},skip:e,take:r})}async findById(e){return await this.prisma.eTP.findFirst({where:{id:e},include:{leader:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},deputyLeader:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},secretary:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},members:{include:{user:{omit:{passwordHash:!0}}}}}})}async findByCode(e){return await this.prisma.eTP.findFirst({where:{code:e},include:{leader:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},deputyLeader:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},secretary:{include:{researcher:{include:{user:{omit:{passwordHash:!0}}}}}},members:{include:{user:{omit:{passwordHash:!0}}}}}})}async count({filter:{code:e,title:r,description:t,notes:i}}){let n={},s=[];return e&&s.push({code:{contains:e,mode:"insensitive"}}),r&&s.push({title:{contains:r,mode:"insensitive"}}),t&&s.push({description:{contains:t,mode:"insensitive"}}),i&&s.push({notes:{contains:i,mode:"insensitive"}}),s.length>0&&(n.OR=s),await this.prisma.eTP.count({where:n})}};function gr(){return new Ds(L)}function Zf(){return{createETPController:new Fo(gr())}}function Kf(){return{findETPsController:new As(gr())}}function Jf(){return{findETPByIdController:new qo(gr())}}function Yf(){return{updateETPController:new ko(gr())}}function Xf(){return{deleteETPController:new Bo(gr())}}var Bt=Ov(),{authMiddleware:$p}=Z();Bt.post("/",(o,e,r)=>{$p.authenticated(o,e,r)},async(o,e)=>{let{createETPController:r}=Zf();await r.handle(o,e)});Bt.get("/",async(o,e)=>{let{findETPsController:r}=Kf();await r.handle(o,e)});Bt.get("/:id",async(o,e)=>{let{findETPByIdController:r}=Jf();await r.handle(o,e)});Bt.put("/:id",(o,e,r)=>{$p.authenticated(o,e,r)},async(o,e)=>{let{updateETPController:r}=Yf();await r.handle(o,e)});Bt.delete("/:id",(o,e,r)=>{$p.authenticated(o,e,r)},async(o,e)=>{let{deleteETPController:r}=Xf();await r.handle(o,e)});import{Router as Nv}from"express";var Fs=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.event.create({data:e})}async update(e){await this.prisma.event.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.event.delete({where:{id:e}})}async find({pagination:{offset:e,limit:r},filter:{title:t,status:i,format:n,orderBy:s}}){let m={},c=[];return i&&(m.status=i),n&&(m.format=n),t&&c.push({title:{contains:t,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.event.findMany({where:m,orderBy:s?{startDate:s}:{startDate:"desc"},skip:e,take:r})}async findById(e){return await this.prisma.event.findFirst({where:{id:e}})}async count({filter:{title:e,status:r,format:t}}){let i={},n=[];return r&&(i.status=r),t&&(i.format=t),e&&n.push({title:{contains:e,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.event.count({where:i})}};function fr(){return new Fs(L)}function $f(){return{createEventController:new Go(fr(),F())}}function Qf(){return{findEventsController:new zo(fr())}}function ey(){return{findEventByIdController:new Wo(fr())}}function ty(){return{updateEventController:new Ho(fr(),F())}}function ry(){return{deleteEventController:new Lo(fr())}}var qt=Nv(),{authMiddleware:Qp}=Z();qt.post("/",(o,e,r)=>{Qp.authenticated(o,e,r)},K.single("image"),async(o,e)=>{let{createEventController:r}=$f();await r.handle(o,e)});qt.get("/",async(o,e)=>{let{findEventsController:r}=Qf();await r.handle(o,e)});qt.get("/:id",async(o,e)=>{let{findEventByIdController:r}=ey();await r.handle(o,e)});qt.put("/:id",(o,e,r)=>{Qp.authenticated(o,e,r)},K.single("image"),async(o,e)=>{let{updateEventController:r}=ty();await r.handle(o,e)});qt.delete("/:id",(o,e,r)=>{Qp.authenticated(o,e,r)},async(o,e)=>{let{deleteEventController:r}=ry();await r.handle(o,e)});import{Router as Gv}from"express";var Bs=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.inMemoriam.create({data:e})}async update(e){await this.prisma.inMemoriam.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.inMemoriam.delete({where:{id:e}})}async find({pagination:{offset:e,limit:r},filter:{name:t,biography:i,role:n,orderBy:s}}){let m={},c=[];return n&&(m.role=n),t&&c.push({name:{contains:t,mode:"insensitive"}}),i&&c.push({biography:{contains:i,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.inMemoriam.findMany({where:m,orderBy:{updatedAt:s},skip:e,take:r})}async findById(e){return await this.prisma.inMemoriam.findFirst({where:{id:e}})}async findByRole(e){return await this.prisma.inMemoriam.findMany({where:{role:e}})}async count({filter:{name:e,biography:r,role:t}}){let i={},n=[];return t&&(i.role=t),e&&n.push({name:{contains:e,mode:"insensitive"}}),r&&n.push({biography:{contains:r,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.inMemoriam.count({where:i})}};function Ut(){return new Bs(L)}function oy(){return{createInMemoriamController:new Vo(Ut(),F())}}function iy(){return{findInMemoriamsController:new Xo(Ut())}}function ny(){return{findInMemoriamByIdController:new Ko(Ut())}}function sy(){return{findInMemoriamByRoleController:new Yo(Ut())}}function ay(){return{updateInMemoriamController:new $o(Ut(),F())}}function my(){return{deleteInMemoriamController:new Zo(Ut(),F())}}var It=Gv(),{authMiddleware:ed}=Z();It.post("/",(o,e,r)=>{ed.authenticated(o,e,r)},K.single("photo"),async(o,e)=>{let{createInMemoriamController:r}=oy();await r.handle(o,e)});It.get("/",async(o,e)=>{let{findInMemoriamsController:r}=iy();await r.handle(o,e)});It.get("/:id",async(o,e)=>{let{findInMemoriamByIdController:r}=ny();await r.handle(o,e)});It.get("/role/:role",async(o,e)=>{let{findInMemoriamByRoleController:r}=sy();await r.handle(o,e)});It.put("/:id",(o,e,r)=>{ed.authenticated(o,e,r)},K.single("photo"),async(o,e)=>{let{updateInMemoriamController:r}=ay();await r.handle(o,e)});It.delete("/:id",(o,e,r)=>{ed.authenticated(o,e,r)},async(o,e)=>{let{deleteInMemoriamController:r}=my();await r.handle(o,e)});import{Router as Lv}from"express";var td=Lv();td.get("/",(o,e)=>{e.status(200).json({message:"Rede CT"})});import{Router as Vv}from"express";var qs=class{constructor(e){this.prisma=e}async create(e){await this.prisma.internationalScientificCongress.create({data:e})}async update(e){await this.prisma.internationalScientificCongress.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.internationalScientificCongress.delete({where:{id:e}})}async find({pagination:{offset:e,limit:r},filter:{title:t,edition:i,location:n,orderBy:s}}){let m={},c=[];return i&&c.push({edition:{equals:i}}),t&&c.push({title:{contains:t,mode:"insensitive"}}),n&&c.push({location:{contains:n,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.internationalScientificCongress.findMany({where:m,include:{partners:!0,galleries:!0},orderBy:s?{startDate:s}:{startDate:"desc"},skip:e,take:r})}async findById(e){return await this.prisma.internationalScientificCongress.findFirst({where:{id:e},include:{partners:!0,galleries:!0}})}async findByEdition(e){return await this.prisma.internationalScientificCongress.findMany({where:{edition:e},include:{partners:!0,galleries:!0}})}async count({filter:{title:e,edition:r,location:t}}){let i={},n=[];return r&&n.push({edition:{equals:r}}),e&&n.push({title:{contains:e,mode:"insensitive"}}),t&&n.push({location:{contains:t,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.internationalScientificCongress.count({where:i})}};function De(){return new qs(L)}function cy(){return{createInternationalScientificCongressController:new ci(De())}}function py(){return{findInternationalScientificCongressesController:new gi(De())}}function dy(){return{findInternationalScientificCongressByIdController:new li(De())}}function ly(){return{findInternationalScientificCongressByEditionController:new di(De())}}function uy(){return{updateInternationalScientificCongressController:new fi(De())}}function gy(){return{deleteInternationalScientificCongressController:new pi(De())}}import{extendZodWithOpenApi as Wv}from"@asteasolutions/zod-to-openapi";import rd from"zod";Wv(rd);var _v=rd.object({id:rd.uuid()}),Us=class{constructor(e){this.internationalScientificCongressGalleryRepository=e}async handle(e,r){try{let{id:t}=_v.parse({id:e.params.id}),i=await this.internationalScientificCongressGalleryRepository.findById(t);if(!i)throw new p("A imagem da galeria n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var ks=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.internationalScientificCongressGalleryItem.create({data:e})}async update(e){await this.prisma.internationalScientificCongressGalleryItem.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.internationalScientificCongressGalleryItem.delete({where:{id:e}})}async findByCongressId(e){let{pagination:r,filter:t}=e;return await this.prisma.internationalScientificCongressGalleryItem.findMany({where:{congressId:t.congressId,...t.caption&&{caption:{contains:t.caption,mode:"insensitive"}}},skip:r.offset,take:r.limit})}async findById(e){return await this.prisma.internationalScientificCongressGalleryItem.findFirst({where:{id:e}})}async count(e){let{filter:r}=e;return await this.prisma.internationalScientificCongressGalleryItem.count({where:{congressId:r.congressId,...r.caption&&{caption:{contains:r.caption,mode:"insensitive"}}}})}};function yr(){return new ks(L)}function fy(){return{createInternationalScientificCongressGalleryController:new Qo(yr(),De(),F())}}function yy(){return{findInternationalScientificCongressGalleriesByCongressIdController:new ri(yr())}}function hy(){return{findInternationalScientificCongressGalleryByIdController:new Us(yr())}}function Ry(){return{updateInternationalScientificCongressGalleryController:new oi(yr(),F())}}function Iy(){return{deleteInternationalScientificCongressGalleryController:new ei(yr())}}import{extendZodWithOpenApi as zv}from"@asteasolutions/zod-to-openapi";import od from"zod";zv(od);var Hv=od.object({id:od.uuid()}),Os=class{constructor(e){this.internationalScientificCongressPartnerRepository=e}async handle(e,r){try{let{id:t}=Hv.parse({id:e.params.id}),i=await this.internationalScientificCongressPartnerRepository.findById(t);if(!i)throw new p("O parceiro n\xE3o existe.");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Ns=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.internationalScientificCongressPartner.create({data:e})}async update(e){await this.prisma.internationalScientificCongressPartner.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.internationalScientificCongressPartner.delete({where:{id:e}})}async findByCongressId(e){return await this.prisma.internationalScientificCongressPartner.findMany({where:{congressId:e.filter.congressId,name:e.filter.name?{contains:e.filter.name,mode:"insensitive"}:void 0},skip:e.pagination?.offset,take:e.pagination?.limit})}async findById(e){return await this.prisma.internationalScientificCongressPartner.findFirst({where:{id:e}})}async count(e){return await this.prisma.internationalScientificCongressPartner.count({where:{congressId:e.filter.congressId,name:e.filter.name?{contains:e.filter.name,mode:"insensitive"}:void 0}})}};function hr(){return new Ns(L)}function by(){return{createInternationalScientificCongressPartnerController:new ii(hr(),De(),F())}}function Cy(){return{findInternationalScientificCongressPartnersByCongressIdController:new ai(hr())}}function wy(){return{findInternationalScientificCongressPartnerByIdController:new Os(hr())}}function Sy(){return{updateInternationalScientificCongressPartnerController:new mi(hr(),F())}}function vy(){return{deleteInternationalScientificCongressPartnerController:new ni(hr())}}var me=Vv(),{authMiddleware:Je}=Z();me.post("/",(o,e,r)=>{Je.authenticated(o,e,r)},async(o,e)=>{let{createInternationalScientificCongressController:r}=cy();await r.handle(o,e)});me.get("/",async(o,e)=>{let{findInternationalScientificCongressesController:r}=py();await r.handle(o,e)});me.get("/:id",async(o,e)=>{let{findInternationalScientificCongressByIdController:r}=dy();await r.handle(o,e)});me.get("/edition/:edition",async(o,e)=>{let{findInternationalScientificCongressByEditionController:r}=ly();await r.handle(o,e)});me.put("/:id",(o,e,r)=>{Je.authenticated(o,e,r)},async(o,e)=>{let{updateInternationalScientificCongressController:r}=uy();await r.handle(o,e)});me.delete("/:id",(o,e,r)=>{Je.authenticated(o,e,r)},async(o,e)=>{let{deleteInternationalScientificCongressController:r}=gy();await r.handle(o,e)});me.post("/:congressId/gallery",(o,e,r)=>{Je.authenticated(o,e,r)},K.single("image"),async(o,e)=>{let{createInternationalScientificCongressGalleryController:r}=fy();await r.handle(o,e)});me.get("/:congressId/gallery",async(o,e)=>{let{findInternationalScientificCongressGalleriesByCongressIdController:r}=yy();await r.handle(o,e)});me.get("/gallery/:id",async(o,e)=>{let{findInternationalScientificCongressGalleryByIdController:r}=hy();await r.handle(o,e)});me.put("/gallery/:id",(o,e,r)=>{Je.authenticated(o,e,r)},K.single("image"),async(o,e)=>{let{updateInternationalScientificCongressGalleryController:r}=Ry();await r.handle(o,e)});me.delete("/gallery/:id",(o,e,r)=>{Je.authenticated(o,e,r)},async(o,e)=>{let{deleteInternationalScientificCongressGalleryController:r}=Iy();await r.handle(o,e)});me.post("/:congressId/partner",(o,e,r)=>{Je.authenticated(o,e,r)},K.single("logo"),async(o,e)=>{let{createInternationalScientificCongressPartnerController:r}=by();await r.handle(o,e)});me.get("/:congressId/partner",async(o,e)=>{let{findInternationalScientificCongressPartnersByCongressIdController:r}=Cy();await r.handle(o,e)});me.get("/partner/:id",async(o,e)=>{let{findInternationalScientificCongressPartnerByIdController:r}=wy();await r.handle(o,e)});me.put("/partner/:id",(o,e,r)=>{Je.authenticated(o,e,r)},K.single("logo"),async(o,e)=>{let{updateInternationalScientificCongressPartnerController:r}=Sy();await r.handle(o,e)});me.delete("/partner/:id",(o,e,r)=>{Je.authenticated(o,e,r)},async(o,e)=>{let{deleteInternationalScientificCongressPartnerController:r}=vy();await r.handle(o,e)});import{Router as Xv}from"express";import{extendZodWithOpenApi as Zv}from"@asteasolutions/zod-to-openapi";import kt from"zod";var Kv=1,Jv=10;Zv(kt);var Yv=kt.object({page:kt.coerce.number().min(1).default(Kv),limit:kt.coerce.number().min(1).default(Jv),title:kt.string().optional(),country:kt.string().optional(),orderBy:kt.enum(["asc","desc"]).optional()}),Gs=class{constructor(e){this.lawRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=Yv.parse(e.query),s=i*t-i,[m,c]=await Promise.all([this.lawRepository.find({pagination:{offset:s,limit:i},filter:n}),this.lawRepository.count({filter:n})]),d=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:d,offset:s,limit:i,laws:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Ls=class{constructor(e){this.prisma=e}async create(e){await this.prisma.law.create({data:{...e}})}async update(e){let{id:r,...t}=e;await this.prisma.law.update({where:{id:r},data:t})}async deleteById(e){await this.prisma.law.delete({where:{id:e}})}async find({pagination:e,filter:{title:r,country:t,orderBy:i}}){let n={};return r&&(n.title={contains:r,mode:"insensitive"}),t&&(n.country={contains:t,mode:"insensitive"}),await this.prisma.law.findMany({where:n,orderBy:{updatedAt:i??"desc"},...e&&{skip:e.offset,take:e.limit}})}async findById(e){return await this.prisma.law.findFirst({where:{id:e}})}async count({filter:{title:e,country:r}}){let t={};return e&&(t.title={contains:e,mode:"insensitive"}),r&&(t.country={contains:r,mode:"insensitive"}),await this.prisma.law.count({where:t})}};function Rr(){return new Ls(L)}function Ey(){return{createLawController:new yi(Rr())}}function jy(){return{findLawsController:new Gs(Rr())}}function xy(){return{findLawByIdController:new Ri(Rr())}}function My(){return{updateLawController:new bi(Rr())}}function Py(){return{deleteLawController:new hi(Rr())}}var Ot=Xv(),{authMiddleware:id}=Z();Ot.post("/",(o,e,r)=>{id.authenticated(o,e,r)},async(o,e)=>{let{createLawController:r}=Ey();await r.handle(o,e)});Ot.get("/",async(o,e)=>{let{findLawsController:r}=jy();await r.handle(o,e)});Ot.get("/:id",async(o,e)=>{let{findLawByIdController:r}=xy();await r.handle(o,e)});Ot.put("/:id",(o,e,r)=>{id.authenticated(o,e,r)},async(o,e)=>{let{updateLawController:r}=My();await r.handle(o,e)});Ot.delete("/:id",(o,e,r)=>{id.authenticated(o,e,r)},async(o,e)=>{let{deleteLawController:r}=Py();await r.handle(o,e)});import{Router as eE}from"express";import{extendZodWithOpenApi as $v}from"@asteasolutions/zod-to-openapi";import Ws from"zod";$v(Ws);var Qv=Ws.object({role:Ws.string().optional(),orderBy:Ws.enum(["asc","desc"]).optional()}),_s=class{constructor(e){this.legitimatorCommitteeMemberRepository=e}async handle(e,r){try{let t=Qv.parse(e.query),i=await this.legitimatorCommitteeMemberRepository.find({filter:t});r.status(200).json({members:i})}catch(t){if(t instanceof Error)throw new a(t.message)}}};var zs=class{constructor(e){this.prisma=e}async create(e){await this.prisma.legitimatorCommitteeMember.create({data:{...e,order:e.order??0}})}async update(e){let{id:r,...t}=e;await this.prisma.legitimatorCommitteeMember.update({where:{id:r},data:t})}async deleteById(e){await this.prisma.legitimatorCommitteeMember.delete({where:{id:e}})}async find({filter:{role:e,orderBy:r}}){let t={};return e&&(t.role={contains:e,mode:"insensitive"}),await this.prisma.legitimatorCommitteeMember.findMany({where:t,include:{user:{omit:{passwordHash:!0}}},orderBy:r?[{order:"asc"},{updatedAt:r}]:[{order:"asc"},{updatedAt:"desc"}]})}async findById(e){return await this.prisma.legitimatorCommitteeMember.findFirst({where:{id:e},include:{user:{omit:{passwordHash:!0}}}})}async count({filter:{role:e}}){let r={};return e&&(r.role={contains:e,mode:"insensitive"}),await this.prisma.legitimatorCommitteeMember.count({where:r})}};function Ir(){return new zs(L)}function Ty(){return{createLegitimatorCommitteeMemberController:new Ci(Ir())}}function Ay(){return{findLegitimatorCommitteeMembersController:new _s(Ir())}}function Dy(){return{findLegitimatorCommitteeMemberByIdController:new Si(Ir())}}function Fy(){return{updateLegitimatorCommitteeMemberController:new Ei(Ir())}}function By(){return{deleteLegitimatorCommitteeMemberController:new wi(Ir())}}var Nt=eE(),{authMiddleware:nd}=Z();Nt.post("/",(o,e,r)=>{nd.authenticated(o,e,r)},async(o,e)=>{let{createLegitimatorCommitteeMemberController:r}=Ty();await r.handle(o,e)});Nt.get("/",async(o,e)=>{let{findLegitimatorCommitteeMembersController:r}=Ay();await r.handle(o,e)});Nt.get("/:id",async(o,e)=>{let{findLegitimatorCommitteeMemberByIdController:r}=Dy();await r.handle(o,e)});Nt.put("/:id",(o,e,r)=>{nd.authenticated(o,e,r)},async(o,e)=>{let{updateLegitimatorCommitteeMemberController:r}=Fy();await r.handle(o,e)});Nt.delete("/:id",(o,e,r)=>{nd.authenticated(o,e,r)},async(o,e)=>{let{deleteLegitimatorCommitteeMemberController:r}=By();await r.handle(o,e)});import{Router as oE}from"express";import{extendZodWithOpenApi as tE}from"@asteasolutions/zod-to-openapi";import eo from"zod";tE(eo);var rE=eo.object({name:eo.string().optional(),description:eo.string().optional(),orderBy:eo.enum(["asc","desc"]).default("desc")}),Hs=class{constructor(e){this.managementTeamRepository=e}async handle(e,r){try{let t=rE.parse(e.query),i=await this.managementTeamRepository.find({filter:t});r.status(200).json({teams:i})}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Vs=class{constructor(e){this.prisma=e}async create(e){let{members:r,...t}=e;await this.prisma.$transaction(async i=>{let n=await i.managementTeam.create({data:t});return await i.managementTeamMember.createMany({data:r.map(({userId:s,role:m,order:c})=>({teamId:n.id,userId:s,role:m,order:c??0}))}),n})}async update(e){let{members:r,...t}=e;await this.prisma.$transaction(async i=>{let n=await i.managementTeam.update({where:{id:e.id},data:t});return r!==void 0&&(await i.managementTeamMember.deleteMany({where:{teamId:e.id}}),r.length>0&&await i.managementTeamMember.createMany({data:r.map(({userId:s,role:m,order:c})=>({teamId:e.id,userId:s,role:m,order:c??0}))})),n})}async deleteById(e){await this.prisma.managementTeam.delete({where:{id:e}})}async find({filter:{name:e,description:r,orderBy:t}}){let i={},n=[];return e&&n.push({name:{contains:e,mode:"insensitive"}}),r&&n.push({description:{contains:r,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.managementTeam.findMany({where:i,include:{members:{include:{user:{omit:{passwordHash:!0}}},orderBy:{order:"asc"}}},orderBy:{updatedAt:t}})}async findById(e){return await this.prisma.managementTeam.findFirst({where:{id:e},include:{members:{include:{user:{omit:{passwordHash:!0}}},orderBy:{order:"asc"}}}})}async findByName(e){return await this.prisma.managementTeam.findFirst({where:{name:e},include:{members:{include:{user:{omit:{passwordHash:!0}}},orderBy:{order:"asc"}}}})}async count({filter:{name:e,description:r}}){let t={},i=[];return e&&i.push({name:{contains:e,mode:"insensitive"}}),r&&i.push({description:{contains:r,mode:"insensitive"}}),i.length>0&&(t.OR=i),await this.prisma.managementTeam.count({where:t})}};function br(){return new Vs(L)}function qy(){return{createManagementTeamController:new ji(br())}}function Uy(){return{findManagementTeamsController:new Hs(br())}}function ky(){return{findManagementTeamByIdController:new Mi(br())}}function Oy(){return{updateManagementTeamController:new Ti(br())}}function Ny(){return{deleteManagementTeamController:new xi(br())}}var Gt=oE(),{authMiddleware:sd}=Z();Gt.post("/",(o,e,r)=>{sd.authenticated(o,e,r)},async(o,e)=>{let{createManagementTeamController:r}=qy();await r.handle(o,e)});Gt.get("/",async(o,e)=>{let{findManagementTeamsController:r}=Uy();await r.handle(o,e)});Gt.get("/:id",async(o,e)=>{let{findManagementTeamByIdController:r}=ky();await r.handle(o,e)});Gt.put("/:id",(o,e,r)=>{sd.authenticated(o,e,r)},async(o,e)=>{let{updateManagementTeamController:r}=Oy();await r.handle(o,e)});Gt.delete("/:id",(o,e,r)=>{sd.authenticated(o,e,r)},async(o,e)=>{let{deleteManagementTeamController:r}=Ny();await r.handle(o,e)});import{Router as sE}from"express";var Zs=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.meeting.create({data:e})}async update(e){await this.prisma.meeting.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.meeting.delete({where:{id:e}})}async find({pagination:{offset:e,limit:r},filter:{title:t,format:i,status:n,orderBy:s}}){let m={},c=[];return i&&(m.format=i),n&&(m.status=n),t&&c.push({title:{contains:t,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.meeting.findMany({where:m,include:{minutes:!0},orderBy:s?{scheduledAt:s}:{scheduledAt:"desc"},skip:e,take:r})}async findById(e){return await this.prisma.meeting.findFirst({where:{id:e},include:{minutes:!0}})}async findByStatus(e){return await this.prisma.meeting.findMany({where:{status:e},include:{minutes:!0}})}async count({filter:{title:e,format:r,status:t}}){let i={},n=[];return r&&(i.format=r),t&&(i.status=t),e&&n.push({title:{contains:e,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.meeting.count({where:i})}};function Ye(){return new Zs(L)}function Gy(){return{createMeetingController:new qi(Ye())}}function Ly(){return{findMeetingsController:new Gi(Ye())}}function Wy(){return{findMeetingByIdController:new ki(Ye())}}function _y(){return{findMeetingByStatusController:new Ni(Ye())}}function zy(){return{updateMeetingController:new Li(Ye())}}function Hy(){return{deleteMeetingController:new Ui(Ye())}}import{extendZodWithOpenApi as iE}from"@asteasolutions/zod-to-openapi";import ad from"zod";iE(ad);var nE=ad.object({meetingId:ad.uuid()}),Ks=class{constructor(e,r){this.meetingMinuteRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{meetingId:t}=nE.parse({meetingId:e.params.meetingId}),i=await this.meetingMinuteRepository.findByMeetingId(t);if(!i)throw new p("A ata n\xE3o existe para esta reuni\xE3o.");return i.documentUrl&&await this.firebaseStorageService.deleteFile({fileUrl:i.documentUrl}),await this.meetingMinuteRepository.deleteByMeetingId(i.id),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var Js=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.meetingMinute.create({data:e,include:{meeting:!0}})}async update(e){await this.prisma.meetingMinute.update({where:{id:e.id},data:e})}async deleteByMeetingId(e){await this.prisma.meetingMinute.delete({where:{id:e}})}async findByMeetingId(e){return await this.prisma.meetingMinute.findFirst({where:{meetingId:e},include:{meeting:!0}})}};function to(){return new Js(L)}function Vy(){return{createMeetingMinuteController:new Ai(to(),Ye(),F())}}function Zy(){return{findMeetingMinuteByMeetingIdController:new Di(to())}}function Ky(){return{updateMeetingMinuteByMeetingIdController:new Fi(to(),F())}}function Jy(){return{deleteMeetingMinuteByMeetingIdController:new Ks(to(),F())}}var je=sE(),{authMiddleware:Cr}=Z();je.post("/",(o,e,r)=>{Cr.authenticated(o,e,r)},async(o,e)=>{let{createMeetingController:r}=Gy();await r.handle(o,e)});je.get("/",async(o,e)=>{let{findMeetingsController:r}=Ly();await r.handle(o,e)});je.get("/:id",async(o,e)=>{let{findMeetingByIdController:r}=Wy();await r.handle(o,e)});je.get("/status/:status",async(o,e)=>{let{findMeetingByStatusController:r}=_y();await r.handle(o,e)});je.put("/:id",(o,e,r)=>{Cr.authenticated(o,e,r)},async(o,e)=>{let{updateMeetingController:r}=zy();await r.handle(o,e)});je.delete("/:id",(o,e,r)=>{Cr.authenticated(o,e,r)},async(o,e)=>{let{deleteMeetingController:r}=Hy();await r.handle(o,e)});je.post("/:meetingId/minute",(o,e,r)=>{Cr.authenticated(o,e,r)},K.single("document"),async(o,e)=>{let{createMeetingMinuteController:r}=Vy();await r.handle(o,e)});je.get("/:meetingId/minute",async(o,e)=>{let{findMeetingMinuteByMeetingIdController:r}=Zy();await r.handle(o,e)});je.put("/:meetingId/minute",(o,e,r)=>{Cr.authenticated(o,e,r)},K.single("document"),async(o,e)=>{let{updateMeetingMinuteByMeetingIdController:r}=Ky();await r.handle(o,e)});je.delete("/:meetingId/minute",(o,e,r)=>{Cr.authenticated(o,e,r)},async(o,e)=>{let{deleteMeetingMinuteByMeetingIdController:r}=Jy();await r.handle(o,e)});import{Router as gE}from"express";import{extendZodWithOpenApi as aE}from"@asteasolutions/zod-to-openapi";import md from"zod";aE(md);var mE=md.object({id:md.string()}),Ys=class{constructor(e,r){this.newsRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t}=mE.parse(e.params),i=e.user.id,n=await this.newsRepository.findById(t);if(!n)throw new p("Not\xEDcia n\xE3o encontrada.");if(n.author.id!==i)throw new be("Sem permiss\xE3o.");await Promise.all([this.newsRepository.delete(t),this.firebaseStorageService.deleteFile({fileUrl:n.imageUrl})]),r.sendStatus(200)}catch(t){if(t instanceof Error)throw new a(t.message)}}};import{extendZodWithOpenApi as cE}from"@asteasolutions/zod-to-openapi";import wr from"zod";var pE=5,Yy=1024,dE=Yy*Yy,lE=pE*dE;cE(wr);var uE=wr.object({id:wr.string(),title:wr.string().min(1),content:wr.string().min(1),image:wr.any().optional().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=lE,"A imagem deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.")}),Xs=class{constructor(e,r){this.newsRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{id:t,title:i,content:n,image:s}=uE.parse({id:e.params.id,image:e.file,...e.body}),m=await this.newsRepository.findById(t);if(!m)throw new p("Not\xEDcia n\xE3o encontrada.");let c=e.user.id;if(m.author.id!==c)throw new be("Sem permiss\xE3o.");let d=m.imageUrl||"";s&&m.imageUrl&&(d=await this.firebaseStorageService.updateFile({file:s,folder:M.NEWS,id:t,fileUrl:m.imageUrl}));let h=await this.newsRepository.update({id:t,title:i,content:n,imageUrl:d});r.status(200).json(h)}catch(t){if(t instanceof Error)throw new a(t.message)}}};function Xy(){return{createNewsController:new Wi(Ve(),F())}}function $y(){return{findAllNewsController:new Vi(Ve())}}function Qy(){return{findNewsByIdController:new Hi(Ve())}}function eh(){return{findNewsByAuthorIdController:new _i(Ve())}}function th(){return{updateNewsController:new Xs(Ve(),F())}}function rh(){return{deleteNewsController:new Ys(Ve(),F())}}var bt=gE(),{authMiddleware:cd}=Z();bt.post("/",(o,e,r)=>{cd.authenticated(o,e,r)},K.single("image"),async(o,e)=>{let{createNewsController:r}=Xy();await r.handle(o,e)});bt.get("/",async(o,e)=>{let{findAllNewsController:r}=$y();await r.handle(o,e)});bt.get("/:id",async(o,e)=>{let{findNewsByIdController:r}=Qy();await r.handle(o,e)});bt.get("/author/:authorId",async(o,e)=>{let{findNewsByAuthorIdController:r}=eh();await r.handle(o,e)});bt.put("/:id",(o,e,r)=>{cd.authenticated(o,e,r)},K.single("image"),async(o,e)=>{let{updateNewsController:r}=th();await r.handle(o,e)});bt.delete("/:id",(o,e,r)=>{cd.authenticated(o,e,r)},async(o,e)=>{let{deleteNewsController:r}=rh();await r.handle(o,e)});import{Router as fE}from"express";var $s=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.partner.create({data:e})}async update(e){await this.prisma.partner.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.partner.delete({where:{id:e}})}async find({pagination:e,filter:{name:r,description:t,category:i,isActive:n,orderBy:s}}){let m={},c=[];return n!==void 0&&(m.isActive=n),r&&c.push({name:{contains:r,mode:"insensitive"}}),t&&c.push({description:{contains:t,mode:"insensitive"}}),i&&c.push({category:{contains:i,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.partner.findMany({where:m,orderBy:s?{updatedAt:s}:{updatedAt:"desc"},...e&&{skip:e.offset,take:e.limit}})}async findById(e){return await this.prisma.partner.findFirst({where:{id:e}})}async count({filter:{name:e,description:r,category:t,isActive:i}}){let n={},s=[];return i!==void 0&&(n.isActive=i),e&&s.push({name:{contains:e,mode:"insensitive"}}),r&&s.push({description:{contains:r,mode:"insensitive"}}),t&&s.push({category:{contains:t,mode:"insensitive"}}),s.length>0&&(n.OR=s),await this.prisma.partner.count({where:n})}};function Sr(){return new $s(L)}function oh(){return{createPartnerController:new Zi(Sr(),F())}}function ih(){return{findPartnersController:new Xi(Sr())}}function nh(){return{findPartnerByIdController:new Ji(Sr())}}function sh(){return{updatePartnerController:new $i(Sr(),F())}}function ah(){return{deletePartnerController:new Ki(Sr(),F())}}var Lt=fE(),{authMiddleware:pd}=Z();Lt.post("/",(o,e,r)=>{pd.authenticated(o,e,r)},K.single("logo"),async(o,e)=>{let{createPartnerController:r}=oh();await r.handle(o,e)});Lt.get("/",async(o,e)=>{let{findPartnersController:r}=ih();await r.handle(o,e)});Lt.get("/:id",async(o,e)=>{let{findPartnerByIdController:r}=nh();await r.handle(o,e)});Lt.put("/:id",(o,e,r)=>{pd.authenticated(o,e,r)},K.single("logo"),async(o,e)=>{let{updatePartnerController:r}=sh();await r.handle(o,e)});Lt.delete("/:id",(o,e,r)=>{pd.authenticated(o,e,r)},async(o,e)=>{let{deletePartnerController:r}=ah();await r.handle(o,e)});import{Router as yE}from"express";function mh(){return{createPendencyController:new Qi(he(),Rt(),F())}}function ch(){return{findPendenciesController:new rn(Rt())}}function ph(){return{findPendencyByIdController:new on(Rt())}}function dh(){return{updatePendencyController:new nn(Rt(),F())}}function lh(){return{deletePendencyController:new tn(Rt(),F())}}var Wt=yE(),{authMiddleware:ro}=Z();Wt.post("/:user_id",(o,e,r)=>{ro.isAdmin(o,e,r)},K.single("document"),async(o,e)=>{let{createPendencyController:r}=mh();await r.handle(o,e)});Wt.get("/",(o,e,r)=>{ro.isAdmin(o,e,r)},async(o,e)=>{let{findPendenciesController:r}=ch();await r.handle(o,e)});Wt.get("/:pendency_id",(o,e,r)=>{ro.isAdmin(o,e,r)},async(o,e)=>{let{findPendencyByIdController:r}=ph();await r.handle(o,e)});Wt.put("/:pendency_id",(o,e,r)=>{ro.isAdmin(o,e,r)},K.single("document"),async(o,e)=>{let{updatePendencyController:r}=dh();await r.handle(o,e)});Wt.delete("/:pendency_id",(o,e,r)=>{ro.isAdmin(o,e,r)},async(o,e)=>{let{deletePendencyController:r}=lh();await r.handle(o,e)});import{Router as wE}from"express";import{extendZodWithOpenApi as hE}from"@asteasolutions/zod-to-openapi";import Xe from"zod";var RE=5,uh=1024,IE=uh*uh,bE=RE*IE;hE(Xe);var CE=Xe.object({title:Xe.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),description:Xe.string().optional(),startDate:Xe.coerce.date(),endDate:Xe.coerce.date(),contact:Xe.string().min(1,"Contato \xE9 obrigat\xF3rio."),registrationLink:Xe.url().optional(),image:Xe.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=bE,"A imagem deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.")}),Qs=class{constructor(e,r){this.postGraduateProgramRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{title:t,description:i,startDate:n,endDate:s,contact:m,registrationLink:c,image:d}=CE.parse({...e.body,image:e.file}),h=await this.postGraduateProgramRepository.create({title:t,description:i,startDate:n,endDate:s,contact:m,registrationLink:c||void 0}),j=await this.firebaseStorageService.uploadFile({file:d,folder:M.POST_GRADUATE_PROGRAM,id:h.id});return await this.postGraduateProgramRepository.update({id:h.id,imageUrl:j}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var ea=class{constructor(e){this.prisma=e}async create({title:e,imageUrl:r,description:t,startDate:i,endDate:n,contact:s,registrationLink:m}){return await this.prisma.postGraduateProgram.create({data:{title:e,imageUrl:r,description:t,startDate:i,endDate:n,contact:s,registrationLink:m}})}async find({pagination:{offset:e,limit:r},filter:{description:t,orderBy:i,title:n,contact:s}}){let m={},c=[];return n&&c.push({title:{contains:n,mode:"insensitive"}}),t&&c.push({description:{contains:t,mode:"insensitive"}}),s&&c.push({contact:{contains:s,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.postGraduateProgram.findMany({where:m,orderBy:{updatedAt:i},skip:e,take:r})}async findById(e){return await this.prisma.postGraduateProgram.findFirst({where:{id:e}})}async update({id:e,title:r,imageUrl:t,description:i,startDate:n,endDate:s,contact:m,registrationLink:c}){await this.prisma.postGraduateProgram.update({where:{id:e},data:{title:r,imageUrl:t,description:i,startDate:n,endDate:s,contact:m,registrationLink:c}})}async deleteById(e){await this.prisma.postGraduateProgram.delete({where:{id:e}})}async count({filter:{description:e,title:r,contact:t}}){let i={},n=[];return r&&n.push({title:{contains:r,mode:"insensitive"}}),e&&n.push({description:{contains:e,mode:"insensitive"}}),t&&n.push({contact:{contains:t,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.postGraduateProgram.count({where:i})}};function vr(){return new ea(L)}function gh(){return{createPostGraduateProgramController:new Qs(vr(),F())}}function fh(){return{findPostGraduateProgramsController:new cn(vr())}}function yh(){return{findPostGraduateProgramByIdController:new mn(vr())}}function hh(){return{updatePostGraduateProgramController:new pn(vr(),F())}}function Rh(){return{deletePostGraduateProgramController:new an(vr(),F())}}var _t=wE(),{authMiddleware:oo}=Z();_t.post("/",(o,e,r)=>{oo.isAdmin(o,e,r)},K.single("image"),async(o,e)=>{let{createPostGraduateProgramController:r}=gh();await r.handle(o,e)});_t.get("/",(o,e,r)=>{oo.isAdmin(o,e,r)},async(o,e)=>{let{findPostGraduateProgramsController:r}=fh();await r.handle(o,e)});_t.get("/:id",(o,e,r)=>{oo.isAdmin(o,e,r)},async(o,e)=>{let{findPostGraduateProgramByIdController:r}=yh();await r.handle(o,e)});_t.put("/:id",(o,e,r)=>{oo.isAdmin(o,e,r)},K.single("image"),async(o,e)=>{let{updatePostGraduateProgramController:r}=hh();await r.handle(o,e)});_t.delete("/:id",(o,e,r)=>{oo.isAdmin(o,e,r)},async(o,e)=>{let{deletePostGraduateProgramController:r}=Rh();await r.handle(o,e)});import{Router as xE}from"express";import{extendZodWithOpenApi as SE}from"@asteasolutions/zod-to-openapi";import Er from"zod";var vE=1,EE=7;SE(Er);var jE=Er.object({page:Er.coerce.number().min(1).default(vE),limit:Er.coerce.number().min(1).default(EE),role:Er.string().optional(),orderBy:Er.enum(["asc","desc"]).optional()}),ta=class{constructor(e){this.referenceCenterTeamMemberRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=jE.parse(e.query),s=i*t-i,[m,c]=await Promise.all([this.referenceCenterTeamMemberRepository.find({pagination:{offset:s,limit:i},filter:n}),this.referenceCenterTeamMemberRepository.count({filter:n})]),d=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:d,offset:s,limit:i,members:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};var ra=class{constructor(e){this.prisma=e}async create(e){await this.prisma.referenceCenterTeamMember.create({data:{...e}})}async update(e){let{id:r,...t}=e;await this.prisma.referenceCenterTeamMember.update({where:{id:r},data:t})}async deleteById(e){await this.prisma.referenceCenterTeamMember.delete({where:{id:e}})}async find({pagination:e,filter:{role:r,orderBy:t}}){let i={};return r&&(i.role={contains:r,mode:"insensitive"}),await this.prisma.referenceCenterTeamMember.findMany({where:i,include:{user:{omit:{passwordHash:!0}}},orderBy:{updatedAt:t??"desc"},...e&&{skip:e.offset,take:e.limit}})}async findById(e){return await this.prisma.referenceCenterTeamMember.findFirst({where:{id:e},include:{user:{omit:{passwordHash:!0}}}})}async count({filter:{role:e}}){let r={};return e&&(r.role={contains:e,mode:"insensitive"}),await this.prisma.referenceCenterTeamMember.count({where:r})}};function jr(){return new ra(L)}function Ih(){return{createReferenceCenterTeamMemberController:new dn(jr())}}function bh(){return{findReferenceCenterTeamMembersController:new ta(jr())}}function Ch(){return{findReferenceCenterTeamMemberByIdController:new un(jr())}}function wh(){return{updateReferenceCenterTeamMemberController:new fn(jr())}}function Sh(){return{deleteReferenceCenterTeamMemberController:new ln(jr())}}var zt=xE(),{authMiddleware:dd}=Z();zt.post("/",(o,e,r)=>{dd.authenticated(o,e,r)},async(o,e)=>{let{createReferenceCenterTeamMemberController:r}=Ih();await r.handle(o,e)});zt.get("/",async(o,e)=>{let{findReferenceCenterTeamMembersController:r}=bh();await r.handle(o,e)});zt.get("/:id",async(o,e)=>{let{findReferenceCenterTeamMemberByIdController:r}=Ch();await r.handle(o,e)});zt.put("/:id",(o,e,r)=>{dd.authenticated(o,e,r)},async(o,e)=>{let{updateReferenceCenterTeamMemberController:r}=wh();await r.handle(o,e)});zt.delete("/:id",(o,e,r)=>{dd.authenticated(o,e,r)},async(o,e)=>{let{deleteReferenceCenterTeamMemberController:r}=Sh();await r.handle(o,e)});import{Router as ME}from"express";var oa=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.regiment.create({data:e})}async update(e){await this.prisma.regiment.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.regiment.delete({where:{id:e}})}async find({pagination:{offset:e,limit:r},filter:{title:t,status:i,orderBy:n}}){let s={},m=[];return i&&(s.status=i),t&&m.push({title:{contains:t,mode:"insensitive"}}),m.length>0&&(s.OR=m),await this.prisma.regiment.findMany({where:s,orderBy:n?{updatedAt:n}:{updatedAt:"desc"},skip:e,take:r})}async findById(e){return await this.prisma.regiment.findFirst({where:{id:e}})}async findByStatus(e){return await this.prisma.regiment.findMany({where:{status:e}})}async count({filter:{title:e,status:r}}){let t={},i=[];return r&&(t.status=r),e&&i.push({title:{contains:e,mode:"insensitive"}}),i.length>0&&(t.OR=i),await this.prisma.regiment.count({where:t})}};function Ht(){return new oa(L)}function vh(){return{createRegimentController:new yn(Ht(),F())}}function Eh(){return{findRegimentsController:new Cn(Ht())}}function jh(){return{findRegimentByIdController:new Rn(Ht())}}function xh(){return{findRegimentByStatusController:new bn(Ht())}}function Mh(){return{updateRegimentController:new wn(Ht(),F())}}function Ph(){return{deleteRegimentController:new hn(Ht(),F())}}var Ct=ME(),{authMiddleware:ld}=Z();Ct.post("/",(o,e,r)=>{ld.authenticated(o,e,r)},K.single("document"),async(o,e)=>{let{createRegimentController:r}=vh();await r.handle(o,e)});Ct.get("/",async(o,e)=>{let{findRegimentsController:r}=Eh();await r.handle(o,e)});Ct.get("/:id",async(o,e)=>{let{findRegimentByIdController:r}=jh();await r.handle(o,e)});Ct.get("/status/:status",async(o,e)=>{let{findRegimentByStatusController:r}=xh();await r.handle(o,e)});Ct.put("/:id",(o,e,r)=>{ld.authenticated(o,e,r)},K.single("document"),async(o,e)=>{let{updateRegimentController:r}=Mh();await r.handle(o,e)});Ct.delete("/:id",(o,e,r)=>{ld.authenticated(o,e,r)},async(o,e)=>{let{deleteRegimentController:r}=Ph();await r.handle(o,e)});import{Router as FE}from"express";import{extendZodWithOpenApi as PE}from"@asteasolutions/zod-to-openapi";import ud from"zod";PE(ud);var TE=ud.object({id:ud.string().uuid("ID inv\xE1lido")}),ia=class{constructor(e){this.regionalCongressGalleryRepository=e}async handle(e,r){try{let{id:t}=TE.parse(e.params),i=await this.regionalCongressGalleryRepository.findById(t);if(!i)throw new p("Item de galeria n\xE3o encontrado");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var na=class{constructor(e){this.prisma=e}async create(e){await this.prisma.regionalCongress.create({data:e})}async update(e){await this.prisma.regionalCongress.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.regionalCongress.delete({where:{id:e}})}async find({pagination:{offset:e,limit:r},filter:{title:t,edition:i,location:n,orderBy:s}}){let m={},c=[];return i&&c.push({edition:{equals:i}}),t&&c.push({title:{contains:t,mode:"insensitive"}}),n&&c.push({location:{contains:n,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.regionalCongress.findMany({where:m,include:{regionalCongressPartners:!0,regionalCongressGalleryItems:!0},orderBy:s?{startDate:s}:{startDate:"desc"},skip:e,take:r})}async findById(e){return await this.prisma.regionalCongress.findFirst({where:{id:e},include:{regionalCongressPartners:!0,regionalCongressGalleryItems:!0}})}async findByEdition(e){return await this.prisma.regionalCongress.findMany({where:{edition:e},include:{regionalCongressPartners:!0,regionalCongressGalleryItems:!0}})}async count({filter:{title:e,edition:r,location:t}}){let i={},n=[];return r&&n.push({edition:{equals:r}}),e&&n.push({title:{contains:e,mode:"insensitive"}}),t&&n.push({location:{contains:t,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.regionalCongress.count({where:i})}};function Fe(){return new na(L)}var sa=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.regionalCongressGalleryItem.create({data:e})}async update(e){await this.prisma.regionalCongressGalleryItem.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.regionalCongressGalleryItem.delete({where:{id:e}})}async findByCongressId({pagination:e,filter:r}){return await this.prisma.regionalCongressGalleryItem.findMany({where:{congressId:r.congressId,...r.caption&&{caption:{contains:r.caption,mode:"insensitive"}}},skip:e.offset,take:e.limit})}async findById(e){return await this.prisma.regionalCongressGalleryItem.findFirst({where:{id:e}})}async count({filter:e}){return await this.prisma.regionalCongressGalleryItem.count({where:{congressId:e.congressId,...e.caption&&{caption:{contains:e.caption,mode:"insensitive"}}}})}};function xr(){return new sa(L)}function Th(){return{createRegionalCongressGalleryController:new Sn(xr(),Fe(),F())}}function Ah(){return{findRegionalCongressGalleriesByCongressIdController:new jn(xr())}}function Dh(){return{findRegionalCongressGalleryByIdController:new ia(xr())}}function Fh(){return{updateRegionalCongressGalleryController:new xn(xr(),F())}}function Bh(){return{deleteRegionalCongressGalleryController:new vn(xr())}}import{extendZodWithOpenApi as AE}from"@asteasolutions/zod-to-openapi";import gd from"zod";AE(gd);var DE=gd.object({id:gd.string().uuid("ID inv\xE1lido")}),aa=class{constructor(e){this.regionalCongressPartnerRepository=e}async handle(e,r){try{let{id:t}=DE.parse(e.params),i=await this.regionalCongressPartnerRepository.findById(t);if(!i)throw new p("Parceiro n\xE3o encontrado");return r.status(200).json(i)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var ma=class{constructor(e){this.prisma=e}async create(e){return await this.prisma.regionalCongressPartner.create({data:e})}async update(e){await this.prisma.regionalCongressPartner.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.regionalCongressPartner.delete({where:{id:e}})}async findByCongressId(e){return await this.prisma.regionalCongressPartner.findMany({where:{congressId:e.filter.congressId,name:e.filter.name?{contains:e.filter.name,mode:"insensitive"}:void 0},skip:e.pagination?.offset,take:e.pagination?.limit})}async findById(e){return await this.prisma.regionalCongressPartner.findFirst({where:{id:e}})}async count(e){return await this.prisma.regionalCongressPartner.count({where:{congressId:e.filter.congressId,name:e.filter.name?{contains:e.filter.name,mode:"insensitive"}:void 0}})}};function Mr(){return new ma(L)}function qh(){return{createRegionalCongressPartnerController:new Mn(Mr(),Fe(),F())}}function Uh(){return{findRegionalCongressPartnersByCongressIdController:new An(Mr())}}function kh(){return{findRegionalCongressPartnerByIdController:new aa(Mr())}}function Oh(){return{updateRegionalCongressPartnerController:new Dn(Mr(),F())}}function Nh(){return{deleteRegionalCongressPartnerController:new Pn(Mr())}}function Gh(){return{createRegionalCongressController:new Fn(Fe())}}function Lh(){return{findRegionalCongressesController:new On(Fe())}}function Wh(){return{findRegionalCongressByIdController:new Un(Fe())}}function _h(){return{findRegionalCongressByEditionController:new qn(Fe())}}function zh(){return{updateRegionalCongressController:new Nn(Fe())}}function Hh(){return{deleteRegionalCongressController:new Bn(Fe())}}var ce=FE(),{authMiddleware:$e}=Z();ce.post("/",(o,e,r)=>{$e.authenticated(o,e,r)},async(o,e)=>{let{createRegionalCongressController:r}=Gh();await r.handle(o,e)});ce.get("/",async(o,e)=>{let{findRegionalCongressesController:r}=Lh();await r.handle(o,e)});ce.get("/:id",async(o,e)=>{let{findRegionalCongressByIdController:r}=Wh();await r.handle(o,e)});ce.get("/edition/:edition",async(o,e)=>{let{findRegionalCongressByEditionController:r}=_h();await r.handle(o,e)});ce.put("/:id",(o,e,r)=>{$e.authenticated(o,e,r)},async(o,e)=>{let{updateRegionalCongressController:r}=zh();await r.handle(o,e)});ce.delete("/:id",(o,e,r)=>{$e.authenticated(o,e,r)},async(o,e)=>{let{deleteRegionalCongressController:r}=Hh();await r.handle(o,e)});ce.post("/:congressId/gallery",(o,e,r)=>{$e.authenticated(o,e,r)},K.single("image"),async(o,e)=>{let{createRegionalCongressGalleryController:r}=Th();await r.handle(o,e)});ce.get("/:congressId/gallery",async(o,e)=>{let{findRegionalCongressGalleriesByCongressIdController:r}=Ah();await r.handle(o,e)});ce.get("/gallery/:id",async(o,e)=>{let{findRegionalCongressGalleryByIdController:r}=Dh();await r.handle(o,e)});ce.put("/gallery/:id",(o,e,r)=>{$e.authenticated(o,e,r)},K.single("image"),async(o,e)=>{let{updateRegionalCongressGalleryController:r}=Fh();await r.handle(o,e)});ce.delete("/gallery/:id",(o,e,r)=>{$e.authenticated(o,e,r)},async(o,e)=>{let{deleteRegionalCongressGalleryController:r}=Bh();await r.handle(o,e)});ce.post("/:congressId/partner",(o,e,r)=>{$e.authenticated(o,e,r)},K.single("logo"),async(o,e)=>{let{createRegionalCongressPartnerController:r}=qh();await r.handle(o,e)});ce.get("/:congressId/partner",async(o,e)=>{let{findRegionalCongressPartnersByCongressIdController:r}=Uh();await r.handle(o,e)});ce.get("/partner/:id",async(o,e)=>{let{findRegionalCongressPartnerByIdController:r}=kh();await r.handle(o,e)});ce.put("/partner/:id",(o,e,r)=>{$e.authenticated(o,e,r)},K.single("logo"),async(o,e)=>{let{updateRegionalCongressPartnerController:r}=Oh();await r.handle(o,e)});ce.delete("/partner/:id",(o,e,r)=>{$e.authenticated(o,e,r)},async(o,e)=>{let{deleteRegionalCongressPartnerController:r}=Nh();await r.handle(o,e)});import{Router as OE}from"express";import{extendZodWithOpenApi as BE}from"@asteasolutions/zod-to-openapi";import ge from"zod";var qE=1,UE=9;BE(ge);var kE=ge.object({page:ge.coerce.number().min(1).default(qE),limit:ge.coerce.number().min(1).default(UE),userId:ge.string().optional(),registrationNumber:ge.string().optional(),name:ge.string().optional(),emailAddress:ge.string().optional(),mainEtps:ge.string().optional(),formations:ge.string().optional(),occupations:ge.string().optional(),institutions:ge.string().optional(),biography:ge.string().optional(),orderBy:ge.enum(["asc","desc"]).default("desc")}),ca=class{constructor(e){this.researcherRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=kE.parse(e.query),s=i*t-i,[m,c]=await Promise.all([this.researcherRepository.find({pagination:{offset:s,limit:i},filter:{userName:n.name,...n}}),this.researcherRepository.count({filter:{userName:n.name,...n}})]),d=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:d,offset:s,limit:i,researchers:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};var pa=class{constructor(e){this.prisma=e}async create(e){await this.prisma.researcher.create({data:e})}async update(e){await this.prisma.researcher.update({where:{id:e.id},data:e})}async deleteById(e){await this.prisma.researcher.delete({where:{id:e}})}async find({pagination:e,filter:{biography:r,degrees:t,formations:i,institutions:n,mainEtps:s,occupations:m,orderBy:c,registrationNumber:d,seniority:h,userId:j,userName:U}}){let Q={},te=[];return U&&te.push({user:{name:{contains:U,mode:"insensitive"}}}),d&&te.push({registrationNumber:{contains:d,mode:"insensitive"}}),s&&te.push({mainEtps:{contains:s,mode:"insensitive"}}),i&&te.push({formations:{contains:i,mode:"insensitive"}}),m&&te.push({occupations:{contains:m,mode:"insensitive"}}),n&&te.push({institutions:{contains:n,mode:"insensitive"}}),r&&te.push({biography:{contains:r,mode:"insensitive"}}),te.length>0&&(Q.OR=te),t&&t.length>0&&(Q.degrees={hasSome:t}),h&&(Q.seniority=h),j&&(Q.userId={equals:j}),await this.prisma.researcher.findMany({where:Q,omit:{userId:!0},include:{user:{omit:{passwordHash:!0}}},orderBy:{updatedAt:c},...e&&{skip:e.offset,take:e.limit}})}async findById(e){return await this.prisma.researcher.findFirst({where:{id:e},include:{user:{omit:{passwordHash:!0}}}})}async findByUserId(e){return await this.prisma.researcher.findFirst({where:{userId:e},include:{user:{omit:{passwordHash:!0}}}})}async findByRegistrationNumber(e){return await this.prisma.researcher.findFirst({where:{registrationNumber:e},include:{user:{omit:{passwordHash:!0}}}})}async count({filter:{biography:e,degrees:r,formations:t,institutions:i,mainEtps:n,occupations:s,registrationNumber:m,seniority:c,userId:d,userName:h}}){let j={},U=[];return h&&U.push({user:{name:{contains:h,mode:"insensitive"}}}),m&&U.push({registrationNumber:{contains:m,mode:"insensitive"}}),U.length>0&&(j.OR=U),n&&(j.mainEtps={contains:n,mode:"insensitive"}),t&&(j.formations={contains:t,mode:"insensitive"}),r&&r.length>0&&(j.degrees={hasSome:r}),s&&(j.occupations={contains:s,mode:"insensitive"}),c&&(j.seniority=c),i&&(j.institutions={contains:i,mode:"insensitive"}),e&&(j.biography={contains:e,mode:"insensitive"}),d&&(j.userId={equals:d}),await this.prisma.researcher.count({where:j})}};function Vt(){return new pa(L)}function Vh(){return{createResearcherController:new Gn(Vt())}}function Zh(){return{findResearchersController:new ca(Vt())}}function Kh(){return{findResearcherByIdController:new Wn(Vt())}}function Jh(){return{findResearcherByUserIdController:new zn(Vt())}}function Yh(){return{updateResearcherController:new Hn(Vt())}}function Xh(){return{deleteResearcherController:new Ln(Vt())}}var wt=OE(),{authMiddleware:fd}=Z();wt.post("/",(o,e,r)=>{fd.authenticated(o,e,r)},async(o,e)=>{let{createResearcherController:r}=Vh();await r.handle(o,e)});wt.get("/",async(o,e)=>{let{findResearchersController:r}=Zh();await r.handle(o,e)});wt.get("/:id",async(o,e)=>{let{findResearcherByIdController:r}=Kh();await r.handle(o,e)});wt.get("/user/:userId",async(o,e)=>{let{findResearcherByUserIdController:r}=Jh();await r.handle(o,e)});wt.put("/:id",(o,e,r)=>{fd.authenticated(o,e,r)},async(o,e)=>{let{updateResearcherController:r}=Yh();await r.handle(o,e)});wt.delete("/:id",(o,e,r)=>{fd.authenticated(o,e,r)},async(o,e)=>{let{deleteResearcherController:r}=Xh();await r.handle(o,e)});import{Router as LE}from"express";import{extendZodWithOpenApi as NE}from"@asteasolutions/zod-to-openapi";import pe from"zod";NE(pe);var GE=pe.object({title:pe.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),author:pe.string().min(1,"Autor \xE9 obrigat\xF3rio."),journal:pe.string().optional(),volume:pe.string().optional(),edition:pe.string().optional(),pageStart:pe.coerce.number().optional(),pageEnd:pe.coerce.number().optional(),startDate:pe.coerce.date(),endDate:pe.coerce.date(),city:pe.string().optional(),state:pe.string().optional(),country:pe.string().optional(),publisher:pe.string().optional(),description:pe.string().optional(),year:pe.coerce.number().optional(),accessUrl:pe.url().optional()}),da=class{constructor(e){this.scientificArticlesRepository=e}async handle(e,r){try{let{title:t,author:i,journal:n,volume:s,edition:m,pageStart:c,pageEnd:d,startDate:h,endDate:j,city:U,state:Q,country:te,publisher:fe,description:Be,year:Ur,accessUrl:Sa}=GE.parse(e.body);return await this.scientificArticlesRepository.create({title:t,author:i,journal:n,volume:s,edition:m,pageStart:c,pageEnd:d,startDate:h,endDate:j,city:U,state:Q,country:te,publisher:fe,description:Be,year:Ur,accessUrl:Sa}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var la=class{constructor(e){this.prisma=e}async create({title:e,author:r,journal:t,volume:i,edition:n,pageStart:s,pageEnd:m,startDate:c,endDate:d,city:h,state:j,country:U,publisher:Q,description:te,year:fe,accessUrl:Be}){return await this.prisma.scientificArticle.create({data:{title:e,author:r,journal:t,volume:i,edition:n,pageStart:s,pageEnd:m,startDate:c,endDate:d,city:h,state:j,country:U,publisher:Q,description:te,year:fe,accessUrl:Be}})}async find({pagination:{offset:e,limit:r},filter:{title:t,author:i,journal:n,orderBy:s}}){let m={},c=[];return t&&c.push({title:{contains:t,mode:"insensitive"}}),i&&c.push({author:{contains:i,mode:"insensitive"}}),n&&c.push({journal:{contains:n,mode:"insensitive"}}),c.length>0&&(m.OR=c),await this.prisma.scientificArticle.findMany({where:m,orderBy:{updatedAt:s},skip:e,take:r})}async findById(e){return await this.prisma.scientificArticle.findFirst({where:{id:e}})}async update({id:e,title:r,author:t,journal:i,volume:n,edition:s,pageStart:m,pageEnd:c,startDate:d,endDate:h,city:j,state:U,country:Q,publisher:te,description:fe,year:Be,accessUrl:Ur}){await this.prisma.scientificArticle.update({where:{id:e},data:{title:r,author:t,journal:i,volume:n,edition:s,pageStart:m,pageEnd:c,startDate:d,endDate:h,city:j,state:U,country:Q,publisher:te,description:fe,year:Be,accessUrl:Ur}})}async deleteById(e){await this.prisma.scientificArticle.delete({where:{id:e}})}async count({filter:{title:e,author:r,journal:t}}){let i={},n=[];return e&&n.push({title:{contains:e,mode:"insensitive"}}),r&&n.push({author:{contains:r,mode:"insensitive"}}),t&&n.push({journal:{contains:t,mode:"insensitive"}}),n.length>0&&(i.OR=n),await this.prisma.scientificArticle.count({where:i})}};function Pr(){return new la(L)}function $h(){return{createScientificArticleController:new da(Pr())}}function Qh(){return{findScientificArticlesController:new Kn(Pr())}}function eR(){return{findScientificArticleByIdController:new Zn(Pr())}}function tR(){return{updateScientificArticleController:new Jn(Pr())}}function rR(){return{deleteScientificArticleController:new Vn(Pr())}}var Zt=LE(),{authMiddleware:io}=Z();Zt.post("/",(o,e,r)=>{io.isAdmin(o,e,r)},async(o,e)=>{let{createScientificArticleController:r}=$h();await r.handle(o,e)});Zt.get("/",(o,e,r)=>{io.isAdmin(o,e,r)},async(o,e)=>{let{findScientificArticlesController:r}=Qh();await r.handle(o,e)});Zt.get("/:id",(o,e,r)=>{io.isAdmin(o,e,r)},async(o,e)=>{let{findScientificArticleByIdController:r}=eR();await r.handle(o,e)});Zt.put("/:id",(o,e,r)=>{io.isAdmin(o,e,r)},async(o,e)=>{let{updateScientificArticleController:r}=tR();await r.handle(o,e)});Zt.delete("/:id",(o,e,r)=>{io.isAdmin(o,e,r)},async(o,e)=>{let{deleteScientificArticleController:r}=rR();await r.handle(o,e)});import{Router as ZE}from"express";import{extendZodWithOpenApi as WE}from"@asteasolutions/zod-to-openapi";import Qe from"zod";var _E=5,oR=1024,zE=oR*oR,HE=_E*zE;WE(Qe);var VE=Qe.object({name:Qe.string().min(1,"Nome \xE9 obrigat\xF3rio."),issn:Qe.string().min(1,"ISSN \xE9 obrigat\xF3rio."),description:Qe.string().min(1,"Descri\xE7\xE3o \xE9 obrigat\xF3ria."),journalUrl:Qe.url("URL da revista deve ser v\xE1lida."),directors:Qe.string().optional(),editorialBoard:Qe.string().optional(),logo:Qe.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=HE,"O logo deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.").optional()}),ua=class{constructor(e,r){this.scientificJournalRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{name:t,issn:i,description:n,journalUrl:s,directors:m,editorialBoard:c,logo:d}=VE.parse({...e.body,logo:e.file}),h=await this.scientificJournalRepository.create({name:t,issn:i,description:n,journalUrl:s,directors:m,editorialBoard:c});if(d){let j=await this.firebaseStorageService.uploadFile({file:d,folder:M.SCIENTIFIC_JOURNAL,id:h.id});await this.scientificJournalRepository.update({id:h.id,logoUrl:j})}return r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var ga=class{constructor(e){this.prisma=e}async create({name:e,issn:r,description:t,logoUrl:i,journalUrl:n,directors:s,editorialBoard:m}){return await this.prisma.scientificJournal.create({data:{name:e,issn:r,description:t,logoUrl:i,journalUrl:n,directors:s,editorialBoard:m}})}async find({pagination:{offset:e,limit:r},filter:{name:t,description:i,issn:n,directors:s,editorialBoard:m,orderBy:c}}){let d={},h=[];return t&&h.push({name:{contains:t,mode:"insensitive"}}),i&&h.push({description:{contains:i,mode:"insensitive"}}),n&&h.push({issn:{contains:n,mode:"insensitive"}}),s&&h.push({directors:{contains:s,mode:"insensitive"}}),m&&h.push({editorialBoard:{contains:m,mode:"insensitive"}}),h.length>0&&(d.OR=h),await this.prisma.scientificJournal.findMany({where:d,orderBy:{updatedAt:c},skip:e,take:r})}async findById(e){return await this.prisma.scientificJournal.findFirst({where:{id:e}})}async update({id:e,name:r,issn:t,description:i,logoUrl:n,journalUrl:s,directors:m,editorialBoard:c}){await this.prisma.scientificJournal.update({where:{id:e},data:{name:r,issn:t,description:i,logoUrl:n,journalUrl:s,directors:m,editorialBoard:c}})}async deleteById(e){await this.prisma.scientificJournal.delete({where:{id:e}})}async count({filter:{name:e,description:r,issn:t,directors:i,editorialBoard:n}}){let s={},m=[];return e&&m.push({name:{contains:e,mode:"insensitive"}}),r&&m.push({description:{contains:r,mode:"insensitive"}}),t&&m.push({issn:{contains:t,mode:"insensitive"}}),i&&m.push({directors:{contains:i,mode:"insensitive"}}),n&&m.push({editorialBoard:{contains:n,mode:"insensitive"}}),m.length>0&&(s.OR=m),await this.prisma.scientificJournal.count({where:s})}};function Tr(){return new ga(L)}function iR(){return{createScientificJournalController:new ua(Tr(),F())}}function nR(){return{findScientificJournalsController:new $n(Tr())}}function sR(){return{findScientificJournalByIdController:new Xn(Tr())}}function aR(){return{updateScientificJournalController:new Qn(Tr(),F())}}function mR(){return{deleteScientificJournalController:new Yn(Tr(),F())}}var Kt=ZE(),{authMiddleware:no}=Z();Kt.post("/",(o,e,r)=>{no.isAdmin(o,e,r)},K.single("logo"),async(o,e)=>{let{createScientificJournalController:r}=iR();await r.handle(o,e)});Kt.get("/",(o,e,r)=>{no.isAdmin(o,e,r)},async(o,e)=>{let{findScientificJournalsController:r}=nR();await r.handle(o,e)});Kt.get("/:id",(o,e,r)=>{no.isAdmin(o,e,r)},async(o,e)=>{let{findScientificJournalByIdController:r}=sR();await r.handle(o,e)});Kt.put("/:id",(o,e,r)=>{no.isAdmin(o,e,r)},K.single("logo"),async(o,e)=>{let{updateScientificJournalController:r}=aR();await r.handle(o,e)});Kt.delete("/:id",(o,e,r)=>{no.isAdmin(o,e,r)},async(o,e)=>{let{deleteScientificJournalController:r}=mR();await r.handle(o,e)});import{Router as YE}from"express";import{extendZodWithOpenApi as KE}from"@asteasolutions/zod-to-openapi";import fa from"zod";KE(fa);var JE=fa.object({role:fa.string().optional(),orderBy:fa.enum(["asc","desc"]).optional()}),ya=class{constructor(e){this.sdhcTeamMemberRepository=e}async handle(e,r){try{let t=JE.parse(e.query),i=await this.sdhcTeamMemberRepository.find({filter:t});r.status(200).json({members:i})}catch(t){if(t instanceof Error)throw new a(t.message)}}};var ha=class{constructor(e){this.prisma=e}async create(e){await this.prisma.sDHCTeamMember.create({data:{...e,order:e.order??0}})}async update(e){let{id:r,...t}=e;await this.prisma.sDHCTeamMember.update({where:{id:r},data:t})}async deleteById(e){await this.prisma.sDHCTeamMember.delete({where:{id:e}})}async find({filter:{role:e,orderBy:r}}){let t={};return e&&(t.role={contains:e,mode:"insensitive"}),await this.prisma.sDHCTeamMember.findMany({where:t,include:{user:{omit:{passwordHash:!0}}},orderBy:r?[{order:"asc"},{updatedAt:r}]:[{order:"asc"},{updatedAt:"desc"}]})}async findById(e){return await this.prisma.sDHCTeamMember.findFirst({where:{id:e},include:{user:{omit:{passwordHash:!0}}}})}async count({filter:{role:e}}){let r={};return e&&(r.role={contains:e,mode:"insensitive"}),await this.prisma.sDHCTeamMember.count({where:r})}};function Ar(){return new ha(L)}function cR(){return{createSDHCTeamMemberController:new es(Ar())}}function pR(){return{findSDHCTeamMembersController:new ya(Ar())}}function dR(){return{findSDHCTeamMemberByIdController:new rs(Ar())}}function lR(){return{updateSDHCTeamMemberController:new is(Ar())}}function uR(){return{deleteSDHCTeamMemberController:new ts(Ar())}}var Jt=YE(),{authMiddleware:yd}=Z();Jt.post("/",(o,e,r)=>{yd.authenticated(o,e,r)},async(o,e)=>{let{createSDHCTeamMemberController:r}=cR();await r.handle(o,e)});Jt.get("/",async(o,e)=>{let{findSDHCTeamMembersController:r}=pR();await r.handle(o,e)});Jt.get("/:id",async(o,e)=>{let{findSDHCTeamMemberByIdController:r}=dR();await r.handle(o,e)});Jt.put("/:id",(o,e,r)=>{yd.authenticated(o,e,r)},async(o,e)=>{let{updateSDHCTeamMemberController:r}=lR();await r.handle(o,e)});Jt.delete("/:id",(o,e,r)=>{yd.authenticated(o,e,r)},async(o,e)=>{let{deleteSDHCTeamMemberController:r}=uR();await r.handle(o,e)});import{Router as XE}from"express";var Ra=class{constructor(e){this.userRepository=e}async handle(e,r){try{let t=await this.userRepository.find();r.status(200).json(t)}catch(t){if(t instanceof Error)throw new a(t.message)}}};function gR(){return{updateUserController:new as(he(),F())}}function fR(){return{deleteUserController:new ns(he())}}function yR(){return{findUsersController:new Ra(he())}}function hR(){return{findUserController:new ss(he())}}var Dr=XE(),{authMiddleware:RR}=Z();Dr.get("/:id",async(o,e)=>{let{findUserController:r}=hR();await r.handle(o,e)});Dr.put("/",(o,e,r)=>{RR.authenticated(o,e,r)},K.single("avatarImage"),async(o,e)=>{let{updateUserController:r}=gR();await r.handle(o,e)});Dr.delete("/:id",(o,e,r)=>{RR.authenticated(o,e,r)},async(o,e)=>{let{deleteUserController:r}=fR();await r.handle(o,e)});Dr.get("/",async(o,e)=>{let{findUsersController:r}=yR();await r.handle(o,e)});import{Router as oj}from"express";import{extendZodWithOpenApi as $E}from"@asteasolutions/zod-to-openapi";import Le from"zod";var QE=5,IR=1024,ej=IR*IR,tj=QE*ej;$E(Le);var rj=Le.object({title:Le.string().min(1,"T\xEDtulo \xE9 obrigat\xF3rio."),description:Le.string().optional(),scheduledAt:Le.coerce.date(),webinarLink:Le.url().optional(),guestIds:Le.transform(o=>typeof o=="string"?o.split(","):o).pipe(Le.array(Le.uuid())),thumbnail:Le.any().refine(o=>!o||typeof o=="object"&&typeof o.mimetype=="string"&&o.mimetype.startsWith("image/")&&typeof o.size=="number"&&o.size<=tj,"A thumbnail deve ser uma imagem v\xE1lida de no m\xE1ximo 5MB.")}),Ia=class{constructor(e,r){this.webinarRepository=e;this.firebaseStorageService=r}async handle(e,r){try{let{title:t,description:i,scheduledAt:n,webinarLink:s,guestIds:m,thumbnail:c}=rj.parse({...e.body,thumbnail:e.file}),d=await this.webinarRepository.create({title:t,description:i,scheduledAt:n,webinarLink:s||void 0,guestIds:m}),h=await this.firebaseStorageService.uploadFile({file:c,folder:M.WEBINAR,id:d.id});return await this.webinarRepository.update({id:d.id,thumbnailUrl:h}),r.sendStatus(201)}catch(t){if(t instanceof Error)throw new a(t.message)}}};var ba=class{constructor(e){this.prisma=e}async create({title:e,description:r,scheduledAt:t,webinarLink:i,thumbnailUrl:n,guestIds:s}){return await this.prisma.webinar.create({data:{title:e,description:r,scheduledAt:t,webinarLink:i,thumbnailUrl:n,guests:s?{connect:s.map(m=>({id:m}))}:void 0}})}async find({pagination:{offset:e,limit:r},filter:{description:t,orderBy:i,title:n}}){let s={},m=[];return n&&m.push({title:{contains:n,mode:"insensitive"}}),t&&m.push({description:{contains:t,mode:"insensitive"}}),m.length>0&&(s.OR=m),await this.prisma.webinar.findMany({where:s,include:{guests:{omit:{passwordHash:!0}}},orderBy:{updatedAt:i},skip:e,take:r})}async findById(e){return await this.prisma.webinar.findFirst({where:{id:e},include:{guests:{omit:{passwordHash:!0}}}})}async update({id:e,title:r,description:t,scheduledAt:i,webinarLink:n,thumbnailUrl:s,guestIds:m}){await this.prisma.webinar.update({where:{id:e},data:{title:r,description:t,scheduledAt:i,webinarLink:n,thumbnailUrl:s,guests:m?{connect:m.map(c=>({id:c}))}:void 0}})}async deleteById(e){await this.prisma.webinar.delete({where:{id:e}})}async count({filter:{description:e,title:r}}){let t={},i=[];return r&&i.push({title:{contains:r,mode:"insensitive"}}),e&&i.push({description:{contains:e,mode:"insensitive"}}),i.length>0&&(t.OR=i),await this.prisma.webinar.count({where:t})}};function Fr(){return new ba(L)}function bR(){return{createWebinarController:new Ia(Fr(),F())}}function CR(){return{findWebinarsController:new ps(Fr())}}function wR(){return{findWebinarByIdController:new cs(Fr())}}function SR(){return{updateWebinarController:new ds(Fr(),F())}}function vR(){return{deleteWebinarController:new ms(Fr(),F())}}var Yt=oj(),{authMiddleware:so}=Z();Yt.post("/",(o,e,r)=>{so.isAdmin(o,e,r)},K.single("thumbnail"),async(o,e)=>{let{createWebinarController:r}=bR();await r.handle(o,e)});Yt.get("/",(o,e,r)=>{so.isAdmin(o,e,r)},async(o,e)=>{let{findWebinarsController:r}=CR();await r.handle(o,e)});Yt.get("/:id",(o,e,r)=>{so.isAdmin(o,e,r)},async(o,e)=>{let{findWebinarByIdController:r}=wR();await r.handle(o,e)});Yt.put("/:id",(o,e,r)=>{so.isAdmin(o,e,r)},K.single("thumbnail"),async(o,e)=>{let{updateWebinarController:r}=SR();await r.handle(o,e)});Yt.delete("/:id",(o,e,r)=>{so.isAdmin(o,e,r)},async(o,e)=>{let{deleteWebinarController:r}=vR();await r.handle(o,e)});import{Router as mj}from"express";import{extendZodWithOpenApi as ij}from"@asteasolutions/zod-to-openapi";import Br from"zod";var nj=1,sj=7;ij(Br);var aj=Br.object({page:Br.coerce.number().min(1).default(nj),limit:Br.coerce.number().min(1).default(sj),role:Br.string().optional(),orderBy:Br.enum(["asc","desc"]).optional()}),Ca=class{constructor(e){this.workGroupTeamMemberRepository=e}async handle(e,r){try{let{page:t,limit:i,...n}=aj.parse(e.query),s=i*t-i,[m,c]=await Promise.all([this.workGroupTeamMemberRepository.find({pagination:{offset:s,limit:i},filter:n}),this.workGroupTeamMemberRepository.count({filter:n})]),d=Math.max(Math.ceil(c/i),1);r.status(200).json({page:t,totalPages:d,offset:s,limit:i,members:m})}catch(t){if(t instanceof Error)throw new a(t.message)}}};var wa=class{constructor(e){this.prisma=e}async create(e){await this.prisma.workGroupTeamMember.create({data:{...e}})}async update(e){let{id:r,...t}=e;await this.prisma.workGroupTeamMember.update({where:{id:r},data:t})}async deleteById(e){await this.prisma.workGroupTeamMember.delete({where:{id:e}})}async find({pagination:e,filter:{role:r,orderBy:t}}){let i={};return r&&(i.role={contains:r,mode:"insensitive"}),await this.prisma.workGroupTeamMember.findMany({where:i,include:{user:{omit:{passwordHash:!0}}},orderBy:{updatedAt:t??"desc"},...e&&{skip:e.offset,take:e.limit}})}async findById(e){return await this.prisma.workGroupTeamMember.findFirst({where:{id:e},include:{user:{omit:{passwordHash:!0}}}})}async count({filter:{role:e}}){let r={};return e&&(r.role={contains:e,mode:"insensitive"}),await this.prisma.workGroupTeamMember.count({where:r})}};function qr(){return new wa(L)}function ER(){return{createWorkGroupTeamMemberController:new ls(qr())}}function jR(){return{findWorkGroupTeamMembersController:new Ca(qr())}}function xR(){return{findWorkGroupTeamMemberByIdController:new gs(qr())}}function MR(){return{updateWorkGroupTeamMemberController:new ys(qr())}}function PR(){return{deleteWorkGroupTeamMemberController:new us(qr())}}var Xt=mj(),{authMiddleware:hd}=Z();Xt.post("/",(o,e,r)=>{hd.authenticated(o,e,r)},async(o,e)=>{let{createWorkGroupTeamMemberController:r}=ER();await r.handle(o,e)});Xt.get("/",async(o,e)=>{let{findWorkGroupTeamMembersController:r}=jR();await r.handle(o,e)});Xt.get("/:id",async(o,e)=>{let{findWorkGroupTeamMemberByIdController:r}=xR();await r.handle(o,e)});Xt.put("/:id",(o,e,r)=>{hd.authenticated(o,e,r)},async(o,e)=>{let{updateWorkGroupTeamMemberController:r}=MR();await r.handle(o,e)});Xt.delete("/:id",(o,e,r)=>{hd.authenticated(o,e,r)},async(o,e)=>{let{deleteWorkGroupTeamMemberController:r}=PR();await r.handle(o,e)});var ee=Rd(),dj={methods:["GET","POST","PUT","DELETE"],origin:["http://localhost:3000","https://rede-ct.vercel.app"],credentials:!0};ee.use(pj(dj));ee.use(Rd.json());ee.use(Rd.urlencoded({extended:!1}));ee.use("/docs",cj({content:If,theme:"kepler"}));ee.use("/",td);ee.use("/auth",Ze);ee.use("/user",Dr);ee.use("/news",bt);ee.use("/certification",Dt);ee.use("/pendency",Wt);ee.use("/researcher",wt);ee.use("/in-memoriam",It);ee.use("/etp",Bt);ee.use("/partner",Lt);ee.use("/management-team",Gt);ee.use("/sdhc-team-member",Jt);ee.use("/legitimator-committee-member",Nt);ee.use("/regiment",Ct);ee.use("/meeting",je);ee.use("/international-scientific-congress",me);ee.use("/regional-congress",ce);ee.use("/webinars",Yt);ee.use("/courses",Ft);ee.use("/post-graduate-programs",_t);ee.use("/event",qt);ee.use("/scientific-journals",Kt);ee.use("/book-volumes",At);ee.use("/scientific-articles",Zt);ee.use("/work-group-team-member",Xt);ee.use("/reference-center-team-member",zt);ee.use("/law",Ot);ee.use((o,e,r,t)=>{let{errorHandler:i}=Id();i.handle(o,e,r,t)});var uj=lj.createServer(ee),TR=4e3;uj.listen(TR,()=>{console.log(`\u{1F680} Aplica\xE7\xE3o rodando na porta ${TR}.`)});
